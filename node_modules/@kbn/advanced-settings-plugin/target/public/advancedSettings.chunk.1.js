(window.advancedSettings_bundle_jsonpfunction=window.advancedSettings_bundle_jsonpfunction||[]).push([[1,2],Array(27).concat([function(e,t,n){e.exports=n(11)(3)},function(e,t,n){"use strict";var a,s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function r(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},a=[],s=0;s<e.length;s++){var o=e[s],l=t.base?o[0]+t.base:o[0],c=n[l]||0,d="".concat(l," ").concat(c);n[l]=c+1;var u=r(d),g={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(g)):i.push({identifier:d,updater:f(g,t),references:1}),a.push(d)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=n.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=s(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,a){var s=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,s);else{var i=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function g(e,t,n){var a=n.css,s=n.media,i=n.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var p=null,h=0;function f(e,t){var n,a,s;if(t.singleton){var i=h++;n=p||(p=l(t)),a=u.bind(null,n,i,!1),s=u.bind(null,n,i,!0)}else n=l(t),a=g.bind(null,n,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var s=r(n[a]);i[s].references--}for(var l=o(e,t),c=0;c<n.length;c++){var d=r(n[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}n=l}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,a,s,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(n=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(s," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(l).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(a)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(s[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&s[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"Field",(function(){return field_Field})),n.d(t,"getEditableValue",(function(){return j})),n.d(t,"default",(function(){return field_Field}));var a=n(27),s=n.n(a),i=n(2),r=n.n(i),o=n(3),l=n.n(o),c=n(19),d=n.n(c),u=n(1),g=n(0),p=n(15),h=n(20),f=n(16),b=n(5);const m=({value:e,onChange:t,type:n,isReadOnly:a,a11yProps:i,name:r})=>{const l=Object(o.useCallback)((e=>{var t;const n=e.getDomNode();if(!n)return;const a=e.getOption(h.monaco.editor.EditorOption.lineHeight);let s=(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||6;s<6?s=6:s>30&&(s=30);const i=a*s;n.id=r,n.style.height=`${i}px`,e.layout()}),[r]),c=Object(o.useCallback)((e=>{const t=e.getModel();if(!t)return;const n=t.getValue().trim();t.setValue(n)}),[]),d=Object(o.useCallback)((e=>{l(e),e.onDidChangeModelContent((()=>{l(e)})),e.onDidBlurEditorWidget((()=>{c(e)}))}),[l,c]);return Object(b.jsx)(f.CodeEditor,s()({},i,{languageId:"json"===n?h.XJsonLang.ID:f.MarkdownLang,value:e,onChange:t,editorDidMount:d,width:"100%",options:{readOnly:a,lineNumbers:"off",scrollBeyondLastLine:!1,automaticLayout:!0,folding:!1,tabSize:2,scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",wrappingIndent:"indent"}}))};var v=n(9);const j=(e,t,n)=>{const a=null==t?n:t;switch(e){case"array":return a.join(", ");case"boolean":return!!a;case"number":return Number(a);case"image":return a;default:return a||""}};class field_Field extends o.PureComponent{constructor(...e){super(...e),r()(this,"changeImageForm",l.a.createRef()),r()(this,"handleChange",(e=>{this.props.handleChange(this.props.setting.name,e)})),r()(this,"resetField",(()=>{const{type:e,defVal:t}=this.props.setting;return"image"===e?(this.cancelChangeImage(),this.handleChange({value:j(e,t,t),changeImage:!0})):this.handleChange({value:j(e,t)})})),r()(this,"onCodeEditorChange",(e=>{const{defVal:t,type:n}=this.props.setting;let a,s={};if("json"===n){const n=Array.isArray(JSON.parse(t||"{}"));a=e||(n?"[]":"{}");try{JSON.parse(a)}catch(e){s={error:g.i18n.translate("advancedSettings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"}),isInvalid:!0}}}else a=e;this.handleChange({value:a,...s})})),r()(this,"onFieldChangeSwitch",(e=>this.onFieldChange(e.target.checked))),r()(this,"onFieldChangeEvent",(e=>this.onFieldChange(e.target.value))),r()(this,"onFieldChange",(e=>{const{type:t,value:n,defVal:a,options:s}=this.props.setting;let i;switch(t){case"boolean":const{unsavedChanges:r}=this.props;i=!(r?r.value:j(t,n,a));break;case"number":i=Number(e);break;case"select":i="number"==typeof(null==s?void 0:s[0])?Number(e):e;break;default:i=e}this.handleChange({value:i})})),r()(this,"onImageChange",(async e=>{if(null==e)return;if(!e.length)return void this.setState({unsavedValue:null});const t=e[0];try{let e="";t instanceof File&&(e=await this.getImageAsBase64(t)),this.handleChange({changeImage:!0,value:e})}catch(e){this.props.toasts.addDanger(g.i18n.translate("advancedSettings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"})),this.cancelChangeImage()}})),r()(this,"changeImage",(()=>{this.handleChange({value:null,changeImage:!0})})),r()(this,"cancelChangeImage",(()=>{var e;null!==(e=this.changeImageForm.current)&&void 0!==e&&e.fileInput&&(this.changeImageForm.current.fileInput.value="",this.changeImageForm.current.handleChange()),this.props.clearChange&&this.props.clearChange(this.props.setting.name)}))}getDisplayedDefaultValue(e,t,n={}){if(null==t||""===t)return"null";switch(e){case"array":return t.join(", ");case"select":return n.hasOwnProperty(String(t))?n[String(t)]:String(t);default:return String(t)}}componentDidUpdate(e){var t,n;"image"!==e.setting.type||null===(t=e.unsavedChanges)||void 0===t||!t.value||null!==(n=this.props.unsavedChanges)&&void 0!==n&&n.value||this.cancelChangeImage()}async getImageAsBase64(e){const t=new FileReader;return t.readAsDataURL(e),new Promise(((e,n)=>{t.onload=()=>{e(t.result)},t.onerror=e=>{n(e)}}))}renderField(e,t){const{enableSaving:n,unsavedChanges:a,loading:i}=this.props,{name:r,value:o,type:l,options:c,optionLabels:d={},isOverridden:g,defVal:h,ariaName:f}=e,y=t?{"aria-label":f,"aria-describedby":t}:{"aria-label":f},x=a?a.value:j(l,o,h);switch(l){case"boolean":return Object(b.jsx)(u.EuiSwitch,s()({label:x?Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.onLabel",defaultMessage:"On"}):Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.offLabel",defaultMessage:"Off"}),checked:!!x,onChange:this.onFieldChangeSwitch,disabled:i||g||!n,"data-test-subj":`advancedSetting-editField-${r}`},y));case"markdown":case"json":return Object(b.jsx)("div",{"data-test-subj":`advancedSetting-editField-${r}`},Object(b.jsx)(m,{value:x,onChange:this.onCodeEditorChange,type:l,isReadOnly:g||!n,a11yProps:y,name:`advancedSetting-editField-${r}-editor`}));case"image":const t=null==a?void 0:a.changeImage;return Object(v.e)(e)||t?Object(b.jsx)(u.EuiFilePicker,{disabled:i||g||!n,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:this.changeImageForm,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`,"aria-label":r}):Object(b.jsx)(u.EuiImage,s()({},y,{allowFullScreen:!0,url:o,alt:r}));case"select":return Object(b.jsx)(u.EuiSelect,s()({},y,{value:x,options:c.map((e=>({text:d.hasOwnProperty(e)?d[e]:e,value:e}))),onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"number":return Object(b.jsx)(u.EuiFieldNumber,s()({},y,{value:x,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}));case"color":return Object(b.jsx)(u.EuiColorPicker,s()({},y,{color:x,onChange:this.onFieldChange,disabled:i||g||!n,format:"hex","data-test-subj":`advancedSetting-editField-${r}`}));default:return Object(b.jsx)(u.EuiFieldText,s()({},y,{value:x,onChange:this.onFieldChangeEvent,isLoading:i,disabled:i||g||!n,fullWidth:!0,"data-test-subj":`advancedSetting-editField-${r}`}))}}renderLabel(e){return e.name}renderHelpText(e){if(e.isOverridden)return Object(b.jsx)(u.EuiText,{size:"xs"},Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}));const t=this.props.enableSaving,n=this.renderResetToDefaultLink(e),a=this.renderChangeImageLink(e);return t&&(n||a)?Object(b.jsx)("span",null,n,a):null}renderTitle(e){const{unsavedChanges:t}=this.props,n=null==t?void 0:t.isInvalid,a=t?n?g.i18n.translate("advancedSettings.field.invalidIconLabel",{defaultMessage:"Invalid"}):g.i18n.translate("advancedSettings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}):void 0;return Object(b.jsx)("h3",null,Object(b.jsx)("span",{className:"mgtAdvancedSettings__fieldTitle"},e.displayName||e.name),e.isCustom?Object(b.jsx)(u.EuiIconTip,{type:"asterisk",color:"primary","aria-label":g.i18n.translate("advancedSettings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"",t?Object(b.jsx)(u.EuiIconTip,{anchorClassName:"mgtAdvancedSettings__fieldTitleUnsavedIcon",type:n?"warning":"dot",color:n?"danger":"warning","aria-label":a,content:a}):"")}renderDescription(e){let t,n;if(e.deprecation){const t=this.props.docLinks;n=Object(b.jsx)(l.a.Fragment,null,Object(b.jsx)(u.EuiToolTip,{content:e.deprecation.message},Object(b.jsx)(u.EuiBadge,{color:"warning",onClick:()=>{window.open(t.management[e.deprecation.docLinksKey],"_blank")},onClickAriaLabel:g.i18n.translate("advancedSettings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:e.name}})},"Deprecated")),Object(b.jsx)(u.EuiSpacer,{size:"s"}))}return t=l.a.isValidElement(e.description)?e.description:Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description||""}}),Object(b.jsx)(o.Fragment,null,n,t,this.renderDefaultValue(e))}renderDefaultValue(e){const{type:t,defVal:n,optionLabels:a}=e;if(!Object(v.e)(e))return Object(b.jsx)(o.Fragment,null,Object(b.jsx)(u.EuiSpacer,{size:"s"}),Object(b.jsx)(u.EuiText,{size:"xs"},"json"===t?Object(b.jsx)(o.Fragment,null,Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:Object(b.jsx)(u.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:n.length>=500?300:void 0},this.getDisplayedDefaultValue(t,n))}})):Object(b.jsx)(o.Fragment,null,Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:Object(b.jsx)(u.EuiCode,null,this.getDisplayedDefaultValue(t,n,a))}}))))}renderResetToDefaultLink(e){var t;const{defVal:n,ariaName:a,name:s}=e;if(n!==(null===(t=this.props.unsavedChanges)||void 0===t?void 0:t.value)&&!Object(v.e)(e)&&!this.props.loading)return Object(b.jsx)("span",null,Object(b.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:a}}),onClick:this.resetField,"data-test-subj":`advancedSetting-resetField-${s}`},Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}renderChangeImageLink(e){var t;const n=null===(t=this.props.unsavedChanges)||void 0===t?void 0:t.changeImage,{type:a,value:s,ariaName:i,name:r}=e;if("image"===a&&s&&!n)return Object(b.jsx)("span",null,Object(b.jsx)(u.EuiLink,{"aria-label":g.i18n.translate("advancedSettings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:i}}),onClick:this.changeImage,"data-test-subj":`advancedSetting-changeImage-${r}`},Object(b.jsx)(p.FormattedMessage,{id:"advancedSettings.field.changeImageLinkText",defaultMessage:"Change image"})))}render(){const{setting:e,unsavedChanges:t}=this.props,n=null==t?void 0:t.error,a=null==t?void 0:t.isInvalid,s=d()("mgtAdvancedSettings__field",{"mgtAdvancedSettings__field--unsaved":t,"mgtAdvancedSettings__field--invalid":a}),i=`${e.name}-group`,r=`${e.name}-unsaved`;return Object(b.jsx)(u.EuiDescribedFormGroup,{id:i,className:s,title:this.renderTitle(e),description:this.renderDescription(e),fullWidth:!0},Object(b.jsx)(u.EuiFormRow,{isInvalid:a,error:n,label:this.renderLabel(e),helpText:this.renderHelpText(e),className:"mgtAdvancedSettings__fieldRow",hasChildLabel:"boolean"!==e.type,fullWidth:!0},Object(b.jsx)(l.a.Fragment,null,this.renderField(e,t?`${i} ${r}`:void 0),t&&Object(b.jsx)(u.EuiScreenReaderOnly,null,Object(b.jsx)("p",{id:`${r}`},t.error?t.error:g.i18n.translate("advancedSettings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."}))))))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),s=n(32),i=a.__importDefault(n(34));t.default=function(e,t){i.default(e,t,s.isDeepEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=n(18).__importDefault(n(33));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,s,i;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(s=a;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=a;0!=s--;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=a;0!=s--;){var r=i[s];if(!("_owner"===r&&t.$$typeof||e(t[r],n[r])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3);t.default=function(e,t,n){var s=a.useRef(void 0);s.current&&n(t,s.current)||(s.current=t),a.useEffect(e,s.current)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),s=n(3),i=a.__importDefault(n(36));t.default=function(e,t){var n=s.useState(t),a=n[0],r=n[1];return i.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),s="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=s},function(e,t,n){"use strict";const a=n(38),s=n(39),i=n(40);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}function l(e,t){return t.decode?s(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,a)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===a[e]&&(a[e]={}),a[e][t[1]]=n):a[e]=n};case"bracket":return(e,n,a)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==a[e]?a[e]=[].concat(a[e],n):a[e]=[n]:a[e]=n};case"comma":case"separator":return(t,n,a)=>{const s="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);a[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),a=Object.create(null);if("string"!=typeof e)return a;if(!(e=e.trim().replace(/^[?#&]/,"")))return a;for(const s of e.split("&")){let[e,r]=i(t.decode?s.replace(/\+/g," "):s,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),n(l(e,t),r,a)}for(const e of Object.keys(a)){const n=a[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=g(n[e],t);else a[e]=g(n,t)}return!1===t.sort?a:(!0===t.sort?Object.keys(a).sort():Object.keys(a).sort(t.sort)).reduce(((e,t)=>{const n=a[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}t.extract=u,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],a=function(e){switch(e.arrayFormat){case"index":return t=>(n,a)=>{const s=n.length;return void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,[o(t,e),"[",s,"]"].join("")]:[...n,[o(t,e),"[",o(s,e),"]=",o(a,e)].join("")]};case"bracket":return t=>(n,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(a,e)].join("")];case"comma":case"separator":return t=>(n,a)=>null==a||0===a.length?n:0===n.length?[[o(t,e),"=",o(a,e)].join("")]:[[n,o(a,e)].join(e.arrayFormatSeparator)];default:return t=>(n,a)=>void 0===a||e.skipNull&&null===a||e.skipEmptyString&&""===a?n:null===a?[...n,o(t,e)]:[...n,[o(t,e),"=",o(a,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const i=Object.keys(s);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const s=e[n];return void 0===s?"":null===s?o(n,t):Array.isArray(s)?s.reduce(a(n),[]).join("&"):o(n,t)+"="+o(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,a]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(u(e),t)},t&&t.parseFragmentIdentifier&&a?{fragmentIdentifier:l(a,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const a=d(e.url).split("?")[0]||"",s=t.extract(e.url),i=t.parse(s,{sort:!1}),r=Object.assign(i,e.query);let l=t.stringify(r,n);l&&(l=`?${l}`);let c=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,n)}`),`${a}${l}${c}`}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var a="%[a-f0-9]{2}",s=new RegExp("("+a+")|([^%]+?)","gi"),i=new RegExp("("+a+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],r(n),r(a))}function o(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(s)||[],n=1;n<t.length;n++)t=(e=r(t,n).join("")).match(s)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var a=o(n[0]);a!==n[0]&&(t[n[0]]=a)}n=i.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),r=0;r<s.length;r++){var l=s[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(3);t.default=function(e){a.useEffect(e,[])}},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(43);case"v8light":return n(45)}},function(e,t,n){var a=n(28),s=n(44);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){(t=n(29)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{margin-left:-8px;padding-left:8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #f3d371}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #f86b63}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width:574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #f3d371;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}",""]),e.exports=t},function(e,t,n){var a=n(28),s=n(46);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,n){(t=n(29)(!1)).push([e.i,".mgtAdvancedSettings__field+*{margin-top:16px}.mgtAdvancedSettings__field .mgtAdvancedSettings__fieldTitle{margin-left:-8px;padding-left:8px}.mgtAdvancedSettings__field--unsaved .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #fec514}.mgtAdvancedSettings__field--invalid .mgtAdvancedSettings__fieldTitle{box-shadow:-4px 0 #bd271e}.mgtAdvancedSettings__fieldTitleUnsavedIcon{margin-left:8px}@media only screen and (max-width:574px){.mgtAdvancedSettingsForm__unsavedCount{display:none}}.mgtAdvancedSettingsForm__unsavedCountMessage{box-shadow:-4px 0 #fec514;padding-left:8px}.mgtAdvancedSettingsForm__button{width:100%}.kbnBody--mgtAdvancedSettingsHasBottomBar .mgtPage__body{padding-bottom:64px}",""]),e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"mountManagementSection",(function(){return de}));var a=n(3),s=n.n(a),i=n(22),r=n.n(i),o=n(17),l=n(27),c=n.n(l);const d={services:{}},u=Object(a.createContext)(d);var g=n(31),p=n.n(g),h=n(5);const f=({children:e,component:t,render:n,...i})=>{const r=Object(a.useMemo)((()=>{if(t)return e=>Object(h.jsx)(s.a.Fragment,null,Object(h.jsx)(b,null),Object(h.jsx)(t,e))}),[t]);if(r)return Object(h.jsx)(o.Route,c()({},i,{component:r}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(h.jsx)(o.Route,c()({},i,{render:e=>Object(h.jsx)(s.a.Fragment,null,Object(h.jsx)(b,null),t(e))}))}return Object(h.jsx)(o.Route,i,Object(h.jsx)(b,null),e)},b=()=>{const{executionContext:e}=Object(a.useContext)(u).services,t=Object(o.useRouteMatch)();return function(e,t){p()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var m=n(21);const v=({children:e,...t})=>Object(h.jsx)(o.Router,t,Object(h.jsx)(m.CompatRouter,null,e));var j=n(10);const y=({legacySwitch:e=!0,children:t})=>{const n=Object(o.useRouteMatch)();return e?Object(h.jsx)(o.Switch,null,t):Object(h.jsx)(m.Routes,null,a.Children.map(t,(e=>{if(s.a.isValidElement(e)&&e.type===f){var a;const i=Object(j.replace)(null==e?void 0:e.props.path,n.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(h.jsx)(m.Route,{path:i,element:Object(h.jsx)(s.a.Fragment,null,Object(h.jsx)(b,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(h.jsx)(e.props.component,null)||r&&r()||t)})}return e})))};var x=n(0),S=n(23),O=n(35),C=n.n(O),_=n(24),E=n.n(_),F=n(1);let T;!function(e){e.preboot="preboot",e.standard="standard"}(T||(T={}));const w="eui-global",M="eui-utilities",k={darkMode:!1},A=[F.euiStylisPrefixer],I=E()({key:"css",stylisPlugins:A,container:document.querySelector('meta[name="emotion"]')}),L=E()({key:w,stylisPlugins:A,container:document.querySelector(`meta[name="${w}"]`)}),R=E()({key:M,stylisPlugins:A,container:document.querySelector(`meta[name="${M}"]`)});I.compat=!0,L.compat=!0,R.compat=!0;const N={default:I,global:L,utility:R},B=({theme:{theme$:e},globalStyles:t,colorMode:n,children:s})=>{const i=C()(e,k),r=Object(a.useMemo)((()=>(e=>e.darkMode?F.COLOR_MODES_STANDARD.dark:F.COLOR_MODES_STANDARD.light)(i)),[i]),o=n||r,l=!1!==t&&void 0;return Object(h.jsx)(F.EuiProvider,{cache:N,colorMode:o,globalStyles:l,utilityClasses:l},s)},U=({children:e,i18n:t,...n})=>Object(h.jsx)(B,n,Object(h.jsx)(t.Context,null,e));var D=n(25);const q=({children:e,...t})=>Object(h.jsx)(U,c()({globalStyles:!1},t),Object(h.jsx)(D.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(h.jsx)(D.KibanaErrorBoundary,null,e)));var $=n(2),P=n.n($),V=n(16),z=n(15);class advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement extends a.Component{constructor(...e){super(...e),P()(this,"shouldComponentUpdate",(e=>e.queryText!==this.props.queryText))}render(){const e=Object.values(this.props.settings).map((e=>e.map((e=>e.ariaName)))),t=[...e];return Object(h.jsx)(F.EuiScreenReaderOnly,null,Object(h.jsx)("div",{role:"region","aria-live":"polite","aria-label":x.i18n.translate("advancedSettings.voiceAnnouncement.ariaLabel",{defaultMessage:"Advanced Settings results info"})},Object(h.jsx)(F.EuiDelayRender,null,this.props.queryText?Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:e.length,optionLenght:t.length}}):Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.voiceAnnouncement.noSearchResultScreenReaderMessage",defaultMessage:"There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{sectionLenght:e.length,optionLenght:t.length}}))))}}var H=n(9),Q=n(30);class form_Form extends a.PureComponent{constructor(...e){super(...e),P()(this,"state",{unsavedChanges:{},loading:!1}),P()(this,"getSettingByKey",(e=>Object.values(this.props.settings).flat().find((t=>t.name===e)))),P()(this,"getCountOfUnsavedChanges",(()=>Object.keys(this.state.unsavedChanges).length)),P()(this,"getCountOfHiddenUnsavedChanges",(()=>{const e=Object.values(this.props.visibleSettings).flat().map((e=>e.name));return Object.keys(this.state.unsavedChanges).filter((t=>!e.includes(t))).length})),P()(this,"areChangesInvalid",(()=>{const{unsavedChanges:e}=this.state;return Object.values(e).some((({isInvalid:e})=>e))})),P()(this,"handleChange",((e,t)=>{const n=this.getSettingByKey(e);if(!n)return;const{type:a,defVal:s,value:i}=n,r=Object(Q.getEditableValue)(a,i,s);if(t.value===r)return this.clearChange(e);this.setState({unsavedChanges:{...this.state.unsavedChanges,[e]:t}})})),P()(this,"clearChange",(e=>{if(!this.state.unsavedChanges[e])return;const t={...this.state.unsavedChanges};delete t[e],this.setState({unsavedChanges:t})})),P()(this,"clearAllUnsaved",(()=>{this.setState({unsavedChanges:{}})})),P()(this,"saveAll",(async()=>{this.setLoading(!0);const{unsavedChanges:e}=this.state;if(Object(j.isEmpty)(e))return;const t={};let n=!1;Object.entries(e).forEach((([e,{value:a}])=>{const s=this.getSettingByKey(e);if(!s)return;const{defVal:i,type:r,requiresPageReload:o,metric:l}=s;let c=a,d=!1;switch(r){case"array":c=c.trim(),c=""===c?[]:c.split(",").map((e=>e.trim())),d=c.join(",")===i.join(",");break;case"json":const e=Array.isArray(JSON.parse(i||"{}"));c=c.trim(),c=c||(e?"[]":"{}");case"boolean":if(l&&this.props.trackUiMetric){const e=c?`${l.name}_on`:`${l.name}_off`;this.props.trackUiMetric(l.type,e)}default:d=c===i}o&&(n=!0),t[e]=d?null:c}));try{await this.props.save(t),this.clearAllUnsaved(),n&&this.renderPageReloadToast()}catch(e){this.props.toasts.addDanger(x.i18n.translate("advancedSettings.form.saveErrorMessage",{defaultMessage:"Unable to save"}))}this.setLoading(!1)})),P()(this,"renderPageReloadToast",(()=>{this.props.toasts.add({title:x.i18n.translate("advancedSettings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),toastLifeTimeMs:15e3,text:Object(V.toMountPoint)(Object(h.jsx)(V.KibanaThemeProvider,{theme$:this.props.theme},Object(h.jsx)(F.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(h.jsx)(F.EuiFlexItem,{grow:!1},Object(h.jsx)(F.EuiButton,{size:"s",onClick:()=>window.location.reload(),"data-test-subj":"windowReloadButton"},x.i18n.translate("advancedSettings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))))),color:"success"})})),P()(this,"renderCountOfUnsaved",(()=>{const e=this.getCountOfUnsavedChanges(),t=this.getCountOfHiddenUnsavedChanges();return Object(h.jsx)(F.EuiText,{className:"mgtAdvancedSettingsForm__unsavedCountMessage"},Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }{hiddenCount, plural, =0 {} other {, # hidden} }",values:{unsavedCount:e,hiddenCount:t}}))})),P()(this,"renderBottomBar",(()=>{const e=this.areChangesInvalid();return Object(h.jsx)(F.EuiBottomBar,{"data-test-subj":"advancedSetting-bottomBar"},Object(h.jsx)(F.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"s"},Object(h.jsx)(F.EuiFlexItem,{grow:!1,className:"mgtAdvancedSettingsForm__unsavedCount"},Object(h.jsx)("p",{id:"aria-describedby.countOfUnsavedSettings"},this.renderCountOfUnsaved())),Object(h.jsx)(F.EuiFlexItem,null),Object(h.jsx)(F.EuiFlexItem,{grow:!1},Object(h.jsx)(F.EuiButtonEmpty,{color:"text",size:"s",iconType:"cross",onClick:this.clearAllUnsaved,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"advancedSetting-cancelButton"},x.i18n.translate("advancedSettings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),Object(h.jsx)(F.EuiFlexItem,{grow:!1},Object(h.jsx)(F.EuiToolTip,{content:e&&x.i18n.translate("advancedSettings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},Object(h.jsx)(F.EuiButton,{className:"mgtAdvancedSettingsForm__button",disabled:e,color:"success",fill:!0,size:"s",iconType:"check",onClick:this.saveAll,"aria-describedby":"aria-describedby.countOfUnsavedSettings",isLoading:this.state.loading,"data-test-subj":"advancedSetting-saveButton"},x.i18n.translate("advancedSettings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))}))}setLoading(e){this.setState({loading:e})}renderClearQueryLink(e,t){const{clearQuery:n}=this.props;return e!==t?Object(h.jsx)(F.EuiFlexItem,{grow:!1},Object(h.jsx)("em",null,Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:e-t,clearSearch:Object(h.jsx)(F.EuiLink,{onClick:n},Object(h.jsx)("em",null,Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}}))):null}renderCategory(e,t,n){return Object(h.jsx)(a.Fragment,{key:e},Object(h.jsx)(F.EuiSplitPanel.Outer,{hasBorder:!0},Object(h.jsx)(F.EuiSplitPanel.Inner,{color:"subdued"},Object(h.jsx)(F.EuiFlexGroup,{alignItems:"baseline"},Object(h.jsx)(F.EuiFlexItem,{grow:!1},Object(h.jsx)(F.EuiTitle,null,Object(h.jsx)("h2",null,Object(H.d)(e)))),this.renderClearQueryLink(n,t.length))),Object(h.jsx)(F.EuiSplitPanel.Inner,null,t.map((e=>Object(h.jsx)(Q.Field,{key:e.name,setting:e,handleChange:this.handleChange,unsavedChanges:this.state.unsavedChanges[e.name],clearChange:this.clearChange,enableSaving:this.props.enableSaving,docLinks:this.props.docLinks,toasts:this.props.toasts}))))),Object(h.jsx)(F.EuiSpacer,{size:"l"}))}maybeRenderNoSettings(e){return this.props.showNoResultsMessage?Object(h.jsx)(F.EuiCallOut,{color:"danger",title:Object(h.jsx)(s.a.Fragment,null,Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.form.noSearchResultText",defaultMessage:"No settings found for {queryText} {clearSearch}",values:{clearSearch:Object(h.jsx)(F.EuiLink,{onClick:e},Object(h.jsx)(z.FormattedMessage,{id:"advancedSettings.form.clearNoSearchResultText",defaultMessage:"(clear search)"})),queryText:Object(h.jsx)("strong",null,this.props.queryText)}}))}):null}render(){const{unsavedChanges:e}=this.state,{visibleSettings:t,categories:n,categoryCounts:s,clearQuery:i}=this.props,r=[],o=!Object(j.isEmpty)(e);return o?document.body.classList.add("kbnBody--mgtAdvancedSettingsHasBottomBar"):document.body.classList.remove("kbnBody--mgtAdvancedSettingsHasBottomBar"),n.forEach((e=>{t[e]&&t[e].length&&r.push(e)})),Object(h.jsx)(a.Fragment,null,Object(h.jsx)("div",null,r.length?r.map((e=>this.renderCategory(e,t[e],s[e]))):this.maybeRenderNoSettings(i)),o&&this.renderBottomBar())}}const K="query";class advanced_settings_AdvancedSettings extends a.Component{constructor(e){super(e),P()(this,"saveConfig",(async e=>{const t=Object.entries(e).map((([e,t])=>this.props.uiSettingsClient.set(e,t)));return Promise.all(t)}))}render(){return Object(h.jsx)("div",null,Object(h.jsx)(F.EuiSpacer,{size:"xl"}),Object(h.jsx)(F.EuiCallOut,{title:this.props.callOutTitle,iconType:"warning"},Object(h.jsx)("p",null,this.props.callOutSubtitle)),Object(h.jsx)(F.EuiSpacer,{size:"xl"}),Object(h.jsx)(advanced_settings_voice_announcement_AdvancedSettingsVoiceAnnouncement,{queryText:this.props.queryText,settings:this.props.visibleSettings}),Object(h.jsx)(V.KibanaContextProvider,{services:{uiSettings:this.props.settingsService.client,settings:this.props.settingsService,theme:{theme$:this.props.theme}}},Object(h.jsx)(form_Form,{settings:this.props.groupedSettings,visibleSettings:this.props.visibleSettings,categories:this.props.categories,categoryCounts:this.props.categoryCounts,clearQuery:this.props.clearQuery,save:this.saveConfig,showNoResultsMessage:this.props.noResults,enableSaving:this.props.enableSaving,docLinks:this.props.docLinks,toasts:this.props.toasts,trackUiMetric:this.props.trackUiMetric,queryText:this.props.queryText,theme:this.props.theme})))}}var W=n(41),J=n.n(W),G=n(26),X=n(37);const Y=e=>{const t=e.getAll();return Object.entries(t).map((([t,n])=>Object(H.f)({def:n,name:t,value:n.userValue,isCustom:e.isCustom(t),isOverridden:e.isOverridden(t)}))).filter((e=>!e.readOnly)).filter((e=>!e.isCustom)).sort(H.b)},Z=e=>e.reduce(((e,t)=>{const n=t.category[0];return(e[n]=e[n]||[]).push(t),e}),{}),ee=e=>Object.keys(e).reduce(((t,n)=>(t[n]=e[n].length,t)),{}),te=e=>Object.keys(e).sort(((e,t)=>e===H.a?-1:t===H.a||e>t?1:e===t?0:-1));var ne=n(4);const ae={defaultSpaceTabTitle:x.i18n.translate("advancedSettings.spaceSettingsTabTitle",{defaultMessage:"Space Settings"}),defaultSpaceCalloutTitle:x.i18n.translate("advancedSettings.defaultSpaceCalloutTitle",{defaultMessage:"Changes will affect the current space."}),defaultSpaceCalloutSubtitle:x.i18n.translate("advancedSettings.defaultSpaceCalloutSubtitle",{defaultMessage:"Changes will only be applied to the current space. These settings are intended for advanced users, as improper configurations may adversely affect aspects of Kibana."}),globalTabTitle:x.i18n.translate("advancedSettings.globalSettingsTabTitle",{defaultMessage:"Global Settings"}),globalCalloutTitle:x.i18n.translate("advancedSettings.globalCalloutTitle",{defaultMessage:"Changes will affect all user settings across all spaces"}),globalCalloutSubtitle:x.i18n.translate("advancedSettings.globalCalloutSubtitle",{defaultMessage:"Changes will be applied to all users across all spaces. This includes both native Kibana users and single-sign on users."}),advancedSettingsTitle:x.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"})},se="space-settings",ie=e=>{var t;const{sectionRegistry:n,history:i,settingsService:r,enableSaving:o,enableShowing:l,...d}=e,u=r.client,g=r.globalClient,[p,f]=Object(a.useState)(Y(u)),[b,m]=Object(a.useState)(Y(g)),[v,j]=Object(a.useState)({namespace:Z(p),global:Z(b)}),[y,x]=Object(a.useState)({namespace:ee(v.namespace),global:ee(v.global)}),[S,O]=Object(a.useState)({namespace:te(v.namespace),global:te(v.global)}),[C,_]=Object(a.useState)({filteredSettings:{global:{},namespace:{}},filteredSections:{global:n.getGlobalSections(),space:n.getSpacesSections()},query:F.Query.parse("")});J()((()=>{_(B(void 0,!0));const e=(e,t)=>{const n={...v};n[t]=Z(e),j(n);const a={...S};a[t]=te(v[t]),O(a);const s={...y};s[t]=ee(v[t]),x(s);const i={...B(void 0,!0)};i.filteredSettings[t]=Z(F.Query.execute(i.query,e)),_(i)},t=u.getUpdate$().subscribe((()=>{const t=Y(u);f(t),e(t,"namespace")})),n=g.getUpdate$().subscribe((()=>{const t=Y(g);m(t),e(t,"global")}));""!==window.location.hash&&setTimeout((()=>(()=>{var e;const{hash:t}=window.location,n=t.replace("#",""),a=document.getElementById(n);let s=0;const i=null===(e=document.getElementById("globalHeaderBars"))||void 0===e?void 0:e.getElementsByClassName("euiHeader");i&&Array.from(i).forEach((e=>{s+=e.offsetHeight})),a&&(a.scrollIntoView(),window.scrollBy(0,-s))})()),0);const a=i.listen((({search:e})=>{_(B(e))}));return()=>{a(),t.unsubscribe(),n.unsubscribe()}}));const E=Object(a.useCallback)(((e="")=>{const t=G.url.addQueryParam(window.location.search,K,e);i.push({pathname:"",search:t})}),[i]),T=Object(a.useMemo)((()=>S.global.concat(S.namespace)),[S.global,S.namespace]),w=e=>"namespace"===e?ae.defaultSpaceCalloutTitle:ae.globalCalloutTitle,M=e=>"namespace"===e?ae.defaultSpaceCalloutSubtitle:ae.globalCalloutSubtitle,k=e=>"namespace"===e?u:g,A=e=>Object(h.jsx)(advanced_settings_AdvancedSettings,c()({groupedSettings:v[e],categoryCounts:y[e],categories:S[e],visibleSettings:C.filteredSettings[e],clearQuery:()=>E(""),noResults:C.filteredSections.global.length+C.filteredSections.space.length===0,queryText:C.query.text,callOutTitle:w(e),callOutSubtitle:M(e),settingsService:r,uiSettingsClient:k(e),enableSaving:o[e]},d)),I=[{id:se,name:ae.defaultSpaceTabTitle,append:""!==C.query.text?Object(h.jsx)(F.EuiNotificationBadge,{className:"eui-alignCenter",size:"m",key:"spaceSettings-badge"},Object.keys(C.filteredSettings.namespace).length+C.filteredSections.space.length):null,content:A("namespace")}];l.global&&I.push({id:"global-settings",name:ae.globalTabTitle,append:""!==C.query.text?Object(h.jsx)(F.EuiNotificationBadge,{className:"eui-alignCenter",size:"m",key:"spaceSettings-badge"},Object.keys(C.filteredSettings.global).length+C.filteredSections.global.length):null,content:A("global")});const[L,R]=Object(a.useState)(se),N=null===(t=I.find((e=>e.id===L)))||void 0===t?void 0:t.content,B=(t,a=!1)=>{const s=(e=>{var t,n;return null!==(n=(null!==(t=Object(X.parse)(null!=e?e:window.location.search))&&void 0!==t?t:{})[K])&&void 0!==n?n:""})(t),i=((t,n=!1)=>{try{const e=n?Object(H.c)(t):null!=t?t:"";return F.Query.parse(e)}catch({message:t}){return e.toasts.addWarning({title:ne.c,text:t}),F.Query.parse("")}})(s,a),r={namespace:Z(F.Query.execute(i,p)),global:Z(F.Query.execute(i,b))};return{query:i,filteredSettings:r,filteredSections:{global:n.getGlobalSections().filter((({queryMatch:e})=>e(i.text))),space:n.getSpacesSections().filter((({queryMatch:e})=>e(i.text)))}}},U=Object(a.useCallback)((({query:e})=>{E(e.text)}),[E]),D=Object(h.jsx)(F.EuiText,null,Object(h.jsx)("h1",{"data-test-subj":"managementSettingsTitle"},ae.advancedSettingsTitle)),q=t=>t.map((({Component:t,queryMatch:n},a)=>n(C.query.text)?Object(h.jsx)(t,{key:`component-${a}`,toasts:e.toasts,enableSaving:e.enableSaving}):null));return Object(h.jsx)("div",null,Object(h.jsx)(F.EuiFlexGroup,null,Object(h.jsx)(F.EuiFlexItem,null,D),Object(h.jsx)(F.EuiFlexItem,null,Object(h.jsx)(ne.b,{query:C.query,categories:T,onQueryChange:U}))),Object(h.jsx)(F.EuiSpacer,{size:"m"}),Object(h.jsx)(F.EuiTabs,null,I.map(((e,t)=>Object(h.jsx)(F.EuiTab,{key:t,"data-test-subj":`advancedSettingsTab-${e.id}`,onClick:()=>{return t=e.id,void R(t);var t},isSelected:e.id===L,append:e.append},e.name)))),N,L===se?Object(h.jsx)(s.a.Fragment,null,q(C.filteredSections.space)):Object(h.jsx)(s.a.Fragment,null,q(C.filteredSections.global)))};n(42);const re=x.i18n.translate("advancedSettings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),oe=[{text:re}],le={text:x.i18n.translate("advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:x.i18n.translate("advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"},ce=({match:e,location:t})=>({pathname:"/",search:S.url.addQueryParam(t.search,K,null==e?void 0:e.params[K])});async function de(e,t,n,a){t.setBreadcrumbs(oe);const[{settings:s,notifications:i,docLinks:l,application:c,chrome:d,i18n:u,theme:g}]=await e(),{advancedSettings:p,globalSettings:b}=c.capabilities,m=p.save,j=b.save,x=b.show,S=null==a?void 0:a.reportUiCounter.bind(a,"advanced_settings");return(!m||!j&&x)&&d.setBadge(le),d.docTitle.change(re),r.a.render(Object(h.jsx)(q,{i18n:u,theme:g},Object(h.jsx)(v,{history:t.history},Object(h.jsx)(y,null,Object(h.jsx)(f,{path:`/:${K}`},(e=>Object(h.jsx)(o.Redirect,{to:ce(e)}))),Object(h.jsx)(f,{path:"/"},Object(h.jsx)(ie,{history:t.history,enableSaving:{namespace:m,global:j},enableShowing:{namespace:!0,global:x},toasts:i.toasts,docLinks:l.links,settingsService:s,theme:t.theme$,sectionRegistry:n,trackUiMetric:S}))))),t.element),()=>{d.docTitle.reset(),r.a.unmountComponentAtNode(t.element)}}}])]);