/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],s=0,u=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={10:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"apm.chunk."+e+".js"}(e);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",c.name="ChunkLoadError",c.type=i,c.request=a,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var a=window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var c=o;i(i.s=28)}([function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return d}));var r=n(10),i=n.n(r),a=n(4),o=n(3);function s(e){return Object(o.a)(e)?i()(e).format("0,0.0"):a.a}function c(e,t=3){return Object(o.a)(e)?i()(e).format(`0,0.${"0".repeat(t)}`):a.a}function u(e){return Object(o.a)(e)?i()(e).format("0,0"):a.a}function l(e,t,n=a.a){if(!t||!Object(o.a)(e))return n;const r=e/t;return Math.abs(r)>=.1||0===r?i()(r).format("0%"):i()(r).format("0.0%")}function p(e,t=10){return 0===e||e>=t?u(e):s(e)}function d(e){return e<1e3?u(e):e<1e6?`${u(e/1e3)}k`:e<1e9?`${u(e/1e6)}m`:e<1e12?`${u(e/1e9)}b`:`${u(e/1e12)}t`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(8);function i(e){return Object(r.isFinite)(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n(0).i18n.translate("xpack.apm.notAvailableLabel",{defaultMessage:"N/A"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"p",(function(){return b})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return _})),n.d(t,"q",(function(){return v})),n.d(t,"t",(function(){return w})),n.d(t,"u",(function(){return P})),n.d(t,"z",(function(){return T})),n.d(t,"D",(function(){return D})),n.d(t,"F",(function(){return A})),n.d(t,"G",(function(){return $})),n.d(t,"I",(function(){return M})),n.d(t,"L",(function(){return E})),n.d(t,"O",(function(){return C})),n.d(t,"R",(function(){return L})),n.d(t,"U",(function(){return h})),n.d(t,"V",(function(){return y})),n.d(t,"eb",(function(){return x})),n.d(t,"fb",(function(){return R})),n.d(t,"gb",(function(){return O})),n.d(t,"hb",(function(){return j})),n.d(t,"jb",(function(){return k})),n.d(t,"lb",(function(){return S})),n.d(t,"sb",(function(){return s})),n.d(t,"ub",(function(){return r})),n.d(t,"vb",(function(){return c})),n.d(t,"r",(function(){return N})),n.d(t,"s",(function(){return F})),n.d(t,"v",(function(){return z})),n.d(t,"w",(function(){return H})),n.d(t,"x",(function(){return K})),n.d(t,"y",(function(){return Y})),n.d(t,"A",(function(){return q})),n.d(t,"B",(function(){return Q})),n.d(t,"C",(function(){return G})),n.d(t,"E",(function(){return J})),n.d(t,"H",(function(){return W})),n.d(t,"J",(function(){return Z})),n.d(t,"K",(function(){return X})),n.d(t,"M",(function(){return ee})),n.d(t,"N",(function(){return te})),n.d(t,"P",(function(){return ne})),n.d(t,"Q",(function(){return re})),n.d(t,"S",(function(){return ie})),n.d(t,"T",(function(){return ae})),n.d(t,"Y",(function(){return de})),n.d(t,"Z",(function(){return pe})),n.d(t,"ab",(function(){return ce})),n.d(t,"bb",(function(){return le})),n.d(t,"cb",(function(){return ue})),n.d(t,"db",(function(){return fe})),n.d(t,"ib",(function(){return me})),n.d(t,"mb",(function(){return be})),n.d(t,"kb",(function(){return ge})),n.d(t,"pb",(function(){return I})),n.d(t,"qb",(function(){return U})),n.d(t,"rb",(function(){return B})),n.d(t,"tb",(function(){return V})),n.d(t,"f",(function(){return _e})),n.d(t,"g",(function(){return ve})),n.d(t,"c",(function(){return he})),n.d(t,"h",(function(){return ye})),n.d(t,"k",(function(){return xe})),n.d(t,"l",(function(){return Oe})),n.d(t,"m",(function(){return ke})),n.d(t,"nb",(function(){return Se})),n.d(t,"W",(function(){return je})),n.d(t,"X",(function(){return we})),n.d(t,"ob",(function(){return Pe}));const r="@timestamp",i="kibana",a=`${i}.alert`,o=`${a}.rule`,s=`${i}.space_ids`,c=`${i}.version`,u=`${a}.action_group`,l=`${a}.case_ids`,p=`${a}.duration.us`,d=`${a}.end`,f=`${a}.flapping`,m=`${a}.flapping_history`,b=`${a}.maintenance_window_ids`,g=`${a}.instance.id`,_=`${a}.last_detected`,v=`${a}.reason`,h=`${a}.start`,y=`${a}.status`,x=`${a}.time_range`,O=`${a}.uuid`,k=`${a}.workflow_status`,S=`${a}.workflow_tags`,j=`${a}.workflow_assignee_ids`,w=`${o}.category`,P=`${o}.consumer`,T=`${o}.execution.uuid`,D=`${o}.name`,A=`${o}.parameters`,$=`${o}.producer`,M=`${o}.revision`,E=`${o}.tags`,C=`${o}.rule_type_id`,R=`${a}.url`,L=`${o}.uuid`,I="ecs.version",U="event.action",B="event.kind",V="tags",N=`${a}.risk_score`,F=`${o}.author`,z=`${o}.created_at`,H=`${o}.created_by`,K=`${o}.description`,Y=`${o}.enabled`,q=`${o}.from`,Q=`${o}.interval`,G=`${o}.license`,J=`${o}.note`,W=`${o}.references`,Z=`${o}.rule_id`,X=`${o}.rule_name_override`,ee=`${o}.to`,te=`${o}.type`,ne=`${o}.updated_at`,re=`${o}.updated_by`,ie=`${o}.version`,ae=`${a}.severity`,oe=`${a}.suppression`,se=`${oe}.terms`,ce=`${se}.field`,ue=`${se}.value`,le=`${oe}.start`,pe=`${oe}.end`,de=`${oe}.docs_count`,fe=`${a}.system_status`,me=`${a}.workflow_reason`,be=`${a}.workflow_user`,ge=`${a}.workflow_status_updated_at`,_e=`${a}.evaluation.threshold`,ve=`${a}.evaluation.value`,he=`${a}.context`,ye=`${a}.evaluation.values`,xe=`${a}.group`,Oe=`${xe}.field`,ke=`${xe}.value`,Se={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SLO:"slo",SIEM:"siem",UPTIME:"uptime",ML:"ml"},je=(Object.values(Se).map((e=>e)),"active"),we="recovered";let Pe;!function(e){e.ErrorCount="apm.error_rate",e.TransactionErrorRate="apm.transaction_error_rate",e.TransactionDuration="apm.transaction_duration",e.Anomaly="apm.anomaly"}(Pe||(Pe={}))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(27)(2)},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.ElasticNumeral},function(e,t,n){"use strict";n.d(t,"c",(function(){return r.b})),n.d(t,"j",(function(){return r.f})),n.d(t,"g",(function(){return r.d})),n.d(t,"i",(function(){return r.e})),n.d(t,"b",(function(){return r.a})),n.d(t,"a",(function(){return o})),n.d(t,"n",(function(){return b})),n.d(t,"k",(function(){return g})),n.d(t,"f",(function(){return _})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return h})),n.d(t,"o",(function(){return w})),n.d(t,"e",(function(){return P})),n.d(t,"l",(function(){return M})),n.d(t,"m",(function(){return E}));var r=n(2),i=n(14),a=n.n(i);function o(e,t="milliseconds"){const n=a()(e),r=function(e){const t=e.utcOffset()/60,n=t>0?`+${t}`:t,r=Number.isInteger(t)?n:"Z";return e.format(`(UTC${r})`)}(n);return n.format(`${function(e){switch(e){case"years":return"YYYY";case"months":return"MMM YYYY";case"days":return"MMM D, YYYY";default:return""}}("days")}, ${function(e){switch(e){case"hours":return"HH";case"minutes":return"HH:mm";case"seconds":return"HH:mm:ss";case"milliseconds":return"HH:mm:ss.SSS";default:return""}}(t)} ${r}`)}var s=n(0),c=n(9),u=n.n(c),l=n(8),p=n(4),d=n(3);function f({unit:e,microseconds:t,defaultValue:n=p.a,threshold:i=10}){if(!Object(d.a)(t))return{value:n,formatted:n};const{convertedValue:a,unitLabel:o}=function(e,t,n=10){const i=t/1e3;switch(e){case"hours":return{unitLabel:s.i18n.translate("xpack.apm.formatters.hoursTimeUnitLabel",{defaultMessage:"h"}),convertedValue:Object(r.c)(u.a.duration(i).asHours(),n)};case"minutes":return{unitLabel:s.i18n.translate("xpack.apm.formatters.minutesTimeUnitLabel",{defaultMessage:"min"}),convertedValue:Object(r.c)(u.a.duration(i).asMinutes(),n)};case"seconds":return{unitLabel:s.i18n.translate("xpack.apm.formatters.secondsTimeUnitLabel",{defaultMessage:"s"}),convertedValue:Object(r.c)(u.a.duration(i).asSeconds(),n)};case"milliseconds":return{unitLabel:s.i18n.translate("xpack.apm.formatters.millisTimeUnitLabel",{defaultMessage:"ms"}),convertedValue:Object(r.c)(u.a.duration(i).asMilliseconds(),n)};case"microseconds":return{unitLabel:s.i18n.translate("xpack.apm.formatters.microsTimeUnitLabel",{defaultMessage:"μs"}),convertedValue:Object(r.d)(t)}}}(e,t,i);return{value:a,unit:o,formatted:`${a} ${o}`}}const m=(e,t)=>1e3*u.a.duration(e,t).asMilliseconds(),b=Object(l.memoize)(((e,t=10,n=1)=>{const r=function(e,t=10){return e>m(t,"hours")?"hours":e>m(t,"minutes")?"minutes":e>m(t,"seconds")?"seconds":e>m(1,"milliseconds")?"milliseconds":"microseconds"}(e,t);return(e,{defaultValue:i}={})=>f({unit:r,microseconds:Object(d.a)(e)?e*n:e,defaultValue:i,threshold:t})}),((e,t)=>`${e}_${t}`));function g(e){if(!Object(d.a)(e))return p.a;let t;return t=0===e?"0":e<=.1?"< 0.1":Object(r.b)(e),s.i18n.translate("xpack.apm.transactionRateLabel",{defaultMessage:"{displayedValue} tpm",values:{displayedValue:t}})}function _(e){return s.i18n.translate("xpack.apm.exactTransactionRateLabel",{defaultMessage:"{value} tpm",values:{value:Object(r.c)(e)}})}function v(e,{defaultValue:t=p.a}={}){return Object(d.a)(e)?b(e)(e,{defaultValue:t}).formatted:t}function h(e){return f({unit:"milliseconds",microseconds:e}).formatted}function y(e){return`${Object(r.b)(e/1e3)} KB`}function x(e){return`${Object(r.b)(e/1e6)} MB`}function O(e){return`${Object(r.b)(e/1e9)} GB`}function k(e){return`${Object(r.b)(e/1e12)} TB`}function S(e){return`${Object(r.b)(e)} B`}const j=e=>t=>null==t||isNaN(t)?"":e(t),w=Object(l.memoize)((e=>{const t=T(e);return j(t)})),P=j((e=>T(e)(e))),T=e=>e>1e12?k:e>1e9?O:e>1e6?x:e>1e3?y:S;var D=n(23),A=n(12);const $=({pathname:e,query:t})=>`${e}?${Object(D.stringify)(t)}`,M=(e,t)=>$({pathname:`/app/apm/services/${e}/errors`,query:{environment:null!=t?t:A.a.value}}),E=(e,t,n)=>$({pathname:`/app/apm/services/${e}`,query:{transactionType:n,environment:null!=t?t:A.a.value}})},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return f}));var r=n(0),i=n(20),a=n(15);const o="ENVIRONMENT_ALL",s="ENVIRONMENT_NOT_DEFINED",c=r.i18n.translate("xpack.apm.filter.environment.allLabel",{defaultMessage:"All"});function u(e){return e&&e!==s?e===o?c:e:r.i18n.translate("xpack.apm.filter.environment.notDefinedLabel",{defaultMessage:"Not defined"})}const l={value:o,label:u(o)},p={value:s,label:u(s)};function d(e){return function(e){return e&&e!==s&&e!==o}(e)?`${[a.v]}: ${Object(i.escapeKuery)(e)} `:null}function f({requestedEnvironment:e,currentEnvironmentUrlParam:t}){return(e||p.value)===(t||l.value)&&t||l.value}},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"x",(function(){return u})),n.d(t,"v",(function(){return l})),n.d(t,"w",(function(){return p})),n.d(t,"z",(function(){return d})),n.d(t,"A",(function(){return f})),n.d(t,"y",(function(){return m})),n.d(t,"B",(function(){return b})),n.d(t,"u",(function(){return g})),n.d(t,"J",(function(){return _})),n.d(t,"M",(function(){return v})),n.d(t,"L",(function(){return h})),n.d(t,"K",(function(){return y})),n.d(t,"o",(function(){return x})),n.d(t,"I",(function(){return O})),n.d(t,"H",(function(){return k})),n.d(t,"G",(function(){return S})),n.d(t,"F",(function(){return j})),n.d(t,"E",(function(){return w})),n.d(t,"D",(function(){return P})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return D})),n.d(t,"n",(function(){return A})),n.d(t,"p",(function(){return $})),n.d(t,"q",(function(){return M})),n.d(t,"j",(function(){return E})),n.d(t,"r",(function(){return C})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return L})),n.d(t,"k",(function(){return I})),n.d(t,"C",(function(){return U})),n.d(t,"b",(function(){return B})),n.d(t,"d",(function(){return V})),n.d(t,"c",(function(){return N}));const r="agent.name",i="cloud.availability_zone",a="cloud.provider",o="cloud.machine.type",s="cloud.instance.id",c="cloud.instance.name",u="service.name",l="service.environment",p="service.language.name",d="service.runtime.name",f="service.runtime.version",m="service.node.name",b="service.version",g="processor.event",_="transaction.duration.us",v="transaction.type",h="transaction.name",y="transaction.id",x="event.outcome",O="trace.id",k="span.type",S="span.subtype",j="span.name",w="span.id",P="span.destination.service.resource",T="error.grouping_key",D="error.grouping_name",A="error.type",$="host.name",M="host.os.version",E="container.id",C="kubernetes.pod.name",R="kubernetes.pod.uid",L="network.connection.type",I="device.model.identifier",U="session.id",B="client.geo.country_iso_code",V="client.geo.region_iso_code",N="client.geo.country_name"},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/observability/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/observabilityShared/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/observabilityShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){"use strict";t.decode=t.parse=n(30),t.encode=t.stringify=n(31)},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return APMServiceDetailLocator}));var r=n(7),i=n.n(r),a=n(21),o=n(16),s=n(12);const c=Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(4),n.e(5),n.e(26)]).then(n.bind(null,74)),u="APM_LOCATOR";class APMServiceDetailLocator{constructor(e){i()(this,"id",u),i()(this,"uiSettings",void 0),this.uiSettings=e}async getLocation(e){const{getPathForServiceDetail:t}=await c;return{app:"apm",path:t(e,{...this.uiSettings.get(a.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),isComparisonEnabledByDefault:this.uiSettings.get(o.enableComparisonByDefault),defaultEnvironment:this.uiSettings.get(o.defaultApmServiceEnvironment,s.a.value)}),state:{}}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return telemetry_service_TelemetryService})),n.d(t,"a",(function(){return a}));var r=n(7),i=n.n(r);let a,o;!function(e){e.Submit="submit",e.Refresh="refresh"}(a||(a={})),function(e){e.SEARCH_QUERY_SUBMITTED="Search Query Submitted"}(o||(o={}));class telemetry_client_TelemetryClient{constructor(e){i()(this,"reportSearchQuerySubmitted",(({kueryFields:e,timerange:t,action:n})=>{this.analytics.reportEvent(o.SEARCH_QUERY_SUBMITTED,{kueryFields:e,timerange:t,action:n})})),this.analytics=e}}const s=[{eventType:o.SEARCH_QUERY_SUBMITTED,schema:{kueryFields:{type:"array",items:{type:"text",_meta:{description:"The kuery fields used in the search"}}},timerange:{type:"text",_meta:{description:"The timerange of the search"}},action:{type:"keyword",_meta:{description:"The action performed (e.g., submit, refresh)"}}}}];class telemetry_service_TelemetryService{constructor(e=null){this.analytics=e}setup({analytics:e}){this.analytics=e,s.forEach((t=>e.registerEventType(t)))}start(){if(!this.analytics)throw new Error("The TelemetryService.setup() method has not been invoked, be sure to call it during the plugin setup.");return new telemetry_client_TelemetryClient(this.analytics)}}},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(29),__kbnBundles__.define("plugin/apm/public",n,32)},function(e,t,n){n.p=window.__kbnPublicPath__.apm},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var p,d,f,m,b=e[l].replace(s,"%20"),g=b.indexOf(n);g>=0?(p=b.substr(0,g),d=b.substr(g+1)):(p=b,d=""),f=decodeURIComponent(p),m=decodeURIComponent(d),r(o,f)?i(o[f])?o[f].push(m):o[f]=[o[f],m]:o[f]=m}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?a(o(e),(function(o){var s=encodeURIComponent(r(o))+n;return i(e[o])?a(e[o],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[o]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return I}));var r=n(7),i=n.n(r),a=n(6),o=n(0),s=n(17),c=n(19),u=n(22),l=n(26),p=n(1),d=n.n(p),f=n(5),m=n(11);const b=o.i18n.translate("xpack.apm.alertTypes.errorCount.defaultActionMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} is active with the following conditions:\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Error count: \\{\\{context.triggerValue\\}\\} errors over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"}),g=(o.i18n.translate("xpack.apm.alertTypes.errorCount.defaultRecoveryMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} has recovered.\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Error count: \\{\\{context.triggerValue\\}\\} errors over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"}),o.i18n.translate("xpack.apm.alertTypes.transactionDuration.defaultActionMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} is active with the following conditions:\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Transaction name: \\{\\{context.transactionName\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Latency: \\{\\{context.triggerValue\\}\\} over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}ms\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"})),_=(o.i18n.translate("xpack.apm.alertTypes.transactionDuration.defaultRecoveryMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} has recovered.\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Transaction name: \\{\\{context.transactionName\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Latency: \\{\\{context.triggerValue\\}\\} over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}ms\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"}),o.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.defaultActionMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} is active with the following conditions:\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Failed transaction rate: \\{\\{context.triggerValue\\}\\}% of errors over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}%\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"})),v=(o.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.defaultRecoveryMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} has recovered.\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Failed transaction rate: \\{\\{context.triggerValue\\}\\}% of errors over the last \\{\\{context.interval\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}%\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"}),o.i18n.translate("xpack.apm.alertTypes.transactionDurationAnomaly.defaultActionMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} is active with the following conditions:\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Severity: \\{\\{context.triggerValue\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"})),h=(o.i18n.translate("xpack.apm.alertTypes.transactionDurationAnomaly.defaultRecoveryMessage",{defaultMessage:"\\{\\{context.reason\\}\\}\n\n\\{\\{rule.name\\}\\} has recovered.\n\n- Service name: \\{\\{context.serviceName\\}\\}\n- Transaction type: \\{\\{context.transactionType\\}\\}\n- Environment: \\{\\{context.environment\\}\\}\n- Severity: \\{\\{context.triggerValue\\}\\}\n- Threshold: \\{\\{context.threshold\\}\\}\n\n[View alert details](\\{\\{context.alertDetailsUrl\\}\\})\n"}),"service.environment"),y="service.name",x="transaction.type";var O=n(13),k=n(18);function S(){const{http:e}=Object(k.useKibana)().services,t=null==e?void 0:e.basePath.prepend("/app/apm/tutorial");return d.a.createElement(d.a.Fragment,null,d.a.createElement(O.EuiText,null,d.a.createElement("p",null,o.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentDescription",{defaultMessage:"After the agent starts, you can install APM agents on your hosts to collect data from your applications and services."}))),d.a.createElement(O.EuiSpacer,{size:"m"}),d.a.createElement(O.EuiButton,{"data-test-subj":"apmStepComponentInstallApmAgentButton",fill:!0,href:t},o.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentButtonText",{defaultMessage:"Install APM Agent"})))}const j=Object(p.lazy)((async()=>{const{ApmCustomAssetsExtension:e}=await n.e(23).then(n.bind(null,1045));return{default:e}})),w={id:"apm",title:"APM",description:o.i18n.translate("xpack.apm.apmDescription",{defaultMessage:"Automatically collect in-depth performance metrics and errors from inside your applications."}),icon:"apmApp",path:"/app/apm",showOnHomePage:!1,category:"data"};var P=n(24),T=n(25);const D=o.i18n.translate("xpack.apm.navigation.servicesTitle",{defaultMessage:"Services"}),A=o.i18n.translate("xpack.apm.navigation.serviceGroupsTitle",{defaultMessage:"Service groups"}),$=o.i18n.translate("xpack.apm.navigation.tracesTitle",{defaultMessage:"Traces"}),M=o.i18n.translate("xpack.apm.navigation.serviceMapTitle",{defaultMessage:"Service Map"}),E=o.i18n.translate("xpack.apm.navigation.dependenciesTitle",{defaultMessage:"Dependencies"}),C=o.i18n.translate("xpack.apm.navigation.apmSettingsTitle",{defaultMessage:"Settings"}),R=o.i18n.translate("xpack.apm.navigation.apmStorageExplorerTitle",{defaultMessage:"Storage Explorer"}),L=o.i18n.translate("xpack.apm.navigation.apmTutorialTitle",{defaultMessage:"Tutorial"});class plugin_ApmPlugin{constructor(e){i()(this,"telemetry",void 0),this.initializerContext=e,this.initializerContext=e,this.telemetry=new T.b}setup(e,t){var r,i,d,O;const k=this.initializerContext.config.get(),S=t,{featureFlags:j}=k;S.home&&(S.home.environment.update({apmUi:!0}),S.home.featureCatalogue.register(w)),t.observabilityShared.navigation.registerSections(Object(u.from)(e.getStartServices()).pipe(Object(l.map)((([e,t])=>e.application.capabilities.apm.show?[{label:"APM",sortKey:400,entries:[{label:D,app:"apm",path:"/services",matchPath:e=>["/service-groups","/mobile-services","/services","/service-map"].some((t=>e.startsWith(t)))},{label:$,app:"apm",path:"/traces"},{label:E,app:"apm",path:"/dependencies/inventory",onClick:()=>{const{usageCollection:e}=t;e&&e.reportUiCounter("apm",c.METRIC_TYPE.CLICK,"side_nav_dependency")}}]}]:[]))));const T=async()=>{const{fetchObservabilityOverviewPageData:t,getHasData:r}=await Promise.all([n.e(0),n.e(27)]).then(n.bind(null,1037)),{hasFleetApmIntegrations:i}=await Promise.all([n.e(0),n.e(29)]).then(n.bind(null,1038)),{createCallApmApi:a}=await n.e(0).then(n.bind(null,85));return a(e),{fetchObservabilityOverviewPageData:t,getHasData:r,hasFleetApmIntegrations:i}};this.telemetry.setup({analytics:e.analytics}),null===(r=S.home)||void 0===r||r.tutorials.registerCustomStatusCheck("apm_fleet_server_status_check",(async()=>{const{hasFleetApmIntegrations:e}=await T();return e()})),null===(i=S.home)||void 0===i||i.tutorials.registerCustomComponent("TutorialFleetInstructions",(()=>n.e(30).then(n.bind(null,1039)))),null===(d=S.home)||void 0===d||d.tutorials.registerCustomComponent("TutorialConfigAgent",(()=>n.e(7).then(n.bind(null,1031)))),null===(O=S.home)||void 0===O||O.tutorials.registerCustomComponent("TutorialConfigAgentRumScript",(()=>Promise.all([n.e(7),n.e(28)]).then(n.bind(null,1040)))),S.uiActions.registerTrigger({id:s.ObservabilityTriggerId.ApmTransactionContextMenu}),S.uiActions.registerTrigger({id:s.ObservabilityTriggerId.ApmErrorContextMenu}),t.observability.dashboard.register({appName:"apm",hasData:async()=>{const e=await T();return await e.getHasData()},fetchData:async e=>{const t=await T();return await t.fetchObservabilityOverviewPageData(e)}}),t.exploratoryView.register({appName:"apm",hasData:async()=>{const e=await T();return await e.getHasData()},fetchData:async e=>{const t=await T();return await t.fetchObservabilityOverviewPageData(e)}});const{observabilityRuleTypeRegistry:I}=t.observability,U=this.telemetry.start();return e.application.register({id:"apm",title:"APM",order:8300,euiIconType:"logoObservability",appRoute:"/app/apm",icon:"plugins/apm/public/icon.svg",category:a.DEFAULT_APP_CATEGORIES.observability,navLinkStatus:a.AppNavLinkStatus.visible,deepLinks:[{id:"service-groups-list",title:A,path:"/service-groups"},{id:"services",title:D,path:"/services",navLinkStatus:k.serverless.enabled?a.AppNavLinkStatus.visible:a.AppNavLinkStatus.default},{id:"traces",title:$,path:"/traces",navLinkStatus:k.serverless.enabled?a.AppNavLinkStatus.visible:a.AppNavLinkStatus.default},{id:"service-map",title:M,path:"/service-map"},{id:"dependencies",title:E,path:"/dependencies/inventory",navLinkStatus:k.serverless.enabled?a.AppNavLinkStatus.visible:a.AppNavLinkStatus.default},{id:"settings",title:C,path:"/settings"},{id:"storage-explorer",title:R,path:"/storage-explorer",searchable:j.storageExplorerAvailable},{id:"tutorial",title:L,path:"/tutorial"}],async mount(t){const[{renderApp:r},[i,a]]=await Promise.all([Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(4),n.e(5),n.e(8),n.e(21)]).then(n.bind(null,1056)),e.getStartServices()]);return r({coreStart:i,pluginsSetup:S,appMountParameters:t,config:k,pluginsStart:a,observabilityRuleTypeRegistry:I,apmServices:{telemetry:U}})}}),function(e){e.register({id:f.ob.ErrorCount,description:o.i18n.translate("xpack.apm.alertTypes.errorCount.description",{defaultMessage:"Alert when the number of errors in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[f.q],link:Object(m.l)(String(e[y][0]),e[h]&&String(e[h][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRules}`,ruleParamsExpression:Object(p.lazy)((()=>Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,1042)))),validate:()=>({errors:[]}),requiresAppContext:!1,defaultActionMessage:b,priority:80}),e.register({id:f.ob.TransactionDuration,description:o.i18n.translate("xpack.apm.alertTypes.transactionDuration.description",{defaultMessage:"Alert when the latency of a specific transaction type in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[f.q],link:Object(m.m)(String(e[y][0]),e[h]&&String(e[h][0]),String(e[x][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRules}`,ruleParamsExpression:Object(p.lazy)((()=>Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,1043)))),validate:()=>({errors:[]}),alertDetailsAppSection:Object(p.lazy)((()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(18)]).then(n.bind(null,1053)))),requiresAppContext:!1,defaultActionMessage:g,priority:60}),e.register({id:f.ob.TransactionErrorRate,description:o.i18n.translate("xpack.apm.alertTypes.transactionErrorRate.description",{defaultMessage:"Alert when the rate of transaction errors in a service exceeds a defined threshold."}),format:({fields:e})=>({reason:e[f.q],link:Object(m.m)(String(e[y][0]),e[h]&&String(e[h][0]),String(e[x][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRules}`,ruleParamsExpression:Object(p.lazy)((()=>Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.bind(null,1044)))),validate:()=>({errors:[]}),requiresAppContext:!1,defaultActionMessage:_,priority:70}),e.register({id:f.ob.Anomaly,description:o.i18n.translate("xpack.apm.alertTypes.anomaly.description",{defaultMessage:"Alert when either the latency, throughput, or failed transaction rate of a service is anomalous."}),format:({fields:e})=>({reason:e[f.q],link:Object(m.m)(String(e[y][0]),e[h]&&String(e[h][0]),String(e[x][0]))}),iconClass:"bell",documentationUrl:e=>`${e.links.alerting.apmRules}`,ruleParamsExpression:Object(p.lazy)((()=>Promise.all([n.e(0),n.e(15)]).then(n.bind(null,1058)))),validate:()=>({errors:[]}),requiresAppContext:!1,defaultActionMessage:v,priority:90})}(I),{locator:t.share.url.locators.create(new P.a(e.uiSettings))}}start(e,t){const{fleet:r}=t;if(t.observabilityAIAssistant.service.register((async({registerRenderFunction:e})=>{(await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(4),n.e(5),n.e(8),n.e(22)]).then(n.bind(null,1057))).registerAssistantFunctions({registerRenderFunction:e})})),r){const e={title:o.i18n.translate("xpack.apm.fleetIntegration.enrollmentFlyout.installApmAgentTitle",{defaultMessage:"Install APM Agent"}),Component:S};r.registerExtension({package:"apm",view:"agent-enrollment-flyout",title:e.title,Component:e.Component}),r.registerExtension({package:"apm",view:"package-detail-assets",Component:j}),r.registerExtension({package:"apm",view:"package-policy-create",Component:Object(p.lazy)((async()=>{const{CreateAPMPolicyForm:e}=await Promise.all([n.e(2),n.e(6),n.e(24)]).then(n.bind(null,1046));return{default:e}}))}),r.registerExtension({package:"apm",view:"package-policy-edit",useLatestPackageVersion:!0,Component:Object(p.lazy)((async()=>{const{EditAPMPolicyForm:e}=await Promise.all([n.e(2),n.e(6),n.e(25)]).then(n.bind(null,1047));return{default:e}}))}),r.registerExtension({package:"apm",view:"package-policy-edit-tabs",tabs:[{title:"APM Agents",Component:Object(p.lazy)((async()=>{const{ApmAgents:e}=await Promise.all([n.e(0),n.e(4),n.e(13)]).then(n.bind(null,1055));return{default:e}}))}]})}}}const I=e=>new plugin_ApmPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.IoTs},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.StyledComponents},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/triggersActionsUi/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/observability/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/ml/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/maps/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnRison},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/logsShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/logsShared/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/dashboard/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/exploratoryView/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/advancedSettings/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.ReactRouter},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/observabilityAIAssistant/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiChartsTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/controls/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/controls/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/ml/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.LodashFp},function(e,t){e.exports=__kbnSharedDeps__.ReactQuery},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/fleet/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);