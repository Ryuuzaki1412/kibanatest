/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[]).push([[8],{142:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a(0),r=(a(16),a(101)),o=a(116),l=a(5);a(15),a(12);const i="apm";let s;!function(e){e.Avg="avg",e.P95="95th",e.P99="99th"}(s||(s={}));const c="threshold_met",u={id:c,name:n.i18n.translate("xpack.apm.a.thresholdMet",{defaultMessage:"Threshold met"})},p={[l.ob.ErrorCount]:{name:n.i18n.translate("xpack.apm.errorCountAlert.name",{defaultMessage:"Error count threshold"}),actionGroups:[u],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:i,isExportable:!0},[l.ob.TransactionDuration]:{name:n.i18n.translate("xpack.apm.transactionDurationAlert.name",{defaultMessage:"Latency threshold"}),actionGroups:[u],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:i,isExportable:!0},[l.ob.Anomaly]:{name:n.i18n.translate("xpack.apm.anomalyAlert.name",{defaultMessage:"APM Anomaly"}),actionGroups:[u],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:i,isExportable:!0},[l.ob.TransactionErrorRate]:{name:n.i18n.translate("xpack.apm.transactionErrorRateAlert.name",{defaultMessage:"Failed transaction rate threshold"}),actionGroups:[u],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:i,isExportable:!0}},m=[{type:r.a.CRITICAL,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.criticalLabel",{defaultMessage:"critical"}),threshold:o.a.CRITICAL},{type:r.a.MAJOR,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.majorLabel",{defaultMessage:"major"}),threshold:o.a.MAJOR},{type:r.a.MINOR,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.minor",{defaultMessage:"minor"}),threshold:o.a.MINOR},{type:r.a.WARNING,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.warningLabel",{defaultMessage:"warning"}),threshold:o.a.WARNING}]},482:function(e,t,a){"use strict";a.d(t,"a",(function(){return Be})),a.d(t,"b",(function(){return Ne}));var n=a(6),r=a(18),o=a(82),l=a.n(o),i=a(1),s=a.n(i),c=a(213),u=a.n(c),p=a(36);const m=s.a.createContext(null),d=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(p.jsx)(m.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},b=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,r=u()(n,void 0);return Object(p.jsx)(m.Provider,{value:{navigateToUrl:a,currentAppId:r}},e)};var g=a(13);a(62);const h={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},E=({children:e,navigateToUrl:t,currentAppId:a,...n})=>{const r=Object(i.useRef)(null),o=Object(i.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const r=((e,t)=>{let a=e;do{var n,r;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(r=a)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const o=r.href,l=""===r.target||"_self"===r.target,i=0===e.button;o&&l&&i&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(r.href))})({event:e,currentAppId:a,navigateToUrl:t,container:r.current})),[a,t]);return Object(p.jsx)("div",l()({onClick:o,ref:r,css:h,"data-test-subj":"kbnRedirectAppLink"},n),e)},v=({children:e,...t})=>Object(p.jsx)(E,l()({},function(){const e=Object(i.useContext)(m);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),f=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,r=Object(p.jsx)(v,n,e);return Object(p.jsx)(b,{coreStart:a},r)}const{navigateToUrl:a,currentAppId:n,...r}=t,o=Object(p.jsx)(v,r,e);return Object(p.jsx)(d,{currentAppId:n,navigateToUrl:a},o)};var y=a(52),j=a(19),x=a(484),k=a(94),A=a(46),O=a(39),M=a(215),C=a(212),T=a(77),S=a(216),L=a(485),I=a(136),w=a(486),R=a(7),F=a.n(R),P=a(0);const _=P.i18n.translate("sharedUXPackages.prompt.errors.notFound.title",{defaultMessage:"Page not found"}),U=P.i18n.translate("sharedUXPackages.prompt.errors.notFound.body",{defaultMessage:"Sorry, the page you're looking for can't be found. It might have been removed or renamed, or maybe it never existed at all."}),D=P.i18n.translate("sharedUXPackages.prompt.errors.notFound.goBacklabel",{defaultMessage:"Go back"}),B=({actions:e,title:t,body:n})=>{const{colorMode:r}=Object(g.useEuiTheme)(),[o,l]=Object(i.useState)(),s=Object(i.useCallback)((()=>history.back()),[]),c=Object(i.useMemo)((()=>[Object(p.jsx)(g.EuiButtonEmpty,{iconType:"arrowLeft",flush:"both",onClick:s},D)]),[s]);Object(i.useEffect)((()=>{(async()=>{if("DARK"===r){const{default:e}=await a.e(31).then(a.t.bind(null,1048,7));l(e)}else{const{default:e}=await a.e(32).then(a.t.bind(null,1049,7));l(e)}})()}),[r]);const u=o?Object(p.jsx)(g.EuiImage,{src:o,alt:""}):null;return Object(p.jsx)(g.EuiEmptyPrompt,{color:"subdued",titleSize:"m",icon:u,title:"string"!=typeof t&&t?t:Object(p.jsx)("h2",null,null!=t?t:_),body:null!=n?n:U,actions:null!=e?e:c})};var H=a(33);function N({children:e}){const t=Object(H.useLocation)();return s.a.createElement(apm_error_boundary_ErrorBoundary,{pathname:t.pathname},e)}class apm_error_boundary_ErrorBoundary extends s.a.Component{constructor(...e){super(...e),F()(this,"state",{error:void 0})}componentDidUpdate(e){this.props.pathname!==e.pathname&&void 0!==this.state.error&&this.setState({error:void 0})}static getDerivedStateFromError(e){return{error:e}}render(){return this.state.error?s.a.createElement(z,{error:this.state.error}):this.props.children}}const G={pageTitle:"APM"};function z({error:e}){const{services:t}=Object(r.useKibana)(),{observabilityShared:a}=t,n=a.navigation.PageTemplate;return e instanceof k.a?s.a.createElement(n,{pageHeader:G},s.a.createElement(B,null)):s.a.createElement(n,{pageHeader:G},s.a.createElement(g.EuiErrorBoundary,null,s.a.createElement(J,{error:e})))}function J({error:e}){throw e}var K=a(481);function q({children:e}){const t=Object(k.i)();return Object(j.useTrackPageview)({app:"apm",path:t},[t]),Object(j.useTrackPageview)({app:"apm",path:t,delay:15e3},[t]),e}var $=a(16),V=a(204),W=a(105),X=a(5),Q=a(142),Y=a(462),Z=a(76),ee=a(12),te=a(78);function ae(e){const{addFlyoutVisible:t,setAddFlyoutVisibility:a,ruleType:n}=e,o=Object(Y.a)(),{query:l,path:c}=Object(Z.b)("/*"),u="rangeFrom"in l?l.rangeFrom:void 0,p="rangeTo"in l?l.rangeTo:void 0,{start:m,end:d}=Object(te.a)({rangeFrom:u,rangeTo:p,optional:!0}),b="environment"in l?l.environment:ee.a.value,g="transactionType"in l?l.transactionType:void 0,h="transactionName"in l?l.transactionName:void 0,E="groupId"in c?c.groupId:void 0,{services:v}=Object(r.useKibana)(),f=function(e,t){const a=e?Q.d[e].name:void 0,n=a?t?`${a} | ${t}`:a:void 0,r=["apm"];return t&&r.push(`service.name:${t}`.toLowerCase()),{tags:r,...n?{name:n}:{}}}(n,o),y=Object(i.useCallback)((()=>a(!1)),[a]),j=Object(i.useMemo)((()=>n&&v.triggersActionsUi.getAddRuleFlyout({consumer:Q.b,onClose:y,ruleTypeId:n,canChangeTrigger:!1,initialValues:f,metadata:{environment:b,serviceName:o,...n===X.ob.ErrorCount?{}:{transactionType:g},transactionName:h,errorGroupingKey:E,start:m,end:d},useRuleProducer:!0})),[n,b,y,v.triggersActionsUi,o,h,E,g,b,m,d]);return s.a.createElement(s.a.Fragment,null,t&&j)}const ne=P.i18n.translate("xpack.apm.home.alertsMenu.alerts",{defaultMessage:"Alerts and rules"}),re=P.i18n.translate("xpack.apm.home.alertsMenu.transactionDuration",{defaultMessage:"Latency"}),oe=P.i18n.translate("xpack.apm.home.alertsMenu.transactionErrorRate",{defaultMessage:"Failed transaction rate"}),le=P.i18n.translate("xpack.apm.home.alertsMenu.errorCount",{defaultMessage:" Create error count rule"}),ie=P.i18n.translate("xpack.apm.home.alertsMenu.createThresholdAlert",{defaultMessage:"Create threshold rule"}),se=P.i18n.translate("xpack.apm.home.alertsMenu.createAnomalyAlert",{defaultMessage:"Create anomaly rule"}),ce="create_threshold_panel";function ue({canSaveAlerts:e,canReadAlerts:t,canReadMlJobs:a}){const[n,r]=Object(i.useState)(!1),[o,l]=Object(i.useState)(null),{plugins:{observability:c}}=Object(T.a)(),u=s.a.createElement(g.EuiHeaderLink,{color:"text",iconType:"arrowDown",iconSide:"right",onClick:()=>r((e=>!e)),"data-test-subj":"apmAlertAndRulesHeaderLink"},ne),p=[{id:0,title:ne,items:[...e?[{name:ie,panel:ce,"data-test-subj":"apmAlertsMenuItemCreateThreshold"},...a?[{name:se,onClick:()=>{l(X.ob.Anomaly),r(!1)},"data-test-subj":"apmAlertsMenuItemCreateAnomaly"}]:[],{name:le,onClick:()=>{l(X.ob.ErrorCount),r(!1)},"data-test-subj":"apmAlertsMenuItemErrorCount"}]:[],...t?[{name:P.i18n.translate("xpack.apm.home.alertsMenu.viewActiveAlerts",{defaultMessage:"Manage rules"}),href:c.useRulesLink().href,icon:"tableOfContents","data-test-subj":"apmAlertsMenuItemManageRules"}]:[]]},{id:ce,title:ie,items:[{name:re,onClick:()=>{l(X.ob.TransactionDuration),r(!1)}},{name:oe,onClick:()=>{l(X.ob.TransactionErrorRate),r(!1)}}]}];return s.a.createElement(s.a.Fragment,null,s.a.createElement(g.EuiPopover,{id:"integrations-menu",button:u,isOpen:n,closePopover:()=>r(!1),panelPaddingSize:"none",anchorPosition:"downRight"},s.a.createElement(g.EuiContextMenu,{initialPanelId:0,panels:p})),s.a.createElement(ae,{ruleType:o,addFlyoutVisible:!!o,setAddFlyoutVisibility:e=>{e||l(null)}}))}var pe=a(166),me=a(152),de=a(83);function be(){const{query:e}=Object(Z.b)("/*"),t="environment"in e&&e.environment||ee.a.value,{core:a}=Object(T.a)(),{basePath:n}=a.http,r=Object(de.a)(),{anomalyDetectionSetupState:o}=Object(me.a)();let l,i="",c="text";o===pe.a.Failure?(c="warning",i=P.i18n.translate("xpack.apm.anomalyDetectionSetup.jobFetchFailureText",{defaultMessage:"Could not determine state of anomaly detection setup."}),l="machineLearningApp"):o===pe.a.NoJobs||o===pe.a.NoJobsForEnvironment?(c="warning",i=function(e,t){return e===pe.a.NoJobs?P.i18n.translate("xpack.apm.anomalyDetectionSetup.notEnabledText",{defaultMessage:"Anomaly detection is not yet enabled. Click to continue setup."}):P.i18n.translate("xpack.apm.anomalyDetectionSetup.notEnabledForEnvironmentText",{defaultMessage:'Anomaly detection is not yet enabled for the environment "{currentEnvironment}". Click to continue setup.',values:{currentEnvironment:Object(ee.e)(t)}})}(o,t),l="machineLearningApp"):o===pe.a.UpgradeableJobs&&(c="success",i=P.i18n.translate("xpack.apm.anomalyDetectionSetup.upgradeableJobsText",{defaultMessage:"Updates available for existing anomaly detection jobs."}),l="wrench");let u=null;o===pe.a.Loading?u=s.a.createElement(g.EuiLoadingSpinner,{size:"s"}):l&&(u=s.a.createElement(g.EuiIcon,{type:l,color:c,size:"s"}));const p=s.a.createElement(g.EuiHeaderLink,{color:c,href:Object(W.b)({basePath:n,path:"/settings/anomaly-detection"}),style:{whiteSpace:"nowrap"},"data-test-subj":"apmAnomalyDetectionHeaderLink"},u,s.a.createElement("span",{style:{marginInlineStart:r.eui.euiSizeS}},ge));return i?s.a.createElement(g.EuiToolTip,{position:"bottom",content:i},p):p}const ge=P.i18n.translate("xpack.apm.anomalyDetectionSetup.linkLabel",{defaultMessage:"Anomaly detection"});var he=a(43);function Ee(){const{inspector:e}=Object(T.a)(),{inspectorAdapters:t}=Object(j.useInspectorContext)(),{services:{uiSettings:a}}=Object(r.useKibana)();return(null==a?void 0:a.get(he.enableInspectEsQueries))?s.a.createElement(g.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(t)},"data-test-subj":"apmInspectHeaderLink"},P.i18n.translate("xpack.apm.inspectButtonText",{defaultMessage:"Inspect"})):null}var ve=a(60),fe=a(75);function ye({onClose:e}){const t=Object(j.useUiTracker)({app:"apm"}),{docLinks:a,notifications:n}=Object(T.a)().core,{data:r,status:o}=Object(fe.c)((e=>e("GET /internal/apm/settings/labs")),[]),l=(null==r?void 0:r.labsItems)||[],{handleFieldChange:i,settingsEditableConfig:c,unsavedChanges:u,saveAll:p,isSaving:m,cleanUnsavedChanges:d}=Object(j.useEditableSettings)("apm",l),b=Object(fe.b)(o);return s.a.createElement(g.EuiFlyout,{onClose:e},s.a.createElement(g.EuiFlyoutHeader,{hasBorder:!0},s.a.createElement(g.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiIcon,{type:"beaker",size:"l"})),s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiTitle,null,s.a.createElement("h2",null,P.i18n.translate("xpack.apm.labs",{defaultMessage:"Labs"}))))),s.a.createElement(g.EuiSpacer,{size:"s"}),s.a.createElement(g.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween"},s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiText,null,P.i18n.translate("xpack.apm.labs.description",{defaultMessage:"Try out the APM features that are under technical preview and in progress."}))),s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiButton,{"data-test-subj":"labsFeedbackButton",href:"https://ela.st/feedback-apm-labs",target:"_blank",color:"warning",iconType:"editorComment"},P.i18n.translate("xpack.apm.labs.feedbackButtonLabel",{defaultMessage:"Tell us what you think!"}))))),b?s.a.createElement(g.EuiSkeletonText,{lines:3}):s.a.createElement(s.a.Fragment,null,s.a.createElement(g.EuiFlyoutBody,null,l.map(((e,t)=>{const r=c[e];return s.a.createElement(s.a.Fragment,null,s.a.createElement(ve.LazyField,{key:e,setting:r,handleChange:i,enableSaving:!0,docLinks:a.links,toasts:n.toasts,unsavedChanges:u[e]}),s.a.createElement(g.EuiHorizontalRule,null))}))),s.a.createElement(g.EuiFlyoutFooter,null,s.a.createElement(g.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiButtonEmpty,{"data-test-subj":"apmLabsFlyoutCancelButton",onClick:function(){d(),e()}},P.i18n.translate("xpack.apm.labs.cancel",{defaultMessage:"Cancel"}))),s.a.createElement(g.EuiFlexItem,{grow:!1},s.a.createElement(g.EuiButton,{"data-test-subj":"apmLabsFlyoutReloadToApplyChangesButton",fill:!0,isLoading:m,onClick:async function(){try{const a=Object.keys(u).some((e=>c[e].requiresPageReload));await p(),t({metric:"labs_save"}),a?window.location.reload():e()}catch(e){const t=e;n.toasts.addDanger({title:P.i18n.translate("xpack.apm.apmSettings.save.error",{defaultMessage:"An error occurred while saving the settings"}),text:t.message})}}},P.i18n.translate("xpack.apm.labs.reload",{defaultMessage:"Reload to apply changes"})))))))}function je(){const[e,t]=Object(i.useState)(!1),a=Object(j.useUiTracker)({app:"apm"});function n(){t((e=>!e))}return Object(i.useEffect)((()=>{e&&a({metric:"labs_open"})}),[e,a]),s.a.createElement(s.a.Fragment,null,s.a.createElement(g.EuiButtonEmpty,{"data-test-subj":"apmLabsLabsButton",color:"text",onClick:n},P.i18n.translate("xpack.apm.labs",{defaultMessage:"Labs"})),e&&s.a.createElement(ye,{onClose:n}))}function xe(){var e,t;const{core:a,plugins:n,config:r,observabilityAIAssistant:{ObservabilityAIAssistantActionMenuItem:o}}=Object(T.a)(),{search:l}=window.location,{application:i,http:c}=a,{basePath:u}=c,{capabilities:p}=i,{featureFlags:m}=r,d=!(null===(e=p.ml)||void 0===e||!e.canGetJobs),b=!(null===(t=p.ml)||void 0===t||!t.canCreateJob),{isAlertingAvailable:h,canReadAlerts:E,canSaveAlerts:v}=Object(V.a)(n,p),f=p.apm.save&&v;function y(e){return Object(W.b)({basePath:u,path:e,search:l})}const j=a.uiSettings.get($.apmLabsButton,!1);return s.a.createElement(g.EuiHeaderLinks,{gutterSize:"xs"},j&&s.a.createElement(je,null),m.storageExplorerAvailable&&s.a.createElement(g.EuiHeaderLink,{color:"text",href:y("/storage-explorer"),"data-test-subj":"apmStorageExplorerHeaderLink"},s.a.createElement(g.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},s.a.createElement(g.EuiFlexItem,{grow:!1},P.i18n.translate("xpack.apm.storageExplorerLinkLabel",{defaultMessage:"Storage Explorer"})))),b&&s.a.createElement(be,null),h&&s.a.createElement(ue,{canReadAlerts:E,canSaveAlerts:f,canReadMlJobs:d}),s.a.createElement(g.EuiHeaderLink,{color:"primary",href:("/app/apm/tutorial",u.prepend("/app/apm/tutorial")),iconType:"indexOpen","data-test-subj":"apmAddDataHeaderLink"},P.i18n.translate("xpack.apm.addDataButtonLabel",{defaultMessage:"Add data"})),s.a.createElement(g.EuiHeaderLink,{color:"text",href:y("/settings"),"data-test-subj":"apmSettingsHeaderLink"},P.i18n.translate("xpack.apm.settingsLinkLabel",{defaultMessage:"Settings"})),s.a.createElement(Ee,null),o?s.a.createElement(o,null):null)}var ke=a(109),Ae=a.n(ke);function Oe({children:e}){const t=Object(H.useLocation)(),a=Ae.a.parse(t.search);return"/dependencies"!==t.pathname.replace(/\/$/,"")||"dependencyName"in a?e:s.a.createElement(H.Redirect,{to:Ae.a.stringifyUrl({url:t.pathname+"/inventory",query:a})})}var Me=a(79),Ce=a(21);function Te({children:e}){const{isDateRangeSet:t,redirect:a}=function(){const e=Object(H.useHistory)(),t=Object(H.useLocation)(),a=Ae.a.parse(t.search),{core:n,plugins:r}=Object(T.a)(),o=n.uiSettings.get(Ce.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),l=r.data.query.timefilter.timefilter.getTime();return{isDateRangeSet:"rangeFrom"in a&&"rangeTo"in a,redirect:()=>{var n,r;const i={rangeFrom:null!==(n=l.from)&&void 0!==n?n:o.from,rangeTo:null!==(r=l.to)&&void 0!==r?r:o.to,...a};e.replace({...t,search:Ae.a.stringify(i)})}}}(),n=function({apmRouter:e,location:t}){return e.getRoutesToMatch(t.pathname).some((e=>"/diagnostics"===e.path||"/services"===e.path||"/traces"===e.path||"/service-map"===e.path||"/dependencies"===e.path||"/dependencies/inventory"===e.path||"/services/{serviceName}"===e.path||"/mobile-services/{serviceName}"===e.path||"/service-groups"===e.path||"/storage-explorer"===e.path||"/"===t.pathname||""===t.pathname))}({apmRouter:Object(Me.a)(),location:Object(H.useLocation)()});return!t&&n?(a(),null):e}var Se=a(199);function Le({children:e}){const t=Object(H.useLocation)(),a=Ae.a.parse(t.search),n=Object(Se.a)();return"environment"in a?e:"/services"===t.pathname.replace(/\/$/,"")?s.a.createElement(H.Redirect,{to:Ae.a.stringifyUrl({url:t.pathname,query:{...a,environment:n}})}):e}var Ie=a(84),we=a(133),Re=a(121),Fe=a(466);function Pe({children:e}){const{core:t}=Object(T.a)(),a=Object(H.useLocation)(),n=function({apmRouter:e,location:t}){return e.getRoutesToMatch(t.pathname).some((e=>"/services"===e.path||"/service-map"===e.path||"/dependencies"===e.path||"/dependencies/inventory"===e.path||"/services/{serviceName}"===e.path||"/mobile-services/{serviceName}"===e.path||"/service-groups"===e.path||"/"===t.pathname||""===t.pathname))}({apmRouter:Object(Me.a)(),location:a}),r=Ae.a.parse(a.search);if(n&&("comparisonType"in r||!("comparisonEnabled"in r))){const{comparisonType:e,comparisonEnabled:n,...o}=r,l=Object(we.a)({core:t,urlComparisonEnabled:n?Object(Re.c)(n):void 0}).toString(),i=e,c=Ie.b[i];return s.a.createElement(Fe.b,{location:{...a,search:Ae.a.stringify({...o,comparisonEnabled:l,...c?{offset:c}:{}})},pathname:a.pathname})}return e}class scroll_to_top_on_path_change_ScrollToTopOnPathChange extends i.Component{componentDidUpdate(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}render(){return null}}var _e=a(8);function Ue({children:e}){var t;const{core:a}=Object(T.a)(),n=Object(_e.last)(Object(k.g)());return Object(r.useExecutionContext)(a.executionContext,{type:"application",name:"apm",page:null==n||null===(t=n.match)||void 0===t?void 0:t.path}),e}const De=new y.Storage(localStorage);function Be({apmPluginContextValue:e,pluginsStart:t,apmServices:a}){const{appMountParameters:o,core:l}=e,{history:i}=o,c=l.i18n;return s.a.createElement("div",{className:n.APP_WRAPPER_CLASS,"data-test-subj":"apmMainContainer",role:"main"},s.a.createElement(f,{coreStart:{application:l.application}},s.a.createElement(C.a.Provider,{value:e},s.a.createElement(r.KibanaContextProvider,{services:{...l,...t,storage:De,...a}},s.a.createElement(c.Context,null,s.a.createElement(I.b,null,s.a.createElement(k.d,{history:i,router:K.a},s.a.createElement(N,null,s.a.createElement(Oe,null,s.a.createElement(Le,null,s.a.createElement(Te,null,s.a.createElement(Pe,null,s.a.createElement(q,null,s.a.createElement(Ue,null,s.a.createElement(S.b,null,s.a.createElement(w.b,null,s.a.createElement(L.b,null,s.a.createElement(M.b,null,s.a.createElement(j.InspectorContextProvider,null,s.a.createElement(Ne,null,s.a.createElement(He,null),s.a.createElement(x.a,{component:scroll_to_top_on_path_change_ScrollToTopOnPathChange}),s.a.createElement(k.c,null)))))))))))))))))))))}function He(){const{setHeaderActionMenu:e,theme$:t}=Object(T.a)().appMountParameters;return s.a.createElement(j.HeaderMenuPortal,{setHeaderActionMenu:e,theme$:t},s.a.createElement(xe,null))}function Ne({children:e}){const[t]=Object(r.useUiSetting$)("theme:darkMode");return s.a.createElement(O.ThemeProvider,{theme:e=>({...e,eui:t?A.euiDarkVars:A.euiLightVars,darkMode:t})},e)}}}]);