/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[3],Array(59).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(22).__importDefault(a(170));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=(n=a(2))&&"object"==typeof n&&"default"in n?n:{default:n},r=e=>"checkbox"===e.type,s=e=>e instanceof Date,o=e=>null==e;const l=e=>"object"==typeof e;var c=e=>!o(e)&&!Array.isArray(e)&&l(e)&&!s(e),u=e=>c(e)&&e.target?r(e.target)?e.target.checked:e.target.value:e,d=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),m="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(m&&(e instanceof Blob||e instanceof FileList)||!a&&!c(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return c(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=p(e[a]));else t=e}return t}var f=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,h=(e,t,a)=>{if(!t||!c(e))return a;const n=f(t.split(/[,[\].]+?/)).reduce(((e,t)=>o(e)?e:e[t]),e);return g(n)||n===e?g(e[t])?a:e[t]:n};const b="blur",E="focusout",y="change",v="onChange",x="onSubmit",S="all",k="pattern",M="required",w=i.default.createContext(null),O=()=>i.default.useContext(w);var T=(e,t,a,n=!0)=>{const i={defaultValues:t._defaultValues};for(const r in e)Object.defineProperty(i,r,{get:()=>{const i=r;return t._proxyFormState[i]!==S&&(t._proxyFormState[i]=!n||S),a&&(a[i]=!0),e[i]}});return i},C=e=>c(e)&&!Object.keys(e).length,I=(e,t,a,n)=>{a(e);const{name:i,...r}=e;return C(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find((e=>t[e]===(!n||S)))},j=e=>Array.isArray(e)?e:[e],_=(e,t,a)=>a&&t?e===t:!e||!t||e===t||j(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function F(e){const t=i.default.useRef(e);t.current=e,i.default.useEffect((()=>{const a=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}}),[e.disabled])}function P(e){const t=O(),{control:a=t.control,disabled:n,name:r,exact:s}=e||{},[o,l]=i.default.useState(a._formState),c=i.default.useRef(!0),u=i.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=i.default.useRef(r);return d.current=r,F({disabled:n,next:e=>c.current&&_(d.current,e.name,s)&&I(e,u.current,a._updateFormState)&&l({...a._formState,...e}),subject:a._subjects.state}),i.default.useEffect((()=>(c.current=!0,u.current.isValid&&a._updateValid(!0),()=>{c.current=!1})),[a]),T(o,a,u.current,!1)}var L=e=>"string"==typeof e,R=(e,t,a,n,i)=>L(e)?(n&&t.watch.add(e),h(a,e,i)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),h(a,e)))):(n&&(t.watchAll=!0),a);function D(e){const t=O(),{control:a=t.control,name:n,defaultValue:r,disabled:s,exact:o}=e||{},l=i.default.useRef(n);l.current=n,F({disabled:s,subject:a._subjects.values,next:e=>{_(l.current,e.name,o)&&u(p(R(l.current,a._names,e.values||a._formValues,!1,r)))}});const[c,u]=i.default.useState(a._getWatch(n,r));return i.default.useEffect((()=>a._removeUnmounted())),c}var A=e=>/^\w*$/.test(e),N=e=>f(e.replace(/["|']|\]/g,"").split(/\.|\[/));function B(e,t,a){let n=-1;const i=A(t)?[t]:N(t),r=i.length,s=r-1;for(;++n<r;){const t=i[n];let r=a;if(n!==s){const a=e[t];r=c(a)||Array.isArray(a)?a:isNaN(+i[n+1])?{}:[]}e[t]=r,e=e[t]}return e}function z(e){const t=O(),{name:a,control:n=t.control,shouldUnregister:r}=e,s=d(n._names.array,a),o=D({control:n,name:a,defaultValue:h(n._formValues,a,h(n._defaultValues,a,e.defaultValue)),exact:!0}),l=P({control:n,name:a}),c=i.default.useRef(n.register(a,{...e.rules,value:o}));return c.current=n.register(a,e.rules),i.default.useEffect((()=>{const e=n._options.shouldUnregister||r,t=(e,t)=>{const a=h(n._fields,e);a&&(a._f.mount=t)};if(t(a,!0),e){const e=p(h(n._options.defaultValues,a));B(n._defaultValues,a,e),g(h(n._formValues,a))&&B(n._formValues,a,e)}return()=>{(s?e&&!n._state.action:e)?n.unregister(a):t(a,!1)}}),[a,n,s,r]),{field:{name:a,value:o,onChange:i.default.useCallback((e=>c.current.onChange({target:{value:u(e),name:a},type:y})),[a]),onBlur:i.default.useCallback((()=>c.current.onBlur({target:{value:h(n._formValues,a),name:a},type:b})),[a,n]),ref:e=>{const t=h(n._fields,a);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!h(l.errors,a)},isDirty:{enumerable:!0,get:()=>!!h(l.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!h(l.touchedFields,a)},error:{enumerable:!0,get:()=>h(l.errors,a)}})}}const H="post";var G=(e,t,a,n,i)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[n]:i||!0}}:{};const V=(e,t,a)=>{for(const n of a||Object.keys(e)){const a=h(e,n);if(a){const{_f:e,...n}=a;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else c(n)&&V(n,t)}}};var $=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)}))},U=(e,t,a={})=>a.shouldFocus||g(a.shouldFocus)?a.focusName||`${e}.${g(a.focusIndex)?t:a.focusIndex}.`:"",q=e=>({isOnSubmit:!e||e===x,isOnBlur:"onBlur"===e,isOnChange:e===v,isOnAll:e===S,isOnTouch:"onTouched"===e}),W=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),K=(e,t,a)=>{const n=f(h(e,a));return B(n,"root",t[a]),B(e,a,n),e},Y=e=>"boolean"==typeof e,X=e=>"file"===e.type,J=e=>"function"==typeof e,Q=e=>{if(!m)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Z=e=>L(e),ee=e=>"radio"===e.type,te=e=>e instanceof RegExp;const ae={value:!1,isValid:!1},ne={value:!0,isValid:!0};var ie=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?ne:{value:e[0].value,isValid:!0}:ne:ae}return ae};const re={isValid:!1,value:null};var se=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),re):re;function oe(e,t,a="validate"){if(Z(e)||Array.isArray(e)&&e.every(Z)||Y(e)&&!e)return{type:a,message:Z(e)?e:"",ref:t}}var le=e=>c(e)&&!te(e)?e:{value:e,message:""},ce=async(e,t,a,n,i)=>{const{ref:s,refs:l,required:u,maxLength:d,minLength:m,min:p,max:f,pattern:b,validate:E,name:y,valueAsNumber:v,mount:x,disabled:S}=e._f,w=h(t,y);if(!x||S)return{};const O=l?l[0]:s,T=e=>{n&&O.reportValidity&&(O.setCustomValidity(Y(e)?"":e||""),O.reportValidity())},I={},j=ee(s),_=r(s),F=j||_,P=(v||X(s))&&g(s.value)&&g(w)||Q(s)&&""===s.value||""===w||Array.isArray(w)&&!w.length,R=G.bind(null,y,a,I),D=(e,t,a,n="maxLength",i="minLength")=>{const r=e?t:a;I[y]={type:e?n:i,message:r,ref:s,...R(e?n:i,r)}};if(i?!Array.isArray(w)||!w.length:u&&(!F&&(P||o(w))||Y(w)&&!w||_&&!ie(l).isValid||j&&!se(l).isValid)){const{value:e,message:t}=Z(u)?{value:!!u,message:u}:le(u);if(e&&(I[y]={type:M,message:t,ref:O,...R(M,t)},!a))return T(t),I}if(!(P||o(p)&&o(f))){let e,t;const n=le(f),i=le(p);if(o(w)||isNaN(w)){const a=s.valueAsDate||new Date(w),r=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;L(n.value)&&w&&(e=o?r(w)>r(n.value):l?w>n.value:a>new Date(n.value)),L(i.value)&&w&&(t=o?r(w)<r(i.value):l?w<i.value:a<new Date(i.value))}else{const a=s.valueAsNumber||(w?+w:w);o(n.value)||(e=a>n.value),o(i.value)||(t=a<i.value)}if((e||t)&&(D(!!e,n.message,i.message,"max","min"),!a))return T(I[y].message),I}if((d||m)&&!P&&(L(w)||i&&Array.isArray(w))){const e=le(d),t=le(m),n=!o(e.value)&&w.length>+e.value,i=!o(t.value)&&w.length<+t.value;if((n||i)&&(D(n,e.message,t.message),!a))return T(I[y].message),I}if(b&&!P&&L(w)){const{value:e,message:t}=le(b);if(te(e)&&!w.match(e)&&(I[y]={type:k,message:t,ref:s,...R(k,t)},!a))return T(t),I}if(E)if(J(E)){const e=oe(await E(w,t),O);if(e&&(I[y]={...e,...R("validate",e.message)},!a))return T(e.message),I}else if(c(E)){let e={};for(const n in E){if(!C(e)&&!a)break;const i=oe(await E[n](w,t),O,n);i&&(e={...i,...R(n,i.message)},T(i.message),a&&(I[y]=e))}if(!C(e)&&(I[y]={ref:O,...e},!a))return I}return T(!0),I};function ue(e,t){return[...e,...j(t)]}var de=e=>Array.isArray(e)?e.map((()=>{})):void 0;function me(e,t,a){return[...e.slice(0,t),...j(a),...e.slice(t)]}var pe=(e,t,a)=>Array.isArray(e)?(g(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[];function fe(e,t){return[...j(t),...j(e)]}var ge=(e,t)=>g(t)?[]:function(e,t){let a=0;const n=[...e];for(const e of t)n.splice(e-a,1),a++;return f(n).length?n:[]}(e,j(t).sort(((e,t)=>e-t))),he=(e,t,a)=>{e[t]=[e[a],e[a]=e[t]][0]};function be(e,t){const a=Array.isArray(t)?t:A(t)?[t]:N(t),n=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let n=0;for(;n<a;)e=g(e)?n++:e[t[n++]];return e}(e,a),i=a.length-1,r=a[i];return n&&delete n[r],0!==i&&(c(n)&&C(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!g(e[t]))return!1;return!0}(n))&&be(e,a.slice(0,-1)),e}var Ee=(e,t,a)=>(e[t]=a,e);function ye(){let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var ve=e=>o(e)||!l(e);function xe(e,t){if(ve(e)||ve(t))return e===t;if(s(e)&&s(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(const i of a){const a=e[i];if(!n.includes(i))return!1;if("ref"!==i){const e=t[i];if(s(a)&&s(e)||c(a)&&c(e)||Array.isArray(a)&&Array.isArray(e)?!xe(a,e):a!==e)return!1}}return!0}var Se=e=>"select-multiple"===e.type,ke=e=>Q(e)&&e.isConnected,Me=e=>{for(const t in e)if(J(e[t]))return!0;return!1};function we(e,t={}){const a=Array.isArray(e);if(c(e)||a)for(const a in e)Array.isArray(e[a])||c(e[a])&&!Me(e[a])?(t[a]=Array.isArray(e[a])?[]:{},we(e[a],t[a])):o(e[a])||(t[a]=!0);return t}function Oe(e,t,a){const n=Array.isArray(e);if(c(e)||n)for(const n in e)Array.isArray(e[n])||c(e[n])&&!Me(e[n])?g(t)||ve(a[n])?a[n]=Array.isArray(e[n])?we(e[n],[]):{...we(e[n])}:Oe(e[n],o(t)?{}:t[n],a[n]):a[n]=!xe(e[n],t[n]);return a}var Te=(e,t)=>Oe(e,t,we(t)),Ce=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:n})=>g(e)?e:t?""===e?NaN:e?+e:e:a&&L(e)?new Date(e):n?n(e):e;function Ie(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return X(t)?t.files:ee(t)?se(e.refs).value:Se(t)?[...t.selectedOptions].map((({value:e})=>e)):r(t)?ie(e.refs).value:Ce(g(t.value)?e.ref.value:t.value,e)}var je=e=>g(e)?e:te(e)?e.source:c(e)?te(e.value)?e.value.source:e.value:e;function _e(e,t,a){const n=h(e,a);if(n||A(a))return{error:n,name:a};const i=a.split(".");for(;i.length;){const n=i.join("."),r=h(t,n),s=h(e,n);if(r&&!Array.isArray(r)&&a!==n)return{name:a};if(s&&s.type)return{name:n,error:s};i.pop()}return{name:a}}const Fe={mode:x,reValidateMode:v,shouldFocusError:!0};function Pe(e={},t){let a,n={...Fe,...e},i={submitCount:0,isDirty:!1,isLoading:J(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},y=(c(n.defaultValues)||c(n.values))&&p(n.defaultValues||n.values)||{},v=n.shouldUnregister?{}:p(y),x={action:!1,mount:!1,watch:!1},k={mount:new Set,unMount:new Set,array:new Set,watch:new Set},M=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},O={values:ye(),array:ye(),state:ye()},T=e.resetOptions&&e.resetOptions.keepDirtyValues,I=q(n.mode),_=q(n.reValidateMode),F=n.criteriaMode===S,P=async e=>{if(w.isValid||e){const e=n.resolver?C((await H()).errors):await G(l,!0);e!==i.isValid&&O.state.next({isValid:e})}},D=e=>w.isValidating&&O.state.next({isValidating:e}),A=(e,t,a,n)=>{const i=h(l,e);if(i){const r=h(v,e,g(a)?h(y,e):a);g(r)||n&&n.defaultChecked||t?B(v,e,t?r:Ie(i._f)):Z(e,r),x.mount&&P()}},N=(e,t,a,n,r)=>{let s=!1,o=!1;const l={name:e};if(!a||n){w.isDirty&&(o=i.isDirty,i.isDirty=l.isDirty=$(),s=o!==l.isDirty);const a=xe(h(y,e),t);o=h(i.dirtyFields,e),a?be(i.dirtyFields,e):B(i.dirtyFields,e,!0),l.dirtyFields=i.dirtyFields,s=s||w.dirtyFields&&o!==!a}if(a){const t=h(i.touchedFields,e);t||(B(i.touchedFields,e,a),l.touchedFields=i.touchedFields,s=s||w.touchedFields&&t!==a)}return s&&r&&O.state.next(l),s?l:{}},z=(t,n,r,s)=>{const o=h(i.errors,t),l=w.isValid&&Y(n)&&i.isValid!==n;var c;if(e.delayError&&r?(c=()=>((e,t)=>{B(i.errors,e,t),O.state.next({errors:i.errors})})(t,r),a=e=>{clearTimeout(M),M=setTimeout(c,e)},a(e.delayError)):(clearTimeout(M),a=null,r?B(i.errors,t,r):be(i.errors,t)),(r?!xe(o,r):o)||!C(s)||l){const e={...s,...l&&Y(n)?{isValid:n}:{},errors:i.errors,name:t};i={...i,...e},O.state.next(e)}D(!1)},H=async e=>n.resolver(v,n.context,((e,t,a,n)=>{const i={};for(const a of e){const e=h(t,a);e&&B(i,a,e._f)}return{criteriaMode:a,names:[...e],fields:i,shouldUseNativeValidation:n}})(e||k.mount,l,n.criteriaMode,n.shouldUseNativeValidation)),G=async(e,t,a={valid:!0})=>{for(const r in e){const s=e[r];if(s){const{_f:e,...r}=s;if(e){const r=k.array.has(e.name),o=await ce(s,v,F,n.shouldUseNativeValidation&&!t,r);if(o[e.name]&&(a.valid=!1,t))break;!t&&(h(o,e.name)?r?K(i.errors,o,e.name):B(i.errors,e.name,o[e.name]):be(i.errors,e.name))}r&&await G(r,t,a)}}return a.valid},$=(e,t)=>(e&&t&&B(v,e,t),!xe(re(),y)),U=(e,t,a)=>R(e,k,{...x.mount?v:g(t)?y:L(e)?{[e]:t}:t},a,t),Z=(e,t,a={})=>{const n=h(l,e);let i=t;if(n){const a=n._f;a&&(!a.disabled&&B(v,e,Ce(t,a)),i=Q(a.ref)&&o(t)?"":t,Se(a.ref)?[...a.ref.options].forEach((e=>e.selected=i.includes(e.value))):a.refs?r(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((t=>t===e.value)):i===e.value))):a.refs[0]&&(a.refs[0].checked=!!i):a.refs.forEach((e=>e.checked=e.value===i)):X(a.ref)?a.ref.value="":(a.ref.value=i,a.ref.type||O.values.next({name:e,values:{...v}})))}(a.shouldDirty||a.shouldTouch)&&N(e,i,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ie(e)},te=(e,t,a)=>{for(const n in t){const i=t[n],r=`${e}.${n}`,o=h(l,r);!k.array.has(e)&&ve(i)&&(!o||o._f)||s(i)?Z(r,i,a):te(r,i,a)}},ae=(e,a,n={})=>{const r=h(l,e),s=k.array.has(e),c=p(a);B(v,e,c),s?(O.array.next({name:e,values:{...v}}),(w.isDirty||w.dirtyFields)&&n.shouldDirty&&O.state.next({name:e,dirtyFields:Te(y,v),isDirty:$(e,c)})):!r||r._f||o(c)?Z(e,c,n):te(e,c,n),W(e,k)&&O.state.next({...i}),O.values.next({name:e,values:{...v}}),!x.mount&&t()},ne=async e=>{const t=e.target;let r=t.name,s=!0;const o=h(l,r);if(o){let d,m;const p=t.type?Ie(o._f):u(e),f=e.type===b||e.type===E,g=!((c=o._f).mount&&(c.required||c.min||c.max||c.maxLength||c.minLength||c.pattern||c.validate)||n.resolver||h(i.errors,r)||o._f.deps)||((e,t,a,n,i)=>!i.isOnAll&&(!a&&i.isOnTouch?!(t||e):(a?n.isOnBlur:i.isOnBlur)?!e:!(a?n.isOnChange:i.isOnChange)||e))(f,h(i.touchedFields,r),i.isSubmitted,_,I),y=W(r,k,f);B(v,r,p),f?(o._f.onBlur&&o._f.onBlur(e),a&&a(0)):o._f.onChange&&o._f.onChange(e);const x=N(r,p,f,!1),S=!C(x)||y;if(!f&&O.values.next({name:r,type:e.type,values:{...v}}),g)return w.isValid&&P(),S&&O.state.next({name:r,...y?{}:x});if(!f&&y&&O.state.next({...i}),D(!0),n.resolver){const{errors:e}=await H([r]),t=_e(i.errors,l,r),a=_e(e,l,t.name||r);d=a.error,r=a.name,m=C(e)}else d=(await ce(o,v,F,n.shouldUseNativeValidation))[r],s=isNaN(p)||p===h(v,r,p),s&&(d?m=!1:w.isValid&&(m=await G(l,!0)));s&&(o._f.deps&&ie(o._f.deps),z(r,m,d,x))}var c},ie=async(e,t={})=>{let a,r;const s=j(e);if(D(!0),n.resolver){const t=await(async e=>{const{errors:t}=await H();if(e)for(const a of e){const e=h(t,a);e?B(i.errors,a,e):be(i.errors,a)}else i.errors=t;return t})(g(e)?e:s);a=C(t),r=e?!s.some((e=>h(t,e))):a}else e?(r=(await Promise.all(s.map((async e=>{const t=h(l,e);return await G(t&&t._f?{[e]:t}:t)})))).every(Boolean),(r||i.isValid)&&P()):r=a=await G(l);return O.state.next({...!L(e)||w.isValid&&a!==i.isValid?{}:{name:e},...n.resolver||!e?{isValid:a}:{},errors:i.errors,isValidating:!1}),t.shouldFocus&&!r&&V(l,(e=>e&&h(i.errors,e)),e?s:k.mount),r},re=e=>{const t={...y,...x.mount?v:{}};return g(e)?t:L(e)?h(t,e):e.map((e=>h(t,e)))},se=(e,t)=>({invalid:!!h((t||i).errors,e),isDirty:!!h((t||i).dirtyFields,e),isTouched:!!h((t||i).touchedFields,e),error:h((t||i).errors,e)}),oe=(e,t,a)=>{const n=(h(l,e,{_f:{}})._f||{}).ref;B(i.errors,e,{...t,ref:n}),O.state.next({name:e,errors:i.errors,isValid:!1}),a&&a.shouldFocus&&n&&n.focus&&n.focus()},le=(e,t={})=>{for(const a of e?j(e):k.mount)k.mount.delete(a),k.array.delete(a),t.keepValue||(be(l,a),be(v,a)),!t.keepError&&be(i.errors,a),!t.keepDirty&&be(i.dirtyFields,a),!t.keepTouched&&be(i.touchedFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&be(y,a);O.values.next({values:{...v}}),O.state.next({...i,...t.keepDirty?{isDirty:$()}:{}}),!t.keepIsValid&&P()},ue=(e,t={})=>{let a=h(l,e);const i=Y(t.disabled);return B(l,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),k.mount.add(e),a?i&&B(v,e,t.disabled?void 0:h(v,e,Ie(a._f))):A(e,!0,t.value),{...i?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:je(t.min),max:je(t.max),minLength:je(t.minLength),maxLength:je(t.maxLength),pattern:je(t.pattern)}:{},name:e,onChange:ne,onBlur:ne,ref:i=>{if(i){ue(e,t),a=h(l,e);const n=g(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,s=(e=>ee(e)||r(e))(n),o=a._f.refs||[];if(s?o.find((e=>e===n)):n===a._f.ref)return;B(l,e,{_f:{...a._f,...s?{refs:[...o.filter(ke),n,...Array.isArray(h(y,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),A(e,!1,void 0,n)}else a=h(l,e,{}),a._f&&(a._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!d(k.array,e)||!x.action)&&k.unMount.add(e)}}},de=()=>n.shouldFocusError&&V(l,(e=>e&&h(i.errors,e)),k.mount),me=(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let r=p(v);if(O.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await H();i.errors=e,r=t}else await G(l);be(i.errors,"root"),C(i.errors)?(O.state.next({errors:{}}),await e(r,a)):(t&&await t({...i.errors},a),de(),setTimeout(de)),O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(i.errors),submitCount:i.submitCount+1,errors:i.errors})},pe=(a,n={})=>{const r=a||y,s=p(r),o=a&&!C(a)?s:y;if(n.keepDefaultValues||(y=r),!n.keepValues){if(n.keepDirtyValues||T)for(const e of k.mount)h(i.dirtyFields,e)?B(o,e,h(v,e)):ae(e,h(o,e));else{if(m&&g(a))for(const e of k.mount){const t=h(l,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Q(e)){const t=e.closest("form");if(t){t.reset();break}}}}l={}}v=e.shouldUnregister?n.keepDefaultValues?p(y):{}:p(o),O.array.next({values:{...o}}),O.values.next({values:{...o}})}k={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&t(),x.mount=!w.isValid||!!n.keepIsValid,x.watch=!!e.shouldUnregister,O.state.next({submitCount:n.keepSubmitCount?i.submitCount:0,isDirty:n.keepDirty?i.isDirty:!(!n.keepDefaultValues||xe(a,y)),isSubmitted:!!n.keepIsSubmitted&&i.isSubmitted,dirtyFields:n.keepDirtyValues?i.dirtyFields:n.keepDefaultValues&&a?Te(y,a):{},touchedFields:n.keepTouched?i.touchedFields:{},errors:n.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},fe=(e,t)=>pe(J(e)?e(v):e,t);return{control:{register:ue,unregister:le,getFieldState:se,handleSubmit:me,setError:oe,_executeSchema:H,_getWatch:U,_getDirty:$,_updateValid:P,_removeUnmounted:()=>{for(const e of k.unMount){const t=h(l,e);t&&(t._f.refs?t._f.refs.every((e=>!ke(e))):!ke(t._f.ref))&&le(e)}k.unMount=new Set},_updateFieldArray:(e,t=[],a,n,r=!0,s=!0)=>{if(n&&a){if(x.action=!0,s&&Array.isArray(h(l,e))){const t=a(h(l,e),n.argA,n.argB);r&&B(l,e,t)}if(s&&Array.isArray(h(i.errors,e))){const t=a(h(i.errors,e),n.argA,n.argB);r&&B(i.errors,e,t),((e,t)=>{!f(h(e,t)).length&&be(e,t)})(i.errors,e)}if(w.touchedFields&&s&&Array.isArray(h(i.touchedFields,e))){const t=a(h(i.touchedFields,e),n.argA,n.argB);r&&B(i.touchedFields,e,t)}w.dirtyFields&&(i.dirtyFields=Te(y,v)),O.state.next({name:e,isDirty:$(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else B(v,e,t)},_getFieldArray:t=>f(h(x.mount?v:y,t,e.shouldUnregister?h(y,t,[]):[])),_reset:pe,_resetDefaultValues:()=>J(n.defaultValues)&&n.defaultValues().then((e=>{fe(e,n.resetOptions),O.state.next({isLoading:!1})})),_updateFormState:e=>{i={...i,...e}},_subjects:O,_proxyFormState:w,get _fields(){return l},get _formValues(){return v},get _state(){return x},set _state(e){x=e},get _defaultValues(){return y},get _names(){return k},set _names(e){k=e},get _formState(){return i},set _formState(e){i=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:ie,register:ue,handleSubmit:me,watch:(e,t)=>J(e)?O.values.subscribe({next:a=>e(U(void 0,t),a)}):U(e,t,!0),setValue:ae,getValues:re,reset:fe,resetField:(e,t={})=>{h(l,e)&&(g(t.defaultValue)?ae(e,h(y,e)):(ae(e,t.defaultValue),B(y,e,t.defaultValue)),t.keepTouched||be(i.touchedFields,e),t.keepDirty||(be(i.dirtyFields,e),i.isDirty=t.defaultValue?$(e,h(y,e)):$()),t.keepError||(be(i.errors,e),w.isValid&&P()),O.state.next({...i}))},clearErrors:e=>{e&&j(e).forEach((e=>be(i.errors,e))),O.state.next({errors:e?i.errors:{}})},unregister:le,setError:oe,setFocus:(e,t={})=>{const a=h(l,e),n=a&&a._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:se}}t.Controller=e=>e.render(z(e)),t.Form=function(e){const t=O(),[a,n]=i.default.useState(!1),{control:r=t.control,onSubmit:s,children:o,action:l,method:c=H,headers:u,encType:d,onError:m,render:p,onSuccess:f,validateStatus:g,...b}=e,E=async t=>{let a=!1,n="";await r.handleSubmit((async e=>{const i=new FormData;let o="";try{o=JSON.stringify(e)}catch(e){}for(const t of r._names.mount)i.append(t,h(e,t));if(s&&s({data:e,event:t,method:c,formData:i,formDataJson:o}),l)try{const e=[u&&u["Content-Type"],d].some((e=>e&&e.includes("json"))),t=await fetch(l,{method:c,headers:{...u,...d?{"Content-Type":d}:{}},body:e?o:i});t&&(g?!g(t.status):t.status<200||t.status>=300)?(a=!0,m&&m({response:t}),n=String(t.status)):f&&f({response:t})}catch(e){a=!0,m&&m({error:e})}}))(t),a&&e.control&&(e.control._subjects.state.next({isSubmitSuccessful:!1}),e.control.setError("root.server",{type:n}))};return i.default.useEffect((()=>{n(!0)}),[]),p?i.default.createElement(i.default.Fragment,null,p({submit:E})):i.default.createElement("form",{noValidate:a,action:l,method:c,encType:d,onSubmit:E,...b},o)},t.FormProvider=e=>{const{children:t,...a}=e;return i.default.createElement(w.Provider,{value:a},t)},t.appendErrors=G,t.get=h,t.set=B,t.useController=z,t.useFieldArray=function(e){const t=O(),{control:a=t.control,name:n,keyName:r="id",shouldUnregister:s}=e,[o,l]=i.default.useState(a._getFieldArray(n)),c=i.default.useRef(a._getFieldArray(n).map($)),u=i.default.useRef(o),d=i.default.useRef(n),m=i.default.useRef(!1);d.current=n,u.current=o,a._names.array.add(n),e.rules&&a.register(n,e.rules),F({next:({values:e,name:t})=>{if(t===d.current||!t){const t=h(e,d.current);Array.isArray(t)&&(l(t),c.current=t.map($))}},subject:a._subjects.array});const f=i.default.useCallback((e=>{m.current=!0,a._updateFieldArray(n,e)}),[a,n]);return i.default.useEffect((()=>{if(a._state.action=!1,W(n,a._names)&&a._subjects.state.next({...a._formState}),m.current&&(!q(a._options.mode).isOnSubmit||a._formState.isSubmitted))if(a._options.resolver)a._executeSchema([n]).then((e=>{const t=h(e.errors,n),i=h(a._formState.errors,n);(i?!t&&i.type||t&&(i.type!==t.type||i.message!==t.message):t&&t.type)&&(t?B(a._formState.errors,n,t):be(a._formState.errors,n),a._subjects.state.next({errors:a._formState.errors}))}));else{const e=h(a._fields,n);e&&e._f&&ce(e,a._formValues,a._options.criteriaMode===S,a._options.shouldUseNativeValidation,!0).then((e=>!C(e)&&a._subjects.state.next({errors:K(a._formState.errors,e,n)})))}a._subjects.values.next({name:n,values:{...a._formValues}}),a._names.focus&&V(a._fields,(e=>!!e&&e.startsWith(a._names.focus||""))),a._names.focus="",a._updateValid()}),[o,n,a]),i.default.useEffect((()=>(!h(a._formValues,n)&&a._updateFieldArray(n),()=>{(a._options.shouldUnregister||s)&&a.unregister(n)})),[n,a,r,s]),{swap:i.default.useCallback(((e,t)=>{const i=a._getFieldArray(n);he(i,e,t),he(c.current,e,t),f(i),l(i),a._updateFieldArray(n,i,he,{argA:e,argB:t},!1)}),[f,n,a]),move:i.default.useCallback(((e,t)=>{const i=a._getFieldArray(n);pe(i,e,t),pe(c.current,e,t),f(i),l(i),a._updateFieldArray(n,i,pe,{argA:e,argB:t},!1)}),[f,n,a]),prepend:i.default.useCallback(((e,t)=>{const i=j(p(e)),r=fe(a._getFieldArray(n),i);a._names.focus=U(n,0,t),c.current=fe(c.current,i.map($)),f(r),l(r),a._updateFieldArray(n,r,fe,{argA:de(e)})}),[f,n,a]),append:i.default.useCallback(((e,t)=>{const i=j(p(e)),r=ue(a._getFieldArray(n),i);a._names.focus=U(n,r.length-1,t),c.current=ue(c.current,i.map($)),f(r),l(r),a._updateFieldArray(n,r,ue,{argA:de(e)})}),[f,n,a]),remove:i.default.useCallback((e=>{const t=ge(a._getFieldArray(n),e);c.current=ge(c.current,e),f(t),l(t),a._updateFieldArray(n,t,ge,{argA:e})}),[f,n,a]),insert:i.default.useCallback(((e,t,i)=>{const r=j(p(t)),s=me(a._getFieldArray(n),e,r);a._names.focus=U(n,e,i),c.current=me(c.current,e,r.map($)),f(s),l(s),a._updateFieldArray(n,s,me,{argA:e,argB:de(t)})}),[f,n,a]),update:i.default.useCallback(((e,t)=>{const i=p(t),r=Ee(a._getFieldArray(n),e,i);c.current=[...r].map(((t,a)=>t&&a!==e?c.current[a]:$())),f(r),l([...r]),a._updateFieldArray(n,r,Ee,{argA:e,argB:i},!0,!1)}),[f,n,a]),replace:i.default.useCallback((e=>{const t=j(p(e));c.current=t.map($),f([...t]),l([...t]),a._updateFieldArray(n,[...t],(e=>e),{},!0,!1)}),[f,n,a]),fields:i.default.useMemo((()=>o.map(((e,t)=>({...e,[r]:c.current[t]||$()})))),[o,r])}},t.useForm=function(e={}){const t=i.default.useRef(),[a,n]=i.default.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:J(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Pe(e,(()=>n((e=>({...e}))))),formState:a});const r=t.current.control;return r._options=e,F({subject:r._subjects.state,next:e=>{I(e,r._proxyFormState,r._updateFormState,!0)&&n({...r._formState})}}),i.default.useEffect((()=>{e.values&&!xe(e.values,r._defaultValues)?r._reset(e.values,r._options.resetOptions):r._resetDefaultValues()}),[e.values,r]),i.default.useEffect((()=>{r._state.mount||(r._updateValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()})),t.current.formState=T(a,r),t.current},t.useFormContext=O,t.useFormState=P,t.useWatch=D},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=i},,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(203);Object.defineProperty(t,"createMemo",{enumerable:!0,get:function(){return n.default}});var i=a(204);Object.defineProperty(t,"createReducerContext",{enumerable:!0,get:function(){return i.default}});var r=a(205);Object.defineProperty(t,"createReducer",{enumerable:!0,get:function(){return r.default}});var s=a(206);Object.defineProperty(t,"createStateContext",{enumerable:!0,get:function(){return s.default}});var o=a(151);Object.defineProperty(t,"useAsync",{enumerable:!0,get:function(){return o.default}});var l=a(152);Object.defineProperty(t,"useAsyncFn",{enumerable:!0,get:function(){return l.default}});var c=a(207);Object.defineProperty(t,"useAsyncRetry",{enumerable:!0,get:function(){return c.default}});var u=a(208);Object.defineProperty(t,"useAudio",{enumerable:!0,get:function(){return u.default}});var d=a(210);Object.defineProperty(t,"useBattery",{enumerable:!0,get:function(){return d.default}});var m=a(211);Object.defineProperty(t,"useBeforeUnload",{enumerable:!0,get:function(){return m.default}});var p=a(212);Object.defineProperty(t,"useBoolean",{enumerable:!0,get:function(){return p.default}});var f=a(213);Object.defineProperty(t,"useClickAway",{enumerable:!0,get:function(){return f.default}});var g=a(214);Object.defineProperty(t,"useCookie",{enumerable:!0,get:function(){return g.default}});var h=a(216);Object.defineProperty(t,"useCopyToClipboard",{enumerable:!0,get:function(){return h.default}});var b=a(155);Object.defineProperty(t,"useCounter",{enumerable:!0,get:function(){return b.default}});var E=a(219);Object.defineProperty(t,"useCss",{enumerable:!0,get:function(){return E.default}});var y=a(114);Object.defineProperty(t,"useCustomCompareEffect",{enumerable:!0,get:function(){return y.default}});var v=a(96);Object.defineProperty(t,"useDebounce",{enumerable:!0,get:function(){return v.default}});var x=a(134);Object.defineProperty(t,"useDeepCompareEffect",{enumerable:!0,get:function(){return x.default}});var S=a(225);Object.defineProperty(t,"useDefault",{enumerable:!0,get:function(){return S.default}});var k=a(226);Object.defineProperty(t,"useDrop",{enumerable:!0,get:function(){return k.default}});var M=a(227);Object.defineProperty(t,"useDropArea",{enumerable:!0,get:function(){return M.default}});var w=a(97);Object.defineProperty(t,"useEffectOnce",{enumerable:!0,get:function(){return w.default}});var O=a(228);Object.defineProperty(t,"useEnsuredForwardedRef",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"ensuredForwardRef",{enumerable:!0,get:function(){return O.ensuredForwardRef}});var T=a(157);Object.defineProperty(t,"useEvent",{enumerable:!0,get:function(){return T.default}});var C=a(229);Object.defineProperty(t,"useError",{enumerable:!0,get:function(){return C.default}});var I=a(230);Object.defineProperty(t,"useFavicon",{enumerable:!0,get:function(){return I.default}});var j=a(231);Object.defineProperty(t,"useFullscreen",{enumerable:!0,get:function(){return j.default}});var _=a(233);Object.defineProperty(t,"useGeolocation",{enumerable:!0,get:function(){return _.default}});var F=a(156);Object.defineProperty(t,"useGetSet",{enumerable:!0,get:function(){return F.default}});var P=a(234);Object.defineProperty(t,"useGetSetState",{enumerable:!0,get:function(){return P.default}});var L=a(235);Object.defineProperty(t,"useHarmonicIntervalFn",{enumerable:!0,get:function(){return L.default}});var R=a(237);Object.defineProperty(t,"useHover",{enumerable:!0,get:function(){return R.default}});var D=a(158);Object.defineProperty(t,"useHoverDirty",{enumerable:!0,get:function(){return D.default}});var A=a(238);Object.defineProperty(t,"useIdle",{enumerable:!0,get:function(){return A.default}});var N=a(127);Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return N.default}});var B=a(240);Object.defineProperty(t,"useInterval",{enumerable:!0,get:function(){return B.default}});var z=a(74);Object.defineProperty(t,"useIsomorphicLayoutEffect",{enumerable:!0,get:function(){return z.default}});var H=a(159);Object.defineProperty(t,"useKey",{enumerable:!0,get:function(){return H.default}});var G=a(241);Object.defineProperty(t,"createBreakpoint",{enumerable:!0,get:function(){return G.default}});var V=a(160);Object.defineProperty(t,"useKeyPress",{enumerable:!0,get:function(){return V.default}});var $=a(242);Object.defineProperty(t,"useKeyPressEvent",{enumerable:!0,get:function(){return $.default}});var U=a(161);Object.defineProperty(t,"useLatest",{enumerable:!0,get:function(){return U.default}});var q=a(162);Object.defineProperty(t,"useLifecycles",{enumerable:!0,get:function(){return q.default}});var W=a(163);Object.defineProperty(t,"useList",{enumerable:!0,get:function(){return W.default}});var K=a(128);Object.defineProperty(t,"useLocalStorage",{enumerable:!0,get:function(){return K.default}});var Y=a(243);Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return Y.default}});var X=a(244);Object.defineProperty(t,"useLockBodyScroll",{enumerable:!0,get:function(){return X.default}});var J=a(245);Object.defineProperty(t,"useLogger",{enumerable:!0,get:function(){return J.default}});var Q=a(246);Object.defineProperty(t,"useLongPress",{enumerable:!0,get:function(){return Q.default}});var Z=a(247);Object.defineProperty(t,"useMap",{enumerable:!0,get:function(){return Z.default}});var ee=a(248);Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return ee.default}});var te=a(249);Object.defineProperty(t,"useMediaDevices",{enumerable:!0,get:function(){return te.default}});var ae=a(250);Object.defineProperty(t,"useMediatedState",{enumerable:!0,get:function(){return ae.useMediatedState}});var ne=a(251);Object.defineProperty(t,"useMethods",{enumerable:!0,get:function(){return ne.default}});var ie=a(252);Object.defineProperty(t,"useMotion",{enumerable:!0,get:function(){return ie.default}});var re=a(164);Object.defineProperty(t,"useMount",{enumerable:!0,get:function(){return re.default}});var se=a(80);Object.defineProperty(t,"useMountedState",{enumerable:!0,get:function(){return se.default}});var oe=a(165);Object.defineProperty(t,"useMouse",{enumerable:!0,get:function(){return oe.default}});var le=a(253);Object.defineProperty(t,"useMouseHovered",{enumerable:!0,get:function(){return le.default}});var ce=a(254);Object.defineProperty(t,"useMouseWheel",{enumerable:!0,get:function(){return ce.default}});var ue=a(255);Object.defineProperty(t,"useNetwork",{enumerable:!0,get:function(){return ue.default}});var de=a(256);Object.defineProperty(t,"useNumber",{enumerable:!0,get:function(){return de.default}});var me=a(135);Object.defineProperty(t,"useObservable",{enumerable:!0,get:function(){return me.default}});var pe=a(257);Object.defineProperty(t,"useOrientation",{enumerable:!0,get:function(){return pe.default}});var fe=a(258);Object.defineProperty(t,"usePageLeave",{enumerable:!0,get:function(){return fe.default}});var ge=a(259);Object.defineProperty(t,"usePermission",{enumerable:!0,get:function(){return ge.default}});var he=a(260);Object.defineProperty(t,"usePrevious",{enumerable:!0,get:function(){return he.default}});var be=a(261);Object.defineProperty(t,"usePreviousDistinct",{enumerable:!0,get:function(){return be.default}});var Ee=a(262);Object.defineProperty(t,"usePromise",{enumerable:!0,get:function(){return Ee.default}});var ye=a(263);Object.defineProperty(t,"useQueue",{enumerable:!0,get:function(){return ye.default}});var ve=a(166);Object.defineProperty(t,"useRaf",{enumerable:!0,get:function(){return ve.default}});var xe=a(264);Object.defineProperty(t,"useRafLoop",{enumerable:!0,get:function(){return xe.default}});var Se=a(98);Object.defineProperty(t,"useRafState",{enumerable:!0,get:function(){return Se.default}});var ke=a(265);Object.defineProperty(t,"useSearchParam",{enumerable:!0,get:function(){return ke.default}});var Me=a(266);Object.defineProperty(t,"useScratch",{enumerable:!0,get:function(){return Me.default}});var we=a(272);Object.defineProperty(t,"useScroll",{enumerable:!0,get:function(){return we.default}});var Oe=a(273);Object.defineProperty(t,"useScrolling",{enumerable:!0,get:function(){return Oe.default}});var Te=a(274);Object.defineProperty(t,"useSessionStorage",{enumerable:!0,get:function(){return Te.default}});var Ce=a(95);Object.defineProperty(t,"useSetState",{enumerable:!0,get:function(){return Ce.default}});var Ie=a(275);Object.defineProperty(t,"useShallowCompareEffect",{enumerable:!0,get:function(){return Ie.default}});var je=a(277);Object.defineProperty(t,"useSize",{enumerable:!0,get:function(){return je.default}});var _e=a(278);Object.defineProperty(t,"useSlider",{enumerable:!0,get:function(){return _e.default}});var Fe=a(279);Object.defineProperty(t,"useSpeech",{enumerable:!0,get:function(){return Fe.default}});var Pe=a(280);Object.defineProperty(t,"useStartTyping",{enumerable:!0,get:function(){return Pe.default}});var Le=a(281);Object.defineProperty(t,"useStateWithHistory",{enumerable:!0,get:function(){return Le.useStateWithHistory}});var Re=a(282);Object.defineProperty(t,"useStateList",{enumerable:!0,get:function(){return Re.default}});var De=a(129);Object.defineProperty(t,"useThrottle",{enumerable:!0,get:function(){return De.default}});var Ae=a(283);Object.defineProperty(t,"useThrottleFn",{enumerable:!0,get:function(){return Ae.default}});var Ne=a(284);Object.defineProperty(t,"useTimeout",{enumerable:!0,get:function(){return Ne.default}});var Be=a(126);Object.defineProperty(t,"useTimeoutFn",{enumerable:!0,get:function(){return Be.default}});var ze=a(285);Object.defineProperty(t,"useTitle",{enumerable:!0,get:function(){return ze.default}});var He=a(154);Object.defineProperty(t,"useToggle",{enumerable:!0,get:function(){return He.default}});var Ge=a(286);Object.defineProperty(t,"useTween",{enumerable:!0,get:function(){return Ge.default}});var Ve=a(111);Object.defineProperty(t,"useUnmount",{enumerable:!0,get:function(){return Ve.default}});var $e=a(288);Object.defineProperty(t,"useUnmountPromise",{enumerable:!0,get:function(){return $e.default}});var Ue=a(84);Object.defineProperty(t,"useUpdate",{enumerable:!0,get:function(){return Ue.default}});var qe=a(94);Object.defineProperty(t,"useUpdateEffect",{enumerable:!0,get:function(){return qe.default}});var We=a(289);Object.defineProperty(t,"useUpsert",{enumerable:!0,get:function(){return We.default}});var Ke=a(290);Object.defineProperty(t,"useVibrate",{enumerable:!0,get:function(){return Ke.default}});var Ye=a(291);Object.defineProperty(t,"useVideo",{enumerable:!0,get:function(){return Ye.default}});var Xe=a(292);Object.defineProperty(t,"useStateValidator",{enumerable:!0,get:function(){return Xe.default}});var Je=a(293);Object.defineProperty(t,"useScrollbarWidth",{enumerable:!0,get:function(){return Je.useScrollbarWidth}});var Qe=a(295);Object.defineProperty(t,"useMultiStateValidator",{enumerable:!0,get:function(){return Qe.useMultiStateValidator}});var Ze=a(296);Object.defineProperty(t,"useWindowScroll",{enumerable:!0,get:function(){return Ze.default}});var et=a(297);Object.defineProperty(t,"useWindowSize",{enumerable:!0,get:function(){return et.default}});var tt=a(298);Object.defineProperty(t,"useMeasure",{enumerable:!0,get:function(){return tt.default}});var at=a(299);Object.defineProperty(t,"useRendersCount",{enumerable:!0,get:function(){return at.useRendersCount}});var nt=a(109);Object.defineProperty(t,"useFirstMountState",{enumerable:!0,get:function(){return nt.useFirstMountState}});var it=a(300);Object.defineProperty(t,"useSet",{enumerable:!0,get:function(){return it.default}});var rt=a(301);Object.defineProperty(t,"createGlobalState",{enumerable:!0,get:function(){return rt.createGlobalState}});var st=a(302);Object.defineProperty(t,"useHash",{enumerable:!0,get:function(){return st.useHash}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=function(e){return(e+1)%1e6};t.default=function(){return n.useReducer(i,0)[1]}},,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(109);t.default=function(e,t){var a=i.useFirstMountState();n.useEffect((function(){if(!a)return e()}),t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){void 0===e&&(e={});var t=n.useState(e),a=t[0],i=t[1];return[a,n.useCallback((function(e){i((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[i])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(126));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var n=r.default(e,t),s=n[0],o=n[1],l=n[2];return i.useEffect(l,a),[s,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){n.useEffect(e,[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(111));t.default=function(e){var t=i.useRef(0),a=i.useState(e),n=a[0],s=a[1],o=i.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){s(e)}))}),[]);return r.default((function(){cancelAnimationFrame(t.current)})),[n,o]}},,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var n=a(2);t.useFirstMountState=function(){var e=n.useRef(!0);return e.current?(e.current=!1,!0):e.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveHookState=void 0,t.resolveHookState=function(e,t){return"function"==typeof e?e(t):e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(97));t.default=function(e){var t=i.useRef(e);t.current=e,r.default((function(){return function(){return t.current()}}))}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t,a){var i=n.useRef(void 0);i.current&&a(t,i.current)||(i.current=t),n.useEffect(e,i.current)}},,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){void 0===t&&(t=0);var a=n.useRef(!1),i=n.useRef(),r=n.useRef(e),s=n.useCallback((function(){return a.current}),[]),o=n.useCallback((function(){a.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout((function(){a.current=!0,r.current()}),t)}),[t]),l=n.useCallback((function(){a.current=null,i.current&&clearTimeout(i.current)}),[]);return n.useEffect((function(){r.current=e}),[e]),n.useEffect((function(){return o(),l}),[t]),[s,l,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){var a=n.useState(null),i=a[0],r=a[1];return n.useEffect((function(){if(e.current&&"function"==typeof IntersectionObserver){var a=new IntersectionObserver((function(e){r(e[0])}),t);return a.observe(e.current),function(){r(null),a.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),i}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r=function(){};t.default=function(e,t,a){if(!i.isClient)return[t,r,r];if(!e)throw new Error("useLocalStorage key may not be falsy");var s=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,o=n.useState((function(){try{var n=a?a.raw?String:a.serializer:JSON.stringify,i=localStorage.getItem(e);return null!==i?s(i):(t&&localStorage.setItem(e,n(t)),t)}catch(e){return t}})),l=o[0],c=o[1],u=n.useCallback((function(t){try{var n="function"==typeof t?t(l):t;if(void 0===n)return;var i;i=a?a.raw?"string"==typeof n?n:JSON.stringify(n):a.serializer?a.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,i),c(s(i))}catch(e){}}),[e,c]),d=n.useCallback((function(){try{localStorage.removeItem(e),c(void 0)}catch(e){}}),[e,c]);return[l,u,d]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(111));t.default=function(e,t){void 0===t&&(t=200);var a=i.useState(e),n=a[0],s=a[1],o=i.useRef(),l=i.useRef(null),c=i.useRef(0);return i.useEffect((function(){if(o.current)l.current=e,c.current=!0;else{s(e);var a=function(){c.current?(c.current=!1,s(l.current),o.current=setTimeout(a,t)):o.current=void 0};o.current=setTimeout(a,t)}}),[e]),r.default((function(){o.current&&clearTimeout(o.current)})),n}},function(e,t,a){"use strict";const n=a(303),i=a(304),r=a(305);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?i(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const i="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);n[t]=i};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){let[e,s]=r(t.decode?i.replace(/\+/g," "):i,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:l(s,t),a(l(e,t),s,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=m(a[e],t);else n[e]=m(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const i=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[",i,"]"].join("")]:[...a,[o(t,e),"[",o(i,e),"]=",o(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[o(t,e),"=",o(n,e)].join("")]:[[a,o(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,o(t,e)]:[...a,[o(t,e),"=",o(n,e)].join("")]}}(t),i={};for(const t of Object.keys(e))a(t)||(i[t]=e[t]);const r=Object.keys(i);return!1!==t.sort&&r.sort(t.sort),r.map((a=>{const i=e[a];return void 0===i?"":null===i?o(a,t):Array.isArray(i)?i.reduce(n(a),[]).join("&"):o(a,t)+"="+o(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=r(e,"#");return Object.assign({url:a.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=u(e.url).split("?")[0]||"",i=t.extract(e.url),r=t.parse(i,{sort:!1}),s=Object.assign(r,e.query);let l=t.stringify(s,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${n}${l}${c}`}},,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(59),r=n.__importDefault(a(114));t.default=function(e,t){r.default(e,t,i.isDeepEqual)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(74));t.default=function(e,t){var a=i.useState(t),n=a[0],s=a[1];return r.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(152));t.default=function(e,t){void 0===t&&(t=[]);var a=r.default(e,t,{loading:!0}),n=a[0],s=a[1];return i.useEffect((function(){s()}),[s]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(80));t.default=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a={loading:!1});var s=i.useRef(0),o=r.default(),l=i.useState(a),c=l[0],u=l[1],d=i.useCallback((function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var i=++s.current;return u((function(e){return n.__assign(n.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&i===s.current&&u({value:e,loading:!1}),e}),(function(e){return o()&&i===s.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importStar(a(2)),r=a(2),s=n.__importDefault(a(95)),o=n.__importDefault(a(209));t.default=function(e){return function(t){var a,l;l=i.isValidElement(t)?(a=t).props:t;var c=s.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),u=c[0],d=c[1],m=r.useRef(null),p=function(e,t){return function(a){try{t&&t(a)}finally{e&&e(a)}}},f=function(){return d({paused:!1})},g=function(){return d({paused:!0})},h=function(){var e=m.current;e&&d({muted:e.muted,volume:e.volume})},b=function(){var e=m.current;if(e){var t=e.duration,a=e.buffered;d({duration:t,buffered:o.default(a)})}},E=function(){var e=m.current;e&&d({time:e.currentTime})},y=function(){var e=m.current;e&&d({buffered:o.default(e.buffered)})};a=a?i.cloneElement(a,n.__assign(n.__assign({controls:!1},l),{ref:m,onPlay:p(l.onPlay,f),onPause:p(l.onPause,g),onVolumeChange:p(l.onVolumeChange,h),onDurationChange:p(l.onDurationChange,b),onTimeUpdate:p(l.onTimeUpdate,E),onProgress:p(l.onProgress,y)})):i.createElement(e,n.__assign(n.__assign({controls:!1},l),{ref:m,onPlay:p(l.onPlay,f),onPause:p(l.onPause,g),onVolumeChange:p(l.onVolumeChange,h),onDurationChange:p(l.onDurationChange,b),onTimeUpdate:p(l.onTimeUpdate,E),onProgress:p(l.onProgress,y)}));var v=!1,x={play:function(){var e=m.current;if(e&&!v){var t=e.play();if("object"==typeof t){v=!0;var a=function(){v=!1};t.then(a,a)}return t}},pause:function(){var e=m.current;if(e&&!v)return e.pause()},seek:function(e){var t=m.current;t&&void 0!==u.duration&&(e=Math.min(u.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=m.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,d({volume:e}))},mute:function(){var e=m.current;e&&(e.muted=!0)},unmute:function(){var e=m.current;e&&(e.muted=!1)}};return r.useEffect((function(){var e=m.current;e&&(d({volume:e.volume,muted:e.muted,paused:e.paused}),l.autoPlay&&e.paused&&x.play())}),[l.src]),[a,u,x,m]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=function(e,t){return"boolean"==typeof t?t:!e};t.default=function(e){return n.useReducer(i,e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(156)),s=a(110);t.default=function(e,t,a){void 0===e&&(e=0),void 0===t&&(t=null),void 0===a&&(a=null);var n=s.resolveHookState(e);"number"!=typeof n&&console.error("initialValue has to be a number, got "+typeof e),"number"==typeof a?n=Math.max(n,a):null!==a&&console.error("min has to be a number, got "+typeof a),"number"==typeof t?n=Math.min(n,t):null!==t&&console.error("max has to be a number, got "+typeof t);var o=r.default(n),l=o[0],c=o[1];return[l(),i.useMemo((function(){var e=function(e){var n=l(),i=s.resolveHookState(e,n);n!==i&&("number"==typeof a&&(i=Math.max(i,a)),"number"==typeof t&&(i=Math.min(i,t)),n!==i&&c(i))};return{get:l,set:e,inc:function(t){void 0===t&&(t=1);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("delta has to be a number or function returning a number, got "+typeof a),e((function(e){return e+a}))},dec:function(t){void 0===t&&(t=1);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("delta has to be a number or function returning a number, got "+typeof a),e((function(e){return e-a}))},reset:function(t){void 0===t&&(t=n);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("value has to be a number or function returning a number, got "+typeof a),n=a,e(a)}}}),[n,a,t])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(84)),s=a(110);t.default=function(e){var t=i.useRef(s.resolveHookState(e)),a=r.default();return i.useMemo((function(){return[function(){return t.current},function(e){t.current=s.resolveHookState(e,t.current),a()}]}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59).isClient?window:null,r=function(e){return!!e.addEventListener},s=function(e){return!!e.on};t.default=function(e,t,a,o){void 0===a&&(a=i),n.useEffect((function(){if(t&&a)return r(a)?a.addEventListener(e,t,o):s(a)&&a.on(e,t,o),function(){r(a)?a.removeEventListener(e,t,o):s(a)&&a.off(e,t,o)}}),[e,t,a,JSON.stringify(o)])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){void 0===t&&(t=!0);var a=n.useState(!1),i=a[0],r=a[1];return n.useEffect((function(){var a=function(){return r(!0)},n=function(){return r(!1)};t&&e&&e.current&&(e.current.addEventListener("mouseover",a),e.current.addEventListener("mouseout",n));var i=e.current;return function(){t&&i&&(i.removeEventListener("mouseover",a),i.removeEventListener("mouseout",n))}}),[t,e]),i}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(157)),s=function(){};t.default=function(e,t,a,n){void 0===t&&(t=s),void 0===a&&(a={}),void 0===n&&(n=[e]);var o=a.event,l=void 0===o?"keydown":o,c=a.target,u=a.options,d=i.useMemo((function(){var a,n="function"==typeof(a=e)?a:"string"==typeof a?function(e){return e.key===a}:a?function(){return!0}:function(){return!1};return function(e){if(n(e))return t(e)}}),n);r.default(l,d,c,u)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(159));t.default=function(e){var t=i.useState([!1,null]),a=t[0],n=t[1];return r.default(e,(function(e){return n([!0,e])}),{event:"keydown"},[a]),r.default(e,(function(e){return n([!1,e])}),{event:"keyup"},[a]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){var t=n.useRef(e);return t.current=e,t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){n.useEffect((function(){return e&&e(),function(){t&&t()}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(84)),s=a(110);t.default=function(e){void 0===e&&(e=[]);var t=i.useRef(s.resolveHookState(e)),a=r.default(),n=i.useMemo((function(){var i={set:function(e){t.current=s.resolveHookState(e,t.current),a()},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length&&n.set((function(t){return t.concat(e)}))},updateAt:function(e,t){n.set((function(a){var n=a.slice();return n[e]=t,n}))},insertAt:function(e,t){n.set((function(a){var n=a.slice();return e>n.length?n[e]=t:n.splice(e,0,t),n}))},update:function(e,t){n.set((function(a){return a.map((function(a){return e(a,t)?t:a}))}))},updateFirst:function(e,a){var i=t.current.findIndex((function(t){return e(t,a)}));i>=0&&n.updateAt(i,a)},upsert:function(e,a){var i=t.current.findIndex((function(t){return e(t,a)}));i>=0?n.updateAt(i,a):n.push(a)},sort:function(e){n.set((function(t){return t.slice().sort(e)}))},filter:function(e,t){n.set((function(a){return a.slice().filter(e,t)}))},removeAt:function(e){n.set((function(t){var a=t.slice();return a.splice(e,1),a}))},clear:function(){n.set([])},reset:function(){n.set(s.resolveHookState(e).slice())}};return i.remove=i.removeAt,i}),[]);return[t.current,n]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(97));t.default=function(e){n.default((function(){e()}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(98));t.default=function(e){var t=r.default({docX:0,docY:0,posX:0,posY:0,elX:0,elY:0,elH:0,elW:0}),a=t[0],n=t[1];return i.useEffect((function(){var t=function(t){if(e&&e.current){var a=e.current.getBoundingClientRect(),i=a.left,r=a.top,s=a.width,o=a.height,l=i+window.pageXOffset,c=r+window.pageYOffset,u=t.pageX-l,d=t.pageY-c;n({docX:t.pageX,docY:t.pageY,posX:l,posY:c,elX:u,elY:d,elH:o,elW:s})}};return document.addEventListener("mousemove",t),function(){document.removeEventListener("mousemove",t)}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(74));t.default=function(e,t){void 0===e&&(e=1e12),void 0===t&&(t=0);var a=i.useState(0),n=a[0],s=a[1];return r.default((function(){var a,n,i,r=function(){var t=Math.min(1,(Date.now()-i)/e);s(t),o()},o=function(){a=requestAnimationFrame(r)},l=setTimeout((function(){n=setTimeout((function(){cancelAnimationFrame(a),s(1)}),e),i=Date.now(),o()}),t);return function(){clearTimeout(n),clearTimeout(l),cancelAnimationFrame(a)}}),[e,t]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=parseInt(i.version.substr(0,i.version.indexOf(".")))>15,s=function(e){return"function"==typeof e};t.default=function(e,t){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];var l=e.render,c=e.children,u=void 0===c?l:c,d=e.component,m=e.comp,p=void 0===m?d:m;return s(u)?u.apply(void 0,n.__spreadArrays([t],a)):p?i.createElement(p,t):u instanceof Array?r?u:i.createElement.apply(void 0,n.__spreadArrays(["div",null],u)):u&&u instanceof Object?"string"==typeof u.type?u:i.cloneElement(u,Object.assign({},u.props,t)):u||null}},function(e,t,a){e.exports=a(34)(172)},,function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,i,r;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(i=n;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,r[i]))return!1;for(i=n;0!=i--;){var s=r[i];if(!("_owner"===s&&t.$$typeof||e(t[s],a[s])))return!1}return!0}return t!=t&&a!=a}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return n.useMemo((function(){return e.apply(void 0,t)}),t)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){var a=n.createContext(void 0);return[function(){var e=n.useContext(a);if(null==e)throw new Error("useReducerContext must be used inside a ReducerProvider.");return e},function(i){var r=i.children,s=i.initialState;return function(e,t){return n.createElement(a.Provider,e,t)}({value:n.useReducer(e,void 0!==s?s:t)},r)},a]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(94));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a,n=(a=e,function(e,t){return a.reduceRight((function(t,a){return a(e)(t)}),t)});return function(e,t,a){void 0===a&&(a=function(e){return e});var s=i.useRef(a(t)),o=i.useState(s.current)[1],l=i.useCallback((function(t){return s.current=e(s.current,t),o(s.current),t}),[e]),c=i.useRef(n({getState:function(){return s.current},dispatch:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.current.apply(c,e)}},l));return r.default((function(){c.current=n({getState:function(){return s.current},dispatch:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.current.apply(c,e)}},l)}),[l]),[s.current,c.current]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){var t=n.createContext(void 0);return[function(){var e=n.useContext(t);if(null==e)throw new Error("useStateContext must be used inside a StateProvider.");return e},function(a){var i=a.children,r=a.initialValue;return function(e,a){return n.createElement(t.Provider,e,a)}({value:n.useState(void 0!==r?r:e)},i)},t]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(151));t.default=function(e,t){void 0===t&&(t=[]);var a=i.useState(0),s=a[0],o=a[1],l=r.default(e,n.__spreadArrays(t,[s])),c=l.loading,u=i.useCallback((function(){c||o((function(e){return e+1}))}),n.__spreadArrays(t,[c]));return n.__assign(n.__assign({},l),{retry:u})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(153)).default("audio");t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],a=0;a<e.length;a++)t.push({start:e.start(a),end:e.end(a)});return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r="object"==typeof navigator?navigator:void 0,s=r&&"function"==typeof r.getBattery;t.default=s?function(){var e=n.useState({isSupported:!0,fetched:!1}),t=e[0],a=e[1];return n.useEffect((function(){var e=!0,n=null,s=function(){if(e&&n){var r={isSupported:!0,fetched:!0,level:n.level,charging:n.charging,dischargingTime:n.dischargingTime,chargingTime:n.chargingTime};!i.isDeepEqual(t,r)&&a(r)}};return r.getBattery().then((function(t){e&&(n=t,i.on(n,"chargingchange",s),i.on(n,"chargingtimechange",s),i.on(n,"dischargingtimechange",s),i.on(n,"levelchange",s),s())})),function(){e=!1,n&&(i.off(n,"chargingchange",s),i.off(n,"chargingtimechange",s),i.off(n,"dischargingtimechange",s),i.off(n,"levelchange",s))}}),[]),t}:function(){return{isSupported:!1}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){void 0===e&&(e=!0);var a=n.useCallback((function(a){if("function"!=typeof e||e())return a.preventDefault(),t&&(a.returnValue=t),t}),[e,t]);n.useEffect((function(){if(e)return window.addEventListener("beforeunload",a),function(){return window.removeEventListener("beforeunload",a)}}),[e,a])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(154));t.default=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r=["mousedown","touchstart"];t.default=function(e,t,a){void 0===a&&(a=r);var s=n.useRef(t);n.useEffect((function(){s.current=t}),[t]),n.useEffect((function(){for(var t=function(t){var a=e.current;a&&!a.contains(t.target)&&s.current(t)},n=0,r=a;n<r.length;n++){var o=r[n];i.on(document,o,t)}return function(){for(var e=0,n=a;e<n.length;e++){var r=n[e];i.off(document,r,t)}}}),[a,e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(215));t.default=function(e){var t=i.useState((function(){return r.default.get(e)||null})),a=t[0],n=t[1];return[a,i.useCallback((function(t,a){r.default.set(e,t,a),n(t)}),[e]),i.useCallback((function(){r.default.remove(e),n(null)}),[e])]}},function(e,t,a){var n,i,r;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(n){function i(){}function r(t,a,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},i.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var s=JSON.stringify(a);/^[\{\[]/.test(s)&&(a=s)}catch(e){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in r)r[l]&&(o+="; "+l,!0!==r[l]&&(o+="="+r[l].split(";")[0]));return document.cookie=t+"="+a+o}}function s(e,a){if("undefined"!=typeof document){for(var i={},r=document.cookie?document.cookie.split("; "):[],s=0;s<r.length;s++){var o=r[s].split("="),l=o.slice(1).join("=");a||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(o[0]);if(l=(n.read||n)(l,c)||t(l),a)try{l=JSON.parse(l)}catch(e){}if(i[c]=l,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=r,i.get=function(e){return s(e,!1)},i.getJSON=function(e){return s(e,!0)},i.remove=function(t,a){r(t,"",e(a,{expires:-1}))},i.defaults={},i.withConverter=a,i}((function(){}))},void 0===(i="function"==typeof(n=r)?n.call(t,a,t,e):n)||(e.exports=i),e.exports=r()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(217)),r=a(2),s=n.__importDefault(a(80)),o=n.__importDefault(a(95));t.default=function(){var e=s.default(),t=o.default({value:void 0,error:void 0,noUserInteraction:!0}),a=t[0],n=t[1];return[a,r.useCallback((function(t){var a,r;if(e())try{if("string"!=typeof t&&"number"!=typeof t){var s=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void n({value:t,error:s,noUserInteraction:!0})}if(""===t)return s=new Error("Cannot copy empty string to clipboard."),void n({value:t,error:s,noUserInteraction:!0});r=t.toString(),a=i.default(r),n({value:r,error:void 0,noUserInteraction:a})}catch(s){n({value:r,error:s,noUserInteraction:a})}}),[])]}},function(e,t,a){"use strict";var n=a(218),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,r,s,o,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(s=n(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=i[t.format]||i.default;window.clipboardData.setData(r,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(220),r=a(221),s=a(222),o=a(224),l=a(2),c=n.__importDefault(a(74)),u=i.create();r.addon(u),s.addon(u);var d=0;t.default=function(e){var t=l.useMemo((function(){return"react-use-css-"+(d++).toString(36)}),[]),a=l.useMemo((function(){return new u.VSheet}),[]);return c.default((function(){var n={};return o.cssToTree(n,e,"."+t,""),a.diff(n),function(){a.diff({})}})),t}},function(e,t,a){"use strict";var n=/[A-Z]/g;t.create=function(e){var t=(e=e||{}).assign||Object.assign,a=t({raw:"",pfx:"_",client:"object"==typeof window,assign:t,stringify:JSON.stringify,kebab:function(e){return e.replace(n,"-$&").toLowerCase()},decl:function(e,t){return(e=a.kebab(e))+":"+t+";"},hash:function(e){return function(e){for(var t=5381,a=e.length;a;)t=33*t^e.charCodeAt(--a);return"_"+(t>>>0).toString(36)}(a.stringify(e))},selector:function(e,t){return e+(":"===t[0]?"":" ")+t},putRaw:function(e){a.raw+=e}},e);return a.client&&(a.sh||document.head.appendChild(a.sh=document.createElement("style")),a.putRaw=function(e){var t=a.sh.sheet;try{t.insertRule(e,t.cssRules.length)}catch(e){}}),a.put=function(e,t,n){var i,r,s="",o=[];for(i in t)(r=t[i])instanceof Object&&!(r instanceof Array)?o.push(i):s+=a.decl(i,r,e,n);s&&(s=e+"{"+s+"}",a.putRaw(n?n+"{"+s+"}":s));for(var l=0;l<o.length;l++)"@"===(i=o[l])[0]&&"@font-face"!==i?a.putAt(e,t[i],i):a.put(a.selector(e,i),t[i],n)},a.putAt=a.put,a}},function(e,t,a){"use strict";t.addon=function(e){e.client&&(document.head.appendChild(e.msh=document.createElement("style")),e.createRule=function(t,a){var n=t+"{}";a&&(n=a+"{"+n+"}");var i=a?e.msh.sheet:e.sh.sheet,r=i.insertRule(n,i.cssRules.length),s=(i.cssRules||i.rules)[r];if(s.index=r,a){var o=(s.cssRules||s.rules)[0];s.style=o.style,s.styleMap=o.styleMap}return s})}},function(e,t,a){"use strict";var n=a(223).removeRule;t.addon=function(e){if(e.client){var t=e.kebab;a.prototype.diff=function(e){var a,n=this.decl,i=this.rule.style;for(a in n)void 0===e[a]&&i.removeProperty(a);for(a in e)e[a]!==n[a]&&i.setProperty(t(a),e[a]);this.decl=e},a.prototype.del=function(){n(this.rule)},i.prototype.diff=function(e){var t=this.tree;for(var n in t)if(void 0===e[n]){var i=t[n];for(var r in i)i[r].del()}for(var n in e)if(void 0===t[n])for(var r in e[n])(l=new a(r,n)).diff(e[n][r]),e[n][r]=l;else{var s=t[n],o=e[n];for(var r in s)o[r]||s[r].del();for(var r in o){var l;(l=s[r])?(l.diff(o[r]),o[r]=l):((l=new a(r,n)).diff(o[r]),o[r]=l)}}this.tree=e},e.VRule=a,e.VSheet=i}function a(t,a){this.rule=e.createRule(t,a),this.decl={}}function i(){this.tree={}}}},function(e,t){t.removeRule=function(e){var t=e.index,a=e.parentStyleSheet,n=a.cssRules||a.rules;for(t=Math.max(t,n.length-1);t>=0;){if(n[t]===e){a.deleteRule(t);break}t--}}},function(e,t){t.cssToTree=function e(t,a,n,i){var r,s,o={},l=!1;for(r in a)"object"!=typeof(s=a[r])&&(l=!0,o[r]=s);for(r in l&&(t[i]||(t[i]={}),t[i][n]=o),a)if("object"==typeof(s=a[r]))if("@"===r[0])e(t,s,n,r);else{var c=r.indexOf("&")>-1,u=n.split(",");if(c)for(var d=0;d<u.length;d++)u[d]=r.replace(/&/g,u[d]);else for(d=0;d<u.length;d++)u[d]=u[d]+" "+r;e(t,s,u.join(","),i)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){var a=n.useState(t),i=a[0],r=a[1];return null==i?[e,r]:[i,r]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=function(){};t.default=function(e,t){void 0===e&&(e={}),void 0===t&&(t=[]);var a=e.onFiles,s=e.onText,o=e.onUri,l=i.useState(!1),c=l[0],u=l[1],d=i.useCallback(u,[]),m=i.useMemo((function(){return function(e){return function(t,a){var n=t.getData("text/uri-list");if(n)(e.onUri||r)(n,a);else if(t.files&&t.files.length)(e.onFiles||r)(Array.from(t.files),a);else if(a.clipboardData){var i=a.clipboardData.getData("text");(e.onText||r)(i,a)}}}(e)}),[a,s,o]);return i.useEffect((function(){var e=function(e){e.preventDefault(),d(!0)},t=function(e){e.preventDefault(),d(!0)},a=function(){d(!1)},n=function(){d(!1)},i=function(e){e.preventDefault(),d(!1),m(e.dataTransfer,e)},r=function(e){m(e.clipboardData,e)};return document.addEventListener("dragover",e),document.addEventListener("dragenter",t),document.addEventListener("dragleave",a),document.addEventListener("dragexit",n),document.addEventListener("drop",i),s&&document.addEventListener("paste",r),function(){document.removeEventListener("dragover",e),document.removeEventListener("dragenter",t),document.removeEventListener("dragleave",a),document.removeEventListener("dragexit",n),document.removeEventListener("drop",i),document.removeEventListener("paste",r)}}),n.__spreadArrays([m],t)),{over:c}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(80)),s=function(){};t.default=function(e){void 0===e&&(e={});var t=e.onFiles,a=e.onText,n=e.onUri,o=r.default(),l=i.useState(!1),c=l[0],u=l[1],d=i.useMemo((function(){return function(e,t){return function(a,n){var i=a.getData("text/uri-list");i?(e.onUri||s)(i,n):a.files&&a.files.length?(e.onFiles||s)(Array.from(a.files),n):a.items&&a.items.length&&a.items[0].getAsString((function(a){t&&(e.onText||s)(a,n)}))}}(e,o())}),[t,a,n]),m=i.useMemo((function(){return function(e,t){return{onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),t(!0)},onDragLeave:function(){t(!1)},onDrop:function(a){a.preventDefault(),a.persist(),t(!1),e(a.dataTransfer,a)},onPaste:function(t){t.persist(),e(t.clipboardData,t)}}}(d,u)}),[d,u]);return[m,{over:c}]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensuredForwardRef=void 0;var n=a(2);function i(e){var t=n.useRef(e&&e.current);return n.useEffect((function(){e&&(e.current=t.current)}),[e]),t}t.default=i,t.ensuredForwardRef=function(e){return n.forwardRef((function(t,a){var n=i(a);return e(t,n)}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(){var e=n.useState(null),t=e[0],a=e[1];return n.useEffect((function(){if(t)throw t}),[t]),n.useCallback((function(e){a(e)}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){n.useEffect((function(){var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}),[e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(232)),s=n.__importDefault(a(74)),o=function(){};t.default=function(e,t,a){void 0===a&&(a={});var n=a.video,l=a.onClose,c=void 0===l?o:l,u=i.useState(t),d=u[0],m=u[1];return s.default((function(){if(t&&e.current){var a=function(){n.current.removeEventListener("webkitendfullscreen",a),c()},i=function(){if(r.default.isEnabled){var e=r.default.isFullscreen;m(e),e||c()}};if(r.default.isEnabled){try{r.default.request(e.current),m(!0)}catch(e){c(e),m(!1)}r.default.on("change",i)}else n&&n.current&&n.current.webkitEnterFullscreen?(n.current.webkitEnterFullscreen(),n.current.addEventListener("webkitendfullscreen",a),m(!0)):(c(),m(!1));return function(){if(m(!1),r.default.isEnabled)try{r.default.off("change",i),r.default.exit()}catch(e){}else n&&n.current&&n.current.webkitExitFullscreen&&(n.current.removeEventListener("webkitendfullscreen",a),n.current.webkitExitFullscreen())}}}),[t,n,e]),d}},function(e,t,a){
/*!
* screenfull
* v5.0.0 - 2019-09-09
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=e.exports,n=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=a.length,r={};n<i;n++)if((e=a[n])&&e[1]in t){for(n=0;n<e.length;n++)r[a[0][n]]=e[n];return r}return!1}(),i={change:n.fullscreenchange,error:n.fullscreenerror},r={request:function(e){return new Promise(function(a,i){var r=function(){this.off("change",r),a()}.bind(this);this.on("change",r),e=e||t.documentElement,Promise.resolve(e[n.requestFullscreen]()).catch(i)}.bind(this))},exit:function(){return new Promise(function(e,a){if(this.isFullscreen){var i=function(){this.off("change",i),e()}.bind(this);this.on("change",i),Promise.resolve(t[n.exitFullscreen]()).catch(a)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var n=i[e];n&&t.addEventListener(n,a,!1)},off:function(e,a){var n=i[e];n&&t.removeEventListener(n,a,!1)},raw:n};n?(Object.defineProperties(r,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),a?e.exports=r:window.screenfull=r):a?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2);t.default=function(e){var t,a=i.useState({loading:!0,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:Date.now()}),r=a[0],s=a[1],o=!0,l=function(e){o&&s({loading:!1,accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,timestamp:e.timestamp})},c=function(e){return o&&s((function(t){return n.__assign(n.__assign({},t),{loading:!1,error:e})}))};return i.useEffect((function(){return navigator.geolocation.getCurrentPosition(l,c,e),t=navigator.geolocation.watchPosition(l,c,e),function(){o=!1,navigator.geolocation.clearWatch(t)}}),[]),r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(84));t.default=function(e){void 0===e&&(e={});var t=r.default(),a=i.useRef(n.__assign({},e));return[i.useCallback((function(){return a.current}),[]),i.useCallback((function(e){e&&(Object.assign(a.current,e),t())}),[])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(236);t.default=function(e,t){void 0===t&&(t=0);var a=n.useRef((function(){}));n.useEffect((function(){a.current=e})),n.useEffect((function(){if(null!==t){var e=i.setHarmonicInterval((function(){return a.current()}),t);return function(){return i.clearHarmonicInterval(e)}}}),[t])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0,i={};t.clearHarmonicInterval=function(e){var t=e.bucket,a=e.id;delete t.listeners[a];var n=!1;for(var r in t.listeners){n=!0;break}n||(clearInterval(t.timer),delete i[t.ms])},t.setHarmonicInterval=function(e,t){var a,r=n++;if(i[t])i[t].listeners[r]=e;else{var s=setInterval((function(){for(var e,a=i[t].listeners,n=!1,r=0,s=Object.values(a);r<s.length;r++){var o=s[r];try{o()}catch(t){n=!0,e=t}}if(n)throw e}),t);i[t]={ms:t,timer:s,listeners:(a={},a[r]=e,a)}}return{bucket:i[t],id:r}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importStar(a(2)),i=n.useState,r=function(){};t.default=function(e){var t,a,s=i(!1),o=s[0],l=s[1];return"function"==typeof e&&(e=e(o)),[n.cloneElement(e,{onMouseEnter:(a=e.props.onMouseEnter,function(e){(a||r)(e),l(!0)}),onMouseLeave:(t=e.props.onMouseLeave,function(e){(t||r)(e),l(!1)})}),o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(239),r=a(59),s=["mousemove","mousedown","resize","keydown","touchstart","wheel"];t.default=function(e,t,a){void 0===e&&(e=6e4),void 0===t&&(t=!1),void 0===a&&(a=s);var o=n.useState(t),l=o[0],c=o[1];return n.useEffect((function(){for(var t,n=!0,s=l,o=function(e){n&&(s=e,c(e))},u=i.throttle(50,(function(){s&&o(!1),clearTimeout(t),t=setTimeout((function(){return o(!0)}),e)})),d=function(){document.hidden||u()},m=0;m<a.length;m++)r.on(window,a[m],u);return r.on(document,"visibilitychange",d),t=setTimeout((function(){return o(!0)}),e),function(){n=!1;for(var e=0;e<a.length;e++)r.off(window,a[e],u);r.off(document,"visibilitychange",d)}}),[e,a]),l}},function(e,t,a){"use strict";function n(e,t,a,n){var i,r=!1,s=0;function o(){i&&clearTimeout(i)}function l(){var l=this,c=Date.now()-s,u=arguments;function d(){s=Date.now(),a.apply(l,u)}r||(n&&!i&&d(),o(),void 0===n&&c>e?d():!0!==t&&(i=setTimeout(n?function(){i=void 0}:d,void 0===n?e-c:e)))}return"boolean"!=typeof t&&(n=a,a=t,t=void 0),l.cancel=function(){o(),r=!0},l}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=n,t.debounce=function(e,t,a){return void 0===a?n(e,t,!1):n(e,a,!1!==t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){var a=n.useRef((function(){}));n.useEffect((function(){a.current=e})),n.useEffect((function(){if(null!==t){var e=setInterval((function(){return a.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){return void 0===e&&(e={laptopL:1440,laptop:1024,tablet:768}),function(){var t=n.useState(0),a=t[0],i=t[1];n.useEffect((function(){var e=function(){i(window.innerWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}));var r=n.useMemo((function(){return Object.entries(e).sort((function(e,t){return e[1]>=t[1]?1:-1}))}),[e]),s=r.reduce((function(e,t){var n=t[0],i=t[1];return a>=i?n:e}),r[0][0]);return s}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(160)),r=n.__importDefault(a(94));t.default=function(e,t,a,n){void 0===n&&(n=i.default);var s=n(e),o=s[0],l=s[1];r.default((function(){!o&&a?a(l):o&&t&&t(l)}),[o])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r=function(e){var t=window.history,a=t[e];t[e]=function(t){var n=a.apply(this,arguments),i=new Event(e.toLowerCase());return i.state=t,window.dispatchEvent(i),n}};i.isClient&&(r("pushState"),r("replaceState"));var s=function(e){var t=window.history,a=t.state,n=t.length,i=window.location;return{trigger:e,state:a,length:n,hash:i.hash,host:i.host,hostname:i.hostname,href:i.href,origin:i.origin,pathname:i.pathname,port:i.port,protocol:i.protocol,search:i.search}},o="function"==typeof Event;t.default=i.isClient&&o?function(){var e=n.useState(s("load")),t=e[0],a=e[1];return n.useEffect((function(){var e=function(){return a(s("popstate"))},t=function(){return a(s("pushstate"))},n=function(){return a(s("replacestate"))};return i.on(window,"popstate",e),i.on(window,"pushstate",t),i.on(window,"replacestate",n),function(){i.off(window,"popstate",e),i.off(window,"pushstate",t),i.off(window,"replacestate",n)}}),[]),t}:function(){return{trigger:"load",length:1}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClosestBody=void 0;var n=a(2);function i(e){if(!e)return null;if("BODY"===e.tagName)return e;if("IFRAME"===e.tagName){var t=e.contentDocument;return t?t.body:null}return e.offsetParent?i(e.offsetParent):null}function r(e){var t=e||window.event;return t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)}t.getClosestBody=i;var s="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),o=new Map,l="object"==typeof document?document:void 0,c=!1;t.default=l?function(e,t){void 0===e&&(e=!0);var a=n.useRef(l.body);t=t||a;var u=function(e){var t=o.get(e);t&&(1===t.counter?(o.delete(e),s?(e.ontouchmove=null,c&&(document.removeEventListener("touchmove",r),c=!1)):e.style.overflow=t.initialOverflow):o.set(e,{counter:t.counter-1,initialOverflow:t.initialOverflow}))};n.useEffect((function(){var a=i(t.current);a&&(e?function(e){var t=o.get(e);t?o.set(e,{counter:t.counter+1,initialOverflow:t.initialOverflow}):(o.set(e,{counter:1,initialOverflow:e.style.overflow}),s?c||(document.addEventListener("touchmove",r,{passive:!1}),c=!0):e.style.overflow="hidden")}(a):u(a))}),[e,t.current]),n.useEffect((function(){var e=i(t.current);if(e)return function(){u(e)}}),[])}:function(e,t){void 0===e&&(e=!0)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(97)),r=n.__importDefault(a(94));t.default=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];i.default((function(){return console.log.apply(console,n.__spreadArrays([e+" mounted"],t)),function(){return console.log(e+" unmounted")}})),r.default((function(){console.log.apply(console,n.__spreadArrays([e+" updated"],t))}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};t.default=function(e,t){var a=void 0===t?{}:t,r=a.isPreventDefault,s=void 0===r||r,o=a.delay,l=void 0===o?300:o,c=n.useRef(),u=n.useRef(),d=n.useCallback((function(t){s&&t.target&&(t.target.addEventListener("touchend",i,{passive:!1}),u.current=t.target),c.current=setTimeout((function(){return e(t)}),l)}),[e,l,s]),m=n.useCallback((function(){c.current&&clearTimeout(c.current),s&&u.current&&u.current.removeEventListener("touchend",i)}),[s]);return{onMouseDown:function(e){return d(e)},onTouchStart:function(e){return d(e)},onMouseUp:m,onMouseLeave:m,onTouchEnd:m}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2);t.default=function(e){void 0===e&&(e={});var t=i.useState(e),a=t[0],r=t[1],s=i.useMemo((function(){return{set:function(e,t){r((function(a){var i;return n.__assign(n.__assign({},a),((i={})[e]=t,i))}))},setAll:function(e){r(e)},remove:function(e){r((function(t){var a=t,i=e;return a[i],n.__rest(a,["symbol"==typeof i?i:i+""])}))},reset:function(){return r(e)}}}),[r]),o=n.__assign({get:i.useCallback((function(e){return a[e]}),[a])},s);return[a,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59);t.default=function(e,t){void 0===t&&(t=!1);var a=n.useState(i.isClient?function(){return window.matchMedia(e).matches}:t),r=a[0],s=a[1];return n.useEffect((function(){var t=!0,a=window.matchMedia(e),n=function(){t&&s(!!a.matches)};return a.addListener(n),s(a.matches),function(){t=!1,a.removeListener(n)}}),[e]),r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r=function(){};t.default="object"==typeof navigator&&navigator.mediaDevices?function(){var e=n.useState({}),t=e[0],a=e[1];return n.useEffect((function(){var e=!0,t=function(){navigator.mediaDevices.enumerateDevices().then((function(t){e&&a({devices:t.map((function(e){return{deviceId:e.deviceId,groupId:e.groupId,kind:e.kind,label:e.label}}))})})).catch(r)};return i.on(navigator.mediaDevices,"devicechange",t),t(),function(){e=!1,i.off(navigator.mediaDevices,"devicechange",t)}}),[]),t}:function(){return{}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMediatedState=void 0;var n=a(2);t.useMediatedState=function(e,t){var a=n.useRef(e),i=n.useState(t),r=i[0],s=i[1];return[r,n.useCallback((function(e){2===a.current.length?a.current(e,s):s(a.current(e))}),[r])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){var a=n.useMemo((function(){return function(t,a){var n;return(n=e(t))[a.type].apply(n,a.payload)}}),[e]),i=n.useReducer(a,t),r=i[0],s=i[1],o=n.useMemo((function(){return Object.keys(e(t)).reduce((function(e,t){return e[t]=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return s({type:t,payload:e})},e}),{})}),[e,t]);return[r,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r={acceleration:{x:null,y:null,z:null},accelerationIncludingGravity:{x:null,y:null,z:null},rotationRate:{alpha:null,beta:null,gamma:null},interval:16};t.default=function(e){void 0===e&&(e=r);var t=n.useState(e),a=t[0],s=t[1];return n.useEffect((function(){var e=function(e){var t=e.acceleration,a=e.accelerationIncludingGravity,n=e.rotationRate,i=e.interval;s({acceleration:{x:t.x,y:t.y,z:t.z},accelerationIncludingGravity:{x:a.x,y:a.y,z:a.z},rotationRate:{alpha:n.alpha,beta:n.beta,gamma:n.gamma},interval:i})};return i.on(window,"devicemotion",e),function(){i.off(window,"devicemotion",e)}}),[]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(158)),r=n.__importDefault(a(165)),s={current:null};t.default=function(e,t){void 0===t&&(t={});var a=!!t.whenHovered,n=!!t.bound,o=i.default(e,a),l=r.default(a&&!o?s:e);return n&&(l.elX=Math.max(0,Math.min(l.elX,l.elW)),l.elY=Math.max(0,Math.min(l.elY,l.elH))),l}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(){var e=n.useState(0),t=e[0],a=e[1];return n.useEffect((function(){var e=function(e){a(e.deltaY+t)};return window.addEventListener("wheel",e,!1),function(){return window.removeEventListener("wheel",e)}})),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=a(59),s=function(){if("object"!=typeof navigator)return null;var e=navigator;return e.connection||e.mozConnection||e.webkitConnection},o=function(){var e=s();return e?{downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType,type:e.type,rtt:e.rtt}:{}};t.default=function(e){void 0===e&&(e={});var t=i.useState(e),a=t[0],l=t[1];return i.useEffect((function(){var e=a,t=function(t){e=n.__assign(n.__assign({},e),t),l(e)},i=s(),c=function(){t({online:!0,since:new Date})},u=function(){t({online:!1,since:new Date})},d=function(){t(o())};return r.on(window,"online",c),r.on(window,"offline",u),i&&(r.on(i,"change",d),t(n.__assign(n.__assign(n.__assign({},a),{online:navigator.onLine,since:void 0}),o()))),function(){r.off(window,"online",c),r.off(window,"offline",u),i&&r.off(i,"change",d)}}),[]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(155));t.default=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r={angle:0,type:"landscape-primary"};t.default=function(e){void 0===e&&(e=r);var t=window.screen,a=n.useState(e),s=a[0],o=a[1];return n.useEffect((function(){var a=!0,n=function(){if(a){var n=t.orientation;if(n){var i=n.angle,r=n.type;o({angle:i,type:r})}else window.orientation?o({angle:"number"==typeof window.orientation?window.orientation:0,type:""}):o(e)}};return i.on(window,"orientationchange",n),n(),function(){a=!1,i.off(window,"orientationchange",n)}}),[]),s}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){void 0===t&&(t=[]),n.useEffect((function(){if(e){var t=function(t){var a=(t=t||window.event).relatedTarget||t.toElement;a&&"HTML"!==a.nodeName||e()};return document.addEventListener("mouseout",t),function(){document.removeEventListener("mouseout",t)}}}),t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59),r=function(){};t.default=function(e){var t=!0,a=null,s=n.useState(""),o=s[0],l=s[1],c=function(){t&&a&&l(a.state)};return n.useEffect((function(){return navigator.permissions.query(e).then((function(e){a=e,c(),i.on(a,"change",c)})).catch(r),function(){t=!1,a&&i.off(a,"change",c)}}),[]),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(109),r=function(e,t){return e===t};t.default=function(e,t){void 0===t&&(t=r);var a=n.useRef(),s=n.useRef(e);return i.useFirstMountState()||t(s.current,e)||(a.current=s.current,s.current=e),a.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(80));t.default=function(){var e=r.default();return i.useCallback((function(t){return new Promise((function(a,n){t.then((function(t){e()&&a(t)}),(function(t){e()&&n(t)}))}))}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2);t.default=function(e){void 0===e&&(e=[]);var t=i.useState(e),a=t[0],r=t[1];return{add:function(e){r((function(t){return n.__spreadArrays(t,[e])}))},remove:function(){var e;return r((function(t){var a=t[0],n=t.slice(1);return e=a,n})),e},get first(){return a[0]},get last(){return a[a.length-1]},get size(){return a.length}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t){void 0===t&&(t=!0);var a=n.useRef(null),i=n.useRef(!1),r=n.useRef(e);r.current=e;var s=n.useCallback((function(e){i.current&&(r.current(e),a.current=requestAnimationFrame(s))}),[]),o=n.useMemo((function(){return[function(){i.current&&(i.current=!1,a.current&&cancelAnimationFrame(a.current))},function(){i.current||(i.current=!0,a.current=requestAnimationFrame(s))},function(){return i.current}]}),[]);return n.useEffect((function(){return t&&o[1](),o[0]}),[]),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=function(e,t){return new URLSearchParams(e).get(t)};t.default="object"==typeof window?function(e){var t=window.location,a=n.useState((function(){return i(t.search,e)})),r=a[0],s=a[1];return n.useEffect((function(){var a=function(){s(i(t.search,e))};return window.addEventListener("popstate",a),window.addEventListener("pushstate",a),window.addEventListener("replacestate",a),function(){window.removeEventListener("popstate",a),window.removeEventListener("pushstate",a),window.removeEventListener("replacestate",a)}}),[]),r}:function(){return null}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScratchSensor=void 0;var n=a(22),i=a(2),r=a(267),s=n.__importDefault(a(161)),o=function(){},l=function(e){void 0===e&&(e={});var t=e.disabled,a=s.default(e),r=i.useState({isScratching:!1}),l=r[0],c=r[1],u=i.useRef(l),d=i.useRef(!1),m=i.useRef(null),p=i.useState(null),f=p[0],g=p[1];return i.useEffect((function(){if(!t&&f){var e,i,r=function(e,t){cancelAnimationFrame(m.current),m.current=requestAnimationFrame((function(){var i=f.getBoundingClientRect(),r=i.left,s=i.top,l=r+window.scrollX,d=s+window.scrollY,m=e-l,p=t-d;c((function(e){var t=n.__assign(n.__assign({},e),{dx:m-(e.x||0),dy:p-(e.y||0),end:Date.now(),isScratching:!0});return u.current=t,(a.current.onScratch||o)(t),t}))}))},s=function(e){r(e.pageX,e.pageY)},l=function(e){r(e.changedTouches[0].pageX,e.changedTouches[0].pageY)},p=function(){d.current&&(d.current=!1,u.current=n.__assign(n.__assign({},u.current),{isScratching:!1}),(a.current.onScratchEnd||o)(u.current),c({isScratching:!1}),window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",i))};e=p,i=p;var g=function(t,n){if(d.current){var r=f.getBoundingClientRect(),m=r.left,p=r.top,g=m+window.scrollX,h=p+window.scrollY,b=t-g,E=n-h,y=Date.now(),v={isScratching:!0,start:y,end:y,docX:t,docY:n,x:b,y:E,dx:0,dy:0,elH:f.offsetHeight,elW:f.offsetWidth,elX:g,elY:h};u.current=v,(a.current.onScratchStart||o)(v),c(v),window.addEventListener("mousemove",s),window.addEventListener("touchmove",l),window.addEventListener("mouseup",e),window.addEventListener("touchend",i)}},h=function(e){d.current=!0,g(e.pageX,e.pageY)},b=function(e){d.current=!0,g(e.changedTouches[0].pageX,e.changedTouches[0].pageY)};return f.addEventListener("mousedown",h),f.addEventListener("touchstart",b),function(){f.removeEventListener("mousedown",h),f.removeEventListener("touchstart",b),window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",i),m.current&&cancelAnimationFrame(m.current),m.current=null,d.current=!1,u.current={isScratching:!1},c(u.current)}}}),[f,t,a]),[g,l]};t.ScratchSensor=function(e){e.children;var t=n.__rest(e,["children"]),a=l(t),s=a[0],o=a[1],c=r.render(e,o);return i.cloneElement(c,n.__assign(n.__assign({},c.props),{ref:function(e){c.props.ref&&("object"==typeof c.props.ref&&(c.props.ref.current=e),"function"==typeof c.props.ref&&c.props.ref(e)),s(e)}}))},t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hookToRenderProp=t.createEnhancer=t.render=void 0;var n=a(22),i=n.__importDefault(a(167));t.render=i.default;var r=n.__importDefault(a(268));t.createEnhancer=r.default;var s=n.__importDefault(a(271));t.hookToRenderProp=s.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.divWrapper=void 0;var n=a(22),i=n.__importStar(a(2)),r=n.__importDefault(a(269)),s=i.createElement,o=function(e,t,a,i){var r;return s(e,t?n.__assign(((r={})[t]=i,r),a):n.__assign(n.__assign({},i),a))};t.divWrapper=function(e,t,a,n){return s("div",null,o(e,t,a,n))},t.default=function(e,t,a){void 0===a&&(a=o);var n=function(i,o,l){void 0===o&&(o=t),void 0===l&&(l=null);var c="string"==typeof i;if(c)return function(e){return n(e,i||t,o)};var u=function(t){return s(e,l,(function(e){return a(i,o,t,e)}))};return c?r.default(u):u};return n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(270));t.default=function(e){return e.prototype?e:n.default(e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importStar(a(2));t.default=function(e){var t=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(a,t),a.prototype.render=function(){return e(this.props,this.context)},a}(i.Component);return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(167)),i=function(e){return[e]};t.default=function(e,t){return void 0===t&&(t=i),function(a){return n.default(a,e.apply(void 0,t(a)))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(98));t.default=function(e){var t=r.default({x:0,y:0}),a=t[0],n=t[1];return i.useEffect((function(){var t=function(){e.current&&n({x:e.current.scrollLeft,y:e.current.scrollTop})};return e.current&&e.current.addEventListener("scroll",t,{capture:!1,passive:!0}),function(){e.current&&e.current.removeEventListener("scroll",t)}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){var t=n.useState(!1),a=t[0],i=t[1];return n.useEffect((function(){if(e.current){var t,a=function(){i(!0),clearTimeout(t),t=setTimeout((function(){i(!1)}),150)};return e.current.addEventListener("scroll",a,!1),function(){e.current&&e.current.removeEventListener("scroll",a,!1)}}return function(){}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a(59);t.default=function(e,t,a){if(!i.isClient)return[t,function(){}];var r=n.useState((function(){try{var n=sessionStorage.getItem(e);return"string"!=typeof n?(sessionStorage.setItem(e,a?String(t):JSON.stringify(t)),t):a?n:JSON.parse(n||"null")}catch(e){return t}})),s=r[0],o=r[1];return n.useEffect((function(){try{var t=a?String(s):JSON.stringify(s);sessionStorage.setItem(e,t)}catch(e){}})),[s,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(276),r=n.__importDefault(a(114)),s=function(e,t){return e.every((function(e,a){return i.equal(e,t[a])}))};t.default=function(e,t){r.default(e,t,s)}},function(e,t){var a=Object.keys;t.equal=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var n=a(e),i=n.length,r=0;r<i;r++)if(!(n[r]in t))return!1;for(r=0;r<i;r++)if(e[n[r]]!==t[n[r]])return!1;return i===a(t).length}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importStar(a(2)),r=a(59),s=i.useState,o=i.useEffect,l=i.useRef;t.default=function(e,t){var a=void 0===t?{}:t,c=a.width,u=void 0===c?1/0:c,d=a.height,m=void 0===d?1/0:d;if(!r.isClient)return["function"==typeof e?e({width:u,height:m}):e,{width:u,height:m}];var p=s({width:u,height:m}),f=p[0],g=p[1];"function"==typeof e&&(e=e(f));var h=e.props.style||{},b=l(null),E=null,y=function(){var e=b.current,t=e?{width:e.offsetWidth,height:e.offsetHeight}:{width:u,height:m};g(t)},v=function(e){e.addEventListener("resize",y),setTimeout(y,35)};return o((function(){var e=b.current;if(e){if(e.contentWindow)E=e.contentWindow,v(E);else{var t=function(){e.removeEventListener("load",t),E=e.contentWindow,v(E)};e.addEventListener("load",t)}return function(){E&&E.removeEventListener&&E.removeEventListener("resize",y)}}}),[]),h.position="relative",[i.cloneElement.apply(i,n.__spreadArrays([e,{style:h}],n.__spreadArrays([i.createElement("iframe",{ref:b,style:{background:"transparent",border:"none",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:-1}})],i.Children.toArray(e.props.children)))),f]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=a(59),s=n.__importDefault(a(80)),o=n.__importDefault(a(95)),l=function(){};t.default=function(e,t){void 0===t&&(t={});var a=s.default(),n=i.useRef(!1),c=i.useRef(0),u=i.useRef(0),d=o.default({isSliding:!1,value:0}),m=d[0],p=d[1];return c.current=m.value,i.useEffect((function(){if(r.isClient){var i=void 0===t.styles||t.styles,s=void 0!==t.reverse&&t.reverse;e.current&&i&&(e.current.style.userSelect="none");var o=function(){!n.current&&a()&&((t.onScrubStart||l)(),n.current=!0,p({isSliding:!0}),b())},d=function(){n.current&&a()&&((t.onScrubStop||l)(c.current),n.current=!1,p({isSliding:!1}),E())},m=function(e){o(),f(e)},f=t.vertical?function(e){return y(e.clientY)}:function(e){return y(e.clientX)},g=function(e){o(),h(e)},h=t.vertical?function(e){return y(e.changedTouches[0].clientY)}:function(e){return y(e.changedTouches[0].clientX)},b=function(){r.on(document,"mousemove",f),r.on(document,"mouseup",d),r.on(document,"touchmove",h),r.on(document,"touchend",d)},E=function(){r.off(document,"mousemove",f),r.off(document,"mouseup",d),r.off(document,"touchmove",h),r.off(document,"touchend",d)},y=function(n){cancelAnimationFrame(u.current),u.current=requestAnimationFrame((function(){if(a()&&e.current){var i=e.current.getBoundingClientRect(),r=t.vertical?i.top:i.left,o=t.vertical?i.height:i.width;if(!o)return;var c=(n-r)/o;c>1?c=1:c<0&&(c=0),s&&(c=1-c),p({value:c}),(t.onScrub||l)(c)}}))};return r.on(e.current,"mousedown",m),r.on(e.current,"touchstart",g),function(){r.off(e.current,"mousedown",m),r.off(e.current,"touchstart",g)}}}),[e,t.vertical]),m}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(164)),s=n.__importDefault(a(95)),o="object"==typeof window&&"object"==typeof window.speechSynthesis?window.speechSynthesis.getVoices():[];t.default=function(e,t){void 0===t&&(t={});var a=s.default({isPlaying:!1,lang:t.lang||"default",voice:t.voice||o[0],rate:t.rate||1,pitch:t.pitch||1,volume:t.volume||1}),n=a[0],l=a[1],c=i.useRef(null);return r.default((function(){var a=new SpeechSynthesisUtterance(e);t.lang&&(a.lang=t.lang),t.voice&&(a.voice=t.voice),a.rate=t.rate||1,a.pitch=t.pitch||1,a.volume=t.volume||1,a.onstart=function(){return l({isPlaying:!0})},a.onresume=function(){return l({isPlaying:!0})},a.onend=function(){return l({isPlaying:!1})},a.onpause=function(){return l({isPlaying:!1})},c.current=a,window.speechSynthesis.speak(c.current)})),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(74));t.default=function(e){n.default((function(){var t=function(t){var a,n,i,r,s;!function(){var e=document.activeElement,t=document.body;if(!e)return!1;if(e===t)return!1;switch(e.tagName){case"INPUT":case"TEXTAREA":return!0}return e.hasAttribute("contenteditable")}()&&(n=(a=t).keyCode,i=a.metaKey,r=a.ctrlKey,s=a.altKey,!(i||r||s)&&(n>=48&&n<=57||n>=65&&n<=90))&&e(t)};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStateWithHistory=void 0;var n=a(2),i=a(109),r=a(110);t.useStateWithHistory=function(e,t,a){if(void 0===t&&(t=10),t<1)throw new Error("Capacity has to be greater than 1, got '"+t+"'");var s=i.useFirstMountState(),o=n.useState(e),l=o[0],c=o[1],u=n.useRef(null!=a?a:[]),d=n.useRef(0);return s&&(u.current.length?(u.current[u.current.length-1]!==e&&u.current.push(e),u.current.length>t&&(u.current=u.current.slice(u.current.length-t))):u.current.push(e),d.current=u.current.length&&u.current.length-1),[l,n.useCallback((function(e){c((function(a){return(e=r.resolveHookState(e))!==a&&(d.current<u.current.length-1&&(u.current=u.current.slice(0,d.current+1)),d.current=u.current.push(e)-1,u.current.length>t&&(u.current=u.current.slice(u.current.length-t))),e}))}),[l,t]),n.useMemo((function(){return{history:u.current,position:d.current,capacity:t,back:function(e){void 0===e&&(e=1),d.current&&c((function(){return d.current-=Math.min(e,d.current),u.current[d.current]}))},forward:function(e){void 0===e&&(e=1),d.current!==u.current.length-1&&c((function(){return d.current=Math.min(d.current+e,u.current.length-1),u.current[d.current]}))},go:function(e){e!==d.current&&c((function(){return d.current=e<0?Math.max(u.current.length+e,0):Math.min(u.current.length-1,e),u.current[d.current]}))}}}),[l])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(80)),s=n.__importDefault(a(84)),o=n.__importDefault(a(94));t.default=function(e){void 0===e&&(e=[]);var t=r.default(),a=s.default(),l=i.useRef(0);o.default((function(){e.length<=l.current&&(l.current=e.length-1,a())}),[e.length]);var c=i.useMemo((function(){return{next:function(){return c.setStateAt(l.current+1)},prev:function(){return c.setStateAt(l.current-1)},setStateAt:function(n){t()&&e.length&&n!==l.current&&(l.current=n>=0?n%e.length:e.length+n%e.length,a())},setState:function(n){if(t()){var i=e.length?e.indexOf(n):-1;if(-1===i)throw new Error("State '"+n+"' is not a valid state (does not exist in state list)");l.current=i,a()}}}}),[e]);return n.__assign({state:e[l.current],currentIndex:l.current},c)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(111));t.default=function(e,t,a){void 0===t&&(t=200);var n=i.useState(null),s=n[0],o=n[1],l=i.useRef(),c=i.useRef();return i.useEffect((function(){if(l.current)c.current=a;else{o(e.apply(void 0,a));var n=function(){c.current?(o(e.apply(void 0,c.current)),c.current=void 0,l.current=setTimeout(n,t)):l.current=void 0};l.current=setTimeout(n,t)}}),a),r.default((function(){l.current&&clearTimeout(l.current)})),s}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(126)),r=n.__importDefault(a(84));t.default=function(e){void 0===e&&(e=0);var t=r.default();return i.default(t,e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i={restoreOnUnmount:!1};t.default="undefined"!=typeof document?function(e,t){void 0===t&&(t=i);var a=n.useRef(document.title);document.title=e,n.useEffect((function(){return t&&t.restoreOnUnmount?function(){document.title=a.current}:void 0}),[])}:function(e){}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(287),r=n.__importDefault(a(166));t.default=function(e,t,a){return void 0===e&&(e="inCirc"),void 0===t&&(t=200),void 0===a&&(a=0),(0,i.easing[e])(r.default(t,a))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.easing={linear:function(e){return e},quadratic:function(e){return e*(-e*e*e+4*e*e-6*e+4)},cubic:function(e){return e*(4*e*e-9*e+6)},elastic:function(e){return e*(33*e*e*e*e-106*e*e*e+126*e*e-67*e+15)},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},inSine:function(e){return 1-Math.cos(e*(Math.PI/2))},outSine:function(e){return Math.sin(e*(Math.PI/2))},inOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},inExpo:function(e){return Math.pow(2,10*(e-1))},outExpo:function(e){return 1-Math.pow(2,-10*e)},inOutExpo:function(e){return(e/=.5)<1?Math.pow(2,10*(e-1))/2:(e--,(2-Math.pow(2,-10*e))/2)},inCirc:function(e){return 1-Math.sqrt(1-e*e)},outCirc:function(e){return Math.sqrt(1-(e-=1)*e)},inOutCirc:function(e){return(e/=.5)<1?-(Math.sqrt(1-e*e)-1)/2:(e-=2,(Math.sqrt(1-e*e)+1)/2)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(){var e=n.useRef(!1);return n.useEffect((function(){return function(){e.current=!0}})),n.useMemo((function(){return function(t,a){return new Promise((function(n,i){t.then((function(t){e.current||n(t)}),(function(t){e.current?a?a(t):console.error("useUnmountPromise",t):i(t)}))}))}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=n.__importDefault(a(163));t.default=function(e,t){void 0===t&&(t=[]);var a=i.default(t),r=a[0],s=a[1];return[r,n.__assign(n.__assign({},s),{upsert:function(t){s.upsert(e,t)}})]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i="object"==typeof navigator&&"vibrate"in navigator;t.default=i?function(e,t,a){void 0===e&&(e=!0),void 0===t&&(t=[1e3,1e3]),void 0===a&&(a=!0),n.useEffect((function(){var n;if(e&&(navigator.vibrate(t),a)){var i=t instanceof Array?t.reduce((function(e,t){return e+t})):t;n=setInterval((function(){navigator.vibrate(t)}),i)}return function(){e&&(navigator.vibrate(0),a&&clearInterval(n))}}),[e])}:function(){}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(153)).default("video");t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t,a){void 0===a&&(a=[void 0]);var i=n.useRef(t),r=n.useRef(e);i.current=t,r.current=e;var s=n.useState(a),o=s[0],l=s[1],c=n.useCallback((function(){i.current.length>=2?i.current(r.current,l):l(i.current(r.current))}),[l]);return n.useEffect((function(){c()}),[e]),[o,c]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollbarWidth=void 0;var n=a(294),i=a(2);t.useScrollbarWidth=function(){var e=i.useState(n.scrollbarWidth()),t=e[0],a=e[1];return i.useEffect((function(){if(void 0===t){var e=requestAnimationFrame((function(){a(n.scrollbarWidth())}));return function(){return cancelAnimationFrame(e)}}}),[]),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==e&&"number"==typeof n.__cache)return n.__cache;var t=document.createElement("div"),a=t.style;a.display="block",a.position="absolute",a.width="100px",a.height="100px",a.left="-999px",a.top="-999px",a.overflow="scroll",document.body.insertBefore(t,null);var i=t.clientWidth;if(0!==i)return n.__cache=100-i,document.body.removeChild(t),n.__cache;document.body.removeChild(t)}};t.scrollbarWidth=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMultiStateValidator=void 0;var n=a(2);t.useMultiStateValidator=function(e,t,a){if(void 0===a&&(a=[void 0]),"object"!=typeof e)throw new Error("states expected to be an object or array, got "+typeof e);var i=n.useRef(t),r=n.useRef(e);i.current=t,r.current=e;var s=n.useState(a),o=s[0],l=s[1],c=n.useCallback((function(){i.current.length>=2?i.current(r.current,l):l(i.current(r.current))}),[l]);return n.useEffect((function(){c()}),Object.values(e)),[o,c]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=a(59),s=n.__importDefault(a(98));t.default=function(){var e=s.default({x:r.isClient?window.pageXOffset:0,y:r.isClient?window.pageYOffset:0}),t=e[0],a=e[1];return i.useEffect((function(){var e=function(){a({x:window.pageXOffset,y:window.pageYOffset})};return window.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){window.removeEventListener("scroll",e)}}),[]),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(98)),s=a(59);t.default=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var a=r.default({width:s.isClient?window.innerWidth:e,height:s.isClient?window.innerHeight:t}),n=a[0],o=a[1];return i.useEffect((function(){if(s.isClient){var e=function(){o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2),r=n.__importDefault(a(74)),s=a(59),o={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};t.default=s.isClient&&window.ResizeObserver?function(){var e=i.useState(null),t=e[0],a=e[1],n=i.useState(o),s=n[0],l=n[1],c=i.useMemo((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,a=t.x,n=t.y,i=t.width,r=t.height,s=t.top,o=t.left,c=t.bottom,u=t.right;l({x:a,y:n,width:i,height:r,top:s,left:o,bottom:c,right:u})}}))}),[]);return r.default((function(){if(t)return c.observe(t),function(){c.disconnect()}}),[t]),[a,s]}:function(){return[function(){},o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useRendersCount=void 0;var n=a(2);t.useRendersCount=function(){return++n.useRef(0).current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),i=a(2);t.default=function(e){void 0===e&&(e=new Set);var t=i.useState(e),a=t[0],r=t[1],s=i.useMemo((function(){return{add:function(e){return r((function(t){return new Set(n.__spreadArrays(Array.from(t),[e]))}))},remove:function(e){return r((function(t){return new Set(Array.from(t).filter((function(t){return t!==e})))}))},toggle:function(e){return r((function(t){return t.has(e)?new Set(Array.from(t).filter((function(t){return t!==e}))):new Set(n.__spreadArrays(Array.from(t),[e]))}))},reset:function(){return r(e)}}}),[r]),o=n.__assign({has:i.useCallback((function(e){return a.has(e)}),[a])},s);return[a,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGlobalState=void 0;var n=a(22),i=a(2),r=n.__importDefault(a(97)),s=n.__importDefault(a(74));function o(e){var t={state:e,setState:function(e){t.state=e,t.setters.forEach((function(e){return e(t.state)}))},setters:[]};return function(){var e=i.useState(t.state),a=e[0],n=e[1];return r.default((function(){return function(){t.setters=t.setters.filter((function(e){return e!==n}))}})),s.default((function(){t.setters.includes(n)||t.setters.push(n)})),[a,t.setState]}}t.createGlobalState=o,t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHash=void 0;var n=a(22),i=a(2),r=n.__importDefault(a(162));t.useHash=function(){var e=i.useState((function(){return window.location.hash})),t=e[0],a=e[1],n=i.useCallback((function(){a(window.location.hash)}),[]);r.default((function(){window.addEventListener("hashchange",n)}),(function(){window.removeEventListener("hashchange",n)}));var s=i.useCallback((function(e){e!==t&&(window.location.hash=e)}),[t]);return[t,s]}},function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,a){"use strict";var n="%[a-f0-9]{2}",i=new RegExp("("+n+")|([^%]+?)","gi"),r=new RegExp("("+n+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],s(a),s(n))}function o(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(i)||[],a=1;a<t.length;a++)t=(e=s(t,a).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},a=r.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=o(a[0]);n!==a[0]&&(t[a[0]]=n)}a=r.exec(e)}t["%C2"]="";for(var i=Object.keys(t),s=0;s<i.length;s++){var l=i[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(58),i=a(307),r=a(308),s=a(309),o=a(310);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(n),u=l(i),d=l(r),m=l(s),p=l(o);function f(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var g={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:f,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:f,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}},h=function(e){function t(t){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,u.default(a)}return d.default(t,e),t}(m.default(Error)),b=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function E(e,t){var a,n=e.pop();return t.push(n.f.apply(n,(a=[]).concat.apply(a,t.splice(-n.argCount)))),n.precedence}function y(e){return e.split("").reverse().join("")}var v=/--[\S]*/g;function x(e){return e.charAt(0).toUpperCase()+e.slice(1)}var S=["Top","Right","Bottom","Left"];function k(e,t){if(!e)return t.toLowerCase();var a=e.split("-");if(a.length>1)return a.splice(1,0,t),a.reduce((function(e,t){return""+e+x(t)}));var n=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===n?""+e+t:n}function M(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i=a[0],r=a[1],s=void 0===r?i:r,o=a[2],l=void 0===o?i:o,c=a[3];return function(e,t){for(var a={},n=0;n<t.length;n+=1)(t[n]||0===t[n])&&(a[k(e,S[n])]=t[n]);return a}(e,[i,s,l,void 0===c?s:c])}function w(e,t){return e.substr(-t.length)===t}var O=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function T(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var a=e.match(O);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),a?[parseFloat(e),a[2]]:[e,void 0]):a?parseFloat(e):e}var C=function(e){return function(t,a){void 0===a&&(a="16px");var n=t,i=a;if("string"==typeof t){if(!w(t,"px"))throw new h(69,e,t);n=T(t)}if("string"==typeof a){if(!w(a,"px"))throw new h(70,e,a);i=T(a)}if("string"==typeof n)throw new h(71,t,e);if("string"==typeof i)throw new h(72,a,e);return""+n/i+e}},I=C("em"),j=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function _(e){if("string"!=typeof e)return[e,""];var t=e.match(j);return t?[parseFloat(e),t[2]]:[e,void 0]}var F={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4},P=C("rem");function L(e,t,a,n){void 0===a&&(a="320px"),void 0===n&&(n="1200px");var i=_(e),r=i[0],s=i[1],o=_(t),l=o[0],c=o[1],u=_(a),d=u[0],m=u[1],p=_(n),f=p[0],g=p[1];if("number"!=typeof d||"number"!=typeof f||!m||!g||m!==g)throw new h(47);if("number"!=typeof r||"number"!=typeof l||s!==c)throw new h(48);if(s!==m||c!==g)throw new h(75);var b=(r-l)/(d-f);return"calc("+(l-b*f).toFixed(2)+(s||"")+" + "+(100*b).toFixed(2)+"vw)"}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var D,A,N=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,B={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function z(e,t){return t?' format("'+B[e]+'")':""}function H(e,t,a,n){var i=[];return t&&i.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&i.push(function(e,t,a){return function(e){return!!e.replace(/\s+/g," ").match(N)}(e)?'url("'+e+'")'+z(t[0],a):t.map((function(t){return'url("'+e+"."+t+'")'+z(t,a)})).join(", ")}(e,a,n)),i.join(", ")}function G(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function V(e){for(var t="",a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];for(var r=0;r<e.length;r+=1)if(t+=e[r],r===n.length-1&&n[r]){var s=n.filter((function(e){return!!e}));s.length>1?(t=t.slice(0,-1),t+=", "+n[r]):1===s.length&&(t+=""+n[r])}else n[r]&&(t+=n[r]+" ");return t.trim()}var $={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"},U=function(e,t,a){var n=""+a[0]+(a[1]||""),i=""+a[0]/2+(a[1]||""),r=""+t[0]+(t[1]||""),s=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+i+" "+r+" "+i;case"topLeft":return n+" "+r+" 0 0";case"left":return s+" "+n+" "+s+" 0";case"bottomLeft":return n+" 0 0 "+r;case"bottom":return r+" "+i+" 0 "+i;case"bottomRight":return"0 0 "+n+" "+r;case"right":return s+" 0 "+s+" "+n;default:return"0 "+n+" "+r+" 0"}};function q(e){return Math.round(255*e)}function W(e,t,a){return q(e)+","+q(t)+","+q(a)}function K(e,t,a,n){if(void 0===n&&(n=W),0===t)return n(a,a,a);var i=(e%360+360)%360/60,r=(1-Math.abs(2*a-1))*t,s=r*(1-Math.abs(i%2-1)),o=0,l=0,c=0;i>=0&&i<1?(o=r,l=s):i>=1&&i<2?(o=s,l=r):i>=2&&i<3?(l=r,c=s):i>=3&&i<4?(l=s,c=r):i>=4&&i<5?(o=s,c=r):i>=5&&i<6&&(o=r,c=s);var u=a-r/2;return n(o+u,l+u,c+u)}var Y={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},X=/^#[a-fA-F0-9]{6}$/,J=/^#[a-fA-F0-9]{8}$/,Q=/^#[a-fA-F0-9]{3}$/,Z=/^#[a-fA-F0-9]{4}$/,ee=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,te=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ae=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ne=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function ie(e){if("string"!=typeof e)throw new h(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Y[t]?"#"+Y[t]:e}(e);if(t.match(X))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(J)){var a=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:a}}if(t.match(Q))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(Z)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var i=ee.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var r=te.exec(t.substring(0,50));if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10),alpha:parseFloat(""+r[4])};var s=ae.exec(t);if(s){var o="rgb("+K(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",l=ee.exec(o);if(!l)throw new h(4,t,o);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var c=ne.exec(t.substring(0,50));if(c){var u="rgb("+K(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=ee.exec(u);if(!d)throw new h(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new h(5)}function re(e){return function(e){var t,a=e.red/255,n=e.green/255,i=e.blue/255,r=Math.max(a,n,i),s=Math.min(a,n,i),o=(r+s)/2;if(r===s)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var l=r-s,c=o>.5?l/(2-r-s):l/(r+s);switch(r){case a:t=(n-i)/l+(n<i?6:0);break;case n:t=(i-a)/l+2;break;default:t=(a-n)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:o,alpha:e.alpha}:{hue:t,saturation:c,lightness:o}}(ie(e))}var se=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function oe(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function le(e){return oe(Math.round(255*e))}function ce(e,t,a){return se("#"+le(e)+le(t)+le(a))}function ue(e,t,a){return K(e,t,a,ce)}function de(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return ue(e,t,a);if("object"==typeof e&&void 0===t&&void 0===a)return ue(e.hue,e.saturation,e.lightness);throw new h(1)}function me(e,t,a,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?ue(e,t,a):"rgba("+K(e,t,a)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?ue(e.hue,e.saturation,e.lightness):"rgba("+K(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new h(2)}function pe(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return se("#"+oe(e)+oe(t)+oe(a));if("object"==typeof e&&void 0===t&&void 0===a)return se("#"+oe(e.red)+oe(e.green)+oe(e.blue));throw new h(6)}function fe(e,t,a,n){if("string"==typeof e&&"number"==typeof t){var i=ie(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?pe(e,t,a):"rgba("+e+","+t+","+a+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?pe(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new h(7)}var ge=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},he=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},be=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},Ee=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha};function ye(e){if("object"!=typeof e)throw new h(8);if(he(e))return fe(e);if(ge(e))return pe(e);if(Ee(e))return me(e);if(be(e))return de(e);throw new h(8)}function ve(e,t,a){return function(){var n=a.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):ve(e,t,n)}}function xe(e){return ve(e,e.length,[])}function Se(e,t){if("transparent"===t)return t;var a=re(t);return ye(c.default({},a,{hue:a.hue+parseFloat(e)}))}var ke=xe(Se);function Me(e,t,a){return Math.max(e,Math.min(t,a))}function we(e,t){if("transparent"===t)return t;var a=re(t);return ye(c.default({},a,{lightness:Me(0,1,a.lightness-parseFloat(e))}))}var Oe=xe(we);function Te(e,t){if("transparent"===t)return t;var a=re(t);return ye(c.default({},a,{saturation:Me(0,1,a.saturation-parseFloat(e))}))}var Ce=xe(Te);function Ie(e){if("transparent"===e)return 0;var t=ie(e),a=Object.keys(t).map((function(e){var a=t[e]/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)})),n=a[0],i=a[1],r=a[2];return parseFloat((.2126*n+.7152*i+.0722*r).toFixed(3))}function je(e,t){var a=Ie(e),n=Ie(t);return parseFloat((a>n?(a+.05)/(n+.05):(n+.05)/(a+.05)).toFixed(2))}function _e(e,t){if("transparent"===t)return t;var a=re(t);return ye(c.default({},a,{lightness:Me(0,1,a.lightness+parseFloat(e))}))}var Fe=xe(_e);function Pe(e,t,a){if("transparent"===t)return a;if("transparent"===a)return t;if(0===e)return a;var n=ie(t),i=c.default({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),r=ie(a),s=c.default({},r,{alpha:"number"==typeof r.alpha?r.alpha:1}),o=i.alpha-s.alpha,l=2*parseFloat(e)-1,u=((l*o==-1?l:l+o)/(1+l*o)+1)/2,d=1-u;return fe({red:Math.floor(i.red*u+s.red*d),green:Math.floor(i.green*u+s.green*d),blue:Math.floor(i.blue*u+s.blue*d),alpha:i.alpha*(parseFloat(e)/1)+s.alpha*(1-parseFloat(e)/1)})}var Le=xe(Pe);function Re(e,t){if("transparent"===t)return t;var a=ie(t),n="number"==typeof a.alpha?a.alpha:1;return fe(c.default({},a,{alpha:Me(0,1,(100*n+100*parseFloat(e))/100)}))}var De=xe(Re),Ae="#000",Ne="#fff";function Be(e,t){if("transparent"===t)return t;var a=re(t);return ye(c.default({},a,{saturation:Me(0,1,a.saturation+parseFloat(e))}))}var ze=xe(Be);function He(e,t){return"transparent"===t?t:ye(c.default({},re(t),{hue:parseFloat(e)}))}var Ge=xe(He);function Ve(e,t){return"transparent"===t?t:ye(c.default({},re(t),{lightness:parseFloat(e)}))}var $e=xe(Ve);function Ue(e,t){return"transparent"===t?t:ye(c.default({},re(t),{saturation:parseFloat(e)}))}var qe=xe(Ue);function We(e,t){return"transparent"===t?t:Le(parseFloat(e),"rgb(0, 0, 0)",t)}var Ke=xe(We);function Ye(e,t){return"transparent"===t?t:Le(parseFloat(e),"rgb(255, 255, 255)",t)}var Xe=xe(Ye);function Je(e,t){if("transparent"===t)return t;var a=ie(t),n="number"==typeof a.alpha?a.alpha:1;return fe(c.default({},a,{alpha:Me(0,1,+(100*n-100*parseFloat(e)).toFixed(2)/100)}))}var Qe=xe(Je),Ze=["top","right","bottom","left"];function et(e,t){return e(t?":"+t:"")}function tt(e,t,a){if(!t)throw new h(67);if(0===e.length)return et(t,null);for(var n=[],i=0;i<e.length;i+=1){if(a&&a.indexOf(e[i])<0)throw new h(68);n.push(et(t,e[i]))}return n.join(",")}var at=[void 0,null,"active","focus","hover"];function nt(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var it=["absolute","fixed","relative","static","sticky"],rt=[void 0,null,"active","focus","hover"];function st(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=ke,t.animation=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=Array.isArray(t[0]);if(!n&&t.length>8)throw new h(64);return{animation:t.map((function(e){if(n&&!Array.isArray(e)||!n&&Array.isArray(e))throw new h(65);if(Array.isArray(e)&&e.length>8)throw new h(66);return Array.isArray(e)?e.join(" "):e})).join(", ")}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{background:t.join(", ")}},t.between=L,t.border=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var i;return"string"==typeof e&&Ze.indexOf(e)>=0?((i={})["border"+x(e)+"Width"]=a[0],i["border"+x(e)+"Style"]=a[1],i["border"+x(e)+"Color"]=a[2],i):(a.unshift(e),{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var a,n,i=x(e);if(!t&&0!==t)throw new h(62);if("Top"===i||"Bottom"===i)return(a={})["border"+i+"RightRadius"]=t,a["border"+i+"LeftRadius"]=t,a;if("Left"===i||"Right"===i)return(n={})["borderTop"+i+"Radius"]=t,n["borderBottom"+i+"Radius"]=t,n;throw new h(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,nt,at)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=re(e);return ye(c.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(v)){if(t)return e;throw new h(73)}var a;if("undefined"!=typeof document&&null!==document.documentElement&&(a=getComputedStyle(document.documentElement).getPropertyValue(e)),a)return a.trim();throw new h(74)},t.darken=Oe,t.desaturate=Ce,t.directionalProperty=M,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=I,t.fluidRange=function(e,t,a){if(void 0===t&&(t="320px"),void 0===a&&(a="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new h(49);if(Array.isArray(e)){for(var n,i={},r={},s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=s()).done;){var o,l,u=n.value;if(!u.prop||!u.fromSize||!u.toSize)throw new h(50);r[u.prop]=u.fromSize,i["@media (min-width: "+t+")"]=c.default({},i["@media (min-width: "+t+")"],((o={})[u.prop]=L(u.fromSize,u.toSize,t,a),o)),i["@media (min-width: "+a+")"]=c.default({},i["@media (min-width: "+a+")"],((l={})[u.prop]=u.toSize,l))}return c.default({},r,i)}var d,m,p;if(!e.prop||!e.fromSize||!e.toSize)throw new h(51);return(p={})[e.prop]=e.fromSize,p["@media (min-width: "+t+")"]=((d={})[e.prop]=L(e.fromSize,e.toSize,t,a),d),p["@media (min-width: "+a+")"]=((m={})[e.prop]=e.toSize,m),p},t.fontFace=function(e){var t=e.fontFamily,a=e.fontFilePath,n=e.fontStretch,i=e.fontStyle,r=e.fontVariant,s=e.fontWeight,o=e.fileFormats,l=void 0===o?["eot","woff2","woff","ttf","svg"]:o,c=e.formatHint,u=void 0!==c&&c,d=e.localFonts,m=e.unicodeRange,p=e.fontDisplay,f=e.fontVariationSettings,g=e.fontFeatureSettings;if(!t)throw new h(55);if(!a&&!d)throw new h(52);if(d&&!Array.isArray(d))throw new h(53);if(!Array.isArray(l))throw new h(54);var b={"@font-face":{fontFamily:t,src:H(a,d,l,u),unicodeRange:m,fontStretch:n,fontStyle:i,fontVariant:r,fontWeight:s,fontDisplay:p,fontVariationSettings:f,fontFeatureSettings:g}};return JSON.parse(JSON.stringify(b))},t.getContrast=je,t.getLuminance=Ie,t.getValueAndUnit=_,t.grayscale=function(e){return"transparent"===e?e:ye(c.default({},re(e),{saturation:0}))},t.hiDPI=G,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=de,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?me({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):de({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new h(45)},t.hsla=me,t.invert=function(e){if("transparent"===e)return e;var t=ie(e);return ye(c.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=Fe,t.linearGradient=function(e){var t=e.colorStops,a=e.fallback,n=e.toDirection,i=void 0===n?"":n;if(!t||t.length<2)throw new h(56);return{backgroundColor:a||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:V(D||(D=p.default(["linear-gradient(","",")"])),i,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var a=y(e),n=a.match(b);if(n&&!n.every((function(e){return e===n[0]})))throw new h(41);return""+function(e,t){var a,n=function(e){var t={};return t.symbols=e?c.default({},g.symbols,e.symbols):c.default({},g.symbols),t}(t),i=[n.symbols["("].prefix],r=[],s=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(n.symbols).map((function(e){return n.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");s.lastIndex=0;var o=!1;do{var l=(a=s.exec(e))||[")",void 0],u=l[0],d=l[1],m=n.symbols[u],p=m&&!m.prefix&&!m.func,f=!m||!m.postfix&&!m.infix;if(d||(o?f:p))throw new h(37,a?a.index:e.length,e);if(o){var b=m.postfix||m.infix;do{var y=i[i.length-1];if((b.precedence-y.precedence||y.rightToLeft)>0)break}while(E(i,r));o="postfix"===b.notation,")"!==b.symbol&&(i.push(b),o&&E(i,r))}else if(m){if(i.push(m.prefix||m.func),m.func&&(!(a=s.exec(e))||"("!==a[0]))throw new h(38,a?a.index:e.length,e)}else r.push(+u),o=!0}while(a&&i.length);if(i.length)throw new h(39,a?a.index:e.length,e);if(a)throw new h(40,a?a.index:e.length,e);return r.pop()}(y(a.replace(b,"")),t)+(n?y(n[0]):"")},t.meetsContrastGuidelines=function(e,t){var a=je(e,t);return{AA:a>=4.5,AALarge:a>=3,AAA:a>=7,AAALarge:a>=4.5}},t.mix=Le,t.modularScale=function(e,t,a){if(void 0===t&&(t="1em"),void 0===a&&(a=1.333),"number"!=typeof e)throw new h(42);if("string"==typeof a&&!F[a])throw new h(43);var n="string"==typeof t?_(t):[t,""],i=n[0],r=n[1],s="string"==typeof a?F[a]:a;if("string"==typeof i)throw new h(44,t);return""+i*Math.pow(s,e)+(r||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=De,t.padding=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["padding"].concat(t))},t.parseToHsl=re,t.parseToRgb=ie,t.position=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return it.indexOf(e)>=0&&e?c.default({},M.apply(void 0,[""].concat(a)),{position:e}):M.apply(void 0,["",e].concat(a))},t.radialGradient=function(e){var t=e.colorStops,a=e.extent,n=void 0===a?"":a,i=e.fallback,r=e.position,s=void 0===r?"":r,o=e.shape,l=void 0===o?"":o;if(!t||t.length<2)throw new h(57);return{backgroundColor:i||t[0].split(" ")[0],backgroundImage:V(A||(A=p.default(["radial-gradient(","","","",")"])),s,l,n,t.join(", "))}},t.readableColor=function(e,t,a,n){void 0===t&&(t=Ae),void 0===a&&(a=Ne),void 0===n&&(n=!0);var i=Ie(e)>.179,r=i?t:a;return!n||je(e,r)>=4.5?r:i?Ae:Ne},t.rem=P,t.retinaImage=function(e,t,a,n,i){var r;if(void 0===a&&(a="png"),void 0===i&&(i="_2x"),!e)throw new h(58);var s=a.replace(/^\./,""),o=n?n+"."+s:""+e+i+"."+s;return(r={backgroundImage:"url("+e+"."+s+")"})[G()]=c.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),r},t.rgb=pe,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?fe({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):pe({red:e.red,green:e.green,blue:e.blue});throw new h(46)},t.rgba=fe,t.saturate=ze,t.setHue=Ge,t.setLightness=$e,t.setSaturation=qe,t.shade=Ke,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=T,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,st,rt)},t.timingFunctions=function(e){return $[e]},t.tint=Xe,t.toColorString=ye,t.transitions=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(Array.isArray(t[0])&&2===t.length){var n=t[1];if("string"!=typeof n)throw new h(61);return{transition:t[0].map((function(e){return e+" "+n})).join(", ")}}return{transition:t.join(", ")}},t.transparentize=Qe,t.triangle=function(e){var t=e.pointingDirection,a=e.height,n=e.width,i=e.foregroundColor,r=e.backgroundColor,s=void 0===r?"transparent":r,o=_(n),l=_(a);if(isNaN(l[0])||isNaN(o[0]))throw new h(60);return c.default({width:"0",height:"0",borderColor:s},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new h(59)}}(t,i),{borderStyle:"solid",borderWidth:U(t,l,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},function(e,t,a){e.exports=a(34)(5)},function(e,t,a){e.exports=a(34)(2982)},function(e,t,a){e.exports=a(34)(2993)},function(e,t,a){e.exports=a(34)(2989)},,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return ZM}));var n=a(2),i=a.n(n),r=a(37),s=a.n(r),o=a(0);const l=(e,t)=>t.reduce(((t,a)=>(t[a]=e[a]&&!0===e[a].show,t)),{});var c=a(55),u=a(19),d=a(58),m=a.n(d),p=a(23);const f={services:{}},g=Object(n.createContext)(f);var h=a(134),b=a.n(h),E=a(30);const y=({children:e,component:t,render:a,...r})=>{const s=Object(n.useMemo)((()=>{if(t)return e=>Object(E.jsx)(i.a.Fragment,null,Object(E.jsx)(v,null),Object(E.jsx)(t,e))}),[t]);if(s)return Object(E.jsx)(p.Route,m()({},r,{component:s}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(E.jsx)(p.Route,m()({},r,{render:e=>Object(E.jsx)(i.a.Fragment,null,Object(E.jsx)(v,null),t(e))}))}return Object(E.jsx)(p.Route,r,Object(E.jsx)(v,null),e)},v=()=>{const{executionContext:e}=Object(n.useContext)(g).services,t=Object(p.useRouteMatch)();return function(e,t){b()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var x=a(38);const S=({children:e,...t})=>Object(E.jsx)(p.Router,t,Object(E.jsx)(x.CompatRouter,null,e));var k=a(31);const M=({legacySwitch:e=!0,children:t})=>{const a=Object(p.useRouteMatch)();return e?Object(E.jsx)(p.Switch,null,t):Object(E.jsx)(x.Routes,null,n.Children.map(t,(e=>{if(i.a.isValidElement(e)&&e.type===y){var n;const r=Object(k.replace)(null==e?void 0:e.props.path,a.url+"/",""),s="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(E.jsx)(x.Route,{path:r,element:Object(E.jsx)(i.a.Fragment,null,Object(E.jsx)(v,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(E.jsx)(e.props.component,null)||s&&s()||t)})}return e})))};var w=a(17),O=a(6),T=a(20),C=a(135),I=a.n(C);const j=i.a.createContext(null),_=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(E.jsx)(j.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},F=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,i=I()(n,void 0);return Object(E.jsx)(j.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)};a(43);const P={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},L=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const r=Object(n.useRef)(null),s=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const i=((e,t)=>{let a=e;do{var n,i;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(i=a)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const r=i.href,s=""===i.target||"_self"===i.target,o=0===e.button;r&&s&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(i.href))})({event:e,currentAppId:a,navigateToUrl:t,container:r.current})),[a,t]);return Object(E.jsx)("div",m()({onClick:s,ref:r,css:P,"data-test-subj":"kbnRedirectAppLink"},i),e)},R=({children:e,...t})=>Object(E.jsx)(L,m()({},function(){const e=Object(n.useContext)(j);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),D=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,i=Object(E.jsx)(R,n,e);return Object(E.jsx)(F,{coreStart:a},i)}const{navigateToUrl:a,currentAppId:n,...i}=t,r=Object(E.jsx)(R,i,e);return Object(E.jsx)(_,{currentAppId:n,navigateToUrl:a},r)};var A=a(28),N=a(21);const B=Object(n.createContext)({}),z=({children:e,dataViews:t})=>{const{data:a}=Object(N.useFetcher)((async()=>t.create({title:c.B})),[]);return i.a.createElement(B.Provider,{value:a,children:e})};var H=a(79),G=a(26),V=a.n(G),$=a(56);const U={lastRefresh:0,refreshApp:()=>{throw new Error("App refresh was not initialized, set it when you invoke the context")}},q=Object(n.createContext)(U),W=({children:e})=>{const[t,a]=Object(n.useState)(Date.now()),r=Object(u.useSelector)($.V),s=Object(u.useSelector)($.U),o=Object(n.useCallback)((()=>{const e=Date.now();a(e)}),[a]);Object(n.useEffect)((()=>{r||o()}),[o,r]);const l=Object(n.useMemo)((()=>({lastRefresh:t,refreshApp:o})),[t,o]);return Object(H.useEvent)("visibilitychange",(()=>{const e=V()().diff(new Date(t),"seconds")>s;"hidden"!==document.visibilityState&&!r&&e&&o()}),document),Object(n.useEffect)((()=>{if(r)return;const e=setInterval((()=>{"hidden"!==document.visibilityState&&o()}),1e3*s);return()=>clearInterval(e)}),[r,o,s]),i.a.createElement(q.Provider,{value:l,children:e})},K=()=>Object(n.useContext)(q);var Y=a(168),X=a.n(Y),J=a(130),Q=a(108);const Z=(e,t)=>{const a=parseInt(e||"",10);return isNaN(a)?t:a};var ee=a(35),te=a.n(ee);const ae=(e,t,a={})=>{const n=te.a.parse(e,a);return n?n.valueOf():t},{ABSOLUTE_DATE_RANGE_START:ne,ABSOLUTE_DATE_RANGE_END:ie,SEARCH:re,FILTERS:se,STATUS_FILTER:oe}=c.c,{DATE_RANGE_START:le,DATE_RANGE_END:ce,AUTOREFRESH_INTERVAL_SECONDS:ue,AUTOREFRESH_IS_PAUSED:de}=Q.a,me=e=>{if(!e)return[];try{return JSON.parse(e)}catch(t){return[e]}},{FOCUS_CONNECTOR_FIELD:pe}=c.c,{DATE_RANGE_START:fe,DATE_RANGE_END:ge,AUTOREFRESH_INTERVAL_SECONDS:he,AUTOREFRESH_IS_PAUSED:be}=Q.a,Ee=(e,t=!1)=>(t&&(delete e.absoluteDateRangeStart,delete e.absoluteDateRangeEnd,ye(e)),`?${Object(J.stringify)(e,{sort:!1})}`),ye=e=>(Object.keys(e).forEach((t=>{const a=e[t];null!=a&&""!==a&&void 0!==a||delete e[t],"dateRangeStart"===t&&a===fe&&delete e[t],"dateRangeEnd"===t&&a===ge&&delete e[t],"refreshPaused"===t&&a===be&&delete e[t],"refreshInterval"===t&&a===he&&delete e[t],"focusConnectorField"===t&&a===pe&&delete e[t]})),e);function ve(e){return e?Object(J.parse)("?"===e[0]?e.slice(1):e,{sort:!1}):{}}const xe=()=>{const{search:e}=Object(p.useLocation)();return(e=>{const t={};Object.keys(e).forEach((a=>{let n;n=void 0===e[a]?void 0:Array.isArray(e[a])?e[a][0]:e[a],t[a]=n}));const{refreshInterval:a,refreshPaused:n,dateRangeStart:i,dateRangeEnd:r,filters:s,excludedFilters:o,search:l,statusFilter:c,pagination:u,focusConnectorField:d,query:m,tags:p,monitorTypes:f,locations:g,locationId:h,projects:b,schedules:E,groupBy:y,groupOrderBy:v,packagePolicyId:x}=t;return{packagePolicyId:x||void 0,groupBy:y,groupOrderBy:v,pagination:u,absoluteDateRangeStart:ae(i||le,ne),absoluteDateRangeEnd:ae(r||ce,ie,{roundUp:!0}),refreshInterval:Z(a,ue),refreshPaused:(S=n,k=de,"true"===S||"false"!==S&&k),dateRangeStart:i||le,dateRangeEnd:r||ce,filters:s||se,excludedFilters:o||"",search:l||re,statusFilter:c||oe,focusConnectorField:!!d,query:m||"",tags:me(p),monitorTypes:me(f),locations:me(g),projects:me(b),schedules:me(E),locationId:h||void 0};var S,k})(ve(e))},Se=()=>{const{pathname:e,search:t}=Object(p.useLocation)(),a=Object(p.useHistory)(),i=Object(n.useCallback)(((n,i=!1)=>{const r={...ve(t),...n},s=Object.keys(r),o=n?Object(J.stringify)(s.reduce(((e,t)=>{const a=r[t];return void 0===a||""===a?e:{...e,[t]:a}}),{})):null;t!==o&&(i?a.replace({pathname:e,search:o||void 0}):a.push({pathname:e,search:o||void 0}))}),[a,e,t]);return[xe,i]};function ke({from:e,to:t}){const{lastRefresh:a}=K();return Object(n.useMemo)((()=>{var a,n,i,r;return{from:null!==(a=null===(n=X.a.parse(e))||void 0===n?void 0:n.toISOString())&&void 0!==a?a:e,to:null!==(i=null===(r=X.a.parse(t,{roundUp:!0}))||void 0===r?void 0:r.toISOString())&&void 0!==i?i:t}}),[e,t,a])}function Me(e,t){const{lastRefresh:a}=K();return Object(n.useMemo)((()=>({from:V()(a).subtract(e,t).toISOString(),to:new Date(a).toISOString()})),[a,e,t])}const we=(e,t)=>"now-24h"===e&&"now"===t;function Oe(){const{dateRangeStart:e,dateRangeEnd:t}=xe(),a=we(e,t),n=ke({from:e,to:t}),i=Me(24,"hours");return a?i:n}var Te=a(5);const Ce=e=>{var t,a,i,r,s,l;const c=Se()[0](),u=Object(T.useKibana)(),d=null===(t=u.services.chrome)||void 0===t?void 0:t.setBreadcrumbs,m=null!==(a=null===(i=u.services.application)||void 0===i?void 0:i.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==a?a:"",p=null!==(r=null===(s=u.services.application)||void 0===s?void 0:s.getUrlForApp("observability-overview"))&&void 0!==r?r:"",f=null===(l=u.services.application)||void 0===l?void 0:l.navigateToUrl;Object(n.useEffect)((()=>{var t,a;d&&d((t=((e,t,a)=>{if(a){const t={...a};delete t.statusFilter;const n=Ee(t,!0);e+="?"===n?"":n}return[{text:o.i18n.translate("xpack.synthetics.breadcrumbs.observabilityText",{defaultMessage:"Observability"}),href:t,"data-test-subj":"observabilityPathBreadcrumb"},{text:o.i18n.translate("xpack.synthetics.breadcrumbs.overviewBreadcrumbText",{defaultMessage:"Synthetics"}),href:e,"data-test-subj":"syntheticsPathBreadcrumb"}]})(m,p,c).concat(e),a=f,t.map((e=>({...e,...e.href?{onClick:t=>{a&&e.href&&(t.preventDefault(),a(e.href))}}:{},...e["data-test-subj"]?{"data-test-subj":e["data-test-subj"]}:{"data-test-subj":e.href}})))))}),[m,p,e,f,c,d])};function Ie(){const e=Object(u.useDispatch)(),{application:t}=Object(T.useKibana)().services,{loading:a,error:i,enablement:r}=Object(u.useSelector)($.Z);return Object(n.useEffect)((()=>{r||a||i||e(Object($.v)())}),[e,r,i,a]),Object(n.useEffect)((()=>{null!=r&&r.canEnable||null!=r&&r.isEnabled||a||!r||null==t||t.navigateToApp("synthetics",{path:"/monitors"})}),[t,r,a]),{enablement:{areApiKeysEnabled:null==r?void 0:r.areApiKeysEnabled,canManageApiKeys:null==r?void 0:r.canManageApiKeys,canEnable:null==r?void 0:r.canEnable,isEnabled:null==r?void 0:r.isEnabled},invalidApiKeyError:!!r&&!Boolean(null==r?void 0:r.isValidApiKey),error:i,loading:a}}function je(){const e=Object(u.useDispatch)(),{error:t,loading:a,locations:i,throttling:r,locationsLoaded:s}=Object(u.useSelector)($.X);return Object(n.useEffect)((()=>{s||e(Object($.u)())}),[e,i,s]),{error:t,loading:a,locations:i,throttling:r,getLocationByLabel:e=>i.find((t=>t.label===e))}}var _e=a(132);const Fe=(e,t,a)=>{const{name:i,isRequestReady:r=!0}=null!=a?a:{},s=Object(u.useDispatch)(),o=Object(u.useSelector)(_e.e),l=Object(u.useSelector)(_e.f),c=Object(u.useSelector)(_e.d);return Object(n.useEffect)((()=>{e.index&&r&&s(_e.b.get({params:e,name:i}))}),[s,i,JSON.stringify(e),r,...t]),Object(n.useMemo)((()=>({data:l[i],loading:o[i],error:c[i]})),[c,o,i,l])};var Pe=a(72);const Le=e=>{const t=50*Number(e);return{range:{"@timestamp":{gte:`now-${Math.ceil(t/60)}h`,lte:"now"}}}},Re=["monitor.duration.us"];function De(e){const t=Object(u.useDispatch)(),{locationsLoaded:a,locations:i}=Object(u.useSelector)($.X);Object(n.useEffect)((()=>{a||t(Object($.u)())}));const r=null==e?void 0:e.location.id;return Object(n.useMemo)((()=>{var t;if(!a||e.location.label)return null!==(t=e.location.label)&&void 0!==t?t:e.location.id;{var n;const t=i.find((e=>e.id===r));return null!==(n=null==t?void 0:t.label)&&void 0!==n?n:e.location.label||e.location.id}}),[a,i,r,e])}function Ae({configId:e,monitorLocations:t}){var a;const i=Object(N.useTheme)(),{lastRefresh:r}=K(),{locations:s}=je(),{data:o,loading:l}=Object(N.useEsSearch)({index:c.B,body:{size:0,query:{bool:{filter:[Pe.c,Pe.b,{term:{config_id:e}}]}},sort:[{"@timestamp":"desc"}],aggs:{locations:{terms:{field:"observer.geo.name",missing:c.F,size:1e3},aggs:{summary:{top_hits:{size:1}}}}}}},[r,e],{name:"getMonitorStatusByLocation"});return Object(n.useMemo)((()=>{var e,a;const n=e=>{switch(e){case"up":return i.eui.euiColorVis0;case"down":return i.eui.euiColorVis9;default:return"subdued"}},r=(null!==(e=null==o||null===(a=o.aggregations)||void 0===a?void 0:a.locations.buckets)&&void 0!==e?e:[]).map((e=>{var t;return null===(t=e.summary.hits.hits)||void 0===t?void 0:t[0]._source}));return{locations:(null!=t?t:[]).map((e=>{const t=s.find((t=>t.id===e.id));if(t){var a,i;const e=r.find((e=>{var a,n;return(null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name)===(null==t?void 0:t.label)})),s=e?null!==(a=null===(i=e.summary)||void 0===i?void 0:i.down)&&void 0!==a&&a?"down":"up":"unknown";return{status:s,id:null==t?void 0:t.id,label:null==t?void 0:t.label,color:n(s)}}})).filter(Boolean),loading:l}}),[s,null==o||null===(a=o.aggregations)||void 0===a?void 0:a.locations.buckets,l,t,i.eui.euiColorVis0,i.eui.euiColorVis9])}var Ne=a(65);function Be({configId:e,locationId:t}){const{status:a}=Object(u.useSelector)(Ne.f);return ze(a,e,t)}const ze=(e,t,a)=>{if(!e)return{status:"unknown"};const n=`${t}-${a}`,i=e.allConfigs[n];return{configIdByLocation:n,status:(null==i?void 0:i.status)||"unknown",timestamp:null==i?void 0:i.timestamp,ping:null==i?void 0:i.ping}};var He=a(57);function Ge(e,t){if(!e)return!1;const a=e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e));for(const e of a)if(t[e]&&Object($.w)(t[e]))return!0;return!1}function Ve(e,t){if(!e)return!1;const a=e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e));for(const e of a)if(!t[e]||Object($.w)(t[e]))return!1;return!0}function $e(){const[e,t]=Object(n.useState)(),a=Object(n.useRef)(),i=Object(n.useRef)(new ResizeObserver((e=>{e&&e[0]&&t({width:e[0].contentRect.width,height:e[0].contentRect.height})})));return Object(n.useEffect)((()=>{const e=a.current,t=i.current;return e&&t.observe(e),()=>{e&&t.unobserve(e)}}),[a.current,i.current]),{elementRef:a,...e}}function Ue(){const{fleet:e}=Object(T.useKibana)().services,t=Boolean(null==e?void 0:e.authz.integrations.writeIntegrationPolicies);return{canReadAgentPolicies:Boolean(null==e?void 0:e.authz.fleet.readAgentPolicies),canSaveIntegrations:t,canCreateAgentPolicies:Boolean(null==e?void 0:e.authz.fleet.all)}}var qe=a(75);function We({configId:e,reloadPage:t,labels:a}){var i;const r=Object(u.useDispatch)(),s=null===(i=Object(u.useSelector)($.P)[e])||void 0===i?void 0:i.status,[o,l]=Object(n.useState)(null);return Object(n.useEffect)((()=>{s===N.FETCH_STATUS.FAILURE&&l(null)}),[l,s]),{isEnabled:o,updateMonitorEnabledState:Object(n.useCallback)((n=>{r(Object($.m)({configId:e,monitor:{[qe.c.ENABLED]:n},success:{message:n?a.enabledSuccessLabel:a.disabledSuccessLabel,lifetimeMs:3e3,testAttribute:"uptimeMonitorEnabledUpdateSuccess"},error:{message:{title:a.failureLabel},lifetimeMs:1e4,testAttribute:"uptimeMonitorEnabledUpdateFailure"}})),l(n),t&&t()}),[r,e,a.disabledSuccessLabel,a.enabledSuccessLabel,a.failureLabel,l,t]),status:s}}var Ke=a(3);const{BASE_PATH:Ye}=c.d,{DATE_RANGE_START:Xe,DATE_RANGE_END:Je}=c.c,Qe={basePath:Ye,dateRangeStart:Xe,dateRangeEnd:Je,isApmAvailable:!0,isInfraAvailable:!0,isLogsAvailable:!0,isDev:!1,canSave:!1},Ze=Object(n.createContext)(Qe),et=({children:e,...t})=>{var a;const{basePath:r,isApmAvailable:s,isInfraAvailable:o,isLogsAvailable:l,commonlyUsedRanges:c,isDev:u}=t,{dateRangeStart:d,dateRangeEnd:m}=xe(),{application:p}=Object(T.useKibana)().services,f=null!==(a=null==p?void 0:p.capabilities.uptime.save)&&void 0!==a&&a,g=Object(n.useMemo)((()=>({canSave:f,isDev:u,basePath:r,isApmAvailable:s,isInfraAvailable:o,isLogsAvailable:l,commonlyUsedRanges:c,dateRangeStart:null!=d?d:Xe,dateRangeEnd:null!=m?m:Je})),[f,u,r,s,o,l,d,m,c]);return i.a.createElement(Ze.Provider,{value:g,children:e})},tt=()=>Object(n.useContext)(Ze);var at=a(47),nt=a(40),it=a(33);const rt={colors:{danger:at.euiLightVars.euiColorDanger,dangerBehindText:at.euiDarkVars.euiColorVis9_behindText,mean:at.euiLightVars.euiColorPrimary,range:at.euiLightVars.euiFocusBackgroundColor,success:at.euiLightVars.euiColorSuccess,warning:at.euiLightVars.euiColorWarning,gray:at.euiLightVars.euiColorLightShade,lightestShade:at.euiLightVars.euiColorLightestShade},chartTheme:{baseTheme:it.LIGHT_THEME,theme:nt.EUI_CHARTS_THEME_LIGHT.theme}},st=Object(n.createContext)(rt),ot=({darkMode:e,children:t})=>{let a;a=e?{danger:at.euiDarkVars.euiColorVis9,dangerBehindText:at.euiDarkVars.euiColorVis9_behindText,mean:at.euiDarkVars.euiColorPrimary,gray:at.euiDarkVars.euiColorLightShade,range:at.euiDarkVars.euiFocusBackgroundColor,success:at.euiDarkVars.euiColorSuccess,warning:at.euiDarkVars.euiColorWarning,lightestShade:at.euiDarkVars.euiColorLightestShade}:{danger:at.euiLightVars.euiColorVis9,dangerBehindText:at.euiLightVars.euiColorVis9_behindText,mean:at.euiLightVars.euiColorPrimary,gray:at.euiLightVars.euiColorLightShade,range:at.euiLightVars.euiFocusBackgroundColor,success:at.euiLightVars.euiColorSuccess,warning:at.euiLightVars.euiColorWarning,lightestShade:at.euiLightVars.euiColorLightestShade};const r=Object(n.useMemo)((()=>({colors:a,chartTheme:{baseTheme:e?it.DARK_THEME:it.LIGHT_THEME,theme:e?nt.EUI_CHARTS_THEME_DARK.theme:nt.EUI_CHARTS_THEME_LIGHT.theme}})),[a,e]);return i.a.createElement(st.Provider,{value:r,children:t})},lt=Object(n.createContext)({}),ct=({children:e,...t})=>i.a.createElement(lt.Provider,{value:{...t},children:e}),ut=()=>Object(n.useContext)(lt);var dt,mt=(dt=function(e,t){return dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},dt(e,t)},function(e,t){function a(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),pt="html",ft="svg",gt=function(e,t){var a,n,i,r={};if(e===pt)i=document.createElement("div");else{if(e!==ft)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');i=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var s=0,o=Object.entries(t.attributes);s<o.length;s++){var l=o[s],c=l[0],u=l[1];i.setAttribute(c,u)}var d={element:i,elementType:e,setPortalProps:function(e){r=e},getInitialPortalProps:function(){return r},mount:function(t,i){if(i!==n){if(d.unmount(),t!==a&&!function(e,t){if(t===pt)return e instanceof HTMLElement;if(t===ft)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(d.element,i),a=t,n=i}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,d.element),a=void 0,n=void 0)}};return d},ht=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return mt(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return r.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),i.element)},t}(n.PureComponent),bt=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return mt(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),Et=gt.bind(null,pt),yt=(gt.bind(null,ft),a(24));const vt=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.title",{defaultMessage:"Page not found"}),xt=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.body",{defaultMessage:"Sorry, the page you're looking for can't be found. It might have been removed or renamed, or maybe it never existed at all."}),St=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.goBacklabel",{defaultMessage:"Go back"}),kt=({actions:e,title:t,body:i})=>{const{colorMode:r}=Object(w.useEuiTheme)(),[s,o]=Object(n.useState)(),l=Object(n.useCallback)((()=>history.back()),[]),c=Object(n.useMemo)((()=>[Object(E.jsx)(w.EuiButtonEmpty,{iconType:"arrowLeft",flush:"both",onClick:l},St)]),[l]);Object(n.useEffect)((()=>{(async()=>{if("DARK"===r){const{default:e}=await a.e(7).then(a.t.bind(null,314,7));o(e)}else{const{default:e}=await a.e(8).then(a.t.bind(null,315,7));o(e)}})()}),[r]);const u=s?Object(E.jsx)(w.EuiImage,{src:s,alt:""}):null;return Object(E.jsx)(w.EuiEmptyPrompt,{color:"subdued",titleSize:"m",icon:u,title:"string"!=typeof t&&t?t:Object(E.jsx)("h2",null,null!=t?t:vt),body:null!=i?i:xt,actions:null!=e?e:c})};var Mt=a(122);const wt=()=>{const e=Object(u.useSelector)(Mt.b);return i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.certificates.heading",defaultMessage:"TLS Certificates ({total})",values:{total:i.a.createElement("span",{"data-test-subj":"uptimeCertTotal"},null!=e?e:0)}})},Ot=o.i18n.translate("xpack.synthetics.certs.ok",{defaultMessage:"OK"}),Tt=o.i18n.translate("xpack.synthetics.certs.expired",{defaultMessage:"Expired"}),Ct=o.i18n.translate("xpack.synthetics.certs.expireSoon",{defaultMessage:"Expires soon"}),It=(o.i18n.translate("xpack.synthetics.certs.expires",{defaultMessage:"Expires"}),o.i18n.translate("xpack.synthetics.certs.searchCerts",{defaultMessage:"Search certificates"})),jt=o.i18n.translate("xpack.synthetics.certs.list.status",{defaultMessage:"Status"}),_t=o.i18n.translate("xpack.synthetics.certs.list.status.old",{defaultMessage:"Too old"}),Ft=o.i18n.translate("xpack.synthetics.certs.list.commonName",{defaultMessage:"Common name"}),Pt=o.i18n.translate("xpack.synthetics.certs.list.monitors",{defaultMessage:"Monitors"}),Lt=o.i18n.translate("xpack.synthetics.certs.list.issuedBy",{defaultMessage:"Issued by"}),Rt=o.i18n.translate("xpack.synthetics.certs.list.validUntil",{defaultMessage:"Valid until"}),Dt=o.i18n.translate("xpack.synthetics.certs.list.ageCol",{defaultMessage:"Age"}),At=o.i18n.translate("xpack.synthetics.certs.list.days",{defaultMessage:"days"}),Nt=o.i18n.translate("xpack.synthetics.certs.list.expirationDate",{defaultMessage:"Fingerprints"}),Bt=o.i18n.translate("xpack.synthetics.certs.list.copyFingerprint",{defaultMessage:"Click to copy fingerprint value"}),zt=o.i18n.translate("xpack.synthetics.certs.list.noCerts",{defaultMessage:"No Certificates found."}),Ht=o.i18n.translate("xpack.synthetics.certificates.loading",{defaultMessage:"Loading certificates ..."}),Gt=o.i18n.translate("xpack.synthetics.certificates.refresh",{defaultMessage:"Refresh"}),Vt=(o.i18n.translate("xpack.synthetics.settingsBreadcrumbText",{defaultMessage:"Settings"}),o.i18n.translate("xpack.synthetics.settings.cannotEditTitle",{defaultMessage:"You do not have permission to edit settings."}),o.i18n.translate("xpack.synthetics.settings.cannotEditText",{defaultMessage:"Your user currently has 'Read' permissions for the Uptime app. Enable a permissions-level of 'All' to edit these settings."}),o.i18n.translate("xpack.synthetics.settings.blankNumberField.error",{defaultMessage:"Must be a number."}),o.i18n.translate("xpack.synthetics.settings.blank.error",{defaultMessage:"May not be blank."}),o.i18n.translate("xpack.synthetics.settings.noSpace.error",{defaultMessage:"Index names must not contain space"}),()=>{const{refreshApp:e}=Object(n.useContext)(q);return i.a.createElement(w.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1,"data-test-subj":"certificatesRefreshButton"},i.a.createElement(w.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiHideFor,{sizes:["xs"]},i.a.createElement(w.EuiButton,{fill:!0,iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"},Gt)),i.a.createElement(w.EuiShowFor,{sizes:["xs"]},i.a.createElement(w.EuiButtonEmpty,{iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"})))))});var $t=a(18),Ut=a.n($t);const qt=()=>{var e,t;return!(null===(e=Object(T.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save)},Wt=e=>{var t,a,n;const i=null===(t=null===(a=Object(T.useKibana)().services)||void 0===a||null===(n=a.application)||void 0===n?void 0:n.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t;return!(null==e?void 0:e.some((e=>e.isServiceManaged)))||!!i},Kt=({unprivilegedIndices:e})=>i.a.createElement(w.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",color:"plain",icon:i.a.createElement(w.EuiIcon,{type:"logoObservability",size:"xl"}),title:i.a.createElement("h2",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.noFindingsStates.unprivileged.unprivilegedTitle",defaultMessage:"Privileges required"})),body:i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.noFindingsStates.unprivileged.unprivilegedDescription",defaultMessage:"To view Synthetics monitors data, you must update privileges. For more information, contact your Kibana administrator."})),footer:i.a.createElement(Xt,{children:o.i18n.translate("xpack.synthetics.noFindingsStates.unprivileged.unprivilegedFooterMarkdown",{defaultMessage:"Required Elasticsearch index privilege `read` for the following indices:"})+e.map((e=>`\n- \`${e}\``))})}),Yt=()=>{const{basePath:e}=tt();return i.a.createElement(w.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",iconType:"warning",iconColor:"warning",title:i.a.createElement("h2",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.license.invalidLicenseTitle",defaultMessage:"Invalid License"})),body:i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.license.invalidLicenseDescription",defaultMessage:"The Synthetics UI is not available because your current license has expired or is no longer valid."})),actions:[i.a.createElement(w.EuiButton,{"data-test-subj":"apmInvalidLicenseNotificationManageYourLicenseButton",href:e+"/app/management/stack/license_management"},o.i18n.translate("xpack.synthetics.invalidLicense.licenseManagementLink",{defaultMessage:"Manage your license"}))]})};var Xt=Ut()(w.EuiMarkdownFormat).withConfig({displayName:"_StyledEuiMarkdownFormat",componentId:"sc-1inmrsw-0"})(["text-align:initial;"]);function Jt(){const{refreshApp:e}=K();return i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsRefreshButtonButton",iconType:"refresh",onClick:()=>e()},Qt)}const Qt=o.i18n.translate("xpack.synthetics.overview.refresh",{defaultMessage:"Refresh"}),Zt=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel",{defaultMessage:"Loading Synthetics App"}),ea=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.callout.learnMore",{defaultMessage:"Learn more."}),ta=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled",{defaultMessage:"Synthetics App is currently disabled"}),aa=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled.adminContact",{defaultMessage:"Synthetics App will be enabled when an admin visits the Synthetics app."}),na=o.i18n.translate("xpack.synthetics.monitorManagement.callout.description.disabled",{defaultMessage:"Synthetics App requires a valid API key to run your monitors on Elastic's global managed testing locations. If you already had enabled Synthetics App previously, the API key may no longer be valid."}),ia=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError.description",{defaultMessage:"Synthetics App settings could not be loaded. Please contact Support."}),ra=(o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.management",{defaultMessage:"Enable Synthetics App"}),o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError",{defaultMessage:"Error loading Synthetics App"})),sa=o.i18n.translate("xpack.synthetics.monitorManagement.summary.heading",{defaultMessage:"Summary"}),oa=o.i18n.translate("xpack.synthetics.monitorManagement.configurations.label",{defaultMessage:"Configurations"}),la=o.i18n.translate("xpack.synthetics.monitorManagement.disabled.label",{defaultMessage:"Disabled"}),ca=o.i18n.translate("xpack.synthetics.monitorManagement.testRuns.label",{defaultMessage:"Test runs"}),ua=({total:e})=>{const{enablement:t,invalidApiKeyError:a,loading:n}=Ie();return!t.isEnabled&&e>0||a&&e>0?t.canEnable||n?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{title:ta,color:"warning"},i.a.createElement("p",null,na),i.a.createElement("p",null,aa," ",i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorManagementPageLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},ea))),i.a.createElement(w.EuiSpacer,{size:"m"})):null};function da(e,t,a){switch(t){case"monitorTypes":return e.map((({label:e,count:t})=>{var a;return{label:null!==(a=ma[e])&&void 0!==a?a:e,count:t}}));case"schedules":return e.map((({label:e,count:t})=>({label:o.i18n.translate("xpack.synthetics.monitorFilters.frequencyLabel",{defaultMessage:"Every {count} minutes",values:{count:e}}),count:t})));case"locations":return e.map((({label:e,count:t})=>{var n;const i=a.find((({id:t,label:a})=>e===t||e===a));return{label:null!==(n=null==i?void 0:i.label)&&void 0!==n?n:e,count:t}}));default:return e}}const ma={[He.q.BROWSER]:"Journey / Page",[He.q.HTTP]:"HTTP",[He.q.TCP]:"TCP",[He.q.ICMP]:"ICMP"},pa=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)($.K),{lastRefresh:a}=K();return Object(n.useEffect)((()=>{e($.i.get())}),[a,e]),t};var fa=a(29);const ga=({filter:e,handleFilterChange:t,loading:a})=>{const{label:r,values:s,field:o}=e,[l,c]=Object(n.useState)(""),u=da((d=xe()[o],Array.isArray(d)?d.map((e=>({label:e,count:0}))):d?[{label:d,count:0}]:[]),o,[]).map((({label:e})=>e));var d;return i.a.createElement(fa.FieldValueSelection,{selectedValue:u,singleSelection:!1,label:r,values:l?s.filter((({label:e})=>e.toLowerCase().includes(l.toLowerCase()))):s,setQuery:c,onChange:e=>t(o,e),allowExclusions:!1,loading:a,asFilterButton:!0})},ha=(e,t)=>{let a=[];if("string"==typeof t&&t)a.push({label:t,count:0});else if(Array.isArray(t)){var n;a=null!==(n=null==t?void 0:t.map((e=>({label:e,count:0}))))&&void 0!==n?n:[]}const i=[...null!=e?e:[]];return a.forEach((e=>{i.find((t=>t.label===e.label))||i.push(e)})),i},ba=({handleFilterChange:e})=>{var t;const a=pa(),{locations:n}=Object(u.useSelector)($.X),r=xe(),s=[{label:Ea,field:"monitorTypes",values:da(ha(null==a?void 0:a.monitorTypes,r.monitorTypes),"monitorTypes",n)},{label:va,field:"locations",values:da(ha(null==a?void 0:a.locations.map((e=>{const t=n.find((t=>t.id===e.label));return{label:t?t.label:e.label,count:e.count}})),r.locations),"locations",n)},{label:xa,field:"tags",values:da(ha(null==a?void 0:a.tags,r.tags),"tags",n)},{label:Sa,field:"schedules",values:da(ha(null==a?void 0:a.schedules,r.schedules),"schedules",n)}];return((null==a||null===(t=a.projects)||void 0===t?void 0:t.length)||0)>0&&s.push({label:ya,field:"projects",values:da(ha(null==a?void 0:a.projects,r.projects),"projects",n)}),i.a.createElement(w.EuiFilterGroup,null,s.map(((t,n)=>i.a.createElement(ga,{key:n,filter:t,handleFilterChange:e,loading:!a}))))},Ea=o.i18n.translate("xpack.synthetics.monitorManagement.filter.typeLabel",{defaultMessage:"Type"}),ya=o.i18n.translate("xpack.synthetics.monitorManagement.filter.projectLabel",{defaultMessage:"Project"}),va=o.i18n.translate("xpack.synthetics.monitorManagement.filter.locationLabel",{defaultMessage:"Location"}),xa=o.i18n.translate("xpack.synthetics.monitorManagement.filter.tagsLabel",{defaultMessage:"Tags"}),Sa=o.i18n.translate("xpack.synthetics.monitorManagement.filter.frequencyLabel",{defaultMessage:"Frequency"});var ka=a(48),Ma=a.n(ka);const wa=e=>{var t;let a=e;const{monitorId:i}=Object(p.useParams)();a||(a=i);const r=Object(u.useSelector)($.G),{loading:s}=Object(u.useSelector)($.M),o=Object(u.useSelector)($.U),l=Object(n.useMemo)((()=>{var e;return null!==(e=r.find((e=>e[He.c.CONFIG_ID]===a)))&&void 0!==e?e:null}),[a,r]),c=Object(u.useSelector)($.ab),{lastRefresh:d}=K(),{syntheticsMonitor:m,syntheticsMonitorLoading:f,syntheticsMonitorDispatchedAt:g}=Object(u.useSelector)($.bb),h=Object(u.useDispatch)(),b=a&&l&&l[He.c.CONFIG_ID]===a,E=a&&m&&m[He.c.CONFIG_ID]===a?m:b?l:null,y=404===(null==c?void 0:c.body.statusCode)&&(null===(t=c.getPayload)||void 0===t?void 0:t.monitorId)===a;return Object(n.useEffect)((()=>{!a||E||f||y||h($.p.get({monitorId:a}))}),[h,a,E,f,y]),Object(n.useEffect)((()=>{a&&!f&&!s&&g>0&&Date.now()-g>1e3*o&&h($.p.get({monitorId:a}))}),[h,d,o,a,s,f,g]),{monitor:E,loading:f||s,error:c,isMonitorMissing:y}},Oa=()=>{const{monitor:e}=wa();return null==e?void 0:e[He.c.MONITOR_QUERY_ID]};var Ta=a(76);function Ca(){const e=Object(u.useDispatch)(),t=Object(u.useSelector)($.P),a=Object(n.useCallback)((e=>{var a;return null===(a=t[e])||void 0===a?void 0:a.alertStatus}),[t]);return{updateAlertEnabledState:Object(n.useCallback)((({monitor:t,name:a,configId:n})=>{e($.c.get({configId:n,monitor:t,success:{message:Object(Ta.b)(t[qe.c.ALERT_CONFIG])?Ia(a):ja(a),lifetimeMs:3e3,testAttribute:"uptimeMonitorAlertUpdateSuccess"},error:{message:{title:_a(a)},lifetimeMs:1e4,testAttribute:"uptimeMonitorAlertEnabledUpdateFailure"}}))}),[e]),alertStatus:a}}const Ia=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledSuccessLabel.alert",{defaultMessage:'Alerts are now enabled for the monitor "{name}".',values:{name:e}}),ja=e=>o.i18n.translate("xpack.synthetics.overview.actions.disabledSuccessLabel.alert",{defaultMessage:'Alerts are now disabled for the monitor "{name}".',values:{name:e}}),_a=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledFailLabel.alert",{defaultMessage:'Unable to enable status alerts for monitor "{name}".',values:{name:e}}),Fa=(o.i18n.translate("xpack.synthetics.management.monitorList.noItemForSelectedFiltersMessage",{defaultMessage:"No monitors found for selected filter criteria",description:"This message is shown if there are no monitors in the table and some filter or search criteria exists"}),o.i18n.translate("xpack.synthetics.management.monitorList.loading",{defaultMessage:"Loading...",description:"Shown when the monitor list is waiting for a server response"})),Pa=o.i18n.translate("xpack.synthetics.management.monitorList.noItemMessage",{defaultMessage:"No monitors found",description:"This message is shown if the monitors table is rendered but has no items."}),La=(o.i18n.translate("xpack.synthetics.management.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),o.i18n.translate("xpack.synthetics.management.editLabel",{defaultMessage:"Edit"})),Ra=o.i18n.translate("xpack.synthetics.management.enableStatusAlert",{defaultMessage:"Enable status alerts"}),Da=o.i18n.translate("xpack.synthetics.management.disableStatusAlert",{defaultMessage:"Disable status alerts"}),Aa=(o.i18n.translate("xpack.synthetics.management.duplicateLabel",{defaultMessage:"Duplicate"}),o.i18n.translate("xpack.synthetics.management.disableLabel",{defaultMessage:"Disable"}),o.i18n.translate("xpack.synthetics.management.enableLabel",{defaultMessage:"Enable"}),o.i18n.translate("xpack.synthetics.management.deleteLabel",{defaultMessage:"Delete"})),Na=(o.i18n.translate("xpack.synthetics.management.confirmDescriptionLabel",{defaultMessage:"This action will delete the monitor but keep any data collected. This action cannot be undone."}),o.i18n.translate("xpack.synthetics.management.yesLabel",{defaultMessage:"Delete"})),Ba=o.i18n.translate("xpack.synthetics.management.noLabel",{defaultMessage:"Cancel"}),za=(o.i18n.translate("xpack.synthetics.management.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),o.i18n.translate("xpack.synthetics.management.monitorDeleteSuccessMessage",{defaultMessage:"Monitor deleted successfully."}),o.i18n.translate("xpack.synthetics.management.monitorDeleteFailureMessage",{defaultMessage:"Monitor was unable to be deleted. Please try again later."})),Ha=(o.i18n.translate("xpack.synthetics.management.monitorDeleteLoadingMessage",{defaultMessage:"Deleting monitor..."}),e=>e.unit===He.w.SECONDS?i.a.createElement(w.EuiText,{size:"s"},o.i18n.translate("xpack.synthetics.management.monitorList.frequencyInSeconds",{description:"Monitor frequency in seconds",defaultMessage:"{countSeconds, number} {countSeconds, plural, one {second} other {seconds}}",values:{countSeconds:Number(e.number)}})):i.a.createElement(w.EuiText,{size:"s"},o.i18n.translate("xpack.synthetics.management.monitorList.frequencyInMinutes",{description:"Monitor frequency in minutes",defaultMessage:"{countMinutes, number} {countMinutes, plural, one {minute} other {minutes}}",values:{countMinutes:Number(e.number)}}))),Ga=o.i18n.translate("xpack.synthetics.management.enableMonitorLabel",{defaultMessage:"Enable monitor"}),Va=o.i18n.translate("xpack.synthetics.management.disableMonitorLabel",{defaultMessage:"Disable monitor"}),$a=e=>o.i18n.translate("xpack.synthetics.management.monitorEnabledSuccessMessage",{defaultMessage:"Monitor {name} enabled successfully.",values:{name:e}}),Ua=e=>o.i18n.translate("xpack.synthetics.management.monitorDisabledSuccessMessage",{defaultMessage:"Monitor {name} disabled successfully.",values:{name:e}}),qa=({from:e,to:t})=>{var a,r;const[s,o]=Object(n.useState)(!1),{monitor:l}=wa(),c=Oa(),{alertStatus:u,updateAlertEnabledState:d}=Ca(),m=Wa({rangeFrom:e,rangeTo:t,monitorId:c});if(!l)return i.a.createElement(w.EuiSkeletonText,{lines:1});const p=null===(a=l.alert)||void 0===a||null===(r=a.status)||void 0===r?void 0:r.enabled,f=u(l[He.c.CONFIG_ID])===N.FETCH_STATUS.LOADING;const g=[i.a.createElement(w.EuiContextMenuItem,{key:"edit",icon:p?"bellSlash":"bell",onClick:()=>{d({monitor:{[He.c.ALERT_CONFIG]:Object(Ta.c)(l[He.c.ALERT_CONFIG])},name:l[He.c.NAME],configId:l[He.c.CONFIG_ID]})},disabled:f},p?Da:Ra," ",f&&i.a.createElement(w.EuiLoadingSpinner,null)),i.a.createElement(w.EuiContextMenuItem,{key:"share",icon:"list",href:m},Ya)],h=i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsAlertActionsButton",iconType:"arrowDown",iconSide:"right",onClick:()=>{o(!s)}},Ka);return i.a.createElement(w.EuiPopover,{id:"monitorAlertActionsContext",button:h,isOpen:s,closePopover:()=>o(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(w.EuiContextMenuPanel,{size:"s",items:g}))},Wa=({rangeFrom:e,rangeTo:t,monitorId:a})=>{const{basePath:n}=tt();let i='kibana.alert.rule.category : "Synthetics monitor status" ';return a&&(i+=`AND monitor.id : "${a}"`),`${n}/app/observability/alerts?_a=${Ma.a.encode({kuery:i,rangeFrom:e,rangeTo:t})}`},Ka=o.i18n.translate("xpack.synthetics.management.actions",{defaultMessage:"Actions"}),Ya=o.i18n.translate("xpack.synthetics.management.actions.viewAlerts",{defaultMessage:"View alerts"}),Xa=()=>{const e=Wa({rangeFrom:"now-12h/h",rangeTo:"now"});return i.a.createElement(w.EuiToolTip,{content:Ja},i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsAlertsLinkButton","aria-label":Ja,href:e,iconType:"inspect"}))},Ja=o.i18n.translate("xpack.synthetics.monitorSummary.viewAlerts",{defaultMessage:"View alerts"}),Qa=()=>{const{status:e}=Object(u.useSelector)(Ne.f),{statusFilter:t}=xe();return Object(n.useMemo)((()=>{var a,n;let i=null!==(a=null==e?void 0:e.enabledMonitorQueryIds)&&void 0!==a?a:[];switch(t){case"up":i=e?Object.entries(e.upConfigs).map((([e,t])=>t.monitorQueryId)):[];break;case"down":i=e?Object.entries(e.downConfigs).map((([e,t])=>t.monitorQueryId)):[];break;case"disabled":i=null!==(n=null==e?void 0:e.disabledMonitorQueryIds)&&void 0!==n?n:[]}return i.length>0?i:["false-id"]}),[e,t])},Za=()=>{const{from:e,to:t}=Me(12,"hours"),{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(T.useKibana)().services,n=Object(N.useTheme)(),{status:r}=Object(u.useSelector)(Ne.f),{locations:s}=xe(),o=!(null!=r&&r.allIds)||0===(null==r?void 0:r.allIds.length),l=Qa();return i.a.createElement(w.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,tn)),i.a.createElement(w.EuiSpacer,{size:"s"}),o?i.a.createElement(w.EuiSkeletonText,{lines:3}):i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(a,{id:"monitorActiveAlertsCount",dataTestSubj:"monitorActiveAlertsCount",reportType:"single-metric",customHeight:"70px",attributes:[{dataType:"alerts",time:{from:e,to:t},name:en,selectedMetricField:fa.RECORDS_FIELD,reportDefinitions:{"kibana.alert.rule.category":["Synthetics monitor status"],"monitor.id":l,...null!=s&&s.length?{"observer.geo.name":s}:{}},filters:[{field:"kibana.alert.status",values:["active","recovered"]}],color:n.eui.euiColorVis1}]})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(a,{id:"monitorActiveAlertsOverTime",sparklineMode:!0,customHeight:"70px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:e,to:t},reportDefinitions:{"kibana.alert.rule.category":["Synthetics monitor status"],"monitor.id":l,...null!=s&&s.length?{"observer.geo.name":s}:{}},dataType:"alerts",selectedMetricField:fa.RECORDS_FIELD,name:en,filters:[{field:"kibana.alert.status",values:["active","recovered"]}],color:n.eui.euiColorVis1_behindText}]})),i.a.createElement(an,{grow:!1},i.a.createElement(Xa,null))))},en=o.i18n.translate("xpack.synthetics.detailsPanel.alerts",{defaultMessage:"Alerts"}),tn=o.i18n.translate("xpack.synthetics.overview.alerts.headingText",{defaultMessage:"Last 12 hours"});var an=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-5qzfyh-0"})({alignSelf:"center"}),nn=a(86);function rn(){var e,t;const a=Object(u.useDispatch)(),i=Object(n.useRef)(!0),{pageState:r,loading:s,loaded:o,error:l,data:c}=Object(u.useSelector)($.M),d=Object(u.useSelector)($.G),{handleFilterChange:m}=function(){const[e,t]=Se(),a=e(),i=Object(n.useMemo)((()=>["tags","locations","monitorTypes","projects","schedules","query"]),[]),r=Object(u.useDispatch)(),s=Object(n.useCallback)(((e,t)=>"query"===e?null!=t&&t.length?t.toString():void 0:t&&t.length>0?JSON.stringify(t.map((t=>function(e,t){var a;switch(t){case"monitorTypes":return null!==(a=Object(k.invert)(ma)[e])&&void 0!==a?a:e;case"schedules":return(null!=e?e:"").replace(/\D/g,"");default:return e}}(t,e)))):void 0),[]),o=Object(n.useCallback)((e=>i.reduce(((t,a)=>({...t,[a]:s(a,e[a])})),{})),[i,s]),l=Object(n.useCallback)(((e,a)=>{t({[e]:s(e,a)})}),[s,t]),c=Object(u.useSelector)($.L),d=JSON.stringify(o(c)),m=i.reduce(((e,t)=>({...e,[t]:a[t]})),{}),p=JSON.stringify(o(m)),f=Object(n.useRef)(!1);return Object(n.useEffect)((()=>{p!==d&&("{}"!==p||"{}"===d||f.current?(r(Object($.ob)(m)),r(Object($.hb)(m))):t(o(c))),f.current=!0}),[p,d]),{handleFilterChange:l,filterState:c}}(),{lastRefresh:p}=K(),f=Object(n.useCallback)((e=>{a(Object($.ob)(e))}),[a]),g=Object(n.useCallback)((()=>f(r)),[r,f]);return Object(n.useEffect)((()=>{i.current||a(Object($.x)({...r}))}),[p]),Object(H.useDebounce)((()=>{i.current&&a(o?Object($.x)(r):$.j.get(r))}),100,[a]),Object(H.useDebounce)((()=>{!i.current&&o?a($.j.get(r)):i.current=!1}),200,[r]),{loading:s,loaded:o,error:l,pageState:r,syntheticsMonitors:d,total:null!==(e=null==c?void 0:c.total)&&void 0!==e?e:0,loadPage:f,reloadPage:g,absoluteTotal:null!==(t=c.absoluteTotal)&&void 0!==t?t:0,handleFilterChange:m}}const sn=o.i18n.translate("xpack.synthetics.overviewPage.overviewCrumb",{defaultMessage:"Overview"});var on=a(129),ln=a.n(on),cn=a(127),un=a.n(cn);const dn=()=>i.a.createElement(w.EuiPanel,{style:{height:"160px"},hasBorder:!0},i.a.createElement(w.EuiSkeletonText,{lines:2})),mn=({rows:e})=>{const t=Array(4*(null!=e?e:4)).fill(null);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGrid,{gutterSize:"m",columns:4},t.map(((e,t)=>i.a.createElement(w.EuiFlexItem,{key:t},i.a.createElement(dn,null))))))},pn=e=>e||0===e?Math.floor(e/1e3):null,fn=(e,{noSpace:t}={})=>{if(e<1e6)return t?o.i18n.translate("xpack.synthetics.overview.durationMsFormattingNoSpace",{values:{millis:pn(e)},defaultMessage:"{millis}ms"}):o.i18n.translate("xpack.synthetics.overview.durationMsFormatting",{values:{millis:pn(e)},defaultMessage:"{millis} ms"});const a=(e/1e6).toFixed(0);return t?o.i18n.translate("xpack.synthetics.overview.durationSecondsFormattingNoSpace",{values:{seconds:a},defaultMessage:"{seconds}s"}):o.i18n.translate("xpack.synthetics.overview.durationSecondsFormatting",{values:{seconds:a},defaultMessage:"{seconds} s"})};var gn=a(61),hn=a(49);const bn=e=>o.i18n.translate("xpack.synthetics.tagsList.filter",{defaultMessage:"Click to filter list with tag {tag}",values:{tag:e}}),En=({tags:e,onClick:t})=>{const[a,r]=Object(n.useState)(3);if(!e||0===e.length)return i.a.createElement(w.EuiText,null,"--");const s=e.slice(0,a);return i.a.createElement(w.EuiFlexGroup,{wrap:!0,gutterSize:"xs",style:{maxWidth:400},alignItems:"baseline"},s.map((e=>i.a.createElement(w.EuiFlexItem,{key:e,grow:!1},t?i.a.createElement(w.EuiBadge,{key:e,title:bn(e),onClick:()=>{t(e)},onClickAriaLabel:bn(e),color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e):i.a.createElement(w.EuiBadge,{key:e,color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e)))),e.length>a&&i.a.createElement(w.EuiFlexItem,{key:e.length-a,grow:!1},i.a.createElement(w.EuiToolTip,{content:i.a.createElement(i.a.Fragment,null,e.slice(a,e.length).map((e=>i.a.createElement(w.EuiText,{key:e,size:"s"},e))))},i.a.createElement(w.EuiBadge,{color:"hollow",onClick:()=>{r(e.length)},onClickAriaLabel:yn},"+",e.length-a))),a>3&&i.a.createElement(w.EuiFlexItem,{key:e.length-3,grow:!1},i.a.createElement(w.EuiToolTip,{content:vn,key:a},i.a.createElement(w.EuiBadge,{color:"hollow",onClick:()=>{r(3)},onClickAriaLabel:vn},"-",e.length-3))))},yn=o.i18n.translate("xpack.synthetics.management.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),vn=o.i18n.translate("xpack.synthetics.management.monitorList.tags.collapse",{defaultMessage:"Click to collapse tags"}),xn=({title:e,hasBorder:t=!0,hasShadow:a=!1,children:n,titleLeftAlign:r,margin:s,...o})=>{const{euiTheme:l}=Object(w.useEuiTheme)();return i.a.createElement(w.EuiPanel,m()({hasBorder:t,hasShadow:a},o),e&&i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement(Sn,{$_css:null!=s?s:l.size.s,$_css2:r?{marginLeft:0}:{}},e)),n)};var Sn=Ut()("h3").withConfig({displayName:"_StyledH",componentId:"sc-1b9zul5-0"})((e=>({margin:e.$_css,marginBottom:0,...e.$_css2})));const kn=()=>i.a.createElement(w.EuiCallOut,{title:wn,color:"warning",iconType:"help"},i.a.createElement("p",null,Cn),i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.privateLocations.needFleetPermission.description",defaultMessage:"Once there is an agent policy available, you'll be able to manage private locations and monitors with the regular Synthetics app privileges."}))),Mn=({canEditSynthetics:e=!0,canUsePublicLocations:t=!0,children:a})=>{const n=function(e=!0,t=!0){const a=e?void 0:In;return a||(t?void 0:jn)}(e,t);return n?i.a.createElement(w.EuiToolTip,{content:n},i.a.createElement("span",null,a)):i.a.createElement(i.a.Fragment,null,a)},wn=o.i18n.translate("xpack.synthetics.monitorManagement.privateLocations.needPermissions",{defaultMessage:"You're missing some Kibana privileges to manage private locations"}),On=o.i18n.translate("xpack.synthetics.monitorManagement.privileges.all",{defaultMessage:"All"}),Tn=o.i18n.translate("xpack.synthetics.monitorManagement.privileges.read",{defaultMessage:"Read"}),Cn=i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.privateLocations.needFleetPermission",defaultMessage:"In order to create private locations, you need an agent policy. You are not authorized to create Fleet agent policies. It requires the {all} for Fleet and at least {read} for Integerations kibana priviliges.",values:{all:i.a.createElement(w.EuiCode,null,`"${On}"`),read:i.a.createElement(w.EuiCode,null,`"${Tn}"`)}}),In=o.i18n.translate("xpack.synthetics.monitorManagement.noSyntheticsPermissions",{defaultMessage:"You do not have sufficient permissions to perform this action."}),jn=o.i18n.translate("xpack.synthetics.monitorManagement.canUsePublicLocations",{defaultMessage:"You do not have sufficient permissions to use Elastic managed locations."}),_n=({configId:e,monitor:t,reloadPage:a,initialLoading:r=!1,isSwitchable:s=!0})=>{const l=qt(),c=Wt(null==t?void 0:t[He.c.LOCATIONS]),u=t[He.c.NAME],d=Object(n.useMemo)((()=>{return{failureLabel:(e=u,o.i18n.translate("xpack.synthetics.management.monitorEnabledUpdateFailureMessage",{defaultMessage:"Unable to update monitor {name}.",values:{name:e}})),enabledSuccessLabel:$a(u),disabledSuccessLabel:Ua(u)};var e}),[u]),{isEnabled:m,updateMonitorEnabledState:p,status:f}=We({configId:e,isEnabled:t[He.c.ENABLED],reloadPage:a,labels:d}),g=null!=m?m:t[He.c.ENABLED],h=f===N.FETCH_STATUS.LOADING,b=g?Va:Ga;return i.a.createElement(i.a.Fragment,null,h||r?i.a.createElement(w.EuiLoadingSpinner,{size:"m"}):i.a.createElement(Mn,{canEditSynthetics:l,canUsePublicLocations:c},i.a.createElement(Fn,{compressed:!0,checked:g,disabled:h||!l||!c,showLabel:!1,label:b,title:b,"data-test-subj":"syntheticsIsMonitorEnabled","data-is-switchable":s,onChange:e=>{const t=e.target.checked;p(t)}})))},Fn=Object(A.euiStyled)(w.EuiSwitch)`
  & > button {
    cursor: ${({"data-is-switchable":e})=>e?void 0:"not-allowed"};
  }
`;function Pn({configId:e,locationId:t}){var a,i;const[r,s]=Object(n.useState)(void 0),o=null===(a=ut())||void 0===a||null===(i=a.share)||void 0===i?void 0:i.url.locators.get(Ke.syntheticsMonitorDetailLocatorID);return Object(n.useEffect)((()=>{!async function(){const a=await(null==o?void 0:o.getUrl({configId:e,locationId:t}));s(a)}()}),[o,e,t]),r}const Ln=({loading:e,locations:t,configId:a})=>{const[r,s]=Object(n.useState)(3);if(e&&!t)return i.a.createElement(w.EuiLoadingSpinner,null);const o=t.slice(0,r);return i.a.createElement(Bn,{gutterSize:"xs",wrap:!0,responsive:!1},o.map((e=>i.a.createElement(zn,{key:e.id,grow:!1},i.a.createElement(Rn,{configId:a,locationId:e.id,locationLabel:e.label,color:e.color})))),t.length>r&&i.a.createElement(w.EuiFlexItem,{key:t.length-r,grow:!1},i.a.createElement(w.EuiToolTip,{content:i.a.createElement(i.a.Fragment,null,t.slice(r,t.length).map((e=>i.a.createElement(w.EuiHealth,{color:e.color},e.label))))},i.a.createElement(w.EuiBadge,{color:"hollow",onClick:()=>{s(t.length)},onClickAriaLabel:Dn},"+",t.length-r))),r>3&&i.a.createElement(Hn,{key:t.length-3,grow:!1},i.a.createElement(w.EuiToolTip,{content:An},i.a.createElement(w.EuiBadge,{color:"hollow",onClick:()=>{s(3)},onClickAriaLabel:An},"-",t.length-3))))},Rn=({configId:e,locationId:t,locationLabel:a,color:n})=>{const r=Pn({configId:e,locationId:t});return i.a.createElement(w.EuiBadge,{iconType:()=>i.a.createElement(w.EuiIcon,{size:"m",type:"dot",color:n}),color:"hollow",iconOnClickAriaLabel:Nn,iconOnClick:()=>{},href:null!=r?r:"/"},a)},Dn=o.i18n.translate("xpack.synthetics.management.monitorList.locations.expand",{defaultMessage:"Click to view remaining locations"}),An=o.i18n.translate("xpack.synthetics.management.monitorList.locations.collapse",{defaultMessage:"Click to collapse locations"}),Nn=o.i18n.translate("xpack.synthetics.management.location.clickMessage",{defaultMessage:"Click to view details for this location."});var Bn=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1r2f5la-0"})({maxWidth:450,overflow:"hidden"}),zn=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1r2f5la-1"})({overflow:"hidden",flexBasis:"fit-content"}),Hn=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-1r2f5la-2"})({overflow:"hidden"});const Gn=({configId:e,monitorLocations:t})=>{const{locations:a,loading:n}=Ae({configId:e,monitorLocations:t});return i.a.createElement(Ln,{configId:e,locations:a,loading:n})};function Vn({monitor:e,ariaLabel:t,onClick:a,onKeyPress:n}){const r=i.a.createElement(Un,{"data-is-clickable":!!a},i.a.createElement(w.EuiIcon,{size:"s",type:$n(e)})," ",function(e){var t,a;switch(e[He.c.FORM_MONITOR_TYPE]){case He.k.TCP:case He.k.HTTP:case He.k.ICMP:return null==e||null===(t=e.type)||void 0===t?void 0:t.toUpperCase();case He.k.SINGLE:return"Page";case He.k.MULTISTEP:return"Journey"}return(null==e?void 0:e.type)===He.q.BROWSER?"Journey":null==e||null===(a=e.type)||void 0===a?void 0:a.toUpperCase()}(e));return a?i.a.createElement("div",{title:t,"aria-label":t,onClick:a,onKeyPress:n},r):r}function $n(e){return"browser"===(null==e?void 0:e.type)?"videoPlayer":"online"}const Un=Object(A.euiStyled)(w.EuiBadge)`
  ${({"data-is-clickable":e})=>e?"cursor: pointer;":""}
  &&& {
    .euiBadge__text {
      display: flex;
      align-items: center;
      gap: 4px;
    }
  }
`;function qn(){const e=o.i18n.getLocale(),t=navigator.language;return Object(n.useEffect)((()=>{const a=null!=e?e:t;V.a.locale()!==a&&V.a.locale(a)}),[e,t]),e=>{if(!e)return"";const t=V()(e);return`${t.format("ll")} @ ${t.format("LT")}`}}const Wn=({monitor:e,latestPing:t,loading:a,configId:n,hideEnabled:r=!1,hideLocations:s=!1,hasBorder:l=!0})=>{var c,d;const m=Object(u.useDispatch)();if(!e)return i.a.createElement(w.EuiSkeletonText,{lines:8});const p=null!==(c=null==t||null===(d=t.url)||void 0===d?void 0:d.full)&&void 0!==c?c:e[He.c.URLS];return i.a.createElement(xn,{paddingSize:"m",margin:"none",title:ri,titleLeftAlign:!0,hasBorder:l},i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiDescriptionList,{type:"column",columnWidths:[2,3],compressed:!0,align:"left"},!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiDescriptionListTitle,null,ni),i.a.createElement(w.EuiDescriptionListDescription,null,e&&i.a.createElement(_n,{initialLoading:a,configId:n,monitor:e,reloadPage:()=>{m($.p.get({monitorId:n}))}}))),i.a.createElement(w.EuiDescriptionListTitle,null,ti),i.a.createElement(w.EuiDescriptionListDescription,{style:{wordBreak:"break-all"}},p?i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsPanelLink",href:p,external:!0},p):i.a.createElement(w.EuiText,{color:"subdued",size:"s"},ui)),i.a.createElement(w.EuiDescriptionListTitle,null,oi),i.a.createElement(w.EuiDescriptionListDescription,null,null!=t&&t.timestamp?i.a.createElement(Qn,{timestamp:null==t?void 0:t.timestamp}):i.a.createElement(w.EuiText,{color:"subdued"},"--")),i.a.createElement(w.EuiDescriptionListTitle,null,si),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(Qn,{timestamp:e.updated_at})),e[He.c.PROJECT_ID]&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiDescriptionListTitle,null,li),i.a.createElement(w.EuiDescriptionListDescription,null,e[He.c.PROJECT_ID])),i.a.createElement(w.EuiDescriptionListTitle,null,ci),i.a.createElement(w.EuiDescriptionListDescription,null,e.id),i.a.createElement(w.EuiDescriptionListTitle,null,ii),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(Vn,{monitor:e})),i.a.createElement(w.EuiDescriptionListTitle,null,Zn),i.a.createElement(w.EuiDescriptionListDescription,null,(g=`${(f=e[He.c.SCHEDULE]).number} ${function(e,t){switch(e){case"s":return Kn(t);case"m":return Yn(t);case"h":return Xn(t);case"d":return Jn(t);default:return e}}(f.unit,parseInt(f.number,10))}`,o.i18n.translate("xpack.synthetics.monitorList.flyout.unitStr",{defaultMessage:"Every {unitMsg}",values:{unitMsg:g},description:'This displays a message like "Every 10 minutes" or "Every 30 seconds"'}))),!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiDescriptionListTitle,null,ei),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(Gn,{configId:n,monitorLocations:e.locations}))),i.a.createElement(w.EuiDescriptionListTitle,null,ai),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(En,{tags:e[He.c.TAGS]}))));var f,g},Kn=e=>o.i18n.translate("xpack.synthetics.monitorDetail.seconds",{defaultMessage:"{n, plural, one {second} other {seconds}}",values:{n:e}}),Yn=e=>o.i18n.translate("xpack.synthetics.monitorDetail.minutes",{defaultMessage:"{n, plural, one {minute} other {minutes}}",values:{n:e}}),Xn=e=>o.i18n.translate("xpack.synthetics.monitorDetail.hours",{defaultMessage:"{n, plural, one {hour} other {hours}}",values:{n:e}}),Jn=e=>o.i18n.translate("xpack.synthetics.monitorDetail.days",{defaultMessage:"{n, plural, one {day} other {days}}",values:{n:e}}),Qn=({timestamp:e})=>{const t=qn()(e);return e?i.a.createElement("time",{dateTime:e},t):null},Zn=o.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),ei=o.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),ti=o.i18n.translate("xpack.synthetics.management.monitorList.url",{defaultMessage:"URL"}),ai=o.i18n.translate("xpack.synthetics.management.monitorList.tags",{defaultMessage:"Tags"}),ni=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.enabled",{defaultMessage:"Enabled (all locations)"}),ii=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.monitorType",{defaultMessage:"Monitor type"}),ri=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails",{defaultMessage:"Monitor details"}),si=o.i18n.translate("xpack.synthetics.monitorList.lastModified",{defaultMessage:"Last modified"}),oi=o.i18n.translate("xpack.synthetics.monitorList.lastRunHeaderText",{defaultMessage:"Last run"}),li=o.i18n.translate("xpack.synthetics.monitorList.projectIdHeaderText",{defaultMessage:"Project ID"}),ci=o.i18n.translate("xpack.synthetics.monitorList.monitorIdItemText",{defaultMessage:"Monitor ID"}),ui=o.i18n.translate("xpack.synthetics.monitorList.unAvailable",{defaultMessage:"(unavailable)"}),di=(e,t)=>{const a={index:c.B,body:{size:1,query:{bool:{filter:[{term:{config_id:e}},{term:{"observer.geo.name":t}},{exists:{field:"summary"}}]}},sort:[{"@timestamp":"desc"}]}},{data:n,loading:i}=Object(N.useEsSearch)(a,[e,t],{name:"getMonitorStatusByLocation"});return n&&1===n.hits.hits.length?{data:{...n.hits.hits[0]._source,timestamp:n.hits.hits[0]._source["@timestamp"]},loading:i}:{data:void 0,loading:i}},mi=({status:e,isBrowserType:t})=>e&&"unknown"!==e?"up"===e?i.a.createElement(w.EuiBadge,{color:"success","data-test-subj":"monitorLatestStatusUp"},t?bi:Ei):i.a.createElement(w.EuiBadge,{color:"danger","data-test-subj":"monitorLatestStatusDown"},t?gi:yi):i.a.createElement(w.EuiBadge,{color:"default","data-test-subj":"monitorLatestStatusPending"},hi),pi=({loading:e,monitor:t,status:a,compressed:n=!0})=>{const r="browser"===t.type,s=e&&!t;return i.a.createElement(w.EuiDescriptionList,{align:"left",compressed:n,listItems:[{title:fi,description:s?i.a.createElement(w.EuiSkeletonText,{lines:1}):i.a.createElement(mi,{status:a,isBrowserType:r})}]})},fi=o.i18n.translate("xpack.synthetics.monitorStatus.statusLabel",{defaultMessage:"Status"}),gi=o.i18n.translate("xpack.synthetics.monitorStatus.failedLabel",{defaultMessage:"Failed"}),hi=o.i18n.translate("xpack.synthetics.monitorStatus.pendingLabel",{defaultMessage:"Pending"}),bi=o.i18n.translate("xpack.synthetics.monitorStatus.succeededLabel",{defaultMessage:"Succeeded"}),Ei=o.i18n.translate("xpack.synthetics.monitorStatus.upLabel",{defaultMessage:"Up"}),yi=o.i18n.translate("xpack.synthetics.monitorStatus.downLabel",{defaultMessage:"Down"}),vi=({monitorLocations:e,configId:t,selectedLocation:a,compressed:r,onChange:s,isDisabled:l})=>{const c=Object(w.useEuiTheme)(),{locations:u,loading:d}=Ae({configId:t,monitorLocations:e}),[m,p]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>p(!0)),[]),g=Object(n.useCallback)((()=>p(!1)),[]),h=Object(n.useMemo)((()=>{if(!a||!e)return"";const t=1===e.length&&e[0].id!==(null==a?void 0:a.id);if(e.length>1||t){const e=i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsLocationListLink",onClick:f,disabled:l},a.label," ",l?null:i.a.createElement(w.EuiIcon,{type:"arrowDown"})),t=d&&!u?[i.a.createElement("span",{key:"loading"},"Loading...")]:u.map((e=>i.a.createElement(Si,{key:e.label,icon:i.a.createElement(w.EuiHealth,{color:e.color}),onClick:(null==a?void 0:a.id)!==e.id?()=>{g(),s(e.id,e.label)}:void 0,$_css:(null==a?void 0:a.id)===e.id?{textDecoration:"underline",backgroundColor:c.euiTheme.colors.lightShade,pointerEvents:"none"}:void 0},e.label))).filter((e=>void 0!==typeof e));return i.a.createElement(w.EuiPopover,{button:e,isOpen:m,closePopover:g,panelPaddingSize:"none"},i.a.createElement(w.EuiContextMenuPanel,{items:t,size:"s",title:o.i18n.translate("xpack.synthetics.monitorLocation.locationContextMenuTitleLabel",{defaultMessage:"Go to location"})}))}return a.label}),[g,l,m,d,u,e,s,f,a,c.euiTheme.colors.lightShade]);return a&&e?i.a.createElement(w.EuiDescriptionList,{compressed:r,listItems:[{title:xi,description:h}]}):a?i.a.createElement(w.EuiDescriptionList,{compressed:r,listItems:[{title:xi,description:null==a?void 0:a.label}]}):i.a.createElement(w.EuiDescriptionList,{compressed:r,listItems:[{title:xi,description:i.a.createElement(w.EuiSkeletonText,{lines:1})}]})},xi=o.i18n.translate("xpack.synthetics.monitorLocation.locationLabel",{defaultMessage:"Location"});var Si=Ut()(w.EuiContextMenuItem).withConfig({displayName:"_StyledEuiContextMenuItem",componentId:"sc-11qy33a-0"})(["",""],(e=>e.$_css)),ki=a(142);const Mi="now-12h",wi="now",Oi="now-24h",Ti="now-12h";function Ci({id:e,location:t,currentDurationChartFrom:a,currentDurationChartTo:n,previousDurationChartFrom:r,previousDurationChartTo:s}){var o,l;const c=Object(N.useTheme)(),{exploratoryView:{ExploratoryViewEmbeddable:u}}=Object(T.useKibana)().services;return i.a.createElement(w.EuiPageSection,{bottomBorder:"extended"},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Fi)),i.a.createElement(u,{customHeight:"200px",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!0,legendPosition:"bottom",attributes:[{seriesType:"area",color:null==c||null===(o=c.eui)||void 0===o?void 0:o.euiColorVis1,time:{from:null!=a?a:Mi,to:null!=n?n:wi},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:Pi,operationType:"average"},{seriesType:"line",color:null==c||null===(l=c.eui)||void 0===l?void 0:l.euiColorVis7,time:{from:null!=r?r:Oi,to:null!=s?s:Ti},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:Li,operationType:"average"}]}))}function Ii({locations:e,currentLocation:t,configId:a,setCurrentLocation:r,monitor:s,onEnabledChange:o}){var l;const c=null===(l=e.find((e=>e.label===t)))||void 0===l?void 0:l.status,{locations:d}=Object(u.useSelector)($.X),m=d.find((e=>e.label===t));return i.a.createElement(w.EuiFlexGroup,{wrap:!0,responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(pi,{status:c,monitor:s})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(vi,{compressed:!0,monitorLocations:s.locations,configId:a,selectedLocation:m,onChange:Object(n.useCallback)(((e,a)=>{t!==a&&r(a,e)}),[t,r])})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiDescriptionList,{align:"left",compressed:!0},i.a.createElement(w.EuiDescriptionListTitle,null,Ri),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(_n,{configId:a,monitor:s,reloadPage:o})))))}function ji(){return i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"100%"}},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLoadingSpinner,{size:"xl"})))}function _i(e){const{id:t,configId:a,onLocationChange:r,locationId:s}=e,{data:{monitors:o}}=Object(u.useSelector)($.R),l=Object(n.useMemo)((()=>{const e=o.filter((({id:e})=>e===t))[0];if(e)return e}),[t,o]),c=Object(n.useCallback)(((e,n)=>r({id:t,configId:a,location:e,locationId:n})),[t,a,r]),d=Pn({configId:a,locationId:s}),p=Object(u.useDispatch)();Object(n.useEffect)((()=>()=>{p(Object($.fb)(null))}),[p]);const f=Object(u.useSelector)(Object($.O)(a)),g="success"===(null==f?void 0:f.status),{data:h,error:b,status:E,loading:y}=Object(N.useFetcher)((()=>Object(ki.c)({monitorId:a})),[a,g]),[v,x]=Object(n.useState)(!1),S=di(a,e.location),{locations:k}=Ae({configId:a,monitorLocations:null==h?void 0:h.locations}),M=Object(w.useIsWithinMaxBreakpoint)("xl");return i.a.createElement(w.EuiFlyout,{size:"600px",type:M?"overlay":"push",onClose:e.onClose,paddingSize:"none"},E===N.FETCH_STATUS.FAILURE&&i.a.createElement(w.EuiErrorBoundary,null,null==b?void 0:b.message),E===N.FETCH_STATUS.LOADING&&i.a.createElement(ji,null),E===N.FETCH_STATUS.SUCCESS&&h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},i.a.createElement(w.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"s"},i.a.createElement("h2",null,null==h?void 0:h[qe.c.NAME]))),i.a.createElement(w.EuiFlexItem,{grow:!1},l&&i.a.createElement(Hl,{isPopoverOpen:v,isInspectView:!0,monitor:l,setIsPopoverOpen:x,position:"default",iconHasPanel:!1,iconSize:"xs",locationId:s}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Ii,{currentLocation:e.location,locations:k,setCurrentLocation:c,configId:a,monitor:h,onEnabledChange:e.onEnabledChange}))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(Ci,m()({},e,{location:e.location})),i.a.createElement(Wn,{hasBorder:!1,hideEnabled:!0,latestPing:S.data,configId:a,monitor:{...h,id:t},loading:Boolean(y)})),i.a.createElement(w.EuiFlyoutFooter,null,i.a.createElement(w.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l",color:"transparent"},i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsMonitorDetailFlyoutButton",onClick:e.onClose},Di)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsMonitorDetailFlyoutButton",isDisabled:!d,href:d,iconType:"sortRight",iconSide:"right",fill:!0},Ai)))))))}const Fi=o.i18n.translate("xpack.synthetics.monitorList.durationHeaderText",{defaultMessage:"Duration"}),Pi=o.i18n.translate("xpack.synthetics.monitorList.durationChart.durationSeriesName",{defaultMessage:"Duration"}),Li=o.i18n.translate("xpack.synthetics.monitorList.durationChart.previousPeriodSeriesName",{defaultMessage:"Previous period"}),Ri=o.i18n.translate("xpack.synthetics.monitorList.enabledItemText",{defaultMessage:"Enabled (all locations)"}),Di=o.i18n.translate("xpack.synthetics.monitorList.closeFlyoutText",{defaultMessage:"Close"}),Ai=o.i18n.translate("xpack.synthetics.monitorList.goToMonitorLinkText",{defaultMessage:"Go to monitor"});function Ni({testRunId:e,serviceError:t,errors:a,locations:i}){var r;const[s,o]=Object(n.useState)([]),[l,c]=Object(n.useState)(null);Object(n.useEffect)((()=>{o([]),c(null)}),[e]),Object(n.useEffect)((()=>{(s.length||a.length)&&o(a)}),[a]),Object(n.useEffect)((()=>{(null==l?void 0:l.message)!==(null==t?void 0:t.message)&&c(t)}),[t]);const u=Object(n.useMemo)((()=>i.reduce(((e,t)=>({...e,[t.id]:t})),{})),[i]),d=i.length-(null!=s?s:[]).filter((({locationId:e})=>!!e)).length,m=Object(n.useMemo)((()=>(null!=s?s:[]).map((({error:e})=>null==e?void 0:e.reason)).filter((e=>!!e)).filter(((e,t,a)=>a.indexOf(e)===t))),[s]),p=!!l||(null==s?void 0:s.length)&&(null==s?void 0:s.length)===i.length,f=Object(n.useMemo)((()=>{var e;return p?1===m.length?[{name:"Error",message:null!==(e=m[0])&&void 0!==e?e:Hi,title:Bi}]:[{name:"Error",message:Hi,title:Bi}]:(null==s?void 0:s.length)>0?s.map((({locationId:e,error:t})=>({location:u[e],error:t}))).filter((e=>!!e.location)).map((({location:e,error:t})=>{var a;return{name:"Error",message:zi(e.label,null!==(a=null==t?void 0:t.reason)&&void 0!==a?a:""),title:Bi}})):[]}),[u,s,m,p]);return{expectPings:d,hasBlockingError:p,blockingErrorTitle:p?Bi:null,blockingErrorMessage:p?`${null===(r=f[0])||void 0===r?void 0:r.message}`:null,errorMessages:f}}const Bi=o.i18n.translate("xpack.synthetics.testRun.runErrorLabel",{defaultMessage:"Can't run the test now"}),zi=(e,t)=>o.i18n.translate("xpack.synthetics.testRun.runErrorLocation.reason",{defaultMessage:"Failed to run test on location {locationName}. {reason}",values:{locationName:e,reason:t}}),Hi=o.i18n.translate("xpack.synthetics.testRun.pushError",{defaultMessage:"This test cannot be executed at this time. Try again later."});var Gi=a(66);function Vi(e){const[t,a]=Object(n.useState)(Date.now()),[i]=Object(n.useState)((()=>setInterval((()=>{a(Date.now())}),null!=e?e:5e3))),r=Object(n.useCallback)((()=>{clearInterval(i)}),[i]);return Object(n.useEffect)((()=>()=>{r()}),[r]),{refreshTimer:i,lastRefresh:t,clearTicks:r}}const $i=({stepsList:e,step:t,loading:a})=>{var r;let s=[{id:"code",name:Ui},{id:"console",name:Wi}];const o="failed"===(null==t||null===(r=t.synthetics.step)||void 0===r?void 0:r.status);o&&(s=[{id:"stackTrace",name:qi},...s]);const[l,c]=Object(n.useState)("code");Object(n.useEffect)((()=>{c(o?"stackTrace":"code")}),[o]);const u=Object(n.useCallback)((t=>null==e?void 0:e.filter((e=>{var a,n,i;return"journey/browserconsole"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)&&(null===(n=e.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.index)===t})).map((e=>{var t,a;return null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.text}))),[e]);return a||0!==(null==e?void 0:e.length)?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiTabs,{size:"s"},s.map(((e,t)=>i.a.createElement(w.EuiTab,{key:t,onClick:()=>{return t=e.id,void c(t);var t},isSelected:e.id===l},e.name)))),(()=>{var e,n,r,s,o,c,d;if(a)return i.a.createElement(w.EuiSkeletonText,null);switch(l){case"code":return i.a.createElement(w.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null==t||null===(e=t.synthetics)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.source);case"console":return i.a.createElement(w.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null===(r=u(1))||void 0===r?void 0:r.join("\n"));case"stackTrace":return i.a.createElement(w.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"html"},null==t||null===(s=t.synthetics)||void 0===s||null===(o=s.error)||void 0===o?void 0:o.stack);default:return i.a.createElement(w.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null==t||null===(c=t.synthetics)||void 0===c||null===(d=c.payload)||void 0===d?void 0:d.source)}})()):null},Ui=o.i18n.translate("xpack.synthetics.testDetails.codeExecuted",{defaultMessage:"Code executed"}),qi=o.i18n.translate("xpack.synthetics.testDetails.stackTrace",{defaultMessage:"Stacktrace"}),Wi=o.i18n.translate("xpack.synthetics.testDetails.console",{defaultMessage:"Console"}),Ki=(e,t,a)=>{var i,r;const{stepIndex:s,checkGroupId:o}=Object(p.useParams)(),l=null!=a?a:s,c=null!=e?e:o,d=Object(u.useSelector)(Object($.D)(c)),m=Object(u.useSelector)(Object($.E)(c)),f=Object(u.useDispatch)();Object(n.useEffect)((()=>{c&&f($.g.get({checkGroup:c}))}),[c,f,t]);const g=(null!==(i=null==d?void 0:d.steps)&&void 0!==i?i:[]).filter(Qs),h=null==d?void 0:d.steps.find((e=>{var t,a;return"failed"===(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.status)})),b=g.map((e=>{var t,a,n;return null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name)&&void 0!==t?t:""})),E=l?g.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===Number(l)})):void 0;return{data:d,loading:null!=m&&m,stepEnds:g,stepLabels:b,currentStep:E,failedStep:h,isFailedStep:(null==h||null===(r=h.synthetics)||void 0===r?void 0:r.step)&&h.synthetics.step.index===Number(l),isFailed:!1}};let Yi,Xi;!function(e){e.Blocked="blocked",e.Dns="dns",e.Connect="connect",e.Ssl="ssl",e.Send="send",e.Wait="wait",e.Receive="receive"}(Yi||(Yi={})),function(e){e.Status="status",e.ResourceSize="resourceSize",e.TransferSize="transferSize",e.CertificateIssuer="certificateIssuer",e.CertificateIssueDate="certificateIssueDate",e.CertificateExpiryDate="certificateExpiryDate",e.CertificateSubject="certificateSubject",e.IP="ip",e.MimeType="mimeType",e.RequestStart="requestStart"}(Xi||(Xi={}));const Ji={[Yi.Blocked]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.blocked",{defaultMessage:"Queued / Blocked"}),[Yi.Dns]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.dns",{defaultMessage:"DNS"}),[Yi.Connect]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.connect",{defaultMessage:"Connecting"}),[Yi.Ssl]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.ssl",{defaultMessage:"TLS"}),[Yi.Send]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.send",{defaultMessage:"Sending request"}),[Yi.Wait]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.wait",{defaultMessage:"Waiting (TTFB)"}),[Yi.Receive]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.receive",{defaultMessage:"Content downloading"})},Qi={[Xi.Status]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.status",{defaultMessage:"Status"}),[Xi.MimeType]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.contentType",{defaultMessage:"Content type"}),[Xi.RequestStart]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.requestStart",{defaultMessage:"Request start"}),[Xi.ResourceSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.resourceSize",{defaultMessage:"Resource size"}),[Xi.TransferSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.transferSize",{defaultMessage:"Transfer size"}),[Xi.CertificateIssuer]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssuer",{defaultMessage:"Issuer"}),[Xi.CertificateIssueDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssueDate",{defaultMessage:"Valid from"}),[Xi.CertificateExpiryDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateExpiryDate",{defaultMessage:"Valid until"}),[Xi.CertificateSubject]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateSubject",{defaultMessage:"Common name"}),[Xi.IP]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.ip",{defaultMessage:"IP"})},Zi=[Yi.Blocked,Yi.Dns,Yi.Connect,Yi.Ssl,Yi.Send,Yi.Wait,Yi.Receive];let er;Xi.MimeType,Yi.Dns,Yi.Connect,Yi.Ssl,Yi.Wait,Yi.Receive,function(e){e.Html="html",e.Script="script",e.Stylesheet="stylesheet",e.Media="media",e.Image="image",e.Font="font",e.XHR="xhr",e.Other="other"}(er||(er={}));const tr={[er.Html]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.html",{defaultMessage:"HTML"}),[er.Script]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.script",{defaultMessage:"JS"}),[er.Stylesheet]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.stylesheet",{defaultMessage:"CSS"}),[er.Image]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.image",{defaultMessage:"Image"}),[er.Media]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.media",{defaultMessage:"Media"}),[er.Font]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.font",{defaultMessage:"Font"}),[er.XHR]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.xhr",{defaultMessage:"XHR"}),[er.Other]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.other",{defaultMessage:"Other"})},ar={"text/html":er.Html,"application/javascript":er.Script,"application/x-javascript":er.Script,"text/javascript":er.Script,"text/css":er.Stylesheet,"image/apng":er.Image,"image/bmp":er.Image,"image/gif":er.Image,"image/x-icon":er.Image,"image/jpeg":er.Image,"image/png":er.Image,"image/svg+xml":er.Image,"image/tiff":er.Image,"image/webp":er.Image,"audio/wave":er.Media,"audio/wav":er.Media,"audio/x-wav":er.Media,"audio/x-pn-wav":er.Media,"audio/webm":er.Media,"video/webm":er.Media,"video/mp4":er.Media,"audio/ogg":er.Media,"video/ogg":er.Media,"application/ogg":er.Media,"font/otf":er.Font,"font/ttf":er.Font,"font/woff":er.Font,"font/woff2":er.Font,"application/x-font-opentype":er.Font,"application/font-woff":er.Font,"application/font-woff2":er.Font,"application/vnd.ms-fontobject":er.Font,"application/font-sfnt":er.Font,"application/json":er.XHR},nr=[{label:tr[er.Html],mimeType:er.Html},{label:tr[er.Stylesheet],mimeType:er.Stylesheet},{label:tr[er.Font],mimeType:er.Font},{label:tr[er.Script],mimeType:er.Script},{label:tr[er.Image],mimeType:er.Image},{label:tr[er.Media],mimeType:er.Media},{label:tr[er.XHR],mimeType:er.XHR},{label:tr[er.Other],mimeType:er.Other}],ir=({networkEvents:e})=>e,rr=()=>{var e,t;const{checkGroupId:a,stepIndex:n}=Object(p.useParams)(),{mimeData:i}=(()=>{var e,t,a,n,i,r,s;const{monitorId:o,stepIndex:l,checkGroupId:u}=Object(p.useParams)(),{data:d}=Ki(),m=null==d||null===(e=d.details)||void 0===e?void 0:e.timestamp,{data:f}=Fe({index:c.B,body:{track_total_hits:!1,sort:[{"@timestamp":{order:"desc"}}],size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"long"}},query:{bool:{filter:[{range:{"@timestamp":{lte:null!=m?m:"now",gte:V()(m).subtract(1,"day").toISOString()}}},{term:{config_id:o}},{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":l}},{range:{"@timestamp":{gte:"now-24h/h",lte:"now"}}}],must_not:[{term:{"monitor.check_group":{value:u}}}]}},aggs:{testRuns:{cardinality:{field:"monitor.check_group"}},objectCounts:{terms:{field:"http.response.mime_type",size:500},aggs:{weight:{sum:{field:"synthetics.payload.transfer_size"}}}}}}},[l,o,u],{name:`previousObjectMetrics/${o}/${u}/${l}/`,isRequestReady:!!m}),g={},h=null!==(t=null==f||null===(a=f.aggregations)||void 0===a||null===(n=a.testRuns)||void 0===n?void 0:n.value)&&void 0!==t?t:0;return null==f||null===(i=f.aggregations)||void 0===i||null===(r=i.objectCounts)||void 0===r||null===(s=r.buckets)||void 0===s||s.forEach((e=>{g[e.key]={weight:e.weight.value?e.weight.value/h:0,count:e.doc_count/h}})),{mimeData:g}})(),r=null===(e=Object(u.useSelector)(ir)[null!=a?a:""])||void 0===e?void 0:e[Number(n)],s={},o={};null==r||r.events.forEach((e=>{if(e.mimeType){var t;const a=null!==(t=ar[e.mimeType])&&void 0!==t?t:er.Other;s[a]?s[a].value++:s[a]={value:1,prevValue:0},o[a]?o[a].value+=e.transferSize||0:o[a]={value:e.transferSize||0,prevValue:0}}}));const l=Object.values(s).reduce(((e,t)=>e+t.value),0),d=Object.values(o).reduce(((e,t)=>e+t.value),0);return Object.keys(i).forEach((e=>{var t;const a=null!==(t=ar[e])&&void 0!==t?t:er.Other;s[a]&&(s[a].prevValue+=i[e].count),o[a]&&(o[a].prevValue+=i[e].weight)})),{loading:null===(t=null==r?void 0:r.loading)||void 0===t||t,totalObjects:l,totalObjectsWeight:lr(d),items:nr.map((({label:e,mimeType:t})=>{var a,n,i,r,c,u,m,p,f,g,h,b,E,y;return{label:e,mimeType:t,total:l,count:null!==(a=null==s||null===(n=s[t])||void 0===n?void 0:n.value)&&void 0!==a?a:0,percent:(null!==(i=null==s||null===(r=s[t])||void 0===r?void 0:r.value)&&void 0!==i?i:0)/l*100,weight:lr(null!==(c=null===(u=o[t])||void 0===u?void 0:u.value)&&void 0!==c?c:0),weightPercent:(null!==(m=null===(p=o[t])||void 0===p?void 0:p.value)&&void 0!==m?m:0)/d*100,countDelta:or(null!==(f=null==s||null===(g=s[t])||void 0===g?void 0:g.value)&&void 0!==f?f:0,null!==(h=null==s||null===(b=s[t])||void 0===b?void 0:b.prevValue)&&void 0!==h?h:0),weightDelta:sr(null==o||null===(E=o[t])||void 0===E?void 0:E.value,null==o||null===(y=o[t])||void 0===y?void 0:y.prevValue)}}))}},sr=(e,t)=>0!==t&&t?((e-t)/t*100).toFixed(0):0,or=(e,t)=>0===t?0:((e-t)/t*100).toFixed(0),lr=(e,t=0)=>{if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},cr=({description:e,helpText:t,loading:a,current:n,previous:r,previousFormatted:s,currentFormatted:l,asStat:c=!1})=>{if(a)return i.a.createElement(w.EuiSkeletonText,{lines:1});const u=((e,t)=>0===t||null==t?0:Number(((e-t)/t*100).toFixed(0)))(n,r),d=()=>Math.abs(u)<5?"default":u>5?"danger":"success",m=Math.abs(u)>0,p=null===r?i.a.createElement(w.EuiIcon,{type:"minus",size:c?"l":"m",color:"subdued"}):i.a.createElement(w.EuiToolTip,{content:o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip",{defaultMessage:"Value is {deltaLabel} compared to previous steps in last 24 hours.",values:{deltaLabel:0===Math.abs(u)?o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.noChange",{defaultMessage:"same"}):u>0?o.i18n.translate("xpack.synthetics.stepDetails.palette.increased",{defaultMessage:"{delta}% higher",values:{delta:u}}):o.i18n.translate("xpack.synthetics.stepDetails.palette.decreased",{defaultMessage:"{delta}% lower",values:{delta:Math.abs(u)}})}}),title:o.i18n.translate("xpack.synthetics.stepDetails.palette.previous",{defaultMessage:"Median(24h): {previous}",values:{previous:s}})},m?i.a.createElement(w.EuiIcon,{type:u>0?"sortUp":"sortDown",size:c?"l":"m",color:d()}):i.a.createElement(w.EuiIcon,{type:"minus",size:c?"l":"m",color:"subdued"}));return c?i.a.createElement(w.EuiStat,{titleSize:"s",titleColor:d(),description:i.a.createElement("span",null,e," ",t&&i.a.createElement(w.EuiIconTip,{content:t,position:"right"})),title:i.a.createElement(i.a.Fragment,null,l,i.a.createElement("span",{style:{marginLeft:5}},p)),reverse:!0}):i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{color:d()},i.a.createElement("strong",null,l))),i.a.createElement(w.EuiFlexItem,{grow:!1},p))},ur=o.i18n.translate("xpack.synthetics.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),dr=o.i18n.translate("xpack.synthetics.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."}),mr=o.i18n.translate("xpack.synthetics.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focuses on the initial rendering and measures the time from when the page starts loading to when any part of the pages content is displayed on the screen."}),pr=o.i18n.translate("xpack.synthetics.coreVitals.dclTooltip",{defaultMessage:"Triggered when the browser completes parsing the document. Helpful when there are multiple listeners, or logic is executed: domContentLoadedEventEnd - domContentLoadedEventStart."}),fr=o.i18n.translate("xpack.synthetics.fieldLabels.transferSize",{defaultMessage:"The transferSize property represents the size of the fetched resource. The size includes the response header fields plus the response payload body"}),gr=o.i18n.translate("xpack.synthetics.fieldLabels.lcp",{defaultMessage:"Largest contentful paint (LCP)"}),hr=o.i18n.translate("xpack.synthetics.fieldLabels.fcp",{defaultMessage:"First contentful paint (FCP)"}),br=o.i18n.translate("xpack.synthetics.fieldLabels.cls",{defaultMessage:"Cumulative layout shift (CLS)"}),Er=o.i18n.translate("xpack.synthetics.fieldLabels.dcl",{defaultMessage:"DOMContentLoaded event (DCL)"}),yr=[{title:hr,description:mr},{title:gr,description:ur},{title:br,description:dr},{title:Er,description:pr}],vr=()=>{const[e,t]=Object(n.useState)(!1);return i.a.createElement(w.EuiPopover,{button:i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsDefinitionsPopoverButton",iconType:"list",iconSide:"right",onClick:()=>t((e=>!e))},xr),isOpen:e,closePopover:()=>t(!1),anchorPosition:"rightCenter"},i.a.createElement(w.EuiPopoverTitle,null,xr),i.a.createElement("div",{style:{width:"350px"}},i.a.createElement(w.EuiDescriptionList,{listItems:yr})))},xr=o.i18n.translate("xpack.synthetics.stepDetailsRoute.definition",{defaultMessage:"Definitions"});var Sr=a(36);const kr=(e,t)=>[{term:{"monitor.check_group":e}},{term:{"synthetics.step.index":t}}],Mr=(e,t)=>{var a,n,i,r,s,o,l;const u=Object(p.useParams)(),d=null!=e?e:u.checkGroupId,m=null!=t?t:Number(u.stepIndex),f=Sr.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{type:"double"}})),{}),{data:g}=Fe({index:c.B,body:{size:0,runtime_mappings:f,query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},...kr(d,m)]}},aggs:{dns:{sum:{field:Sr.SYNTHETICS_DNS_TIMINGS}},tls:{sum:{field:Sr.SYNTHETICS_SSL_TIMINGS}},blocked:{sum:{field:Sr.SYNTHETICS_BLOCKED_TIMINGS}},connect:{sum:{field:Sr.SYNTHETICS_CONNECT_TIMINGS}},receive:{sum:{field:Sr.SYNTHETICS_RECEIVE_TIMINGS}},send:{sum:{field:Sr.SYNTHETICS_SEND_TIMINGS}},wait:{sum:{field:Sr.SYNTHETICS_WAIT_TIMINGS}},total:{sum:{field:Sr.SYNTHETICS_TOTAL_TIMINGS}}}}},[],{name:`stepNetworkTimingsMetrics/${d}/${m}`}),h=null==g?void 0:g.aggregations,b={dns:null!==(a=null==h?void 0:h.dns.value)&&void 0!==a?a:0,connect:null!==(n=null==h?void 0:h.connect.value)&&void 0!==n?n:0,receive:null!==(i=null==h?void 0:h.receive.value)&&void 0!==i?i:0,send:null!==(r=null==h?void 0:h.send.value)&&void 0!==r?r:0,wait:null!==(s=null==h?void 0:h.wait.value)&&void 0!==s?s:0,blocked:null!==(o=null==h?void 0:h.blocked.value)&&void 0!==o?o:0,tls:null!==(l=null==h?void 0:h.tls.value)&&void 0!==l?l:0};return{timings:b,timingsWithLabels:wr(b)}},wr=e=>[{value:e.blocked,label:jr},{value:e.dns,label:Tr},{value:e.connect,label:Or},{value:e.tls,label:Ir},{value:e.wait,label:Cr},{value:e.receive,label:Fr},{value:e.send,label:_r}],Or=o.i18n.translate("xpack.synthetics.connect.label",{defaultMessage:"Connect"}),Tr=o.i18n.translate("xpack.synthetics.dns",{defaultMessage:"DNS"}),Cr=o.i18n.translate("xpack.synthetics.wait",{defaultMessage:"Wait"}),Ir=o.i18n.translate("xpack.synthetics.tls",{defaultMessage:"TLS"}),jr=o.i18n.translate("xpack.synthetics.blocked",{defaultMessage:"Blocked"}),_r=o.i18n.translate("xpack.synthetics.send",{defaultMessage:"Send"}),Fr=o.i18n.translate("xpack.synthetics.receive",{defaultMessage:"Receive"}),Pr=(e,t,a)=>{const n=Object(p.useParams)(),i=n.monitorId,r=null!=a?a:n.checkGroupId,s=null!=e?e:Number(n.stepIndex),{currentStep:o}=Ki(),l=null!=t?t:null==o?void 0:o["@timestamp"],u=Sr.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{type:"double"}})),{}),{data:d,loading:m}=Fe({index:c.B,body:{size:0,runtime_mappings:u,query:{bool:{filter:[{range:{"@timestamp":{lte:V()(l).toISOString(),gte:V()(l).subtract(24,"hours").toISOString()}}},{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":s}},{term:{config_id:i}}],must_not:[{term:{"monitor.check_group":r}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{dns:{sum:{field:Sr.SYNTHETICS_DNS_TIMINGS}},ssl:{sum:{field:Sr.SYNTHETICS_SSL_TIMINGS}},blocked:{sum:{field:Sr.SYNTHETICS_BLOCKED_TIMINGS}},connect:{sum:{field:Sr.SYNTHETICS_CONNECT_TIMINGS}},receive:{sum:{field:Sr.SYNTHETICS_RECEIVE_TIMINGS}},send:{sum:{field:Sr.SYNTHETICS_SEND_TIMINGS}},wait:{sum:{field:Sr.SYNTHETICS_WAIT_TIMINGS}},total:{sum:{field:Sr.SYNTHETICS_TOTAL_TIMINGS}}}}}}},[],{name:`stepNetworkPreviousTimings/${i}/${r}/${s}`,isRequestReady:Boolean(l)}),f=null==d?void 0:d.aggregations,g=[],h=[],b=[],E=[],y=[],v=[],x=[];null==f||f.testRuns.buckets.forEach((e=>{var t,a,n,i,r,s,o;g.push(null!==(t=e.dns.value)&&void 0!==t?t:0),h.push(null!==(a=e.connect.value)&&void 0!==a?a:0),b.push(null!==(n=e.receive.value)&&void 0!==n?n:0),E.push(null!==(i=e.send.value)&&void 0!==i?i:0),y.push(null!==(r=e.wait.value)&&void 0!==r?r:0),v.push(null!==(s=e.blocked.value)&&void 0!==s?s:0),x.push(null!==(o=e.ssl.value)&&void 0!==o?o:0)}));const S={dns:Lr(g),connect:Lr(h),receive:Lr(b),send:Lr(E),wait:Lr(y),blocked:Lr(v),ssl:Lr(x)};return{loading:m&&!d,timings:S,timingsWithLabels:wr(S)}},Lr=e=>{if(!e.length)return 0;const t=[...e].sort(((e,t)=>e-t)),a=Math.floor(t.length/2);return t.length%2==0?(t[a-1]+t[a])/2:t[a]},Rr=(o.i18n.translate("xpack.synthetics.contentSize",{defaultMessage:"Content Size"}),e=>{var t,a,n,i;const r=Object(p.useParams)(),s=r.monitorId,o=null!==(t=null==e?void 0:e.monitor.check_group)&&void 0!==t?t:r.checkGroupId,l=null!==(a=null==e||null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==a?a:r.stepIndex,{data:u,loading:d}=Fe({index:c.B,body:{size:0,query:{bool:{filter:[{terms:{"synthetics.type":["step/metrics","step/end"]}},{term:{"synthetics.step.index":Number(l)}},{term:{config_id:s}},{range:{"@timestamp":{lte:"now",gte:"now-24h/h"}}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{fcp:{sum:{field:"browser.experience.fcp.us"}},lcp:{sum:{field:"browser.experience.lcp.us"}},cls:{sum:{field:"browser.experience.cls"}},dcl:{sum:{field:"browser.experience.dcl.us"}},stepDuration:{sum:{field:"synthetics.step.duration.us"}}}}}}},[],{name:`previousStepMetrics/${s}/${o}/${l}`}),{data:m}=Fe({index:c.B,body:{size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"double"},"synthetics.payload.resource_size":{type:"double"}},query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":Number(l)}},{term:{config_id:s}},{range:{"@timestamp":{lte:"now",gte:"now-24h/h"}}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{transferSize:{sum:{field:"synthetics.payload.transfer_size"}}}}}}},[],{name:`previousStepMetricsFromNetworkInfos/${s}/${o}/${l}`}),f=null==u?void 0:u.aggregations,g=[];null==m||null===(i=m.aggregations)||void 0===i||i.testRuns.buckets.forEach((e=>{var t;g.push(null!==(t=e.transferSize.value)&&void 0!==t?t:0)}));const h=Lr(g),b=[],E=[],y=[],v=[],x=[];null==f||f.testRuns.buckets.forEach((e=>{var t,a,n,i,r;b.push(null!==(t=e.lcp.value)&&void 0!==t?t:0),E.push(null!==(a=e.fcp.value)&&void 0!==a?a:0),y.push(null!==(n=e.cls.value)&&void 0!==n?n:0),v.push(null!==(i=e.dcl.value)&&void 0!==i?i:0),x.push(null!==(r=e.stepDuration.value)&&void 0!==r?r:0)}));const S=Lr(b),k=Lr(E),M=Lr(y),w=Lr(v),O=Lr(x);return{loading:d&&!f,metrics:[{label:$r,value:O,formatted:Dr(O/1e3)},{value:S,label:zr,formatted:Dr(S/1e3)},{value:k,label:Hr,formatted:Dr(k/1e3)},{value:M,label:Gr,formatted:M},{value:w,label:Vr,formatted:Dr(w/1e3)},{value:h,label:Ur,formatted:lr(h)}]}}),Dr=e=>e<0?"- ms":e<1e3?`${e.toFixed(0)} ms`:`${(e/1e3).toFixed(1)} s`,Ar=()=>{const{metrics:e}=Br(),{metrics:t,loading:a}=Rr();return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Nr))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(vr,null))),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiFlexGrid,{gutterSize:"l",columns:3},e.map((({label:e,value:n,helpText:r,formatted:s})=>{var o;const l=t.find((t=>t.label===e));if(e)return i.a.createElement(w.EuiFlexItem,{key:e},i.a.createElement(cr,{asStat:!0,loading:a,description:e,current:null!=n?n:0,previous:null!==(o=null==l?void 0:l.value)&&void 0!==o?o:0,helpText:r,currentFormatted:s,previousFormatted:null==l?void 0:l.formatted}))}))))},Nr=o.i18n.translate("xpack.synthetics.stepDetailsRoute.metrics",{defaultMessage:"Metrics"}),Br=e=>{var t,a,n,i,r,s,o,l,u,d,m;const f=Object(p.useParams)(),g=null!==(t=null==e?void 0:e.monitor.check_group)&&void 0!==t?t:f.checkGroupId,h=null!==(a=null==e||null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==a?a:f.stepIndex,{data:b}=Fe({index:c.B,body:{size:0,query:{bool:{filter:[{terms:{"synthetics.type":["step/metrics","step/end"]}},{term:{"monitor.check_group":g}},{term:{"synthetics.step.index":Number(h)}}]}},aggs:{fcp:{sum:{field:"browser.experience.fcp.us"}},lcp:{sum:{field:"browser.experience.lcp.us"}},cls:{sum:{field:"browser.experience.cls"}},dcl:{sum:{field:"browser.experience.dcl.us"}},totalDuration:{sum:{field:"synthetics.step.duration.us"}}}}},[],{name:`stepMetrics/${g}/${h}`}),{data:E}=Fe({index:c.B,body:{size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"double"}},query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},{term:{"monitor.check_group":g}},{term:{"synthetics.step.index":Number(h)}}]}},aggs:{transferSize:{sum:{field:"synthetics.payload.transfer_size"}}}}},[],{name:`stepMetricsFromNetworkInfos/${g}/${h}`}),y=null==b?void 0:b.aggregations,v=null!==(i=null==E||null===(r=E.aggregations)||void 0===r||null===(s=r.transferSize)||void 0===s?void 0:s.value)&&void 0!==i?i:0;return{metrics:[{label:$r,value:null==y?void 0:y.totalDuration.value,formatted:Dr((null!==(o=null==y?void 0:y.totalDuration.value)&&void 0!==o?o:0)/1e3)},{value:null==y?void 0:y.lcp.value,label:zr,helpText:ur,formatted:Dr((null!==(l=null==y?void 0:y.lcp.value)&&void 0!==l?l:0)/1e3)},{value:null==y?void 0:y.fcp.value,label:Hr,helpText:mr,formatted:Dr((null!==(u=null==y?void 0:y.fcp.value)&&void 0!==u?u:0)/1e3)},{value:null==y?void 0:y.cls.value,label:Gr,helpText:dr,formatted:null!==(d=null==y?void 0:y.cls.value)&&void 0!==d?d:0},{value:null==y?void 0:y.dcl.value,label:Vr,helpText:pr,formatted:Dr((null!==(m=null==y?void 0:y.dcl.value)&&void 0!==m?m:0)/1e3)},{value:v,label:Ur,helpText:fr,formatted:lr(null!=v?v:0)}]}},zr=o.i18n.translate("xpack.synthetics.lcp.label",{defaultMessage:"LCP"}),Hr=o.i18n.translate("xpack.synthetics.fcp.label",{defaultMessage:"FCP"}),Gr=o.i18n.translate("xpack.synthetics.cls.label",{defaultMessage:"CLS"}),Vr=o.i18n.translate("xpack.synthetics.dcl.label",{defaultMessage:"DCL"}),$r=o.i18n.translate("xpack.synthetics.totalDuration.metrics",{defaultMessage:"Step duration"}),Ur=o.i18n.translate("xpack.synthetics.totalDuration.transferSize",{defaultMessage:"Transfer size"}),qr=({timestamp:e,checkGroup:t,stepStatus:a,hasIntersected:i,imgPath:r,testNowMode:s,retryFetchOnRevisit:o})=>{var l,c;const[d,m]=Object(n.useState)({}),p="skipped"===a,f=function(e,t,a){var i,r;const[s,o]=Object(n.useState)(),l=Object(n.useMemo)((()=>{var t,n,i;return e?null===(t=Object.entries(a).find((([t,a])=>{var n;return t.includes(e)&&(null==a||null===(n=a.data)||void 0===n?void 0:n.maxSteps)})))||void 0===t||null===(n=t[1])||void 0===n||null===(i=n.data)||void 0===i?void 0:i.maxSteps:void 0}),[e,a]),c=Object(He.H)(null===(i=a[t])||void 0===i?void 0:i.data)?null===(r=a[t])||void 0===r?void 0:r.data:void 0,{isComposing:d,imgSrc:m}=(e=>{var t,a,i,r;const s=Object(u.useDispatch)(),{blocks:o}=Object(u.useSelector)($.F),[l,c]=Object(n.useMemo)((()=>[Ge(e,o),Ve(e,o)]),[e,o]);Object(n.useEffect)((()=>{e&&s(Object($.d)(e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e))))}),[s,e]);const d=null!==(t=null!==(a=null==e?void 0:e.stepName)&&void 0!==a?a:null==e||null===(i=e.ref.screenshotRef.screenshot_ref.blocks[0])||void 0===i?void 0:i.hash)&&void 0!==t?t:"",m=`${null==e?void 0:e.ref.screenshotRef.monitor.check_group}/${d}`,[p,f]=Object(n.useState)({}),{isComposing:g,imgSrc:h}=null!==(r=p[m])&&void 0!==r?r:{isComposing:!1,imgSrc:void 0};return Object(n.useEffect)((()=>{if(e&&!g&&!h&&c){f((e=>({...e,[m]:{isComposing:!0,imgSrc:void 0}})));const t=document.createElement("canvas");(async function(e,t,a){const{ref:{screenshotRef:n}}=e,i=t.getContext("2d",{alpha:!1});t.width=n.screenshot_ref.width,t.height=n.screenshot_ref.height;const r=[];for(const{hash:e,top:t,left:s,width:o,height:l}of n.screenshot_ref.blocks)r.push(new Promise(((n,r)=>{const c=new Image,u=a[e];u&&Object(He.G)(u)?(c.onload=()=>{null==i||i.drawImage(c,s,t,o,l),n()},c.src=`data:image/jpg;base64,${u.synthetics.blob}`):r(Error(`Error processing image. Expected image data with hash ${e} is missing`))})));return Promise.all(r)})(e,t,o).then((()=>{var e;const a=t.toDataURL("image/jpg",1);f((e=>({...e,[m]:{isComposing:!1,imgSrc:a}}))),null===(e=t.parentElement)||void 0===e||e.removeChild(t)}))}}),[o,e,p,h,g,m,l,c]),{isComposing:g||l,imgSrc:h}})(c);return Object(n.useEffect)((()=>{var e,n,i,r,s;const u=c?m:null===(e=a[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.src,p=null===(i=a[t])||void 0===i?void 0:i.stepName,f=null!==(r=null===(s=a[t])||void 0===s?void 0:s.loading)&&void 0!==r&&r||d;o((e=>Wr({prevState:e,imgPath:t,maxSteps:l,url:u,stepName:p,loading:f})))}),[t,l,a,c,d,m]),s}(t,r,d),g=null!==(l=null==f||null===(c=f[r])||void 0===c?void 0:c.url)&&void 0!==l&&l,h=Object(n.useMemo)((()=>{var e,a;const n=o||!(null!==(e=null===(a=d[r])||void 0===a?void 0:a.attempts)&&void 0!==e&&e);return!p&&i&&!g&&n&&t}),[t,i,r,d,g,o,p]);return Object(n.useEffect)((()=>{!async function(){if(h){m((e=>Wr({prevState:e,imgPath:r,increment:!0,loading:!0})));const e=s?void 0:{shouldBackoff:!1};try{Object($.o)(r,e).then((e=>m((t=>Wr({prevState:t,imgPath:r,increment:!1,data:e,loading:!1})))))}catch(e){m((e=>Wr({prevState:e,imgPath:r,increment:!1,loading:!1})))}}}()}),[r,h,s]),f};function Wr({prevState:e,imgPath:t,increment:a,url:n,stepName:i,maxSteps:r,data:s,loading:o}){var l,c,u,d,m,p,f,g,h,b,E,y;const v=(null!==(l=null==e||null===(c=e[t])||void 0===c?void 0:c.attempts)&&void 0!==l?l:0)+(a?1:0),x=null!==(u=null!=s?s:null==e||null===(d=e[t])||void 0===d?void 0:d.data)&&void 0!==u?u:null,S=null!==(m=null!=o?o:null==e||null===(p=e[t])||void 0===p?void 0:p.loading)&&void 0!==m&&m,k=null!=n?n:null==e||null===(f=e[t])||void 0===f?void 0:f.url,M=null!=r?r:null==e||null===(g=e[t])||void 0===g||null===(h=g.data)||void 0===h?void 0:h.maxSteps,w=null!==(b=null!==(E=null==s?void 0:s.stepName)&&void 0!==E?E:i)&&void 0!==b?b:null==e||null===(y=e[t])||void 0===y?void 0:y.stepName;return{...e,[t]:{attempts:v,data:x,url:k,stepName:w,maxSteps:M,loading:S}}}const Kr=[96,64],Yr=[180,112],Xr=[640,360];function Jr(e,t){const a="86vw",n="70vh",i=null!=t&&t[0]?`${t[0]}px`:a,r=null!=t&&t[1]?`${t[1]}px`:n;return{width:`min(${"full"===e?i:`${e[0]}px`}, ${a})`,height:`min(${"full"===e?r:`${e[1]}px`}, ${n})`}}const Qr={padding:0,margin:"auto",objectFit:"contain",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},Zr=({isLoading:e=!1,animateLoading:t,size:a=Kr,unavailableMessage:n,borderRadius:r})=>{const{euiTheme:s}=Object(w.useEuiTheme)(),{width:o,height:l}=Jr(a),c=null!=n?n:ts;return i.a.createElement("div",{"data-test-subj":"stepScreenshotPlaceholder",role:"img","aria-label":e?es:c,title:e?es:c,style:{...Qr,width:o,height:l,background:Object(w.useEuiBackgroundColor)("subdued"),border:s.border.thin,...r?{borderRadius:r}:{}},onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation()}},e&&t?i.a.createElement(w.EuiSkeletonRectangle,{"data-test-subj":"stepScreenshotPlaceholderLoading",isLoading:e,height:l,width:o},i.a.createElement("span",null)):e?i.a.createElement("div",{"data-test-subj":"stepScreenshotPlaceholderLoading",style:{width:"100%"}}):i.a.createElement("div",{style:{border:"none",display:"flex",flexDirection:"column",alignItems:"center"}},i.a.createElement(w.EuiIcon,{"data-test-subj":"stepScreenshotNotAvailable",type:"eyeClosed",color:s.colors.disabledText}),n?i.a.createElement(w.EuiText,{color:s.colors.disabledText},n):null))},es=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.ariaLabel",{defaultMessage:"Step screenshot is being loaded."}),ts=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.notAvailable",{defaultMessage:"Step screenshot is not available."}),as=[512,512],ns=({label:e,imgSrc:t,isLoading:a,animateLoading:r=!0,unavailableMessage:s,borderColor:o,borderRadius:l,hasBorder:c=!0,size:u=[100,64],onMouseEnter:d,onMouseLeave:m,onClick:p})=>{const{euiTheme:f}=Object(w.useEuiTheme)(),[g,h]=Object(n.useState)(as),{width:b,height:E}=Jr(u,g);return t?i.a.createElement(is,{src:t,alt:e,"data-test-subj":"stepScreenshotThumbnail",onLoad:e=>{var t,a,n,i;const r=[null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.naturalWidth)&&void 0!==t?t:g[0],null!==(n=null==e||null===(i=e.target)||void 0===i?void 0:i.naturalHeight)&&void 0!==n?n:g[1]];h(r)},onMouseEnter:d,onMouseLeave:m,onClick:p,onKeyDown:void 0,$_css:b,$_css2:E,$_css3:f.border.thin,$_css4:o?{borderColor:o}:{},$_css5:l?{borderRadius:l}:{},$_css6:c?{}:{borderRadius:l},$_css7:o?{borderColor:o}:{}}):i.a.createElement(Zr,{isLoading:a,size:"full"===u?g:u,unavailableMessage:s,borderRadius:l,animateLoading:r})};var is=Ut()("img").withConfig({displayName:"_StyledImg",componentId:"sc-rro1hd-0"})((e=>({outline:0,objectFit:"contain",width:e.$_css,height:e.$_css2,cursor:"pointer",border:e.$_css3,...e.$_css4,...e.$_css5,...e.$_css6,...e.$_css7})));const rs=({timestamp:e,checkGroup:t,initialImgSrc:a,initialStepNumber:r,isOpen:s,onClose:o})=>{var l;const{euiTheme:c}=Object(w.useEuiTheme)(),u=Object(w.useIsWithinMaxBreakpoint)("m"),[d,m]=Object(n.useState)(r),{basePath:p}=Object(n.useContext)(Ze),f=ls({basePath:p,checkGroup:t,stepNumber:d}),g=qr({hasIntersected:!0,stepStatus:"complete",imgPath:f,retryFetchOnRevisit:!1,checkGroup:t,timestamp:e}),{url:h,loading:b,stepName:E,maxSteps:y}=null!==(l=null==g?void 0:g[f])&&void 0!==l?l:{},v=d===r&&null!=a?a:h,x=cs(d,null!=y?y:d);Object(n.useEffect)((()=>{s&&m(r)}),[s,m]);const S=Object(n.useCallback)((e=>{if("Escape"===(null==e?void 0:e.key))return void o();if(!y)return;const t="ArrowLeft"===(null==e?void 0:e.key),a="ArrowRight"===(null==e?void 0:e.key);t&&d>1&&m((e=>e-1)),a&&d<y&&m((e=>e+1))}),[m,d,y,o]);return s?i.a.createElement(w.EuiOutsideClickDetector,{onOutsideClick:o},i.a.createElement(ms,{onClose:e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),o()},onKeyDown:S},i.a.createElement(os,null,i.a.createElement(ns,{label:x,imgSrc:v,isLoading:!!b,animateLoading:!1,hasBorder:!1,size:"full",onClick:e=>{e.stopPropagation()}})),i.a.createElement(ps,{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{},$_css:c.colors.lightShade},b?i.a.createElement(w.EuiProgress,{"data-test-subj":"screenshotImageLoadingProgress",size:"xs"}):null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(fs,{"data-test-subj":"screenshotImagePreviousButton",disabled:b||!y||1===d,onClick:e=>{m((e=>e-1)),e.preventDefault()},iconType:"arrowLeft","aria-label":us,$_css2:u?0:"auto"},us)),i.a.createElement(gs,{grow:!1},i.a.createElement(w.EuiText,{color:c.colors.text},x)),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(hs,{"data-test-subj":"screenshotImageNextButton",disabled:b||!y||d===y,onClick:e=>{m((e=>e+1)),e.stopPropagation()},iconType:"arrowRight",iconSide:"right","aria-label":ds,$_css3:u?0:"auto"},ds))),i.a.createElement(bs,{color:c.colors.text,className:"eui-textNoWrap",size:"s",$_css4:c.size.m},E)))):null},ss=Object(A.euiStyled)(w.EuiModalBody)`
  &&& {
    & > div {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 24px;
    }
  }
`;var os=Ut()(ss).withConfig({displayName:"_StyledModalBodyStyled",componentId:"sc-1r4puay-0"})({display:"flex"});const ls=({basePath:e,checkGroup:t,stepNumber:a})=>t?`${e}${c.A.JOURNEY_SCREENSHOT.replace("{checkGroup}",t).replace("{stepIndex}",a.toString())}`:"",cs=(e,t)=>o.i18n.translate("xpack.synthetics.monitor.stepOfSteps",{defaultMessage:"Step: {stepNumber} of {totalSteps}",values:{stepNumber:e,totalSteps:t}}),us=o.i18n.translate("xpack.synthetics.monitor.step.previousStep",{defaultMessage:"Previous step"}),ds=o.i18n.translate("xpack.synthetics.monitor.step.nextStep",{defaultMessage:"Next step"});var ms=Ut()(w.EuiModal).withConfig({displayName:"_StyledEuiModal",componentId:"sc-1r4puay-1"})({outline:0,maxWidth:"calc(90vw)",maxHeight:"calc(90vh)",borderRadius:0,padding:0}),ps=Ut()(w.EuiModalFooter).withConfig({displayName:"_StyledEuiModalFooter",componentId:"sc-1r4puay-2"})((e=>({outline:0,backgroundColor:e.$_css,display:"inline-block",width:"100%",textDecoration:"none",padding:0}))),fs=Ut()(w.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-1r4puay-3"})((e=>({marginLeft:e.$_css2}))),gs=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1r4puay-4"})({flexBasis:"fit-content"}),hs=Ut()(w.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty2",componentId:"sc-1r4puay-5"})((e=>({marginRight:e.$_css3}))),bs=Ut()(w.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1r4puay-6"})((e=>({outline:0,padding:e.$_css4,paddingTop:0,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis"})));const Es=({timestamp:e,checkGroup:t,stepName:a,stepNumber:r,imgSrc:s,maxSteps:o,isStepFailed:l,isLoading:c,size:u,unavailableMessage:d,borderRadius:m})=>{const{euiTheme:p}=Object(w.useEuiTheme)(),[f,g]=Object(n.useState)(!1),[h,b]=Object(n.useState)(!1),[E,y]=Object(n.useState)(!1),v=Object(n.useCallback)((e=>{g(!0)}),[g]),x=Object(n.useCallback)((e=>{g(!1)}),[g]),S=Object(n.useCallback)((e=>{e.stopPropagation(),y(!0),b(!0),g(!1)}),[g]),k=Object(n.useCallback)((()=>{b(!1)}),[b]),M=e=>i.a.createElement(ns,{label:a,imgSrc:s,isLoading:c,size:e,unavailableMessage:d,borderColor:l?p.colors.danger:void 0,borderRadius:m,onMouseEnter:v,onMouseLeave:x,onClick:S});return i.a.createElement(i.a.Fragment,null,E?i.a.createElement(rs,{checkGroup:t,initialImgSrc:s,initialStepNumber:r,maxSteps:o,isOpen:h,onClose:k,timestamp:e}):null,i.a.createElement(w.EuiPopover,{anchorPosition:"leftDown",button:M(u),isOpen:f},M(Xr)))},ys=({allStepsLoaded:e,timestamp:t,checkGroup:a,stepStatus:r,initialStepNumber:s=1,retryFetchOnRevisit:o=!1,testNowMode:l,size:c=Kr,unavailableMessage:u,borderRadius:d})=>{var m;const p=i.a.useRef(null),{basePath:f}=Object(n.useContext)(Ze),g=a?ls({basePath:f,checkGroup:a,stepNumber:s}):"",h=un()(p,{root:null,rootMargin:"0px",threshold:.1}),b=qr({hasIntersected:Boolean(h&&h.intersectionRatio>0),stepStatus:r,imgPath:g,retryFetchOnRevisit:o,checkGroup:a,testNowMode:l,timestamp:t}),{url:E,loading:y,stepName:v,maxSteps:x}=null!==(m=null==b?void 0:b[g])&&void 0!==m?m:{};return i.a.createElement("div",{ref:p},i.a.createElement(Es,{checkGroup:a,stepName:v,imgSrc:E,stepNumber:s,isStepFailed:"failed"===r,maxSteps:x,isLoading:Boolean(y||!e),size:c,unavailableMessage:u,borderRadius:d,timestamp:t}))},vs=(e,t=3)=>Number(e).toFixed(t),xs=({value:e,timing:t,mimeType:a})=>{let n=Ji[t];return t===Yi.Receive&&a&&(n+=` (${tr[ar[a]]||a})`),`${n}: ${vs(e,e>1?0:1)}ms`},Ss=(e,t,a)=>{var n,i;return!t&&!a||(null===(n=null==t?void 0:t(e))||void 0===n||n)&&(null===(i=null==a?void 0:a(e))||void 0===i||i)},ks=({value:e,postFix:t})=>{if(void 0===e||-1===e)return;let a=vs(e);return t&&(a=`${a} ${t}`),a},Ms=(e,t)=>t&&e&&t>0?e-t:e,ws=e=>{if(!e)return e=>!0;const t=new RegExp(e,"i");return e=>{var a,n;return(null!==(a=null===(n=e.url)||void 0===n?void 0:n.search(t))&&void 0!==a?a:-1)>-1}},Os=e=>{if(null==e||!e.length)return e=>!0;const t=e.reduce(((e,t)=>(e.set(t,!0),e)),new Map);return e=>{var a;const n=e.mimeType&&null!==(a=ar[e.mimeType])&&void 0!==a?a:er.Other;return t.has(n)}},Ts=e=>{if(void 0!==e)return Object.keys(e).map((t=>({name:t,value:`${e[t]}`})))},Cs=({item:e,index:t,requestStart:a,dateFormatter:n})=>{const{certificates:i,ip:r,mimeType:s,requestHeaders:o,responseHeaders:l,url:c,resourceSize:u,transferSize:d,status:m}=e,{dns:p,connect:f,ssl:g,wait:h,receive:b,total:E}=e.timings||{},y=b&&b>0?b:E;return{x:t,url:c,requestHeaders:Ts(o),responseHeaders:Ts(l),certificates:i?[{name:Qi[Xi.CertificateIssuer],value:i.issuer},{name:Qi[Xi.CertificateIssueDate],value:i.validFrom?n(i.validFrom):void 0},{name:Qi[Xi.CertificateExpiryDate],value:i.validTo?n(i.validTo):void 0},{name:Qi[Xi.CertificateSubject],value:i.subjectName}]:void 0,details:[{name:Qi[Xi.Status],value:m?`${m}`:void 0},{name:Qi[Xi.MimeType],value:s},{name:Qi[Xi.RequestStart],value:ks({value:a,postFix:"ms"})},{name:Ji[Yi.Dns],value:ks({value:p,postFix:"ms"})},{name:Ji[Yi.Connect],value:ks({value:Ms(f,g),postFix:"ms"})},{name:Ji[Yi.Ssl],value:ks({value:g,postFix:"ms"})},{name:Ji[Yi.Wait],value:ks({value:h,postFix:"ms"})},{name:Ji[Yi.Receive],value:ks({value:y,postFix:"ms"})},{name:Qi[Xi.ResourceSize],value:ks({value:u?u/1e3:void 0,postFix:"KB"})},{name:Qi[Xi.TransferSize],value:ks({value:d?d/1e3:void 0,postFix:"KB"})},{name:Qi[Xi.IP],value:r}]}},Is=Object(w.euiPaletteColorBlind)({rotations:2}),js={...Object.values(Yi).reduce(((e,t)=>{switch(t){case Yi.Blocked:e[t]=Is[11];break;case Yi.Dns:e[t]=Is[10];break;case Yi.Connect:e[t]=Is[13];break;case Yi.Ssl:e[t]=Is[14];break;case Yi.Send:e[t]=Is[19];break;case Yi.Wait:e[t]=Is[9];break;case Yi.Receive:e[t]=Is[15]}return e}),{}),...Object.values(er).reduce(((e,t)=>{switch(t){case er.Html:e[t]=Is[1];break;case er.Script:e[t]=Is[7];break;case er.Stylesheet:e[t]=Is[3];break;case er.Image:e[t]=Is[4];break;case er.Media:e[t]=Is[5];break;case er.Font:e[t]=Is[2];break;case er.XHR:e[t]=Is[0];break;case er.Other:e[t]=Is[6]}return e}),{})},_s=(e,t)=>isNaN(e)?t:`${e}. ${t}`,Fs=(e,{maxMillis:t=1e3,digits:a})=>e<0?"--":e<t?`${e.toFixed(null!=a?a:0)} ms`:`${(e/1e3).toFixed(null!=a?a:2)} s`,Ps=({status:e})=>"unknown"===e?i.a.createElement(w.EuiSkeletonText,{lines:1}):i.a.createElement(zs,{color:Rs(e)},"succeeded"===e?As:"failed"===e?Ns:Bs),Ls=e=>{switch(e){case"succeeded":case"success":case"up":return"succeeded";case"fail":case"failed":case"down":return"failed";case"skip":case"skipped":return"skipped";default:return"unknown"}},Rs=e=>"succeeded"===e?"success":"failed"===e?"danger":"default",Ds=e=>"skipped"===e?"disabledText":"text",As=o.i18n.translate("xpack.synthetics.monitorStatus.complete",{defaultMessage:"Complete"}),Ns=o.i18n.translate("xpack.synthetics.monitorStatus.failed",{defaultMessage:"Failed"}),Bs=o.i18n.translate("xpack.synthetics.monitorStatus.skipped",{defaultMessage:"Skipped"});var zs=Ut()(w.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-1lvx553-0"})({maxWidth:"max-content"});const Hs=({testNowMode:e,pingStatus:t,isExpanded:a,step:n})=>{var r,s,l,c,u,d;return i.a.createElement("div",null,i.a.createElement(w.EuiText,{className:"eui-textNoWrap",size:"s"},i.a.createElement(Ps,{status:Ls(t)})," ",e?"":o.i18n.translate("xpack.synthetics.step.duration.label",{defaultMessage:"after {value}",values:{value:Fs((null!==(r=null===(s=n.synthetics)||void 0===s||null===(l=s.step)||void 0===l?void 0:l.duration.us)&&void 0!==r?r:0)/1e3,{})}})),a&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(ys,{checkGroup:n.monitor.check_group,initialStepNumber:null===(c=n.synthetics)||void 0===c||null===(u=c.step)||void 0===u?void 0:u.index,stepStatus:null===(d=n.synthetics.payload)||void 0===d?void 0:d.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[260,160]}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Gs,{step:n}),i.a.createElement(w.EuiSpacer,{size:"xs"}),i.a.createElement(Vs,{step:n})))},Gs=({step:e})=>{var t,a;const{timingsWithLabels:n}=Mr(e.monitor.check_group,null===(t=e.synthetics.step)||void 0===t?void 0:t.index),{timingsWithLabels:r,loading:s}=Pr(null===(a=e.synthetics.step)||void 0===a?void 0:a.index,e["@timestamp"],e.monitor.check_group),o=null==n?void 0:n.map((e=>{const t=null==r?void 0:r.find((t=>t.label===e.label)),a=null==t?void 0:t.value;return{title:e.label,description:i.a.createElement(cr,{loading:s,currentFormatted:Fs(e.value,{}),current:e.value,previous:a,previousFormatted:Fs(null!=a?a:0,{})})}}));return i.a.createElement(w.EuiDescriptionList,{compressed:!0,type:"column",listItems:o,style:{maxWidth:265},textStyle:"reverse",descriptionProps:{style:{textAlign:"right"}}})},Vs=({step:e})=>{const{metrics:t}=Br(e),{metrics:a,loading:n}=Rr(e),r=null==t?void 0:t.map((e=>{var t;const r=null==a?void 0:a.find((t=>t.label===e.label)),s=null==r?void 0:r.value;return{title:e.label,description:i.a.createElement(cr,{loading:n,currentFormatted:e.formatted,current:null!==(t=e.value)&&void 0!==t?t:0,previous:s,previousFormatted:null==r?void 0:r.formatted})}}));return i.a.createElement(w.EuiDescriptionList,{compressed:!0,type:"column",listItems:r,style:{maxWidth:265},textStyle:"reverse",descriptionProps:{style:{textAlign:"right"}}})},$s=(e=!0)=>{const[t,a]=Se(),{locations:i}=je(),{monitor:r}=wa(),s=Object(u.useSelector)($.W),o=Object(u.useDispatch)(),{locationId:l}=t();return Object(n.useEffect)((()=>{if(!l){var t,n;const i=null==r||null===(t=r.locations)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;i&&e&&a({locationId:i},!0)}l&&s!==l&&o(Object($.gb)(l))}),[o,a,i,l,s,e,null==r?void 0:r.locations]),Object(n.useMemo)((()=>{var e;let t=null!==(e=i.find((e=>e.id===l)))&&void 0!==e?e:null;var a,n;return t||(t=null!==(a=null==r||null===(n=r.locations)||void 0===n?void 0:n.find((e=>e.id===l)))&&void 0!==a?a:null),t}),[i,l,null==r?void 0:r.locations])},Us=({stepIndex:e,checkGroup:t,configId:a,asButton:n,label:r,target:s="_self",...o})=>{const{basePath:l}=tt(),c=$s(),u=`${l}/app/synthetics/monitor/${a}/test-run/${t}/step/${e}?locationId=${null==c?void 0:c.id}`;return n?i.a.createElement(w.EuiButtonEmpty,m()({"data-test-subj":"syntheticsStepDetailsLinkIconButton"},o,{flush:"left",iconType:"apmTrace",href:u}),null!=r?r:qs):i.a.createElement(w.EuiButtonIcon,m()({"data-test-subj":"syntheticsStepDetailsLinkIconButton"},o,{"aria-label":qs,title:qs,size:"s",href:u,target:s,iconType:"apmTrace"}))},qs=o.i18n.translate("xpack.synthetics.monitor.step.viewStepDetails",{defaultMessage:"View step details"}),Ws=(e=0,t=!1)=>{const a=t?e/1e3:e/1e6,n=Math.floor(a/3600);return n>=1?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.hours",{defaultMessage:"{value} hours",values:{value:n}}):a>=60?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.minutes",{defaultMessage:"{value} mins",values:{value:parseFloat((a/60).toFixed(1))}}):a>=1?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.seconds",{defaultMessage:"{value} sec",values:{value:parseFloat(a.toFixed(1))}}):t?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.milliseconds",{defaultMessage:"{value} ms",values:{value:e.toFixed(0)}}):o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.microseconds",{defaultMessage:"{value} ms",values:{value:(e/1e3).toFixed(0)}})},Ks=({step:e})=>{var t,a,r,s;const{euiTheme:o}=Object(w.useEuiTheme)(),l=Object(n.useMemo)((()=>{var t,a,n,i;const r=Ls(null!==(t=null===(a=e.synthetics.step)||void 0===a?void 0:a.status)&&void 0!==t?t:""),s=o.colors[Ds(r)];return"skipped"===r?{text:"-",color:s}:{text:Ws(null===(n=e.synthetics.step)||void 0===n||null===(i=n.duration)||void 0===i?void 0:i.us),color:s}}),[o.colors,null===(t=e.synthetics.step)||void 0===t||null===(a=t.duration)||void 0===a?void 0:a.us,null===(r=e.synthetics.step)||void 0===r?void 0:r.status]);return i.a.createElement(w.EuiText,{size:"s",color:l.color,"data-test-subj":`stepDurationText${null===(s=e.synthetics.step)||void 0===s?void 0:s.index}`},l.text)},Ys=({step:e,stepIndex:t,size:a,borderRadius:n})=>{var r,s,o,l;const{stepIndex:c}=Object(p.useParams)(),{data:u,loading:d}=Object(N.useFetcher)((()=>{var a,n;return Object($.h)({timestamp:e["@timestamp"],monitorId:e.monitor.id,stepIndex:Number(null!=c?c:t),location:null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name})}),[e._id,e["@timestamp"]]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ys,{checkGroup:null==u?void 0:u.monitor.check_group,initialStepNumber:null==u||null===(r=u.synthetics)||void 0===r||null===(s=r.step)||void 0===s?void 0:s.index,stepStatus:null==u||null===(o=u.synthetics)||void 0===o||null===(l=o.payload)||void 0===l?void 0:l.status,allStepsLoaded:!d,retryFetchOnRevisit:!1,size:a,unavailableMessage:Xs,borderRadius:n}),i.a.createElement(w.EuiSpacer,{size:"xs"}))},Xs=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.unAvailable",{defaultMessage:"Image unavailable"}),Js=({isExpanded:e,step:t})=>{var a,n,r,s,o,l,c,u;const{euiTheme:d}=Object(w.useEuiTheme)(),{data:m,loading:p}=Object(N.useFetcher)((()=>{var e,a,n;return Object($.h)({timestamp:t["@timestamp"],monitorId:t.monitor.id,stepIndex:Number(null===(e=t.synthetics.step)||void 0===e?void 0:e.index),location:null===(a=t.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name})}),[t._id,t["@timestamp"]]),{currentStep:f}=Ki(null==m?void 0:m.monitor.check_group,0,Number(null===(a=t.synthetics.step)||void 0===a?void 0:a.index));return i.a.createElement("div",null,i.a.createElement(w.EuiText,{className:"eui-textNoWrap",size:"s"},Fs((null!==(n=null==f||null===(r=f.synthetics)||void 0===r||null===(s=r.step)||void 0===s?void 0:s.duration.us)&&void 0!==n?n:0)/1e3,{})),e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(ys,{checkGroup:null==m?void 0:m.monitor.check_group,initialStepNumber:null==m||null===(o=m.synthetics)||void 0===o||null===(l=o.step)||void 0===l?void 0:l.index,stepStatus:null==m||null===(c=m.synthetics)||void 0===c||null===(u=c.payload)||void 0===u?void 0:u.status,allStepsLoaded:!p,retryFetchOnRevisit:!1,size:[260,160],unavailableMessage:Xs,borderRadius:d.border.radius.small}),i.a.createElement(w.EuiSpacer,{size:"m"}),f&&i.a.createElement(Gs,{step:f}),i.a.createElement(w.EuiSpacer,{size:"xs"}),f&&i.a.createElement(Vs,{step:f})))};function Qs(e){var t;return"step/end"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)}function Zs(e,t,a){return a?i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,null,i.a.createElement($i,{step:e,loading:!1,stepsList:t}))):i.a.createElement(i.a.Fragment,null)}function eo(e){return e.map((({_id:e})=>e)).toString()}const to=({steps:e,error:t,loading:a,screenshotImageSize:r=Kr,showLastSuccessful:s=!0,showStepNumber:l=!1,compressed:c=!0,showExpand:u=!0,testNowMode:d=!1})=>{const m=e.filter(Qs),p=m.find((e=>{var t;return"failed"===(null===(t=e.synthetics.step)||void 0===t?void 0:t.status)})),f=Object(n.useMemo)((()=>p&&u?{[p._id]:Zs(p,e,d)}:{}),[p,u,e,d]),{euiTheme:g}=Object(w.useEuiTheme)(),[h,b]=Object(n.useState)(f),[E,y]=Object(n.useState)(eo(m)),v=Object(w.useIsWithinMinBreakpoint)("s");Object(n.useEffect)((()=>{const t=eo(m);t!==E&&(y(t),p&&u&&!h[p._id]&&b(Object.assign(h,{[p._id]:Zs(p,e,d)})))}),[h,p,u,m,E,e,d]);const x=Object(n.useCallback)((t=>{b((a=>{const n={...a};return n[t._id]?delete n[t._id]:n[t._id]=Zs(t,e,d),n}))}),[e,d]),S=[...u?[{align:"left",width:"40px",isExpander:!0,render:e=>i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsColumnsButton",onClick:()=>x(e),"aria-label":h[e._id]?"Collapse":"Expand",iconType:h[e._id]?"arrowDown":"arrowRight"})}]:[],...l?[{field:"synthetics.step.index",name:"#",render:(e,t)=>i.a.createElement(ao,{step:t,euiTheme:g},e),mobileOptions:{show:!1}}]:[],{align:"left",field:"timestamp",name:so,render:(e,t)=>{var n,s,o;return i.a.createElement(ys,{checkGroup:t.monitor.check_group,initialStepNumber:null===(n=t.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.index,stepStatus:null===(o=t.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!a,retryFetchOnRevisit:!0,size:r,testNowMode:d,timestamp:e})},mobileOptions:{render:e=>i.a.createElement(no,{journeyStep:e,stepsLoading:a,showStepNumber:l,showLastSuccessful:s,isExpanded:Boolean(h[e._id]),isTestNowMode:d,euiTheme:g}),header:!1,enlarge:!0,width:"100%"}},{field:"synthetics.step.name",name:oo,render:(e,t)=>{var a,n;const r=Ls(null!==(a=null===(n=t.synthetics.step)||void 0===n?void 0:n.status)&&void 0!==a?a:""),s=g.colors[Ds(r)];return i.a.createElement(w.EuiText,{color:s,size:"m"},e)},mobileOptions:{show:!1}},{field:"synthetics.step.status",name:io,render:(e,t)=>i.a.createElement(Hs,{testNowMode:d,step:t,pingStatus:e,isExpanded:Boolean(h[t._id])&&!d}),mobileOptions:{show:!1}},...s?[{field:"synthetics.step.status",name:ro,render:(e,t)=>i.a.createElement(Js,{step:t,isExpanded:Boolean(h[t._id])}),mobileOptions:{show:!1}}]:[{align:"left",name:lo,render:e=>i.a.createElement(Ks,{step:e}),mobileOptions:{header:lo,show:!0}}],{align:"right",field:"timestamp",name:"",render:(e,t)=>{var a,n;return i.a.createElement(Us,{checkGroup:t.monitor.check_group,stepIndex:null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index,configId:t.config_id,target:d?"_blank":void 0})},mobileOptions:{show:!1}}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(co,{cellProps:e=>{if(h[e._id])return{style:{verticalAlign:"top"}}},compressed:c,loading:a,columns:S,error:null==t?void 0:t.message,isExpandable:u,hasActions:!1,items:m,noItemsMessage:a?o.i18n.translate("xpack.synthetics.monitor.step.loading",{defaultMessage:"Loading steps..."}):o.i18n.translate("xpack.synthetics.monitor.step.noDataFound",{defaultMessage:"No data found"}),tableLayout:"auto",itemId:"_id",itemIdToExpandedRowMap:d?h:void 0,$_css:v?"auto":void 0}))},ao=({step:e,textSize:t="s",euiTheme:a,children:n})=>{var r,s,o;const l=Ls(null!==(r=null===(s=e.synthetics)||void 0===s||null===(o=s.step)||void 0===o?void 0:o.status)&&void 0!==r?r:"");return i.a.createElement(uo,{size:t,color:a.colors[Ds(l)],$_css2:a.font.weight.bold},n)},no=({journeyStep:e,showStepNumber:t,showLastSuccessful:a,stepsLoading:n,isExpanded:r,isTestNowMode:s,euiTheme:o})=>{var l,c,u,d,m,p,f,g,h,b,E,y;return i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"s"},i.a.createElement(w.EuiTitle,{size:"s"},i.a.createElement("h4",null,i.a.createElement(ao,{step:e,textSize:"relative",euiTheme:o},t&&null!==(l=e.synthetics)&&void 0!==l&&null!==(c=l.step)&&void 0!==c&&c.index?`${e.synthetics.step.index}. `:null," ",null===(u=e.synthetics)||void 0===u||null===(d=u.step)||void 0===d?void 0:d.name))),i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceEvenly",responsive:!1,wrap:!0,gutterSize:"xl"},i.a.createElement(ys,{checkGroup:e.monitor.check_group,initialStepNumber:null===(m=e.synthetics)||void 0===m||null===(p=m.step)||void 0===p?void 0:p.index,stepStatus:null===(f=e.synthetics.payload)||void 0===f?void 0:f.status,allStepsLoaded:!n,retryFetchOnRevisit:!0,size:Yr,timestamp:null==e?void 0:e["@timestamp"]}),i.a.createElement("div",null,i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"s"},[{title:io,description:i.a.createElement(Hs,{testNowMode:s,step:e,pingStatus:null!==(g=null==e||null===(h=e.synthetics)||void 0===h||null===(b=h.step)||void 0===b?void 0:b.status)&&void 0!==g?g:"skipped",isExpanded:r&&!s})},a?{title:ro,description:i.a.createElement(Js,{step:e,isExpanded:r})}:{title:lo,description:i.a.createElement(Ks,{step:e})}].map((({title:e,description:t})=>i.a.createElement(mo,{key:e,direction:"row",alignItems:"baseline",gutterSize:"xs",responsive:!1,wrap:!0},i.a.createElement(w.EuiText,{size:"xs"},e),t)))))),i.a.createElement(po,{checkGroup:e.monitor.check_group,stepIndex:null===(E=e.synthetics)||void 0===E||null===(y=E.step)||void 0===y?void 0:y.index,configId:e.config_id,asButton:!0}))},io=o.i18n.translate("xpack.synthetics.monitor.result.label",{defaultMessage:"Result"}),ro=o.i18n.translate("xpack.synthetics.monitor.result.lastSuccessful",{defaultMessage:"Last successful"}),so=o.i18n.translate("xpack.synthetics.monitor.screenshot.label",{defaultMessage:"Screenshot"}),oo=o.i18n.translate("xpack.synthetics.monitor.stepName.label",{defaultMessage:"Step name"}),lo=o.i18n.translate("xpack.synthetics.monitor.step.duration.label",{defaultMessage:"Duration"});var co=Ut()(w.EuiBasicTable).withConfig({displayName:"_StyledEuiBasicTable",componentId:"sc-1pk2009-0"})((e=>({overflowX:e.$_css}))),uo=Ut()(w.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1pk2009-1"})((e=>({fontWeight:e.$_css2,whiteSpace:"nowrap"}))),mo=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1pk2009-2"})({maxWidth:"fit-content"}),po=Ut()(Us).withConfig({displayName:"_StyledStepDetailsLinkIcon",componentId:"sc-1pk2009-3"})({marginLeft:"auto"});const fo=({testRunId:e,skipDetails:t=!1,expectSummaryDocs:a})=>{const{refreshTimer:i,lastRefresh:r,clearTicks:s}=Vi(5e3),[o,l]=Object(n.useState)(0),[u,d]=Object(n.useState)((()=>new Array(a).fill({checkGroupId:"",journeyStarted:!1,steps:[],stepsLoading:!1,completedSteps:0}).map(((e,t)=>({...e,checkGroupId:`placeholder-check-group-${t}`}))))),m=Object(n.useRef)({checksum:"",time:Date.now()}),{data:p,loading:f}=(({testRunId:e,lastRefresh:t})=>Object(N.useEsSearch)(Object(N.createEsParams)({index:c.B,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{terms:{"synthetics.type":["heartbeat/summary","journey/start"]}},{term:{test_run_id:e}}]}}},size:1e3}),[e,t],{name:"TestRunData"}))({testRunId:e,lastRefresh:r});Object(n.useEffect)((()=>{const e=null==p?void 0:p.hits.hits;if(e&&e.length>0){const t=(null!=e?e:[]).map((({_source:e})=>e)),n=t.filter((e=>{var t,a;return"journey/start"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)||"heartbeat/summary"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)})).reduce(((e,t)=>({...e,[t.monitor.check_group]:{checkGroupId:t.monitor.check_group,journeyStarted:!0,journeyDoc:t,summaryDoc:null,steps:[],stepsLoading:!1,completedSteps:0}})),{});t.forEach((e=>{var t;"heartbeat/summary"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)&&(n[e.monitor.check_group].summaryDoc=e)}));const r=Object.values(n);r.filter((e=>!!e.summaryDoc)).length>=a&&clearInterval(i),y(r)}else l((e=>{const t=e+1;return t>25&&s(),t}))}),[a,p,i]);const g=u.map((({checkGroupId:e})=>e)),h=g.reduce(((e,t)=>e+t),""),{loading:b}=Object(N.useFetcher)((()=>g.length&&!t?(d((e=>e.map((e=>({...e,stepsLoading:!0}))))),Promise.all(g.map((e=>Object($.e)({checkGroup:e}).then((e=>(E(e.checkGroup,{steps:e.steps,completedSteps:e.steps.filter(Qs).length}),e))).finally((()=>{E(e,{stepsLoading:!1})})))))):Promise.resolve(null)),[h,d,r]);Object(n.useEffect)((()=>{const e=function(e){return e.reduce(((e,t)=>{var a,n,i,r,s;return null!==(a=null!==(n=e+(null==t||null===(i=t.journeyDoc)||void 0===i?void 0:i._id))&&void 0!==n?n:""+(null==t||null===(r=t.summaryDoc)||void 0===r?void 0:r._id))&&void 0!==a?a:""+(null!==(s=null==t?void 0:t.steps)&&void 0!==s?s:[]).reduce(((e,{_id:t})=>e+t),"")}),"")}(u);h!==m.current.checksum&&(m.current.checksum=e,m.current.time=Date.now())}),[u,h]);const E=(e,t)=>{d((a=>a.map((a=>e!==a.checkGroupId?a:go(a,t)))))},y=e=>{const t=u.filter((e=>e.checkGroupId.startsWith("placeholder-check-group"))),n=e.length<a?[...e,...t.slice(-1*(a-e.length))]:e;d((e=>{const t=n.map((({checkGroupId:e})=>e)),a=n.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{}),i=e.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{});return t.map((e=>go(i[e],a[e])))}))};return{data:p,retriesExceeded:o>25,summariesLoading:f,stepLoadingInProgress:b,expectedSummariesLoaded:u.filter((({summaryDoc:e})=>!!e)).length>=a,checkGroupResults:u,lastUpdated:m.current.time}};function go(e,t){var a,n,i,r,s;const o=t.completedSteps?Math.max(null!==(a=null==e?void 0:e.completedSteps)&&void 0!==a?a:0,null!==(n=t.completedSteps)&&void 0!==n?n:0):null!==(i=null==e?void 0:e.completedSteps)&&void 0!==i?i:0;let l=null!==(r=t.steps)&&void 0!==r?r:[];return 0===l.length&&(null!==(s=null==e?void 0:e.steps)&&void 0!==s?s:[]).length>0&&(l=e.steps),{...null!=e?e:{},...t,steps:l,completedSteps:o}}const ho=({name:e,expectPings:t,onDone:a,testRunId:r,onProgress:s})=>{const{summariesLoading:l,expectedSummariesLoaded:c,stepLoadingInProgress:u,checkGroupResults:d,retriesExceeded:m}=fo({testRunId:r,expectSummaryDocs:t});return Object(n.useEffect)((()=>{m&&(Gi.a.toasts.addDanger({text:Eo,title:Object(T.toMountPoint)(i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.manualTestRun.failedTest.name",defaultMessage:"Manual test run failed for {name}",values:{name:e}}))},{toastLifeTimeMs:1e4}),a(r))}),[e,a,m,r]),Object(n.useEffect)((()=>{c&&a(r)}),[a,c,r]),i.a.createElement(i.a.Fragment,null,d.map((e=>{var t,a;const{checkGroupId:r,journeyStarted:c,summaryDoc:d,stepsLoading:m,steps:p,completedSteps:f}=e,g=!l&&c&&d&&m,h=d&&!l&&!u&&0===p.length;var b,E;return f>0&&s(o.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=f?f:0}})),g&&s(yo),h&&s(null!==(b=null==d||null===(E=d.error)||void 0===E?void 0:E.message)&&void 0!==b?b:bo),h&&null!=d&&null!==(t=d.error)&&void 0!==t&&null!==(a=t.message)&&void 0!==a&&a.includes("journey did not finish executing"),i.a.createElement(n.Fragment,{key:"accordion-"+r})})))},bo=o.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),Eo=o.i18n.translate("xpack.synthetics.monitorManagement.failedScheduling",{defaultMessage:"Failed to get any results back for manual test run."}),yo=o.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."}),vo=({isBrowserMonitor:e,timestamp:t,ping:a})=>{var n;const{euiTheme:r}=Object(w.useEuiTheme)(),{basePath:s}=tt(),o=$s(),l=qn(),c=i.a.createElement(ko,{size:"s",$_css:r.font.weight.medium},l(t));return e?i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsTestDetailsLinkLink",href:xo({basePath:s,checkGroup:a.monitor.check_group,monitorId:null!==(n=null==a?void 0:a.config_id)&&void 0!==n?n:"",locationId:null==o?void 0:o.id})},c):c},xo=({monitorId:e,basePath:t,checkGroup:a,locationId:n})=>`${t}/app/synthetics/monitor/${e}/test-run/${a}?locationId=${n}`,So=({monitorId:e,checkGroup:t,locationId:a})=>`/monitor/${e}/test-run/${t}?locationId=${a}`;var ko=Ut()(w.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-49af59-0"})((e=>({fontWeight:e.$_css})));function Mo({checkGroupId:e,title:t,summaryDocs:a,journeyStarted:i,isCompleted:r,configId:s}){var l,c,u,d,m;const{basePath:p}=tt();let f=0;a&&a.length>0&&a.forEach((e=>{var t,a;f+=null!==(t=null===(a=e.monitor.duration)||void 0===a?void 0:a.us)&&void 0!==t?t:0}));const{getLocationByLabel:g}=je(),h=null==a?void 0:a[0];return n.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(w.EuiTitle,{size:"xs"},n.createElement("h3",null,null!=t?t:Oo))),n.createElement(w.EuiFlexItem,{grow:!0},r?n.createElement(w.EuiFlexGroup,{alignItems:"center"},n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(_o,{color:(null==h||null===(l=h.summary)||void 0===l?void 0:l.down)>0?"danger":"success"},(null==h||null===(c=h.summary)||void 0===c?void 0:c.down)>0?Co:To)),n.createElement(w.EuiFlexItem,null,n.createElement(w.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.timeTaken",{defaultMessage:"Took {timeTaken}",values:{timeTaken:fn(f)}})))):n.createElement(w.EuiFlexGroup,{alignItems:"center"},n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(w.EuiBadge,{style:{width:100},color:i?"primary":"warning"},i?Io:wo)),n.createElement(w.EuiFlexItem,null,n.createElement(w.EuiLoadingSpinner,null)))),e&&s&&r&&n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(w.EuiLink,{"data-test-subj":"syntheticsTestResultHeaderLink",href:xo({basePath:p,monitorId:s,checkGroup:e,locationId:null===(u=g(null==h||null===(d=h.observer)||void 0===d||null===(m=d.geo)||void 0===m?void 0:m.name))||void 0===u?void 0:u.id})},jo)))}const wo=o.i18n.translate("xpack.synthetics.monitorManagement.pending",{defaultMessage:"PENDING"}),Oo=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),To=o.i18n.translate("xpack.synthetics.monitorManagement.completed",{defaultMessage:"COMPLETED"}),Co=o.i18n.translate("xpack.synthetics.monitorManagement.failed",{defaultMessage:"FAILED"}),Io=o.i18n.translate("xpack.synthetics.monitorManagement.inProgress",{defaultMessage:"IN PROGRESS"}),jo=o.i18n.translate("xpack.synthetics.monitorManagement.viewTestRunDetails",{defaultMessage:"View test result details"});var _o=Ut()(w.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-bdx2jg-0"})({maxWidth:"max-content"});const Fo=({checkGroup:e,timestamp:t,title:a,summaryMessage:n,hideTitle:r=!1,pageSize:s=5})=>{const o=[{field:"@timestamp",name:Po,sortable:!0,render:e=>Object(w.formatDate)(e,"dateTime")},{field:"synthetics.type",name:Lo,sortable:!0},{field:"synthetics.payload.message",name:"Message",render:e=>i.a.createElement(w.EuiHighlight,{search:e.includes("SyntaxError:")?"SyntaxError:":"ReferenceError:"},e)}],{items:l,loading:u}=(({checkGroup:e})=>{var t;const{data:a,loading:n}=Object(N.useEsSearch)(Object(N.createEsParams)({index:e?c.B:"",body:{size:1e3,query:{bool:{filter:[{terms:{"synthetics.type":["stderr","stdout"]}},...e?[{term:{"monitor.check_group":e}}]:[]]}}}}),[],{name:"getStdErrLogs"});return{items:null!==(t=null==a?void 0:a.hits.hits.map((e=>({...e._source,id:e._id}))))&&void 0!==t?t:[],loading:n}})({checkGroup:e}),{discover:d,exploratoryView:m}=Object(T.useKibana)().services,{data:p}=Object(N.useFetcher)((async()=>{var a;const n=await m.getAppDataView("synthetics",c.B);return null===(a=d.locator)||void 0===a?void 0:a.getUrl({query:{language:"kuery",query:`monitor.check_group: ${e}`},indexPatternId:null==n?void 0:n.id,columns:["synthetics.payload.message","error.message"],timeRange:t?{from:V()(t).subtract(10,"minutes").toISOString(),to:V()(t).add(5,"minutes").toISOString()}:void 0})}),[e,t]);return i.a.createElement(i.a.Fragment,null,!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"s"},i.a.createElement("h3",null,null!=a?a:Ao))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsStdErrorLogsLink"},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStdErrorLogsButton",href:p,iconType:"discoverApp",isDisabled:!p},Do)))),n&&i.a.createElement(w.EuiCallOut,{title:Ro,color:"danger",iconType:"warning"},i.a.createElement("p",null,n))),i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiInMemoryTable,{items:l,columns:o,tableLayout:"auto",loading:u,search:{box:{incremental:!0}},itemId:"id",executeQueryOptions:{defaultFields:["@timestamp","synthetics.payload.message"]},pagination:{pageSize:s,pageSizeOptions:[2,5,10,20,50]}}))},Po=o.i18n.translate("xpack.synthetics.monitorList.timestamp",{defaultMessage:"Timestamp"}),Lo=o.i18n.translate("xpack.synthetics.monitorList.type",{defaultMessage:"Type"}),Ro=o.i18n.translate("xpack.synthetics.monitorList.errorSummary",{defaultMessage:"Error summary"}),Do=o.i18n.translate("xpack.synthetics.monitorList.viewInDiscover",{defaultMessage:"View in discover"}),Ao=o.i18n.translate("xpack.synthetics.monitorList.testRunLogs",{defaultMessage:"Test run logs"}),No=({expectPings:e,onDone:t,testRunId:a})=>{const{euiTheme:i}=Object(w.useEuiTheme)(),{retriesExceeded:r,summariesLoading:s,expectedSummariesLoaded:o,stepLoadingInProgress:l,checkGroupResults:c}=fo({testRunId:a,expectSummaryDocs:e});return Object(n.useEffect)((()=>{o&&t(a)}),[t,o,a]),r?n.createElement(w.EuiCallOut,{title:Eo,color:"danger",iconType:"alert"}):n.createElement(n.Fragment,null,c.map((e=>{var t,a,r,o,u;const{checkGroupId:d,journeyStarted:m,summaryDoc:p,stepsLoading:f,steps:g,completedSteps:h}=e,b=!s&&m&&p&&f,E=p&&!s&&!l&&0===g.length,y="down"===(null==p||null===(t=p.monitor)||void 0===t?void 0:t.status);return n.createElement(Bo,{key:"accordion-"+d,id:"accordion-"+d,element:"fieldset",borders:"horizontal",buttonProps:{paddingSize:"m"},buttonContent:zo(e),paddingSize:"s","data-test-subj":"expandResults",initialIsOpen:1===c.length},b&&n.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(w.EuiText,null,Vo)),n.createElement(w.EuiFlexItem,null,n.createElement(w.EuiLoadingSpinner,{size:"s"}))),(E||y)&&n.createElement(w.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",style:{marginTop:i.base,marginBottom:i.base,borderRadius:i.border.radius.medium,fontWeight:i.font.weight.semiBold},title:Go,size:"s",color:"danger",iconType:"warning"},n.createElement(w.EuiText,{color:"danger"},null!==(a=null==p||null===(r=p.error)||void 0===r?void 0:r.message)&&void 0!==a?a:Ho)),(E||y)&&(null==p||null===(o=p.error)||void 0===o||null===(u=o.message)||void 0===u?void 0:u.includes("journey did not finish executing"))&&n.createElement(Fo,{checkGroup:p.monitor.check_group,hideTitle:0===h,pageSize:0===h?5:2}),h>0&&n.createElement(n.Fragment,null,n.createElement(w.EuiTitle,{size:"xxxs"},n.createElement("h3",null,$o)),n.createElement(to,{steps:g,loading:Boolean(l),error:void 0,showStepNumber:!0,compressed:!0,testNowMode:!0,showLastSuccessful:!1})))})))},Bo=Ut()(w.EuiAccordion).withConfig({displayName:"AccordionWrapper",componentId:"sc-1fpn1uf-0"})([".euiAccordion__buttonContent{width:100%;}"]);function zo({journeyDoc:e,summaryDoc:t,checkGroupId:a,journeyStarted:i,completedSteps:r}){var s,l;return n.createElement("div",null,n.createElement(Mo,{title:null==e||null===(s=e.observer)||void 0===s||null===(l=s.geo)||void 0===l?void 0:l.name,summaryDocs:t?[t]:[],checkGroupId:a,journeyStarted:i,isCompleted:Boolean(t),configId:null==e?void 0:e.config_id}),n.createElement(w.EuiText,{size:"s"},n.createElement("p",null,n.createElement(w.EuiText,{color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=r?r:0}})))))}const Ho=o.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),Go=o.i18n.translate("xpack.synthetics.testRun.testErrorLabel",{defaultMessage:"Error running test"}),Vo=o.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."}),$o=o.i18n.translate("xpack.synthetics.monitorManagement.steps",{defaultMessage:"Steps"}),Uo=({expectSummaryDocs:e,testRunId:t})=>{const{refreshTimer:a,lastRefresh:i}=Vi(2e3),[r,s]=Object(n.useState)(0),{data:o,loading:l}=Object(N.useEsSearch)(Object(N.createEsParams)({index:c.B,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[Pe.c,{term:{test_run_id:t}}]}}},size:1e3}),[t,i],{name:"TestRunData"}),u=Object(n.useRef)({checksum:"",time:Date.now()});return Object(n.useEffect)((()=>{var e;0===(null!==(e=null==o?void 0:o.hits.hits)&&void 0!==e?e:[]).length&&s((e=>e+1))}),[o]),Object(n.useMemo)((()=>{var t;const n=null!==(t=null==o?void 0:o.hits.hits)&&void 0!==t?t:[],i=n.map((({_id:e})=>e)).reduce(((e,t)=>e+t),"");return i!==u.current.checksum&&(u.current.checksum=i,u.current.time=Date.now()),n.length>0?(n.length>=e&&clearInterval(a),{data:o,loading:l,summaryDocs:n.map((e=>{var t;return{...e._source,timestamp:null===(t=e._source)||void 0===t?void 0:t["@timestamp"],docId:e._id}})),lastUpdated:u.current.time}):{retriesExceeded:r>50,data:o,loading:l,summaryDocs:null,lastUpdated:u.current.time}}),[o,r,l,e,a])},qo=e=>{const[t,a]=Object(n.useState)({}),i=JSON.stringify(Object.keys(t).filter((t=>!e.some((({docId:e})=>e===t)))));return Object(n.useEffect)((()=>{const e=JSON.parse(i);e.length&&(e.forEach((e=>{delete t[e]})),a(t))}),[i,t]),{expandedRows:t,setExpandedRows:a}},Wo=o.i18n.translate("xpack.synthetics.pingList.statusColumnLabel",{defaultMessage:"Status"}),Ko=o.i18n.translate("xpack.synthetics.pingList.responseCodeColumnLabel",{defaultMessage:"Response code"}),Yo=(o.i18n.translate("xpack.synthetics.pingList.errorTypeColumnLabel",{defaultMessage:"Error type"}),o.i18n.translate("xpack.synthetics.pingList.errorColumnLabel",{defaultMessage:"Error"})),Xo=o.i18n.translate("xpack.synthetics.pingList.locationNameColumnLabel",{defaultMessage:"Location"}),Jo=(o.i18n.translate("xpack.synthetics.pingList.timestampColumnLabel",{defaultMessage:"Timestamp"}),o.i18n.translate("xpack.synthetics.monitorList.table.url.name",{defaultMessage:"Url"}),o.i18n.translate("xpack.synthetics.monitorList.table.tags.name",{defaultMessage:"Tags"}),o.i18n.translate("xpack.synthetics.monitorList.table.project.name",{defaultMessage:"Project ID"}),o.i18n.translate("xpack.synthetics.monitorList.statusColumn.upLabel",{defaultMessage:"Up"})),Qo=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.downLabel",{defaultMessage:"Down"}),Zo=(o.i18n.translate("xpack.synthetics.monitorList.statusColumn.completeLabel",{defaultMessage:"Complete"}),o.i18n.translate("xpack.synthetics.monitorList.statusColumn.failedLabel",{defaultMessage:"Failed"}),o.i18n.translate("xpack.synthetics.seconds.label",{defaultMessage:"seconds"}),o.i18n.translate("xpack.synthetics.seconds.shortForm.label",{defaultMessage:"sec"}),o.i18n.translate("xpack.synthetics.millisecond.abbreviation.label",{defaultMessage:"ms"}),({pingStatus:e,item:t})=>{const a=V()(t.timestamp);let n="";return n=V()().diff(a,"d")>1?a.format("ll LTS"):a.format("LTS"),i.a.createElement("div",{"data-test-subj":`xpack.synthetics.pingList.ping-${t.docId}`},i.a.createElement(w.EuiBadge,{className:"eui-textCenter",color:e===c.z.UP?"success":"danger"},"up"===e?Jo:Qo),i.a.createElement(w.EuiSpacer,{size:"xs"}),i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.pingList.recencyMessage",{values:{fromNow:n},defaultMessage:"Checked {fromNow}",description:"A string used to inform our users how long ago Heartbeat pinged the selected host."})))}),el=Ut.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-udyzge-0"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;"]),tl=({errorType:e,ping:t})=>{var a;return e?i.a.createElement(el,null,e,":",null===(a=t.error)||void 0===a?void 0:a.message):i.a.createElement(i.a.Fragment,null,"--")},al=Ut.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-2ew8eg-0"})(["margin-right:16px;"]),nl=({statusCode:e})=>i.a.createElement(al,null,e?i.a.createElement(w.EuiBadge,{"data-test-subj":"pingResponseCode"},e):"--"),il=Ut()(w.EuiListGroup).withConfig({displayName:"ListGroup",componentId:"sc-1qg3wr9-0"})(["&&&{a{padding-left:0;}}"]),rl=({monitorStatus:e,showTitle:t})=>{var a,n,r,s;const l=null==e||null===(a=e.url)||void 0===a?void 0:a.full,c=null==e||null===(n=e.http)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.redirects,u=[{label:l,href:l,iconType:"globe",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s",alwaysShow:!0,"aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."})}}];(null!=c?c:[]).forEach((e=>{u.push({label:e,href:e,iconType:"sortDown",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s","aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."}),alwaysShow:!0}})}));const d=t?w.EuiPanel:"div";return c?i.a.createElement(d,{"data-test-subj":"uptimeMonitorPingListRedirectInfo"},t&&i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.monitorList.redirects.title",{defaultMessage:"Redirects"}))),i.a.createElement(w.EuiSpacer,{size:"xs"}),i.a.createElement(w.EuiText,null,o.i18n.translate("xpack.synthetics.monitorList.redirects.description",{defaultMessage:"Heartbeat followed {number} redirects while executing ping.",values:{number:null!==(s=null==c?void 0:c.length)&&void 0!==s?s:0}})),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(il,{gutterSize:"none",listItems:u})):null},sl=({headers:e})=>{const t=Object.keys(e).sort().map((t=>({title:t,description:e[t]})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiAccordion,{id:"responseHeaderAccord",buttonContent:i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.pingList.headers.title",{defaultMessage:"Response headers"})))},i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiDescriptionList,{compressed:!0,type:"responsiveColumn",listItems:t})))},ol=({body:e})=>{const t=e.content_bytes||0,a=e.bytes||0,n=[t>0&&t<a?o.i18n.translate("xpack.synthetics.pingList.expandedRow.truncated",{defaultMessage:"Showing first {contentBytes} bytes.",values:{contentBytes:t}}):null,a>0?o.i18n.translate("xpack.synthetics.pingList.expandedRow.bodySize",{defaultMessage:"Body size is {bodyBytes}.",values:{bodyBytes:Object(w.formatNumber)(a,"0b")}}):null].filter((e=>e)).join(" ");return i.a.createElement(w.EuiText,null,n)},ll=({content:e})=>e?i.a.createElement(w.EuiCodeBlock,{overflowHeight:250},e):null,cl=({ping:e})=>{var t,a,n,r,s,l,c,u;const d=[];if(e.error&&d.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.error",{defaultMessage:"Error"}),description:i.a.createElement(w.EuiText,null,e.error.message)}),null!==(t=e.http)&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&a.body){const t=e.http.response.body;d.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.response_body",{defaultMessage:"Response Body"}),description:i.a.createElement(i.a.Fragment,null,i.a.createElement(ol,{body:t}),i.a.createElement(w.EuiSpacer,{size:"s"}),t.content?i.a.createElement(ll,{content:t.content||""}):i.a.createElement(w.EuiText,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.testResults.expandedRow.response_body.notRecorded",defaultMessage:'Body not recorded. Set index response body option to "On Always" in advanced options of monitor configuration to record body.'})))})}return i.a.createElement(w.EuiFlexGroup,{direction:"column"},(null==e||null===(n=e.http)||void 0===n||null===(r=n.response)||void 0===r?void 0:r.redirects)&&i.a.createElement(w.EuiFlexItem,null,i.a.createElement(rl,{monitorStatus:e,showTitle:!0})),(null==e||null===(s=e.http)||void 0===s||null===(l=s.response)||void 0===l?void 0:l.headers)&&i.a.createElement(w.EuiFlexItem,null,i.a.createElement(sl,{headers:null==e||null===(c=e.http)||void 0===c||null===(u=c.response)||void 0===u?void 0:u.headers})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiCallOut,{color:null!=e&&e.error?"danger":"primary"},i.a.createElement(w.EuiDescriptionList,{listItems:d}))))},ul=(e,t,a)=>{if(dl(e))return t[e.docId]?(delete t[e.docId],void a({...t})):void a({...t,[e.docId]:i.a.createElement(cl,{ping:e})})};function dl(e){var t,a,n,i,r,s,o,l;const c=!!e.error,u=null!==(t=null===(a=e.http)||void 0===a||null===(n=a.response)||void 0===n||null===(i=n.body)||void 0===i?void 0:i.bytes)&&void 0!==t&&t;return c||u||(null==e||null===(r=e.http)||void 0===r||null===(s=r.response)||void 0===s?void 0:s.headers)||(null==e||null===(o=e.http)||void 0===o||null===(l=o.response)||void 0===l?void 0:l.redirects)}const ml=({item:e,expandedRows:t,setExpandedRows:a})=>i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"uptimePingListExpandBtn",onClick:n=>{n.stopPropagation(),ul(e,t,a)},isDisabled:!dl(e),"aria-label":t[e.docId]?o.i18n.translate("xpack.synthetics.pingList.collapseRow",{defaultMessage:"Collapse"}):o.i18n.translate("xpack.synthetics.pingList.expandRow",{defaultMessage:"Expand"}),iconType:t[e.docId]?"arrowUp":"arrowDown"});function pl({loading:e,error:t,pings:a,onChange:n}){const{expandedRows:r,setExpandedRows:s}=qo(a),l=a.reduce(((e,t)=>{var a,n;return e||!(null===(a=t.http)||void 0===a||null===(n=a.response)||void 0===n||!n.status_code)}),!1),c=a.reduce(((e,t)=>{var a;return e||!(null===(a=t.error)||void 0===a||!a.type)}),!1),u=[{field:"monitor.status",name:Wo,render:(e,t)=>i.a.createElement(Zo,{pingStatus:e,item:t})},{align:"left",field:"observer.geo.name",name:Xo},{align:"right",field:"monitor.ip",name:o.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})},{align:"center",field:"monitor.duration.us",name:o.i18n.translate("xpack.synthetics.pingList.durationMsColumnLabel",{defaultMessage:"Duration"}),render:e=>e?fn(e):i.a.createElement("span",{"data-test-subj":"ping-list-duration-unavailable-tool-tip"},"--")},...c?[{field:"error.type",name:Yo,width:"30%",render:(e,t)=>i.a.createElement(tl,{ping:t,errorType:e})}]:[],...l?[{field:"http.response.status_code",align:"right",name:i.a.createElement(fl,null,Ko),render:e=>i.a.createElement(nl,{statusCode:e})}]:[],{align:"right",width:"24px",isExpander:!0,render:e=>i.a.createElement(ml,{item:e,expandedRows:r,setExpandedRows:s})}];return i.a.createElement(w.EuiBasicTable,{loading:e,columns:u,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:a,itemId:"docId",itemIdToExpandedRowMap:r,noItemsMessage:e?o.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):o.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",onChange:n})}const fl=Ut.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-1fn544t-0"})(["margin-right:16px;"]);function gl({testRunId:e,expectPings:t,onDone:a}){const[r,s]=Object(n.useState)([]),{summaryDocs:o,loading:l}=Uo({testRunId:e,expectSummaryDocs:t});return Object(n.useEffect)((()=>{o&&(s((e=>{const t=e.reduce(((e,t)=>({...e,[t.docId]:t})),{});return o.map((e=>{var a;return{...e,...null!==(a=t[e.docId])&&void 0!==a?a:{}}}))})),o.length>=t&&a(e))}),[e,t,o,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Mo,{summaryDocs:r,isCompleted:Boolean(o&&o.length>=t)}),o&&i.a.createElement(pl,{pings:r,loading:l}))}function hl({testRun:e,onDone:t,isPushing:a,serviceError:r,errors:s}){var o;const{hasBlockingError:l,blockingErrorTitle:c,blockingErrorMessage:u,expectPings:d}=Ni({testRunId:e.id,serviceError:r,errors:null!=s?s:[],locations:null!==(o=e.monitor.locations)&&void 0!==o?o:[]});Object(n.useEffect)((()=>{a||e.id&&!l||t(e.id)}),[e.id,l,a]);const m="browser"===e.monitor.type;return i.a.createElement(w.EuiPanel,{color:"subdued",hasBorder:!0},l&&!a&&i.a.createElement(w.EuiCallOut,{title:c,color:"danger",iconType:"warning"},u)||null,e&&!l&&!a&&i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,{key:e.id},m?i.a.createElement(No,{expectPings:d,onDone:t,testRunId:e.id}):i.a.createElement(gl,{expectPings:d,onDone:t,testRunId:e.id}))),i.a.createElement(w.EuiSpacer,{size:"xs"}))}function bl({name:e,testRun:t,onClose:a,onDone:n,inProgress:r,isPushing:s,errors:o,serviceError:l}){const c=i.a.createElement(w.EuiFlyout,{type:"push",size:"m",paddingSize:"m",maxWidth:"44%","aria-labelledby":El,onClose:a},i.a.createElement(w.EuiFlyoutHeader,null,i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h2",null,e,"-",yl))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(w.EuiErrorBoundary,null,s&&i.a.createElement(w.EuiCallOut,{color:"primary"},xl," ",i.a.createElement(w.EuiLoadingSpinner,null)),t?i.a.createElement(hl,{isPushing:s,errors:o,serviceError:l,testRun:t,onDone:n}):!s&&i.a.createElement(ji,null))),i.a.createElement(w.EuiFlyoutFooter,null,i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsTestNowModeFlyoutButton",iconType:"cross",onClick:a,flush:"left"},vl)));return i.a.createElement(i.a.Fragment,null,(t||r)&&i.a.createElement(w.EuiErrorBoundary,null,c))}const El=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),yl=o.i18n.translate("xpack.synthetics.monitorManagement.testResults",{defaultMessage:"Test results"}),vl=o.i18n.translate("xpack.synthetics.monitorManagement.closeButtonLabel",{defaultMessage:"Close"}),xl=o.i18n.translate("xpack.synthetics.testRun.pushing.description",{defaultMessage:"Pushing the monitor to service..."});var Sl=a(62),kl=a(78);const Ml=e=>{const t=e[Sl.b.MONITOR_TYPE],a={},n=kl.d[t];return Object.keys(n).map((t=>{var i,r;a[t]=null!==(i=null!==(r=Object(k.get)(e,t.split(".")))&&void 0!==r?r:e[t])&&void 0!==i?i:n[t]})),a},wl=[Sl.b.ENABLED,Sl.b.ALERT_CONFIG],Ol=(e,t=!1)=>{const a=Ml(e),n=a[Sl.b.TEXT_ASSERTION]?`\n          await page.getByText('${a[Sl.b.TEXT_ASSERTION]}').first().waitFor();`:"",i={[Sl.d.SINGLE]:{...a,[Sl.b.SOURCE_INLINE]:`step('Go to ${a[Sl.b.URLS]}', async () => {\n          await page.goto('${a[Sl.b.URLS]}');${n}\n        });`,[Sl.b.FORM_MONITOR_TYPE]:Sl.d.SINGLE},[Sl.d.MULTISTEP]:{...a,[Sl.b.METADATA]:{script_source:{is_generated_script:"recorder"===Object(k.get)(e,"source.inline.type"),file_name:Object(k.get)(e,"source.inline.fileName")||""}},[Sl.b.FORM_MONITOR_TYPE]:Sl.d.MULTISTEP},[Sl.d.HTTP]:{...a,[Sl.b.METADATA]:{is_tls_enabled:e.isTLSEnabled},[Sl.b.FORM_MONITOR_TYPE]:Sl.d.HTTP},[Sl.d.TCP]:{...a,[Sl.b.METADATA]:{is_tls_enabled:e.isTLSEnabled},[Sl.b.FORM_MONITOR_TYPE]:Sl.d.TCP},[Sl.d.ICMP]:{...a,[Sl.b.FORM_MONITOR_TYPE]:Sl.d.ICMP}}[e[Sl.b.FORM_MONITOR_TYPE]];return t?Object(k.pick)(i,wl):i};var Tl=a(140);const Cl=({canUsePublicLocations:e=!0})=>{var t;const{formState:a,getValues:r,handleSubmit:s}=Object(gn.useFormContext)(),[o,l]=Object(n.useState)(!1),[c,u]=Object(n.useState)(),{data:d,loading:m,error:p}=Object(N.useFetcher)((()=>{if(null!=c&&c.id)return Object(Tl.a)({monitor:c.monitor,id:c.id})}),[null==c?void 0:c.id]),{tooltipContent:f,isDisabled:g}=Il(a.isValid,o);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiToolTip,{key:f,content:f},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsRunTestBtn",color:"success",disabled:g||!e,"aria-label":Pl,iconType:"play",onClick:s((()=>{const e=r();e&&!Object.keys(a.errors).length&&(l(!0),u({id:Object(hn.v4)(),name:e.name,monitor:Ol(e)}))}))},Ll)),c&&i.a.createElement(bl,{serviceError:p,errors:null!==(t=null==d?void 0:d.errors)&&void 0!==t?t:[],isPushing:Boolean(m),testRun:c,name:c.name,inProgress:o,onClose:()=>{u(void 0),l(!1)},onDone:()=>{l(!1)}}))},Il=(e,t)=>{let a=e?jl:_l;return a=t?Fl:a,{tooltipContent:a,isDisabled:t||!e}},jl=o.i18n.translate("xpack.synthetics.testRun.description",{defaultMessage:"Test your monitor and verify the results before saving"}),_l=o.i18n.translate("xpack.synthetics.testRun.invalid",{defaultMessage:"Monitor has to be valid to run test, please fix above required fields."}),Fl=o.i18n.translate("xpack.synthetics.monitorList.testNow.scheduled",{defaultMessage:"Test is already scheduled"}),Pl=o.i18n.translate("xpack.synthetics.monitorList.testNow.AriaLabel",{defaultMessage:"Click to run test now"}),Ll=o.i18n.translate("xpack.synthetics.monitorList.runTest.label",{defaultMessage:"Run test"}),Rl=e=>{var t,a,n;const{data:{monitors:i}}=Object(u.useSelector)($.R),r=null==i?void 0:i.filter((t=>t.configId===e&&t.location.isServiceManaged)),s=null===(t=null===(a=Object(T.useKibana)().services)||void 0===a||null===(n=a.application)||void 0===n?void 0:n.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t;return!r||!!s};var Dl=a(81),Al=a(83);const Nl=Ut.a.div.withConfig({displayName:"Container",componentId:"sc-1fweaiq-0"})([""," border-radius:",";",""],(({position:e})=>"relative"===e?"\n  display: inline-block;\n  position: relative;\n  bottom: 42px;\n  left: 12px;\n  z-index: 1;\n":""),(({theme:e})=>e.eui.euiBorderRadius),(({boxShadow:e,position:t})=>"relative"===t?e:"")),Bl=Ut()(w.EuiPanel).withConfig({displayName:"CustomShadowPanel",componentId:"sc-1fweaiq-1"})(["",""],(e=>e.shadow));function zl({children:e,hasPanel:t}){const a=Object(w.useEuiShadow)("s");return t?i.a.createElement(Bl,{color:"plain",element:"button",grow:!1,paddingSize:"none",hasShadow:!1,shadow:a},e):e}function Hl({isPopoverOpen:e,isInspectView:t,setIsPopoverOpen:a,monitor:r,position:s,iconHasPanel:o=!0,iconSize:l="s",locationId:c}){const d=Object(w.useEuiShadow)("l"),m=Object(u.useDispatch)(),p=De(r),f=Pn({configId:r.configId,locationId:null!=c?c:r.location.id}),g=function({configId:e,locators:t}){var a,i,r;const[s,o]=Object(n.useState)(void 0),l=null===(a=ut())||void 0===a||null===(i=a.share)||void 0===i?void 0:i.url.locators,c=null===(r=t||l)||void 0===r?void 0:r.get(Ke.syntheticsEditMonitorLocatorID);return Object(n.useEffect)((()=>{!async function(){const t=await(null==c?void 0:c.getUrl({configId:e}));o(t)}()}),[c,e]),s}({configId:r.configId}),h=qt(),b=Rl(r.configId),E=Object(n.useMemo)((()=>({enabledSuccessLabel:Zl(r.name),disabledSuccessLabel:ec(r.name),failureLabel:tc(r.name)})),[r.name]),{status:y,isEnabled:v,updateMonitorEnabledState:x}=We({configId:r.configId,isEnabled:r.isEnabled,labels:E}),{alertStatus:S,updateAlertEnabledState:k}=Ca(),[M,O]=Object(n.useState)(r.isEnabled?Xl:Yl),T=Object(u.useSelector)(Object(Dl.e)(r.configId));Object(n.useEffect)((()=>{y===N.FETCH_STATUS.LOADING?O(Kl(r.isEnabled)):y===N.FETCH_STATUS.SUCCESS&&(O(v?Xl:Yl),e&&a(!1))}),[O,y,v,r.isEnabled,e,a]);const C={name:Gl,icon:"inspect",disabled:!p,onClick:()=>{p&&(m(Object(Al.c)({configId:r.configId,location:p,id:r.id,locationId:r.location.id})),a(!1))}},I=S(r.configId)===N.FETCH_STATUS.LOADING;let j=[{name:ql,icon:"sortRight",href:f},C,{name:T?i.a.createElement(w.EuiToolTip,{content:Fl},i.a.createElement("span",null,Vl)):i.a.createElement(Mn,{canUsePublicLocations:b},Vl),icon:"beaker",disabled:T||!b,onClick:()=>{m(Dl.d.get({configId:r.configId,name:r.name})),m(Object(Al.c)(null)),a(!1)}},{name:i.a.createElement(Mn,{canEditSynthetics:h},Wl),icon:"pencil",disabled:!h,href:g},{name:i.a.createElement(Mn,{canEditSynthetics:h,canUsePublicLocations:b},M),icon:"invert",disabled:!h||!b,onClick:()=>{y!==N.FETCH_STATUS.LOADING&&x(!r.isEnabled)}},{name:i.a.createElement(Mn,{canEditSynthetics:h,canUsePublicLocations:b},r.isStatusAlertEnabled?Jl:Ql),disabled:!h||!b,icon:I?i.a.createElement(w.EuiLoadingSpinner,{size:"s"}):r.isStatusAlertEnabled?"bellSlash":"bell",onClick:()=>{I||k({monitor:{[He.c.ALERT_CONFIG]:Object(Ta.c)({status:{enabled:r.isStatusAlertEnabled}})},configId:r.configId,name:r.name})}}];return t&&(j=j.filter((e=>e!==C))),i.a.createElement(Nl,{boxShadow:d,position:s},i.a.createElement(w.EuiPopover,{button:i.a.createElement(zl,{hasPanel:o},i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsActionsPopoverButton","aria-label":$l,iconType:"boxesHorizontal",color:"primary",size:l,display:"empty",onClick:()=>a((e=>!e)),title:$l})),color:"lightestShade",isOpen:e,closePopover:()=>a(!1),anchorPosition:"rightUp",panelPaddingSize:"none"},i.a.createElement(w.EuiContextMenu,{initialPanelId:0,panels:[{id:"0",title:Ul,items:j}]})))}const Gl=o.i18n.translate("xpack.synthetics.overview.actions.quickInspect.title",{defaultMessage:"Quick inspect"}),Vl=o.i18n.translate("xpack.synthetics.overview.actions.runTestManually.title",{defaultMessage:"Run test manually"}),$l=o.i18n.translate("xpack.synthetics.overview.actions.openPopover.ariaLabel",{defaultMessage:"Open actions menu"}),Ul=o.i18n.translate("xpack.synthetics.overview.actions.menu.title",{defaultMessage:"Actions",description:"This is the text in the heading of a menu containing a set of actions"}),ql=o.i18n.translate("xpack.synthetics.overview.actions.goToMonitor.name",{defaultMessage:"Go to monitor",description:"This is the text for a menu item that will take the user to the monitor detail page"}),Wl=o.i18n.translate("xpack.synthetics.overview.actions.editMonitor.name",{defaultMessage:"Edit monitor",description:"This is the text for a menu item that will take the user to the monitor edit page"}),Kl=e=>e?o.i18n.translate("xpack.synthetics.overview.actions.disablingLabel",{defaultMessage:"Disabling monitor"}):o.i18n.translate("xpack.synthetics.overview.actions.enablingLabel",{defaultMessage:"Enabling monitor"}),Yl=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelEnableMonitor",{defaultMessage:"Enable monitor (all locations)"}),Xl=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelDisableMonitor",{defaultMessage:"Disable monitor (all locations)"}),Jl=o.i18n.translate("xpack.synthetics.overview.actions.disableLabelDisableAlert",{defaultMessage:"Disable status alerts (all locations)"}),Ql=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelDisableAlert",{defaultMessage:"Enable status alerts (all locations)"}),Zl=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledSuccessLabel",{defaultMessage:'Monitor "{name}" enabled successfully',values:{name:e}}),ec=e=>o.i18n.translate("xpack.synthetics.overview.actions.disabledSuccessLabel",{defaultMessage:'Monitor "{name}" disabled successfully.',values:{name:e}}),tc=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledFailLabel",{defaultMessage:'Unable to update monitor "{name}".',values:{name:e}}),ac={terms:{"synthetics.type":["step/end"]}},nc=e=>{var t,a,i;const r=Object(u.useDispatch)(),{lastRefresh:s}=K(),{monitor:o}=wa(),l=$s(),c=null!==(t=null==e?void 0:e.monitorId)&&void 0!==t?t:null==o?void 0:o.id,d=null==l?void 0:l.label,{data:m,loading:p,loaded:f}=Object(u.useSelector)($.J),g=null==m?void 0:m.monitor.id,h=g===c||g===(null==o?void 0:o[He.c.CUSTOM_HEARTBEAT_ID]),b=(null==m||null===(a=m.observer)||void 0===a||null===(i=a.geo)||void 0===i?void 0:i.name)===d,E=h&&b;return Object(n.useEffect)((()=>{c&&d&&r($.q.get({monitorId:c,locationId:d}))}),[r,c,d,E,s]),c&&d&&m&&h&&b?{loading:p,latestPing:m,loaded:f}:{loading:p,latestPing:void 0,loaded:f}};function ic(e,t,a){return"down"===(null==a?void 0:a.monitor.status)&&e["@timestamp"]===t["@timestamp"]&&void 0!==typeof t["@timestamp"]}const rc=({errorStates:e,upStates:t,loading:a})=>{var r,s;const{monitorId:o}=Object(p.useParams)(),l=Object(n.useMemo)((()=>e.map((e=>e.monitor.check_group))),[e]),{failedSteps:u}=function(e){const{lastRefresh:t}=K(),{monitorId:a}=Object(p.useParams)(),{data:i,loading:r}=Object(N.useEsSearch)({index:(null==e?void 0:e.length)>0?c.B:"",body:{size:e.length,query:{bool:{filter:[ac,{exists:{field:"synthetics.error"}},{terms:{"monitor.check_group":e}}]}},sort:[{"synthetics.step.index":{order:"asc"}},{"@timestamp":{order:"asc"}}],_source:["synthetics.step","synthetics.error","monitor.check_group"]}},[t,a,e],{name:"getMonitorErrorFailedStep"});return Object(n.useMemo)((()=>{var e;return{failedSteps:(null!==(e=null==i?void 0:i.hits.hits)&&void 0!==e?e:[]).map((e=>e._source)),loading:r}}),[i,r])}(l),d="browser"===(null===(r=e[0])||void 0===r?void 0:r.monitor.type),m=Object(p.useHistory)(),f=qn(),g=$s(),{latestPing:h}=nc({monitorId:o}),b=null==e||null===(s=e.sort(((e,t)=>V()(t.state.started_at).valueOf()-V()(e.state.started_at).valueOf())))||void 0===s?void 0:s[0],E=Object(w.useIsWithinMinBreakpoint)("s"),y=[{field:"item.state.started_at",name:dc,sortable:e=>V()(e.state.started_at).valueOf(),render:(e,t)=>{var a;const n=i.a.createElement(gc,{configId:o,stateId:null===(a=t.state)||void 0===a?void 0:a.id,label:f(t.state.started_at),locationId:null==g?void 0:g.id});return ic(b,t,h)?i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",alignItems:"center",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},n),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(pc,{iconType:"clock",iconSide:"right"},mc))):n},mobileOptions:{header:!1}},...d?[{field:"monitor.check_group",name:uc,truncateText:!0,sortable:e=>{var t,a;const n=u.find((t=>t.monitor.check_group===e.monitor.check_group));return n?null===(t=n.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.name:e.monitor.check_group},render:e=>{var t,a,n,r;const s=u.find((t=>t.monitor.check_group===e));return s?i.a.createElement(w.EuiText,{size:"s"},null===(t=s.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,". ",null===(n=s.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.name):i.a.createElement(i.a.Fragment,null,"--")}}]:[],{field:"error.message",name:cc},{field:"state.duration_ms",name:lc,align:"right",sortable:!0,render:(e,a)=>{let n=0;if(a.monitor.timespan){const e=V()(a.monitor.timespan.lt).diff(V()(a.monitor.timespan.gte),"millisecond");if(ic(b,a,h)){const t=V()().diff(a["@timestamp"]);n=t<e?t:e}else{var r;const e=function(e,t){for(const a of t)if(V()(a.state.started_at).valueOf()>V()(e["@timestamp"]).valueOf())return a}(a,t);n=null!==(r=V()(null==e?void 0:e.state.started_at).diff(a["@timestamp"]))&&void 0!==r?r:0}}return i.a.createElement(w.EuiText,{size:"s"},Ws(Number(e)+n,!0))}}];return i.a.createElement("div",null,i.a.createElement(w.EuiSpacer,null),i.a.createElement(fc,{tableLayout:"auto",tableCaption:oc,loading:a,items:e,columns:y,rowProps:e=>{const{state:t}=e;if(null!=t&&t.id)return{"data-test-subj":`row-${t.id}`,onClick:e=>{m.push(`/monitor/${o}/errors/${t.id}?locationId=${null==g?void 0:g.id}`)}}},pagination:{pageSizeOptions:[5,10,20,50,100]},sorting:{sort:{field:"item.state.started_at",direction:"desc"}},$_css:E?"auto":void 0}))},sc=({basePath:e,configId:t,stateId:a,locationId:n})=>`${e}/app/synthetics/monitor/${t}/errors/${a}?locationId=${n}`,oc=o.i18n.translate("xpack.synthetics.errorsList.label",{defaultMessage:"Errors list"}),lc=o.i18n.translate("xpack.synthetics.errorDuration.label",{defaultMessage:"Error duration"}),cc=o.i18n.translate("xpack.synthetics.errorMessage.label",{defaultMessage:"Error message"}),uc=o.i18n.translate("xpack.synthetics.failedStep.label",{defaultMessage:"Failed step"}),dc=o.i18n.translate("xpack.synthetics.timestamp.label",{defaultMessage:"@timestamp"}),mc=o.i18n.translate("xpack.synthetics.active.label",{defaultMessage:"Active"});var pc=Ut()(w.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-1yp5hoz-0"})({maxWidth:"max-content"}),fc=Ut()(w.EuiInMemoryTable).withConfig({displayName:"_StyledEuiInMemoryTable",componentId:"sc-1yp5hoz-1"})((e=>({overflowX:e.$_css})));const gc=({stateId:e,configId:t,label:a,locationId:n})=>{const r=bc({configId:t,stateId:e,locationId:n});return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsErrorDetailsLinkLink",href:r},null!=a?a:Ec)},hc=({stateId:e,configId:t,label:a})=>{const n=$s(),r=bc({configId:t,stateId:e,locationId:null==n?void 0:n.id});return i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsErrorDetailsButtonButton",flush:"left",iconType:"warning",color:"danger",href:r},null!=a?a:Ec)},bc=({stateId:e,configId:t,locationId:a})=>{const{basePath:n}=tt();return sc({basePath:n,configId:t,stateId:e,locationId:a})},Ec=o.i18n.translate("xpack.synthetics.monitor.step.viewErrorDetails",{defaultMessage:"View error details"}),yc=Ut.a.div.withConfig({displayName:"Container",componentId:"sc-1ivtf5p-0"})(["display:inline-block;position:absolute;right:10px;top:10px;z-index:1;"]),vc=({monitor:e,status:t,ping:a,timestamp:i,configIdByLocation:r})=>{var s;const o=Object(u.useSelector)(Object(Dl.f)(e.configId)),l=Object(u.useSelector)($.H),c=Object(u.useDispatch)(),d=Object(n.useRef)(null),m=Object(Dl.c)(o),p=bc({configId:e.configId,stateId:null==a||null===(s=a.state)||void 0===s?void 0:s.id,locationId:e.location.id}),f=Object(w.useEuiShadow)("s"),g=qn()(i);if(m)return n.createElement(yc,null,n.createElement(w.EuiToolTip,{position:"top",content:Sc},n.createElement(w.EuiLoadingSpinner,null)));const h=()=>{c(Object($.nb)(null))};var b;return"down"===t?n.createElement(yc,null,n.createElement(w.EuiPopover,{button:n.createElement(kc,{onMouseEnter:()=>{d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{c(Object($.nb)(r))}),300)},onMouseLeave:()=>{l||d.current&&clearTimeout(d.current)},boxShadow:f,onClick:()=>{c(r===l?Object($.nb)(null):Object($.nb)(r))}},n.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsMetricItemIconButton",iconType:"warning",color:"danger",size:"m","aria-label":xc})),isOpen:r===l,closePopover:h,anchorPosition:"upCenter",panelStyle:{outline:"none"}},n.createElement(w.EuiPopoverTitle,null,n.createElement(w.EuiFlexGroup,null,n.createElement(w.EuiFlexItem,{grow:!0},g),n.createElement(w.EuiFlexItem,{grow:!1},n.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsMetricItemIconButton",iconType:"cross",onClick:h})))),n.createElement("div",{style:{width:"300px"}},n.createElement(w.EuiCallOut,{title:null==a||null===(b=a.error)||void 0===b?void 0:b.message,color:"danger",iconType:"warning"})),n.createElement(w.EuiPopoverFooter,null,n.createElement(w.EuiButton,{"data-test-subj":"syntheticsMetricItemIconButton",fullWidth:!0,size:"s",href:p},xc)))):null},xc=o.i18n.translate("xpack.synthetics.errorDetails.label",{defaultMessage:"Error details"}),Sc=o.i18n.translate("xpack.synthetics.inProgress.label",{defaultMessage:"Manual test run is in progress."}),kc=A.euiStyled.div`
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  width: 32px;
  height: 32px;
  background: #ffffff;
  border: 1px solid #d3dae6;
  ${({boxShadow:e})=>e}
  border-radius: 16px;
  flex: none;
  order: 0;
  flex-grow: 0;
`,Mc=(e,t,a)=>{if(!t)return e.eui.euiColorLightestShade;switch(a){case"down":return e.eui.euiColorVis9_behindText;case"up":default:return e.eui.euiColorVis0_behindText;case"unknown":return e.eui.euiColorGhost}},wc=({monitor:e,medianDuration:t,maxDuration:a,minDuration:r,avgDuration:s,data:l,onClick:c})=>{var d;const[m,p]=Object(n.useState)(!1),[f,g]=Object(n.useState)(!1),h=Object(u.useSelector)($.H),b=De(e),{status:E,timestamp:y,ping:v,configIdByLocation:x}=Be({configId:e.configId,locationId:e.location.id}),S=Object(N.useTheme)(),k=Object(u.useSelector)(Object(Dl.e)(e.configId)),M=Object(u.useDispatch)();return i.a.createElement("div",{"data-test-subj":`${e.name}-metric-item`,style:{height:"160px"}},i.a.createElement(w.EuiPanel,{"data-test-subj":`${e.name}-metric-item-${b}-${E}`,paddingSize:"none",onMouseOver:()=>{m||p(!0)},onMouseLeave:()=>{h&&M(Object($.nb)(null)),m&&p(!1)},style:{height:"100%",overflow:"hidden",position:"relative"},title:V()(y).format("LLL")},i.a.createElement(it.Chart,null,i.a.createElement(it.Settings,{onElementClick:()=>{k?(M(Object(Dl.j)(e.configId)),M(Object($.nb)(null))):(M(Object(Dl.b)()),M(Object($.nb)(null))),!k&&b&&c({configId:e.configId,id:e.id,location:b,locationId:e.location.id})},baseTheme:it.DARK_THEME,locale:o.i18n.getLocale()}),i.a.createElement(it.Metric,{id:`${e.configId}-${null===(d=e.location)||void 0===d?void 0:d.id}`,data:[[{title:e.name,subtitle:b,value:t,trendShape:it.MetricTrendShape.Area,trend:l,extra:i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"flexEnd",title:"",component:"span"},i.a.createElement(w.EuiFlexItem,{grow:!1,component:"span"},o.i18n.translate("xpack.synthetics.overview.duration.label",{defaultMessage:"Duration"})),i.a.createElement(w.EuiFlexItem,{grow:!1,component:"span"},i.a.createElement(w.EuiIconTip,{title:o.i18n.translate("xpack.synthetics.overview.duration.description",{defaultMessage:"Median duration of last 50 checks"}),content:o.i18n.translate("xpack.synthetics.overview.duration.description.values",{defaultMessage:"Avg: {avg}, Min: {min}, Max: {max}",values:{avg:fn(s,{noSpace:!0}),min:fn(r,{noSpace:!0}),max:fn(a,{noSpace:!0})}}),position:"top"}))),valueFormatter:e=>fn(e),color:Mc(S,e.isEnabled,E)}]]})),(m||f)&&i.a.createElement(Hl,{monitor:e,isPopoverOpen:f,setIsPopoverOpen:g,position:"relative",locationId:e.location.id}),x&&i.a.createElement(vc,{monitor:e,status:E,ping:v,timestamp:y,configIdByLocation:x})))},Oc=({monitor:e,onClick:t})=>{var a;const{timestamp:r}=Be({configId:e.configId,locationId:e.location.id}),{data:s,medianDuration:o,maxDuration:l,avgDuration:d,minDuration:m}=function({monitorId:e,locationId:t,timestamp:a,schedule:i}){const{hits:r,loading:s}=function({monitorId:e,locationId:t,fields:a=["*"],size:i=50,timestamp:r,schedule:s}){var o,l;const{lastRefresh:d}=K(),{locationsLoaded:m,locations:p}=Object(u.useSelector)($.X),f=Object(N.createEsParams)({index:c.B,body:{size:i,query:{bool:{filter:[Pe.c,Pe.b,Le(s),{term:{"monitor.id":e}}],...Object(Pe.e)({locationId:t,locationName:(null===(o=p.find((e=>e.id===t)))||void 0===o?void 0:o.label)||c.F})}},_source:!1,sort:[{"@timestamp":"desc"}],fields:a}}),{data:g}=Fe(f,[d],{name:`zGetLastXChecks/${e}/${t}`,isRequestReady:m&&Boolean(r)}),h=JSON.stringify(null==g||null===(l=g.hits)||void 0===l?void 0:l.hits);return Object(n.useMemo)((()=>{var e;return{hits:(null==g||null===(e=g.hits)||void 0===e?void 0:e.hits.map((e=>e.fields)))||[],loading:!g}}),[h])}({monitorId:e,locationId:t,fields:Re,size:50,timestamp:a,schedule:i}),{data:o,median:l,min:d,max:m,avg:p}=Object(n.useMemo)((()=>{var e,t,a,n,i,o;if(s)return{data:[],median:0,avg:0,min:0,max:0};const l=r.reverse().map(((e,t)=>{var a;const n=null==e||null===(a=e["monitor.duration.us"])||void 0===a?void 0:a[0];return void 0===n?null:{x:t,y:n}})).filter((e=>null!==e)),c=[...r].sort(((e,t)=>{var a,n;return((null==e||null===(a=e["monitor.duration.us"])||void 0===a?void 0:a[0])||0)-((null==t||null===(n=t["monitor.duration.us"])||void 0===n?void 0:n[0])||0)}));return{data:l,median:(null===(e=c[Math.floor(r.length/2)])||void 0===e||null===(t=e["monitor.duration.us"])||void 0===t?void 0:t[0])||0,avg:c.reduce(((e,t)=>{var a;return e+((null==t||null===(a=t["monitor.duration.us"])||void 0===a?void 0:a[0])||0)}),0)/r.length,min:(null===(a=c[0])||void 0===a||null===(n=a["monitor.duration.us"])||void 0===n?void 0:n[0])||0,max:(null===(i=c[c.length-1])||void 0===i||null===(o=i["monitor.duration.us"])||void 0===o?void 0:o[0])||0}}),[r,s]);return Object(n.useMemo)((()=>({data:o,medianDuration:l,avgDuration:p,minDuration:d,maxDuration:m,loading:s})),[o,l,p,d,m,s])}({locationId:null===(a=e.location)||void 0===a?void 0:a.id,monitorId:e.id,timestamp:r,schedule:e.schedule});return i.a.createElement(wc,{data:s,monitor:e,medianDuration:o,maxDuration:l,avgDuration:d,minDuration:m,onClick:t})},Tc=({loaded:e,groupLabel:t,fullScreenGroup:a,setFullScreenGroup:r,groupMonitors:s,setFlyoutConfigCallback:o})=>{const{status:l}=Object(u.useSelector)(Ne.f),c=(({groupMonitors:e})=>{const{status:t}=Object(u.useSelector)(Ne.f),{statusFilter:a}=xe(),{locations:n}=Object(u.useSelector)($.X);return"all"!==a&&a?"disabled"===a?e.filter((e=>!e.isEnabled)):e.filter((e=>{var i,r;const s=null!==(i=null===(r=n.find((t=>t.id===e.location.id)))||void 0===r?void 0:r.label)&&void 0!==i?i:e.location.id,o=ze(t,e.id,s);return"up"===a&&"up"===o.status||"down"===a&&"down"===o.status})):e})({groupMonitors:s}),d=c.filter((e=>{const t=null==l?void 0:l.downConfigs;var a,n;if(t)return"down"===(null===(a=t[`${e.configId}-${null===(n=e.location)||void 0===n?void 0:n.label}`])||void 0===a?void 0:a.status)})).length,m=c.length/4,[p,f]=Object(n.useState)(0),[g,h]=Object(n.useState)(2),b=c.slice(p*g*4,(p+1)*g*4),{status:E}=Object(u.useSelector)(Ne.f);Object(H.useKey)("Escape",(()=>{a===t&&r("")}));const y=!e||!E;return i.a.createElement(w.EuiAccordion,{initialIsOpen:a===t,isDisabled:a===t||0===c.length,id:"groupAccordion"+t,buttonContent:i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{className:"eui-textNoWrap"},t),d>0&&i.a.createElement(w.EuiFlexItem,{className:"eui-textNoWrap"},i.a.createElement(w.EuiNotificationBadge,{color:"accent"},d))),extraAction:i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsGroupGridItemButton",isDisabled:0===c.length,className:"fullScreenButton",iconType:"fullScreen","aria-label":"Full screen",onClick:()=>{a?(r(""),document.exitFullscreen()):(document.documentElement.requestFullscreen(),r(t))}})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiBadge,{color:"subdued"},c.length," Monitors"))),isLoading:y},i.a.createElement(w.EuiSpacer,{size:"m"}),y?i.a.createElement(mn,{rows:2}):i.a.createElement(w.EuiFlexGrid,{columns:4,gutterSize:"m","data-test-subj":"syntheticsOverviewGridItemContainer"},b.map((e=>{var t;return i.a.createElement(w.EuiFlexItem,{key:`${e.id}-${null===(t=e.location)||void 0===t?void 0:t.id}`,"data-test-subj":"syntheticsOverviewGridItem"},i.a.createElement(Oc,{monitor:e,onClick:o}))}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiTablePagination,{"aria-label":"Monitor grid pagination",pageCount:Math.ceil(m/g),activePage:p,onChangePage:e=>f(e),itemsPerPage:g,onChangeItemsPerPage:e=>{h(e),f(0)},itemsPerPageOptions:[2,3,4,5,10]}))},Cc=({loaded:e,currentMonitors:t,setFlyoutConfigCallback:a})=>{const[r,s]=Object(n.useState)(""),{groupBy:{field:o,order:l}}=Object(u.useSelector)($.R),{locations:c}=Object(u.useSelector)($.X),d=pa();if(!d)return i.a.createElement(w.EuiLoadingSpinner,null);const{monitorTypes:m,locations:p,projects:f,tags:g}=d;let h={key:"location",items:p,values:da(p,"locations",c),otherValues:{label:"Without any location",items:t.filter((e=>0===Object(k.get)(e,"locations",[]).length))}};switch(o){case He.c.MONITOR_TYPE:h={key:He.c.MONITOR_TYPE,items:m,values:da(m,"monitorTypes",c),otherValues:{label:"Invalid monitor type",items:t.filter((e=>!Object(k.get)(e,He.c.MONITOR_TYPE)))}};break;case"locationId":h={key:"location.label",items:p,values:da(p,"locations",c),otherValues:{label:"Without any location",items:t.filter((e=>!Object(k.get)(e,"location")))}};break;case He.c.TAGS:h={key:He.c.TAGS,items:g,values:da(g,"tags",c),otherValues:{label:"Without any tags",items:t.filter((e=>0===Object(k.get)(e,"tags",[]).length))}};break;case He.c.PROJECT_ID:h={key:"projectId",items:f,values:da(f,"projects",c),otherValues:{label:"UI Monitors",items:t.filter((e=>!Boolean(e.projectId)))}}}const b=Object(k.orderBy)(h.values,"label",null!=l?l:"asc");return 0===m.length?i.a.createElement(mn,null):i.a.createElement(i.a.Fragment,null,b.map((n=>{const o=t.filter((e=>{const t=Object(k.get)(e,h.key);if(Array.isArray(t))return t.includes(n.label);if(h.key===He.c.MONITOR_TYPE){const t=Object(k.invert)(ma)[n.label];return Object(k.get)(e,h.key)===t}return Object(k.get)(e,h.key)===n.label}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ic,{isFullScreen:r===n.label},i.a.createElement(Tc,{groupLabel:n.label,groupMonitors:o,loaded:e,setFlyoutConfigCallback:a,setFullScreenGroup:s,fullScreenGroup:r})),i.a.createElement(w.EuiSpacer,{size:"m"}))})),h.otherValues.items.length>0&&i.a.createElement(Ic,{isFullScreen:r===h.otherValues.label},i.a.createElement(Tc,{groupLabel:h.otherValues.label,groupMonitors:h.otherValues.items,loaded:e,setFlyoutConfigCallback:a,setFullScreenGroup:s,fullScreenGroup:r})))},Ic=({isFullScreen:e,children:t})=>{const a=Object(n.useRef)(null);return e?i.a.createElement(w.EuiOverlayMask,null,i.a.createElement(w.EuiFocusTrap,{clickOutsideDisables:!0},i.a.createElement("div",{ref:a},i.a.createElement(_c,{hasShadow:!1,hasBorder:!0},t)))):i.a.createElement(jc,{hasShadow:!1,hasBorder:!0},t)},jc=Ut()(w.EuiPanel).withConfig({displayName:"StyledPanel",componentId:"sc-1hv469r-0"})(["&&&{.fullScreenButton{visibility:hidden;}:hover{.fullScreenButton{visibility:visible;}}}"]),_c=Ut()(w.EuiPanel).withConfig({displayName:"FullScreenPanel",componentId:"sc-1hv469r-1"})(["&&&{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;}"]),Fc=({sortOptions:e,orderOptions:t,sortField:a})=>{const[r,s]=Object(n.useState)(!1),o=Object(w.useGeneratedHtmlId)({prefix:"singleContextMenuPopover"}),l=()=>{s(!1)},c=i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsSortMenuButton",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>{s(!r)}},a),u=[i.a.createElement(w.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"sort_by_title"},i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h4",null,Lc))),...e.map((e=>i.a.createElement(Pc,{option:e,onClosePopover:l,key:e.value}))),i.a.createElement(w.EuiHorizontalRule,{key:"hr",margin:"none"}),i.a.createElement(w.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"order_by_title"},i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h4",null,Rc))),...t.map((e=>i.a.createElement(Pc,{option:e,onClosePopover:l,key:e.value})))];return i.a.createElement(w.EuiPopover,{id:o,button:c,isOpen:r,closePopover:l,panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(w.EuiContextMenuPanel,{size:"s",items:u,style:{minWidth:160}}))},Pc=({option:e,onClosePopover:t})=>{return i.a.createElement(w.EuiContextMenuItem,{size:"s",key:e.value,icon:(a=e.checked,a?"check":"empty"),onClick:()=>{t(),e.onClick()}},e.label);var a},Lc=o.i18n.translate("xpack.synthetics.overview.sortPopover.sortBy.title",{defaultMessage:"Sort by"}),Rc=o.i18n.translate("xpack.synthetics.overview.sortPopover.orderBy.title",{defaultMessage:"Order"}),Dc=({groupOptions:e,orderByOptions:t,groupField:a})=>{const[r,s]=Object(n.useState)(!1),o=Object(w.useGeneratedHtmlId)({prefix:"singleContextMenuPopover"}),l=()=>{s(!1)},c=i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsGroupMenuButton",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>{s(!r)}},a),u=[i.a.createElement(w.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"group_title_panel"},i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h4",null,Hc))),...e.map((e=>i.a.createElement(Ac,{option:e,onClosePopover:l,key:e.value}))),i.a.createElement(w.EuiHorizontalRule,{key:"hr",margin:"none"}),i.a.createElement(w.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"order_by_title"},i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h4",null,Rc))),...t.map((e=>i.a.createElement(Ac,{option:e,onClosePopover:l,key:e.value})))];return i.a.createElement(w.EuiPopover,{id:o,button:c,isOpen:r,closePopover:l,panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(w.EuiContextMenuPanel,{size:"s",items:u,style:{minWidth:160}}))},Ac=({option:e,onClosePopover:t})=>{return i.a.createElement(w.EuiContextMenuItem,{size:"s",key:e.value,icon:(a=e.checked,a?"check":"empty"),onClick:()=>{t(),e.onClick()}},e.label);var a};var Nc=a(73);const Bc=()=>{const{groupBy:{field:e,order:t}}=Object(u.useSelector)(Nc.g),a=Object(u.useDispatch)(),[r,s]=Se(),{groupBy:o,groupOrderBy:l}=r(),c=Object(n.useRef)(!1);Object(n.useEffect)((()=>{o!==e&&(o||"none"===e||c.current?a(Object(Nc.i)({field:null!=o?o:"none",order:null!=l?l:"asc"})):s({groupBy:e,groupOrderBy:t})),c.current=!0}),[a,e,t,o,l]);const d=e=>{a(Object(Nc.i)(e)),s({groupBy:e.field,groupOrderBy:e.order})},m=[{label:qc,value:"none",checked:"none"===e,defaultSortOrder:"asc",onClick:()=>{d({field:"none",order:t})}},{label:Wc,value:"location.id",checked:"locationId"===e,defaultSortOrder:"asc",onClick:()=>{d({field:"locationId",order:t})}},{label:Kc,value:He.c.MONITOR_TYPE,checked:e===He.c.MONITOR_TYPE,defaultSortOrder:"desc",onClick:()=>{d({field:He.c.MONITOR_TYPE,order:t})}},{label:Yc,value:He.c.TAGS,checked:e===He.c.TAGS,defaultSortOrder:"desc",onClick:()=>{d({field:He.c.TAGS,order:t})}},{label:Xc,value:He.c.PROJECT_ID,checked:e===He.c.PROJECT_ID,defaultSortOrder:"desc",onClick:()=>{d({field:He.c.PROJECT_ID,order:t})}}],{asc:p,desc:f,label:g}=zc(e),h=[{label:p,value:"asc",checked:"asc"===t,onClick:()=>{d({field:e,order:"asc"})}},{label:f,value:"desc",checked:"desc"===t,onClick:()=>{d({field:e,order:"desc"})}}];return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xxxs"},i.a.createElement("span",null,Hc))),i.a.createElement(w.EuiFlexItem,{grow:!1,"data-test-subj":"syntheticsOverviewGroupButton"},i.a.createElement(Dc,{groupOptions:m,orderByOptions:h,groupField:g})))))},zc=e=>{switch(e){case"locationId":return{asc:Gc,desc:Vc,label:Wc};case He.c.MONITOR_TYPE:return{asc:Gc,desc:Vc,label:Kc};case He.c.TAGS:return{asc:Gc,desc:Vc,label:Yc};case He.c.PROJECT_ID:return{asc:Gc,desc:Vc,label:Xc};default:return{asc:$c,desc:Uc,label:qc}}},Hc=o.i18n.translate("xpack.synthetics.overview.groupPopover.group.title",{defaultMessage:"Group by"}),Gc=o.i18n.translate("xpack.synthetics.overview.groupPopover.alphabetical.asc",{defaultMessage:"A -> Z",description:"Describes ascending alphabetical sort order"}),Vc=o.i18n.translate("xpack.synthetics.overview.groupPopover.alphabetical.desc",{defaultMessage:"Z -> A",description:"Describes descending alphabetical sort order"}),$c=o.i18n.translate("xpack.synthetics.overview.groupPopover.ascending.label",{defaultMessage:"Ascending"}),Uc=o.i18n.translate("xpack.synthetics.overview.groupPopover.descending.label",{defaultMessage:"Descending"}),qc=o.i18n.translate("xpack.synthetics.overview.groupPopover.none.label",{defaultMessage:"None"}),Wc=o.i18n.translate("xpack.synthetics.overview.groupPopover.location.label",{defaultMessage:"Location"}),Kc=o.i18n.translate("xpack.synthetics.overview.groupPopover.monitorType.label",{defaultMessage:"Monitor type"}),Yc=o.i18n.translate("xpack.synthetics.overview.groupPopover.tag.label",{defaultMessage:"Tag"}),Xc=o.i18n.translate("xpack.synthetics.overview.groupPopover.project.label",{defaultMessage:"Project"});const Jc=({page:e,loading:t,total:a,startRange:n,endRange:r})=>{const{loaded:s}=Object(u.useSelector)(Nc.g);return s&&void 0!==a?i.a.createElement(w.EuiText,{size:"xs"},n&&r?i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.overview.pagination.description",defaultMessage:"Showing {currentCount} of {total} {monitors}",values:{currentCount:i.a.createElement("strong",null,`${n}-${r}`),total:a,monitors:i.a.createElement("strong",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.overview.monitors.label",defaultMessage:"Monitors"}))}}):i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordTotal",defaultMessage:"Showing {total} {monitorsLabel}",values:{total:i.a.createElement("strong",null,i.a.createElement(w.EuiI18nNumber,{value:a})),monitorsLabel:i.a.createElement("strong",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordRangeLabel",defaultMessage:"{monitorCount, plural, one {Monitor} other {Monitors}}",values:{monitorCount:a}}))}})):i.a.createElement(w.EuiText,{size:"xs","data-test-subj":"syntheticsOverviewMonitorsLoading"},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLoadingSpinner,{size:"m"})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.overview.pagination.loading",defaultMessage:"Loading Monitors..."}))))},Qc=({onSortChange:e})=>{const{pageState:{sortOrder:t,sortField:a}}=Object(u.useSelector)(Nc.g),n=Object(u.useDispatch)(),{asc:r,desc:s,label:o}=Zc(a),l=t=>{e&&e(),n(t)},c=[{label:r,value:"asc",checked:"asc"===t,onClick:()=>{l(Object(Nc.j)({sortOrder:"asc"}))}},{label:s,value:"desc",checked:"desc"===t,onClick:()=>{l(Object(Nc.j)({sortOrder:"desc"}))}}],d=[{label:cu,value:"status",checked:"status"===a,defaultSortOrder:"asc",onClick:()=>{l(Object(Nc.j)({sortField:"status",sortOrder:"asc"}))}},{label:uu,value:`${He.c.NAME}.keyword`,checked:a===`${He.c.NAME}.keyword`,defaultSortOrder:"asc",onClick:()=>{l(Object(Nc.j)({sortField:`${He.c.NAME}.keyword`,sortOrder:"asc"}))}},{label:du,value:"updated_at",checked:"updated_at"===a,defaultSortOrder:"desc",onClick:()=>{l(Object(Nc.j)({sortField:"updated_at",sortOrder:"desc"}))}}];return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xxxs"},i.a.createElement("span",null,eu))),i.a.createElement(w.EuiFlexItem,{grow:!1,"data-test-subj":"syntheticsOverviewSortButton"},i.a.createElement(Fc,{sortOptions:d,orderOptions:c,sortField:o})))))},Zc=e=>{switch(e){case`${He.c.NAME}.keyword`:return{asc:tu,desc:au,label:uu};case"updated_at":return{asc:nu,desc:iu,label:du};case"status":return{asc:ru,desc:su,label:cu};default:return{asc:ou,desc:lu,label:""}}},eu=o.i18n.translate("xpack.synthetics.overview.sortPopover.sort.title",{defaultMessage:"Sort by"}),tu=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.asc",{defaultMessage:"A -> Z",description:"Describes ascending alphabetical sort order"}),au=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.desc",{defaultMessage:"Z -> A",description:"Describes descending alphabetical sort order"}),nu=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.asc",{defaultMessage:"Oldest first"}),iu=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.desc",{defaultMessage:"Newest first"}),ru=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.asc",{defaultMessage:"Down first"}),su=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.desc",{defaultMessage:"Up first"}),ou=o.i18n.translate("xpack.synthetics.overview.sortPopover.ascending.label",{defaultMessage:"Ascending"}),lu=o.i18n.translate("xpack.synthetics.overview.sortPopover.descending.label",{defaultMessage:"Descending"}),cu=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.label",{defaultMessage:"Status"}),uu=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.label",{defaultMessage:"Alphabetical"}),du=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.label",{defaultMessage:"Last modified"});function mu(){return i.a.createElement(w.EuiEmptyPrompt,{iconType:"search",iconColor:"subdued",title:i.a.createElement("span",null,fu),titleSize:"s",body:i.a.createElement(w.EuiText,{size:"s"},gu," ",i.a.createElement(pu,null))})}function pu(){const[e,t]=Se();return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsClearFiltersLink",onClick:()=>t(null)},hu)}const fu=o.i18n.translate("xpack.synthetics.overview.noMonitorsFoundHeading",{defaultMessage:"No monitors found"}),gu=o.i18n.translate("xpack.synthetics.overview.noMonitorsFoundContent",{defaultMessage:"Try refining your search."}),hu=o.i18n.translate("xpack.synthetics.overview.overview.clearFilters",{defaultMessage:"Clear filters"}),bu=Object(n.memo)((()=>{const{status:e}=Object(u.useSelector)(Ne.f),{data:{monitors:t},flyoutConfig:a,loaded:r,pageState:s,groupBy:{field:o}}=Object(u.useSelector)(Nc.g),{perPage:l}=s,[c,d]=Object(n.useState)(1),m=Object(u.useDispatch)(),p=Object(n.useRef)(null),{monitorsSortedByStatus:f}=function(){const{statusFilter:e}=xe(),{status:t}=Object(u.useSelector)(Ne.f),{pageState:{sortOrder:a},data:{monitors:i}}=Object(u.useSelector)(Nc.g),r=Object(n.useRef)(null),s=function(){const e=Object(u.useDispatch)(),{locationsLoaded:t,locations:a}=Object(u.useSelector)($.X);return Object(n.useEffect)((()=>{t||e(Object($.u)())})),Object(n.useMemo)((()=>a.reduce(((e,t)=>(e[t.id]=t.label,e)),{})),[a])}(),o=Object(n.useMemo)((()=>{if(!t)return{down:[],up:[],disabled:[],pending:[]};const{downConfigs:e,pendingConfigs:a}=t,n={};Object.values(e).forEach((({locationId:e,configId:t})=>{n[t]?n[t].push(e):n[t]=[e]}));const o=[],l=[],c=[],u=[];return i.forEach((e=>{const t=s[e.location.id];e.isEnabled?e.configId in n&&n[e.configId].includes(t)?o.push(e):null!=a&&a[`${e.configId}-${s[e.location.id]}`]?u.push(e):l.push(e):c.push(e)})),r.current=n,{down:o,up:l,disabled:c,pending:u}}),[i,s,r,t]);return Object(n.useMemo)((()=>{switch(e){case"down":return{monitorsSortedByStatus:o.down,downMonitors:r.current};case"up":return{monitorsSortedByStatus:o.up,downMonitors:r.current};case"disabled":return{monitorsSortedByStatus:o.disabled,downMonitors:r.current}}return{monitorsSortedByStatus:[..."asc"===a?[...o.down,...o.up]:[...o.up,...o.down],...o.disabled,...o.pending],downMonitors:r.current}}),[r,o,a,e])}(),g=Object(n.useCallback)((e=>m(Object(Nc.h)(e))),[m]),h=Object(n.useCallback)((()=>m(Object(Nc.h)(null))),[m]),b=Object(n.useCallback)((()=>m(Nc.d.get(s))),[m,s]),{currentMonitors:E}=(({intersectionRef:e,monitorsSortedByStatus:t})=>{const[a,i]=Object(n.useState)(1),[r,s]=Object(n.useState)(!1),{statusFilter:o}=xe(),{pageState:{perPage:l,sortField:c},data:{monitors:d}}=Object(u.useSelector)($.R),m=(({sortField:e,perPage:t,page:a,monitors:n,monitorsSortedByStatus:i,statusFilter:r})=>"status"===e||r?i.slice(0,t*a):n.slice(0,t*a))({monitors:d,monitorsSortedByStatus:t,perPage:l,page:a,sortField:c,statusFilter:o}),p=un()(e,{root:null,rootMargin:"640px",threshold:.1}),f=p&&p.intersectionRatio>0;return ln()((()=>{f&&m.length===a*l&&m.length!==d.length?s(!0):s(!1)}),1e3),Object(n.useEffect)((()=>{r&&(i((e=>e+1)),s(!1))}),[r]),{currentMonitors:m}})({intersectionRef:p,monitorsSortedByStatus:f});return e&&!f.length&&r?i.a.createElement(mu,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline",responsive:!1,wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(Jc,{page:c,loading:!r,total:e?f.length:void 0})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Qc,{onSortChange:()=>d(1)})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Bc,null))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(i.a.Fragment,null,"none"===o?r&&E.length?i.a.createElement(w.EuiFlexGrid,{columns:4,gutterSize:"m","data-test-subj":"syntheticsOverviewGridItemContainer"},E.map((e=>{var t;return i.a.createElement(w.EuiFlexItem,{key:`${e.id}-${null===(t=e.location)||void 0===t?void 0:t.id}`,"data-test-subj":"syntheticsOverviewGridItem"},i.a.createElement(Oc,{monitor:e,onClick:g}))}))):i.a.createElement(mn,null):i.a.createElement(Cc,{loaded:r,currentMonitors:t,setFlyoutConfigCallback:g}),i.a.createElement(w.EuiSpacer,{size:"m"})),i.a.createElement("div",{ref:p},i.a.createElement(w.EuiSpacer,{size:"l"})),"none"===o&&i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},E.length===t.length&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"xs"},Eu)),E.length===t.length&&E.length>l&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsOverviewGridButton",onClick:()=>window.scrollTo(0,0),iconType:"sortUp",iconSide:"right",size:"xs"},yu))),(null==a?void 0:a.configId)&&(null==a?void 0:a.location)&&i.a.createElement(_i,{configId:a.configId,id:a.id,location:a.location,locationId:a.locationId,onClose:h,onEnabledChange:b,onLocationChange:g}))})),Eu=o.i18n.translate("xpack.synthetics.overview.grid.showingAllMonitors.label",{defaultMessage:"Showing all monitors"}),yu=o.i18n.translate("xpack.synthetics.overview.grid.scrollToTop.label",{defaultMessage:"Back to top"});function vu({scopeStatusByLocation:e}){const t=Object(u.useSelector)($.Q),{status:a,error:i,loaded:r}=Object(u.useSelector)(Ne.f),{lastRefresh:s}=K(),o=Object(u.useDispatch)();return Object(n.useEffect)((()=>{o(r?Ne.e.get({pageState:t,scopeStatusByLocation:e}):Ne.b.get({pageState:t,scopeStatusByLocation:e}))}),[o,s,t,e]),{status:a,error:i}}function xu(e){return null!=e?e:"-"}function Su(){const{statusFilter:e}=xe(),{status:t,error:a}=vu({scopeStatusByLocation:!0}),r=Object(u.useDispatch)(),[s,o]=Object(n.useState)({up:null==t?void 0:t.up,down:null==t?void 0:t.down,pending:null==t?void 0:t.pending,disabledCount:null==t?void 0:t.disabledCount});return Object(n.useEffect)((()=>{a&&(r(Object(Ne.a)()),Gi.a.toasts.addError(a.body,{title:Cu,toastLifeTimeMs:5e3}))}),[r,a]),Object(n.useEffect)((()=>{if(e)switch(e){case"up":o({up:(null==t?void 0:t.up)||0,down:0,disabledCount:0,pending:0});break;case"down":o({up:0,down:(null==t?void 0:t.down)||0,disabledCount:0,pending:0});break;case"disabled":o({up:0,down:0,disabledCount:(null==t?void 0:t.disabledCount)||0,pending:0})}else t&&o({up:t.up,down:t.down,disabledCount:t.disabledCount,pending:null==t?void 0:t.pending})}),[t,e]),i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,ku)),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"xl"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.up",description:Mu,reverse:!0,title:xu(null==s?void 0:s.up),titleColor:"success",titleSize:"m"})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.down",description:wu,reverse:!0,title:xu(null==s?void 0:s.down),titleColor:"danger",titleSize:"m"})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.disabled",description:Tu,reverse:!0,title:xu(null==s?void 0:s.disabledCount),titleColor:"subdued",titleSize:"m"})),((null==s?void 0:s.pending)||0)>0&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.pending",description:Ou,reverse:!0,title:xu(null==s?void 0:s.pending),titleColor:"subdued",titleSize:"m"}))))}const ku=o.i18n.translate("xpack.synthetics.overview.status.headingText",{defaultMessage:"Current status"}),Mu=o.i18n.translate("xpack.synthetics.overview.status.up.description",{defaultMessage:"Up"}),wu=o.i18n.translate("xpack.synthetics.overview.status.down.description",{defaultMessage:"Down"}),Ou=o.i18n.translate("xpack.synthetics.overview.status.pending.description",{defaultMessage:"Pending"}),Tu=o.i18n.translate("xpack.synthetics.overview.status.disabled.description",{defaultMessage:"Disabled"}),Cu=o.i18n.translate("xpack.synthetics.overview.status.error.title",{defaultMessage:"Unable to get monitor status metrics"}),Iu=()=>{const{statusFilter:e}=xe(),[t,a]=Se(),n=t=>()=>{a({statusFilter:e!==t?t:void 0})};return i.a.createElement(w.EuiFilterGroup,null,i.a.createElement(w.EuiFilterButton,{hasActiveFilters:"up"===e,onClick:n("up")},_u),i.a.createElement(w.EuiFilterButton,{hasActiveFilters:"down"===e,onClick:n("down")},ju),i.a.createElement(w.EuiFilterButton,{hasActiveFilters:"disabled"===e,onClick:n("disabled")},Fu))},ju=o.i18n.translate("xpack.synthetics.overview.status.filters.down",{defaultMessage:"Down"}),_u=o.i18n.translate("xpack.synthetics.overview.status.filters.up",{defaultMessage:"Up"}),Fu=o.i18n.translate("xpack.synthetics.overview.status.filters.disabled",{defaultMessage:"Disabled"});var Pu=a(96),Lu=a.n(Pu);function Ru(){const{query:e}=xe(),[t,a]=Se(),[r,s]=Object(n.useState)("");Lu()((()=>{r!==e&&a({query:r})}),300,[r]);const o=Object(n.useRef)(!1);return Object(n.useEffect)((()=>{e===r||o.current||s(e)}),[e]),i.a.createElement(Au,{fullWidth:!0,placeholder:Du,value:r,onChange:e=>{var t;o.current=!0,s(null!==(t=e.target.value)&&void 0!==t?t:"")},isClearable:!0,"aria-label":Du,"data-test-subj":"syntheticsOverviewSearchInput"})}const Du=o.i18n.translate("xpack.synthetics.monitorManagement.filter.placeholder",{defaultMessage:"Search by name, URL, host, tag, project or location"});var Au=Ut()(w.EuiFieldSearch).withConfig({displayName:"_StyledEuiFieldSearch",componentId:"sc-1ugiifn-0"})({minWidth:230});const Nu=()=>{const e=$s(),t=Oa();return Object(n.useMemo)((()=>t&&e?{queryIdFilter:{"monitor.id":[t]},locationFilter:[{field:"observer.geo.name",values:[e.label,e.id]}]}:{}),[t,e])},Bu=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:r}}=Object(T.useKibana)().services,{queryIdFilter:s,locationFilter:o}=Nu(),l=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return s?i.a.createElement(r,{id:a,align:"left",customHeight:"70px",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:l,reportDefinitions:s,dataType:"synthetics",selectedMetricField:"monitor_errors",name:zu,filters:o}]}):null},zu=o.i18n.translate("xpack.synthetics.monitorDetails.summary.errors",{defaultMessage:"Errors"}),Hu=({from:e,to:t,monitorIds:a,locations:r})=>{const{exploratoryView:{ExploratoryViewEmbeddable:s}}=Object(T.useKibana)().services,{euiTheme:o}=Object(w.useEuiTheme)(),l=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return i.a.createElement(s,{id:"overviewErrorsSparklines",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{time:l,seriesType:"area",reportDefinitions:{"monitor.id":a.length>0?a:["false-monitor-id"],...null!=r&&r.length?{"observer.geo.name":r}:{}},dataType:"synthetics",selectedMetricField:"monitor_errors",name:zu,color:o.colors.danger,operationType:"unique_count"}]})},Gu=({monitorIds:e,from:t,to:a,locations:r})=>{const{exploratoryView:{ExploratoryViewEmbeddable:s}}=Object(T.useKibana)().services,o=Object(n.useMemo)((()=>({from:t,to:a})),[t,a]);return i.a.createElement(s,{id:"overviewErrorsCount",align:"left",customHeight:"70px",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:o,reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"],...null!=r&&r.length?{"observer.geo.name":r}:{}},dataType:"synthetics",selectedMetricField:"monitor_errors",name:zu}]})};function Vu(){const{status:e}=Object(u.useSelector)(Ne.f),t=!(null!=e&&e.allIds)||0===(null==e?void 0:e.allIds.length),{from:a,to:n}=Me(6,"hours"),{locations:r}=xe(),s=Qa();return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,$u)),i.a.createElement(w.EuiSpacer,{size:"s"}),t?i.a.createElement(w.EuiSkeletonText,{lines:3}):i.a.createElement(w.EuiFlexGroup,{gutterSize:"xl"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Gu,{from:a,to:n,monitorIds:s,locations:r})),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(Hu,{from:a,to:n,monitorIds:s,locations:r}))))}const $u=o.i18n.translate("xpack.synthetics.overview.errors.headingText",{defaultMessage:"Last 6 hours"});var Uu=a(77),qu=a(32);const Wu=e=>e.defaultAlerting,Ku=Object(qu.createSelector)(Wu,(e=>e.data)),Yu=Object(qu.createSelector)(Wu,(e=>e.loading)),Xu=Object(qu.createSelector)(Wu,(e=>e.success));var Ju=a(71);const Qu=({isAlertingEnabled:e})=>{var t,a;const r=Object(u.useDispatch)(),s=Object(u.useSelector)(Ku),o=Object(u.useSelector)(Xu),{settings:l}=Object(u.useSelector)(Uu.b),c=!l||!Object(k.isEmpty)(null==l?void 0:l.defaultConnectors),{canSave:d}=tt(),{data:{monitors:m},loaded:p}=Object(u.useSelector)($.M),f=null===(t=ut())||void 0===t||null===(a=t.share)||void 0===a?void 0:a.url.locators,g=null==f?void 0:f.get(Ke.syntheticsSettingsLocatorID),{data:h}=Object(N.useFetcher)((()=>null==g?void 0:g.getUrl({})),[g]),b=null!=e?e:p&&m.some((e=>{var t,a;return null===(t=e[He.c.ALERT_CONFIG])||void 0===t||null===(a=t.status)||void 0===a?void 0:a.enabled})),E=!c&&b,y=!(!o||Boolean((null==s?void 0:s.statusRule)&&(null==s?void 0:s.tlsRule))||d);return Object(n.useEffect)((()=>{r(Ju.b.get())}),[r]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Zu,{url:h,missingConfig:Boolean(E),missingRules:y}),i.a.createElement(w.EuiSpacer,{size:"m"}))},Zu=({url:e,missingRules:t,missingConfig:a})=>{const[n,r]=Object(H.useSessionStorage)("MissingRulesCalloutHidden",!1);if(!a&&!t||n)return null;const s=t===a?"* ":"",o=a?i.a.createElement(w.EuiMarkdownFormat,null,`${s}${ed}`):null,l=t?i.a.createElement(w.EuiMarkdownFormat,null,`${s}${td}`):null;return i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.alerting.noConnectorsCallout.header",defaultMessage:"Alerts are not being sent"}),color:"warning",iconType:"warning"},i.a.createElement("p",null,o,l),a&&i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAlertingCalloutLinkButtonButton",href:e,color:"warning"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.alerting.noConnectorsCallout.button",defaultMessage:"Configure now"})),i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsMissingRulesCalloutRemindMeLaterButton",onClick:()=>{r(!0)}},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.alerting.remindMeLater.button",defaultMessage:"Remind me later"})))},ed=o.i18n.translate("xpack.synthetics.alerting.noConnectorsCallout.content",{defaultMessage:"You have monitors with alerting enabled, but there is no default connector configured to send those alerts."}),td=o.i18n.translate("xpack.synthetics.alerting.missingRules.content",{defaultMessage:"You have monitors with alerting enabled, but there is no rules configured to send those alerts. Default rules are automatically created when user with write privileges opens Synthetics app."}),ad=()=>{Object(N.useTrackPageview)({app:"synthetics",path:"overview"}),Object(N.useTrackPageview)({app:"synthetics",path:"overview",delay:15e3}),(()=>{var e,t;const a=null!==(e=null===(t=Object(T.useKibana)().services.application)||void 0===t?void 0:t.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==e?e:"";Ce([{text:sn,href:`${a}`}])})();const e=Object(u.useDispatch)(),{lastRefresh:t}=K(),{search:a}=Object(p.useLocation)(),{loading:r,locationsLoaded:s}=Object(u.useSelector)($.X);Object(n.useEffect)((()=>{r||s||e(Object(nn.b)())}),[e,s,r]);const{enablement:{isEnabled:o},loading:l}=Ie(),{loaded:d,data:{monitors:m},pageState:f}=Object(u.useSelector)($.R),{loading:g,loaded:h,handleFilterChange:b,absoluteTotal:E}=rn();Object(n.useEffect)((()=>{d||e($.l.get(f))}),[e,f,d]),Object(n.useEffect)((()=>{h&&e($.y.get(f))}),[e,t]);const y=!a&&!l&&h&&0===E;if(y&&!g&&o)return i.a.createElement(p.Redirect,{to:c.i});if(!o&&y)return i.a.createElement(p.Redirect,{to:c.o});const v=h&&d&&0===(null==m?void 0:m.length);return i.a.createElement(i.a.Fragment,null,i.a.createElement(ua,{total:E}),i.a.createElement(Qu,null),i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!0},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Ru,null)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Iu,null)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(ba,{handleFilterChange:b}))),i.a.createElement(w.EuiSpacer,null),v?i.a.createElement(mu,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Su,null)),i.a.createElement(w.EuiFlexItem,{grow:3,style:{minWidth:300}},i.a.createElement(Vu,null)),i.a.createElement(w.EuiFlexItem,{grow:3,style:{minWidth:300}},i.a.createElement(Za,null))),i.a.createElement(w.EuiSpacer,null),i.a.createElement(bu,null)))},nd=()=>i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.title",defaultMessage:"Monitors"}))),id=()=>{const{basePath:e}=Object(n.useContext)(Ze),{enablement:{isEnabled:t}}=Ie(),a=qt();return i.a.createElement(Mn,{canEditSynthetics:a},i.a.createElement(w.EuiButton,{color:"primary",fill:!0,iconSide:"left",iconType:"plusInCircleFilled",href:`${e}/app/synthetics${c.p}`,isDisabled:!t||!a,"data-test-subj":"syntheticsAddMonitorBtn"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.createButton.label",defaultMessage:"Create Monitor"})))},rd=({children:e})=>{const{isAllowed:t,signupUrl:a,loading:r}=(()=>{const e=Object(u.useDispatch)();return Object(n.useEffect)((()=>{}),[e]),{isAllowed:!0,signupUrl:void 0,loading:!1}})();return r?i.a.createElement(w.EuiEmptyPrompt,{icon:i.a.createElement(w.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,ld)}):!1===t?i.a.createElement(w.EuiEmptyPrompt,{title:i.a.createElement("h2",null,od),body:i.a.createElement("p",null,cd),actions:[i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsServiceAllowedWrapperButton",color:"primary",fill:!0,isDisabled:!a,href:null!=a?a:void 0},sd)]}):i.a.createElement(i.a.Fragment,null,e)},sd=o.i18n.translate("xpack.synthetics.monitorManagement.requestAccess",{defaultMessage:"Request access"}),od=o.i18n.translate("xpack.synthetics.monitorManagement.label",{defaultMessage:"Synthetics App"}),ld=o.i18n.translate("xpack.synthetics.monitorManagement.loading.label",{defaultMessage:"Loading Synthetics App"}),cd=o.i18n.translate("xpack.synthetics.monitorManagement.accessRestricted",{defaultMessage:"Your access to globally managed testing infrastructure is restricted."}),ud=({title:e,body:t,icon:a})=>i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},i.a.createElement(w.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},i.a.createElement("span",null,a),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiTitle,{size:"m"},e),i.a.createElement(w.EuiSpacer,{size:"m"}),t&&i.a.createElement(w.EuiText,{color:"subdued"},t))),dd=({loading:e,loadingTitle:t,error:a,errorTitle:n,errorBody:r,children:s})=>i.a.createElement(i.a.Fragment,null,e||a?null:s,a&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"xxl"}),i.a.createElement(w.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:i.a.createElement("h2",null,n),body:i.a.createElement("p",null,r)})):null,e?i.a.createElement(ud,{icon:i.a.createElement(w.EuiLoadingSpinner,{size:"xxl"}),title:i.a.createElement("h3",null,t)}):null),md=o.i18n.translate("xpack.synthetics.emptyState.enablement.title",{defaultMessage:"Monitor the status of your services and applications with Synthetics"}),pd=o.i18n.translate("xpack.synthetics.emptyState.enablement.disabledDescription",{defaultMessage:"Run automated checks based on real-browser simulations and lightweight endpoint pings to measure the experience of your users from any location worldwide."}),fd=o.i18n.translate("xpack.synthetics.emptyState.enablement.contactAdministrator",{defaultMessage:"Only administrators can enable this feature."}),gd=(o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.title",{defaultMessage:"Enable"}),o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.doc",{defaultMessage:"Read the docs"})),hd=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.learnMore",{defaultMessage:"Want to learn more?"}),bd=()=>{const{enablement:e,loading:t}=Ie(),{isEnabled:a}=e;return a||t?null:i.a.createElement(w.EuiEmptyPrompt,{title:i.a.createElement("h2",null,md),body:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,pd),i.a.createElement("p",null,fd)),footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,hd)),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsEnablementEmptyStateLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},gd))})},Ed=()=>{const[e,t]=Object(n.useState)(!1),{data:{syncErrors:a}}=Object(u.useSelector)($.M),{locations:r}=Object(u.useSelector)($.X);return a&&a.length>0&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.title",defaultMessage:"Some monitors are not running correctly"}),color:"warning",iconType:"warning"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.content",defaultMessage:"There was a problem running your monitors for one or more locations:"})),i.a.createElement("ul",null,Object.values(null!=a?a:{}).map((e=>{var t,a,n,s,o;return i.a.createElement("li",{key:e.locationId},`${null===(t=r.find((t=>t.id===e.locationId)))||void 0===t?void 0:t.label} - ${vd}: ${null!==(a=null===(n=e.error)||void 0===n?void 0:n.status)&&void 0!==a?a:xd}; ${yd}: ${null!==(s=null===(o=e.error)||void 0===o?void 0:o.reason)&&void 0!==s?s:xd}`)}))),i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsMonitorAsyncErrorButton",onClick:()=>t(!0),color:"warning"},Sd)),i.a.createElement(w.EuiSpacer,{size:"m"})):null},yd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.reasonLabel",{defaultMessage:"Reason"}),vd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.statusLabel",{defaultMessage:"Status"}),xd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.notAvailable",{defaultMessage:"Not available"}),Sd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.dismissLabel",{defaultMessage:"Dismiss"}),kd=function({handleFilterChange:e}){return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:2},i.a.createElement(Ru,null)),i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(ba,{handleFilterChange:e})))},Md=({name:e,reloadPage:t,configId:a,isProjectMonitor:r,setMonitorPendingDeletion:s})=>{const[l,c]=Object(n.useState)(!1),{status:u}=Object(N.useFetcher)((()=>{if(l)return Object($.f)({configId:a})}),[a,l]);return Object(n.useEffect)((()=>{l&&(u===N.FETCH_STATUS.FAILURE?Gi.a.toasts.addDanger({title:Object(T.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorFailure"},za))},{toastLifeTimeMs:3e3}):u===N.FETCH_STATUS.SUCCESS&&(t(),Gi.a.toasts.addSuccess({title:Object(T.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorSuccess"},o.i18n.translate("xpack.synthetics.monitorManagement.monitorDeleteSuccessMessage.name",{defaultMessage:'Deleted "{name}"',values:{name:e}})))},{toastLifeTimeMs:3e3})),u!==N.FETCH_STATUS.SUCCESS&&u!==N.FETCH_STATUS.FAILURE||(c(!1),s(null)))}),[c,l,t,u,s,e]),i.a.createElement(w.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.monitorManagement.deleteMonitorNameLabel",{defaultMessage:'Delete "{name}" monitor?',values:{name:e}}),onCancel:()=>s(null),onConfirm:()=>{c(!0)},cancelButtonText:Ba,confirmButtonText:Na,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:l},r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{color:"warning",title:wd},i.a.createElement("p",null,i.a.createElement(Od,null))),i.a.createElement(w.EuiSpacer,{size:"m"})))},wd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.disclaimer.title",{defaultMessage:"Deleting this monitor will not remove it from the project source"}),Od=()=>i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorList.disclaimer.label",defaultMessage:"To delete it completely and stop it from being pushed again in the future, delete it from the project source. {docsLink}.",values:{docsLink:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsProjectMonitorDisclaimerLearnMoreLink",href:"https://elastic.co/guide/en/observability/current/synthetics-manage-monitors.html#manage-monitors-delete",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorManagement.projectDelete.docsLink",{defaultMessage:"Learn more"}))}}),Td=({monitor:e})=>{var t,a,n;const r=Object(u.useSelector)($.W),s=null===(t=e[He.c.LOCATIONS])||void 0===t?void 0:t.find((e=>e.id===r)),o=null===(a=e[He.c.LOCATIONS])||void 0===a||null===(n=a[0])||void 0===n?void 0:n.id,l=r&&s?r:o,c=Pn({configId:e[He.c.CONFIG_ID],locationId:l});return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsLinkLink",href:c},e.name)},Cd=({locations:e,monitorId:t,overviewStatus:a})=>{const{eui:{euiColorVis9:n,euiColorVis0:r,euiColorDisabled:s}}=Object(N.useTheme)(),o=e.map((e=>{var i;const o=`${t}-${e.id}`;let l="unknown",c=s;return null!=a&&a.downConfigs[o]?(l="down",c=n):null!=a&&a.upConfigs[o]&&(l="up",c=r),{id:e.id,label:null!==(i=e.label)&&void 0!==i?i:e.id,status:l,color:c}}));return i.a.createElement(Ln,{configId:t,locations:o,loading:!1})},Id=({pageState:{pageIndex:e,pageSize:t,sortField:a,sortOrder:r},syntheticsMonitors:s,total:l,error:c,loading:u,overviewStatus:d,loadPage:m,reloadPage:f})=>{var g,h;const{euiTheme:b}=Object(w.useEuiTheme)(),E=Object(w.useIsWithinMinBreakpoint)("xxl"),[y,v]=Object(n.useState)(null),x=Object(n.useCallback)((({page:e={index:0,size:10},sort:t={field:He.c.NAME,direction:"asc"}})=>{const{index:a,size:n}=e,{field:i,direction:r}=t;m({pageIndex:a,pageSize:n,sortField:"enabled"===i?i:`${i}.keyword`,sortOrder:r})}),[m]),S={pageIndex:e,pageSize:t,totalItemCount:l,pageSizeOptions:[5,10,25,50,100]},k={sort:{field:null==a?void 0:a.replace(".keyword",""),direction:r}},M=(({rangeStart:e,rangeEnd:t,total:a})=>{const n=Math.min(t,a);return i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordRange",defaultMessage:"Showing {range} of {total} {monitorsLabel}",values:{range:i.a.createElement("strong",null,i.a.createElement(w.EuiI18nNumber,{value:e}),"-",i.a.createElement(w.EuiI18nNumber,{value:n})),total:i.a.createElement(w.EuiI18nNumber,{value:a}),monitorsLabel:i.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.management.monitorList.configurationRangeLabel",{defaultMessage:"{monitorCount, plural, one {Configuration} other {Configurations}}",values:{monitorCount:a}}))}})})({rangeStart:0===l?0:t*e+1,rangeEnd:t*e+t,total:l}),O=function({loading:e,overviewStatus:t,setMonitorPendingDeletion:a}){var n,r,s,l;const c=Object(p.useHistory)(),u=qt(),{alertStatus:d,updateAlertEnabledState:m}=Ca(),f=e=>d(e[He.c.CONFIG_ID])===N.FETCH_STATUS.LOADING,g=null===(n=null===(r=Object(T.useKibana)().services)||void 0===r||null===(s=r.application)||void 0===s?void 0:s.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===n||n,h=e=>!e.locations.some((e=>e.isServiceManaged))||Boolean(g),b=[{align:"left",field:He.c.NAME,name:o.i18n.translate("xpack.synthetics.management.monitorList.monitorName",{defaultMessage:"Monitor"}),sortable:!0,render:(e,t)=>i.a.createElement(Td,{monitor:t})},...null!==(l=null==t?void 0:t.projectMonitorsCount)&&void 0!==l&&l?[{align:"left",field:He.c.PROJECT_ID,name:o.i18n.translate("xpack.synthetics.management.monitorList.projectId",{defaultMessage:"Project ID"}),sortable:!0}]:[],{align:"left",field:He.c.MONITOR_TYPE,name:o.i18n.translate("xpack.synthetics.management.monitorList.monitorType",{defaultMessage:"Type"}),sortable:!0,render:(e,t)=>{return i.a.createElement(Vn,{monitor:t,ariaLabel:(a=t[He.c.MONITOR_TYPE],o.i18n.translate("xpack.synthetics.management.filter.clickTypeMessage",{defaultMessage:"Click to filter records for type {typeName}.",values:{typeName:a}})),onClick:()=>{c.push({search:`monitorTypes=${encodeURIComponent(JSON.stringify([t[He.c.MONITOR_TYPE]]))}`})}});var a}},{align:"left",field:He.c.SCHEDULE,sortable:!0,name:o.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),render:e=>Ha(e)},{align:"left",field:He.c.LOCATIONS,name:o.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),render:(e,a)=>{var n;return e?i.a.createElement(Cd,{monitorId:null!==(n=a[He.c.CONFIG_ID])&&void 0!==n?n:a.id,locations:e,overviewStatus:t}):null}},{align:"left",field:He.c.TAGS,name:o.i18n.translate("xpack.synthetics.management.monitorList.tags",{defaultMessage:"Tags"}),render:e=>i.a.createElement(En,{tags:e,onClick:e=>{c.push({search:`tags=${encodeURIComponent(JSON.stringify([e]))}`})}})},{align:"left",field:He.c.ENABLED,sortable:!0,name:o.i18n.translate("xpack.synthetics.management.monitorList.enabled",{defaultMessage:"Enabled"}),render:(t,a)=>i.a.createElement(_n,{configId:a[He.c.CONFIG_ID],monitor:a,reloadPage:()=>{},isSwitchable:!e})},{align:"right",name:o.i18n.translate("xpack.synthetics.management.monitorList.actions",{defaultMessage:"Actions"}),actions:[{"data-test-subj":"syntheticsMonitorEditAction",isPrimary:!0,name:e=>i.a.createElement(Mn,{canEditSynthetics:u,canUsePublicLocations:h(e)},La),description:La,icon:"pencil",type:"icon",enabled:e=>u&&!f(e)&&h(e),onClick:e=>{c.push({pathname:`/edit-monitor/${e[He.c.CONFIG_ID]}`})}},{"data-test-subj":"syntheticsMonitorDeleteAction",isPrimary:!0,name:e=>i.a.createElement(Mn,{canEditSynthetics:u,canUsePublicLocations:h(e)},Aa),description:Aa,icon:"trash",type:"icon",color:"danger",enabled:e=>u&&!f(e)&&h(e),onClick:e=>{a(e)}},{description:Da,name:e=>Object(Ta.b)(e[He.c.ALERT_CONFIG])?Da:Ra,icon:e=>Object(Ta.b)(e[He.c.ALERT_CONFIG])?"bellSlash":"bell",type:"icon",color:"danger",enabled:e=>u&&!f(e)&&h(e),onClick:e=>{m({monitor:{[He.c.ALERT_CONFIG]:Object(Ta.c)(e[He.c.ALERT_CONFIG])},name:e[He.c.NAME],configId:e[He.c.CONFIG_ID]})}}]}];return u||(b[b.length-1]={align:"right",name:o.i18n.translate("xpack.synthetics.management.monitorList.actions",{defaultMessage:"Actions"}),render:()=>i.a.createElement(Mn,{canEditSynthetics:u},i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsUseMonitorListColumnsButton",iconType:"boxesHorizontal",isDisabled:!0,"aria-label":In}))}),b}({loading:u,overviewStatus:d,setMonitorPendingDeletion:v});return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},M,i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement("hr",{style:{border:`1px solid ${b.colors.lightShade}`}}),i.a.createElement(w.EuiBasicTable,{"aria-label":o.i18n.translate("xpack.synthetics.management.monitorList.title",{defaultMessage:"Synthetics monitors list"}),error:null==c||null===(g=c.body)||void 0===g?void 0:g.message,loading:u,isExpandable:!0,hasActions:!0,itemId:"monitor_id",items:s,columns:O,tableLayout:E?"auto":"fixed",pagination:S,sorting:k,onChange:x,noItemsMessage:u?Fa:Pa})),y&&i.a.createElement(Md,{configId:y[He.c.CONFIG_ID],name:null!==(h=y[He.c.NAME])&&void 0!==h?h:"",setMonitorPendingDeletion:v,isProjectMonitor:y[He.c.MONITOR_SOURCE_TYPE]===He.z.PROJECT,reloadPage:f}))},jd=({monitorIds:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,a=Object(N.useTheme)(),{from:n,to:r}=Me(30,"days");return i.a.createElement(t,{align:"left",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:{from:n,to:r},reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"]},dataType:"synthetics",selectedMetricField:"monitor_total_runs",filters:[],name:ca,color:a.eui.euiColorVis1}]})},_d=({monitorIds:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,a=Object(N.useTheme)(),{from:r,to:s}=Me(30,"days"),o=Object(n.useMemo)((()=>[{seriesType:"area",time:{from:r,to:s},reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"]},dataType:"synthetics",selectedMetricField:"total_test_runs",filters:[],name:ca,color:a.eui.euiColorVis1,operationType:"count"}]),[r,JSON.stringify({ids:[...e].sort()}),a.eui.euiColorVis1,s]);return i.a.createElement(t,{id:"monitor-test-runs-sparkline",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:o,customHeight:"68px"})},Fd=({overviewStatus:e})=>{var t,a;const{euiTheme:n}=Object(w.useEuiTheme)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"l"},i.a.createElement(Rd,{"data-test-subj":"syntheticsManagementSummaryStats",hasBorder:!0,hasShadow:!1,$_css:n.size.l},i.a.createElement(w.EuiText,null,i.a.createElement("h5",null,sa)),i.a.createElement(Dd,{$_css2:n.size.l},i.a.createElement(Ld,{description:oa,value:null==e?void 0:e.allMonitorsCount}),i.a.createElement(Ld,{description:la,value:null==e?void 0:e.disabledMonitorsCount}))),i.a.createElement(Ad,{hasBorder:!0,hasShadow:!1,$_css3:n.size.l},i.a.createElement(w.EuiText,null,i.a.createElement("h5",null,(30,o.i18n.translate("xpack.synthetics.monitorManagement.lastXDays",{defaultMessage:"Last {count, number} {count, plural, one {day} other {days}}",values:{count:30}})))),i.a.createElement(Nd,{$_css4:n.size.l},i.a.createElement(jd,{monitorIds:null!==(t=null==e?void 0:e.allIds)&&void 0!==t?t:[]}),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(_d,{monitorIds:null!==(a=null==e?void 0:e.allIds)&&void 0!==a?a:[]}))))))},Pd=Object(A.euiStyled)(w.EuiStat)`
  &&& {
  color: ${({theme:e})=>e.eui.euiTitleColor};
    .euiStat__title {
        color: ${({theme:e})=>e.eui.euiTitleColor};
        font-size: ${({theme:e})=>e.eui.euiFontSizeXL};
    }
  }
`,Ld=({description:e,value:t})=>{var a;const{euiTheme:n}=Object(w.useEuiTheme)(),r=null!==(a=t)&&void 0!==a?a:void 0;return i.a.createElement(Pd,{description:e,isLoading:isNaN(r),title:i.a.createElement(Bd,{value:r,$_css5:n.size.m}),reverse:!0})};var Rd=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-1a3z999-0"})((e=>({display:"flex",flexDirection:"column",gap:e.$_css,flexGrow:1}))),Dd=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1a3z999-1"})((e=>({display:"flex",flexDirection:"row",gap:e.$_css2}))),Ad=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel2",componentId:"sc-1a3z999-2"})((e=>({display:"flex",flexDirection:"column",gap:e.$_css3,flexGrow:12,minWidth:260}))),Nd=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-1a3z999-3"})((e=>({display:"flex",flexDirection:"row",gap:e.$_css4,height:"200px"}))),Bd=Ut()(w.EuiI18nNumber).withConfig({displayName:"_StyledEuiI18nNumber",componentId:"sc-1a3z999-4"})((e=>({fontSize:e.$_css5})));const zd=({isEnabled:e,monitorListProps:t})=>{const{pageState:a,error:n,loading:r,syntheticsMonitors:s,total:o,absoluteTotal:l,loadPage:c,reloadPage:d,handleFilterChange:m}=t,{status:p}=Object(u.useSelector)(Ne.f);return e||0!==l?i.a.createElement(i.a.Fragment,null,i.a.createElement(Qu,null),i.a.createElement(Ed,null),i.a.createElement(kd,{handleFilterChange:m}),i.a.createElement(w.EuiSpacer,null),i.a.createElement(Fd,{overviewStatus:p}),i.a.createElement(w.EuiSpacer,null),i.a.createElement(Id,{syntheticsMonitors:s,total:o,pageState:a,error:n,loading:r,loadPage:c,reloadPage:d,overviewStatus:p})):null},Hd=e=>{var t,a;const n=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";Ce([{text:Gd,href:`${n}${c.o}`},...null!=e?e:[]])},Gd=o.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),Vd=()=>{Object(N.useTrackPageview)({app:"synthetics",path:"monitors"}),Object(N.useTrackPageview)({app:"synthetics",path:"monitors",delay:15e3}),Hd();const{error:e,enablement:{isEnabled:t},loading:a}=Ie();vu({scopeStatusByLocation:!1});const n=rn(),{syntheticsMonitors:r,loading:s,absoluteTotal:o,loaded:l}=n,{loading:u}=je(),d=void 0!==t&&0===r.length;return t&&!s&&0===o&&l?i.a.createElement(p.Redirect,{to:c.i}):i.a.createElement(i.a.Fragment,null,i.a.createElement(dd,{loading:a||u,error:Boolean(e),loadingTitle:Zt,errorTitle:ra,errorBody:ia},i.a.createElement(ua,{total:o}),i.a.createElement(zd,{isEnabled:t,monitorListProps:n})),d&&i.a.createElement(bd,null))},$d=i.a.memo((()=>i.a.createElement(rd,null,i.a.createElement(Vd,null)))),Ud=(e,t,a,n)=>{const r={pageTitle:i.a.createElement(nd,null),rightSideItems:[i.a.createElement(Jt,null),i.a.createElement(id,null)]};return[{title:o.i18n.translate("xpack.synthetics.overviewRoute.title",{defaultMessage:"Synthetics Overview | {baseTitle}",values:{baseTitle:n}}),path:c.w,component:ad,dataTestSubj:"syntheticsOverviewPage",pageHeader:{...r,tabs:qd(a,"overview",t)}},{title:o.i18n.translate("xpack.synthetics.monitorManagementRoute.title",{defaultMessage:"Synthetics Management | {baseTitle}",values:{baseTitle:n}}),path:c.o,component:$d,dataTestSubj:"syntheticsMonitorManagementPage",pageHeader:{...r,tabs:qd(a,"management",t)}}]},qd=(e,t,a)=>[{label:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.overviewTab.title",defaultMessage:"Overview"}),href:`${e}${c.w}${a.search}`,isSelected:"overview"===t,"data-test-subj":"syntheticsMonitorOverviewTab"},{label:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorsTab.title",defaultMessage:"Management"}),href:`${e}${c.o}${a.search}`,isSelected:"management"===t,"data-test-subj":"syntheticsMonitorManagementTab"}],Wd=Object(A.euiStyled)((e=>{const{observabilityShared:t}=Object(T.useKibana)().services,a=t.navigation.PageTemplate;return i.a.createElement(a,e)}))`
  &&& {
    .euiPageHeaderContent__top {
      flex-wrap: wrap;
      .euiTitle {
        min-width: 160px;
      }
    }
  }
`,Kd=()=>{const{application:e}=Object(T.useKibana)().services,{monitorId:t}=Object(p.useParams)();return i.a.createElement(kt,{title:Yd,body:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.prompt.errors.notFound.body",defaultMessage:"Sorry, the monitor with id {monitorId} can't be found. It might have been removed or you don't have permissions to view it.",values:{monitorId:i.a.createElement("strong",null,t)}}),actions:[i.a.createElement(id,null),i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsMonitorNotFoundPageGoToHomeButton",iconType:"arrowLeft",flush:"both",onClick:()=>{e.navigateToApp(Te.a.SYNTHETICS_PLUGIN_ID)}},o.i18n.translate("xpack.synthetics.routes.createNewMonitor",{defaultMessage:"Go to Home"}))]})},Yd=o.i18n.translate("xpack.synthetics.prompt.errors.notFound.title",{defaultMessage:"Monitor not found"});var Xd=a(128),Jd=a.n(Xd);const Qd=o.i18n.translate("xpack.synthetics.monitorSummary.recentlyViewed",{defaultMessage:"Recently viewed"}),Zd=({search:e=""})=>{const{monitorId:t}=Object(p.useParams)(),[a,i]=Object(n.useState)(e);Object(H.useDebounce)((()=>i(e)),500,[e]);const{loading:r,data:s}=Object(N.useFetcher)((async()=>{var e;const t=await Object($.k)(Object($.r)({query:a}));return(null!==(e=null==t?void 0:t.monitors)&&void 0!==e?e:[]).map((e=>({label:e.name,key:e.config_id,locationIds:e.locations.map((e=>e.id))})))}),[a]);return Object(n.useMemo)((()=>{const n=e.replace(/\s/g,"").toLowerCase(),i=Boolean((null!=s?s:[]).some((e=>t!==e.key&&e.label.replace(/\s/g,"").toLowerCase()===n)));return{loading:r||a!==e,nameAlreadyExists:i,values:(null!=s?s:[]).filter((e=>e.key!==t))}}),[r,t,s,e,a])},em=()=>{const{basePath:e}=tt();return i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsAddMonitorLinkButton",href:`${e}/app/synthetics/add-monitor`},tm)},tm=o.i18n.translate("xpack.synthetics.monitorSummary.createNewMonitor",{defaultMessage:"Create monitor"}),am=({closePopover:e})=>{const t=Object(p.useHistory)(),{recentMonitorOptions:a,loading:r}=(()=>{const[e,t]=Jd()("xpack.synthetics.recentlyViewedMonitors",[]),a=Object(n.useRef)([]),i=Oa(),r=JSON.stringify([...a.current.map((({key:e})=>e))].sort()),s=Object(n.useCallback)((()=>{const n=a.current.length?a.current.map((({monitorQueryId:e})=>e)):null!=e?e:[];i&&t([i,...n].filter(((e,t,a)=>a.indexOf(e)===t)).slice(0,5))}),[t,i,r]);Object(n.useEffect)((()=>{s()}),[s,i]);const{loading:o}=Object(N.useFetcher)((async()=>{const t=(null!=e?e:[]).filter((e=>e!==i));if(i&&t.length&&JSON.stringify([...t].sort())!==r){var n;const e=await Object($.k)(Object($.r)({pageSize:5,monitorQueryIds:t}));if(null!=e&&null!==(n=e.monitors)&&void 0!==n&&n.length){const n=t.reduce(((e,t,a)=>({...e,[t]:a})),{}),i=[...null==e?void 0:e.monitors].sort(((e,t)=>n[e.id]-n[t.id]));a.current=i.map((e=>{var t;return{key:e.id,monitorQueryId:e.id,label:e.name,locationIds:(null!==(t=e.locations)&&void 0!==t?t:[]).map((({id:e})=>e)),isGroupLabel:!1}})),s()}}}),[i]);return Object(n.useMemo)((()=>({loading:o,recentMonitorOptions:a.current.length?[{key:"recently_viewed",label:Qd,isGroupLabel:!0},...a.current]:[]})),[o,r])})(),[s,o]=Object(n.useState)([]),[l,c]=Object(n.useState)(""),u=$s(),{basePath:d}=tt(),{values:m,loading:f}=Zd({search:l});Object(n.useEffect)((()=>{const e=[];if(a.length>0&&!l){const t=m.filter((e=>a.every((t=>t.key!==e.key))));t.length>0&&e.push({key:"monitors",label:om,isGroupLabel:!0,locationIds:[]}),o([...a,...e,...t])}else o(m)}),[a,l,m]);const g=e=>{var t,a,n;return null!==(t=e.locationIds)&&void 0!==t&&t.includes(null!==(a=null==u?void 0:u.id)&&void 0!==a?a:"")?null==u?void 0:u.id:null===(n=e.locationIds)||void 0===n?void 0:n[0]};return i.a.createElement(w.EuiSelectable,{searchable:!0,isLoading:f||r,searchProps:{placeholder:sm,compressed:!0,onChange:e=>c(e),autoFocus:!0},options:s,onChange:a=>{o(a);const n=a.find((e=>"on"===e.checked));n&&t.push(`/monitor/${n.key}?locationId=${g(n)}`),e()},singleSelection:!0,listProps:{showIcons:!1},renderOption:(e,t)=>i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorSearchableListLink",href:`${d}/app/synthetics/monitor/${e.key}?locationId=${g(e)}`},i.a.createElement(w.EuiHighlight,{search:l},e.label)),noMatchesMessage:rm,emptyMessage:i.a.createElement(em,null),loadingMessage:nm},((e,t)=>i.a.createElement("div",{style:{width:280}},i.a.createElement(w.EuiPopoverTitle,{paddingSize:"s"},s.length>0||l||f||r?t:i.a.createElement(w.EuiText,{color:"subdued",size:"s",className:"eui-textCenter"},im)),e)))},nm=o.i18n.translate("xpack.synthetics.monitorSummary.loadingMonitors",{defaultMessage:"Loading monitors"}),im=o.i18n.translate("xpack.synthetics.monitorSummary.noOtherMonitors",{defaultMessage:"No other monitors exist."}),rm=o.i18n.translate("xpack.synthetics.monitorSummary.noResultsFound",{defaultMessage:"No monitors found. Try modifying your query."}),sm=o.i18n.translate("xpack.synthetics.monitorSummary.placeholderSearch",{defaultMessage:"Monitor name or tag"}),om=o.i18n.translate("xpack.synthetics.monitorSummary.otherMonitors",{defaultMessage:"Other monitors"}),lm=()=>{const[e,t]=Object(n.useState)(!1),a=()=>{t(!1)},r=i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsMonitorSelectorButton",size:"s",iconType:"arrowDown",onClick:()=>{t(!e)},"aria-label":um});return i.a.createElement(n.Fragment,null,i.a.createElement(w.EuiPopover,{id:"monitorSelector",panelPaddingSize:"none",button:r,isOpen:e,closePopover:a},i.a.createElement(w.EuiPopoverTitle,{paddingSize:"s"},cm),i.a.createElement(am,{closePopover:a})))},cm=o.i18n.translate("xpack.synthetics.monitorSummary.goToMonitor",{defaultMessage:"Go to monitor"}),um=o.i18n.translate("xpack.synthetics.monitorSummary.selectMonitor",{defaultMessage:"Select a different monitor to view its details"}),dm=()=>{const{monitor:e}=wa();return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1,"data-test-subj":"monitorNameTitle"},null==e?void 0:e.name),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(lm,null)))};var mm=a(69);const pm=()=>{const e=Object(u.useDispatch)(),{monitor:t}=wa(),a=Object(u.useSelector)(Object(Dl.e)(null==t?void 0:t.config_id)),n=Wt(null==t?void 0:t[mm.b.LOCATIONS]),r=n?a?Fl:Pl:jn;return i.a.createElement(w.EuiToolTip,{content:r,key:r},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsRunTestManuallyButton",color:"success",iconType:"beaker",isLoading:!Boolean(t)||a,isDisabled:!n,onClick:()=>{t&&e(Dl.d.get({configId:t.config_id,name:t.name}))}},fm))},fm=o.i18n.translate("xpack.synthetics.monitorSummary.runTestManually",{defaultMessage:"Run test manually"}),gm=()=>{const{latestPing:e,loading:t}=nc();let a=e?V()(e.timestamp).fromNow():"--";return!e&&t&&(a=i.a.createElement(w.EuiSkeletonText,{lines:1})),i.a.createElement(w.EuiDescriptionList,{listItems:[{title:hm,description:i.a.createElement(w.EuiToolTip,{content:V()(null==e?void 0:e.timestamp).format("LLL"),position:"bottom"},i.a.createElement(i.a.Fragment,null,a))}]})},hm=o.i18n.translate("xpack.synthetics.monitorLastRun.lastRunLabel",{defaultMessage:"Last run"}),bm=()=>{const{latestPing:e,loading:t}=nc(),{monitor:a,isMonitorMissing:n}=wa();return a?i.a.createElement(pi,{status:null==e?void 0:e.monitor.status,monitor:a,loading:t,compressed:!1}):i.a.createElement(w.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:fi,description:n?i.a.createElement(i.a.Fragment,null):i.a.createElement(w.EuiSkeletonText,{lines:1})}]})},Em=({isDisabled:e})=>{const{monitor:t}=wa(),{monitorId:a}=Object(p.useParams)(),{dateRangeStart:r,dateRangeEnd:s}=xe(),o=$s(),{services:l}=Object(T.useKibana)(),u=Object(p.useRouteMatch)(c.r),d=Object(p.useRouteMatch)(c.s),m=`&dateRangeStart=${r}&dateRangeEnd=${s}`;return i.a.createElement(vi,{isDisabled:e,monitorLocations:null==t?void 0:t.locations,configId:a,selectedLocation:o,onChange:Object(n.useCallback)(((e,t)=>{u?l.application.navigateToApp(Te.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}/errors?locationId=${e}${m}`}):d?l.application.navigateToApp(Te.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}/history/?locationId=${e}${m}`}):l.application.navigateToApp(Te.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}?locationId=${e}${m}`})}),[u,d,a,m,l.application])})},ym=()=>{var e;const{monitor:t,isMonitorMissing:a}=wa(),{monitorId:n}=Object(p.useParams)();return Hd(t?[{text:null!==(e=null==t?void 0:t.name)&&void 0!==e?e:""}]:[]),a&&(null==t?void 0:t[He.c.CONFIG_ID])!==n?i.a.createElement(p.Redirect,{to:c.t.replace(":monitorId",n)}):null};function vm(e){const{lastRefresh:t}=K(),{monitorId:a}=Object(p.useParams)(),{dateRangeStart:i,dateRangeEnd:r}=xe(),s=$s(),o=Object(N.useTimeZone)(),{data:l,loading:u}=Fe({index:c.B,body:{size:0,query:{bool:{filter:[Pe.d,Pe.b,{range:{"@timestamp":{gte:i,lte:r,time_zone:o}}},{term:{config_id:null!=e?e:a}},{term:{"observer.geo.name":null==s?void 0:s.label}}]}},sort:[{"state.started_at":"desc"}],aggs:{states:{terms:{field:"state.id",size:1e4},aggs:{summary:{top_hits:{size:1,_source:["error","state","monitor","@timestamp"],sort:[{"@timestamp":"desc"}]}}}},latest:{top_hits:{size:1,_source:["monitor.status"],sort:[{"@timestamp":"desc"}]}}}}},[t,a,e,i,r,null==s?void 0:s.label],{name:`getMonitorErrors/${i}/${r}`,isRequestReady:Boolean(null==s?void 0:s.label)});return Object(n.useMemo)((()=>{var e,t,a,n,i,r;const s={upStates:[],errorStates:[]},{errorStates:o,upStates:c}=null!==(e=null==l||null===(t=l.aggregations)||void 0===t?void 0:t.states.buckets.reduce(((e,t)=>{var a;const n=null===(a=t.summary.hits.hits)||void 0===a?void 0:a[0]._source;return 0===(null==n?void 0:n.state.up)?e.errorStates.push(n):null!=n&&n.state.up&&n.state.up>=1&&e.upStates.push(n),e}),s))&&void 0!==e?e:s,d=null!==(a=null==l||null===(n=l.aggregations)||void 0===n?void 0:n.latest.hits.hits)&&void 0!==a?a:[],m=1===d.length&&"down"===(null===(i=(null===(r=d[0])||void 0===r?void 0:r._source).monitor)||void 0===i?void 0:i.status)&&!(null==o||!o.length);return{errorStates:o,upStates:c.sort(((e,t)=>Number(new Date(e.state.started_at))-Number(new Date(t.state.started_at)))),loading:u,data:l,hasActiveError:m}}),[l,u])}const xm=({fullWidth:e})=>{const[t,a]=Se(),{commonlyUsedRanges:r}=Object(n.useContext)(Ze),{refreshApp:s}=Object(n.useContext)(q),{data:o}=Object(n.useContext)(lt),l=null==o?void 0:o.query.timefilter.timefilter.getTime(),{dateRangeStart:u,dateRangeEnd:d}=t();Object(n.useEffect)((()=>{const{from:e,to:t}=null!=l?l:{};e===u&&t===d||null==o||o.query.timefilter.timefilter.setTime({from:u,to:d})}),[]);const m=r?r.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))):c.c.COMMONLY_USED_DATE_RANGES;return i.a.createElement(w.EuiSuperDatePicker,{width:e?"full":"auto",start:u,end:d,commonlyUsedRanges:m,onTimeChange:({start:e,end:t})=>{var n,i;null!=o&&null!==(n=o.query)&&void 0!==n&&null!==(i=n.timefilter)&&void 0!==i&&i.timefilter&&(null==o||o.query.timefilter.timefilter.setTime({from:e,to:t})),a({dateRangeStart:e,dateRangeEnd:t}),s()},onRefresh:s})},Sm=({time:e})=>{const{failedSteps:t,loading:a}=function({to:e,from:t}){const{lastRefresh:a}=K(),{monitorId:i}=Object(p.useParams)(),r=$s(),s={index:c.B,body:{size:0,track_total_hits:!0,query:{bool:{filter:[{range:{"@timestamp":{lte:e,gte:t}}},ac,{term:{"synthetics.step.status":"failed"}},{term:{"observer.geo.name":null==r?void 0:r.label}},{term:{config_id:i}}]}},aggs:{steps:{terms:{field:"synthetics.step.name.keyword",size:1e3},aggs:{doc:{top_hits:{size:1}}}}}}},{data:o,loading:l}=Fe(s,[a,i],{name:`getFailedTestsByStep/${i}`,isRequestReady:!!r});return Object(n.useMemo)((()=>{var e;const t=null==o?void 0:o.hits.total.value;return{failedSteps:null==o||null===(e=o.aggregations)||void 0===e?void 0:e.steps.buckets.map((({key:e,doc_count:a,doc:n})=>{var i,r,s,o;return{index:null===(i=n.hits.hits)||void 0===i||null===(r=i[0]._source)||void 0===r||null===(s=r.synthetics)||void 0===s||null===(o=s.step)||void 0===o?void 0:o.index,count:a,name:e,percent:a/t*100}})),loading:l}}),[o,l])}(e),{monitor:r}=wa();return"browser"!==(null==r?void 0:r.type)?null:a&&!t?i.a.createElement(w.EuiSkeletonText,{lines:3}):i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(xn,{title:km},i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement("div",null,null==t?void 0:t.map((e=>i.a.createElement(n.Fragment,{key:e.name},i.a.createElement(w.EuiProgress,{valueText:i.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorDetails.summary.failedTests.count",{defaultMessage:"Failed {count}",values:{count:e.count}})),max:100,color:"danger",size:"l",value:e.percent,label:`${e.index}. ${e.name}`}),i.a.createElement(w.EuiSpacer,{size:"s"})))))))},km=o.i18n.translate("xpack.synthetics.errors.failedTests.byStep",{defaultMessage:"Failed tests by step"}),Mm=({time:e,allowBrushing:t=!0})=>{const{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(T.useKibana)().services,{queryIdFilter:n,locationFilter:r}=Nu(),{errorStateId:s}=Object(p.useParams)(),[,o]=Se();return n||s?i.a.createElement(i.a.Fragment,null,i.a.createElement(a,{id:"failedTestsLineSeries",customHeight:"120px",reportType:"heatmap",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,attributes:[{time:e,reportDefinitions:{...n,...s?{"state.id":[s]}:{}},filters:r,dataType:"synthetics",selectedMetricField:"failed_tests",name:wm}],onBrushEnd:({range:e})=>{t&&o({dateRangeStart:V()(e[0]).toISOString(),dateRangeEnd:V()(e[1]).toISOString()})}}),i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{grow:!0,style:{marginLeft:10}},i.a.createElement(w.EuiHealth,{color:"danger"},wm)),t&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{color:"subdued",size:"s"},Om)))):null},wm=o.i18n.translate("xpack.synthetics.monitorDetails.summary.failedTests",{defaultMessage:"Failed tests"}),Om=o.i18n.translate("xpack.synthetics.monitorDetails.summary.brushArea",{defaultMessage:"Brush an area for higher fidelity"}),Tm=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:n}}=Object(T.useKibana)().services,{queryIdFilter:r,locationFilter:s}=Nu();return r?i.a.createElement(n,{id:a,reportType:"single-metric",attributes:[{time:{from:e,to:t},reportDefinitions:r,filters:s,dataType:"synthetics",selectedMetricField:"monitor_failed_tests",name:wm}]}):null},Cm=({errorStates:e,loading:t,upStates:a})=>{const n=Oe();return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(Fm,{title:jm,titleLeftAlign:!0},i.a.createElement(w.EuiFlexGroup,{wrap:!0,responsive:!1},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Bu,{from:n.from,to:n.to,id:"monitorsErrorsCountErrors"})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Tm,{from:n.from,to:n.to,id:"failedTestsCountErrors"}))))),i.a.createElement(w.EuiFlexItem,{grow:3},i.a.createElement(xn,{title:_m},i.a.createElement(Mm,{time:n})))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(Pm,{grow:2},i.a.createElement(xn,{title:Im},i.a.createElement(rc,{errorStates:e,upStates:a,loading:t}))),i.a.createElement(Sm,{time:n})))},Im=o.i18n.translate("xpack.synthetics.errors.label",{defaultMessage:"Errors"}),jm=o.i18n.translate("xpack.synthetics.errors.overview",{defaultMessage:"Overview"}),_m=o.i18n.translate("xpack.synthetics.errors.failedTests",{defaultMessage:"Failed tests"});var Fm=Ut()(xn).withConfig({displayName:"_StyledPanelWithTitle",componentId:"sc-g6pmb1-0"})({minWidth:260}),Pm=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-g6pmb1-1"})({minWidth:260});const Lm=({children:e})=>{const t=Object(u.useDispatch)(),a=Object(p.useHistory)(),r=Object(p.useLocation)(),s=Object(n.useRef)(r),{monitorId:o}=Object(p.useParams)(),{refreshApp:l}=K(),{latestPing:c,loaded:d}=nc(),[m,f]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),b=Object(n.useMemo)((()=>a.listen((e=>{const a=e.pathname.split("/")[2]||"",n=s.current.search!==e.search,i=a!==o;s.current=e,(n||i)&&(f(!1),h(!1),t(Object($.z)()),l())}))),[a,o,t,l]);return Object(n.useEffect)((()=>function(){b()}),[b]),Object(n.useEffect)((()=>{d&&f(!0),d&&c&&h(!0)}),[d,c,t,b]),i.a.createElement(i.a.Fragment,null,m?null:i.a.createElement(ud,{icon:i.a.createElement(w.EuiLoadingSpinner,{size:"xxl"}),title:i.a.createElement("h3",null,Nm),body:i.a.createElement("p",null,Am)}),m&&!g?i.a.createElement(ud,{icon:i.a.createElement(w.EuiLoadingChart,{size:"xl",mono:!0}),title:i.a.createElement("h3",null,Rm),body:i.a.createElement("p",null,Dm)}):null,i.a.createElement("div",{style:m&&g?void 0:{display:"none"},"data-test-subj":"syntheticsPendingWrapperChildren"},e))},Rm=o.i18n.translate("xpack.synthetics.monitorDetails.pending.heading",{defaultMessage:"Initial test run pending..."}),Dm=o.i18n.translate("xpack.synthetics.monitorDetails.pending.content",{defaultMessage:"This page will refresh when data becomes available."}),Am=o.i18n.translate("xpack.synthetics.monitorDetails.loading.content",{defaultMessage:"This will take just a second."}),Nm=o.i18n.translate("xpack.synthetics.monitorDetails.loading.heading",{defaultMessage:"Loading monitor details"}),Bm=()=>{const{errorStates:e,upStates:t,loading:a,data:n}=vm(),r=!n,s=!a&&e&&0===(null==e?void 0:e.length);return ym()||i.a.createElement(Lm,null,i.a.createElement(xm,{fullWidth:!0}),i.a.createElement(w.EuiSpacer,{size:"m"}),r&&i.a.createElement(zm,null),s&&i.a.createElement(Hm,null),i.a.createElement("div",{style:{visibility:r||s?"collapse":"initial"}},i.a.createElement(Cm,{errorStates:e,upStates:t,loading:a})))},zm=()=>i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},i.a.createElement(w.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},i.a.createElement("span",null,i.a.createElement(w.EuiLoadingSpinner,{size:"xxl"})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h3",null,Um)),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiText,{color:"subdued"},$m))),Hm=()=>i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},i.a.createElement(w.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},i.a.createElement("span",null,i.a.createElement(w.EuiIcon,{type:"checkInCircleFilled",color:"success",size:"xl"})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h3",null,Vm)),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiText,{color:"subdued"},Gm))),Gm=o.i18n.translate("xpack.synthetics.errors.keepCalm",{defaultMessage:"This monitor ran successfully during the selected period. Increase the time range to check for older errors."}),Vm=o.i18n.translate("xpack.synthetics.errors.noErrorsFound",{defaultMessage:"No errors found"}),$m=o.i18n.translate("xpack.synthetics.errors.loadingDescription",{defaultMessage:"This will take just a second."}),Um=o.i18n.translate("xpack.synthetics.errors.checkingForErrors",{defaultMessage:"Checking for errors"}),qm=()=>{const{hasActiveError:e}=vm();return e?i.a.createElement(w.EuiIcon,{type:"warning",color:"danger"}):null},Wm=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(T.useKibana)(),{queryIdFilter:a,locationFilter:n}=Nu();return a?i.a.createElement(t,{id:e.id,align:"left",customHeight:"70px",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:Km,dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:{...a},filters:n}]}):null},Km=o.i18n.translate("xpack.synthetics.monitorDetails.summary.availability",{defaultMessage:"Availability"}),Ym=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(T.useKibana)(),{queryIdFilter:a,locationFilter:n}=Nu();return a?i.a.createElement(t,{id:e.id,align:"left",customHeight:"70px",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:Xm,dataType:"synthetics",selectedMetricField:"monitor_duration",reportDefinitions:a,filters:n}]}):null},Xm=o.i18n.translate("xpack.synthetics.monitorDetails.summary.medianDuration",{defaultMessage:"Median duration"}),Jm=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Nu();return a?i.a.createElement(t,{id:"monitorDurationTrend",customHeight:"240px",reportType:"kpi-over-time",attributes:Object.keys(ap).map((t=>({dataType:"synthetics",time:e,name:ap[t],selectedMetricField:"monitor.duration.us",reportDefinitions:a,filters:n,seriesType:"line",operationType:t})))}):null},Qm=o.i18n.translate("xpack.synthetics.durationTrend.min",{defaultMessage:"Min"}),Zm=o.i18n.translate("xpack.synthetics.durationTrend.max",{defaultMessage:"Max"}),ep=o.i18n.translate("xpack.synthetics.durationTrend.median",{defaultMessage:"Median"}),tp=o.i18n.translate("xpack.synthetics.durationTrend.percentile25",{defaultMessage:"25th"}),ap={max:Zm,"75th":o.i18n.translate("xpack.synthetics.durationTrend.percentile75",{defaultMessage:"75th"}),median:ep,"25th":tp,min:Qm};var np=a(50);const ip=({ping:e})=>{const[t,a]=Object(n.useState)(!1),r=Object(n.useContext)(B),s=qn(),[,o]=Object(np.useEsDocSearch)({id:e.docId,index:c.B,dataView:r});return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsViewDocumentButton",iconType:"inspect",title:sp,onClick:e=>{e.stopPropagation(),a(!0)}}),t&&i.a.createElement(w.EuiFlyout,{onClose:()=>a(!1),ownFocus:!0,onClick:e=>{e.stopPropagation()}},i.a.createElement(w.EuiFlyoutHeader,null,i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h4",null,rp," ",s(e.timestamp)))),i.a.createElement(w.EuiFlyoutBody,null,null!=r&&r.id&&o?i.a.createElement(np.UnifiedDocViewer,{hit:o,dataView:r}):i.a.createElement(ji,null))))},rp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.indexedAt",{defaultMessage:"Indexed at"}),sp=o.i18n.translate("xpack.synthetics.monitorDetails.action.inspectDocument",{defaultMessage:"Inspect document"}),op=({content:e,dataTestSubj:t,isDisabled:a,value:n,withNext:r})=>{const s=Object(u.useSelector)($.Y),o=Object(u.useDispatch)(),l=s===n;let c="text";return l&&(c="up"===n?"success":"down"===n?"danger":"text"),i.a.createElement(w.EuiFilterButton,{"data-test-subj":t,hasActiveFilters:l,isDisabled:a,onClick:()=>{o(Object($.kb)(s===n?void 0:n))},withNext:r,color:c},e)},lp=()=>i.a.createElement(w.EuiFilterGroup,{compressed:!0},i.a.createElement(op,{content:o.i18n.translate("xpack.synthetics.filterBar.filterAllLabel",{defaultMessage:"All"}),dataTestSubj:"xpack.synthetics.filterBar.filterStatusAll",value:void 0,withNext:!0}),i.a.createElement(op,{content:Jo,dataTestSubj:"xpack.synthetics.filterBar.filterStatusUp",value:"up",withNext:!0}),i.a.createElement(op,{content:Qo,dataTestSubj:"xpack.synthetics.filterBar.filterStatusDown",value:"down",withNext:!1})),cp=({pings:e,paginable:t,showViewHistoryButton:a=!0})=>{const n=Object(p.useHistory)(),r=xe(),{monitor:s}=wa();return i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"l",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,t||(null==e?void 0:e.length)<10?up:dp))),i.a.createElement(w.EuiFlexItem,{grow:!0}),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(lp,null)),i.a.createElement(w.EuiFlexItem,{grow:!1},a?i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsTestRunsTableHeaderLink",href:null!=s&&s[He.c.CONFIG_ID]?n.createHref({pathname:c.s.replace(":monitorId",s[He.c.CONFIG_ID]),search:Ee({...r,dateRangeStart:"now-24h",dateRangeEnd:"now"},!0)}):void 0},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"monitorStatusChartViewHistoryButton",size:"xs",iconType:"list"},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewHistory",{defaultMessage:"View History"}))):null))},up=o.i18n.translate("xpack.synthetics.monitorDetails.summary.testRuns",{defaultMessage:"Test Runs"}),dp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTenTestRuns",{defaultMessage:"Last 10 Test Runs"}),mp=({checkGroupId:e,size:t,timestamp:a})=>{var r,s,o;const{loading:l,stepEnds:c}=Ki(e),u=Object(n.useMemo)((()=>{const e=[...c];return e.sort(((e,t)=>Number(new Date(t["@timestamp"]))-Number(new Date(e["@timestamp"])))),e.find((e=>{var t,a,n;return"skipped"!==Ls(null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.status)&&void 0!==t?t:"skipped")}))}),[c]);return i.a.createElement(ys,{checkGroup:null==u?void 0:u.monitor.check_group,initialStepNumber:null==u||null===(r=u.synthetics)||void 0===r||null===(s=r.step)||void 0===s?void 0:s.index,stepStatus:null==u||null===(o=u.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!l,retryFetchOnRevisit:!1,size:t,timestamp:a})},pp=({paginable:e=!0,from:t,to:a,showViewHistoryButton:r=!0})=>{var s;const l=Object(p.useHistory)(),{basePath:d}=tt(),{monitorId:m}=Object(p.useParams)(),[f,g]=Object(n.useState)({index:0,size:10}),[h,b]=Object(n.useState)("timestamp"),[E,y]=Object(n.useState)("desc"),{lastRefresh:v}=K(),{pings:x,total:S,loading:M}=(e=>{const t=Object(u.useDispatch)(),{monitor:a}=wa(),i=$s(),r=null==a?void 0:a.id,s=null==i?void 0:i.label,o=Object(u.useSelector)($.Y);Object(n.useEffect)((()=>{r&&s&&t($.t.get({monitorId:r,locationId:s,size:null==e?void 0:e.pageSize,pageIndex:null==e?void 0:e.pageIndex,from:null==e?void 0:e.from,to:null==e?void 0:e.to,statusFilter:o}))}),[t,r,s,null==e?void 0:e.lastRefresh,null==e?void 0:e.pageSize,null==e?void 0:e.pageIndex,null==e?void 0:e.from,null==e?void 0:e.to,o]);const{total:l,data:c,loading:d}=Object(u.useSelector)($.N);return{loading:d,total:l,pings:c}})({from:t,to:a,lastRefresh:v,pageSize:f.size,pageIndex:f.index}),O=Object(n.useMemo)((()=>function(e,t,a){const n=[...e];return n.sort(((e,n)=>{var i,r;let s=null!==(i=Object(k.get)(e,t))&&void 0!==i?i:null,o=null!==(r=Object(k.get)(n,t))&&void 0!==r?r:null;return null===s||null===o?0:("timestamp"===t&&(s=new Date(s),o=new Date(o)),"monitor.status"===t&&(s="up"===s?-1:1,o="up"===o?-1:1),"string"==typeof s?"asc"===a?s.localeCompare(o):o.localeCompare(s):"asc"===a?s-o:o-s)})),n}(x,h,E)),[x,h,E]),T=Object(u.useSelector)($.T),{monitor:C}=wa(),I=$s(),j=Object(w.useIsWithinMinBreakpoint)("s"),_=(null==C?void 0:C[He.c.MONITOR_TYPE])===He.q.BROWSER,{expandedRows:F,setExpandedRows:P}=qo(x),L={sort:{field:h,direction:E}},R=[..._?[{align:"left",field:"timestamp",name:hp,render:(e,t)=>i.a.createElement(mp,{checkGroupId:t.monitor.check_group,size:[100,64],timestamp:e}),mobileOptions:{header:!1,render:e=>i.a.createElement(kp,{alignItems:"center"},i.a.createElement(mp,{checkGroupId:e.monitor.check_group,size:Yr,timestamp:e.timestamp}))}}]:[],{align:"left",valign:"middle",field:"timestamp",name:"@timestamp",sortable:!0,render:(e,t)=>i.a.createElement(vo,{isBrowserMonitor:_,timestamp:e,ping:t}),mobileOptions:{header:!1,render:e=>i.a.createElement(fp,{ping:e,isBrowserMonitor:_,basePath:d,locationId:null==I?void 0:I.id})}},{align:"left",valign:"middle",field:"monitor.status",name:Ep,sortable:!0,render:(e,t)=>{var a,n,r,s;const o=null!==(a=null===(n=t.summary)||void 0===n?void 0:n.attempt)&&void 0!==a?a:1;return null!==(r=null===(s=t.summary)||void 0===s?void 0:s.final_attempt)&&void 0!==r&&r&&1!==o?i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Ps,{status:Ls(null!=e?e:"skipped")})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiIconTip,{"data-test-subj":"isRetestIcon",type:"refresh",content:bp}))):i.a.createElement(Ps,{status:Ls(null!=e?e:"skipped")})},mobileOptions:{show:!1}},..._?[]:[{align:"left",field:"monitor.ip",sortable:!0,name:o.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})}],{align:"left",field:"error.message",name:yp,textOnly:!0,css:A.css`
        max-width: 500px;
      `,render:e=>i.a.createElement(w.EuiText,{size:"s"},(null==e?void 0:e.length)>0?e:"-"),mobileOptions:{show:!1}},{align:"right",valign:"middle",field:"monitor.duration.us",name:vp,sortable:!0,render:e=>i.a.createElement(w.EuiText,{size:"s"},Ws(e)),mobileOptions:{show:!1}},{align:"right",actions:[{"data-test-subj":"syntheticsViewPingDocument",isPrimary:!0,name:sp,description:sp,icon:"inspect",type:"button",render:e=>i.a.createElement(ip,{ping:e})}]},..._?[]:[{align:"right",width:"24px",isExpander:!0,render:e=>i.a.createElement(ml,{item:e,expandedRows:F,setExpandedRows:P})}]];return i.a.createElement(Mp,{hasShadow:!1,hasBorder:!0},i.a.createElement(cp,{paginable:e,showViewHistoryButton:r,pings:x}),i.a.createElement(wp,{itemId:"docId",isExpandable:!0,itemIdToExpandedRowMap:F,compressed:!1,loading:M,columns:R,error:null==T||null===(s=T.body)||void 0===s?void 0:s.message,items:O,noItemsMessage:M?xp:Sp,tableLayout:"auto",sorting:L,onChange:({page:e,sort:t})=>{void 0!==e&&g(e),void 0!==t&&(b(t.field),y(t.direction))},rowProps:e=>({"data-test-subj":`row-${e.monitor.check_group}`,onClick:t=>{e.monitor.type!==c.v.BROWSER?ul(e,F,P):l.push(So({monitorId:m,checkGroup:e.monitor.check_group,locationId:null==I?void 0:I.id}))}}),pagination:e?{pageIndex:f.index,pageSize:f.size,totalItemCount:S,pageSizeOptions:[5,10,20,50]}:void 0,$_css:j?"auto":void 0}))},fp=({ping:e,isBrowserMonitor:t,basePath:a,locationId:n})=>{var r,s,l,c,u,d,m,p;return i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(vo,{isBrowserMonitor:t,timestamp:e.timestamp,ping:e}),i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",wrap:!1,responsive:!1},i.a.createElement(Op,null,i.a.createElement(Ps,{status:Ls(null!==(r=null==e||null===(s=e.monitor)||void 0===s?void 0:s.status)&&void 0!==r?r:"skipped")})),i.a.createElement(Tp,null,null!=e&&null!==(l=e.state)&&void 0!==l&&l.id&&e.config_id&&n&&"failed"===Ls(null!==(c=null==e||null===(u=e.monitor)||void 0===u?void 0:u.status)&&void 0!==c?c:"skipped")?i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"monitorTestRunsListViewErrorDetails",color:"danger",href:sc({basePath:a,configId:e.config_id,locationId:n,stateId:null==e||null===(d=e.state)||void 0===d?void 0:d.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewErrorDetails",{defaultMessage:"View error details"})):null)),i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"s"},[{title:vp,description:Ws(null==e||null===(m=e.monitor)||void 0===m||null===(p=m.duration)||void 0===p?void 0:p.us)}].map((({title:e,description:t})=>i.a.createElement(Cp,{key:e,direction:"row",alignItems:"baseline",gutterSize:"xs",responsive:!1,wrap:!0},i.a.createElement(w.EuiText,{size:"xs"},e),t)))))},gp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTenTestRuns",{defaultMessage:"Last 10 Test Runs"}),hp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.screenshot",{defaultMessage:"Screenshot"}),bp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.finalAttempt",{defaultMessage:"This is a retest since retry on failure is enabled."}),Ep=o.i18n.translate("xpack.synthetics.monitorDetails.summary.result",{defaultMessage:"Result"}),yp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.message",{defaultMessage:"Message"}),vp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.duration",{defaultMessage:"Duration"}),xp=o.i18n.translate("xpack.synthetics.monitorDetails.loadingTestRuns",{defaultMessage:"Loading test runs..."}),Sp=o.i18n.translate("xpack.synthetics.monitorDetails.noDataFound",{defaultMessage:"No data found"});var kp=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-kr3tj8-0"})({width:"100%",height:"100%"}),Mp=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-kr3tj8-1"})({minHeight:200}),wp=Ut()(w.EuiBasicTable).withConfig({displayName:"_StyledEuiBasicTable",componentId:"sc-kr3tj8-2"})((e=>({overflowX:e.$_css}))),Op=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-kr3tj8-3"})({flexBasis:"fit-content"}),Tp=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-kr3tj8-4"})({textAlign:"right"}),Cp=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup2",componentId:"sc-kr3tj8-5"})({maxWidth:"fit-content"});const Ip=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Nu();return a?i.a.createElement(t,{id:"monitorSuccessfulCount",align:"left",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_successful",name:jp}]}):null},jp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.successful",{defaultMessage:"Successful"}),_p=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Nu();return a?i.a.createElement(t,{id:"monitorTotalRunsCount",align:"left",reportType:fa.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_total_runs",name:Fp}]}):null},Fp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.totalRuns",{defaultMessage:"Total runs"}),Pp=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:r}}=Object(T.useKibana)().services,{euiTheme:s}=Object(w.useEuiTheme)(),{queryIdFilter:o,locationFilter:l}=Nu(),c=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return o?i.a.createElement(r,{id:a,reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{time:c,seriesType:"area",reportDefinitions:o,filters:l,dataType:"synthetics",selectedMetricField:"monitor_errors",name:zu,color:s.colors.danger,operationType:"unique_count"}]}):null},Lp=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(T.useKibana)(),{queryIdFilter:a,locationFilter:n}=Nu(),r=Object(N.useTheme)();return a?i.a.createElement(t,{id:e.id,customHeight:"70px",reportType:fa.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:Km,dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:a,filters:n,color:r.eui.euiColorVis1}]}):null},Rp=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(T.useKibana)(),{queryIdFilter:a,locationFilter:n}=Nu(),r=Object(N.useTheme)();return a?i.a.createElement(i.a.Fragment,null,i.a.createElement(t,{id:e.id,reportType:fa.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:Xm,dataType:"synthetics",selectedMetricField:"monitor.duration.us",reportDefinitions:a,filters:n,color:r.eui.euiColorVis1}]})):null},Dp=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Nu(),{euiTheme:r}=Object(w.useEuiTheme)();return a?i.a.createElement(t,{id:"monitorSuccessfulSparklines",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_successful",name:jp,color:r.colors.success,operationType:"unique_count"}]}):null},Ap=o.i18n.translate("xpack.synthetics.monitorDetails.availability.label",{defaultMessage:"Availability"}),Np=o.i18n.translate("xpack.synthetics.monitorDetails.complete.label",{defaultMessage:"Complete"}),Bp=o.i18n.translate("xpack.synthetics.monitorDetails.failed.label",{defaultMessage:"Failed"}),zp=o.i18n.translate("xpack.synthetics.monitorDetails.skipped.label",{defaultMessage:"Skipped"}),Hp=(o.i18n.translate("xpack.synthetics.monitorDetails.error.label",{defaultMessage:"Error"}),o.i18n.translate("xpack.synthetics.monitorDetails.status",{defaultMessage:"Status"})),Gp=o.i18n.translate("xpack.synthetics.monitorDetails.last24Hours",{defaultMessage:"Last 24 hours"}),Vp=o.i18n.translate("xpack.synthetics.monitorDetails.viewHistory",{defaultMessage:"View History"}),$p=o.i18n.translate("xpack.synthetics.monitorDetails.brushArea.message",{defaultMessage:"Brush an area for higher fidelity"}),Up=({from:e,to:t,periodCaption:a,showViewHistoryButton:n})=>{var r;const{basePath:s}=tt(),{monitor:o}=wa(),l=$s(),u=Ee({locationId:null==l?void 0:l.id,dateRangeStart:"now-24h",dateRangeEnd:"now"}),d=`${s}/app/synthetics${c.s.replace(":monitorId",null!==(r=null==o?void 0:o[He.c.CONFIG_ID])&&void 0!==r?r:"")}${u}`,m=a||("now-24h"===e&&"now"===t?Gp:"");return i.a.createElement(qp,{direction:"row",alignItems:"baseline",wrap:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",responsive:!1,wrap:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h4",null,Hp))),m?i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},m)):null),n?i.a.createElement(Wp,{href:d,"data-test-subj":"monitorStatusChartViewHistoryButton",size:"xs",iconType:"list"},Vp):null)};var qp=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1ezfhq8-0"})({marginBottom:0}),Wp=Ut()(w.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-1ezfhq8-1"})({marginLeft:"auto"});const Kp=w.VISUALIZATION_COLORS[0],Yp=w.VISUALIZATION_COLORS[w.VISUALIZATION_COLORS.length-1];function Xp(e,t){const a=t===w.COLOR_MODES_STANDARD.dark?w.transparentize:w.tint;return[{color:Yp,start:-1/0,end:-1},{color:Yp,start:-1,end:-.75},{color:a(Yp,.25),start:-.75,end:-.5},{color:a(Yp,.5),start:-.5,end:-.25},{color:a(Yp,.75),start:-.25,end:-1e-9},{color:Jp(e),start:-1e-9,end:1e-9},{color:a(Kp,.5),start:1e-9,end:.25},{color:a(Kp,.35),start:.25,end:.5},{color:a(Kp,.2),start:.5,end:.8},{color:Kp,start:.8,end:1},{color:Kp,start:1,end:1/0}]}function Jp(e){return e.colors.lightestShade}function Qp(e){if("number"==typeof e)return e;let t=e;return"string"==typeof e&&(t=X.a.parse(e,{momentInstance:V.a})),V()(t).valueOf()}const Zp=({timeBin:e,isLoading:t})=>{if(!e)return i.a.createElement(i.a.Fragment,null,"");const a=V()(e.start),n=V()(e.end),r=a.format("LL"),s=a.format("HH:mm"),o=n.format("HH:mm"),l=`${r} @ ${s} - ${a.dayOfYear()!==n.dayOfYear()?`${n.format("LL")} @ `:""}${o}`,c=e.ups+e.downs>0?`${Math.round(e.ups/(e.ups+e.downs)*100)}%`:"-",u={isVisible:!0,isHighlighted:!1,seriesIdentifier:{specId:"",key:""}},d=t?[]:[{color:"transparent",label:Ap,value:c,formattedValue:c,...u},{color:Kp,label:Np,value:e.ups,formattedValue:`${e.ups}`,...u},{color:Yp,label:Bp,value:e.downs,formattedValue:`${e.downs}`,...u}];return i.a.createElement(it.TooltipContainer,null,i.a.createElement(it.TooltipHeader,null,l),t&&i.a.createElement(w.EuiProgress,{size:"xs"}),i.a.createElement(it.TooltipTable,{columns:[{type:"color"},{type:"text",cell:e=>e.label,style:{textAlign:"left"}},{type:"number",cell:e=>e.value,style:{textAlign:"right"}}],items:d}))},ef=({brushable:e})=>{const{euiTheme:t}=Object(w.useEuiTheme)(),a=Object(n.useMemo)((()=>({color:e,label:t,iconType:a="dot"})=>i.a.createElement(tf,{grow:!1},i.a.createElement(w.EuiIcon,{type:a,color:e}),i.a.createElement(w.EuiText,{size:"xs"},t))),[]);return i.a.createElement(w.EuiFlexGroup,{wrap:!0,responsive:!1},i.a.createElement(a,{color:Kp,label:Np}),i.a.createElement(a,{color:Yp,label:Bp}),i.a.createElement(a,{color:Jp(t),label:zp}),e?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexItem,{"aria-hidden":!0,grow:!0}),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"xs",color:t.colors.subduedText},$p))):null)};var tf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-4wu9ae-0"})({display:"flex",flexDirection:"row",gap:2});const af=({from:e,to:t})=>{const{lastRefresh:a}=K(),{monitor:i}=wa(),r=Math.max(3,null!=i&&i.schedule?(s=null==i?void 0:i.schedule,Math.floor(function(e){return parseInt(e.number,10)*function(e){switch(e){case He.w.SECONDS:return 1e3;case He.w.MINUTES:return 6e4;default:throw new Error(`Unit ${e} is not supported`)}}(e.unit)}(s)/6e4)):3);var s;const o=Qp(e),l=Qp(t),c=Math.ceil(l-o)/6e4,d=(({from:e,to:t,size:a,monitorInterval:i,lastRefresh:r})=>{const{monitor:s}=wa(),o=$s(),l=Object(n.useCallback)((()=>{var e,t;return Object($.S)(null!==(e=null==s?void 0:s[He.c.CONFIG_ID])&&void 0!==e?e:"",null!==(t=null==o?void 0:o.label)&&void 0!==t?t:"")}),[s,null==o?void 0:o.label]),c=Object(u.useSelector)($.I),d=Object(u.useSelector)(l()),m=Object(u.useDispatch)(),p=Object(n.useRef)({monitorId:"",locationLabel:"",to:0,from:0,lastRefresh:0}),f=Math.abs(p.current.to-t)/6e4,g=Math.abs(p.current.from-e)/6e4,h=Math.abs(p.current.lastRefresh-r)/6e4,b=f>=i||g>=i||h>=3||(null==s?void 0:s.id)!==p.current.monitorId||(null==o?void 0:o.label)!==p.current.locationLabel;return Object(n.useEffect)((()=>{!c&&b&&null!=s&&s.id&&null!=o&&o.label&&e&&t&&a&&(m($.s.get({monitorId:s.id,locationId:o.label,from:e,to:t,size:a})),p.current={monitorId:s.id,locationLabel:null==o?void 0:o.label,to:t,from:e,lastRefresh:r})}),[m,null==s?void 0:s.id,null==o?void 0:o.label,e,t,a,b,r]),d.filter((({timestamp:a})=>{const n=Number(new Date(a));return n>=e&&n<=t}))})({from:o,to:l,size:Math.min(1e4,Math.ceil(c/r*2)),monitorInterval:r,lastRefresh:a}),[m,p]=Object(n.useState)(50),f=Math.floor(Math.max(r,c/m)),g=Object(n.useCallback)(Object(k.throttle)((e=>{p(Math.floor(e.width/17))}),500),[]),{timeBins:h,timeBinsByEndTime:b,xDomain:E}=Object(n.useMemo)((()=>{var e,t,a,n;const i=function(e,t){let a=0;return(null!=e?e:[]).map((e=>{const n={start:e.start,end:e.end,ups:0,downs:0,value:0};for(;a<t.length&&V()(t[a].timestamp).valueOf()<e.end;){var i,r,s,o;n.ups+=null!==(i=null===(r=t[a])||void 0===r?void 0:r.summary.up)&&void 0!==i?i:0,n.downs+=null!==(s=null===(o=t[a])||void 0===o?void 0:o.summary.down)&&void 0!==s?s:0,n.value=(l=n.ups,c=n.downs,l===c?-.1:(l-c)/(l+c)),a++}var l,c;return n}))}(function(e,t,a){const n=function(e,t){const a=Math.floor(e)%60,n=Math.ceil(new Date(t).getUTCMinutes()/a)*a;return V()(t).utc().startOf("hour").add(n,"minute").valueOf()}(e,a),i=[];let r=n,s=5e3;for(;r>=t&&s>0;){const t=r-Math.floor(60*e*1e3);i.unshift({start:t,end:r}),r=t,--s}return i}(f,o,l),d),r=function(e){return e.reduce(((e,t)=>e.set(t.end,t)),new Map)}(i);return{timeBins:i,timeBinsByEndTime:r,xDomain:{min:null!==(e=null==i||null===(t=i[0])||void 0===t?void 0:t.end)&&void 0!==e?e:o,max:null!==(a=null==i||null===(n=i[i.length-1])||void 0===n?void 0:n.end)&&void 0!==a?a:l}}}),[f,d,o,l]);return{intervalByWidth:f,timeBins:h,xDomain:E,handleResize:g,getTimeBinByXValue:e=>void 0===e?void 0:b.get(e)}},nf=({from:e="now-24h",to:t="now",brushable:a=!0,periodCaption:r,showViewHistoryButton:s=!1,onBrushed:l})=>{const{euiTheme:c,colorMode:d}=Object(w.useEuiTheme)(),{timeBins:m,handleResize:p,getTimeBinByXValue:f,xDomain:g,intervalByWidth:h}=af({from:e,to:t}),b=Object(u.useSelector)($.I),E=Object(n.useMemo)((()=>function(e,t){return{grid:{stroke:{width:0,color:"transparent"}},cell:{maxWidth:"fill",maxHeight:3,label:{visible:!1},border:{stroke:"transparent",strokeWidth:.5}},xAxisLabel:{visible:!0,fontSize:10,fontFamily:e.font.family,fontWeight:e.font.weight.light,textColor:e.colors.subduedText},yAxisLabel:{visible:!1},brushTool:{visible:t,fill:e.colors.darkShade}}}(c,a)),[c,a]);return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(Up,{from:e,to:t,brushable:a,periodCaption:r,showViewHistoryButton:s,onBrushed:l}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiResizeObserver,{onResize:p},(e=>{return i.a.createElement("div",{ref:e},i.a.createElement(it.Chart,{size:{height:60}},i.a.createElement(it.Tooltip,{customTooltip:({values:e})=>{var t,a;return i.a.createElement(Zp,{timeBin:f(null==e||null===(t=e[0])||void 0===t||null===(a=t.datum)||void 0===a?void 0:a.x),isLoading:b})}}),i.a.createElement(it.Settings,{showLegend:!1,xDomain:g,theme:{heatmap:E},onBrushEnd:e=>{null==l||l(function(e){var t,a;const[n,i]=[Number(null===(t=e.x)||void 0===t?void 0:t[0]),Number(null===(a=e.x)||void 0===a?void 0:a[1])],[r,s]=[V()(n).format(),V()(i).format()];return{from:n,to:i,fromUtc:r,toUtc:s}}(e))},locale:o.i18n.getLocale()}),i.a.createElement(it.Heatmap,{id:"monitor-details-monitor-status-chart",colorScale:{type:"bands",bands:Xp(c,d)},data:m,xAccessor:e=>e.end,yAccessor:()=>"T",valueAccessor:e=>e.value,valueFormatter:e=>e.toFixed(2),xAxisLabelFormatter:(t=h,e=>{const a=V()(e),[n,i]=[a.hours(),a.minutes()],r=0===n&&i<=36,s=t>=1440;return V()(e).format(r||s?"l":"HH:mm")}),timeZone:"UTC",xScale:{type:it.ScaleType.Time,interval:{type:"calendar",unit:"m",value:h}}})));var t})),i.a.createElement(ef,{brushable:a}))},rf=()=>{const[,e]=Se(),{from:t,to:a}=Oe(),{elementRef:r,width:s}=$e(),o=s&&s<360?1:2,l=Object(n.useCallback)((({fromUtc:t,toUtc:a})=>{e({dateRangeStart:t,dateRangeEnd:a})}),[e]);return ym()||i.a.createElement(Lm,null,i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"m"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(xm,{fullWidth:!0})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(lf,null,i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0,panelRef:r},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,sf)),i.a.createElement(w.EuiFlexGrid,{columns:o,gutterSize:"s",responsive:!1},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Ip,{from:t,to:a})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Dp,{from:t,to:a})))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Wm,{from:t,to:a,id:"availabilityPercentageHistory"})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Lp,{from:t,to:a,id:"availabilitySparklineHistory"})))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Bu,{from:t,to:a,id:"monitorErrorsCountHistory"})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Pp,{from:t,to:a,id:"monitorErrorsSparklineHistory"})))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Ym,{from:t,to:a,id:"durationAvgValueHistory"})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Rp,{from:t,to:a,id:"durationAvgSparklineHistory"})))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(_p,{from:t,to:a}))))),i.a.createElement(cf,null,i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,of)),i.a.createElement(Jm,{from:t,to:a}))))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(nf,{from:t,to:a,showViewHistoryButton:!1,periodCaption:"",brushable:!0,onBrushed:l})),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(pp,{from:t,to:a,showViewHistoryButton:!1}))))},sf=o.i18n.translate("xpack.synthetics.historyPanel.stats",{defaultMessage:"Stats"}),of=o.i18n.translate("xpack.synthetics.historyPanel.durationTrends",{defaultMessage:"Duration trends"});var lf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-f4m8es-0"})({flexBasis:"36%"}),cf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-f4m8es-1"})({flexBasis:"60%",minWidth:260});const uf=()=>{const e=Object(u.useSelector)(Dl.i),t=Object(p.useRouteMatch)({path:[c.w]}),a=Object(p.useRouteMatch)({path:[c.u]}),i=Object(u.useDispatch)(),r=Object.values(e).find((e=>e.isTestNowFlyoutOpen)),s=(null==r?void 0:r.configId)===(null==a?void 0:a.params.monitorId);return Object(n.useEffect)((()=>{null!=t&&t.isExact||!r||s||i(Object(Dl.b)())})),r},df={"kibana.alert.rule.category":["Synthetics monitor status"]},mf=({to:e,from:t,dateLabel:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:n}}=Object(T.useKibana)().services,r=Object(N.useTheme)(),{queryIdFilter:s,locationFilter:o}=Nu();return $s()&&s?i.a.createElement(w.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,pf," (",i.a.createElement("div",{style:{display:"inline-block"}},i.a.createElement(n,{noLabel:!0,fontSize:16,lineHeight:27,withActions:!1,customHeight:"27px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:"All",selectedMetricField:fa.RECORDS_FIELD,reportDefinitions:{...df,...s},filters:null!=o?o:[]}]})),")"))),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiText,{color:"subdued",size:"s"},a)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(qa,{from:t,to:e}))),i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs",wrap:!0},i.a.createElement(w.EuiFlexItem,{style:{width:80},grow:!1},i.a.createElement(n,{dataTestSubj:"monitorActiveAlertsCount",customHeight:"120px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:ff,selectedMetricField:fa.RECORDS_FIELD,reportDefinitions:{...df,...s},filters:[{field:"kibana.alert.status",values:["active"]},...null!=o?o:[]]}]})),i.a.createElement(hf,null,i.a.createElement(n,{sparklineMode:!0,customHeight:"100px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:t,to:e},reportDefinitions:{...df,...s},dataType:"alerts",selectedMetricField:fa.RECORDS_FIELD,name:ff,filters:[{field:"kibana.alert.status",values:["active"]},...null!=o?o:[]],color:r.eui.euiColorVis7_behindText}]})),i.a.createElement(w.EuiFlexItem,{grow:!1,style:{width:85,marginLeft:40}},i.a.createElement(n,{customHeight:"120px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:gf,selectedMetricField:fa.RECORDS_FIELD,reportDefinitions:{...df,...s},filters:[{field:"kibana.alert.status",values:["recovered"]},...null!=o?o:[]]}]})),i.a.createElement(bf,null,i.a.createElement(n,{sparklineMode:!0,customHeight:"100px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:t,to:e},reportDefinitions:{...df,...s},dataType:"alerts",selectedMetricField:"recovered_alerts",name:gf,filters:[{field:"kibana.alert.status",values:["recovered"]},...null!=o?o:[]],color:r.eui.euiColorVis0_behindText}]})))):i.a.createElement(w.EuiSkeletonText,null)},pf=o.i18n.translate("xpack.synthetics.detailsPanel.alerts",{defaultMessage:"Alerts"}),ff=o.i18n.translate("xpack.synthetics.detailsPanel.alerts.active",{defaultMessage:"Active"}),gf=o.i18n.translate("xpack.synthetics.detailsPanel.alerts.recovered",{defaultMessage:"Recovered"});var hf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1wtpp56-0"})({minWidth:80}),bf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-1wtpp56-1"})({minWidth:80});const Ef=({legendPosition:e,doBreakdown:t=!0})=>{const{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(T.useKibana)().services,n=ke({from:"now-24h/h",to:"now"}),{monitor:r}=wa(),{queryIdFilter:s,locationFilter:o}=Nu(),l="browser"===(null==r?void 0:r.type);if(!s)return null;const c=t?l?yf:vf:xf;return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,c))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{size:"s",color:"subdued"},Sf))),i.a.createElement(a,{id:"stepDurationLines",axisTitlesVisibility:{yLeft:!1,yRight:!1,x:!1},customHeight:"300px",reportType:fa.ReportTypes.KPI,legendPosition:e,legendIsVisible:t,attributes:[{time:n,name:c,reportDefinitions:s,filters:o,selectedMetricField:l&&t?"synthetics.step.duration.us":"monitor.duration.us",dataType:"synthetics",operationType:t?"last_value":"average",seriesType:"area_stacked",...t?{breakdown:l?"synthetics.step.name.keyword":"observer.geo.name"}:{}}]}))},yf=o.i18n.translate("xpack.synthetics.detailsPanel.durationByStep",{defaultMessage:"Duration by step"}),vf=o.i18n.translate("xpack.synthetics.detailsPanel.durationByLocation",{defaultMessage:"Duration by location"}),xf=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDuration",{defaultMessage:"Monitor duration"}),Sf=o.i18n.translate("xpack.synthetics.detailsPanel.last24Hours",{defaultMessage:"Last 24 hours"}),kf=e=>{var t;const{latestPing:a}=nc(),{monitorId:n}=Object(p.useParams)(),{monitor:r,loading:s}=wa(),o=(null==a?void 0:a.config_id)===(null==r?void 0:r[He.c.CONFIG_ID])||(null==a||null===(t=a.monitor)||void 0===t?void 0:t.id)===(null==r?void 0:r[He.c.MONITOR_QUERY_ID]);return r&&o?i.a.createElement(Wn,m()({latestPing:a,monitor:r,loading:s,configId:n},e)):i.a.createElement(w.EuiSkeletonText,{lines:6})},Mf=({ping:e,loading:t})=>{var a,n,r,s,o,l,c,u,d,m;const p=t||null==e||null===(a=e.resolve)||void 0===a?void 0:a.ip,f=t?NaN:null!==(n=null==e||null===(r=e.monitor)||void 0===r||null===(s=r.duration)||void 0===s?void 0:s.us)&&void 0!==n?n:NaN,g=t?NaN:null!==(o=null==e||null===(l=e.resolve)||void 0===l||null===(c=l.rtt)||void 0===c?void 0:c.us)&&void 0!==o?o:NaN,h=t||null==e||null===(u=e.url)||void 0===u?void 0:u.full,b=t||null==e||null===(d=e.http)||void 0===d||null===(m=d.response)||void 0===m?void 0:m.status_code;return i.a.createElement(w.EuiDescriptionList,{type:"column",compressed:!0},i.a.createElement(w.EuiDescriptionListTitle,null,"IP"),i.a.createElement(w.EuiDescriptionListDescription,null,p),i.a.createElement(w.EuiDescriptionListTitle,null,wf),i.a.createElement(w.EuiDescriptionListDescription,null,isNaN(f)?"":Ws(f)),i.a.createElement(w.EuiDescriptionListTitle,null,"rtt"),i.a.createElement(w.EuiDescriptionListDescription,null,isNaN(g)?"":Ws(g)),i.a.createElement(w.EuiDescriptionListTitle,null,"URL"),i.a.createElement(w.EuiDescriptionListDescription,null,h),b?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiDescriptionListTitle,null,"Response status"),i.a.createElement(w.EuiDescriptionListDescription,null,i.a.createElement(w.EuiBadge,null,b))):null)},wf=o.i18n.translate("xpack.synthetics.monitor.duration.label",{defaultMessage:"Duration"}),Of=()=>{var e;const{latestPing:t,loading:a}=nc(),{lastRefresh:n}=K(),{data:r,loading:s}=Ki(null==t||null===(e=t.monitor)||void 0===e?void 0:e.check_group,n),o=s||a;return i.a.createElement(Tf,{stepsData:r,latestPing:t,loading:o,stepsLoading:s,isErrorDetails:!1})},Tf=({latestPing:e,loading:t,stepsData:a,stepsLoading:n,isErrorDetails:r=!1})=>{var s,l;const{monitor:c}=wa(),{euiTheme:u}=Object(w.useEuiTheme)(),d=$s(),{basePath:m}=tt();return i.a.createElement(jf,{hasShadow:!1,hasBorder:!0},i.a.createElement(Cf,{monitor:c,latestPing:e,loading:t}),t&&!e||null==e||!e.error?null:i.a.createElement(w.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",style:{marginTop:u.base,borderRadius:u.border.radius.medium,fontWeight:u.font.weight.semiBold},title:null==e?void 0:e.error.message,size:"s",color:"danger",iconType:"warning"},r?null:i.a.createElement(w.EuiButton,{"data-test-subj":"monitorTestRunViewErrorDetails",color:"danger",href:sc({basePath:m,configId:null==c?void 0:c[He.c.CONFIG_ID],locationId:d.id,stateId:null===(s=e.state)||void 0===s?void 0:s.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewErrorDetails",{defaultMessage:"View error details"}))),i.a.createElement(w.EuiSpacer,{size:"m"}),(null==c?void 0:c.type)===He.q.BROWSER?i.a.createElement(to,{steps:null!==(l=null==a?void 0:a.steps)&&void 0!==l?l:[],loading:n,showStepNumber:!0,showExpand:r}):i.a.createElement(Mf,{ping:e,loading:t}))},Cf=({monitor:e,latestPing:t,loading:a})=>{var n;const{euiTheme:r}=Object(w.useEuiTheme)(),{basePath:s}=tt(),l=$s(),{monitorId:c}=Object(p.useParams)(),u=qn()(null==t?void 0:t.timestamp),d=(null==e?void 0:e[He.c.MONITOR_TYPE])===He.q.BROWSER,m=i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,If));return a&&!t?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},m),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiSkeletonRectangle,{width:"52px",height:"20px"})),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiSkeletonText,{lines:1})),i.a.createElement(w.EuiFlexItem,null,d?i.a.createElement(w.EuiSkeletonText,{lines:1}):null))):t?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1},m),i.a.createElement(_f,{grow:!1},i.a.createElement(Ps,{status:Ls((null==t||null===(n=t.summary)||void 0===n?void 0:n.down)>0?"fail":"success")})),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(Ff,{size:"xs",color:r.colors.darkShade},u)),d?i.a.createElement(Pf,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"monitorSummaryViewLastTestRun",size:"xs",iconType:"inspect",iconSide:"left",href:xo({basePath:s,monitorId:c,checkGroup:null==t?void 0:t.monitor.check_group,locationId:null==l?void 0:l.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewTestRun",{defaultMessage:"View test run"}))):null)):i.a.createElement(i.a.Fragment,null,m)},If=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTestRunTitle",{defaultMessage:"Last test run"});var jf=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-hq8lwd-0"})({minHeight:356}),_f=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-hq8lwd-1"})({flexBasis:"fit-content"}),Ff=Ut()(w.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-hq8lwd-2"})({whiteSpace:"nowrap"}),Pf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-hq8lwd-3"})({marginLeft:"auto"});const Lf=()=>{const{from:e,to:t}=(()=>{const{monitor:e,loading:t}=wa(),{from:a,to:i}=Me(30,"days");return Object(n.useMemo)((()=>{if(null!=e&&e.created_at){const a=V()().diff(e.created_at,"days");if(((null==e?void 0:e[mm.b.MONITOR_SOURCE_TYPE])!==He.z.PROJECT||a>3)&&a<30)return{to:i,from:e.created_at,loading:t}}return{to:i,from:a,loading:t}}),[e,i,a,t])})(),a=!!uf(),r="now-30d/d"===e?Nf:Df;return ym()||i.a.createElement(Lm,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0,responsive:!1},i.a.createElement(Bf,{grow:1},i.a.createElement(kf,null)),i.a.createElement(zf,{grow:1},i.a.createElement(w.EuiPanel,{hasShadow:!1,grow:!1,hasBorder:!0,paddingSize:"m"},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Rf))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{color:"subdued",size:"s"},r))),i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!0},i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Wm,{from:e,to:t,id:"availabilityPercentageSummary"})),i.a.createElement(Hf,null,i.a.createElement(Lp,{from:e,to:t,id:"availabilitySparklineSummary"}))),i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},i.a.createElement(Gf,{grow:!1},i.a.createElement(Ym,{from:e,to:t,id:"durationAvgValueSummary"})),i.a.createElement(Vf,null,i.a.createElement(Rp,{from:e,to:t,id:"durationAvgSparklineSummary"}))),i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Bu,{from:e,to:t,id:"monitorErrorsCountSummary"})),i.a.createElement($f,null,i.a.createElement(Pp,{from:e,to:t,id:"monitorErrorsSparklineSummary"}))))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Af))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{color:"subdued",size:"s"},r))),i.a.createElement(Jm,{from:e,to:t})))))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(nf,{from:"now-24h",to:"now",brushable:!1,showViewHistoryButton:!0}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(Uf,{$_css:a?{minWidth:260}:void 0},i.a.createElement(Of,null)),i.a.createElement(qf,null,i.a.createElement(mf,{dateLabel:r,from:e,to:t}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Ef,null))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(N.LoadWhenInView,{placeholderTitle:gp},i.a.createElement(pp,{paginable:!1,from:e,to:t})))},Rf=o.i18n.translate("xpack.synthetics.detailsPanel.summary",{defaultMessage:"Summary"}),Df=o.i18n.translate("xpack.synthetics.detailsPanel.toDate",{defaultMessage:"To date"}),Af=o.i18n.translate("xpack.synthetics.detailsPanel.durationTrends",{defaultMessage:"Duration trends"}),Nf=o.i18n.translate("xpack.synthetics.detailsPanel.last30Days",{defaultMessage:"Last 30 days"});var Bf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-oqymej-0"})({flexBasis:"36%",minWidth:260}),zf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-oqymej-1"})({flexBasis:"60%"}),Hf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem3",componentId:"sc-oqymej-2"})({minWidth:100}),Gf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem4",componentId:"sc-oqymej-3"})({minWidth:86}),Vf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem5",componentId:"sc-oqymej-4"})({minWidth:100}),$f=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem6",componentId:"sc-oqymej-5"})({minWidth:100}),Uf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem7",componentId:"sc-oqymej-6"})(["",""],(e=>e.$_css)),qf=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem8",componentId:"sc-oqymej-7"})({minWidth:260});const Wf=()=>{const{basePath:e}=tt(),{monitorId:t}=Object(p.useParams)(),a=qt(),n=a?{href:`${e}/app/synthetics/edit-monitor/${t}`}:{disabled:!0};return i.a.createElement(Mn,{canEditSynthetics:a},i.a.createElement(w.EuiButton,m()({"data-test-subj":"syntheticsEditMonitorLinkButton",fill:!0,iconType:"pencil",iconSide:"left"},n),Kf))},Kf=o.i18n.translate("xpack.synthetics.monitorSummary.editMonitor",{defaultMessage:"Edit monitor"}),Yf=(e,t,a)=>[{title:o.i18n.translate("xpack.synthetics.monitorDetails.title",{defaultMessage:"Synthetics Monitor Details | {baseTitle}",values:{baseTitle:a}}),path:c.u,component:Lf,dataTestSubj:"syntheticsMonitorDetailsPage",pageHeader:Jf(e,t,"overview")},{title:o.i18n.translate("xpack.synthetics.monitorHistory.title",{defaultMessage:"Synthetics Monitor History | {baseTitle}",values:{baseTitle:a}}),path:c.s,component:rf,dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:Jf(e,t,"history")},{title:o.i18n.translate("xpack.synthetics.monitorErrors.title",{defaultMessage:"Synthetics Monitor Errors | {baseTitle}",values:{baseTitle:a}}),path:c.r,component:Bm,dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:Jf(e,t,"errors")},{title:o.i18n.translate("xpack.synthetics.monitorNotFound.title",{defaultMessage:"Synthetics Monitor Not Found | {baseTitle}",values:{baseTitle:a}}),path:c.t,component:Kd,dataTestSubj:"syntheticsMonitorNotFoundPage",pageHeader:{breadcrumbs:[Xf(t)]}}],Xf=e=>({text:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiIcon,{size:"s",type:"arrowLeft"})," ",i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorSummaryRoute.monitorBreadcrumb",defaultMessage:"Monitors"})),color:"primary","aria-current":!1,href:`${e}${c.o}`}),Jf=(e,t,a)=>{const n=Object(p.useRouteMatch)(c.u);if(!n)return{};const r=e.location.search,s=n.params.monitorId;return{pageTitle:i.a.createElement(dm,null),breadcrumbs:[Xf(t)],rightSideItems:[i.a.createElement(Jt,null),i.a.createElement(Wf,null),i.a.createElement(pm,null),i.a.createElement(gm,null),i.a.createElement(bm,null),i.a.createElement(Em,null)],tabs:[{label:o.i18n.translate("xpack.synthetics.monitorOverviewTab.title",{defaultMessage:"Overview"}),isSelected:"overview"===a,href:`${t}${c.u.replace(":monitorId?",s)}${r}`,"data-test-subj":"syntheticsMonitorOverviewTab"},{label:o.i18n.translate("xpack.synthetics.monitorHistoryTab.title",{defaultMessage:"History"}),isSelected:"history"===a,href:`${t}${c.s.replace(":monitorId",s)}${r}`,"data-test-subj":"syntheticsMonitorHistoryTab"},{label:o.i18n.translate("xpack.synthetics.monitorErrorsTab.title",{defaultMessage:"Errors"}),prepend:i.a.createElement(qm,null),isSelected:"errors"===a,href:`${t}${c.r.replace(":monitorId",s)}${r}`,"data-test-subj":"syntheticsMonitorErrorsTab"}]}},Qf=({checkGroupId:e,stepIndex:t})=>{const{basePath:a}=tt(),{monitorId:n}=Object(p.useParams)(),i=$s();return e?Zf({basePath:a,stepIndex:t,monitorId:n,checkGroupId:e,locationId:null==i?void 0:i.id}):""},Zf=({checkGroupId:e,stepIndex:t,basePath:a,monitorId:n,locationId:i})=>`${a}/app/synthetics/monitor/${n}/test-run/${e}/step/${t}?locationId=${i}`,eg=()=>i.a.createElement(w.EuiDescriptionList,{listItems:[{title:tg,description:i.a.createElement(ag,null)}]}),tg=o.i18n.translate("xpack.synthetics.testDetails.date",{defaultMessage:"Date"}),ag=({testRunPage:e})=>{var t,a,r,s,o;const[l,c]=Object(n.useState)(!1),{data:u}=Ki(),d=qn(),{basePath:m}=tt(),f=$s();let g=d(null==u||null===(t=u.details)||void 0===t?void 0:t.timestamp);const{stepIndex:h,monitorId:b}=Object(p.useParams)();let E=Qf({stepIndex:h,checkGroupId:null==u||null===(a=u.details)||void 0===a||null===(r=a.previous)||void 0===r?void 0:r.checkGroup}),y=Qf({stepIndex:h,checkGroupId:null==u||null===(s=u.details)||void 0===s||null===(o=s.next)||void 0===o?void 0:o.checkGroup});var v,x,S,k,M,O,T,C;e&&(null!=u&&null!==(v=u.details)&&void 0!==v&&null!==(x=v.previous)&&void 0!==x&&x.checkGroup&&(E=xo({basePath:m,monitorId:b,locationId:null==f?void 0:f.id,checkGroup:null==u||null===(M=u.details)||void 0===M||null===(O=M.previous)||void 0===O?void 0:O.checkGroup})),null!=u&&null!==(S=u.details)&&void 0!==S&&null!==(k=S.next)&&void 0!==k&&k.checkGroup&&(y=xo({basePath:m,monitorId:b,locationId:null==f?void 0:f.id,checkGroup:null==u||null===(T=u.details)||void 0===T||null===(C=T.next)||void 0===C?void 0:C.checkGroup})));return g||(g=i.a.createElement(w.EuiSkeletonText,{lines:1})),i.a.createElement(w.EuiPopover,{closePopover:()=>c(!1),isOpen:l,button:i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",style:{height:20},onClick:()=>c((e=>!e)),iconType:"arrowDown",iconSide:"right",flush:"left"},g)},i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",href:E,disabled:!E,iconType:"arrowLeft","aria-label":ng},ng)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"s",className:"eui-textNoWrap"},g)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",href:y,disabled:!y,iconType:"arrowRight",iconSide:"right","aria-label":ig},ig))))},ng=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousCheckButtonText",{defaultMessage:"Previous check"}),ig=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextCheckButtonText",{defaultMessage:"Next check"}),rg=({stepIndex:e,totalSteps:t,handleStepHref:a})=>{const[r,s]=Object(n.useState)(!1),o=()=>{s(!1)},l=t>1,c=i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNavStepStepIndexOfTotalStepsButton",size:"s",flush:"left",iconType:l?"arrowDown":void 0,iconSide:"right",onClick:()=>{s(!r)},style:{height:20},disabled:!l},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:e,totalSteps:t}})),u=Object(k.times)(t).map((e=>i.a.createElement(w.EuiContextMenuItem,{key:e,href:a(e+1),onClick:o},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.stepNumber",defaultMessage:"Step {stepIndex}",values:{stepIndex:e+1}}))));return i.a.createElement(w.EuiPopover,{id:"stepDetailsStepNav",button:c,isOpen:r,closePopover:o,panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(w.EuiContextMenuPanel,{size:"s",items:u}))},sg=()=>{const{activeStep:e,journey:t,stepIndex:a,handleStepHref:r,stepEnds:s}=(()=>{const{checkGroupId:e,monitorId:t,stepIndex:a}=Object(p.useParams)(),i=Number(a),r=$s(),{data:s,stepEnds:o}=Ki(e),l=Object(n.useMemo)((()=>{var e;return{activeStep:null==s||null===(e=s.steps)||void 0===e?void 0:e.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===i}))}}),[s,i]),{basePath:c}=tt();return{checkGroupId:e,journey:s,stepIndex:i,stepEnds:o,...l,handleStepHref:a=>Zf({basePath:c,monitorId:t,checkGroupId:e,stepIndex:a,locationId:null==r?void 0:r.id})}})();return t&&e?i.a.createElement(w.EuiDescriptionList,{listItems:[{title:og,description:i.a.createElement(rg,{stepIndex:a,totalSteps:s.length,handleStepHref:r})}]}):null},og=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.stepLabel",{defaultMessage:"Step"}),lg=()=>{var e;const{currentStep:t}=Ki();let a=i.a.createElement(w.EuiSkeletonText,{lines:1});var n;return null!=t&&null!==(e=t.synthetics.step)&&void 0!==e&&e.status&&(a=i.a.createElement(Ps,{status:Ls(null===(n=t.synthetics.step)||void 0===n?void 0:n.status)})),i.a.createElement(w.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:fi,description:a}]})},cg=({step:e})=>{var t,a,n;if(!e||"failed"!==(null===(t=e.synthetics.step)||void 0===t?void 0:t.status))return null;const r=null!==(a=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==a?a:"";return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{title:r,color:"danger",iconType:"warning"}),i.a.createElement(w.EuiSpacer,null)):null};var ug=a(1);const dg=e=>{var t,a,n,i,r;const s=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",{monitor:o}=wa(),l=$s();Ce([{text:mg,href:`${s}${c.o}`},...o?[{text:null!==(n=null==o?void 0:o.name)&&void 0!==n?n:"",href:`${s}${c.u.replace(":monitorId",null!==(i=null==o?void 0:o[He.c.CONFIG_ID])&&void 0!==i?i:"")}?locationId=${null!==(r=null==l?void 0:l.id)&&void 0!==r?r:""}`}]:[],...null!=e?e:[]])},mg=o.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),pg=Object(A.euiStyled)(w.EuiText)`
  width: 100%;
`;class waterfall_flyout_table_TableWithoutHeader extends w.EuiBasicTable{renderTableHead(){return i.a.createElement(i.a.Fragment,null)}}const fg=e=>{const{rows:t,title:a}=e,r=Object(n.useMemo)((()=>[{field:"name",name:"",sortable:!1,render:(e,t)=>i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("strong",null,t.name))},{field:"value",name:"",sortable:!1,render:(e,t)=>{var a;return i.a.createElement(pg,{size:"xs",textAlign:"right"},null!==(a=t.value)&&void 0!==a?a:"--")}}]),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,null,i.a.createElement("h4",null,a)),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(waterfall_flyout_table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsive:!1,columns:r,items:t}))},gg=Object(n.createContext)({}),hg=({children:e,data:t,markerItems:a,onElementClick:n,onProjectionClick:r,onSidebarClick:s,showOnlyHighlightedNetworkRequests:o,showCustomMarks:l,sidebarItems:c,metadata:u,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:f,activeStep:g,activeFilters:h,setActiveFilters:b,setOnlyHighlighted:E,setShowCustomMarks:y,query:v,setQuery:x})=>i.a.createElement(gg.Provider,{value:{data:t,activeStep:g,markerItems:a,showOnlyHighlightedNetworkRequests:o,showCustomMarks:l,sidebarItems:c,metadata:u,onElementClick:n,onProjectionClick:r,onSidebarClick:s,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:f,activeFilters:h,setActiveFilters:b,setOnlyHighlighted:E,setShowCustomMarks:y,query:v,setQuery:x}},e),bg=()=>Object(n.useContext)(gg),Eg=Object(A.euiStyled)(w.EuiText)`
  font-weight: bold;
`,yg=Object(A.euiStyled)(w.EuiHorizontalRule)`
  background-color: ${e=>e.theme.eui.euiColorDarkShade};
`,vg=({text:e,url:t})=>{const{data:a,renderTooltipItem:n,sidebarItems:r}=bg(),s=a.filter((e=>{var a;return e.x===(null==r||null===(a=r.find((e=>e.url===t)))||void 0===a?void 0:a.index)&&e.config.tooltipProps&&e.config.showTooltip}));return i.a.createElement("div",{style:{maxWidth:500,height:"100%"}},i.a.createElement(Eg,{size:"xs"},e),i.a.createElement(yg,{margin:"none"}),i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.map(((e,t)=>i.a.createElement(w.EuiFlexItem,{key:t},n(e.config.tooltipProps))))))};var xg=a(306);const Sg=24,kg=A.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(xg.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Mg=Object(A.euiStyled)(kg)`
  height: auto;
  overflow: hidden;
  z-index: 50;
`,wg=Object(A.euiStyled)(kg)`
  position: sticky;
  top: 96px;
  z-index: ${e=>e.theme.eui.euiZLevel5+10};
  overflow: visible;
  min-height: ${146}px;
  border-color: ${e=>e.theme.eui.euiColorLightShade};
  border-top: ${e=>e.theme.eui.euiBorderThin};
  border-bottom: ${e=>e.theme.eui.euiBorderThin};
  padding: ${e=>e.theme.eui.euiSizeL};
  padding-bottom: ${e=>e.theme.eui.euiSizeXL};
  padding-left: ${e=>e.theme.eui.euiSizeM};
`,Og=Object(A.euiStyled)(kg)`
  position: sticky;
  bottom: 0px;
  z-index: ${e=>e.theme.eui.euiZLevel5};
  overflow: visible;
  border-color: ${e=>e.theme.eui.euiColorLightShade};
  border-top: ${e=>e.theme.eui.euiBorderThin};
  border-bottom: ${e=>e.theme.eui.euiBorderThin};
  padding: ${e=>e.theme.eui.euiSizeM};
`,Tg=Object(A.euiStyled)(kg)`
  z-index: ${e=>e.theme.eui.euiZLevel6};
  overflow: hidden;
  position: absolute;
  left: 0;
  bottom: -10px;
  width: 100%;
  height: auto;
  border: none;
  background: transparent;
`,Cg=A.euiStyled.div`
  z-index: ${e=>e.theme.eui.euiZLevel4};
  height: 100%;
  &&& {
    .echAnnotation__icon {
      top: 8px;
    }
  }
`,Ig=Object(A.euiStyled)(w.EuiFlexItem)`
  z-index: ${e=>e.theme.eui.euiZLevel4};
  min-width: 0;
`,jg=Object(A.euiStyled)(w.EuiFlexItem)`
  height: 100%;
  .euiButtonEmpty {
    height: ${Sg}px;
    font-size:${({theme:e})=>e.eui.euiFontSizeM};
  }
`,_g=A.euiStyled.div`
  width: 100%;
  height: ${e=>`${e.height+Sg+4}px`};
  margin-top: -${28}px;
  z-index: ${e=>Math.round(e.theme.eui.euiZLevel3/(e.chartIndex+1))};
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};

  &&& {
    .echCanvasRenderer {
      height: calc(100% + 0px) !important;
      }
  }
`,Fg=A.euiStyled.div`
  max-width: 90vw;
`,Pg=Object(A.euiStyled)(Fg)`
  background-color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorDarkestShade:e.euiColorEmptyShade};
  border-radius: ${e=>e.theme.eui.euiBorderRadius};
  color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorLightestShade:e.euiColorDarkestShade};
  padding: ${e=>e.theme.eui.euiSizeS};
  .euiToolTip__arrow {
    background-color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorDarkestShade:e.euiColorEmptyShade};
  }
`,Lg=A.euiStyled.span`
  position: relative;
  display: inline-flex;
  align-items: center;
  .euiToolTipAnchor {
    min-width: 0;
  }
`,Rg=A.euiStyled.span`
  overflow: hidden;
  display: flex;
  align-items: center;
`,Dg=Object(A.euiStyled)(w.EuiText)`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  margin-right: ${e=>e.theme.eui.euiSizeS};
  line-height: ${Sg}px;
  text-align: right;
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  text-align: center;
  color: ${e=>e.theme.eui.euiColorDarkShade};
`;var Ag=Ut()(Dg).withConfig({displayName:"_StyledIndexNumber",componentId:"sc-jircor-0"})((e=>({minWidth:e.$_css})));const Ng=A.euiStyled.span`
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  line-height: ${Sg}px;
  font-size: ${14}px;
  text-align: left;
`,Bg=A.euiStyled.span`
  flex-shrink: 0;
  line-height: ${Sg}px;
  font-size: ${14}px;
  text-align: left;
`,zg=Object(A.euiStyled)(w.EuiButtonEmpty)`
  &&& {
    border: none;

    .euiButtonContent {
      display: inline-block;
      padding: 0;
    }
  }
`,Hg=Object(A.euiStyled)(w.EuiIcon)`
  margin-right: ${e=>e.theme.eui.euiSizeXS};
`,Gg=({index:e,ariaLabel:t,text:a,onClick:r,setButtonRef:s,url:l,highestIndex:c})=>{const u=a.startsWith("https://"),d=a.replace(/https:\/\/www.|http:\/\/www.|http:\/\/|https:\/\//,""),m=Object(n.useMemo)((()=>((e="")=>{const t=e.split(""),a=t.length-12>0?t.length-12:null,n=a?t.splice(a):[];return{first:t.join(""),last:n.join("")}})(d)),[d]);return i.a.createElement(Lg,{"aria-label":t,"data-test-subj":"middleTruncatedTextContainer"},i.a.createElement(w.EuiScreenReaderOnly,null,i.a.createElement("span",{"data-test-subj":"middleTruncatedTextSROnly"},a)),i.a.createElement(Pg,{as:w.EuiToolTip,content:i.a.createElement(vg,{text:_s(e,a),url:l}),"data-test-subj":"middleTruncatedTextToolTip",delay:"long",position:"top"},i.a.createElement(i.a.Fragment,null,r?i.a.createElement(zg,{onClick:r,"data-test-subj":`middleTruncatedTextButton${e}`,buttonRef:s,flush:"left"},i.a.createElement(Rg,null,i.a.createElement(Ag,{color:"subdued",size:"s",$_css:`${String(c).length+3}ch`},e),u&&i.a.createElement(Hg,{type:"lock",size:"s",color:"success","aria-label":o.i18n.translate("xpack.synthetics.waterfallChart.sidebar.url.https",{defaultMessage:"https"})}),i.a.createElement(Ng,null,m.first),i.a.createElement(Bg,null,m.last))):i.a.createElement(Rg,{"aria-hidden":!0},i.a.createElement(Ng,null,e,". ",m.first),i.a.createElement(Bg,null,m.last)))),i.a.createElement("span",null,i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMiddleTruncatedTextLink",href:l,external:!0,target:"_blank"},i.a.createElement(w.EuiScreenReaderOnly,null,i.a.createElement("span",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.resource.externalLink",defaultMessage:"Open resource in new tab"}))))))},Vg=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.details",{defaultMessage:"Details"}),$g=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.certificates",{defaultMessage:"Certificate headers"}),Ug=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.requestHeaders",{defaultMessage:"Request headers"}),qg=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.responseHeaders",{defaultMessage:"Response headers"}),Wg=Object(A.euiStyled)(w.EuiFlyout)`
  z-index: ${e=>e.theme.eui.euiZLevel5};
`,Kg=({flyoutData:e,isFlyoutVisible:t,onFlyoutClose:a})=>{const r=Object(n.useRef)(null),s=Object(N.useUiTracker)({app:"uptime"});if(Object(n.useEffect)((()=>{var a;t&&e&&r.current&&(null===(a=r.current)||void 0===a||a.focus())}),[e,t,r]),!e||!t)return null;const{x:o,url:l,details:c,certificates:u,requestHeaders:d,responseHeaders:m}=e;return s({metric:"waterfall_flyout",metricType:N.METRIC_TYPE.CLICK}),i.a.createElement("div",{tabIndex:-1,ref:r,"data-test-subj":"waterfallFlyout","aria-labelledby":"flyoutTitle"},i.a.createElement(Wg,{size:"s",onClose:a},i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"s"},i.a.createElement("h2",{id:"flyoutTitle"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(Gg,{index:o+1,text:l,url:l,ariaLabel:l,highestIndex:o+1}))))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(fg,{rows:c,title:Vg}),!!d&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(fg,{rows:d,title:Ug})),!!m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(fg,{rows:m,title:qg})),!!u&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(fg,{rows:u,title:$g})))))},Yg=o.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.placeholder",{defaultMessage:"Filter network requests"}),Xg=o.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.searchLabel",{defaultMessage:"Search"}),Jg=(o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.filterScreenreaderLabel",{defaultMessage:"Filter by"}),o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.removeFilterScreenReaderLabel",{defaultMessage:"Remove filter by"}),o.i18n.translate("xpack.synthetics.synthetics.waterfall.sidebar.filterMatchesScreenReaderLabel",{defaultMessage:"Resource matches filter"})),Qg=i.a.memo((function({item:e,highestIndex:t,renderFilterScreenReaderText:a,onClick:r}){const[s,o]=Object(n.useState)(),{status:l,offsetIndex:c,index:u,isHighlighted:d,url:m}=e,p=Object(n.useMemo)((()=>{if(r)return()=>r({buttonRef:s,networkItemIndex:u})}),[s,u,r]),f=Object(n.useCallback)((e=>o(e)),[o]),g=e.url,h=`${d&&a?`${Jg} `:""}${g}`;return i.a.createElement(Zg,{"data-test-subj":d?"sideBarHighlightedItem":"sideBarDimmedItem",$_css:d?"1":"0.4"},l&&((b=l)>=400&&b<=499||b>=500&&b<=599||301===b||307===b||308===b)?i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Gg,{index:c,text:g,url:m,ariaLabel:h,onClick:p,setButtonRef:f,highestIndex:t})),i.a.createElement(w.EuiFlexItem,{component:"span",grow:!1},i.a.createElement(w.EuiBadge,{color:"danger"},l))):i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Gg,{index:c,text:g,url:m,ariaLabel:h,onClick:p,setButtonRef:f,highestIndex:t}))));var b}));var Zg=Ut()(jg).withConfig({displayName:"_StyledSideBarItemHighlighter",componentId:"sc-13xk1w0-0"})((e=>({opacity:e.$_css})));const eh=({totalNetworkRequests:e,fetchedNetworkRequests:t,highlightedNetworkRequests:a})=>i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.waterfall.networkRequests.count",defaultMessage:"Showing {countShown} of {total} {networkRequestsLabel}",values:{countShown:i.a.createElement("strong",{"data-test-subj":"syntheticsWaterfallChartCountShown"},i.a.createElement(w.EuiI18nNumber,{value:a})),total:i.a.createElement(w.EuiI18nNumber,{value:e}),networkRequestsLabel:i.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.waterfall.networkRequests.pluralizedCount",{defaultMessage:"{total, plural, one {network request} other {network requests}}",values:{total:e}}))}}),e>t&&i.a.createElement(w.EuiIconTip,{type:"iInCircle",color:"warning",content:o.i18n.translate("xpack.synthetics.synthetics.waterfall.requestsTotalMessage.info",{defaultMessage:"Waterfall view only shows up to 1000 requests"})}))),th=({query:e,setQuery:t,totalNetworkRequests:a,highlightedNetworkRequests:r,fetchedNetworkRequests:s})=>{const o=Object(N.useUiTracker)({app:"uptime"}),[l,c]=Object(n.useState)(e),{euiTheme:u}=Object(w.useEuiTheme)();return Lu()((()=>{t(l)}),300,[l]),Object(n.useEffect)((()=>{e&&o({metric:"waterfall_filter_input_changed",metricType:N.METRIC_TYPE.CLICK})}),[e,o]),i.a.createElement(w.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"s",style:{marginRight:u.size.l}},i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("h3",null,ah)),i.a.createElement(w.EuiFieldSearch,{"data-test-subj":"syntheticsWaterfallSearchFieldSearch",fullWidth:!0,"aria-label":Yg,placeholder:Xg,onChange:e=>{c(e.target.value)},value:l}),i.a.createElement(eh,{totalNetworkRequests:a,highlightedNetworkRequests:r,fetchedNetworkRequests:s}))},ah=o.i18n.translate("xpack.synthetics.waterfall.networkRequests.heading",{defaultMessage:"Network Requests"});function nh({id:e,color:t,label:a,boxSize:r=12,isClickable:s=!1,isActive:o=!1,onClick:l}){const[c,u]=Object(n.useState)(!1),d=Object(n.useCallback)((e=>{u("mouseenter"===(null==e?void 0:e.type))}),[]),m=!s||o||c,p=s?sh:void 0,f=`${a}${s?` - ${p}`:""}`;return i.a.createElement(rh,{role:s?"checkbox":"listitem",title:p,"aria-label":f,"aria-checked":s?o:void 0,alignItems:"center",gutterSize:"s",onMouseEnter:d,onMouseLeave:d,onClick:()=>{null==l||l(e)},$_css:s?"pointer":void 0},i.a.createElement(w.EuiIcon,{color:t,size:"m",type:m?"stopFilled":"stopSlash"}),i.a.createElement(w.EuiText,{size:"xs"},a))}const ih=Object(A.euiStyled)(w.EuiFlexGroup)`
  flex-grow: 0;
  flex-shrink: 0;
  &:active {
    ${({role:e})=>"checkbox"===e?"text-decoration: underline;":""}
  }
`;var rh=Ut()(ih).withConfig({displayName:"_StyledEuiFlexGroupLegendItem",componentId:"sc-hktqge-0"})((e=>({height:16,cursor:e.$_css})));const sh=o.i18n.translate("xpack.synthetics.waterfall.applyFilters.message",{defaultMessage:"Click to add or remove filter"}),oh=({activeFilters:e,setActiveFilters:t,showCustomMarks:a,setShowCustomMarks:r})=>{const{euiTheme:s}=Object(w.useEuiTheme)(),o=Object(n.useCallback)((e=>{t((t=>{const a=t.includes(e)?t.filter((t=>t!==e)):[...t,e];return a.length===nr.length?[]:a}))}),[t]),l=Object(n.useCallback)((()=>{t([])}),[t]),c=e.length>0;return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"none"},i.a.createElement(dh,{$_css:s.size.s},c?null:i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},lh)),i.a.createElement(mh,{wrap:!0,$_css2:`min(3%, ${s.size.l})`,$_css3:s.size.s},nr.map((t=>i.a.createElement(nh,{key:t.mimeType,id:t.mimeType,color:js[t.mimeType],label:t.label,isClickable:!0,isActive:!e.length||e.includes(t.mimeType),onClick:o})))),i.a.createElement(ph,{justifyContent:"spaceBetween"},i.a.createElement(fh,null,c?i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsWaterfallLegendButton",size:"xs",onClick:l},ch):null),i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsWaterfallCustomMarksButton",size:"xs",iconType:a?"eye":"eyeClosed",iconSize:"s",onClick:()=>{r(!a)}},uh))))},lh=o.i18n.translate("xpack.synthetics.waterfall.applyFilters.label",{defaultMessage:"Select an item to apply filter"}),ch=o.i18n.translate("xpack.synthetics.waterfall.clearFilters.label",{defaultMessage:"Clear filters"}),uh=o.i18n.translate("xpack.synthetics.waterfall.customMarks.label",{defaultMessage:"Custom marks"});var dh=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-m5f4pd-0"})((e=>({height:20,marginTop:6,marginLeft:e.$_css}))),mh=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-m5f4pd-1"})((e=>({gap:e.$_css2,width:"100%",padding:e.$_css3}))),ph=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup2",componentId:"sc-m5f4pd-2"})({height:24,width:"100%"}),fh=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-m5f4pd-3"})({maxWidth:"fit-content"});const gh=()=>{const{euiTheme:e}=Object(w.useEuiTheme)();return i.a.createElement(hh,{wrap:!0,$_css:`min(3%, ${e.size.l})`},Object.values(Yi).filter((e=>e!==Yi.Receive)).map((e=>i.a.createElement(nh,{key:e,id:e,color:js[e],label:Ji[e]}))))};var hh=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-12up00p-0"})((e=>({gap:e.$_css})));const bh=()=>{const[e]=Object(T.useUiSetting$)("theme:darkMode");return Object(n.useMemo)((()=>e?nt.EUI_CHARTS_THEME_DARK.theme:nt.EUI_CHARTS_THEME_LIGHT.theme),[e])},Eh=e=>{const t=e["@timestamp"],{lt:a,gte:n}=e.monitor.timespan,i=48*V()(a).diff(V()(n),"millisecond");return{to:t,from:V()(t).subtract(i,"millisecond").toISOString()}};function yh({title:e,field:t,step:a}){var n,r,s,o;const{exploratoryView:l}=ut(),u=l.ExploratoryViewEmbeddable,d=null===(n=Object(T.useKibana)().services.http)||void 0===n||null===(r=n.basePath)||void 0===r?void 0:r.get(),m=[{name:`${e}(${null===(s=a.synthetics.step)||void 0===s?void 0:s.name})`,selectedMetricField:t,time:Eh(a),seriesType:"area",dataType:"synthetics",reportDefinitions:{"monitor.name":[a.monitor.name],"synthetics.step.name.keyword":[null===(o=a.synthetics.step)||void 0===o?void 0:o.name]},operationType:"last_value"}],p=Object(fa.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:m},d);return i.a.createElement(xh,null,i.a.createElement(u,{title:e,appendTitle:i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsStepFieldTrendButton",iconType:"visArea",href:p,target:"_blank",size:"s"},vh),reportType:"kpi-over-time",attributes:m,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},legendIsVisible:!1,dataTypesIndexPatterns:{synthetics:c.B},withActions:!1}))}const vh=o.i18n.translate("xpack.synthetics.synthetics.markers.explore",{defaultMessage:"Explore"}),xh=A.euiStyled.div`
  height: 200px;
  width: 400px;
  &&& {
    .expExpressionRenderer__expression {
      padding-bottom: 0 !important;
    }
  }
`;function Sh({title:e,field:t}){const{activeStep:a}=bg();return a?i.a.createElement(yh,{field:t,title:e,step:a}):null}function kh({field:e,label:t}){const[a,r]=Object(n.useState)(!1),{euiTheme:s}=Object(w.useEuiTheme)();return e?i.a.createElement(Mh,{isOpen:a,closePopover:()=>r(!1),anchorPosition:"downLeft",panelStyle:{paddingBottom:0,paddingLeft:4},zIndex:100,button:i.a.createElement(wh,{"data-test-subj":"syntheticsWaterfallMarkerIconButton","aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.openEmbeddableButton.label",{defaultMessage:"Use this icon button to show metrics for this annotation marker."}),iconType:"dot",iconSize:"m",onClick:()=>r((e=>!e)),$_css:s.colors.mediumShade})},i.a.createElement(Sh,{title:t,field:e})):i.a.createElement(w.EuiIcon,{"aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.noFieldIcon.label",{defaultMessage:"An icon indicating that this marker has no field associated with it"}),type:"dot",size:"m"})}var Mh=Ut()(w.EuiPopover).withConfig({displayName:"_StyledEuiPopover",componentId:"sc-1rzxg8k-0"})({top:4}),wh=Ut()(w.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-1rzxg8k-1"})((e=>({color:e.$_css})));const Oh="browser.experience.lcp.us",Th="browser.experience.fcp.us",Ch="browser.experience.load.us",Ih="browser.experience.dcl.us",jh="layoutShift";function _h(){const e=Object(N.useTheme)(),{markerItems:t,showCustomMarks:a}=bg(),r=Object(n.useMemo)((()=>(null!=t?t:[]).reduce(((e,t)=>{var a;return e.set(t.offset,[...null!==(a=e.get(t.offset))&&void 0!==a?a:[],t]),e}),new Map)),[t]),s=Object(n.useMemo)((()=>{let t;const n=Array.from(r.entries()).reduce(((n,[i,r])=>{const s=a?r:r.filter((({id:t})=>void 0!==Fh(t,e))),o=s.some((({id:e})=>e!==jh)),l=t&&Math.abs(i-t)<100,c=o||l?s.filter((({id:e})=>e!==jh)):s;return c.length&&n.set(i,c),t=i,n}),new Map);return Array.from(n.entries()).map((([t,a])=>{var n,i,r;const s=(null!=a?a:[]).map((({id:e})=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),o=s.map((t=>{var a,n;return null!==(a=null===(n=Fh(t,e))||void 0===n?void 0:n.label)&&void 0!==a?a:t})).join(" / "),l=s[0],c=Fh(l,e);return{id:l,offset:t,label:o,field:null!==(n=null==c?void 0:c.field)&&void 0!==n?n:"",color:null!==(i=null==c?void 0:c.color)&&void 0!==i?i:e.eui.euiColorMediumShade,strokeWidth:null!==(r=null==c?void 0:c.strokeWidth)&&void 0!==r?r:1,dash:null==c?void 0:c.dash}}))}),[r,a,e]);return t?i.a.createElement(Ph,null,s.map((({id:t,offset:a,label:n,field:r,color:s,strokeWidth:o,dash:l})=>{const c=`${t}-${a}`;return i.a.createElement(it.LineAnnotation,{key:c,id:c,domainType:it.AnnotationDomainType.YDomain,dataValues:[{dataValue:a,details:n,header:Fs(a,{maxMillis:4e3})}],marker:i.a.createElement(kh,{field:r,label:n}),style:{line:{strokeWidth:o,stroke:s,opacity:1,dash:l}},zIndex:e.eui.euiZLevel0})}))):null}function Fh(e,t){switch(e){case"domContentLoaded":return{label:Nh,color:t.eui.euiColorMediumShade,field:Ih,strokeWidth:1,dash:void 0};case"firstContentfulPaint":return{label:Lh,color:t.eui.euiColorMediumShade,field:Th,strokeWidth:1,dash:void 0};case"largestContentfulPaint":return{label:Rh,color:t.eui.euiColorMediumShade,field:Oh,strokeWidth:1,dash:void 0};case"layoutShift":return{label:Dh,color:t.eui.euiColorMediumShade,field:"",strokeWidth:1,dash:[5,5]};case"loadEvent":return{label:Ah,color:t.eui.euiColorMediumShade,field:Ch,strokeWidth:1,dash:void 0}}}const Ph=A.euiStyled.span`
  &&& {
    > .echAnnotation__icon {
      top: 8px;
    }
  }
`,Lh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.fcpLabel",{defaultMessage:"First contentful paint"}),Rh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.lcpLabel",{defaultMessage:"Largest contentful paint"}),Dh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.layoutShiftLabel",{defaultMessage:"Layout shift"}),Ah=o.i18n.translate("xpack.synthetics.synthetics.waterfall.loadEventLabel",{defaultMessage:"Load event"}),Nh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.domContentLabel",{defaultMessage:"DOM Content Loaded"}),Bh=({tickFormat:e,domain:t,barStyleAccessor:a})=>{const n=bh(),{euiTheme:r}=Object(w.useEuiTheme)();return i.a.createElement(Cg,null,i.a.createElement(it.Chart,{className:"axis-only-chart","data-test-subj":"axisOnlyChart"},i.a.createElement(it.Tooltip,{type:it.TooltipType.None}),i.a.createElement(it.Settings,{showLegend:!1,rotation:90,theme:[{background:{color:"transparent"}},n],locale:o.i18n.getLocale()}),i.a.createElement(it.Axis,{id:"time",position:it.Position.Top,tickFormat:e,style:{tickLabel:{fontSize:12,fill:r.colors.darkestShade}},domain:t,gridLine:{visible:!0}}),i.a.createElement(it.BarSeries,{"aria-hidden":!0,id:"waterfallItems",xScaleType:it.ScaleType.Ordinal,yScaleType:it.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:a,data:[{x:0,y0:0,y1:1},{x:1,y0:0,y1:1}]}),i.a.createElement(_h,null)))},zh=({showOnlyHighlightedNetworkRequests:e,setOnlyHighlighted:t,highlightedNetworkRequests:a,fetchedNetworkRequests:n,shouldRenderSidebar:r,barStyleAccessor:s,domain:o,tickFormat:l})=>{const{euiTheme:c}=Object(w.useEuiTheme)();return i.a.createElement(Tg,null,i.a.createElement(w.EuiFlexGroup,{gutterSize:"none",direction:"column"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiFlexGroup,{gutterSize:"none",responsive:!1},r&&i.a.createElement(Ig,{grow:3},a<n?i.a.createElement(i.a.Fragment,null,i.a.createElement(Gh,{role:"button",gutterSize:"s",alignItems:"center","data-test-subj":"syntheticsWaterfallHideNonMatching","aria-pressed":e,title:Hh,"aria-label":Hh,onClick:()=>{t(!e)},$_css:c.size.s,$_css2:c.size.m,$_css3:c.size.s,$_css4:c.colors.primaryText},i.a.createElement(w.EuiIcon,{type:e?"eyeClosed":"eye",size:"s"}),i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.waterfall.networkRequests.filteredOut",defaultMessage:"Filtered out"})))):null),i.a.createElement(Vh,{grow:!r||8,"data-test-subj":"axisOnlyWrapper"},i.a.createElement(Bh,{domain:o,barStyleAccessor:s,tickFormat:l}))))))},Hh=o.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.collapseRequestsLabel",{defaultMessage:"Collapse to only show matching requests"});var Gh=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-w8tqld-0"})((e=>({marginTop:e.$_css,marginLeft:e.$_css2,marginBottom:e.$_css3,whiteSpace:"nowrap",cursor:"pointer",color:e.$_css4}))),Vh=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-w8tqld-1"})({outline:0,marginLeft:"-16px",height:40});const $h=({items:e,render:t})=>{const{euiTheme:a}=Object(w.useEuiTheme)(),{onSidebarClick:r}=bg(),s=Object(n.useMemo)((()=>r),[r]);return i.a.createElement(Ig,{grow:3},i.a.createElement("div",{style:{height:e.length*Sg,overflow:"hidden"},"data-test-subj":"wfSidebarContainer"},i.a.createElement(Uh,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},i.a.createElement(qh,{direction:"column",gutterSize:"none",responsive:!1},e.map(((e,n)=>i.a.createElement(Wh,{key:n,$_css:a.size.s},t(e,n,s))))))))};var Uh=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-19yr7nh-0"})({height:"100%"}),qh=Ut()(w.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-19yr7nh-1"})({height:"100%",paddingTop:1.5}),Wh=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-19yr7nh-2"})((e=>({outline:0,minWidth:0,justifyContent:"space-around",paddingRight:e.$_css})));const Kh=e=>{var t;const{data:a,sidebarItems:r}=bg();return Object(n.useMemo)((()=>{const t=null==r?void 0:r.find((t=>{var a;return t.index===(null===(a=e.header)||void 0===a?void 0:a.value)}));return a.filter((t=>{var a;return t.x===(null===(a=e.header)||void 0===a?void 0:a.value)&&t.config.showTooltip&&t.config.tooltipProps})).length?i.a.createElement(it.TooltipContainer,null,i.a.createElement(Pg,null,t&&i.a.createElement(vg,{text:_s(t.index+1,t.url),url:t.url}))):null}),[a,r,null===(t=e.header)||void 0===t?void 0:t.value])},Yh=({chartData:e,tickFormat:t,domain:a,barStyleAccessor:r,index:s})=>{var l;const c=bh(),{euiTheme:u}=Object(w.useEuiTheme)(),{onElementClick:d,onProjectionClick:m}=bg(),p=Object(n.useMemo)((()=>d),[d]),f=Object(n.useMemo)((()=>m),[m]),g=Object(n.useCallback)(t,[t]);return i.a.createElement(_g,{height:(h=e,24*new Set(h.map((e=>e.x))).size),chartIndex:s,"data-test-subj":"wfDataOnlyBarChart"},i.a.createElement(it.Chart,{className:"data-chart"},i.a.createElement(it.Tooltip,{boundary:null!==(l=document.getElementById("app-fixed-viewport"))&&void 0!==l?l:void 0,customTooltip:Kh}),i.a.createElement(it.Settings,{showLegend:!1,rotation:90,theme:{...c,tooltip:{maxWidth:500}},onProjectionClick:f,onElementClick:p,locale:o.i18n.getLocale()}),i.a.createElement(it.Axis,{"aria-hidden":!0,id:"time",position:it.Position.Top,tickFormat:g,domain:a,gridLine:{visible:!0},style:{axisLine:{visible:!1},tickLabel:{fontSize:12,fill:u.colors.darkestShade}}}),i.a.createElement(it.BarSeries,{id:"waterfallItems",xScaleType:it.ScaleType.Ordinal,yScaleType:it.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:r,data:e}),i.a.createElement(_h,null)));var h},Xh=({tickFormat:e,domain:t,barStyleAccessor:a,renderSidebarItem:r,renderFlyout:s})=>{const{euiTheme:o}=Object(w.useEuiTheme)(),{data:l,query:c,setQuery:u,sidebarItems:d,activeFilters:m,setActiveFilters:p,showOnlyHighlightedNetworkRequests:f,setOnlyHighlighted:g,showCustomMarks:h,setShowCustomMarks:b,totalNetworkRequests:E,highlightedNetworkRequests:y,fetchedNetworkRequests:v}=bg(),x=!(!d||!r),S=(({data:e})=>{const[t,a]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=[];if((null==e?void 0:e.length)>0){let a=0;const n=new Set;let i;e.filter((e=>!0)).forEach((e=>{150===n.size&&e.x>i&&(a++,n.clear()),n.add(e.x),i=e.x,t[a]?t[a].push(e):t.push([e])}))}a(t)}),[e]),t})({data:l}),k={marginLeft:`-${o.size.l}`,marginRight:`-${o.size.l}`};return i.a.createElement("div",{style:{position:"relative",...k}},i.a.createElement(wg,{"data-test-sub":"syntheticsWaterfallChartStickyHeaderContainer",style:{background:o.colors.body}},i.a.createElement(w.EuiFlexGroup,{style:{height:"100%"},gutterSize:"s",alignItems:"stretch",responsive:!1},x&&i.a.createElement(Ig,{grow:3},i.a.createElement(th,{query:c,setQuery:u,totalNetworkRequests:E,highlightedNetworkRequests:y,fetchedNetworkRequests:v})),i.a.createElement(w.EuiFlexItem,{grow:!x||8},i.a.createElement(oh,{activeFilters:m,setActiveFilters:p,showCustomMarks:h,setShowCustomMarks:b}))),i.a.createElement(zh,{showOnlyHighlightedNetworkRequests:f,setOnlyHighlighted:g,highlightedNetworkRequests:y,fetchedNetworkRequests:v,shouldRenderSidebar:x,domain:t,tickFormat:e,barStyleAccessor:a})),i.a.createElement(Mg,{"data-test-subj":"syntheticsWaterfallChartOuterContainer"},i.a.createElement(w.EuiFlexGroup,{gutterSize:"none",responsive:!1},x?i.a.createElement($h,{items:d,render:r}):null,i.a.createElement(w.EuiFlexItem,{style:{marginLeft:"-16px"},grow:!x||8,"data-test-subj":"dataOnlyWrapper"},S.map(((n,r)=>i.a.createElement(Yh,{index:r,key:r,chartData:n,domain:t,barStyleAccessor:a,tickFormat:e})))))),i.a.createElement(Og,{"data-test-sub":"syntheticsWaterfallChartStickyFooterContainer",style:{background:o.colors.body}},i.a.createElement(gh,null)),s&&s())},Jh=e=>i.a.createElement(w.EuiHealth,{color:e.color,className:"eui-textNoWrap"},e.name),Qh=({data:e,total:t,markerItems:a,activeStep:r})=>{const[s,o]=Object(n.useState)(""),[l,c]=Object(n.useState)([]),[u,d]=Jd()("xpack.synthetics.waterfallChart.showOnlyHighlighted",!1),[m,p]=Jd()("xpack.synthetics.waterfallChart.showCustomMarks",!1),[f]=Object(n.useState)(e),g=l.length>0,h=qn(),{series:b,domain:E,metadata:y,totalHighlightedRequests:v}=Object(n.useMemo)((()=>((e,t=!1,a,n,i,r)=>{const s=e=>e.requestSentTime;let o=1/0;e.forEach((e=>o=Math.min(o,s(e))));const l=[],c=[];let u=0;const d=ws(n),m=Os(i);e.forEach(((e,t)=>{const n=(e=>{const t=e&&ar[e]?ar[e]:er.Other;return js[t]})(e.mimeType);let i=s(e)-o;c.push(Cs({item:e,index:t,requestStart:i,dateFormatter:a}));const r=Ss(e,d,m);if(r&&u++,!e.timings)return void l.push({x:t,y0:0,y:0,config:{isHighlighted:r,showTooltip:!1}});let p=!1;if(Zi.forEach((a=>{const s=((e,t)=>{if(e)return t===Yi.Connect?Ms(e.connect,e.ssl):e[t]})(e.timings,a);if(s&&s>=0){p=!0;const o=a===Yi.Receive?n:js[a],c=i+s;l.push({x:t,y0:i,y:c,config:{id:t,colour:o,isHighlighted:r,showTooltip:!0,tooltipProps:{value:xs({value:c-i,timing:a,mimeType:e.mimeType}),colour:o}}}),i=c}})),!p){const a=e.timings.total,s=-1!==a;l.push({x:t,y0:s?i:0,y:s?i+e.timings.total:0,config:{isHighlighted:r,colour:s?n:"",showTooltip:s,tooltipProps:s?{value:xs({value:a,timing:Yi.Receive,mimeType:e.mimeType}),colour:n}:void 0}})}}));const p=l.map((e=>e.y)),f={min:0,max:Math.max(...p)};let g=l;if(t&&(g=l.filter((e=>e.config.isHighlighted))),r&&r.length>0){const e=Math.max(...r.map((e=>e.offset)));f.max=Math.max(f.max,e)}return{series:g,domain:f,metadata:c,totalHighlightedRequests:u}})(f,u,h,s,l,a)),[f,h,s,l,u,a]),x=Object(n.useMemo)((()=>((e,t,a,n)=>{const i=ws(a),r=Os(n),s=e.map(((e,t)=>{const a=Ss(e,i,r),n=t+1,{url:s,status:o,method:l}=e;return{url:s,status:o,method:l,isHighlighted:a,offsetIndex:n,index:t}}));return t?s.filter((e=>e.isHighlighted)):s})(f,null!=u&&u,s,l)),[f,s,l,u]),{flyoutData:S,onBarClick:k,onProjectionClick:M,onSidebarClick:O,isFlyoutVisible:T,onFlyoutClose:C}=(e=>{const[t,a]=Object(n.useState)(!1),[i,r]=Object(n.useState)(void 0),[s,o]=Object(n.useState)(),l=Object(n.useCallback)((e=>{r(e),a(!0)}),[a,r]),c=Object(n.useCallback)((()=>{var e;a(!1),null==s||null===(e=s.current)||void 0===e||e.focus()}),[s,a]);return{flyoutData:i,onBarClick:Object(n.useCallback)((([t])=>{a(!1);const{datum:n}=t[0],i=e[n.config.id];l(i)}),[e,l]),onProjectionClick:Object(n.useCallback)((t=>{a(!1);const{x:n}=t;if("number"==typeof n&&n>=0){const t=e[n];l(t)}}),[e,l]),onSidebarClick:Object(n.useCallback)((({buttonRef:n,networkItemIndex:i})=>{if(t&&n===s)a(!1);else{const t=e[i];o(n),l(t)}}),[s,l,t,e,a]),isFlyoutVisible:t,onFlyoutClose:c}})(y),I=Object(n.useCallback)((()=>i.a.createElement(Kg,{flyoutData:S,onFlyoutClose:C,isFlyoutVisible:T})),[S,T,C]),j=Math.max(...b.map((e=>e.x))),_=Object(n.useCallback)((e=>i.a.createElement(Qg,{item:e,renderFilterScreenReaderText:g&&!u,onClick:O,highestIndex:j})),[g,u,O,j]);return i.a.createElement(hg,{activeStep:r,markerItems:a,totalNetworkRequests:t,fetchedNetworkRequests:f.length,highlightedNetworkRequests:v,data:b,onElementClick:Object(n.useCallback)(k,[k]),onProjectionClick:Object(n.useCallback)(M,[M]),onSidebarClick:O,showOnlyHighlightedNetworkRequests:null!=u&&u,showCustomMarks:null!=m&&m,sidebarItems:x,metadata:y,activeFilters:l,setActiveFilters:c,setOnlyHighlighted:d,setShowCustomMarks:p,query:s,setQuery:o,renderTooltipItem:Object(n.useCallback)((e=>i.a.createElement(w.EuiHealth,{color:String(null==e?void 0:e.colour)},null==e?void 0:e.value)),[])},i.a.createElement(Xh,{tickFormat:Object(n.useCallback)((e=>`${Number(e).toFixed(0)} ms`),[]),domain:E,barStyleAccessor:Object(n.useCallback)((({datum:e})=>{var t,a;return null!==(t=e.config)&&void 0!==t&&t.isHighlighted?e.config.colour:{rect:{fill:null===(a=e.config)||void 0===a?void 0:a.colour,opacity:"0.1"}}}),[]),renderSidebarItem:_,renderLegendItem:Jh,renderFlyout:I}))},Zh="browser.relative_trace.type",eb="browser.relative_trace.name",tb="browser.relative_trace.start.us",ab="navigationStart",nb=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfallNoData",{defaultMessage:"No waterfall data could be found for this step"}),ib=({checkGroup:e,stepIndex:t,activeStep:a})=>{var r,s;const l=null===(r=Object(u.useSelector)(ir)[null!=e?e:""])||void 0===r?void 0:r[t],d=(null==l||null===(s=l.events)||void 0===s?void 0:s.length)>0,m=l&&!l.loading,p=null==l?void 0:l.isWaterfallSupported,{metrics:f}=(({checkGroup:e,hasNavigationRequest:t,stepIndex:a})=>{const{data:n,loading:i}=Object(N.useEsSearch)(t?Object(N.createEsParams)({index:c.B,body:{query:{bool:{filter:[{term:{"synthetics.step.index":a}},{term:{"monitor.check_group":e}},{term:{"synthetics.type":"step/metrics"}}]}},fields:["browser.*"],size:1e3,_source:!1}}):{},[e,t],{name:"getWaterfallStepMetrics"});if(!t)return{metrics:[],loading:!1};const r=[];if(n&&t){const e=n.hits.hits;let t=0,a=!1;e.forEach((({fields:e})=>{var n;if("mark"===(null===(n=e[Zh])||void 0===n?void 0:n[0])){const{[eb]:n,[tb]:i}=e;(null==n?void 0:n[0])===ab&&(t=null==i?void 0:i[0],a=!0)}})),a&&e.forEach((({fields:e})=>{var a;if("mark"===(null===(a=e[Zh])||void 0===a?void 0:a[0])){const{[eb]:a,[tb]:n}=e;(null==a?void 0:a[0])!==ab&&r.push({id:null==a?void 0:a[0],offset:((null==n?void 0:n[0])-t)/1e3})}}))}return{metrics:r,loading:i}})({checkGroup:e,stepIndex:t,hasNavigationRequest:null==l?void 0:l.hasNavigationRequest}),g=Object(n.useMemo)((()=>{var e;return(e=>[...e].sort(((e,t)=>e.requestSentTime-t.requestSentTime)))(null!==(e=null==l?void 0:l.events)&&void 0!==e?e:[])}),[null==l?void 0:l.events]);return i.a.createElement(i.a.Fragment,null,!m&&i.a.createElement(w.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLoadingChart,{size:"xl","aria-label":o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfall.loading",{defaultMessage:"Waterfall chart loading"})}))),m&&!d&&i.a.createElement(w.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{textAlign:"center"},i.a.createElement("p",null,nb)))),m&&d&&p&&i.a.createElement(Qh,{data:g,markerItems:f,total:l.total,activeStep:a}),m&&d&&!p&&i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.title",defaultMessage:"Waterfall chart unavailable"}),color:"warning",iconType:"help"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.description",defaultMessage:"The waterfall chart cannot be shown. You may be using an older version of the Synthetic Agent. Please check the version and consider upgrading."})))},rb={chartMargins:{top:0,bottom:0,left:0,right:0},partition:{linkLabel:{maximumSection:1/0,maxCount:0},idealFontSizeJump:1.1,outerSizeRatio:.9,emptySizeRatio:.6,circlePadding:5}},sb=()=>{const e=Mr(),t=Object(N.useTheme)();return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,ob))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiIconTip,{content:lb,position:"right"}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(it.Chart,{size:{height:240}},i.a.createElement(it.Settings,{theme:[rb,null!==it.LIGHT_THEME&&void 0!==it.LIGHT_THEME?it.LIGHT_THEME:{}],showLegend:!1,locale:o.i18n.getLocale()}),i.a.createElement(it.Partition,{id:"spec_1",data:e.timingsWithLabels,layout:it.PartitionLayout.sunburst,valueAccessor:e=>null==e?void 0:e.value,valueFormatter:e=>Fs(e,{}),layers:[{groupByRollup:e=>e.label,nodeLabel:e=>e,shape:{fillColor:(e,a)=>t.eui[`euiColorVis${a+1}`]}}]}))):i.a.createElement(w.EuiLoadingSpinner,{size:"xl"})},ob=o.i18n.translate("xpack.synthetics.stepDetailsRoute.timingsBreakdown",{defaultMessage:"Timing breakdown"}),lb=o.i18n.translate("xpack.synthetics.stepDetailsRoute.timingsBreakdown.info",{defaultMessage:"Sum of all network request timings"});var cb=a(120);const ub=({label:e,mimeType:t,percent:a,value:n,loading:r,delta:s,hasAnyThresholdBreach:l,labelWidth:c=40,valueWidth:u=65})=>{const d=()=>Math.abs(s)<5?"default":s>5?"danger":"success",m=Math.abs(s)>0;return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1,style:{width:c}},i.a.createElement(w.EuiText,{size:"s"},e)),i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(db,{mimeType:t,percent:isNaN(a)?0:a,loading:r})),i.a.createElement(w.EuiFlexItem,{grow:!1,style:{width:u,justifySelf:"flex-end"}},i.a.createElement(w.EuiText,{size:"s",style:{fontWeight:"bold",whiteSpace:"nowrap"},className:"eui-textRight",color:d()},n)),l&&i.a.createElement(w.EuiFlexItem,{grow:!1,style:{width:40}},i.a.createElement(w.EuiToolTip,{content:o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.label",{defaultMessage:"Value is {deltaLabel} compared to steps in previous 24 hours.",values:{deltaLabel:0===Math.abs(s)?o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.noChange",{defaultMessage:"same"}):s>0?o.i18n.translate("xpack.synthetics.stepDetails.palette.increased",{defaultMessage:"{delta}% higher",values:{delta:s}}):o.i18n.translate("xpack.synthetics.stepDetails.palette.decreased",{defaultMessage:"{delta}% lower",values:{delta:s}})}})},m?i.a.createElement(w.EuiIcon,{type:s>0?"sortUp":"sortDown",size:"m",color:d()}):i.a.createElement(w.EuiIcon,{type:"minus",size:"m",color:"subdued"}))))},db=({mimeType:e,percent:t,loading:a})=>{const{eui:r}=Object(N.useTheme)(),[s,o]=Object(n.useState)(0);return Object(n.useEffect)((()=>{setTimeout((()=>{s<t&&o(s+1)}),10)}),[t,s]),Object(n.useEffect)((()=>{a||o(0)}),[a]),a?i.a.createElement(w.EuiSkeletonRectangle,{height:"20px",width:"100%"}):i.a.createElement(w.EuiFlexGroup,{gutterSize:"none",style:{borderRadius:8,overflow:"hidden"}},i.a.createElement(w.EuiFlexItem,{grow:!0,style:{backgroundColor:r.euiColorLightShade}},i.a.createElement("span",{style:{backgroundColor:js[e],height:20,width:`${s}%`}})))},mb=()=>{const e=rr(),t=e.items.some((({weightDelta:e})=>Math.abs(Number(e))>5));return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,pb))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"s"},fb,":"," ",i.a.createElement("span",{style:{fontWeight:"bold"}},e.totalObjectsWeight)))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement("div",null,e.items.map((({label:a,mimeType:r,weightPercent:s,weight:o,weightDelta:l})=>i.a.createElement(n.Fragment,{key:r},i.a.createElement(ub,{hasAnyThresholdBreach:t,label:a,mimeType:r,percent:s,value:o,loading:e.loading,delta:Number(l)}),i.a.createElement(w.EuiSpacer,{size:"m"})," ")))))},pb=o.i18n.translate("xpack.synthetics.stepDetails.objectWeight",{defaultMessage:"Object weight"}),fb=o.i18n.translate("xpack.synthetics.stepDetails.totalSize",{defaultMessage:"Total size"}),gb=()=>{const e=rr(),t=e.items.some((({countDelta:e})=>Math.abs(Number(e))>5));return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,hb))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,null,bb,": ",i.a.createElement("span",{style:{fontWeight:"bold"}}," ",e.totalObjects)))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement("div",null,e.items.map((({label:a,mimeType:r,percent:s,count:o,countDelta:l})=>i.a.createElement(n.Fragment,{key:r},i.a.createElement(ub,{hasAnyThresholdBreach:t,label:a,mimeType:r,percent:s,value:String(o),valueWidth:30,loading:e.loading,delta:Number(l)}),i.a.createElement(w.EuiSpacer,{size:"m"}))))))},hb=o.i18n.translate("xpack.synthetics.stepDetails.objectCount",{defaultMessage:"Object count"}),bb=o.i18n.translate("xpack.synthetics.stepDetails.total",{defaultMessage:"Total"}),Eb=Et(),yb=Et(),vb=Et(),xb=({name:e,configId:t,locationId:a,updateUrl:n})=>i.a.createElement(ht,{node:vb},i.a.createElement(Sb,{name:e,configId:t,locationId:a,updateUrl:n})),Sb=({name:e,configId:t,locationId:a,updateUrl:n})=>{const r=$s(n);let s=a;null!=r&&r.id&&!a&&(s=r.id);const o=Object(p.useHistory)().createHref({pathname:s?`monitor/${t}?locationId=${s}`:`monitor/${t}`});return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsLinkLink",href:o},i.a.createElement(w.EuiIcon,{type:"arrowLeft"})," ",e)},kb=({step:e,ping:t,isFailed:a})=>{var r,s,o,l,c;const{euiTheme:u}=Object(w.useEuiTheme)(),d=[{id:"received",label:Ob},{id:"expected",label:wb}],[m,p]=Object(n.useState)("received");return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,Mb)),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Tb,{color:"subdued"},"received"===m?i.a.createElement(ys,{checkGroup:null==e?void 0:e.monitor.check_group,initialStepNumber:null==e||null===(r=e.synthetics)||void 0===r||null===(s=r.step)||void 0===s?void 0:s.index,stepStatus:null==e||null===(o=e.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[260,160],borderRadius:u.border.radius.small,timestamp:null==e?void 0:e["@timestamp"]}):i.a.createElement(Ys,{step:t,stepIndex:null==e||null===(l=e.synthetics)||void 0===l||null===(c=l.step)||void 0===c?void 0:c.index,size:[260,160],borderRadius:u.border.radius.small})),i.a.createElement(w.EuiSpacer,{size:"m"}),a&&i.a.createElement(w.EuiButtonGroup,{legend:"",options:d,idSelected:m,onChange:e=>{p(e)},buttonSize:"s",isFullWidth:!0}))},Mb=o.i18n.translate("xpack.synthetics.stepDetails.screenshot",{defaultMessage:"Screenshot"}),wb=o.i18n.translate("xpack.synthetics.stepDetails.expected",{defaultMessage:"Expected"}),Ob=o.i18n.translate("xpack.synthetics.stepDetails.received",{defaultMessage:"Received"});var Tb=Ut()(w.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-3sx4om-0"})({outline:0,height:"192px",borderRadius:0,display:"flex",justifyContent:"center"});const Cb=()=>{const e=Mr(),{timingsWithLabels:t,loading:a}=Pr(),n=Object(N.useTheme)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"xxl"}),i.a.createElement(w.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.timingsWithLabels.map((({label:e,value:r},s)=>{const o=null==t?void 0:t.find((t=>t.label===e)),l=null==o?void 0:o.value;return i.a.createElement(w.EuiFlexGroup,{key:s,gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiHealth,{color:n.eui[`euiColorVis${s+1}`]},e)),i.a.createElement(w.EuiFlexItem,{grow:!1,style:{minWidth:50}},i.a.createElement(cr,{loading:a,currentFormatted:Fs(r,{}),current:r,previous:l||null,previousFormatted:Fs(null!=l?l:0,{})})))}))))},Ib=({monitorQueryId:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(T.useKibana)().services,{stepIndex:a}=Object(p.useParams)(),{locationFilter:n}=Nu();return n?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,jb)),i.a.createElement(w.EuiSpacer,{size:"xs"}),i.a.createElement(t,{customHeight:"250px",reportType:fa.ReportTypes.KPI,legendIsVisible:!1,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},attributes:[{operationType:"last_value",seriesType:"area_stacked",dataType:"synthetics",name:"Network timings",selectedMetricField:"network_timings",reportDefinitions:{"monitor.id":[e]},time:{from:"now-24h/h",to:"now"},filters:[{field:"synthetics.step.index",values:[a]},...n]}]})):i.a.createElement(ji,null)},jb=o.i18n.translate("xpack.synthetics.stepDetailsRoute.last24Hours",{defaultMessage:"Last 24 hours"}),_b=()=>{var e,t,a,r,s;const{checkGroupId:o,stepIndex:l}=Object(p.useParams)();Object(N.useTrackPageview)({app:"synthetics",path:"stepDetail"}),Object(N.useTrackPageview)({app:"synthetics",path:"stepDetail",delay:15e3});const{data:c,isFailedStep:d,currentStep:m}=Ki();(e=>{var t,a,n,i,r,s,o;const{data:l,currentStep:c}=Ki(),u=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",d=Object(p.useParams)(),m=$s();dg([{text:l?V()(null===(n=l.details)||void 0===n?void 0:n.timestamp).format("LLL"):"",href:`${u}/${Object(p.generatePath)(ug.x,d)}?locationId=${null!==(i=null==m?void 0:m.id)&&void 0!==i?i:""}`},{text:null!==(r=`${null==c||null===(s=c.synthetics.step)||void 0===s?void 0:s.index}. ${null==c||null===(o=c.synthetics.step)||void 0===o?void 0:o.name}`)&&void 0!==r?r:""}])})();const f=Object(u.useDispatch)();return Object(n.useEffect)((()=>{f(cb.a.get({checkGroup:o,stepIndex:Number(l)}))}),[f,l,o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(cg,{step:m}),(null==c||null===(e=c.details)||void 0===e||null===(t=e.journey)||void 0===t?void 0:t.config_id)&&i.a.createElement(xb,{configId:c.details.journey.config_id,name:c.details.journey.monitor.name}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},(null==c||null===(a=c.details)||void 0===a?void 0:a.journey)&&m&&i.a.createElement(kb,{ping:null==c||null===(r=c.details)||void 0===r?void 0:r.journey,step:m,isFailed:d}))),i.a.createElement(w.EuiFlexItem,{grow:2},i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:1,style:{minWidth:150}},i.a.createElement(sb,null)),i.a.createElement(w.EuiFlexItem,{grow:1,style:{minWidth:200}},i.a.createElement(Cb,null)),i.a.createElement(w.EuiFlexItem,{grow:2,style:{minWidth:200}},i.a.createElement(Ib,{monitorQueryId:null==c||null===(s=c.details)||void 0===s?void 0:s.journey.monitor.id})))))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(Ar,null))),i.a.createElement(w.EuiFlexItem,{grow:2},i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{gutterSize:"xl"},i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(mb,null)),i.a.createElement(w.EuiFlexItem,{grow:1},i.a.createElement(gb,null)))))),i.a.createElement(w.EuiSpacer,{size:"l"}),c&&i.a.createElement(ib,{checkGroup:o,stepIndex:Number(l),activeStep:m}))},Fb=()=>{var e,t,a,n;const{checkGroupId:r,stepIndex:s}=Object(p.useParams)(),{data:o}=Ki(r),l=null==o?void 0:o.steps.find((e=>{var t;return(null===(t=e.synthetics.step)||void 0===t?void 0:t.index)===Number(s)}));return l?i.a.createElement(i.a.Fragment,null,`${null==l||null===(e=l.synthetics)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.index}. ${null==l||null===(a=l.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name}`):i.a.createElement(w.EuiSkeletonRectangle,{height:"45px",width:"100%"})},Pb=(e,t,a)=>({title:o.i18n.translate("xpack.synthetics.stepDetailsRoute.title",{defaultMessage:"Step details | {baseTitle}",values:{baseTitle:a}}),path:c.D,component:_b,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:i.a.createElement(Fb,null),rightSideItems:[i.a.createElement(eg,null),i.a.createElement(Em,{isDisabled:!0}),i.a.createElement(lg,null),i.a.createElement(sg,null)],breadcrumbs:[{text:i.a.createElement(bt,{node:vb})}]}}),Lb=()=>{var e;const{monitor:t,isMonitorMissing:a}=wa(),{data:n,loading:r}=Ki();return t?i.a.createElement(pi,{status:null==n||null===(e=n.details)||void 0===e?void 0:e.journey.monitor.status,monitor:t,loading:r,compressed:!1}):i.a.createElement(w.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:fi,description:a&&null!=n&&n.details?i.a.createElement(mi,{status:n.details.journey.monitor.status,isBrowserType:"browser"===n.details.journey.monitor.type}):i.a.createElement(w.EuiSkeletonText,{lines:1})}]})},Rb=()=>i.a.createElement(w.EuiDescriptionList,{listItems:[{title:Db,description:i.a.createElement(ag,{testRunPage:!0})}]}),Db=o.i18n.translate("xpack.synthetics.testDetails.date",{defaultMessage:"Date"}),Ab=({journeyDetails:e,hasNoSteps:t,showErrorTitle:a=!0,showErrorLogs:i=!1})=>{var r,s,o,l,c;const u="down"===(null==e||null===(r=e.journey)||void 0===r||null===(s=r.monitor)||void 0===s?void 0:s.status),d=null==e||null===(o=e.journey)||void 0===o||null===(l=o.error)||void 0===l?void 0:l.message;return n.createElement(n.Fragment,null,(t||u)&&a&&n.createElement(w.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",title:Go,color:"danger",iconType:"warning"},n.createElement(w.EuiText,{color:"danger"},null!=d?d:Ho)),n.createElement(w.EuiSpacer,{size:"m"}),(i||t)&&n.createElement(Fo,{checkGroup:null==e||null===(c=e.journey)||void 0===c?void 0:c.monitor.check_group,hideTitle:!1,pageSize:10}))},Nb=({stepIndex:e,totalSteps:t,handleNextStep:a,handlePreviousStep:n})=>{const r=e>1,s=e<t;return i.a.createElement(w.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNumberNavButton",onClick:n,disabled:!r,iconType:"arrowLeft"},Bb)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"s"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetails.stepNav",defaultMessage:"{stepIndex} / {totalSteps}",values:{stepIndex:e,totalSteps:t}}))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNumberNavButton",onClick:a,disabled:!s,iconType:"arrowRight",iconSide:"right"},zb)))))},Bb=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousStepButtonText",{defaultMessage:"Previous"}),zb=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextStepButtonText",{defaultMessage:"Next"}),Hb=({step:e,stepIndex:t,stateId:a})=>{var n,r,s,o;const{checkGroupId:l,monitorId:c}=Object(p.useParams)();if(!e)return i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiSkeletonText,{lines:4}));const u="failed"===(null===(n=e.synthetics.step)||void 0===n?void 0:n.status);return i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,Gb)),i.a.createElement(w.EuiText,{size:"m"},null==e||null===(r=e.synthetics.step)||void 0===r?void 0:r.name),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",alignItems:"center",wrap:!1},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Ps,{status:Ls(null==e||null===(s=e.synthetics.step)||void 0===s?void 0:s.status)})),i.a.createElement(w.EuiFlexItem,{grow:!0},Vb,Ws(null==e||null===(o=e.synthetics.step)||void 0===o?void 0:o.duration.us))),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},u&&a&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(hc,{configId:c,stateId:a})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Us,{asButton:!0,checkGroup:null!=l?l:e.monitor.check_group,configId:c,stepIndex:t,label:$b}))))},Gb=o.i18n.translate("xpack.synthetics.testDetails.stepName",{defaultMessage:"Step name"}),Vb=o.i18n.translate("xpack.synthetics.testDetails.after",{defaultMessage:"After "}),$b=o.i18n.translate("xpack.synthetics.monitor.step.viewPerformanceBreakdown",{defaultMessage:"View performance breakdown"}),Ub=({stepIndex:e,step:t,stateId:a})=>{var n,r;const{checkGroupId:s}=Object(p.useParams)();return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!1,color:"subdued"},i.a.createElement(w.EuiFlexGroup,{wrap:!0},i.a.createElement(qb,{grow:!1},t?i.a.createElement(ys,{key:e,checkGroup:null!==(n=null==t?void 0:t.monitor.check_group)&&void 0!==n?n:s,initialStepNumber:e,stepStatus:null==t||null===(r=t.synthetics.payload)||void 0===r?void 0:r.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[180,112],timestamp:null==t?void 0:t["@timestamp"]}):null),i.a.createElement(Hb,{step:t,stepIndex:e,stateId:a})))};var qb=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1issfds-0"})({margin:"0 auto"});const Wb=({isLoading:e,steps:t})=>{const a=t.filter(Qs).reduce(((e,t)=>{var a,n,i;return e+(null!==(a=null===(n=t.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.duration.us)&&void 0!==a?a:0)}),0);return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h2",null,Kb))),i.a.createElement(w.EuiFlexItem,{grow:!1},Yb,Ws(a))),i.a.createElement(to,{steps:t,loading:e,showStepNumber:!0,compressed:!1}))},Kb=o.i18n.translate("xpack.synthetics.testDetails.stepExecuted",{defaultMessage:"Steps executed"}),Yb=o.i18n.translate("xpack.synthetics.testDetails.totalDuration",{defaultMessage:"Total duration: "}),Xb=()=>{var e,t,a,n,r,s,o;const[l,c]=i.a.useState(1),{data:u,loading:d,stepEnds:m}=Ki();dg([{text:u?V()(null===(e=u.details)||void 0===e?void 0:e.timestamp).format("LLL"):""}]);const f=m.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===l})),g=d?1:m.length,{monitorId:h}=Object(p.useParams)(),b=$s(),E=null==u||null===(t=u.details)||void 0===t||null===(a=t.summary)||void 0===a||null===(n=a.state)||void 0===n?void 0:n.id,y=0===(null==u?void 0:u.steps.length)&&!d;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ab,{journeyDetails:null==u?void 0:u.details,hasNoSteps:y}),!y&&i.a.createElement(w.EuiFlexGroup,{gutterSize:"m",wrap:!0},i.a.createElement(Jb,null,i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:l,totalSteps:g}})))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Nb,{stepIndex:l,totalSteps:g,handleNextStep:()=>{c(l+1)},handlePreviousStep:()=>{c(l-1)}}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Ub,{stepIndex:l,step:f,stateId:E}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement($i,{stepsList:null==u?void 0:u.steps,step:f,loading:d})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Wb,{isLoading:d,steps:null!==(r=null==u?void 0:u.steps)&&void 0!==r?r:[]}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(Ab,{journeyDetails:null==u?void 0:u.details,showErrorTitle:!1,showErrorLogs:!0}))),i.a.createElement(Qb,null,i.a.createElement(Ef,{legendPosition:"bottom"}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(kf,{hideEnabled:!0,hideLocations:!0}))),i.a.createElement(xb,{configId:h,name:null!==(s=null==u||null===(o=u.details)||void 0===o?void 0:o.journey.monitor.name)&&void 0!==s?s:"",locationId:null==b?void 0:b.id}))};var Jb=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-o5h5n7-0"})({flexBasis:"60%",minWidth:260}),Qb=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-o5h5n7-1"})({flexBasis:"36%",minWidth:"min-content"});const Zb=(e,t,a)=>({title:o.i18n.translate("xpack.synthetics.testRunDetailsRoute.title",{defaultMessage:"Test run details | {baseTitle}",values:{baseTitle:a}}),path:c.E,component:Xb,dataTestSubj:"syntheticsMonitorTestRunDetailsPage",pageHeader:{breadcrumbs:[{text:i.a.createElement(bt,{node:vb})}],pageTitle:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.testRunDetailsRoute.page.title",defaultMessage:"Test run details"}),rightSideItems:[i.a.createElement(Rb,null),i.a.createElement(Lb,null),i.a.createElement(Em,null)]}}),eE=o.i18n.translate("xpack.synthetics.settings.alertDefaultForm.requiredEmail",{defaultMessage:"To: Email is required for selected email connector"}),tE=e=>{if(!e)return;const t=e.find((e=>!e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)));return t?o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.invalidEmail",{defaultMessage:"{val} is not a valid email.",values:{val:t}}):void 0},aE=(e,t,a)=>{if(!e||0===e.length||!1===a)return{};if(!t||!t.to)return{to:eE};const n=0===t.to.length?eE:tE(t.to),i=tE(t.cc),r=tE(t.bcc);return n||i||r?{to:null!=n?n:"",cc:null!=i?i:"",bcc:null!=r?r:""}:{}};function nE({loading:e,onChange:t,value:a,isDisabled:r,selectedConnectors:s}){const{actionTypeRegistry:o}=Object(T.useKibana)().services.triggersActionsUi,l=o.get(".email").actionParamsFields,[c,u]=Object(n.useState)(!1),d=aE(s,a,c);return i.a.createElement(w.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors.defaultEmail",defaultMessage:"Default email"})),description:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description.defaultEmail",defaultMessage:"Email settings required for selected email alert connectors."})},i.a.createElement(l,{isLoading:e,actionParams:null!=a?a:{},errors:d,editAction:(e,n,i)=>{"message"!==e&&t({...null!=a?a:{},[e]:n})},showEmailSubjectAndMessage:!1,index:1,isDisabled:r,onBlur:()=>u(!0)}))}var iE=a(104),rE=a(119);const sE=()=>{const{data:e}=Object(N.useFetcher)((()=>Object(rE.a)()),[]),{connectors:t,connectorsLoading:a,loading:r,settings:s}=Object(u.useSelector)(iE.a),{defaultConnectors:o}=s||{},{actionTypeRegistry:l}=Object(T.useKibana)().services.triggersActionsUi,c=Object(u.useDispatch)();return Object(n.useEffect)((()=>{c(Ju.a.get())}),[c]),{options:(null!=t?t:[]).filter((t=>(null!=e?e:[]).find((e=>e.id===t.actionTypeId)))).map((e=>({value:e.id,label:e.name,"data-test-subj":e.name,prepend:i.a.createElement(w.EuiIcon,{type:l.get(e.actionTypeId).iconClass,size:"s"})}))),actionTypes:e,connectors:t,connectorsLoading:a,settingsLoading:r,defaultConnectors:o}},oE={inputPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.selectConnector",{defaultMessage:"Select one or more connectors"}),emailPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.emailConnectorPlaceHolder",{defaultMessage:"To: Email for email connector"})},lE=({focusInput:e,isDisabled:t})=>{const[a,r]=Object(n.useState)(!1),{services:{application:s,triggersActionsUi:{getAddConnectorFlyout:o}}}=Object(T.useKibana)(),l=!(null==s||!s.capabilities.actions.save),c=Object(u.useDispatch)(),d=Object(n.useMemo)((()=>o({onClose:()=>{c(Ju.a.get()),r(!1),e()},featureId:"uptime"})),[c,e,o]);return i.a.createElement(i.a.Fragment,null,a?d:null,i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"createConnectorButton",onClick:()=>r(!0),size:"s",isDisabled:t||!l},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.alerts.settings.addConnector",defaultMessage:"Add connector"})))};function cE({isLoading:e,isDisabled:t,onChange:a,selectedConnectors:r}){const{options:s}=sE(),o=Object(n.useRef)(null),{focusConnectorField:l}=xe(),c=Se()[1],[u,d]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{l&&o.current&&!e&&o.current.focus()}),[l,o,e]),i.a.createElement(uE,{describedByIds:["defaultConnectors"],error:u,fullWidth:!0,label:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors",defaultMessage:"Default connectors"}),labelAppend:i.a.createElement(lE,{isDisabled:t,focusInput:Object(n.useCallback)((()=>{o.current&&o.current.focus()}),[])})},i.a.createElement(w.EuiComboBox,{inputRef:e=>{o.current=e},placeholder:oE.inputPlaceHolder,options:s,selectedOptions:s.filter((e=>null==r?void 0:r.includes(e.value))),onBlur:()=>{if(o.current){const{value:e}=o.current;d(0===e.length?void 0:`"${e}" is not a valid option`)}o.current&&!e&&l&&c({focusConnectorField:void 0})},isDisabled:t,"data-test-subj":"default-connectors-input-"+(e?"loading":"loaded"),fullWidth:!0,"aria-label":dE,isLoading:e,onChange:e=>{a(e.map((e=>e.value)))},onSearchChange:(e,t)=>{d(0===e.length||t?void 0:`"${e}" is not a valid option`)}}))}const uE=Ut()(w.EuiFormRow).withConfig({displayName:"RowWrapper",componentId:"sc-1w2e3f4-0"})(["&&& > .euiFormRow__labelWrapper{align-items:baseline;}"]),dE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"}),mE=()=>{var e,t;const a=Object(u.useDispatch)(),{settings:r,loading:s}=Object(u.useSelector)(iE.a),[o,l]=Object(n.useState)(c.g),d=!(null!==(e=Object(T.useKibana)().services)&&void 0!==e&&null!==(t=e.application)&&void 0!==t&&t.capabilities.uptime.configureSettings);Object(n.useEffect)((()=>{r&&l(r)}),[r]),Object(n.useEffect)((()=>{a(Ju.b.get())}),[a]);const{connectors:m}=sE(),p=null==m?void 0:m.find((e=>{var t;return(null===(t=o.defaultConnectors)||void 0===t?void 0:t.includes(e.id))&&".email"===e.actionTypeId})),f=!Object(k.isEqual)(o,r);return i.a.createElement(w.EuiForm,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.settings.defaultConnectors",defaultMessage:"Default Connectors"})),description:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.settings.defaultConnectors.description",defaultMessage:"Select one or more connectors to be used for alerts. These settings apply to all synthetics-based alerts."})},i.a.createElement(cE,{isDisabled:d,isLoading:s,selectedConnectors:o.defaultConnectors,onChange:e=>l({...o,defaultConnectors:e})})),p&&i.a.createElement(nE,{loading:s,isDisabled:d,value:o.defaultEmail,selectedConnectors:o.defaultConnectors,onChange:e=>l((t=>({...t,defaultEmail:e})))}),i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsAlertDefaultsFormButton",iconType:"cross",onClick:()=>{l(null!=r?r:c.g)},flush:"left",isDisabled:!f,isLoading:s},pE)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAlertDefaultsFormButton",onClick:e=>{e.preventDefault(),a(Ju.d.get(o))},fill:!0,isLoading:s,isDisabled:!f||d||!(!p||Object(k.isEmpty)(aE(null==o?void 0:o.defaultConnectors,null==o?void 0:o.defaultEmail)))},fE))))},pE=o.i18n.translate("xpack.synthetics.settings.discardChanges",{defaultMessage:"Discard changes"}),fE=o.i18n.translate("xpack.synthetics.settings.applyChanges",{defaultMessage:"Apply changes"}),gE=({apiKey:e})=>i.a.createElement("div",{className:"text-left"},i.a.createElement(w.EuiCallOut,{title:yE,iconType:"iInCircle",size:"s"}),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("strong",null,hE)),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m",whiteSpace:"pre"},e),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("strong",null,bE)),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m"},"export SYNTHETICS_API_KEY=",e),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("strong",null,EE)),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m"},"SYNTHETICS_API_KEY=",e," npm run push")),hE=o.i18n.translate("xpack.synthetics.monitorManagement.apiKey.label",{defaultMessage:"API key"}),bE=o.i18n.translate("xpack.synthetics.monitorManagement.useEnv.label",{defaultMessage:"Use as environment variable"}),EE=o.i18n.translate("xpack.synthetics.monitorManagement.projectPush.label",{defaultMessage:"Project push command"}),yE=o.i18n.translate("xpack.synthetics.monitorManagement.apiKeyWarning.label",{defaultMessage:"This API key will only be shown once. Please keep a copy for your own records."});var vE=a(63);const xE=({isDisabled:e,apiKey:t,loading:a,setLoadAPIKey:n})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),!t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiButton,{fill:!0,isDisabled:e,fullWidth:!0,isLoading:a,color:"primary",onClick:()=>{n(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyGenerate"},a?kE:SE),i.a.createElement(w.EuiSpacer,{size:"s"}))),SE=o.i18n.translate("xpack.synthetics.monitorManagement.getProjectApiKey.label",{defaultMessage:"Generate Project API key"}),kE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.loading",{defaultMessage:"Generating API key"}),ME="https://www.elastic.co/guide/en/observability/current/synthetic-run-tests.html",wE=()=>{var e,t,a,r,s,l,u;const{loading:d,enablement:{canManageApiKeys:m}}=Ie(),[p,f]=Object(n.useState)(void 0),[g,h]=Object(n.useState)(!1),[b,E]=Object(n.useState)(!0),y=Object(T.useKibana)().services,v=!(null==y||null===(e=y.fleet)||void 0===e||!e.authz.integrations.writeIntegrationPolicies),x=null===(t=null===(a=Object(T.useKibana)().services)||void 0===a||null===(r=a.application)||void 0===r?void 0:r.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t,{data:S,loading:k,error:M}=Object(N.useFetcher)((async()=>g?(async e=>await vE.a.get(c.A.SYNTHETICS_PROJECT_APIKEY,{accessToElasticManagedLocations:e}))(b&&Boolean(x)):null),[g,x]);Object(n.useEffect)((()=>{null!=S&&S.apiKey&&f(null==S?void 0:S.apiKey.encoded),h(!1)}),[S]),Object(n.useEffect)((()=>{if(M){var e,t;const a=M;null==y||null===(e=y.notifications)||void 0===e||e.toasts.addError(M,{title:o.i18n.translate("xpack.synthetics.createApiKey.error",{defaultMessage:"Error"}),toastMessage:null==a||null===(t=a.body)||void 0===t?void 0:t.message})}}),[M,null==y||null===(s=y.notifications)||void 0===s?void 0:s.toasts]);const O=!(null===(l=Object(T.useKibana)().services)||void 0===l||null===(u=l.application)||void 0===u||!u.capabilities.uptime.save);return d?i.a.createElement(ji,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiEmptyPrompt,{style:{maxWidth:"50%"},title:i.a.createElement("h2",null,TE),body:O&&m?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,null,CE," ",v?"":`${IE} `,i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsProjectAPIKeysLink",href:ME,external:!0,target:"_blank"},OE)),i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiSwitch,{label:o.i18n.translate("xpack.synthetics.features.elasticManagedLocations",{defaultMessage:"Elastic managed locations enabled"}),checked:b&&Boolean(x),onChange:()=>{E(!b)},disabled:!x})):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,null,jE," ",i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsProjectAPIKeysLink",href:ME,external:!0,target:"_blank"},OE))),actions:i.a.createElement(xE,{loading:k,setLoadAPIKey:h,apiKey:p,isDisabled:!O||!m})}),p&&i.a.createElement(gE,{apiKey:p}))},OE=o.i18n.translate("xpack.synthetics.monitorManagement.learnMore.label",{defaultMessage:"Learn more"}),TE=o.i18n.translate("xpack.synthetics.monitorManagement.getProjectAPIKeyLabel.generate",{defaultMessage:"Generate Project API Key"}),CE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline."}),IE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.disclaimer",{defaultMessage:"Please note: In order to use push monitors using private testing locations, you must generate this API key with a user who has Fleet and Integrations write permissions."}),jE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyReducedPermissions.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline. To generate an API key, you must have permissions to manage API keys and Uptime write access. Please contact your administrator."}),_E=({pageIndex:e,pageSize:t,total:a,label:n})=>{const r=Math.min(e*t+1,a),s=Math.min(r+t-1,a);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.tableTitle.showing",defaultMessage:"Showing {count} of {total} {label}",values:{count:i.a.createElement("strong",null,r,"-",s),total:a,label:i.a.createElement("strong",null,n)}})),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiHorizontalRule,{margin:"none",style:{height:2}}))},FE=({text:e})=>{const[t,a]=Object(n.useState)(!1);return i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsParamsTextButton",iconType:t?"eyeClosed":"eye","aria-label":o.i18n.translate("xpack.synthetics.settingsRoute.viewParam",{defaultMessage:"View parameter value"}),onClick:()=>a((e=>!e)),disabled:!e})),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:t?"s":"m"}," ",t?e:"".repeat(10))))};var PE=a(99),LE=a(41);function RE(e){const{register:t,trigger:a,...i}=Object(gn.useForm)(e),[r,s]=Object(n.useState)(!1);Lu()((async()=>{r&&await(null==a?void 0:a())}),500,[r]);const o=Object(n.useCallback)((e=>async t=>{s(!1);const a=await e(t);return s(!0),a}),[s]);return{register:Object(n.useCallback)(((e,...a)=>{const{ref:n,onChange:i,...r}=t(e,...a);return{inputRef:n,ref:n,onChange:o(i),...r}}),[t,o]),trigger:a,...i}}const DE=({items:e,isEditingItem:t})=>{var a,n;const{register:r,control:s}=Object(gn.useFormContext)(),{errors:o}=Object(gn.useFormState)(),l=e.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set);return i.a.createElement(w.EuiForm,{component:"form",noValidate:!0},i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:AE,isInvalid:Boolean(null==o?void 0:o.key),error:null==o||null===(a=o.key)||void 0===a?void 0:a.message},i.a.createElement(w.EuiFieldText,m()({"data-test-subj":"syntheticsAddParamFormFieldText",fullWidth:!0,"aria-label":AE},r("key",{required:{value:!0,message:VE},validate:a=>e.filter((e=>!t||e.id!==t.id)).some((e=>e.key===a))?$E:void 0})))),i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:GE,isInvalid:Boolean(null==o?void 0:o.value),error:null==o||null===(n=o.value)||void 0===n?void 0:n.message},i.a.createElement(w.EuiTextArea,m()({"data-test-subj":"syntheticsAddParamFormTextArea",fullWidth:!0,"aria-label":GE},r("value",{required:{value:!0,message:UE}})))),i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:NE},i.a.createElement(gn.Controller,{control:s,name:"tags",render:({field:e})=>{var t,a;return i.a.createElement(w.EuiComboBox,m()({fullWidth:!0,"aria-label":NE,placeholder:NE,isInvalid:!(null==o||!o.tags),selectedOptions:null!==(t=null===(a=e.value)||void 0===a?void 0:a.map((e=>({label:e,value:e}))))&&void 0!==t?t:[],options:[...l].map((e=>({label:e,value:e}))),onCreateOption:t=>{var a;e.onChange([...null!==(a=e.value)&&void 0!==a?a:[],t])}},e,{onChange:t=>{e.onChange(t.map((e=>e.value)))}}))}})),i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:BE},i.a.createElement(w.EuiFieldText,m()({"data-test-subj":"syntheticsAddParamFormFieldText",fullWidth:!0,"aria-label":BE},r("description",{})))),i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:HE},i.a.createElement(gn.Controller,{name:"namespaces",render:({field:e})=>{var a,n;return i.a.createElement(w.EuiCheckbox,{id:"isShared",label:zE,"aria-label":HE,onChange:t=>{t.target.checked?e.onChange([LE.ALL_SPACES_ID]):e.onChange([])},checked:(null!==(a=e.value)&&void 0!==a?a:[]).length>0&&"*"===(null!==(n=e.value)&&void 0!==n?n:[])[0],disabled:Boolean(t)})}})))},AE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.keyLabel",{defaultMessage:"Key"}),NE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"}),BE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.descriptionLabel",{defaultMessage:"Description"}),zE=o.i18n.translate("xpack.synthetics.paramForm.sharedAcrossSpacesLabel",{defaultMessage:"Share across spaces"}),HE=o.i18n.translate("xpack.synthetics.paramForm.namespaces",{defaultMessage:"Namespaces"}),GE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.paramLabel",{defaultMessage:"Value"}),VE=o.i18n.translate("xpack.synthetics.monitorManagement.param.keyRequired",{defaultMessage:"Key is required"}),$E=o.i18n.translate("xpack.synthetics.monitorManagement.param.keyExists",{defaultMessage:"Key already exists"}),UE=o.i18n.translate("xpack.synthetics.monitorManagement.value.required",{defaultMessage:"Value is required"}),qE=({items:e,isEditingItem:t,setIsEditingItem:a})=>{var r;const[s,o]=Object(n.useState)(!1),{id:l,...c}=null!=t?t:{},d=RE({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:null!=c?c:{key:"",tags:[],description:"",value:""}}),m=Object(n.useCallback)((()=>{o(!1),a(null),d.reset({key:"",tags:[],description:"",value:""})}),[a]),{application:p}=Object(T.useKibana)().services,f=null!==(r=null==p?void 0:p.capabilities.uptime.save)&&void 0!==r&&r,g=Object(u.useDispatch)(),{isSaving:h,savedData:b}=Object(u.useSelector)(PE.i);Object(n.useEffect)((()=>{b&&!h&&(m(),g(PE.f.get()),g(Uu.e.get()))}),[b,h,m,g]),Object(n.useEffect)((()=>{if(t){const{id:e,...a}=t;o(!0),d.reset(a)}}),[t]);const{handleSubmit:E}=d;let y;return s&&(y=i.a.createElement(gn.FormProvider,d,i.a.createElement(w.EuiFlyout,{ownFocus:!0,onClose:m,size:"m",style:{minWidth:500}},i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h2",null,t?YE:KE))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(DE,{items:e,isEditingItem:t})),i.a.createElement(w.EuiFlyoutFooter,null,i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsAddParamFlyoutButton",iconType:"cross",onClick:m,flush:"left"},WE)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAddParamFlyoutButton",onClick:E((e=>{const{namespaces:a,...n}=e,i=null==a?void 0:a.includes(LE.ALL_SPACES_ID);g(t&&l?PE.d.get({id:l,paramRequest:{...n,share_across_spaces:i}}):PE.b.get({...n,share_across_spaces:i}))})),fill:!0,isLoading:h},XE))))))),i.a.createElement("div",null,i.a.createElement(Mn,{canEditSynthetics:f},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAddParamFlyoutButton",fill:!0,iconType:"plusInCircleFilled",iconSide:"left",onClick:()=>o(!0),isDisabled:!f},KE)),y)},WE=o.i18n.translate("xpack.synthetics.settingsRoute.cancel",{defaultMessage:"Close"}),KE=o.i18n.translate("xpack.synthetics.settingsRoute.createParam",{defaultMessage:"Create Parameter"}),YE=o.i18n.translate("xpack.synthetics.settingsRoute.params.editLabel",{defaultMessage:"Edit Parameter"}),XE=o.i18n.translate("xpack.synthetics.settingsRoute.save",{defaultMessage:"Save"}),JE=({items:e,setIsDeleteModalVisible:t})=>{const[a,r]=Object(n.useState)(!1),s=Object(u.useDispatch)(),{status:l}=Object(N.useFetcher)((()=>{if(a)return Object(PE.c)(e.map((({id:e})=>e)))}),[e,a]),c=e.map((({key:e})=>e)).join(", ").slice(0,50);return Object(n.useEffect)((()=>{a&&(l===N.FETCH_STATUS.FAILURE?Gi.a.toasts.addDanger({title:Object(T.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteParamFailure"}," ",o.i18n.translate("xpack.synthetics.paramManagement.paramDeleteFailuresMessage.name",{defaultMessage:"Param {name} failed to delete.",values:{name:c}})))},{toastLifeTimeMs:3e3}):l===N.FETCH_STATUS.SUCCESS&&(Gi.a.toasts.addSuccess({title:Object(T.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeDeleteParamSuccess"},o.i18n.translate("xpack.synthetics.paramManagement.paramDeleteSuccessMessage.name",{defaultMessage:"Param {name} deleted successfully.",values:{name:c}})))},{toastLifeTimeMs:3e3}),s(Uu.e.get())),l!==N.FETCH_STATUS.SUCCESS&&l!==N.FETCH_STATUS.FAILURE||(r(!1),t(!1),s(PE.f.get()),s(Uu.e.get())))}),[r,a,l,t,c,s]),i.a.createElement(w.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.paramManagement.deleteParamNameLabel",{defaultMessage:'Delete "{name}" param?',values:{name:c}}),onCancel:()=>t(!1),onConfirm:()=>{r(!0)},cancelButtonText:Ba,confirmButtonText:Na,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:a})},QE=()=>{var e;const[t,a]=Object(n.useState)(0),[r,s]=Object(n.useState)(10),{items:l,isLoading:c}=(()=>{const{isLoading:e,listOfParams:t}=Object(u.useSelector)(PE.i),a=Object(u.useDispatch)();return Object(n.useEffect)((()=>{a(PE.f.get())}),[a]),Object(n.useMemo)((()=>({items:null!=t?t:[],isLoading:e})),[t,e])})(),[d,m]=Object(n.useState)(null),[p,f]=Object(n.useState)([]),[g,h]=Object(n.useState)(!1),[b,E]=Object(n.useState)([]),{application:y}=Object(T.useKibana)().services,v=null!==(e=null==y?void 0:y.capabilities.uptime.save)&&void 0!==e&&e,x=[{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.key",{defaultMessage:"Key"}),sortable:!0,field:"key"},{align:"left",width:"20%",name:o.i18n.translate("xpack.synthetics.settingsRoute.params.value",{defaultMessage:"Value"}),render:e=>{var t;return i.a.createElement(FE,{text:null!==(t=e.value)&&void 0!==t?t:""})}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.description",{defaultMessage:"Description"}),field:"description",sortable:!0,render:e=>i.a.createElement(w.EuiText,{size:"s"},null!=e?e:"--")},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.tags",{defaultMessage:"Tags"}),field:"tags",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?i.a.createElement(w.EuiText,null,"--"):i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>i.a.createElement(w.EuiFlexItem,{grow:!1,key:e},i.a.createElement(w.EuiBadge,null,e)))))}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.namespaces",{defaultMessage:"Namespaces"}),field:"namespaces",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?i.a.createElement(w.EuiText,null,"--"):i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>i.a.createElement(w.EuiFlexItem,{grow:!1,key:e},i.a.createElement(w.EuiBadge,null,"*"===e?"ALL":e)))))}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.actions",{defaultMessage:"Actions"}),actions:[{name:iy,description:iy,icon:"trash",color:"danger",type:"icon",onClick:e=>{E([e]),h(!0)},"data-test-subj":"action-delete",enabled:()=>v},{name:ay,description:ay,icon:"pencil",type:"icon",onClick:e=>{m(e)},"data-test-subj":"action-edit",enabled:()=>v}]}],S=l.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set),[k,M]=Object(n.useState)(""),[O,C]=Object(n.useState)("");Object(H.useDebounce)((()=>{C(k)}),200,[k]);const[I,j]=Object(n.useState)(l);return Object(n.useEffect)((()=>{if(O){const e=w.EuiSearchBar.Query.execute(O,l,{defaultFields:["key","description","tags"]});j(e)}else j(l)}),[O,l]),i.a.createElement("div",null,i.a.createElement(w.EuiText,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.params.description",defaultMessage:"Define variables and parameters that you can use in the configuration of browser and lightweight monitors, such as credentials or URLs. {learnMore}",values:{learnMore:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsParamsListLink",href:"https://www.elastic.co/guide/en/observability/master/synthetics-params-secrets.html",target:"_blank"},ty)}})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiInMemoryTable,{itemId:"id",loading:c,tableCaption:ZE,items:I,columns:x,tableLayout:"auto",isSelectable:v,pagination:!0,sorting:{sort:{field:"key",direction:"asc"}},childrenBetween:i.a.createElement(_E,{pageIndex:t,pageSize:r,total:I.length,label:ey}),onTableChange:({page:e})=>{var t,n;a(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0),s(null!==(n=null==e?void 0:e.size)&&void 0!==n?n:10)},selection:{selectable:()=>v,onSelectionChange:e=>{f(e)},initialSelected:p},search:{onChange:({query:e})=>{var t;return M(null!==(t=null==e?void 0:e.text)&&void 0!==t?t:"")},toolsLeft:(()=>{if(0!==p.length)return i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsRenderToolsLeftParamsButton",color:"danger",onClick:()=>{E(p),h(!0)}},o.i18n.translate("xpack.synthetics.settingsRoute.params.deleteCount",{defaultMessage:"Delete {count} params",values:{count:p.length}}))})(),toolsRight:[i.a.createElement(qE,{isEditingItem:d,setIsEditingItem:m,items:l})],box:{incremental:!0},filters:[{type:"field_value_selection",field:"tags",name:"Tags",multiSelect:!0,options:[...S].map((e=>({value:e,name:e,view:e})))}]},message:c?ny:void 0}),g&&b&&i.a.createElement(JE,{items:b,setIsDeleteModalVisible:h}))},ZE=o.i18n.translate("xpack.synthetics.settingsRoute.params.tableCaption",{defaultMessage:"Synthetics Global Parameters"}),ey=o.i18n.translate("xpack.synthetics.settingsRoute.params.label",{defaultMessage:"Parameters"}),ty=o.i18n.translate("xpack.synthetics.settingsRoute.params.learnMore",{defaultMessage:"Learn more."}),ay=o.i18n.translate("xpack.synthetics.settingsRoute.params.editLabel",{defaultMessage:"Edit Parameter"}),ny=o.i18n.translate("xpack.synthetics.settingsRoute.params.loading",{defaultMessage:"Loading..."}),iy=o.i18n.translate("xpack.synthetics.settingsRoute.params.addLabel",{defaultMessage:"Delete Parameter"});var ry=a(51);const sy=({name:e})=>{var t,a;const{share:n,application:r}=Object(T.useKibana)().services,s=null===(t=r.capabilities.management)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.index_lifecycle_management,o=n.url.locators.get(ry.ILM_LOCATOR_ID),{basePath:l}=tt(),{data:c}=Object(N.useFetcher)((async()=>null==o?void 0:o.getLocation({page:"policy_edit",policyName:e})),[e]);return c?e?s?i.a.createElement(w.EuiLink,{href:`${l}/app/${c.app}${c.path}`,target:"_blank","data-test-subj":e+"PolicyLink"},e):i.a.createElement(w.EuiToolTip,{content:cy},i.a.createElement(w.EuiText,{size:"m"},e)):i.a.createElement(i.a.Fragment,null,"--"):i.a.createElement(w.EuiSkeletonText,{lines:1})},oy=()=>{var e,t;const{application:a}=Object(T.useKibana)().services;return(null===(e=a.capabilities.management)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.index_lifecycle_management)?i.a.createElement(i.a.Fragment,null,ly):i.a.createElement(i.a.Fragment,null,ly," ",i.a.createElement(w.EuiIconTip,{content:cy,position:"right"}))},ly=o.i18n.translate("xpack.synthetics.settingsRoute.table.policy",{defaultMessage:"Policy"}),cy=o.i18n.translate("xpack.synthetics.settingsRoute.policy.manageILM",{defaultMessage:'You need the "manage_ilm" cluster permission to manage ILM policies.'}),uy=[{name:"synthetics",label:o.i18n.translate("xpack.synthetics.settingsRoute.allChecks",{defaultMessage:"All Checks"}),indexTemplate:"synthetics"},{name:"synthetics-synthetics.browser-default_policy",label:o.i18n.translate("xpack.synthetics.settingsRoute.browserChecks",{defaultMessage:"Browser Checks"}),indexTemplate:"synthetics-browser"},{name:"synthetics-synthetics.browser_network-default_policy",label:o.i18n.translate("xpack.synthetics.settingsRoute.browserNetworkRequests",{defaultMessage:"Browser Network Requests"}),indexTemplate:"synthetics-browser.network"},{name:"synthetics-synthetics.browser_screenshot-default_policy",label:"Browser Screenshots",indexTemplate:"synthetics-browser.screenshot"},{name:"synthetics-synthetics.http-default_policy",label:"HTTP Pings",indexTemplate:"synthetics-http"},{name:"synthetics-synthetics.icmp-default_policy",label:"ICMP Pings",indexTemplate:"synthetics-icmp"},{name:"synthetics-synthetics.tcp-default_policy",label:"TCP Pings",indexTemplate:"synthetics-tcp"}],dy=e=>{if(!e)return"--";const[t]=e.split("d");return o.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriodValue",{defaultMessage:"{value} days + rollover",values:{value:t}})},my=()=>{var e;const{data:t,loading:a,error:n}=(()=>{var e;const{data:t,error:a,loading:n}=Object(N.useFetcher)((async()=>(async()=>await vE.a.get("/api/index_lifecycle_management/policies"))()),[]),{data:i,loading:r}=Object(N.useFetcher)((async()=>(async()=>await vE.a.get(c.A.INDEX_SIZE))()),[]),s=null!==(e=null==t?void 0:t.filter((({indexTemplates:e})=>null==e?void 0:e.some((e=>e.includes("synthetics"))))))&&void 0!==e?e:[];return{data:uy.map((({name:e,label:t,indexTemplate:a})=>{var n,r,o;const l=s.find((e=>{var t;return null===(t=e.indexTemplates)||void 0===t?void 0:t.some((e=>e.includes(a)))})),c=null==i||null===(n=i.data)||void 0===n?void 0:n.filter((e=>{var t;return null==l||null===(t=l.indices)||void 0===t?void 0:t.includes(e.index)}));let u=null!==(r=null==c?void 0:c.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==r?r:0;const d=(null!==(o=null==l?void 0:l.policy.phases)&&void 0!==o?o:{}).delete;var m,p;return"synthetics"===e&&(u=null!==(m=null==i||null===(p=i.data)||void 0===p?void 0:p.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==m?m:0),{name:e,label:t,policy:l,retentionPeriod:dy(null==d?void 0:d.min_age),currentSize:lr(u)}})),error:a,loading:n||r}})();if(n&&403===(null===(e=n.body)||void 0===e?void 0:e.statusCode))return i.a.createElement(py,null);const r=[{field:"label",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.dataset",{defaultMessage:"Dataset"})},{field:"currentSize",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.currentSize",{defaultMessage:"Current size"})},{field:"retentionPeriod",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriod",{defaultMessage:"Retention period"})},{field:"policy.name",name:i.a.createElement(oy,null),render:(e,t)=>i.a.createElement(sy,{name:e})}];return i.a.createElement("div",null,i.a.createElement(w.EuiCallOut,{title:hy,iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.settingsRoute.retentionCalloutDescription",defaultMessage:"To change your data retention settings, we recommend creating your own index lifecycle policy and attaching it to the relevant custom Component Template in {stackManagement}. For more information, {docsLink}.",values:{stackManagement:i.a.createElement("strong",null,by),docsLink:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsDataRetentionTabLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-manage-retention.html"},Ey)}}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiBasicTable,{loading:a,tableCaption:yy,items:t,columns:r,tableLayout:"auto"}))},py=()=>{const{services:{docLinks:e}}=Object(T.useKibana)();return i.a.createElement(w.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",color:"plain",icon:i.a.createElement(w.EuiIcon,{type:"logoObservability",size:"xl"}),title:i.a.createElement("h2",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.dataRetention.unprivileged.unprivilegedTitle",defaultMessage:"Missing privileges"})),body:i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.params.unprivileged.unprivilegedDescription",defaultMessage:"You need additional privileges to view Synthetics app data usage and retention settings. {docsLink}",values:{docsLink:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsUnprivilegedLearnMoreLink",href:null==e?void 0:e.links.synthetics.featureRoles,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorManagement.projectDelete.docsLink",{defaultMessage:"Learn more"}))}})),footer:i.a.createElement(vy,{children:`\n- ${fy} \n- ${gy}`})})},fy=o.i18n.translate("xpack.synthetics.dataRetention.unprivileged.index",{defaultMessage:"`read`, `monitor` on the following Elasticsearch indices: `synthetics-*`"}),gy=o.i18n.translate("xpack.synthetics.dataRetention.unprivileged.cluster",{defaultMessage:"`read_ilm`, `monitor` to view and `manage_ilm` to manage ILM policies on the Elasticsearch cluster."}),hy=o.i18n.translate("xpack.synthetics.settingsRoute.retentionCalloutTitle",{defaultMessage:"Synthetics data is configured by managed index lifecycle policies"}),by=o.i18n.translate("xpack.synthetics.stackManagement",{defaultMessage:"Stack Management"}),Ey=o.i18n.translate("xpack.synthetics.settingsRoute.readDocs",{defaultMessage:"read our documentation"}),yy=o.i18n.translate("xpack.synthetics.settingsRoute.tableCaption",{defaultMessage:"Synthetics data retention policies"});var vy=Ut()(w.EuiMarkdownFormat).withConfig({displayName:"_StyledEuiMarkdownFormat",componentId:"sc-fji123-0"})(["text-align:initial;"]);const xy=o.i18n.translate("xpack.synthetics.settings.title",{defaultMessage:"Settings"}),Sy=({text:e})=>i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,null,e)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiCopy,{textToCopy:e},(e=>i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsCopyNameButton",color:"text",iconType:"copy",onClick:e,"aria-label":o.i18n.translate("xpack.synthetics.copyName.copyNameButtonIconLabel",{defaultMessage:"Copy name"})}))))),ky=({count:e,locationName:t})=>{const[a,r]=Object(n.useState)(!1),s=i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsViewLocationMonitorsButton",onClick:()=>r((e=>!e))},e),o=Object(p.useHistory)(),{formattedLocationName:l,href:c,viewMonitorsMessage:u}=Object(n.useMemo)((()=>({formattedLocationName:i.a.createElement("strong",null,t),href:e>0?o.createHref({pathname:"/monitors",search:`?locations=${JSON.stringify([t])}`}):o.createHref({pathname:"/add-monitor"}),viewMonitorsMessage:e>0?wy:Oy})),[e,o,t]);return i.a.createElement(w.EuiPopover,{button:s,isOpen:a,closePopover:()=>r(!1)},e>0?i.a.createElement(Ty,{count:e,name:l}):i.a.createElement(Cy,{name:l}),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(My,{href:c},u))},My=({href:e,children:t})=>i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsViewLocationMonitorsButton",href:e},t),wy=o.i18n.translate("xpack.synthetics.monitorManagement.viewLocationMonitors",{defaultMessage:"View monitors"}),Oy=o.i18n.translate("xpack.synthetics.monitorManagement.createLocationMonitors",{defaultMessage:"Create monitor"}),Ty=({count:e,name:t})=>i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.viewMonitors",defaultMessage:"{name} is used in {count, number} {count, plural,one {monitor} other {monitors}}.",values:{count:e,name:t}}),Cy=({name:e})=>i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.viewZeroMonitors",defaultMessage:"{name} isn't used in any monitors yet.",values:{name:e}});function Iy({tagsList:e,control:t,errors:a}){return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:jy},i.a.createElement(gn.Controller,{name:"tags",control:t,render:({field:t})=>{var n,r;return i.a.createElement(w.EuiComboBox,m()({fullWidth:!0,"aria-label":jy,placeholder:jy,isInvalid:!(null==a||!a.tags),selectedOptions:null!==(n=null===(r=t.value)||void 0===r?void 0:r.map((e=>({label:e,value:e}))))&&void 0!==n?n:[],options:e.map((e=>({label:e,value:e}))),onCreateOption:e=>{var a;t.onChange([...null!==(a=t.value)&&void 0!==a?a:[],e])}},t,{onChange:e=>{t.onChange(e.map((e=>e.value)))}}))}}))}const jy=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"});var _y=a(68);const Fy=({inFlyout:e=!0,setIsAddingNew:t,redirectToSettings:a})=>{const n=Object(u.useDispatch)(),r=Object(p.useHistory)(),{canSave:s}=tt();return i.a.createElement(w.EuiEmptyPrompt,{hasBorder:!0,title:i.a.createElement("h2",null,Ry),titleSize:"s",body:i.a.createElement(w.EuiText,{size:"s"},e?"":Ly," ",Dy),actions:i.a.createElement(Mn,{canEditSynthetics:s},a?i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsEmptyLocationsButton",iconType:"plusInCircle",color:"primary",fill:!0,isDisabled:!s,href:r.createHref({pathname:c.x})},Ay):i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsEmptyLocationsButton",iconType:"plusInCircle",isDisabled:!s,color:"primary",fill:!0,onClick:()=>{null==t||t(!0),n(Object(_y.k)(!0)),n(Object(_y.j)(!0))}},Ay)),footer:i.a.createElement(w.EuiText,{size:"s"},By," ",i.a.createElement(Py,null))})},Py=({label:e})=>i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsPrivateLocationDocsLinkLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html",target:"_blank"},null!=e?e:Ny),Ly=o.i18n.translate("xpack.synthetics.monitorManagement.firstLocationMonitor",{defaultMessage:"In order to create a monitor, you will need to add a location first."}),Ry=o.i18n.translate("xpack.synthetics.monitorManagement.createFirstLocation",{defaultMessage:"Create your first private location"}),Dy=o.i18n.translate("xpack.synthetics.monitorManagement.startAddingLocationsDescription",{defaultMessage:"Private locations allow you to run monitors from your own premises. They require an Elastic agent and Agent policy which you can control and maintain via Fleet."}),Ay=o.i18n.translate("xpack.synthetics.monitorManagement.createLocation",{defaultMessage:"Create location"}),Ny=o.i18n.translate("xpack.synthetics.monitorManagement.readDocs",{defaultMessage:"read the docs"}),By=o.i18n.translate("xpack.synthetics.monitorManagement.learnMore",{defaultMessage:"For more information,"}),zy=({loading:e,id:t,label:a,locationMonitors:r,onDelete:s})=>{var l,c;const u=null!==(l=null==r||null===(c=r.find((e=>e.id===t)))||void 0===c?void 0:c.count)&&void 0!==l?l:0,d=0===u,{canSave:m}=tt(),[p,f]=Object(n.useState)(!1),g=o.i18n.translate("xpack.synthetics.monitorManagement.cannotDelete.description",{defaultMessage:"You can't delete this location because it is used in {monCount, number} {monCount, plural,one {monitor} other {monitors}}.\n                Remove this location from all monitors first.",values:{monCount:u}}),h=i.a.createElement(w.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocationName",{defaultMessage:'Delete "{location}"',values:{location:a}}),onCancel:()=>f(!1),onConfirm:()=>s(t),cancelButtonText:Vy,confirmButtonText:Gy,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:e},i.a.createElement("p",null,$y));return i.a.createElement(i.a.Fragment,null,p&&h,i.a.createElement(w.EuiToolTip,{content:d?Hy:g},i.a.createElement(w.EuiButtonIcon,{"data-test-subj":`deleteLocation-${t}`,isLoading:e,iconType:"trash",color:"danger","aria-label":Hy,onClick:()=>{f(!0)},isDisabled:!d||!m})))},Hy=o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocation",{defaultMessage:"Delete location"}),Gy=o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocationLabel",{defaultMessage:"Delete location"}),Vy=o.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),$y=o.i18n.translate("xpack.synthetics.monitorManagement.areYouSure",{defaultMessage:"Are you sure you want to delete this location?"}),Uy=({agentPolicyId:e})=>{const{canReadAgentPolicies:t}=Ue(),{basePath:a}=tt(),{data:n,loading:r}=Object(u.useSelector)(_y.g),s=null==n?void 0:n.find((t=>t.id===e));return r?i.a.createElement(w.EuiLoadingSpinner,{size:"s"}):i.a.createElement(w.EuiText,{size:"s"},t?i.a.createElement(w.EuiTextColor,{color:"subdued"},s?i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsPolicyNameLink",href:`${a}/app/fleet/policies/${e}`},null==s?void 0:s.name):i.a.createElement(w.EuiText,{color:"danger",size:"s",className:"eui-displayInline"},qy)):e,t&&i.a.createElement(i.a.Fragment,null," ",i.a.createElement(w.EuiBadge,{color:0===(null==s?void 0:s.agents)?"warning":"hollow"},Wy,null==s?void 0:s.agents)))},qy=o.i18n.translate("xpack.synthetics.monitorManagement.deletedPolicy",{defaultMessage:"Policy is deleted"}),Wy=o.i18n.translate("xpack.synthetics.monitorManagement.agents",{defaultMessage:"Agents: "}),Ky=()=>{const{basePath:e,canSave:t}=tt(),{canCreateAgentPolicies:a}=Ue();return i.a.createElement(i.a.Fragment,null,!a&&i.a.createElement(kn,null),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiEmptyPrompt,{hasBorder:!0,title:i.a.createElement("h2",null,Xy),body:i.a.createElement("p",null,Jy),actions:i.a.createElement(Mn,{canEditSynthetics:t},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAgentPolicyNeededButton",fill:!0,href:`${e}/app/fleet/policies?create`,color:"primary",isDisabled:!t||!a},Yy)),footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,By)),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsAgentPolicyNeededLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations"},Ny))}))},Yy=o.i18n.translate("xpack.synthetics.monitorManagement.createAgentPolicy",{defaultMessage:"Create agent policy"}),Xy=o.i18n.translate("xpack.synthetics.monitorManagement.agentPolicyNeeded",{defaultMessage:"No agent policies found"}),Jy=o.i18n.translate("xpack.synthetics.monitorManagement.addAgentPolicyDesc",{defaultMessage:"Private locations require an Agent policy. In order to add a private location, first you must create an Agent policy in Fleet."}),Qy="agentPolicyId",Zy=({privateLocations:e})=>{const{data:t}=Object(u.useSelector)(_y.g),{control:a,formState:{isSubmitted:n},trigger:r}=Object(gn.useFormContext)(),{isTouched:s,error:l}=a.getFieldState(Qy),c=(n||s)&&!!l,d=null==t?void 0:t.map((t=>{const a=e.find((e=>e.agentPolicyId===t.id));return{disabled:Boolean(a),value:t.id,inputDisplay:i.a.createElement(w.EuiHealth,{color:"active"===t.status?"success":"warning",style:{lineHeight:"inherit"}},t.name),"data-test-subj":t.name,dropdownDisplay:i.a.createElement(w.EuiToolTip,{content:null!=a&&a.label?o.i18n.translate("xpack.synthetics.monitorManagement.anotherPrivateLocation",{defaultMessage:"This agent policy is already attached to location: {locationName}.",values:{locationName:null==a?void 0:a.label}}):void 0},i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiHealth,{color:"active"===t.status?"success":"warning",style:{lineHeight:"inherit"}},i.a.createElement("strong",null,t.name)),i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{size:"s",color:"subdued",className:"eui-textNoWrap"},i.a.createElement("p",null,ev," ",t.agents))),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,t.description))))))}}));return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:nv,helpText:c?av:void 0,isInvalid:c,error:c?tv:void 0},i.a.createElement(gn.Controller,{name:Qy,control:a,rules:{required:!0},render:({field:e})=>i.a.createElement(iv,m()({fullWidth:!0,"aria-label":tv,placeholder:tv,valueOfSelected:e.value,itemLayoutAlign:"top",popoverProps:{repositionOnScroll:!0},hasDividers:!0,isInvalid:c,options:null!=d?d:[]},e,{onBlur:async()=>{await r()}}))}))},ev=o.i18n.translate("xpack.synthetics.monitorManagement.agentsLabel",{defaultMessage:"Agents: "}),tv=o.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost",{defaultMessage:"Select agent policy"}),av=o.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost.helpText",{defaultMessage:"We recommend using a single Elastic agent per agent policy."}),nv=o.i18n.translate("xpack.synthetics.monitorManagement.policyHost",{defaultMessage:"Agent policy"}),iv=i.a.forwardRef(((e,t)=>i.a.createElement("span",{ref:t,tabIndex:-1},i.a.createElement(w.EuiSuperSelect,m()({"data-test-subj":"syntheticsAgentPolicySelect"},e))))),rv=({privateLocations:e})=>{var t;const{data:a}=Object(u.useSelector)(_y.g),{control:n,register:r,getValues:s}=Object(gn.useFormContext)(),{errors:o}=Object(gn.useFormState)(),l=s(Qy),c=null==a?void 0:a.find((e=>e.id===l)),d=e.reduce(((e,t)=>[...e,...t.tags||[]]),[]);return i.a.createElement(i.a.Fragment,null,0===(null==a?void 0:a.length)&&i.a.createElement(Ky,null),i.a.createElement(w.EuiForm,{component:"form",noValidate:!0},i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:cv,isInvalid:Boolean(null==o?void 0:o.label),error:null==o||null===(t=o.label)||void 0===t?void 0:t.message},i.a.createElement(sv,m()({"data-test-subj":"syntheticsLocationFormFieldText",fullWidth:!0,"aria-label":cv},r("label",{required:{value:!0,message:dv},validate:t=>e.some((e=>e.label===t))?uv:void 0})))),i.a.createElement(w.EuiSpacer,null),i.a.createElement(Zy,{privateLocations:e}),i.a.createElement(w.EuiSpacer,null),i.a.createElement(Iy,{tagsList:d,control:n,errors:o}),i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiCallOut,{title:ov,size:"s",style:{textAlign:"left"}},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.content",defaultMessage:'To run "Browser" monitors on this private location, make sure that you\'re using the {code} Docker container, which contains the dependencies necessary to run these monitors. For more information, {link}.',values:{code:i.a.createElement(w.EuiCode,null,"elastic-agent-complete"),link:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsLocationFormReadTheDocsLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations",external:!0},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.link",defaultMessage:"read the docs"}))}}))),i.a.createElement(w.EuiSpacer,null),0===(null==c?void 0:c.agents)&&i.a.createElement(w.EuiCallOut,{title:lv,size:"s",style:{textAlign:"left"},color:"warning"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentMissingCallout.content",defaultMessage:"You have selected an agent policy that has no agent attached. Make sure that you have at least one agent enrolled in this policy. You can add an agent before or after creating a location. For more information, {link}.",values:{link:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsLocationFormReadTheDocsLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html#synthetics-private-location-fleet-agent",external:!0},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.link",defaultMessage:"read the docs"}))}})))))},sv=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiFieldText,m()({"data-test-subj":"syntheticsFieldTextFieldText"},e,{inputRef:t})))),ov=o.i18n.translate("xpack.synthetics.monitorManagement.agentCallout.title",{defaultMessage:"Requirement"}),lv=o.i18n.translate("xpack.synthetics.monitorManagement.agentMissingCallout.title",{defaultMessage:"Selected agent policy has no agents"}),cv=o.i18n.translate("xpack.synthetics.monitorManagement.locationName",{defaultMessage:"Location name"}),uv=o.i18n.translate("xpack.synthetics.monitorManagement.alreadyExists",{defaultMessage:"Location name already exists."}),dv=o.i18n.translate("xpack.synthetics.monitorManagement.nameRequired",{defaultMessage:"Location name is required"}),mv=({deleteLoading:e,onDelete:t,privateLocations:a})=>{const r=Object(u.useDispatch)(),[s,o]=Object(n.useState)(0),[l,c]=Object(n.useState)(10),{locationMonitors:d,loading:m}=(()=>{const e=Object(u.useDispatch)();return Object(n.useEffect)((()=>{e(Ju.c.get())}),[e]),Object(u.useSelector)(Uu.c)})(),{canSave:p}=tt(),f=a.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set),g=[{field:"label",name:cv,render:e=>i.a.createElement(Sy,{text:e})},{field:"monitors",name:gv,render:(e,t)=>i.a.createElement(ky,{count:e,locationName:t.label})},{field:"agentPolicyId",name:hv,render:e=>i.a.createElement(Uy,{agentPolicyId:e})},{name:jy,field:"tags",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?"--":i.a.createElement(w.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>i.a.createElement(w.EuiFlexItem,{grow:!1,key:e},i.a.createElement(w.EuiBadge,null,e)))))}},{name:fv,actions:[{name:bv,description:bv,render:a=>i.a.createElement(zy,{id:a.id,label:a.label,locationMonitors:d,onDelete:t,loading:e}),isPrimary:!0,"data-test-subj":"action-delete"}]}],h=a.map((e=>{var t,a;return{...e,monitors:null!==(t=null==d||null===(a=d.find((t=>t.id===e.id)))||void 0===a?void 0:a.count)&&void 0!==t?t:0}}));return i.a.createElement("div",null,i.a.createElement(w.EuiText,null,Dy," ",i.a.createElement(Py,{label:yv})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiInMemoryTable,{itemId:"id",tableLayout:"auto",tableCaption:pv,items:h,columns:g,childrenBetween:i.a.createElement(_E,{total:h.length,label:pv,pageIndex:s,pageSize:l}),pagination:{pageSize:l,pageIndex:s},onTableChange:({page:e})=>{var t,a;o(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0),c(null!==(a=null==e?void 0:e.size)&&void 0!==a?a:10)},search:{toolsRight:[i.a.createElement(Mn,{canEditSynthetics:p},i.a.createElement(w.EuiButton,{key:"addPrivateLocationButton",fill:!0,"data-test-subj":"addPrivateLocationButton",isLoading:m,disabled:!p,onClick:()=>(!0,r(Object(_y.j)(true))),iconType:"plusInCircle"},Ev))],box:{incremental:!0},filters:[{type:"field_value_selection",field:"tags",name:jy,multiSelect:!0,options:[...f].map((e=>({value:e,name:e,view:e})))}]}}))},pv=o.i18n.translate("xpack.synthetics.monitorManagement.privateLocations",{defaultMessage:"Private locations"}),fv=o.i18n.translate("xpack.synthetics.monitorManagement.actions",{defaultMessage:"Actions"}),gv=o.i18n.translate("xpack.synthetics.monitorManagement.monitors",{defaultMessage:"Monitors"}),hv=o.i18n.translate("xpack.synthetics.monitorManagement.agentPolicy",{defaultMessage:"Agent Policy"}),bv=o.i18n.translate("xpack.synthetics.settingsRoute.privateLocations.deleteLabel",{defaultMessage:"Delete private location"}),Ev=o.i18n.translate("xpack.synthetics.monitorManagement.createLocation",{defaultMessage:"Create location"}),yv=o.i18n.translate("xpack.synthetics.privateLocations.learnMore.label",{defaultMessage:"Learn more."}),vv=({children:e,privateLocations:t,setIsAddingNew:a,showNeedAgentPolicy:n=!0,showEmptyLocations:r=!0})=>{const{data:s}=Object(u.useSelector)(_y.g);return 0===(null==s?void 0:s.length)&&n?i.a.createElement(Ky,null):0===t.length&&r?i.a.createElement(Fy,{setIsAddingNew:a}):i.a.createElement(i.a.Fragment,null,e)},xv=({onSubmit:e,setIsOpen:t,privateLocations:a,isLoading:n})=>{const r=RE({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:{label:"",agentPolicyId:"",geo:{lat:0,lon:0}}}),{canSave:s}=tt(),{handleSubmit:o}=r,l=()=>{t(!1)};return i.a.createElement(gn.FormProvider,r,i.a.createElement(w.EuiFlyout,{onClose:l,style:{width:540}},i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h2",null,Sv))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(vv,{privateLocations:a,showEmptyLocations:!1},i.a.createElement(rv,{privateLocations:a}))),i.a.createElement(w.EuiFlyoutFooter,null,i.a.createElement(w.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsAddLocationFlyoutButton",iconType:"cross",onClick:l,flush:"left",isLoading:n},kv)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Mn,{canEditSynthetics:s},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsAddLocationFlyoutButton",fill:!0,onClick:o(e),isLoading:n,isDisabled:!s},Mv)))))))},Sv=o.i18n.translate("xpack.synthetics.monitorManagement.createPrivateLocations",{defaultMessage:"Create private location"}),kv=o.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),Mv=o.i18n.translate("xpack.synthetics.monitorManagement.saveLabel",{defaultMessage:"Save"});var wv=a(141);const Ov=()=>{const[e,t]=Object(n.useState)(),[a,i]=Object(n.useState)(),r=Object(u.useDispatch)(),s=Object(u.useSelector)(_y.h),o=Object(u.useSelector)(_y.i);Object(n.useEffect)((()=>{r(_y.e.get())}),[r]);const{loading:l}=Object(N.useFetcher)((async()=>{if(e){const a=await Object(wv.a)(e);return t(void 0),!1,r(Object(_y.j)(false)),r(Object(nn.b)()),r(_y.e.get()),a}}),[e]),{loading:c}=Object(N.useFetcher)((async()=>{if(a){const e=await Object(wv.b)(a);return i(void 0),r(Object(nn.b)()),r(_y.e.get()),e}}),[a]);return{formData:e,onSubmit:e=>{t(e)},onDelete:e=>{i(e)},deleteLoading:Boolean(c),loading:Boolean(o||l),privateLocations:s}},Tv=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)(_y.f),a=Object(n.useCallback)((t=>e(Object(_y.j)(t))),[e]),{onSubmit:r,loading:s,privateLocations:o,onDelete:l,deleteLoading:c}=Ov();return Object(n.useEffect)((()=>{a(!1)}),[a]),Object(n.useEffect)((()=>{e(_y.d.get()),e(Object($.u)())}),[e]),i.a.createElement(i.a.Fragment,null,s?i.a.createElement(ji,null):i.a.createElement(vv,{privateLocations:o,setIsAddingNew:a},i.a.createElement(mv,{privateLocations:o,onDelete:l,deleteLoading:c})),t?i.a.createElement(xv,{setIsOpen:a,onSubmit:e=>{r(e)},privateLocations:o,isLoading:s}):null)},Cv=()=>{(e=>{var t,a;const n=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";Ce([{text:xy,href:`${n}${c.C.replace(":tabId","alerting")}`}])})();const{tabId:e}=Object(p.useParams)();return i.a.createElement("div",null,(()=>{switch(e){case"api-keys":return i.a.createElement(wE,null);case"private-locations":return i.a.createElement(Tv,null);case"data-retention":return i.a.createElement(my,null);case"params":return i.a.createElement(QE,null);case"alerting":return i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(mE,null));default:return i.a.createElement(p.Redirect,{to:"/settings/alerting"})}})())},Iv=(e,t)=>{const a=Object(p.useRouteMatch)(c.C);if(!a)return{};const{tabId:n}=a.params,i=e=>`${t}${c.C.replace(":tabId",e)}`;return{pageTitle:o.i18n.translate("xpack.synthetics.settingsRoute.pageHeaderTitle",{defaultMessage:"Settings"}),rightSideItems:[],tabs:[{label:o.i18n.translate("xpack.synthetics.settingsTabs.alerting",{defaultMessage:"Alerting"}),isSelected:"alerting"===n,href:i("alerting")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.privateLocations",{defaultMessage:"Private Locations"}),isSelected:"private-locations"===n,href:i("private-locations")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.params",{defaultMessage:"Global Parameters"}),isSelected:"params"===n||!n,href:i("params")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.dataRetention",{defaultMessage:"Data Retention"}),isSelected:"data-retention"===n,href:i("data-retention")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.apiKeys",{defaultMessage:"Project API Keys"}),isSelected:"api-keys"===n,href:i("api-keys")}]}},jv=(e,t,a)=>{const n={title:o.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:a}}),component:Cv,pageHeader:Iv(0,t),dataTestSubj:"syntheticsSettingsPage",pageSectionProps:{paddingSize:"m"}};return[{...n,path:c.y},{...n,path:c.C}]},_v=()=>{const e=Object(p.useRouteMatch)({path:c.q});return(null==e?void 0:e.isExact)||!1};var Fv=a(52);const Pv=()=>{const{services:e}=Object(T.useKibana)(),{data:t,loading:a,error:n}=Object(N.useFetcher)((()=>{var t,a;return null!==(t=null===(a=e.spaces)||void 0===a?void 0:a.getActiveSpace())&&void 0!==t?t:Promise.resolve({id:Fv.DEFAULT_SPACE_ID})}),[e.spaces]);return{space:t,loading:a,error:n}},Lv=e=>{const{services:{uiSettings:t}}=Object(T.useKibana)(),{isDev:a}=tt(),n=null==t?void 0:t.get(Ke.enableInspectEsQueries);return a||n?i.a.createElement(Rv,e):null},Rv=({isValid:e,monitorFields:t})=>{const{isDev:a}=tt(),[r,s]=Object(n.useState)((()=>!a)),[o,l]=Object(n.useState)(!1),u=()=>{l(!1),m(!1)},[d,m]=Object(n.useState)(!1),{data:p,loading:f,error:g}=Object(N.useFetcher)((()=>{if(d)return(async({monitor:e,hideParams:t})=>await vE.a.post(c.A.SYNTHETICS_MONITOR_INSPECT,e,void 0,{hideParams:t}))({hideParams:r,monitor:t})}),[d,r]);let h;return o&&(h=i.a.createElement(w.EuiFlyout,{ownFocus:!0,onClose:u,"aria-labelledby":"flyoutTitle"},i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("h2",{id:"flyoutTitle"},Nv))),i.a.createElement(w.EuiFlyoutBody,null,i.a.createElement(w.EuiSwitch,{label:$v,checked:r,onChange:e=>s(e.target.checked)}),i.a.createElement(w.EuiSpacer,{size:"m"}),!f&&p?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"m",lineNumbers:!0,isCopyable:!0},Av(p.result)),p.decodedCode&&i.a.createElement(Dv,{code:p.decodedCode})):f&&!g?i.a.createElement(ji,null):i.a.createElement("p",null,null==g?void 0:g.message)),i.a.createElement(w.EuiFlyoutFooter,null,i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsMonitorInspectCloseButton",onClick:u,fill:!0},Hv)))),i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiToolTip,{content:e?zv:Bv},i.a.createElement(w.EuiButton,{disabled:!e,"data-test-subj":"syntheticsMonitorInspectShowFlyoutExampleButton",onClick:()=>{m((()=>!d)),l((()=>!o))},iconType:"inspect",iconSide:"left"},Vv)),h)},Dv=({code:e})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiHorizontalRule,null),i.a.createElement(w.EuiTitle,{size:"s"},i.a.createElement("h2",{id:"flyoutTitle"},Gv)),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiCodeBlock,{language:"javascript",fontSize:"m",paddingSize:"m",lineNumbers:!0,isCopyable:!0},e)),Av=e=>{var t,a,n,i,r;const s=null===(t=e.publicConfigs)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.monitors)||void 0===n?void 0:n[0],o=null===(i=e.privateConfig)||void 0===i?void 0:i.inputs.find((e=>e.enabled)),l=null==o||null===(r=o.streams.find((e=>Object.values(He.q).includes(e.data_stream.dataset))))||void 0===r?void 0:r.compiled_stream;return JSON.stringify({publicConfig:null!=s?s:{},privateConfig:null!=l?l:{}},null,2)},Nv=o.i18n.translate("xpack.synthetics.monitorInspect.configLabel",{defaultMessage:"Configuration"}),Bv=o.i18n.translate("xpack.synthetics.monitorInspect.formattedConfigLabel.valid",{defaultMessage:"Only valid form configurations can be inspected."}),zv=o.i18n.translate("xpack.synthetics.monitorInspect.formattedConfigLabel.description",{defaultMessage:"View formatted configuration for this monitor."}),Hv=o.i18n.translate("xpack.synthetics.monitorInspect.closeLabel",{defaultMessage:"Close"}),Gv=o.i18n.translate("xpack.synthetics.monitorInspect.sourceCodeLabel",{defaultMessage:"Source code"}),Vv=o.i18n.translate("xpack.synthetics.monitorInspect.inspectLabel",{defaultMessage:"Inspect configuration"}),$v=o.i18n.translate("xpack.synthetics.monitorInspect.hideParams",{defaultMessage:"Hide parameter values"}),Uv=({isValid:e,monitorFields:t})=>i.a.createElement(ht,{node:yb},i.a.createElement(Lv,{isValid:e,monitorFields:t}));var qv=a(42),Wv=a(7),Kv=a(90);const Yv=({throttling:e,id:t})=>{if(t===Kv.f.NO_THROTTLING)return i.a.createElement(w.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.disabled.label",defaultMessage:"No throttling"}))));if(e&&e.value){const{label:t,value:a}=e;return i.a.createElement(w.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,null,t)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile",defaultMessage:"({download} Mbps, {upload} Mbps, {latency} ms)",values:{download:a.download,upload:a.upload,latency:a.latency}}))))}return i.a.createElement(w.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.custom.label",defaultMessage:"Custom"}))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.custom",defaultMessage:"(X Mbps, Y Mbps, Z ms)"}))))},Xv=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.automatic_node_cap.title",defaultMessage:"Automatic cap"}),color:"warning",iconType:"warning"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.automatic_node_cap.message",defaultMessage:"When disabling throttling, your monitor will still have its bandwidth capped by the configurations of the Synthetics Nodes in which it's running."}))),Jv=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.exceeded_throttling.title",defaultMessage:"You've exceeded the Synthetics Node bandwidth limits"}),color:"warning",iconType:"warning"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.exceeded_throttling.message",defaultMessage:"When using throttling values larger than a Synthetics Node bandwidth limit, your monitor will still have its bandwidth capped."}))),Qv=({throttlingField:e,limit:t})=>i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.throttling_exceeded.message",defaultMessage:"You have exceeded the { throttlingField } limit for Synthetic Nodes. The { throttlingField } value can't be larger than { limit }Mbps.",values:{throttlingField:e,limit:t}}),Zv=()=>i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})),ex=({readOnly:e,onFieldBlur:t,throttling:a,validate:n,handleInputChange:r,throttlingValue:s})=>{var o;const l=Number(He.e[He.b.UPLOAD]),c=Number(s.upload)>l;return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:tx,labelAppend:i.a.createElement(Zv,null),isInvalid:!!n&&!(null==n||null===(o=n[He.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,a))||c,error:c?i.a.createElement(Qv,{throttlingField:"upload",limit:l}):ax},i.a.createElement(w.EuiFieldNumber,{fullWidth:!0,min:0,step:.001,value:s.upload,onChange:e=>r(e.target.value),onBlur:()=>null==t?void 0:t("upload"),"data-test-subj":"syntheticsBrowserUploadSpeed",append:i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("strong",null,"Mbps")),readOnly:e}))},tx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.upload.label",{defaultMessage:"Upload Speed"}),ax=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.upload.error",{defaultMessage:"Upload speed must be greater than zero."}),nx=({handleInputChange:e,readOnly:t,onFieldBlur:a,validate:n,throttling:r,throttlingValue:s})=>{var o;const l=Number(He.e[He.b.DOWNLOAD]),c=Number(s.download)>l;return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:ix,labelAppend:i.a.createElement(Zv,null),isInvalid:!!n&&!(null==n||null===(o=n[He.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,r))||c,error:c?i.a.createElement(Qv,{throttlingField:"download",limit:l}):rx},i.a.createElement(w.EuiFieldNumber,{fullWidth:!0,min:0,step:.001,value:s.download,onChange:t=>{e(t.target.value)},onBlur:()=>null==a?void 0:a("download"),"data-test-subj":"syntheticsBrowserDownloadSpeed",append:i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("strong",null,"Mbps")),readOnly:t}))},ix=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.download.label",{defaultMessage:"Download Speed"}),rx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.download.error",{defaultMessage:"Download speed must be greater than zero."}),sx=({throttling:e,readOnly:t,onFieldBlur:a,validate:n,handleInputChange:r,throttlingValue:s})=>{var o;return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:ox,labelAppend:i.a.createElement(Zv,null),isInvalid:!!n&&!(null==n||null===(o=n[He.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,e)),error:lx},i.a.createElement(w.EuiFieldNumber,{fullWidth:!0,min:0,value:s.latency,onChange:e=>r(e.target.value),onBlur:()=>null==a?void 0:a("latency"),"data-test-subj":"syntheticsBrowserLatency",append:i.a.createElement(w.EuiText,{size:"xs"},i.a.createElement("strong",null,"ms")),readOnly:t}))},ox=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.latency.label",{defaultMessage:"Latency"}),lx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.latency.error",{defaultMessage:"Latency must not be negative."}),cx=Object(n.memo)((({validate:e,onFieldBlur:t,setValue:a,readOnly:r=!1,throttling:s})=>{var o,l;const c=He.e[He.b.DOWNLOAD],u=He.e[He.b.UPLOAD],d=Object(n.useCallback)((({value:e,configKey:t})=>{a({...s,value:{...s.value,[t]:e},label:kl.c,id:kl.g.CUSTOM})}),[a,s]),m=Number(null===(o=s.value)||void 0===o?void 0:o.download)>c,p=Number(null===(l=s.value)||void 0===l?void 0:l.upload)>u,f=s.id!==kl.g.NO_THROTTLING,g=f&&(m||p);return f&&s.value?i.a.createElement("div",null,g&&i.a.createElement(Jv,null),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(nx,{validate:e,onFieldBlur:t,throttling:s,throttlingValue:s.value,handleInputChange:e=>{d({value:e,configKey:"download"})},readOnly:r}),i.a.createElement(ex,{throttlingValue:s.value,validate:e,onFieldBlur:t,throttling:s,handleInputChange:e=>{d({value:e,configKey:"upload"})},readOnly:r}),i.a.createElement(sx,{throttlingValue:s.value,validate:e,onFieldBlur:t,throttling:s,handleInputChange:e=>{d({value:e,configKey:"latency"})},readOnly:r})):i.a.createElement(Xv,null)})),ux=e=>{const{value:t,initialValue:a}=e,r=void 0===kl.e[null==t?void 0:t.id],s=(null==t?void 0:t.id)===kl.g.NO_THROTTLING,o=(e=>Object(n.useMemo)((()=>[...dx,{value:Kv.f.CUSTOM,inputDisplay:i.a.createElement(Yv,{id:"custom",throttling:(null==e?void 0:e.id)===Kv.f.CUSTOM?e:void 0}),"data-test-subj":"syntheticsThrottlingSelectCustom"}]),[e]))(a),l=Object(T.useUiSetting)(Wv.syntheticsThrottlingEnabled),c=e.readOnly||!l;return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSuperSelect,{"data-test-subj":"syntheticsThrottlingSelect",options:o,onChange:t=>{t===kl.g.CUSTOM?e.onChange({...kl.e[kl.g.DEFAULT],id:kl.g.CUSTOM,label:kl.c}):e.onChange({...kl.e[kl.g.DEFAULT],...kl.e[t]})},defaultValue:kl.g.DEFAULT,valueOfSelected:null==t?void 0:t.id,fullWidth:e.fullWidth,readOnly:c}),s&&i.a.createElement(Xv,null),r&&i.a.createElement(cx,{throttling:null==e?void 0:e.value,setValue:e.onChange,readOnly:c}))},dx=kl.f.map((({id:e})=>({value:e,inputDisplay:i.a.createElement(Yv,{throttling:kl.e[e],id:e}),"data-test-subj":`syntheticsThrottlingSelect-${e}`}))),mx=Ut()(w.EuiPanel).withConfig({displayName:"CodeEditorContainer",componentId:"sc-i9zn40-0"})(["padding:0;"]),px=({ariaLabel:e,id:t,languageId:a,onChange:n,value:r,placeholder:s,height:o="250px",readOnly:l})=>{const{elementRef:c,width:u}=$e(),d=ln()(u,500);return i.a.createElement(i.a.Fragment,null,i.a.createElement(mx,{panelRef:c,borderRadius:"none",hasShadow:!1,hasBorder:!0},i.a.createElement(fx,{id:`${t}-editor`,"aria-label":e,"data-test-subj":"codeEditorContainer"},i.a.createElement(T.CodeEditor,{languageId:a,width:null!=d?d:"100%",height:o,value:r,onChange:n,options:{renderValidationDecorations:r?"on":"off",readOnly:l},isCopyable:!0,allowFullScreen:!0,placeholder:s}))))},fx=A.euiStyled.div`
  & > .kibanaCodeEditor {
    z-index: 0;
  }
`,gx=e=>i.a.createElement(px,m()({languageId:Sl.g.JSON},e));function hx({onUpload:e}){const t=Object(n.useRef)(null),[a,r]=Object(n.useState)(null),s=Object(n.useRef)(null);return i.a.createElement(w.EuiFormRow,{isInvalid:Boolean(a),error:a,"aria-label":bx,fullWidth:!0},i.a.createElement(w.EuiFilePicker,{id:"syntheticsFleetScriptRecorderUploader","data-test-subj":"syntheticsFleetScriptRecorderUploader",ref:s,initialPromptText:Ex,onChange:a=>{if(a&&a.length){var n;if(a.length&&!a[0].type.includes("javascript"))return r(yx),void(null===(n=s.current)||void 0===n||n.removeFiles());t.current=new FileReader,t.current.onloadend=()=>(a=>{var n;const i=null==t||null===(n=t.current)||void 0===n?void 0:n.result;var o;if("step"!==(null==i?void 0:i.trim().slice(0,4)))return r(vx),void(null===(o=s.current)||void 0===o||o.removeFiles());e({scriptText:i,fileName:a}),r(null)})(a[0].name),t.current.readAsText(a[0])}else e({scriptText:"",fileName:""})},display:"large",fullWidth:!0}))}const bx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.fieldLabel",{defaultMessage:"Testing script"}),Ex=o.i18n.translate("xpack.synthetics.monitorConfig.uploader.label",{defaultMessage:"Select or drag and drop a .js file"}),yx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.invalidFileError",{defaultMessage:"Invalid file type. Please upload a .js file generated by the Elastic Synthetics Recorder."}),vx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.parsingError",{defaultMessage:"Error uploading file. Please upload a .js file generated by the Elastic Synthetics Recorder in inline script format."});function xx({onChange:e,script:t,fileName:a,isEditable:r}){const[s,o]=Object(n.useState)(!1),l=Object(n.useCallback)((({scriptText:t,fileName:a})=>{e({scriptText:t,fileName:a})}),[e]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),r&&t?i.a.createElement(w.EuiFormRow,{"aria-label":"Testing script",fullWidth:!0},i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("strong",null,a))):i.a.createElement(hx,{onUpload:l}),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsScriptRecorderFieldsShowScriptButton",onClick:()=>o(!0),iconType:"editorCodeBlock",iconSide:"right"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.recorder.showScriptLabel",defaultMessage:"Show script"}))),i.a.createElement(w.EuiFlexItem,{grow:!1},r&&i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsScriptRecorderFieldsRemoveScriptButton",onClick:()=>e({scriptText:"",fileName:""}),iconType:"trash",iconSide:"right",color:"danger"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.recorder.removeScriptLabel",defaultMessage:"Remove script"}))))),s&&i.a.createElement(w.EuiFlyout,{ownFocus:!0,onClose:()=>o(!1),"aria-labelledby":"syntheticsBrowserScriptBlockHeader",closeButtonProps:{"aria-label":kx}},i.a.createElement(w.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(w.EuiTitle,{size:"m"},i.a.createElement("span",{id:"syntheticsBrowserScriptBlockHeader"},a||Sx))),i.a.createElement("div",{style:{height:"100%"}},i.a.createElement(w.EuiCodeBlock,{language:"js",overflowHeight:"100%",fontSize:"m",isCopyable:!0},t))))}const Sx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.mockFileName",{defaultMessage:"test_script.js"}),kx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.closeButtonLabel",{defaultMessage:"Close script flyout"});var Mx;!function(e){e.INLINE="syntheticsBrowserInlineConfig",e.SCRIPT_RECORDER="syntheticsBrowserScriptRecorderConfig",e.ZIP="syntheticsBrowserZipURLConfig"}(Mx||(Mx={}));const wx=({onChange:e,onBlur:t,value:a,isEditFlow:r=!1})=>{const[s,l]=Object(n.useState)("inline"===a.type?Mx.INLINE:Mx.SCRIPT_RECORDER),[c,u]=Object(n.useState)(a);Object(n.useEffect)((()=>{e(c)}),[c,e]);const d=[{id:"syntheticsBrowserScriptRecorderConfig",name:r?i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorderEdit.label",defaultMessage:"Upload new script"}):i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorder.label",defaultMessage:"Upload script"}),"data-test-subj":"syntheticsSourceTab__scriptRecorder",content:i.a.createElement(xx,{onChange:({scriptText:e,fileName:t})=>{u((a=>({...a,script:e,type:"recorder",fileName:t})))},script:c.script,isEditable:r,fileName:c.fileName})},{id:"syntheticsBrowserInlineConfig",name:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.label",defaultMessage:"Script editor"}),"data-test-subj":"syntheticsSourceTab__inline",content:i.a.createElement(w.EuiFormRow,{helpText:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.helpText",defaultMessage:"Runs Synthetic test scripts that are defined inline."}),fullWidth:!0},i.a.createElement(px,{ariaLabel:o.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.ariaLabel",{defaultMessage:"JavaScript code editor"}),id:"javascript",languageId:Sl.g.JAVASCRIPT,onChange:e=>{u((t=>({...t,script:e}))),t(Sl.b.SOURCE_INLINE)},value:c.script,placeholder:o.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.placeholder",{defaultMessage:"// Paste your Playwright script here..."})}))}];return r&&d.reverse(),i.a.createElement(w.EuiTabbedContent,{tabs:d,initialSelectedTab:r?d.find((e=>e.id===Mx.INLINE)):d.find((e=>e.id===s)),autoFocus:"selected",onTabClick:e=>{e.id!==s&&u({script:"",type:e.id===Mx.INLINE?"inline":"recorder",fileName:""}),l(e.id)}})},Ox=({onChange:e,onBlur:t,selectedOptions:a,...r})=>{const[s,o]=Object(n.useState)(a.map((e=>({label:e,key:e})))),[l,c]=Object(n.useState)(!1),u=Object(n.useCallback)((t=>{o(t);const a=t.map((e=>e.label));e(a),c(!1)}),[e,o,c]),d=Object(n.useCallback)((t=>{const n=t.trim(),i={label:n};e([...a,n]),o([...s,i])}),[e,s,a,o]),p=Object(n.useCallback)((e=>{c(!!e&&!Tx(e))}),[c]);return i.a.createElement(w.EuiComboBox,m()({"data-test-subj":"syntheticsFleetComboBox",noSuggestions:!0,selectedOptions:s,onCreateOption:d,onChange:u,onBlur:()=>null==t?void 0:t(),onSearchChange:p,isInvalid:l},r))},Tx=e=>null!==e.match(/\S+/),Cx=({id:e,value:t,label:a,icon:n,onChange:r,name:s,isSelected:o,"data-test-subj":l})=>i.a.createElement(w.EuiKeyPadMenuItem,{checkable:"single",label:a,id:e,value:t,onChange:r,name:s,isSelected:o,"data-test-subj":l},i.a.createElement(w.EuiIcon,{type:n})),Ix=({options:e,value:t,name:a,onChange:n,ariaLegend:r,...s})=>{const l=e.find((e=>e.value===t));return i.a.createElement(i.a.Fragment,null,i.a.createElement(jx,{checkable:{ariaLegend:r}},e.map((e=>i.a.createElement(Cx,m()({},s,e,{name:a,onChange:n,isSelected:e.value===t,"data-test-subj":e["data-test-subj"],key:e.value}))))),i.a.createElement(w.EuiSpacer,null),l&&i.a.createElement(w.EuiPanel,{color:"primary"},i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("h4",null,l.descriptionTitle)),i.a.createElement(w.EuiText,{size:"s",color:"subdued"},i.a.createElement("span",null,`${l.description} `),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorTypeRadioGroupLearnMoreLink",href:l.link,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.learnMoreLink",{defaultMessage:"Learn more"}))),i.a.createElement(w.EuiSpacer,{size:"xs"})))};var jx=Ut()(w.EuiKeyPadMenu).withConfig({displayName:"_StyledEuiKeyPadMenu",componentId:"sc-yr2c61-0"})({width:"100%"});const _x=Ut()(w.EuiFormFieldset).withConfig({displayName:"StyledFieldset",componentId:"sc-butblz-0"})(["&&&{legend{width:calc(100% - 52px);margin-right:40px;}.euiFlexGroup{margin-left:0;}.euiFlexItem{margin-left:0;padding-left:12px;}}"]),Fx=Ut()(w.EuiFieldText).withConfig({displayName:"StyledField",componentId:"sc-butblz-1"})(["text-align:left;"]),Px=({addPairControlLabel:e,defaultPairs:t,onChange:a,onBlur:r,"data-test-subj":s,readOnly:l,keyLabel:c,valueLabel:u})=>{const[d,m]=Object(n.useState)(t),p=Object(n.useCallback)(((e,t,a)=>{const n=e.target.value;m((e=>{const i=[...e],[r,s]=e[t];return i[t]=a?[n,s]:[r,n],i}))}),[m]),f=Object(n.useCallback)((()=>{m((e=>[["",""],...e]))}),[m]),g=Object(n.useCallback)((e=>{m((t=>{const a=[...t];return a.splice(e,1),[...a]}))}),[m]);return Object(n.useEffect)((()=>{a(d)}),[a,d]),i.a.createElement("div",{"data-test-subj":s},i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(w.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{iconType:"plus",onClick:f,"data-test-subj":`${s}__button`,isDisabled:l},e))),i.a.createElement(w.EuiSpacer,{size:"s"}),i.a.createElement(_x,{legend:d.length?{children:i.a.createElement(w.EuiFlexGroup,{responsive:!1},i.a.createElement(w.EuiFlexItem,null,c||i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.key.label",defaultMessage:"Key"})),i.a.createElement(w.EuiFlexItem,null,u||i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.value.label",defaultMessage:"Value"})))}:void 0},d.map(((e,t)=>{const[a,s]=e;return i.a.createElement(n.Fragment,{key:t},i.a.createElement(w.EuiSpacer,{size:"xs"}),i.a.createElement(w.EuiFormControlLayoutDelimited,{fullWidth:!0,append:i.a.createElement(w.EuiFormLabel,null,i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsKeyValuePairsFieldButton",iconType:"trash","aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.deleteItem.label",{defaultMessage:"Delete item number {index}, {key}:{value}",values:{index:t+1,key:a,value:s}}),onClick:()=>g(t),isDisabled:l})),startControl:i.a.createElement(Fx,{"aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.key.ariaLabel",{defaultMessage:"Key"}),"data-test-subj":`keyValuePairsKey${t}`,value:a,onChange:e=>p(e,t,!0),onBlur:()=>null==r?void 0:r(),readOnly:l}),endControl:i.a.createElement(Fx,{"aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.value.ariaLabel",{defaultMessage:"Value"}),"data-test-subj":`keyValuePairsValue${t}`,value:s,onChange:e=>p(e,t,!1),onBlur:()=>null==r?void 0:r(),readOnly:l}),delimiter:":"}),i.a.createElement(w.EuiSpacer,{size:"xs"}))}))))},Lx=({contentMode:e,defaultValue:t,onChange:a,onBlur:r,"data-test-subj":s,readOnly:o})=>{const l=[...Object.keys(t).filter(Rx(t,Dx,e)).map((e=>[e||"",t[e]||""]))],[c,u]=Object(n.useState)(l);return Object(n.useEffect)((()=>{const t=c.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});a(e?{"Content-Type":Dx[e],...t}:t)}),[e,c,a]),i.a.createElement(Px,{addPairControlLabel:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.headerField.addHeader.label",defaultMessage:"Add header"}),defaultPairs:c,onChange:u,onBlur:()=>null==r?void 0:r(),"data-test-subj":s,readOnly:o})},Rx=(e,t,a)=>n=>"Content-Type"!==n||"Content-Type"===n&&a&&e[n]!==t[a],Dx={[Sl.a.JSON]:Sl.c.JSON,[Sl.a.PLAINTEXT]:Sl.c.TEXT,[Sl.a.XML]:Sl.c.XML,[Sl.a.FORM]:Sl.c.FORM};var Ax;!function(e){e.CODE="code",e.FORM="form"}(Ax||(Ax={}));const Nx=({onChange:e,onBlur:t,value:{type:a,value:r},readOnly:s})=>{const[l,c]=Object(n.useState)({[Ax.FORM]:a===Sl.a.FORM?r:"",[Ax.CODE]:a!==Sl.a.FORM?r:""});Object(n.useEffect)((()=>{e({type:a,value:a===Sl.a.FORM?l[Ax.FORM]:l[Ax.CODE]})}),[e,a,l]);const u=Object(n.useCallback)((t=>{e({type:t,value:t===Sl.a.FORM?l[Ax.FORM]:l[Ax.CODE]})}),[e,l]),d=Object(n.useCallback)((e=>{const t=e.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});return c((e=>({...e,[Sl.a.FORM]:Object(J.stringify)(t)})))}),[c]),m=Object(n.useMemo)((()=>{const e=Object(J.parse)(l[Sl.a.FORM]);return Object.keys(e).map((t=>[t,`${e[t]}`]))}),[l]),p=[{id:Sl.a.PLAINTEXT,name:Bx[Sl.a.PLAINTEXT],"data-test-subj":`syntheticsRequestBodyTab__${Sl.a.PLAINTEXT}`,content:i.a.createElement(px,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.text.ariaLabel",{defaultMessage:"Text code editor"}),id:Sl.a.PLAINTEXT,languageId:Sl.g.PLAINTEXT,onChange:e=>{c((t=>({...t,[Ax.CODE]:e}))),null==t||t()},value:l[Ax.CODE],readOnly:s})},{id:Sl.a.JSON,name:Bx[Sl.a.JSON],"data-test-subj":`syntheticsRequestBodyTab__${Sl.a.JSON}`,content:i.a.createElement(px,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.json.ariaLabel",{defaultMessage:"JSON code editor"}),id:Sl.a.JSON,languageId:Sl.g.JSON,onChange:e=>{c((t=>({...t,[Ax.CODE]:e}))),null==t||t()},value:l[Ax.CODE],readOnly:s})},{id:Sl.a.XML,name:Bx[Sl.a.XML],"data-test-subj":`syntheticsRequestBodyTab__${Sl.a.XML}`,content:i.a.createElement(px,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.xml.ariaLabel",{defaultMessage:"XML code editor"}),id:Sl.a.XML,languageId:Sl.g.XML,onChange:e=>{c((t=>({...t,[Ax.CODE]:e}))),null==t||t()},value:l[Ax.CODE],readOnly:s})},{id:Sl.a.FORM,name:Bx[Sl.a.FORM],"data-test-subj":`syntheticsRequestBodyTab__${Sl.a.FORM}`,content:i.a.createElement(Px,{addPairControlLabel:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.formField.addFormField.label",defaultMessage:"Add form field"}),"data-test-subj":"syntheticsFormField",defaultPairs:m,onChange:d,onBlur:()=>null==t?void 0:t(),readOnly:s})}];return i.a.createElement(zx,{$_css:s?{cursor:"not-allowed"}:void 0},i.a.createElement(Hx,{tabs:p,initialSelectedTab:p.find((e=>e.id===a)),autoFocus:"selected",onTabClick:e=>{u(e.id)},$_css2:s?{pointerEvents:"none"}:void 0}))},Bx={[Sl.a.FORM]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.form",{defaultMessage:"Form"}),[Sl.a.PLAINTEXT]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.text",{defaultMessage:"Text"}),[Sl.a.JSON]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.JSON",{defaultMessage:"JSON"}),[Sl.a.XML]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.XML",{defaultMessage:"XML"})};var zx=Ut()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-zwt5fe-0"})(["",""],(e=>e.$_css)),Hx=Ut()(w.EuiTabbedContent).withConfig({displayName:"_StyledEuiTabbedContent",componentId:"sc-zwt5fe-1"})(["",""],(e=>e.$_css2));const Gx=({defaultValue:e,onChange:t,onBlur:a,readOnly:r})=>{const[s,l]=Object(n.useState)(e),[c,u]=Object(n.useState)(e!==Sl.i.NEVER);return Object(n.useEffect)((()=>{if(c){const e=s===Sl.i.NEVER?Sl.i.ON_ERROR:s;l(e),t(e)}else t(Sl.i.NEVER)}),[c,s,l,t]),Object(n.useEffect)((()=>{t(s)}),[t,s]),i.a.createElement(w.EuiFlexGroup,null,i.a.createElement(w.EuiFlexItem,{"data-test-subj":"syntheticsIndexResponseBody"},i.a.createElement(w.EuiCheckbox,{id:"uptimeFleetIndexResponseBody",checked:c,label:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseBody.label",defaultMessage:"Index response body"}),onChange:e=>{const t=e.target.checked;u(t)},onBlur:()=>null==a?void 0:a(),disabled:r})),c&&i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiSelect,{"aria-label":o.i18n.translate("xpack.synthetics.monitorConfig.indexResponseBodyPolicy.label",{defaultMessage:"Response body index policy"}),"data-test-subj":"indexResponseBodyFieldSelect",options:Vx,value:s,onChange:e=>{l(e.target.value)},onBlur:()=>null==a?void 0:a(),disabled:r})))},Vx=[{value:Sl.i.ON_ERROR,text:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.onError",{defaultMessage:"On error"})},{value:Sl.i.ALWAYS,text:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.always",{defaultMessage:"Always"})}],$x=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiFieldText,m()({"data-test-subj":"syntheticsFieldTextFieldText"},Object(k.omit)(e,["defaultValue","selectedOptions"]),{inputRef:t})))),Ux=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiTextArea,m()({"data-test-subj":"syntheticsTextAreaTextArea"},e,{inputRef:t})))),qx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiFieldNumber,m()({"data-test-subj":"syntheticsFieldNumberFieldNumber"},e,{inputRef:t})))),Wx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiFieldPassword,m()({},e,{inputRef:t})))),Kx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiCheckbox,Object(k.omit)(e,["defaultValue","fullWidth","isInvalid"])))),Yx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiSelect,m()({"data-test-subj":"syntheticsSelectSelect"},e,{inputRef:t})))),Xx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiSwitch,Object(k.omit)(e,["fullWidth","isInvalid"])))),Jx=i.a.forwardRef(((e,t)=>i.a.createElement(wx,e))),Qx=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiButtonGroup,Object(k.omit)(e,["isInvalid","fullWidth"])))),Zx=i.a.forwardRef(((e,t)=>i.a.createElement(Ox,e))),eS=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiComboBox,Object(k.omit)(e,["isServiceManaged"])))),tS=i.a.forwardRef(((e,t)=>i.a.createElement(gx,e))),aS=i.a.forwardRef(((e,t)=>i.a.createElement(Ix,e))),nS=i.a.forwardRef(((e,t)=>i.a.createElement(Lx,e))),iS=i.a.forwardRef(((e,t)=>i.a.createElement(Px,e))),rS=i.a.forwardRef(((e,t)=>i.a.createElement(Nx,e))),sS=i.a.forwardRef(((e,t)=>i.a.createElement(Gx,e))),oS=i.a.forwardRef(((e,t)=>i.a.createElement(ux,e)));var lS=a(8);const cS=(e="default")=>{const t=(e=>{const t=new RegExp(qv.INVALID_NAMESPACE_CHARACTERS,"g");return e.replace(t,"_")})(e);return{[Sl.d.MULTISTEP]:{...kl.d[Sl.h.BROWSER],"source.inline":{type:"recorder",script:"",fileName:""},[Sl.b.FORM_MONITOR_TYPE]:Sl.d.MULTISTEP,[Sl.b.NAMESPACE]:t},[Sl.d.SINGLE]:{...kl.d[Sl.h.BROWSER],[Sl.b.FORM_MONITOR_TYPE]:Sl.d.SINGLE,[Sl.b.NAMESPACE]:t},[Sl.d.HTTP]:{...kl.d[Sl.h.HTTP],isTLSEnabled:!1,[Sl.b.FORM_MONITOR_TYPE]:Sl.d.HTTP,[Sl.b.NAMESPACE]:t},[Sl.d.TCP]:{...kl.d[Sl.h.TCP],isTLSEnabled:!1,[Sl.b.FORM_MONITOR_TYPE]:Sl.d.TCP,[Sl.b.NAMESPACE]:t},[Sl.d.ICMP]:{...kl.d[Sl.h.ICMP],[Sl.b.FORM_MONITOR_TYPE]:Sl.d.ICMP,[Sl.b.NAMESPACE]:t}}},uS=e=>{var t,a,n,i;if(!e)return;let r=e[Sl.b.FORM_MONITOR_TYPE];const s=e[Sl.b.MONITOR_TYPE],o={...e};switch(r||(r=s===Sl.h.BROWSER?Sl.d.MULTISTEP:s,o[Sl.b.FORM_MONITOR_TYPE]=r),r){case Sl.d.MULTISTEP:const r=e;return{...o,"source.inline":{type:null!==(t=r[Sl.b.METADATA])&&void 0!==t&&null!==(a=t.script_source)&&void 0!==a&&a.is_generated_script?"recorder":"inline",script:r[Sl.b.SOURCE_INLINE],fileName:null===(n=r[Sl.b.METADATA])||void 0===n||null===(i=n.script_source)||void 0===i?void 0:i.file_name}};case Sl.d.SINGLE:case Sl.d.ICMP:return{...o};case Sl.d.HTTP:case Sl.d.TCP:return{...o,isTLSEnabled:e[Sl.b.METADATA].is_tls_enabled}}},dS=/^[0-9]*$/g,mS=/[^\:]+:[0-9]{1,5}$/g,pS=/^[0-9]+(.?[0]+)?$/,fS=/^[0-9]+(.?[0-9]+)?$/;function gS(e){return Object.keys(e).some((e=>!!e&&/[\s]/g.test(e)))}const hS=e=>{let t;try{if(t=JSON.parse(e),!t||"object"!=typeof t)return!1}catch(e){return!1}return!0},bS={[Sl.b.SCHEDULE]:({[Sl.b.SCHEDULE]:e})=>{const{number:t,unit:a}=e,n=parseFloat(t);return!n||!a||n<1},[Sl.b.TIMEOUT]:({[Sl.b.MONITOR_TYPE]:e,[Sl.b.TIMEOUT]:t,[Sl.b.SCHEDULE]:a})=>{const{number:n,unit:i}=a;return e!==Sl.h.BROWSER&&(!t||parseFloat(t)<0||(({scheduleNumber:e,scheduleUnit:t,timeout:a})=>{let n;switch(t){case Sl.j.SECONDS:n=parseFloat(e);break;case Sl.j.MINUTES:n=60*parseFloat(e);break;default:n=parseFloat(e)}return parseFloat(a)>n})({timeout:t,scheduleNumber:n,scheduleUnit:i}))}},ES={[Sl.b.RESPONSE_STATUS_CHECK]:({[Sl.b.RESPONSE_STATUS_CHECK]:e})=>{const t=e;return!!t.length&&t.some((e=>!`${e}`.match(dS)))},[Sl.b.RESPONSE_HEADERS_CHECK]:({[Sl.b.RESPONSE_HEADERS_CHECK]:e})=>gS(e),[Sl.b.REQUEST_HEADERS_CHECK]:({[Sl.b.REQUEST_HEADERS_CHECK]:e})=>gS(e),[Sl.b.MAX_REDIRECTS]:({[Sl.b.MAX_REDIRECTS]:e})=>!!e&&!`${e}`.match(dS)||parseFloat(e)<0,[Sl.b.URLS]:({[Sl.b.URLS]:e})=>!e,...bS},yS={[Sl.b.HOSTS]:({[Sl.b.HOSTS]:e})=>!e||!`${e}`.match(mS),...bS},vS={[Sl.b.HOSTS]:({[Sl.b.HOSTS]:e})=>!e,[Sl.b.WAIT]:({[Sl.b.WAIT]:e})=>!!e&&!dS.test(`${e}`)&&parseFloat(e)<0,...bS},xS=(e,t)=>{if(void 0===e||""===e)return!1;const a=parseFloat(e);return isNaN(a)||(t?a<0:a<=0)},SS={...bS,[Sl.b.SOURCE_INLINE]:({[Sl.b.SOURCE_INLINE]:e})=>!e,[Sl.b.THROTTLING_CONFIG]:({throttling:e})=>{if(!e||null===e.value)return!0;const{download:t,upload:a,latency:n}=e.value;return xS(String(t))||xS(String(a))||xS(String(n),!0)},[Sl.b.PLAYWRIGHT_OPTIONS]:({[Sl.b.PLAYWRIGHT_OPTIONS]:e})=>!!e&&!hS(e),[Sl.b.PARAMS]:({[Sl.b.PARAMS]:e})=>!!e&&!hS(e)},kS={[Sl.h.HTTP]:ES,[Sl.h.TCP]:yS,[Sl.h.ICMP]:vS,[Sl.h.BROWSER]:SS},MS=e=>e>60?o.i18n.translate("xpack.synthetics.monitorConfig.schedule.label",{defaultMessage:"Every {value, number} {value, plural, one {hour} other {hours}}",values:{value:e/60}}):o.i18n.translate("xpack.synthetics.monitorConfig.schedule.minutes.label",{defaultMessage:"Every {value, number} {value, plural, one {minute} other {minutes}}",values:{value:e}}),wS=kl.a.map((e=>({value:e,text:MS(parseInt(e,10))}))),OS={[Sl.d.MULTISTEP]:{id:"syntheticsMonitorTypeMultistep","data-test-subj":"syntheticsMonitorTypeMultistep",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.label",{defaultMessage:"Multistep"}),value:Sl.d.MULTISTEP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.title",{defaultMessage:"Multistep Browser Journey"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.description",{defaultMessage:"Navigate through multiple steps or pages to test key user flows from a real browser."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-journeys.html",icon:"videoPlayer",beta:!1},[Sl.d.SINGLE]:{id:"syntheticsMonitorTypeSingle","data-test-subj":"syntheticsMonitorTypeSingle",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.label",{defaultMessage:"Single Page"}),value:Sl.d.SINGLE,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.title",{defaultMessage:"Single Page Browser Test"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.description",{defaultMessage:"Test a single page load including all objects on the page from a real web browser."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-journeys.html",icon:"videoPlayer",beta:!1},[Sl.d.HTTP]:{id:"syntheticsMonitorTypeHTTP","data-test-subj":"syntheticsMonitorTypeHTTP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.label",{defaultMessage:"HTTP Ping"}),value:Sl.d.HTTP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.title",{defaultMessage:"HTTP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1},[Sl.d.TCP]:{id:"syntheticsMonitorTypeTCP","data-test-subj":"syntheticsMonitorTypeTCP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.label",{defaultMessage:"TCP Ping"}),value:Sl.d.TCP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.title",{defaultMessage:"TCP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1},[Sl.d.ICMP]:{id:"syntheticsMonitorTypeICMP","data-test-subj":"syntheticsMonitorTypeICMP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.label",{defaultMessage:"ICMP Ping"}),value:Sl.d.ICMP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.title",{defaultMessage:"ICMP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1}},TS=e=>{var t,a,n;return{[Sl.b.FORM_MONITOR_TYPE]:{fieldKey:Sl.b.FORM_MONITOR_TYPE,required:!0,component:aS,ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"}),controlled:!0,props:({field:e,reset:t,space:a})=>({onChange:(e,n)=>{const i=cS(a)[n];t(i)},selectedOption:null==e?void 0:e.value,options:Object.values(OS)}),validation:()=>({required:!0})},urls__single:{fieldKey:Sl.b.URLS,required:!0,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.label",{defaultMessage:"Website URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.helpText",{defaultMessage:"For example, https://www.elastic.co."}),controlled:!0,dependencies:[Sl.b.NAME],props:({setValue:t,dependenciesFieldMeta:a,isEdit:n,trigger:i})=>({"data-test-subj":"syntheticsMonitorConfigURL",onChange:async e=>{t(Sl.b.URLS,e.target.value,{shouldTouch:!0}),a[Sl.b.NAME].isDirty||n||t(Sl.b.NAME,e.target.value,{shouldTouch:!0}),await i()},readOnly:e})},urls__http:{fieldKey:Sl.b.URLS,required:!0,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.urls.label",{defaultMessage:"URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.urls.helpText",{defaultMessage:"For example, your service endpoint."}),controlled:!0,dependencies:[Sl.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:i})=>({onChange:async e=>{t(Sl.b.URLS,e.target.value,{shouldTouch:!0}),n[Sl.b.NAME].isDirty||i||(t(Sl.b.NAME,e.target.value,{shouldTouch:!0}),await a())},"data-test-subj":"syntheticsMonitorConfigURL",readOnly:e})},hosts__tcp:{fieldKey:Sl.b.HOSTS,required:!0,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.hostsTCP.label",{defaultMessage:"Host:Port"}),controlled:!0,dependencies:[Sl.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:i})=>({onChange:async e=>{t(Sl.b.HOSTS,e.target.value,{shouldTouch:!0}),n[Sl.b.NAME].isDirty||i||t(Sl.b.NAME,e.target.value,{shouldTouch:!0}),await a()},"data-test-subj":"syntheticsMonitorConfigHost",readOnly:e})},hosts__icmp:{fieldKey:Sl.b.HOSTS,required:!0,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.hostsICMP.label",{defaultMessage:"Host"}),controlled:!0,dependencies:[Sl.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:i})=>({onChange:async e=>{t(Sl.b.HOSTS,e.target.value,{shouldTouch:!0}),n[Sl.b.NAME].isDirty||i||t(Sl.b.NAME,e.target.value,{shouldTouch:!0}),await a()},"data-test-subj":"syntheticsMonitorConfigHost",readOnly:e})},[Sl.b.NAME]:{fieldKey:Sl.b.NAME,required:!0,component:$x,controlled:!0,label:o.i18n.translate("xpack.synthetics.monitorConfig.name.label",{defaultMessage:"Monitor name"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.name.helpText",{defaultMessage:"Choose a name to help identify this monitor in the future."}),dependencies:[Sl.b.URLS,Sl.b.HOSTS],customHook:e=>({fieldKey:"nameAlreadyExists",func:Zd,params:{search:e},error:o.i18n.translate("xpack.synthetics.monitorConfig.name.existsError",{defaultMessage:"Monitor name already exists"})}),validation:()=>({validate:{notEmpty:e=>!!Boolean(e.trim())||o.i18n.translate("xpack.synthetics.monitorConfig.name.error",{defaultMessage:"Monitor name is required"})}}),error:o.i18n.translate("xpack.synthetics.monitorConfig.name.error",{defaultMessage:"Monitor name is required"}),props:()=>({"data-test-subj":"syntheticsMonitorConfigName",readOnly:e})},"schedule.number":{fieldKey:`${Sl.b.SCHEDULE}.number`,required:!0,component:Yx,label:o.i18n.translate("xpack.synthetics.monitorConfig.frequency.label",{defaultMessage:"Frequency"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.frequency.helpText",{defaultMessage:"How often do you want to run this test? Higher frequencies will increase your total cost."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigSchedule",options:wS,disabled:e})},[Sl.b.LOCATIONS]:{fieldKey:Sl.b.LOCATIONS,required:!0,controlled:!0,component:eS,label:o.i18n.translate("xpack.synthetics.monitorConfig.locations.label",{defaultMessage:"Locations"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.locations.helpText",{defaultMessage:"Where do you want to run this test from? Additional locations will increase your total cost."}),props:({field:t,setValue:a,locations:n,trigger:r})=>({options:Object.values(n).map((e=>({label:e.label,id:e.id,isServiceManaged:e.isServiceManaged||!1,isInvalid:e.isInvalid,disabled:e.isInvalid}))),selectedOptions:Object.values((null==t?void 0:t.value)||{}).map((e=>{var t,a;return{color:e.isInvalid||!n.some((t=>t.id===e.id))?"danger":e.isServiceManaged?"default":"primary",label:null!==(t=e.label||(null==n||null===(a=n.find((t=>e.id===t.id)))||void 0===a?void 0:a.label))&&void 0!==t?t:e.id,id:e.id||"",isServiceManaged:e.isServiceManaged||!1}})),"data-test-subj":"syntheticsMonitorConfigLocations",onChange:async e=>{const t=e.map((({id:e,label:t,isServiceManaged:a})=>({id:e,label:t,isServiceManaged:a})));a(Sl.b.LOCATIONS,t),await r(Sl.b.LOCATIONS)},isDisabled:e,renderOption:(e,t)=>i.a.createElement(w.EuiToolTip,{anchorProps:{style:{width:"100%"}},content:e.isInvalid?o.i18n.translate("xpack.synthetics.monitorConfig.locations.attachedPolicy",{defaultMessage:"The attached agent policy for this location has been deleted."}):""},i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiHighlight,{search:t},e.label)),e.isInvalid&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiBadge,{color:"danger"},o.i18n.translate("xpack.synthetics.monitorConfig.locations.invalid",{defaultMessage:"Invalid"}))),!e.isServiceManaged&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiBadge,{color:"primary"},o.i18n.translate("xpack.synthetics.monitorConfig.locations.private",{defaultMessage:"Private"})))))})},[Sl.b.ENABLED]:{fieldKey:Sl.b.ENABLED,component:Xx,controlled:!0,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.edit.enabled.label",{defaultMessage:"When disabled, the monitor doesn't run any tests. You can enable it at any time."}),props:({setValue:t,field:a,trigger:n,formState:i})=>{var r;const s=(null===(r=i.defaultValues)||void 0===r?void 0:r[Sl.b.MONITOR_SOURCE_TYPE])===Sl.l.PROJECT;return{id:"syntheticsMontiorConfigIsEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.enabled.label",{defaultMessage:"Enable Monitor"}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(Sl.b.ENABLED,!!e.target.checked),await n(Sl.b.ENABLED)},"data-test-subj":"syntheticsEnableSwitch",disabled:!s&&e}}},[kl.b.STATUS_ENABLED]:{fieldKey:kl.b.STATUS_ENABLED,component:Xx,controlled:!0,props:({setValue:t,field:a,trigger:n,formState:i})=>{var r;const s=(null===(r=i.defaultValues)||void 0===r?void 0:r[Sl.b.MONITOR_SOURCE_TYPE])===Sl.l.PROJECT;return{id:"syntheticsMonitorConfigIsAlertEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.disabledAlerting.label",{defaultMessage:"Enable status alerts on this monitor"}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(kl.b.STATUS_ENABLED,!!e.target.checked),await n(kl.b.STATUS_ENABLED)},"data-test-subj":"syntheticsAlertStatusSwitch",disabled:!s&&e}}},[kl.b.TLS_ENABLED]:{fieldKey:kl.b.TLS_ENABLED,component:Xx,controlled:!0,props:({setValue:t,field:a,trigger:n,formState:i})=>{var r;const s=(null===(r=i.defaultValues)||void 0===r?void 0:r[Sl.b.MONITOR_SOURCE_TYPE])===Sl.l.PROJECT;return{id:"syntheticsMonitorConfigIsTlsAlertEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.create.alertTlsEnabled.label",{defaultMessage:"Enable TLS alerts on this monitor."}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(kl.b.TLS_ENABLED,!!e.target.checked),await n(kl.b.TLS_ENABLED)},"data-test-subj":"syntheticsAlertStatusSwitch",disabled:!s&&e}}},[Sl.b.TAGS]:{fieldKey:Sl.b.TAGS,component:Zx,label:o.i18n.translate("xpack.synthetics.monitorConfig.tags.label",{defaultMessage:"Tags"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.tags.helpText",{defaultMessage:"A list of tags that will be sent with each monitor event. Useful for searching and segmenting data."}),controlled:!0,props:({field:t})=>({selectedOptions:(null==t?void 0:t.value)||[],isDisabled:e})},[Sl.b.TIMEOUT]:{fieldKey:Sl.b.TIMEOUT,component:qx,label:o.i18n.translate("xpack.synthetics.monitorConfig.timeout.label",{defaultMessage:"Timeout in seconds"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.timeout.helpText",{defaultMessage:"The total time allowed for testing the connection and exchanging data."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigTimeout",min:1,step:"any",readOnly:e}),dependencies:[Sl.b.SCHEDULE],validation:([e])=>({validate:{validTimeout:t=>{switch(!0){case t<0:return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.greaterThan0Error",{defaultMessage:"Timeout must be greater than or equal to 0."});case t>60*parseFloat(e.number):return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.scheduleError",{defaultMessage:"Timeout must be less than the monitor frequency."});case!Boolean(`${t}`.match(fS)):return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.formatError",{defaultMessage:"Timeout is invalid."});default:return!0}}}})},[Sl.b.APM_SERVICE_NAME]:{fieldKey:Sl.b.APM_SERVICE_NAME,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.label",{defaultMessage:"APM service name"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.helpText",{defaultMessage:"Corresponds to the service.name ECS field from APM. Set this to enable integrations between APM and Synthetics data."}),controlled:!0,props:()=>({"data-test-subj":"syntheticsMonitorConfigAPMServiceName",readOnly:e})},[Sl.b.NAMESPACE]:{fieldKey:Sl.b.NAMESPACE,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.namespace.label",{defaultMessage:"Data stream namespace"}),helpText:i.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.namespace.helpText",{defaultMessage:"Change the default namespace. This setting changes the name of the monitor's data stream. "}),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsFIELDLearnMoreLink",href:"https://www.elastic.co/guide/en/fleet/current/data-streams.html",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.namespace.learnMore",{defaultMessage:"Learn more"}))),controlled:!0,props:()=>({readOnly:e}),validation:()=>({validate:{validNamespace:e=>Object(qv.isValidNamespace)(e).error}})},[Sl.b.MAX_REDIRECTS]:{fieldKey:Sl.b.MAX_REDIRECTS,component:qx,label:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.label",{defaultMessage:"Max redirects"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.helpText",{defaultMessage:"The total number of redirects to follow."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigMaxRedirects",min:0,max:10,step:1,readOnly:e}),validation:()=>({min:0,max:10,pattern:pS}),error:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.error",{defaultMessage:"Max redirects is invalid."})},[Sl.b.WAIT]:{fieldKey:Sl.b.WAIT,component:qx,label:o.i18n.translate("xpack.synthetics.monitorConfig.wait.label",{defaultMessage:"Wait"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.wait.helpText",{defaultMessage:"The duration to wait before emitting another ICMP Echo Request if no response is received."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigWait",min:1,step:1,readOnly:e}),validation:()=>({min:1,pattern:pS}),error:o.i18n.translate("xpack.synthetics.monitorConfig.wait.error",{defaultMessage:"Wait duration is invalid."})},[Sl.b.USERNAME]:{fieldKey:Sl.b.USERNAME,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.username.label",{defaultMessage:"Username"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.username.helpText",{defaultMessage:"Username for authenticating with the server."}),props:()=>({readOnly:e})},[Sl.b.PASSWORD]:{fieldKey:Sl.b.PASSWORD,component:Wx,label:o.i18n.translate("xpack.synthetics.monitorConfig.password.label",{defaultMessage:"Password"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.password.helpText",{defaultMessage:"Password for authenticating with the server."}),props:()=>({readOnly:e})},[Sl.b.PROXY_URL]:{fieldKey:Sl.b.PROXY_URL,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.label",{defaultMessage:"Proxy URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.helpText",{defaultMessage:"HTTP proxy URL"}),props:()=>({readOnly:e})},[Sl.b.REQUEST_METHOD_CHECK]:{fieldKey:Sl.b.REQUEST_METHOD_CHECK,component:Yx,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.label",{defaultMessage:"Request method"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.helpText",{defaultMessage:"The HTTP method to use."}),props:()=>({options:Object.keys(Sl.e).map((e=>({value:e,text:e}))),disabled:e})},[Sl.b.REQUEST_HEADERS_CHECK]:{fieldKey:Sl.b.REQUEST_HEADERS_CHECK,component:nS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.label",{defaultMessage:"Request headers"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.helpText",{defaultMessage:"A dictionary of additional HTTP headers to send. By default the client will set the User-Agent header to identify itself."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!gS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.error",{defaultMessage:"Header key must be a valid HTTP token."})}}),dependencies:[Sl.b.REQUEST_BODY_CHECK],error:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.error",{defaultMessage:"Header key must be a valid HTTP token."}),props:({dependencies:t})=>{const[a]=t;return{"data-test-subj":"syntheticsHeaderFieldRequestHeaders",readOnly:e,contentMode:a.type}}},[Sl.b.REQUEST_BODY_CHECK]:{fieldKey:Sl.b.REQUEST_BODY_CHECK,component:rS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestBody.label",{defaultMessage:"Request body"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestBody.helpText",{defaultMessage:"Request body content."}),controlled:!0,props:()=>({readOnly:e})},[Sl.b.RESPONSE_HEADERS_INDEX]:{fieldKey:Sl.b.RESPONSE_HEADERS_INDEX,component:Kx,helpText:i.a.createElement(i.a.Fragment,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseHeaders.helpText",defaultMessage:"Controls the indexing of the HTTP response headers to "}),i.a.createElement(w.EuiCode,null,"http.response.body.headers")),props:()=>({label:o.i18n.translate("xpack.synthetics.monitorConfig.indexResponseHeaders.label",{defaultMessage:"Index response headers"}),id:"syntheticsMonitorConfigResponseHeadersIndex",disabled:e}),controlled:!0},[Sl.b.RESPONSE_BODY_INDEX]:{fieldKey:Sl.b.RESPONSE_BODY_INDEX,component:sS,helpText:i.a.createElement(i.a.Fragment,null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseBody.helpText",defaultMessage:"Controls the indexing of the HTTP response body contents to"}),i.a.createElement(w.EuiCode,null,"http.response.body.contents")),props:()=>({readOnly:e}),controlled:!0},[Sl.b.RESPONSE_STATUS_CHECK]:{fieldKey:Sl.b.RESPONSE_STATUS_CHECK,component:Zx,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.label",{defaultMessage:"Response status equals"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.helpText",{defaultMessage:"A list of expected status codes. Press enter to add a new code. 4xx and 5xx codes are considered down by default. Other codes are considered up."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e}),validation:()=>({validate:{validResponseStatusCheck:e=>{const t=kS[Sl.h.HTTP][Sl.b.RESPONSE_STATUS_CHECK];if(t)return!t({[Sl.b.RESPONSE_STATUS_CHECK]:e})}}}),error:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.error",{defaultMessage:"Status code must contain digits only."})},[Sl.b.RESPONSE_HEADERS_CHECK]:{fieldKey:Sl.b.RESPONSE_HEADERS_CHECK,component:nS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.label",{defaultMessage:"Response headers contain"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.helpText",{defaultMessage:"A list of expected response headers."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!gS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.error",{defaultMessage:"Header key must be a valid HTTP token."})}}),props:()=>({"data-test-subj":"syntheticsHeaderFieldResponseHeaders",readOnly:e})},[Sl.b.RESPONSE_BODY_CHECK_POSITIVE]:{fieldKey:Sl.b.RESPONSE_BODY_CHECK_POSITIVE,component:Zx,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.label",{defaultMessage:"Response body contains"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.helpText",{defaultMessage:"A list of regular expressions to match the body output. Press enter to add a new expression. Only a single expression needs to match."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e})},[Sl.b.RESPONSE_BODY_CHECK_NEGATIVE]:{fieldKey:Sl.b.RESPONSE_BODY_CHECK_NEGATIVE,component:Zx,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.label",{defaultMessage:"Response body does not contain"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.helpText",{defaultMessage:"A list of regular expressions to match the the body output negatively. Press enter to add a new expression. Return match failed if single expression matches."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e})},[Sl.b.RESPONSE_RECEIVE_CHECK]:{fieldKey:Sl.b.RESPONSE_RECEIVE_CHECK,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.label",{defaultMessage:"Response contains"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.helpText",{defaultMessage:"The expected remote host response."}),props:()=>({readOnly:e})},proxy_url__tcp:{fieldKey:Sl.b.PROXY_URL,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.label",{defaultMessage:"Proxy URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.helpText",{defaultMessage:"The URL of the SOCKS5 proxy to use when connecting to the server. The value must be a URL with a scheme of socks5://."}),props:()=>({readOnly:e})},[Sl.b.REQUEST_SEND_CHECK]:{fieldKey:Sl.b.REQUEST_SEND_CHECK,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.label",{defaultMessage:"Request payload"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.helpText",{defaultMessage:"A payload string to send to the remote host."}),props:()=>({readOnly:e})},"source.inline":{fieldKey:"source.inline",required:!0,component:Jx,ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.label",{defaultMessage:"Monitor script"}),controlled:!0,props:({isEdit:e})=>({isEditFlow:e}),validation:()=>({validate:{validScript:e=>{var t,a,n,i;return e.script?null!==(t=e.script)&&void 0!==t&&t.includes("import ")||null!==(a=e.script)&&void 0!==a&&a.includes("require(")||null!==(n=e.script)&&void 0!==n&&n.includes("journey(")?o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.invalid",{defaultMessage:"Monitor script is invalid. Inline scripts cannot be full journey scripts, they may only contain step definitions."}):!(e.script&&(null===(i=e.script)||void 0===i||!i.includes("step(")))||o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.invalid.oneStep",{defaultMessage:"Monitor script is invalid. Inline scripts must contain at least one step definition."}):o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.error",{defaultMessage:"Monitor script is required"})}}})},[Sl.b.PARAMS]:{fieldKey:Sl.b.PARAMS,label:o.i18n.translate("xpack.synthetics.monitorConfig.params.label",{defaultMessage:"Parameters"}),controlled:!0,component:tS,props:()=>({id:"syntheticsMonitorConfigParams",height:"100px",ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.paramsAria.label",{defaultMessage:"Monitor params code editor"}),readOnly:e}),helpText:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.params.helpText",defaultMessage:"Use JSON to define parameters that can be referenced in your script with {paramsValue}",values:{paramsValue:i.a.createElement(w.EuiCode,null,"params.value")}}),validation:()=>({validate:{validParams:e=>{const t=kS[Sl.h.BROWSER][Sl.b.PARAMS];return!t||!t({[Sl.b.PARAMS]:e})||o.i18n.translate("xpack.synthetics.monitorConfig.params.error",{defaultMessage:"Invalid JSON format"})}}})},isTLSEnabled:{fieldKey:"isTLSEnabled",component:Xx,controlled:!0,props:({setValue:t,field:a})=>({id:"syntheticsMontiorConfigIsTLSEnabledSwitch",label:o.i18n.translate("xpack.synthetics.monitorConfig.customTLS.label",{defaultMessage:"Use custom TLS configuration"}),checked:(null==a?void 0:a.value)||!1,onChange:e=>{t("isTLSEnabled",e.target.checked)},disabled:e})},[Sl.b.TLS_VERIFICATION_MODE]:{fieldKey:Sl.b.TLS_VERIFICATION_MODE,component:Yx,label:o.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.label",{defaultMessage:"Verification mode"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.helpText",{defaultMessage:"Verifies that the provided certificate is signed by a trusted authority (CA) and also verifies that the servers hostname (or IP address) matches the names identified within the certificate. If the Subject Alternative Name is empty, it returns an error."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({options:Object.values(Sl.n).map((e=>({value:e,text:e.toUpperCase()}))),disabled:e})},[Sl.b.TLS_VERSION]:{fieldKey:Sl.b.TLS_VERSION,component:eS,label:o.i18n.translate("xpack.synthetics.monitorConfig.tlsVersion.label",{defaultMessage:"Supported TLS protocols"}),controlled:!0,hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:({field:t,setValue:a,trigger:n})=>({options:Object.values(Sl.m).map((e=>({label:e}))),selectedOptions:Object.values((null==t?void 0:t.value)||[]).map((e=>({label:e}))),onChange:async e=>{a(Sl.b.TLS_VERSION,e.map((e=>e.label))),await n(Sl.b.TLS_VERSION)},isDisabled:e})},[Sl.b.TLS_CERTIFICATE_AUTHORITIES]:{fieldKey:Sl.b.TLS_CERTIFICATE_AUTHORITIES,component:Ux,label:o.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.label",{defaultMessage:"Certificate authorities"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.helpText",{defaultMessage:"PEM-formatted custom certificate authorities."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[Sl.b.TLS_CERTIFICATE]:{fieldKey:Sl.b.TLS_CERTIFICATE,component:Ux,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.label",{defaultMessage:"Client certificate"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.helpText",{defaultMessage:"PEM-formatted certificate for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[Sl.b.TLS_KEY]:{fieldKey:Sl.b.TLS_KEY,component:Ux,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientKey.label",{defaultMessage:"Client key"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientKey.helpText",{defaultMessage:"PEM-formatted certificate key for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[Sl.b.TLS_KEY_PASSPHRASE]:{fieldKey:Sl.b.TLS_KEY_PASSPHRASE,component:Wx,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.label",{defaultMessage:"Client key passphrase"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.helpText",{defaultMessage:"Certificate key passphrase for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[Sl.b.SCREENSHOTS]:{fieldKey:Sl.b.SCREENSHOTS,component:Qx,label:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.label",{defaultMessage:"Screenshot options"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.helpText",{defaultMessage:"Set this option to manage the screenshots captured by the synthetics agent."}),controlled:!0,props:({field:t,setValue:a})=>({idSelected:null==t?void 0:t.value,onChange:e=>a(Sl.b.SCREENSHOTS,e),options:Object.values(Sl.k).map((e=>({id:e,label:e.replace(/-/g," ")}))),legend:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.label",{defaultMessage:"Screenshot options"}),css:{textTransform:"capitalize"},isDisabled:e})},[Sl.b.TEXT_ASSERTION]:{fieldKey:Sl.b.TEXT_ASSERTION,component:$x,label:o.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.label",{defaultMessage:"Text assertion"}),required:!1,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.helpText",{defaultMessage:"Consider the page loaded when the specified text is rendered."}),validation:()=>({required:!1}),props:()=>({readOnly:e})},[Sl.b.THROTTLING_CONFIG]:{fieldKey:Sl.b.THROTTLING_CONFIG,component:oS,label:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.throttlingDisabled.label",defaultMessage:"Connection profile ( {icon} Important information about throttling: {link})",values:{icon:i.a.createElement(w.EuiIcon,{type:"alert",color:"warning",size:"s"}),link:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsFIELDNoticeLink",href:"https://github.com/elastic/synthetics/blob/main/docs/throttling.md",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.throttlingDisabled.link",{defaultMessage:"notice"}))}}),required:!0,controlled:!0,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.throttling.helpText",{defaultMessage:"Simulate network throttling (download, upload, latency)."}),props:({formState:t})=>{var a;return{options:dx,readOnly:e,disabled:!1,initialValue:null===(a=t.defaultValues)||void 0===a?void 0:a[Sl.b.THROTTLING_CONFIG]}},validation:()=>({required:!0})},[Sl.b.PLAYWRIGHT_OPTIONS]:{fieldKey:Sl.b.PLAYWRIGHT_OPTIONS,component:tS,label:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.label",{defaultMessage:"Playwright options"}),helpText:i.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.helpText",{defaultMessage:"Configure Playwright agent with custom options. "}),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsFIELDLearnMoreLink",href:null===(t=Object(lS.a)())||void 0===t||null===(a=t.links)||void 0===a||null===(n=a.observability)||void 0===n?void 0:n.syntheticsCommandReference,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.learnMore",{defaultMessage:"Learn more"}))),ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.codeEditor.json.ariaLabel",{defaultMessage:"Playwright options JSON code editor"}),controlled:!0,required:!1,props:()=>({ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.codeEditor.json.ariaLabel",{defaultMessage:"Playwright options JSON code editor"}),readOnly:e,id:"syntheticsPlaywrightOptionsJSONCodeEditor"}),validation:()=>({validate:{validPlaywrightOptions:e=>{const t=kS[Sl.h.BROWSER][Sl.b.PLAYWRIGHT_OPTIONS];return!t||!t({[Sl.b.PLAYWRIGHT_OPTIONS]:e})||o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.error",{defaultMessage:"Invalid JSON format"})}}})},[Sl.b.IGNORE_HTTPS_ERRORS]:{fieldKey:Sl.b.IGNORE_HTTPS_ERRORS,component:Xx,controlled:!0,helpText:i.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.ignoreHttpsErrors.helpText",{defaultMessage:"Turns off TLS/SSL validation in the synthetics browser. This is useful for testing sites that use self-signed certificates."})),props:({setValue:t})=>({id:"syntheticsMontiorConfigIgnoreHttpsErrors",label:o.i18n.translate("xpack.synthetics.monitorConfig.ignoreHttpsErrors.label",{defaultMessage:"Ignore HTTPS errors"}),onChange:e=>{t(Sl.b.IGNORE_HTTPS_ERRORS,!!e.target.checked)},disabled:e})},[Sl.b.SYNTHETICS_ARGS]:{fieldKey:Sl.b.SYNTHETICS_ARGS,component:eS,controlled:!0,label:o.i18n.translate("xpack.synthetics.monitorConfig.syntheticsArgs.label",{defaultMessage:"Synthetics args"}),helpText:i.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.syntheticsArgs.helpText",{defaultMessage:"Extra arguments to pass to the synthetics agent package. Takes a list of strings. This is useful in rare scenarios, and should not ordinarily need to be set."})),props:({setValue:t,field:a,trigger:n})=>({id:"syntheticsMontiorConfigSyntheticsArgs",selectedOptions:Object.values((null==a?void 0:a.value)||[]).map((e=>({label:e}))),onChange:async e=>{t(Sl.b.SYNTHETICS_ARGS,e.map((e=>e.label))),await n(Sl.b.SYNTHETICS_ARGS)},onCreateOption:e=>{t(Sl.b.SYNTHETICS_ARGS,[...(null==a?void 0:a.value)||[],e])},isDisabled:e})},[Sl.b.MODE]:{fieldKey:Sl.b.MODE,component:Yx,label:o.i18n.translate("xpack.synthetics.monitorConfig.mode.label",{defaultMessage:"Mode"}),helpText:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.syntheticsArgs.mode.helpText",defaultMessage:"If {any}, the monitor pings only one IP address for a hostname. If {all}, the monitor pings all resolvable IPs for a hostname. {all} is useful if you are using a DNS-load balancer and want to ping every IP address for the specified hostname.",values:{all:i.a.createElement(w.EuiCode,null,"all"),any:i.a.createElement(w.EuiCode,null,"any")}}),props:()=>({options:Object.values(Sl.f).map((e=>({value:e,text:e}))),disabled:e})},[Sl.b.RESPONSE_BODY_MAX_BYTES]:{fieldKey:Sl.b.RESPONSE_BODY_MAX_BYTES,component:qx,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyMaxBytes.label",{defaultMessage:"Response body max bytes"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyMaxBytes.helpText",{defaultMessage:"Controls the maximum size of the stored body contents."}),hidden:e=>{const[t]=e||[];return t===Sl.i.NEVER},props:()=>({"data-test-subj":"syntheticsMonitorConfigMaxBytes",min:1,step:"any",readOnly:e}),dependencies:[Sl.b.RESPONSE_BODY_INDEX]},[Sl.b.IPV4]:{fieldKey:Sl.b.IPV4,component:eS,label:o.i18n.translate("xpack.synthetics.monitorConfig.ipv4.label",{defaultMessage:"IP protocols"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.ipv4.helpText",{defaultMessage:"IP protocols to use when pinging the remote host."}),controlled:!0,dependencies:[Sl.b.IPV6],props:({field:t,setValue:a,trigger:n,dependencies:i})=>{const[r]=i,s=[];return(null==t?void 0:t.value)&&s.push("IPv4"),r&&s.push("IPv6"),{options:[{label:"IPv4"},{label:"IPv6"}],selectedOptions:s.map((e=>({label:e}))),onChange:async e=>{a(Sl.b.IPV4,e.some((e=>"IPv4"===e.label))),a(Sl.b.IPV6,e.some((e=>"IPv6"===e.label))),await n([Sl.b.IPV4,Sl.b.IPV4])},isDisabled:e}}},[Sl.b.PROXY_HEADERS]:{fieldKey:Sl.b.PROXY_HEADERS,component:nS,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.label",{defaultMessage:"Proxy headers"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.helpText",{defaultMessage:"Additional headers to send to proxies for CONNECT requests."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!gS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.error",{defaultMessage:"The header key must be a valid HTTP token."})}}),props:()=>({"data-test-subj":"syntheticsHeaderFieldProxyHeaders",readOnly:e})},"check.response.json":{fieldKey:Sl.b.RESPONSE_JSON_CHECK,component:iS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.label",{defaultMessage:"Response body contains JSON"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.helpText",{defaultMessage:"A list of expressions executed against the body when parsed as JSON. The body size must be less than or equal to 100 MiB."}),controlled:!0,props:({field:t,setValue:a,trigger:n})=>({readOnly:e,keyLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.key.label",{defaultMessage:"Description"}),valueLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.value.label",{defaultMessage:"Expression"}),addPairControlLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.addPair.label",{defaultMessage:"Add expression"}),onChange:async e=>{const i=e.map((e=>{const[t,a]=e;return{description:t,expression:a}})).filter((e=>e.description||e.expression));Object(k.isEqual)(i,null==t?void 0:t.value)||(a(Sl.b.RESPONSE_JSON_CHECK,i),await n(Sl.b.RESPONSE_JSON_CHECK))},defaultPairs:(null==t?void 0:t.value.map((e=>[e.description,e.expression])))||[]}),validation:()=>({validate:{validBodyJSON:e=>!e.some((e=>!e.expression||!e.description))||o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.error",{defaultMessage:"This JSON expression isn't valid. Make sure that both the label and expression are defined."})}})},[Sl.b.MAX_ATTEMPTS]:{fieldKey:Sl.b.MAX_ATTEMPTS,component:Xx,controlled:!0,props:({setValue:t,field:a,trigger:n})=>({disabled:e,id:"syntheticsMonitorConfigMaxAttempts",label:o.i18n.translate("xpack.synthetics.monitorConfig.retest.label",{defaultMessage:"Enable retest on failure"}),checked:2===(null==a?void 0:a.value),onChange:async e=>{const a=!!e.target.checked;t(Sl.b.MAX_ATTEMPTS,a?2:1),await n(Sl.b.MAX_ATTEMPTS)},"data-test-subj":"syntheticsEnableAttemptSwitch"})}}},CS=e=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.title",{defaultMessage:"Data options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.description",{defaultMessage:"Configure data options to add context to the data coming from your monitors."}),components:[TS(e)[Sl.b.TAGS],TS(e)[Sl.b.APM_SERVICE_NAME],TS(e)[Sl.b.NAMESPACE]]}),IS=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.description",{defaultMessage:"Configure an optional request to send to the remote host including method, body, and headers."}),components:[TS(e)[Sl.b.USERNAME],TS(e)[Sl.b.PASSWORD],TS(e)[Sl.b.REQUEST_METHOD_CHECK],TS(e)[Sl.b.REQUEST_HEADERS_CHECK],TS(e)[Sl.b.REQUEST_BODY_CHECK],TS(e)[Sl.b.PROXY_URL],TS(e)[Sl.b.PROXY_HEADERS],TS(e)[Sl.b.MODE],TS(e)[Sl.b.IPV4]]},responseConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.title",{defaultMessage:"Response configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.description",{defaultMessage:"Control the indexing of the HTTP response contents."}),components:[TS(e)[Sl.b.RESPONSE_HEADERS_INDEX],TS(e)[Sl.b.RESPONSE_BODY_INDEX],TS(e)[Sl.b.RESPONSE_BODY_MAX_BYTES]]},responseChecks:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.title",{defaultMessage:"Response checks"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.description",{defaultMessage:"Configure the expected HTTP response."}),components:[TS(e)[Sl.b.RESPONSE_STATUS_CHECK],TS(e)[Sl.b.RESPONSE_HEADERS_CHECK],TS(e)[Sl.b.RESPONSE_BODY_CHECK_POSITIVE],TS(e)[Sl.b.RESPONSE_BODY_CHECK_NEGATIVE],TS(e)[Sl.b.RESPONSE_JSON_CHECK]]}}),jS=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.description",{defaultMessage:"Configure the payload sent to the remote host."}),components:[TS(e)[`${Sl.b.PROXY_URL}__tcp`],TS(e)[Sl.b.REQUEST_SEND_CHECK],TS(e)[Sl.b.MODE],TS(e)[Sl.b.IPV4]]},responseChecks:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.title",{defaultMessage:"Response checks"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.description",{defaultMessage:"Configure the expected response from the remote host."}),components:[TS(e)[Sl.b.RESPONSE_RECEIVE_CHECK]]}}),_S=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigICMP.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigICMP.description",{defaultMessage:"Configure the payload sent to the remote host."}),components:[TS(e)[Sl.b.MODE],TS(e)[Sl.b.IPV4]]}}),FS=e=>[{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.title",{defaultMessage:"Synthetics agent options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.description",{defaultMessage:"Provide fine-tuned configuration for the synthetics agent."}),components:[TS(e)[Sl.b.THROTTLING_CONFIG],TS(e)[Sl.b.IGNORE_HTTPS_ERRORS],TS(e)[Sl.b.SYNTHETICS_ARGS],TS(e)[Sl.b.PLAYWRIGHT_OPTIONS]]}],PS=e=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.title",{defaultMessage:"TLS options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.description",{defaultMessage:"Configure TLS options, including verification mode, certificate authorities, and client certificates."}),components:[TS(e).isTLSEnabled,TS(e)[Sl.b.TLS_VERIFICATION_MODE],TS(e)[Sl.b.TLS_VERSION],TS(e)[Sl.b.TLS_CERTIFICATE_AUTHORITIES],TS(e)[Sl.b.TLS_CERTIFICATE],TS(e)[Sl.b.TLS_KEY],TS(e)[Sl.b.TLS_KEY_PASSPHRASE]]}),LS=e=>({[Sl.d.HTTP]:{step1:[TS(e)[Sl.b.FORM_MONITOR_TYPE]],step2:[TS(e)[`${Sl.b.URLS}__http`],TS(e)[Sl.b.NAME],TS(e)[Sl.b.LOCATIONS],TS(e)[`${Sl.b.SCHEDULE}.number`],TS(e)[Sl.b.MAX_REDIRECTS],TS(e)[Sl.b.TIMEOUT],TS(e)[Sl.b.ENABLED],TS(e)[Sl.b.MAX_ATTEMPTS],TS(e)[kl.b.STATUS_ENABLED],TS(e)[kl.b.TLS_ENABLED]],advanced:[CS(e),IS(e).requestConfig,IS(e).responseConfig,IS(e).responseChecks,PS(e)]},[Sl.d.TCP]:{step1:[TS(e)[Sl.b.FORM_MONITOR_TYPE]],step2:[TS(e)[`${Sl.b.HOSTS}__tcp`],TS(e)[Sl.b.NAME],TS(e)[Sl.b.LOCATIONS],TS(e)[`${Sl.b.SCHEDULE}.number`],TS(e)[Sl.b.TIMEOUT],TS(e)[Sl.b.ENABLED],TS(e)[Sl.b.MAX_ATTEMPTS],TS(e)[kl.b.STATUS_ENABLED],TS(e)[kl.b.TLS_ENABLED]],advanced:[CS(e),jS(e).requestConfig,jS(e).responseChecks,PS(e)]},[Sl.d.MULTISTEP]:{step1:[TS(e)[Sl.b.FORM_MONITOR_TYPE]],step2:[TS(e)[Sl.b.NAME],TS(e)[Sl.b.LOCATIONS],TS(e)[`${Sl.b.SCHEDULE}.number`],TS(e)[Sl.b.ENABLED],TS(e)[Sl.b.MAX_ATTEMPTS],TS(e)[kl.b.STATUS_ENABLED]],step3:[TS(e)["source.inline"],TS(e)[Sl.b.PARAMS]],scriptEdit:[TS(e)["source.inline"],TS(e)[Sl.b.PARAMS]],advanced:[{...CS(e),components:[TS(e)[Sl.b.TAGS],TS(e)[Sl.b.APM_SERVICE_NAME],TS(e)[Sl.b.SCREENSHOTS],TS(e)[Sl.b.NAMESPACE]]},...FS(e)]},[Sl.d.SINGLE]:{step1:[TS(e)[Sl.b.FORM_MONITOR_TYPE]],step2:[TS(e)[`${Sl.b.URLS}__single`],TS(e)[Sl.b.NAME],TS(e)[Sl.b.TEXT_ASSERTION],TS(e)[Sl.b.LOCATIONS],TS(e)[`${Sl.b.SCHEDULE}.number`],TS(e)[Sl.b.ENABLED],TS(e)[Sl.b.MAX_ATTEMPTS],TS(e)[kl.b.STATUS_ENABLED]],advanced:[{...CS(e),components:[TS(e)[Sl.b.TAGS],TS(e)[Sl.b.APM_SERVICE_NAME],TS(e)[Sl.b.SCREENSHOTS],TS(e)[Sl.b.NAMESPACE]]},...FS(e)]},[Sl.d.ICMP]:{step1:[TS(e)[Sl.b.FORM_MONITOR_TYPE]],step2:[TS(e)[`${Sl.b.HOSTS}__icmp`],TS(e)[Sl.b.NAME],TS(e)[Sl.b.LOCATIONS],TS(e)[`${Sl.b.SCHEDULE}.number`],TS(e)[Sl.b.WAIT],TS(e)[Sl.b.TIMEOUT],TS(e)[Sl.b.ENABLED],TS(e)[Sl.b.MAX_ATTEMPTS],TS(e)[kl.b.STATUS_ENABLED]],advanced:[CS(e),_S(e).requestConfig]}}),RS=({component:e,props:t,fieldKey:a,field:r,formRowProps:s,error:o,dependenciesValues:l,dependenciesFieldMeta:c,isInvalid:d})=>{const{setValue:p,getFieldState:f,reset:g,formState:h,trigger:b}=Object(gn.useFormContext)(),{locations:E}=Object(u.useSelector)($.X),{space:y}=Pv(),v=_v(),[x,S]=Object(n.useState)(void 0);Object(H.useDebounce)((async()=>{void 0!==x&&await(null==b?void 0:b())}),500,[x]);const k=Object(n.useCallback)((async(...e)=>{"string"!=typeof(null==e?void 0:e[0])||f(a).isTouched||p(a,e[0],{shouldTouch:!0}),r.onChange(...e),S(e)}),[S]),M=t?t({field:r,setValue:p,trigger:b,reset:g,locations:E.map((e=>({...e,key:e.id}))),dependencies:l,dependenciesFieldMeta:c,space:null==y?void 0:y.id,isEdit:v,formState:h}):{};return i.a.createElement(w.EuiFormRow,m()({},s,{isInvalid:d,error:o}),i.a.createElement(e,m()({},r,{checked:r.value||!1,defaultValue:r.value,onChange:k},M,{isInvalid:d,fullWidth:!0})))},DS=Object(n.memo)((({component:e,helpText:t,label:a,ariaLabel:r,props:s,fieldKey:o,controlled:l,required:c,validation:d,error:p,fieldError:f,dependencies:g,customHook:h,hidden:b})=>{const{register:E,control:y,setValue:v,reset:x,formState:S,trigger:k}=Object(gn.useFormContext)(),{locations:M}=Object(u.useSelector)($.X),{space:O}=Pv(),T=_v(),{dependenciesValues:C,dependenciesFieldMeta:I,error:j,isInvalid:_,rules:F}=function({fieldKey:e,validation:t,validationError:a,required:i,dependencies:r,customHook:s}){var o,l,c,u,d;const{getValues:m,formState:p,getFieldState:f,watch:g}=Object(gn.useFormContext)(),h=f(e,p),b=m(e),E=h.error,y=h.isTouched,v=h.invalid,[x,S]=Object(n.useState)({});let k=[];r&&(k=g(r)),Object(n.useEffect)((()=>{r&&r.forEach((e=>{S((t=>({...t,[e]:f(e)})))}))}),[JSON.stringify(k||[]),r,f]);let M,w=()=>{};s&&(M=s(b),w=M.func);const{[null===(o=M)||void 0===o?void 0:o.fieldKey]:O}=w(null===(l=M)||void 0===l?void 0:l.params)||{},T=null===(c=M)||void 0===c?void 0:c.error,C=O?null===(u=M)||void 0===u?void 0:u.error:void 0,{validate:I,...j}=null!==(d=null==t?void 0:t(k))&&void 0!==d?d:{},_={validHook:()=>!C||T,...null!=I?I:{}},F=v&&(y||p.isSubmitted);return{dependenciesValues:k,dependenciesFieldMeta:x,isInvalid:F,error:F?(null==E?void 0:E.message)||a:void 0,rules:{required:i,...null!=j?j:{},validate:_}}}({fieldKey:o,validation:d,dependencies:g,required:null!=c&&c,customHook:h,validationError:p});if(b&&b(C))return null;const P={label:a,"aria-label":r,helpText:t,fullWidth:!0};return l?i.a.createElement(gn.Controller,{control:y,name:o,rules:F,render:({field:t,fieldState:a})=>i.a.createElement(RS,{field:t,component:e,props:s,fieldKey:o,formRowProps:P,fieldState:a,error:j,isInvalid:_,dependenciesValues:C,dependenciesFieldMeta:I})}):i.a.createElement(w.EuiFormRow,m()({},P,{isInvalid:Boolean(f),error:(null==f?void 0:f.message)||j}),i.a.createElement(e,m()({},E(o,F),s?s({field:void 0,formState:S,setValue:v,trigger:k,reset:x,locations:M.map((e=>({...e,key:e.id}))),dependencies:C,dependenciesFieldMeta:I,space:null==O?void 0:O.id,isEdit:T}):{},{isInvalid:_,fullWidth:!0})))})),AS=({readOnly:e})=>{var t;const{watch:a}=Object(gn.useFormContext)(),[r]=a([Sl.b.FORM_MONITOR_TYPE]),s=Object(n.useMemo)((()=>LS(e)[r]),[e,r]);return null!=s&&s.advanced?i.a.createElement(w.EuiPanel,{hasBorder:!0},i.a.createElement(w.EuiAccordion,{id:"syntheticsAdvancedPanel",buttonContent:o.i18n.translate("xpack.synthetics.monitorConfig.advancedOptions.title",{defaultMessage:"Advanced options"})},i.a.createElement(w.EuiSpacer,null),null===(t=s.advanced)||void 0===t?void 0:t.map((e=>i.a.createElement(NS,{description:e.description,title:i.a.createElement("h4",null,e.title),fullWidth:!0,key:e.title,descriptionFlexItemProps:{style:{minWidth:208}},fieldFlexItemProps:{style:{minWidth:208}},style:{flexWrap:"wrap"}},e.components.map((e=>i.a.createElement(DS,m()({},e,{key:e.fieldKey}))))))))):null},NS=Ut()(w.EuiDescribedFormGroup).withConfig({displayName:"DescribedFormGroup",componentId:"sc-1sktqrt-0"})(["> div.euiFlexGroup{flex-wrap:wrap;}"]),BS=({monitorType:e})=>{const t=OS[e];return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,{color:"subdued",size:"s"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"})),i.a.createElement(w.EuiText,{size:"s"},i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement("strong",null,t.descriptionTitle)),i.a.createElement(w.EuiFlexItem,{grow:!1},t.beta&&i.a.createElement(w.EuiBetaBadge,{label:"Beta",tooltipContent:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."})})))))},zS=({monitorType:e})=>i.a.createElement(ht,{node:Eb},i.a.createElement(BS,{monitorType:e})),HS=({projectId:e,canUsePublicLocations:t})=>e?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.project.readOnly.callout.title",defaultMessage:"This configuration is read-only"}),iconType:"document"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.project.readOnly.callout.content",defaultMessage:"This monitor was added from an external project: {projectId}. From this page, you can only enable and disable the monitor and its alerts, or remove it. To make configuration changes, you have to edit its source file and push it again from that project.",values:{projectId:i.a.createElement("strong",null,e)}}))),i.a.createElement(w.EuiSpacer,{size:"m"})):t?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiCallOut,{color:"warning",title:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.publicLocations.readOnly.callout.title",defaultMessage:"You do not have permission to use Elastic managed locations"}),iconType:"alert"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.publicLocations.readOnly.callout.content",defaultMessage:"This monitor contains a Elastic managed location. To edit this monitor, you need to have permission to use Elastic managed locations."}))),i.a.createElement(w.EuiSpacer,{size:"m"})),GS=({canUsePublicLocations:e,stepMap:t,projectId:a,isEditFlow:n=!1,readOnly:r=!1})=>{const{watch:s,formState:o}=Object(gn.useFormContext)(),[l]=s([Sl.b.FORM_MONITOR_TYPE]),c=t[l];return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(HS,{projectId:a,canUsePublicLocations:e}),n?c.map((e=>i.a.createElement("div",{key:e.title},i.a.createElement(w.EuiPanel,{hasBorder:!0},i.a.createElement(w.EuiText,{size:"s"},i.a.createElement("h2",null,e.title)),i.a.createElement(w.EuiSpacer,{size:"xs"}),e.children),i.a.createElement(w.EuiSpacer,{size:"m"})))):i.a.createElement(w.EuiSteps,{steps:c,headingElement:"h2"}),i.a.createElement(AS,{readOnly:r}),i.a.createElement(zS,{monitorType:l}),i.a.createElement(Uv,{isValid:o.isValid,monitorFields:Ml(s())}))},VS=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),$S=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage.subtext",{defaultMessage:"It will next run according to its defined schedule."}),US=o.i18n.translate("xpack.synthetics.monitorManagement.monitorEditedSuccessMessage",{defaultMessage:"Monitor updated successfully."}),qS=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),WS=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage.subtext",{defaultMessage:"It will next run according to its defined schedule."}),KS=({readOnly:e=!1,canUsePublicLocations:t=!0})=>{var a;const{monitorId:r}=Object(p.useParams)(),s=Object(p.useHistory)(),{handleSubmit:o,formState:{defaultValues:l,isValid:d}}=Object(gn.useFormContext)(),[m,f]=Object(n.useState)(null),[g,h]=Object(n.useState)(void 0),{status:b,loading:E,isEdit:y}=(({monitorData:e})=>{var t;const a=null===(t=Object(T.useKibana)().services.theme)||void 0===t?void 0:t.theme$,r=Object(u.useDispatch)(),{refreshApp:s}=K(),{monitorId:o}=Object(p.useParams)(),l=Object(p.useRouteMatch)({path:c.q}),d=null==l?void 0:l.isExact,{data:m,status:f,loading:g,error:h}=Object(N.useFetcher)((()=>{if(e)return d?(async({monitor:e,id:t})=>await vE.a.put(`${c.A.SYNTHETICS_MONITORS}/${t}`,e))({id:o,monitor:e}):(async({monitor:e})=>await vE.a.post(c.A.SYNTHETICS_MONITORS,e))({monitor:e})}),[e]);return Object(n.useEffect)((()=>{var e;f===N.FETCH_STATUS.FAILURE&&h?Gi.a.toasts.addError({...h,message:null!==(e=h.body.message)&&void 0!==e?e:h.message},{title:qS}):f!==N.FETCH_STATUS.SUCCESS||g||(s(),r(Object($.a)()),Gi.a.toasts.addSuccess({title:o?US:VS,text:Object(T.toMountPoint)(i.a.createElement("p",{"data-test-subj":"synthetcsMonitorSaveSubtext"},o?WS:$S),{theme$:a}),toastLifeTimeMs:3e3}))}),[m,f,o,g,s,r,a,h]),{status:f,loading:g,isEdit:d}})({monitorData:g}),v=qt();return b===N.FETCH_STATUS.SUCCESS?i.a.createElement(p.Redirect,{to:c.o}):i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiFlexGroup,{alignItems:"center",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!0},y&&l&&i.a.createElement("div",null,i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsActionBarButton",color:"danger",onClick:()=>{f(l)},isDisabled:!v||!t},JS))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsActionBarLink",href:s.createHref({pathname:c.o})},YS)),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Cl,{canUsePublicLocations:t})),i.a.createElement(ZS,{grow:!1},i.a.createElement(Mn,{canEditSynthetics:v,canUsePublicLocations:t},i.a.createElement(w.EuiButton,{fill:!0,isLoading:E,onClick:o((t=>{d&&h(Ol(t,e))})),"data-test-subj":"syntheticsMonitorConfigSubmitButton",disabled:!v||!t},y?QS:XS)))),m&&i.a.createElement(Md,{configId:r,name:null!==(a=null==l?void 0:l[Sl.b.NAME])&&void 0!==a?a:"",reloadPage:()=>{s.push(c.o)},setMonitorPendingDeletion:f,isProjectMonitor:(null==l?void 0:l[Sl.b.MONITOR_SOURCE_TYPE])===Sl.l.PROJECT}))},YS=o.i18n.translate("xpack.synthetics.monitorManagement.discardLabel",{defaultMessage:"Cancel"}),XS=o.i18n.translate("xpack.synthetics.monitorManagement.addEdit.createMonitorLabel",{defaultMessage:"Create monitor"}),JS=o.i18n.translate("xpack.synthetics.monitorManagement.addEdit.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),QS=o.i18n.translate("xpack.synthetics.monitorManagement.updateMonitorLabel",{defaultMessage:"Update monitor"});var ZS=Ut()(w.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-13hptk2-0"})({marginLeft:"auto"});const ek=()=>{const{watch:e}=Object(gn.useFormContext)(),[t]=e([Sl.b.LOCATIONS]);return t.find((e=>!0===e.isServiceManaged))?i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"l"}),i.a.createElement(w.EuiText,{size:"xs",color:"subdued"},i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.locations.disclaimer",{defaultMessage:"You consent to the transfer of testing instructions and the output of such instructions (including any data shown therein) to your selected testing location, on infrastructure provided by a cloud service provider chosen by Elastic."})))):null},tk=({children:e,defaultValues:t,space:a,readOnly:n=!1,canUsePublicLocations:r})=>{const s=RE({mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:uS(t)||cS(a)[Sl.d.MULTISTEP],shouldFocusError:!1}),{formState:{isSubmitted:o,errors:l,dirtyFields:c}}=s;return i.a.createElement(gn.FormProvider,s,i.a.createElement(w.EuiForm,{isInvalid:Boolean(o&&Object.keys(l).length),component:"form",noValidate:!0},e,i.a.createElement(w.EuiSpacer,null),i.a.createElement(KS,{readOnly:n,canUsePublicLocations:r})),i.a.createElement(ek,null))},ak=()=>i.a.createElement(w.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.locations.error.label",{defaultMessage:"Unable to load testing locations"})),body:i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.locations.error.content",{defaultMessage:"There was an error loading testing locations. Please try again later."}))}),nk=({description:e,children:t})=>i.a.createElement(w.EuiFlexGroup,{gutterSize:"s",wrap:!0},i.a.createElement(w.EuiFlexItem,{style:{minWidth:208}},i.a.createElement(w.EuiText,null,e)),i.a.createElement(w.EuiFlexItem,{style:{minWidth:208}},t)),ik=({description:e,stepKey:t,readOnly:a=!1,descriptionOnly:r=!1})=>{var s;const{watch:o,formState:{errors:l}}=Object(gn.useFormContext)(),[c]=o([Sl.b.FORM_MONITOR_TYPE]),u=Object(n.useMemo)((()=>LS(a)[c]),[a,c]);return r?i.a.createElement(w.EuiText,{size:"m"},e):i.a.createElement(nk,{description:e},null===(s=u[t])||void 0===s?void 0:s.map((e=>i.a.createElement(DS,m()({},e,{key:e.fieldKey,fieldError:l[e.fieldKey]})))))},rk={title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.title",{defaultMessage:"Select a monitor type"}),children:i.a.createElement(ik,{description:i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.description",{defaultMessage:"Choose a monitor that best fits your use case"})),stepKey:"step1"})},sk=(e=!1)=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.title",{defaultMessage:"Monitor details"}),children:i.a.createElement(ik,{description:i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.description",{defaultMessage:"Provide some details about how your monitor should run"})),stepKey:"step2",readOnly:e})}),ok=i.a.createElement(w.EuiFlexGroup,{justifyContent:"flexStart",wrap:!0},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsLaunchSyntheticsRecorderButton",href:"elastic-synthetics-recorder://",iconType:"popout",iconSide:"right"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.launch",{defaultMessage:"Launch Synthetics Recorder"}))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsDownloadSyntheticsRecorderButton",href:"https://github.com/elastic/synthetics-recorder/blob/main/docs/DOWNLOAD.md",iconType:"download"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.download",{defaultMessage:"Download Synthetics Recorder"})))),lk={title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.title",{defaultMessage:"Add a script"}),children:i.a.createElement(ik,{description:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate a script and then upload it. Alternatively, you can write your own {playwright} script and paste it in the script editor.",values:{playwright:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsPlaywrightLink",href:"https://playwright.dev/",target:"_blank",external:!0},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.playwrightLink",defaultMessage:"Playwright"}))}})),ok),stepKey:"step3"})},ck=(e=!1)=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptEditStep.title",{defaultMessage:"Monitor script"}),children:i.a.createElement(ik,{description:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,e?i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStepReadOnly.description",defaultMessage:"You can only view and edit the script in the source file of the monitor."}):i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate and upload a script. Alternatively, you can edit the existing {playwright} script (or paste a new one) in the script editor.",values:{playwright:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMONITOR_SCRIPT_STEP_EDITPlaywrightLink",href:"https://playwright.dev/",target:"_blank",external:!0},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.playwrightLink",defaultMessage:"Playwright"}))}})),e?null:ok),stepKey:"scriptEdit",readOnly:e,descriptionOnly:e})}),uk={[Sl.d.MULTISTEP]:[rk,sk(),lk],[Sl.d.SINGLE]:[rk,sk()],[Sl.d.HTTP]:[rk,sk()],[Sl.d.ICMP]:[rk,sk()],[Sl.d.TCP]:[rk,sk()]},dk=e=>{var t,a;const n=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",i=e?{text:pk,href:`${n}/${c.q}`}:{text:mk,href:`${n}/${c.p}`};Ce([i])},mk=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorCrumb",{defaultMessage:"Add monitor"}),pk=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorCrumb",{defaultMessage:"Edit monitor"}),fk=()=>{Object(N.useTrackPageview)({app:"synthetics",path:"add-monitor"});const{space:e}=Pv();Object(N.useTrackPageview)({app:"synthetics",path:"add-monitor",delay:15e3}),dk(),Ie();const t=Object(u.useDispatch)();Object(n.useEffect)((()=>{t(Object($.u)())}),[t]);const{locationsLoaded:a,error:r}=Object(u.useSelector)($.X);return r?i.a.createElement(ak,null):a?i.a.createElement(tk,{space:null==e?void 0:e.id},i.a.createElement(GS,{stepMap:uk})):i.a.createElement(ji,null)},gk=i.a.memo((()=>i.a.createElement(rd,null,i.a.createElement(fk,null)))),hk=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(bk,null),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Kd,null)),bk=()=>{const{packagePolicyId:e}=xe(),t=Se()[1],[a,r]=Object(n.useState)(!1),{data:s,loading:o}=Object(N.useFetcher)((()=>{if(e&&a)return(async e=>await vE.a.delete(c.A.DELETE_PACKAGE_POLICY.replace("{packagePolicyId}",e)))(e)}),[a,e]);return Object(n.useEffect)((()=>{a&&s&&!o&&(t({packagePolicyId:void 0},!0),r(!1))}),[s,a,o,t]),e?i.a.createElement(w.EuiCallOut,{title:"Leftover integration found",color:"warning",iconType:"help"},i.a.createElement("p",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.title",defaultMessage:"Please click on the button below to delete the integration. Normally this should not happen. Since the monitor has been deleted, the integration was supposed to be deleted automatically. If this happens often, report it by "}),i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsLeftoverIntegrationFoundCreatingAnIssueLink",href:"https://github.com/elastic/kibana/issues/new/choose"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.createIssue",defaultMessage:"creating an issue."}))),i.a.createElement(w.EuiButton,{"data-test-subj":"syntheticsUseMonitorNotFoundDeleteIntegrationButton",color:"danger",isLoading:o&&a,onClick:()=>{r(!0)}},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.delete",defaultMessage:"Delete integration"}))):null},Ek=()=>{var e,t;Object(N.useTrackPageview)({app:"synthetics",path:"edit-monitor"}),Object(N.useTrackPageview)({app:"synthetics",path:"edit-monitor",delay:15e3});const{monitorId:a}=Object(p.useParams)();dk(!0);const r=Object(u.useDispatch)(),{locationsLoaded:s,error:l}=Object(u.useSelector)($.X);Object(n.useEffect)((()=>{s||r(Object($.u)())}),[s,r]);const{data:d,loading:m,error:f}=Object(N.useFetcher)((()=>(async({id:e})=>vE.a.get(c.A.GET_SYNTHETICS_MONITOR.replace("{monitorId}",e),{decrypted:!0},He.B))({id:a})),[]),g=((e,t)=>{var a;const{packagePolicyId:i}=xe(),r=Se()[1];return Object(n.useEffect)((()=>{t&&i&&!e&&r({packagePolicyId:void 0},!0)}),[e,t,i,r]),e?404===(null===(a=e.body)||void 0===a?void 0:a.statusCode):null})(f,null==d?void 0:d.id),h=Wt(null==d?void 0:d[He.c.LOCATIONS]);if(g)return i.a.createElement(hk,null);const b=(null==d?void 0:d[He.c.MONITOR_SOURCE_TYPE])===He.z.PROJECT||!h,E=null==d?void 0:d[He.c.PROJECT_ID];return l?i.a.createElement(ak,null):f?i.a.createElement(w.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:i.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.monitorEditPage.error.label",{defaultMessage:"Unable to load monitor configuration"})),body:i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorEditPage.error.content",{defaultMessage:"There was an error loading your monitor. Please try again later."}))}):d&&s&&!m&&!f?i.a.createElement(i.a.Fragment,null,i.a.createElement(Qu,{isAlertingEnabled:null===(e=d[He.c.ALERT_CONFIG])||void 0===e||null===(t=e.status)||void 0===t?void 0:t.enabled}),i.a.createElement(tk,{defaultValues:d,readOnly:b,canUsePublicLocations:h},i.a.createElement(GS,{canUsePublicLocations:h,stepMap:(y=b,{[Sl.d.MULTISTEP]:[ck(y),sk(y)],[Sl.d.SINGLE]:[sk(y)],[Sl.d.HTTP]:[sk(y)],[Sl.d.ICMP]:[sk(y)],[Sl.d.TCP]:[sk(y)]}),isEditFlow:!0,readOnly:b,projectId:E}),i.a.createElement(xb,{configId:null==d?void 0:d[He.c.CONFIG_ID],name:null==d?void 0:d.name,updateUrl:!1}))):i.a.createElement(ji,null);var y},yk=i.a.memo((()=>i.a.createElement(rd,null,i.a.createElement(Ek,null)))),vk=({control:e,onChange:t})=>{const{locations:a}=Object(u.useSelector)($.X),n=e.getFieldState(mm.b.LOCATIONS),r=n.isTouched||e._formState.isSubmitted;return i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:Mk,helpText:r&&n.invalid?void 0:kk,isInvalid:r&&n.invalid,error:r?Sk:void 0},i.a.createElement(gn.Controller,{name:mm.b.LOCATIONS,control:e,rules:{validate:{notEmpty:e=>(null==e?void 0:e.length)>0||Sk}},render:({field:e})=>i.a.createElement(xk,m()({fullWidth:!0,"aria-label":Sk,options:a.map((e=>({...e,"data-test-subj":`syntheticsServiceLocation--${e.id}`}))),selectedOptions:e.value,isClearable:!0,"data-test-subj":"syntheticsServiceLocations"},e,{onChange:async a=>{const n=a.map((e=>{return{id:(t=e).id,label:t.label,geo:t.geo,isServiceManaged:t.isServiceManaged};var t}));e.onChange(n),t(n)}}))}))},xk=i.a.forwardRef(((e,t)=>i.a.createElement(w.EuiComboBox,m()({},e,{inputRef:e=>{t&&("function"==typeof t?t(e):t.current=e)}})))),Sk=o.i18n.translate("xpack.synthetics.monitorManagement.selectOneOrMoreLocations",{defaultMessage:"Select one or more locations."}),kk=o.i18n.translate("xpack.synthetics.monitorManagement.selectOneOrMoreLocationsDetails",{defaultMessage:"Select locations where monitors will be executed."}),Mk=o.i18n.translate("xpack.synthetics.monitorManagement.locationsLabel",{defaultMessage:"Locations"}),wk=()=>{const{control:e,register:t,handleSubmit:a,formState:{isValid:r,isSubmitted:s},getFieldState:l,trigger:c}=RE({mode:"onSubmit",reValidateMode:"onSubmit",shouldFocusError:!0,defaultValues:{urls:"",locations:[]}}),[d,p]=Object(n.useState)(),{loading:f,data:g}=(({monitorData:e})=>{const{application:t}=Object(T.useKibana)().services,{locations:a}=Object(u.useSelector)($.X),r=Object(u.useDispatch)(),{refreshApp:s}=K(),{data:l,loading:c,status:d}=Object(N.useFetcher)((()=>{if(!e)return new Promise((e=>e(void 0)));const{urls:t,locations:a}=e;return Object($.b)({monitor:{...Kv.c.browser,"source.inline.script":`step('Go to ${t}', async () => {\n  await page.goto('${t}');\n});`,[mm.b.MONITOR_TYPE]:He.q.BROWSER,[mm.b.NAME]:t,[mm.b.LOCATIONS]:a,[mm.b.URLS]:t}})}),[e]);return Object(n.useEffect)((()=>{var e;const n=l;var u,m,p,f;l&&"attributes"in l&&(null===(e=l.attributes.errors)||void 0===e?void 0:e.length)>0&&!c&&(m=null!==(u=null==l?void 0:l.attributes.errors)&&void 0!==u?u:[],p=a,f=Gi.a.toasts,Object.values(m).forEach((e=>{var t;const{status:a,reason:n}=e.error||{};f.addWarning({title:o.i18n.translate("xpack.synthetics.monitorManagement.service.error.title",{defaultMessage:"Unable to sync monitor config"}),text:Object(T.toMountPoint)(i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorManagement.service.error.message",{defaultMessage:"Your monitor was saved, but there was a problem syncing the configuration for {location}. We will automatically try again later. If this problem continues, your monitors will stop running in {location}. Please contact Support for assistance.",values:{location:null==p||null===(t=p.find((t=>(null==t?void 0:t.id)===e.locationId)))||void 0===t?void 0:t.label}})),a||n?i.a.createElement("p",null,a?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.status",{defaultMessage:"Status: {status}. ",values:{status:a}}):null,n?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.reason",{defaultMessage:"Reason: {reason}.",values:{reason:n}}):null):null)),toastLifeTimeMs:3e4})}))),c||d!==N.FETCH_STATUS.FAILURE?!c&&null!=n&&n.id&&(Gi.a.toasts.addSuccess({title:Ik,toastLifeTimeMs:3e3}),s(),r(Object($.a)()),null==t||t.navigateToApp("synthetics",{path:"monitors"})):Gi.a.toasts.addDanger({title:jk,toastLifeTimeMs:3e3})}),[t,l,d,r,c,s,a]),{data:l,loading:c}})({monitorData:d}),h=qt(),b=l(He.c.URLS),E=s||b.isTouched?b.error:void 0;return i.a.createElement(w.EuiForm,{onSubmit:a((e=>{p(e)})),component:"form",isInvalid:s&&!r&&!f&&!(null!=g&&g.id),noValidate:!0},i.a.createElement(w.EuiFormRow,{fullWidth:!0,label:Ok,helpText:E?void 0:Tk,isInvalid:!!E,error:null==E?void 0:E.message},i.a.createElement(w.EuiFieldText,m()({fullWidth:!0},t(He.c.URLS,{validate:{notEmpty:e=>!!Boolean(e.trim())||_k}}),{isInvalid:!!E,"data-test-subj":`${He.c.URLS}-input`,tabIndex:0}))),i.a.createElement(w.EuiSpacer,null),i.a.createElement(vk,{control:e,onChange:async e=>{await(null==c?void 0:c())}}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Mn,{canEditSynthetics:h},i.a.createElement(w.EuiButton,{type:"submit",fill:!0,iconType:"plusInCircleFilled",isLoading:f,"data-test-subj":"syntheticsMonitorConfigSubmitButton",disabled:!h},Ck)))))},Ok=o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlLabel",{defaultMessage:"Website URL"}),Tk=(o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlPlaceholder",{defaultMessage:"Enter a website URL"}),o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlHelpText",{defaultMessage:"For example, your company's homepage or https://elastic.co."})),Ck=o.i18n.translate("xpack.synthetics.monitorManagement.createMonitorLabel",{defaultMessage:"Create monitor"}),Ik=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),jk=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),_k=o.i18n.translate("xpack.synthetics.monitorManagement.urlRequiredLabel",{defaultMessage:"URL is required"}),Fk=()=>{const e=Object(u.useDispatch)(),t=Object(p.useHistory)();Ie(),Object(n.useEffect)((()=>(e(Object($.u)()),e($.n.get()),()=>{e(Object($.a)())})),[e]),Ce([{text:qk}]);const{locations:a,loading:r}=je(),{loading:s}=Object(u.useSelector)($.B),l=r||s,c=!r&&0===a.length;return l?i.a.createElement(ji,null):i.a.createElement(Rk,null,c?i.a.createElement(Pk,null):i.a.createElement(w.EuiEmptyPrompt,{title:i.a.createElement("h2",null,Nk),layout:"horizontal",color:"plain",body:i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,{size:"s"},Uk," ",i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsGettingStartedPageLink",href:t.createHref({pathname:ug.j})},$k),o.i18n.translate("xpack.synthetics.gettingStarted.createSingle.description",{defaultMessage:" to get started with Elastic Synthetics Monitoring."})),i.a.createElement(w.EuiSpacer,null),i.a.createElement(wk,null)),footer:i.a.createElement(Lk,null)}))},Pk=()=>{const e=Object(u.useDispatch)();Ce([{text:qk}]);const t=Object(u.useSelector)($.A),a=Object(n.useCallback)((t=>e(Object($.cb)(t))),[e]),{onSubmit:r,privateLocations:s,loading:o}=Ov();return Object(n.useEffect)((()=>{a(!1)}),[a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiEmptyPrompt,{title:i.a.createElement("h2",null,Bk),layout:"horizontal",color:"plain",body:i.a.createElement(w.EuiFlexGroup,{direction:"column"},i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiText,null,Gk),i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiText,null,Vk)),i.a.createElement(w.EuiFlexItem,null,i.a.createElement(w.EuiButton,{fill:!0,iconType:"plusInCircleFilled","data-test-subj":"gettingStartedAddLocationButton",onClick:()=>a(!0)},Hk))),footer:i.a.createElement(Lk,null)}),t?i.a.createElement(xv,{setIsOpen:a,onSubmit:e=>{r(e)},privateLocations:s,isLoading:o}):null)},Lk=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiText,{size:"s",color:"subdued",className:"eui-displayInlineBlock"},Dk)," ",i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsGettingStartedOnPremLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started.html",target:"_blank",className:"eui-displayInline"},Ak)),Rk=Ut.a.div.withConfig({displayName:"Wrapper",componentId:"sc-dsce70-0"})(["&&&{.euiEmptyPrompt__content{max-width:40em;padding:0;}}"]),Dk=o.i18n.translate("xpack.synthetics.gettingStarted.forMoreInfo",{defaultMessage:"For more information, read our"}),Ak=o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel",{defaultMessage:"Getting Started Guide"}),Nk=o.i18n.translate("xpack.synthetics.gettingStarted.createSinglePageLabel",{defaultMessage:"Create a single page browser monitor"}),Bk=o.i18n.translate("xpack.synthetics.gettingStarted.createLocationHeading",{defaultMessage:"Get started with synthetic monitoring"}),zk=o.i18n.translate("xpack.synthetics.gettingStarted.privateLocationLabel",{defaultMessage:"private location"}),Hk=o.i18n.translate("xpack.synthetics.gettingStarted.createLocationLabel",{defaultMessage:"Create location"}),Gk=i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.gettingStarted.createLocationDescription",defaultMessage:"To start creating monitors, you first need to create a {link}. Private locations allow you to run monitors from your own premises. They require an Elastic agent and Agent policy which you can control and maintain via Fleet.",values:{link:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html",target:"_blank"},zk)}}),Vk=i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.gettingStarted.publicLocationDescription",defaultMessage:"In {link} you can also use {elasticManagedLink}. With it, you can create and run monitors in multiple locations without having to manage your own infrastructure. Elastic takes care of software updates and capacity planning for you.",values:{elasticManagedLink:i.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.elasticManagedLink",{defaultMessage:"Elastics global managed testing infrastructure"})),link:i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsElasticCloudLink",href:"https://www.elastic.co/cloud/",target:"_blank"},o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.elasticCloudDeployments",{defaultMessage:"Elastic Cloud"}))}}),$k=o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.selectDifferentMonitor",{defaultMessage:"select a different monitor type"}),Uk=o.i18n.translate("xpack.synthetics.gettingStarted.orLabel",{defaultMessage:"Or"}),qk=o.i18n.translate("xpack.synthetics.overview.heading",{defaultMessage:"Monitors"});function Wk(){const{lastRefresh:e}=K(),{errorStateId:t,monitorId:a}=Object(p.useParams)(),{dateRangeStart:i,dateRangeEnd:r}=xe(),{data:s,loading:o}=Fe({index:c.B,body:{runtime_mappings:{"state.ends.id":{type:"keyword"}},size:1,query:{bool:{filter:[Pe.c,Pe.b,{term:{"state.ends.id":t}},{term:{config_id:a}}]}},sort:[{"@timestamp":"desc"}]}},[e,a,i,r],{name:"getStateWhichEndTheState"});return Object(n.useMemo)((()=>{var e,t;const a=null!==(e=null==s||null===(t=s.hits.hits)||void 0===t?void 0:t.map((e=>{const t=e._source;return{...t,timestamp:t["@timestamp"]}})))&&void 0!==e?e:[];return{loading:o,killerState:null==a?void 0:a[0]}}),[s,o])}const Kk=()=>{var e;const{killerState:t}=Wk();let a=qn()(null!==(e=null==t?void 0:t.timestamp)&&void 0!==e?e:"");return a||(a="N/A"),i.a.createElement(w.EuiDescriptionList,{listItems:[{title:Yk,description:a}]})},Yk=o.i18n.translate("xpack.synthetics.errorDetails.resolvedAt",{defaultMessage:"Resolved at"});function Xk(){const{lastRefresh:e}=K(),{errorStateId:t,monitorId:a}=Object(p.useParams)(),{dateRangeStart:i,dateRangeEnd:r}=xe(),{data:s,loading:o}=Fe({index:c.B,body:{size:1e4,query:{bool:{filter:[Pe.d,Pe.b,{term:{"state.id":t}},{term:{config_id:a}}]}},sort:[{"@timestamp":"desc"}]}},[e,a,i,r],{name:"getMonitorErrorFailedTests"});return Object(n.useMemo)((()=>{var e,t;return{failedTests:null!==(e=null==s||null===(t=s.hits.hits)||void 0===t?void 0:t.map((e=>{const t=e._source;return{...t,timestamp:t["@timestamp"]}})))&&void 0!==e?e:[],loading:o}}),[s,o])}const Jk=()=>{var e;const{failedTests:t}=Xk(),a=null==t||null===(e=t[0])||void 0===e?void 0:e.state;let n=qn()(null==a?void 0:a.started_at);return n||(n=i.a.createElement(w.EuiSkeletonText,{lines:1})),i.a.createElement(w.EuiDescriptionList,{listItems:[{title:Qk,description:n}]})},Qk=o.i18n.translate("xpack.synthetics.errorDetails.startedAt",{defaultMessage:"Started at"}),Zk=({checkGroup:e})=>{const[t,a]=i.a.useState(1),{data:n,loading:r,stepEnds:s}=Ki(e),o=s.find((e=>{var a,n;return(null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)===t})),l=r?1:s.length;return{step:o,stepIndex:t,setStepIndex:a,totalSteps:l,stepsData:n,loading:r}},eM=({step:e,loading:t,stepIndex:a,stepsData:n,totalSteps:r,setStepIndex:s})=>0!==r||t?i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,{grow:!0},i.a.createElement(w.EuiTitle,{size:"xs"},i.a.createElement("h3",null,i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:a,totalSteps:r}})))),i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Nb,{stepIndex:a,totalSteps:r,handleNextStep:()=>{s(a+1)},handlePreviousStep:()=>{s(a-1)}}))),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Ub,{stepIndex:a,step:e}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement($i,{stepsList:null==n?void 0:n.steps,step:e,loading:t})):null,tM=({failedTests:e,loading:t})=>{const[a,r]=Object(n.useState)(0),[s,o]=Object(n.useState)(5),[l,c]=Object(n.useState)("@timestamp"),[u,d]=Object(n.useState)("desc"),{monitorId:m}=Object(p.useParams)(),f=e.slice(a*s,a*s+s),{basePath:g}=tt(),h=Object(p.useHistory)(),b=$s(),E=qn(),y=[{field:"@timestamp",name:iM,sortable:!0,render:(e,t)=>i.a.createElement(w.EuiLink,{"data-test-subj":"failed-test-link",href:`${g}/app/synthetics/monitor/${m}/test-run/${t.monitor.check_group}`},E(e))},{field:"monitor.duration.us",name:nM,align:"right",render:e=>i.a.createElement(w.EuiText,null,Ws(e))}],v={pageIndex:a,pageSize:s,totalItemCount:e.length,pageSizeOptions:[3,5,8]};return i.a.createElement("div",null,i.a.createElement(w.EuiSpacer,null),i.a.createElement(w.EuiBasicTable,{tableCaption:aM,loading:t,items:f,columns:y,pagination:v,sorting:{sort:{field:l,direction:u}},onChange:({page:e={},sort:t={}})=>{const{index:a,size:n}=e,{field:i,direction:s}=t;r(a),o(n),c(i),d(s)},rowProps:e=>{const{state:t}=e;if(null!=t&&t.id)return{"data-test-subj":`row-${t.id}`,onClick:t=>{h.push(So({monitorId:m,checkGroup:e.monitor.check_group,locationId:null==b?void 0:b.id}))}}}}))},aM=o.i18n.translate("xpack.synthetics.errorsList.label",{defaultMessage:"Errors list"}),nM=o.i18n.translate("xpack.synthetics.testDuration.label",{defaultMessage:"Test duration"}),iM=o.i18n.translate("xpack.synthetics.timestamp.label",{defaultMessage:"@timestamp"}),rM=({lastTestRun:e})=>{var t,a,n;if(!e)return i.a.createElement(w.EuiSkeletonText,{lines:3});const r=V()(null===(t=e.monitor.timespan)||void 0===t?void 0:t.lt).diff(V()(null===(a=e.monitor.timespan)||void 0===a?void 0:a.gte),"minutes"),s=null==e||null===(n=e.state)||void 0===n?void 0:n.started_at;return i.a.createElement(Mm,{time:{from:V()(s).subtract(r/2,"minutes").toISOString(),to:V()(e.timestamp).add(r/2,"minutes").toISOString()},allowBrushing:!1})},sM=e=>{var t,a;const n=null!==(t=null===(a=Object(T.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",{monitor:i}=wa(),r=$s(),s=[{text:oM,href:`${n}/monitor/${null==i?void 0:i[He.c.CONFIG_ID]}/errors?locationId=${null==r?void 0:r.id}`},...null!=e?e:[]];dg(s)},oM=o.i18n.translate("xpack.synthetics.monitorsPage.errors",{defaultMessage:"Errors"});function lM(){var e,t,a,n,r,s;const{failedTests:o,loading:l}=Xk(),c=null!==(e=null==o||null===(t=o[0])||void 0===t?void 0:t.monitor.check_group)&&void 0!==e?e:"",{data:u,isFailedStep:d,failedStep:m,loading:p}=Ki(c),f=null==o?void 0:o[0],g=qn()(null==f||null===(a=f.state)||void 0===a?void 0:a.started_at);sM([{text:g}]);const h=Zk({checkGroup:null==f?void 0:f.monitor.check_group}),b="browser"===(null==u||null===(n=u.details)||void 0===n?void 0:n.journey.monitor.type);return i.a.createElement("div",null,i.a.createElement(xn,{title:cM},i.a.createElement(rM,{lastTestRun:f})),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(w.EuiFlexItem,{grow:2,style:{minWidth:0}},i.a.createElement(xn,{title:uM},i.a.createElement(tM,{failedTests:o,loading:l})),b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(eM,h)),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(Tf,{latestPing:f,loading:l,stepsData:u,stepsLoading:p,isErrorDetails:!0}),b&&i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(w.EuiPanel,{hasShadow:!1,hasBorder:!0},i.a.createElement(Ab,{journeyDetails:null==u?void 0:u.details,showErrorTitle:!1,showErrorLogs:!0})))),i.a.createElement(w.EuiFlexItem,{grow:1,style:{height:"fit-content"}},(null==u||null===(r=u.details)||void 0===r?void 0:r.journey)&&m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(xn,null,i.a.createElement(kb,{ping:null==u||null===(s=u.details)||void 0===s?void 0:s.journey,step:m,isFailed:d})),i.a.createElement(w.EuiSpacer,{size:"m"})),i.a.createElement(Ef,{doBreakdown:!1}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(kf,{hideLocations:!0}))))}const cM=o.i18n.translate("xpack.synthetics.errors.timeline.title",{defaultMessage:"Timeline"}),uM=o.i18n.translate("xpack.synthetics.errors.failedTests",{defaultMessage:"Failed tests"}),dM=()=>{var e;const{failedTests:t}=Xk(),a=null==t||null===(e=t[0])||void 0===e?void 0:e.state,{killerState:n}=Wk(),r=null!=n&&n.timestamp?V()(null==n?void 0:n.timestamp):V()(),s=V()(null==a?void 0:a.started_at),o=a?pM(s,r):0;return i.a.createElement(w.EuiDescriptionList,{listItems:[{title:mM,description:o}]})},mM=o.i18n.translate("xpack.synthetics.errorDetails.errorDuration",{defaultMessage:"Error duration"}),pM=(e,t)=>{const a=t.diff(e,"days");if(a>1)return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.days",{defaultMessage:"{value} days",values:{value:a}});const n=t.diff(e,"hours");if(n>1)return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.hours",{defaultMessage:"{value} hours",values:{value:n}});const i=t.diff(e,"minutes");return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.mins",{defaultMessage:"{value} mins",values:{value:i}})},fM=Ut()("div").withConfig({displayName:"WrapFieldSearch",componentId:"sc-14aq5xk-0"})(["max-width:700px;"]),gM=({setSearch:e})=>{const[t,a]=Object(n.useState)("");return Lu()((()=>{e(t)}),350,[t]),i.a.createElement(fM,null,i.a.createElement(w.EuiFieldSearch,{"data-test-subj":"uptimeCertSearch",placeholder:It,onChange:e=>{a(e.target.value)},isClearable:!0,"aria-label":It,fullWidth:!0}))};var hM,bM=a(131);!function(e){e.issuer="tls.server.x509.issuer.common_name",e.not_after="tls.server.x509.not_after",e.not_before="tls.server.x509.not_before",e.common_name="tls.server.x509.subject.common_name"}(hM||(hM={}));const EM=Ut()(w.EuiText).withConfig({displayName:"DateText",componentId:"sc-1djagc6-0"})(["display:inline-block;margin-left:5px;"]),yM=({cert:e})=>{const t=((e,t)=>{const a=c.g.certExpirationThreshold,n=c.g.certAgeThreshold,i=new Date(null!=e?e:"");if(isNaN(i.valueOf()))return!1;const r=V()(i).diff(V()(),"days")<a,s=V()().diff(V()(t),"days")>n;return V()(i)<V()()?c.b.EXPIRED:r?c.b.EXPIRING_SOON:s?c.b.TOO_OLD:c.b.OK})(null==e?void 0:e.not_after,null==e?void 0:e.not_before),a=V()(null==e?void 0:e.not_after).fromNow();if(t===c.b.EXPIRING_SOON)return i.a.createElement(w.EuiHealth,{color:"warning"},i.a.createElement("span",null,Ct,"  ",i.a.createElement(EM,{color:"subdued",size:"xs"},a)));if(t===c.b.EXPIRED)return i.a.createElement(w.EuiHealth,{color:"danger"},i.a.createElement("span",null,Tt,"  ",i.a.createElement(EM,{color:"subdued",size:"xs"},a)));if(t===c.b.TOO_OLD){const t=c.g.certAgeThreshold,a=V()(null==e?void 0:e.not_before).add(t,"days").fromNow();return i.a.createElement(w.EuiHealth,{color:"danger"},i.a.createElement("span",null,_t,i.a.createElement(EM,{color:"subdued",size:"xs"},a)))}const n=V()(null==e?void 0:e.not_after).fromNow(!0);return i.a.createElement(w.EuiHealth,{color:"success"},i.a.createElement("span",null,Ot,"  ",i.a.createElement(EM,{color:"subdued",size:"xs"},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.certs.status.ok.label",defaultMessage:" for {okRelativeDate}",description:'Denotes an amount of time for which a cert is valid. Example: "OK for 2 days"',values:{okRelativeDate:n}}))))},vM=({children:e,configId:t})=>{var a;const n=null===(a=Object(T.useKibana)().services.http)||void 0===a?void 0:a.basePath.get();return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsMonitorPageLinkLink",href:`${n}/app/synthetics/monitor/${t}`},e)},xM=({monitors:e})=>i.a.createElement("span",null,e.map(((e,t)=>i.a.createElement("span",{key:e.id},t>0&&", ",i.a.createElement(w.EuiToolTip,{content:e.url},i.a.createElement(vM,{configId:e.configId},e.name||e.id)))))),SM=Ut.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-zy3qie-0"})(["margin-right:8px;"]),kM=({cert:e})=>{var t,a,n,r;const s=({text:e,val:t})=>i.a.createElement(SM,{"data-test-subj":t,className:"eui-textNoWrap"},i.a.createElement(w.EuiToolTip,{content:t},i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsShaComponentButton",flush:"right"},e," ")),i.a.createElement(w.EuiCopy,{textToCopy:null!=t?t:""},(e=>i.a.createElement(w.EuiButtonIcon,{"data-test-subj":"syntheticsShaComponentButton","aria-label":Bt,onClick:e,iconType:"copy",title:Bt}))));return i.a.createElement("span",null,i.a.createElement(s,{text:"SHA 1",val:null!==(t=null==e||null===(a=e.sha1)||void 0===a?void 0:a.toUpperCase())&&void 0!==t?t:""}),i.a.createElement(s,{text:"SHA 256",val:null!==(n=null==e||null===(r=e.sha256)||void 0===r?void 0:r.toUpperCase())&&void 0!==n?n:""}))},MM=({page:e,certificates:t,sort:a,onChange:n})=>{var r,s;const o=qn(),l={pageIndex:e.index,pageSize:e.size,totalItemCount:null!==(r=null==t?void 0:t.total)&&void 0!==r?r:0,pageSizeOptions:[10,25,50,100],showPerPageOptions:!0},c=[{field:"not_after",name:jt,sortable:!0,render:(e,t)=>i.a.createElement(yM,{cert:t})},{name:Ft,field:"common_name",sortable:!0},{name:Pt,field:"monitors",render:e=>i.a.createElement(xM,{monitors:e})},{name:Lt,field:"issuer",sortable:!0},{name:Rt,field:"not_after",sortable:!0,render:o},{name:Dt,field:"not_before",sortable:!0,render:e=>V()().diff(V()(e),"days")+" "+At},{name:Nt,field:"sha256",render:(e,t)=>i.a.createElement(kM,{cert:t})}];return i.a.createElement(w.EuiBasicTable,{loading:t.isLoading,columns:c,items:null!==(s=null==t?void 0:t.certs)&&void 0!==s?s:[],pagination:l,onChange:e=>{n(e.page,e.sort)},sorting:{sort:{field:a.field,direction:a.direction}},noItemsMessage:t.isLoading?Ht:i.a.createElement("span",{"data-test-subj":"uptimeCertsEmptyMessage"},zt)})},wM="xpack.uptime.certList.pageSize",OM=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem(wM))&&void 0!==e?e:"",10);return isNaN(t)?10:t},TM=()=>{Object(N.useTrackPageview)({app:"synthetics",path:"certificates"}),Object(N.useTrackPageview)({app:"synthetics",path:"certificates",delay:15e3}),Ce([{text:"Certificates"}]);const[e,t]=Object(n.useState)({index:0,size:OM()}),[a,r]=Object(n.useState)({field:"not_after",direction:"asc"}),[s,o]=Object(n.useState)(""),l=Object(u.useDispatch)(),c=(({pageIndex:e,size:t=20,search:a,sortBy:i="not_after",direction:r="asc"})=>{const{lastRefresh:s}=Object(n.useContext)(q),o=Object(u.useDispatch)();Object(n.useEffect)((()=>{o(bM.b.get({pageIndex:e,size:t,search:a,sortBy:i,direction:r}))}),[r,o,s,e,a,t,i]);const{data:l,isLoading:c}=Object(u.useSelector)(bM.d);return{...null!=l?l:{certs:[],total:0},isLoading:c}})({search:s,size:e.size,pageIndex:e.index,sortBy:a.field,direction:a.direction});return Object(n.useEffect)((()=>{l(Object(Mt.c)({total:c.total}))}),[c.total,l]),i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(gM,{setSearch:o}),i.a.createElement(w.EuiSpacer,{size:"m"}),i.a.createElement(MM,{page:e,onChange:(e,a)=>{t(e),r(a),localStorage.setItem(wM,e.size.toString())},sort:a,certificates:c}))},CM=o.i18n.translate("xpack.synthetics.routes.baseTitle",{defaultMessage:"Synthetics - Kibana"}),IM=({path:e,title:t})=>(Object(n.useEffect)((()=>{document.title=t}),[e,t]),null),jM=()=>{const{application:e}=Object(T.useKibana)().services,{addInspectorRequest:t}=Object(N.useInspectorContext)(),{euiTheme:a}=Object(w.useEuiTheme)(),n=((e,t,a,n)=>{return[...jv(0,n,CM),(r=CM,{title:o.i18n.translate("xpack.synthetics.errorDetailsRoute.title",{defaultMessage:"Error details | {baseTitle}",values:{baseTitle:r}}),path:c.h,component:lM,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.editMonitor.errorDetailsRoute.title",defaultMessage:"Error details"}),rightSideItems:[i.a.createElement(dM,null),i.a.createElement(Em,{isDisabled:!0}),i.a.createElement(Kk,null),i.a.createElement(Jk,null)]}}),Zb(0,0,CM),Pb(0,0,CM),...Yf(t,n,CM),...Ud(0,a,n,CM),{title:o.i18n.translate("xpack.synthetics.gettingStartedRoute.title",{defaultMessage:"Synthetics Getting Started | {baseTitle}",values:{baseTitle:CM}}),path:c.i,component:Fk,dataTestSubj:"syntheticsGettingStartedPage",pageSectionProps:{alignment:"center",paddingSize:"none"}},{title:o.i18n.translate("xpack.synthetics.createMonitorRoute.title",{defaultMessage:"Create Monitor | {baseTitle}",values:{baseTitle:CM}}),path:c.p,component:gk,dataTestSubj:"syntheticsMonitorAddPage",restrictWidth:!0,pageHeader:{pageTitle:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.createMonitor.pageHeader.title",defaultMessage:"Create Monitor"}),rightSideItems:[i.a.createElement(bt,{node:yb})]}},{title:o.i18n.translate("xpack.synthetics.editMonitorRoute.title",{defaultMessage:"Edit Monitor | {baseTitle}",values:{baseTitle:CM}}),path:c.q,component:yk,dataTestSubj:"syntheticsMonitorEditPage",restrictWidth:!0,pageHeader:{pageTitle:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.editMonitor.pageHeader.title",defaultMessage:"Edit Monitor"}),rightSideItems:[i.a.createElement(bt,{node:Eb}),i.a.createElement(bt,{node:yb})],breadcrumbs:[{text:i.a.createElement(bt,{node:vb})}]}},{title:o.i18n.translate("xpack.synthetics.testRunDetailsRoute.title",{defaultMessage:"Test run details | {baseTitle}",values:{baseTitle:CM}}),path:c.E,component:Xb,dataTestSubj:"syntheticsMonitorTestRunDetailsPage",pageHeader:{pageTitle:i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.testRunDetailsRoute.page.title",defaultMessage:"Test run details"})}},{title:o.i18n.translate("xpack.synthetics.certificatesRoute.title",{defaultMessage:"Certificates | {baseTitle}",values:{baseTitle:CM}}),path:c.a,component:TM,dataTestSubj:"uptimeCertificatesPage",pageHeader:{pageTitle:i.a.createElement(wt,null),rightSideItems:[i.a.createElement(Vt,null)]}}];var r})(0,Object(p.useHistory)(),Object(p.useLocation)(),e.getUrlForApp(Te.a.SYNTHETICS_PLUGIN_ID));vE.a.addInspectorRequest=t;const r=(()=>{var e,t;const{canRead:a,loading:n}=(()=>{const{services:{data:e}}=Object(T.useKibana)(),{data:t,loading:a,status:n}=Object(N.useFetcher)((()=>new Promise((t=>{e.search.search({terminate_after:1,params:{index:c.B,size:0}},{legacyHitsTotal:!1}).subscribe({next:e=>{t({canRead:!0,error:void 0})},error:e=>{var a,n;(null===(a=e.err)||void 0===a?void 0:a.statusCode)>=400&&(null===(n=e.err)||void 0===n?void 0:n.statusCode)<500?t({canRead:!1,error:e}):t({canRead:!0,error:e})}})}))),[]);return{canRead:null==t?void 0:t.canRead,error:null==t?void 0:t.error,loading:a,status:n}})(),{error:r}=Object(u.useSelector)(Ne.f);return n||a?null!=r&&null!==(e=r.body)&&void 0!==e&&e.message&&[c.m,c.l,c.n].includes(null==r||null===(t=r.body)||void 0===t?void 0:t.message)?i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"calc(100vh - 150px)"}},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Yt,null))):void 0:i.a.createElement(w.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"calc(100vh - 150px)"}},i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(Kt,{unprivilegedIndices:[c.B]})))})();return i.a.createElement(M,null,n.map((({title:e,path:t,component:a,dataTestSubj:n,pageHeader:s,...o})=>i.a.createElement(y,{path:t,key:n,exact:!0},i.a.createElement("div",{className:O.APP_WRAPPER_CLASS,"data-test-subj":n},i.a.createElement(IM,{title:e,path:t}),i.a.createElement(Wd,m()({pageHeader:r?void 0:s,"data-test-subj":"synthetics-page-template",isPageDataLoaded:!0},o),r||i.a.createElement(a,null)))))),i.a.createElement(y,{component:()=>i.a.createElement(Wd,null,i.a.createElement(kt,{actions:[i.a.createElement(w.EuiButtonEmpty,{"data-test-subj":"syntheticsPageRouterGoToSyntheticsHomePageButton",iconType:"arrowLeft",flush:"both",onClick:()=>{e.navigateToApp(Te.a.SYNTHETICS_PLUGIN_ID)}},o.i18n.translate("xpack.synthetics.routes.goToSynthetics",{defaultMessage:"Go to Synthetics Home Page"}))]}))}))};function _M(){const{lastRefresh:e}=K(),[t,a]=Object(n.useState)((()=>Date.now())),r=Object(u.useSelector)($.V);if(Object(n.useEffect)((()=>{const e=setInterval((()=>{a(Date.now())}),5e3);return()=>{clearInterval(e)}}),[]),Object(n.useEffect)((()=>{a(Date.now())}),[e]),!e||r)return null;const s=V()().diff(V()(e),"minutes")>1,o=V()().diff(V()(e),"minutes")>5,l=V()(e).from(t);return i.a.createElement(FM,{color:o?"danger":s?"warning":"subdued",size:"s",$_css:s?"bold":void 0},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.lastUpdated.label",defaultMessage:"Updated {updatedDate}",values:{updatedDate:l}}))}var FM=Ut()(w.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-rddbpl-0"})((e=>({lineHeight:"40px",fontWeight:e.$_css})));const{AUTOREFRESH_INTERVAL_SECONDS:PM,AUTOREFRESH_IS_PAUSED:LM}=Q.a,RM=({refreshPaused:e,refreshInterval:t})=>({refreshInterval:t===PM?void 0:t,refreshPaused:e===LM?void 0:e}),DM=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)($.V),a=Object(u.useSelector)($.U),[r,s]=Se(),{refreshInterval:o,refreshPaused:l}=r(),c=Object(n.useRef)(!0);return Object(n.useEffect)((()=>{c.current?(e(Object($.ib)(o)),e(Object($.jb)(l)),c.current=!1):o===a&&l===t||s(RM({refreshInterval:a,refreshPaused:t}),!0)}),[s,a,t,o,l,e]),i.a.createElement(w.EuiAutoRefreshButton,{size:"m",isPaused:t,refreshInterval:1e3*a,onRefreshChange:t=>{e(Object($.ib)(t.refreshInterval/1e3)),e(Object($.jb)(t.isPaused)),s(RM({refreshInterval:t.refreshInterval/1e3,refreshPaused:t.isPaused}),!0)},shortHand:!0})};function AM(){const{services:{inspector:e,uiSettings:t}}=Object(T.useKibana)(),{isDev:a}=tt(),{inspectorAdapters:n}=Object(N.useInspectorContext)();return(null==t?void 0:t.get(Wv.enableInspectEsQueries))||a?i.a.createElement(w.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(n)}},o.i18n.translate("xpack.synthetics.inspectButtonText",{defaultMessage:"Inspect"})):null}var NM=a(4);const BM={toggleButtonAriaLabel:o.i18n.translate("xpack.synthetics.alertsRulesPopover.toggleButton.ariaLabel",{defaultMessage:"Open alerts and rules menu"}),toggleMonitorStatusAriaLabel:o.i18n.translate("xpack.synthetics.toggleAlertFlyout.ariaLabel",{defaultMessage:"Open add rule flyout"}),toggleTlsAriaLabel:o.i18n.translate("xpack.synthetics.toggleAlertFlyout.tls.ariaLabel",{defaultMessage:"Open add tls rule flyout"}),toggleMonitorStatusContent:o.i18n.translate("xpack.synthetics.toggleAlertButton.content",{defaultMessage:"Monitor status rule"}),toggleTlsContent:o.i18n.translate("xpack.synthetics.toggleTlsAlertButton.label.content",{defaultMessage:"TLS certificate rule"}),navigateToAlertingUIAriaLabel:o.i18n.translate("xpack.synthetics.app.navigateToAlertingUi",{defaultMessage:"Leave Synthetics and go to Alerting Management page"}),navigateToAlertingButtonContent:o.i18n.translate("xpack.synthetics.app.navigateToAlertingButton.content",{defaultMessage:"Manage rules"}),alertsAndRules:o.i18n.translate("xpack.synthetics.alerts.toggleAlertFlyoutButtonText",{defaultMessage:"Alerts and rules"})},zM=()=>{const{observability:e}=Object(T.useKibana)().services,t=e.useRulesLink();return i.a.createElement(w.EuiLink,{"data-test-subj":"syntheticsManageRulesLinkLink",color:"text",href:t.href},BM.navigateToAlertingButtonContent)};var HM=a(103);const GM=()=>{var e,t;const a=Object(u.useDispatch)(),[r,s]=Object(n.useState)(!1),{application:o}=Object(T.useKibana)().services,l=null!==(e=null==o||null===(t=o.capabilities.uptime)||void 0===t?void 0:t.save)&&void 0!==e&&e,{EditAlertFlyout:c,loading:d}=(e=>{const t=Object(u.useDispatch)(),a=Object(u.useSelector)(Ku),i=Object(u.useSelector)(Yu),r=Object(u.useSelector)($.C),{canSave:s}=tt(),o=Object(n.useCallback)((()=>{t(s?HM.c.get():HM.d.get())}),[s,t]);Object(n.useEffect)((()=>{a?o():setTimeout((()=>{o()}),1e3)}),[t,e]);const{triggersActionsUi:l}=Object(T.useKibana)().services,c=Object(n.useMemo)((()=>a?l.getEditRuleFlyout({onClose:()=>t(Object($.db)(null)),hideInterval:!0,initialRule:r===NM.c?a.tlsRule:a.statusRule}):null),[a,t,l,r]);return Object(n.useMemo)((()=>({loading:i,EditAlertFlyout:c})),[c,i])})(r),m=[{id:0,items:[{"aria-label":BM.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout",name:i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,null,BM.toggleMonitorStatusContent),d&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLoadingSpinner,null))),onClick:()=>{a(Object($.db)(NM.b)),s(!1)},toolTipContent:l?null:VM,disabled:!l||d,icon:"bell"},{"aria-label":BM.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout.tls",name:i.a.createElement(w.EuiFlexGroup,{alignItems:"center"},i.a.createElement(w.EuiFlexItem,null,BM.toggleTlsContent),d&&i.a.createElement(w.EuiFlexItem,{grow:!1},i.a.createElement(w.EuiLoadingSpinner,null))),onClick:()=>{a(Object($.db)(NM.c)),s(!1)},toolTipContent:l?null:VM,disabled:!l||d,icon:"bell"},{"aria-label":BM.navigateToAlertingUIAriaLabel,"data-test-subj":"xpack.synthetics.navigateToAlertingUi",name:i.a.createElement(zM,null),icon:"tableOfContents"}]}],p=Object(u.useSelector)($.C);return i.a.createElement(i.a.Fragment,null,i.a.createElement(w.EuiPopover,{button:i.a.createElement(w.EuiHeaderLink,{color:"text","aria-label":BM.toggleButtonAriaLabel,"data-test-subj":"xpack.synthetics.alertsPopover.toggleButton",iconType:"arrowDown",iconSide:"right",onClick:()=>s(!r)},BM.alertsAndRules),closePopover:()=>s(!1),isOpen:r,ownFocus:!0,panelPaddingSize:"none"},i.a.createElement(w.EuiContextMenu,{initialPanelId:0,panels:m})),p&&c)},VM=o.i18n.translate("xpack.synthetics.alertDropdown.noPermissions",{defaultMessage:"You do not have sufficient permissions to perform this action."}),$M=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),UM=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel.message",{defaultMessage:"Go to Explore Data, where you can select and filter result data in any dimension and look for the cause or impact of performance problems."});function qM(){var e,t,a;const{basePath:n}=tt(),{observabilityAIAssistant:{ObservabilityAIAssistantActionMenuItem:r}={}}=ut(),s=xe(),{dateRangeStart:l,dateRangeEnd:u}=s,d=Object(p.useHistory)(),m={monitor:{id:void 0,name:"test"}},f=Object(p.useRouteMatch)(c.u),g=null==m||null===(e=m.monitor)||void 0===e?void 0:e.id,h=Object(fa.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"synthetics",seriesType:"area",selectedMetricField:"monitor.duration.us",time:{from:l,to:u},breakdown:g?"observer.geo.name":"monitor.type",reportDefinitions:{"monitor.name":null!=m&&null!==(t=m.monitor)&&void 0!==t&&t.name&&!0===(null==f?void 0:f.isExact)?[null==m||null===(a=m.monitor)||void 0===a?void 0:a.name]:[],"url.full":["ALL_VALUES"]},name:g?`${g}-response-duration`:"All monitors response duration"}]},n);return i.a.createElement(w.EuiHeaderLinks,{gutterSize:"xs"},i.a.createElement(_M,null),i.a.createElement(DM,null),i.a.createElement(GM,null),i.a.createElement(w.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.settingsLink.label",{defaultMessage:"Navigate to the Uptime settings page"}),color:"text","data-test-subj":"settings-page-link",href:d.createHref({pathname:c.y,search:Ee(s,!0)})},i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.page_header.settingsLink",defaultMessage:"Settings"})),i.a.createElement(w.EuiToolTip,{position:"top",content:i.a.createElement("p",null,UM)},i.a.createElement(w.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.analyzeData.label",{defaultMessage:'Navigate to the "Explore Data" view to visualize Synthetics/User data'}),href:h,color:"text",iconType:"visBarVerticalStacked","data-test-subj":"syntheticsExploreDataButton"},$M)),i.a.createElement(AM,null),r&&r?i.a.createElement(r,null):null)}const WM=({appMountParameters:e})=>i.a.createElement(N.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},i.a.createElement(qM,null));function KM({name:e,testRunId:t,expectPings:a,onDone:r}){const{summaryDocs:s,retriesExceeded:o}=Uo({testRunId:t,expectSummaryDocs:a});return Object(n.useEffect)((()=>{o&&(Gi.a.toasts.addDanger({text:Eo,title:Object(T.toMountPoint)(i.a.createElement(yt.FormattedMessage,{id:"xpack.synthetics.manualTestRun.failedTest.name",defaultMessage:"Manual test run failed for {name}",values:{name:e}}))},{toastLifeTimeMs:1e4}),r(t))}),[e,r,o,t]),Object(n.useEffect)((()=>{s&&s.length>=a&&r(t)}),[t,a,s,r]),i.a.createElement(i.a.Fragment,null)}function YM({manualTestRun:e,onDone:t}){var a,r;const{expectPings:s}=Ni({testRunId:e.testRunId,locations:null!==(a=e.monitor.locations)&&void 0!==a?a:[],errors:null!==(r=e.errors)&&void 0!==r?r:[]});if(!e.testRunId||!e.monitor)return null;const o="browser"===e.monitor.type;return i.a.createElement(n.Fragment,{key:e.testRunId},o?i.a.createElement(ho,{name:e.monitor.name,expectPings:s,onDone:t,testRunId:e.testRunId,onProgress:()=>{}}):i.a.createElement(KM,{name:e.monitor.name,expectPings:s,onDone:t,testRunId:e.testRunId}))}function XM(){var e;const t=Object(u.useDispatch)(),a=Object(u.useSelector)(Dl.i),{refreshApp:r}=K(),s=uf(),o=Object(n.useCallback)((e=>{t(Object(Dl.g)({testRunId:e,status:Dl.a.COMPLETED})),r()}),[t,r]),l=Object(n.useCallback)((e=>{t(Object(Dl.g)({testRunId:e,isTestNowFlyoutOpen:!1}))}),[t]),c=s?i.a.createElement(bl,{testRun:null!=s&&s.testRunId&&null!=s&&s.monitor?{id:s.testRunId,monitor:s.monitor,name:s.name}:void 0,name:s.name,inProgress:"in-progress"===s.status||"loading"===s.status,onClose:()=>l(s.testRunId),onDone:o,isPushing:"loading"===s.status,errors:null!==(e=s.errors)&&void 0!==e?e:[]}):null;return i.a.createElement(i.a.Fragment,null,Object.values(a).filter((e=>e.testRunId&&("in-progress"===e.status||"loading"===e.status))).map((e=>i.a.createElement(YM,{key:e.testRunId,manualTestRun:e,onDone:o}))),c)}const JM=e=>{const{basePath:t,canSave:a,core:r,darkMode:s,i18n:l,plugins:c,renderGlobalHelpControls:d,setBadge:m,startPlugins:p,appMountParameters:f}=e;return Object(n.useEffect)((()=>{d(),m(a?void 0:{text:o.i18n.translate("xpack.synthetics.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:o.i18n.translate("xpack.synthetics.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"})}),[a,d,m]),Gi.a.core=r,Gi.a.startPlugins=p,Gi.a.theme=e.appMountParameters.theme$,$.mb.dispatch(Object($.eb)(t)),i.a.createElement(w.EuiErrorBoundary,null,i.a.createElement(l.Context,null,i.a.createElement(T.KibanaThemeProvider,{theme$:e.appMountParameters.theme$,modify:{breakpoint:{xxl:1600,xxxl:2e3}}},i.a.createElement(u.Provider,{store:$.mb},i.a.createElement(T.KibanaContextProvider,{services:{...r,...c,storage:$.lb,data:p.data,inspector:p.inspector,triggersActionsUi:p.triggersActionsUi,observability:p.observability,observabilityShared:p.observabilityShared,observabilityAIAssistant:p.observabilityAIAssistant,exploratoryView:p.exploratoryView,cases:p.cases,spaces:p.spaces,fleet:p.fleet}},i.a.createElement(z,{dataViews:p.dataViews},i.a.createElement(S,{history:f.history},i.a.createElement(A.EuiThemeProvider,{darkMode:s},i.a.createElement(W,null,i.a.createElement(et,e,i.a.createElement(ot,{darkMode:s},i.a.createElement(ct,p,i.a.createElement("div",{className:O.APP_WRAPPER_CLASS,"data-test-subj":"syntheticsApp"},i.a.createElement(D,{coreStart:{application:r.application}},i.a.createElement(N.InspectorContextProvider,null,i.a.createElement(jM,null),i.a.createElement(WM,{appMountParameters:f}),i.a.createElement(XM,null))))))))))))))))},QM=e=>i.a.createElement(JM,e);function ZM(e,t,a,n,r){var u;const{application:{capabilities:d},chrome:{setBadge:m,setHelpExtension:p},docLinks:f,http:{basePath:g},i18n:h}=e,{apm:b,infrastructure:E,logs:y}=l(d,c.k),v={isDev:r,plugins:t,canSave:null!==(u=d.uptime.save)&&void 0!==u&&u,core:e,i18n:h,startPlugins:a,basePath:g.get(),darkMode:e.uiSettings.get(c.e),commonlyUsedRanges:e.uiSettings.get(c.f),isApmAvailable:b,isInfraAvailable:E,isLogsAvailable:y,renderGlobalHelpControls:()=>p({appName:o.i18n.translate("xpack.synthetics.header.appName",{defaultMessage:"Synthetics"}),links:[{linkType:"documentation",href:`${f.links.observability.monitorUptimeSynthetics}`},{linkType:"discuss",href:"https://discuss.elastic.co/c/uptime"}]}),setBadge:m,appMountParameters:n,setBreadcrumbs:e.chrome.setBreadcrumbs};return s.a.render(i.a.createElement(QM,v),n.element),()=>{a.data.search.session.clear(),s.a.unmountComponentAtNode(n.element)}}}])]);