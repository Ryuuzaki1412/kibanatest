/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.lens_bundle_jsonpfunction=window.lens_bundle_jsonpfunction||[]).push([[0],{101:function(e,t,o){"use strict";o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"a",(function(){return l})),o.d(t,"e",(function(){return c})),o.d(t,"b",(function(){return u}));var n=o(92),a=o.n(n);function r(e){try{return a()(e)}catch{return a()("red")}}function i(e,t,o=4.5){return a.a.contrast(r(e),t?"black":"white")>=o}function l(e,t){const[o,n,a]=r(e).rgb();return`rgba(${o},${n},${a},${t})`}function s(e){return r(e).hex().toLowerCase()}function c(e,t){return s(e)===s(t)}function u(e,t){const[o,n,i,l]=r(e).rgba(),[s,c,u,d]=r(t).rgba();if(1===l)return a.a.rgb(o,n,i).hex();const p=l+d*(1-l);return 0===p?"#00000000":`rgba(${Math.round((o*l+s*d*(1-l))/p)}, ${Math.round((n*l+c*d*(1-l))/p)}, ${Math.round((i*l+u*d*(1-l))/p)}, ${p})`}},107:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(38),a=o(7),r=n.__importDefault(o(216));t.default=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=[]);var n=r.default(e,t),i=n[0],l=n[1],s=n[2];return a.useEffect(s,o),[i,l]}},108:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));const n=["#54b399","#6092c0","#d36086","#9170b8","#ca8eae","#d6bf57","#b9a888","#da8b45","#aa6556","#e7664c"],a={id:"eui_amsterdam_color_blind",name:"Default",colorCount:n.length,type:"categorical",getColor:e=>n[e]}},124:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return l})),o.d(t,"c",(function(){return s}));var n=o(92),a=o.n(n),r=o(101);function i(e,t,o,n,a,r){switch(t.type){case"colorCode":case"categorical":return l(t,o,n);case"gradient":{if("categorical"===e.type)return"red";const t=s(e,o,n);return 0===r?"red":t(1===r?0:a/(r-1))}}}function l(e,t,o){return"colorCode"===e.type?e.colorCode:Object(r.c)(t(e.paletteId).getColor(e.colorIndex,o)).hex()}function s(e,t,o){const n=1===e.steps.length?[l(e.steps[0],t,o),Object(r.b)(Object(r.a)(l(e.steps[0],t,o),.3),o?"black":"white")]:e.steps.map((e=>l(e,t,o)));n.sort((()=>"asc"===e.sort?-1:1));const i=a.a.scale(n).mode("lab");return e=>i(e).hex()}o(154),o(240)},125:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return c}));var n=o(39);const a=Object(n.createSlice)({name:"colorMapping",initialState:{colorPicker:{index:0,visibile:!1,type:"assignment"}},reducers:{colorPickerVisibility:(e,t)=>{e.colorPicker.visibile=t.payload.visible,e.colorPicker.index=t.payload.index,e.colorPicker.type=t.payload.type},switchColorPickerVisibility:e=>{e.colorPicker.visibile=!e.colorPicker.visibile},showColorPickerVisibility:e=>{e.colorPicker.visibile=!0},hideColorPickerVisibility:e=>{e.colorPicker.visibile=!1}}}),{colorPickerVisibility:r,switchColorPickerVisibility:i,showColorPickerVisibility:l,hideColorPickerVisibility:s}=a.actions,c=a.reducer},145:function(e,t,o){"use strict";o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return u}));const n=["#20377d","#7de2d1","#ff957d","#f04e98","#0077cc","#fec514"],a={id:"elastic_brand_2023",name:"Elastic Brand",colorCount:n.length,type:"categorical",getColor:e=>n[e]};var r=o(108);const i=["#00a69b","#57c17b","#6f87d8","#663db8","#bc52bc","#9e3533","#daa05d"],l={id:"kibana_v7_legacy",name:"Kibana Legacy",colorCount:i.length,type:"categorical",getColor:e=>i[e]};var s=o(89);const c=new Map([[r.a.id,r.a],[a.id,a],[l.id,l],[s.a.id,s.a]]);function u(e,t){return o=>{var n;return null!==(n=e.get(o))&&void 0!==n?n:t}}},153:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));const n=o(0).i18n.translate("visualizationUiComponents.emptyTitle",{defaultMessage:"[Untitled]"})},154:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o(181);function a(e,t,o){const a="categorical"===o.type,r="categories"===e.type?e.categories.length:e.bins,i=a?Math.min(t.colorCount,r):Math.min(n.b,r);return("categories"===e.type?e.categories.map((e=>({type:"matchExactly",values:[e]}))):Array.from({length:e.bins},((t,o)=>{const n=(e.max-e.min)/e.bins;return{type:"range",min:e.max-o*n-n,max:e.max-o*n,minInclusive:!0,maxInclusive:!1}}))).slice(0,i).map(((e,o)=>a?{rule:e,color:{type:"categorical",paletteId:t.id,colorIndex:o},touched:!1}:{rule:e,color:{type:"gradient"},touched:!1}))}},181:function(e,t,o){"use strict";o.d(t,"b",(function(){return H})),o.d(t,"a",(function(){return Y}));var n=o(7),a=o.n(n),r=o(34),i=o(4),l=o(0),s=o(2),c=o(29),u=o(90);const d=({rule:e,updateValue:t,editable:o})=>{const n=e.min<=e.max,r=e.max>=e.min;return Object(s.jsx)(a.a.Fragment,null,Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFieldNumber,{compressed:!0,prepend:Object(s.jsx)(i.EuiButtonEmpty,{size:"xs",onClick:()=>t(e.min,e.max,!e.minInclusive,e.maxInclusive)},e.minInclusive?"GTE":"GT"),placeholder:"min",value:e.min,isInvalid:!n,disabled:!o,onChange:o=>t(+o.currentTarget.value,e.max,e.minInclusive,e.maxInclusive),"aria-label":"The min value"})),Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFieldNumber,{compressed:!0,isInvalid:!r,prepend:Object(s.jsx)(i.EuiButtonEmpty,{size:"xs",onClick:()=>t(e.min,e.max,e.minInclusive,!e.maxInclusive)},e.maxInclusive?"LTE":"LT"),placeholder:"max",disabled:!o,value:e.max,onChange:o=>t(e.min,+o.currentTarget.value,e.minInclusive,e.maxInclusive),"aria-label":"The max value"})))};var p=o(10);const g=({index:e,rule:t,updateValue:o,editable:n,options:a,specialTokens:r,assignmentValuesCounter:u})=>{var d;const g=l.i18n.translate("coloring.colorMapping.assignments.duplicateCategoryWarning",{defaultMessage:"This category has already been assigned a different color. Only the first matching assignment will be used."}),b="auto"===t.type?[]:"string"==typeof t.values?[{label:t.values,value:t.values,append:(null!==(d=u.get(t.values))&&void 0!==d?d:0)>1?Object(s.jsx)(i.EuiToolTip,{position:"bottom",content:g},Object(s.jsx)(i.EuiIcon,{size:"s",type:"warning",color:c.euiThemeVars.euiColorWarningText})):void 0}]:t.values.map((e=>{var t;return{label:(Array.isArray(e)?e:[e]).map((e=>{var t;return null!==(t=r.get(e))&&void 0!==t?t:e})).join(p.MULTI_FIELD_KEY_SEPARATOR),value:e,append:(null!==(t=u.get(e))&&void 0!==t?t:0)>1?Object(s.jsx)(i.EuiToolTip,{position:"bottom",content:g},Object(s.jsx)(i.EuiIcon,{size:"s",type:"warning",color:c.euiThemeVars.euiColorWarningText})):void 0}})),m=a.map((e=>({label:(Array.isArray(e)?e:[e]).map((e=>{var t;return null!==(t=r.get(e))&&void 0!==t?t:e})).join(p.MULTI_FIELD_KEY_SEPARATOR),value:e})));return Object(s.jsx)(i.EuiFlexItem,{style:{minWidth:1,width:1}},Object(s.jsx)(i.EuiComboBox,{"data-test-subj":`lns-colorMapping-assignmentsItem${e}`,isDisabled:!n,fullWidth:!0,"aria-label":l.i18n.translate("coloring.colorMapping.assignments.autoAssignedTermAriaLabel",{defaultMessage:"This color will be automatically assigned to the first term that doesn't match with all the other assignments"}),placeholder:l.i18n.translate("coloring.colorMapping.assignments.autoAssignedTermPlaceholder",{defaultMessage:"Auto assigned"}),options:m,selectedOptions:b,onChange:e=>{o(e.reduce(((e,t)=>(void 0!==t.value&&e.push(t.value),e)),[]))},onCreateOption:e=>{-1===b.findIndex((t=>t.label.toLowerCase()===e))&&o([...b,{label:e,value:e}].map((e=>e.value)))},isClearable:!1,compressed:!0}))};var b=o(101),m=o(89);function j({palette:e,isDarkMode:t,color:o,getPaletteFn:n,selectColor:r}){const c=Array.from({length:e.colorCount},((o,n)=>e.getColor(n,t))),u=Array.from({length:m.a.colorCount},((e,o)=>m.a.getColor(o,t))),d="categorical"===o.type?o.paletteId===m.a.id?m.a.getColor(o.colorIndex,t):n(o.paletteId).getColor(o.colorIndex,t):o.colorCode;return Object(s.jsx)(a.a.Fragment,null,Object(s.jsx)(i.EuiFlexGroup,{direction:"column",style:{padding:8}},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiText,{size:"s"},Object(s.jsx)("strong",null,l.i18n.translate("coloring.colorMapping.colorPicker.paletteColorsLabel",{defaultMessage:"Palette colors"}))),Object(s.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s",wrap:!0,alignItems:"center",justifyContent:"flexStart"},c.map(((t,o)=>Object(s.jsx)(i.EuiFlexItem,{key:t,grow:0},Object(s.jsx)(i.EuiColorPickerSwatch,{"data-test-subj":`lns-colorMapping-colorPicker-staticColor-${o}`,style:{border:Object(b.e)(t,d)?"2px solid black":"transparent"},color:t,onClick:()=>r({type:"categorical",paletteId:e.id,colorIndex:o})}))))))),Object(s.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(s.jsx)(i.EuiFlexGroup,{style:{padding:8,paddingTop:0}},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiText,{size:"s"},Object(s.jsx)("strong",null,l.i18n.translate("coloring.colorMapping.colorPicker.themeAwareColorsLabel",{defaultMessage:"Neutral colors"})),Object(s.jsx)(i.EuiToolTip,{position:"bottom",content:l.i18n.translate("coloring.colorMapping.colorPicker.themeAwareColorsTooltip",{defaultMessage:"The provided neutral colors are theme-aware and will change appropriately when switching between light and dark themes."})},Object(s.jsx)(i.EuiIcon,{tabIndex:0,type:"questionInCircle"}))),Object(s.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s",wrap:!0,alignItems:"center",justifyContent:"flexStart"},u.map(((e,t)=>Object(s.jsx)(i.EuiFlexItem,{key:e,grow:0},Object(s.jsx)(i.EuiColorPickerSwatch,{style:{border:Object(b.e)(e,d)?"2px solid black":"transparent"},"data-test-subj":`lns-colorMapping-colorPicker-neutralColor-${t}`,color:e,onClick:()=>r({type:"categorical",paletteId:m.a.id,colorIndex:t})}))))))))}var x=o(107),f=o.n(x),h=o(92),O=o.n(h),y={name:"10a8jpa",styles:"position:absolute;right:8px;top:6px"},M={name:"bjn8wh",styles:"position:relative"};function v({isDarkMode:e,color:t,getPaletteFn:o,selectColor:a,close:r}){const[u,d]=Object(n.useState)(t),p="categorical"===u.type?o(u.paletteId).getColor(u.colorIndex,e):u.colorCode,[g,m]=Object(n.useState)(p),j=Object(b.d)(p,!1,3),x=Object(b.d)(p,!0,3),h=[!1===j?"light":void 0,!1===x?"dark":void 0].filter(Boolean),v=!O.a.valid(g),C=!j||!x;f()((()=>{t!==u&&a(u)}),500,[t,u]);const I=v?c.euiThemeVars.euiColorDanger:C?c.euiThemeVars.euiColorWarning:"",k=v?c.euiThemeVars.euiColorDangerText:C?c.euiThemeVars.euiColorWarningText:"";return Object(s.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s",style:{padding:8}},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiColorPicker,{onChange:e=>{d({type:"colorCode",colorCode:e}),m(e)},color:p,display:"inline",swatches:[]})),Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)("div",{css:v||C?Object(s.css)("input{background-image:linear-gradient(\n                      to top,\n                      ",I,",\n                      ",I," 2px,\n                      transparent 2px,\n                      transparent 100%\n                    )!important;background-size:100%;padding-right:32px;}.euiFormErrorText{color:",k,"!important;}",""):void 0},Object(s.jsx)(i.EuiFormRow,null,Object(s.jsx)(i.EuiFlexGroup,{css:M},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFieldText,{placeholder:"#FF00FF",value:g,compressed:!0,onChange:e=>{const t=e.currentTarget.value;m(t),O.a.valid(t)&&d({type:"colorCode",colorCode:O()(t).hex()})},"aria-label":l.i18n.translate("coloring.colorMapping.colorPicker.hexColorinputAriaLabel",{defaultMessage:"hex color input"})})),(v||C)&&Object(s.jsx)("div",{css:y},Object(s.jsx)(i.EuiToolTip,{position:"bottom",content:v?l.i18n.translate("coloring.colorMapping.colorPicker.invalidColorHex",{defaultMessage:"Please use a valid color hex code"}):C?l.i18n.translate("coloring.colorMapping.colorPicker.lowContrastColor",{defaultMessage:"This color has a low contrast in {themes} {errorModes, plural, one {mode} other {# modes}}",values:{themes:h.join(","),errorModes:h.length}}):void 0},Object(s.jsx)(i.EuiIcon,{tabIndex:0,type:"warning",color:v?c.euiThemeVars.euiColorDangerText:C?c.euiThemeVars.euiColorWarningText:c.euiThemeVars.euiColorPrimary}))))))))}function C({palette:e,getPaletteFn:t,color:o,close:r,selectColor:c,isDarkMode:u,deleteStep:d}){const[p,g]=Object(n.useState)("categorical"!==o.type||o.paletteId!==e.id&&o.paletteId!==m.a.id?"custom":"palette");return Object(s.jsx)("div",{style:{width:168}},Object(s.jsx)(i.EuiPopoverTitle,{paddingSize:"none",style:{borderBottom:"none"}},Object(s.jsx)(i.EuiTabs,{size:"m",expand:!0},Object(s.jsx)(i.EuiTab,{onClick:()=>g("palette"),isSelected:"palette"===p},Object(s.jsx)(i.EuiTitle,{size:"xxxs"},Object(s.jsx)("span",null,l.i18n.translate("coloring.colorMapping.colorPicker.paletteTabLabel",{defaultMessage:"Colors"})))),Object(s.jsx)(i.EuiTab,{onClick:()=>g("custom"),isSelected:"custom"===p},Object(s.jsx)(i.EuiTitle,{size:"xxxs"},Object(s.jsx)("span",null,l.i18n.translate("coloring.colorMapping.colorPicker.customTabLabel",{defaultMessage:"Custom"})))))),"palette"===p?Object(s.jsx)(j,{color:o,getPaletteFn:t,palette:e,selectColor:c,isDarkMode:u}):Object(s.jsx)(v,{color:o,getPaletteFn:t,isDarkMode:u,selectColor:c,palette:e,close:r}),d?Object(s.jsx)(a.a.Fragment,null,Object(s.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(s.jsx)(i.EuiButtonEmpty,{color:"danger",size:"xs",iconType:"trash",onClick:()=>{r(),d()},style:{paddingBottom:8}},l.i18n.translate("coloring.colorMapping.colorPicker.removeGradientColorButtonLabel",{defaultMessage:"Remove color step"}))):null)}var I=o(124);function k(e){return e.colorMapping.colorMode}function w(e){return e.colorMapping.specialAssignments}function E(e){return"auto"===e.colorMapping.assignmentMode}function S(e){return e.ui.colorPicker}var P=o(125);const T=({colorMode:e,assignmentColor:t,getPaletteFn:o,canPickColor:n,index:a,total:c,palette:d,onColorChange:p,swatchShape:g,isDarkMode:m,forType:j})=>{const x=Object(r.useSelector)(S),f=Object(r.useDispatch)(),h=x.index===a&&x.type===j&&x.visibile,O=Object(I.a)(e,t,o,m,a,c),y=Object(i.isColorDark)(...Object(b.c)(O).rgb()),M=Object(i.useEuiTheme)();return n&&"gradient"!==t.type?Object(s.jsx)(i.EuiPopover,{panelPaddingSize:"none",isOpen:h,repositionOnScroll:!0,closePopover:()=>f(Object(P.b)()),anchorPosition:"upLeft",button:"round"===g?Object(s.jsx)("button",{"aria-label":l.i18n.translate("coloring.colorMapping.colorPicker.pickAColorAriaLabel",{defaultMessage:"Pick a color"}),"data-test-subj":`lns-colorMapping-colorSwatch-${a}`,onClick:()=>f(h?Object(P.b)():Object(P.a)({index:a,visible:!0,type:j})),css:Object(s.css)("background:",O,";width:16px;height:16px;border-radius:50%;top:8px;border:3px solid white;",Object(i.euiShadowSmall)(M),";backgroundcolor:",O,";cursor:",n?"pointer":"not-allowed",";","")}):Object(s.jsx)(i.EuiColorPickerSwatch,{color:O,"aria-label":l.i18n.translate("coloring.colorMapping.colorPicker.pickAColorAriaLabel",{defaultMessage:"Pick a color"}),"data-test-subj":`lns-colorMapping-colorSwatch-${a}`,onClick:()=>f(h?Object(P.b)():Object(P.a)({index:a,visible:!0,type:j})),style:{backgroundColor:O,cursor:n?"pointer":"not-allowed",width:32,height:32},css:Object(s.css)("&::after{content:'';width:0;height:0;border-left:3px solid transparent;border-right:3px solid transparent;border-top:4px solid ",y?"white":"black",";margin:0;bottom:2px;position:absolute;right:2px;}","")})},Object(s.jsx)(C,{key:"categorical"===t.type?`${t.colorIndex}-${t.paletteId}`:t.colorCode,color:t,palette:d,getPaletteFn:o,close:()=>f(Object(P.b)()),isDarkMode:m,selectColor:e=>{p(e)},deleteStep:"gradient"===e.type&&c>1?()=>f(Object(u.h)(a)):void 0})):Object(s.jsx)(i.EuiColorPickerSwatch,{color:O,"aria-label":l.i18n.translate("coloring.colorMapping.colorPicker.newColorAriaLabel",{defaultMessage:"Select a new color"}),disabled:!0,style:{backgroundColor:O,cursor:"not-allowed",width:32,height:32}})};function F({data:e,assignment:t,disableDelete:o,index:n,total:a,canPickColor:p,editable:b,palette:m,colorMode:j,getPaletteFn:x,isDarkMode:f,specialTokens:h,assignmentValuesCounter:O}){const y=Object(r.useDispatch)();return Object(s.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"flexStart",justifyContent:"spaceBetween"},Object(s.jsx)(i.EuiFlexItem,{grow:0},Object(s.jsx)(T,{forType:"assignment",isDarkMode:f,swatchShape:"square",canPickColor:p,colorMode:j,assignmentColor:t.color,getPaletteFn:x,index:n,palette:m,total:a,onColorChange:e=>{y(Object(u.i)({assignmentIndex:n,color:e}))}})),"auto"===t.rule.type||"matchExactly"===t.rule.type||"matchExactlyCI"===t.rule.type?Object(s.jsx)(g,{editable:b,index:n,rule:t.rule,options:"categories"===e.type?e.categories:[],specialTokens:h,updateValue:e=>{y(Object(u.j)({assignmentIndex:n,rule:0===e.length?{type:"auto"}:{type:"matchExactly",values:e}}))},assignmentValuesCounter:O}):"range"===t.rule.type?Object(s.jsx)(d,{rule:t.rule,editable:b,updateValue:(e,t,o,a)=>{const r={type:"range",min:e,max:t,minInclusive:o,maxInclusive:a};y(Object(u.j)({assignmentIndex:n,rule:r}))}}):null,Object(s.jsx)(i.EuiFlexItem,{grow:0},Object(s.jsx)(i.EuiButtonIcon,{iconType:"trash",size:"xs",disabled:o,onClick:()=>y(Object(u.g)(n)),"aria-label":l.i18n.translate("coloring.colorMapping.assignments.deleteAssignmentButtonLabel",{defaultMessage:"Delete this assignment"}),color:"danger",css:o?void 0:Object(s.css)("color:",c.euiThemeVars.euiTextSubduedColor,";transition:",c.euiThemeVars.euiAnimSpeedFast," ease-in-out;transition-property:color;&:hover,&:focus{color:",c.euiThemeVars.euiColorDangerText,";}","")})))}function D({assignment:e,index:t,palette:o,getPaletteFn:n,isDarkMode:a,total:c}){const d=Object(r.useDispatch)();return Object(s.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(s.jsx)(i.EuiFlexItem,{grow:0},Object(s.jsx)(T,{forType:"specialAssignment",canPickColor:!0,colorMode:{type:"categorical"},assignmentColor:e.color,getPaletteFn:n,index:t,palette:o,total:c,swatchShape:"square",isDarkMode:a,onColorChange:e=>{d(Object(u.n)({assignmentIndex:t,color:e}))}})),Object(s.jsx)(i.EuiFlexItem,{style:{marginRight:32}},Object(s.jsx)(i.EuiFieldText,{compressed:!0,fullWidth:!0,disabled:!0,placeholder:l.i18n.translate("coloring.colorMapping.assignments.unassignedPlaceholder",{defaultMessage:"Unassigned terms"}),"aria-label":l.i18n.translate("coloring.colorMapping.assignments.unassignedAriaLabel",{defaultMessage:"Assign this color to every unassigned not described in the assignment list"})})))}var A=o(239);function z(e,t,o,n,a,r){const i=a(n),l="categorical"===i.type?i.colorCount:H;return"auto"===t?[]:e.map((({rule:e,color:t,touched:a},i)=>r&&a?{rule:e,color:t,touched:a}:{rule:e,color:"categorical"===o.type?{type:"categorical",paletteId:i<l?n:m.a.id,colorIndex:i<l?i:0}:{type:"gradient"},touched:!1}))}function L(e,t,o){return"categorical"===e.type?e:{type:"gradient",steps:e.steps.map(((e,n)=>o?e:{type:"categorical",paletteId:t,colorIndex:n,touched:!1})),sort:e.sort}}function _(e,t,o){if("categorical"===t.type){const t="categorical"===e.type?e.colorCount:H,n=new Set(Array.from({length:t},((e,t)=>t)));return o.forEach((({color:t})=>{"categorical"===t.type&&t.paletteId===e.id&&n.delete(t.colorIndex)})),{type:"categorical",paletteId:n.size>0?e.id:m.a.id,colorIndex:n.size>0?[...n][0]:A.b}}return{type:"gradient"}}function V({palettes:e,getPaletteFn:t,isDarkMode:o}){const c=Object(r.useDispatch)(),d=Object(r.useSelector)((e=>e.colorMapping.colorMode)),p=Object(r.useSelector)((e=>e.colorMapping)),{paletteId:g}=p,b=Object(n.useCallback)(((e,o)=>{c(Object(u.m)({paletteId:e,assignments:z(p.assignments,p.assignmentMode,p.colorMode,e,t,o),colorMode:L(p.colorMode,e,o)}))}),[t,p,c]),m=Object(n.useCallback)(((e,o)=>{const n="gradient"===e?{type:"gradient",steps:[{type:"categorical",paletteId:g,colorIndex:0,touched:!1}],sort:"desc"}:{type:"categorical"},a=z(p.assignments,p.assignmentMode,n,g,t,o);c(Object(u.m)({paletteId:g,assignments:a,colorMode:n}))}),[t,p,c,g]),[j,x]=Object(n.useState)(null),f=null!==j?Object(s.jsx)(i.EuiConfirmModal,{title:l.i18n.translate("coloring.colorMapping.colorChangesModal.title",{defaultMessage:"Color changes detected"}),onCancel:()=>{j&&b(j,!0),x(null)},onConfirm:()=>{j&&b(j,!1),x(null)},confirmButtonText:l.i18n.translate("coloring.colorMapping.colorChangesModal.discardButton",{defaultMessage:"Discard changes"}),cancelButtonText:l.i18n.translate("coloring.colorMapping.colorChangesModal.preserveButton",{defaultMessage:"Preserve changes"}),buttonColor:"danger",defaultFocusedButton:"confirm"},Object(s.jsx)("p",null,l.i18n.translate("coloring.colorMapping.colorChangesModal.switchPaletteDescription",{defaultMessage:"Switching palette will discard all your custom color changes"}))):null,[h,O]=Object(n.useState)(null),y=null!==h?Object(s.jsx)(i.EuiConfirmModal,{title:l.i18n.translate("coloring.colorMapping.colorChangesModal.modalTitle",{defaultMessage:"Color changes detected"}),onCancel:()=>{O(null)},onConfirm:()=>{h&&m(h,!1),O(null)},cancelButtonText:l.i18n.translate("coloring.colorMapping.colorChangesModal.goBackButtonLabel",{defaultMessage:"Go back"}),confirmButtonText:l.i18n.translate("coloring.colorMapping.colorChangesModal.discardButtonLabel",{defaultMessage:"Discard changes"}),defaultFocusedButton:"confirm",buttonColor:"danger"},Object(s.jsx)("p",null,"categorical"===h?l.i18n.translate("coloring.colorMapping.colorChangesModal.categoricalModeDescription",{defaultMessage:"Switching to a categorical mode will discard all your custom color changes"}):l.i18n.translate("coloring.colorMapping.colorChangesModal.sequentialModeDescription",{defaultMessage:"Switching to a sequential mode will discard all your custom color changes"}))):null;return Object(s.jsx)(a.a.Fragment,null,f,y,Object(s.jsx)(i.EuiFlexGroup,{direction:"row"},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFormRow,{label:l.i18n.translate("coloring.colorMapping.paletteSelector.paletteLabel",{defaultMessage:"Color palette"})},Object(s.jsx)(i.EuiColorPalettePicker,{"data-test-subj":"kbnColoring_ColorMapping_PalettePicker",palettes:[...e.values()].filter((e=>"Neutral"!==e.name)).map((e=>({"data-test-subj":`kbnColoring_ColorMapping_Palette-${e.id}`,value:e.id,title:e.name,palette:Array.from({length:e.colorCount},((t,n)=>e.getColor(n,o))),type:"fixed"}))),onChange:e=>{const t=p.assignments.some((e=>e.touched)),o="gradient"===p.colorMode.type&&p.colorMode.steps.some((e=>e.touched));t||o?x(e):b(e,!1)},valueOfSelected:p.paletteId,selectionDisplay:"palette",compressed:!0}))),Object(s.jsx)(i.EuiFlexItem,{grow:0},Object(s.jsx)(i.EuiFormRow,{label:l.i18n.translate("coloring.colorMapping.paletteSelector.scaleLabel",{defaultMessage:"Scale"})},Object(s.jsx)(i.EuiButtonGroup,{legend:"Scale","data-test-subj":"lns_colorMapping_scaleSwitch",options:[{id:"categorical",label:l.i18n.translate("coloring.colorMapping.paletteSelector.categoricalLabel",{defaultMessage:"Categorical"}),iconType:"palette"},{id:"gradient",label:l.i18n.translate("coloring.colorMapping.paletteSelector.sequentialLabel",{defaultMessage:"Sequential"}),iconType:"gradient"}],isFullWidth:!0,buttonSize:"compressed",idSelected:d.type,onChange:e=>{const t=p.assignments.some((e=>e.touched)),o="gradient"===p.colorMode.type&&p.colorMode.steps.some((e=>e.touched));t||o?O(e):m(e,!1)},isIconOnly:!0})))))}var B=o(154),R=o(145),G={name:"1yzfxxo",styles:"position:absolute;width:16px;height:16px;top:calc(50% - 5px);margin-left:-6px;margin-top:-3px"},N={name:"ztjfm7",styles:"position:relative;grid-column:1;grid-row:1;margin-top:8px"};function $({paletteId:e,colorMode:t,getPaletteFn:o,isDarkMode:n,assignmentsSize:r}){if("categorical"===t.type)return null;const i=o(e),l=Object(I.c)(t,o,n),u="asc"===t.sort?1===t.steps.length?void 0:t.steps.at(-1):t.steps.at(0),d="asc"===t.sort?1===t.steps.length?NaN:t.steps.length-1:0,p="asc"===t.sort?t.steps.at(0):1===t.steps.length?void 0:t.steps.at(-1),g="asc"===t.sort?0:1===t.steps.length?NaN:t.steps.length-1,m=3===t.steps.length?t.steps[1]:void 0,j=3===t.steps.length?1:NaN;return Object(s.jsx)(a.a.Fragment,null,r>1&&Object(s.jsx)("div",{className:"gradientLine",css:Object(s.css)("position:relative;grid-column:1;grid-row:1;width:6px;margin-left:5px;top:16px;height:calc(100% - 12px);border-top-left-radius:6px;border-top-right-radius:6px;background-image:linear-gradient(\n              to bottom,\n              ",[l(0),l(1/r)].join(","),"\n            );border-left:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";border-top:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";border-right:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";","")}),Object(s.jsx)("div",{className:"gradientStop",css:N},u?Object(s.jsx)(U,{colorMode:t,step:u,index:d,currentPalette:i,getPaletteFn:o,isDarkMode:n}):Object(s.jsx)(q,{colorMode:t,currentPalette:i,at:1})),r>1&&Object(s.jsx)("div",{className:"gradientLine",css:Object(s.css)("position:relative;z-index:1;grid-column:1;grid-row-start:2;grid-row-end:",r,";background-image:linear-gradient(\n              to bottom,\n              ",[l(1/r),l((r-1)/r)].join(","),"\n            );margin:-4px 0;width:6px;margin-left:5px;",2===r?"height: 0;":"",";border-left:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";border-right:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";","")},Object(s.jsx)("div",{css:G},m?Object(s.jsx)(U,{colorMode:t,step:m,index:j,currentPalette:i,getPaletteFn:o,isDarkMode:n}):2===t.steps.length?Object(s.jsx)(q,{colorMode:t,currentPalette:i,at:1}):void 0)),r>1&&Object(s.jsx)("div",{className:"gradientLine",css:Object(s.css)("position:relative;grid-column:1;grid-row:",r,";background-image:linear-gradient(\n              to bottom,\n\n              ",[l((r-1)/r),l(1)].join(","),"\n            );top:-4px;height:24px;width:6px;margin-left:5px;border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-left:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";border-bottom:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";border-right:1px solid ",Object(b.a)(c.euiThemeVars.euiColorDarkestShade,.2),";","")}),Object(s.jsx)("div",{css:Object(s.css)("position:relative;grid-column:1;grid-row:",r,";width:16px;height:16px;margin-top:8px;","")},p?Object(s.jsx)(U,{colorMode:t,step:p,index:g,currentPalette:i,getPaletteFn:o,isDarkMode:n}):Object(s.jsx)(q,{colorMode:t,currentPalette:i,at:1})))}var W={name:"8ighe1",styles:"position:absolute;top:0.5px;left:0;transition:200ms fill;&:hover{fill:white;}"};function q({colorMode:e,currentPalette:t,at:o}){const n=Object(i.useEuiTheme)(),a=Object(r.useDispatch)();return Object(s.jsx)("button",{css:Object(s.css)("position:relative;border-radius:50%;width:17px;height:17px;padding:0 0.5px;",Object(i.euiFocusRing)(n),";",""),onClick:()=>{a(Object(u.a)({color:{type:"categorical",colorIndex:e.steps.length,paletteId:t.id},at:o})),a(Object(P.a)({index:o,type:"gradient",visible:!0}))}},Object(s.jsx)("div",{css:Object(s.css)("width:15px;height:15px;border-radius:50%;transition:200ms background-color;background-color:lightgrey;&:hover{background-color:#696f7d;}",Object(i.euiShadowSmall)(n),";","")},Object(s.jsx)(i.EuiIcon,{type:"plus",css:W,color:"#696f7d"})))}function U({colorMode:e,step:t,index:o,currentPalette:n,getPaletteFn:a,isDarkMode:i}){const l=Object(r.useDispatch)();return Object(s.jsx)(T,{canPickColor:!0,colorMode:e,assignmentColor:t,getPaletteFn:a,index:o,palette:n,total:e.steps.length,swatchShape:"round",isDarkMode:i,onColorChange:e=>{l(Object(u.k)({index:o,color:e}))},forType:"gradient"})}const H=10;var K={name:"1oaeivz",styles:"margin-right:8px"};function Y(e){const t=Object(r.useDispatch)(),o=Object(R.b)(e.palettes,m.a),n=Object(r.useSelector)(function(e){return t=>e(t.colorMapping.paletteId)}(o)),a=Object(r.useSelector)(k),c=Object(r.useSelector)(E),d=Object(r.useSelector)(function(e,t,o){return n=>"auto"===n.colorMapping.assignmentMode?Object(B.a)(e,t,o):n.colorMapping.assignments}(e.data,n,a)),p=Object(r.useSelector)(w),g=!c&&d.length<H,b=d.reduce(((e,t)=>(("matchExactly"===t.rule.type?t.rule.values:[]).forEach((t=>{var o;e.set(t,(null!==(o=e.get(t))&&void 0!==o?o:0)+1)})),e)),new Map);return Object(s.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s",justifyContent:"flexStart"},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(V,{palettes:e.palettes,getPaletteFn:o,isDarkMode:e.isDarkMode})),Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFlexGroup,{direction:"row"},Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiFormLabel,null,l.i18n.translate("coloring.colorMapping.container.mappingAssignmentHeader",{defaultMessage:"Mapping assignments"}))),Object(s.jsx)(i.EuiFlexItem,{grow:0},Object(s.jsx)(i.EuiSwitch,{"data-test-subj":"lns-colorMapping-autoAssignSwitch",label:Object(s.jsx)(i.EuiText,{size:"xs"},l.i18n.translate("coloring.colorMapping.container.autoAssignLabel",{defaultMessage:"Auto assign"})),checked:c,compressed:!0,onChange:()=>{t(c?Object(u.d)(d):Object(u.c)())}})))),Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiPanel,{color:"subdued",borderRadius:"none",hasShadow:!1,paddingSize:"s"},Object(s.jsx)("div",{"data-test-subj":"lns-colorMapping-assignmentsList",css:Object(s.css)("display:grid;grid-template-columns:","gradient"===a.type?"[gradient] 16px":""," [assignment] auto;gap:8px;","")},"gradient"!==a.type?null:Object(s.jsx)($,{colorMode:a,getPaletteFn:o,isDarkMode:e.isDarkMode,paletteId:n.id,assignmentsSize:d.length}),d.map(((t,r)=>Object(s.jsx)("div",{key:r,css:Object(s.css)("position:relative;grid-column:","gradient"===a.type?2:1,";grid-row:",r+1,";width:100%;","")},Object(s.jsx)(F,{data:e.data,index:r,total:d.length,colorMode:a,editable:!c,canPickColor:!c&&"gradient"!==a.type,palette:n,isDarkMode:e.isDarkMode,getPaletteFn:o,assignment:t,disableDelete:d.length<=1||c,specialTokens:e.specialTokens,assignmentValuesCounter:b}))))),Object(s.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(s.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s"},Object(s.jsx)(i.EuiFlexItem,{"data-test-subj":"lns-colorMapping-specialAssignmentsList"},"categories"===e.data.type&&p.map(((t,a)=>Object(s.jsx)(D,{key:a,index:a,palette:n,isDarkMode:e.isDarkMode,getPaletteFn:o,assignment:t,total:p.length})))))),Object(s.jsx)(i.EuiFlexGroup,{direction:"row"},Object(s.jsx)(i.EuiFlexItem,{style:{display:"block"}},Object(s.jsx)(i.EuiButtonEmpty,{"data-test-subj":"lns-colorMapping-addNewAssignment",iconType:"plusInCircleFilled",size:"xs",flush:"both",onClick:()=>{t(Object(u.b)({rule:"categories"===e.data.type?{type:"matchExactly",values:[]}:{type:"range",min:0,max:0,minInclusive:!0,maxInclusive:!0},color:_(n,a,d),touched:!1}))},disabled:!g,css:K},l.i18n.translate("coloring.colorMapping.container.addAssignmentButtonLabel",{defaultMessage:"Add assignment"})),"gradient"===a.type&&Object(s.jsx)(i.EuiButtonEmpty,{flush:"both","data-test-subj":"lns-colorMapping-invertGradient",iconType:"sortable",size:"xs",onClick:()=>{t(Object(u.e)("asc"===a.sort?"desc":"asc"))}},l.i18n.translate("coloring.colorMapping.container.invertGradientButtonLabel",{defaultMessage:"Invert gradient"}))))))}},216:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(7);t.default=function(e,t){void 0===t&&(t=0);var o=n.useRef(!1),a=n.useRef(),r=n.useRef(e),i=n.useCallback((function(){return o.current}),[]),l=n.useCallback((function(){o.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){o.current=!0,r.current()}),t)}),[t]),s=n.useCallback((function(){o.current=null,a.current&&clearTimeout(a.current)}),[]);return n.useEffect((function(){r.current=e}),[e]),n.useEffect((function(){return l(),s}),[t]),[i,s,l]}},239:function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return s})),o.d(t,"c",(function(){return c}));var n=o(145),a=o(108),r=o(89),i=o(124);const l=1,s={assignmentMode:"auto",assignments:[],specialAssignments:[{rule:{type:"other"},color:{type:"categorical",paletteId:r.a.id,colorIndex:l},touched:!1}],paletteId:a.a.id,colorMode:{type:"categorical"}};function c(e,t){const{colorMode:o,paletteId:a,assignmentMode:l,assignments:c,specialAssignments:u}=null!=t?t:{...s},d=Object(n.b)(n.a,r.a);if("gradient"===o.type){const t=Object(i.c)(o,d,e);return Array.from({length:6},((e,o)=>t(o/6)))}{const t=d(a);return"auto"===l?Array.from({length:t.colorCount},((o,n)=>t.getColor(n,e))):[...c.map((t=>"gradient"===t.color.type?"":Object(i.b)(t.color,d,e))),...u.map((t=>Object(i.b)(t.color,d,e)))].filter((e=>""!==e))}}},240:function(e,t,o){"use strict";o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return r}));var n=o(0);function a(e,t){switch(e.type){case"matchExactly":return Array.isArray(t)?e.values.some((e=>Array.isArray(e)&&e.length===t.length&&e.every(((e,o)=>e===t[o])))):e.values.includes(`${t}`);case"matchExactlyCI":return e.values.some((e=>e.toLowerCase()===`${t}`));case"range":return"number"==typeof t&&function(e,t){return e.min===e.max&&e.min===t||(e.minInclusive?t>=e.min:t>e.min)&&(e.maxInclusive?t<=e.max:t<e.max)}(e,t);default:return!1}}const r=new Map([["__other__",n.i18n.translate("coloring.colorMapping.terms.otherBucketLabel",{defaultMessage:"Other"})],["",n.i18n.translate("coloring.colorMapping.terms.emptyLabel",{defaultMessage:"(empty)"})]])},70:function(e,t,o){"use strict";o.r(t),o.d(t,"getVisualizeGeoFieldMessage",(function(){return p})),o.d(t,"getResolvedDateRange",(function(){return g})),o.d(t,"containsDynamicMath",(function(){return b})),o.d(t,"getTimeZone",(function(){return m})),o.d(t,"getActiveDatasourceIdFromDoc",(function(){return j})),o.d(t,"getActiveVisualizationIdFromDoc",(function(){return x})),o.d(t,"getInitialDatasourceId",(function(){return f})),o.d(t,"getInitialDataViewsObject",(function(){return h})),o.d(t,"refreshIndexPatternsList",(function(){return O})),o.d(t,"extractReferencesFromState",(function(){return y})),o.d(t,"getIndexPatternsIds",(function(){return M})),o.d(t,"getIndexPatternsObjects",(function(){return v})),o.d(t,"getRemoveOperation",(function(){return C})),o.d(t,"inferTimeField",(function(){return I})),o.d(t,"renewIDs",(function(){return k})),o.d(t,"DONT_CLOSE_DIMENSION_CONTAINER_ON_CLICK_CLASS",(function(){return w})),o.d(t,"isDraggedField",(function(){return E})),o.d(t,"isDraggedDataViewField",(function(){return S})),o.d(t,"isOperationFromCompatibleGroup",(function(){return P})),o.d(t,"isOperationFromTheSameGroup",(function(){return T})),o.d(t,"sortDataViewRefs",(function(){return F})),o.d(t,"getSearchWarningMessages",(function(){return D})),o.d(t,"getUniqueLabelGenerator",(function(){return z})),o.d(t,"nonNullable",(function(){return L})),o.d(t,"reorderElements",(function(){return _})),o.d(t,"shouldRemoveSource",(function(){return V})),o.d(t,"getColorMappingDefaults",(function(){return B}));var n=o(61),a=o(27),r=o(0),i=o(54),l=o.n(i),s=o(239),c=o(153),u=o(81),d=o(3);function p(e){return r.i18n.translate("xpack.lens.visualizeGeoFieldMessage",{defaultMessage:"Lens cannot visualize {fieldType} fields",values:{fieldType:e}})}const g=function(e){const{from:t,to:o}=e.getTime(),{min:n,max:a}=e.calculateBounds({from:t,to:o});return{fromDate:(null==n?void 0:n.toISOString())||t,toDate:(null==a?void 0:a.toISOString())||o}};function b(e){return e.includes("now")}function m(e){const t=e.get("dateFormat:tz");return"Browser"===t?l.a.tz.guess():t}function j(e){if(!e)return null;const[t]=Object.keys(e.state.datasourceStates);return t||null}function x(e){return e&&e.visualizationType||null}const f=(e,t)=>t&&j(t)||Object.keys(e)[0]||null;function h(e,t){return{indexPatterns:e,indexPatternRefs:t}}async function O({activeDatasources:e,indexPatternService:t,indexPatternId:o,indexPatternsCache:n}){const a=Object.values(e).map((e=>null==e?void 0:e.onRefreshIndexPattern)).filter(Boolean),r=(await t.loadIndexPatterns({cache:{},patterns:[o],onIndexPatternRefresh:()=>a.forEach((e=>e()))}))[o];t.updateDataViewsState({indexPatterns:{...n,[o]:r}})}function y({activeDatasources:e,datasourceStates:t,visualizationState:o,activeVisualization:n}){const a=[];if(Object.entries(e).forEach((([e,o])=>{const{savedObjectReferences:n}=o.getPersistableState(t[e].state);a.push(...n)})),null!=n&&n.getPersistableState){const{savedObjectReferences:e}=n.getPersistableState(o);a.push(...e)}return a}function M({activeDatasources:e,datasourceStates:t,visualizationState:o,activeVisualization:n}){const r=y({activeDatasources:e,datasourceStates:t,visualizationState:o,activeVisualization:n}),i=Object.entries(e).reduce(((e,[o,n])=>null==e?n.getUsedDataView(t[o].state):e),void 0),l=r.filter((({type:e})=>"index-pattern"===e)).map((({id:e})=>e));return i&&l.unshift(i),Object(a.uniq)(l)}async function v(e,t){const o=await Promise.allSettled(e.map((e=>t.get(e)))),n=o.filter((e=>"fulfilled"===e.status)),a=o.map(((t,o)=>e[o])).filter(((e,t)=>"rejected"===o[t].status));return{indexPatterns:n.map((e=>e.value)),rejectedIds:a}}function C(e,t,o,n){return e.getRemoveOperation?e.getRemoveOperation(t,o):1===n?"clear":"remove"}function I(e,t){const o=function(e){return"negate"in e.data&&e.data.negate?[]:Object(u.a)(e)?[{table:e.data.table,column:e.data.column}]:Object(u.d)(e)?e.data.data.map((({table:e,cells:t})=>({table:e,column:t[0].column}))):Object(u.c)(e)?e.data.data:e.data}(t);return Array.isArray(o)?o.map((({table:t,column:o})=>{var n;const a=t.columns[o];if(Boolean(a&&(null===(n=e.getDateHistogramMeta(a))||void 0===n?void 0:n.timeRange)))return a.meta.field})).find(Boolean):[o]}function k(e,t,o){e=Object(a.cloneDeep)(e);const r=(e,a,i)=>{if("object"==typeof e)Array.isArray(e)?e.forEach(((e,t,o)=>r(e,o,t))):e&&Object.keys(e).forEach((n=>{let a=n;var i;t.includes(n)&&(a=null!==(i=o(n))&&void 0!==i?i:n,e[a]=e[n],delete e[n]),r(e[a],e,a)}));else if(a&&void 0!==i&&"string"==typeof e&&t.includes(e)){var l;Object(n.set)(a,i,null!==(l=o(e))&&void 0!==l?l:e)}};return r(e),e}const w="lensDontCloseDimensionContainerOnClick";function E(e){return"object"==typeof e&&null!==e&&["id","field"].every((t=>t in e))}function S(e){return"object"==typeof e&&null!==e&&["id","field","indexPatternId"].every((t=>t in e))}const P=(e,t)=>Object(u.g)(e)&&Object(u.g)(t)&&e.columnId!==t.columnId&&e.groupId===t.groupId&&e.layerId!==t.layerId,T=(e,t)=>Object(u.g)(e)&&Object(u.g)(t)&&e.columnId!==t.columnId&&e.groupId===t.groupId&&e.layerId===t.layerId,F=e=>e.sort(((e,t)=>e.title.localeCompare(t.title))),D=(e,t,o,n)=>{const a=[];return n.searchService.showWarnings(e,((e,n)=>{var r;const{request:i,response:l}=n,s=null===(r=t.getSearchWarningMessages)||void 0===r?void 0:r.call(t,o,e,i,l);return!(null==s||!s.length||(a.push(...s),0))})),a};function A(e){return e.trim().length?e:c.a}function z(){const e={};return function(t){let o=A(t);for(;e[o]>=0;){const n=++e[o];o=r.i18n.translate("xpack.lens.uniqueLabel",{defaultMessage:"{label} [{num}]",values:{label:A(t),num:n}})}return e[o]=0,o}}function L(e){return null!=e}function _(e,t,o){const n=e.filter((e=>e!==o)),a=e.findIndex((e=>e===o)),r=e.findIndex((e=>e===t)),i=n.indexOf(t);return n.splice(a<r?i+1:i,0,o),n}function V(e,t){return Object(u.g)(e)&&("move_compatible"===t||"move_incompatible"===t||"combine_incompatible"===t||"combine_compatible"===t||"replace_compatible"===t||"replace_incompatible"===t)}const B=()=>{if(!d.COLOR_MAPPING_OFF_BY_DEFAULT)return{...s.a}}},81:function(e,t,o){"use strict";function n(e){return Boolean(e.uniqueId)}function a(e){return"object"==typeof e&&null!==e&&"columnId"in e}function r(e){return"filter"===e.name}function i(e){return"multiFilter"===e.name}function l(e){return"brush"===e.name}function s(e){return"edit"===e.name}function c(e){return"tableRowContextMenuClick"===e.name}o.d(t,"f",(function(){return n})),o.d(t,"g",(function(){return a})),o.d(t,"c",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"a",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"e",(function(){return c}))},89:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));const n=["#f2f4fb","#d4d9e5","#98a2b3","#696f7d","#353642"],a=n.slice(),r=n.slice().reverse(),i={id:"neutral",name:"Neutral",colorCount:a.length,type:"categorical",getColor:(e,t)=>t?r[e]:a[e]}},90:function(e,t,o){"use strict";o.d(t,"m",(function(){return r})),o.d(t,"d",(function(){return i})),o.d(t,"c",(function(){return l})),o.d(t,"b",(function(){return s})),o.d(t,"i",(function(){return u})),o.d(t,"n",(function(){return d})),o.d(t,"j",(function(){return p})),o.d(t,"g",(function(){return g})),o.d(t,"k",(function(){return m})),o.d(t,"h",(function(){return j})),o.d(t,"a",(function(){return x})),o.d(t,"e",(function(){return f})),o.d(t,"l",(function(){return h})),o.d(t,"f",(function(){return O}));var n=o(39);const a=Object(n.createSlice)({name:"colorMapping",initialState:{assignmentMode:"auto",assignments:[],specialAssignments:[],paletteId:"eui",colorMode:{type:"categorical"}},reducers:{updateModel:(e,t)=>{e.assignmentMode=t.payload.assignmentMode,e.assignments=[...t.payload.assignments],e.specialAssignments=[...t.payload.specialAssignments],e.paletteId=t.payload.paletteId,e.colorMode={...t.payload.colorMode}},updatePalette:(e,t)=>{e.paletteId=t.payload.paletteId,e.assignments=[...t.payload.assignments],e.colorMode={...t.payload.colorMode}},assignStatically:(e,t)=>{e.assignmentMode="manual",e.assignments=[...t.payload]},assignAutomatically:e=>{e.assignmentMode="auto",e.assignments=[]},addNewAssignment:(e,t)=>{e.assignments.push({...t.payload})},updateAssignment:(e,t)=>{e.assignments[t.payload.assignmentIndex]={...t.payload.assignment,touched:!0}},updateAssignmentRule:(e,t)=>{e.assignments[t.payload.assignmentIndex]={...e.assignments[t.payload.assignmentIndex],rule:t.payload.rule}},updateAssignmentColor:(e,t)=>{e.assignments[t.payload.assignmentIndex]={...e.assignments[t.payload.assignmentIndex],color:t.payload.color,touched:!0}},updateSpecialAssignmentColor:(e,t)=>{e.specialAssignments[t.payload.assignmentIndex]={...e.specialAssignments[t.payload.assignmentIndex],color:t.payload.color,touched:!0}},removeAssignment:(e,t)=>{e.assignments.splice(t.payload,1)},changeColorMode:(e,t)=>{e.colorMode={...t.payload}},updateGradientColorStep:(e,t)=>{"gradient"===e.colorMode.type&&(e.colorMode={...e.colorMode,steps:e.colorMode.steps.map(((e,o)=>o===t.payload.index?{...t.payload.color,touched:!0}:{...e,touched:!1}))})},removeGradientColorStep:(e,t)=>{if("gradient"!==e.colorMode.type)return;const o=[...e.colorMode.steps];o.splice(t.payload,1);const n=2===e.colorMode.steps.length?"desc"===e.colorMode.sort?0===t.payload?"asc":"desc":0===t.payload?"desc":"asc":e.colorMode.sort;e.colorMode={...e.colorMode,steps:[...o],sort:n}},addGradientColorStep:(e,t)=>{"gradient"===e.colorMode.type&&(e.colorMode={...e.colorMode,steps:[...e.colorMode.steps.slice(0,t.payload.at),{...t.payload.color,touched:!1},...e.colorMode.steps.slice(t.payload.at)]})},changeGradientSortOrder:(e,t)=>{"gradient"===e.colorMode.type&&(e.colorMode={...e.colorMode,sort:t.payload})}}}),{updatePalette:r,assignStatically:i,assignAutomatically:l,addNewAssignment:s,updateAssignment:c,updateAssignmentColor:u,updateSpecialAssignmentColor:d,updateAssignmentRule:p,removeAssignment:g,changeColorMode:b,updateGradientColorStep:m,removeGradientColorStep:j,addGradientColorStep:x,changeGradientSortOrder:f,updateModel:h}=a.actions,O=a.reducer},92:function(e,t,o){e.exports=o(17)(70)}}]);