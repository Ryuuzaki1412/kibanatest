/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[46],{1442:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(17),o=a(2),l=a.n(o),i=a(44),s=a.n(i),c=a(48),u=a(167),d=a(110),r=a(590),m=a(459),p=a(390);const b=s()(n.EuiFlexItem).withConfig({displayName:"NewNoteTabs",componentId:"sc-uq31qy-0"})(["width:100%;"]);b.displayName="NewNoteTabs";const E=l.a.memo((({note:e,noteInputHeight:t,updateNewNote:a,autoFocusDisabled:n=!1,setIsMarkdownInvalid:o})=>l.a.createElement(b,{"data-test-subj":"new-note-tabs"},l.a.createElement(p.a,{ariaLabel:m.d,onChange:a,value:e,dataTestSubj:"add-a-note",height:t,autoFocusDisabled:n,setIsMarkdownInvalid:o}))));E.displayName="NewNote";const N=s.a.div.withConfig({displayName:"AddNotesContainer",componentId:"sc-1065h8-0"})(["margin-bottom:5px;user-select:none;"]);N.displayName="AddNotesContainer";const g=s()(n.EuiFlexGroup).withConfig({displayName:"ButtonsContainer",componentId:"sc-1065h8-1"})(["margin-top:",";"],(({theme:e})=>e.eui.euiSizeS));g.displayName="ButtonsContainer";const w=l.a.memo((({onCancelAddNote:e})=>l.a.createElement(n.EuiButtonEmpty,{"data-test-subj":"cancel",onClick:e},m.b)));w.displayName="CancelButton";const y=l.a.memo((({associateNote:e,newNote:t,onCancelAddNote:a,updateNewNote:i,autoFocusDisabled:s=!1})=>{const p=Object(c.useDispatch)(),b=Object(d.f)(),[y,h]=Object(o.useState)(!1),I=Object(o.useCallback)((e=>p(u.a.updateNote({note:e}))),[p]),j=Object(o.useCallback)((()=>{const a=null==b?void 0:b.username;a&&Object(r.b)({associateNote:e,newNote:t,updateNewNote:i,updateNote:I,user:a})}),[e,t,i,I,b]),O=Object(o.useCallback)((e=>{e.stopPropagation(),"Escape"===e.key&&null!=a&&a()}),[a]),v=Object(o.useMemo)((()=>0===t.trim().length||y),[t,y]);return l.a.createElement(N,{onKeyDown:O,role:"dialog"},l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(n.EuiScreenReaderOnly,{"data-test-subj":"screenReaderOnly"},l.a.createElement("p",null,m.g)),l.a.createElement(E,{note:t,noteInputHeight:200,updateNewNote:i,autoFocusDisabled:s,setIsMarkdownInvalid:h}),l.a.createElement(g,{gutterSize:"none"},null!=a?l.a.createElement(n.EuiFlexItem,{grow:!1},l.a.createElement(w,{onCancelAddNote:a})):null,l.a.createElement(n.EuiFlexItem,{grow:!1},l.a.createElement(n.EuiButton,{"data-test-subj":"add-note",isDisabled:v,fill:!0,onClick:j},m.a)))))}));y.displayName="AddNote"},1735:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var n=a(45),o=a(17),l=a(2),i=a.n(l),s=a(48),c=a(44),u=a.n(c),d=a(121),r=a(116),m=a(118),p=a(112),b=a(122),E=a(113),N=a(167),g=a(1442),w=a(459),y=a(296),h=a(697),I=a(57),j=a(745),O=a(721),v=a(135);const C=u()(o.EuiFlexGroup).withConfig({displayName:"FullWidthFlexGroup",componentId:"sc-angm11-0"})(["width:100%;margin:0;overflow:hidden;"]),S=u()(o.EuiFlexItem).withConfig({displayName:"ScrollableFlexItem",componentId:"sc-angm11-1"})(["overflow-x:hidden;overflow-y:auto;padding-inline:",";padding-block:",";"],(({theme:e})=>e.eui.euiSizeM),(({theme:e})=>e.eui.euiSizeS)),f=u.a.div.withConfig({displayName:"VerticalRule",componentId:"sc-angm11-2"})(["width:2px;height:100%;background:",";"],(({theme:e})=>e.eui.euiColorLightShade)),x=u()(o.EuiPanel).withConfig({displayName:"StyledPanel",componentId:"sc-angm11-3"})(["border:0;box-shadow:none;"]),F=u()(o.EuiFlexGroup).withConfig({displayName:"StyledEuiFlexGroup",componentId:"sc-angm11-4"})(["flex:0;"]),k=u()(o.EuiText).withConfig({displayName:"Username",componentId:"sc-angm11-5"})(["font-weight:bold;"]),T=({username:e})=>i.a.createElement(F,{gutterSize:"s",responsive:!1,alignItems:"center"},i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiAvatar,{"data-test-subj":"avatar",name:e,size:"l"})),i.a.createElement(o.EuiFlexItem,null,i.a.createElement(k,null,e))),M=i.a.memo(T),z=({users:e})=>{const t=Object(l.useMemo)((()=>e.map((e=>i.a.createElement(l.Fragment,{key:null===e.updatedBy?void 0:e.updatedBy},i.a.createElement(M,{key:null===e.updatedBy?void 0:e.updatedBy,username:String(e.updatedBy)}),i.a.createElement(o.EuiSpacer,{size:"s"}))))),[e]);return e.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiTitle,{size:"xs"},i.a.createElement("h4",null,y.d)),i.a.createElement(o.EuiHorizontalRule,{margin:"s"}),t):null};z.displayName="ParticipantsComponent";const B=i.a.memo(z),D=({timelineId:e})=>{const t=Object(s.useDispatch)(),{kibanaSecuritySolutionsPrivileges:a}=Object(v.a)(),c=Object(l.useMemo)((()=>Object(O.f)()),[]),u=Object(p.b)((t=>c(t,e)));((e,t=!0)=>{Object(l.useEffect)((()=>{const a=e?document.querySelector(e):window;t&&a&&(a.scroll?a.scroll(0,0):a.scrollTo(0,0))}))})("#scrollableNotes",!!u);const y=Object(l.useMemo)((()=>Object(I.createSelector)(m.b.selectTimeline,(e=>{var t,a;return{createdBy:e.createdBy,expandedDetail:null!==(t=e.expandedDetail)&&void 0!==t?t:{},eventIdToNoteIds:null!==(a=null==e?void 0:e.eventIdToNoteIds)&&void 0!==a?a:{},noteIds:e.noteIds,status:e.status}}))),[]),{createdBy:F,expandedDetail:k,eventIdToNoteIds:T,noteIds:z,status:D}=Object(p.a)((t=>y(t,e))),{browserFields:A,runtimeMappings:P}=Object(d.d)(r.SourcererScopeName.timeline),G=Object(l.useMemo)((()=>N.c.selectNotesAsCommentsListSelector()),[]),[R,q]=Object(l.useState)(""),H=D===E.k.immutable,_=Object(p.a)(G),L=Object(l.useMemo)((()=>{const e=Object.values(T).reduce(((e,t)=>[...e,...t]),[]);return[...z,...e]}),[z,T]),V=Object(l.useMemo)((()=>_.filter((e=>{var t;return L.includes(null!==(t=null==e?void 0:e.noteId)&&void 0!==t?t:"-1")}))),[_,L]),K=Object(l.useMemo)((()=>Object(n.uniqBy)("updatedBy",Object(n.filter)("savedObjectId",V))),[V]),U=Object(l.useCallback)((a=>t(m.a.addNote({id:e,noteId:a}))),[t,e]),W=Object(l.useCallback)((()=>{t(m.a.toggleDetailPanel({tabType:b.d.notes,id:e}))}),[t,e]),J=Object(l.useMemo)((()=>{var t;return null!==(t=k[b.d.notes])&&void 0!==t&&t.panelView?i.a.createElement(j.a,{browserFields:A,handleOnPanelClosed:W,runtimeMappings:P,tabType:b.d.notes,scopeId:e}):null}),[A,k,W,P,e]),Q=Object(l.useMemo)((()=>i.a.createElement(i.a.Fragment,null,F&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiTitle,{size:"xs"},i.a.createElement("h4",null,w.c)),i.a.createElement(o.EuiHorizontalRule,{margin:"s"}),i.a.createElement(M,{username:F}),i.a.createElement(o.EuiSpacer,{size:"xxl"})),i.a.createElement(B,{users:K}))),[F,K]);return i.a.createElement(C,{gutterSize:"none"},i.a.createElement(S,{grow:2,id:"scrollableNotes"},i.a.createElement(x,{paddingSize:"none"},i.a.createElement(o.EuiTitle,null,i.a.createElement("h3",null,w.e)),i.a.createElement(h.a,{eventIdToNoteIds:T,notes:V,timelineId:e,showTimelineDescription:!0}),i.a.createElement(o.EuiSpacer,{size:"s"}),!H&&!0===a.crud&&i.a.createElement(g.a,{associateNote:U,newNote:R,updateNewNote:q,autoFocusDisabled:!!u}))),i.a.createElement(f,null),i.a.createElement(S,{grow:1},null!=J?J:Q))};D.displayName="NotesTabContentComponent";const A=i.a.memo(D)}}]);