(window.dashboard_bundle_jsonpfunction=window.dashboard_bundle_jsonpfunction||[]).push([[5],{215:function(e,t,a){"use strict";a.r(t),a.d(t,"buildAllDashboardActions",(function(){return pe}));var i=a(7),n=a(57),o=a(3),s=a.n(o),r=a(45),l=a(58),c=a(66),d=a(64);const u="ACTION_EXPORT_CSV";class export_csv_action_ExportCSVAction{constructor(){s()(this,"id",u),s()(this,"type",u),s()(this,"order",5),s()(this,"fieldFormats",void 0),s()(this,"uiSettings",void 0),s()(this,"getDisplayName",(e=>c.e.getDisplayName())),s()(this,"hasDatatableContent",(e=>Object.keys((null==e?void 0:e.tables)||{}).length>0&&e.tables.allowCsvExport)),s()(this,"getFormatter",(()=>{if(this.fieldFormats)return this.fieldFormats.deserialize})),s()(this,"getDataTableContent",(e=>{if(this.hasDatatableContent(e))return null==e?void 0:e.tables.tables})),s()(this,"exportCSV",(async e=>{var t;const a=this.getFormatter();if(!a)return;const i=this.getDataTableContent(null==e||null===(t=e.embeddable)||void 0===t?void 0:t.getInspectorAdapters());if(i){const t=Object.values(i),n=t.reduce(((i,n,o)=>{if(n){const s=t.length>1?`-${o+1}`:"",l=c.e.getUntitledFilename();i[`${e.embeddable.getTitle()||l}${s}.csv`]={content:r.exporters.datatableToCSV(n,{csvSeparator:this.uiSettings.get("csv:separator",","),quoteValues:this.uiSettings.get("csv:quoteValues",!0),formatFactory:a,escapeFormulaValues:!1}),type:r.exporters.CSV_MIME_TYPE}}return i}),{});if(e.asString)return n;if(n)return Object(l.downloadMultipleAs)(n)}})),({data:{fieldFormats:this.fieldFormats},settings:{uiSettings:this.uiSettings}}=d.pluginServices.getServices())}getIconType(){return"exportAction"}async isCompatible(e){var t,a;return!!this.hasDatatableContent(null===(t=e.embeddable)||void 0===t||null===(a=t.getInspectorAdapters)||void 0===a?void 0:a.call(t))}async execute(e){return await this.exportCSV(e)}}var b=a(16),p=a(13),g=a(44),h=a(97),m=a(9);const y="clonePanel";class clone_panel_action_ClonePanelAction{constructor(){s()(this,"type",y),s()(this,"id",y),s()(this,"order",45),s()(this,"toastsService",void 0),({notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return c.b.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return"copy"}async isCompatible({embeddable:e}){var t;return Boolean(!Object(i.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==i.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===m.a&&e.getOutput().editable)}async execute({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;const t=e.getRoot(),a=t.getInput().panels[e.id];if(!a)throw new i.PanelNotFoundError;const n=await(async()=>{const t=await this.getCloneTitle(e,e.getTitle()||""),n=Object(b.v4)();return Object(i.isReferenceOrValueEmbeddable)(e)?{type:e.type,explicitInput:{...await e.getInputAsValueType(),hidePanelTitles:a.explicitInput.hidePanelTitles,...t?{title:t}:{},id:n}}:{type:e.type,explicitInput:{...a.explicitInput,title:t,id:n}}})();this.toastsService.addSuccess({title:c.b.getSuccessMessage(),"data-test-subj":"addObjectToContainerSuccess"});const{newPanelPlacement:o,otherPanels:s}=Object(h.a)({width:a.gridData.w,height:a.gridData.h,currentPanels:t.getInput().panels,placeBesideId:a.explicitInput.id}),r={...n,gridData:{...o,i:n.explicitInput.id}};t.updateInput({panels:{...s,[r.explicitInput.id]:r}})}async getCloneTitle(e,t){if(""===t)return"";const a=c.b.getClonedTag(),i=new RegExp(`\\(${a}\\)`,"g"),n=new RegExp(`\\(${a} [0-9]+\\)`,"g"),o=t.replace(n,"").replace(i,"").trim(),s=e.getRoot(),r=Object(p.filter)(await s.getPanelTitles(),(e=>e.startsWith(o))),l=Object(p.map)(r,(e=>{if(e.match(i))return 0;const t=e.match(n);return t?parseInt(t[0].replace(/[^0-9.]/g,""),10):-1})),d=Object(p.max)(l)||0;return d<0?o+` (${a})`:o+` (${a} ${d+1})`}}const f="togglePanel";function j(e){return e.type===m.a}function O(e){if(!e.parent||!j(e.parent))throw new g.IncompatibleActionError;return e.id===e.parent.getExpandedPanelId()}class expand_panel_action_ExpandPanelAction{constructor(){s()(this,"type",f),s()(this,"id",f),s()(this,"order",7)}getDisplayName({embeddable:e}){if(!e.parent||!j(e.parent))throw new g.IncompatibleActionError;return O(e)?c.d.getMinimizeTitle():c.d.getMaximizeTitle()}getIconType({embeddable:e}){if(!e.parent||!j(e.parent))throw new g.IncompatibleActionError;return O(e)?"minimize":"expand"}async isCompatible({embeddable:e}){return Boolean(e.parent&&j(e.parent))}async execute({embeddable:e}){if(!e.parent||!j(e.parent))throw new g.IncompatibleActionError;const t=O(e)?void 0:e.id;e.parent.setExpandedPanelId(t),t||e.parent.setScrollToPanelId(e.id)}}var x=a(0),v=a.n(x),w=a(43),E=a(5),T=a(1);class replace_panel_flyout_ReplacePanelFlyout extends v.a.Component{constructor(e){super(e),s()(this,"lastToast",{id:"panelReplaceToast"}),s()(this,"showToast",(e=>{const{notifications:{toasts:t}}=d.pluginServices.getServices();this.lastToast&&t.remove(this.lastToast),this.lastToast=t.addSuccess({title:c.h.getSuccessMessage(e),"data-test-subj":"addObjectToContainerSuccess"})})),s()(this,"onReplacePanel",(async(e,t,a)=>{const{panelToRemove:i,container:n}=this.props,o=await n.replaceEmbeddable(i.id,{savedObjectId:e},t,!0);n.setHighlightPanelId(o),this.showToast(a),this.props.onClose()}))}render(){const{embeddable:{getEmbeddableFactories:e}}=d.pluginServices.getServices(),t=this.props.savedObjectsFinder,a=Object(T.jsx)(t,{noItemsMessage:c.h.getNoMatchingObjectsMessage(),savedObjectMetaData:[...e()].filter((e=>Boolean(e.savedObjectMetaData)&&!e.isContainerType)).map((({savedObjectMetaData:e})=>e)),showFilter:!0,onChoose:this.onReplacePanel}),i="Replace panel "+this.props.panelToRemove.getTitle()+" with:";return Object(T.jsx)(v.a.Fragment,null,Object(T.jsx)(E.EuiFlyoutHeader,{hasBorder:!0},Object(T.jsx)(E.EuiTitle,{size:"m"},Object(T.jsx)("h2",null,Object(T.jsx)("span",null,i)))),Object(T.jsx)(E.EuiFlyoutBody,null,a))}}const I="replacePanel";function P(e){return e.type===m.a}class replace_panel_action_ReplacePanelAction{constructor(e){s()(this,"type",I),s()(this,"id",I),s()(this,"order",3),this.savedobjectfinder=e}getDisplayName({embeddable:e}){if(!e.parent||!P(e.parent))throw new g.IncompatibleActionError;return c.h.getDisplayName()}getIconType({embeddable:e}){if(!e.parent||!P(e.parent))throw new g.IncompatibleActionError;return"kqlOperand"}async isCompatible({embeddable:e}){return(!e.getInput().viewMode||e.getInput().viewMode!==i.ViewMode.VIEW)&&Boolean(e.parent&&P(e.parent))}async execute({embeddable:e}){if(!e.parent||!P(e.parent))throw new g.IncompatibleActionError;const t=e;!async function(e){const{embeddable:t,panelToRemove:a,savedObjectFinder:n}=e,{settings:{theme:{theme$:o}},overlays:{openFlyout:s}}=d.pluginServices.getServices(),r=t.getRoot(),l=Object(i.tracksOverlays)(r)?r:void 0,c=s(Object(w.toMountPoint)(Object(T.jsx)(replace_panel_flyout_ReplacePanelFlyout,{container:t,onClose:()=>{c&&(l&&l.clearOverlays(),c.close())},panelToRemove:a,savedObjectsFinder:n}),{theme$:o}),{"data-test-subj":"dashboardReplacePanel",ownFocus:!0,onClose:e=>{l&&l.clearOverlays(),e.close()}});null==l||l.openOverlay(c)}({embeddable:e.parent,savedObjectFinder:this.savedobjectfinder,panelToRemove:t})}}const C="saveToLibrary";class add_to_library_action_AddToLibraryAction{constructor(){s()(this,"type",C),s()(this,"id",C),s()(this,"order",15),s()(this,"applicationCapabilities",void 0),s()(this,"toastsService",void 0),({application:{capabilities:this.applicationCapabilities},notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return c.a.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return"folderCheck"}async isCompatible({embeddable:e}){var t;const{maps:n,visualize:o}=this.applicationCapabilities,s="map"===e.type?n.save:o.save,{isOfAggregateQueryType:r}=await Promise.resolve().then(a.t.bind(null,21,7)),l=r(Object(i.isFilterableEmbeddable)(e)&&await e.getQuery());return Boolean(s&&!Object(i.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==i.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===m.a&&Object(i.isReferenceOrValueEmbeddable)(e)&&!e.inputIsRefType(e.getInput())&&!l)}async execute({embeddable:e}){if(!Object(i.isReferenceOrValueEmbeddable)(e))throw new g.IncompatibleActionError;const t=await e.getInputAsRefType();e.updateInput(t);const a=e.getRoot(),n=a.getInput().panels[e.id];if(!n)throw new i.PanelNotFoundError;const o={type:e.type,explicitInput:{...t}},s=await a.replacePanel(n,o,!0),r=c.a.getSuccessMessage(e.getTitle()?`'${e.getTitle()}'`:"");void 0!==a.getExpandedPanelId()&&a.setExpandedPanelId(s),this.toastsService.addSuccess({title:r,"data-test-subj":"addPanelToLibrarySuccess"})}}var S=a(47),_=a.n(S),M=a(65),A=a.n(M),N=a(68),D=a.n(N),R=a(50),F=a.n(R);let k;!function(e){e.preboot="preboot",e.standard="standard"}(k||(k={}));const B="eui-global",V="eui-utilities",L={darkMode:!1},$=[E.euiStylisPrefixer],z=F()({key:"css",stylisPlugins:$,container:document.querySelector('meta[name="emotion"]')}),G=F()({key:B,stylisPlugins:$,container:document.querySelector(`meta[name="${B}"]`)}),U=F()({key:V,stylisPlugins:$,container:document.querySelector(`meta[name="${V}"]`)});z.compat=!0,G.compat=!0,U.compat=!0;const Q={default:z,global:G,utility:U},W=({theme:{theme$:e},globalStyles:t,colorMode:a,children:i})=>{const n=D()(e,L),o=Object(x.useMemo)((()=>(e=>e.darkMode?E.COLOR_MODES_STANDARD.dark:E.COLOR_MODES_STANDARD.light)(n)),[n]),s=a||o,r=!1!==t&&void 0;return Object(T.jsx)(E.EuiProvider,{cache:Q,colorMode:s,globalStyles:r,utilityClasses:r},i)},q=({children:e,i18n:t,...a})=>Object(T.jsx)(W,a,Object(T.jsx)(t.Context,null,e));var X=a(53);const H=({children:e,...t})=>Object(T.jsx)(q,A()({globalStyles:!1},t),Object(T.jsx)(X.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(T.jsx)(X.KibanaErrorBoundary,null,e)));a(4);class mount_point_portal_MountPointPortalErrorBoundary extends x.Component{constructor(...e){super(...e),s()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(T.jsx)("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}var K=a(46),J=a(2);const Y=Object(K.withSuspense)(K.LazyDashboardPicker);function Z({dashboardId:e,embeddable:t,closeModal:a}){const{embeddable:{getStateTransfer:n},dashboardCapabilities:{createNew:o,showWriteControls:s}}=d.pluginServices.getServices(),r=n(),[l,u]=Object(x.useState)("existing"),[b,g]=Object(x.useState)(null),h=Object(x.useCallback)((()=>{const e=t.getRoot().getInput().panels[t.id];if(!e)throw new i.PanelNotFoundError;const n={type:t.type,input:{...Object(p.omit)(e.explicitInput,"id")},size:{width:e.gridData.w,height:e.gridData.h}},o="existing"===l&&b?`#${Object(J.x)(b.id,!0)}`:`#${J.b}`;a(),r.navigateToWithEmbeddablePackage("dashboards",{state:n,path:o})}),[l,t,b,r,a]),m="copyToDashboardTitle";return Object(T.jsx)("div",{role:"dialog","aria-modal":"true","aria-labelledby":m,"aria-describedby":"copyToDashboardDescription"},Object(T.jsx)(E.EuiModalHeader,null,Object(T.jsx)(E.EuiModalHeaderTitle,{id:m,component:"h2"},c.c.getDisplayName())),Object(T.jsx)(E.EuiModalBody,null,Object(T.jsx)(v.a.Fragment,null,Object(T.jsx)(E.EuiFormRow,{hasChildLabel:!1},Object(T.jsx)("div",{"data-test-subj":"add-to-dashboard-options"},s&&Object(T.jsx)(v.a.Fragment,null,Object(T.jsx)(E.EuiRadio,{checked:"existing"===l,"data-test-subj":"add-to-existing-dashboard-option",id:"existing-dashboard-option",name:"dashboard-option",label:c.c.getExistingDashboardOption(),onChange:()=>u("existing")}),Object(T.jsx)(E.EuiSpacer,{size:"s"}),Object(T.jsx)("div",null,Object(T.jsx)(Y,{isDisabled:"existing"!==l,idsToOmit:e?[e]:void 0,onChange:e=>{g(e),u("existing")}})),Object(T.jsx)(E.EuiSpacer,{size:"s"})),o&&Object(T.jsx)(v.a.Fragment,null,Object(T.jsx)(E.EuiRadio,{checked:"new"===l,"data-test-subj":"add-to-new-dashboard-option",id:"new-dashboard-option",name:"dashboard-option",disabled:!e,label:c.c.getNewDashboardOption(),onChange:()=>u("new")}),Object(T.jsx)(E.EuiSpacer,{size:"s"})))))),Object(T.jsx)(E.EuiModalFooter,null,Object(T.jsx)(E.EuiButtonEmpty,{"data-test-subj":"cancelCopyToButton",onClick:()=>a()},c.c.getCancelButtonName()),Object(T.jsx)(E.EuiButton,{fill:!0,"data-test-subj":"confirmCopyToButton",onClick:h,disabled:"existing"===l&&!b},c.c.getAcceptButtonName())))}const ee="copyToDashboard";function te(e){return e.type===m.a}class copy_to_dashboard_action_CopyToDashboardAction{constructor(e){s()(this,"type",ee),s()(this,"id",ee),s()(this,"order",1),s()(this,"dashboardCapabilities",void 0),s()(this,"openModal",void 0),this.core=e,({dashboardCapabilities:this.dashboardCapabilities,overlays:{openModal:this.openModal}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.parent||!te(e.parent))throw new g.IncompatibleActionError;return c.c.getDisplayName()}getIconType({embeddable:e}){if(!e.parent||!te(e.parent))throw new g.IncompatibleActionError;return"exit"}async isCompatible({embeddable:e}){const{createNew:t,showWriteControls:a}=this.dashboardCapabilities;return Boolean(e.parent&&te(e.parent)&&(t||a))}async execute({embeddable:e}){if(!e.parent||!te(e.parent))throw new g.IncompatibleActionError;const{theme:t,i18n:a}=this.core,i=this.openModal((n=Object(T.jsx)(Z,{closeModal:()=>i.close(),dashboardId:e.parent.getDashboardSavedObjectId(),embeddable:e}),o={theme:t,i18n:a},e=>(_.a.render(Object(T.jsx)(H,o,n),e),()=>_.a.unmountComponentAtNode(e))),{maxWidth:400,"data-test-subj":"copyToDashboardPanel"});var n,o}}const ae="unlinkFromLibrary";class unlink_from_library_action_UnlinkFromLibraryAction{constructor(){s()(this,"type",ae),s()(this,"id",ae),s()(this,"order",15),s()(this,"toastsService",void 0),({notifications:{toasts:this.toastsService}}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return c.i.getDisplayName()}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return"folderExclamation"}async isCompatible({embeddable:e}){var t;return Boolean(!Object(i.isErrorEmbeddable)(e)&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==i.ViewMode.VIEW&&e.getRoot()&&e.getRoot().isContainer&&e.getRoot().type===m.a&&Object(i.isReferenceOrValueEmbeddable)(e)&&e.inputIsRefType(e.getInput()))}async execute({embeddable:e}){if(!Object(i.isReferenceOrValueEmbeddable)(e))throw new g.IncompatibleActionError;const t=await e.getInputAsValueType();e.updateInput(t);const a=e.getRoot(),n=a.getInput().panels[e.id];if(!n)throw new i.PanelNotFoundError;const o={type:e.type,explicitInput:{...t,title:e.getTitle()}},s=await a.replacePanel(n,o,!0),r=c.i.getSuccessMessage(e.getTitle()?`'${e.getTitle()}'`:"");void 0!==a.getExpandedPanelId()&&a.setExpandedPanelId(s),this.toastsService.addSuccess({title:r,"data-test-subj":"unlinkPanelSuccess"})}}var ie=a(90),ne=a.n(ie),oe=a(59),se=a(21),re={name:"1v0pok0",styles:"min-width:300px"};function le({context:e,setDisableEditButton:t}){const{embeddable:a}=e,[i,n]=Object(x.useState)(!0),[o,s]=Object(x.useState)([]),[r,l]=Object(x.useState)(""),[d,u]=Object(x.useState)(),b=Object(x.useMemo)((()=>{var e;return null===(e=a.getRoot())||void 0===e?void 0:e.getAllDataViews()}),[a]);return ne()((()=>{Promise.all([a.getFilters(),a.getQuery()]).then((([e,a])=>{if(s(e),a)if(Object(se.isOfQueryType)(a))"string"==typeof a.query?l(a.query):l(JSON.stringify(a.query,null,2));else{const e=Object(se.getAggregateQueryMode)(a);u(e),l(a[e]),t(!0)}n(!1)}))})),Object(T.jsx)(E.EuiForm,{component:"div",css:re},Object(T.jsx)(E.EuiSkeletonText,{isLoading:i,lines:3},""!==r&&Object(T.jsx)(E.EuiFormRow,{label:c.f.getQueryTitle(),display:"rowCompressed",fullWidth:!0},Object(T.jsx)(E.EuiCodeBlock,{language:d,paddingSize:"s","aria-labelledby":`${c.f.getQueryTitle()}: ${r}`,tabIndex:0},r)),o&&o.length>0&&Object(T.jsx)(E.EuiFormRow,{label:c.f.getFiltersTitle(),fullWidth:!0},Object(T.jsx)(E.EuiFlexGroup,{wrap:!0,gutterSize:"xs"},Object(T.jsx)(oe.FilterItems,{filters:o,indexPatterns:b,readOnly:!0})))))}function ce({editPanelAction:e,displayName:t,context:a,icon:i,id:n}){const{embeddable:o}=a,[s,r]=Object(x.useState)(!1),[l,d]=Object(x.useState)(!1);return Object(T.jsx)(E.EuiPopover,{button:Object(T.jsx)(E.EuiButtonIcon,{color:"text",iconType:i,onClick:()=>r(!s),"data-test-subj":`embeddablePanelNotification-${n}`,"aria-label":t}),isOpen:s,closePopover:()=>r(!1),anchorPosition:"upCenter"},Object(T.jsx)(E.EuiPopoverTitle,null,t),Object(T.jsx)(le,{context:a,setDisableEditButton:d}),Object(T.jsx)(E.EuiPopoverFooter,null,!l&&Object(T.jsx)(E.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},Object(T.jsx)(E.EuiFlexItem,{grow:!1},Object(T.jsx)(E.EuiButton,{"data-test-subj":"filtersNotificationModal__editButton",size:"s",fill:!0,onClick:()=>e.execute({embeddable:o})},c.f.getEditButtonTitle())))))}const de="ACTION_FILTERS_NOTIFICATION";class filters_notification_action_FiltersNotificationAction{constructor(){s()(this,"id",de),s()(this,"type",de),s()(this,"order",2),s()(this,"displayName",c.f.getDisplayName()),s()(this,"icon","filter"),s()(this,"applicationService",void 0),s()(this,"embeddableService",void 0),s()(this,"settingsService",void 0),s()(this,"MenuItem",(({context:e})=>{const{embeddable:t}=e,a=new i.EditPanelAction(this.embeddableService.getEmbeddableFactory,this.applicationService,this.embeddableService.getStateTransfer()),{Provider:n}=Object(w.createKibanaReactContext)({uiSettings:this.settingsService.uiSettings});return Object(T.jsx)(n,null,Object(T.jsx)(ce,{editPanelAction:a,displayName:this.displayName,context:e,icon:this.getIconType({embeddable:t}),id:this.id}))})),s()(this,"isCompatible",(async({embeddable:e})=>{var t;if(Object(i.isErrorEmbeddable)(e)||!e.getRoot().isContainer||(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==i.ViewMode.EDIT||!Object(i.isFilterableEmbeddable)(e))return!1;if((await e.getFilters()).length>0)return!0;const{isOfQueryType:n,isOfAggregateQueryType:o}=await Promise.resolve().then(a.t.bind(null,21,7)),s=await e.getQuery();return n(s)&&""!==s.query||o(s)})),s()(this,"execute",(async()=>{})),({application:this.applicationService,embeddable:this.embeddableService,settings:this.settingsService}=d.pluginServices.getServices())}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return this.displayName}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return this.icon}}function ue({unlinkAction:e,displayName:t,context:a,icon:i,id:n}){const[o,s]=Object(x.useState)(!1),{embeddable:r}=a;return Object(T.jsx)(E.EuiPopover,{button:Object(T.jsx)(E.EuiButtonIcon,{color:"text",iconType:i,onClick:()=>s(!o),"data-test-subj":`embeddablePanelNotification-${n}`,"aria-label":c.g.getPopoverAriaLabel()}),isOpen:o,closePopover:()=>s(!1),anchorPosition:"upCenter"},Object(T.jsx)(E.EuiPopoverTitle,null,t),Object(T.jsx)("div",{style:{width:"300px"}},Object(T.jsx)(E.EuiText,null,Object(T.jsx)("p",null,c.g.getTooltip()))),Object(T.jsx)(E.EuiPopoverFooter,null,Object(T.jsx)(E.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},Object(T.jsx)(E.EuiFlexItem,{grow:!1},Object(T.jsx)(E.EuiButton,{"data-test-subj":"libraryNotificationUnlinkButton",size:"s",fill:!0,onClick:()=>e.execute({embeddable:r})},e.getDisplayName({embeddable:r}))))))}const be="ACTION_LIBRARY_NOTIFICATION";class library_notification_action_LibraryNotificationAction{constructor(e){s()(this,"id",be),s()(this,"type",be),s()(this,"order",1),s()(this,"displayName",c.g.getDisplayName()),s()(this,"icon","folderCheck"),s()(this,"MenuItem",(({context:e})=>{const{embeddable:t}=e;return Object(T.jsx)(ue,{unlinkAction:this.unlinkAction,displayName:this.displayName,context:e,icon:this.getIconType({embeddable:t}),id:this.id})})),s()(this,"isCompatible",(async({embeddable:e})=>{var t;return!Object(i.isErrorEmbeddable)(e)&&e.getRoot().isContainer&&(null===(t=e.getInput())||void 0===t?void 0:t.viewMode)!==i.ViewMode.VIEW&&Object(i.isReferenceOrValueEmbeddable)(e)&&e.inputIsRefType(e.getInput())})),s()(this,"execute",(async()=>{})),this.unlinkAction=e}getDisplayName({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return this.displayName}getIconType({embeddable:e}){if(!e.getRoot()||!e.getRoot().isContainer)throw new g.IncompatibleActionError;return this.icon}}const pe=async({core:e,plugins:t,allowByValueEmbeddables:a})=>{const{uiActions:o,share:s,savedObjectsTaggingOss:r,contentManagement:l}=t,c=new clone_panel_action_ClonePanelAction;o.registerAction(c),o.attachAction(i.CONTEXT_MENU_TRIGGER,c.id);const d=Object(n.getSavedObjectFinder)(l.client,e.uiSettings,null==r?void 0:r.getTaggingApi()),u=new replace_panel_action_ReplacePanelAction(d);o.registerAction(u),o.attachAction(i.CONTEXT_MENU_TRIGGER,u.id);const b=new expand_panel_action_ExpandPanelAction;o.registerAction(b),o.attachAction(i.CONTEXT_MENU_TRIGGER,b.id);const p=new filters_notification_action_FiltersNotificationAction;if(o.registerAction(p),o.attachAction(i.PANEL_NOTIFICATION_TRIGGER,p.id),s){const e=new export_csv_action_ExportCSVAction;o.addTriggerAction(i.CONTEXT_MENU_TRIGGER,e)}if(a){const t=new add_to_library_action_AddToLibraryAction;o.registerAction(t),o.attachAction(i.CONTEXT_MENU_TRIGGER,t.id);const a=new unlink_from_library_action_UnlinkFromLibraryAction;o.registerAction(a),o.attachAction(i.CONTEXT_MENU_TRIGGER,a.id);const n=new library_notification_action_LibraryNotificationAction(a);o.registerAction(n),o.attachAction(i.PANEL_NOTIFICATION_TRIGGER,n.id);const s=new copy_to_dashboard_action_CopyToDashboardAction(e);o.registerAction(s),o.attachAction(i.CONTEXT_MENU_TRIGGER,s.id)}}},65:function(e,t,a){e.exports=a(32)(3)},66:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"f",(function(){return b}));var i=a(4);const n={getDisplayName:()=>i.i18n.translate("dashboard.panel.copyToDashboard.title",{defaultMessage:"Copy to dashboard"}),getCancelButtonName:()=>i.i18n.translate("dashboard.panel.copyToDashboard.cancel",{defaultMessage:"Cancel"}),getAcceptButtonName:()=>i.i18n.translate("dashboard.panel.copyToDashboard.goToDashboard",{defaultMessage:"Copy and go to dashboard"}),getNewDashboardOption:()=>i.i18n.translate("dashboard.panel.copyToDashboard.newDashboardOptionLabel",{defaultMessage:"New dashboard"}),getExistingDashboardOption:()=>i.i18n.translate("dashboard.panel.copyToDashboard.existingDashboardOptionLabel",{defaultMessage:"Existing dashboard"})},o={getDisplayName:()=>i.i18n.translate("dashboard.panel.AddToLibrary",{defaultMessage:"Save to library"}),getSuccessMessage:e=>i.i18n.translate("dashboard.panel.addToLibrary.successMessage",{defaultMessage:"Panel {panelTitle} was added to the library",values:{panelTitle:e}})},s={getDisplayName:()=>i.i18n.translate("dashboard.panel.clonePanel",{defaultMessage:"Clone panel"}),getClonedTag:()=>i.i18n.translate("dashboard.panel.title.clonedTag",{defaultMessage:"copy"}),getSuccessMessage:()=>i.i18n.translate("dashboard.panel.clonedToast",{defaultMessage:"Cloned panel"})},r={getMinimizeTitle:()=>i.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}),getMaximizeTitle:()=>i.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Maximize panel"})},l={getDisplayName:()=>i.i18n.translate("dashboard.actions.DownloadCreateDrilldownAction.displayName",{defaultMessage:"Download as CSV"}),getUntitledFilename:()=>i.i18n.translate("dashboard.actions.downloadOptionsUnsavedFilename",{defaultMessage:"untitled"})},c={getDisplayName:()=>i.i18n.translate("dashboard.panel.unlinkFromLibrary",{defaultMessage:"Unlink from library"}),getSuccessMessage:e=>i.i18n.translate("dashboard.panel.unlinkFromLibrary.successMessage",{defaultMessage:"Panel {panelTitle} is no longer connected to the library",values:{panelTitle:e}})},d={getDisplayName:()=>i.i18n.translate("dashboard.panel.LibraryNotification",{defaultMessage:"Library Notification"}),getTooltip:()=>i.i18n.translate("dashboard.panel.libraryNotification.toolTip",{defaultMessage:"Editing this panel might affect other dashboards. To change this panel only, unlink it from the library."}),getPopoverAriaLabel:()=>i.i18n.translate("dashboard.panel.libraryNotification.ariaLabel",{defaultMessage:"View library information and unlink this panel"})},u={getDisplayName:()=>i.i18n.translate("dashboard.panel.removePanel.replacePanel",{defaultMessage:"Replace panel"}),getSuccessMessage:e=>e?i.i18n.translate("dashboard.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:`'${e}'`}}):i.i18n.translate("dashboard.addPanel.panelAddedToContainerSuccessMessageTitle",{defaultMessage:"A panel was added"}),getNoMatchingObjectsMessage:()=>i.i18n.translate("dashboard.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."})},b={getDisplayName:()=>i.i18n.translate("dashboard.panel.filters",{defaultMessage:"Panel filters"}),getEditButtonTitle:()=>i.i18n.translate("dashboard.panel.filters.modal.editButton",{defaultMessage:"Edit filters"}),getCloseButtonTitle:()=>i.i18n.translate("dashboard.panel.filters.modal.closeButton",{defaultMessage:"Close"}),getQueryTitle:()=>i.i18n.translate("dashboard.panel.filters.modal.queryTitle",{defaultMessage:"Query"}),getFiltersTitle:()=>i.i18n.translate("dashboard.panel.filters.modal.filtersTitle",{defaultMessage:"Filters"})}},68:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(31),n=a(0),o=i.__importDefault(a(73));t.default=function(e,t){var a=n.useState(t),i=a[0],s=a[1];return o.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),i}},73:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=n},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(13),n=a(2);const o={placeAtTop:({width:e,height:t,currentPanels:a})=>{const n={...a};for(const[e,o]of Object.entries(a)){const a=Object(i.cloneDeep)(o);a.gridData.y=a.gridData.y+t,n[e]=a}return{newPanelPlacement:{x:0,y:0,w:e,h:t},otherPanels:n}},findTopLeftMostOpenSpace:({width:e,height:t,currentPanels:a})=>{let i=-1;const o=Object.values(a);if(o.forEach((e=>{i=Math.max(e.gridData.y+e.gridData.h,i)})),i<0)return{newPanelPlacement:{x:0,y:0,w:e,h:t},otherPanels:a};const s=new Array(i);for(let e=0;e<i;e++)s[e]=new Array(n.g).fill(0);o.forEach((e=>{for(let t=e.gridData.x;t<e.gridData.x+e.gridData.w;t++)for(let a=e.gridData.y;a<e.gridData.y+e.gridData.h;a++){if(void 0===s[a])throw new Error(`Attempted to access a row that doesn't exist at ${a} for panel ${JSON.stringify(e)}`);s[a][t]=1}}));for(let o=0;o<i;o++)for(let r=0;r<n.g;r++)if(1!==s[o][r])for(let l=o;l<Math.min(o+t,i);l++)for(let c=r;c<Math.min(r+e,n.g);c++){const n=0===s[l][c],d=c===r+e-1,u=l===Math.min(o+t-1,i-1);if(n&&d&&u)return{newPanelPlacement:{x:r,y:o,w:e,h:t},otherPanels:a};if(1===s[l][c])break}return{newPanelPlacement:{x:0,y:i,w:e,h:t},otherPanels:a}}}},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(31).__importDefault(a(33));t.default=function(e){i.default((function(){e()}))}},97:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return d}));var i=a(80),n=a(2);const o=e=>Boolean(e.getPanelPlacementSettings);function s(e,t,a,s){let r={width:n.o,height:n.n,strategy:"findTopLeftMostOpenSpace"};o(e)&&(r={...r,...e.getPanelPlacementSettings(t.explicitInput,s)});const{width:l,height:c,strategy:d}=r,{newPanelPlacement:u,otherPanels:b}=i.a[d]({currentPanels:a,height:c,width:l});return{newPanel:{gridData:{...u,i:t.explicitInput.id},...t},otherPanels:b}}var r=a(13),l=a(7);function c(e,t){return e.y+e.h<t.y+t.h?-1:e.y+e.h>t.y+t.h?1:e.x+e.w<=t.x+t.w?-1:1}function d({width:e,height:t,currentPanels:a,placeBesideId:i}){const o=a[i];if(!o)throw new l.PanelNotFoundError;const s=o.gridData,d=[];Object(r.forOwn)(a,((e,t)=>{d.push(e.gridData)}));const u=[{grid:{x:s.x+s.w,y:s.y,w:e,h:t},fits:!0},{grid:{x:0,y:s.y+s.h,w:e,h:t},fits:!0},{grid:{x:s.x,y:s.y+s.h,w:e,h:t},fits:!0}];for(const e of u)if(e.grid.x>=0&&e.grid.x+e.grid.w<=n.g&&e.grid.y>=0){if(!d.some((t=>e.grid.x+e.grid.w>t.x&&e.grid.x<t.x+t.w&&e.grid.y<t.y+t.h&&e.grid.y+e.grid.h>t.y)))return{newPanelPlacement:e.grid,otherPanels:a}}else e.fits=!1;const b={...a},p=d.sort(c);let g=0;for(;g<p.length&&s.i!==p[g].i;g++);const h=u[2];let m=p[g+1].i;const y=h.grid.y+h.grid.h-b[m].gridData.y;for(let e=g+1;e<p.length;e++){m=p[e].i;const t=Object(r.cloneDeep)(b[m]);t.gridData.y=t.gridData.y+y,b[m]=t}return{newPanelPlacement:h.grid,otherPanels:b}}}}]);