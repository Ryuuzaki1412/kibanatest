(window.dashboard_bundle_jsonpfunction=window.dashboard_bundle_jsonpfunction||[]).push([[6],{204:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(205);case"v8light":return a(207)}},205:function(e,t,a){var s=a(23),o=a(206);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);s(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},206:function(e,t,a){(t=a(24)(!1)).push([e.i,".kbnBody .dashboardTopNav{background:#141519;position:sticky;top:var(--euiFixedHeadersOffset,0);width:100%;z-index:2000}",""]),e.exports=t},207:function(e,t,a){var s=a(23),o=a(208);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);s(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},208:function(e,t,a){(t=a(24)(!1)).push([e.i,".kbnBody .dashboardTopNav{background:#fafbfd;position:sticky;top:var(--euiFixedHeadersOffset,0);width:100%;z-index:2000}",""]),e.exports=t},63:function(e,t,a){"use strict";a.r(t),a.d(t,"DashboardTopNavWithContext",(function(){return Z}));var s=a(0),o=a.n(s),n=a(70),i=a(65),r=a.n(i),l=a(29),d=a.n(l),c=a(46),u=a(7),b=a(5),p=a(67),h=a(19),g=a(64),m=a(51),j=a(49),f=a.n(j),T=a(13),v=a(4),y=a(14),M=a(210),O=a(15),w=a(1);const S="showFilterBar",C=e=>!!e.dashboard&&!!e.dashboard.show;var x=a(2),I=a(78);const E=({redirectTo:e,isLabsShown:t,setIsLabsShown:a,showResetChange:o})=>{const[i,r]=Object(s.useState)(!1),{share:l,dashboardBackup:d,settings:{uiSettings:c},dashboardCapabilities:{showWriteControls:j}}=g.pluginServices.getServices(),E=c.get(h.a.ENABLE_LABS_UI),B=Object(n.c)(),D=B.select((e=>e.componentState.hasRunClientsideMigrations)),P=B.select((e=>e.componentState.hasUnsavedChanges)),N=B.select((e=>e.componentState.hasOverlays)),k=B.select((e=>e.componentState.lastSavedId)),z=B.select((e=>e.explicitInput.title)),V=B.select((e=>e.explicitInput.viewMode)),A=B.select((e=>e.componentState.managed)),F=i||N,L=Object(s.useCallback)((e=>{!function({isDirty:e,anchorElement:t,savedObjectId:a,dashboardTitle:o}){var n;const{dashboardCapabilities:{createShortUrl:i},dashboardBackup:r,data:{query:{timefilter:{timefilter:{getTime:l}}}},share:{toggleShareContextMenu:d}}=g.pluginServices.getServices();if(!d)return;let c={};const m=r.getState(a);m&&(c={query:m.query,filters:m.filters,controlGroupInput:m.controlGroupInput,panels:m.panels?Object(h.b)(m.panels):void 0,useMargins:null==m?void 0:m.useMargins,syncColors:null==m?void 0:m.syncColors,syncCursor:null==m?void 0:m.syncCursor,syncTooltips:null==m?void 0:m.syncTooltips,hidePanelTitles:null==m?void 0:m.hidePanelTitles});const j={dashboardId:a,preserveSavedFilters:!0,refreshInterval:void 0,viewMode:u.ViewMode.VIEW,useHash:!1,timeRange:l(),...c};let x=Object(y.getStateFromKbnUrl)("_g",window.location.href);null!==(n=x)&&void 0!==n&&n.filters&&0===x.filters.length&&(x=Object(T.omit)(x,"filters"));const I=Object(y.setStateToKbnUrl)("_g",x,void 0,window.location.href);d({isDirty:e,anchorElement:t,allowEmbed:!0,allowShortUrl:i,shareableUrl:Object(y.setStateToKbnUrl)("_a",c,{useHash:!1,storeInHashQuery:!0},Object(y.unhashUrl)(I)),objectId:a,objectType:"dashboard",sharingData:{title:o||v.i18n.translate("dashboard.share.defaultDashboardTitle",{defaultMessage:"Dashboard [{date}]",values:{date:f()().toISOString(!0)}}),locatorParams:{id:O.a,params:j}},embedUrlParamExtensions:[{paramName:"embed",component:({setParamValue:e})=>{const[t,a]=Object(s.useState)({showFilterBar:!0}),o=[{id:M.dashboardUrlParams.showTopMenu,label:p.n.getTopMenuCheckbox()},{id:M.dashboardUrlParams.showQueryInput,label:p.n.getQueryCheckbox()},{id:M.dashboardUrlParams.showTimeFilter,label:p.n.getTimeFilterCheckbox()},{id:S,label:p.n.getFilterBarCheckbox()}];return Object(w.jsx)(b.EuiCheckboxGroup,{options:o,idToSelectedMap:t,onChange:s=>{const o={...t,[s]:!t[s]},n={[M.dashboardUrlParams.showTopMenu]:o[M.dashboardUrlParams.showTopMenu],[M.dashboardUrlParams.showQueryInput]:o[M.dashboardUrlParams.showQueryInput],[M.dashboardUrlParams.showTimeFilter]:o[M.dashboardUrlParams.showTimeFilter],[M.dashboardUrlParams.hideFilterBar]:!o[S]};a(o),e(n)},legend:{children:p.n.getCheckboxLegend()},"data-test-subj":"embedUrlParamExtension"})}}],showPublicUrlSwitch:C,snapshotShareWarning:Boolean(null==m?void 0:m.panels)?p.n.getSnapshotShareWarning():void 0})}({dashboardTitle:z,anchorElement:e,savedObjectId:k,isDirty:Boolean(P)})}),[z,P,k]),U=Object(s.useCallback)((t=>{if(!t)return;const{redirectRequired:a,id:s}=t;a&&e({id:s,editMode:!0,useReplace:!0,destination:"dashboard"})}),[e]),R=Object(s.useCallback)((()=>{r(!0),B.runQuickSave().then((()=>setTimeout((()=>r(!1)),x.a)))}),[B]),G=Object(s.useCallback)((()=>{B.runSaveAs().then((e=>U(e)))}),[U,B]),_=Object(s.useCallback)((()=>{r(!0),B.runClone().then((e=>{r(!1),U(e)}))}),[U,B]),Q=Object(s.useCallback)(((e=!1)=>{B.clearOverlays();const t=e?()=>{B.dispatch.setViewMode(u.ViewMode.VIEW),d.storeViewMode(u.ViewMode.VIEW)}:void 0;P?Object(I.b)((()=>{Object(m.batch)((()=>{B.resetToLastSavedState(),null==t||t()}))}),V):null==t||t()}),[B,d,P,V]),W=Object(s.useMemo)((()=>({fullScreen:{...p.o.fullScreen,id:"full-screen",testId:"dashboardFullScreenMode",run:()=>B.dispatch.setFullScreenMode(!0),disableButton:F},labs:{...p.o.labs,id:"labs",testId:"dashboardLabs",run:()=>a(!t)},edit:{...p.o.edit,emphasize:!0,id:"edit",iconType:"pencil",testId:"dashboardEditMode",className:"eui-hideFor--s eui-hideFor--xs",run:()=>{d.storeViewMode(u.ViewMode.EDIT),B.dispatch.setViewMode(u.ViewMode.EDIT),B.clearOverlays()},disableButton:F},quickSave:{...p.o.quickSave,id:"quick-save",iconType:"save",emphasize:!0,isLoading:i,testId:"dashboardQuickSaveMenuItem",disableButton:F||!(D||P),run:()=>R()},saveAs:{description:p.o.saveAs.description,disableButton:F,id:"save",emphasize:!Boolean(k),testId:"dashboardSaveMenuItem",iconType:Boolean(k)?void 0:"save",label:Boolean(k)?p.o.saveAs.label:p.o.quickSave.label,run:()=>G()},switchToViewMode:{...p.o.switchToViewMode,id:"cancel",disableButton:F||!k,testId:"dashboardViewOnlyMode",run:()=>Q(!0)},share:{...p.o.share,id:"share",testId:"shareTopNavButton",disableButton:F,run:L},settings:{...p.o.settings,id:"settings",testId:"dashboardSettingsButton",disableButton:F,run:()=>B.showSettings()},clone:{...p.o.clone,id:"clone",testId:"dashboardClone",disableButton:F,run:()=>_()}})),[R,i,D,P,d,G,a,F,Q,t,k,L,B,_]),$=Object(s.useMemo)((()=>({...p.o.resetChanges,id:"reset",testId:"dashboardDiscardChangesMenuItem",disableButton:!P||N||V===u.ViewMode.EDIT&&(i||!k),run:()=>Q()})),[N,k,Q,V,i,P]);return{viewModeTopNavConfig:Object(s.useMemo)((()=>{const e=E?[W.labs]:[],t=l?[W.share]:[],a=j?[W.clone]:[],s=j&&!A?[W.edit]:[],n=o?[$]:[];return[...e,W.fullScreen,...t,...a,...n,...s]}),[E,W,l,j,A,o,$]),editModeTopNavConfig:Object(s.useMemo)((()=>{const e=E?[W.labs]:[],t=l?[W.share]:[],a=[];return k?(a.push(W.saveAs,W.switchToViewMode),o&&a.push($),a.push(W.quickSave)):a.push(W.switchToViewMode,W.saveAs),[...e,W.settings,...t,...a]}),[E,W.labs,W.share,W.settings,W.saveAs,W.switchToViewMode,W.quickSave,l,k,o,$])}};var B=a(55);const D=e=>({bold:e.font.weight.bold,normal:e.font.weight.regular}),P=e=>"iconButton"===e.as,N=(e,{type:t,isDisabled:a,groupPosition:s})=>{const o=(({euiTheme:e})=>({default:{borderStyle:"solid",border:e.border.thin,borderColor:e.border.color},emptyButton:{backgroundColor:e.colors.emptyShade,border:`${e.border.thin}`,color:`${e.colors.text}`},buttonPositions:{left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"},center:{borderRadius:0,borderLeft:"none"}}}))(e),n=s&&"none"!==s?o.buttonPositions[s]:{},i={...o.default,...n};return a?i:{...i,..."primary"===t?{}:o.emptyButton}},k=({hasArrow:e=!0,fontWeight:t="normal",type:a,label:s,iconSide:o,iconType:n,fullWidth:i,isDisabled:l,groupPosition:d,...c})=>{const u=Object(b.useEuiTheme)(),p={...N(u,{type:a,isDisabled:l,groupPosition:d}),fontWeight:D(u.euiTheme)[t]},h=l?{}:"primary"===a?{color:"primary",fill:!0}:{color:"text"},g=null!=n?n:e?"arrowDown":"";return Object(w.jsx)(b.EuiButton,r()({size:c.size,isDisabled:l,css:p,iconType:g,iconSide:n?o:"right",fullWidth:i,contentProps:i?{style:{justifyContent:"space-between"}}:{}},h,c),s)},z=({size:e,type:t,label:a,isDisabled:s,groupPosition:o,...n})=>{const i=Object(b.useEuiTheme)(),l=N(i,{type:t,isDisabled:s,groupPosition:o});return Object(w.jsx)(b.EuiButtonIcon,r()({},n,{disabled:s,"aria-label":null!=a?a:n["aria-label"],size:e,iconSize:e,css:l,display:"primary"===t?"fill":"base",color:"primary"===t?"primary":"text"}))};function V(e){const{type:t="empty",size:a="m"}=e;return P(e)?Object(w.jsx)(z,r()({},e,{size:a,type:t})):Object(w.jsx)(k,r()({},e,{size:a,type:t}))}const A=({onClick:e,size:t="m",...a})=>Object(w.jsx)(V,r()({},a,{type:"empty",onClick:e,iconType:"folderOpen",size:t,label:v.i18n.translate("sharedUXPackages.buttonToolbar.buttons.addFromLibrary.libraryButtonLabel",{defaultMessage:"Add from library"})})),F=({type:e,label:t,iconType:a,size:o="m",children:n,isDisabled:i,...l})=>{const[d,c]=Object(s.useState)(!1),u=()=>c(!1),p=Object(w.jsx)(V,{onClick:()=>c((e=>!e)),size:o,isDisabled:i,type:e,label:t,iconType:a||"arrowDown",iconSide:a?"left":"right"});return Object(w.jsx)(b.EuiPopover,r()({isOpen:d,button:p,closePopover:u},l),n({closePopover:u}))},L=v.i18n.translate("sharedUXPackages.buttonToolbar.toolbar.errorToolbarText",{defaultMessage:"There are over 120 extra buttons. Please consider limiting the number of buttons."}),U=({children:e})=>{const{primaryButton:t,iconButtonGroup:a,extraButtons:s=[]}=e;if(s.length>120)throw new Error(L);const o=s.map(((e,t)=>e?Object(w.jsx)(b.EuiFlexItem,{grow:!1,key:`button-${t}`},e):null));return Object(w.jsx)(b.EuiFlexGroup,{gutterSize:"s"},Object(w.jsx)(b.EuiFlexItem,{grow:!1},t),Object(w.jsx)(b.EuiFlexItem,{grow:!1},Object(w.jsx)(b.EuiFlexGroup,{wrap:!0,responsive:!1,alignItems:"center",gutterSize:"s"},a?Object(w.jsx)(b.EuiFlexItem,{grow:!1},a):null,o)))};var R=a(60);const G=({createNewVisType:e,createNewEmbeddable:t,isDisabled:a})=>{const{embeddable:o,visualizations:{getAliases:n,getByGroup:i,showNewVisModal:r}}=g.pluginServices.getServices(),{euiTheme:l}=Object(b.useEuiTheme)(),d=Object(s.useMemo)((()=>Array.from(o.getEmbeddableFactories())),[o]),[c,u]=Object(s.useState)([]);Object(s.useEffect)((()=>{Promise.all(d.map((async e=>({factory:e,isEditable:await e.isEditable()})))).then((e=>{u(e)}))}),[d]);const p=Object(s.useCallback)((e=>()=>r({originatingApp:x.c,outsideVisualizeApp:!0,showAggsSelection:!0,selectedVisType:e})),[r]),h=e=>i(e).sort(((e,t)=>{const a="titleInWizard"in e&&e.titleInWizard||e.title,s="titleInWizard"in t&&t.titleInWizard||e.title;return a<s?-1:a>s?1:0})).filter((({disableCreate:e})=>!e)),m=h(R.VisGroups.PROMOTED),j=h(R.VisGroups.AGGBASED),f=h(R.VisGroups.TOOLS),T=n().sort((({promotion:e=!1},{promotion:t=!1})=>e===t?0:e?-1:1)).filter((({disableCreate:e})=>!e)),y=c.filter((({isEditable:e,factory:{type:t,canCreateNew:a,isContainerType:s}})=>e&&!s&&a()&&"visualization"!==t)),M={},O=[];let S=2;y.forEach((({factory:e})=>{const{grouping:t}=e;t?t.forEach((t=>{M[t.id]?M[t.id].factories.push(e):(M[t.id]={id:t.id,appName:t.getDisplayName?t.getDisplayName({embeddable:o}):t.id,icon:t.getIconType?t.getIconType({embeddable:o}):"empty",factories:[e],panelId:S},S++)})):O.push(e)}));const C=t=>{const{name:a,title:s,titleInWizard:o,description:n,icon:i="empty",group:r,isDeprecated:l}=t;return{name:l?Object(w.jsx)(b.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},Object(w.jsx)(b.EuiFlexItem,{grow:!1},o||s),Object(w.jsx)(b.EuiFlexItem,{grow:!1},Object(w.jsx)(b.EuiBadge,{color:"warning"},v.i18n.translate("dashboard.editorMenu.deprecatedTag",{defaultMessage:"Deprecated"})))):o||s,icon:i,onClick:r===R.VisGroups.AGGBASED&&t.options.showIndexSelection?p(t):e(t),"data-test-subj":`visType-${a}`,toolTipContent:n}},I=t=>{const{name:a,title:s,description:o,icon:n="empty"}=t;return{name:s,icon:n,onClick:e(t),"data-test-subj":`visType-${a}`,toolTipContent:o}},E=(e,a)=>{const s=null!=e&&e.getIconType?e.getIconType():"empty",o=null!=e&&e.getDescription?e.getDescription():void 0;return{name:e.getDisplayName(),icon:s,toolTipContent:o,onClick:async()=>{a(),t(e)},"data-test-subj":`createNew-${e.type}`}},B=v.i18n.translate("dashboard.editorMenu.aggBasedGroupTitle",{defaultMessage:"Aggregation based"}),D=e=>{const t=[...T.map(I),...f.map(C),...O.map((t=>E(t,e))),...Object.values(M).map((({id:e,appName:t,icon:a,panelId:s})=>({name:t,icon:a,panel:s,"data-test-subj":`dashboardEditorMenu-${e}Group`}))),...m.map(C)];return j.length>0&&t.push({name:B,icon:"visualizeApp",panel:1,"data-test-subj":"dashboardEditorAggBasedMenuItem"}),[{id:0,items:t},{id:1,title:B,items:j.map(C)},...Object.values(M).map((({appName:t,panelId:a,factories:s})=>({id:a,title:t,items:s.map((t=>E(t,e)))})))]};return Object(w.jsx)(F,{zIndex:Number(l.levels.header)-1,repositionOnScroll:!0,ownFocus:!0,label:v.i18n.translate("dashboard.solutionToolbar.editorMenuButtonLabel",{defaultMessage:"Add panel"}),isDisabled:a,size:"s",iconType:"plusInCircle",panelPaddingSize:"none","data-test-subj":"dashboardEditorMenuButton"},(({closePopover:e})=>Object(w.jsx)(b.EuiContextMenu,{initialPanelId:0,panels:D(e),className:"dshSolutionToolbar__editorContextMenu","data-test-subj":"dashboardEditorContextMenu"})))},_=({closePopover:e,controlGroup:t,...a})=>{const s=Object(n.c)(),o=()=>{s.scrollToTop()};return Object(w.jsx)(b.EuiContextMenuItem,r()({},a,{icon:"plusInCircle","data-test-subj":"controls-create-button","aria-label":Object(p.c)(),onClick:()=>{t.openAddDataControlFlyout({onSave:o}),e()}}),Object(p.c)())};var Q=a(61);const W=({closePopover:e,controlGroup:t,...a})=>{const[o,i]=Object(s.useState)(!1),l=Object(n.c)();return Object(s.useEffect)((()=>{const e=t.getInput$().subscribe((()=>{const e=t.getChildIds().some((e=>t.getChild(e).type===Q.TIME_SLIDER_CONTROL));e!==o&&i(e)}));return()=>{e.unsubscribe()}}),[t,o,i]),Object(w.jsx)(b.EuiContextMenuItem,r()({},a,{icon:"timeslider",onClick:async()=>{await t.addTimeSliderControl(),l.scrollToTop(),e()},"data-test-subj":"controls-create-timeslider-button",disabled:o,toolTipContent:o?Object(p.k)():null}),Object(p.d)())},$=({closePopover:e,controlGroup:t,...a})=>Object(w.jsx)(b.EuiContextMenuItem,r()({},a,{icon:"gear","data-test-subj":"controls-settings-button","aria-label":Object(p.j)(),onClick:()=>{t.openEditControlGroupFlyout(),e()}}),Object(p.j)());function q({controlGroup:e,isDisabled:t}){const{euiTheme:a}=Object(b.useEuiTheme)();return Object(w.jsx)(F,{ownFocus:!0,repositionOnScroll:!0,panelPaddingSize:"none",label:Object(p.e)(),zIndex:Number(a.levels.header)-1,size:"s",iconType:"controlsHorizontal","data-test-subj":"dashboard-controls-menu-button",isDisabled:t},(({closePopover:t})=>Object(w.jsx)(b.EuiContextMenuPanel,{items:[Object(w.jsx)(_,{key:"addControl",controlGroup:e,closePopover:t}),Object(w.jsx)(W,{key:"addTimeSliderControl",controlGroup:e,closePopover:t}),Object(w.jsx)($,{key:"manageControls",controlGroup:e,closePopover:t})]})))}var H=a(66);function K({isDisabled:e}){var t;const{usageCollection:a,data:{search:o},notifications:{toasts:i},embeddable:{getStateTransfer:r},visualizations:{getAliases:l}}=g.pluginServices.getServices(),{euiTheme:d}=Object(b.useEuiTheme)(),c=Object(n.c)(),h=r(),m=l().find((({name:e})=>"lens"===e)),j=null===(t=a.reportUiCounter)||void 0===t?void 0:t.bind(a,x.l),f=Object(s.useCallback)((e=>()=>{var t,a,s;let n="",i="";e?(j&&j(B.METRIC_TYPE.CLICK,`${e.name}:create`),"alias"in e?e.alias&&"path"in e.alias&&(i=e.alias.app,n=e.alias.path):(i="visualize",n=`#/create?type=${encodeURIComponent(e.name)}`)):(i="visualize",n="#/create?"),h.navigateToEditor(i,{path:n,state:{originatingApp:null===(t=c.getAppContext())||void 0===t?void 0:t.currentAppId,originatingPath:null===(a=c.getAppContext())||void 0===a||null===(s=a.getCurrentPath)||void 0===s?void 0:s.call(a),searchSessionId:o.session.getSessionId()}})}),[h,c,o.session,j]),T=Object(s.useCallback)((async e=>{let t,a;j&&j(B.METRIC_TYPE.CLICK,e.type);try{const s=await e.getExplicitInput(void 0,c);Object(u.isExplicitInputWithAttributes)(s)?(t=s.newInput,a=s.attributes):t=s}catch(e){return}const s=await c.addNewEmbeddable(e.type,t,a);s&&(c.setScrollToPanelId(s.id),c.setHighlightPanelId(s.id),i.addSuccess({title:H.h.getSuccessMessage(s.getTitle()),"data-test-subj":"addEmbeddableToDashboardSuccess"}))}),[j,c,i]),v=[Object(w.jsx)(G,{createNewVisType:f,createNewEmbeddable:T,isDisabled:e}),Object(w.jsx)(A,{onClick:()=>c.addFromLibrary(),size:"s","data-test-subj":"dashboardAddFromLibraryButton",isDisabled:e})];return c.controlGroup&&v.push(Object(w.jsx)(q,{isDisabled:e,controlGroup:c.controlGroup})),Object(w.jsx)("div",{css:Object(w.css)("padding:0 ",d.size.s," ",d.size.s," ",d.size.s,";","")},Object(w.jsx)(U,null,{primaryButton:Object(w.jsx)(V,{type:"primary",isDisabled:e,iconType:"lensApp",size:"s",onClick:f(m),label:Object(p.f)(),"data-test-subj":"dashboardAddNewPanelButton"}),extraButtons:v}))}var X=a(74);a(204);const Y=Object(c.withSuspense)(c.LazyLabsFlyout,null);function J({customLeadingBreadCrumbs:e=[],embedSettings:t,forceHideUnifiedSearch:a,redirectTo:i,setCustomHeaderActionMenu:l,showBorderBottom:m=!0,showResetChange:j=!0}){const[f,T]=Object(s.useState)(!1),[v,y]=Object(s.useState)(!1),M=Object(s.useRef)(null),{data:{query:{filterManager:O}},chrome:{setBreadcrumbs:S,setIsVisible:C,getIsVisible$:I,recentlyAccessed:B},serverless:D,settings:{uiSettings:P},navigation:{TopNavMenu:N},embeddable:{getStateTransfer:k},initializerContext:{allowByValueEmbeddables:z},dashboardCapabilities:{saveQuery:V,showWriteControls:A}}=g.pluginServices.getServices(),F=P.get(h.a.ENABLE_LABS_UI),{setHeaderActionMenu:L,onAppLeave:U}=Object(X.b)(),R=Object(n.c)(),G=Object(c.getContextProvider)(),_=R.select((e=>e.componentState.hasRunClientsideMigrations)),Q=R.select((e=>e.componentState.hasUnsavedChanges)),W=R.select((e=>e.componentState.fullScreenMode)),$=R.select((e=>e.componentState.savedQueryId)),q=R.select((e=>e.componentState.lastSavedId)),H=R.select((e=>e.componentState.focusedPanelId)),J=R.select((e=>e.componentState.managed)),Z=R.select((e=>e.explicitInput.viewMode)),ee=R.select((e=>e.explicitInput.query)),te=R.select((e=>e.explicitInput.title)),[ae,se]=Object(s.useState)([]);Object(s.useEffect)((()=>{se(R.getAllDataViews());const e=R.onDataViewsUpdate$.subscribe((e=>se(e)));return()=>e.unsubscribe()}),[R]);const oe=Object(s.useMemo)((()=>Object(p.i)(te,Z,!q)),[te,Z,q]);Object(s.useEffect)((()=>{var e;null===(e=M.current)||void 0===e||e.focus()}),[te,Z]),Object(s.useEffect)((()=>{t||C(Z!==u.ViewMode.PRINT)}),[t,C,Z]),Object(s.useEffect)((()=>{const e=I().subscribe((e=>T(e)));return q&&te&&B.add(Object(x.z)(q,Z===u.ViewMode.EDIT),te,q),()=>e.unsubscribe()}),[z,B,I,q,Z,te]),Object(s.useEffect)((()=>{const t=[{text:Z===u.ViewMode.EDIT?Object(w.jsx)(o.a.Fragment,null,oe," ",Object(w.jsx)(b.EuiIcon,{size:"s",type:"pencil"})):oe,onClick:Z===u.ViewMode.EDIT?()=>{R.showSettings()}:void 0}];null!=D&&D.setBreadcrumbs?D.setBreadcrumbs(t):S(e.concat([{text:Object(p.g)(),"data-test-subj":"dashboardListingBreadcrumb",onClick:()=>{i({destination:"listing"})}},...t]))}),[S,i,oe,R,Z,D,e]),Object(s.useEffect)((()=>(U((e=>Z===u.ViewMode.EDIT&&Q&&!k().isTransferInProgress?e.confirm(p.m.getLeaveSubtitle(),p.m.getLeaveTitle()):e.default())),()=>{U((e=>e.default()))})),[U,k,Q,Z]);const ne=Object(s.useMemo)((()=>{const e=e=>(e||f)&&!W,s=e(Boolean(null==t?void 0:t.forceShowTopNavMenu)),o=!Boolean(a)&&e(Boolean((null==t?void 0:t.forceShowQueryInput)||Z===u.ViewMode.PRINT)),n=!Boolean(a)&&e(Boolean(null==t?void 0:t.forceShowDatePicker)),i=!Boolean(null==t?void 0:t.forceHideFilterBar)&&(O.getFilters().length>0||!W);return{showTopNavMenu:s,showSearchBar:o||n||i||i,showFilterBar:i,showQueryInput:o,showDatePicker:n}}),[t,O,a,W,f,Z]),{viewModeTopNavConfig:ie,editModeTopNavConfig:re}=E({redirectTo:i,isLabsShown:v,setIsLabsShown:y,showResetChange:j});d()((()=>{R.clearOverlays()}));const le=Object(s.useMemo)((()=>{const e=[];return Q&&Z===u.ViewMode.EDIT&&e.push({"data-test-subj":"dashboardUnsavedChangesBadge",badgeText:p.p.getUnsavedChangedBadgeText(),title:"",color:"warning",toolTipProps:{content:p.p.getUnsavedChangedBadgeToolTipContent(),position:"bottom"}}),_&&Z===u.ViewMode.EDIT&&e.push({"data-test-subj":"dashboardSaveRecommendedBadge",badgeText:p.p.getHasRunMigrationsText(),title:"",color:"success",iconType:"save",toolTipProps:{content:p.p.getHasRunMigrationsToolTipContent(),position:"bottom"}}),A&&J&&e.push({"data-test-subj":"dashboardSaveRecommendedBadge",badgeText:p.a.getText(),title:"",color:"primary",iconType:"glasses",toolTipProps:{content:p.a.getTooltip(),position:"bottom"}}),e}),[Q,Z,_,A,J]);return Object(w.jsx)("div",{className:"dashboardTopNav"},Object(w.jsx)("h1",{id:"dashboardTitle",className:"euiScreenReaderOnly",ref:M,tabIndex:-1},`${Object(p.g)()} - ${oe}`),Object(w.jsx)(N,r()({},ne,{query:ee,badges:le,screenTitle:te,useDefaultBehaviors:!0,savedQueryId:$,indexPatterns:ae,saveQueryMenuVisibility:V?"allowed_by_app_privilege":"globally_managed",appName:x.r,visible:Z!==u.ViewMode.PRINT,setMenuMountPoint:t||W?null!=l?l:void 0:L,className:W?"kbnTopNavMenu-isFullScreen":void 0,config:ne.showTopNavMenu?Z===u.ViewMode.EDIT?re:ie:void 0,onQuerySubmit:(e,t)=>{!1===t&&R.forceRefresh()},onSavedQueryIdChange:e=>R.dispatch.setSavedQueryId(e)})),Z!==u.ViewMode.PRINT&&F&&v?Object(w.jsx)(G,null,Object(w.jsx)(Y,{solutions:["dashboard"],onClose:()=>y(!1)})):null,Z===u.ViewMode.EDIT?Object(w.jsx)(K,{isDisabled:!!H}):null,m&&Object(w.jsx)(b.EuiHorizontalRule,{margin:"none"}))}const Z=e=>Object(w.jsx)(n.a.Provider,{value:e.dashboardContainer},Object(w.jsx)(J,e));t.default=Z},66:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"i",(function(){return d})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"f",(function(){return b}));var s=a(4);const o={getDisplayName:()=>s.i18n.translate("dashboard.panel.copyToDashboard.title",{defaultMessage:"Copy to dashboard"}),getCancelButtonName:()=>s.i18n.translate("dashboard.panel.copyToDashboard.cancel",{defaultMessage:"Cancel"}),getAcceptButtonName:()=>s.i18n.translate("dashboard.panel.copyToDashboard.goToDashboard",{defaultMessage:"Copy and go to dashboard"}),getNewDashboardOption:()=>s.i18n.translate("dashboard.panel.copyToDashboard.newDashboardOptionLabel",{defaultMessage:"New dashboard"}),getExistingDashboardOption:()=>s.i18n.translate("dashboard.panel.copyToDashboard.existingDashboardOptionLabel",{defaultMessage:"Existing dashboard"})},n={getDisplayName:()=>s.i18n.translate("dashboard.panel.AddToLibrary",{defaultMessage:"Save to library"}),getSuccessMessage:e=>s.i18n.translate("dashboard.panel.addToLibrary.successMessage",{defaultMessage:"Panel {panelTitle} was added to the library",values:{panelTitle:e}})},i={getDisplayName:()=>s.i18n.translate("dashboard.panel.clonePanel",{defaultMessage:"Clone panel"}),getClonedTag:()=>s.i18n.translate("dashboard.panel.title.clonedTag",{defaultMessage:"copy"}),getSuccessMessage:()=>s.i18n.translate("dashboard.panel.clonedToast",{defaultMessage:"Cloned panel"})},r={getMinimizeTitle:()=>s.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.expandedDisplayName",{defaultMessage:"Minimize"}),getMaximizeTitle:()=>s.i18n.translate("dashboard.actions.toggleExpandPanelMenuItem.notExpandedDisplayName",{defaultMessage:"Maximize panel"})},l={getDisplayName:()=>s.i18n.translate("dashboard.actions.DownloadCreateDrilldownAction.displayName",{defaultMessage:"Download as CSV"}),getUntitledFilename:()=>s.i18n.translate("dashboard.actions.downloadOptionsUnsavedFilename",{defaultMessage:"untitled"})},d={getDisplayName:()=>s.i18n.translate("dashboard.panel.unlinkFromLibrary",{defaultMessage:"Unlink from library"}),getSuccessMessage:e=>s.i18n.translate("dashboard.panel.unlinkFromLibrary.successMessage",{defaultMessage:"Panel {panelTitle} is no longer connected to the library",values:{panelTitle:e}})},c={getDisplayName:()=>s.i18n.translate("dashboard.panel.LibraryNotification",{defaultMessage:"Library Notification"}),getTooltip:()=>s.i18n.translate("dashboard.panel.libraryNotification.toolTip",{defaultMessage:"Editing this panel might affect other dashboards. To change this panel only, unlink it from the library."}),getPopoverAriaLabel:()=>s.i18n.translate("dashboard.panel.libraryNotification.ariaLabel",{defaultMessage:"View library information and unlink this panel"})},u={getDisplayName:()=>s.i18n.translate("dashboard.panel.removePanel.replacePanel",{defaultMessage:"Replace panel"}),getSuccessMessage:e=>e?s.i18n.translate("dashboard.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:`'${e}'`}}):s.i18n.translate("dashboard.addPanel.panelAddedToContainerSuccessMessageTitle",{defaultMessage:"A panel was added"}),getNoMatchingObjectsMessage:()=>s.i18n.translate("dashboard.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."})},b={getDisplayName:()=>s.i18n.translate("dashboard.panel.filters",{defaultMessage:"Panel filters"}),getEditButtonTitle:()=>s.i18n.translate("dashboard.panel.filters.modal.editButton",{defaultMessage:"Edit filters"}),getCloseButtonTitle:()=>s.i18n.translate("dashboard.panel.filters.modal.closeButton",{defaultMessage:"Close"}),getQueryTitle:()=>s.i18n.translate("dashboard.panel.filters.modal.queryTitle",{defaultMessage:"Query"}),getFiltersTitle:()=>s.i18n.translate("dashboard.panel.filters.modal.filtersTitle",{defaultMessage:"Filters"})}}}]);