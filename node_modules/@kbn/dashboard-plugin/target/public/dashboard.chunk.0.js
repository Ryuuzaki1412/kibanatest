(window.dashboard_bundle_jsonpfunction=window.dashboard_bundle_jsonpfunction||[]).push([[0],{116:function(e,t,r){"use strict";r.d(t,"a",(function(){return M})),r.d(t,"b",(function(){return O}));var a=r(2);async function n(e,t){const r=M.fetchDashboard(t);if(r)return{id:t,status:"success",attributes:r.item.attributes,references:r.item.references};try{const r=await e.client.get({contentTypeId:a.f,id:t});if(r.item.error)throw r.item.error;return M.addDashboard(r),{id:t,status:"success",attributes:r.item.attributes,references:r.item.references}}catch(e){return{status:"error",error:e.body||e.message,id:t}}}async function i(e,t){const r=t.map((t=>n(e,t)));return await Promise.all(r)}var s=r(13),o=r(49),l=r.n(o),c=r(10),u=r(21),d=r(45),h=r(19),g=r(27),p=r(9),v=r(6),f=r(85);const b=e=>{if(e&&!Object(c.persistableControlGroupInputIsEqual)(e,Object(c.getDefaultControlGroupInput)()))return Object(c.controlGroupInputToRawControlGroupAttributes)(e)},y=e=>l()(e).isValid()?l()(e).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"):e;var m=r(121),S=r(3),w=r.n(S),P=r(123),T=r.n(P);const M=new class dashboard_content_management_cache_DashboardContentManagementCache{constructor(){w()(this,"cache",void 0),this.cache=new T.a({max:a.d,maxAge:a.e})}fetchDashboard(e){return this.cache.get(e)}addDashboard({item:e,meta:t}){this.cache.set(e.id,{meta:t,item:e})}deleteDashboard(e){this.cache.del(e)}},O=({startPlugins:{contentManagement:e}},t)=>{const{data:r,embeddable:o,notifications:l,dashboardBackup:S,initializerContext:w,savedObjectsTagging:P}=t;return{loadDashboardState:({id:t})=>Object(m.a)({id:t,data:r,embeddable:o,contentManagement:e,savedObjectsTagging:P}),saveDashboardState:({currentState:t,saveOptions:n,lastSavedId:i})=>(async({data:e,embeddable:t,lastSavedId:r,saveOptions:n,currentState:i,dashboardBackup:o,contentManagement:l,savedObjectsTagging:m,notifications:{toasts:S}})=>{const{search:w,query:{timefilter:{timefilter:P}}}=e,{tags:T,query:O,title:I,filters:E,version:x,timeRestore:j,description:D,useMargins:C,syncColors:A,syncCursor:B,syncTooltips:k,hidePanelTitles:F}=i;let{panels:R,controlGroupInput:N}=i;n.saveAsCopy&&(R=Object(v.c)(R),N=Object(c.generateNewControlIds)(N));const{searchSourceJSON:_,searchSourceReferences:L}=await(async()=>{const e=await w.searchSource.create();e.setField("filter",E.filter((e=>!Object(u.isFilterPinned)(e)))),e.setField("query",O);const t=e.getSerializedFields(),[r,a]=Object(d.extractSearchSourceReferences)(t);return{searchSourceReferences:a,searchSourceJSON:JSON.stringify(r)}})(),U=JSON.stringify({useMargins:C,syncColors:A,syncCursor:B,syncTooltips:k,hidePanelTitles:F}),V=JSON.stringify(Object(h.b)(R,!0)),{from:z,to:G}=P.getTime(),q=j?y(z):void 0,W=j?y(G):void 0,$=j?Object(s.pick)(P.getRefreshInterval(),["display","pause","section","value"]):void 0,J={version:Object(g.a)(null!=x?x:p.c),controlGroupInput:b(N),kibanaSavedObjectMeta:{searchSourceJSON:_},description:null!=D?D:"",refreshInterval:$,timeRestore:j,optionsJSON:U,panelsJSON:V,timeFrom:q,title:I,timeTo:W},{attributes:K,references:H}=Object(h.f)({attributes:J,references:L},{embeddablePersistableStateService:t}),Q=m.updateTagsReferences?m.updateTagsReferences(H,T):H,Y=n.saveAsCopy?void 0:r;try{const e=(await l.client.create({contentTypeId:a.f,data:K,options:{id:Y,references:Q,overwrite:!0}})).item.id;if(e){if(S.addSuccess({title:f.b.getSuccessString(i.title),className:"eui-textBreakWord","data-test-subj":"saveDashboardSuccess"}),e!==r)return o.clearState(r),{redirectRequired:!0,id:e};M.deleteDashboard(e)}return{id:e}}catch(e){return S.addDanger({title:f.b.getFailureString(i.title,e.message),"data-test-subj":"saveDashboardFailure"}),{error:e}}})({data:r,embeddable:o,saveOptions:n,lastSavedId:i,currentState:t,notifications:l,dashboardBackup:S,contentManagement:e,initializerContext:w,savedObjectsTagging:P}),findDashboards:{search:({hasReference:t,hasNoReference:r,search:n,size:i,options:s})=>async function({contentManagement:e,hasNoReference:t,hasReference:r,options:n,search:i,size:s}){const{hits:o,pagination:{total:l}}=await e.client.search({contentTypeId:a.f,query:{text:i?`${i}*`:void 0,limit:s,tags:{included:(null!=r?r:[]).map((({id:e})=>e)),excluded:(null!=t?t:[]).map((({id:e})=>e))}},options:n});return{total:l,hits:o}}({contentManagement:e,hasNoReference:r,hasReference:t,options:s,search:n,size:i}),findById:t=>n(e,t),findByIds:t=>i(e,t),findByTitle:t=>async function(e,t){const{hits:r}=await e.client.search({contentTypeId:a.f,query:{text:t?`${t}*`:void 0,limit:10},options:{onlyTitle:!0}}),n=r.filter((e=>e.attributes.title.toLowerCase()===t.toLowerCase()));if(1===n.length)return{id:n[0].id}}(e,t)},checkForDuplicateDashboardTitle:t=>async function({title:e,copyOnSave:t,lastSavedTitle:r,onTitleDuplicate:n,isTitleDuplicateConfirmed:i},s){if(i)return!0;if(e===r&&!t)return!0;const{hits:o}=await s.client.search({contentTypeId:a.f,query:{text:e?`${e}*`:void 0,limit:10},options:{onlyTitle:!0}});return!o.find((t=>t.attributes.title.toLowerCase()===e.toLowerCase()))||(null==n||n(),!1)}(t,e),deleteDashboards:t=>(async(e,t)=>{const r=e.map((e=>(M.deleteDashboard(e),t.client.delete({contentTypeId:a.f,id:e}))));await Promise.all(r)})(t,e),updateDashboardMeta:t=>(async({id:e,title:t,description:r="",tags:n},{contentManagement:s,savedObjectsTagging:o,embeddable:l})=>{const[c]=await i(s,[e]);if("error"===c.status)return;const u=o.updateTagsReferences&&n.length?o.updateTagsReferences(c.references,n):c.references;await s.client.update({contentTypeId:a.f,id:e,data:{title:t,description:r},options:{references:u}})})(t,{contentManagement:e,savedObjectsTagging:P,embeddable:o})}}},121:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return v}));var a=r(16),n=r(13),i=r(7),s=r(14),o=r(46),l=r(10),c=r(45),u=r(19),d=r(27),h=r(116),g=r(2);function p(e){return Object(n.has)(e,"language")?e:{query:e,language:"lucene"}}const v=async({id:e,data:t,embeddable:r,contentManagement:n,savedObjectsTagging:v})=>{var f,b,y;const{search:m,query:{queryString:S}}=t,w=e,P=Object(a.v4)(),T={...g.m,id:P};if(!w)return{dashboardInput:T,dashboardFound:!0,newDashboardCreated:!0};let M,O;const I=h.a.fetchDashboard(e);if(I)({item:M,meta:O}=I);else{const t=await n.client.get({contentTypeId:g.f,id:e}).catch((t=>{throw new s.SavedObjectNotFound(g.f,e)}));({item:M,meta:O}=t);const{outcome:r}=O;"aliasMatch"!==r&&h.a.addDashboard(t)}if(!M||!M.version)return{dashboardInput:T,dashboardFound:!1,dashboardId:w};const{references:E,attributes:x,managed:j}=M,D=E&&0!==E.length?Object(u.g)({references:E,attributes:x},{embeddablePersistableStateService:r}):x,C=D.kibanaSavedObjectMeta.searchSourceJSON,A=await(async()=>{if(!C)return await m.searchSource.create();try{let e=Object(c.parseSearchSourceJSON)(C);return e=Object(c.injectSearchSourceReferences)(e,E),await m.searchSource.create(e)}catch(e){return await m.searchSource.create()}})(),B=Object(o.cleanFiltersForSerialize)(null!==(f=null==A?void 0:A.getOwnField("filter"))&&void 0!==f?f:[]),k=p((null==A?void 0:A.getOwnField("query"))||S.getDefaultQuery()),{refreshInterval:F,description:R,timeRestore:N,optionsJSON:_,panelsJSON:L,timeFrom:U,version:V,timeTo:z,title:G}=D,q=N&&U&&z?{from:U,to:z}:void 0,W=_?JSON.parse(_):void 0,$=Object(u.c)(L?JSON.parse(L):[]),{dashboardInput:J,anyMigrationRun:K}=((e,t)=>{let r=!1;if(!e)return e;if(e.controlGroupInput){const a={};Object.entries(e.controlGroupInput.panels).forEach((([e,n])=>{const s=t.getEmbeddableFactory(n.type);if(!s)throw new i.EmbeddableFactoryNotFoundError(n.type);const{input:o,migrationRun:l}=Object(i.runEmbeddableFactoryMigrations)(n.explicitInput,s);l&&(r=!0),n.explicitInput=o,a[e]=n}))}const a={};return Object.entries(e.panels).forEach((([e,n])=>{const s=t.getEmbeddableFactory(n.type);if(!s)throw new i.EmbeddableFactoryNotFoundError(n.type);if(n.explicitInput.savedObjectId)s.latestVersion&&(n.explicitInput.version=s.latestVersion);else{const{input:e,migrationRun:t}=Object(i.runEmbeddableFactoryMigrations)(n.explicitInput,s);t&&(r=!0),n.explicitInput=e}a[e]=n})),e.panels=a,{dashboardInput:e,anyMigrationRun:r}})({...g.m,...W,id:P,refreshInterval:F,timeRestore:N,description:R,timeRange:q,filters:B,panels:$,query:k,title:G,viewMode:i.ViewMode.VIEW,tags:null!==(b=null===(y=v.getTagIdsFromReferences)||void 0===y?void 0:y.call(v,E))&&void 0!==b?b:[],controlGroupInput:D.controlGroupInput&&Object(l.rawControlGroupAttributesToControlGroupInput)(D.controlGroupInput),version:Object(d.b)(V)},r);return{managed:j,resolveMeta:O,dashboardInput:J,anyMigrationRun:K,dashboardFound:!0,dashboardId:w}}},123:function(e,t,r){"use strict";e.exports=b;var a,n=r(124),i=r(126),s=r(127),o=(a="function"==typeof Symbol&&"1"!==Object({IS_KIBANA_DISTRIBUTABLE:"true"})._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),l=a("length"),c=a("lengthCalculator"),u=a("allowStale"),d=a("maxAge"),h=a("dispose"),g=a("noDisposeOnSet"),p=a("lruList"),v=a("cache");function f(){return 1}function b(e){if(!(this instanceof b))return new b(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[o]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[o]=1/0);var r=e.length||f;"function"!=typeof r&&(r=f),this[c]=r,this[u]=e.stale||!1,this[d]=e.maxAge||0,this[h]=e.dispose,this[g]=e.noDisposeOnSet||!1,this.reset()}function y(e,t,r,a){var n=r.value;S(e,n)&&(P(e,r),e[u]||(n=void 0)),n&&t.call(a,n.value,n.key,e)}function m(e,t,r){var a=e[v].get(t);if(a){var n=a.value;S(e,n)?(P(e,a),e[u]||(n=void 0)):r&&e[p].unshiftNode(a),n&&(n=n.value)}return n}function S(e,t){if(!t||!t.maxAge&&!e[d])return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[d]&&r>e[d]}function w(e){if(e[l]>e[o])for(var t=e[p].tail;e[l]>e[o]&&null!==t;){var r=t.prev;P(e,t),t=r}}function P(e,t){if(t){var r=t.value;e[h]&&e[h](r.key,r.value),e[l]-=r.length,e[v].delete(r.key),e[p].removeNode(t)}}function T(e,t,r,a,n){this.key=e,this.value=t,this.length=r,this.now=a,this.maxAge=n||0}Object.defineProperty(b.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[o]=e,w(this)},get:function(){return this[o]},enumerable:!0}),Object.defineProperty(b.prototype,"allowStale",{set:function(e){this[u]=!!e},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(b.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[d]=e,w(this)},get:function(){return this[d]},enumerable:!0}),Object.defineProperty(b.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=f),e!==this[c]&&(this[c]=e,this[l]=0,this[p].forEach((function(e){e.length=this[c](e.value,e.key),this[l]+=e.length}),this)),w(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this[l]},enumerable:!0}),Object.defineProperty(b.prototype,"itemCount",{get:function(){return this[p].length},enumerable:!0}),b.prototype.rforEach=function(e,t){t=t||this;for(var r=this[p].tail;null!==r;){var a=r.prev;y(this,e,r,t),r=a}},b.prototype.forEach=function(e,t){t=t||this;for(var r=this[p].head;null!==r;){var a=r.next;y(this,e,r,t),r=a}},b.prototype.keys=function(){return this[p].toArray().map((function(e){return e.key}),this)},b.prototype.values=function(){return this[p].toArray().map((function(e){return e.value}),this)},b.prototype.reset=function(){this[h]&&this[p]&&this[p].length&&this[p].forEach((function(e){this[h](e.key,e.value)}),this),this[v]=new n,this[p]=new s,this[l]=0},b.prototype.dump=function(){return this[p].map((function(e){if(!S(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},b.prototype.dumpLru=function(){return this[p]},b.prototype.inspect=function(e,t){var r="LRUCache {",a=!1;this[u]&&(r+="\n  allowStale: true",a=!0);var n=this[o];n&&n!==1/0&&(a&&(r+=","),r+="\n  max: "+i.inspect(n,t),a=!0);var s=this[d];s&&(a&&(r+=","),r+="\n  maxAge: "+i.inspect(s,t),a=!0);var h=this[c];h&&h!==f&&(a&&(r+=","),r+="\n  length: "+i.inspect(this[l],t),a=!0);var g=!1;return this[p].forEach((function(e){g?r+=",\n  ":(a&&(r+=",\n"),g=!0,r+="\n  ");var n=i.inspect(e.key).split("\n").join("\n  "),o={value:e.value};e.maxAge!==s&&(o.maxAge=e.maxAge),h!==f&&(o.length=e.length),S(this,e)&&(o.stale=!0),o=i.inspect(o,t).split("\n").join("\n  "),r+=n+" => "+o})),(g||a)&&(r+="\n"),r+="}"},b.prototype.set=function(e,t,r){var a=(r=r||this[d])?Date.now():0,n=this[c](t,e);if(this[v].has(e)){if(n>this[o])return P(this,this[v].get(e)),!1;var i=this[v].get(e).value;return this[h]&&(this[g]||this[h](e,i.value)),i.now=a,i.maxAge=r,i.value=t,this[l]+=n-i.length,i.length=n,this.get(e),w(this),!0}var s=new T(e,t,n,a,r);return s.length>this[o]?(this[h]&&this[h](e,t),!1):(this[l]+=s.length,this[p].unshift(s),this[v].set(e,this[p].head),w(this),!0)},b.prototype.has=function(e){return!!this[v].has(e)&&!S(this,this[v].get(e).value)},b.prototype.get=function(e){return m(this,e,!0)},b.prototype.peek=function(e){return m(this,e,!1)},b.prototype.pop=function(){var e=this[p].tail;return e?(P(this,e),e.value):null},b.prototype.del=function(e){P(this,this[v].get(e))},b.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var a=e[r],n=a.e||0;if(0===n)this.set(a.k,a.v);else{var i=n-t;i>0&&this.set(a.k,a.v,i)}}},b.prototype.prune=function(){var e=this;this[v].forEach((function(t,r){m(e,r,!1)}))}},124:function(e,t,r){"pseudomap"===Object({IS_KIBANA_DISTRIBUTABLE:"true"}).npm_package_name&&"test"===Object({IS_KIBANA_DISTRIBUTABLE:"true"}).npm_lifecycle_script&&(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).TEST_PSEUDOMAP="true"),"function"!=typeof Map||Object({IS_KIBANA_DISTRIBUTABLE:"true"}).TEST_PSEUDOMAP?e.exports=r(125):e.exports=Map},125:function(e,t){var r=Object.prototype.hasOwnProperty;function a(e){if(!(this instanceof a))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof a||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function n(e,t){return e===t||e!=e&&t!=t}function i(e,t,r){this.key=e,this.value=t,this._index=r}function s(e,t){for(var a=0,i="_"+t,s=i;r.call(e,s);s=i+a++)if(n(e[s].key,t))return e[s]}e.exports=a,a.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(r){"size"!==r&&e.call(t,this._data[r].value,this._data[r].key)}),this)},a.prototype.has=function(e){return!!s(this._data,e)},a.prototype.get=function(e){var t=s(this._data,e);return t&&t.value},a.prototype.set=function(e,t){!function(e,t,a){for(var s=0,o="_"+t,l=o;r.call(e,l);l=o+s++)if(n(e[l].key,t))return void(e[l].value=a);e.size++,e[l]=new i(t,a,l)}(this._data,e,t)},a.prototype.delete=function(e){var t=s(this._data,e);t&&(delete this._data[t._index],this._data.size--)},a.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(a.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),a.prototype.values=a.prototype.keys=a.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},126:function(e,t,r){e.exports=r(32)(2972)},127:function(e,t){function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var a=0,n=arguments.length;a<n;a++)t.push(arguments[a]);return t}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=r,r.Node=a,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n=arguments[e],(r=this).tail=new a(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++;var r,n;return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)n=arguments[e],(r=this).head=new a(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++;var r,n;return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,a=0;null!==r;a++)e.call(t,r.value,a,this),r=r.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,a=this.length-1;null!==r;a--)e.call(t,r.value,a,this),r=r.prev},r.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},r.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},r.prototype.map=function(e,t){t=t||this;for(var a=new r,n=this.head;null!==n;)a.push(e.call(t,n.value,this)),n=n.next;return a},r.prototype.mapReverse=function(e,t){t=t||this;for(var a=new r,n=this.tail;null!==n;)a.push(e.call(t,n.value,this)),n=n.prev;return a},r.prototype.reduce=function(e,t){var r,a=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");a=this.head.next,r=this.head.value}for(var n=0;null!==a;n++)r=e(r,a.value,n),a=a.next;return r},r.prototype.reduceReverse=function(e,t){var r,a=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");a=this.tail.prev,r=this.tail.value}for(var n=this.length-1;null!==a;n--)r=e(r,a.value,n),a=a.prev;return r},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var a=new r;if(t<e||t<0)return a;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)a.push(i.value);return a},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var a=new r;if(t<e||t<0)return a;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)a.push(i.value);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var a=r.prev;r.prev=r.next,r.next=a}return this.head=t,this.tail=e,this}},64:function(e,t,r){"use strict";r.r(t),r.d(t,"pluginServices",(function(){return l})),r.d(t,"registry",(function(){return c}));var a=r(46),n=r(84),i=r(13),s=r(116);const o={dashboardContentManagement:new a.PluginServiceProvider(s.b,["savedObjectsTagging","initializerContext","dashboardBackup","screenshotMode","notifications","embeddable","spaces","data"]),dashboardBackup:new a.PluginServiceProvider(n.b,["notifications","spaces"]),analytics:new a.PluginServiceProvider((({coreStart:e})=>{const{analytics:{reportEvent:t}}=e;return{reportEvent:t}})),application:new a.PluginServiceProvider((({coreStart:e})=>{const{application:{currentAppId$:t,navigateToApp:r,navigateToUrl:a,getUrlForApp:n,capabilities:{advancedSettings:i,maps:s,navLinks:o,visualize:l}}}=e;return{currentAppId$:t,navigateToApp:r,navigateToUrl:a,getUrlForApp:n,capabilities:{advancedSettings:i,maps:s,navLinks:o,visualize:l}}})),chrome:new a.PluginServiceProvider((({coreStart:e})=>{const{chrome:{docTitle:t,setBadge:r,getIsVisible$:a,recentlyAccessed:n,setBreadcrumbs:i,setHelpExtension:s,setIsVisible:o},theme:l}=e;return{docTitle:t,setBadge:r,getIsVisible$:a,recentlyAccessed:n,setBreadcrumbs:i,setHelpExtension:s,setIsVisible:o,theme:l}})),coreContext:new a.PluginServiceProvider((({coreStart:e})=>{const{executionContext:t,i18n:{Context:r}}=e;return{executionContext:t,i18nContext:r}})),dashboardCapabilities:new a.PluginServiceProvider((({coreStart:e})=>{const{application:{capabilities:{dashboard:t,maps:r,visualize:a}}}=e;return{show:Boolean(t.show),saveQuery:Boolean(t.saveQuery),createNew:Boolean(t.createNew),mapsCapabilities:{save:Boolean(null==r?void 0:r.save)},createShortUrl:Boolean(t.createShortUrl),showWriteControls:Boolean(t.showWriteControls),visualizeCapabilities:{save:Boolean(null==a?void 0:a.save)},storeSearchSession:Boolean(t.storeSearchSession)}})),data:new a.PluginServiceProvider((({startPlugins:e})=>{const{data:{dataViews:t,fieldFormats:r,query:a,search:n}}=e;return{dataViews:t,fieldFormats:r,query:a,search:n}})),dataViewEditor:new a.PluginServiceProvider((({startPlugins:e})=>{const{dataViewEditor:{openEditor:t,userPermissions:r}}=e;return{openEditor:t,userPermissions:r}})),documentationLinks:new a.PluginServiceProvider((({coreStart:e})=>{const{docLinks:{links:{kibana:t,indexPatterns:{introduction:r},dashboard:a}}}=e;return{indexPatternsDocLink:r,kibanaGuideDocLink:t.guide,dashboardDocLink:a.guide}})),embeddable:new a.PluginServiceProvider((({startPlugins:e})=>{const{embeddable:t}=e;return Object(i.pick)(t,["getEmbeddableFactory","getEmbeddableFactories","getStateTransfer","getAllMigrations","telemetry","extract","inject"])})),http:new a.PluginServiceProvider((({coreStart:e})=>{const{http:{basePath:t,get:r}}=e;return{basePath:t,get:r}})),initializerContext:new a.PluginServiceProvider((({initContext:e})=>{const{env:{packageInfo:{version:t}},config:{get:r}}=e;return{kibanaVersion:t,allowByValueEmbeddables:r().allowByValueEmbeddables}})),navigation:new a.PluginServiceProvider((({startPlugins:e})=>{const{navigation:{ui:{TopNavMenu:t}}}=e;return{TopNavMenu:t}})),notifications:new a.PluginServiceProvider((({coreStart:e})=>{const{notifications:{toasts:t,showErrorDialog:r}}=e;return{toasts:t,showErrorDialog:r}})),overlays:new a.PluginServiceProvider((({coreStart:e})=>{const{overlays:{banners:t,openConfirm:r,openFlyout:a,openModal:n}}=e;return{banners:t,openConfirm:r,openFlyout:a,openModal:n}})),savedObjectsTagging:new a.PluginServiceProvider((({startPlugins:e})=>{const{savedObjectsTaggingOss:t}=e;if(!t)return{hasApi:!1};const{getTaggingApi:r}=t,a=r();if(!a)return{hasApi:!1};const{ui:{components:n,parseSearchQuery:i,hasTagDecoration:s,getSearchBarFilter:o,updateTagsReferences:l,getTagIdsFromReferences:c,getTableColumnDefinition:u,getTagList:d}}=a;return{hasApi:!0,api:a,components:n,hasTagDecoration:s,parseSearchQuery:i,getSearchBarFilter:o,updateTagsReferences:l,getTagIdsFromReferences:c,getTableColumnDefinition:u,getTagList:d}})),screenshotMode:new a.PluginServiceProvider((({startPlugins:e})=>{const{screenshotMode:{isScreenshotMode:t,getScreenshotContext:r}}=e;return{isScreenshotMode:t,getScreenshotContext:r}})),settings:new a.PluginServiceProvider((({coreStart:e,startPlugins:t})=>{const{uiSettings:r,theme:a}=e,{presentationUtil:{labsService:{isProjectEnabled:n}}}=t;return{uiSettings:r,theme:a,isProjectEnabledInLabs:n}})),share:new a.PluginServiceProvider((({startPlugins:e})=>{const{share:t}=e;if(!t)return{};const{toggleShareContextMenu:r,url:a}=t;return{url:a,toggleShareContextMenu:r}})),spaces:new a.PluginServiceProvider((({startPlugins:e})=>{const{spaces:t}=e;if(!t||!t.ui)return{};const{getActiveSpace$:r,ui:{components:{getLegacyUrlConflict:a},redirectLegacyUrl:n}}=t;return{getActiveSpace$:r,getLegacyUrlConflict:a,redirectLegacyUrl:n}})),urlForwarding:new a.PluginServiceProvider((({startPlugins:e})=>{const{urlForwarding:{navigateToLegacyKibanaUrl:t}}=e;return{navigateToLegacyKibanaUrl:t}})),usageCollection:new a.PluginServiceProvider((({startPlugins:e})=>{const{usageCollection:t}=e;if(!t)return{};const{reportUiCounter:r}=t;return{reportUiCounter:r}})),visualizations:new a.PluginServiceProvider((({startPlugins:e})=>{const{visualizations:{get:t,getAliases:r,getByGroup:a,showNewVisModal:n}}=e;return{get:t,getAliases:r,getByGroup:a,showNewVisModal:n}})),customBranding:new a.PluginServiceProvider((({coreStart:e})=>{const{customBranding:t}=e;return{hasCustomBranding$:t.hasCustomBranding$,customBranding$:t.customBranding$}})),savedObjectsManagement:new a.PluginServiceProvider((({startPlugins:e})=>{const{savedObjectsManagement:t}=e;return t})),contentManagement:new a.PluginServiceProvider((({startPlugins:e})=>{const{contentManagement:t}=e;return t})),serverless:new a.PluginServiceProvider((({startPlugins:e})=>{const{serverless:t}=e;return{setBreadcrumbs:null==t?void 0:t.setBreadcrumbs}})),noDataPage:new a.PluginServiceProvider((({startPlugins:e})=>{var t;const{noDataPage:r}=e;return{getAnalyticsNoDataPageFlavor:null!==(t=null==r?void 0:r.getAnalyticsNoDataPageFlavor)&&void 0!==t?t:()=>"kibana"}}))},l=new a.PluginServices,c=new a.PluginServiceRegistry(o)},84:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return p}));var a=r(3),n=r.n(a),i=r(26),s=r(13),o=r(56),l=r(7),c=r(14),u=r(85);const d="unsavedDashboard",h="dashboardStateManagerPanels",g="dashboardViewMode";class DashboardBackupService{constructor(e){n()(this,"activeSpaceId",void 0),n()(this,"sessionStorage",void 0),n()(this,"localStorage",void 0),n()(this,"notifications",void 0),n()(this,"spaces",void 0),n()(this,"oldDashboardsWithUnsavedChanges",[]),n()(this,"getViewMode",(()=>this.localStorage.get(g))),n()(this,"storeViewMode",(e=>{try{this.localStorage.set(g,e)}catch(e){this.notifications.toasts.addDanger({title:u.a.viewModeStorageError(e.message),"data-test-subj":"dashboardViewmodeBackupFailure"})}})),({notifications:this.notifications,spaces:this.spaces}=e),this.sessionStorage=new c.Storage(sessionStorage),this.localStorage=new c.Storage(localStorage),this.activeSpaceId="default",this.spaces.getActiveSpace$&&Object(i.firstValueFrom)(this.spaces.getActiveSpace$()).then((e=>{this.activeSpaceId=e.id}))}clearState(e=d){try{const t=this.sessionStorage.get(h),r=(null==t?void 0:t[this.activeSpaceId])||{};r[e]&&(delete r[e],this.sessionStorage.set(h,t))}catch(e){this.notifications.toasts.addDanger({title:u.a.getPanelsClearError(e.message),"data-test-subj":"dashboardPanelsClearFailure"})}}getState(e=d){try{var t,r;return null===(t=this.sessionStorage.get(h))||void 0===t||null===(r=t[this.activeSpaceId])||void 0===r?void 0:r[e]}catch(e){this.notifications.toasts.addDanger({title:u.a.getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"})}}setState(e=d,t){try{const r=this.sessionStorage.get(h)||{};Object(o.set)(r,[this.activeSpaceId,e],t),this.sessionStorage.set(h,r)}catch(e){this.notifications.toasts.addDanger({title:u.a.getPanelsSetError(e.message),"data-test-subj":"dashboardPanelsSetFailure"})}}getDashboardIdsWithUnsavedChanges(){try{var e;const t=(null===(e=this.sessionStorage.get(h))||void 0===e?void 0:e[this.activeSpaceId])||{},r=[];return Object.keys(t).map((e=>{t[e].viewMode===l.ViewMode.EDIT&&Object.keys(t[e]).some((e=>"viewMode"!==e))&&r.push(e)})),Object(s.isEqual)(this.oldDashboardsWithUnsavedChanges,r)||(this.oldDashboardsWithUnsavedChanges=r),this.oldDashboardsWithUnsavedChanges}catch(e){return this.notifications.toasts.addDanger({title:u.a.getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"}),[]}}dashboardHasUnsavedEdits(e=d){return-1!==this.getDashboardIdsWithUnsavedChanges().indexOf(e)}}const p=(e,t)=>new DashboardBackupService(t)},85:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var a=r(4);const n={getEditModeTitle:()=>a.i18n.translate("dashboard.emptyScreen.editModeTitle",{defaultMessage:"This dashboard is empty. Letâ€™s fill it up!"}),getEditModeSubtitle:()=>a.i18n.translate("dashboard.emptyScreen.editModeSubtitle",{defaultMessage:"Create a visualization of your data, or add one from the library."}),getAddFromLibraryButtonTitle:()=>a.i18n.translate("dashboard.emptyScreen.addFromLibrary",{defaultMessage:"Add from library"}),getCreateVisualizationButtonTitle:()=>a.i18n.translate("dashboard.emptyScreen.createVisualization",{defaultMessage:"Create visualization"}),getViewModeWithPermissionsTitle:()=>a.i18n.translate("dashboard.emptyScreen.viewModeTitle",{defaultMessage:"Add visualizations to your dashboard"}),getViewModeWithPermissionsSubtitle:()=>a.i18n.translate("dashboard.emptyScreen.viewModeSubtitle",{defaultMessage:"Enter edit mode, and then start adding your visualizations."}),getEditLinkTitle:()=>a.i18n.translate("dashboard.emptyScreen.editDashboard",{defaultMessage:"Edit dashboard"}),getViewModeWithoutPermissionsTitle:()=>a.i18n.translate("dashboard.emptyScreen.noPermissionsTitle",{defaultMessage:"This dashboard is empty."}),getViewModeWithoutPermissionsSubtitle:()=>a.i18n.translate("dashboard.emptyScreen.noPermissionsSubtitle",{defaultMessage:"You need additional privileges to edit this dashboard."})},i={getSuccessString:e=>a.i18n.translate("dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:e}}),getFailureString:(e,t)=>a.i18n.translate("dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:e,errorMessage:t}})},s={viewModeStorageError:e=>a.i18n.translate("dashboard.viewmodeBackup.error",{defaultMessage:"Error encountered while backing up view mode: {message}",values:{message:e}}),getPanelsGetError:e=>a.i18n.translate("dashboard.panelStorageError.getError",{defaultMessage:"Error encountered while fetching unsaved changes: {message}",values:{message:e}}),getPanelsSetError:e=>a.i18n.translate("dashboard.panelStorageError.setError",{defaultMessage:"Error encountered while setting unsaved changes: {message}",values:{message:e}}),getPanelsClearError:e=>a.i18n.translate("dashboard.panelStorageError.clearError",{defaultMessage:"Error encountered while clearing unsaved changes: {message}",values:{message:e}})}}}]);