/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observabilityAIAssistant_bundle_jsonpfunction=window.observabilityAIAssistant_bundle_jsonpfunction||[]).push([[0],Array(43).concat([function(e,t,n){"use strict";e.exports=n(92)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(17);const i=()=>Object(r.useKibana)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var r=n(78),i=n(55);function o(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=o,t.parseJSON=function(e,t){return o((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return o((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fold=function(e,n){return function(r){return t.isLeft(r)?e(r.left):n(r.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(r){return e(r)?t.right(r):t.left(n(r))}))};var a=function(e,n){return i.pipe(e,t.map(n))},s=function(e,n){return i.pipe(e,t.ap(n))},c=function(e,n){return i.pipe(e,t.chain(n))},u=function(e,n,r){return i.pipe(e,t.reduce(n,r))},l=function(e){return function(n,r){var o=t.foldMap(e);return i.pipe(n,o(r))}},d=function(e,n,r){return i.pipe(e,t.reduceRight(n,r))},f=function(e){var n=t.traverse(e);return function(e,t){return i.pipe(e,n(t))}},p=function(e,n,r){return i.pipe(e,t.bimap(n,r))},g=function(e,n){return i.pipe(e,t.mapLeft(n))},b=function(e,n){return i.pipe(e,t.alt(n))},m=function(e,n){return i.pipe(e,t.extend(n))},h=function(e,n){return r.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function v(e){return{concat:function(n,r){return t.isLeft(n)?n:t.isLeft(r)?r:t.right(e.concat(n.right,r.right))}}}function y(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:a,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,r){return t.isLeft(e)||r(e.right)?e:n},filterMap:function(e,r){if(t.isLeft(e))return e;var i=r(e.right);return"None"===i._tag?n:t.right(i.value)},partition:function(e,r){return t.isLeft(e)?{left:e,right:e}:r(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,r){if(t.isLeft(e))return{left:e,right:e};var i=r(e.right);return t.isLeft(i)?{left:t.right(i.left),right:n}:{left:n,right:t.right(i.right)}}}}function j(e){return{URI:t.URI,_E:void 0,map:a,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.left,r.left)):n:t.isLeft(r)?r:t.right(n.right(r.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:a,alt:function(n,r){if(t.isRight(n))return n;var i=r();return t.isLeft(i)?t.left(e.concat(n.left,i.left)):i}}}function O(e,n){return{concat:function(r,i){return t.isLeft(r)?t.isLeft(i)?t.left(e.concat(r.left,i.left)):r:t.isLeft(i)?i:t.right(n.concat(r.right,i.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(r){return t.isLeft(r)?t.left(e(r.left)):t.right(n(r.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return i.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return i.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return i.pipe(n,t.chainW((function(n){return i.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(i.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(i.identity),t.reduce=function(e,n){return function(r){return t.isLeft(r)?e:n(e,r.right)}},t.foldMap=function(e){return function(n){return function(r){return t.isLeft(r)?e.empty:n(r.right)}}},t.reduceRight=function(e,n){return function(r){return t.isLeft(r)?e:n(r.right,e)}},t.traverse=function(e){return function(n){return function(r){return t.isLeft(r)?e.of(t.left(r.left)):e.map(n(r.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(r){return t.isLeft(r)?"left("+e.show(r.left)+")":"right("+n.show(r.right)+")"}}},t.getEq=function(e,n){return{equals:function(r,i){return r===i||(t.isLeft(r)?t.isLeft(i)&&e.equals(r.left,i.left):t.isRight(i)&&n.equals(r.right,i.right))}}},t.getSemigroup=function(e){return{concat:function(n,r){return t.isLeft(r)?n:t.isLeft(n)?r:t.right(e.concat(n.right,r.right))}}},t.getApplySemigroup=v,t.getApplyMonoid=function(e){return{concat:v(e).concat,empty:t.right(e.empty)}},t.getFilterable=y,t.getWitherable=function(e){var n=y(e);return{URI:t.URI,_E:void 0,map:a,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:f,sequence:t.sequence,reduce:u,foldMap:l,reduceRight:d,wither:function(e){var t=f(e);return function(r,i){return e.map(t(r,i),n.compact)}},wilt:function(e){var t=f(e);return function(r,i){return e.map(t(r,i),n.separate)}}}},t.getApplicativeValidation=j,t.getAltValidation=x,t.getValidation=function(e){var n=j(e),r=x(e);return{URI:t.URI,_E:void 0,map:a,of:t.of,chain:c,bimap:p,mapLeft:g,reduce:u,foldMap:l,reduceRight:d,extend:m,traverse:f,sequence:t.sequence,chainRec:h,throwError:t.throwError,ap:n.ap,alt:r.alt}},t.getValidationSemigroup=O,t.Functor={URI:t.URI,map:a},t.Applicative={URI:t.URI,map:a,ap:s,of:t.of},t.Monad={URI:t.URI,map:a,ap:s,of:t.of,chain:c},t.Foldable={URI:t.URI,reduce:u,foldMap:l,reduceRight:d},t.Traversable={URI:t.URI,map:a,reduce:u,foldMap:l,reduceRight:d,traverse:f,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:p,mapLeft:g},t.Alt={URI:t.URI,map:a,alt:b},t.Extend={URI:t.URI,map:a,extend:m},t.ChainRec={URI:t.URI,map:a,ap:s,chain:c,chainRec:h},t.MonadThrow={URI:t.URI,map:a,ap:s,of:t.of,chain:c,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:O(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:a,of:t.of,ap:s,chain:c,reduce:u,foldMap:l,reduceRight:d,traverse:f,sequence:t.sequence,bimap:p,mapLeft:g,alt:b,extend:m,chainRec:h,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,r){return!t.isLeft(r)&&e.equals(n,r.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(i.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(r){return i.pipe(n(r),t.map((function(t){return i.bind_(r,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return i.flow(t.map((function(t){return function(n){return i.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(0),o=r.__importDefault(n(77));t.default=function(e,t){var n=i.useState(t),r=n[0],a=n[1];return o.default((function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}}),[e]),r}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n(5);const i=r.i18n.translate("xpack.observabilityAiAssistant.assistantSetup.title",{defaultMessage:"Welcome to Elastic AI Assistant"}),o=r.i18n.translate("xpack.observabilityAiAssistant.emptyConversationTitle",{defaultMessage:"New conversation"}),a=r.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.title",{defaultMessage:"Upgrade your license"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(39),i=n(0);function o(e,t,n){const o=null==n?void 0:n.clearValueOnNext,a=Object(i.useRef)(new AbortController),[s,c]=Object(i.useState)(0),[u,l]=Object(i.useState)(),[d,f]=Object(i.useState)(!1),[p,g]=Object(i.useState)(null==n?void 0:n.defaultValue);return Object(i.useEffect)((()=>{a.current.abort();const t=new AbortController;a.current=t,o&&g(void 0);try{const n=e({signal:t.signal});Object(r.isPromise)(n)?(f(!0),n.then(g).catch((e=>{g(void 0),l(e)})).finally((()=>f(!1)))):(l(void 0),g(n),f(!1))}catch(e){g(void 0),l(e),f(!1)}return()=>{t.abort()}}),t.concat(s,o)),Object(i.useMemo)((()=>({error:u,loading:d,value:p,refresh:()=>{c((e=>e+1))}})),[u,p,d])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(51);function o(){const e=Object(r.useContext)(i.a);if(!e)throw new Error("ObservabilityAIAssistantChatServiceContext not set. Did you wrap your component in `<ObservabilityAIAssistantChatServiceProvider/>`?");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeable=t.pipe=void 0;var r=n(55);t.pipe=r.pipe;t.pipeable=function(e){var t={};return function(e){return"function"==typeof e.map}(e)&&(t.map=function(t){return function(n){return e.map(n,t)}}),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(t){return function(n){return e.contramap(n,t)}}),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.identity)}),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.reduceRight(r,t,n)}}),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(t){return function(n){return e.alt(n,t)}}),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(t){return function(n){return e.compose(n,t)}}),function(e){return"function"==typeof e.throwError}(e)&&(t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0);const i=Object(r.createContext)(void 0),o=i.Provider},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n(0);var r=n(1);const i={xl:64,l:48,m:32,s:24,xs:16};function o({size:e="s"}){return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:i[e],height:i[e],viewBox:"0 0 64 64",fill:"none"},Object(r.jsx)("path",{fill:"#F04E98",d:"M36 28h24v36H36V28Z"}),Object(r.jsx)("path",{fill:"#00BFB3",d:"M4 46c0-9.941 8.059-18 18-18h6v36h-6c-9.941 0-18-8.059-18-18Z"}),Object(r.jsx)("path",{fill:"#343741",d:"M60 12c0 6.627-5.373 12-12 12s-12-5.373-12-12S41.373 0 48 0s12 5.373 12 12Z"}),Object(r.jsx)("path",{fill:"#FA744E",d:"M6 23C6 10.85 15.85 1 28 1v22H6Z"}))}},function(e,t,n){"use strict";function r(e){return e.basePath.prepend("/app/management/insightsAndAlerting/triggersActionsConnectors/connectors")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return f}));var r=n(5),i=n(26),o=n(0),a=n(7),s=n(56),c=n(44),u=n(66);let l;function d(e,t){return[t,...e.filter((e=>e.message.role!==a.b.System))]}function f({initialMessages:e,initialConversationId:t,chatService:n,connectorId:f,onConversationUpdate:p,onChatComplete:g,persist:b}){const[m,h]=Object(o.useState)(l.Ready),v=Object(o.useMemo)((()=>function({contexts:e}){const t=e.find((e=>"core"===e.name)),n=Object(i.without)(e.concat(),t);return{"@timestamp":(new Date).toISOString(),message:{role:a.b.System,content:[t,...n].map((e=>e.description)).join("\n")}}}({contexts:n.getContexts()})),[n]);Object(u.a)(e),Object(u.a)(t);const[y,j]=Object(o.useState)(t),[x,O]=Object(o.useState)(e),[k,w]=Object(o.useState)(),E=Object(o.useRef)(new AbortController),{services:{notifications:C}}=Object(c.a)(),S=Object(o.useRef)(g);S.current=g;const A=Object(o.useRef)(p);A.current=p;const T=Object(o.useCallback)((()=>{h(l.Aborted)}),[]),I=Object(o.useCallback)((e=>{C.toasts.addError(e,{title:r.i18n.translate("xpack.observabilityAiAssistant.failedToLoadResponse",{defaultMessage:"Failed to load response from the AI Assistant"})}),h(l.Error)}),[C.toasts]),M=Object(o.useCallback)((async e=>{if(E.current.signal.removeEventListener("abort",T),E.current.abort(),E.current=new AbortController,w([]),O(e),!f||!e.length)return void h(l.Ready);h(l.Loading);const t=n.complete({connectorId:f,messages:d(e,v),persist:b,signal:E.current.signal,conversationId:y});function r(){return[...o,...c?[Object(i.merge)({message:{role:a.b.Assistant,function_call:{trigger:a.b.Assistant}}},c)]:[]]}const o=[];let c;const u=t.subscribe({next:e=>{var t,n;switch(e.type){case s.c.ChatCompletionChunk:var i,a,u,l;c?(c.message.content+=e.message.content||"",c.message.function_call.name+=(null===(i=e.message.function_call)||void 0===i?void 0:i.name)||"",c.message.function_call.arguments+=(null===(a=e.message.function_call)||void 0===a?void 0:a.arguments)||""):c={"@timestamp":(new Date).toISOString(),message:{content:e.message.content||"",function_call:{name:(null===(u=e.message.function_call)||void 0===u?void 0:u.name)||"",arguments:(null===(l=e.message.function_call)||void 0===l?void 0:l.arguments)||""}}};break;case s.c.MessageAdd:c=void 0,o.push(e.message);break;case s.c.ConversationCreate:j(e.conversation.id),null===(t=A.current)||void 0===t||t.call(A,e);break;case s.c.ConversationUpdate:null===(n=A.current)||void 0===n||n.call(A,e)}w(r())},complete:()=>{var t;h(l.Ready);const n=e.concat(o);O(n),w([]),null===(t=S.current)||void 0===t||t.call(S,n)},error:t=>{w([]),O(e.concat(r())),I(t)}});E.current.signal.addEventListener("abort",(()=>{T(),u.unsubscribe()}))}),[f,n,T,v,I,b,y]);return Object(o.useEffect)((()=>()=>{E.current.abort()}),[]),{messages:Object(o.useMemo)((()=>d(x.concat(null!=k?k:[]),v)),[v,x,k]),setMessages:Object(o.useCallback)((e=>{E.current.abort(),w([]),h(l.Ready),O(e)}),[]),state:m,next:M,stop:()=>{E.current.abort()}}}!function(e){e.Ready="ready",e.Loading="loading",e.Error="error",e.Aborted="aborted"}(l||(l={}))},function(e,t,n){"use strict";function r(e){return e}function i(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=r,t.unsafeCoerce=r,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,r,i,o,a,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return o(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(o(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(a(o(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(s(a(o(i(r(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=i,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p,g,b,m,h,v,y){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return o(i(r(n(t(e)))));case 7:return a(o(i(r(n(t(e))))));case 8:return s(a(o(i(r(n(t(e)))))));case 9:return c(s(a(o(i(r(n(t(e))))))));case 10:return u(c(s(a(o(i(r(n(t(e)))))))));case 11:return l(u(c(s(a(o(i(r(n(t(e))))))))));case 12:return d(l(u(c(s(a(o(i(r(n(t(e)))))))))));case 13:return f(d(l(u(c(s(a(o(i(r(n(t(e))))))))))));case 14:return p(f(d(l(u(c(s(a(o(i(r(n(t(e)))))))))))));case 15:return g(p(f(d(l(u(c(s(a(o(i(r(n(t(e))))))))))))));case 16:return b(g(p(f(d(l(u(c(s(a(o(i(r(n(t(e)))))))))))))));case 17:return m(b(g(p(f(d(l(u(c(s(a(o(i(r(n(t(e))))))))))))))));case 18:return h(m(b(g(p(f(d(l(u(c(s(a(o(i(r(n(t(e)))))))))))))))));case 19:return v(h(m(b(g(p(f(d(l(u(c(s(a(o(i(r(n(t(e))))))))))))))))));case 20:return y(v(h(m(b(g(p(f(d(l(u(c(s(a(o(i(r(n(t(e)))))))))))))))))))}},t.hole=i,t.bind_=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return ConversationCompletionError}));var r=n(6),i=n.n(r);let o,a;n(5),function(e){e.ChatCompletionChunk="chatCompletionChunk",e.ConversationCreate="conversationCreate",e.ConversationUpdate="conversationUpdate",e.MessageAdd="messageAdd",e.ConversationCompletionError="conversationCompletionError"}(o||(o={})),function(e){e.InternalError="internalError",e.NotFound="notFound"}(a||(a={}));class ConversationCompletionError extends Error{constructor(e,t){super(t),i()(this,"code",void 0),this.code=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e){var t=r.useRef();return r.useEffect((function(){t.current=e})),t.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(13);function o(){const e=Object(i.a)(),[t,n]=Object(r.useState)();return Object(r.useEffect)((()=>{(async()=>{try{const t=await e.getCurrentUser();n(t)}catch{n(void 0)}})()}),[e]),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(5),i=n(0),o=n(48),a=n(44),s=n(13);function c(){var e;const{notifications:{toasts:t},plugins:{start:{ml:n}}}=Object(a.a)().services,c=Object(s.a)(),u=Object(o.a)((({signal:e})=>c.callApi("GET /internal/observability_ai_assistant/kb/status",{signal:e})),[]),[l,d]=Object(i.useState)(!1),[f,p]=Object(i.useState)();return Object(i.useMemo)((()=>{let e=0;const i=()=>(d(!0),c.callApi("POST /internal/observability_ai_assistant/kb/setup",{signal:null}).then((()=>{var e;return null===(e=n.mlApi)||void 0===e?void 0:e.savedObjects.syncSavedObjects()})).then((()=>{u.refresh()})).catch((n=>{var o,a;if((503===(null===(o=n.body)||void 0===o?void 0:o.statusCode)||504===(null===(a=n.body)||void 0===a?void 0:a.statusCode))&&e<5)return e++,i();p(n),t.addError(n,{title:r.i18n.translate("xpack.observabilityAiAssistant.errorSettingUpKnowledgeBase",{defaultMessage:"Could not set up Knowledge Base"})})})).finally((()=>{d(!1)})));return{status:u,install:i,isInstalling:l,installError:f}}),[u,l,f,c,null===(e=n.mlApi)||void 0===e?void 0:e.savedObjects,t])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),i=n(27),o=n(75),a=n(44);function s(){const e=Object(i.useHistory)(),{services:{http:t}}=Object(a.a)(),n=(...e)=>o.a.link(...e);return Object(r.useMemo)((()=>({...o.a,push:(...t)=>{const r=n(...t);e.push(r)},replace:(t,...r)=>{const i=n(t,...r);e.replace(i)},link:(e,...r)=>t.basePath.prepend("/app/observabilityAIAssistant"+n(e,...r))})),[t,e])}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return _t}));var r=n(0),i=n.n(r),o=n(43),a=n(12),s=n(28),c=n(5),u=n(26),l=n(54),d=n(47),f=n(48),p=n(44),g=n(13),b=n(66);function m({title:e=d.b}={}){return{"@timestamp":(new Date).toISOString(),messages:[],conversation:{title:e},labels:{},numeric_labels:{},public:!1}}const h=[];var v=n(30),y=n(46),j=n.n(y);const x=()=>{var e;const t=Object(g.a)(),n=j()(null!==(e=t.getLicense())&&void 0!==e?e:new v.Observable,null);return{getLicense:()=>n,hasAtLeast:Object(r.useCallback)((e=>{if(n)return!!n&&n.isAvailable&&n.isActive&&n.hasAtLeast(e)}),[n])}};var O=n(49),k=n(4),w=n(52),E=n(67),C=n(1);function S({connectors:e,conversationId:t,disabled:n,onCopyConversationClick:i}){var o,s;const{application:{navigateToUrl:u},http:l}=Object(p.a)().services,[d,f]=Object(r.useState)(!1),g=()=>{f(!d)};return Object(C.jsx)(a.EuiPopover,{isOpen:d,button:Object(C.jsx)(a.EuiButtonIcon,{"data-test-subj":"observabilityAiAssistantChatActionsMenuButtonIcon",disabled:n,iconType:"boxesVertical",onClick:g,"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatActionsMenu.euiButtonIcon.menuLabel",{defaultMessage:"Menu"})}),panelPaddingSize:"none",closePopover:g},Object(C.jsx)(a.EuiContextMenu,{initialPanelId:0,panels:[{id:0,title:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.title",{defaultMessage:"Actions"}),items:[{name:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.settings",{defaultMessage:"AI Assistant Settings"}),onClick:()=>{g(),u(function(e){return e.basePath.prepend("/app/management/kibana/aiAssistantManagementObservability")}(l))}},{name:Object(C.jsx)("div",{className:"eui-textTruncate"},c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.connector",{defaultMessage:"Connector"})," ",Object(C.jsx)("strong",null,null===(o=e.connectors)||void 0===o||null===(s=o.find((({id:t})=>t===e.selectedConnector)))||void 0===s?void 0:s.name)),panel:1},{name:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.knowledgeBase",{defaultMessage:"Manage knowledge base"}),onClick:()=>{g(),u(function(e){return e.basePath.prepend("/app/management/kibana/aiAssistantManagementObservability?tab=knowledge_base")}(l))}},{name:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.copyConversation",{defaultMessage:"Copy conversation"}),disabled:!t,onClick:()=>{g(),i()}}]},{id:1,width:256,title:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.connector",{defaultMessage:"Connector"}),content:Object(C.jsx)(a.EuiPanel,null,Object(C.jsx)(E.a,e))}]}))}const A=Object(o.css)({name:"ovk77c",styles:"min-width:0"}),T=Object(o.css)({name:"15d1wjc",styles:"padding-top:12px;padding-bottom:12px"});function I({title:e,loading:t,licenseInvalid:n,connectors:i,connectorsManagementHref:s,conversationId:u,knowledgeBase:l,startedFrom:f,onSaveTitle:p,onCopyConversation:g}){const b=!!e,m=i.selectedConnector?n?d.c:e||d.b:d.a,h=Object(a.useEuiTheme)(),v=function(e){const t=Object(r.useRef)(e),[n,i]=Object(r.useState)(!0);return Object(r.useEffect)((()=>{t.current!==e&&i(!1)}),[t,e]),Object(r.useEffect)((()=>{n||i(!0)}),[n]),Object(r.useEffect)((()=>{t.current=e}),[e]),n}(m),y=Object(r.useRef)(null);return Object(C.jsx)(a.EuiPanel,{borderRadius:"none",hasBorder:!1,hasShadow:!1,paddingSize:"m",className:T},Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"m",responsive:!1,alignItems:"center"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},t?Object(C.jsx)(a.EuiLoadingSpinner,{size:"l"}):Object(C.jsx)(w.a,{size:"s"})),Object(C.jsx)(a.EuiFlexItem,{grow:!0,className:A},v?Object(C.jsx)(a.EuiInlineEditTitle,{heading:"h2",size:"s",defaultValue:m,className:Object(o.css)("color:",b?h.euiTheme.colors.text:h.euiTheme.colors.subduedText,";",""),inputAriaLabel:c.i18n.translate("xpack.observabilityAiAssistant.chatHeader.editConversationInput",{defaultMessage:"Edit conversation"}),editModeProps:{inputProps:{inputRef:y}},isReadOnly:!u||!i.selectedConnector||n||!Boolean(p),onSave:p}):null),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(S,{connectors:i,disabled:n,conversationId:u,onCopyConversationClick:g}))))}var M=n(7),_={name:"1y0ex1",styles:"max-width:400px"};function F({mode:e,selectedFunctionName:t,onSelectFunction:n,disabled:i}){const{getFunctions:o}=Object(O.a)(),s=o(),[u,l]=Object(r.useState)(R({functions:s,selectedFunctionName:t})),[d,f]=Object(r.useState)(!1),p=()=>{if(t)return n(void 0),void f(!1);f(!d)};return Object(r.useEffect)((()=>{const e=R({functions:s,selectedFunctionName:t});e.length!==u.length&&l(e)}),[u.length,s,t]),Object(C.jsx)(a.EuiPopover,{anchorPosition:"downLeft",button:Object(C.jsx)(a.EuiToolTip,{key:e,content:"prompt"===e?c.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiToolTip.selectAFunctionLabel",{defaultMessage:"Select a function"}):c.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiToolTip.clearFunction",{defaultMessage:"Clear function"}),display:"block"},Object(C.jsx)(a.EuiButtonIcon,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiButtonIcon.selectAFunctionLabel",{defaultMessage:"Select function"}),"data-test-subj":"observabilityAiAssistantFunctionListPopoverButton",disabled:i,iconType:t?"cross":"plusInCircle",size:"xs",onClick:p})),closePopover:p,css:_,initialFocus:"#searchFilterList",panelPaddingSize:"none",isOpen:d},Object(C.jsx)(a.EuiSelectable,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.prompt.functionList.functionList",{defaultMessage:"Function list"}),listProps:{isVirtualized:!1,showIcons:!1},options:u,renderOption:P,searchable:!0,searchProps:{"data-test-subj":"searchFiltersList",id:"searchFilterList",placeholder:c.i18n.translate("xpack.observabilityAiAssistant.prompt.functionList.filter",{defaultMessage:"Filter"})},singleSelection:!0,onChange:e=>{const t=e.filter((e=>!("checked"in e)));var r;t&&1===t.length&&(r={...t[0],checked:"on"},f(!1),n(r.label))}},((e,t)=>Object(C.jsx)("div",{style:{overflow:"hidden"}},t,Object(C.jsx)("div",{style:{width:500,height:350,overflowY:"scroll"}},e)))))}function R({functions:e,selectedFunctionName:t}){return e.filter((e=>e.visibility!==k.a.System)).map((e=>({label:e.name,searchableLabel:e.descriptionForUser||e.description,checked:e.name===t?"on":"off"})))}function P(e,t){return Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"xs",direction:"column"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"xs"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiText,{size:"s"},Object(C.jsx)("strong",null,Object(C.jsx)(a.EuiHighlight,{search:t},e.label)," ",Object(C.jsx)(a.EuiBetaBadge,{label:"beta",size:"s",style:{verticalAlign:"middle"}})))),Object(C.jsx)(a.EuiFlexItem,{grow:!1}))),Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(a.EuiText,{size:"xs",style:{textOverflow:"ellipsis",overflow:"hidden",marginBottom:4}},Object(C.jsx)(a.EuiHighlight,{search:t},e.searchableLabel||""))))}var L=n(16),N=n(57),z=n.n(N),B=n(102),U=n(31),D=n(68);function W(e){return/^\d+$/.test(e)?e+"px":e}function G(){}var H,q=(H=function(e,t){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},H(e,t)},function(e,t){function n(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),$=function(){return $=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},$.apply(this,arguments)},V=(function(e){function t(t){var n=e.call(this,t)||this;return n.assignRef=function(e){n.containerElement=e},n.containerElement=void 0,n}q(t,e),t.prototype.componentDidMount=function(){this.initMonaco()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.language,r=t.theme,i=t.height,o=t.options,a=t.width,s=this.editor.getModel(),c=s.original,u=s.modified;this.props.original!==c.getValue()&&c.setValue(this.props.original),null!=this.props.value&&this.props.value!==u.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.modifiedEditor.pushUndoStop(),u.pushEditOperations([],[{range:u.getFullModelRange(),text:this.props.value}]),this.editor.modifiedEditor.pushUndoStop(),this.__prevent_trigger_change_event=!1),e.language!==n&&(U.editor.setModelLanguage(c,n),U.editor.setModelLanguage(u,n)),e.theme!==r&&U.editor.setTheme(r),!this.editor||a===e.width&&i===e.height||this.editor.layout(),e.options!==o&&this.editor.updateOptions(o)},t.prototype.componentWillUnmount=function(){this.destroyMonaco()},t.prototype.editorWillMount=function(){return(0,this.props.editorWillMount)(U)||{}},t.prototype.editorDidMount=function(e){var t=this;this.props.editorDidMount(e,U);var n=e.getModel().modified;this._subscription=n.onDidChangeContent((function(e){t.__prevent_trigger_change_event||t.props.onChange(n.getValue(),e)}))},t.prototype.initModels=function(e,t){var n=this.props.language,r=U.editor.createModel(t,n),i=U.editor.createModel(e,n);this.editor.setModel({original:r,modified:i})},t.prototype.initMonaco=function(){var e=null!=this.props.value?this.props.value:this.props.defaultValue,t=this.props,n=t.original,r=t.theme,i=t.options,o=t.overrideServices;this.containerElement&&(this.editorWillMount(),this.editor=U.editor.createDiffEditor(this.containerElement,$($({},i),r?{theme:r}:{}),o),this.initModels(e,n),this.editorDidMount(this.editor))},t.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var e=this.editor.getModel(),t=e.original,n=e.modified;t&&t.dispose(),n&&n.dispose()}this._subscription&&this._subscription.dispose()},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,i={width:W(t),height:W(n)};return r.createElement("div",{ref:this.assignRef,style:i,className:"react-monaco-editor-container"})},t.propTypes={width:D.oneOfType([D.string,D.number]),height:D.oneOfType([D.string,D.number]),original:D.string,value:D.string,defaultValue:D.string,language:D.string,theme:D.string,options:D.object,overrideServices:D.object,editorDidMount:D.func,editorWillMount:D.func,onChange:D.func},t.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:G,editorWillMount:G,onChange:G}}(r.Component),function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),K=function(){return K=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},K.apply(this,arguments)},J=function(e){function t(t){var n=e.call(this,t)||this;return n.assignRef=function(e){n.containerElement=e},n.containerElement=void 0,n}return V(t,e),t.prototype.componentDidMount=function(){this.initMonaco()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.value,r=t.language,i=t.theme,o=t.height,a=t.options,s=t.width,c=this.editor,u=c.getModel();if(null!=this.props.value&&this.props.value!==u.getValue()&&(this.__prevent_trigger_change_event=!0,this.editor.pushUndoStop(),u.pushEditOperations([],[{range:u.getFullModelRange(),text:n}]),this.editor.pushUndoStop(),this.__prevent_trigger_change_event=!1),e.language!==r&&U.editor.setModelLanguage(u,r),e.theme!==i&&U.editor.setTheme(i),!c||s===e.width&&o===e.height||c.layout(),e.options!==a){a.model;var l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(a,["model"]);c.updateOptions(l)}},t.prototype.componentWillUnmount=function(){this.destroyMonaco()},t.prototype.destroyMonaco=function(){if(this.editor){this.editor.dispose();var e=this.editor.getModel();e&&e.dispose()}this._subscription&&this._subscription.dispose()},t.prototype.initMonaco=function(){var e=null!=this.props.value?this.props.value:this.props.defaultValue,t=this.props,n=t.language,r=t.theme,i=t.overrideServices;if(this.containerElement){var o=K(K({},this.props.options),this.editorWillMount());this.editor=U.editor.create(this.containerElement,K(K({value:e,language:n},o),r?{theme:r}:{}),i),this.editorDidMount(this.editor)}},t.prototype.editorWillMount=function(){return(0,this.props.editorWillMount)(U)||{}},t.prototype.editorDidMount=function(e){var t=this;this.props.editorDidMount(e,U),this._subscription=e.onDidChangeModelContent((function(n){t.__prevent_trigger_change_event||t.props.onChange(e.getValue(),n)}))},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,i={width:W(t),height:W(n)};return r.createElement("div",{ref:this.assignRef,style:i,className:"react-monaco-editor-container"})},t.propTypes={width:D.oneOfType([D.string,D.number]),height:D.oneOfType([D.string,D.number]),value:D.string,defaultValue:D.string,language:D.string,theme:D.string,options:D.object,overrideServices:D.object,editorDidMount:D.func,editorWillMount:D.func,onChange:D.func},t.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorDidMount:G,editorWillMount:G,onChange:G},t}(r.Component),Z=n(29),X=n(32);const Q={ID:"css",lexerRules:{defaultToken:"",tokenPostfix:".css",ws:"[ \t\n\r\f]*",identifier:"-?-?([a-zA-Z]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))([\\w\\-]|(\\\\(([0-9a-fA-F]{1,6}\\s?)|[^[0-9a-fA-F])))*",brackets:[{open:"{",close:"}",token:"delimiter.bracket"},{open:"[",close:"]",token:"delimiter.bracket"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}],tokenizer:{root:[{include:"@selector"}],selector:[{include:"@comments"},{include:"@import"},{include:"@strings"},["[@](keyframes|-webkit-keyframes|-moz-keyframes|-o-keyframes)",{token:"keyword",next:"@keyframedeclaration"}],["[@](page|content|font-face|-moz-document)",{token:"keyword"}],["[@](charset|namespace)",{token:"keyword",next:"@declarationbody"}],["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@selectorname"},["[\\*]","tag"],["[>\\+,]","delimiter"],["\\[",{token:"delimiter.bracket",next:"@selectorattribute"}],["{",{token:"delimiter.bracket",next:"@selectorbody"}]],selectorbody:[{include:"@comments"},["[*_]?@identifier@ws:(?=(\\s|\\d|[^{;}]*[;}]))","attribute.name","@rulevalue"],["}",{token:"delimiter.bracket",next:"@pop"}]],selectorname:[["(\\.|#(?=[^{])|%|(@identifier)|:)+","tag"]],selectorattribute:[{include:"@term"},["]",{token:"delimiter.bracket",next:"@pop"}]],term:[{include:"@comments"},["(url-prefix)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],["(url)(\\()",["attribute.value",{token:"delimiter.parenthesis",next:"@urldeclaration"}]],{include:"@functioninvocation"},{include:"@numbers"},{include:"@name"},{include:"@strings"},["([<>=\\+\\-\\*\\/\\^\\|\\~,])","delimiter"],[",","delimiter"]],rulevalue:[{include:"@comments"},{include:"@strings"},{include:"@term"},["!important","keyword"],[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],warndebug:[["[@](warn|debug)",{token:"keyword",next:"@declarationbody"}]],import:[["[@](import)",{token:"keyword",next:"@declarationbody"}]],urldeclaration:[{include:"@strings"},["[^)\r\n]+","string"],["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],parenthizedterm:[{include:"@term"},["\\)",{token:"delimiter.parenthesis",next:"@pop"}]],declarationbody:[{include:"@term"},[";","delimiter","@pop"],["(?=})",{token:"",next:"@pop"}]],comments:[["\\/\\*","comment","@comment"],["\\/\\/+.*","comment"]],comment:[["\\*\\/","comment","@pop"],[/[^*/]+/,"comment"],[/./,"comment"]],name:[["@identifier","attribute.value"]],numbers:[["-?(\\d*\\.)?\\d+([eE][\\-+]?\\d+)?",{token:"attribute.value.number",next:"@units"}],["#[0-9a-fA-F_]+(?!\\w)","attribute.value.hex"]],units:[["(em|ex|ch|rem|vmin|vmax|vw|vh|vm|cm|mm|in|px|pt|pc|deg|grad|rad|turn|s|ms|Hz|kHz|%)?","attribute.value.unit","@pop"]],keyframedeclaration:[["@identifier","attribute.value"],["{",{token:"delimiter.bracket",switchTo:"@keyframebody"}]],keyframebody:[{include:"@term"},["{",{token:"delimiter.bracket",next:"@selectorbody"}],["}",{token:"delimiter.bracket",next:"@pop"}]],functioninvocation:[["@identifier\\(",{token:"attribute.value",next:"@functionarguments"}]],functionarguments:[["\\$@identifier@ws:","attribute.name"],["[,]","delimiter"],{include:"@term"},["\\)",{token:"attribute.value",next:"@pop"}]],strings:[['~?"',{token:"string",next:"@stringenddoublequote"}],["~?'",{token:"string",next:"@stringendquote"}]],stringenddoublequote:[["\\\\.","string"],['"',{token:"string",next:"@pop"}],[/[^\\"]+/,"string"],[".","string"]],stringendquote:[["\\\\.","string"],["'",{token:"string",next:"@pop"}],[/[^\\']+/,"string"],[".","string"]]}},languageConfiguration:{wordPattern:/(#?-?\d*\.\d\w*%?)|((::|[@#.!:])?[\w-?]+%?)|::|[@#.!:]/g,comments:{blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string","comment"]},{open:"[",close:"]",notIn:["string","comment"]},{open:"(",close:")",notIn:["string","comment"]},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*\\/\\*\\s*#region\\b\\s*(.*?)\\s*\\*\\/"),end:new RegExp("^\\s*\\/\\*\\s*#endregion\\b.*\\*\\/")}}}},Y={ID:"markdown",languageConfiguration:{comments:{blockComment:["\x3c!--","--\x3e"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">",notIn:["string"]}],surroundingPairs:[{open:"(",close:")"},{open:"[",close:"]"},{open:"`",close:"`"}],folding:{markers:{start:new RegExp("^\\s*\x3c!--\\s*#?region\\b.*--\x3e"),end:new RegExp("^\\s*\x3c!--\\s*#?endregion\\b.*--\x3e")}}},lexerRules:{defaultToken:"",tokenPostfix:".md",control:/[\\`*_\[\]{}()#+\-\.!]/,noncontrol:/[^\\`*_\[\]{}()#+\-\.!]/,escapes:/\\(?:@control)/,jsescapes:/\\(?:[btnfr\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,empty:["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param"],tokenizer:{root:[[/^\s*\|/,"@rematch","@table_header"],[/^(\s{0,3})(#+)((?:[^\\#]|@escapes)+)((?:#+)?)/,["white","keyword","keyword","keyword"]],[/^\s*(=+|\-+)\s*$/,"keyword"],[/^\s*((\*[ ]?)+)\s*$/,"meta.separator"],[/^\s*>+/,"comment"],[/^\s*([\*\-+:]|\d+\.)\s/,"keyword"],[/^(\t|[ ]{4})[^ ].*$/,"string"],[/^\s*~~~\s*((?:\w|[\/\-#])+)?\s*$/,{token:"string",next:"@codeblock"}],[/^\s*```\s*((?:\w|[\/\-#])+).*$/,{token:"string",next:"@codeblockgh",nextEmbedded:"$1"}],[/^\s*```\s*$/,{token:"string",next:"@codeblock"}],{include:"@linecontent"}],table_header:[{include:"@table_common"},[/[^\|]+/,"keyword.table.header"]],table_body:[{include:"@table_common"},{include:"@linecontent"}],table_common:[[/\s*[\-:]+\s*/,{token:"keyword",switchTo:"table_body"}],[/^\s*\|/,"keyword.table.left"],[/^\s*[^\|]/,"@rematch","@pop"],[/^\s*$/,"@rematch","@pop"],[/\|/,{cases:{"@eos":"keyword.table.right","@default":"keyword.table.middle"}}]],codeblock:[[/^\s*~~~\s*$/,{token:"string",next:"@pop"}],[/^\s*```\s*$/,{token:"string",next:"@pop"}],[/.*$/,"variable.source"]],codeblockgh:[[/```\s*$/,{token:"variable.source",next:"@pop",nextEmbedded:"@pop"}],[/[^`]+/,"variable.source"]],linecontent:[[/&\w+;/,"string.escape"],[/@escapes/,"escape"],[/\b__([^\\_]|@escapes|_(?!_))+__\b/,"strong"],[/\*\*([^\\*]|@escapes|\*(?!\*))+\*\*/,"strong"],[/\b_[^_]+_\b/,"emphasis"],[/\*([^\\*]|@escapes)+\*/,"emphasis"],[/`([^\\`]|@escapes)+`/,"variable"],[/\{+[^}]+\}+/,"string.target"],[/(!?\[)((?:[^\]\\]|@escapes)*)(\]\([^\)]+\))/,["string.link","","string.link"]],[/(!?\[)((?:[^\]\\]|@escapes)*)(\])/,"string.link"],{include:"html"}],html:[[/<(\w+)\/>/,"tag"],[/<(\w+)/,{cases:{"@empty":{token:"tag",next:"@tag.$1"},"@default":{token:"tag",next:"@tag.$1"}}}],[/<\/(\w+)\s*>/,{token:"tag"}],[/<!--/,"comment","@comment"]],comment:[[/[^<\-]+/,"comment.content"],[/-->/,"comment","@pop"],[/<!--/,"comment.content.invalid"],[/[<\-]/,"comment.content"]],tag:[[/[ \t\r\n]+/,"white"],[/(type)(\s*=\s*)(")([^"]+)(")/,["attribute.name.html","delimiter.html","string.html",{token:"string.html",switchTo:"@tag.$S2.$4"},"string.html"]],[/(type)(\s*=\s*)(')([^']+)(')/,["attribute.name.html","delimiter.html","string.html",{token:"string.html",switchTo:"@tag.$S2.$4"},"string.html"]],[/(\w+)(\s*=\s*)("[^"]*"|'[^']*')/,["attribute.name.html","delimiter.html","string.html"]],[/\w+/,"attribute.name.html"],[/\/>/,"tag","@pop"],[/>/,{cases:{"$S2==style":{token:"tag",switchTo:"embeddedStyle",nextEmbedded:"text/css"},"$S2==script":{cases:{$S3:{token:"tag",switchTo:"embeddedScript",nextEmbedded:"$S3"},"@default":{token:"tag",switchTo:"embeddedScript",nextEmbedded:"text/javascript"}}},"@default":{token:"tag",next:"@pop"}}}]],embeddedStyle:[[/[^<]+/,""],[/<\/style\s*>/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/</,""]],embeddedScript:[[/[^<]+/,""],[/<\/script\s*>/,{token:"@rematch",next:"@pop",nextEmbedded:"@pop"}],[/</,""]]}}};Object(Z.registerLanguage)(Q),Object(Z.registerLanguage)({ID:"handlebars",languageConfiguration:{wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\$\^\&\*\(\)\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\s]+)/g,comments:{blockComment:["{{!--","--}}"]},brackets:[["<",">"],["{{","}}"],["{","}"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"}]},lexerRules:{defaultToken:"invalid",tokenPostfix:"",brackets:[{token:"constant.delimiter.double",open:"{{",close:"}}"},{token:"constant.delimiter.triple",open:"{{{",close:"}}}"}],tokenizer:{root:[{include:"@maybeHandlebars"},{include:"@whitespace"},{include:"@urlScheme"},{include:"@urlAuthority"},{include:"@urlSlash"},{include:"@urlParamKey"},{include:"@urlParamValue"},{include:"@text"}],maybeHandlebars:[[/\{\{/,{token:"@rematch",switchTo:"@handlebars.root"}]],whitespace:[[/[ \t\r\n]+/,""]],text:[[/[^<{\?\&\/]+/,{token:"text",next:"@popall"}]],rematchAsRoot:[[/.+/,{token:"@rematch",switchTo:"@root"}]],urlScheme:[[/([a-zA-Z0-9\+\.\-]{1,10})(:)/,[{token:"text.keyword.scheme.url"},{token:"delimiter"}]]],urlAuthority:[[/(\/\/)([a-zA-Z0-9\.\-_]+)/,[{token:"delimiter"},{token:"metatag.keyword.authority.url"}]]],urlSlash:[[/\/+/,{token:"delimiter"}]],urlParamKey:[[/([\?\&\#])([a-zA-Z0-9_\-]+)/,[{token:"delimiter.key.query.url"},{token:"label.label.key.query.url"}]]],urlParamValue:[[/(\=)([^\?\&\{}]+)/,[{token:"text.separator.value.query.url"},{token:"text.value.query.url"}]]],handlebars:[[/\{\{\{?/,{token:"@brackets",bracket:"@open"}],[/\}\}\}?/,{token:"@brackets",bracket:"@close",switchTo:"@$S2.$S3"}],{include:"handlebarsExpression"}],handlebarsExpression:[[/"[^"]*"/,"string.handlebars"],[/[#/][^\s}]+/,"keyword.helper.handlebars"],[/else\b/,"keyword.helper.handlebars"],[/[\s]+/],[/[^}]/,"variable.parameter.handlebars"]]}}}),Object(Z.registerLanguage)(Y),Object(Z.registerLanguage)({ID:"yaml",languageConfiguration:{comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{offSide:!0}},lexerRules:{tokenPostfix:".yaml",brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.square",open:"[",close:"]"}],keywords:["true","True","TRUE","false","False","FALSE","null","Null","Null","~"],numberInteger:/(?:0|[+-]?[0-9]+)/,numberFloat:/(?:0|[+-]?[0-9]+)(?:\.[0-9]+)?(?:e[-+][1-9][0-9]*)?/,numberOctal:/0o[0-7]+/,numberHex:/0x[0-9a-fA-F]+/,numberInfinity:/[+-]?\.(?:inf|Inf|INF)/,numberNaN:/\.(?:nan|Nan|NAN)/,numberDate:/\d{4}-\d\d-\d\d([Tt ]\d\d:\d\d:\d\d(\.\d+)?(( ?[+-]\d\d?(:\d\d)?)|Z)?)?/,escapes:/\\(?:[btnfr\\"']|[0-7][0-7]?|[0-3][0-7]{2})/,tokenizer:{root:[{include:"@whitespace"},{include:"@comment"},[/%[^ ]+.*$/,"meta.directive"],[/---/,"operators.directivesEnd"],[/\.{3}/,"operators.documentEnd"],[/[-?:](?= )/,"operators"],{include:"@anchor"},{include:"@tagHandle"},{include:"@flowCollections"},{include:"@blockStyle"},[/@numberInteger(?![ \t]*\S+)/,"number"],[/@numberFloat(?![ \t]*\S+)/,"number.float"],[/@numberOctal(?![ \t]*\S+)/,"number.octal"],[/@numberHex(?![ \t]*\S+)/,"number.hex"],[/@numberInfinity(?![ \t]*\S+)/,"number.infinity"],[/@numberNaN(?![ \t]*\S+)/,"number.nan"],[/@numberDate(?![ \t]*\S+)/,"number.date"],[/(".*?"|'.*?'|.*?)([ \t]*)(:)( |$)/,["type","white","operators","white"]],{include:"@flowScalars"},[/[^#]+/,{cases:{"@keywords":"keyword","@default":"string"}}]],object:[{include:"@whitespace"},{include:"@comment"},[/\}/,"@brackets","@pop"],[/,/,"delimiter.comma"],[/:(?= )/,"operators"],[/(?:".*?"|'.*?'|[^,\{\[]+?)(?=: )/,"type"],{include:"@flowCollections"},{include:"@flowScalars"},{include:"@tagHandle"},{include:"@anchor"},{include:"@flowNumber"},[/[^\},]+/,{cases:{"@keywords":"keyword","@default":"string"}}]],array:[{include:"@whitespace"},{include:"@comment"},[/\]/,"@brackets","@pop"],[/,/,"delimiter.comma"],{include:"@flowCollections"},{include:"@flowScalars"},{include:"@tagHandle"},{include:"@anchor"},{include:"@flowNumber"},[/[^\],]+/,{cases:{"@keywords":"keyword","@default":"string"}}]],multiString:[[/^( +).+$/,"string","@multiStringContinued.$1"]],multiStringContinued:[[/^( *).+$/,{cases:{"$1==$S2":"string","@default":{token:"@rematch",next:"@popall"}}}]],whitespace:[[/[ \t\r\n]+/,"white"]],comment:[[/#.*$/,"comment"]],flowCollections:[[/\[/,"@brackets","@array"],[/\{/,"@brackets","@object"]],flowScalars:[[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'[^']*'/,"string"],[/"/,"string","@doubleQuotedString"]],doubleQuotedString:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],blockStyle:[[/[>|][0-9]*[+-]?$/,"operators","@multiString"]],flowNumber:[[/@numberInteger(?=[ \t]*[,\]\}])/,"number"],[/@numberFloat(?=[ \t]*[,\]\}])/,"number.float"],[/@numberOctal(?=[ \t]*[,\]\}])/,"number.octal"],[/@numberHex(?=[ \t]*[,\]\}])/,"number.hex"],[/@numberInfinity(?=[ \t]*[,\]\}])/,"number.infinity"],[/@numberNaN(?=[ \t]*[,\]\}])/,"number.nan"],[/@numberDate(?=[ \t]*[,\]\}])/,"number.date"]],tagHandle:[[/\![^ ]*/,"tag"]],anchor:[[/[&*][^ ]+/,"namespace"]]}}}),Object(Z.registerLanguage)({ID:"hjson",languageConfiguration:{brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:'"',close:'"',notIn:["string"]}],comments:{lineComment:"//",blockComment:["/*","*/"]}},lexerRules:{defaultToken:"",tokenPostfix:"",escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/-?(?:0|[1-9]\d*)(?:(?:\.\d+)?(?:[eE][+-]?\d+)?)?/,symbols:/[,:]+/,tokenizer:{root:[[/(@digits)n?/,"number"],[/(@symbols)n?/,"delimiter"],{include:"@keyword"},{include:"@url"},{include:"@whitespace"},{include:"@brackets"},{include:"@keyName"},{include:"@string"}],keyword:[[/(?:true|false|null)\b/,"keyword"]],url:[[/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,"string"]],keyName:[[/(?:[^,\{\[\}\]\s]+|"(?:[^"\\]|\\.)*")\s*(?=:)/,"variable"]],brackets:[[/{/,"@push"],[/}/,"@pop"],[/[[(]/],[/[\])]/]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],string:[[/(?:[^,\{\[\}\]\s]+|"(?:[^"\\]|\\.)*")\s*/,"string"],[/"""/,"string","@stringLiteral"],[/"/,"string","@stringDouble"]],stringDouble:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],stringLiteral:[[/"""/,"string","@pop"],[/\\""""/,"string","@pop"],[/./,"string"]]}}}),Object(Z.registerLanguage)({ID:"grok",languageConfiguration:{brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]},lexerRules:{grokRegexSymbols:/[\[\]()?:|]/,tokenizer:{root:[[/(%\{)([^:}]+)(})/,["string.openGrok","variable.syntax","string.closeGrok"]],[/(%\{)([^:}]+)(:)([^:}]+)(})/,["string.openGrok","variable.syntax","string.separator","variable.id","string.closeGrok"]],[/(%\{)([^:}]+)(:)([^:}]+)(:)([^:}]+)(})/,["string.openGrok","variable.syntax","string.separator","variable.id","string.separator","variable.type","string.closeGrok"]],[/(\\)(@grokRegexSymbols)/,["string.escape.grokEscape","source.grokEscaped"]],[/@grokRegexSymbols/,"regexp.grokRegex"]]}}});var ee=n(6),te=n.n(ee);class placeholder_widget_PlaceholderWidget{constructor(e,t,n){te()(this,"domNode",void 0),this.placeholderText=e,this.euiTheme=t,this.editor=n,n.addContentWidget(this)}getId(){return"KBN_CODE_EDITOR_PLACEHOLDER_WIDGET_ID"}getDomNode(){if(!this.domNode){const e=document.createElement("div");e.innerText=this.placeholderText,e.className=Object(o.css)("color:",this.euiTheme.colors.subduedText,";width:max-content;pointer-events:none;",""),this.editor.applyFontInfo(e),this.domNode=e}return this.domNode}getPosition(){return{position:{column:1,lineNumber:1},preference:[Z.monaco.editor.ContentWidgetPositionPreference.EXACT]}}dispose(){this.editor.removeContentWidget(this)}}const ne={container:{name:"1wv4onu",styles:"position:relative;height:100%"},fullscreenContainer:{name:"1m19vma",styles:"position:absolute;left:0;top:0"},keyboardHint:e=>Object(C.css)("position:absolute;top:0;bottom:0;right:0;left:0;&:focus{z-index:",e.levels.mask,";}",""),controls:{base:e=>Object(C.css)("position:absolute;top:",e.size.xs,";right:",e.size.base,";z-index:",e.levels.menu,";",""),fullscreen:e=>Object(C.css)("top:",e.size.l,";right:",e.size.l,";","")}};function re(e,t,n){return{base:"vs",inherit:!0,rules:[{token:"",foreground:e.euiColorDarkestShade,background:e.euiFormBackgroundColor},{token:"invalid",foreground:e.euiColorAccentText},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:e.euiColorPrimaryText},{token:"variable.predefined",foreground:e.euiColorSuccessText},{token:"constant",foreground:e.euiColorAccentText},{token:"comment",foreground:e.euiTextSubduedColor},{token:"number",foreground:e.euiColorAccentText},{token:"number.hex",foreground:e.euiColorAccentText},{token:"regexp",foreground:e.euiColorDangerText},{token:"annotation",foreground:e.euiTextSubduedColor},{token:"type",foreground:e.euiColorSuccessText},{token:"delimiter",foreground:e.euiTextSubduedColor},{token:"delimiter.html",foreground:e.euiColorDarkShade},{token:"delimiter.xml",foreground:e.euiColorPrimaryText},{token:"tag",foreground:e.euiColorDangerText},{token:"tag.id.jade",foreground:e.euiColorPrimaryText},{token:"tag.class.jade",foreground:e.euiColorPrimaryText},{token:"meta.scss",foreground:e.euiColorAccentText},{token:"metatag",foreground:e.euiColorSuccessText},{token:"metatag.content.html",foreground:e.euiColorDangerText},{token:"metatag.html",foreground:e.euiTextSubduedColor},{token:"metatag.xml",foreground:e.euiTextSubduedColor},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:e.euiColorWarningText},{token:"string.key.json",foreground:e.euiColorDangerText},{token:"string.value.json",foreground:e.euiColorPrimaryText},{token:"attribute.name",foreground:e.euiColorDangerText},{token:"attribute.name.css",foreground:e.euiColorSuccessText},{token:"attribute.value",foreground:e.euiColorPrimaryText},{token:"attribute.value.number",foreground:e.euiColorWarningText},{token:"attribute.value.unit",foreground:e.euiColorWarningText},{token:"attribute.value.html",foreground:e.euiColorPrimaryText},{token:"attribute.value.xml",foreground:e.euiColorPrimaryText},{token:"string",foreground:e.euiColorDangerText},{token:"string.html",foreground:e.euiColorPrimaryText},{token:"string.sql",foreground:e.euiColorDangerText},{token:"string.yaml",foreground:e.euiColorPrimaryText},{token:"keyword",foreground:e.euiColorPrimaryText},{token:"keyword.json",foreground:e.euiColorPrimaryText},{token:"keyword.flow",foreground:e.euiColorWarningText},{token:"keyword.flow.scss",foreground:e.euiColorPrimaryText},{token:"keyword.deprecated",foreground:e.euiColorAccentText},{token:"operator.scss",foreground:e.euiColorDarkShade},{token:"operator.sql",foreground:e.euiTextSubduedColor},{token:"operator.swift",foreground:e.euiTextSubduedColor},{token:"predefined.sql",foreground:e.euiTextSubduedColor},{token:"text",foreground:e.euiTitleColor},{token:"label",foreground:e.euiColorVis9}],colors:{"editor.foreground":e.euiColorDarkestShade,"editor.background":null!=n?n:e.euiFormBackgroundColor,"editorLineNumber.foreground":e.euiColorDarkShade,"editorLineNumber.activeForeground":e.euiColorDarkShade,"editorIndentGuide.background":e.euiColorLightShade,"editor.selectionBackground":t,"editorWidget.border":e.euiColorLightShade,"editorWidget.background":e.euiColorLightestShade,"editorCursor.foreground":e.euiColorDarkestShade,"editorSuggestWidget.selectedBackground":e.euiColorLightShade,"list.hoverBackground":e.euiColorLightShade,"list.highlightForeground":e.euiColorPrimary,"editor.lineHighlightBorder":e.euiColorLightestShade}}}const ie=re(s.euiDarkVars,"#343551"),oe=re(s.euiLightVars,"#E3E4ED"),ae=re(s.euiDarkVars,"#343551","#00000000"),se=re(s.euiLightVars,"#E3E4ED","#00000000");var ce={name:"eivff4",styles:"display:none"};const ue=({languageId:e,value:t,onChange:n,width:o,height:s,options:u,overrideEditorWillMount:l,editorDidMount:d,editorWillMount:f,useDarkTheme:p,transparentBackground:g,suggestionProvider:b,signatureProvider:m,hoverProvider:h,placeholder:v,languageConfiguration:y,"aria-label":j=c.i18n.translate("sharedUXPackages.codeEditor.ariaLabel",{defaultMessage:"Code Editor"}),isCopyable:x=!1,allowFullScreen:O=!1})=>{var k,w;const{colorMode:E,euiTheme:S}=Object(a.useEuiTheme)(),A=null!=p?p:"DARK"===E,T=Object(r.useMemo)((()=>"function"==typeof J&&"JestMockEditor"===J.name?J():J),[]),{FullScreenDisplay:I,FullScreenButton:M,isFullScreen:_,setIsFullScreen:F,onKeyDown:R}=le({allowFullScreen:O}),P=null!==(k=null==u?void 0:u.readOnly)&&void 0!==k&&k,L=Object(r.useRef)(null),N=Object(r.useRef)(null),z=Object(r.useRef)(!1),U=Object(r.useRef)(null),D=Object(r.useRef)(null),[W,G]=Object(r.useState)(!0),H=Object(r.useCallback)((()=>{var e;null===(e=L.current)||void 0===e||e.layout()}),[]);Object(B.useResizeDetector)({handleWidth:!0,handleHeight:!0,onResize:H,refreshMode:"debounce"});const q=Object(r.useCallback)((()=>{var e;G(!1),null===(e=L.current)||void 0===e||e.focus()}),[]),$=Object(r.useCallback)((()=>{G(!0)}),[]),V=Object(r.useCallback)((e=>{e.key===a.keys.ENTER&&(e.preventDefault(),q())}),[q]),K=Object(r.useCallback)((e=>{var t;e.keyCode===Z.monaco.KeyCode.Escape&&(z.current||(e.preventDefault(),e.stopPropagation(),$(),null===(t=U.current)||void 0===t||t.focus()),F(!1))}),[$,F]),Q=Object(r.useCallback)((()=>{$()}),[$]),Y=Object(r.useCallback)((()=>{const e=Object(C.jsx)("strong",null,c.i18n.translate("sharedUXPackages.codeEditor.enterKeyLabel",{defaultMessage:"Enter",description:"The name used for the Enter key on keyword. Will be {key} in sharedUXPackages.codeEditor.startEditing(ReadOnly)."})),t=Object(C.jsx)("strong",null,c.i18n.translate("sharedUXPackages.codeEditor.escapeKeyLabel",{defaultMessage:"Esc",description:"The label of the Escape key as printed on the keyboard. Will be {key} inside sharedUXPackages.codeEditor.stopEditing(ReadOnly)."}));return Object(C.jsx)(a.EuiToolTip,{display:"block",content:Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)("p",null,P?Object(C.jsx)(X.FormattedMessage,{id:"sharedUXPackages.codeEditor.startEditingReadOnly",defaultMessage:"Press {key} to start interacting with the code.",values:{key:e}}):Object(C.jsx)(X.FormattedMessage,{id:"sharedUXPackages.codeEditor.startEditing",defaultMessage:"Press {key} to start editing.",values:{key:e}})),Object(C.jsx)("p",null,P?Object(C.jsx)(X.FormattedMessage,{id:"sharedUXPackages.codeEditor.stopEditingReadOnly",defaultMessage:"Press {key} to stop interacting with the code.",values:{key:t}}):Object(C.jsx)(X.FormattedMessage,{id:"sharedUXPackages.codeEditor.stopEditing",defaultMessage:"Press {key} to stop editing.",values:{key:t}})))},Object(C.jsx)("div",{css:[ne.keyboardHint(S),!W&&ce,"",""],id:Object(a.htmlIdGenerator)("codeEditor")(),ref:U,tabIndex:0,role:"button",onClick:q,onKeyDown:V,"aria-label":j,"data-test-subj":"codeEditorHint codeEditorHint--"+(W?"active":"inactive")}))}),[W,P,S,q,V,j]),ee=Object(r.useCallback)((t=>{if(t!==Z.monaco)throw new Error("react-monaco-editor is using a different version of monaco");l?l():(null==f||f(),Z.monaco.languages.onLanguage(e,(()=>{b&&Z.monaco.languages.registerCompletionItemProvider(e,b),m&&Z.monaco.languages.registerSignatureHelpProvider(e,m),h&&Z.monaco.languages.registerHoverProvider(e,h),y&&Z.monaco.languages.setLanguageConfiguration(e,y)})),Z.monaco.editor.defineTheme("euiColors",A?ie:oe),Z.monaco.editor.defineTheme("euiColorsTransparent",A?ae:se))}),[l,f,e,A,b,m,h,y]),te=Object(r.useCallback)(((e,t)=>{var n,r,i;if(t!==Z.monaco)throw new Error("react-monaco-editor is using a different version of monaco");"fonts"in window.document&&"ready"in window.document.fonts&&window.document.fonts.ready.then((()=>{Z.monaco.editor.remeasureFonts()})).catch((e=>{console.warn("Failed to remeasureFonts in <CodeEditor/>"),console.warn(e)})),L.current=e;const o=null===(n=e.getDomNode())||void 0===n?void 0:n.getElementsByTagName("textarea")[0];o&&(o.tabIndex=-1,D.current=new MutationObserver((function(){o.tabIndex>=0&&(o.tabIndex=-1)})),D.current.observe(o,{attributes:!0})),e.onKeyDown(K),e.onDidBlurEditorText(Q);const a=null===(r=e.getContribution("editor.contrib.suggestController"))||void 0===r||null===(i=r.widget)||void 0===i?void 0:i.value;a&&a.onDidShow&&a.onDidHide&&(a.onDidShow((()=>{z.current=!0})),a.onDidHide((()=>{z.current=!1}))),null==d||d(e)}),[d,Q,K]);Object(r.useEffect)((()=>()=>{var e;null===(e=D.current)||void 0===e||e.disconnect()}),[]),Object(r.useEffect)((()=>(v&&!t&&L.current&&(N.current=new placeholder_widget_PlaceholderWidget(v,S,L.current)),()=>{var e;null===(e=N.current)||void 0===e||e.dispose(),N.current=null})),[v,t,S]);const{CopyButton:re}=de({isCopyable:x,value:t});Object(r.useEffect)((()=>{Z.monaco.editor.defineTheme("euiColors",A?ie:oe),Z.monaco.editor.defineTheme("euiColorsTransparent",A?ae:se)}),[A]);const ue=null!==(w=null==u?void 0:u.theme)&&void 0!==w?w:g?"euiColorsTransparent":"euiColors";return Object(C.jsx)("div",{css:ne.container,onKeyDown:R,"data-test-subj":"kibanaCodeEditor",className:"kibanaCodeEditor"},Y(),Object(C.jsx)(I,null,O||x?Object(C.jsx)("div",{css:_?[ne.controls.base(S),ne.controls.fullscreen(S)]:ne.controls.base(S)},Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"xs"},Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(re,null)),Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(M,null)))):null,Object(C.jsx)(T,{theme:ue,language:e,value:t,onChange:n,width:_?"100vw":o,height:_?"100vh":s,editorWillMount:ee,editorDidMount:te,options:{padding:O||x?{top:24}:{},renderLineHighlight:"none",scrollBeyondLastLine:!1,minimap:{enabled:!1},scrollbar:{useShadows:!1,alwaysConsumeMouseWheel:!1},wordBasedSuggestions:!1,wordWrap:"on",wrappingIndent:"indent",matchBrackets:"never",fontFamily:"Roboto Mono",fontSize:_?16:12,lineHeight:_?24:21,...u}})))},le=({allowFullScreen:e})=>{const[t,n]=Object(r.useState)(!1),o=()=>{n(!t)},s=Object(r.useCallback)((e=>{e.key===a.keys.ESCAPE&&(e.preventDefault(),e.stopPropagation(),n(!1))}),[]);return{FullScreenButton:()=>e?Object(C.jsx)(a.EuiI18n,{tokens:["euiCodeBlock.fullscreenCollapse","euiCodeBlock.fullscreenExpand"],defaults:["Collapse","Expand"]},(([e,n])=>Object(C.jsx)(a.EuiButtonIcon,{onClick:o,iconType:t?"fullScreenExit":"fullScreen",color:"text","aria-label":t?e:n,size:"xs"}))):null,FullScreenDisplay:Object(r.useMemo)((()=>({children:e})=>t?Object(C.jsx)(a.EuiOverlayMask,null,Object(C.jsx)(a.EuiFocusTrap,{clickOutsideDisables:!0},Object(C.jsx)("div",{css:ne.fullscreenContainer},e))):Object(C.jsx)(i.a.Fragment,null,e)),[t]),onKeyDown:s,isFullScreen:t,setIsFullScreen:n}},de=({isCopyable:e,value:t})=>{const n=e&&t;return{showCopyButton:n,CopyButton:()=>n?Object(C.jsx)("div",{className:"euiCodeBlock__copyButton"},Object(C.jsx)(a.EuiI18n,{token:"euiCodeBlock.copyButton",default:"Copy"},(e=>Object(C.jsx)(a.EuiCopy,{textToCopy:t},(t=>Object(C.jsx)(a.EuiButtonIcon,{onClick:t,iconType:"copyClipboard",color:"text","aria-label":e,size:"xs"})))))):null}};function fe(e){const t={};return function({properties:e,required:n}){for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];"object"===i.type?t[r]=fe(i):null!=n&&n.includes(r)&&("array"===i.type&&(t[r]=[]),"number"===i.type&&(t[r]=1),"string"===i.type&&(t[r]=""))}}(e),t}function pe(e){try{return JSON.parse(e)}catch(t){return e}}const{editor:ge,languages:be,Uri:me}=Z.monaco,he=({functionName:e,initialJson:t})=>{const n=Object(O.a)().getFunctions().find((t=>t.name===e)),[i,o]=Object(r.useState)(t),a=`http://elastic.co/${e}.json`,s=Object(r.useMemo)((()=>me.parse(a)),[a]);return Object(r.useEffect)((()=>{o(t)}),[e]),Object(r.useMemo)((()=>{if(!n||!s)return{};const e={...n.parameters},t=i?JSON.stringify(pe(i),null,4):n.parameters.properties?JSON.stringify(fe(n.parameters),null,4):"";be.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:a,fileMatch:[String(s)],schema:e}]});let r=ge.getModel(s);return null===r?r=ge.createModel(t,"json",s):r.setValue(t),{model:r,initialJsonString:t}}),[a,n,i,s])},ve=Object(o.css)({name:"1r5gb7q",styles:"display:inline-block"});function ye({functionName:e,functionPayload:t,onChange:n,onFocus:i,onBlur:o}){var s;const u=Object(r.useRef)(null),[l,d]=Object(r.useState)(0),f=z()(t),{model:p,initialJsonString:g}=he({functionName:e,initialJson:t}),b=Object(r.useCallback)((()=>{const e=(null==p?void 0:p.getLineCount())||0;e!==l&&d(e+1)}),[l,p]);return Object(r.useEffect)((()=>{b()}),[p,b]),Object(r.useEffect)((()=>{void 0===f&&g&&n({role:M.b.Assistant,content:"",function_call:{name:e,trigger:M.b.User,arguments:g}})}),[e,t,g,n,f]),null===(s=u.current)||void 0===s||s.onDidBlurEditorWidget((()=>{o()})),Object(C.jsx)(a.EuiPanel,{paddingSize:"none",hasShadow:!1,hasBorder:!0},Object(C.jsx)(a.EuiCode,{className:ve},e),Object(C.jsx)(ue,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatPromptEditor.codeEditor.payloadEditorLabel",{defaultMessage:"payloadEditor"}),"data-test-subj":"observabilityAiAssistantChatPromptEditorCodeEditor",editorDidMount:e=>{u.current=e,e.focus(),i()},fullWidth:!0,height:"180px",isCopyable:!0,languageId:"json",languageConfiguration:{autoClosingPairs:[{open:"{",close:"}"}]},options:{accessibilitySupport:"off",acceptSuggestionOnEnter:"on",automaticLayout:!0,autoClosingQuotes:"always",autoIndent:"full",contextmenu:!0,fontSize:12,formatOnPaste:!0,formatOnType:!0,inlineHints:{enabled:!0},lineNumbers:"on",minimap:{enabled:!1},model:p,overviewRulerBorder:!1,quickSuggestions:!0,scrollbar:{alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,suggestOnTriggerCharacters:!0,tabSize:2,wordWrap:"on",wrappingIndent:"indent"},transparentBackground:!0,value:t||"",onChange:t=>{b(),n({role:M.b.Assistant,content:"",function_call:{name:e,trigger:M.b.User,arguments:t}})}}))}var je={name:"1ehwvcm",styles:"max-height:200px"};function xe({disabled:e,prompt:t,onChange:n,onChangeHeight:i,onFocus:o,onBlur:s}){const u=Object(r.useRef)(null),l=Object(r.useCallback)((()=>{var e,t;u.current&&(u.current.style.minHeight="auto",u.current.style.minHeight=(null===(t=u.current)||void 0===t?void 0:t.scrollHeight)+"px"),null!==(e=u.current)&&void 0!==e&&e.scrollHeight&&i(u.current.scrollHeight)}),[i]);return Object(r.useEffect)((()=>{const e=u.current;e&&e.focus()}),[l]),Object(r.useEffect)((()=>{l()}),[l]),Object(C.jsx)(a.EuiTextArea,{"data-test-subj":"observabilityAiAssistantChatPromptEditorTextArea",css:je,disabled:e,fullWidth:!0,inputRef:u,placeholder:c.i18n.translate("xpack.observabilityAiAssistant.prompt.placeholder",{defaultMessage:"Send a message to the Assistant"}),resize:"vertical",rows:1,value:t||"",onChange:e=>{l(),n({role:M.b.User,content:e.currentTarget.value})},onFocus:o,onBlur:s})}function Oe({disabled:e,hidden:t,loading:n,initialRole:i,initialFunctionCall:o,initialContent:s,onChangeHeight:u,onSendTelemetry:l,onSubmit:d}){var f,p,g,b,m;const h=Object(r.useRef)(null),[v,y]=Object(r.useState)(null!=o&&o.name?"function":"prompt"),[j,x]=Object(r.useState)(!1),O=i?{role:i,content:null!=s?s:"",...o?{function_call:o}:{}}:void 0,[k,w]=Object(r.useState)(O),E=Object(r.useMemo)((()=>{var e,t;let n=!1;if(null!=k&&null!==(e=k.function_call)&&void 0!==e&&e.name&&null!=k&&null!==(t=k.function_call)&&void 0!==t&&t.arguments){try{JSON.parse(k.function_call.arguments)}catch(e){n=!0}return n}}),[null==k||null===(f=k.function_call)||void 0===f?void 0:f.arguments,null==k||null===(p=k.function_call)||void 0===p?void 0:p.name]),S=e=>{w(e)},A=Object(r.useCallback)((async()=>{if(n||!k)return;const e=k;try{const e={"@timestamp":(new Date).toISOString(),message:k};d(e),w(void 0),y("prompt"),l({type:L.a.observability_ai_assistant_user_sent_prompt_in_chat,payload:e})}catch(n){var t;w(e),y(null!==(t=e.function_call)&&void 0!==t&&t.name?"function":"prompt")}}),[k,n,l,d]);return Object(r.useEffect)((()=>{const t=t=>{k&&!e&&!E&&j&&(t.shiftKey||t.key!==a.keys.ENTER||(t.preventDefault(),A()))};return window.addEventListener("keypress",t),()=>{window.removeEventListener("keypress",t)}}),[e,A,j,k,E]),Object(r.useEffect)((()=>{t&&u(0)}),[t,u]),Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center",ref:h},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(F,{mode:v,selectedFunctionName:null==k||null===(g=k.function_call)||void 0===g?void 0:g.name,onSelectFunction:e=>{if(e)return y("function"),w({function_call:{name:e,trigger:M.b.Assistant},role:M.b.User}),void u(200);y("prompt"),w(void 0),h.current&&u(h.current.clientHeight)},disabled:n||e})),Object(C.jsx)(a.EuiFlexItem,null,"function"===v&&null!=k&&null!==(b=k.function_call)&&void 0!==b&&b.name?Object(C.jsx)(ye,{functionName:k.function_call.name,functionPayload:k.function_call.arguments,onChange:S,onFocus:()=>x(!0),onBlur:()=>x(!1)}):Object(C.jsx)(xe,{disabled:e,prompt:null==k?void 0:k.content,onChange:S,onChangeHeight:u,onFocus:()=>x(!0),onBlur:()=>x(!1)})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiButtonIcon,{"data-test-subj":"observabilityAiAssistantChatPromptEditorButtonIcon","aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatPromptEditor.euiButtonIcon.submitLabel",{defaultMessage:"Submit"}),disabled:n||e||E,display:"function"===v?null!=k&&null!==(m=k.function_call)&&void 0!==m&&m.name?"fill":"base":null!=k&&k.content?"fill":"base",iconType:"kqlFunction",isLoading:n,size:"m",onClick:A})))}var ke=n(2),we=n.n(ke);function Ee({canCopy:e,canEdit:t,collapsed:n,editing:o,expanded:s,onToggleEdit:u,onToggleExpand:l,onCopyToClipboard:d}){const[f,p]=Object(r.useState)();return Object(r.useEffect)((()=>{const e=setTimeout((()=>{f&&p(void 0)}),800);return()=>{clearTimeout(e)}}),[f]),Object(C.jsx)(i.a.Fragment,null,t?Object(C.jsx)(a.EuiButtonIcon,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.editPrompt",{defaultMessage:"Edit prompt"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsEditPromptButton",display:o?"fill":"empty",iconType:"documentEdit",onClick:u}):null,n?Object(C.jsx)(a.EuiButtonIcon,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.inspectPrompt",{defaultMessage:"Inspect prompt"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsInspectPromptButton",display:s?"fill":"empty",iconType:s?"eyeClosed":"eye",onClick:l}):null,e?Object(C.jsx)(a.EuiPopover,{button:Object(C.jsx)(a.EuiButtonIcon,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.copyMessage",{defaultMessage:"Copy message"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsCopyMessageButton",iconType:"copyClipboard",display:"copy"===f?"fill":"empty",onClick:()=>{p("copy"),d()}}),isOpen:"copy"===f,panelPaddingSize:"s",closePopover:()=>p(void 0)},Object(C.jsx)(a.EuiText,{size:"s"},c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.copyMessageSuccessful",{defaultMessage:"Copied message"}))):null)}const Ce=97,Se=2;function Ae(e,t){if(t&&t.color)return t.color;const n=Ie(e).codePointAt(0)||Ce;return a.VISUALIZATION_COLORS[n%a.VISUALIZATION_COLORS.length]}function Te(e,t){if(t&&t.initials)return t.initials;const n=Ie(e).split(" "),r=Math.min(Se,n.length);return n.splice(r,n.length),n.map((e=>e.substring(0,1))).join("")}function Ie(e){return e.full_name||e.email||e.username}const Me=({user:e,avatar:t,...n})=>{const{euiTheme:r}=Object(a.useEuiTheme)();if(!e)return Object(C.jsx)(a.EuiAvatar,we()({name:"",color:r.colors.lightestShade,initials:"?"},n));const i=Ie(e);return null!=t&&t.imageUrl?Object(C.jsx)(a.EuiAvatar,we()({name:i,imageUrl:t.imageUrl,color:"plain"},n)):Object(C.jsx)(a.EuiAvatar,we()({name:i,initials:Te(e,t),initialsLength:Se,color:Ae(e,t)},n))};function _e({currentUser:e,role:t,loading:n}){if(n||!e)return Object(C.jsx)(a.EuiLoadingSpinner,{size:"xl"});switch(t){case k.c.User:return Object(C.jsx)(Me,{user:e,size:"m","data-test-subj":"userMenuAvatar"});case k.c.Assistant:case k.c.Elastic:case k.c.Function:return Object(C.jsx)(a.EuiAvatar,{name:"Elastic Assistant",iconType:w.a,color:"subdued"});case k.c.System:return Object(C.jsx)(a.EuiAvatar,{name:"system",iconType:"dot",color:"subdued"});default:return null}}c.i18n.translate("userProfileComponents.updateUserProfile.notification.submitSuccessTitle",{defaultMessage:"Profile updated"}),c.i18n.translate("userProfileComponents.updateUserProfile.notification.requiresPageReloadDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."});var Fe=n(76);const Re=Object(o.css)({name:"1jb4mpp",styles:"padding:4px 0"}),Pe=Object(o.css)({name:"14o5m2r",styles:"padding:12px 0"});function Le({editing:e,loading:t,functionCall:n,content:r,role:i,onActionClick:o,onSendTelemetry:s,onSubmit:c}){return e?Object(C.jsx)(a.EuiPanel,{paddingSize:"none",hasBorder:!1,hasShadow:!1,className:Pe},Object(C.jsx)(Oe,{disabled:!1,hidden:!1,loading:!1,initialFunctionCall:n,initialContent:r,initialRole:i,onChangeHeight:u.noop,onSubmit:c,onSendTelemetry:s})):Object(C.jsx)(a.EuiPanel,{paddingSize:"none",hasBorder:!1,hasShadow:!1,className:Re},Object(C.jsx)(Fe.a,{content:r||"",loading:t,onActionClick:o}))}var Ne=n(70),ze=n(71),Be=n(72);const Ue=Object(o.css)({name:"1kr8da6",styles:"padding-top:4px;padding-bottom:4px"});function De({error:e,loading:t,canRegenerate:n,canGiveFeedback:r,onFeedbackClick:o,onRegenerateClick:s,onStopGeneratingClick:c}){const{euiTheme:u}=Object(a.useEuiTheme)(),l=!e&&r,d=!t&&n;let f;return f=t?Object(C.jsx)(Be.a,{onClick:c}):l||d?Object(C.jsx)(a.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},l?Object(C.jsx)(a.EuiFlexItem,{grow:!0},Object(C.jsx)(Ne.a,{onClickFeedback:o})):null,d?Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(ze.a,{onClick:s})):null):null,f?Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiHorizontalRule,{margin:"none",color:u.colors.lightestShade}),Object(C.jsx)(a.EuiPanel,{hasShadow:!1,paddingSize:"s",className:Ue},f)):null}function We(e){return e===M.b.User?c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.user.label",{defaultMessage:"You"}):e===M.b.System?c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.system.label",{defaultMessage:"System"}):c.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.elasticAssistant.label",{defaultMessage:"Elastic Assistant"})}var Ge=n(73);const He=Object(o.css)({name:"emp3qy",styles:".euiCommentEvent__header>.euiPanel{padding-top:4px;padding-bottom:4px;}"}),qe=Object(o.css)(He," .euiCommentEvent__body{padding:0;}>:last-child{overflow-x:hidden;}",""),$e=Object(o.css)({name:"vjuxqh",styles:".euiCommentEvent{border:none;}.euiCommentEvent__header{background:transparent;border-block-end:none;>.euiPanel{background:none;}}.euiCommentEvent__body{display:none;}"});function Ve({actions:{canCopy:e,canEdit:t,canGiveFeedback:n,canRegenerate:i},content:s,function_call:c,role:u,currentUser:l,display:{collapsed:d},element:f,error:p,loading:g,title:b,onActionClick:m,onEditSubmit:h,onFeedbackClick:v,onRegenerateClick:y,onSendTelemetry:j,onStopGeneratingClick:x}){const O=Object(a.useGeneratedHtmlId)({prefix:"chat"}),[k,w]=Object(r.useState)(!1),[E,S]=Object(r.useState)(Boolean(f)),A=[e,d,e].filter(Boolean),T=Object(o.css)(He," .euiCommentEvent__body{padding:0;height:",E?"fit-content":"0px",";overflow:hidden;border:none;}",""),I=()=>{S(!E),k&&w(!1)},M=()=>{d&&!E&&S(!0),w(!k)};let _=s||g||p?Object(C.jsx)(Le,{editing:k,loading:g,functionCall:c,content:s,role:u,onSubmit:e=>(M(),h(e)),onActionClick:m,onSendTelemetry:j}):null;return d&&(_=Object(C.jsx)(a.EuiAccordion,{id:O,arrowDisplay:"none",forceState:E?"open":"closed",onToggle:I},_)),Object(C.jsx)(a.EuiComment,{timelineAvatar:Object(C.jsx)(_e,{loading:g,currentUser:l,role:u}),username:We(u),event:b,actions:Object(C.jsx)(Ee,{canCopy:e,canEdit:t,collapsed:d,editing:k,expanded:E,onCopyToClipboard:()=>{navigator.clipboard.writeText(s||"")},onToggleEdit:M,onToggleExpand:I}),className:0!==A.length||s?d?T:qe:$e},Object(C.jsx)(a.EuiPanel,{hasShadow:!1,paddingSize:"s"},f?Object(C.jsx)(a.EuiErrorBoundary,null,f):null,_,p?Object(C.jsx)(Ge.a,null):null),Object(C.jsx)(De,{canGiveFeedback:n,canRegenerate:i,error:p,loading:g,onFeedbackClick:v,onRegenerateClick:y,onStopGeneratingClick:x}))}const Ke=Object(o.css)({name:"8l0un1",styles:".euiCommentEvent{border:none;}.euiCommentEvent__header{background:transparent;border-block-end:none;}.euiCommentEvent__body{display:none;}.euiLink{padding:0;}.euiLink:focus{text-decoration:none;}.euiLink:hover{text-decoration:underline;}.euiAvatar{cursor:pointer;:hover{border:solid 2px #d3dae6;}}"});function Je({consolidatedItem:e,onActionClick:t,onEditSubmit:n,onFeedback:o,onRegenerate:s,onSendTelemetry:u,onStopGenerating:l}){const[d,f]=Object(r.useState)(!1),p=()=>{f(!d)};return Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiComment,{className:Ke,timelineAvatar:Object(C.jsx)(a.EuiAvatar,{color:"subdued",name:"inspect",iconType:"layers",onClick:p}),event:Object(C.jsx)(a.EuiLink,{color:"subdued","data-test-subj":"observabilityAiAssistantChatCollapsedItemsCollapsedItemsLink",onClick:p},Object(C.jsx)("em",null,d?c.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.hideEvents",{defaultMessage:"Hide {count} events",values:{count:e.length}}):c.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.showEvents",{defaultMessage:"Show {count} events",values:{count:e.length}}))),username:"",actions:Object(C.jsx)(a.EuiButtonIcon,{"aria-label":c.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.toggleButtonLabel",{defaultMessage:"Show / hide items"}),color:"text","data-test-subj":"observabilityAiAssistantChatCollapsedItemsButton",iconType:d?"arrowUp":"arrowDown",onClick:p})}),d?e.map(((e,r)=>Object(C.jsx)(Ve,we()({key:r},e,{onActionClick:t,onEditSubmit:t=>n(e.message,t),onFeedbackClick:t=>{o(e.message,t)},onRegenerateClick:()=>{s(e.message)},onSendTelemetry:u,onStopGeneratingClick:l})))):null)}var Ze=n(36);function Xe(e){const t=Object(O.a)();return Object(C.jsx)(i.a.Fragment,null,t.renderFunction(e.name,e.arguments,e.response))}function Qe(e){let t;if(e.name){const n=e.role!==M.b.Assistant&&e.content?pe(e.content):e.content,r=e.data?pe(e.data):void 0;t=Object(u.omitBy)({content:n,data:r},u.isEmpty)}else{var n,r;t={name:null===(n=e.function_call)||void 0===n?void 0:n.name,args:null!==(r=e.function_call)&&void 0!==r&&r.arguments?pe(e.function_call.arguments):void 0}}return`\`\`\`\n${JSON.stringify(t,null,2)}\n\`\`\``}function Ye({name:e}){const{euiTheme:t}=Object(a.useEuiTheme)();return Object(C.jsx)("span",{style:{fontFamily:t.font.familyCode,fontSize:13}},e)}function et({messages:e,chatService:t,hasConnector:n,currentUser:i,startedFrom:s,onEdit:d,onFeedback:f,onRegenerate:p,onSendTelemetry:g,onStopGenerating:b,onActionClick:m,chatState:h}){const v=Object(r.useMemo)((()=>{const r=function({chatService:e,currentUser:t,hasConnector:n,messages:r,startedFrom:i,chatState:o}){var a,s;const d=r.filter((e=>e.message.role!==M.b.System)),f=[{id:Object(Ze.v4)(),actions:{canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},display:{collapsed:!1,hide:!1},currentUser:t,loading:!1,message:{"@timestamp":(new Date).toISOString(),message:{role:M.b.User}},title:c.i18n.translate("xpack.observabilityAiAssistant.conversationStartTitle",{defaultMessage:"started a conversation"}),role:M.b.User},...d.map(((r,o)=>{var a,s;const c=Object(Ze.v4)();let u,l,f="";const p=r.message.name&&d[o-1]&&d[o-1].message.function_call?d[o-1].message.function_call:void 0;let g=(null===(a=r.message.function_call)||void 0===a?void 0:a.trigger)||r.message.role;const b={canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},m={collapsed:!1,hide:!1};switch(g){case M.b.User:if(b.canCopy=!0,b.canGiveFeedback=!1,b.canRegenerate=!1,m.hide=!1,r.message.name&&p){let t=!1;try{var h;const e=JSON.parse(null!==(h=r.message.content)&&void 0!==h?h:"null");t=e&&"object"==typeof e&&"error"in e}catch(e){t=!0}f=t?Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.executedFunctionFailureEvent",defaultMessage:"failed to execute the function {functionName}",values:{functionName:Object(C.jsx)(Ye,{name:r.message.name})}}):Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.userExecutedFunctionEvent",defaultMessage:"executed the function {functionName}",values:{functionName:Object(C.jsx)(Ye,{name:r.message.name})}}),l=!t&&e.hasRenderFunction(r.message.name)?Object(C.jsx)(Xe,{name:r.message.name,arguments:null==p?void 0:p.arguments,response:r.message}):void 0,u=l?void 0:Qe(r.message),(null==p?void 0:p.trigger)===M.b.Assistant&&(g=M.b.Assistant),b.canEdit=!1,m.collapsed=!l}else if(r.message.function_call)f=Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.userSuggestedFunctionEvent",defaultMessage:"requested the function {functionName}",values:{functionName:Object(C.jsx)(Ye,{name:r.message.function_call.name})}}),u=Qe(r.message),b.canEdit=n,m.collapsed=!0;else if(f="",u=r.message.content,b.canEdit=n,m.collapsed=!1,"contextualInsight"===i){const e=d.findIndex((e=>e.message.role===M.b.User));m.collapsed=o===e}break;case M.b.Assistant:b.canRegenerate=n,b.canCopy=!0,b.canGiveFeedback=!0,m.hide=!1,null!==(s=r.message.function_call)&&void 0!==s&&s.name?(f=Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.suggestedFunctionEvent",defaultMessage:"requested the function {functionName}",values:{functionName:Object(C.jsx)(Ye,{name:r.message.function_call.name})}}),r.message.content?(u=r.message.content,m.collapsed=!1):(u=Qe(r.message),m.collapsed=!0),b.canEdit=!0):(f="",u=r.message.content,m.collapsed=!1,b.canEdit=!1)}return{id:c,role:g,title:f,content:u,element:l,actions:b,display:m,currentUser:t,function_call:r.message.function_call,loading:!1,message:r}}))],p=o===l.a.Loading;let g=Object(u.last)(f);const b=(null===(a=g)||void 0===a?void 0:a.message.message.role)===M.b.Assistant&&!(null!==(s=g.message.message.function_call)&&void 0!==s&&s.name);return p&&!b&&(f.push({id:Object(Ze.v4)(),actions:{canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},display:{collapsed:!1,hide:!1},content:"",currentUser:t,loading:o===l.a.Loading,role:M.b.Assistant,title:"",message:{"@timestamp":(new Date).toISOString(),message:{role:M.b.Assistant,content:""}}}),g=Object(u.last)(f)),p&&g&&(g.loading=p),f}({chatService:t,hasConnector:n,messages:e,currentUser:i,startedFrom:s,chatState:h}),o=[];let a=null;for(const e of r)!e.display.hide&&e&&(e.display.collapsed?a?a.push(e):(a=[e],o.push(a)):(o.push(e),a=null));return o}),[t,n,e,i,s,h]);return Object(C.jsx)(a.EuiCommentList,{className:Object(o.css)({name:"xaxuoa",styles:"padding-bottom:32px"})},v.map(((e,t)=>Array.isArray(e)?Object(C.jsx)(Je,{key:t,consolidatedItem:e,onActionClick:m,onEditSubmit:d,onFeedback:f,onRegenerate:p,onSendTelemetry:g,onStopGenerating:b}):Object(C.jsx)(Ve,we()({key:t},Object(u.omit)(e,"message"),{onActionClick:m,onFeedbackClick:t=>{f(e.message,t)},onRegenerateClick:()=>{p(e.message)},onEditSubmit:t=>{d(e.message,t)},onSendTelemetry:g,onStopGeneratingClick:b})))))}var tt=n(74),nt=n.n(tt);const rt=()=>{const e=Object(g.a)().getLicenseManagementLocator().url.locators.get("LICENSE_MANAGEMENT_LOCATOR");if(e)return()=>e.navigate({page:"dashboard"})},it=Object(o.css)("height:100%;padding:",s.euiThemeVars.euiPanelPaddingModifiers.paddingMedium,";","");function ot(){const e=rt();return Object(C.jsx)(a.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(C.jsx)(a.EuiFlexGroup,{direction:"column",alignItems:"center",justifyContent:"center",className:it},Object(C.jsx)(a.EuiImage,{src:nt.a,alt:"Elastic AI Assistant",size:"m"}),Object(C.jsx)(a.EuiTitle,null,Object(C.jsx)("h2",null,d.c)),Object(C.jsx)(a.EuiText,{color:"subdued"},c.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.body",{defaultMessage:"You need an Enterprise license to use the Elastic AI Assistant."})),Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(a.EuiFlexGroup,null,Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(a.EuiButton,{"data-test-subj":"observabilityAiAssistantIncorrectLicensePanelSubscriptionPlansButton",fill:!0,href:"https://www.elastic.co/subscriptions",target:"_blank"},c.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.subscriptionPlansButton",{defaultMessage:"Subscription plans"}))),Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(a.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantIncorrectLicensePanelManageLicenseButton",onClick:e},c.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.manageLicense",{defaultMessage:"Manage license"})))))))}var at=n(41);function st(){return Object(C.jsx)(a.EuiText,{color:"subdued",size:"xs",textAlign:"center","data-test-subj":"observabilityAiAssistantDisclaimer"},c.i18n.translate("xpack.observabilityAiAssistant.disclaimer.disclaimerLabel",{defaultMessage:"This chat is powered by an integration with your LLM provider. LLMs are known to sometimes present incorrect information as if it's correct. Elastic supports configuration and connection to the LLM provider and your knowledge base, but is not responsible for the LLM's responses."}))}const ct=Object(o.keyframes)({name:"5j8bii",styles:"from{opacity:0;}to{opacity:1;}"}),ut=Object(o.css)("animation:",ct," ",s.euiThemeVars.euiAnimSpeedNormal," ease-in-out;","");var lt={name:"14nvu8m",styles:"box-shadow:none;inline-size:unset;line-height:initial"};function dt({connectors:e,onSetupConnectorClick:t}){var n,r;if(e.error){const t=(r=e.error)instanceof Error&&"request"in r&&"name"in r&&403===e.error.body.statusCode;return Object(C.jsx)("div",{className:ut},Object(C.jsx)(a.EuiFlexGroup,{direction:"row",alignItems:"center",justifyContent:"center",gutterSize:"xs"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiIcon,{type:"alert",color:"danger"})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiText,{color:"danger"},t?c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageConnectors.connectorsForbiddenTextLabel",{defaultMessage:"Required privileges to get connectors are missing"}):c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageConnectors.connectorsErrorTextLabel",{defaultMessage:"Could not load connectors"})))))}return!e.loading&&0===(null===(n=e.connectors)||void 0===n?void 0:n.length)&&t?Object(C.jsx)("div",{className:ut},Object(C.jsx)(a.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.observabilityAiAssistant.initialSetupPanel.setupConnector.description2",{defaultMessage:"Start working with the Elastic AI Assistant by setting up a connector for your AI provider. The OpenAI model needs to support function calls. We strongly recommend using GPT4."}),Object(C.jsx)(a.EuiBetaBadge,{label:"",css:lt,tooltipContent:c.i18n.translate("xpack.observabilityAiAssistant.technicalPreviewBadgeDescription",{defaultMessage:"GPT4 is required for a more consistent experience when using function calls (for example when performing root cause analysis, visualizing data and more). GPT3.5 can work for some of the simpler workflows, such as explaining errors or for a ChatGPT like experience within Kibana which don't require the use of frequent function calls."}),iconType:"iInCircle",size:"s"})),Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)("div",null,Object(C.jsx)(a.EuiButton,{"data-test-subj":"observabilityAiAssistantInitialSetupPanelSetUpGenerativeAiConnectorButton",fill:!0,color:"primary",onClick:t},c.i18n.translate("xpack.observabilityAiAssistant.initialSetupPanel.setupConnector.buttonLabel",{defaultMessage:"Set up GenAI connector"})))):null}var ft=n(104),pt=n.n(ft),gt=n(105),bt=n.n(gt);const mt=Object(o.css)({name:"n3vsoe",styles:"width:330px"});function ht({knowledgeBase:e,onRetryInstall:t}){var n,r,i,o,s,u;const{http:l}=Object(p.a)().services,d=null===(n=e.status.value)||void 0===n?void 0:n.model_name;return Object(C.jsx)("div",{className:mt,"data-test-subj":"observabilityAiAssistantWelcomeMessageKnowledgeBaseSetupErrorPanel"},Object(C.jsx)(a.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(C.jsx)(a.EuiDescriptionList,null,Object(C.jsx)(a.EuiDescriptionListTitle,null,c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.issuesDescriptionListTitleLabel",{defaultMessage:"Issues"})),Object(C.jsx)(a.EuiSpacer,{size:"s"}),Object(C.jsx)(a.EuiDescriptionListDescription,null,Object(C.jsx)("ul",null,null!==(r=e.status.value)&&void 0!==r&&r.deployment_state?null:Object(C.jsx)("li",null,Object(C.jsx)(a.EuiIcon,{type:"alert",color:"subdued"})," ",Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotDeployedLabel",defaultMessage:"Model {modelName} is not deployed",values:{modelName:Object(C.jsx)(a.EuiCode,null,d)}})),null!==(i=e.status.value)&&void 0!==i&&i.deployment_state&&"started"!==e.status.value.deployment_state?Object(C.jsx)("li",null,Object(C.jsx)(a.EuiIcon,{type:"alert",color:"subdued"})," ",Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotStartedLabel",defaultMessage:"Deployment state of {modelName} is {deploymentState}",values:{modelName:Object(C.jsx)(a.EuiCode,null,d),deploymentState:Object(C.jsx)(a.EuiCode,null,null===(o=e.status.value)||void 0===o?void 0:o.deployment_state)}})):null,null!==(s=e.status.value)&&void 0!==s&&s.allocation_state&&"fully_allocated"!==e.status.value.allocation_state?Object(C.jsx)("li",null,Object(C.jsx)(a.EuiIcon,{type:"alert",color:"subdued"})," ",Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotFullyAllocatedLabel",defaultMessage:"Allocation state of {modelName} is {allocationState}",values:{modelName:Object(C.jsx)(a.EuiCode,null,d),allocationState:Object(C.jsx)(a.EuiCode,null,null===(u=e.status.value)||void 0===u?void 0:u.allocation_state)}})):null)))),Object(C.jsx)(a.EuiHorizontalRule,{margin:"none"}),Object(C.jsx)(a.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(C.jsx)(a.EuiText,{color:"subdued",size:"xs"},Object(C.jsx)(X.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.div.checkTrainedModelsToLabel",defaultMessage:" {retryInstallingLink} or check {trainedModelsLink} to ensure {modelName} is deployed and running.",values:{modelName:d,retryInstallingLink:Object(C.jsx)(a.EuiLink,{"data-test-subj":"observabilityAiAssistantWelcomeMessageKnowledgeBaseSetupErrorPanelRetryInstallingLink",onClick:t},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageKnowledgeBaseSetupErrorPanel.retryInstallingLinkLabel",{defaultMessage:"Retry install"})),trainedModelsLink:Object(C.jsx)(a.EuiLink,{"data-test-subj":"observabilityAiAssistantWelcomeMessageTrainedModelsLink",external:!0,href:l.basePath.prepend("/app/ml/trained_models"),target:"_blank"},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.trainedModelsLinkLabel",{defaultMessage:"Trained Models"}))}}))))}function vt({connectors:e,knowledgeBase:t}){var n,o,s,l,d;const f=z()(!1===(null===(n=t.status.value)||void 0===n?void 0:n.ready)),[p,g]=Object(r.useState)(!1),[b,m]=Object(r.useState)(0),[,,h]=pt()((()=>g(!1)),b),[v,y]=Object(r.useState)(!1),[j,x]=Object(r.useState)(!1);Object(r.useEffect)((()=>{var e;f&&null!==(e=t.status.value)&&void 0!==e&&e.ready&&(m(3e3),h(),g(!0))}),[null===(o=t.status.value)||void 0===o?void 0:o.ready,f,h]),Object(r.useEffect)((()=>{var e;!j&&null!==(e=t.status.value)&&void 0!==e&&e.ready&&x(!1)}),[j,null===(s=t.status.value)||void 0===s?void 0:s.ready]),bt()((()=>{t.status.refresh()}),j?5e3:null);const O=async()=>{x(!0),y(!1),await t.install().then((()=>{x(!1)}))};return void 0!==(null===(l=t.status.value)||void 0===l?void 0:l.ready)?Object(C.jsx)(i.a.Fragment,null,t.isInstalling?Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.weAreSettingUpTextLabel",{defaultMessage:"We are setting up your knowledge base. This may take a few minutes. You can continue to use the Assistant while this process is underway."})),Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)(a.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantWelcomeMessageSettingUpKnowledgeBaseButton",isLoading:!0,onClick:u.noop},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.div.settingUpKnowledgeBaseLabel",{defaultMessage:"Setting up Knowledge base"}))):null,null!==(d=e.connectors)&&void 0!==d&&d.length&&(!t.isInstalling&&t.installError||!t.isInstalling&&!1===t.status.loading&&!1===t.status.value.ready)?Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageKnowledgeBase.yourKnowledgeBaseIsNotSetUpCorrectlyLabel",{defaultMessage:"Your Knowledge base hasn't been set up."})),Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)(a.EuiFlexGroup,{justifyContent:"center"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)("div",null,Object(C.jsx)(a.EuiButton,{color:"primary","data-test-subj":"observabilityAiAssistantWelcomeMessageSetUpKnowledgeBaseButton",fill:!0,isLoading:j,iconType:"importAction",onClick:O},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.retryButtonLabel",{defaultMessage:"Install Knowledge base"})))),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiPopover,{button:Object(C.jsx)(a.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantWelcomeMessageInspectErrorsButton",iconType:"inspect",onClick:()=>y(!v)},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.inspectErrorsButtonEmptyLabel",{defaultMessage:"Inspect issues"})),isOpen:v,panelPaddingSize:"none",closePopover:()=>y(!1)},Object(C.jsx)(ht,{knowledgeBase:t,onRetryInstall:O})))),Object(C.jsx)(a.EuiSpacer,{size:"m"})):null,p?Object(C.jsx)("div",null,Object(C.jsx)(a.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiIcon,{type:"checkInCircleFilled",color:"success"})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.knowledgeBaseSuccessfullyInstalledLabel",{defaultMessage:"Knowledge base successfully installed"}))))):null):null}const yt=Object(o.css)({name:"13udsys",styles:"height:100%"}),jt=Object(o.css)({name:"7rufyv",styles:"max-width:600px;text-align:center"});function xt({connectors:e,knowledgeBase:t}){const n=Object(a.useCurrentEuiBreakpoint)(),{application:{navigateToApp:o,capabilities:s},plugins:{start:{triggersActionsUi:{getAddConnectorFlyout:u}}}}=Object(p.a)().services,[l,d]=Object(r.useState)(!1);return Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiFlexGroup,{alignItems:"center",direction:"column",gutterSize:"none",className:yt},Object(C.jsx)(a.EuiFlexItem,{grow:!0,className:jt},Object(C.jsx)(a.EuiSpacer,{size:"l"}),Object(C.jsx)(a.EuiImage,{src:nt.a,alt:"Elastic AI Assistant",size:"xl"===n?300:"m"}),Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)(a.EuiTitle,{size:"m"},Object(C.jsx)("h2",null,c.i18n.translate("xpack.observabilityAiAssistant.disclaimer.title",{defaultMessage:"Welcome to the AI Assistant for Observability"}))),Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)(dt,{connectors:e,onSetupConnectorClick:()=>{var e,t;null!==(e=s.management)&&void 0!==e&&null!==(t=e.insightsAndAlerting)&&void 0!==t&&t.triggersActions?d(!0):o("management",{path:"/insightsAndAlerting/triggersActionsConnectors/connectors"})}}),Object(C.jsx)(vt,{connectors:e,knowledgeBase:t})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiSpacer,{size:"m"}),Object(C.jsx)(st,null))),l?Object(C.jsx)(u,{featureId:at.GenerativeAIForObservabilityConnectorFeatureId,onConnectorCreated:n=>{var r;d(!1),".gen-ai"===n.actionTypeId&&e.reloadConnectors(),t.status.value&&!1!==(null===(r=t.status.value)||void 0===r?void 0:r.ready)||t.install()},onClose:()=>d(!1)}):null)}var Ot=n(69);const kt=Object(o.css)({name:"13udsys",styles:"height:100%"}),wt=Object(o.css)({name:"umwchj",styles:"overflow-y:auto"}),Et=Object(o.css)("overflow:hidden;transition:height ",s.euiThemeVars.euiAnimSpeedFast," ",s.euiThemeVars.euiAnimSlightResistance,";",""),Ct=Object(o.css)("height:100%;padding:",s.euiThemeVars.euiPanelPaddingModifiers.paddingMedium,";",""),St=Object(o.css)({name:"qbt5ty",styles:"align-self:center"}),At=Object(o.css)({name:"pbkze0",styles:"padding-top:12px;padding-bottom:8px"}),Tt=Object(o.keyframes)({name:"12zx3ov",styles:"from{opacity:0;transform:scale(0.9);}to{opacity:1;transform:scale(1);}"}),It=Object(o.css)("height:100%;opacity:0;animation:",Tt," ",s.euiThemeVars.euiAnimSpeedNormal," ",s.euiThemeVars.euiAnimSlightBounce," ",s.euiThemeVars.euiAnimSpeedNormal," forwards;",""),Mt=32;function _t({initialTitle:e,initialMessages:t,initialConversationId:n,connectors:s,knowledgeBase:v,connectorsManagementHref:y,currentUser:j,startedFrom:w,onConversationUpdate:E}){var S,A;const T=x(),M=null==T?void 0:T.hasAtLeast("enterprise"),_=Object(O.a)(),{conversation:F,messages:R,next:P,state:N,stop:z,saveTitle:B}=function({initialConversationId:e,initialMessages:t=h,initialTitle:n,chatService:i,connectorId:o,onConversationUpdate:a}){const s=Object(g.a)(),{services:{notifications:d}}=Object(p.a)(),v=Object(b.a)(e),y=Object(b.a)(t),j=Object(b.a)(n);if(y.length&&v)throw new Error("Cannot set initialMessages if initialConversationId is set");const{next:x,messages:O,setMessages:k,state:w,stop:E}=Object(l.b)({initialMessages:y,initialConversationId:v,chatService:i,connectorId:o,onConversationUpdate:e=>{S(e.conversation.id),null==a||a({conversation:e.conversation})},persist:!0}),[C,S]=Object(r.useState)(v),A=Object(f.a)((({signal:e})=>C?s.callApi("GET /internal/observability_ai_assistant/conversation/{conversationId}",{signal:e,params:{path:{conversationId:C}}}).then((e=>(k(e.messages),e))).catch((e=>{throw k([]),e})):m({title:j})),[C,j],{defaultValue:()=>{if(!C)return m({title:j})}});return{conversation:A,state:w,next:x,stop:E,messages:O,saveTitle:e=>{if(!C||!A.value)throw new Error("Cannot save title if conversation is not stored");const t=Object(u.merge)({},A.value,{conversation:{title:e}});return(n=t,s.callApi("PUT /internal/observability_ai_assistant/conversation/{conversationId}",{signal:null,params:{path:{conversationId:n.conversation.id},body:{conversation:Object(u.merge)({"@timestamp":n["@timestamp"],conversation:{id:n.conversation.id}},Object(u.omit)(n,"conversation.last_updated","namespace","user"))}}}).catch((e=>{throw d.toasts.addError(e,{title:c.i18n.translate("xpack.observabilityAiAssistant.errorUpdatingConversation",{defaultMessage:"Could not update conversation"})}),e}))).then((()=>A.refresh())).then((()=>{null==a||a(t)}));var n}}}({initialConversationId:n,initialMessages:t,initialTitle:e,chatService:_,connectorId:s.selectedConnector,onConversationUpdate:E}),U=Object(r.useRef)(null);let D;const W=Boolean(s.loading||v.status.loading||N===l.a.Loading||F.loading),G=Object(o.css)("max-height:100%;max-width:","conversationView"===w?"950px":"100%",";",""),[H,q]=Object(r.useState)(!0),$=e=>e.scrollTop+e.clientHeight>=e.scrollHeight,[V,K]=Object(r.useState)(0),J=(e,t)=>{var n;null!==(n=F.value)&&void 0!==n&&n.conversation&&"user"in F.value&&Object(L.c)(_.analytics,{type:L.a.observability_ai_assistant_chat_feedback,payload:{messageWithFeedback:{message:e,feedback:t},conversation:F.value}})},Z=e=>{K(0===e?0:e+Mt)};var X;if(Object(r.useEffect)((()=>{var e;const t=null===(e=U.current)||void 0===e?void 0:e.parentElement;if(t)return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)};function n(){q($(t))}}),[U.current]),Object(r.useEffect)((()=>{var e;const t=null===(e=U.current)||void 0===e?void 0:e.parentElement;t&&H&&(t.scrollTop=t.scrollHeight)})),M||n)if(!F.value&&F.loading)D=null;else{var Q,Y,ee;D=Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiFlexItem,{grow:!0,className:wt},Object(C.jsx)("div",{ref:U,className:kt},Object(C.jsx)(a.EuiPanel,{grow:!0,hasBorder:!1,hasShadow:!1,paddingSize:"m",className:It},0===(null===(Q=s.connectors)||void 0===Q?void 0:Q.length)||1===R.length?Object(C.jsx)(xt,{connectors:s,knowledgeBase:v}):Object(C.jsx)(et,{startedFrom:w,messages:R,knowledgeBase:v,chatService:_,currentUser:j,chatState:N,hasConnector:!(null===(Y=s.connectors)||void 0===Y||!Y.length),onEdit:(e,t)=>{q(!0);const n=R.indexOf(e);P(R.slice(0,n).concat(t))},onFeedback:J,onRegenerate:e=>{P(function(e,t){const n=e.indexOf(t),r=e.slice(0,n),i=Object(u.findLastIndex)(r,(e=>"user"===e.message.role&&!e.message.name));return r.slice(0,i+1)}(R,e))},onSendTelemetry:e=>Object(L.c)(_.analytics,e),onStopGenerating:()=>{z()},onActionClick:e=>{q(!0),e.type===Ot.a.executeEsqlQuery&&P(R.concat({"@timestamp":(new Date).toISOString(),message:{role:k.c.Assistant,content:"",function_call:{name:"execute_query",arguments:JSON.stringify({query:e.query}),trigger:k.c.User}}}))}})))),Object(C.jsx)(a.EuiFlexItem,{grow:!1,className:Et,style:{height:V}},Object(C.jsx)(a.EuiHorizontalRule,{margin:"none"}),Object(C.jsx)(a.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m",color:"subdued",className:At},Object(C.jsx)(Oe,{disabled:!s.selectedConnector||!M,hidden:s.loading||0===(null===(ee=s.connectors)||void 0===ee?void 0:ee.length),loading:W,onChangeHeight:Z,onSendTelemetry:e=>Object(L.c)(_.analytics,e),onSubmit:e=>(q(!0),P(R.concat(e)))}),Object(C.jsx)(a.EuiSpacer,{size:"s"}))))}else D=Object(C.jsx)(i.a.Fragment,null,Object(C.jsx)(a.EuiFlexItem,{grow:!0,className:Ct},Object(C.jsx)(ot,null)),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiHorizontalRule,{margin:"none"})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(C.jsx)(Oe,{hidden:s.loading||0===(null===(X=s.connectors)||void 0===X?void 0:X.length),loading:W,disabled:!0,onChangeHeight:K,onSubmit:e=>{P(R.concat(e))},onSendTelemetry:e=>Object(L.c)(_.analytics,e)}),Object(C.jsx)(a.EuiSpacer,{size:"s"}))));return F.error?Object(C.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"none",className:G,justifyContent:"center"},Object(C.jsx)(a.EuiFlexItem,{grow:!1,className:St},Object(C.jsx)(a.EuiCallOut,{color:"danger",title:c.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationTitle",{defaultMessage:"Conversation not found"}),iconType:"warning"},c.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationContent",{defaultMessage:"Could not find a conversation with id {conversationId}. Make sure the conversation exists and you have access to it.",values:{conversationId:n}})))):Object(C.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"none",className:G},Object(C.jsx)(a.EuiFlexItem,{grow:!1,className:F.error?St:void 0},F.error?Object(C.jsx)(a.EuiCallOut,{color:"danger",title:c.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationTitle",{defaultMessage:"Conversation not found"}),iconType:"warning"},c.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationContent",{defaultMessage:"Could not find a conversation with id {conversationId}. Make sure the conversation exists and you have access to it.",values:{conversationId:n}})):null),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(I,{connectors:s,conversationId:null!==(S=F.value)&&void 0!==S&&S.conversation&&"id"in F.value.conversation?F.value.conversation.id:void 0,connectorsManagementHref:y,knowledgeBase:v,licenseInvalid:!M&&!n,loading:W,startedFrom:w,title:(null===(A=F.value)||void 0===A?void 0:A.conversation.title)||e||d.b,onCopyConversation:()=>{var t;const n=JSON.stringify({title:e,messages:R});null===(t=navigator.clipboard)||void 0===t||t.writeText(n||"")},onSaveTitle:e=>{B(e)}})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiHorizontalRule,{margin:"none"})),D)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return w})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return U})),n.d(t,"e",(function(){return D}));var r=n(25),i=n(26),o=n(45);function a(...e){return{...new r.Type("merge",(t=>e.every((e=>e.is(t)))),((t,n)=>{const a=[],s=[];e.map(((e,r)=>e.validate(t,n.concat({key:String(r),type:e,actual:t})))).forEach((e=>{Object(o.isLeft)(e)?a.push(...e.left):s.push(e.right)}));const c=Object(i.merge)({},...s);return a.length>0?r.failures(a):r.success(c)}),(t=>e.reduce(((e,t)=>t.encode(e)),t))),_tag:"MergeType",types:e}}const s=["StringType","NumberType","BooleanType","ArrayType","DictionaryType","InterfaceType","PartialType","UnionType","IntersectionType","MergeType"],c=e=>"_tag"in e&&s.includes(e._tag);function u(e){if(!c(e))return e;switch(e._tag){case"ArrayType":return r.array(u(e.type));case"DictionaryType":return r.dictionary(e.domain,u(e.codomain));case"InterfaceType":return r.exact(r.interface(Object(i.mapValues)(e.props,u)));case"PartialType":return r.exact(r.partial(Object(i.mapValues)(e.props,u)));case"IntersectionType":return r.intersection(e.types.map(u));case"UnionType":return r.union(e.types.map(u));case"MergeType":return a(u(e.types[0]),u(e.types[1]));default:return e}}const l=e=>""===e;r.brand(r.string,(e=>{return!l(t=e)&&!t.includes(" ")&&!t.split(",").some(l);var t}),"IndexPattern"),new r.Type("JSON",r.any.is,((e,t)=>o.either.chain(r.string.validate(e,t),(n=>{try{return r.success(JSON.parse(n))}catch(n){return r.failure(e,t)}}))),(e=>JSON.stringify(e))),new r.Type("isoToEpochRt",r.number.is,((e,t)=>o.either.chain(r.string.validate(e,t),(n=>{const i=new Date(n).getTime();return isNaN(i)?r.failure(e,t):r.success(i)}))),(e=>new Date(e).toISOString())),new r.Type("ToNumber",r.number.is,((e,t)=>{const n=Number(e);return isNaN(n)?r.failure(e,t):r.success(n)}),r.identity),new r.Type("ToBoolean",r.boolean.is,(e=>{let t;return t="string"==typeof e?"true"===e:!!e,r.success(t)}),r.identity),r.brand(r.string,(e=>e.length>0),"NonEmptyString");var d=n(50),f=n(34),p=n.n(f);r.brand(r.string,(e=>p()(e,!0).isValid()),"Date");var g=n(37),b=n.n(g);new r.Type("datemath",r.string.is,((e,t)=>Object(d.pipe)(r.string.validate(e,t),Object(o.chain)((e=>(e=>{const t=b.a.parse(e);return!(!t||!t.isValid())})(e)?r.success(e):r.failure(e,t))))),String),n(55);const m=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3,9}Z$/,h=new r.Type("DateFromStringOrNumber",(e=>"string"==typeof e),((e,t)=>"string"==typeof e?m.test(e)?r.success(e):r.failure(e,t):Object(d.pipe)(r.number.validate(e,t),Object(o.chain)((e=>{const n=p()(e);return n.isValid()?r.success(n.toISOString()):r.failure(e,t)})))),String),v=r.type({time:h,tiebreaker:r.number});r.intersection([v,r.partial({gid:r.string,fromAutoReload:r.boolean})]);var y=n(85),j=n(79),x=n.n(j),O=n(83);function k(e){return e.replace(/(?:{([^\/]+)})/g,":$1")}class NotFoundRouteException extends Error{constructor(e){super(e)}}function w(e){const t=new Map,n=new Map,r=Object.entries(e).map((([e,t])=>s({...t,path:e})));function s(e){var r,i,o;const a={component:()=>e.element,routes:null!==(r=null===(i=Object.entries(null!==(o=e.children)&&void 0!==o?o:{}))||void 0===i?void 0:i.map((([e,t])=>s({...t,path:e}))))&&void 0!==r?r:[],exact:!e.children||0===Object.values(e.children).length,path:k(e.path)};return t.set(a,e),n.set(e,a),a}function c(e){const n=Object(O.matchRoutes)(r,k(e));if(!n.length)throw new Error(`No matching route found for ${e}`);return n.map((e=>t.get(e.route)))}const l=(...e)=>{let n=!1;"boolean"==typeof e[e.length-1]&&(n=e[e.length-1],e.pop());const a=e[e.length-1];e.pop();let s=e;0===s.length&&(s=[a.pathname||"/"]);let c=[],l=-1;const d=s.map((t=>{const n=t.endsWith("/*")||0===e.length?1:0;return{length:t.length,greedy:n,path:t}})),f=Object(i.orderBy)(d,["greedy","length"],["desc","desc"]);for(const{path:e,greedy:t}of f){if(c=Object(O.matchRoutes)(r,k(a.pathname)),l=t?c.length-1:Object(i.findLastIndex)(c,(t=>t.route.path===k(e))),-1!==l)break;l=-1}if(-1===l){if(n)return[];let e;throw e=1===s.length?`${s[0]} does not match current path ${a.pathname}`:`None of ${s.join(", ")} match current path ${a.pathname}`,new Error(e)}if(!c.some((e=>e.match.isExact)))throw new NotFoundRouteException("No route was matched");return c.slice(0,l+1).map((e=>{const n=t.get(e.route);if(null!=n&&n.params){var r;const t=u(n.params).decode(Object(i.merge)({},null!==(r=n.defaults)&&void 0!==r?r:{},{path:e.match.params,query:x.a.parse(a.search,{decode:!0})}));if(Object(o.isLeft)(t))throw new Error(y.PathReporter.report(t).join("\n"));return{match:{...e.match,params:t.right},route:n}}return{match:{...e.match,params:{path:{},query:{}}},route:n}}))};return{link:(e,...t)=>((e,...t)=>{const n=t[0],r=Object(i.merge)({path:{},query:{}},n),s=c(e=e.split("/").map((e=>{const t=e.match(/(?:{([a-zA-Z]+)})/);return t?r.path[t[1]]:e})).join("/")),u=a(...Object(i.compact)(s.map((e=>e.params)))),l=Object(i.merge)({},...s.map((e=>{var t;return null!==(t=e.defaults)&&void 0!==t?t:{}})),r),d=u.decode(l);if(Object(o.isLeft)(d))throw new Error(y.PathReporter.report(d).join("\n"));return x.a.stringifyUrl({url:e,query:l.query},{encode:!0})})(e,...t),getParams:(...e)=>{const t=l(...e);return t.length?Object(i.merge)({path:{},query:{}},...t.map((e=>{var t,n;return Object(i.merge)({},null!==(t=null===(n=e.route)||void 0===n?void 0:n.defaults)&&void 0!==t?t:{},e.match.params)}))):void 0},matchRoutes:(...e)=>l(...e),getRoutePath:e=>e.path,getRoutesToMatch:e=>c(e)}}var E=n(0),C=n.n(E),S=n(1);const A=Object(E.createContext)(void 0);function T({element:e,children:t}){return Object(S.jsx)(A.Provider,{value:{element:e}},t)}function I(){const e=Object(E.useContext)(A);if(!e)throw new Error("Outlet context not available");return e.element||null}const M=Object(E.createContext)(void 0),_=({match:e,element:t,children:n})=>Object(S.jsx)(M.Provider,{value:{match:e,element:t}},Object(S.jsx)(T,{element:t},n));var F=n(27);const R=Object(E.createContext)(void 0),P=({router:e,children:t})=>Object(S.jsx)(R.Provider,{value:e},t);function L(){const e=Object(E.useContext)(R);if(!e)throw new Error("Router not found in context");return e}function N(){return function(e){const t=L(),n=Object(F.useLocation)();return Object(E.useMemo)((()=>void 0===e?t.matchRoutes(n):t.matchRoutes(e,n)),[e,t,n])}().concat().reverse().reduce(((e,t)=>{const{element:n}=t.route;return Object(S.jsx)(_,{match:t,element:e},n)}),Object(S.jsx)(C.a.Fragment,null))}n(2),n(87);var z=n(35);const B=({children:e,...t})=>Object(S.jsx)(F.Router,t,Object(S.jsx)(z.CompatRouter,null,e));function U({children:e,router:t,history:n}){return Object(S.jsx)(B,{history:n},Object(S.jsx)(P,{router:t},e))}function D(...e){const t=L(),n=Object(F.useLocation)();let r=!1;const i=e[e.length-1];"boolean"==typeof i&&(r=i,e.pop());const o=[...e,n,r];return t.getParams(...o)}},function(e,t,n){"use strict";e.exports=n(94)},function(e,t,n){"use strict";e.exports=n(101)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e){const t=Object(r.useRef)(e);return t.current!==e&&console.trace(`Variable changed from ${t.current} to ${e}, but only the initial value will be taken into account`),t.current}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(12),i=(n(0),n(5)),o=n(43),a=n(1);const s=Object(o.css)({name:"1najbre",styles:"height:32px;.euiSuperSelectControl{border:none;box-shadow:none;background:none;padding-left:0;}"}),c=Object(o.css)({name:"1bmnxg7",styles:"white-space:nowrap"});function u(e){var t;return e.loading?Object(a.jsx)(r.EuiFlexGroup,{alignItems:"center",className:s},Object(a.jsx)(r.EuiFlexItem,null,Object(a.jsx)(r.EuiLoadingSpinner,{size:"s"}))):e.error?Object(a.jsx)(r.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"s",className:s},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiIcon,{type:"warning",color:"danger",size:"s"})),Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiText,{size:"xs",color:"danger"},i.i18n.translate("xpack.observabilityAiAssistant.connectorSelector.error",{defaultMessage:"Failed to load connectors"})))):null!==(t=e.connectors)&&void 0!==t&&t.length?Object(a.jsx)(r.EuiFlexGroup,{className:s,direction:"row",alignItems:"center",gutterSize:"xs",responsive:!1},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiSuperSelect,{compressed:!0,valueOfSelected:e.selectedConnector,options:e.connectors.map((e=>({value:e.id,inputDisplay:Object(a.jsx)(r.EuiFlexGroup,{direction:"row",gutterSize:"s"},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiText,{size:"xs",color:"subdued"},i.i18n.translate("xpack.observabilityAiAssistant.connectorSelector.connectorSelectLabel",{defaultMessage:"Connector:"}))),Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiText,{size:"xs",className:c},e.name))),dropdownDisplay:Object(a.jsx)(r.EuiText,{size:"xs",className:c},e.name)}))),onChange:t=>{e.selectConnector(t)}}))):Object(a.jsx)(r.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"s",className:s},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiText,{size:"xs",color:"warning"},i.i18n.translate("xpack.observabilityAiAssistant.connectorSelector.empty",{defaultMessage:"No connectors"}))))}},function(e,t,n){e.exports=n(15)(8)},function(e,t,n){"use strict";let r;n.d(t,"a",(function(){return r})),function(e){e.executeEsqlQuery="executeEsqlQuery"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n(5),o=n(12),a=n(44),s=n(1);const c=i.i18n.translate("xpack.observabilityAiAssistant.feedbackButtons.em.thanksForYourFeedbackLabel",{defaultMessage:"Thanks for your feedback"});function u({onClickFeedback:e}){const{notifications:t}=Object(a.a)().services,[n,u]=Object(r.useState)(!1);return Object(s.jsx)(o.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",gutterSize:"s"},Object(s.jsx)(o.EuiFlexItem,{grow:!1},Object(s.jsx)(o.EuiText,{color:"subdued",size:"s"},Object(s.jsx)("em",null,i.i18n.translate("xpack.observabilityAiAssistant.insight.feedbackButtons.title",{defaultMessage:"Was this helpful?"})))),Object(s.jsx)(o.EuiFlexItem,{grow:!1},Object(s.jsx)(o.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",gutterSize:"xs"},Object(s.jsx)(o.EuiFlexItem,{grow:!1},Object(s.jsx)(o.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantFeedbackButtonsPositiveButton",color:"success",disabled:n,iconType:"faceHappy",size:"s",onClick:()=>{e("positive"),u(!0),t.toasts.addSuccess(c)}},i.i18n.translate("xpack.observabilityAiAssistant.insight.feedbackButtons.positive",{defaultMessage:"Yes"}))),Object(s.jsx)(o.EuiFlexItem,{grow:!1},Object(s.jsx)(o.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantFeedbackButtonsNegativeButton",color:"danger",disabled:n,iconType:"faceSad",size:"s",onClick:()=>{e("negative"),u(!0),t.toasts.addSuccess(c)}},i.i18n.translate("xpack.observabilityAiAssistant.insight.feedbackButtons.negative",{defaultMessage:"No"}))))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),o=n(12),a=(n(0),n(5)),s=n(1);function c(e){return Object(s.jsx)(o.EuiButtonEmpty,i()({size:"s","data-test-subj":"observabilityAiAssistantRegenerateResponseButton",iconType:"sparkles"},e),a.i18n.translate("xpack.observabilityAiAssistant.regenerateResponseButtonLabel",{defaultMessage:"Regenerate"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),i=n.n(r),o=n(12),a=(n(0),n(5)),s=n(1);function c(e){return Object(s.jsx)(o.EuiButtonEmpty,i()({"data-test-subj":"observabilityAiAssistantStopGeneratingButton",color:"text",iconType:"stop",size:"s"},e),a.i18n.translate("xpack.observabilityAiAssistant.stopGeneratingButtonLabel",{defaultMessage:"Stop generating"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=(n(0),n(5)),o=n(1);function a(){return Object(o.jsx)(r.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(o.jsx)(r.EuiFlexItem,{grow:!1},Object(o.jsx)(r.EuiIcon,{type:"alert",color:"danger",size:"s"})),Object(o.jsx)(r.EuiFlexItem,null,Object(o.jsx)(r.EuiText,{size:"s",color:"danger"},i.i18n.translate("xpack.observabilityAiAssistant.failedLoadingResponseText",{defaultMessage:"Failed to load response"}))))}},function(e,t,n){e.exports=n.p+"268ef3ed8d7e6357bd2128af250b7ca3.png"},function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n(63),i=n(25),o=n(0),a=n.n(o),s=n(27),c=n(43),u=n(44),l=n(1);const d=Object(c.css)({name:"8k4y4e",styles:"width:100%;display:flex;flex-grow:1;padding-top:0;padding-bottom:0;max-block-size:calc(100vh - 96px)"});var f=n(12),p=n(5),g=n(28),b=n(57),m=n.n(b),h=n(36),v=n(62),y=n(2),j=n.n(y);function x(e){return Object(l.jsx)(f.EuiButton,j()({"data-test-subj":"observabilityAiAssistantNewChatButton",fill:!0,iconType:"discuss"},e),p.i18n.translate("xpack.observabilityAiAssistant.newChatButton",{defaultMessage:"New chat"}))}const O=Object(c.css)({name:"13udsys",styles:"height:100%"}),k=Object(c.css)({name:"50zrmy",styles:"text-transform:uppercase"}),w=Object(c.css)({name:"1hs1hlf",styles:"max-height:100%"}),E=Object(c.css)({name:"umwchj",styles:"overflow-y:auto"}),C=Object(c.css)({name:"1eb9m24",styles:"padding-bottom:5px"});function S({selected:e,loading:t,error:n,conversations:r,onClickNewChat:i,onClickDeleteConversation:o}){return Object(l.jsx)(f.EuiPanel,{paddingSize:"s",hasShadow:!1,className:w},Object(l.jsx)(f.EuiFlexGroup,{direction:"column",gutterSize:"none",className:O},Object(l.jsx)(f.EuiFlexItem,{grow:!0,className:E},Object(l.jsx)(f.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(l.jsx)(f.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center"},Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiSpacer,{size:"s"}),Object(l.jsx)(f.EuiText,{className:k,size:"s"},Object(l.jsx)("strong",null,p.i18n.translate("xpack.observabilityAiAssistant.conversationList.title",{defaultMessage:"Previously"})))),t?Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiLoadingSpinner,{size:"s"})):null))),n?Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(l.jsx)(f.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"s"},Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiIcon,{type:"warning",color:"danger"})),Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiText,{size:"s",color:"danger"},p.i18n.translate("xpack.observabilityAiAssistant.conversationList.errorMessage",{defaultMessage:"Failed to load"})))))):null,null!=r&&r.length?Object(l.jsx)(f.EuiFlexItem,{grow:!0},Object(l.jsx)(f.EuiListGroup,{flush:!1,gutterSize:"none"},null==r?void 0:r.map((n=>Object(l.jsx)(f.EuiListGroupItem,{key:n.id,label:n.label,size:"s",isActive:n.id===e,isDisabled:t,href:n.href,wrapText:!0,extraAction:n.id?{iconType:"trash","aria-label":p.i18n.translate("xpack.observabilityAiAssistant.conversationList.deleteConversationIconLabel",{defaultMessage:"Delete"}),onClick:()=>{o(n.id)}}:void 0}))))):null,t||n||null!=r&&r.length?null:Object(l.jsx)(f.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(l.jsx)(f.EuiText,{color:"subdued",size:"s"},p.i18n.translate("xpack.observabilityAiAssistant.conversationList.noConversations",{defaultMessage:"No conversations"}))))),Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiPanel,{paddingSize:"s",hasBorder:!1,hasShadow:!1},Object(l.jsx)(f.EuiFlexGroup,{alignItems:"center"},Object(l.jsx)(f.EuiFlexItem,{grow:!0,className:C},Object(l.jsx)(x,{onClick:i})))))))}var A=n(51),T=n(48),I=n(58),M=n(14),_=n(59),F=n(13),R=n(60),P=n(47),L=n(53);const N=Object(c.css)({name:"qhxz92",styles:"max-width:100%"}),z=Object(c.css)("min-width:250px;width:250px;border-right:solid 1px ",g.euiThemeVars.euiColorLightShade,";","");function B(){var e;const t=Object(I.a)(),n=Object(F.a)(),i=Object(M.a)(),s=Object(_.a)(),c=Object(R.a)(),{path:d}=Object(r.e)("/conversations/*"),{services:{http:g,notifications:b}}=Object(u.a)(),{element:y,confirm:j}=function({title:e,children:t,confirmButtonText:n}){const[r,i]=Object(o.useState)(void 0);return{element:r,confirm:()=>new Promise((r=>{i(Object(l.jsx)(f.EuiConfirmModal,{title:e,onConfirm:()=>{r(!0),i(void 0)},onCancel:()=>{r(!1),i(void 0)},confirmButtonText:n},t))}))}}({title:p.i18n.translate("xpack.observabilityAiAssistant.confirmDeleteConversationTitle",{defaultMessage:"Delete this conversation?"}),children:p.i18n.translate("xpack.observabilityAiAssistant.confirmDeleteConversationContent",{defaultMessage:"This action cannot be undone."}),confirmButtonText:p.i18n.translate("xpack.observabilityAiAssistant.confirmDeleteButtonText",{defaultMessage:"Delete conversation"})}),[x,O]=Object(o.useState)(!1),k=Object(T.a)((({signal:e})=>n.start({signal:e})),[n]),w="conversationId"in d?d.conversationId:void 0,E=Object(o.useRef)(Object(h.v4)()),C=Object(o.useRef)(!1),B=m()(w);w!==B&&!1===C.current&&(E.current=Object(h.v4)()),C.current=!1;const U=function(){const[e,t]=Object(o.useState)(0);return()=>{t((e=>e+1))}}(),D=Object(T.a)((({signal:e})=>n.callApi("POST /internal/observability_ai_assistant/conversations",{signal:e})),[n]),W=Object(o.useMemo)((()=>{var e,t;return[...w?[]:[{id:"",label:P.b}],...(null!==(e=null===(t=D.value)||void 0===t?void 0:t.conversations)&&void 0!==e?e:[]).map((e=>({id:e.conversation.id,label:e.conversation.title,href:c.link("/conversations/{conversationId}",{path:{conversationId:e.conversation.id}})})))]}),[null===(e=D.value)||void 0===e?void 0:e.conversations,w,c]);function G(e,t){e?c.push("/conversations/{conversationId}",{path:{conversationId:e},query:{}}):c.push("/conversations/new",{path:{},query:{}})}return Object(l.jsx)(a.a.Fragment,null,y,Object(l.jsx)(f.EuiFlexGroup,{direction:"row",className:N,gutterSize:"none"},Object(l.jsx)(f.EuiFlexItem,{grow:!1,className:z},Object(l.jsx)(S,{selected:null!=w?w:"",loading:D.loading||x,error:D.error,conversations:W,onClickNewChat:()=>{w?c.push("/conversations/new",{path:{},query:{}}):(E.current=Object(h.v4)(),U())},onClickDeleteConversation:e=>{j().then((async t=>{var r;if(!t)return;O(!0),await n.callApi("DELETE /internal/observability_ai_assistant/conversation/{conversationId}",{params:{path:{conversationId:e}},signal:null});const i=e===w,o=null===(r=D.value)||void 0===r?void 0:r.conversations.find((t=>"id"in t.conversation&&t.conversation.id!==e));i&&G(o?D.value.conversations[0].conversation.id:void 0),D.refresh()})).catch((e=>{b.toasts.addError(e,{title:p.i18n.translate("xpack.observabilityAiAssistant.failedToDeleteConversation",{defaultMessage:"Could not delete conversation"})})})).finally((()=>{O(!1)}))}}),Object(l.jsx)(f.EuiSpacer,{size:"s"})),k.value?null:Object(l.jsx)(f.EuiFlexGroup,{direction:"column",alignItems:"center",gutterSize:"l"},Object(l.jsx)(f.EuiFlexItem,{grow:!1},Object(l.jsx)(f.EuiSpacer,{size:"xl"}),Object(l.jsx)(f.EuiLoadingSpinner,{size:"l"}))),k.value&&Object(l.jsx)(A.b,{value:k.value},Object(l.jsx)(v.a,{key:E.current,currentUser:t,connectors:i,connectorsManagementHref:Object(L.a)(g),initialConversationId:w,knowledgeBase:s,startedFrom:"conversationView",onConversationUpdate:e=>{w||(C.current=!0,G(e.conversation.id)),D.refresh()}}))))}const U={"/":{element:Object(l.jsx)(s.Redirect,{to:"/conversations/new"})},"/conversations":{element:Object(l.jsx)((function({children:e}){const{services:{plugins:{start:{observabilityShared:t}}}}=Object(u.a)(),n=t.navigation.PageTemplate;return Object(l.jsx)(n,{pageSectionProps:{alignment:"horizontalCenter",restrictWidth:!0,contentProps:{className:d}}},e)}),null,Object(l.jsx)(r.a,null)),children:{"/conversations/new":{element:Object(l.jsx)(B,null)},"/conversations/{conversationId}":{params:i.intersection([i.type({path:i.type({conversationId:i.string})}),i.partial({state:i.partial({prevConversationKey:i.string})})]),element:Object(l.jsx)(B,null)},"/conversations":{element:Object(l.jsx)(s.Redirect,{to:"/conversations/new"})}}}},D=Object(r.d)(U)},function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(2),i=n.n(r),o=n(12),a=n(43),s=n(40),c=n.n(s),u=n(0),l=n.n(u),d=n(5),f=n(69),p=n(1);function g({value:e,actionsDisabled:t,onActionClick:n}){const r=Object(o.useEuiTheme)();return Object(p.jsx)(o.EuiPanel,{hasShadow:!1,hasBorder:!1,paddingSize:"s",className:Object(a.css)("background-color:",r.euiTheme.colors.lightestShade,";.euiCodeBlock__pre{margin-bottom:0;padding:",r.euiTheme.size.m,";min-block-size:48px;}.euiCodeBlock__controls{inset-block-start:",r.euiTheme.size.m,";inset-inline-end:",r.euiTheme.size.m,";}","")},Object(p.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(p.jsx)(o.EuiFlexItem,{grow:!1},Object(p.jsx)(o.EuiCodeBlock,{isCopyable:!0,fontSize:"m"},e)),Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(o.EuiFlexGroup,{direction:"row",gutterSize:"s"},Object(p.jsx)(o.EuiFlexItem,{grow:!1},Object(p.jsx)(o.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantEsqlCodeBlockRunThisQueryButton",size:"xs",iconType:"play",onClick:()=>n({type:f.a.executeEsqlQuery,query:e}),disabled:t},d.i18n.translate("xpack.observabilityAiAssistant.runThisQuery",{defaultMessage:"Run this query"})))))))}const b=Object(a.css)("@keyframes blink{0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}}animation:blink ",1,"s infinite;width:10px;height:16px;vertical-align:middle;display:inline-block;background:rgba(0, 0, 0, 0.25);",""),m=()=>Object(p.jsx)("span",{key:"cursor",className:c()(b,"cursor")}),h=" ᠎  ",v=()=>{const e=(t,n)=>{if("children"in t){const n=t;n.children.forEach((t=>{e(t,n)}))}if("text"!==t.type&&"inlineCode"!==t.type&&"code"!==t.type)return;const r=t;if(-1===r.value.indexOf(h))return;r.value=r.value.replace(h,"");const i=n.children.indexOf(r);n.children.splice(i+1,0,{type:"cursor",value:h})};return t=>{e(t)}},y=()=>{const e=(t,n)=>{if("children"in t){const n=t;n.children.forEach((t=>{e(t,n)}))}"code"===t.type&&"esql"===t.lang&&(t.type="esql")};return t=>{e(t)}};function j({loading:e,content:t,onActionClick:n}){const r=Object(a.css)({name:"26bywx",styles:"overflow-wrap:anywhere"}),s=Object(u.useRef)(n);s.current=n;const{parsingPluginList:c,processingPluginList:d}=Object(u.useMemo)((()=>{const t=Object(o.getDefaultEuiMarkdownParsingPlugins)(),n=Object(o.getDefaultEuiMarkdownProcessingPlugins)(),{components:r}=n[1][1];return n[1][1].components={...r,cursor:m,esql:t=>Object(p.jsx)(l.a.Fragment,null,Object(p.jsx)(g,{value:t.value,actionsDisabled:e,onActionClick:s.current}),Object(p.jsx)(o.EuiSpacer,{size:"m"})),table:e=>Object(p.jsx)(l.a.Fragment,null,Object(p.jsx)("div",{className:"euiBasicTable"}," ",Object(p.jsx)("table",i()({className:"euiTable"},e))),Object(p.jsx)(o.EuiSpacer,{size:"m"})),th:e=>{const{children:t,...n}=e;return Object(p.jsx)("th",i()({className:"euiTableHeaderCell"},n),Object(p.jsx)("span",{className:"euiTableCellContent"},Object(p.jsx)("span",{className:"euiTableCellContent__text",title:t},t)))},tr:e=>Object(p.jsx)("tr",i()({className:"euiTableRow"},e)),td:e=>{const{children:t,...n}=e;return Object(p.jsx)("td",i()({className:"euiTableRowCell"},n),Object(p.jsx)("div",{className:"euiTableCellContent euiTableCellContent--truncateText"},Object(p.jsx)("span",{className:"euiTableCellContent__text",title:t},t)))}},{parsingPluginList:[v,y,...t],processingPluginList:n}}),[e]);return Object(p.jsx)(o.EuiText,{size:"s",className:r},Object(p.jsx)(o.EuiMarkdownFormat,{textSize:"s",parsingPluginList:c,processingPluginList:d},`${t}${e?h:""}`))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";const r=n(80),i=n(81),o=n(82);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function c(e,t){return t.decode?i(e):e}function u(e){return Array.isArray(e)?e.sort():"object"==typeof e?u(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===n?n:c(n,e);r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,a]=o(t.decode?i.replace(/\+/g," "):i,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:c(a,t),n(c(e,t),a,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else r[e]=f(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=u(n):e[t]=n,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const t of Object.keys(e))n(t)||(i[t]=e[t]);const o=Object.keys(i);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:c(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=l(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),a=Object.assign(o,e.query);let c=t.stringify(a,n);c&&(c=`?${c}`);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u=`#${s(e.fragmentIdentifier,n)}`),`${r}${c}${u}`}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var r="%[a-f0-9]{2}",i=new RegExp("("+r+")|([^%]+?)","gi"),o=new RegExp("("+r+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function s(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(i)||[],n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),a=0;a<i.length;a++){var c=i[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=n(84)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(38),o=(r=n(0))&&"object"==typeof r&&"default"in r?r.default:r;function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.matchRoutes=function e(t,n,r){return void 0===r&&(r=[]),t.some((function(t){var o=t.path?i.matchPath(n,t):r.length?r[r.length-1].match:i.Router.computeRootMatch(n);return o&&(r.push({route:t,match:o}),t.routes&&e(t.routes,n,r)),o})),r},t.renderRoutes=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?o.createElement(i.Switch,n,e.map((function(e,n){return o.createElement(i.Route,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(a({},n,{},t,{route:e})):o.createElement(e.component,a({},n,t,{route:e}))}})}))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(86),i=n(45);function o(e){return void 0!==e.message?e.message:"Invalid value "+("function"==typeof(t=e.value)?r.getFunctionName(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")+" supplied to "+e.context.map((function(e){return e.key+": "+e.type.name})).join("/");var t}function a(e){return e.map(o)}function s(){return["No errors!"]}t.failure=a,t.success=s,t.PathReporter={report:i.fold(a,s)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(45),s=a.either.map,c=a.either.chain,u=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,r){var i=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new e(r,n.is,(function(e,t){return c(i.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return i.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=u,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,r){for(var i=e.length,o=Array(i+1),a=0;a<i;a++)o[a]=e[a];return o[i]={key:t,type:n,actual:r},o},t.failures=a.left,t.failure=function(e,n,r){return t.failures([{value:e,context:n,message:r}])},t.success=a.right;var l=function(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])},d=function(e){return function(t){return t._tag===e}},f=d("AnyType"),p=d("InterfaceType"),g=d("PartialType"),b=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NullType",n}return i(n,e),n}(u);t.NullType=b,t.nullType=new b,t.null=t.nullType;var m=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="UndefinedType",n}return i(n,e),n}(u);t.UndefinedType=m;var h=new m;t.undefined=h;var v=function(e){function n(){var n=e.call(this,"void",h.is,h.validate,t.identity)||this;return n._tag="VoidType",n}return i(n,e),n}(u);t.VoidType=v,t.voidType=new v,t.void=t.voidType;var y=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return i(n,e),n}(u);t.UnknownType=y,t.unknown=new y;var j=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="StringType",n}return i(n,e),n}(u);t.StringType=j,t.string=new j;var x=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NumberType",n}return i(n,e),n}(u);t.NumberType=x,t.number=new x;var O=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="BooleanType",n}return i(n,e),n}(u);t.BooleanType=O,t.boolean=new O;var k=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyArrayType",n}return i(n,e),n}(u);t.AnyArrayType=k,t.UnknownArray=new k,t.Array=t.UnknownArray;var w=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return i(n,e),n}(u);t.AnyDictionaryType=w,t.UnknownRecord=new w;var E=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="FunctionType",n}return i(n,e),n}(u);t.FunctionType=E,t.Function=new E;var C=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i)||this;return s.type=o,s.predicate=a,s._tag="RefinementType",s}return i(t,e),t}(u);t.RefinementType=C,t.brand=function(e,t,n){return Y(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var S=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.value=o,a._tag="LiteralType",a}return i(t,e),t}(u);t.LiteralType=S,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var r=function(t){return t===e};return new S(n,r,(function(n,i){return r(n)?t.success(e):t.failure(n,i)}),t.identity,e)};var A=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.keys=o,a._tag="KeyofType",a}return i(t,e),t}(u);t.KeyofType=A;var T=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(n){return t.string.is(n)&&T.call(e,n)};return new A(n,r,(function(e,n){return r(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var I=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.runDefinition=o,a._tag="RecursiveType",a}return i(t,e),t}(u);t.RecursiveType=I,Object.defineProperty(I.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,r=function(){return n||((n=t(i)).name=e),n},i=new I(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return i};var M=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ArrayType",a}return i(t,e),t}(u);t.ArrayType=M,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new M(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,r){return c(t.UnknownArray.validate(n,r),(function(n){for(var i=n.length,o=n,s=[],c=0;c<i;c++){var u=n[c],d=e.validate(u,t.appendContext(r,String(c),e,u));if(a.isLeft(d))l(s,d.left);else{var f=d.right;f!==u&&(o===n&&(o=n.slice()),o[c]=f)}}return s.length>0?t.failures(s):t.success(o)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var _=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="InterfaceType",a}return i(t,e),t}(u);t.InterfaceType=_;var F=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},R=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},P=function(e){return"{ "+F(e)+" }"};t.type=function(e,n){void 0===n&&(n=P(e));var r=Object.keys(e),i=r.map((function(t){return e[t]})),s=r.length;return new _(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<s;n++){var o=r[n];if(!T.call(e,o)||!i[n].is(e[o]))return!1}return!0}return!1}),(function(e,n){return c(t.UnknownRecord.validate(e,n),(function(e){for(var c=e,u=[],d=0;d<s;d++){var f=r[d];T.call(c,f)||(c===e&&(c=o({},e)),c[f]=c[f]);var p=c[f],g=i[d],b=g.validate(p,t.appendContext(n,f,g,p));if(a.isLeft(b))l(u,b.left);else{var m=b.right;m!==p&&(c===e&&(c=o({},e)),c[f]=m)}}return u.length>0?t.failures(u):t.success(c)}))}),R(i)?t.identity:function(e){for(var n=o({},e),a=0;a<s;a++){var c=r[a],u=i[a].encode;u!==t.identity&&(n[c]=u(e[c]))}return n},e)},t.interface=t.type;var L=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="PartialType",a}return i(t,e),t}(u);t.PartialType=L;var N=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=N(P(e)));var r=Object.keys(e),i=r.map((function(t){return e[t]})),s=r.length;return new L(n,(function(n){if(t.UnknownRecord.is(n)){for(var i=0;i<s;i++){var o=r[i],a=n[o];if(void 0!==a&&!e[o].is(a))return!1}return!0}return!1}),(function(n,i){return c(t.UnknownRecord.validate(n,i),(function(n){for(var c=n,u=[],d=0;d<s;d++){var f=r[d],p=c[f],g=e[f],b=g.validate(p,t.appendContext(i,f,g,p));if(a.isLeft(b))void 0!==p&&l(u,b.left);else{var m=b.right;m!==p&&(c===n&&(c=o({},n)),c[f]=m)}}return u.length>0?t.failures(u):t.success(c)}))}),R(i)?t.identity:function(e){for(var t=o({},e),n=0;n<s;n++){var a=r[n],c=e[a];void 0!==c&&(t[a]=i[n].encode(c))}return t},e)};var z=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i)||this;return s.domain=o,s.codomain=a,s._tag="DictionaryType",s}return i(t,e),t}(u);t.DictionaryType=z,t.record=function(e,n,r){return void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }"),new z(r,(function(r){return t.UnknownRecord.is(r)?Object.keys(r).every((function(t){return e.is(t)&&n.is(r[t])})):f(n)&&Array.isArray(r)}),(function(r,i){if(t.UnknownRecord.is(r)){for(var o={},s=[],c=Object.keys(r),u=c.length,d=!1,p=0;p<u;p++){var g=c[p],b=r[g],m=e.validate(g,t.appendContext(i,g,e,g));if(a.isLeft(m))l(s,m.left);else{var h=m.right;d=d||h!==g,g=h;var v=n.validate(b,t.appendContext(i,g,n,b));if(a.isLeft(v))l(s,v.left);else{var y=v.right;d=d||y!==b,o[g]=y}}}return s.length>0?t.failures(s):t.success(d?o:r)}return f(n)&&Array.isArray(r)?t.success(r):t.failure(r,i)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var r={},i=Object.keys(t),o=i.length,a=0;a<o;a++){var s=i[a];r[String(e.encode(s))]=n.encode(t[s])}return r},e,n)};var B=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="UnionType",a}return i(t,e),t}(u);t.UnionType=B;var U=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=U(e));var r=ae(e);if(void 0!==r&&e.length>0){var i=r[0],o=r[1],s=o.length,u=function(e){for(var t=0;t<s;t++)if(-1!==o[t].indexOf(e))return t};return new $(n,(function(n){if(t.UnknownRecord.is(n)){var r=u(n[i]);return void 0!==r&&e[r].is(n)}return!1}),(function(n,r){return c(t.UnknownRecord.validate(n,r),(function(o){var a=u(o[i]);if(void 0===a)return t.failure(n,r);var s=e[a];return s.validate(o,t.appendContext(r,String(a),s,o))}))}),R(e)?t.identity:function(t){var r=u(t[i]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return e[r].encode(t)},e,i)}return new B(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,r){for(var i=[],o=0;o<e.length;o++){var s=e[o],c=s.validate(n,t.appendContext(r,String(o),s,n));if(!a.isLeft(c))return t.success(c.right);l(i,c.left)}return t.failures(i)}),R(e)?t.identity:function(t){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.is(t))return o.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var D=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="IntersectionType",a}return i(t,e),t}(u);t.IntersectionType=D;var W=function(e,n){for(var r=!0,i=!0,o=0,a=n;o<a.length;o++)(l=a[o])!==e&&(r=!1),t.UnknownRecord.is(l)&&(i=!1);if(r)return e;if(i)return n[n.length-1];for(var s={},c=0,u=n;c<u.length;c++){var l=u[c];for(var d in l)l[d]===e[d]&&s.hasOwnProperty(d)||(s[d]=l[d])}return s};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var r=e.length;return new D(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,i){for(var o=[],s=[],c=0;c<r;c++){var u=e[c],d=u.validate(n,t.appendContext(i,String(c),u,n));a.isLeft(d)?l(s,d.left):o.push(d.right)}return s.length>0?t.failures(s):t.success(W(n,o))},0===e.length?t.identity:function(t){return W(t,e.map((function(e){return e.encode(t)})))},e)};var G=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.types=o,a._tag="TupleType",a}return i(t,e),t}(u);t.TupleType=G,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var r=e.length;return new G(n,(function(n){return t.UnknownArray.is(n)&&n.length===r&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,i){return c(t.UnknownArray.validate(n,i),(function(n){for(var o=n.length>r?n.slice(0,r):n,s=[],c=0;c<r;c++){var u=n[c],d=e[c],f=d.validate(u,t.appendContext(i,String(c),d,u));if(a.isLeft(f))l(s,f.left);else{var p=f.right;p!==u&&(o===n&&(o=n.slice()),o[c]=p)}}return s.length>0?t.failures(s):t.success(o)}))}),R(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var H=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ReadonlyType",a}return i(t,e),t}(u);t.ReadonlyType=H,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new H(n,e.is,(function(t,n){return s(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var q=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ReadonlyArrayType",a}return i(t,e),t}(u);t.ReadonlyArrayType=q,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var r=t.array(e);return new q(n,r.is,(function(e,t){return s(r.validate(e,t),(function(e){return e}))}),r.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var $=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o)||this;return s.tag=a,s}return i(t,e),t}(B);t.TaggedUnionType=$,t.taggedUnion=function(e,n,r){void 0===r&&(r=U(n));var i=t.union(n,r);return i instanceof $?i:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new $(r,i.is,i.validate,i.encode,n,e))};var V=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.type=o,a._tag="ExactType",a}return i(t,e),t}(u);t.ExactType=V;var K=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return K(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,K(t))}),{})}},J=function(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,i={},o=0;o<n.length;o++){var a=n[o];T.call(t,a)?i[a]=e[a]:r=!0}return r?i:e};t.exact=function(e,n){void 0===n&&(n=function(e){return p(e)?"{| "+F(e.props)+" |}":g(e)?N("{| "+F(e.props)+" |}"):"Exact<"+e.name+">"}(e));var r=K(e);return new V(n,e.is,(function(n,i){return c(t.UnknownRecord.validate(n,i),(function(){return s(e.validate(n,i),(function(e){return J(e,r)}))}))}),(function(t){return e.encode(J(t,r))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var Z=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return i(n,e),n}(u);t.NeverType=Z,t.never=new Z;var X=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return i(n,e),n}(u);t.AnyType=X,t.any=new X,t.Dictionary=t.UnknownRecord;var Q=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="ObjectType",n}return i(n,e),n}(u);function Y(e,n,r){return void 0===r&&(r="("+e.name+" | "+t.getFunctionName(n)+")"),new C(r,(function(t){return e.is(t)&&n(t)}),(function(r,i){return c(e.validate(r,i),(function(e){return n(e)?t.success(e):t.failure(e,i)}))}),e.encode,e,n)}t.ObjectType=Q,t.object=new Q,t.refinement=Y,t.Integer=Y(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;return a.props=o,a._tag="StrictType",a}return i(t,e),t}(u);t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}};var te=function(e){return e.length>0};function ne(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];-1!==t.indexOf(o)&&n.push(o)}return n}function re(e){return"LiteralType"===e._tag}t.emptyTags={};var ie=[];function oe(e){if(-1!==ie.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var r in e.props){var i=e.props[r];re(i)&&(n===t.emptyTags&&(n={}),n[r]=[i.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return oe(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var r=Object.assign({},e);for(var i in n)if(e.hasOwnProperty(i)){var o=ne(e[i],n[i]);if(!te(o)){r=t.emptyTags;break}r[i]=o}else r[i]=n[i];return r}(e,oe(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var r=t.emptyTags;for(var i in e)n.hasOwnProperty(i)&&0===ne(e[i],n[i]).length&&(r===t.emptyTags&&(r={}),r[i]=e[i].concat(n[i]));return r}(e,oe(n))}),oe(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){ie.push(e);var o=oe(e.type);return ie.pop(),o}return t.emptyTags}function ae(e){for(var t=oe(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),o=[t[n]],a=1;a<r;a++){var s=oe(e[a])[n];if(void 0===s)return"continue-keys";if(s.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,s),o.push(s)}return{value:[n,o]}},o=0,a=n;o<a.length;o++){var s=i(a[o]);if("object"==typeof s)return s.value}}t.getTags=oe,t.getIndex=ae},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=n(20),o=r.__importDefault(n(88));t.default=function(e,t){o.default(e,t,i.isDeepEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t,n){var i=r.useRef(void 0);i.current&&n(t,i.current)||(i.current=t),r.useEffect(e,i.current)}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93);n(33),n(64),n(65);var i=r.default({key:"css"}),o=i.flush,a=i.hydrate,s=i.cx,c=i.merge,u=i.getRegisteredStyles,l=i.injectGlobal,d=i.keyframes,f=i.css,p=i.sheet,g=i.cache;t.cache=g,t.css=f,t.cx=s,t.flush=o,t.getRegisteredStyles=u,t.hydrate=a,t.injectGlobal=l,t.keyframes=d,t.merge=c,t.sheet=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),i=n(64),o=n(65);function a(e){return e&&e.__esModule?e:{default:e}}var s=a(r);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function u(e,t,n){var r=[],i=o.getRegisteredStyles(e,r,n);return r.length<2?n:i+t(r)}var l=function e(t){for(var n="",r=0;r<t.length;r++){var i=t[r];if(null!=i){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=e(i);else for(var a in o="",i)i[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=i}o&&(n&&(n+=" "),n+=o)}}return n};t.default=function(e){var t=s.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=i.serializeStyles(n,t.registered,void 0);return o.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return u(t.registered,n,l(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=i.serializeStyles(n,t.registered);c(t,o)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=i.serializeStyles(n,t.registered),a="animation-"+o.name;return c(t,{name:o.name,styles:"@keyframes "+a+"{"+o.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.getRegisteredStyles.bind(null,t.registered),merge:u.bind(null,t.registered,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(95),i=n(97),o=n(99);function a(e){return e&&e.__esModule?e:{default:e}}var s=a(r),c=a(i),u=/[A-Z]|^ms/g,l=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!=typeof e},p=a(o).default((function(e){return d(e)?e:e.replace(u,"-$&").toLowerCase()})),g=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(l,(function(e,t,n){return m={name:t,styles:n,next:m},t}))}return 1===c.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function b(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return m={name:n.name,styles:n.styles,next:m},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)m={name:r.name,styles:r.styles,next:m},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=b(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":f(a)&&(r+=p(o)+":"+g(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=b(e,t,a);switch(o){case"animation":case"animationName":r+=p(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var c=0;c<a.length;c++)f(a[c])&&(r+=p(o)+":"+g(o,a[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=m,o=n(e);return m=i,b(e,t,o)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var m,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";m=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=b(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=b(n,t,e[a]),r&&(i+=o[a]);h.lastIndex=0;for(var c,u="";null!==(c=h.exec(i));)u+="-"+c[1];return{name:s.default(i)+u,styles:i,next:m}}},function(e,t,n){"use strict";e.exports=n(96)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}},function(e,t,n){"use strict";e.exports=n(98)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";e.exports=n(100)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof document,i=function(e,t,n){var i=e.key+"-"+t.name;(!1===n||!1===r&&void 0!==e.compat)&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};t.getRegisteredStyles=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r},t.insertStyles=function(e,t,n){i(e,t,n);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",s=t;do{var c=e.insert(t===s?"."+o:"",s,e.sheet,!0);r||void 0===c||(a+=c),s=s.next}while(void 0!==s);if(!r&&0!==a.length)return a}},t.registerStyles=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(8);function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=o(r),s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},s(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},f=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},p="object"==typeof d&&d&&d.Object===Object&&d,g="object"==typeof self&&self&&self.Object===Object&&self,b=p||g||Function("return this")(),m=b,h=/\s/,v=/^\s+/,y=b.Symbol,j=y,x=Object.prototype,O=x.hasOwnProperty,k=x.toString,w=j?j.toStringTag:void 0,E=Object.prototype.toString,C=function(e){var t=O.call(e,w),n=e[w];try{e[w]=void 0;var r=!0}catch(e){}var i=k.call(e);return r&&(t?e[w]=n:delete e[w]),i},S=y?y.toStringTag:void 0,A=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":S&&S in Object(e)?C(e):function(e){return E.call(e)}(e)},T=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&h.test(e.charAt(t)););return t}(e)+1).replace(v,""):e},I=f,M=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,F=/^0o[0-7]+$/i,R=parseInt,P=f,L=function(){return m.Date.now()},N=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==A(e)}(e))return NaN;if(I(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=I(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=T(e);var n=_.test(e);return n||F.test(e)?R(e.slice(2),n?2:8):M.test(e)?NaN:+e},z=Math.max,B=Math.min,U=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function b(){var e=L();if(g(e))return m(e);s=setTimeout(b,function(e){var n=t-(e-c);return d?B(n,o-(e-u)):n}(e))}function m(e){return s=void 0,f&&r?p(e):(r=i=void 0,a)}function h(){var e=L(),n=g(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(b,t),l?p(e):a}(c);if(d)return clearTimeout(s),s=setTimeout(b,t),p(c)}return void 0===s&&(s=setTimeout(b,t)),a}return t=N(t)||0,P(n)&&(l=!!n.leading,o=(d="maxWait"in n)?z(N(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),h.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},h.flush=function(){return void 0===s?a:m(L())},h},D=U,W=f,G=function(e,t,n,r){switch(t){case"debounce":return U(e,n,r);case"throttle":return function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return W(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),D(e,t,{leading:r,maxWait:t,trailing:i})}(e,n,r);default:return e}},H=function(e){return"function"==typeof e},q=function(){return"undefined"==typeof window},$=function(e){return e instanceof Element||e instanceof HTMLDocument},V=function(e,t,n,r){return function(i){var o=i.width,a=i.height;t((function(t){return t.width===o&&t.height===a||t.width===o&&!r||t.height===a&&!n?t:(e&&H(e)&&e(o,a),{width:o,height:a})}))}},K=function(e){function t(t){var n=e.call(this,t)||this;n.cancelHandler=function(){n.resizeHandler&&n.resizeHandler.cancel&&(n.resizeHandler.cancel(),n.resizeHandler=null)},n.attachObserver=function(){var e=n.props,t=e.targetRef,r=e.observerOptions;if(!q()){t&&t.current&&(n.targetRef.current=t.current);var i=n.getElement();i&&(n.observableElement&&n.observableElement===i||(n.observableElement=i,n.resizeObserver.observe(i,r)))}},n.getElement=function(){var e=n.props,t=e.querySelector,r=e.targetDomEl;if(q())return null;if(t)return document.querySelector(t);if(r&&$(r))return r;if(n.targetRef&&$(n.targetRef.current))return n.targetRef.current;var o=i.findDOMNode(n);if(!o)return null;switch(n.getRenderType()){case"renderProp":case"childFunction":case"child":case"childArray":return o;default:return o.parentElement}},n.createResizeHandler=function(e){var t=n.props,r=t.handleWidth,i=void 0===r||r,o=t.handleHeight,a=void 0===o||o,s=t.onResize;if(i||a){var c=V(s,n.setState.bind(n),i,a);e.forEach((function(e){var t=e&&e.contentRect||{},r=t.width,i=t.height;!n.skipOnMount&&!q()&&c({width:r,height:i}),n.skipOnMount=!1}))}},n.getRenderType=function(){var e=n.props,t=e.render,i=e.children;return H(t)?"renderProp":H(i)?"childFunction":r.isValidElement(i)?"child":Array.isArray(i)?"childArray":"parent"};var o=t.skipOnMount,a=t.refreshMode,s=t.refreshRate,c=void 0===s?1e3:s,u=t.refreshOptions;return n.state={width:void 0,height:void 0},n.skipOnMount=o,n.targetRef=r.createRef(),n.observableElement=null,q()||(n.resizeHandler=G(n.createResizeHandler,a,c,u),n.resizeObserver=new window.ResizeObserver(n.resizeHandler)),n}return c(t,e),t.prototype.componentDidMount=function(){this.attachObserver()},t.prototype.componentDidUpdate=function(){this.attachObserver()},t.prototype.componentWillUnmount=function(){q()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},t.prototype.render=function(){var e,t=this.props,n=t.render,i=t.children,o=t.nodeType,s=void 0===o?"div":o,c=this.state,u={width:c.width,height:c.height,targetRef:this.targetRef};switch(this.getRenderType()){case"renderProp":return n&&n(u);case"childFunction":return(e=i)(u);case"child":if((e=i).type&&"string"==typeof e.type){var d=l(u,["targetRef"]);return r.cloneElement(e,d)}return r.cloneElement(e,u);case"childArray":return(e=i).map((function(e){return!!e&&r.cloneElement(e,u)}));default:return a.createElement(s,null)}},t}(r.PureComponent),J=q()?r.useEffect:r.useLayoutEffect;t.default=K,t.useResizeDetector=function(e){void 0===e&&(e={});var t=e.skipOnMount,n=void 0!==t&&t,i=e.refreshMode,o=e.refreshRate,a=void 0===o?1e3:o,s=e.refreshOptions,c=e.handleWidth,l=void 0===c||c,d=e.handleHeight,f=void 0===d||d,p=e.targetRef,g=e.observerOptions,b=e.onResize,m=r.useRef(n),h=r.useRef(null),v=null!=p?p:h,y=r.useRef(),j=r.useState({width:void 0,height:void 0}),x=j[0],O=j[1];return J((function(){if(!q()){var e=V(b,O,l,f);y.current=G((function(t){(l||f)&&t.forEach((function(t){var n=t&&t.contentRect||{},r=n.width,i=n.height;!m.current&&!q()&&e({width:r,height:i}),m.current=!1}))}),i,a,s);var t=new window.ResizeObserver(y.current);return v.current&&t.observe(v.current,g),function(){t.disconnect();var e=y.current;e&&e.cancel&&e.cancel()}}}),[i,a,s,l,f,b,g,v.current]),u({ref:v},x)},t.withResizeDetector=function(e,t){void 0===t&&(t={});var n=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.ref=r.createRef(),e}return c(i,n),i.prototype.render=function(){var n=this.props,r=n.forwardedRef,i=l(n,["forwardedRef"]),o=null!=r?r:this.ref;return a.createElement(K,u({},t,{targetRef:o}),a.createElement(e,u({targetRef:o},i)))},i}(r.Component);function i(e,t){return a.createElement(n,u({},e,{forwardedRef:t}))}var o=e.displayName||e.name;return i.displayName="withResizeDetector(".concat(o,")"),r.forwardRef(i)}}).call(this,n(103))},function(e,t,n){e.exports=n(15)(191)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t){void 0===t&&(t=0);var n=r.useRef(!1),i=r.useRef(),o=r.useRef(e),a=r.useCallback((function(){return n.current}),[]),s=r.useCallback((function(){n.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout((function(){n.current=!0,o.current()}),t)}),[t]),c=r.useCallback((function(){n.current=null,i.current&&clearTimeout(i.current)}),[]);return r.useEffect((function(){o.current=e}),[e]),r.useEffect((function(){return s(),c}),[t]),[a,c,s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t){var n=r.useRef((function(){}));r.useEffect((function(){n.current=e})),r.useEffect((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}}])]);