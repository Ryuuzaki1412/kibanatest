/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,o=t[0],s=t[1],a=0,u=[];a<o.length;a++)i=o[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={1:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"observabilityAIAssistant.chunk."+e+".js"}(e);var c=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.observabilityAIAssistant_bundle_jsonpfunction=window.observabilityAIAssistant_bundle_jsonpfunction||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var c=s;i(i.s=21)}([function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,n){e.exports=n(15)(3)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0);const i=Object(r.createContext)(void 0),o=i.Provider},function(e,t,n){"use strict";let r,i,o;n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),function(e){e.System="system",e.Assistant="assistant",e.User="user",e.Function="function",e.Elastic="elastic"}(r||(r={})),function(e){e.AssistantSummarization="assistant_summarization",e.UserEntry="user_entry",e.Elastic="elastic"}(i||(i={})),function(e){e.System="system",e.User="user",e.All="all"}(o||(o={}))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(15)(2)},function(e,t,n){"use strict";var r=n(4);n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return r.c}))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return b}));var r=n(0),i=n.n(r),o=n(12),s=n(1),a={name:"1azakc",styles:"text-align:center"};const c=()=>{const e=a;return Object(s.jsx)("div",{css:e},Object(s.jsx)(o.EuiLoadingSpinner,null))},u=e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey,l=(e,t)=>{let n=e;do{var r,i;if("a"===(null===(r=n)||void 0===r?void 0:r.tagName.toLowerCase()))return n;const e=null===(i=n)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;n=e}while(parent||parent!==document.body||parent!==t)};var p=n(2),d=n.n(p),f=n(11);const b=(e,t=Object(s.jsx)(c,null))=>i.a.forwardRef(((n,i)=>Object(s.jsx)(f.KibanaErrorBoundaryProvider,{analytics:n.analytics},Object(s.jsx)(f.KibanaErrorBoundary,null,Object(s.jsx)(r.Suspense,{fallback:t},Object(s.jsx)(e,d()({},n,{ref:i})))))))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n(3);function o(){const e=Object(r.useContext)(i.a);if(!e)throw new Error("ObservabilityAIAssistantContext not set. Did you wrap your component in `<ObservabilityAIAssistantProvider/>`?");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(0),i=n(18),o=n.n(i),s=n(13);function a(){return c(Object(s.a)())}function c(e){var t;const[n,i]=Object(r.useState)(void 0),[s,a]=o()("xpack.observabilityAiAssistant.lastUsedConnector",""),[c,u]=Object(r.useState)(!1),[l,p]=Object(r.useState)(void 0),d=Object(r.useMemo)((()=>new AbortController),[]),f=Object(r.useCallback)((async()=>{u(!0),e.callApi("GET /internal/observability_ai_assistant/connectors",{signal:d.signal}).then((e=>{i(e),a((t=>t&&-1===e.findIndex((e=>e.id===t))?"":t)),p(void 0)})).catch((e=>{p(e),i(void 0)})).finally((()=>{u(!1)}))}),[e,d.signal,a]);return Object(r.useEffect)((()=>(f(),()=>{d.abort()})),[e,d,f,a]),{connectors:n,loading:c,error:l,selectedConnector:s||(null==n||null===(t=n[0])||void 0===t?void 0:t.id),selectConnector:e=>{a(e)},reloadConnectors:()=>{f()}}}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));const r={"@timestamp":{type:"text",_meta:{description:"The timestamp of the message."}},message:{properties:{content:{type:"text",_meta:{description:"The response generated by the LLM.",optional:!0}},name:{type:"text",_meta:{description:"The name of the function that was executed.",optional:!0}},role:{type:"text",_meta:{description:"The actor that generated the response."}},data:{type:"text",_meta:{description:"",optional:!0}},function_call:{_meta:{description:"The function call that was executed.",optional:!0},properties:{name:{type:"text",_meta:{description:"The name of the function that was executed.",optional:!1}},arguments:{type:"text",_meta:{description:"The arguments that were used when executing the function.",optional:!0}},trigger:{type:"text",_meta:{description:"The actor which triggered the execution of this function."}}}}}}},i="observability_ai_assistant_chat_feedback",o="observability_ai_assistant_insight_feedback",s="observability_ai_assistant_user_sent_prompt_in_chat",a=[{eventType:i,schema:{messageWithFeedback:{properties:{message:{properties:r},feedback:{type:"text",_meta:{description:"Whether the user has deemed this response useful or not"}}}},conversation:{properties:{"@timestamp":{type:"text",_meta:{description:"The timestamp of the conversation."}},user:{properties:{id:{type:"text",_meta:{description:"The id of the user.",optional:!0}},name:{type:"text",_meta:{description:"The name of the user."}}}},conversation:{properties:{id:{type:"text",_meta:{description:"The id of the conversation."}},title:{type:"text",_meta:{description:"The title of the conversation."}},last_updated:{type:"text",_meta:{description:"The timestamp of the last message in the conversation."}}}},messages:{type:"array",items:{properties:r},_meta:{description:"The messages in the conversation."}},labels:{type:"pass_through",_meta:{description:"The labels of the conversation."}},numeric_labels:{type:"pass_through",_meta:{description:"The numeric labels of the conversation."}},namespace:{type:"text",_meta:{description:"The namespace of the conversation."}},public:{type:"boolean",_meta:{description:"Whether the conversation is public or not."}}}}}},{eventType:o,schema:{feedback:{type:"text",_meta:{description:"Whether the user has deemed this response useful or not"}},message:{properties:r}}},{eventType:s,schema:r}],c={[i]:i,[o]:o,[s]:s},u=e=>{a.forEach((t=>{e.registerEventType(t)}))};function l(e,t){e.reportEvent(t.type,t.payload)}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(20),o=function(){};t.default=function(e,t,n){if(!i.isClient)return[t,o,o];if(!e)throw new Error("useLocalStorage key may not be falsy");var s=n?n.raw?function(e){return e}:n.deserializer:JSON.parse,a=r.useState((function(){try{var r=n?n.raw?String:n.serializer:JSON.stringify,i=localStorage.getItem(e);return null!==i?s(i):(t&&localStorage.setItem(e,r(t)),t)}catch(e){return t}})),c=a[0],u=a[1],l=r.useCallback((function(t){try{var r="function"==typeof t?t(c):t;if(void 0===r)return;var i;i=n?n.raw?"string"==typeof r?r:JSON.stringify(r):n.serializer?n.serializer(r):JSON.stringify(r):JSON.stringify(r),localStorage.setItem(e,i),u(s(i))}catch(e){}}),[e,u]),p=r.useCallback((function(){try{localStorage.removeItem(e),u(void 0)}catch(e){}}),[e,u]);return[c,l,p]}},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=n(19).__importDefault(n(23));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},function(e,t,n){n(22),__kbnBundles__.define("plugin/observabilityAIAssistant/public",n,24)},function(e,t,n){n.p=window.__kbnPublicPath__.observabilityAIAssistant},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!("_owner"===s&&t.$$typeof||e(t[s],n[s])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";n.r(t),n.d(t,"MessageRole",(function(){return g.b})),n.d(t,"KnowledgeBaseEntryRole",(function(){return g.a})),n.d(t,"plugin",(function(){return x}));var r=n(2),i=n.n(r),o=n(6),s=n.n(o),a=n(0),c=n.n(a),u=n(8),l=n.n(u),p=n(10),d=n(5),f=n(17),b=n(9);function _({analytics:e,coreStart:t,enabled:r,licenseStart:i,securityStart:o,shareStart:s}){const a=(c=t,(e,t)=>{const{params:n}=t,{method:r,pathname:i,version:o}=function(e,t={}){const{method:n,pathname:r,version:i}=function(e){var t;const n=e.split(" "),r=n[0].trim().toLowerCase(),i=n[1].trim(),o=null===(t=n[2])||void 0===t?void 0:t.trim();if(!["get","post","put","delete"].includes(r))throw new Error(`Endpoint ${e} was not prefixed with a valid HTTP method`);if(!o&&i.startsWith("/api"))throw new Error(`Missing version for public endpoint ${e}`);return{method:r,pathname:i,version:o}}(e);return{method:n,pathname:Object.keys(t).reduce(((e,n)=>e.replace(`{${n}}`,t[n])),r),version:i}}(e,null==n?void 0:n.path);return c.http[r](i,{...t,body:n&&n.body?JSON.stringify(n.body):void 0,query:null==n?void 0:n.query,version:o})});var c;const u=[];return{isEnabled:()=>r,register:e=>{u.push(e)},start:async({signal:t})=>{const r=await n.e(4).then(n.bind(null,113));return await r.createChatService({analytics:e,client:a,signal:t,registrations:u})},callApi:a,getCurrentUser:()=>o.authc.getCurrentUser(),getLicense:()=>i.license$,getLicenseManagementLocator:()=>s}}var h=n(14),y=n(16),v=n(3),m=n(1);class plugin_ObservabilityAIAssistantPlugin{constructor(e){s()(this,"logger",void 0),s()(this,"service",void 0),this.logger=e.logger.get()}setup(e,t){return e.application.register({id:"observabilityAIAssistant",title:d.i18n.translate("xpack.observabilityAiAssistant.appTitle",{defaultMessage:"Observability AI Assistant"}),euiIconType:"logoObservability",appRoute:"/app/observabilityAIAssistant",category:p.DEFAULT_APP_CATEGORIES.observability,navLinkStatus:p.AppNavLinkStatus.hidden,deepLinks:[{id:"conversations",title:d.i18n.translate("xpack.observabilityAiAssistant.conversationsDeepLinkTitle",{defaultMessage:"Conversations"}),path:"/conversations/new"}],mount:async t=>{const[{Application:r},[o,s]]=await Promise.all([Promise.all([n.e(0),n.e(2)]).then(n.bind(null,110)),e.getStartServices()]);return l.a.render(Object(m.jsx)(r,i()({},t,{service:this.service,coreStart:o,pluginsStart:s})),t.element),()=>{l.a.unmountComponentAtNode(t.element)}}}),Object(y.b)(e.analytics),{}}start(e,t){const r=this.service=_({analytics:e.analytics,coreStart:e,enabled:!0===e.application.capabilities.observabilityAIAssistant.show,licenseStart:t.licensing,securityStart:t.security,shareStart:t.share});r.register((async({registerRenderFunction:e})=>(await n.e(3).then(n.bind(null,111))).registerFunctions({service:r,pluginsStart:t,registerRenderFunction:e})));const o=(e,t)=>c.a.forwardRef(((n,o)=>Object(m.jsx)(f.KibanaContextProvider,{services:t},Object(m.jsx)(v.b,{value:r},Object(m.jsx)(e,i()({},n,{ref:o})))))),s={...e,plugins:{start:t}},u=r.isEnabled();return{service:r,useGenAIConnectors:()=>Object(h.b)(r),ObservabilityAIAssistantContextualInsight:u?Object(b.c)(o(Object(a.lazy)((()=>Promise.all([n.e(0),n.e(6)]).then(n.bind(null,112)).then((e=>({default:e.Insight}))))),s)):null,ObservabilityAIAssistantActionMenuItem:u?Object(b.c)(o(Object(a.lazy)((()=>Promise.all([n.e(0),n.e(5)]).then(n.bind(null,109)).then((e=>({default:e.ObservabilityAIAssistantActionMenuItem}))))),s)):null}}}var g=n(7);const x=e=>new plugin_ObservabilityAIAssistantPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.IoTs},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.MonacoBarePluginApi},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t){e.exports=__kbnSharedDeps__.ReactRouter},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/actions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);