/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[2],Array(38).concat([function(e,t,s){"use strict";var a,i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),n=[];function r(e){for(var t=-1,s=0;s<n.length;s++)if(n[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},a=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=r(u),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(n[d].references++,n[d].updater(m)):n.push({identifier:u,updater:j(m,t),references:1}),a.push(u)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,s,a){var i=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var n=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(n,r[t]):e.appendChild(n)}}function m(e,t,s){var a=s.css,i=s.media,n=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,p=0;function j(e,t){var s,a,i;if(t.singleton){var n=p++;s=g||(g=l(t)),a=d.bind(null,s,n,!1),i=d.bind(null,s,n,!0)}else s=l(t),a=m.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var s=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var i=r(s[a]);n[i].references--}for(var l=o(e,t),c=0;c<s.length;c++){var u=r(s[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}s=l}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,a,i,n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(i," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(l).concat([o]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(i[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);a&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i=!1,n={};t.default=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];var o=[],l=[],c=function(e){var t=a.createContext(n);i&&e&&(t.displayName=e),o.push(t),l.push(function(e){return function(){var t=a.useContext(e);if(i&&t===n){var s=e.displayName?"The context consumer of "+e.displayName+" must be wrapped with its corresponding Provider":"Component must be wrapped with Provider.";console.warn(s)}return t}}(t))};s.length?s.forEach((function(e){return c(e.name)})):c(e.name);var u=function(t){for(var i=t.children,n=function(e,t){if(null==e)return{};var s,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||(i[s]=e[s]);return i}(t,["children"]),r=e(n),l=i,c=0;c<o.length;c+=1){var u=o[c],d=s[c]||function(e){return e};l=a.createElement(u.Provider,{value:d(r)},l)}return l};return i&&e.name&&(u.displayName="Constate"),[u].concat(l)}},function(e,t,s){var a,i,n,r,o;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */r=this,o=function(e){var t=!1,s=!1,a=!1,i=!1,n="escape years months weeks days hours minutes seconds milliseconds general".split(" "),r=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function o(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function l(e){for(var t="";e;)t+="0",e-=1;return t}function c(e,t){var s=e+"+"+x(y(t).sort(),(function(e){return e+":"+t[e]})).join(",");return c.cache[s]||(c.cache[s]=Intl.NumberFormat(e,t)),c.cache[s]}function u(e,t,n){var r,o,d,m=t.useToLocaleString,g=t.useGrouping,p=g&&t.grouping.slice(),j=t.maximumSignificantDigits,b=t.minimumIntegerDigits||1,x=t.fractionDigits||0,h=t.groupingSeparator,f=t.decimalSeparator;if(m&&n){var O,v={minimumIntegerDigits:b,useGrouping:g};return x&&(v.maximumFractionDigits=x,v.minimumFractionDigits=x),j&&e>0&&(v.maximumSignificantDigits=j),a?(i||((O=M({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),c(n,v).format(e)):(s||((O=M({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),e.toLocaleString(n,v))}var E=(j?e.toPrecision(j+1):e.toFixed(x+1)).split("e");d=E[1]||"",o=(E=E[0].split("."))[1]||"";var y=(r=E[0]||"").length,k=o.length,S=y+k,_=r+o;(j&&S===j+1||!j&&k===x+1)&&((_=function(e){for(var t=e.split("").reverse(),s=0,a=!0;a&&s<t.length;)s?"9"===t[s]?t[s]="0":(t[s]=(parseInt(t[s],10)+1).toString(),a=!1):(parseInt(t[s],10)<5&&(a=!1),t[s]="0"),s+=1;return a&&t.push("1"),t.reverse().join("")}(_)).length===S+1&&(y+=1),k&&(_=_.slice(0,-1)),r=_.slice(0,y),o=_.slice(y)),j&&(o=o.replace(/0*$/,""));var T=parseInt(d,10);T>0?o.length<=T?(r+=o+=l(T-o.length),o=""):(r+=o.slice(0,T),o=o.slice(T)):T<0&&(o=l(Math.abs(T)-r.length)+r+o,r="0"),j||((o=o.slice(0,x)).length<x&&(o+=l(x-o.length)),r.length<b&&(r=l(b-r.length)+r));var w,C="";if(g)for(E=r;E.length;)p.length&&(w=p.shift()),C&&(C=h+C),C=E.slice(-w)+C,E=E.slice(0,-w);else C=r;return o&&(C=C+f+o),C}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}c.cache={};var m={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,s){return 1===t&&null===s?e:e+e}};function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){return"[object Object]"===Object.prototype.toString.call(e)}function j(e,t){var s,a=0,i=e&&e.length||0;for("function"!=typeof t&&(s=t,t=function(e){return e===s});a<i;){if(t(e[a]))return e[a];a+=1}}function b(e,t){var s=0,a=e.length;if(e&&a)for(;s<a;){if(!1===t(e[s],s))return;s+=1}}function x(e,t){var s=0,a=e.length,i=[];if(!e||!a)return i;for(;s<a;)i[s]=t(e[s],s),s+=1;return i}function h(e,t){return x(e,(function(e){return e[t]}))}function f(e){var t=[];return b(e,(function(e){e&&t.push(e)})),t}function O(e){var t=[];return b(e,(function(e){j(t,e)||t.push(e)})),t}function v(e,t){var s=[];return b(e,(function(e){b(t,(function(t){e===t&&s.push(e)}))})),O(s)}function E(e,t){var s=[];return b(e,(function(a,i){if(!t(a))return s=e.slice(i),!1})),s}function M(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function y(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}function k(e,t){var s=0,a=e.length;if(!e||!a)return!1;for(;s<a;){if(!0===t(e[s],s))return!0;s+=1}return!1}function S(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function _(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function T(){var e,t=[].slice.call(arguments),s={};if(b(t,(function(t,a){if(!a){if(!g(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?p(t)&&M(s,t):s.precision=t:s.template=t})),!e||!e.length)return[];s.returnMomentTypes=!0;var a,i=x(e,(function(e){return e.format(s)})),r=v(n,O(h((a=[],b(i,(function(e){a=a.concat(e)})),a),"type"))),o=s.largest;return o&&(r=r.slice(0,o)),s.returnMomentTypes=!1,s.outputTypes=r,x(e,(function(e){return e.format(s)}))}function w(){var s=[].slice.call(arguments),i=M({},this.format.defaults),l=this.asMilliseconds(),c=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(l=0,c=0);var S=l<0,_=e.duration(Math.abs(l),"milliseconds"),T=e.duration(Math.abs(c),"months");b(s,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?p(e)&&M(i,e):i.precision=e:i.template=e}));var w={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},C={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=n;var I=function(e){return j(n,(function(t){return C[t].test(e)}))},L=new RegExp(x(n,(function(e){return C[e].source})).join("|"),"g");i.duration=this;var F="function"==typeof i.template?i.template.apply(i):i.template,P=i.outputTypes,N=i.returnMomentTypes,D=i.largest,R=[];P||(g(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&b(i.stopTrim.match(L),(function(e){var t=I(e);"escape"!==t&&"general"!==t&&R.push(t)})));var A=e.localeData();A||(A={}),b(y(m),(function(e){"function"!=typeof m[e]?A["_"+e]||(A["_"+e]=m[e]):A[e]||(A[e]=m[e])})),b(y(A._durationTimeTemplates),(function(e){F=F.replace("_"+e+"_",A._durationTimeTemplates[e])}));var z=i.userLocale||e.locale(),B=i.useLeftUnits,V=i.usePlural,U=i.precision,$=i.forceLength,G=i.useGrouping,q=i.trunc,H=i.useSignificantDigits&&U>0,W=H?i.precision:0,K=W,J=i.minValue,Y=!1,Q=i.maxValue,X=!1,Z=i.useToLocaleString,ee=i.groupingSeparator,te=i.decimalSeparator,se=i.grouping;Z=Z&&(t||a);var ae=i.trim;g(ae)&&(ae=ae.join(" ")),null===ae&&(D||Q||H)&&(ae="all"),null!==ae&&!0!==ae&&"left"!==ae&&"right"!==ae||(ae="large"),!1===ae&&(ae="");var ie=function(e){return e.test(ae)},ne=/both/,re=/^all|[^sm]all/,oe=D>0||k([/large/,ne,re],ie),le=k([/small/,ne,re],ie),ce=k([/mid/,re],ie),ue=k([/final/,re],ie),de=x(F.match(L),(function(e,t){var s=I(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==s&&"general"!==s&&R.push(s)),{index:t,length:e.length,text:"",token:"escape"===s?e.replace(C.escape,"$1"):e,type:"escape"===s||"general"===s?null:s}})),me={index:0,length:0,token:"",text:"",type:null},ge=[];B&&de.reverse(),b(de,(function(e){if(e.type)return(me.type||me.text)&&ge.push(me),void(me=e);B?me.text=e.token+me.text:me.text+=e.token})),(me.type||me.text)&&ge.push(me),B&&ge.reverse();var pe=v(n,O(f(h(ge,"type"))));if(!pe.length)return h(ge,"text").join("");pe=x(pe,(function(e,t){var s,a=t+1===pe.length,n=!t;s="years"===e||"months"===e?T.as(e):_.as(e);var r=Math.floor(s),o=s-r,l=j(ge,(function(t){return e===t.type}));return n&&Q&&s>Q&&(X=!0),a&&J&&Math.abs(i.duration.as(e))<J&&(Y=!0),n&&null===$&&l.length>1&&($=!0),_.subtract(r,e),T.subtract(r,e),{rawValue:s,wholeValue:r,decimalValue:a?o:0,isSmallest:a,isLargest:n,type:e,tokenLength:l.length}}));var je,be=q?Math.floor:Math.round,xe=function(e,t){var s=Math.pow(10,t);return be(e*s)/s},he=!1,fe=!1,Oe=function(e,t){var s={useGrouping:G,groupingSeparator:ee,decimalSeparator:te,grouping:se,useToLocaleString:Z};return H&&(W<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(s.maximumSignificantDigits=W,e.significantDigits=W)),X&&!fe&&(e.isLargest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),Y&&!fe&&(e.isSmallest?(e.wholeValue=J,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?U<0?e.value=xe(e.wholeValue,U):0===U?e.value=be(e.wholeValue+e.decimalValue):H?(e.value=q?xe(e.rawValue,W-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(W-=e.wholeValue.toString().length)):(s.fractionDigits=U,e.value=q?e.wholeValue+xe(e.decimalValue,U):e.wholeValue+e.decimalValue):H&&e.wholeValue?(e.value=Math.round(xe(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),W-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&($||he)&&(s.minimumIntegerDigits=e.tokenLength,fe&&s.maximumSignificantDigits<e.tokenLength&&delete s.maximumSignificantDigits),!he&&(e.value>0||""===ae||j(R,e.type)||j(P,e.type))&&(he=!0),e.formattedValue=u(e.value,s,z),s.useGrouping=!1,s.decimalSeparator=".",e.formattedValueEn=u(e.value,s,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((pe=f(pe=x(pe,Oe))).length>1){var ve=function(e){return j(pe,(function(t){return t.type===e}))};b(r,(function(e){var t=ve(e.type);t&&b(e.targets,(function(e){var s=ve(e.type);s&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,s.rawValue+=1,s.wholeValue+=1,s.decimalValue=0,s.formattedValueEn=s.wholeValue.toString(),fe=!0)}))}))}return fe&&(he=!1,W=K,pe=f(pe=x(pe,Oe))),!P||X&&!i.trim?(oe&&(pe=E(pe,(function(e){return!e.isSmallest&&!e.wholeValue&&!j(R,e.type)}))),D&&pe.length&&(pe=pe.slice(0,D)),le&&pe.length>1&&(je=function(e){return!e.wholeValue&&!j(R,e.type)&&!e.isLargest},pe=E(pe.slice().reverse(),je).reverse()),ce&&(pe=f(pe=x(pe,(function(e,t){return t>0&&t<pe.length-1&&!e.wholeValue?null:e})))),!ue||1!==pe.length||pe[0].wholeValue||!q&&pe[0].isSmallest&&pe[0].rawValue<J||(pe=[])):pe=f(pe=x(pe,(function(e){return j(P,(function(t){return e.type===t}))?e:null}))),N?pe:(b(ge,(function(e){var t=w[e.type],s=j(pe,(function(t){return t.type===e.type}));if(t&&s){var a=s.formattedValueEn.split(".");a[0]=parseInt(a[0],10),a[1]?a[1]=parseFloat("0."+a[1],10):a[1]=null;var i=A.durationPluralKey(t,a[0],a[1]),n=function(e,t){var s=[];return b(y(t),(function(a){if("_durationLabels"===a.slice(0,15)){var i=a.slice(15).toLowerCase();b(y(t[a]),(function(n){n.slice(0,1)===e&&s.push({type:i,key:n,label:t[a][n]})}))}})),s}(t,A),r=!1,l={};b(A._durationLabelTypes,(function(t){var s=j(n,(function(e){return e.type===t.type&&e.key===i}));s&&(l[s.type]=s.label,o(e.text,t.string)&&(e.text=e.text.replace(t.string,s.label),r=!0))})),V&&!r&&(n.sort(d),b(n,(function(t){return l[t.type]===t.label?!o(e.text,t.label)&&void 0:o(e.text,t.label)?(e.text=e.text.replace(t.label,l[t.type]),!1):void 0})))}})),(ge=x(ge,(function(e){if(!e.type)return e.text;var t=j(pe,(function(t){return t.type===e.type}));if(!t)return"";var s="";return B&&(s+=e.text),(S&&X||!S&&Y)&&(s+="< ",X=!1,Y=!1),(S&&Y||!S&&X)&&(s+="> ",X=!1,Y=!1),S&&(t.value>0||""===ae||j(R,t.type)||j(P,t.type))&&(s+="-",S=!1),"milliseconds"===e.type&&t.formattedValueMS?s+=t.formattedValueMS:s+=t.formattedValue,B||(s+=e.text),s}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function C(){var e=this.duration,t=function(t){return e._data[t]},s=j(this.types,t),a=function(e,t){for(var s=e.length;s-=1;)if(t(e[s]))return e[s]}(this.types,t);switch(s){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(s===a)return"d __";case"weeks":return s===a?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(s===a)return"M __";case"years":return s===a?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function I(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=T,e.duration.fn.format=w,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:C,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",m)}var L=function(e,t,s){return e.toLocaleString(t,s)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&_(L),s=t&&S(L);var F=function(e,t,s){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,s).format(e)};return a=_(F),i=a&&S(F),I(e),I},i=[s(19)],void 0===(n="function"==typeof(a=o)?a.apply(t,i):a)||(e.exports=n),r&&(r.momentDurationFormatSetup=r.moment?o(r.moment):o)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(5),n=a.__importDefault(s(82));t.default=function(e,t){var s=i.useState(t),a=s[0],r=s[1];return n.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,s){(function(t){const s="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=s}).call(this,s(105))},function(e,t){const s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(51),n=a.__importDefault(s(53));t.default=function(e,t){n.default(e,t,i.isDeepEqual)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=s(21).__importDefault(s(52));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,s){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var a,i,n;if(Array.isArray(t)){if((a=t.length)!=s.length)return!1;for(i=a;0!=i--;)if(!e(t[i],s[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((a=(n=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(s,n[i]))return!1;for(i=a;0!=i--;){var r=n[i];if(!("_owner"===r&&t.$$typeof||e(t[r],s[r])))return!1}return!0}return t!=t&&s!=s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t,s){var i=a.useRef(void 0);i.current&&s(t,i.current)||(i.current=t),a.useEffect(e,i.current)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(5),n=a.__importDefault(s(55));t.default=function(e){var t=i.useRef(e);t.current=e,n.default((function(){return function(){return t.current()}}))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e){a.useEffect(e,[])}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(58);case"v8light":return s(60)}},function(e,t,s){var a=s(38),i=s(59);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(61);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(63);case"v8light":return s(65)}},function(e,t,s){var a=s(38),i=s(64);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#dfe5ef;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(66);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#343741;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(68);case"v8light":return s(70)}},function(e,t,s){var a=s(38),i=s(69);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(71);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(73);case"v8light":return s(75)}},function(e,t,s){var a=s(38),i=s(74);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(76);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(78);case"v8light":return s(80)}},function(e,t,s){var a=s(38),i=s(79);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(81);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=i},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(84);case"v8light":return s(86)}},function(e,t,s){var a=s(38),i=s(85);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#25262e;border:1px solid #535966;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7dded8}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #f86b63}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #f3d371}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(87);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#f5f7fa;border:1px solid #98a2b3;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #00bfb3}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #bd271e}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #fec514}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(89);case"v8light":return s(91)}},function(e,t,s){var a=s(38),i=s(90);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(92);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(94);case"v8light":return s(96)}},function(e,t,s){var a=s(38),i=s(95);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(97);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(99);case"v8light":return s(101)}},function(e,t,s){var a=s(38),i=s(100);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#dfe5ef}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#98a2b3}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#98a2b3;font-size:14px;font-size:1rem;line-height:1.71429rem}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(102);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#69707d}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#69707d;font-size:14px;font-size:1rem;line-height:1.71429rem}.monTableCell__number{font-size:22px;font-size:1.57143rem;line-height:2.28571rem}.monTableCell__splitNumber{font-size:16px;font-size:1.14286rem;line-height:1.71429rem}",""]),e.exports=t},function(e,t,s){const a=s(104);e.exports=(e,t)=>new a(e,t).major},function(e,t,s){const a=s(45),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=s(46),{safeRe:r,t:o}=s(106),l=s(107),{compareIdentifiers:c}=s(108);class SemVer{constructor(e,t){if(t=l(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?r[o.LOOSE]:r[o.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],i=e.prerelease[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const s=this.build[t],i=e.build[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}inc(e,t,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(s)?1:0;if(!t&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let a=this.prerelease.length;for(;--a>=0;)"number"==typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);if(-1===a){if(t===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let a=[t,e];!1===s&&(a=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=SemVer},function(e,t,s){e.exports=s(10)(652)},function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=s(46),r=s(45),o=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const m="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",n],[m,i]],p=(e,t,s)=>{const a=(e=>{for(const[t,s]of g)e=e.split(`${t}*`).join(`${t}{0,${s}}`).split(`${t}+`).join(`${t}{1,${s}}`);return e})(t),i=d++;r(e,i,t),u[e]=i,c[i]=t,o[i]=new RegExp(t,s?"g":void 0),l[i]=new RegExp(a,s?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),p("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${m}+`),p("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),p("FULL",`^${c[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),p("LOOSE",`^${c[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),p("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),p("COERCERTL",c[u.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},function(e,t){const s=Object.freeze({loose:!0}),a=Object.freeze({});e.exports=e=>e?"object"!=typeof e?s:e:a},function(e,t){const s=/^[0-9]+$/,a=(e,t)=>{const a=s.test(e),i=s.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};e.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(110);case"v8light":return s(112)}},function(e,t,s){var a=s(38),i=s(111);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#d4dae5b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#d4dae5b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(113);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#343741b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#343741b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(115);case"v8light":return s(117)}},function(e,t,s){var a=s(38),i=s(116);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(118);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(120);case"v8light":return s(122)}},function(e,t,s){var a=s(38),i=s(121);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#98a2b3;margin-left:24px}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(123);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#69707d;margin-left:24px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(125);case"v8light":return s(127)}},function(e,t,s){var a=s(38),i=s(126);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(128);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(130);case"v8light":return s(132)}},function(e,t,s){var a=s(38),i=s(131);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(133);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(135);case"v8light":return s(137)}},function(e,t,s){var a=s(38),i=s(136);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(138);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(140);case"v8light":return s(142)}},function(e,t,s){var a=s(38),i=s(141);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#1d1e24;border-bottom:2px solid #1d1e24;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #343741;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#24252d}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},function(e,t,s){var a=s(38),i=s(143);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(39)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#fff;border-bottom:2px solid #fff;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #d3dae6;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px) and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return to}));var a=s(22),i=s(17),n=s(5),r=s.n(n),o=s(31),l=s.n(o),c=s(18),u=s(3),d=s.n(u);const m={services:{}},g=Object(n.createContext)(m);var p=s(50),j=s.n(p),b=s(2);const x=({children:e,component:t,render:s,...a})=>{const i=Object(n.useMemo)((()=>{if(t)return e=>Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(h,null),Object(b.jsx)(t,e))}),[t]);if(i)return Object(b.jsx)(c.Route,d()({},a,{component:i}));if(s||"function"==typeof e){const t="function"==typeof e?e:s;return Object(b.jsx)(c.Route,d()({},a,{render:e=>Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(h,null),t(e))}))}return Object(b.jsx)(c.Route,a,Object(b.jsx)(h,null),e)},h=()=>{const{executionContext:e}=Object(n.useContext)(g).services,t=Object(c.useRouteMatch)();return function(e,t){j()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var f=s(27);const O=({children:e,...t})=>Object(b.jsx)(c.Router,t,Object(b.jsx)(f.CompatRouter,null,e));var v=s(15),E=s.n(v);const M=({legacySwitch:e=!0,children:t})=>{const s=Object(c.useRouteMatch)();return e?Object(b.jsx)(c.Switch,null,t):Object(b.jsx)(f.Routes,null,n.Children.map(t,(e=>{if(r.a.isValidElement(e)&&e.type===x){var a;const i=Object(v.replace)(null==e?void 0:e.props.path,s.url+"/",""),n="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(b.jsx)(f.Route,{path:i,element:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(h,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(b.jsx)(e.props.component,null)||n&&n()||t)})}return e})))};var y=s(44),k=s.n(y),S=s(1);const _=Object(n.createContext)({});var T=s(54),w=s.n(T),C=s(9),I=s.n(C),L=s(28),F=s(29),P=s(23),N=s(8);class url_state_GlobalState{constructor(e,t,s){I()(this,"stateSyncRef",void 0),I()(this,"stateContainer",void 0),I()(this,"stateStorage",void 0),I()(this,"stateContainerChangeSub",void 0),I()(this,"syncQueryStateWithUrlManager",void 0),I()(this,"timefilterRef",void 0),I()(this,"lastAssignedState",{}),this.timefilterRef=e.timefilter.timefilter;const a=Object(L.createHashHistory)();this.stateStorage=Object(P.createKbnUrlStateStorage)({useHash:!1,history:a,...Object(P.withNotifyOnErrors)(t)});const i=this.stateStorage.get("_g");this.stateContainer=Object(P.createStateContainer)(i,{set:e=>(t,s)=>({...e,[t]:s})}),this.stateSyncRef=Object(P.syncState)({storageKey:"_g",stateContainer:this.stateContainer,stateStorage:this.stateStorage}),this.stateContainerChangeSub=this.stateContainer.state$.subscribe((()=>{this.lastAssignedState=this.getState(),N.a.isInitializated()&&N.a.shims.breadcrumbs.update(),this.syncExternalState(s)})),this.syncQueryStateWithUrlManager=Object(F.syncQueryStateWithUrl)(e,this.stateStorage),this.stateSyncRef.start(),this.lastAssignedState=this.getState()}syncExternalState(e){const t=this.stateContainer.get();for(const s in t)({save:1,time:1,refreshInterval:1,filters:1})[s]||t[s]!==e[s]&&(e[s]=t[s])}setState(e){const t=this.getState(),s={...t,...e};if(e&&(a=s,i=t,JSON.stringify(a)===JSON.stringify(i)))return;var a,i;const n={...s,refreshInterval:this.timefilterRef.getRefreshInterval(),time:this.timefilterRef.getTime()};this.lastAssignedState=n,this.stateContainer.set(n)}getState(){const e={...this.lastAssignedState,...this.stateContainer.get()};delete e.filters;const{refreshInterval:t,time:s,...a}=e;return a||{}}destroy(){this.syncQueryStateWithUrlManager.stop(),this.stateContainerChangeSub.unsubscribe(),this.stateSyncRef.stop()}}const D=Object(n.createContext)({}),R={pause:!1,value:1e4},A=({uiSettings:e,query:t,toasts:s,children:a})=>{const i={},[r]=Object(n.useState)((()=>new url_state_GlobalState(t,s,i))),o=r.getState();for(const e in o)o.hasOwnProperty(e)&&(i[e]=o[e]);return i.save=()=>{const e={...i};delete e.save,r.setState(e)},((e,t)=>{if(t.isRefreshIntervalTouched()||!e.isDefault(F.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS))return!1;const s=t.getRefreshInterval();return s.pause||0===s.value})(e,N.a.shims.timefilter)&&(i.refreshInterval=R,N.a.shims.timefilter.setRefreshInterval(i.refreshInterval),i.save()),w()((()=>{r.destroy()})),Object(b.jsx)(D.Provider,{value:i},a)},z=r.a.createContext({});var B=s(0),V=s(42),U=s.n(V);const $=(e,t,s,a=!1)=>{const i={url:e,label:t,ignoreGlobalState:a};return s&&(i.testSubj=s),i};const[G,q]=U()((({history:e})=>{const t=Object(i.useKibana)().services.chrome,[s,a]=Object(n.useState)([]),r=Object(n.useCallback)((e=>{var s,a;if(!t)return;if(!e){var i;const s=null===(i=t.getBreadcrumbs$())||void 0===i?void 0:i.source;s&&s.value&&(e=s.value)}const n=location.hash.split("?")[1];null!==(s=e)&&void 0!==s&&s.length&&0===(null==n?void 0:n.indexOf("_g"))&&(null===(a=e[0].href)||void 0===a?void 0:a.split("?")[1])!==n&&(e.forEach((e=>{var t;const s=null===(t=e.href)||void 0===t?void 0:t.split("?")[0];s&&!e.ignoreGlobalState&&(e.href=`${s}?${n}`),delete e.ignoreGlobalState})),t.setBreadcrumbs(e.slice(0)))}),[t]),o=Object(n.useCallback)(((e,t)=>{const s=function(e,t){const s=B.i18n.translate("xpack.monitoring.breadcrumbs.clustersLabel",{defaultMessage:"Clusters"});let a=[$("#/home",s,"breadcrumbClusters",!0)];return null!=t&&t.inOverview||!e||a.push($("#/overview",e)),null!=t&&t.inElasticsearch&&(a=a.concat(function(e){const t=[];return e.instance?(t.push($("#/elasticsearch","Elasticsearch")),"indices"===e.name?t.push($("#/elasticsearch/indices",B.i18n.translate("xpack.monitoring.breadcrumbs.es.indicesLabel",{defaultMessage:"Indices"}),"breadcrumbEsIndices")):"nodes"===e.name?t.push($("#/elasticsearch/nodes",B.i18n.translate("xpack.monitoring.breadcrumbs.es.nodesLabel",{defaultMessage:"Nodes"}),"breadcrumbEsNodes")):"ml"===e.name?t.push($("#/elasticsearch/ml_jobs",B.i18n.translate("xpack.monitoring.breadcrumbs.es.jobsLabel",{defaultMessage:"Machine learning jobs"}))):"ccr_shard"===e.name&&t.push($("#/elasticsearch/ccr",B.i18n.translate("xpack.monitoring.breadcrumbs.es.ccrLabel",{defaultMessage:"CCR"}))),t.push($(null,e.instance))):t.push($(null,"Elasticsearch")),t}(t))),null!=t&&t.inKibana&&(a=a.concat(function(e){const t=[];return e.instance?(t.push($("#/kibana","Kibana")),t.push($("#/kibana/instances",B.i18n.translate("xpack.monitoring.breadcrumbs.kibana.instancesLabel",{defaultMessage:"Instances"}))),t.push($(null,e.instance))):t.push($(null,"Kibana")),t}(t))),null!=t&&t.inLogstash&&(a=a.concat(function(e){const t=B.i18n.translate("xpack.monitoring.breadcrumbs.logstashLabel",{defaultMessage:"Logstash"}),s=[];return e.instance?(s.push($("#/logstash",t)),"nodes"===e.name&&s.push($("#/logstash/nodes",B.i18n.translate("xpack.monitoring.breadcrumbs.logstash.nodesLabel",{defaultMessage:"Nodes"}))),s.push($(null,e.instance))):"pipeline"===e.page?(s.push($("#/logstash",t)),s.push($("#/logstash/pipelines",B.i18n.translate("xpack.monitoring.breadcrumbs.logstash.pipelinesLabel",{defaultMessage:"Pipelines"})))):s.push($(null,t)),s}(t))),null!=t&&t.inBeats&&(a=a.concat(function(e){const t=B.i18n.translate("xpack.monitoring.breadcrumbs.beatsLabel",{defaultMessage:"Beats"}),s=[];return e.instance?(s.push($("#/beats",t)),s.push($("#/beats/beats",B.i18n.translate("xpack.monitoring.breadcrumbs.beats.instancesLabel",{defaultMessage:"Instances"}))),s.push($(null,e.instance))):s.push($(null,t)),s}(t))),null!=t&&t.inApm&&(a=a.concat(function(e){const t=B.i18n.translate("xpack.monitoring.breadcrumbs.apmLabel",{defaultMessage:"APM server"}),s=[];return e.instance?(s.push($("#/apm",t)),s.push($("#/apm/instances",B.i18n.translate("xpack.monitoring.breadcrumbs.apm.instancesLabel",{defaultMessage:"Instances"}))),s.push($(null,e.instance))):s.push($(null,t)),s}(t))),null!=t&&t.inEnterpriseSearch&&(a=a.concat(function(e){const t=B.i18n.translate("xpack.monitoring.breadcrumbs.entSearchLabel",{defaultMessage:"Enterprise Search"}),s=[];return s.push($("#/enterprise_search",t)),s}())),a}(e,t);a(s),r(s.map((e=>({text:e.label,href:e.url?e.url:void 0,"data-test-subj":e.testSubj,ignoreGlobalState:e.ignoreGlobalState}))))}),[a,r]);return Object(n.useEffect)((()=>{e.listen(((e,t)=>{r()}))}),[e,r]),{generate:o,update:r,breadcrumbs:s}})),H={from:"now-1h",to:"now",interval:">=10s"},[W,K]=U()((()=>{var e,t;const{services:s}=Object(i.useKibana)(),a=Object(n.useContext)(D),r={...H,...null===(e=s.data)||void 0===e?void 0:e.query.timefilter.timefilter.getTime()},{value:o,pause:l}=null===(t=s.data)||void 0===t?void 0:t.query.timefilter.timefilter.getRefreshInterval(),[c,u]=Object(n.useState)(o),[d,m]=Object(n.useState)(l),[g,p]=Object(n.useState)(r),[j,b]=Object(n.useState)(!1),x=Object(n.useCallback)(((e,t)=>{var s;p({...g,from:e,to:t}),a.time={from:e,to:t},N.a.shims.timefilter.setTime(a.time),null===(s=a.save)||void 0===s||s.call(a)}),[g,p,a]);return Object(n.useEffect)((()=>{const e=N.a.shims.timefilter.getTimeUpdate$().subscribe((function(){var e;const t=N.a.shims.timefilter.getTime();p({...g,...t}),a.time={...t},null===(e=a.save)||void 0===e||e.call(a)}));return()=>e.unsubscribe()}),[]),{currentTimerange:g,setTimeRange:p,handleTimeChange:x,setRefreshInterval:u,refreshInterval:c,setIsPaused:m,isPaused:d,setIsDisabled:b,isDisabled:j}}));var J=s(16),Y=s(7),Q=s(56),X=s.n(Q);const Z=()=>{const{isCcsEnabled:e}=Object(n.useContext)(_),{services:t}=Object(i.useKibana)(),[s,a]=Object(n.useState)(!1);X()((()=>{!async function(){var e;if(null!==(e=t.http)&&void 0!==e&&e.fetch)try{var s;const e=await(null===(s=t.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/check_access"));a(e.has_access)}catch(e){a(!1)}}()}),5e3);const r=B.i18n.translate("xpack.monitoring.accessDeniedTitle",{defaultMessage:"Access Denied"});return s?Object(b.jsx)(c.Redirect,{to:"/home"}):Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiCallOut,{title:r,color:"danger",iconType:"warning","data-test-subj":"accessDeniedTitle"},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.accessDenied.notAuthorizedDescription",defaultMessage:"You are not authorized to access Monitoring. To use Monitoring, you need the privileges granted by both the `{kibanaAdmin}` and `{monitoringUser}` roles.",values:{kibanaAdmin:"kibana_admin",monitoringUser:"monitoring_user "}})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.accessDenied.clusterNotConfiguredDescription",defaultMessage:"If you are attempting to access a dedicated monitoring cluster, this might be because you are logged in as a user that is not configured on the monitoring cluster."})),e&&Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.accessDenied.noRemoteClusterClientDescription",defaultMessage:"Since Cross Cluster Search is enabled (`monitoring.ui.ccs.enabled` is set to `true`), make sure your cluster has the `remote_cluster_client` role on at least one node."})),Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiButton,{href:"../app/home"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.accessDenied.backToKibanaButtonLabel",defaultMessage:"Back to Kibana"})))))};var ee=s(24),te=s(32);const se=({pageTitle:e,onRefresh:t})=>{const{services:s}=Object(i.useKibana)(),a=s.uiSettings.get(te.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),r=Object(n.useMemo)((()=>a.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s})))),[a]),{currentTimerange:o,handleTimeChange:l,setRefreshInterval:c,refreshInterval:u,setIsPaused:d,isPaused:m,isDisabled:g}=K(),p=Object(n.useContext)(D),j=Object(n.useCallback)((e=>{e.isInvalid||l(e.start,e.end)}),[l]),x=Object(n.useCallback)((({refreshInterval:e,isPaused:t})=>{var s;c(e),d(t),p.refreshInterval={pause:t,value:e},N.a.shims.timefilter.setRefreshInterval(p.refreshInterval),null===(s=p.save)||void 0===s||s.call(p)}),[c,d,p]);return Object(b.jsx)(Y.EuiPageHeader,{pageTitle:e,rightSideItems:[Object(b.jsx)(Y.EuiSuperDatePicker,{isDisabled:g,start:o.from,end:o.to,onTimeChange:j,onRefresh:t,isPaused:m,refreshInterval:u,onRefreshChange:x,commonlyUsedRanges:r})]})};var ae=s(4);let ie,ne,re;const oe={supported:!1,enabled:!1,data:null,callback:null,hideBottomBar:!1},le=()=>oe,ce=()=>oe.callback&&oe.callback(),ue=async(e,t=!1)=>{const s=await(async(e,t=!1)=>{const s=ie.cluster_uuid,a=ie.ccs;let i="../api/monitoring/v1/setup/collection";i+=e?`/node/${e}`:!t&&s?`/cluster/${s}`:"/cluster";try{return await ne.post(i,{body:JSON.stringify({ccs:a})})}catch(e){throw re(e),e}})(e,t);oe.data=s;const a=Object(v.get)(s,"_meta.hasPermissions",!1);if(!a){let e="";return a||(e=B.i18n.translate("xpack.monitoring.setupMode.notAvailablePermissions",{defaultMessage:"You do not have the necessary permissions to do this."})),N.a.shims.toastNotifications.addDanger({title:B.i18n.translate("xpack.monitoring.setupMode.notAvailableTitle",{defaultMessage:"Setup mode is not available"}),text:e}),de(!1)}if(ce(),!ie.cluster_uuid){const e=Object(v.get)(s,"_meta.liveClusterUuid"),t=Object.values(Object(v.get)(s,"elasticsearch.byUuid",{})).filter((e=>e.isPartiallyMigrated||e.isFullyMigrated));e&&t.length>0&&(i=e,ie.cluster_uuid=i,null===(n=(r=ie).save)||void 0===n||n.call(r))}var i,n,r},de=e=>{var t,s;oe.enabled=e,ie.inSetupMode=e,null===(t=(s=ie).save)||void 0===t||t.call(s),ce(),e&&ue()},me=async(e,t,s,a)=>{ie=e,ne=t,re=s,a&&(oe.callback=a),ie.inSetupMode&&de(!0)},ge=(e,t=ie)=>!1!==(null==e?void 0:e.setupModeSupported)&&(!!oe.enabled||t.inSetupMode),pe=e=>!(!oe.enabled||e===ae.d.MetricbeatMigration&&N.a.shims.isCloud),je=()=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"l"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataTitle",defaultMessage:"We're looking for your monitoring data"}))),Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),be=()=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"l"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffTitle",defaultMessage:"Monitoring is currently off"}))),Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),xe=()=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"l"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededTitle",defaultMessage:"You need to make some adjustments"}))),Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededDescription",defaultMessage:"To run monitoring please perform the following steps"}))))),he=()=>{const{ELASTIC_WEBSITE_URL:e}=N.a.shims.docLinks;return Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription",defaultMessage:"Configure monitoring through "}),Object(b.jsx)(Y.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Elasticsearch Service Console")," ",Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription2",defaultMessage:"Go to "}),Object(b.jsx)(Y.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Logs and metrics")," ",Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription3",defaultMessage:"section for a deployment to configure monitoring. For more information visit "}),Object(b.jsx)(Y.EuiLink,{href:`${e}guide/en/cloud/current/ec-enable-logging-and-monitoring.html`,target:"_blank"},"the documentation page."))))};function fe({checkMessage:e}){const t=e||Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.defaultLoadingMessage",defaultMessage:"Loading, please wait..."});return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(je,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiLoadingSpinner,{size:"m"})),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},t)))}class collection_enabled_ExplainCollectionEnabled extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.waitedTooLongTimer=null,this.state={waitedTooLong:!1}}componentWillUnmount(){clearInterval(this.waitedTooLongTimer)}handleClick(){const{enabler:e}=this.props;e.enableCollectionEnabled(),this.waitedTooLongTimer=setTimeout((()=>{this.setState({waitedTooLong:!0})}),22e3)}render(){const{reason:e,isCollectionEnabledUpdated:t,isCollectionEnabledUpdating:s}=this.props,{property:a,data:i,context:r}=e,o=this.state.waitedTooLong?Object(b.jsx)("p",null,Object(b.jsx)("a",{href:"#/"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.stillWaitingLinkText",defaultMessage:"Still waiting?"}))):null;return Object(b.jsx)(n.Fragment,null,t?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"l","data-test-subj":"monitoringCollectionEnabledMessage"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnTitle",defaultMessage:"Success! Getting your monitoring data."}))),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnDescription",defaultMessage:"When the data is in your cluster, your monitoring dashboard will show up here. This might take a few seconds."}))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiLoadingSpinner,{size:"l"}),Object(b.jsx)(Y.EuiSpacer,null),o):(()=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(be,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:r,property:Object(b.jsx)(Y.EuiCode,null,a),data:Object(b.jsx)(Y.EuiCode,null,i)}})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnItOnDescription",defaultMessage:"Would you like to turn it on?"}))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionEnabled",isLoading:s},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}class collection_interval_ExplainCollectionInterval extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{enabler:e}=this.props;e.enableCollectionInterval()}render(){const{reason:e,isCollectionIntervalUpdated:t,isCollectionIntervalUpdating:s}=this.props,{context:a,property:i,data:r}=e;return Object(b.jsx)(n.Fragment,null,t?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"l"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnTitle",defaultMessage:"Success! Wait a moment please."}))),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnDescription",defaultMessage:"As soon as monitoring data appears in your cluster the page will automatically refresh with your monitoring dashboard. This only takes only a few seconds."}))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiLoadingSpinner,{size:"l"})):(()=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(be,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionIntervalDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:a,property:Object(b.jsx)(Y.EuiCode,null,i),data:Object(b.jsx)(Y.EuiCode,null,r)}})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.wrongIntervalValueDescription",defaultMessage:"The collection interval setting needs to be a positive integer (10s is recommended) in order for the collection agents to be active."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.changeIntervalDescription",defaultMessage:"Would you like us to change it and enable monitoring?"}))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionInterval",isLoading:s},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}function Oe({reason:e}){const{context:t,property:s,data:a}=e;return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(xe,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.pluginEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data} set, which disables monitoring. Removing the {monitoringEnableFalse} setting from your configuration will put the default into effect and enable Monitoring.",values:{context:t,property:Object(b.jsx)(Y.EuiCode,null,s),data:Object(b.jsx)(Y.EuiCode,null,a),monitoringEnableFalse:Object(b.jsx)(Y.EuiCode,null,"xpack.monitoring.enabled: false")}}))))}function ve({reason:e}){const{context:t,property:s,data:a}=e;return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(xe,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,{className:"eui-textLeft"},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersDescription",defaultMessage:"We checked the {context} settings for {property}, and found the reason: {data}.",values:{context:Object(b.jsx)(Y.EuiCode,null,t),property:Object(b.jsx)(Y.EuiCode,null,s),data:Object(b.jsx)(Y.EuiCode,null,a)}})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.problemWithConfigDescription",defaultMessage:"Using monitoring exporters to ship the monitoring data to a remote monitoring cluster is highly recommended as it keeps the integrity of the monitoring data safe no matter what the state of the production cluster. However, as this instance of Kibana could not find any monitoring data, there seems to be a problem with the {property} configuration, or the {monitoringEs} settings in {kibanaConfig}.",values:{property:Object(b.jsx)(Y.EuiCode,null,s),monitoringEs:Object(b.jsx)(Y.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(b.jsx)(Y.EuiCode,null,"kibana.yml")}})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.checkConfigDescription",defaultMessage:"Check that the intended exporters are enabled for sending statistics to the monitoring cluster, and that the monitoring cluster host matches the {monitoringEs} setting in {kibanaConfig} to see monitoring data in this instance of Kibana.",values:{monitoringEs:Object(b.jsx)(Y.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(b.jsx)(Y.EuiCode,null,"kibana.yml")}}))))}function Ee(){return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(he,null),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,{className:"eui-textLeft"},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersCloudDescription",defaultMessage:"In Elastic Cloud, your monitoring data is stored in your dedicated monitoring cluster."}))))}const Me=e=>{const{reason:t}=e,{property:s,data:a,context:i}=t;switch(s){case"xpack.monitoring.collection.enabled":return Object(b.jsx)(collection_enabled_ExplainCollectionEnabled,e);case"xpack.monitoring.collection.interval":return Object(b.jsx)(collection_interval_ExplainCollectionInterval,e);case"xpack.monitoring.exporters":return Object(b.jsx)(ve,e);case"xpack.monitoring.exporters.cloud_enabled":return Object(b.jsx)(Ee,null);case"xpack.monitoring.enabled":return Object(b.jsx)(Oe,e);case"custom":return Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,t.message));default:return Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.reasons.explainWhyNoDataDescription",defaultMessage:"There is a {context} setting that has {property} set to {data}.",values:{context:Object(b.jsx)(Y.EuiCode,null,i),property:Object(b.jsx)(Y.EuiCode,null,s),data:Object(b.jsx)(Y.EuiCode,null,a)}})))}};function ye(e){return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Me,e))}function ke(){return Object(b.jsx)("div",{"data-test-subj":"weTriedContainer"},Object(b.jsx)(Y.EuiTitle,{size:"l"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.reasons.couldNotActivateMonitoringTitle",defaultMessage:"We couldn't activate monitoring"}))),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiText,{className:"eui-textLeft"},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.reasons.noMonitoringDataFoundDescription",defaultMessage:'No monitoring data found. Try setting the time filter to "Last 1 hour" or check if data is available for a different time period.'})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.reasons.ifDataInClusterDescription",defaultMessage:"If data is in your cluster, your monitoring dashboards will show up here."}))))}const Se=({errors:e})=>{const t={};return e.filter((e=>{const{statusCode:s,error:a,message:i}=e,n=`${s}${a}${i}`;if(!t[n])return t[n]=!0,!0})).map(((e,t)=>{const{message:s,statusCode:a,error:i}=e;return Object(b.jsx)(n.Fragment,{key:`checker-error-${t}`},Object(b.jsx)(Y.EuiDescriptionListTitle,null,a," ",i),Object(b.jsx)(Y.EuiDescriptionListDescription,null,s))}))};function _e(e){return void 0===e.errors||0===e.errors.length?null:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiCallOut,{title:"Errors found",color:"danger",className:"eui-textLeft"},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.checkerErrors.checkEsSettingsErrorMessage",defaultMessage:"There were some errors encountered in trying to check Elasticsearch settings. You need administrator rights to check the settings and, if needed, to enable the monitoring collection setting."})),Object(b.jsx)(Y.EuiDescriptionList,null,Object(b.jsx)(Se,e))))}function Te(e,t={},s=window.location){let a=s.hash?s.hash.split("?")[1]:"";const i=/_g=\((.+)\)$/.exec(a);if(!i||!i.length)return a?`${e.split("?")[0]}?${a}`:e;let n=i[1];return Object.keys(t).forEach((e=>{let s=t[e];"cluster_uuid"===e&&(s=`'${s}'`);const a=new RegExp(`${e}:([^,]+)`).exec(n);a&&a.length?n=n.replace(a[0],`${e}:${s}`):n+=`,${e}:${s}`})),a=a.replace(i[0],`_g=(${n})`),`${e.split("?")[0]}?${a}`}function we(e){const{isLoading:t,reason:s,checkMessage:a,isCollectionEnabledUpdated:i}=e;return i&&!s||t?Object(b.jsx)(fe,{checkMessage:a}):s?Object(b.jsx)(ye,e):Object(b.jsx)(ke,null)}function Ce(e){const[t,s]=Object(n.useState)(!1),[a,i]=Object(n.useState)(!1),o=({children:e})=>Object(b.jsx)(Y.EuiPage,{"data-test-subj":"noDataContainer"},e);return e.isCloudEnabled?Object(b.jsx)(o,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.cloud.heading",defaultMessage:"No monitoring data found."}))),Object(b.jsx)(Y.EuiPageBody,{restrictWidth:600},Object(b.jsx)(Y.EuiPageTemplate.EmptyPrompt,{icon:Object(b.jsx)(Y.EuiIcon,{type:"monitoringApp",size:"xxl"}),title:Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.cloud.title",defaultMessage:"Monitoring data not available"})),body:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.cloud.description",defaultMessage:"Monitoring provides insight to your hardware performance and load."})))),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(he,null))}))):a?Object(b.jsx)(o,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.no_data.internal_collection.heading",defaultMessage:"No monitoring data found."}))),Object(b.jsx)(Y.EuiPageBody,{restrictWidth:600},Object(b.jsx)(Y.EuiPageTemplate.EmptyPrompt,{icon:Object(b.jsx)(Y.EuiIcon,{type:"monitoringApp",size:"xxl"}),body:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(we,e),Object(b.jsx)(_e,{errors:e.errors})),actions:e.isCloudEnabled?null:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiButtonEmpty,{isDisabled:e.isCollectionEnabledUpdated,onClick:()=>i(!1)},Object(b.jsx)(Y.EuiTextColor,{color:"default"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.setupMetricbeatInstead",defaultMessage:"Or, set up with Metricbeat (recommended)"}))))}))):Object(b.jsx)(o,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.no_data.heading",defaultMessage:"No monitoring data found."}))),Object(b.jsx)(Y.EuiPageBody,{restrictWidth:600},Object(b.jsx)(Y.EuiPageTemplate.EmptyPrompt,{icon:Object(b.jsx)(Y.EuiIcon,{type:"monitoringApp",size:"xxl"}),title:Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDetected",defaultMessage:"No monitoring data found"})),body:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDataFound",defaultMessage:"Have you set up monitoring yet? If so, make sure that the selected time period in the upper right includes monitoring data."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.remoteCollectionNotice",defaultMessage:"If you have configured monitoring data to be sent to a dedicated monitoring cluster you should access that data with the Kibana instance attached to the monitoring cluster."}))),actions:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButton,{fill:!0,onClick:async function(){s(!0),await de(!0),window.location.hash=Te("#/elasticsearch/nodes")},type:"button","data-test-subj":"enableCollectionInterval",isLoading:t},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Set up monitoring with Metricbeat"})))),Object(b.jsx)(Y.EuiHorizontalRule,{size:"half"}),Object(b.jsx)(Y.EuiButtonEmpty,{onClick:()=>i(!0),"data-test-subj":"useInternalCollection"},Object(b.jsx)(Y.EuiTextColor,{color:"subdued"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.noData.setupInternalInstead",defaultMessage:"Or, set up with self monitoring"}))))})))}const Ie=({uploadPath:e})=>Object(b.jsx)(Y.EuiCard,{title:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(b.jsx)(Y.EuiButton,{"data-test-subj":"updateLicenseButton",href:e},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.updateLicenseButtonLabel",defaultMessage:"Update license"}))});class license_LicenseStatus extends r.a.PureComponent{render(){const{isExpired:e,status:t,type:s,expiryDate:a}=this.props,i=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();let r,o,l;return e?(r=Object(b.jsx)(Y.EuiIcon,{color:"danger",type:"warning"}),l=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:Object(b.jsx)("strong",null,a)}})),o=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:i}})):(r=Object(b.jsx)(Y.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"}),l=a?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:Object(b.jsx)("strong",null,a)}})):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."})),o=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:i,status:t.toLowerCase()}})),Object(b.jsx)(Y.EuiTextAlign,{textAlign:"center"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},r),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"m"},Object(b.jsx)("h1",{"data-test-subj":"licenseText"},o)))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiText,{"data-test-subj":"licenseSubText"},l))}}const Le=({isPrimaryCluster:e,uploadLicensePath:t})=>e?Object(b.jsx)(Ie,{uploadPath:t}):null,Fe=({isPrimaryCluster:e})=>e?null:Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.license.howToUpdateLicenseDescription",defaultMessage:"To update the license for this cluster, provide the license file through the Elasticsearch {apiText}:",values:{apiText:"API"}})),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiCodeBlock,null,"curl -XPUT -u <user> 'https://<host>:<port>/_license' -H 'Content-Type: application/json' -d @license.json")),Pe=e=>{const{status:t,type:s,isExpired:a,expiryDate:i}=e,n=`${N.a.shims.getBasePath()}/app/management/stack/license_management`;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.license.heading",defaultMessage:"License"}))),Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(license_LicenseStatus,{isExpired:a,status:t,type:s,expiryDate:i}),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Le,e),Object(b.jsx)(Fe,e))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiText,{size:"s",textAlign:"center"},Object(b.jsx)("p",null,"For more license options please visit",Object(b.jsx)(Y.EuiLink,{href:n},"License Management"),"."))))};function Ne(){return Object(b.jsx)(Y.EuiPage,{style:{height:"calc(100vh - 50px)"}},Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPageTemplate.EmptyPrompt,{icon:Object(b.jsx)(Y.EuiLoadingSpinner,{size:"xl"}),body:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.pageLoadingTitle",defaultMessage:"Loading"})})))}const De=({pageViewTitle:e})=>{const t=e.toLowerCase().replace(/-/g,"").replace(/\s+/g,"_");return Object(ee.useTrackPageview)({app:"stack_monitoring",path:t}),Object(ee.useTrackPageview)({app:"stack_monitoring",path:t,delay:15e3}),Object(b.jsx)(Ne,null)},Re=({pageViewTitle:e})=>e?Object(b.jsx)(De,{pageViewTitle:e}):Object(b.jsx)(Ne,null),Ae={RED:"RED",YELLOW:"YELLOW",GREEN:"GREEN",GRAY:"GRAY"},ze={[Ae.RED]:"danger",[Ae.YELLOW]:"warning",[Ae.GREEN]:"success",[Ae.GRAY]:"subdued"},Be=({type:e,label:t})=>{const s=ze[e];return Object(b.jsx)(Y.EuiIcon,{alt:t,size:"l","data-test-subj":"statusIcon",type:"dot",color:s})},Ve=r.a.createContext({setupModeSupported:!1});var Ue=s(19),$e=s.n(Ue);function Ge(e,t,s){let a,i;if(s=s||$e()(),t===S.c)a=$e.a.duration(s-$e()(e));else{if(t!==S.d)throw new Error('[formatTimestampToDuration] requires a [calculationFlag] parameter to specify format as "since" or "until" the given time.');a=$e.a.duration($e()(e)-s)}return i=Math.abs(s.diff(e,"months"))>=1?$e.a.duration(a).format(S.t):Math.abs(s.diff(e,"minutes"))>=1?$e.a.duration(a).format(S.u):$e.a.duration(a).format(S.v),i.replace(/ -?0 mins$/,"").replace(/ -?0 hrs$/,"").replace(/ -?0 days$/,"")}function qe(e){if(!e)return null;let t=e.text;if(!e.tokens||!e.tokens.length)return t;const s=e.tokens.filter((e=>e.type===ae.a.Time)),a=e.tokens.filter((e=>e.type===ae.a.Link)),i=e.tokens.filter((e=>e.type===ae.a.DocLink));for(const e of s){const s=e;t=t.replace(s.startToken,s.isRelative?Ge(s.timestamp,S.d):$e.a.tz(s.timestamp,$e.a.tz.guess()).format("LLL z"))}let r=Object(b.jsx)(n.Fragment,null,t);for(const e of a){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=t.indexOf(a[0]),o=t.substring(0,i),l=t.substring(i+a[0].length),c=Te(`#/${s.url}`);r=Object(b.jsx)(n.Fragment,null,o,Object(b.jsx)(Y.EuiLink,{href:c},a[1]),l)}for(const e of i){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=s.partialUrl.replace("{basePath}",N.a.shims.getBasePath()).replace("{elasticWebsiteUrl}",N.a.shims.docLinks.ELASTIC_WEBSITE_URL).replace("{docLinkVersion}",N.a.shims.docLinks.DOC_LINK_VERSION),o=t.indexOf(a[0]),l=t.substring(0,o),c=t.substring(o+a[0].length);r=Object(b.jsx)(n.Fragment,null,l,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank",external:!0},a[1]),c)}return r}s(43);var He=s(33);const We=e=>{const{alert:t,compressed:s}=e,[a,i]=r.a.useState(!1),[o,l]=r.a.useState(t.enabled),[c,u]=r.a.useState(t.muteAll),[d,m]=r.a.useState(!1),g=Object(n.useMemo)((()=>a&&N.a.shims.triggersActionsUi.getEditRuleFlyout({initialRule:{...t,ruleTypeId:t.alertTypeId},onClose:()=>{i(!1),oe.hideBottomBar=!1,ce()}})),[a]);return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:s?"flexStart":"spaceBetween",gutterSize:s?"m":"xs",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButton,{size:s?"s":"m",onClick:()=>{i(!0),oe.hideBottomBar=!0,ce()}},B.i18n.translate("xpack.monitoring.alerts.panel.editAlert",{defaultMessage:"Edit rule"}))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiSwitch,{name:"disable",disabled:d,checked:!o,onChange:async()=>{o?(l(!1),await async function(){m(!0);try{await N.a.shims.http.post(`${He.BASE_ALERTING_API_PATH}/rule/${t.id}/_disable`)}catch(e){N.a.shims.toastNotifications.addDanger({title:B.i18n.translate("xpack.monitoring.alerts.panel.disableAlert.errorTitle",{defaultMessage:"Unable to disable rule"}),text:e.message})}m(!1)}()):(l(!0),await async function(){m(!0);try{await N.a.shims.http.post(`${He.BASE_ALERTING_API_PATH}/rule/${t.id}/_enable`)}catch(e){N.a.shims.toastNotifications.addDanger({title:B.i18n.translate("xpack.monitoring.alerts.panel.enableAlert.errorTitle",{defaultMessage:"Unable to enable rule"}),text:e.message})}m(!1)}())},label:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.panel.disableTitle",defaultMessage:"Disable"})})),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiSwitch,{name:"mute",disabled:d,checked:c,"data-test-subj":"muteSwitch",onChange:async()=>{c?(u(!1),await async function(){m(!0);try{await N.a.shims.http.post(`${He.BASE_ALERTING_API_PATH}/rule/${t.id}/_unmute_all`)}catch(e){N.a.shims.toastNotifications.addDanger({title:B.i18n.translate("xpack.monitoring.alerts.panel.ummuteAlert.errorTitle",{defaultMessage:"Unable to unmute rule"}),text:e.message})}m(!1)}()):(u(!0),await async function(){m(!0);try{await N.a.shims.http.post(`${He.BASE_ALERTING_API_PATH}/rule/${t.id}/_mute_all`)}catch(e){N.a.shims.toastNotifications.addDanger({title:B.i18n.translate("xpack.monitoring.alerts.panel.muteAlert.errorTitle",{defaultMessage:"Unable to mute rule"}),text:e.message})}m(!1)}())},label:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.panel.muteTitle",defaultMessage:"Mute"})}))),g)},Ke=e=>{const{alert:t,alertState:s}=e,a=ge(r.a.useContext(Ve));if(!t)return null;if(a||!s)return Object(b.jsx)("div",{style:{padding:"1rem"}},Object(b.jsx)(We,{alert:t}));const i=s.state.ui.message.nextSteps&&s.state.ui.message.nextSteps.length?Object(b.jsx)(Y.EuiListGroup,null,s.state.ui.message.nextSteps.map(((e,t)=>Object(b.jsx)(Y.EuiListGroupItem,{size:"s",key:t,label:qe(e)})))):null,{code:o}=s.state.ui.message;return Object(b.jsx)(n.Fragment,null,Object(b.jsx)("div",{style:{padding:"1rem"}},Object(b.jsx)(Y.EuiTitle,{size:"xs"},Object(b.jsx)("h5",null,qe(s.state.ui.message))),null!=o&&o.length?Object(b.jsx)(Y.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:150},o):null,i?Object(b.jsx)(Y.EuiSpacer,{size:"s"}):null,i),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"s"}),Object(b.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"}},Object(b.jsx)(We,{alert:t})))};var Je=s(25),Ye=s.n(Je);const Qe="0,0.[00]",Xe="0,0.0 b",Ze="0,0.[0]a";function et(e,t=!1,s=null){return t?Ye.a.utc(e).format("LL LTS"):Ye.a.tz(e,s||Ye.a.tz.guess()).format("LL LTS")}function tt(e,t){return Ye()(e).tz("Browser"===t?Ye.a.tz.guess():t).fromNow()}function st(e,t){return Ye()(e).tz("Browser"===t?Ye.a.tz.guess():t).calendar()}function at(e,t){return e.state.ui.triggeredMS===t.state.ui.triggeredMS?0:e.state.ui.triggeredMS<t.state.ui.triggeredMS?1:-1}const it=e=>`${e} alert${e>1?"s":""}`,nt=e=>`${e} rule${e>1?"s":""}`,rt=B.i18n.translate("xpack.monitoring.alerts.badge.panelTitle",{defaultMessage:"Alerts"}),ot=B.i18n.translate("xpack.monitoring.rules.badge.panelTitle",{defaultMessage:"Rules"}),lt=B.i18n.translate("xpack.monitoring.alerts.badge.groupByNode",{defaultMessage:"Group by node"}),ct=B.i18n.translate("xpack.monitoring.alerts.badge.groupByType",{defaultMessage:"Group by alert type"}),ut=e=>{const{stateFilter:t=(()=>!0)}=e,s=Object.values(e.alerts).flat().filter((e=>Boolean(null==e?void 0:e.sanitizedRule))),[a,i]=r.a.useState(null),o=ge(r.a.useContext(Ve)),l=o?s.length:s.reduce(((e,{states:s})=>e+s.filter((({state:e})=>t(e))).length),0),[c,u]=r.a.useState(!o&&l>8),d=o?ot:rt;if(r.a.useEffect((()=>{o&&c&&u(!1)}),[o,c]),0===l)return null;const m=lt,g=c?function(e,t,s){const a={},i={};for(const{states:e,sanitizedRule:n}of t){const{id:t}=n;for(const r of e.filter((({state:e})=>s(e)))){const{state:e}=r;i[e.nodeId]=i[e.nodeId]||[],i[e.nodeId].push(r),a[e.nodeId]=a[e.nodeId]||{},a[e.nodeId][t]=a[r.state.nodeId][t]||{alert:n,states:[],count:0},a[e.nodeId][t].count++,a[e.nodeId][t].states.push(r)}}for(const e of Object.values(a))for(const{states:t}of Object.values(e))t.sort(at);const r=Object.keys(i).length;let o=r,l=r;return[{id:0,title:e,items:[...Object.keys(i).map(((e,t)=>{const a=i[e].filter((({state:e})=>s(e))),{nodeName:n,itemLabel:r}=a[0].state;return{name:Object(b.jsx)(Y.EuiText,null,n||r," (",a.length,")"),panel:t+1}}))]},...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]),r=[];let l="";for(const{alert:e,states:t}of i)for(const s of t){const{nodeName:t,itemLabel:a}=s.state;l=t||a,r.push({name:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiToolTip,{position:"top",content:st(s.state.ui.triggeredMS,N.a.shims.uiSettings.get("dateFormat:tz"))},Object(b.jsx)(Y.EuiText,{size:"s"},tt(s.state.ui.triggeredMS,N.a.shims.uiSettings.get("dateFormat:tz")))),Object(b.jsx)(Y.EuiText,{size:"s"},e.name)),panel:++o})}return e.push({id:s+1,title:l,items:r}),e}),[]),...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]);for(const{alert:t,states:s}of i)for(const a of s)e.push({id:++l,title:t.name,width:400,content:Object(b.jsx)(Ke,{alert:t,alertState:a})});return e}),[])]}(d,s,t):function(e,t,s,a){const i=t?S.U.reduce(((e,t)=>{const a=t.rules.filter((e=>s.find((({sanitizedRule:t})=>t.alertTypeId===e.ruleName))));return a.length>0&&e.push({...t,alerts:a.map((({ruleName:e})=>s.filter((({sanitizedRule:t})=>t.alertTypeId===e)).map((t=>({alert:t.sanitizedRule,states:[],ruleName:e}))))).flat(),alertCount:0}),e}),[]):S.U.reduce(((e,t)=>{const i=[];let n=0;for(const{ruleName:e}of t.rules){const t=s.filter((({sanitizedRule:t,states:s})=>e===t.alertTypeId&&s.length>0));t.length>0&&t.forEach((t=>{const s=t.states.filter((({state:e})=>a(e)));s.length>0&&(i.push({alert:t.sanitizedRule,states:s,ruleName:e}),n+=s.length)}))}return i.length>0&&e.push({...t,alertCount:n,alerts:i}),e}),[]);for(const e of i)for(const t of e.alerts)t.states.sort(at);const r=[{id:0,title:e,items:[...i.map(((e,s)=>({name:t?Object(b.jsx)(Y.EuiText,null,e.label):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,e.label," (",e.alertCount,")")),panel:s+1})))]}];if(t){let e=i.length,t=i.length,s=0;for(const t of i)r.push({id:s+1,title:`${t.label}`,items:t.alerts.map((t=>({name:Object(b.jsx)(Y.EuiText,null,t.alert.name),panel:++e}))).flat()}),s++;for(const e of i)for(const{alert:s}of e.alerts)r.push({id:++t,title:`${s.name}`,width:400,content:Object(b.jsx)(Ke,{alert:s})})}else{let e=i.length,s=0;for(const n of i)r.push({id:s+1,title:`${n.label}`,items:n.alerts.map((({alert:s,ruleName:i,states:n})=>{const r=n.filter((({state:e})=>a(e)));return{name:t?Object(b.jsx)(Y.EuiText,null,s.name):Object(b.jsx)(Y.EuiText,null,s.name," (",r.length,")"),panel:++e}}))}),s++;let o=i.length,l=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts){const e=[];for(const t of s.filter((({state:e})=>a(e)))){const{nodeName:s,itemLabel:a}=t.state;e.push({name:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiToolTip,{position:"top",content:st(t.state.ui.triggeredMS,N.a.shims.uiSettings.get("dateFormat:tz"))},Object(b.jsx)(Y.EuiText,{size:"s"},tt(t.state.ui.triggeredMS,N.a.shims.uiSettings.get("dateFormat:tz")))),Object(b.jsx)(Y.EuiText,{size:"s"},s||a)),panel:++l}),e.push({isSeparator:!0})}r.push({id:++o,title:`${t.name}`,items:e})}let c=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts)for(const e of s.filter((({state:e})=>a(e))))r.push({id:++c,title:`${t.name}`,width:400,content:Object(b.jsx)(Ke,{alert:t,alertState:e})})}return r}(d,!!o,s,t);g.length&&!o&&g[0].items&&g[0].items.push({isSeparator:!0},{name:Object(b.jsx)(Y.EuiSwitch,{checked:!1,onChange:()=>u(!c),label:c?ct:m})});const p=Object(b.jsx)(Y.EuiBadge,{iconType:"bell",color:o?"default":"danger","data-test-subj":"alertsBadge",onClickAriaLabel:o?nt(l):it(l),onClick:()=>i(!0)},o?nt(l):it(l));return Object(b.jsx)(Y.EuiPopover,{id:"monitoringAlertMenu",button:p,isOpen:!0===a,closePopover:()=>i(null),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(b.jsx)(Y.EuiContextMenu,{key:`${c?"byNode":"byType"}_${g.length}`,initialPanelId:0,panels:g}))},dt=e=>{const{alerts:t,showBadge:s=!1,showOnlyCount:a=!1,stateFilter:i=(()=>!0)}=e,n=ge(r.a.useContext(Ve));if(!t)return null;let o=!1;const l=Object.values(t).flat().reduce(((e,t)=>{const s=t.states.filter((e=>e.firing));if(e+=s.filter((e=>i(e.state))).length,s.length&&!o)for(const e of t.states)if(i(e.state)&&e.state.ui.severity===ae.c.Danger){o=!0;break}return e}),0);if(0===l&&(!n||a))return Object(b.jsx)(Y.EuiToolTip,{content:B.i18n.translate("xpack.monitoring.alerts.status.clearToolip",{defaultMessage:"No alerts firing"}),position:"bottom"},Object(b.jsx)(Y.EuiHealth,{color:"success","data-test-subj":"alertIcon"},a?l:Object(b.jsx)("span",{"data-test-subj":"alertStatusText"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.status.clearText",defaultMessage:"Clear"}))));if(s||n)return Object(b.jsx)(ut,{alerts:t,stateFilter:i});const c=o?ae.c.Danger:ae.c.Warning,u=(()=>{switch(c){case ae.c.Danger:return B.i18n.translate("xpack.monitoring.alerts.status.highSeverityTooltip",{defaultMessage:"There are some critical issues that require your immediate attention!"});case ae.c.Warning:return B.i18n.translate("xpack.monitoring.alerts.status.mediumSeverityTooltip",{defaultMessage:"There are some issues that might have impact on the stack."});default:return B.i18n.translate("xpack.monitoring.alerts.status.lowSeverityTooltip",{defaultMessage:"There are some low-severity issues."})}})();return Object(b.jsx)(Y.EuiToolTip,{content:u,position:"bottom"},Object(b.jsx)(Y.EuiHealth,{color:c,"data-test-subj":"alertIcon"},a?l:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.status.alertsTooltip",defaultMessage:"Alerts"})))};s(57);const mt=({label:e,value:t,...s},a)=>Object(b.jsx)(Y.EuiFlexItem,d()({style:{maxWidth:200},key:`summary-status-item-${a}`,grow:!1},s),Object(b.jsx)(Y.EuiStat,{title:t,className:"monSummaryStatusNoWrap__stat",titleSize:"xxxs",textAlign:"left",description:e?`${e}`:""})),gt=({status:e})=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.summaryStatus.statusIconTitle",defaultMessage:"Status: {statusIcon}",values:{statusIcon:Object(b.jsx)(Be,{type:e.toUpperCase(),label:B.i18n.translate("xpack.monitoring.summaryStatus.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:e}})})}})),pt=({status:e,IconComponent:t,isOnline:s=!1})=>null!=e&&e.length?Object(b.jsx)(Y.EuiStat,{"data-test-subj":"status",title:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(t,{status:e,isOnline:s}),"",Object(v.capitalize)(e)),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:B.i18n.translate("xpack.monitoring.summaryStatus.statusDescription",{defaultMessage:"Status"})}):null;function jt({metrics:e,alerts:t,status:s,isOnline:a=!1,IconComponent:i=gt,StatusIndicator:n=pt,...r}){return Object(b.jsx)("div",d()({},r,{className:"monSummaryStatusNoWrap"}),Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"m",alignItems:"center",justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{className:"eui-textTruncate",style:{maxWidth:200},key:"summary-status-item-status",grow:!1},Object(b.jsx)(n,{status:s,isOnline:a,IconComponent:i})),t?Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiStat,{title:Object(b.jsx)(dt,{showOnlyCount:!0,alerts:t}),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:B.i18n.translate("xpack.monitoring.summaryStatus.alertsDescription",{defaultMessage:"Alerts"})})):null,e.map(mt)))}function bt({status:e}){const t=(()=>{const t=e.toUpperCase();return Ae[t]||Ae.GRAY})();return Object(b.jsx)(Be,{type:t,label:B.i18n.translate("xpack.monitoring.elasticsearch.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}var xt=s(20),ht=s.n(xt);function ft(e,t){return vt(e,"byte")+" / "+vt(t,"byte")}function Ot(e,t){return vt(e/t,"0.00%")}function vt(e,t){const s=Number.isNaN(e);let a="0,0.0";if("number"!=typeof e||s){if(void 0!==e&&!s)return e;e=0,a="0"}let i="";switch(t){case"time_since":return $e()($e()()-e).from($e()(),!0);case"time":return $e()(e).format("H:mm:ss");case"int_commas":a="0,0";break;case"byte":case"bytes":a+=" b";break;case"ms":i="ms";break;default:t&&(a=t)}return ht()(e).format(a)+i}function Et(e,t,s,a={}){const{prependSpace:i=!0}=a;if(Boolean(e)||0===e){let a="";return void 0!==s&&(a=i?` ${s}`:s),vt(e,t)+a}return B.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"})}function Mt({stats:e,alerts:t}){const{dataSize:s,nodesCount:a,indicesCount:i,memUsed:n,memMax:r,totalShards:o,unassignedShards:l,documentCount:c,status:u}=e,d=[{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:a,"data-test-subj":"nodesCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.indicesLabel",{defaultMessage:"Indices"}),value:i,"data-test-subj":"indicesCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.memoryLabel",{defaultMessage:"JVM Heap"}),value:Et(n,"byte")+" / "+Et(r,"byte"),"data-test-subj":"memory"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.totalShardsLabel",{defaultMessage:"Total shards"}),value:o,"data-test-subj":"totalShards"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.unassignedShardsLabel",{defaultMessage:"Unassigned shards"}),value:l,"data-test-subj":"unassignedShards"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.documentsLabel",{defaultMessage:"Documents"}),value:Et(c,"int_commas"),"data-test-subj":"documentCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.dataLabel",{defaultMessage:"Data"}),value:Et(s,"byte"),"data-test-subj":"dataSize"}];return Object(b.jsx)(jt,{metrics:d,status:u,alerts:t,IconComponent:({status:e})=>Object(b.jsx)(bt,{status:e}),"data-test-subj":"elasticsearchClusterStatus"})}const yt=B.i18n.translate("xpack.monitoring.setupMode.node",{defaultMessage:"node"}),kt=B.i18n.translate("xpack.monitoring.setupMode.nodes",{defaultMessage:"nodes"}),St=B.i18n.translate("xpack.monitoring.setupMode.instance",{defaultMessage:"instance"}),_t=B.i18n.translate("xpack.monitoring.setupMode.instances",{defaultMessage:"instances"}),Tt=B.i18n.translate("xpack.monitoring.setupMode.server",{defaultMessage:"server"}),wt=B.i18n.translate("xpack.monitoring.setupMode.servers",{defaultMessage:"servers"});function Ct(e){return e===S.a?e.toUpperCase():Object(v.capitalize)(e)}const It=[S.F,S.r],Lt=[S.B,S.b];function Ft(e,t=!1){return Lt.includes(e)?t?_t:St:It.includes(e)?t?kt:yt:e===S.a?t?wt:Tt:e}const Pt=({rows:e,search:t={},columns:s,setupMode:a,productName:i,...o})=>{const[l,c]=r.a.useState(e.length>0);if(t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar"),t.box&&!t.box.schema&&(t.box.schema=!0),t){const s=t.onChange;t.onChange=t=>{const a=Y.EuiSearchBar.Query.execute(t.query,e,o.executeQueryOptions);return c(a.length>0),s&&s(t),!0}}const u=s.map((e=>("sortable"in e||(e.sortable=!0),e)));let m=null;return a&&pe(ae.d.MetricbeatMigration)&&(m=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiButton,{iconType:"flag",onClick:()=>a.openFlyout({},!0)},B.i18n.translate("xpack.monitoring.euiTable.setupNewButtonLabel",{defaultMessage:"Monitor another {identifier} with Metricbeat",values:{identifier:Ft(i)}})))),Object(b.jsx)("div",{"data-test-subj":`${o.className}Container`},Object(b.jsx)(Y.EuiInMemoryTable,d()({"data-test-subj":e.length&&!0===l?"monitoringTableHasData":"monitoringTableNoData",items:e,search:t,columns:u},o)),m)};function Nt({rows:e,search:t={},pagination:s,columns:a,onTableChange:i,setupMode:o,productName:l,...c}){const[u,m]=r.a.useState(""),[g,p]=r.a.useState(!1),[j,x]=r.a.useState({index:s.pageIndex,size:s.pageSize});s.totalItemCount||(s.totalItemCount=e&&e.length||0);const[h,f]=r.a.useState(c.sorting);t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar");const O=a.map((e=>("sortable"in e||(e.sortable=!0),e)));let v=null;return o&&o.enabled&&pe(ae.d.MetricbeatMigration)&&(v=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiButton,{iconType:"flag",onClick:()=>o.openFlyout({},!0)},B.i18n.translate("xpack.monitoring.euiSSPTable.setupNewButtonLabel",{defaultMessage:"Set up monitoring for new {identifier}",values:{identifier:Ft(l)}})))),Object(b.jsx)("div",{"data-test-subj":`${c.className}Container`},Object(b.jsx)(Y.EuiSearchBar,d()({},t,{onChange:async({queryText:e})=>{const t={...j,index:0};x(t),m(e),c.fetchMoreData?(p(!0),await c.fetchMoreData({page:t,sort:h,queryText:e}),p(!1)):i({page:j,sort:h.sort,queryText:e})}})),Object(b.jsx)(Y.EuiSpacer,{size:"l"}),Object(b.jsx)(Y.EuiBasicTable,d()({},c,{"data-test-subj":e.length?"monitoringTableHasData":"monitoringTableNoData",items:e,pagination:s,onChange:async({page:e,sort:t})=>{x(e),f({sort:t}),c.fetchMoreData?(p(!0),await c.fetchMoreData({page:e,sort:{sort:t},queryText:u}),p(!1),i({page:e,sort:t})):i({page:e,sort:t,queryText:u})},columns:O,loading:c.isLoading||g})),v)}var Dt=s(34);const Rt=e=>t=>{const s=t.get(S.Z)||{},a=Object(v.get)(s,[e,"sort"]);return{page:Object(v.get)(s,[e,"page"]),sort:a}},At=e=>(t,{sort:s,page:a})=>{const i=t.get(S.Z)||{};return Object(Dt.set)(i,[e,"sort"],s||void 0),Object(Dt.set)(i,[e,"page"],a||void 0),t.set(S.Z,i),i},zt=({isSnapshot:e,repo:t,snapshot:s})=>e?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.snapshotTitle",defaultMessage:"Repo: {repo} / Snapshot: {snapshot}",values:{repo:t,snapshot:s}})):null,Bt=e=>{const{name:t,shard:s,relocationType:a}=e;return Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiLink,{href:Te(`#/elasticsearch/indices/${t}`)},t),Object(b.jsx)("br",null),Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.shardDescription",defaultMessage:"Shard: {shard}",values:{shard:s}}),Object(b.jsx)("br",null),Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.recoveryTypeDescription",defaultMessage:"Recovery type: {relocationType}",values:{relocationType:a}}),Object(b.jsx)("div",null,Object(b.jsx)(zt,e)))},Vt=({startTime:e,totalTime:t})=>Object(b.jsx)(Y.EuiToolTip,{content:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.totalTimeTooltip",defaultMessage:"Started: {startTime}",values:{startTime:e}}),position:"bottom"},Object(b.jsx)(Y.EuiLink,null,t)),Ut=({isCopiedFromPrimary:e,sourceTransportAddress:t,children:s})=>{if(!t)return s;const a=Object(b.jsx)(n.Fragment,null,t,Object(b.jsx)("br",null),Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip",defaultMessage:"Copied from {copiedFrom} shard",values:{copiedFrom:e?Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.primarySourceText",defaultMessage:"primary"}):Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.replicaSourceText",defaultMessage:"replica"})}}));return Object(b.jsx)(Y.EuiToolTip,{content:a,position:"bottom"},Object(b.jsx)(Y.EuiLink,null,s))},$t=e=>{const{sourceName:t,targetName:s,targetTransportAddress:a}=e,i=a||B.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.unknownTargetAddressContent",{defaultMessage:"Unknown"});return Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Ut,e,t)),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiIcon,{type:"arrowRight",size:"s"})),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiToolTip,{content:i,position:"bottom"},Object(b.jsx)(Y.EuiLink,null,s))))},Gt=({filesPercent:e,filesDone:t,filesTotal:s})=>Object(b.jsx)(n.Fragment,null,e,Object(b.jsx)("br",null),t," / ",s),qt=({bytesPercent:e,bytesDone:t,bytesTotal:s})=>Object(b.jsx)(n.Fragment,null,e,Object(b.jsx)("br",null),t," / ",s),Ht=({hasTranslog:e,translogPercent:t,translogDone:s,translogTotal:a})=>e?Object(b.jsx)(n.Fragment,null,t,Object(b.jsx)("br",null),s," / ",a):Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.progress.noTranslogProgressLabel",defaultMessage:"n/a"}),Wt=e=>{if(void 0!==e){const t=e.match(/([\d\.:]+)\]$/);if(t)return t[1]}return e},Kt=e=>Object(v.capitalize)(e.toLowerCase()),Jt=[{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.indexTitle",{defaultMessage:"Index"}),field:"name",render:(e,t)=>Object(b.jsx)(Bt,t)},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.stageTitle",{defaultMessage:"Stage"}),field:"stage"},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.totalTimeTitle",{defaultMessage:"Total Time"}),field:null,render:e=>Object(b.jsx)(Vt,e)},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.sourceDestinationTitle",{defaultMessage:"Source / Destination"}),field:null,render:e=>Object(b.jsx)($t,e)},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.filesTitle",{defaultMessage:"Files"}),field:null,render:e=>Object(b.jsx)(Gt,e)},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.bytesTitle",{defaultMessage:"Bytes"}),field:null,render:e=>Object(b.jsx)(qt,e)},{name:B.i18n.translate("xpack.monitoring.kibana.shardActivity.translogTitle",{defaultMessage:"Translog"}),field:null,render:e=>Object(b.jsx)(Ht,e)}],Yt=e=>{var t;const{data:s,sorting:a,pagination:r,onTableChange:o,toggleShardActivityHistory:l,showShardActivityHistory:c}=e,{services:u}=Object(i.useKibana)(),d=null===(t=u.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),m=s.map((e=>(e=>{const{id:t,stage:s,index:a,index_name:i,name:n,primary:r,start_time_in_millis:o,total_time_in_millis:l,start_time:c,total_time:u,source:d,target:m,translog:g,type:p,timezone:j}=e,{files:b,size:x}=a;return{name:i||n,shard:`${t} / ${r?"Primary":"Replica"}`,relocationType:"PRIMARY_RELOCATION"===p?"Primary Relocation":Kt(p),stage:Kt(s),startTime:et(o||(null==c?void 0:c.ms),j),totalTime:Et(Math.floor((l||(null==u?void 0:u.ms))/1e3),"00:00:00"),isCopiedFromPrimary:!r||"PRIMARY_RELOCATION"===p,sourceName:void 0===d.name?"n/a":d.name,targetName:m.name,sourceTransportAddress:Wt(d.transport_address),targetTransportAddress:Wt(m.transport_address),isSnapshot:"SNAPSHOT"===p,repo:d.repository,snapshot:d.snapshot,filesPercent:b.percent,filesDone:b.reused?b.reused:b.recovered,filesTotal:b.total,bytesPercent:x.percent,bytesDone:Et(x.recovered_in_bytes+x.reused_in_bytes,"byte"),bytesTotal:Et(x.total_in_bytes,"byte"),hasTranslog:g.total>0,translogPercent:g.percent,translogDone:g.total,translogTotal:g.total_on_start}})({...e,timezone:d})));return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivityTitle",defaultMessage:"Shard Activity"})))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiSwitch,{id:"monitoring_completed_recoveries",label:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.completedRecoveriesLabel",defaultMessage:"Completed recoveries"}),onChange:l,checked:c}),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Pt,{className:"esShardActivityTable",rows:m,columns:Jt,message:c?B.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.noDataMessage",{defaultMessage:"There are no historical shard activity records for the selected time range."}):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextProblem",defaultMessage:"There are no active shard recoveries for this cluster."}),Object(b.jsx)("br",null),Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextSolution",defaultMessage:"Try viewing {shardActivityHistoryLink}.",values:{shardActivityHistoryLink:Object(b.jsx)(Y.EuiLink,{onClick:l},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkText",defaultMessage:"completed recoveries"}))}})),sorting:a,search:!1,pagination:r,onTableChange:o,executeQueryOptions:{defaultFields:["name"]}}))};function Qt(e,t){let s;return s="elasticsearch"===e?["#3ebeb0","#3b73ac","#f08656","#6c478f"]:"apm"===e?Object(Y.euiPaletteColorBlind)():["#e8488b","#3b73ac","#3cab63","#6c478f"],s[t]?s[t]:"#000"}var Xt=s(26),Zt=s.n(Xt);const es=Zt()({});class chart_target_ChartTarget extends r.a.Component{shouldComponentUpdate(){return!this.plot}shutdownChart(){if(!this.plot)return;const{target:e}=this.refs;Zt()(e).off("plothover"),Zt()(e).off("mouseleave"),Zt()(e).off("plotselected"),Zt()(e).off("plotselecting"),this.plot.shutdown(),es.off("thorPlotHover"),es.off("thorPlotLeave"),es.off("thorPlotSelecting"),es.off("thorPlotBrush")}componentWillUnmount(){this.shutdownChart(),window.removeEventListener("resize",this._handleResize),this.componentUnmounted=!0}filterByShow(e){return e?t=>e.some((e=>e.toLowerCase()===t.id.toLowerCase())):()=>!0}UNSAFE_componentWillReceiveProps(e){if(this.plot&&!Object(v.isEqual)(e,this.props)){const{series:t,timeRange:s}=e,a=this.plot.getAxes().xaxis.options;a.min=Object(v.get)(s,"min"),a.max=Object(v.get)(s,"max"),this.plot.setData(this.filterData(t,e.seriesToShow)),this.plot.setupGrid(),this.plot.draw()}}componentDidMount(){this.renderChart()}componentDidUpdate(){this.shutdownChart(),this.renderChart()}filterData(e,t){return Object(v.filter)(e,this.filterByShow(t))}async getOptions(){return{...await async function(e){var t;const s=null===(t=N.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),a={legend:{show:!1},xaxis:{color:S.f,timezone:"Browser"===s?"browser":"utc",mode:"time",font:{color:S.g}},yaxis:{color:S.f,font:{color:S.g}},series:{points:{show:!0,radius:1},lines:{show:!0,lineWidth:2},shadowSize:0},grid:{margin:0,borderWidth:1,borderColor:S.f,hoverable:!0},crosshair:{mode:"x",color:"#c66",lineWidth:2},selection:{mode:"x",color:S.g}};return Object(v.merge)(a,e)}({yaxis:{tickFormatter:this.props.tickFormatter},xaxis:this.props.timeRange}),...this.props.options}}async renderChart(){const{target:e}=this.refs,{series:t}=this.props,s=this.filterData(t,this.props.seriesToShow);this.plot=Zt.a.plot(e,s,await this.getOptions()),!this.componentUnmounted&&this.plot&&(this._handleResize=()=>{if(this.plot)try{this.plot.resize(),this.plot.setupGrid(),this.plot.draw()}catch(e){}},window.addEventListener("resize",this._handleResize,!1),this.handleMouseLeave=()=>{es.trigger("thorPlotLeave",[])},this.handlePlotHover=(e,t,s)=>{es.trigger("thorPlotHover",[t,s,this.plot])},this.handleThorPlotHover=(e,t,s,a)=>{this.plot!==a&&this.plot.setCrosshair({x:Object(v.get)(t,"x")}),this.props.updateLegend(t,s)},this.handleThorPlotLeave=()=>{this.plot.clearCrosshair(),this.props.updateLegend()},this.handleThorPlotSelecting=(e,t,s)=>{if(this.plot!==s){const e=!0;this.plot.setSelection({xaxis:t},e)}},this.handleThorPlotBrush=()=>{this.plot.clearSelection()},this.selectingChart=(e,t)=>{if(t){const e=t.xaxis;es.trigger("thorPlotSelecting",[e,this.plot])}},this.brushChart=(e,t)=>{this.props.onBrush(t),es.trigger("thorPlotBrush")},Zt()(e).on("plothover",this.handlePlotHover),Zt()(e).on("mouseleave",this.handleMouseLeave),Zt()(e).on("plotselected",this.brushChart),Zt()(e).on("plotselecting",this.selectingChart),es.on("thorPlotHover",this.handleThorPlotHover),es.on("thorPlotLeave",this.handleThorPlotLeave),es.on("thorPlotSelecting",this.handleThorPlotSelecting),es.on("thorPlotBrush",this.handleThorPlotBrush))}render(){return Object(b.jsx)("div",{ref:"target",style:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"}})}}function ts(e){return Object(b.jsx)("div",{style:{display:"flex",rowDirection:"column",flex:"1 0 auto",position:"relative"}},Object(b.jsx)(chart_target_ChartTarget,e))}s(62);class horizontal_legend_HorizontalLegend extends r.a.Component{constructor(){super(),this.formatter=this.formatter.bind(this),this.createSeries=this.createSeries.bind(this)}displayValue(e){return Object(b.jsx)("span",{className:"monRhythmChart__legendValue"},e)}validValue(e){return null!=e&&("string"==typeof e||!isNaN(e))}formatter(e,t){if(!this.validValue(e))return Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.chart.horizontalLegend.notAvailableLabel",defaultMessage:"N/A"});if(t&&t.tickFormatter)return this.displayValue(t.tickFormatter(e));const s=this.props.legendFormatter||this.props.tickFormatter;return Object(v.isFunction)(s)?this.displayValue(s(e)):this.displayValue(e)}createSeries(e,t){const s=["monRhythmChart__legendItem"];return Object(v.includes)(this.props.seriesFilter,e.id)||s.push("monRhythmChart__legendItem-isDisabled"),e.label&&!1!==e.legend?Object(b.jsx)(Y.EuiFlexItem,{grow:!1,key:t},Object(b.jsx)("button",{className:s.join(" "),onClick:t=>this.props.onToggle(t,e.id)},Object(b.jsx)("span",{className:"monRhythmChart__legendLabel"},Object(b.jsx)(Y.EuiIcon,{className:"monRhythmChart__legendIndicator","aria-label":B.i18n.translate("xpack.monitoring.chart.horizontalLegend.toggleButtonAriaLabel",{defaultMessage:"toggle button"}),size:"l",type:"dot",color:e.color})," "+e.label+" "),this.formatter(this.props.seriesValues[e.id],e))):Object(b.jsx)("div",{key:t,style:{display:"none"}})}render(){const e=this.props.series.map(this.createSeries);return Object(b.jsx)("div",{className:"monRhythmChart__legendHorizontal"},Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0,gutterSize:"s",className:"monRhythmChart__legendSeries"},e))}}function ss(e,t,s){for(let a=0;a<e.length;a++){const i=e[a],n=i.data;let r=null;n.length>t&&n[t]&&(r=n[t][1]),s(i.id,r)}}function as(e,t){const s=e.length;if(1===s)return 0;if(0!==s){let a=null;e[0]&&(a=0);for(let i=1;i<s;++i)if(e[i]){if(e[i][0]>t){const s=e[i][0]-t;return null!==a&&s>Math.abs(t-e[a][0])?a:i}a=i}}return s-1}s(67);class timeseries_visualization_TimeseriesVisualization extends r.a.Component{constructor(e){super(e),this.debouncedUpdateLegend=Object(v.debounce)(this.updateLegend,S.q),this.debouncedUpdateLegend=this.debouncedUpdateLegend.bind(this),this.toggleFilter=this.toggleFilter.bind(this);const t=this.getLastValues(e);this.state={values:{},seriesToShow:Object(v.keys)(t),ignoreVisibilityUpdates:!1}}filterLegend(e){if(!Object(v.has)(this.state.values,e))return[];const t=Object(v.keys)(this.state.values).length!==this.state.seriesToShow.length,s=Object(v.includes)(this.state.seriesToShow,e),a=[];return t&&s?this.setState({ignoreVisibilityUpdates:!1,seriesToShow:Object.keys(this.state.values)}):(a.push(e),this.setState({ignoreVisibilityUpdates:!0,seriesToShow:[e]})),a}toggleFilter(e,t){const s=this.filterLegend(t);Object(v.isFunction)(this.props.onFilter)&&this.props.onFilter(s)}getLastValues(e){e=e||this.props;const t={};return e.series.forEach((e=>{e.id||(e.id=e.label),t[e.id]=function(e){if(Object(v.isNumber)(e))return e;if(!Array.isArray(e))return null;const t=Object(v.get)(Object(v.last)(e),"[1]");return Object(v.isNumber)(t)?t:null}(e.data)})),t}updateLegend(e,t){const s={};if(e){const a=(e,t)=>{s[e]=t};t?ss(this.props.series,t.dataIndex,a):function(e,t,s){for(let a=0;a<e.length;a++){const i=as(e[a].data,t);if(-1!==i){ss(e,i,s);break}}}(this.props.series,e.x,a)}else Object(v.assign)(s,this.getLastValues());this.setState({values:s})}UNSAFE_componentWillReceiveProps(e){const t=this.getLastValues(e),s=Object(v.keys)(this.state.values),a=Object(v.keys)(t),i={values:t};Object(v.difference)(a,s).length&&!this.state.ignoreVisibilityUpdates&&(i.seriesToShow=a),this.setState(i)}render(){const e=this.props.hasLegend?Object(b.jsx)(horizontal_legend_HorizontalLegend,d()({seriesFilter:this.state.seriesToShow,seriesValues:this.state.values,onToggle:this.toggleFilter},this.props)):null;return Object(b.jsx)("div",{className:"monRhythmChart"},Object(b.jsx)("div",{style:{flexDirection:"column"},className:"monRhythmChart__content"},Object(b.jsx)("div",{className:"monRhythmChart__visualization"},Object(b.jsx)(ts,d()({seriesToShow:this.state.seriesToShow,updateLegend:this.debouncedUpdateLegend},this.props))),e))}}function is(e,t="metric.format"){const s=Object(v.get)(e,t,"0,0.0"),a=Object(v.get)(e,"metric.units","");return function(e){let t=ht()(e).format(s);return"B"!==a&&""!==a&&(t+=" "+a),t}}function ns({series:e,onBrush:t}){const s=e.map(((e,t)=>({color:Qt(e.metric.app,t),data:e.data,label:e.metric.label}))),a=Object(v.first)(e),i=Object(v.get)(a,"timeRange"),n=is(a),r=a.metric.legendFormat&&is(a,"metric.legendFormat");return Object(b.jsx)(timeseries_visualization_TimeseriesVisualization,{series:s,timeRange:i,tickFormatter:n,legendFormatter:r,onBrush:t})}function rs({series:e,bucketSize:t}){const s=e.map(((e,t)=>Object(b.jsx)("tr",{key:`chart-tooltip-${t}`,"data-debug-metric-agg":e.metric.metricAgg,"data-debug-metric-field":e.metric.field,"data-debug-metric-is-derivative":e.metric.isDerivative,"data-debug-metric-has-calculation":e.metric.hasCalculation},Object(b.jsx)("td",{className:"monChart__tooltipLabel"},e.metric.label),Object(b.jsx)("td",{className:"monChart__tooltipValue"},e.metric.description))));return Object(b.jsx)("table",null,Object(b.jsx)("tbody",null,Object(b.jsx)("tr",null,Object(b.jsx)("td",{className:"monChart__tooltipLabel"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.chart.infoTooltip.intervalLabel",defaultMessage:"Interval"})),Object(b.jsx)("td",{className:"monChart__tooltipValue"},t)),s))}function os(e=[]){return Object(v.chain)(e.map((e=>e.metric.title||e.metric.label))).first().value()}timeseries_visualization_TimeseriesVisualization.defaultProps={hasLegend:!0},s(72),s(77);const ls=e=>void 0!==e.alerts,cs=e=>e&&e.showZoomOutBtn()?Object(b.jsx)(Y.EuiFlexItem,{className:"monRhythmChart__zoom"},Object(b.jsx)(Y.EuiTextAlign,{textAlign:"right"},Object(b.jsx)(Y.EuiButtonEmpty,{color:"primary",size:"s",iconType:"magnifyWithMinus",onClick:e.zoomOutHandler},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.zoomOut",defaultMessage:"Zoom out"})))):null,us=e=>e?Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiBadge,{color:"hollow",iconType:"cheer"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.technicalPreview",defaultMessage:"Technical Preview"}))):null;function ds({series:e,onBrush:t,zoomInfo:s}){if(void 0===e)return null;const a=ls(e)?[]:e,i=os(a),r=function(e=[]){return Object(v.chain)(e.map((e=>Boolean(e.metric.technicalPreview)))).first().value()}(a),o=i.replace(/\s+/,"--"),l=function(e){let t=Object(v.get)(e,"[0].metric.units");if("B"===t){let s=0;Object(v.forEach)(e,(e=>{const t=Object(v.last)(e.data)||[null,0];s=Math.max(s,t[1])})),t=ht()(s).byteUnits()}return t}(a),c=Object(v.get)(Object(v.first)(a),"bucket_size"),u=[B.i18n.translate("xpack.monitoring.chart.seriesScreenReaderListDescription",{defaultMessage:"Interval: {bucketSize}",values:{bucketSize:c}})].concat(a.map((e=>`${e.metric.label}: ${e.metric.description}`)));let d=null;const m=ls(e)?e:void 0;return null!=m&&m.alerts&&(d=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:m.alerts}))),Object(b.jsx)(Y.EuiFlexGroup,{direction:"column",gutterSize:"s",className:"monRhythmChart__wrapper"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,os(a),l?` (${l})`:"",Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("span",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.chart.screenReaderUnaccessibleTitle",defaultMessage:"This chart is not screen reader accessible"})))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiIconTip,{anchorClassName:"eui-textRight eui-alignMiddle monChart__tooltipTrigger",type:"iInCircle",position:"right",content:Object(b.jsx)(rs,{series:a,bucketSize:c})}),Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("span",{id:`monitoringChart${o}`},u.join(". "))))),us(r),cs(s))),d)),Object(b.jsx)(Y.EuiFlexItem,{style:{minHeight:"200px"}},Object(b.jsx)(ns,{series:a,onBrush:t})))}const ms=r.a.createContext(null),gs=({children:e,...t})=>{const{navigateToUrl:s,currentAppId:a}=t;return Object(b.jsx)(ms.Provider,{value:{navigateToUrl:s,currentAppId:a}},e)},ps=({children:e,coreStart:t})=>{const{navigateToUrl:s,currentAppId$:a}=t.application,i=k()(a,void 0);return Object(b.jsx)(ms.Provider,{value:{navigateToUrl:s,currentAppId:i}},e)};s(35);const js={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},bs=({children:e,navigateToUrl:t,currentAppId:s,...a})=>{const i=Object(n.useRef)(null),r=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:s,currentAppId:a})=>{if(!t||!a)return;const i=((e,t)=>{let s=e;do{var a,i;if("a"===(null===(a=s)||void 0===a?void 0:a.tagName.toLowerCase()))return s;const e=null===(i=s)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;s=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const n=i.href,r=""===i.target||"_self"===i.target,o=0===e.button;n&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),s(i.href))})({event:e,currentAppId:s,navigateToUrl:t,container:i.current})),[s,t]);return Object(b.jsx)("div",d()({onClick:r,ref:i,css:js,"data-test-subj":"kbnRedirectAppLink"},a),e)},xs=({children:e,...t})=>Object(b.jsx)(bs,d()({},function(){const e=Object(n.useContext)(ms);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),hs=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:s,...a}=t,i=Object(b.jsx)(xs,a,e);return Object(b.jsx)(ps,{coreStart:s},i)}const{navigateToUrl:s,currentAppId:a,...i}=t,n=Object(b.jsx)(xs,i,e);return Object(b.jsx)(gs,{currentAppId:a,navigateToUrl:s},n)},fs=({children:e})=>Object(b.jsx)("span",{style:{fontFamily:"monospace"}},e),Os=({reason:e})=>{const t=N.a.shims.docLinks.links.filebeat.installation,s=N.a.shims.docLinks.links.filebeat.elasticsearchModule,a=N.a.shims.docLinks.links.monitoring.troubleshootKibana;let i=B.i18n.translate("xpack.monitoring.logs.reason.defaultTitle",{defaultMessage:"No log data found"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessage",defaultMessage:"We did not find any log data and we are unable to diagnose why. {link}",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:t},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessageLink",defaultMessage:"Please verify your setup is correct."}))}});return!1===e.indexPatternExists?(i=B.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternTitle",{defaultMessage:"No log data found"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternMessage",defaultMessage:"Set up {link}, then configure your Elasticsearch output to your monitoring cluster.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:t},B.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternLink",{defaultMessage:"Filebeat"}))}})):!1===e.indexPatternInTimeRangeExists||!1===e.typeExists&&e.typeExistsAtAnyTime?(i=B.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternInTimePeriodTitle",{defaultMessage:"No logs for the selected time"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternInTimePeriodMessage",defaultMessage:"Use the time filter to adjust your timeframe."})):!1===e.typeExists?(i=B.i18n.translate("xpack.monitoring.logs.reason.noTypeTitle",{defaultMessage:"No logs for Elasticsearch"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noTypeMessage",defaultMessage:"Follow {link} to set up Elasticsearch.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:s},B.i18n.translate("xpack.monitoring.logs.reason.noTypeLink",{defaultMessage:"these directions"}))}})):!1===e.usingStructuredLogs?(i=B.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsTitle",{defaultMessage:"No structured logs found"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.notUsingStructuredLogsMessage",defaultMessage:"Check if the {varPaths} setting {link}.",values:{varPaths:Object(b.jsx)(fs,null,"var.paths"),link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:s},B.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsLink",{defaultMessage:"points to JSON logs"}))}})):!1===e.clusterExists?(i=B.i18n.translate("xpack.monitoring.logs.reason.noClusterTitle",{defaultMessage:"No logs for this cluster"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noClusterMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:s},B.i18n.translate("xpack.monitoring.logs.reason.noClusterLink",{defaultMessage:"setup"}))}})):!1===e.nodeExists?(i=B.i18n.translate("xpack.monitoring.logs.reason.noNodeTitle",{defaultMessage:"No logs for this Elasticsearch node"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noNodeMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:s},B.i18n.translate("xpack.monitoring.logs.reason.noNodeLink",{defaultMessage:"setup"}))}})):!1===e.indexExists?(i=B.i18n.translate("xpack.monitoring.logs.reason.noIndexTitle",{defaultMessage:"No logs for this index"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexMessage",defaultMessage:"We found logs, but none for this index. If this problem continues, check that your {link} is correct.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:s},B.i18n.translate("xpack.monitoring.logs.reason.noIndexLink",{defaultMessage:"setup"}))}})):!1===e.correctIndexName&&(i=B.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameTitle",{defaultMessage:"Corrupted filebeat index"}),n=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.reason.correctIndexNameMessage",defaultMessage:"There is an issue reading from your filebeat indices.  {link}.",values:{link:Object(b.jsx)(Y.EuiLink,{target:"_blank",href:a},B.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameLink",{defaultMessage:"Click here for more information"}))}})),Object(b.jsx)(Y.EuiCallOut,{title:i,color:"warning",iconType:"help"},Object(b.jsx)("p",null,n))},vs=e=>{var t;return et(e,null===(t=N.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"))},Es=B.i18n.translate("xpack.monitoring.logs.listing.timestampTitle",{defaultMessage:"Timestamp"}),Ms=B.i18n.translate("xpack.monitoring.logs.listing.levelTitle",{defaultMessage:"Level"}),ys=B.i18n.translate("xpack.monitoring.logs.listing.typeTitle",{defaultMessage:"Type"}),ks=B.i18n.translate("xpack.monitoring.logs.listing.messageTitle",{defaultMessage:"Message"}),Ss=B.i18n.translate("xpack.monitoring.logs.listing.componentTitle",{defaultMessage:"Component"}),_s=B.i18n.translate("xpack.monitoring.logs.listing.nodeTitle",{defaultMessage:"Node"}),Ts=[{field:"timestamp",name:Es,width:"12%",render:e=>vs(e)},{field:"level",name:Ms,width:"5%"},{field:"type",name:ys,width:"10%",render:e=>Object(v.upperFirst)(e)},{field:"message",name:ks,width:"55%"},{field:"component",name:Ss,width:"18%"}],ws=[{field:"timestamp",name:Es,width:"12%",render:e=>vs(e)},{field:"level",name:Ms,width:"5%"},{field:"type",name:ys,width:"10%",render:e=>Object(v.upperFirst)(e)},{field:"message",name:ks,width:"45%"},{field:"component",name:Ss,width:"15%"},{field:"node",name:_s,width:"13%"}];function Cs(e,t,s){const a=[];return e&&a.push(`elasticsearch.cluster.uuid:${e}`),t&&a.push(`elasticsearch.node.id:${t}`),s&&a.push(`elasticsearch.index.name:${s}`),N.a.shims.infra.locators.logsLocator.getRedirectUrl({logView:{logViewId:S.A,type:"log-view-reference"},...a.length?{filter:a.join(" and ")}:{}})}class logs_Logs extends n.PureComponent{renderLogs(){const{logs:{enabled:e,logs:t},nodeId:s,indexUuid:a}=this.props;return e?Object(b.jsx)(Y.EuiBasicTable,{items:t||[],columns:s||a?Ts:ws}):null}renderNoLogs(){const{logs:{enabled:e,reason:t}}=this.props;return e?null:Object(b.jsx)(Os,{reason:t})}renderCallout(){const{capabilities:e,infra:t,kibanaServices:s}=N.a.shims,a=e.logs&&e.logs.show,{logs:{enabled:i},nodeId:n,clusterUuid:r,indexUuid:o}=this.props;return i&&a&&t?Object(b.jsx)(Y.EuiCallOut,{size:"m",title:B.i18n.translate("xpack.monitoring.logs.listing.calloutTitle",{defaultMessage:"Want to see more log entries?"}),iconType:"logsApp"},Object(b.jsx)(hs,{coreStart:s},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logs.listing.linkText",defaultMessage:"Visit {link} to dive deeper.",values:{link:Object(b.jsx)(Y.EuiLink,{href:Cs(r,n,o)},B.i18n.translate("xpack.monitoring.logs.listing.calloutLinkText",{defaultMessage:"Logs"}))}}))):null}render(){const{nodeId:e,indexUuid:t,logs:{limit:s}}=this.props;let a;return a=e?B.i18n.translate("xpack.monitoring.logs.listing.nodePageDescription",{defaultMessage:"Showing the most recent log entries for this node, up to {limit} total log entries.",values:{limit:s}}):t?B.i18n.translate("xpack.monitoring.logs.listing.indexPageDescription",{defaultMessage:"Showing the most recent log entries for this index, up to {limit} total log entries.",values:{limit:s}}):B.i18n.translate("xpack.monitoring.logs.listing.clusterPageDescription",{defaultMessage:"Showing the most recent log entries for this cluster, up to {limit} total log entries.",values:{limit:s}}),Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h1",null,B.i18n.translate("xpack.monitoring.logs.listing.pageTitle",{defaultMessage:"Recent Log Entries"}))),Object(b.jsx)(Y.EuiText,{size:"s"},Object(b.jsx)("p",null,a)),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),this.renderLogs(),this.renderNoLogs(),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),this.renderCallout())}}function Is({clusterStatus:e,metrics:t,logs:s,cluster:a,shardActivity:i,...n}){const r=[t.cluster_search_request_rate,t.cluster_query_latency,t.cluster_index_request_rate,t.cluster_index_latency];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Mt,{stats:e})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},n)),Object(b.jsx)(Y.EuiSpacer,null)))))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(logs_Logs,{logs:s,clusterUuid:a.cluster_uuid})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Yt,d()({data:i},n)))))}const Ls=B.i18n.translate("xpack.monitoring.setupMode.clickToMonitorWithMetricbeat",{defaultMessage:"Monitor with Metricbeat"}),Fs=B.i18n.translate("xpack.monitoring.setupMode.clickToDisableInternalCollection",{defaultMessage:"Disable self monitoring"}),Ps=B.i18n.translate("xpack.monitoring.setupMode.usingMetricbeatCollection",{defaultMessage:"Monitored with Metricbeat"}),Ns=B.i18n.translate("xpack.monitoring.setupMode.unknown",{defaultMessage:"N/A"});function Ds({setupMode:e,productName:t,status:s,instance:a,clusterUuid:i}){let r=null,o=null;const l=e.data||{},c=e.meta||{},u=l.totalUniquePartiallyMigratedCount===l.totalUniqueInstanceCount;if(s.isPartiallyMigrated&&t===S.r){if(!u)return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiIcon,{type:"flag"}),"",Object(b.jsx)(Y.EuiTextColor,{color:"warning"},B.i18n.translate("xpack.monitoring.setupMode.monitorAllNodes",{defaultMessage:"Some nodes use only self monitoring"})));o=Fs,c.liveClusterUuid===i&&(r=e.shortcutToFinishMigration)}const m={};(s.isInternalCollector||s.isPartiallyMigrated||s.isNetNewUser)&&(m.onClick=r||(()=>e.openFlyout(a)));let g=null;return s.isInternalCollector?(m.onClick&&(m.onClickAriaLabel=o||Ls),g=Object(b.jsx)(Y.EuiBadge,d()({color:"danger",iconType:"flag"},m),o||Ls)):s.isPartiallyMigrated?(m.onClick&&(m.onClickAriaLabel=o||Fs),g=Object(b.jsx)(Y.EuiBadge,d()({color:"warning",iconType:"flag"},m),o||Fs)):s.isFullyMigrated?(m.onClick&&(m.onClickAriaLabel=o||Ps),g=Object(b.jsx)(Y.EuiBadge,d()({color:"primary",iconType:"flag"},m),o||Ps)):s.isNetNewUser?(m.onClick&&(m.onClickAriaLabel=o||Ls),g=Object(b.jsx)(Y.EuiBadge,d()({color:"danger",iconType:"flag"},m),o||Ls)):(m.onClick&&(m.onClickAriaLabel=o||Ns),g=Object(b.jsx)(Y.EuiBadge,d()({color:"danger",iconType:"flag"},m),o||Ns)),g}const Rs=B.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeat",{defaultMessage:"Monitor with Metricbeat"});function As({setupModeData:e,productName:t,customRenderer:s}){if(s){const{shouldRender:e,componentToRender:t}=s();if(e)return t}const a=Object(v.get)(e,"detected.mightExist");return e.totalUniqueInstanceCount>0?e.totalUniqueFullyMigratedCount===e.totalUniqueInstanceCount?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.setupMode.metricbeatAllNodes",{defaultMessage:"Metricbeat is monitoring all {identifier}.",values:{identifier:Ft(t,!0)}}),color:"success",iconType:"flag"}),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):e.totalUniquePartiallyMigratedCount===e.totalUniqueInstanceCount?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring"}),color:"warning",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionDescription",{defaultMessage:"Metricbeat is now monitoring your {product} {identifier}. Disable self monitoring to finish the migration.",values:{product:Ct(t),identifier:Ft(t,!0)}}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):e.totalUniqueInstanceCount>0?0===e.totalUniqueFullyMigratedCount&&0===e.totalUniquePartiallyMigratedCount?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:Rs,color:"danger",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeatDescription",{defaultMessage:"These {product} {identifier} are self monitored.\n                Click 'Monitor with Metricbeat' to migrate.",values:{product:Ct(t),identifier:Ft(t,!0)}}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:Rs,color:"danger",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.setupMode.migrateSomeToMetricbeatDescription",{defaultMessage:"Some {product} {identifier} are monitored through self monitoring. Migrate to monitor with Metricbeat.",values:{product:Ct(t),identifier:Ft(t,!0)}}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):null:a?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.setupMode.detectedNodeTitle",{defaultMessage:"{product} {identifier} detected",values:{product:Ct(t),identifier:Ft(t)}}),color:"warning",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.setupMode.detectedNodeDescription",{defaultMessage:"Click 'Set up monitoring' below to start monitoring this {identifier}.",values:{identifier:Ft(t)}}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.setupMode.noMonitoringDataFound",{defaultMessage:"No {product} {identifier} detected",values:{product:Ct(t),identifier:Ft(t,!0)}}),iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.setupMode.netNewUserDescription",{defaultMessage:"Click 'Set up monitoring' to start monitoring with Metricbeat."}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}))}const zs=B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingDownText",{defaultMessage:"down"}),Bs=B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingUpText",{defaultMessage:"up"});function Vs(){return Object(b.jsx)("div",{className:"monTableCell__offline"},"N/A")}const Us=e=>e||0===e?e>0?Bs:zs:null,$s=e=>e||0===e?e>0?"sortUp":"sortDown":null,Gs=(e,t,s,a)=>s?Et(e,t,"%",{prependSpace:!1}):Et(e,t,a);function qs({isOnline:e,metric:t={},isPercent:s,...a}){const[i,r]=Object(n.useState)(!1);if(!e)return Object(b.jsx)(Vs,null);const{lastVal:o,maxVal:l,minVal:c,slope:u}=Object(v.get)(t,"summary",{}),d=Object(v.get)(t,"metric.format"),m=Object(v.get)(t,"metric.units"),g=[{title:B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.trending",{defaultMessage:"Trending"}),description:Us(u)},{title:B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.max",{defaultMessage:"Max value"}),description:Gs(l,d,s,m)},{title:B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.min",{defaultMessage:"Min value"}),description:Gs(c,d,s,m)}],p=B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.iconLabel",{defaultMessage:"More information about this metric"}),j=Object(b.jsx)(Y.EuiButtonIcon,{color:"text",onClick:()=>r((e=>!e)),iconType:$s(u),"data-test-subj":`monitoringCellIcon-${a["data-test-subj"]}`,title:p,"aria-label":p});return Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1}),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{"data-test-subj":a["data-test-subj"],gutterSize:"xs"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiPopover,{ownFocus:!0,button:j,isOpen:i,closePopover:()=>r(!1)},Object(b.jsx)("div",{"data-test-subj":`monitoringCellPopover-${a["data-test-subj"]}`},Object(b.jsx)(Y.EuiDescriptionList,{type:"column",compressed:!0,listItems:g,style:{maxWidth:"150px"}}),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,{size:"xs"},B.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.preface",{defaultMessage:"Applies to current time period"}))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiText,null,Gs(o,d,s))))))}const Hs=e=>t=>Object(v.get)(t,[e,"summary","lastVal"]),Ws=(e,t,s,a)=>{const i=[],n=B.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuUsageColumnTitle",{defaultMessage:"CPU Usage"});return i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.nameColumnTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(e,a)=>{let i=Object(b.jsx)(Y.EuiLink,{href:Te(`#/elasticsearch/nodes/${a.resolver}`),"data-test-subj":`nodeLink-${a.resolver}`},e),n=null;if(pe(ae.d.MetricbeatMigration)){const r=Object(v.get)(t,"data.byUuid",{})[a.resolver]||{},o={uuid:a.resolver,name:a.name};n=Object(b.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(b.jsx)(Ds,{setupMode:t,status:r,instance:o,productName:S.r,clusterUuid:s})),r.isNetNewUser&&(i=e)}return Object(b.jsx)("div",null,Object(b.jsx)("div",{className:"monTableCell__name"},Object(b.jsx)(Y.EuiText,{size:"m"},(e=>{const{nodeTypeLabel:t,nodeTypeClass:s}=e,a=t||B.i18n.translate("xpack.monitoring.elasticsearch.nodes.unknownNodeTypeLabel",{defaultMessage:"Unknown"}),i=s||"empty";return t?Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiToolTip,{position:"bottom",content:a},Object(b.jsx)(Y.EuiIcon,{type:i}))," ",""):null})(a),Object(b.jsx)("span",{"data-test-subj":"name"},i))),Object(b.jsx)("div",{className:"monTableCell__transportAddress"},function(e){if("string"!=typeof e)return null;const t=e.match(/inet\[[^\/]*\/([^\/\]]+)\]/);return t?t[1]:e}(a.transport_address)),n)}}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(e,t)=>Object(b.jsx)(dt,{showBadge:!0,alerts:a,stateFilter:e=>(e.nodeId||e.nodeUuid)===t.resolver})}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumnTitle",{defaultMessage:"Status"}),dataType:"boolean",field:"isOnline",sortable:!0,render:e=>{const t=e?B.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.onlineLabel",{defaultMessage:"Online"}):B.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.offlineLabel",{defaultMessage:"Offline"});return Object(b.jsx)(Y.EuiToolTip,{content:t,position:"bottom",trigger:"hover"},Object(b.jsx)(Y.EuiHealth,{color:e?"success":"subdued","data-test-subj":"statusIcon",alt:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.healthAltIcon",{defaultMessage:"Status: {status}",values:{status:t}})},t))}}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.rolesColumnTitle",{defaultMessage:"Roles"}),field:"roles",render:e=>{if(!e)return B.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"});if(0===e.length)return Object(b.jsx)(Y.EuiBadge,null,B.i18n.translate("xpack.monitoring.elasticsearch.nodes.coordinatingNodeLabel",{defaultMessage:"coordinating only"}));const t=e.slice(0,5),s=e.slice(5),a=s.length>0;return Object(b.jsx)(Y.EuiBadgeGroup,{gutterSize:"xs"},t.map((e=>Object(b.jsx)(Y.EuiBadge,{color:"master"===e?"hollow":"default"},e))),a&&Object(b.jsx)(Y.EuiToolTip,{anchorProps:{style:{lineHeight:"1"}},position:"bottom",content:s.join(", ")},Object(b.jsx)(Y.EuiBadge,null,"+",s.length)))}}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.shardsColumnTitle",{defaultMessage:"Shards"}),dataType:"number",field:"shardCount",sortable:!0,render:(e,t)=>t.isOnline?Object(b.jsx)("span",{"data-test-subj":"shards"},e):Object(b.jsx)(Vs,null)}),e?(i.push({name:n,dataType:"number",field:"node_cgroup_quota",sortable:Hs("node_cgroup_quota"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuQuota"})}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuThrottlingColumnTitle",{defaultMessage:"CPU Throttling"}),dataType:"number",field:"node_cgroup_throttled",sortable:Hs("node_cgroup_throttled"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"cpuThrottled"})})):(i.push({name:n,dataType:"number",field:"node_cpu_utilization",sortable:Hs("node_cpu_utilization"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuUsage"})}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.loadAverageColumnTitle",{defaultMessage:"Load Average"}),dataType:"number",field:"node_load_average",sortable:Hs("node_load_average"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"loadAverage"})})),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.jvmMemoryColumnTitle",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),dataType:"number",field:"node_jvm_mem_percent",sortable:Hs("node_jvm_mem_percent"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"jvmMemory"})}),i.push({name:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.diskFreeSpaceColumnTitle",{defaultMessage:"Disk Free Space"}),dataType:"number",field:"node_free_space",sortable:Hs("node_free_space"),render:(e,t)=>Object(b.jsx)(qs,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"diskFreeSpace"})}),i};function Ks({clusterStatus:e,showCgroupMetricsElasticsearch:t,...s}){const{sorting:a,pagination:i,onTableChange:r,clusterUuid:o,setupMode:l,alerts:c}=s,u=Ws(t,l,o,c),m=s.nodes||[];if(l&&l.enabled&&pe(ae.d.MetricbeatMigration)){const e=m.reduce(((e,t)=>({...e,[t.id||t.resolver]:t})),{});m.push(...Object.entries(l.data.byUuid).reduce(((t,[s,a])=>(!e[s]&&a.node&&t.push(a.node),t)),[]))}let g=null;return pe(ae.d.MetricbeatMigration)&&(g=Object(b.jsx)(As,{setupModeData:l.data,useNodeIdentifier:!0,productName:S.r,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null},t=0===l.data.totalUniqueInstanceCount,s=0===l.data.totalUniqueInternallyCollectedCount&&0===l.data.totalUniqueFullyMigratedCount&&0===l.data.totalUniquePartiallyMigratedCount;if(t||s)e.shouldRender=!0,e.componentToRender=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Elasticsearch node detected"}),color:l.data.totalUniqueInstanceCount>0?"danger":"warning",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following nodes are not monitored. Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}));else if(l.data.totalUniquePartiallyMigratedCount===l.data.totalUniqueInstanceCount){const t=Object(v.get)(l.meta,"liveClusterUuid")===o?l.shortcutToFinishMigration:l.openFlyout;e.shouldRender=!0,e.componentToRender=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionTitle",{defaultMessage:"Metricbeat is now monitoring your Elasticsearch nodes"}),color:"warning",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionDescription",{defaultMessage:"Disable self monitoring to finish the migration."})),Object(b.jsx)(Y.EuiButton,{onClick:t,size:"s",color:"warning",fill:!0},B.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionMigrationButtonLabel",{defaultMessage:"Disable self monitoring"}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}))}return e}})),Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.heading",defaultMessage:"Elasticsearch nodes"}))),e?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Mt,{stats:e,alerts:c})),Object(b.jsx)(Y.EuiSpacer,{size:"m"})):null,g,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Nt,d()({className:"elasticsearchNodesTable",rows:m,columns:u,sorting:a,pagination:i,setupMode:l,productName:S.r,search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.elasticsearch.nodes.monitoringTablePlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:r},s)))))}function Js({isOnline:e,status:t}){const s=e?Ae.GREEN:Ae.GRAY;return Object(b.jsx)(Be,{type:s,label:B.i18n.translate("xpack.monitoring.elasticsearch.node.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:t}})})}function Ys({stats:e,alerts:t={}}){const{transport_address:s,usedHeap:a,freeSpace:i,totalSpace:r,documents:o,dataSize:l,indexCount:c,totalShards:u,nodeTypeLabel:d,status:m,isOnline:g}=e,p=i/r*100,j=[{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(b.jsx)(dt,{alerts:t,showOnlyCount:!0})},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.transportAddress",{defaultMessage:"Transport Address"}),value:s,"data-test-subj":"transportAddress"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.jvmHeapLabel",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),value:Et(a,"0,0.[00]","%",{prependSpace:!1}),"data-test-subj":"jvmHeap"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.freeDiskSpaceLabel",{defaultMessage:"Free Disk Space"}),value:Et(i,"0.0 b")+" ("+Et(p,"0,0.[00]","%",{prependSpace:!1})+")","data-test-subj":"freeDiskSpace"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.documentsLabel",{defaultMessage:"Documents"}),value:Et(o,"0.[0]a"),"data-test-subj":"documentCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.dataLabel",{defaultMessage:"Data"}),value:Et(l,"0.0 b"),"data-test-subj":"dataSize"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.indicesLabel",{defaultMessage:"Indices"}),value:Et(c,"int_commas"),"data-test-subj":"indicesCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.shardsLabel",{defaultMessage:"Shards"}),value:Et(u,"int_commas"),"data-test-subj":"shardsCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.typeLabel",{defaultMessage:"Type"}),value:d,"data-test-subj":"nodeType"}];return Object(b.jsx)(jt,{metrics:j,status:m,isOnline:g,IconComponent:({status:e,isOnline:t})=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Js,{status:e,isOnline:t})),"data-test-subj":"elasticsearchNodeDetailStatus"})}const Qs=e=>{const{alerts:t}=e;if(ge(r.a.useContext(Ve)))return null;const s=Object.values(t).flat().map((e=>e.states.map((t=>({alert:e,state:t}))))).flat();if(0===s.length)return null;const a=s.map(((e,t)=>{const a=Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiIcon,{type:"warning",size:"m",color:"danger"})),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiTextColor,{color:"danger"},qe(e.state.state.ui.message))))),{code:i}=e.state.state.ui.message,n=Object(b.jsx)(Y.EuiAccordion,{id:`monitoringAlertCallout_${t}`,buttonContent:a,paddingSize:"s"},null!=i&&i.length?Object(b.jsx)(Y.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:300},i):null,Object(b.jsx)(Y.EuiListGroup,{flush:!0,bordered:!0,gutterSize:"m",size:"xs",style:{marginTop:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem"}},(e.state.state.ui.message.nextSteps||[]).map(((e,s)=>Object(b.jsx)(Y.EuiListGroupItem,{onClick:()=>{},label:qe(e),key:t+s}))),Object(b.jsx)(Y.EuiListGroupItem,{label:Object(b.jsx)(We,{alert:e.alert.sanitizedRule,key:t,compressed:!0})}))),r=t!==s.length-1?Object(b.jsx)(Y.EuiSpacer,null):null;return Object(b.jsx)("div",{key:t},n,r)}));return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiPanel,null,a),Object(b.jsx)(Y.EuiSpacer,null))};s(83);class table_head_IndexLabel extends r.a.Component{constructor(e){super(e),this.state={showSystemIndices:e.showSystemIndices},this.toggleShowSystemIndicesState=this.toggleShowSystemIndicesState.bind(this)}toggleShowSystemIndicesState(e){const t=e.target.checked;this.setState({showSystemIndices:t}),this.props.toggleShowSystemIndices(t)}render(){return Object(b.jsx)(Y.EuiFlexGroup,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableHead.indicesLabel",defaultMessage:"Indices"})),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiSwitch,{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableHead.filterSystemIndices",{defaultMessage:"Filter for system indices"}),onChange:this.toggleShowSystemIndicesState,checked:this.state.showSystemIndices,"data-test-subj":"shardShowSystemIndices"})))}}class table_head_TableHead extends r.a.Component{constructor(e){super(e)}createColumn({key:e,content:t}){return Object(b.jsx)("th",{scope:"col",key:e,colSpan:1},t)}render(){const e=(this.props.labels||[]).map((e=>{const t={key:e.content.toLowerCase()};return e.showToggleSystemIndicesComponent?t.content=Object(b.jsx)(table_head_IndexLabel,{toggleShowSystemIndices:this.props.toggleShowSystemIndices,showSystemIndices:this.props.showSystemIndices}):t.content=e.content,t})).map(this.createColumn);return Object(b.jsx)("thead",null,Object(b.jsx)("tr",null,e))}}function Xs(e,t){const s=[e.type];return t&&s.push(t),"shard"===e.type&&(s.push("monShard"),Object(v.get)(e,"shard.primary",e.primary)?s.push("primary"):s.push("replica"),s.push(Object(v.get)(e,"shard.state",e.state).toLowerCase()),"UNASSIGNED"===Object(v.get)(e,"shard.state",e.state)&&Object(v.get)(e,"shard.primary",e.primary)&&s.push("emergency")),e.master&&s.push("master"),s.join(" ")}const Zs={};class shard_Shard extends r.a.Component{constructor(...e){super(...e),I()(this,"state",{tooltipVisible:!1}),I()(this,"generateKey",(e=>{const t=this.props.shard,s=Object(v.get)(t,"shard.primary",t.primary)?"primary":"replica",a="UNASSIGNED"===Object(v.get)(t,"shard.state",t.state)?Math.random():"",i=e?Object(v.get)(t,"relocation_node.uuid",t.relocating_node):Object(v.get)(t,"shard.name",t.node);return t.index+"."+i+"."+s+"."+t.shard+a})),I()(this,"toggle",(e=>{if(this.props.shard.tooltip_message){const t="mouseenter"===e.type?"show":"hide",s=this.generateKey(!0);this.setState({tooltipVisible:"show"===t}),function(){const e=Array.prototype.slice.call(arguments),t=e.shift();Zs[t]&&Object(v.each)(Zs[t],(function(t){t.apply(null,e)}))}(s,t)}}))}componentDidMount(){let e;const t=this.props.shard,s=this;var a,i;t.tooltip_message&&(e=this.generateKey(),a=e,i=function(e){s.setState({tooltipVisible:"show"===e})},Object(v.isArray)(Zs[a])||(Zs[a]=[]),Zs[a].push(i))}componentWillUnmount(){let e;this.props.shard.tooltip_message&&(e=this.generateKey(),delete Zs[e])}render(){const e=this.props.shard,t=Xs(e),s=function(e){const t=e.split(" ");return t.includes("emergency")?"danger":t.includes("unassigned")?t.includes("replica")?"warning":"danger":t.includes("relocating")?"accent":t.includes("initializing")?"default":t.includes("primary")?"primary":t.includes("replica")?"success":void 0}(t),a=t+" "+Object(v.get)(e,"shard.number",e.shard);let i=Object(b.jsx)(Y.EuiBadge,{color:s},Object(v.get)(e,"shard.number",e.shard));const n=e.tooltip_message||B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"});return this.state.tooltipVisible&&(i=Object(b.jsx)(Y.EuiToolTip,{content:n,position:"bottom","data-test-subj":"shardTooltip"},Object(b.jsx)("p",null,i))),Object(b.jsx)("div",{onMouseEnter:this.toggle,onMouseLeave:this.toggle,className:t,"data-shard-tooltip":n,"data-shard-classification":a,"data-test-subj":"shardIcon"},i)}}I()(shard_Shard,"displayName",B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"}));class unassigned_Unassigned extends r.a.Component{constructor(...e){super(...e),I()(this,"createShard",(e=>{const t=e.primary?"primary":"replica",s="UNASSIGNED"===e.state?Math.random():"",a=e.index+"."+e.node+"."+t+"."+e.state+"."+e.shard+s;return Object(b.jsx)(shard_Shard,{shard:e,key:a})}))}render(){const e=Object(v.sortBy)(this.props.shards,"shard").map(this.createShard);return Object(b.jsx)("td",{className:"monUnassigned","data-test-subj":"clusterView-Unassigned"},Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0,className:"monUnassigned__children"},e))}}I()(unassigned_Unassigned,"displayName",B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedDisplayName",{defaultMessage:"Unassigned"}));const ea=e=>{let t="indices",s=e.name;return"node"===e.type&&(t="nodes",s=e.id),Te(`#/elasticsearch/${t}/${s}`)};function ta(e){return"node"===e.type?[!e.master,e.name]:[e.name]}class assigned_Assigned extends r.a.Component{constructor(...e){super(...e),I()(this,"createShard",(e=>{const t=Object(v.get)(e,"shard.primary",e.primary)?"primary":"replica",s=`${Object(v.get)(e,"index.name",e.index)}.${Object(v.get)(e,"node.name",e.node)}.${t}.${Object(v.get)(e,"shard.state",e.state)}.${Object(v.get)(e,"shard.number",e.shard)}`;return Object(b.jsx)(shard_Shard,{shard:e,key:s})})),I()(this,"createChild",(e=>{const t=e.id,s=["monChild"];"index"===e.type&&s.push("monChild--index");const a=Object(v.get)(this.props.shardStats.indices,t);if(a)switch(a.status){case"red":s.push("monChild--danger");break;case"yellow":s.push("monChild--warning")}const i=Object(b.jsx)(Y.EuiLink,{href:ea(e)},e.name),n="master"===e.node_type?Object(b.jsx)(Y.EuiIcon,{type:"starFilledSpace",color:"primary"}):null,r=Object(v.sortBy)(e.children,"shard").map(this.createShard);return Object(b.jsx)(Y.EuiFlexItem,{grow:!1,className:Xs(e,s.join(" ")),key:t,"data-test-subj":`clusterView-Assigned-${t}`,"data-status":a&&a.status},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"xs"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1,className:"monChild__title eui-textNoWrap"},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"xs"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},i),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},n))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s"},r))))}))}render(){const e=Object(v.sortBy)(this.props.data,ta).map(this.createChild);return Object(b.jsx)("td",{className:"monAssigned"},Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0,className:"monAssigned__children"},e))}}const sa=e=>{let t;return e.data.unassigned&&e.data.unassigned.length?t=Object(b.jsx)(unassigned_Unassigned,{shards:e.data.unassigned}):3===e.cols&&(t=Object(b.jsx)("td",null)),Object(b.jsx)("tr",null,t,Object(b.jsx)(assigned_Assigned,{shardStats:e.shardStats,data:e.data.children}))};class table_body_TableBody extends r.a.Component{constructor(...e){super(...e),I()(this,"createRow",((e,t)=>Object(b.jsx)(sa,d()({key:`shardRow-${t}`,data:e},this.props))))}render(){return 0===this.props.totalCount?Object(b.jsx)("tbody",null,Object(b.jsx)("tr",null,Object(b.jsx)("td",{colSpan:this.props.cols},Object(b.jsx)("div",null,Object(b.jsx)("p",{style:{margin:"10px 0"},className:"text-center lead"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableBody.noShardsAllocatedDescription",defaultMessage:"There are no shards allocated."})))))):this.props.shardStats&&this.props.rows.length?Object(b.jsx)("tbody",null,this.props.rows.map(this.createRow)):Object(b.jsx)("tbody",null,Object(b.jsx)("tr",null,Object(b.jsx)("td",{colSpan:this.props.cols})))}}I()(table_body_TableBody,"displayName",B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableBodyDisplayName",{defaultMessage:"TableBody"}));const aa=e=>Object(b.jsx)("table",{cellPadding:"0",cellSpacing:"0",className:"table"},Object(b.jsx)(table_head_TableHead,{labels:e.labels,toggleShowSystemIndices:e.toggleShowSystemIndices,showSystemIndices:e.showSystemIndices}),Object(b.jsx)(table_body_TableBody,{filter:e.filter,totalCount:e.totalCount,rows:e.nodesByIndices,cols:e.labels.length,shardStats:e.shardStats})),ia=e=>{const t=[{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.primaryLabel",{defaultMessage:"Primary"}),color:"primary"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.replicaLabel",{defaultMessage:"Replica"}),color:"success"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.relocatingLabel",{defaultMessage:"Relocating"}),color:"accent"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.initializingLabel",{defaultMessage:"Initializing"}),color:"default"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedPrimaryLabel",{defaultMessage:"Unassigned Primary"}),color:"danger"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedReplicaLabel",{defaultMessage:"Unassigned Replica"}),color:"warning"}];return Object(b.jsx)("div",{className:"monCluster"},Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.shardLegendTitle",defaultMessage:"Shard Legend"}))),Object(b.jsx)(Y.EuiSpacer,{size:"xs"}),Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},t.map((e=>Object(b.jsx)(Y.EuiFlexItem,{grow:!1,key:e.label},Object(b.jsx)(Y.EuiBadge,{color:e.color},e.label))))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(aa,e))},na=({nodeSummary:e,metrics:t,logs:s,alerts:a,nodeId:i,clusterUuid:n,...r})=>{const o=[t.node_jvm_mem,t.node_total_io,t.node_cpu_metric,t.node_load_average,t.node_latency,t.node_segment_count];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.node.heading",defaultMessage:"Elasticsearch node"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Ys,{stats:e,alerts:a})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:a}),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},r)),Object(b.jsx)(Y.EuiSpacer,null)))))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(logs_Logs,{logs:s,nodeId:i,clusterUuid:n})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(ia,r))))};s(88);const ra=e=>[{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.nameTitle",{defaultMessage:"Name"}),field:"name",width:"350px",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"name"},Object(b.jsx)(Y.EuiLink,{href:Te(`#/elasticsearch/indices/${e}`),"data-test-subj":`indexLink-${e}`},e))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(t,s)=>Object(b.jsx)(dt,{showBadge:!0,alerts:e,stateFilter:e=>e.meta.shardIndex===s.name})},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.statusTitle",{defaultMessage:"Status"}),field:"status",sortable:!0,render:e=>Object(b.jsx)("div",{className:"monElasticsearchIndicesTable__status",title:`Index status: ${e}`},Object(b.jsx)(bt,{status:e}),"",Object(v.capitalize)(e))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.documentCountTitle",{defaultMessage:"Document Count"}),field:"doc_count",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"documentCount"},Et(e,Ze))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.dataTitle",{defaultMessage:"Data"}),field:"data_size",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"dataSize"},Et(e,Xe))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.indexRateTitle",{defaultMessage:"Index Rate"}),field:"index_rate",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"indexRate"},Et(e,Qe,"/s"))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.searchRateTitle",{defaultMessage:"Search Rate"}),field:"search_rate",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"searchRate"},Et(e,Qe,"/s"))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.indices.unassignedShardsTitle",{defaultMessage:"Unassigned Shards"}),field:"unassigned_shards",sortable:!0,render:e=>Object(b.jsx)("div",{"data-test-subj":"unassignedShards"},Et(e,"0"))}],oa=({clusterStatus:e,indices:t,sorting:s,pagination:a,onTableChange:i,toggleShowSystemIndices:n,showSystemIndices:r,alerts:o})=>Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.heading",defaultMessage:"Elasticsearch indices"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Mt,{stats:e,alerts:o})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiSwitch,{label:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.systemIndicesLabel",defaultMessage:"Filter for system indices"}),checked:r,onChange:e=>n(e.target.checked)}),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Pt,{className:"elasticsearchIndicesTable",rows:t,columns:ra(o),sorting:s,pagination:a,message:Object(b.jsx)("div",null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.noIndicesMatchYourSelectionDescription",defaultMessage:"There are no indices that match your selections. Try changing the time range selection."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.howToShowSystemIndicesDescription",defaultMessage:"If you are looking for system indices (e.g., .kibana), try checking Show system indices."}))),search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.elasticsearch.indices.monitoringTablePlaceholder",{defaultMessage:"Filter Indices"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))));function la({status:e}){const t=(()=>{const t=e.toUpperCase();return"OPENED"===t?Ae.GREEN:"CLOSED"===t?Ae.GRAY:"FAILED"===t?Ae.RED:Ae.YELLOW})();return Object(b.jsx)(Be,{type:t,label:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.statusIconLabel",{defaultMessage:"Job Status: {status}",values:{status:e}})})}const ca=({clusterStatus:e,jobs:t,sorting:s,pagination:a,onTableChange:i})=>Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Mt,{stats:e})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Pt,{className:"mlJobsTable",rows:t,columns:ua,sorting:{...s,sort:{...s.sort,field:"job_id"}},pagination:a,message:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.noJobsDescription",{defaultMessage:"There are no Machine Learning Jobs that match your query. Try changing the time range selection."}),search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.filterJobsPlaceholder",{defaultMessage:"Filter Jobs"})}},onTableChange:i,executeQueryOptions:{defaultFields:["job_id"]}})))),ua=[{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.jobIdTitle",{defaultMessage:"Job ID"}),field:"job_id",sortable:!0},{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.stateTitle",{defaultMessage:"State"}),field:"state",sortable:!0,render:e=>Object(b.jsx)("div",null,Object(b.jsx)(la,{status:e}),"",Object(v.capitalize)(e))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.processedRecordsTitle",{defaultMessage:"Processed Records"}),field:"data_counts.processed_record_count",sortable:!0,render:e=>Object(b.jsx)("span",null,ht()(e).format(Ze))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.modelSizeTitle",{defaultMessage:"Model Size"}),field:"model_size_stats.model_bytes",sortable:!0,render:e=>Object(b.jsx)("span",null,ht()(e).format(Xe))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.forecastsTitle",{defaultMessage:"Forecasts"}),field:"forecasts_stats.total",sortable:!0,render:e=>Object(b.jsx)("span",null,ht()(e).format(Ze))},{name:B.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.nodeTitle",{defaultMessage:"Node"}),field:"node.name",sortable:!0,render:(e,t)=>t.node?"id"in t.node?Object(b.jsx)(Y.EuiLink,{href:Te(`#/elasticsearch/nodes/${t.node.id}`)},e):Object(b.jsx)("span",null,e):Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.mlJobListing.noDataLabel",defaultMessage:"N/A"})}],da=E.a.has,ma=e=>{const t=(e=>E.a.get(e,"resp.error.root_cause"))(e);if(Array.isArray(t))return t.map((e=>e.reason)).join("\n")};function ga(e,t=""){let s="";t&&(s+=t+": ");const a=ma(e);return"string"==typeof e?s+=e:a?s+=a:e instanceof Error?s+=ga.describeError(e):da(e,"status")&&da(e,"data")&&(-1===e.status?s+=B.i18n.translate("xpack.monitoring.formatMsg.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator."}):s+=B.i18n.translate("xpack.monitoring.formatMsg.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:e.status,errStatusText:e.statusText,errMessage:e.data.message}})),s}function pa(e){var t,s,a,i;return null!==(t=e.response)&&void 0!==t&&t.status&&-1!==(null===(s=e.response)||void 0===s?void 0:s.status)?Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,null===(a=e.body)||void 0===a?void 0:a.message),Object(b.jsx)(Y.EuiText,{size:"xs"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.httpErrorMessage",defaultMessage:"HTTP {errStatus}",values:{errStatus:null===(i=e.response)||void 0===i?void 0:i.status}}))):ga(e)}ga.describeError=function(e){if(e)return e.shortMessage?e.shortMessage:e.body&&e.body.message?e.body.message:e.message?e.message:""+e};const ja=()=>{var e;const{services:t}=Object(i.useKibana)(),s=Object(c.useHistory)();return Object(n.useCallback)((e=>{var a,n;if(403===(null===(a=e.response)||void 0===a?void 0:a.status))s.push("/access-denied");else if(404!==(null===(n=e.response)||void 0===n?void 0:n.status)||Object(v.includes)(window.location.hash,"no-data")){var r,o;null===(r=t.notifications)||void 0===r||r.toasts.addDanger({title:B.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestErrorNotificationTitle",{defaultMessage:"Monitoring Request Error"}),text:Object(i.toMountPoint)(pa(e),{theme$:null===(o=t.theme)||void 0===o?void 0:o.theme$})})}else{var l,c;const s=pa(e);null===(l=t.notifications)||void 0===l||l.toasts.addDanger({title:B.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestFailedNotificationTitle",{defaultMessage:"Monitoring Request Failed"}),text:Object(i.toMountPoint)(Object(b.jsx)("div",null,s,Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiButton,{size:"s",color:"danger",onClick:()=>window.location.reload()},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotification.retryButtonLabel",defaultMessage:"Retry"}))),{theme$:null===(c=t.theme)||void 0===c?void 0:c.theme$})})}}),[s,null===(e=t.notifications)||void 0===e?void 0:e.toasts,t.theme])},ba=()=>{const{services:e}=Object(i.useKibana)(),t=ja();return{shouldShowAlertsModal:function(e){const t="true"===window.sessionStorage.getItem("ALERTS_MODAL_HAS_BEEN_SHOWN"),s="true"===window.localStorage.getItem("ALERTS_MODAL_DECISION_MADE");return Object.keys(e).length>0?(window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),!1):!t&&!s},enableAlerts:async function(){try{var s,a;if(null===(s=e.http)||void 0===s||!s.post)throw new Error("HTTP service is unavailable");const t=await e.http.post("../api/monitoring/v1/alerts/enable",{});window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),((e,t)=>{const{isSufficientlySecure:s,hasPermanentEncryptionKey:a}=e;!1===s||!1===a?(e=>{const t=N.a.shims.docLinks.links.alerting.generalSettings;N.a.shims.toastNotifications.addWarning({title:B.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionErrorTitle",{defaultMessage:"Additional setup required"}),text:Object(i.toMountPoint)(Object(b.jsx)("div",null,Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionError",{defaultMessage:"Stack Monitoring rules require API keys to be enabled and an encryption key to be configured."})),Object(b.jsx)(Y.EuiSpacer,{size:"xs"}),Object(b.jsx)(Y.EuiLink,{href:t,external:!0,target:"_blank"},B.i18n.translate("xpack.monitoring.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))),{theme$:e})})})(t):N.a.shims.toastNotifications.addWarning({title:B.i18n.translate("xpack.monitoring.healthCheck.alertsCreatedConfirmation.title",{defaultMessage:"New alerts created"}),text:B.i18n.translate("xpack.monitoring.healthCheck.alertsCreatedConfirmation.text",{defaultMessage:"Review the alert definition using Setup mode and configure additional action connectors to get notified via your favorite method."}),"data-test-subj":"alertsCreatedToast"})})(t,null===(a=e.theme)||void 0===a?void 0:a.theme$)}catch(e){await t(e)}},notAskAgain:function(){window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true")},hideModalForSession:function(){window.sessionStorage.setItem("ALERTS_MODAL_HAS_BEEN_SHOWN","true")}}},xa=({alerts:e})=>{const[t,s]=Object(n.useState)(!1),[a,i]=Object(n.useState)(!1),r=ba();Object(n.useEffect)((()=>{r.shouldShowAlertsModal(e)&&s(!0)}),[r,e]);const o=()=>{s(!1),r.hideModalForSession()};return t?a?Object(b.jsx)(fa,{closeModal:o,createButtonClick:()=>{r.enableAlerts(),o()}}):Object(b.jsx)(ha,{closeModal:o,remindLaterClick:()=>{r.hideModalForSession(),o()},continueButtonClick:e=>{"create-alerts"===e?i(!0):(r.notAskAgain(),o())}}):null};function ha({closeModal:e,remindLaterClick:t,continueButtonClick:s}){const[a,i]=Object(n.useState)("create-alerts"),r=[{id:"create-alerts",label:B.i18n.translate("xpack.monitoring.alerts.modal.yesOption",{defaultMessage:"Yes (Recommended)"})},{id:"not-create-alerts",label:B.i18n.translate("xpack.monitoring.alerts.modal.noOption",{defaultMessage:"No"})}];return Object(b.jsx)(Y.EuiModal,{onClose:e},Object(b.jsx)(Y.EuiModalHeader,null,Object(b.jsx)(Y.EuiModalHeaderTitle,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.title",defaultMessage:"Create rules"}))),Object(b.jsx)(Y.EuiModalBody,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description",defaultMessage:"Stack monitoring comes with many out-of-the box rules to notify you about issues around cluster health, resource utilization and errors. {learnMoreLink}",values:{learnMoreLink:Object(b.jsx)(Y.EuiLink,{href:N.a.shims.docLinks.links.monitoring.alertsKibana,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description.link",defaultMessage:"Learn more"}))}})),Object(b.jsx)("div",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.createDescription",defaultMessage:"Create these out-of-the box rules in this Kibana space?"}),Object(b.jsx)(Y.EuiSpacer,{size:"xs"}),Object(b.jsx)(Y.EuiRadioGroup,{options:r,idSelected:a,onChange:e=>{i(e)},name:"radio group"})))),Object(b.jsx)(Y.EuiModalFooter,null,Object(b.jsx)(Y.EuiButtonEmpty,{onClick:t,"data-test-subj":"alerts-modal-remind-later-button"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.remindLater",defaultMessage:"Remind me later"})),Object(b.jsx)(Y.EuiButton,{onClick:()=>s(a),fill:!0,"data-test-subj":"alerts-modal-button"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.confirm",defaultMessage:"Continue"}))))}function fa({closeModal:e,createButtonClick:t}){return Object(b.jsx)(Y.EuiModal,{onClose:e},Object(b.jsx)(Y.EuiModalHeader,null,Object(b.jsx)(Y.EuiModalHeaderTitle,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.title",defaultMessage:"Migrate Elasticsearch Watches before continuing"}))),Object(b.jsx)(Y.EuiModalBody,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.one",defaultMessage:"If you've used Internal Collection in the past, you'll have a few Elasticsearch Watches configured for your monitoring data."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.two",defaultMessage:"To avoid duplication of work, it will be best to disable those before you create the Kibana rules."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.three",defaultMessage:"To disable the Watches, you'll need to invoke the below API on each cluster where Internal Collection has been enabled in the past."})),Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiCode,null,"POST /_monitoring/migrate/alerts")),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.four",defaultMessage:"Once all monitoring Watches have been disabled, click Create to create the Kibana rules."})))),Object(b.jsx)(Y.EuiModalFooter,null,Object(b.jsx)(Y.EuiButtonEmpty,{onClick:e,"data-test-subj":"alerts-modal-cancel-button"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.cancelButton.label",defaultMessage:"Cancel"})),Object(b.jsx)(Y.EuiButton,{onClick:t,fill:!0,"data-test-subj":"alerts-modal-create-button"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.confirmButton.label",defaultMessage:"Create"}))))}const Oa=()=>{const[e,t]=Object(n.useState)(!1),s=ba(),{navigateToApp:a}=Object(i.useKibana)().services.application,[o,l]=Object(n.useState)(!1),c=()=>{l(!1)},u=()=>{t(!1),c()},d=Object(b.jsx)(Y.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:()=>{l(!o)}},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.alerts.dropdown.button",defaultMessage:"Alerts and rules"})),m=[{name:B.i18n.translate("xpack.monitoring.alerts.dropdown.createAlerts",{defaultMessage:"Create default rules"}),onClick:()=>{t(!0)}},{name:B.i18n.translate("xpack.monitoring.alerts.dropdown.manageRules",{defaultMessage:"Manage rules"}),icon:"tableOfContents",onClick:()=>a("management",{path:"/insightsAndAlerting/triggersActions/rules"})}],g=[{id:0,title:B.i18n.translate("xpack.monitoring.alerts.dropdown.title",{defaultMessage:"Alerts and rules"}),items:m}];return Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:d,isOpen:o,closePopover:c},Object(b.jsx)(Y.EuiContextMenu,{initialPanelId:0,panels:g})),e?Object(b.jsx)(fa,{closeModal:u,createButtonClick:()=>{s.enableAlerts(),u()}}):null)};function va({exitSetupMode:e}){return Object(b.jsx)(Y.EuiButton,{color:"danger",fill:!0,iconType:"flag",iconSide:"right",size:"s",onClick:e,"data-test-subj":"exitSetupModeBtn"},B.i18n.translate("xpack.monitoring.setupMode.exit",{defaultMessage:"Exit setup mode"}))}const Ea=e=>{const[t,s]=r.a.useState(!1),a=Object(ee.useUiTracker)({app:"stack_monitoring"});function i(t,i){s(!0),e.toggleSetupMode(t),a({metric:`${S.ab}setupmode_${i}`,metricType:ee.METRIC_TYPE.CLICK}),s(!1)}return e.enabled?Object(b.jsx)(va,{exitSetupMode:()=>i(!1,"exit")}):Object(b.jsx)(Y.EuiButton,{onClick:()=>i(!0,"enter"),iconType:"flag",size:"s",iconSide:"right",isLoading:t,"data-test-subj":"monitoringSetupModeBtn"},B.i18n.translate("xpack.monitoring.setupMode.enter",{defaultMessage:"Enter setup mode"}))},Ma=({title:e,pageTitle:t,tabs:s,getPageData:a,product:r,children:o})=>{!function(e,t){var s;const{services:a}=Object(i.useKibana)();let n=Object(v.get)("","cluster_name");n=n?`- ${n}`:"",t=t?`- ${t}`:"",null===(s=a.chrome)||void 0===s||s.docTitle.change(B.i18n.translate("xpack.monitoring.stackMonitoringDocTitle",{defaultMessage:"Stack Monitoring {clusterName} {suffix}",values:{clusterName:n,suffix:t}}))}(0,e);const{currentTimerange:l}=K(),[u,d]=Object(n.useState)(!1),[m,g]=Object(n.useState)(!1),p=Object(c.useHistory)(),[j,x]=Object(n.useState)(!1),h=ja(),{setHeaderActionMenu:f,theme$:O}=Object(n.useContext)(z),E=Object(n.useCallback)((e=>(x(!1),e)),[x]);Object(n.useEffect)((()=>{g(!0),null==a||a().then(E).catch((e=>{h(e),x(!0)})).finally((()=>{d(!0),g(!1)}))}),[a,l,E,h]);const M=e=>p.location.pathname===e,{supported:y,enabled:k}=le();return Object(b.jsx)(Y.EuiPageTemplate,{offset:0,restrictWidth:!1,grow:!1,"data-test-subj":"monitoringAppContainer"},Object(b.jsx)(Y.EuiPageTemplate.Section,null,f&&O&&Object(b.jsx)(ee.HeaderMenuPortal,{setHeaderActionMenu:f,theme$:O},y&&Object(b.jsx)(Ea,{enabled:k,toggleSetupMode:de}),Object(b.jsx)(Oa,null)),Object(b.jsx)(se,{pageTitle:t,onRefresh:()=>{m||(g(!0),null==a||a().then(E).catch(h).finally((()=>{g(!1)})),pe(ae.d.MetricbeatMigration)&&ue())}}),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),s&&Object(b.jsx)(Y.EuiTabs,{size:"l"},s.map(((e,t)=>{return Object(b.jsx)(Y.EuiTab,{key:t,disabled:ya(r),title:e.label,"data-test-subj":e.testSubj,href:e.route?(s=e.route,p.createHref({pathname:s})):void 0,isSelected:e.route?M(e.route):void 0,onClick:e.onClick,prepend:e.prepend},e.label);var s}))),Object(b.jsx)(Y.EuiPage,{paddingSize:"m"},Object(b.jsx)(Y.EuiPageBody,null,j?null:a&&!u?Object(b.jsx)(Re,null):o))))};function ya(e){const t=le();if(!pe(ae.d.MetricbeatMigration))return!1;if(!t.data)return!1;if(!e)return!1;const s=t.data[e]||{};return 0===s.totalUniqueInstanceCount||0===s.totalUniqueInternallyCollectedCount&&0===s.totalUniqueFullyMigratedCount&&0===s.totalUniquePartiallyMigratedCount}const ka=({...e})=>{const t=[{id:"overview",label:B.i18n.translate("xpack.monitoring.apmNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/apm"},{id:"instances",label:B.i18n.translate("xpack.monitoring.apmNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/apm/instances"}];return Object(b.jsx)(Ma,d()({},e,{tabs:t,product:"apm"}))};function Sa(){const{services:e}=Object(i.useKibana)(),t=Object(c.useHistory)(),{handleTimeChange:s}=K(),[a,r]=Object(n.useState)(0),[o,l]=Object(n.useState)(!1),u=Object(n.useRef)(o),d=e=>{u.current=e,l(e)};return Object(n.useEffect)((()=>{const e=()=>{u.current?d(!1):r((e=>e>0?e-1:0))};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{onBrush:({xaxis:t})=>{var i;const{to:n,from:o}=t,l=null===(i=e.uiSettings)||void 0===i?void 0:i.get("dateFormat:tz"),c=_a(l),u=$e()(o-c),m=$e()(n-c);s(u.toISOString(),m.toISOString()),d(!0),r(a+1)},zoomInfo:{zoomOutHandler:()=>t.goBack(),showZoomOutBtn:()=>a>0}}}const _a=e=>"Browser"===e?0:1*$e.a.tz(e).utcOffset()*60*1e3,Ta=e=>{if(!N.a.shims.isCloud||!e)return!1;let t=!1;return e.forEach((e=>{const[s,a]=e.split("."),i=Number(s);(i>7||7===i&&Number(a)>=13)&&(t=!0)})),t},wa=(e,t)=>e.map(((e,s)=>Object(b.jsx)(Y.EuiFlexItem,{style:{minWidth:"45%"},key:s},Object(b.jsx)(ds,d()({},t,{series:e}))))),Ca=({stats:e,metrics:t,seriesToShow:s,title:a,summary:i,StatusComponent:n,...r})=>{if(!t)return null;const o=null!=i&&i.version?[null==i?void 0:i.version]:e.versions,l=(e=>{const t={};return e?(t.title=B.i18n.translate("xpack.monitoring.apm.metrics.topCharts.agentTitle",{defaultMessage:"Integrations Server - Resource Usage"}),t.heading=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.apm.metrics.agentHeading",defaultMessage:"Integrations Server"}),t):(t.title=B.i18n.translate("xpack.monitoring.apm.metrics.topCharts.title",{defaultMessage:"APM Server - Resource Usage"}),t.heading=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.apm.metrics.heading",defaultMessage:"APM server"}),t)})(Ta(o)),c=[t.apm_cpu,t.apm_os_load],{config:u}=i||e;return c.push(u.container?t.apm_memory_cgroup:t.apm_memory),Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,l.heading)),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(n,{stats:e})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h3",null,l.title)),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0},wa(c,r))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h3",null,a)),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0},wa(s,r)))))};function Ia({status:e,availability:t=!0}){const s=(()=>{if(!t)return Ae.GRAY;const s=e.toUpperCase();return Ae[s]||Ae.YELLOW})();return Object(b.jsx)(Be,{type:s,label:B.i18n.translate("xpack.monitoring.apm.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function La({alerts:e,stats:t}){const{apms:{total:s},totalEvents:a,timeOfLastEvent:i}=t,r=[{label:B.i18n.translate("xpack.monitoring.apm.instances.status.serversLabel",{defaultMessage:"Servers"}),value:s,"data-test-subj":"total"},{label:B.i18n.translate("xpack.monitoring.apm.instances.status.totalEventsLabel",{defaultMessage:"Total Events"}),value:Et(a,"0.[0]a"),"data-test-subj":"totalEvents"},{label:B.i18n.translate("xpack.monitoring.apm.instances.status.lastEventLabel",{defaultMessage:"Last Event"}),value:B.i18n.translate("xpack.monitoring.apm.instances.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ge(+$e()(i),S.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(b.jsx)(jt,{metrics:r,alerts:e,IconComponent:({status:e})=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.apm.instances.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(b.jsx)(Ia,{status:e})}})),"data-test-subj":"apmDetailStatus"})}function Fa({stats:e}){return Object(b.jsx)(La,{stats:e})}const Pa=B.i18n.translate("xpack.monitoring.apm.overview.panels.title",{defaultMessage:"APM Server - Metrics"});function Na(e){const{metrics:t}=e,s=[t.apm_responses_valid,t.apm_responses_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_requests,t.apm_transformations],a={...e,title:Pa,seriesToShow:s};return Object(b.jsx)(Ca,d()({},a,{StatusComponent:Fa}))}const Da=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{zoomInfo:a,onBrush:r}=Sa(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=q(),m=Object(v.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)(null),j=B.i18n.translate("xpack.monitoring.apm.overview.routeTitle",{defaultMessage:"APM server"}),x=B.i18n.translate("xpack.monitoring.apm.overview.pageTitle",{defaultMessage:"APM server overview"});Object(n.useEffect)((()=>{m&&u(m.cluster_name,{inApm:!0})}),[m,u]);const h=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/apm`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(b.jsx)(ka,{title:j,pageTitle:x,getPageData:h,"data-test-subj":"apmOverviewPage"},g&&Object(b.jsx)(Na,d()({},g,{onBrush:r,zoomInfo:a})))},Ra=[5,10,20,50],Aa={pageSize:20,initialPageSize:20,pageIndex:0,initialPageIndex:0,pageSizeOptions:Ra,totalItemCount:0},za=e=>{const t=Aa;return e&&(t.initialPageSize=e.size,t.pageSize=e.size,t.initialPageIndex=e.index,t.pageIndex=e.index),{...t,pageSizeOptions:Ra}};function Ba(e){const t=new P.Storage(window.localStorage),s=Rt(e),a=At(e),i=s(t),[r,o]=Object(n.useState)(za(i.page)),l=Object(n.useCallback)((e=>{e!==r.totalItemCount&&o({...r,totalItemCount:e})}),[o,r]),[c,u]=Object(n.useState)(i.sort||{sort:{field:"name",direction:S.s}}),[d,m]=Object(n.useState)(""),g=({page:e,sort:s,queryText:i})=>{o({...r,initialPageSize:e.size,pageSize:e.size,initialPageIndex:e.index,pageIndex:e.index,pageSizeOptions:Ra}),u({sort:s}),a(t,{page:e,sort:{sort:s}}),m(i)};return{getPaginationRouteOptions:Object(n.useCallback)((()=>r&&c?{pagination:{size:r.pageSize,index:r.pageIndex},...c,queryText:d}:{}),[r,d,c]),getPaginationTableProps:()=>({sorting:c,pagination:r,onTableChange:g}),updateTotalItemCount:l}}function Va(e,t){const s=t?{name:B.i18n.translate("xpack.monitoring.apm.instances.cgroupMemoryUsageTitle",{defaultMessage:"Memory Usage (cgroup)"}),field:"cgroup_memory",render:e=>Et(e,"byte")}:{name:B.i18n.translate("xpack.monitoring.apm.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Et(e,"byte")};return[{name:B.i18n.translate("xpack.monitoring.apm.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(pe(ae.d.MetricbeatMigration)){const t=Object(v.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(b.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(b.jsx)(Ds,{setupMode:e,status:t,instance:i,productName:S.a}))}return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiLink,{href:Te(`#/apm/instances/${s.uuid}`),"data-test-subj":`apmLink-${t}`},t),a)}},{name:B.i18n.translate("xpack.monitoring.apm.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:B.i18n.translate("xpack.monitoring.apm.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Et(e,"","/s")},{name:B.i18n.translate("xpack.monitoring.apm.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Et(e,"byte","/s")},{name:B.i18n.translate("xpack.monitoring.apm.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Et(e,"0")},{name:B.i18n.translate("xpack.monitoring.apm.instances.lastEventTitle",{defaultMessage:"Last Event"}),field:"time_of_last_event",render:e=>B.i18n.translate("xpack.monitoring.apm.instances.lastEventValue",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ge(+$e()(e),"since")}})},s,{name:B.i18n.translate("xpack.monitoring.apm.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}function Ua({apms:e,setupMode:t,alerts:s}){const{pagination:a,sorting:i,onTableChange:n,data:r}=e;let o=null;pe(ae.d.MetricbeatMigration)&&(o=Object(b.jsx)(As,{setupModeData:t.data,productName:S.a}));const l=Object(v.uniq)(r.apms.map((e=>e.version))).map((e=>({value:e})));return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.apm.instances.heading",defaultMessage:"APM Instances"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(La,{stats:r.stats,alerts:s})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,o,Object(b.jsx)(Pt,{className:"apmInstancesTable",rows:r.apms,columns:Va(t,r.cgroup),sorting:i,pagination:a,setupMode:t,productName:S.a,search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.apm.instances.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})},filters:[{type:"field_value_selection",field:"version",name:B.i18n.translate("xpack.monitoring.apm.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:n,executeQueryOptions:{defaultFields:["name"]}}))))}const $a=B.i18n.translate("xpack.monitoring.metricbeatMigration.migrationStatus",{defaultMessage:"Migration status"}),Ga=B.i18n.translate("xpack.monitoring.metricbeatMigration.monitoringStatus",{defaultMessage:"Monitoring status"});function qa(e){return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiCallOut,{color:"warning",iconType:"help",title:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetup",defaultMessage:"If security is enabled, {link} might be required.",values:{link:Object(b.jsx)(n.Fragment,null," ",Object(b.jsx)(Y.EuiLink,{href:e,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetupLinkText",defaultMessage:"additional setup"})))}}))}))}function Ha(e){return e.isInternalCollector||e.isNetNewUser?{title:e.isNetNewUser?Ga:$a,status:"incomplete",children:Object(b.jsx)(Y.EuiCallOut,{size:"s",color:"warning",title:B.i18n.translate("xpack.monitoring.metricbeatMigration.isInternalCollectorStatusTitle",{defaultMessage:"No monitoring data detected, but well continue checking."})})}:e.isPartiallyMigrated||e.isFullyMigrated?{title:$a,status:"complete",children:Object(b.jsx)(Y.EuiCallOut,{size:"s",color:"success",title:B.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusDescription",{defaultMessage:"Metricbeat is shipping monitoring data."})))}:null}function Wa(e,t){if(!e||!e.isFullyMigrated){let s="";if(e){const t=Ge(e.lastInternallyCollectedTimestamp||e.lastTimestamp,S.c);s=B.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.partiallyMigratedStatusDescription",{defaultMessage:"Last self monitoring was {secondsSinceLastInternalCollectionLabel} ago.",values:{secondsSinceLastInternalCollectionLabel:t}})}return{title:$a,status:"incomplete",children:Object(b.jsx)(Y.EuiCallOut,{size:"s",color:"warning",title:B.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusTitle",{defaultMessage:"Data is still coming from self monitoring"})},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusDescription",{defaultMessage:"It can take up to {secondsAgo} seconds to detect data.",values:{secondsAgo:t.secondsAgo}})),Object(b.jsx)("p",null,s))}}return{title:$a,status:"complete",children:Object(b.jsx)(Y.EuiCallOut,{size:"s",color:"success",title:B.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusDescription",{defaultMessage:"We are not seeing any documents from self monitoring. Migration complete!"})))}}const Ka="beat",Ja="setMonitoringUrl",Ya="enableMetricbeat",Qa="disableInternal";const Xa=new P.Storage(window.localStorage),Za=`${S.Z}.mb_migration.esMonitoringUrl`;class flyout_Flyout extends n.Component{constructor(e){super(e),I()(this,"setEsMonitoringUrl",(e=>{Xa.set(Za,e),this.setState({esMonitoringUrl:e})}));let t=Xa.get(Za);t||(t=e.monitoringHosts?e.monitoringHosts[0]:"http://localhost:9200"),this.checkInterval=null;let s=Ja;e.product&&e.product.isPartiallyMigrated&&(s=Qa),this.state={activeStep:s,esMonitoringUrl:t,checkedStatusByStep:{[Ya]:!1,[Qa]:!1,userAcknowledgedNoClusterUuidPrompt:!1}}}finishedFlyout(){const{onClose:e}=this.props;e()}renderActiveStep(){const{product:e,productName:t,onClose:s,meta:a}=this.props,{activeStep:i,esMonitoringUrl:r,checkedStatusByStep:o}=this.state;switch(i){case Ja:return Object(b.jsx)(Y.EuiForm,null,Object(b.jsx)(Y.EuiFormRow,{fullWidth:!0,label:B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlLabel",{defaultMessage:"URL of monitoring cluster"}),helpText:B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlHelpText",{defaultMessage:"Typically a single URL. If multiple URLs, separate with a comma.\n                The running Metricbeat instance must be able to communicate with these Elasticsearch servers."})},Object(b.jsx)(Y.EuiFieldText,{fullWidth:!0,value:r,onChange:e=>this.setEsMonitoringUrl(e.target.value)})));case Ya:case Qa:const l=function(e,t,s,a,i){switch(e){case S.B:if(s===Ya)return function(e,t,{esMonitoringUrl:s}){const a=N.a.shims.docLinks.links.monitoring.monitorKibana,i=N.a.shims.docLinks.links.metricbeat.install,r=N.a.shims.docLinks.links.metricbeat.start,o=qa(a);return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Kibana"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Kibana x-pack module in Metricbeat"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable kibana-xpack"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Kibana monitoring metrics from http://localhost:5601. If the local Kibana instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(b.jsx)(fs,null,"hosts"),file:Object(b.jsx)(fs,null,"modules.d/kibana-xpack.yml")}}))),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(b.jsx)(fs,null,"metricbeat.yml")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:r,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ha(e)]}(t,0,i);if(s===Qa)return function(e,t){let s=null;return e.isPrimary&&(s=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartWarningTitle",{defaultMessage:"This step requires you to restart the Kibana server"}),color:"warning",iconType:"help"},Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartNote",defaultMessage:"Expect errors until the server is running again."})))))),[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Kibana monitoring metrics"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.description",defaultMessage:"Add this setting to {file}.",values:{file:Object(b.jsx)(fs,null,"kibana.yml")}}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.kibana.collection.enabled: false"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.note",defaultMessage:"For {config}, leave the default value of ({defaultValue}).",values:{config:Object(b.jsx)(fs,null,"monitoring.enabled"),defaultValue:Object(b.jsx)(fs,null,"true")}}))),s)},Wa(e,t)]}(t,a);case S.r:if(s===Ya)return function(e,t,{esMonitoringUrl:s}){const a=N.a.shims.docLinks.links.monitoring.monitorElasticsearch,i=N.a.shims.docLinks.links.metricbeat.install,r=N.a.shims.docLinks.links.metricbeat.start,o=qa(a);return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Elasticsearch"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Elasticsearch x-pack module in Metricbeat"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleInstallDirectory",{defaultMessage:"From the installation directory, run:"}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable elasticsearch-xpack"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module collects Elasticsearch metrics from {url}. If the local server has a different address, add it to the hosts setting in {module}.",values:{module:Object(b.jsx)(fs,null,"modules.d/elasticsearch-xpack.yml"),url:Object(b.jsx)(fs,null,"http://localhost:9200")}}))),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send data to the monitoring cluster"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatDescription",defaultMessage:"Modify {file} to set the connection information.",values:{file:Object(b.jsx)(fs,null,"metricbeat.yml")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:r,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},Ha(e)]}(t,0,i);if(s===Qa)return function(e,t){return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionDescription",defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics. Set {monospace} to false on each server in the production cluster.",values:{monospace:Object(b.jsx)(fs,null,"xpack.monitoring.elasticsearch.collection.enabled")}}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"curl"},'PUT _cluster/settings\n{\n  "persistent": {\n    "xpack.monitoring.elasticsearch.collection.enabled": false\n  }\n}\n          '))},Wa(e,t)]}(t,a);case S.F:if(s===Ya)return function(e,t,{esMonitoringUrl:s}){const a=N.a.shims.docLinks.links.monitoring.monitorLogstash,i=N.a.shims.docLinks.links.metricbeat.install,r=N.a.shims.docLinks.links.metricbeat.start,o=qa(a);return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Logstash"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Logstash x-pack module in Metricbeat"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable logstash-xpack"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Logstash monitoring metrics from http://localhost:9600. If the local Logstash instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(b.jsx)(fs,null,"hosts"),file:Object(b.jsx)(fs,null,"modules.d/logstash-xpack.yml")}}))),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(b.jsx)(fs,null,"metricbeat.yml")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:r,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ha(e)]}(t,0,i);if(s===Qa)return function(e,t){return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Logstash monitoring metrics"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the Logstash configuration file ({file}):",values:{file:Object(b.jsx)(fs,null,"logstash.yml")}}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"xpack.monitoring.enabled: false"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart Logstash after making this change."}))))},Wa(e,t)]}(t,a);case S.b:if(s===Ya)return function(e,t,{esMonitoringUrl:s}){const a=N.a.shims.docLinks.links.metricbeat.configure,i=N.a.shims.docLinks.links.metricbeat.install,r=N.a.shims.docLinks.links.metricbeat.start,o=N.a.shims.docLinks.links.metricbeat.httpEndpoint,l=e.beatType,c=qa(a);return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as this {beatType}",values:{beatType:l||Ka}}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect {beatType} monitoring metrics from http://localhost:5066. If the {beatType} instance being monitored has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(b.jsx)(fs,null,"hosts"),file:Object(b.jsx)(fs,null,"modules.d/beat-xpack.yml"),beatType:l||Ka}}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiCallOut,{color:"warning",iconType:"help",title:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirections",defaultMessage:"In order for Metricbeat to collect metrics from the running {beatType}, you need to {link}.",values:{link:Object(b.jsx)(Y.EuiLink,{href:o,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirectionsLinkText",defaultMessage:"enable an HTTP endpoint for the {beatType} instance being monitored",values:{beatType:l}})),beatType:l||Ka}})))}),c)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(b.jsx)(fs,null,"metricbeat.yml")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),c)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:r,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ha(e)]}(t,0,i);if(s===Qa)return function(e,t){const s=e.beatType;return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of {beatType}'s monitoring metrics",values:{beatType:s||Ka}}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in {beatType}'s configuration file ({file}):",values:{beatType:s||Ka,file:Object(b.jsx)(fs,null,s,".yml")}}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart {beatType} after making this change.",values:{beatType:s||Ka}}))))},Wa(e,t)]}(t,a);case S.a:if(s===Ya)return function(e,t,{esMonitoringUrl:s}){const a=N.a.shims.docLinks.links.metricbeat.configure,i=N.a.shims.docLinks.links.metricbeat.install,r=N.a.shims.docLinks.links.metricbeat.start,o=qa(a);return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as the APM server"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:i,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect APM server monitoring metrics from http://localhost:5066. If the local APM server has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(b.jsx)(fs,null,"hosts"),file:Object(b.jsx)(fs,null,"modules.d/beat-xpack.yml")}}))),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(b.jsx)(fs,null,"metricbeat.yml")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),o)},{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{href:r,target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},Ha(e)]}(t,0,i);if(s===Qa)return function(e,t){return[{title:B.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of the APM server's monitoring metrics"}),children:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the APM server's configuration file ({file}):",values:{file:Object(b.jsx)(fs,null,"apm-server.yml")}}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart the APM server after making this change."}))))},Wa(e,t)]}(t,a)}return[]}(t,e,i,a,{doneWithMigration:s,esMonitoringUrl:r.split(",").map((e=>`"${e}"`)),hasCheckedStatus:o[i]});return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSteps,{steps:l}))}return null}renderActiveStepNextButton(){const{product:e,productName:t}=this.props,{activeStep:s,esMonitoringUrl:a,userAcknowledgedNoClusterUuidPrompt:i}=this.state;if(!e)return null;let n=!e.isFullyMigrated,r=s!==Qa;if(s===Ya&&(t===S.r?(r=!1,n=!e.isPartiallyMigrated&&!e.isFullyMigrated):(r=!e.isFullyMigrated,n=!e.isFullyMigrated)),e.isFullyMigrated&&null===e.clusterUuid&&(i||(n=!0)),r){let t=!1,i=null;return s===Ja?(t=!a||0===a.length,i=e.isPartiallyMigrated||e.isFullyMigrated?Qa:Ya):s===Ya&&(t=!e.isPartiallyMigrated&&!e.isFullyMigrated,i=Qa),Object(b.jsx)(Y.EuiButton,{type:"submit",fill:!0,iconType:"sortRight",iconSide:"right",isDisabled:t,onClick:()=>this.setState({activeStep:i})},B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.nextButtonLabel",{defaultMessage:"Next"}))}return Object(b.jsx)(Y.EuiButton,{type:"submit",fill:!0,isDisabled:n,onClick:()=>this.finishedFlyout()},B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.doneButtonLabel",{defaultMessage:"Done"}))}getDocumentationTitle(){const{productName:e}=this.props;let t=null;return e===S.B?t=N.a.shims.docLinks.links.monitoring.monitorKibana:e===S.r&&(t=N.a.shims.docLinks.links.monitoring.monitorElasticsearch),t?Object(b.jsx)(Y.EuiText,{size:"s"},Object(b.jsx)(Y.EuiLink,{href:t,target:"_blank"},B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.learnMore",{defaultMessage:"Learn about why."}))):null}render(){const{onClose:e,instance:t,productName:s,product:a}=this.props,i=Ft(s),r=t&&t.name||Ct(s);let o=B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitle",{defaultMessage:"Monitor `{instanceName}` {instanceIdentifier} with Metricbeat",values:{instanceName:r,instanceIdentifier:i}});a.isNetNewUser&&(o=B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitleNewUser",{defaultMessage:"Monitor {instanceName} {instanceIdentifier} with Metricbeat",values:{instanceIdentifier:i,instanceName:r}}));let l=null;return a.isFullyMigrated&&null===a.clusterUuid&&(l=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{color:"warning",iconType:"help",title:B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidTitle",{defaultMessage:"No cluster detected"})},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.flyout.noClusterUuidDescription",defaultMessage:"This {productName} {instanceIdentifier} is not connected to an Elasticsearch cluster so once fully migrated, this {productName} {instanceIdentifier} will appear in the Standalone cluster instead of this one. {link}",values:{productName:s,instanceIdentifier:i,link:Object(b.jsx)(Y.EuiLink,{href:"#/overview?_g=(cluster_uuid:__standalone_cluster__)",target:"_blank"},"Click here to view the Standalone cluster.")}})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiCheckbox,{id:"monitoringFlyoutNoClusterUuidCheckbox",label:B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidCheckboxLabel",{defaultMessage:"Yes, I understand that I will need to look in the Standalone cluster for\n                  this {productName} {instanceIdentifier}.",values:{productName:s,instanceIdentifier:i}}),checked:this.state.userAcknowledgedNoClusterUuidPrompt,onChange:e=>this.setState({userAcknowledgedNoClusterUuidPrompt:e.target.checked})})),Object(b.jsx)(Y.EuiSpacer,{size:"s"}))),Object(b.jsx)(Y.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutTitle"},Object(b.jsx)(Y.EuiFlyoutHeader,{hasBorder:!0},Object(b.jsx)(Y.EuiTitle,{size:"m"},Object(b.jsx)("h2",{id:"flyoutTitle"},o))),Object(b.jsx)(Y.EuiFlyoutBody,null,this.renderActiveStep(),l),Object(b.jsx)(Y.EuiFlyoutFooter,{style:{marginBottom:"64px"}},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},B.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.closeButtonLabel",{defaultMessage:"Close"}))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},this.renderActiveStepNextButton()))))}}class setup_mode_WrappedSetupModeRenderer extends r.a.Component{constructor(...e){super(...e),I()(this,"globalState",void 0),I()(this,"state",{renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}UNSAFE_componentWillMount(){this.globalState=this.context;const{kibana:e,onHttpError:t}=this.props;oe.supported=!0,me(this.globalState,e.services.http,t,(e=>{const t={renderState:!0},{productName:s}=this.props;if(!s)return void this.setState(t);const a=le();if(!a.enabled||!a.data)return void this.setState(t);const i=a.data[s],n=e?e[s]:null;if(i&&n){const e=function(e,t){for(const s of t)if(-1===e.indexOf(s))return s}(Object.keys(n.byUuid),Object.keys(i.byUuid));e&&(t.newProduct=i.byUuid[e])}this.setState(t)}))}componentWillUnmount(){oe.supported=!1}reset(){this.setState({renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}getFlyout(e,t){const{productName:s}=this.props,{isFlyoutOpen:a,instance:i,isSettingUpNew:n,newProduct:r}=this.state;if(!e||!a)return null;let o=null;if(r?o=r:i&&Object.keys(i).length&&(o=e.byUuid[i.uuid]),!o){const t=Object.values(e.byUuid);o=t.length&&!n?t[0]:{isNetNewUser:!0}}return Object(b.jsx)(flyout_Flyout,{onClose:()=>this.reset(),productName:s,product:o,meta:t,instance:i,updateProduct:ue,isSettingUpNew:n})}getBottomBar(e){return!e.enabled||e.hideBottomBar?null:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiSpacer,{size:"xxl"}),Object(b.jsx)(Y.EuiBottomBar,null,Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center","data-test-subj":"monitoringSetupModeBottomBar"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.setupMode.description",defaultMessage:"You are in setup mode. The ({flagIcon}) icon indicates configuration options.",values:{flagIcon:Object(b.jsx)(Y.EuiIcon,{type:"flag"})}})))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(va,{exitSetupMode:()=>de(!1)})))))))}async shortcutToFinishMigration(){await(async()=>{const e=`../api/monitoring/v1/setup/collection/${ie.cluster_uuid}/disable_internal_collection`;try{return await ne.post(e)}catch(e){throw re(e),e}})(),await ue()}render(){const{render:e,productName:t}=this.props,s=le();let a={byUuid:{}};s.data&&(t&&s.data[t]?a=s.data[t]:s.data&&(a=s.data));const i=s.data?s.data._meta:null;return e({setupMode:{data:a,meta:i,enabled:s.enabled,productName:t,updateSetupModeData:ue,shortcutToFinishMigration:()=>this.shortcutToFinishMigration(),openFlyout:(e,t)=>this.setState({isFlyoutOpen:!0,instance:e,isSettingUpNew:t}),closeFlyout:()=>this.setState({isFlyoutOpen:!1})},flyoutComponent:this.getFlyout(a,i),bottomBarComponent:this.getBottomBar(s)})}}setup_mode_WrappedSetupModeRenderer.contextType=D;const ei=Object(i.withKibana)((ti=setup_mode_WrappedSetupModeRenderer,function(e){const t=ja();return Object(b.jsx)(ti,d()({},e,{onHttpError:t}))}));var ti;const si=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{services:a}=Object(i.useKibana)(),{generate:r}=q(),{updateTotalItemCount:o,getPaginationTableProps:l}=Ba("apm.instances"),c=s.cluster_uuid,u=s.ccs,d=Object(v.find)(e,{cluster_uuid:c}),[m,g]=Object(n.useState)({}),p=B.i18n.translate("xpack.monitoring.apm.instances.routeTitle",{defaultMessage:"{apm} - Instances",values:{apm:"APM server"}}),j=B.i18n.translate("xpack.monitoring.apm.instances.pageTitle",{defaultMessage:"APM server instances"});Object(n.useEffect)((()=>{d&&r(d.cluster_name,{inApm:!0})}),[d,r]);const x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/apm/instances`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(n),o(null==n?void 0:n.stats.total)}),[u,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,o]),{pagination:h,sorting:f,onTableChange:O}=l();return Object(b.jsx)(ka,{title:p,pageTitle:j,getPageData:x,"data-test-subj":"apmInstancesPage"},Object(b.jsx)(ei,{productName:S.a,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(Ua,{setupMode:e,apms:{pagination:h,sorting:f,onTableChange:O,data:m}}),s)}))};function ai({alerts:e=null,stats:t}){const{name:s,output:a,version:i,uptime:r,timeOfLastEvent:o}=t,l=[{label:B.i18n.translate("xpack.monitoring.apm.instance.status.nameLabel",{defaultMessage:"Name"}),value:s,"data-test-subj":"name"},{label:B.i18n.translate("xpack.monitoring.apm.instance.status.outputLabel",{defaultMessage:"Output"}),value:a,"data-test-subj":"output"},{label:B.i18n.translate("xpack.monitoring.apm.instance.status.versionLabel",{defaultMessage:"Version"}),value:i,"data-test-subj":"version"},{label:B.i18n.translate("xpack.monitoring.apm.instance.status.uptimeLabel",{defaultMessage:"Uptime"}),value:Et(r,"time_since"),"data-test-subj":"uptime"},{label:B.i18n.translate("xpack.monitoring.apm.instance.status.lastEventLabel",{defaultMessage:"Last Event"}),value:B.i18n.translate("xpack.monitoring.apm.instance.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ge(+$e()(o),S.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(b.jsx)(jt,{metrics:l,alerts:e,IconComponent:({status:e})=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.apm.instance.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(b.jsx)(Ia,{status:e})}})),"data-test-subj":"apmDetailStatus"})}const ii=B.i18n.translate("xpack.monitoring.apm.instance.panels.title",{defaultMessage:"APM Server - Metrics"});function ni(e){const{metrics:t}=e,s=[t.apm_requests,t.apm_responses_valid,t.apm_responses_errors,t.apm_acm_request_count,t.apm_acm_response,t.apm_acm_response_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_transformations],a=e.summary,i={...e,title:ii,seriesToShow:s,stats:a};return Object(b.jsx)(Ca,d()({},i,{StatusComponent:ai}))}const ri=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(D),{services:r}=Object(i.useKibana)(),{generate:o}=q(),{zoomInfo:l,onBrush:u}=Sa(),d=a.cluster_uuid,m=a.ccs,g=Object(v.find)(e,{cluster_uuid:d}),[p,j]=Object(n.useState)({}),[x,h]=Object(n.useState)(""),f=B.i18n.translate("xpack.monitoring.apm.instance.routeTitle",{defaultMessage:"{apm} - Instance",values:{apm:"APM server"}}),O=B.i18n.translate("xpack.monitoring.apm.instance.pageTitle",{defaultMessage:"APM server instance: {instanceName}",values:{instanceName:x}});Object(n.useEffect)((()=>{g&&o(g.cluster_name,{inApm:!0,instance:x})}),[g,x,o]);const E=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${d}/apm/${s}`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));j(n),h((null==n?void 0:n.apmSummary.name)||"")}),[m,d,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(b.jsx)(Ma,{title:f,pageTitle:O,getPageData:E,"data-test-subj":"apmInstancePage"},Object(b.jsx)(ni,{summary:p.apmSummary||{},metrics:p.metrics||{},onBrush:u,zoomInfo:l}))};function oi({summary:e,metrics:t,...s}){const a=[t.beat_event_rates,t.beat_fail_rates,t.beat_throughput_rates,t.beat_output_errors,t.beat_memory,t.beat_cpu_utilization,t.beat_os_load,t.beat_handles],i=[{label:B.i18n.translate("xpack.monitoring.beats.instance.nameLabel",{defaultMessage:"Name"}),value:e.name,"data-test-subj":"name"},{label:B.i18n.translate("xpack.monitoring.beats.instance.hostLabel",{defaultMessage:"Host"}),value:e.transportAddress,"data-test-subj":"host"},{label:B.i18n.translate("xpack.monitoring.beats.instance.versionLabel",{defaultMessage:"Version"}),value:e.version,"data-test-subj":"version"},{label:B.i18n.translate("xpack.monitoring.beats.instance.typeLabel",{defaultMessage:"Type"}),value:e.type,"data-test-subj":"type"},{label:B.i18n.translate("xpack.monitoring.beats.instance.outputLabel",{defaultMessage:"Output"}),value:e.output,"data-test-subj":"output"},{label:B.i18n.translate("xpack.monitoring.beats.instance.configReloadsLabel",{defaultMessage:"Config reloads"}),value:Et(e.configReloads,"int_commas"),"data-test-subj":"configReloads"},{label:B.i18n.translate("xpack.monitoring.beats.instance.uptimeLabel",{defaultMessage:"Uptime"}),value:Et(e.uptime,"time_since"),"data-test-subj":"uptime"}],n=[{label:B.i18n.translate("xpack.monitoring.beats.instance.eventsTotalLabel",{defaultMessage:"Events total"}),value:Et(e.eventsTotal,"int_commas"),"data-test-subj":"eventsTotal"},{label:B.i18n.translate("xpack.monitoring.beats.instance.eventsEmittedLabel",{defaultMessage:"Events emitted"}),value:Et(e.eventsEmitted,"int_commas"),"data-test-subj":"eventsEmitted"},{label:B.i18n.translate("xpack.monitoring.beats.instance.eventsDroppedLabel",{defaultMessage:"Events dropped"}),value:Et(e.eventsDropped,"int_commas"),"data-test-subj":"eventsDropped"},{label:B.i18n.translate("xpack.monitoring.beats.instance.bytesSentLabel",{defaultMessage:"Bytes sent"}),value:Et(e.bytesWritten,"byte"),"data-test-subj":"bytesWritten"},{label:B.i18n.translate("xpack.monitoring.beats.instance.handlesLimitSoftLabel",{defaultMessage:"Handles limit (soft)"}),value:Et(e.handlesSoftLimit,"int_commas"),"data-test-subj":"handlesLimitSoft"},{label:B.i18n.translate("xpack.monitoring.beats.instance.handlesLimitHardLabel",{defaultMessage:"Handles limit (hard)"}),value:Et(e.handlesHardLimit,"int_commas"),"data-test-subj":"handlesLimitHard"}];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(jt,{metrics:i,"data-test-subj":"beatSummaryStatus01"})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(jt,{metrics:n,"data-test-subj":"beatSummaryStatus02"})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.beat.heading",defaultMessage:"Beat"}))),Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null))))))))}const li=({instance:e,...t})=>{const s=[];return e?s.push({id:"overview",label:B.i18n.translate("xpack.monitoring.beatsNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/beats/beat/${e}`}):(s.push({id:"overview",label:B.i18n.translate("xpack.monitoring.beatsNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/beats",testSubj:"beatsOverviewPage"}),s.push({id:"instances",label:B.i18n.translate("xpack.monitoring.beatsNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/beats/beats",testSubj:"beatsListingPage"})),Object(b.jsx)(Ma,d()({},t,{tabs:s,product:"beats"}))},ci=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(D),{services:r}=Object(i.useKibana)(),{generate:o}=q(),{zoomInfo:l,onBrush:u}=Sa(),d=a.cluster_uuid,m=a.ccs,g=Object(v.find)(e,{cluster_uuid:d}),[p,j]=Object(n.useState)({}),[x,h]=Object(n.useState)(""),f=B.i18n.translate("xpack.monitoring.beats.instance.routeTitle",{defaultMessage:"Beats - {instanceName} - Overview",values:{instanceName:x}}),O=B.i18n.translate("xpack.monitoring.beats.instance.pageTitle",{defaultMessage:"Beat instance: {beatName}",values:{beatName:x}});Object(n.useEffect)((()=>{g&&o(g.cluster_name,{inBeats:!0,instance:x})}),[g,x,o]);const E=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${d}/beats/beat/${s}`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));j(n),h((null==n?void 0:n.summary.name)||"")}),[m,d,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(b.jsx)(li,{title:f,pageTitle:O,getPageData:E,instance:s,"data-test-subj":"beatDetailPage"},Object(b.jsx)("div",{"data-test-subj":"monitoringBeatsInstanceApp"},Object(b.jsx)(oi,{summary:p.summary,metrics:p.metrics,onBrush:u,zoomInfo:l})))};function ui({stats:e,alerts:t}){const{total:s,types:a,stats:{bytesSent:i,totalEvents:n}}=e,r=[{label:B.i18n.translate("xpack.monitoring.beats.overview.totalBeatsLabel",{defaultMessage:"Total Beats"}),value:Et(s,"int_commas"),"data-test-subj":"totalBeats"}];return r.push(...a.map((({type:e,count:t})=>({label:e,value:Et(t,"int_commas"),"data-test-subj":"typeCount","data-test-type-count":`${e}:${t}`})))),r.push({label:B.i18n.translate("xpack.monitoring.beats.overview.totalEventsLabel",{defaultMessage:"Total Events"}),value:Et(n,"0.[0]a"),"data-test-subj":"totalEvents"}),r.push({label:B.i18n.translate("xpack.monitoring.beats.overview.bytesSentLabel",{defaultMessage:"Bytes Sent"}),value:Et(i,"byte"),"data-test-subj":"bytesSent"}),Object(b.jsx)(jt,{metrics:r,alerts:t,"data-test-subj":"beatsSummaryStatus"})}class listing_Listing extends n.PureComponent{getColumns(){const e=this.props.setupMode;return[{name:B.i18n.translate("xpack.monitoring.beats.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(pe(ae.d.MetricbeatMigration)){const t=Object(v.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(b.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(b.jsx)(Ds,{setupMode:e,status:t,instance:i,productName:S.b}))}return Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiLink,{href:Te(`#/beats/beat/${s.uuid}`),"data-test-subj":`beatLink-${t}`},t),a)}},{name:B.i18n.translate("xpack.monitoring.beats.instances.typeTitle",{defaultMessage:"Type"}),field:"type"},{name:B.i18n.translate("xpack.monitoring.beats.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:B.i18n.translate("xpack.monitoring.beats.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>Et(e,"","/s")},{name:B.i18n.translate("xpack.monitoring.beats.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>Et(e,"byte","/s")},{name:B.i18n.translate("xpack.monitoring.beats.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>Et(e,"0")},{name:B.i18n.translate("xpack.monitoring.beats.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>Et(e,"byte")},{name:B.i18n.translate("xpack.monitoring.beats.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}render(){const{stats:e,data:t,sorting:s,pagination:a,onTableChange:i,setupMode:n}=this.props;let r=null;pe(ae.d.MetricbeatMigration)&&(r=Object(b.jsx)(As,{setupModeData:n.data,useNodeIdentifier:!1,productName:S.b}));const o=Object(v.uniq)(t.map((e=>e.type))).map((e=>({value:e}))),l=Object(v.uniq)(t.map((e=>e.version))).map((e=>({value:e})));return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.listing.heading",defaultMessage:"Beats listing"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(ui,{stats:e})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,r,Object(b.jsx)(Pt,{className:"beatsTable",rows:t,setupMode:n,productName:S.b,columns:this.getColumns(),sorting:s,pagination:a,search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.beats.filterBeatsPlaceholder",{defaultMessage:"Filter Beats..."})},filters:[{type:"field_value_selection",field:"type",name:B.i18n.translate("xpack.monitoring.beats.instances.typeFilter",{defaultMessage:"Type"}),options:o,multiSelect:"or"},{type:"field_value_selection",field:"version",name:B.i18n.translate("xpack.monitoring.beats.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:i,executeQueryOptions:{defaultFields:["name","type"]}}))))}}const di=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{services:a}=Object(i.useKibana)(),{generate:r}=q(),{updateTotalItemCount:o,getPaginationTableProps:l}=Ba("beats.instances"),c=s.cluster_uuid,u=s.ccs,m=Object(v.find)(e,{cluster_uuid:c}),[g,p]=Object(n.useState)({}),j=B.i18n.translate("xpack.monitoring.beats.routeTitle",{defaultMessage:"Beats"}),x=B.i18n.translate("xpack.monitoring.beats.listing.pageTitle",{defaultMessage:"Beats listing"});Object(n.useEffect)((()=>{m&&r(m.cluster_name,{inBeats:!0})}),[m,r]);const h=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/beats/beats`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(n),o(null==n?void 0:n.stats.total)}),[u,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,o]);return Object(b.jsx)(li,{title:j,pageTitle:x,getPageData:h},Object(b.jsx)("div",{"data-test-subj":"monitoringBeatsInstancesApp"},Object(b.jsx)(ei,{productName:S.b,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(listing_Listing,d()({stats:g.stats,data:g.listing,setupMode:e},l())),s)})))};function mi({latestActive:e}){const t={last1m:B.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1MinuteLabel",{defaultMessage:"Last 1 minute"}),last5m:B.i18n.translate("xpack.monitoring.beats.overview.latestActive.last5MinutesLabel",{defaultMessage:"Last 5 minutes"}),last20m:B.i18n.translate("xpack.monitoring.beats.overview.latestActive.last20MinutesLabel",{defaultMessage:"Last 20 minutes"}),last1h:B.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1HourLabel",{defaultMessage:"Last 1 hour"}),last1d:B.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1DayLabel",{defaultMessage:"Last 1 day"})},s=e.map((({range:e,count:s})=>({range:t[e],count:s})));return Object(b.jsx)(Y.EuiBasicTable,{items:s,columns:[{field:"range",name:""},{field:"count",dataType:"number",name:""}]})}function gi({latestVersions:e}){return Object(b.jsx)(Y.EuiBasicTable,{items:e,columns:[{field:"version",name:""},{field:"count",dataType:"number",name:""}]})}function pi({latestTypes:e}){return Object(b.jsx)(Y.EuiBasicTable,{items:e,columns:[{field:"type",name:""},{field:"count",dataType:"number",name:""}]})}function ji({latestActive:e,latestTypes:t,latestVersions:s,stats:a,metrics:i,alerts:n,...r}){const o=[i.beat_event_rates,i.beat_fail_rates,i.beat_throughput_rates,i.beat_output_errors].map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(ds,d()({series:e},r))))));return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.overview.heading",defaultMessage:"Beats Overview"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(ui,{stats:a,alerts:n})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,function(e,t,s){if(t&&t.length>0)return Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.overview.activeBeatsInLastDayTitle",defaultMessage:"Active Beats in last day"}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(mi,{latestActive:e})),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5BeatTypesInLastDayTitle",defaultMessage:"Top 5 Beat Types in last day"}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(pi,{latestTypes:t})),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5VersionsInLastDayTitle",defaultMessage:"Top 5 Versions in last day"}))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(gi,{latestVersions:s})));const a=B.i18n.translate("xpack.monitoring.beats.overview.noActivityDescription",{defaultMessage:"Hi there! This area is where your latest Beats activity would show up, but you don't seem to have any activity within the last day."});return Object(b.jsx)(Y.EuiCallOut,{title:a,iconType:"gear","data-test-subj":"noRecentActivityMessage"})}(e,t,s)),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0},o))))}const bi=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{zoomInfo:a,onBrush:r}=Sa(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=q(),m=Object(v.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)(null),j=B.i18n.translate("xpack.monitoring.beats.overview.routeTitle",{defaultMessage:"Beats - Overview"}),x=B.i18n.translate("xpack.monitoring.beats.overview.pageTitle",{defaultMessage:"Beats overview"});Object(n.useEffect)((()=>{m&&u(m.cluster_name,{inBeats:!0})}),[m,u]);const h=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/beats`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(b.jsx)(li,{title:j,pageTitle:x,getPageData:h},Object(b.jsx)("div",null,null===(f=g)?null:Object(b.jsx)(ji,d()({},f,{onBrush:r,zoomInfo:a}))));var f};function xi(e){if("green"===e.status)return B.i18n.translate("xpack.monitoring.cluster.health.healthy",{defaultMessage:"Healthy"});const{product:t,status:s}=e;if("es"===t){if("yellow"===e.status)return B.i18n.translate("xpack.monitoring.cluster.health.replicaShards",{defaultMessage:"Missing replica shards"});if("red"===e.status)return B.i18n.translate("xpack.monitoring.cluster.health.primaryShards",{defaultMessage:"Missing primary shards"})}return"kb"!==t||"yellow"!==s&&"red"!==s?"N/A":Object(b.jsx)(Y.EuiText,null,B.i18n.translate("xpack.monitoring.cluster.health.pluginIssues",{defaultMessage:"Some plugins may be experiencing issues. Please check "}),Object(b.jsx)(Y.EuiLink,{href:`${N.a.shims.getBasePath()}/status`},"the Kibana status page"),".")}function hi(e){const t={green:"success",yellow:"warning",red:"danger"}[e.status]||"n/a";return Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiHealth,{color:t,"data-test-subj":"status"},Object(b.jsx)(xi,e))))}const fi=({extras:e})=>void 0===e?null:Object(b.jsx)(Y.EuiFlexItem,{grow:!1},e);function Oi(e){const t={elasticsearch:"logoElasticsearch",kibana:"logoKibana",logstash:"logoLogstash",beats:"logoBeats",apm:"apmApp",enterprise_search:"logoEnterpriseSearch"}[e.url];return Object(b.jsx)("div",{"data-test-subj":`clusterItemContainer${e.title}`},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiIcon,{type:t,size:"l"})),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h2",null,e.title))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},e.statusIndicator),Object(b.jsx)(fi,{extras:e.extras})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),e.children,Object(b.jsx)(Y.EuiSpacer,{size:"xxl"}))}function vi({usedBytes:e,maxBytes:t}){return e&&t?Object(b.jsx)("span",null,Object(b.jsx)(Y.EuiText,null,ft(e,t))):e?Object(b.jsx)("span",null,Object(b.jsx)(Y.EuiText,null,vt(e,"byte"))):null}function Ei({usedBytes:e,maxBytes:t}){return e&&t?Object(b.jsx)("span",null,Object(b.jsx)(Y.EuiText,null,Ot(e,t)),Object(b.jsx)(Y.EuiText,{color:"subdued",size:"s"},ft(e,t))):Object(b.jsx)(Y.EuiText,null,"0")}function Mi({setupModeEnabled:e,setupModeData:t,children:s,...a}){return e&&0===Object(v.get)(t,"totalUniqueInstanceCount",0)?s:Object(b.jsx)(Y.EuiLink,a,s)}function yi({setupModeData:e,badgeClickLink:t,productName:s}){if(!e)return null;const{totalUniqueInstanceCount:a,totalUniqueFullyMigratedCount:i,totalUniquePartiallyMigratedCount:n}=e,r=a>0&&(i===a||n===a),o=n>0,l=Object(v.get)(e,"detected.mightExist")||Object(v.get)(e,"detected.doesExist");let c=null;if(0===a)if(l){const e=B.i18n.translate("xpack.monitoring.setupMode.tooltip.detected",{defaultMessage:"No monitoring"});c=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:B.i18n.translate("xpack.monitoring.setupMode.tooltip.mightExist",{defaultMessage:"We detected usage of this product. Click to start monitoring."})},Object(b.jsx)(Y.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=B.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsage",{defaultMessage:"No usage"});c=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:B.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsageDetected",{defaultMessage:"We did not detect any usage. Click to view {identifier}.",values:{identifier:Ft(s,!0)}})},Object(b.jsx)(Y.EuiBadge,{color:"hollow",iconType:"flag",href:t,onClickAriaLabel:e},e))}else if(r)if(o){const e=B.i18n.translate("xpack.monitoring.euiTable.isPartiallyMigratedLabel",{defaultMessage:"Self monitoring is on"});c=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:B.i18n.translate("xpack.monitoring.setupMode.tooltip.disableInternal",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}. Click to view {identifierPlural} and disable self monitoring.",values:{identifierPlural:Ft(s,!0)}})},Object(b.jsx)(Y.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=B.i18n.translate("xpack.monitoring.euiTable.isFullyMigratedLabel",{defaultMessage:"Metricbeat monitoring"});c=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:B.i18n.translate("xpack.monitoring.setupMode.tooltip.allSet",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}.",values:{identifierPlural:Ft(s,!0)}})},Object(b.jsx)(Y.EuiBadge,{color:"success",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=B.i18n.translate("xpack.monitoring.euiTable.isInternalCollectorLabel",{defaultMessage:"Self monitoring"});c=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:B.i18n.translate("xpack.monitoring.setupMode.tooltip.oneInternal",{defaultMessage:"At least one {identifier} isnt monitored using Metricbeat. Click to view status.",values:{identifier:Ft(s)}})},Object(b.jsx)(Y.EuiBadge,{color:"danger",iconType:"flag",href:t,onClickAriaLabel:e},e))}return Object(b.jsx)(Y.EuiFlexItem,{grow:!1,"data-test-subj":"monitoringSetupModeMetricbeatMigrationTooltip"},c)}function ki(e,t,s){if(!e)return!1;const a=ge(s),i=t.find((t=>e[t]&&e[t].find((e=>e.states.length>0))));return a||i}const Si=e=>{const t=Object(v.get)(e,"total",0);let s=Object(v.get)(e,"primaries","N/A"),a="N/A";return"N/A"!==s&&(a=vt(t-s,"int_commas"),s=vt(s,"int_commas")),{primaries:s,replicas:a}},_i=e=>Ye.a.tz(e,Ye.a.tz.guess()).format("LL");function Ti(e){switch(e){case"warn":return"warning";case"debug":return"hollow";case"info":return"default";case"error":return"danger"}}const wi={info:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.infoLogsTooltipText",{defaultMessage:"The number of information logs"}),warn:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.warnLogsTooltipText",{defaultMessage:"The number of warning logs"}),debug:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.debugLogsTooltipText",{defaultMessage:"The number of debug logs"}),error:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.errorLogsTooltipText",{defaultMessage:"The number of error logs"}),fatal:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.fatalLogsTooltipText",{defaultMessage:"The number of fatal logs"}),unknown:B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.unknownLogsTooltipText",{defaultMessage:"Unknown"})},Ci=[S.I,S.P,S.H],Ii=[S.J,S.L,S.W,S.X,S.R,S.T,S.M,S.S],Li=[S.O];function Fi(e){const t=e.cluster_stats||{},s=t.nodes,a=t.indices,i=e.setupMode,o=e.alerts,l=r.a.useContext(Ve),c=()=>Te("#/elasticsearch"),u=()=>Te("#/elasticsearch/nodes"),{primaries:m,replicas:g}=Si(Object(v.get)(e,"cluster_stats.indices.shards",{})),p=Object(v.get)(i.data,"elasticsearch"),j=pe(ae.d.MetricbeatMigration)?Object(b.jsx)(yi,{setupModeData:p,productName:S.r,badgeClickLink:u()}):null;let x=null;if(ki(o,Ii,l)){const e=Ii.map((e=>o[e]));x=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:e}))}let h=null;if(ki(o,Ci,l)){const e=Ci.map((e=>o[e]));h=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:e}))}let f=null;if(ki(o,Li,l)){const e=Li.map((e=>o[e]));f=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:e}))}return Object(b.jsx)(Oi,d()({},e,{url:"elasticsearch",title:"Elasticsearch"}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:i.enabled,setupModeData:p,href:c(),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.overviewLinkAriaLabel",{defaultMessage:"Elasticsearch Overview"}),"data-test-subj":"esOverview"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.overviewLinkLabel",defaultMessage:"Overview"}))))),h),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.healthLabel",defaultMessage:"Health"})),Object(b.jsx)(Y.EuiDescriptionListDescription,null,Object(b.jsx)(Y.EuiHealth,{color:{green:"success",yellow:"warning",red:"danger"}[t.status],"data-test-subj":"statusIcon"},Object(b.jsx)(xi,{status:t.status,product:"es"}))),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.versionLabel",defaultMessage:"Version"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esVersion"},e.version||B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esUptime"},vt(Object(v.get)(s,"jvm.max_uptime_in_millis"),"time_since")),(()=>{if(e.ml){const t=Te("#/elasticsearch/ml_jobs");return Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(Mi,{setupModeEnabled:i.enabled,setupModeData:p,href:t},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jobsLabel",defaultMessage:"Machine learning jobs"}))),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esMlJobs"},Object(b.jsx)(Mi,{setupModeEnabled:i.enabled,setupModeData:p,href:t},e.ml.jobs)))}return null})(),e.showLicenseExpiration?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.licenseLabel",defaultMessage:"License"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esLicenseType"},Object(b.jsx)(Y.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiLink,{href:Te("#/license")},Object(v.capitalize)(e.license.type))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiText,{size:"s"},void 0===e.license.expiry_date_in_millis?"":Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.expireDateText",defaultMessage:"expires on {expiryDate}",values:{expiryDate:_i(e.license.expiry_date_in_millis)}})))))):null))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiLink,{"data-test-subj":"esNumberOfNodes",href:u()},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:vt(Object(v.get)(s,"count.total"),"int_commas")}}))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},j,x))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskAvailableLabel",defaultMessage:"Disk Available"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esDiskAvailable"},Object(b.jsx)(Ei,{usedBytes:Object(v.get)(s,"fs.available.bytes",Object(v.get)(s,"fs.available_in_bytes")),maxBytes:Object(v.get)(s,"fs.total.bytes",Object(v.get)(s,"fs.total_in_bytes"))})),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esJvmHeap"},Object(b.jsx)(Ei,{usedBytes:Object(v.get)(s,"jvm.mem.heap.used.bytes",Object(v.get)(s,"jvm.mem.heap_used_in_bytes")),maxBytes:Object(v.get)(s,"jvm.mem.heap.max.bytes",Object(v.get)(s,"jvm.mem.heap_max_in_bytes"))}))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:i.enabled,setupModeData:p,href:Te("#/elasticsearch/indices"),"data-test-subj":"esNumberOfIndices","aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.indicesCountLinkAriaLabel",{defaultMessage:"Elasticsearch Indices: {indicesCount}",values:{indicesCount:vt(Object(v.get)(a,"count"),"int_commas")}})},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.indicesCountLinkLabel",defaultMessage:"Indices: {indicesCount}",values:{indicesCount:vt(Object(v.get)(a,"count"),"int_commas")}}))))),f),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.documentsLabel",defaultMessage:"Documents"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esDocumentsCount",className:"eui-textBreakWord"},vt(Object(v.get)(a,"docs.total",Object(v.get)(a,"docs.count")),"int_commas")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskUsageLabel",defaultMessage:"Disk Usage"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esDiskUsage"},vt(Object(v.get)(a,"store.size.bytes",Object(v.get)(a,"store.size_in_bytes")),"byte")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.primaryShardsLabel",defaultMessage:"Primary Shards"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esPrimaryShards"},m),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.replicaShardsLabel",defaultMessage:"Replica Shards"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"esReplicaShards"},g)))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:i.enabled,setupModeData:p,href:c(),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.esPanel.logsLinkAriaLabel",{defaultMessage:"Elasticsearch Logs"}),"data-test-subj":"esLogs"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.logsLinkLabel",defaultMessage:"Logs"})))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),function(e){return e.logs.enabled?Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},e.logs.types.map(((e,t)=>Object(b.jsx)(n.Fragment,{key:t},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.logTypeTitle",defaultMessage:"{type}",values:{type:Object(v.capitalize)(e.type)}})),Object(b.jsx)(Y.EuiDescriptionListDescription,null,function(e){return Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs"},e.levels.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{grow:!1,key:t},Object(b.jsx)(Y.EuiToolTip,{position:"top",content:wi[e.level]||wi.unknown},Object(b.jsx)(Y.EuiBadge,{color:Ti(e.level)},vt(e.count,"int_commas")))))))}(e))))),0===e.logs.types.length?Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.noLogsFound",defaultMessage:"No logs found."}):null):Object(b.jsx)(Y.EuiDescriptionList,null,Object(b.jsx)(Os,{reason:e.logs.reason}))}(e)))))}const Pi=[S.N];function Ni(e){const t=e.setupMode,s=e.alerts,a=r.a.useContext(Ve),{staleStatusThresholdSeconds:i}=r.a.useContext(_),n=t.enabled&&Object(v.get)(t.data,"kibana.detected.doesExist",!1);if(!e.count&&!n)return null;const o=()=>Te("#/kibana/instances"),l=Object(v.get)(t.data,"kibana"),c=pe(ae.d.MetricbeatMigration)?Object(b.jsx)(yi,{setupModeData:l,productName:S.B,badgeClickLink:o()}):null;let u=null;if(ki(s,Pi,a)){const e=Pi.map((e=>s[e]));u=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:e}))}return Object(b.jsx)(Oi,d()({},e,{statusIndicator:Di(e.status,e.some_status_is_stale,o(),i),url:"kibana",title:B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.kibanaTitle",{defaultMessage:"Kibana"})}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:l,href:Te("#/kibana"),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkAriaLabel",{defaultMessage:"Kibana Overview"}),"data-test-subj":"kbnOverview"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column","data-test-subj":"kibana_overview","data-overview-status":e.status},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.requestsLabel",defaultMessage:"Requests"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnRequests"},e.requests_total),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeLabel",defaultMessage:"Max. Response Time"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnMaxResponseTime"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeDescription",defaultMessage:"{maxTime} ms",values:{maxTime:e.response_time_max}})),e.rules.instance&&e.rules.cluster&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.ruleFailuresLabel",defaultMessage:"Rule Success Ratio"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnRuleFailures"},Ot(e.rules.instance.executions-e.rules.instance.failures,e.rules.instance.executions)),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.queuedRulesCountLabel",defaultMessage:"Queued Rules"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnQueuedRules"},e.rules.cluster.overdue.count))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiLink,{href:o(),"data-test-subj":"kbnInstances","aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkAriaLabel",{defaultMessage:"Kibana Instances: {instancesCount}",values:{instancesCount:e.count}})},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkLabel",defaultMessage:"Instances: {instancesCount}",values:{instancesCount:Object(b.jsx)("span",{"data-test-subj":"number_of_kibana_instances"},e.count)}}))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},c,u))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.connectionsLabel",defaultMessage:"Connections"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnConnections"},vt(e.concurrent_connections,"int_commas")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"kbnMemoryUsage"},Object(b.jsx)(Ei,{usedBytes:e.memory_size,maxBytes:e.memory_limit})))))))}function Di(e,t,s,a){if(!t)return Object(b.jsx)(hi,{status:e,product:"kb"});const i=B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:a}});return Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)("div",{style:{marginBottom:"8px"}},Object(b.jsx)(Y.EuiToolTip,{position:"top",content:i},Object(b.jsx)(Y.EuiBadge,{iconType:"warning",color:"warning","data-test-subj":"status"},B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLabel",{defaultMessage:"Stale"})))),Object(b.jsx)(Y.EuiLink,{href:s},B.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})))}const Ri=[S.Q];function Ai(e){const{setupMode:t}=e,s=e.node_count||0,a=e.queue_types||{},i=e.alerts,n=r.a.useContext(Ve);if(!s&&!t.enabled)return null;const o=()=>Te("#/logstash/nodes"),l=Object(v.get)(t.data,"logstash"),c=pe(ae.d.MetricbeatMigration)?Object(b.jsx)(yi,{setupModeData:l,productName:S.F,badgeClickLink:o()}):null;let u=null;if(ki(i,Ri,n)){const e=Ri.map((e=>i[e]));u=Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(ut,{alerts:e}))}return Object(b.jsx)(Oi,d()({},e,{url:"logstash",title:B.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.logstashTitle",{defaultMessage:"Logstash"})}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:l,href:Te("#/logstash"),"data-test-subj":"lsOverview","aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.overviewLinkAriaLabel",{defaultMessage:"Logstash Overview"})},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column","data-test-subj":"logstash_overview"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"lsEventsReceived"},vt(e.events_in_total,"0.[0]a")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"lsEventsEmitted"},vt(e.events_out_total,"0.[0]a"))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiLink,{href:o(),"data-test-subj":"lsNodes","aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkAriaLabel",{defaultMessage:"Logstash Nodes: {nodesCount}",values:{nodesCount:s}})},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkLabel",defaultMessage:"Nodes: {nodesCount}",values:{nodesCount:Object(b.jsx)("span",{"data-test-subj":"number_of_logstash_instances"},s)}}))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},c,u))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"lsUptime"},e.max_uptime?vt(e.max_uptime,"time_since"):0),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"lsJvmHeap"},Object(b.jsx)(Ei,{usedBytes:e.avg_memory_used,maxBytes:e.avg_memory}))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:l,href:Te("#/logstash/pipelines"),"data-test-subj":"lsPipelines","aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.pipelineCountLinkAriaLabel",{defaultMessage:"Logstash Pipelines: {pipelineCount}",values:{pipelineCount:e.pipeline_count}})},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.pipelinesCountLinkLabel",defaultMessage:"Pipelines: {pipelineCount}",values:{pipelineCount:Object(b.jsx)("span",{"data-test-subj":"number_of_logstash_pipelines"},e.pipeline_count)}})))))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withMemoryQueuesLabel",defaultMessage:"With Memory Queues"})),Object(b.jsx)(Y.EuiDescriptionListDescription,null,a[S.E.QUEUE_TYPES.MEMORY]||0),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withPersistentQueuesLabel",defaultMessage:"With Persistent Queues"})),Object(b.jsx)(Y.EuiDescriptionListDescription,null,a[S.E.QUEUE_TYPES.PERSISTED]||0))))))}function zi(e){const{setupMode:t}=e,s=Object(v.get)(e,"beats.total")||0;if(0===s&&!t.enabled)return null;const a=Object(v.get)(t.data,"beats"),i=pe(ae.d.MetricbeatMigration)?Object(b.jsx)(yi,{setupModeData:a,productName:S.b,badgeClickLink:Te("#/beats/beats")}):null,n=Object(v.get)(e,"beats.types",[]).map(((e,t)=>[Object(b.jsx)(Y.EuiDescriptionListTitle,{key:`beat-types-type-${t}`,"data-test-subj":"beatTypeCount","data-test-beat-type-count":e.type+":"+e.count},e.type),Object(b.jsx)(Y.EuiDescriptionListDescription,{key:`beat-types-count-${t}`},e.count)]));return Object(b.jsx)(Oi,d()({},e,{url:"beats",title:B.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.beatsTitle",{defaultMessage:"Beats"})}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:a,href:Te("#/beats"),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.overviewLinkAriaLabel",{defaultMessage:"Beats Overview"}),"data-test-subj":"beatsOverview"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.totalEventsLabel",defaultMessage:"Total Events"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"beatsTotalEvents"},Et(e.totalEvents,"0.[0]a")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.bytesSentLabel",defaultMessage:"Bytes Sent"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"beatsBytesSent"},Et(e.bytesSent,"byte"))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiLink,{href:Te("#/beats/beats"),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.instancesTotalLinkAriaLabel",{defaultMessage:"Beats Instances: {beatsTotal}",values:{beatsTotal:s}}),"data-test-subj":"beatsListing"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.beatsTotalLinkLabel",defaultMessage:"Beats: {beatsTotal}",values:{beatsTotal:Object(b.jsx)("span",{"data-test-subj":"beatsTotal"},s)}}))))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},n)))))}const Bi=(e,t)=>{const s=Object(b.jsx)("span",{"data-test-subj":"apmsTotal"},t),a={};return e?(a.link=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.agentServersTotalLinkLabel",defaultMessage:"Integrations Servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesAndFleetsTotalLinkAriaLabel",{defaultMessage:"Integrations server instances: {apmsTotal}",values:{apmsTotal:s}}),a):(a.link=Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.serversTotalLinkLabel",defaultMessage:"APM servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesTotalLinkAriaLabel",{defaultMessage:"APM server instances: {apmsTotal}",values:{apmsTotal:s}}),a)},Vi=e=>e?B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewFleetLinkLabel",{defaultMessage:"Integrations server overview"}):B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewLinkLabel",{defaultMessage:"APM server overview"}),Ui=e=>e?B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmFleetTitle",{defaultMessage:"Integrations server"}):B.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmTitle",{defaultMessage:"APM server"});function $i(e){const{setupMode:t,versions:s}=e,a=Object(v.get)(e,"apms.total")||0;if(0===a&&!t.enabled)return null;const i=Ta(s),{link:n,aria:r}=Bi(i,a),o=Vi(i),l=()=>Te("#/apm/instances"),c=Object(v.get)(t.data,"apm"),u=pe(ae.d.MetricbeatMigration)?Object(b.jsx)(yi,{setupModeData:c,badgeClickLink:l(),productName:S.a}):null;return Object(b.jsx)(Oi,d()({},e,{url:"apm",title:Ui(i)}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:c,href:Te("#/apm"),"aria-label":o,"data-test-subj":"apmOverview"},o))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.processedEventsLabel",defaultMessage:"Processed Events"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"apmsTotalEvents"},Et(e.totalEvents,"0.[0]a")),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventLabel",defaultMessage:"Last Event"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"apmsBytesSent"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventDescription",defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:Ge(+$e()(e.timeOfLastEvent),S.c)}}))))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiLink,{href:l(),"aria-label":r,"data-test-subj":"apmListing"},n)))),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},u))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.memoryUsageLabel",defaultMessage:"Memory Usage (delta)"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"apmMemoryUsage"},Object(b.jsx)(vi,{usedBytes:e.memRss})))))))}function Gi(e){const{setupMode:t}=e,s=Object(v.get)(t.data,"enterprise_search"),a=e.stats.totalInstances||0;return a||t.enabled?Object(b.jsx)(Oi,d()({},e,{url:"enterprise_search",title:B.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.entSearchTitle",{defaultMessage:"Enterprise Search"})}),Object(b.jsx)(Y.EuiFlexGrid,{columns:4},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,Object(b.jsx)(Mi,{setupModeEnabled:t.enabled,setupModeData:s,href:Te("#/enterprise_search"),"aria-label":B.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkAriaLabel",{defaultMessage:"Enterprise Search Overview"}),"data-test-subj":"entSearchOverview"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.versionLabel",defaultMessage:"Version"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"entSearchVersion"},e.stats.versions[0]||B.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.appSearchEngines",defaultMessage:"Engines"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"appSearchEngines"},e.stats.appSearchEngines),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchOrgSources",defaultMessage:"Org Sources"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchOrgSources"},e.stats.workplaceSearchOrgSources),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchPrivateSources",defaultMessage:"Private Sources"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchPrivateSources"},e.stats.workplaceSearchPrivateSources)))),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiPanel,{paddingSize:"m"},Object(b.jsx)(Y.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h3",{"data-test-subj":"entSearchTotalNodes"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:vt(a,"int_commas")}}))))),Object(b.jsx)(Y.EuiHorizontalRule,{margin:"m"}),Object(b.jsx)(Y.EuiDescriptionList,{type:"column"},Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"entSearchMemoryUsage"},Object(b.jsx)(Ei,{usedBytes:e.stats.memUsed,maxBytes:e.stats.memTotal})),Object(b.jsx)(Y.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(b.jsx)(Y.EuiDescriptionListDescription,{"data-test-subj":"entSearchUptime"},vt(e.stats.uptime,"time_since"))))))):null}function qi(e){const t=e.cluster.cluster_uuid===S.Y;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.overview.heading",defaultMessage:"Stack Monitoring Overview"}))),t?null:Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Fi,d()({},e.cluster.elasticsearch,{version:e.cluster.version,ml:e.cluster.ml,license:e.cluster.license,setupMode:e.setupMode,showLicenseExpiration:e.showLicenseExpiration,alerts:e.alerts})),Object(b.jsx)(Ni,d()({},e.cluster.kibana,{setupMode:e.setupMode,alerts:e.alerts}))),Object(b.jsx)(Ai,d()({},e.cluster.logstash,{setupMode:e.setupMode,alerts:e.alerts})),Object(b.jsx)(zi,d()({},e.cluster.beats,{setupMode:e.setupMode,alerts:e.alerts})),Object(b.jsx)($i,d()({},e.cluster.apm,{setupMode:e.setupMode,alerts:e.alerts})),Object(b.jsx)(Gi,d()({},e.cluster.enterpriseSearch,{setupMode:e.setupMode,alerts:e.alerts}))))}function Hi(e){return e.cluster_uuid===S.Y&&(e.cluster_name="Standalone Cluster"),e}const Wi=async({clusterUuid:e,timeRange:t,fetch:s,ccs:a,codePaths:i})=>{let n="../api/monitoring/v1/clusters";e&&(n+=`/${e}`);return(await s(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:t,codePaths:i})})).map(Hi)},Ki=async({alertTypeIds:e,filters:t,timeRange:s,clusterUuid:a,fetch:i})=>{const n=`../api/monitoring/v1/alert/${a}/status`;return await i(n,{method:"POST",body:JSON.stringify({alertTypeIds:e,filters:t,timeRange:s})})},Ji=[S.h],Yi=()=>{var e;const t=Object(n.useContext)(D),s=Object(n.useContext)(_),{services:a}=Object(i.useKibana)(),r=t.cluster_uuid,o=t.ccs,[l,c]=Object(n.useState)([]),[u,d]=Object(n.useState)({}),[m,g]=Object(n.useState)(!1),{generate:p}=q();let j=[];const x=B.i18n.translate("xpack.monitoring.cluster.overviewTitle",{defaultMessage:"Overview"}),h=B.i18n.translate("xpack.monitoring.cluster.overview.pageTitle",{defaultMessage:"Cluster overview"});m&&(j=[{id:"clusterName",label:l[0].cluster_name,testSubj:"overviewTabsclusterName",route:"/overview"}]);const f=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=a.http)&&void 0!==t&&t.fetch&&r){const e=await Wi({fetch:a.http.fetch,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},ccs:o,clusterUuid:r,codePaths:Ji});c(e);const t=await Ki({fetch:a.http.fetch,clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});d(t),g(!0)}}),[o,r,null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter,a.http]);return Object(n.useEffect)((()=>{l&&l.length&&p(l[0].cluster_name)}),[l,p]),Object(b.jsx)(Ma,{title:x,pageTitle:h,tabs:j,getPageData:f},Object(b.jsx)(ei,{render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(qi,{cluster:l[0],alerts:u,setupMode:e,showLicenseExpiration:s.showLicenseExpiration}),a)}),Object(b.jsx)(xa,{alerts:u}))},Qi="elasticsearch-metrics-ingest-pipelines",Xi=({canInstallPackages:e,closeModal:t,installPackage:s,navigateToDashboard:a})=>{const[i,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)();return e?Object(b.jsx)(Y.EuiConfirmModal,{title:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.installPromptTitle",{defaultMessage:"Install Elasticsearch integration?"}),confirmButtonText:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.installButtonText",{defaultMessage:"Install"}),cancelButtonText:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonDisabled:i,onCancel:t,onConfirm:async()=>{o(!0);try{await s(),t(),a()}catch(t){var e;c((null===(e=t.body)||void 0===e?void 0:e.error)||t.message),o(!1)}}},l&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.errorCalloutText",defaultMessage:"Could not install the package due to an error: {error}",values:{error:l}}),color:"danger",iconType:"warning"}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.installPromptDescriptionText",defaultMessage:"Viewing Ingest pipeline metrics requires installing the Elasticsearch integration. Do you want to install it now?"}))):Object(b.jsx)(Y.EuiConfirmModal,{title:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.packageRequiredTitle",{defaultMessage:"Elasticsearch integration is required"}),confirmButtonText:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.confirmButtonText",{defaultMessage:"OK"}),onCancel:t,onConfirm:t},Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.descriptionText",defaultMessage:"Viewing Ingest pipeline metrics requires installing the Elasticsearch integration. You must ask your administrator to install it."})))},Zi=({cluster:e,...t})=>{const{services:s}=Object(i.useKibana)(),a=[{id:"overview",label:B.i18n.translate("xpack.monitoring.esNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/elasticsearch"},{id:"nodes",label:B.i18n.translate("xpack.monitoring.esNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/elasticsearch/nodes"},{id:"indices",label:B.i18n.translate("xpack.monitoring.esNavigation.indicesLinkText",{defaultMessage:"Indices"}),route:"/elasticsearch/indices"}];return s.dashboard&&a.push({id:"ingest_pipeines",label:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelinesLinkText",{defaultMessage:"Ingest Pipelines"}),prepend:Object(b.jsx)(Y.EuiToolTip,{content:B.i18n.translate("xpack.monitoring.esNavigation.ingestPipelinesBetaTooltip",{defaultMessage:"Ingest Pipeline monitoring is a beta feature"})},Object(b.jsx)(Y.EuiIcon,{type:"beaker"})),onClick:()=>(async e=>{var t,s,a;const n=await(null===(t=e.fleet)||void 0===t?void 0:t.hooks.epm.getBulkAssets({assetIds:[{id:Qi,type:"dashboard"}]})),r=()=>e.dashboard.locator.navigate({dashboardId:Qi});if((null==n||null===(s=n.data)||void 0===s||null===(a=s.items)||void 0===a?void 0:a.length)&&n.data.items.some((e=>e.id===Qi)))return r();{var o,l;const t=()=>e.http.post("/api/fleet/epm/packages/elasticsearch",{headers:{"Elastic-Api-Version":"2023-10-31"}}),s=e.overlays.openModal(Object(i.toMountPoint)(Object(b.jsx)(Xi,{installPackage:t,navigateToDashboard:r,canInstallPackages:!(null===(o=e.fleet)||void 0===o||!o.authz.integrations.installPackages),closeModal:()=>s.close()}),{theme$:null===(l=e.theme)||void 0===l?void 0:l.theme$}));return await s.onClose}})(s)}),e&&en(e.license)&&a.push({id:"ml",label:B.i18n.translate("xpack.monitoring.esNavigation.jobsLinkText",{defaultMessage:"Machine learning jobs"}),route:"/elasticsearch/ml_jobs"}),null!=e&&e.isCcrEnabled&&a.push({id:"ccr",label:B.i18n.translate("xpack.monitoring.esNavigation.ccrLinkText",{defaultMessage:"CCR"}),route:"/elasticsearch/ccr"}),Object(b.jsx)(Ma,d()({},t,{tabs:a,product:"elasticsearch"}))},en=e=>Object(v.includes)(S.G,e.type);function tn(e){return Math.floor(e/1e3)+"s"}s(93);const sn=e=>{const[t,s]=Object(n.useState)({});return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.heading",defaultMessage:"CCR"}))),Object(b.jsx)(Y.EuiPanel,null,(()=>{const{data:a,alerts:i}=e,r=a;let o={initialPageSize:5,pageSizeOptions:[5,10,20]};return r.length<=o.initialPageSize&&(o=!1),Object(b.jsx)(Y.EuiInMemoryTable,{className:"monitoringElasticsearchCcrListingTable",columns:[{field:"index",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.indexColumnTitle",{defaultMessage:"Index"}),sortable:!0,render:(a,{shards:i})=>{const r=!!t[a];return Object(b.jsx)(Y.EuiLink,{onClick:()=>((a,i)=>{const r={...t};if(r[a])delete r[a];else{let t={initialPageSize:5,pageSizeOptions:[5,10,20]};i.length<=t.initialPageSize&&(t=!1),r[a]=Object(b.jsx)(Y.EuiInMemoryTable,{items:i,columns:[{field:"shardId",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.shardColumnTitle",{defaultMessage:"Shard"}),render:e=>Object(b.jsx)(Y.EuiLink,{href:Te(`#/elasticsearch/ccr/${a}/shard/${e}`)},e)},{render:()=>null},{field:"alerts",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(t,s)=>Object(b.jsx)(dt,{showBadge:!0,alerts:e.alerts,stateFilter:e=>e.meta.shardId===s.shardId})},{field:"syncLagOps",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"}),render:(e,t)=>Object(b.jsx)("span",null,e,"",Object(b.jsx)(Y.EuiIconTip,{size:"m",type:"iInCircle",content:Object(b.jsx)(n.Fragment,null,Object(b.jsx)("span",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.leaderLagTooltip",defaultMessage:"Leader lag: {syncLagOpsLeader}",values:{syncLagOpsLeader:t.syncLagOpsLeader}})),Object(b.jsx)("br",null),Object(b.jsx)("span",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.followerLagTooltip",defaultMessage:"Follower lag: {syncLagOpsFollower}",values:{syncLagOpsFollower:t.syncLagOpsFollower}}))),position:"right"}))},{field:"syncLagTime",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(b.jsx)("span",null,tn(e))},{field:"opsSynced",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(b.jsx)(Y.EuiTextColor,{color:"danger"},e)}],executeQueryOptions:{defaultFields:["shardId"]},sorting:!0,pagination:t})}s(r)})(a,i)},a,"",r?Object(b.jsx)(Y.EuiIcon,{type:"arrowUp"}):Object(b.jsx)(Y.EuiIcon,{type:"arrowDown"}))}},{field:"follows",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.followsColumnTitle",{defaultMessage:"Follows"})},{field:"alerts",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(e,t)=>Object(b.jsx)(dt,{showBadge:!0,alerts:i,stateFilter:e=>e.meta.followerIndex===t.index})},{field:"syncLagOps",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"})},{field:"syncLagTime",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(b.jsx)("span",null,tn(e))},{field:"opsSynced",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",sortable:!0,name:B.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(b.jsx)(Y.EuiTextColor,{color:"danger"},e)}],items:r,pagination:o,executeQueryOptions:{defaultFields:["index","follows"]},sorting:{sort:{field:"index",direction:"asc"}},itemId:"id",itemIdToExpandedRowMap:t})})())))},an=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{generate:a}=q(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,l=Object(v.find)(e,{cluster_uuid:o}),c=s.ccs,[u,d]=Object(n.useState)({}),[m,g]=Object(n.useState)({});Object(n.useEffect)((()=>{l&&a(l.cluster_name,{inElasticsearch:!0})}),[l,a]);const p=B.i18n.translate("xpack.monitoring.elasticsearch.ccr.title",{defaultMessage:"Elasticsearch - Ccr"}),j=B.i18n.translate("xpack.monitoring.elasticsearch.ccr.pageTitle",{defaultMessage:"Elasticsearch Ccr"}),x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${o}/elasticsearch/ccr`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&o){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));d(e);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.H],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});g(t)}}),[c,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(b.jsx)(Zi,{title:p,pageTitle:j,getPageData:x,"data-test-subj":"elasticsearchCcrPage",cluster:l},Object(b.jsx)(ei,{productName:S.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},e,Object(b.jsx)(sn,{data:u,alerts:m}),t)}))};function nn({stat:e,formattedLeader:t,oldestStat:s,alerts:a={}}){const i=e.follower_index||Object(v.get)(e,"follower.index"),n="number"==typeof e.shard_id?e.shard_id:Object(v.get)(e,"follower.shard.number"),r=e.operations_written||Object(v.get)(e,"follower.operations_written"),o=e.failed_read_requests||Object(v.get)(e,"requests.failed.read.count"),l=s.operations_written||Object(v.get)(s,"follower.operations_written"),c=s.failed_read_requests||Object(v.get)(s,"requests.failed.read.count"),u=[{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.alerts",{defaultMessage:"Alerts"}),value:Object(b.jsx)(dt,{alerts:a,showOnlyCount:!0})},{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.followerIndexLabel",{defaultMessage:"Follower Index"}),value:i,"data-test-subj":"followerIndex"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.shardIdLabel",{defaultMessage:"Shard Id"}),value:n,"data-test-subj":"shardId"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.leaderIndexLabel",{defaultMessage:"Leader Index"}),value:t,"data-test-subj":"leaderIndex"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.opsSyncedLabel",{defaultMessage:"Ops Synced"}),value:Et(r-l,"int_commas"),"data-test-subj":"operationsReceived"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.failedFetchesLabel",{defaultMessage:"Failed Fetches"}),value:Et(o-c,"int_commas"),"data-test-subj":"failedFetches"}];return Object(b.jsx)(jt,{metrics:u,"data-test-subj":"ccrDetailStatus"})}function rn(e){var t;const{services:s}=Object(i.useKibana)(),a=null===(t=s.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),{metrics:r,stat:o,timestamp:l,oldestStat:c,formattedLeader:u,alerts:d}=e;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(nn,{stat:o,formattedLeader:u,oldestStat:c,alerts:d})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:d}),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),o.read_exceptions&&o.read_exceptions.length>0?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiTitle,{size:"s",color:"danger"},Object(b.jsx)("h3",null,Object(b.jsx)(Y.EuiTextColor,{color:"danger"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.errorsTableTitle",defaultMessage:"Errors"})))),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiBasicTable,{items:o.read_exceptions,columns:[{name:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.typeColumnTitle",{defaultMessage:"Type"}),field:"exception.type"},{name:B.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.reasonColumnTitle",{defaultMessage:"Reason"}),field:"exception.reason",width:"75%"}]})),Object(b.jsx)(Y.EuiHorizontalRule,null)):null,Object(b.jsx)(Y.EuiFlexGroup,{wrap:!0},(()=>{const e=[r.ccr_sync_lag_ops,r.ccr_sync_lag_time].map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(ds,{series:e})))));return Object(b.jsx)(n.Fragment,null,e)})()),Object(b.jsx)(Y.EuiHorizontalRule,null),Object(b.jsx)(Y.EuiAccordion,{id:"ccrLatestStat",buttonContent:Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h2",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.latestStateAdvancedButtonLabel",defaultMessage:"Advanced"}))),paddingSize:"l"},Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,et(l,a))),Object(b.jsx)(Y.EuiHorizontalRule,null),Object(b.jsx)(Y.EuiCodeBlock,{language:"json"},JSON.stringify(o,null,2))))))}const on=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{services:a}=Object(i.useKibana)(),[r,o]=Object(n.useState)({}),{index:l,shardId:u}=Object(c.useParams)(),{generate:m}=q(),g=s.cluster_uuid,p=Object(v.find)(e,{cluster_uuid:g});Object(n.useEffect)((()=>{p&&m(p.cluster_name,{inElasticsearch:!0,name:"ccr",instance:`Index: ${l} Shard: ${u}`})}),[p,m,l,u]);const j=s.ccs,[x,h]=Object(n.useState)({}),f=B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.title",{defaultMessage:"Elasticsearch - Ccr - Shard"}),O=B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.pageTitle",{defaultMessage:"Elasticsearch Ccr Shard - Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(v.get)(r,"stat.follower.index",Object(v.get)(r,"stat.follower_index")),shardId:Object(v.get)(r,"stat.follower.shard.number",Object(v.get)(r,"stat.shard_id"))}}),E=B.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.instanceTitle",{defaultMessage:"Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(v.get)(r,"stat.follower_index"),shardId:Object(v.get)(r,"stat.shard_id")}}),M=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${g}/elasticsearch/ccr/${l}/shard/${u}`;if(null!==(t=a.http)&&void 0!==t&&t.fetch&&g){var n;const e=await(null===(n=a.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:j,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));o(e);const t=await Ki({fetch:a.http.fetch,alertTypeIds:[S.H],clusterUuid:g,filters:[{shardId:u}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[j,g,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http,l,u]);return Object(b.jsx)(Ma,{title:f,pageTitle:O,getPageData:M,"data-test-subj":"elasticsearchCcrShardPage"},Object(b.jsx)(ei,{productName:S.r,instance:E,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},e,Object(b.jsx)(rn,d()({},r,{alerts:x})),t)}))},ln=e=>{const{pageType:t,id:s,...a}=e,i=[{id:"overview",label:B.i18n.translate("xpack.monitoring.esItemNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:`/elasticsearch/${t}/${s}`},{id:"advanced",testSubj:"esItemDetailAdvancedLink",label:B.i18n.translate("xpack.monitoring.esItemNavigation.advancedLinkText",{defaultMessage:"Advanced"}),route:`/elasticsearch/${t}/${s}/advanced`}];return Object(b.jsx)(Ma,d()({},a,{tabs:i,product:"elasticsearch"}))};function cn({stats:e,alerts:t={}}){const{dataSize:s,documents:a,totalShards:i,unassignedShards:r,status:o}=e,l=[{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(b.jsx)(dt,{alerts:t,showOnlyCount:!0})},{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalTitle",{defaultMessage:"Total"}),value:Et(s.total,"0.0 b"),"data-test-subj":"dataSize"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.primariesTitle",{defaultMessage:"Primaries"}),value:Et(s.primaries,"0.0 b"),"data-test-subj":"dataSizePrimaries"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.documentsTitle",{defaultMessage:"Documents"}),value:Et(a,"0.[0]a"),"data-test-subj":"documentCount"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalShardsTitle",{defaultMessage:"Total shards"}),value:Et(i,"int_commas"),"data-test-subj":"totalShards"},{label:B.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.unassignedShardsTitle",{defaultMessage:"Unassigned shards"}),value:Et(r,"int_commas"),"data-test-subj":"unassignedShards"}];return Object(b.jsx)(jt,{metrics:l,status:o,IconComponent:({status:e})=>Object(b.jsx)(n.Fragment,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indexDetailStatus.iconStatusLabel",defaultMessage:"Health: {elasticsearchStatusIcon}",values:{elasticsearchStatusIcon:Object(b.jsx)(bt,{status:e})}})),"data-test-subj":"elasticsearchIndexDetailStatus"})}const un=({indexSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.index_3,t.index_4,t.index_total,t.index_time,t.index_refresh,t.index_throttling,t.index_disk,t.index_segment_count,t.index_latency];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.index.advanced.heading",defaultMessage:"Elasticsearch index advanced view"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(cn,{stats:e,alerts:s})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:s}),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},a)),Object(b.jsx)(Y.EuiSpacer,null))))))))},dn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{generate:a}=q(),{services:r}=Object(i.useKibana)(),{index:o}=Object(c.useParams)(),{zoomInfo:l,onBrush:u}=Sa(),d=s.cluster_uuid,m=s.ccs,[g,p]=Object(n.useState)({}),[j,x]=Object(n.useState)({}),h=Object(v.find)(e,{cluster_uuid:d});Object(n.useEffect)((()=>{h&&a(h.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[h,a,o]);const f=B.i18n.translate("xpack.monitoring.elasticsearch.index.advanced.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Advanced",values:{indexName:o}}),O=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${d}/elasticsearch/indices/${o}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&d){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));p(e);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.O],filters:[{shardIndex:o}],clusterUuid:d,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,d,o,m]);return Object(b.jsx)(ln,{title:f,getPageData:O,id:o,pageType:"indices",pageTitle:o},Object(b.jsx)(ei,{productName:S.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(un,{setupMode:e,alerts:j,indexSummary:g.indexSummary,metrics:g.metrics,onBrush:u,zoomInfo:l}),s)}))},mn=({indexSummary:e,metrics:t,clusterUuid:s,indexUuid:a,logs:i,alerts:n,...r})=>{const o=[t.index_size,t.index_search_request_rate,t.index_request_rate,t.index_segment_count,t.index_document_count];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(cn,{stats:e,alerts:n})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:n}),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},r)),Object(b.jsx)(Y.EuiSpacer,null))))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(logs_Logs,{logs:i,indexUuid:a,clusterUuid:s})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(ia,r))))};function gn(e,t){return e.map((e=>{const s=t[e.node];return e.nodeName=s&&s.name||null,e.type="shard",e.tooltip_message=function(e){const s=Object(v.get)(Object(v.find)(t,(t=>{return s=t,Object(v.includes)(s.node_ids,e.relocating_node);var s})),"name");if(s){if("INITIALIZING"===e.state)return B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingFromTextMessage",{defaultMessage:"Relocating from {nodeName}",values:{nodeName:s}});if("RELOCATING"===e.state)return B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingToTextMessage",{defaultMessage:"Relocating to {nodeName}",values:{nodeName:s}})}const a=Object(v.get)(e,"state",Object(v.get)(e,"shard.state"));return Object(v.upperFirst)(a.toLowerCase())}(e),e}))}const pn={index:[{content:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.nodesLabel",{defaultMessage:"Nodes"})}],indexWithUnassigned:[{content:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedLabel",{defaultMessage:"Unassigned"})},{content:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedNodesLabel",{defaultMessage:"Nodes"})}],node:[{content:B.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.indicesLabel",{defaultMessage:"Indices"}),showToggleSystemIndicesComponent:!0}]},jn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{generate:a}=q(),{services:r}=Object(i.useKibana)(),{index:o}=Object(c.useParams)(),{zoomInfo:l,onBrush:u}=Sa(),m=s.cluster_uuid,g=s.ccs,[p,j]=Object(n.useState)({}),[x,h]=Object(n.useState)(pn.index),[f,O]=Object(n.useState)([]),[E,M]=Object(n.useState)({}),y=Object(v.find)(e,{cluster_uuid:m});Object(n.useEffect)((()=>{y&&a(y.cluster_name,{inElasticsearch:!0,name:"indices",instance:o})}),[y,a,o]);const k=B.i18n.translate("xpack.monitoring.elasticsearch.index.overview.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Overview",values:{indexName:o}}),_=B.i18n.translate("xpack.monitoring.elasticsearch.index.overview.pageTitle",{defaultMessage:"Index: {indexName}",values:{indexName:o}}),T=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${m}/elasticsearch/indices/${o}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&m){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:g,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));j(e);const t=function(e,t){const s=Object(v.reduce)(gn(e,t),(function(e,s){return e=function(e,t){const s=t.index;return e[s]||(e[s]={id:s,name:s,children:[],unassigned:[],unassignedPrimaries:!1,type:"index"}),e}(e,s),e=function(e,s){const{node:a,index:i}=s;if(!s.node||null===s.node)return e[i].unassigned.push(s),s.primary&&(e[i].unassignedPrimaries=!0),e;let n=Object(v.find)(e[i].children,{id:a});return n||(n={id:a,type:"node",name:t[a].name,node_type:t[a].type,ip_port:t[a].transport_address,children:[]},e[i].children.push(n)),n.children.push(s),e}(e,s),e}),{}),a=Object(v.values)(s);return Object(v.sortBy)(a,(e=>[!e.unassignedPrimaries,/^\./.test(e.name),e.name]))};O(t(e.shards,e.nodes)),e.shards.some((e=>"UNASSIGNED"===e.state))&&h(pn.indexWithUnassigned);const n=await Ki({fetch:r.http.fetch,alertTypeIds:[S.O],filters:[{shardIndex:o}],clusterUuid:m,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});M(n)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,m,o,g]);return Object(b.jsx)(ln,{title:k,pageTitle:_,getPageData:T,id:o,pageType:"indices"},Object(b.jsx)(ei,{productName:S.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(mn,d()({setupMode:e,labels:x,alerts:E,onBrush:u,indexUuid:o,clusterUuid:m,zoomInfo:l,nodesByIndices:f},p)),s)}))},bn=(e,t)=>{const s="xpack.monitoring.data",a=()=>{const e=window.localStorage.getItem(s);let t={};try{t=e&&JSON.parse(e)||{}}catch(e){throw new Error("Monitoring UI: error parsing locally stored monitoring data")}return t},i=t=>{const i=a();i[e]=t,window.localStorage.setItem(s,JSON.stringify(i))},r=(()=>{const t=a();if(Object(v.has)(t,e))return t[e]})();r||i(t);const o=r||t,[l,c]=Object(n.useState)(o);return[l,e=>{i(e),c(e)}]},xn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{generate:a}=q(),{services:r}=Object(i.useKibana)(),{getPaginationTableProps:o}=Ba("elasticsearch.indices"),l=s.cluster_uuid,c=s.ccs,u=Object(v.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)({}),[p,j]=bn("showSystemIndices",!1),[x,h]=Object(n.useState)({});Object(n.useEffect)((()=>{u&&a(u.cluster_name,{inElasticsearch:!0})}),[u,a]);const f=B.i18n.translate("xpack.monitoring.elasticsearch.indices.routeTitle",{defaultMessage:"Elasticsearch - Indices"}),O=B.i18n.translate("xpack.monitoring.elasticsearch.indices.pageTitle",{defaultMessage:"Elasticsearch indices"}),E=Object(n.useCallback)((()=>j(!p)),[p,j]),M=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/elasticsearch/indices`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",query:{show_system_indices:p},body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(e);const t=await Ki({fetch:r.http.fetch,clusterUuid:l,alertTypeIds:[S.O],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,l,p,c]);return Object(b.jsx)(Zi,{title:f,pageTitle:O,getPageData:M,"data-test-subj":"elasticsearchOverviewPage",cluster:u},Object(b.jsx)("div",{"data-test-subj":"elasticsearchIndicesListingPage"},Object(b.jsx)(ei,{productName:S.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},e,Object(b.jsx)(oa,d()({clusterStatus:m.clusterStatus,indices:m.indices,alerts:x,showSystemIndices:p,toggleShowSystemIndices:E},o())),t)})))},hn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{generate:a}=q(),{services:r}=Object(i.useKibana)(),{getPaginationTableProps:o}=Ba("elasticsearch.mlJobs"),l=s.cluster_uuid,c=s.ccs,u=Object(v.find)(e,{cluster_uuid:l});Object(n.useEffect)((()=>{u&&a(u.cluster_name,{inElasticsearch:!0})}),[u,a]);const[m,g]=Object(n.useState)({}),p=B.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.routeTitle",{defaultMessage:"Elasticsearch - Machine Learning Jobs"}),j=B.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.pageTitle",{defaultMessage:"Elasticsearch machine learning jobs"}),x=Object(n.useCallback)((async()=>{var e,t,s;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${l}/elasticsearch/ml_jobs`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g({clusterStatus:null==n?void 0:n.clusterStatus,jobs:null==n||null===(s=n.rows)||void 0===s?void 0:s.map((e=>{var t;return"ml"in e&&null!==(t=e.ml)&&void 0!==t&&t.job?{...e.ml.job,node:e.node,job_id:e.ml.job.id}:e}))})}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(b.jsx)(Zi,{title:p,pageTitle:j,getPageData:x,"data-test-subj":"elasticsearchOverviewPage",cluster:u},Object(b.jsx)("div",{"data-test-subj":"elasticsearchMLJobsListingPage"},Object(b.jsx)(ei,{productName:S.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},e,Object(b.jsx)(ca,d()({clusterStatus:m.clusterStatus,jobs:m.jobs},o())),t)})))},fn=["master","voting_only","data","data_content","data_hot","data_warm","data_cold","data_frozen","ingest","transform","ml","remote_cluster_client"],On=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{showCgroupMetricsElasticsearch:a}=Object(n.useContext)(_),{services:o}=Object(i.useKibana)(),[l,c]=r.a.useState(!1),{generate:u}=q(),{getPaginationRouteOptions:m,updateTotalItemCount:g,getPaginationTableProps:p}=Ba("elasticsearch.nodes"),j=s.cluster_uuid,x=s.ccs,h=Object(v.find)(e,{cluster_uuid:j}),[f,O]=Object(n.useState)({}),[E,M]=Object(n.useState)({}),y=B.i18n.translate("xpack.monitoring.elasticsearch.nodes.routeTitle",{defaultMessage:"Elasticsearch - Nodes"}),k=B.i18n.translate("xpack.monitoring.elasticsearch.nodes.pageTitle",{defaultMessage:"Elasticsearch nodes"});Object(n.useEffect)((()=>{h&&u(h.cluster_name,{inElasticsearch:!0})}),[h,u]);const T=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${j}/elasticsearch/nodes`;if(null!==(t=o.http)&&void 0!==t&&t.fetch&&j){var i;c(!0);const e=await(null===(i=o.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:x,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...m()})}));c(!1);const{nodes:t}=e,n=t.map((e=>{const t=function(e){if(!e)return;const t=Array.isArray(e)?e:[e];if(0===t.length)return[];const s=new Set(t);return fn.filter((e=>s.has(e)))}(e.roles);return{...e,roles:t}}));O({...e,nodes:n}),g(e.totalNodeCount);const r=await Ki({fetch:o.http.fetch,clusterUuid:j,alertTypeIds:[S.J,S.L,S.W,S.X,S.R,S.S],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});M(r)}}),[null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http,j,x,m,g]);return Object(b.jsx)(Zi,{title:y,pageTitle:k,getPageData:T,"data-test-subj":"elasticsearchOverviewPage",cluster:h},Object(b.jsx)("div",{"data-test-subj":"elasticsearchNodesListingPage"},Object(b.jsx)(ei,{productName:S.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:i})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(Ks,d()({clusterStatus:f.clusterStatus,clusterUuid:s.cluster_uuid,setupMode:e,nodes:f.nodes,alerts:E,isLoading:l,showCgroupMetricsElasticsearch:a},p())),i)})))},vn=({nodeSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.node_gc,t.node_gc_time,t.node_jvm_mem,t.node_cpu_utilization,t.node_index_3,t.node_index_4,t.node_index_time,t.node_request_total,t.node_index_threads,t.node_read_threads,t.node_cgroup_cpu,t.node_cgroup_stats,t.node_latency];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.advanced.heading",defaultMessage:"Elasticsearch node advanced"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Ys,{stats:e,alerts:s})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:s}),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},a)),Object(b.jsx)(Y.EuiSpacer,null))))))))},En=({clusters:e})=>{var t,s,a,r;const o=Object(n.useContext)(D),{generate:l}=q(),{zoomInfo:u,onBrush:d}=Sa(),[m,g]=Object(n.useState)({}),{node:p}=Object(c.useParams)(),{services:j}=Object(i.useKibana)(),x=o.cluster_uuid,h=o.ccs,[f,O]=Object(n.useState)({}),E=Object(v.find)(e,{cluster_uuid:x});Object(n.useEffect)((()=>{var e;E&&l(E.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==m||null===(e=m.nodeSummary)||void 0===e?void 0:e.name})}),[E,l,null==m||null===(t=m.nodeSummary)||void 0===t?void 0:t.name]);const M=B.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Advanced",values:{nodeName:null==m||null===(s=m.nodeSummary)||void 0===s?void 0:s.name}}),y=B.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.pageTitle",{defaultMessage:"Elasticsearch node: {nodeName}",values:{nodeName:null==m||null===(a=m.nodeSummary)||void 0===a?void 0:a.name}}),k=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=j.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${x}/elasticsearch/nodes/${p}`;if(null!==(t=j.http)&&void 0!==t&&t.fetch&&x){var i;const e=await(null===(i=j.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:h,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));g(e);const t=await Ki({fetch:j.http.fetch,clusterUuid:x,alertTypeIds:[S.J,S.W,S.X,S.S,S.L,S.R],filters:[{nodeUuid:p}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});O(t)}}),[h,x,null===(r=j.data)||void 0===r?void 0:r.query.timefilter.timefilter,j.http,p]);return Object(b.jsx)(ln,{title:M,pageTitle:y,getPageData:k,id:p,pageType:"nodes"},Object(b.jsx)(vn,{nodeSummary:m.nodeSummary,alerts:f,metrics:m.metrics,onBrush:d,zoomInfo:u}))};function Mn(e){return Object(v.some)(e.children,{primary:!0})}const yn=({clusters:e})=>{var t,s,a,r;const o=Object(n.useContext)(D),{generate:l}=q(),{zoomInfo:u,onBrush:m}=Sa(),[g,p]=bn("showSystemIndices",!1),[j,x]=Object(n.useState)({}),{node:h}=Object(c.useParams)(),{services:f}=Object(i.useKibana)(),[O,E]=Object(n.useState)({}),M=o.cluster_uuid,y=Object(v.find)(e,{cluster_uuid:M});Object(n.useEffect)((()=>{var e;y&&l(y.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==O||null===(e=O.nodeSummary)||void 0===e?void 0:e.name})}),[y,l,null==O||null===(t=O.nodeSummary)||void 0===t?void 0:t.name]);const k=o.ccs,[_,T]=Object(n.useState)([]),w=B.i18n.translate("xpack.monitoring.elasticsearch.node.overview.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Overview",values:{nodeName:null==O||null===(s=O.nodeSummary)||void 0===s?void 0:s.name}}),C=B.i18n.translate("xpack.monitoring.elasticsearch.node.overview.pageTitle",{defaultMessage:"Elasticsearch node: {node}",values:{node:null==O||null===(a=O.nodeSummary)||void 0===a?void 0:a.name}}),I=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=f.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${M}/elasticsearch/nodes/${h}`;if(null!==(t=f.http)&&void 0!==t&&t.fetch&&M){var i;const e=await(null===(i=f.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({showSystemIndices:g,ccs:k,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));E(e);const t=function(e,t){let s={};Object(v.some)(e,(function(e){return"UNASSIGNED"===e.state}))&&(s.unassigned={name:"Unassigned",master:!1,type:"node",children:[]}),s=Object(v.reduce)(gn(e,t),(function(e,s){const a=Object(v.get)(s,"node.name",s.node||"unassigned"),i=Object(v.get)(s,"index.name",s.index);e[a]||function(e,t,s){t.type="node",t.children=[];const a=function(e){return"true"===(e.attributes||{}).master?"master":"normal"}(t);"normal"!==a&&"data"!==a||(e[s]=t)}(e,t[a],a);let n=Object(v.find)(e[a].children,{id:i});return n||(n={id:i,name:i,type:"index",children:[]},e[a].children.push(n)),n.children.push(s),e}),s);const a=Object(v.values)(s);return Object(v.sortBy)(a,(function(e){return["Unassigned"!==e.name,!e.master,e.name]})).map((function(e){return"Unassigned"===e.name&&(e.unassignedPrimaries=e.children.some(Mn)),e}))};T(t(e.shards,e.nodes));const n=await Ki({fetch:f.http.fetch,alertTypeIds:[S.J,S.W,S.X,S.S,S.L,S.R],filters:[{nodeUuid:h}],clusterUuid:M,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});x(n)}}),[null===(r=f.data)||void 0===r?void 0:r.query.timefilter.timefilter,f.http,M,h,g,k]),L=Object(n.useCallback)((()=>{p(!g)}),[g,p]);return Object(b.jsx)(ln,{title:w,pageTitle:C,getPageData:I,id:h,pageType:"nodes"},Object(b.jsx)(ei,{productName:S.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(na,d()({alerts:j,labels:pn.node,nodeId:h,clusterUuid:M,onBrush:m,zoomInfo:u,toggleShowSystemIndices:L,showSystemIndices:g,nodesByIndices:_},O)),s)}))},kn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{zoomInfo:a,onBrush:r}=Sa(),{services:o}=Object(i.useKibana)(),{generate:l}=q(),c=s.cluster_uuid,u=s.ccs,d=Object(v.find)(e,{cluster_uuid:c}),[m,g]=Object(n.useState)(null),[p,j]=Object(n.useState)(!1),x=()=>{j(!p)},h=B.i18n.translate("xpack.monitoring.elasticsearch.overview.title",{defaultMessage:"Elasticsearch"}),f=B.i18n.translate("xpack.monitoring.elasticsearch.overview.pageTitle",{defaultMessage:"Elasticsearch overview"});Object(n.useEffect)((()=>{d&&l(d.cluster_name,{inElasticsearch:!0})}),[d,l]);const O=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/elasticsearch`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[u,c,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(b.jsx)(Zi,{title:h,pageTitle:f,getPageData:O,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(b.jsx)("div",{"data-test-subj":"elasticsearchOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,shardActivity:i,logs:n}=e||{},o=i&&(e=>e.filter((e=>p||"DONE"!==e.stage)))(i);return Object(b.jsx)(Is,{clusterStatus:t,metrics:s,logs:n,cluster:d,shardActivity:o,onBrush:r,showShardActivityHistory:p,toggleShardActivityHistory:x,zoomInfo:a,"data-test-subj":"elasticsearchOverviewPage"})})(m)))},Sn=e=>Object(b.jsx)(Ma,d()({},e,{product:"enterprise_search"}));function _n({stats:e}){const t=[{label:B.i18n.translate("xpack.monitoring.entSearch.overview.instances",{defaultMessage:"Instances"}),value:Et(e.totalInstances,"int_commas"),"data-test-subj":"totalInstances"},{label:B.i18n.translate("xpack.monitoring.entSearch.overview.appSearchEngines",{defaultMessage:"App Search Engines"}),value:Et(e.appSearchEngines,"int_commas"),"data-test-subj":"appSearchEngines"},{label:B.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchOrgSources",{defaultMessage:"Org Content Sources"}),value:Et(e.workplaceSearchOrgSources,"int_commas"),"data-test-subj":"workplaceSearchOrgSources"},{label:B.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchPrivateSources",{defaultMessage:"Private Content Sources"}),value:Et(e.workplaceSearchPrivateSources,"int_commas"),"data-test-subj":"workplaceSearchPrivateSources"}];return Object(b.jsx)(jt,{metrics:t,"data-test-subj":"entSearchSummaryStatus"})}const Tn=({metrics:e,stats:t,...s})=>{const a=[e.enterprise_search_heap,e.enterprise_search_jvm_finalizer_queue,e.enterprise_search_gc_time,e.enterprise_search_gc_rate,e.enterprise_search_threads,e.enterprise_search_threads_rate],i=[e.enterprise_search_http_traffic,e.enterprise_search_http_responses,e.enterprise_search_http_connections_current,e.enterprise_search_http_connections_rate],n=[e.app_search_total_engines,e.crawler_workers],r=[e.workplace_search_total_sources];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.heading",defaultMessage:"Enterprise Search Overview"}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(_n,{stats:t})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.networkingSummary",defaultMessage:"Network Traffic Summary"}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null)))))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.lowLevelSummary",defaultMessage:"Low Level Resource Usage Summary"}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null)))))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.appSearchSummary",defaultMessage:"App Search Summary"}))),Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},n.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null)))))),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.workplaceSearchSummary",defaultMessage:"Workplace Search Summary"}))),Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null))))))))},wn=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{zoomInfo:a,onBrush:r}=Sa(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,{generate:u}=q(),m=Object(v.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)(null),j=B.i18n.translate("xpack.monitoring.entSearch.overview.routeTitle",{defaultMessage:"Enterprise Search - Overview"}),x=B.i18n.translate("xpack.monitoring.entSearch.overview.pageTitle",{defaultMessage:"Enterprise Search Overview"});Object(n.useEffect)((()=>{m&&u(m.cluster_name,{inEnterpriseSearch:!0})}),[m,u]);const h=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/enterprise_search`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(b.jsx)(Sn,{title:j,pageTitle:x,getPageData:h,"data-test-subj":"entSearchOverviewPage"},Object(b.jsx)("div",{"data-test-subj":"entSearchOverviewPage"},g&&Object(b.jsx)(Tn,d()({},g,{onBrush:r,zoomInfo:a}))))};s(98);const Cn=({isSupported:e,children:t})=>e?t:"-",In=e=>{const{alertsMeta:t={enabled:!0}}=e.cluster.alerts;if(t.enabled)return Object(b.jsx)("span",null,e.children);const s=B.i18n.translate("xpack.monitoring.cluster.listing.unknownHealthMessage",{defaultMessage:"Unknown"});return Object(b.jsx)(Y.EuiToolTip,{content:s,position:"bottom"},Object(b.jsx)(Y.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))},Ln="viewedStandaloneCluster",Fn=(e,t,s,a)=>[{name:B.i18n.translate("xpack.monitoring.cluster.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"cluster_name",sortable:!0,render:(e,t)=>t.isSupported?Object(b.jsx)(Y.EuiLink,{href:Te("#/overview",{cluster_uuid:t.cluster_uuid}),"data-test-subj":"clusterLink"},e):t.license?Object(b.jsx)(Y.EuiLink,{onClick:()=>s(t.cluster_name),"data-test-subj":"clusterLink"},e):Object(b.jsx)(Y.EuiLink,{onClick:()=>a(t.cluster_name),"data-test-subj":"clusterLink"},e)},{name:B.i18n.translate("xpack.monitoring.cluster.listing.statusColumnTitle",{defaultMessage:"Alerts Status"}),field:"status","data-test-subj":"alertsStatus",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,Object(b.jsx)(In,{cluster:t},Object(b.jsx)(dt,{alerts:t.alerts.list,showBadge:!1})))},{name:B.i18n.translate("xpack.monitoring.cluster.listing.nodesColumnTitle",{defaultMessage:"Nodes"}),field:"elasticsearch.cluster_stats.nodes.count.total","data-test-subj":"nodesCount",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,"number"==typeof e?ht()(e).format("0,0"):0)},{name:B.i18n.translate("xpack.monitoring.cluster.listing.indicesColumnTitle",{defaultMessage:"Indices"}),field:"elasticsearch.cluster_stats.indices.count","data-test-subj":"indicesCount",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,ht()(e).format("0,0"))},{name:B.i18n.translate("xpack.monitoring.cluster.listing.dataColumnTitle",{defaultMessage:"Data"}),field:"elasticsearch.cluster_stats.indices.store.size_in_bytes","data-test-subj":"dataSize",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,ht()(e).format("0,0[.]0 b"))},{name:B.i18n.translate("xpack.monitoring.cluster.listing.logstashColumnTitle",{defaultMessage:"Logstash"}),field:"logstash.node_count","data-test-subj":"logstashCount",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,ht()(e).format("0,0"))},{name:B.i18n.translate("xpack.monitoring.cluster.listing.kibanaColumnTitle",{defaultMessage:"Kibana"}),field:"kibana.count","data-test-subj":"kibanaCount",sortable:!0,render:(e,t)=>Object(b.jsx)(Cn,t,ht()(e).format("0,0"))},{name:B.i18n.translate("xpack.monitoring.cluster.listing.licenseColumnTitle",{defaultMessage:"License"}),field:"license.type","data-test-subj":"clusterLicense",sortable:!0,render:(t,s)=>{const i=s.license;if(!t)return Object(b.jsx)("div",null,Object(b.jsx)("div",{className:"monTableCell__clusterCellLicense"},"N/A"));if(i){const s=()=>i.expiry_date_in_millis<$e()().valueOf()?Object(b.jsx)("span",{className:"monTableCell__clusterCellExpired"},"Expired"):Object(b.jsx)("span",null,"Expires ",$e()(i.expiry_date_in_millis).format("D MMM YY"));return Object(b.jsx)("div",null,Object(b.jsx)("div",{className:"monTableCell__clusterCellLicense"},Object(v.capitalize)(t)),Object(b.jsx)("div",{className:"monTableCell__clusterCellExpiration"},e?s():null))}return Object(b.jsx)(Y.EuiLink,{onClick:()=>a(s.cluster_name)},Object(b.jsx)(Y.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))}},{name:B.i18n.translate("xpack.monitoring.cluster.listing.versionColumnTitle",{defaultMessage:"Version"}),field:"version","data-test-subj":"clusterVersion",sortable:!0}],Pn=(e,t,s,a)=>{e.$evalAsync((()=>{t.cluster_uuid=s,t.ccs=a,t.save(),window.history.replaceState(null,null,"#/overview")}))},Nn=(e,{title:t,text:s})=>{e.$evalAsync((()=>{N.a.shims.toastNotifications.addWarning({title:t,text:s,"data-test-subj":"monitoringLicenseWarning"})}))},Dn=(e,t,s)=>{Nn(e,{title:B.i18n.translate("xpack.monitoring.cluster.listing.incompatibleLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(i.toMountPoint)(Object(b.jsx)(n.Fragment,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.noMultiClusterSupportMessage",defaultMessage:"The Basic license does not support multi-cluster monitoring."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.infoMessage",defaultMessage:"Need to monitor multiple clusters? {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getLicenseInfoLink:Object(b.jsx)(Y.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},Rn=(e,t,s)=>{const a=`${N.a.shims.getBasePath()}/app/management/stack/license_management/home`;Nn(e,{title:B.i18n.translate("xpack.monitoring.cluster.listing.invalidLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:Object(i.toMountPoint)(Object(b.jsx)(n.Fragment,null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.invalidInfoMessage",defaultMessage:"The license information is invalid."})),Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.infoMessage",defaultMessage:"Need a license? {getBasicLicenseLink} or {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getBasicLicenseLink:Object(b.jsx)(Y.EuiLink,{href:a},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getBasicLicenseLinkLabel",defaultMessage:"Get a free Basic license"})),getLicenseInfoLink:Object(b.jsx)(Y.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),{theme$:t})})},An=({changeCluster:e,storage:t})=>t.get(Ln)?null:Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiCallOut,{color:"warning",title:B.i18n.translate("xpack.monitoring.cluster.listing.standaloneClusterCallOutTitle",{defaultMessage:"It looks like you have instances that aren't connected to an Elasticsearch cluster."}),iconType:"link"},Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{onClick:()=>e(S.Y),"data-test-subj":"standaloneClusterLink"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutLink",defaultMessage:"View these instances."})),"",Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutText",defaultMessage:"Or, click Standalone Cluster in the table below"})),Object(b.jsx)("p",null,Object(b.jsx)(Y.EuiLink,{onClick:()=>{t.set(Ln,!0)}},Object(b.jsx)(Y.EuiIcon,{type:"cross"}),"",Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutDismiss",defaultMessage:"Dismiss"})))),Object(b.jsx)(Y.EuiSpacer,null)),zn=({angular:e,clusters:t,sorting:s,pagination:a,onTableChange:n})=>{const{scope:r,globalState:o,storage:l,showLicenseExpiration:c}=e,{sort:{direction:u,field:d}}=s,{services:m}=Object(i.useKibana)(),g=Object(v.partial)(Pn,r,o),p=Object(v.partial)(Dn,r,m.theme.theme$),j=Object(v.partial)(Rn,r,m.theme.theme$),x=!!t.find((e=>e.cluster_uuid===S.Y));return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,x?Object(b.jsx)(An,{changeCluster:g,storage:l}):null,Object(b.jsx)(Pt,{className:"clusterTable",rows:t,columns:Fn(c,0,p,j),rowProps:e=>({"data-test-subj":`clusterRow_${e.cluster_uuid}`}),sorting:{sort:{direction:u,field:d||"cluster_name"}},pagination:a,search:{box:{incremental:!0,placeholder:r.filterText}},onTableChange:n,executeQueryOptions:{defaultFields:["cluster_name"]}}))))},Bn=B.i18n.translate("xpack.monitoring.cluster.listing.pageTitle",{defaultMessage:"Cluster listing"}),Vn=B.i18n.translate("xpack.monitoring.cluster.listing.tabTitle",{defaultMessage:"Clusters"}),Un=e=>e.reduce(((e,t)=>({...e,...t.alerts&&t.alerts.list||{}})),{}),$n=()=>{var e;const t=Object(n.useContext)(D),s=Object(n.useContext)(_),{services:a}=Object(i.useKibana)(),[r,o]=Object(n.useState)([]),{update:l}=q(),{getPaginationTableProps:u}=Ba("clusters"),{sorting:d,pagination:m,onTableChange:g}=u();Object(n.useEffect)((()=>{l([{"data-test-subj":"clusterListingBreadcrumb",text:Vn}])}),[l]);const p=[{id:"clusters",label:Vn,testSubj:"clusterListingTab",route:"/home"}],j=Object(n.useCallback)((async()=>{var e,s;const i=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(s=a.http)&&void 0!==s&&s.fetch){const e=await Wi({fetch:a.http.fetch,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},ccs:t.ccs,codePaths:["all"]});o(e)}}),[t.ccs,null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter,a.http]);return t.save&&1===r.length&&(t.cluster_uuid=r[0].cluster_uuid,t.save()),Object(b.jsx)(Ma,{tabs:p,title:Bn,pageTitle:Bn,getPageData:j},1===r.length&&Object(b.jsx)(c.Redirect,{to:{pathname:"/overview"}}),Object(b.jsx)(zn,{clusters:r,angular:{scope:{$evalAsync:e=>e(),filterQuery:""},globalState:t,storage:{get:e=>window.localStorage.getItem(e),set:(e,t)=>window.localStorage.setItem(e,t)},showLicenseExpiration:s.showLicenseExpiration},sorting:d,pagination:m,onTableChange:g}),Object(b.jsx)(xa,{alerts:Un(r)}))};function Gn(e,t){const s=$e()(e),a=s.format(t),i=Object(v.capitalize)(s.fromNow());return{shouldShowRelativeTime:!$e()().subtract(6,"hours").isAfter(s),formattedTimestamp:a,relativeTime:i}}function qn({status:e,availability:t=!0}){const s=(()=>{if(!t)return Ae.GRAY;const s=e.toUpperCase();return Ae[s]||Ae.YELLOW})();return Object(b.jsx)(Be,{type:s,label:B.i18n.translate("xpack.monitoring.kibana.statusIconLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Hn({stats:e}){const{transport_address:t,os_memory_free:s,version:a,uptime:n,status:o,statusIsStale:l,lastSeenTimestamp:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext(_),d=Object(i.useUiSetting)("dateFormat"),m=[{label:B.i18n.translate("xpack.monitoring.kibana.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"transportAddress"},{label:B.i18n.translate("xpack.monitoring.kibana.detailStatus.osFreeMemoryLabel",{defaultMessage:"OS Free Memory"}),value:Et(s,"byte"),"data-test-subj":"osFreeMemory"},{label:B.i18n.translate("xpack.monitoring.kibana.detailStatus.versionLabel",{defaultMessage:"Version"}),value:a,"data-test-subj":"version"},{label:B.i18n.translate("xpack.monitoring.kibana.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Et(n,"time_since"),"data-test-subj":"uptime"}];return Object(b.jsx)(jt,{StatusIndicator:()=>{if(!l)return Object(b.jsx)(pt,{status:o,isOnline:!0,IconComponent:qn});const{description:e,title:t}=function(e,t,s,a){const{shouldShowRelativeTime:i,relativeTime:n,formattedTimestamp:o}=Gn(t,a),l=B.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance. Last seen: {lastSeenTimestamp}",values:{staleStatusThresholdSeconds:s,lastSeenTimestamp:i?n:o}});return{description:B.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusMetricDescription",{defaultMessage:"Last Reported Status"}),title:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(qn,{status:e}),"",Object(v.capitalize)(e),Object(b.jsx)("span",{style:{marginLeft:"8px"}},Object(b.jsx)(Y.EuiToolTip,{position:"top",content:l},Object(b.jsx)(Y.EuiBadge,{iconType:"warning",color:"warning"},B.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusLabel",{defaultMessage:"Stale"})))))}}(o,c,u,d);return Object(b.jsx)(Y.EuiStat,{"data-test-subj":"status",description:e,title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})},metrics:m,"data-test-subj":"kibanaDetailStatus"})}const Wn=({data:e,alerts:t})=>{const{zoomInfo:s,onBrush:a}=Sa(),i=e.metrics.kibana_instance_rule_executions&&e.metrics.kibana_instance_rule_executions.length&&e.metrics.kibana_instance_rule_executions[0].indices_found.ecs;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Hn,{stats:e.kibanaSummary})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:t}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_requests,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_response_times,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_memory,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_average_concurrent_connections,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_os_load,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_process_delay,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),i&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_instance_rule_executions,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_instance_rule_failures,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_instance_action_executions,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_instance_action_failures,onBrush:a,zoomInfo:s}),Object(b.jsx)(Y.EuiSpacer,null)))))))},Kn=({clusters:e})=>{var t;const{instance:s}=Object(c.useParams)(),a=Object(n.useContext)(D),{services:r}=Object(i.useKibana)(),{generate:o}=q(),l=a.cluster_uuid,u=a.ccs,d=Object(v.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)({}),[p,j]=Object(n.useState)(""),[x,h]=Object(n.useState)({}),f=`Kibana - ${p}`,O=B.i18n.translate("xpack.monitoring.kibana.instance.pageTitle",{defaultMessage:"Kibana instance: {instance}",values:{instance:p}});Object(n.useEffect)((()=>{d&&o(d.cluster_name,{inKibana:!0,instance:p})}),[d,p,o]);const E=Object(n.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${l}/kibana/${s}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g(e),j(e.kibanaSummary.name);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.N],clusterUuid:l,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});h(t)}}),[u,l,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(b.jsx)(Ma,{title:f,pageTitle:O,getPageData:E},Object(b.jsx)("div",{"data-test-subj":"kibanaInstancePage"},Object(b.jsx)(Wn,{data:m,alerts:x})))},Jn=({...e})=>{const t=[{id:"overview",label:B.i18n.translate("xpack.monitoring.kibanaNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/kibana",testSubj:"kibanaOverviewPage"},{id:"instances",label:B.i18n.translate("xpack.monitoring.kibanaNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/kibana/instances",testSubj:"kibanaInstancesPage"}];return Object(b.jsx)(Ma,d()({},e,{tabs:t,product:"kibana"}))};function Yn({stats:e,alerts:t}){const{concurrent_connections:s,count:a,memory_limit:i,memory_size:n,requests_total:o,response_time_max:l,status:u,some_status_is_stale:d}=e,{staleStatusThresholdSeconds:m}=r.a.useContext(_),g=Object(c.useLocation)(),p=[{label:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.instancesLabel",{defaultMessage:"Instances"}),value:a,"data-test-subj":"instances"},{label:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Et(n,"byte")+" / "+Et(i,"byte"),"data-test-subj":"memory"},{label:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.requestsLabel",{defaultMessage:"Requests"}),value:o,"data-test-subj":"requests"},{label:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.connectionsLabel",{defaultMessage:"Connections"}),value:s,"data-test-subj":"connections"},{label:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.maxResponseTimeLabel",{defaultMessage:"Max. Response Time"}),value:Et(l,"0","ms"),"data-test-subj":"maxResponseTime"}];return Object(b.jsx)(jt,{StatusIndicator:()=>{if(!d)return Object(b.jsx)(pt,{status:u,isOnline:!0,IconComponent:qn});const e=B.i18n.translate("xpack.monitoring.kibana.clusterStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:m}});return"/kibana"===g.pathname?Object(b.jsx)(Qn,{staleMessage:e}):Object(b.jsx)(Xn,{staleMessage:e})},alerts:t,metrics:p,"data-test-subj":"kibanaClusterStatus"})}function Qn({staleMessage:e}){const t=Te("#/kibana/instances"),s=Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)("div",{style:{marginBottom:"8px"}},Object(b.jsx)(Y.EuiToolTip,{position:"top",content:e},Object(b.jsx)(Y.EuiBadge,{iconType:"warning",color:"warning"},B.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusInstancesLabel",{defaultMessage:"Stale"})))),Object(b.jsx)(Y.EuiLink,{href:t},B.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})));return Object(b.jsx)(Y.EuiStat,{"data-test-subj":"status",description:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.statusLabel",{defaultMessage:"Status"}),title:s,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}function Xn({staleMessage:e}){const t=Object(b.jsx)(Y.EuiToolTip,{position:"top",content:e},Object(b.jsx)(Y.EuiBadge,{iconType:"warning",color:"warning"},B.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.staleStatusInstancesLabel",{defaultMessage:"Stale"})));return Object(b.jsx)(Y.EuiStat,{"data-test-subj":"status",description:B.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.statusLabel",{defaultMessage:"Status"}),title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}const Zn=(e,t,s,a)=>{const i=[{name:B.i18n.translate("xpack.monitoring.kibana.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(pe(ae.d.MetricbeatMigration)){const i=Object(v.get)(e,"data.byUuid",{}),n=Object(v.get)(s,"kibana.uuid"),r=i[n]||{},o={uuid:n,name:s.name};if(a=Object(b.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(b.jsx)(Ds,{setupMode:e,status:r,instance:o,productName:S.B})),r.isNetNewUser)return Object(b.jsx)("div",null,t,a)}return Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiLink,{href:Te(`#/kibana/instances/${s.kibana.uuid}`),"data-test-subj":`kibanaLink-${t}`},t),a)}},{name:B.i18n.translate("xpack.monitoring.kibana.listing.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts_column",width:"175px",sortable:!0,render:()=>Object(b.jsx)(dt,{showBadge:!0,alerts:t})},{name:B.i18n.translate("xpack.monitoring.kibana.listing.lastReportedStatusColumnTitle",{defaultMessage:"Last Reported Status"}),field:"status",render:e=>Object(b.jsx)(Y.EuiHealth,{color:tr(e),"data-test-subj":"status"},Object(v.capitalize)(e))},{name:B.i18n.translate("xpack.monitoring.kibana.listing.lastSeenColumnTitle",{defaultMessage:"Last Seen"}),field:"lastSeenTimestamp",render:(e,t)=>{const i=function(e,t){const{shouldShowRelativeTime:s,formattedTimestamp:a,relativeTime:i}=Gn(e,t);return s?Object(b.jsx)(Y.EuiToolTip,{position:"top",content:a},Object(b.jsx)("span",null,i)):a}(e,s),n=B.i18n.translate("xpack.monitoring.kibana.listing.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance.",values:{staleStatusThresholdSeconds:a}});return Object(b.jsx)("span",{"data-test-subj":"lastSeen"},i,t.statusIsStale&&Object(b.jsx)(r.a.Fragment,null,"",Object(b.jsx)(Y.EuiIconTip,{"aria-label":n,content:n,size:"l",type:"warning",color:"warning"})))}},{name:B.i18n.translate("xpack.monitoring.kibana.listing.loadAverageColumnTitle",{defaultMessage:"Load Average"}),field:"os.load.1m",render:e=>Object(b.jsx)("span",null,Et(e,"0.00"))},{name:B.i18n.translate("xpack.monitoring.kibana.listing.memorySizeColumnTitle",{defaultMessage:"Memory Size"}),field:"process.memory.resident_set_size_in_bytes",render:e=>Object(b.jsx)("span",null,vt(e,"byte"))},{name:B.i18n.translate("xpack.monitoring.kibana.listing.requestsColumnTitle",{defaultMessage:"Requests"}),field:"requests.total",render:e=>Object(b.jsx)("span",null,vt(e,"int_commas"))},{name:B.i18n.translate("xpack.monitoring.kibana.listing.responseTimeColumnTitle",{defaultMessage:"Response Times"}),field:"response_times.average",render:(e,t)=>{var s;return e?Object(b.jsx)("div",null,Object(b.jsx)("div",{className:"monTableCell__splitNumber"},vt(e,"int_commas")+" ms avg"),Object(b.jsx)("div",{className:"monTableCell__splitNumber"},vt(null==t||null===(s=t.response_times)||void 0===s?void 0:s.max,"int_commas")," ms max")):null}}];return i},er=e=>{const{clusterStatus:t,alerts:s,setupMode:a,sorting:o,pagination:l,onTableChange:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext(_),d=Object(i.useUiSetting)("dateFormat");let m=null;const g=e.instances||[];if(pe(ae.d.MetricbeatMigration)){const e=g.reduce(((e,t)=>{var s,a;return{...e,[null!==(s=null===(a=t.kibana)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""]:t}}),{});g.push(...Object.entries(a.data.byUuid).reduce(((t,[s,a])=>(e[s]||t.push({kibana:{...a.instance.kibana,status:Ae.GRAY}}),t)),[])),m=Object(b.jsx)(As,{setupModeData:a.data,productName:S.B,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null};return a.data.totalUniqueInstanceCount>0||(e.shouldRender=!0,e.componentToRender=Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Y.EuiCallOut,{title:B.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Kibana instance detected"}),color:"warning",iconType:"flag"},Object(b.jsx)("p",null,B.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following instances are not monitored.\n                        Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(b.jsx)(Y.EuiSpacer,{size:"m"}))),e}})}const p=g.map((e=>{var t,s;return{...e,name:null===(t=e.kibana)||void 0===t?void 0:t.name,status:null===(s=e.kibana)||void 0===s?void 0:s.status}}));return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.kibana.instances.heading",defaultMessage:"Kibana instances"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Yn,{stats:t,alerts:s})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),m,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Pt,{className:"kibanaInstancesTable",rows:p,columns:Zn(a,s,d,u),sorting:o,pagination:l,setupMode:a,productName:S.B,search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.kibana.listing.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})}},onTableChange:c,executeQueryOptions:{defaultFields:["name"]}}))))};function tr(e){switch(e){case"red":return"danger";case"yellow":return"warning";case"green":return"success";default:return"subdued"}}const sr=({clusters:e})=>{var t;const{cluster_uuid:s,ccs:a}=Object(n.useContext)(D),{services:r}=Object(i.useKibana)(),{generate:o}=q(),{updateTotalItemCount:l,getPaginationTableProps:c}=Ba("kibana.instances"),u=Object(v.find)(e,{cluster_uuid:s}),[m,g]=Object(n.useState)({}),[p,j]=Object(n.useState)({}),x=B.i18n.translate("xpack.monitoring.kibana.instances.routeTitle",{defaultMessage:"Kibana - Instances"}),h=B.i18n.translate("xpack.monitoring.kibana.instances.pageTitle",{defaultMessage:"Kibana instances"});Object(n.useEffect)((()=>{u&&o(u.cluster_name,{inKibana:!0})}),[u,o]);const f=Object(n.useCallback)((async()=>{var e,t;const i=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),n=`../api/monitoring/v1/clusters/${s}/kibana/instances`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&s){var o;const e=await(null===(o=r.http)||void 0===o?void 0:o.fetch(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()}})}));g(e),l(e.kibanas.length);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.N],clusterUuid:s,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});j(t)}}),[a,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,l]);return Object(b.jsx)(Jn,{title:x,pageTitle:h,getPageData:f},Object(b.jsx)("div",{"data-test-subj":"monitoringKibanaInstancesApp"},Object(b.jsx)(ei,{productName:S.B,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(er,d()({alerts:p,instances:m.kibanas,setupMode:e,clusterStatus:m.clusterStatus},c())),s)})))},ar=({data:e})=>{const{zoomInfo:t,onBrush:s}=Sa();if(!e)return null;const a=e.metrics.kibana_cluster_rule_overdue_count&&e.metrics.kibana_cluster_rule_overdue_count.length&&e.metrics.kibana_cluster_rule_overdue_count[0].indices_found.ecs;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Yn,{stats:e.clusterStatus})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGroup,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_requests,onBrush:s,zoomInfo:t})),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_response_times,onBrush:s,zoomInfo:t}))),a&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(Y.EuiFlexGroup,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_rule_overdue_count,onBrush:s,zoomInfo:t})),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_rule_overdue_duration,onBrush:s,zoomInfo:t}))),Object(b.jsx)(Y.EuiFlexGroup,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_action_overdue_count,onBrush:s,zoomInfo:t})),Object(b.jsx)(Y.EuiFlexItem,{grow:!0},Object(b.jsx)(ds,{series:e.metrics.kibana_cluster_action_overdue_duration,onBrush:s,zoomInfo:t})))))))},ir=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{services:a}=Object(i.useKibana)(),{generate:r}=q(),[o,l]=Object(n.useState)(),c=s.cluster_uuid,u=Object(v.find)(e,{cluster_uuid:c}),d=s.ccs,m=B.i18n.translate("xpack.monitoring.kibana.overview.title",{defaultMessage:"Kibana"}),g=B.i18n.translate("xpack.monitoring.kibana.overview.pageTitle",{defaultMessage:"Kibana overview"});Object(n.useEffect)((()=>{u&&r(u.cluster_name,{inKibana:!0})}),[u,r]);const p=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/kibana`,n=await(null===(t=a.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));l(n)}),[d,c,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http]);return Object(b.jsx)(Jn,{getPageData:p,title:m,pageTitle:g},Object(b.jsx)(ar,{data:o}))},nr=[S.n],rr=()=>{var e,t,s;const a=B.i18n.translate("xpack.monitoring.license.licenseRouteTitle",{defaultMessage:"License"}),{setIsDisabled:r}=K();Object(n.useEffect)((()=>(r(!0),()=>{r(!1)})),[r]);const o=Object(n.useContext)(D),l=o.cluster_uuid,c=o.ccs,[u,d]=Object(n.useState)([]),{services:m}=Object(i.useKibana)(),g=null===(e=m.uiSettings)||void 0===e?void 0:e.get("dateFormat:tz"),p=null===(t=m.application)||void 0===t?void 0:t.getUrlForApp("management",{path:"stack/license_management/upload_license"}),j=Object(n.useCallback)((async()=>{var e;const t=null===(e=m.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();let s="../api/monitoring/v1/clusters";l&&(s+=`/${l}`);try{var a;const e=await(null===(a=m.http)||void 0===a?void 0:a.fetch(s,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:t.min.toISOString(),max:t.max.toISOString()},codePaths:nr})}));d(function(e){return e.map(or)}(e))}catch(e){}}),[c,l,null===(s=m.data)||void 0===s?void 0:s.query.timefilter.timefilter,m.http]);return Object(b.jsx)(Ma,{title:a,pageTitle:"",getPageData:j},function(e,t,s){if(e.length){const a=e[0],i=a.isPrimary,n=a.license;let r=null==n?void 0:n.expiry_date_in_millis;void 0!==r&&(r=function(e,t){return Ye.a.tz(e,t||Ye.a.tz.guess()).format("LL LTS")}(r,t));const o=Date.now()>r;return Object(b.jsx)(Pe,{isPrimaryCluster:i,status:n.status,type:n.type,isExpired:o,expiryDate:r,uploadLicensePath:s})}return null}(u,g,p))};function or(e){return e.cluster_uuid===S.Y&&(e.cluster_name="Standalone Cluster"),e}function lr(e,t,s){var a;const{services:r}=Object(i.useKibana)(),o=null===(a=r.data)||void 0===a?void 0:a.query.timefilter.timefilter.getBounds(),[l]=Object(n.useState)(o.min.toISOString()),[c]=Object(n.useState)(o.max.toISOString()),[u,d]=Object(n.useState)([]),[m,g]=Object(n.useState)(!1),p=ja();return Object(n.useEffect)((()=>{!async function(){try{var t;if(null!==(t=r.http)&&void 0!==t&&t.fetch){const t=await Wi({timeRange:{min:l,max:c},fetch:r.http.fetch,clusterUuid:e,codePaths:s});d(t)}}catch(e){p(e)}finally{g(!0)}}()}),[p,e,t,r.http,s,l,c]),{clusters:u,loaded:m}}const cr=[S.k],ur=({staticLoadingState:e})=>{const{clusters:t,loaded:s}=lr(null,void 0,cr),a=B.i18n.translate("xpack.monitoring.loading.pageTitle",{defaultMessage:"Loading"});return e?Object(b.jsx)(Ma,{title:a},Object(b.jsx)(Re,null)):Object(b.jsx)(Ma,{title:a},!1===s?Object(b.jsx)(Re,null):dr(t))},dr=e=>e&&e.length?1===e.length?Object(b.jsx)(c.Redirect,{to:"/overview"}):Object(b.jsx)(c.Redirect,{to:"/home"}):Object(b.jsx)(c.Redirect,{to:"/no-data"}),mr=({cluster:e,instance:t,pipelineId:s,pipelineVersions:a,tabsDisabled:i,...n})=>{const r=[];if(!i)if(t||s){if(t){var o,l,c;r.push({id:"overview",label:B.i18n.translate("xpack.monitoring.logstashNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/logstash/node/${null===(o=t.nodeSummary)||void 0===o?void 0:o.uuid}`}),r.push({id:"pipeline",label:B.i18n.translate("xpack.monitoring.logstashNavigation.instance.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:`/logstash/node/${null===(l=t.nodeSummary)||void 0===l?void 0:l.uuid}/pipelines`,testSubj:"logstashNodeDetailPipelinesLink"}),r.push({id:"advanced",label:B.i18n.translate("xpack.monitoring.logstashNavigation.instance.advancedLinkText",{defaultMessage:"Advanced"}),route:`/logstash/node/${null===(c=t.nodeSummary)||void 0===c?void 0:c.uuid}/advanced`,testSubj:"logstashNodeDetailAdvancedLink"})}}else r.push({id:"overview",label:B.i18n.translate("xpack.monitoring.logstashNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/logstash"}),r.push({id:"nodes",label:B.i18n.translate("xpack.monitoring.logstashNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/logstash/nodes"}),r.push({id:"pipelines",label:B.i18n.translate("xpack.monitoring.logstashNavigation.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:"/logstash/pipelines"});return a&&a.length,Object(b.jsx)(Ma,d()({},n,{tabs:r,product:"logstash"}))};function gr({stats:e}){const{http_address:t,events:s,reloads:a,pipeline:i,queue_type:n,version:r,uptime:o}=e,l=[{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"httpAddress"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Et(s.in,"0.[0]a"),"data-test-subj":"eventsIn"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Et(s.out,"0.[0]a"),"data-test-subj":"eventsOut"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.configReloadsLabel",{defaultMessage:"Config Reloads"}),value:a.successes,"data-test-subj":"numReloads"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.pipelineWorkersLabel",{defaultMessage:"Pipeline Workers"}),value:i.workers,"data-test-subj":"pipelineWorkers"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.batchSizeLabel",{defaultMessage:"Batch Size"}),value:i.batch_size,"data-test-subj":"pipelineBatchSize"}],c=[{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.versionLabel",{defaultMessage:"Version"}),value:r,"data-test-subj":"version"},{label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:Et(o,"time_since"),"data-test-subj":"uptime"}],u=[...l];return n&&u.push({label:B.i18n.translate("xpack.monitoring.logstash.detailStatus.queueTypeLabel",{defaultMessage:"Queue Type"}),value:n,"data-test-subj":"queueType"}),u.push(...c),Object(b.jsx)(jt,{metrics:u,"data-test-subj":"logstashDetailStatus"})}const pr=({clusters:e})=>{var t;const s=Object(n.useContext)(D),a=Object(c.useRouteMatch)(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,{zoomInfo:l,onBrush:u}=Sa(),m=s.ccs,g=Object(v.find)(e,{cluster_uuid:o}),{generate:p}=q(),[j,x]=Object(n.useState)({}),[h,f]=Object(n.useState)({}),O=B.i18n.translate("xpack.monitoring.logstash.node.advanced.routeTitle",{defaultMessage:"Logstash - {nodeName} - Advanced",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),E=B.i18n.translate("xpack.monitoring.logstash.node.advanced.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),M=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${o}/logstash/node/${a.params.uuid}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&o){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));x(e);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.Q],clusterUuid:o,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});f(t)}}),[m,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,a.params.uuid]),y=Object(n.useMemo)((()=>j.metrics?[j.metrics.logstash_node_cpu_utilization,j.metrics.logstash_queue_events_count,j.metrics.logstash_node_cgroup_cpu,j.metrics.logstash_pipeline_queue_size,j.metrics.logstash_node_cgroup_stats]:[]),[j.metrics]);return Object(n.useEffect)((()=>{g&&j.nodeSummary&&p(g.cluster_name,{inLogstash:!0,instance:j.nodeSummary.host,name:"nodes"})}),[g,j,p]),Object(b.jsx)(mr,{instance:j,title:O,pageTitle:E,getPageData:M,cluster:g},Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,j.nodeSummary&&Object(b.jsx)(gr,{stats:j.nodeSummary})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:h}),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},y.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e,onBrush:u,zoomInfo:l},j)),Object(b.jsx)(Y.EuiSpacer,null)))))))))},jr=({clusters:e})=>{var t;const s=Object(c.useRouteMatch)(),a=Object(n.useContext)(D),{services:r}=Object(i.useKibana)(),{generate:o}=q(),l=a.cluster_uuid,u=a.ccs,m=Object(v.find)(e,{cluster_uuid:l}),[g,p]=Object(n.useState)({}),[j,x]=Object(n.useState)({}),{zoomInfo:h,onBrush:f}=Sa(),O=B.i18n.translate("xpack.monitoring.logstash.node.routeTitle",{defaultMessage:"Logstash - {nodeName}",values:{nodeName:g.nodeSummary?g.nodeSummary.name:""}}),E=B.i18n.translate("xpack.monitoring.logstash.node.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:g.nodeSummary?g.nodeSummary.name:""}});Object(n.useEffect)((()=>{m&&g.nodeSummary&&o(m.cluster_name,{inLogstash:!0,instance:g.nodeSummary.host,name:"nodes"})}),[m,g,o]);const M=Object(n.useCallback)((async()=>{var e,t;const a=`../api/monitoring/v1/clusters/${l}/logstash/node/${s.params.uuid}`,i=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},is_advanced:!1})}));p(e);const t=await Ki({fetch:r.http.fetch,alertTypeIds:[S.Q],clusterUuid:l,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});x(t)}}),[u,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,s.params]),y=Object(n.useMemo)((()=>g.metrics?[g.metrics.logstash_events_input_rate,g.metrics.logstash_jvm_usage,g.metrics.logstash_events_output_rate,g.metrics.logstash_node_cpu_metric,g.metrics.logstash_events_latency,g.metrics.logstash_os_load]:[]),[g.metrics]);return Object(b.jsx)(mr,{instance:g,title:O,pageTitle:E,getPageData:M,cluster:m},Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiPanel,null,g.nodeSummary&&Object(b.jsx)(gr,{stats:g.nodeSummary})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Qs,{alerts:j}),Object(b.jsx)(Y.EuiPageSection,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},y.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e,onBrush:f,zoomInfo:h},g)),Object(b.jsx)(Y.EuiSpacer,null)))))))))};function br({stats:e,alerts:t}){const{node_count:s,avg_memory_used:a,avg_memory:i,events_in_total:n,events_out_total:r}=e,o=[{label:B.i18n.translate("xpack.monitoring.logstash.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:s,"data-test-subj":"node_count"},{label:B.i18n.translate("xpack.monitoring.logstash.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:Et(a,"byte")+" / "+Et(i,"byte"),"data-test-subj":"memory_used"},{label:B.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:Et(n,"0.[0]a"),"data-test-subj":"events_in_total"},{label:B.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:Et(r,"0.[0]a"),"data-test-subj":"events_out_total"}];return Object(b.jsx)(jt,{metrics:o,alerts:t,"data-test-subj":"logstashClusterStatus"})}class logstash_listing_listing_Listing extends n.PureComponent{getColumns(){const e=this.props.setupMode,t=this.props.alerts;return[{name:B.i18n.translate("xpack.monitoring.logstash.nodes.nameTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(t,s)=>{let a=null;if(pe(ae.d.MetricbeatMigration)){const t=Object(v.get)(e,"data.byUuid",{}),i=Object(v.get)(s,"logstash.uuid"),n=t[i]||{},r={uuid:i,name:s.name};a=Object(b.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(b.jsx)(Ds,{setupMode:e,status:n,instance:r,productName:S.F}))}return Object(b.jsx)("div",null,Object(b.jsx)("div",{"data-test-subj":"name"},Object(b.jsx)(Y.EuiLink,{href:Te(`#/logstash/node/${s.logstash.uuid}`),"data-test-subj":`nodeLink-${s.logstash.uuid}`},t)),Object(b.jsx)("div",{"data-test-subj":"httpAddress"},s.logstash.http_address),a)}},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(b.jsx)(dt,{showBadge:!0,alerts:t})},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.cpuUsageTitle",{defaultMessage:"CPU Usage"}),field:"cpu_usage",sortable:!0,render:e=>Object(b.jsx)("span",{"data-test-subj":"cpuUsage"},Ot(e,100))},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.loadAverageTitle",{defaultMessage:"Load Average"}),field:"load_average",sortable:!0,render:e=>Object(b.jsx)("span",{"data-test-subj":"loadAverage"},vt(e,"0.00"))},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.jvmHeapUsedTitle",{defaultMessage:"{javaVirtualMachine} Heap Used",values:{javaVirtualMachine:"JVM"}}),field:"jvm_heap_used",sortable:!0,render:e=>Object(b.jsx)("span",{"data-test-subj":"jvmHeapUsed"},Ot(e,100))},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.eventsIngestedTitle",{defaultMessage:"Events Ingested"}),field:"events_out",sortable:!0,render:e=>Object(b.jsx)("span",{"data-test-subj":"eventsOut"},vt(e,"0.[0]a"))},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.configReloadsTitle",{defaultMessage:"Config Reloads"}),sortable:!0,render:e=>Object(b.jsx)("div",null,Object(b.jsx)("div",{"data-test-subj":"configReloadsSuccess"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsSuccessCountLabel",defaultMessage:"{reloadsSuccesses} successes",values:{reloadsSuccesses:e.reloads.successes}})),Object(b.jsx)("div",{"data-test-subj":"configReloadsFailure"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsFailuresCountLabel",defaultMessage:"{reloadsFailures} failures",values:{reloadsFailures:e.reloads.failures}})))},{name:B.i18n.translate("xpack.monitoring.logstash.nodes.versionTitle",{defaultMessage:"Version"}),field:"version",sortable:!0,render:e=>Object(b.jsx)("span",{"data-test-subj":"version"},vt(e))}]}render(){const{stats:e,alerts:t,sorting:s,pagination:a,onTableChange:i,data:n,setupMode:r}=this.props,o=this.getColumns(),l=n.map((e=>({...e,name:Object(v.get)(e,"logstash.name","N/A"),cpu_usage:Object(v.get)(e,"process.cpu.percent","N/A"),load_average:Object(v.get)(e,"os.cpu.load_average.1m","N/A"),jvm_heap_used:Object(v.get)(e,"jvm.mem.heap_used_percent","N/A"),events_out:Object(v.get)(e,"events.out","N/A"),version:Object(v.get)(e,"logstash.version","N/A")})));let c=null;return pe(ae.d.MetricbeatMigration)&&(c=Object(b.jsx)(As,{setupModeData:r.data,useNodeIdentifier:!0,productName:S.F})),Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.instances.heading",defaultMessage:"Logstash instances"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(br,{stats:e,alerts:t})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),c,Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Pt,{className:"logstashNodesTable",rows:l,setupMode:r,productName:S.F,columns:o,sorting:{...s,sort:{...s.sort,field:"name"}},pagination:a,search:{box:{incremental:!0,placeholder:B.i18n.translate("xpack.monitoring.logstash.filterNodesPlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))))}}const xr=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{services:a}=Object(i.useKibana)(),r=s.cluster_uuid,o=s.ccs,{generate:l}=q(),c=Object(v.find)(e,{cluster_uuid:r}),[u,m]=Object(n.useState)({}),[g,p]=Object(n.useState)({}),{getPaginationTableProps:j}=Ba("logstash.nodes"),x=B.i18n.translate("xpack.monitoring.logstash.nodes.routeTitle",{defaultMessage:"Logstash - Nodes"}),h=B.i18n.translate("xpack.monitoring.logstash.nodes.pageTitle",{defaultMessage:"Logstash nodes"}),f=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=a.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${r}/logstash/nodes`;if(null!==(t=a.http)&&void 0!==t&&t.fetch&&r){var n;const e=await(null===(n=a.http)||void 0===n?void 0:n.fetch(i,{method:"POST",body:JSON.stringify({ccs:o,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(e);const t=await Ki({fetch:a.http.fetch,alertTypeIds:[S.Q],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});p(t)}}),[o,r,null===(t=a.data)||void 0===t?void 0:t.query.timefilter.timefilter,a.http]);return Object(n.useEffect)((()=>{c&&l(c.cluster_name,{inLogstash:!0})}),[c,l]),Object(b.jsx)(mr,{title:x,pageTitle:h,getPageData:f,cluster:c},Object(b.jsx)("div",{"data-test-subj":"logstashNodesPage"},Object(b.jsx)(ei,{productName:S.F,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(b.jsx)(Ve.Provider,{value:{setupModeSupported:!0}},t,Object(b.jsx)(logstash_listing_listing_Listing,d()({stats:u.clusterStatus,metrics:u.metrics,data:u.nodes,setupMode:e,alerts:g},j())),s)})))};var hr=s(103),fr=s.n(hr);function Or(e){return fr()(e)>=S.E.MAJOR_VER_REQD_FOR_PIPELINES}const vr={grid:{show:!1,margin:4,hoverable:!0},colors:["#3b73ac"],series:{shadowSize:0,lines:{lineWidth:2},highlightColor:"#3b73ac",points:{radius:2}}};function Er(e=[]){const t=[];return t.push(e),t.push({data:[Object(v.last)(e)],points:{show:!0,radius:2,fill:1,fillColor:!1}}),t}class sparkline_flot_chart_SparklineFlotChart{constructor(e,t,s,a,i){I()(this,"render",(()=>{this.flotChart=Zt.a.plot(this.containerElem,this.data,this.options)})),I()(this,"setupBrushHandling",(e=>{this.options.selection={mode:"x",color:"#9c9c9c"},Zt()(this.containerElem).off("plotselected"),Zt()(this.containerElem).on("plotselected",((t,s)=>{e(s),this.flotChart.clearSelection()}))})),I()(this,"setupHoverHandling",(e=>{const t=Zt()(this.containerElem),s=Object(v.debounce)(((s,a,i)=>{if(null===i)return e();e({xValue:i.datapoint[0],yValue:i.datapoint[1],xPosition:i.pageX-window.pageXOffset,yPosition:i.pageY-window.pageYOffset,plotTop:t.offset().top,plotLeft:t.offset().left,plotHeight:t.height(),plotWidth:t.width()})}),S.p,{leading:!0});t.off("plothover"),t.on("plothover",s)})),this.containerElem=e,this.data=Er(t),this.options={...vr,...i},Object(v.isFunction)(s)&&this.setupBrushHandling(s),Object(v.isFunction)(a)&&this.setupHoverHandling(a),this.render(),window.addEventListener("resize",this.render)}update(e){this.flotChart.setData(Er(e)),this.flotChart.setupGrid(),this.flotChart.draw()}shutdown(){this.flotChart.shutdown();const e=Zt()(this.containerElem);e.off("plotselected"),e.off("plothover"),window.removeEventListener("resize",this.render)}}s(109);class sparkline_Sparkline extends r.a.Component{constructor(e){super(e),this.makeSparklineFlotChart=this.makeSparklineFlotChart.bind(this),this.onHover=this.onHover.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.handleSparklineRef=this.handleSparklineRef.bind(this),this.state={tooltip:void 0}}UNSAFE_componentWillReceiveProps({series:e,options:t}){Object(v.isEqual)(t,this.props.options)||(this.sparklineFlotChart.shutdown(),this.makeSparklineFlotChart(t)),Object(v.isEqual)(e,this.props.series)||this.sparklineFlotChart.update(e)}makeSparklineFlotChart(e){this.sparklineFlotChart=new sparkline_flot_chart_SparklineFlotChart(this.chartElem,this.props.series,this.props.onBrush,this.onHover,e)}onHover(e){this.setState({tooltip:e})}renderTooltip(){if(!1===this.props.tooltip.enabled)return;if(!this.state.tooltip)return;const e={tooltipContainer:{top:this.state.tooltip.yPosition-28},tooltip:{height:56,width:220},leftCaret:{width:6},rightCaret:{width:6}},t=this.state.tooltip.plotLeft+this.state.tooltip.plotWidth/2;return this.state.tooltip.xPosition>t?(e.rightCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition-226-10):(e.leftCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition+10),Object(b.jsx)("div",{className:"monSparklineTooltip__container",style:e.tooltipContainer},Object(b.jsx)("i",{className:"fa fa-caret-left monSparklineTooltip__caret",style:e.leftCaret}),Object(b.jsx)("div",{className:"monSparklineTooltip",style:e.tooltip},Object(b.jsx)("div",{className:"monSparklineTooltip__yValue"},this.props.tooltip.yValueFormatter(this.state.tooltip.yValue)),Object(b.jsx)("div",{className:"monSparklineTooltip__xValue"},this.props.tooltip.xValueFormatter(this.state.tooltip.xValue))),Object(b.jsx)("i",{className:"fa fa-caret-right monSparklineTooltip__caret",style:e.rightCaret}))}handleSparklineRef(e){this.chartElem=e,this.chartElem?this.makeSparklineFlotChart(this.props.options):this.sparklineFlotChart&&this.sparklineFlotChart.shutdown()}render(){return Object(b.jsx)("div",null,Object(b.jsx)("div",{className:"monSparkline",ref:this.handleSparklineRef}),this.renderTooltip())}}class pipeline_listing_PipelineListing extends n.Component{tooltipXValueFormatter(e,t){return $e()(e).format(t)}tooltipYValueFormatter(e,t,s){return Et(e,t,s)}getColumns(){const{onBrush:e,dateFormat:t}=this.props;return[{name:B.i18n.translate("xpack.monitoring.logstash.pipelines.idTitle",{defaultMessage:"ID"}),field:"id",sortable:!0,render:e=>Object(b.jsx)(Y.EuiLink,{"data-test-subj":"id",href:Te(`#/logstash/pipelines/${e}`)},e)},{name:B.i18n.translate("xpack.monitoring.logstash.pipelines.eventsEmittedRateTitle",{defaultMessage:"Events Emitted Rate"}),field:"latestThroughput",sortable:!0,render:(s,a)=>{const i=a.metrics.throughput;return Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(v.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(b.jsx)(Y.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"eventsEmittedRate"},Et(s,"0.[0]a",i.metric.units)))}},{name:B.i18n.translate("xpack.monitoring.logstash.pipelines.numberOfNodesTitle",{defaultMessage:"Number of Nodes"}),field:"latestNodesCount",sortable:!0,render:(s,a)=>{const i=a.metrics.nodesCount;return Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(v.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(b.jsx)(Y.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"nodeCount"},Et(s,"0a")))}}]}renderStats(){if(this.props.statusComponent){const e=this.props.statusComponent;return Object(b.jsx)(e,{stats:this.props.stats})}return Object(b.jsx)(br,{stats:this.props.stats})}render(){const{data:e,sorting:t,pagination:s,onTableChange:a,upgradeMessage:i,className:n,...r}=this.props,o=t||{field:"id",direction:"asc"};"name"===o.field&&(o.field="id");const l=this.getColumns();return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipline_listing.heading",defaultMessage:"Logstash pipelines"}))),Object(b.jsx)(Y.EuiPanel,null,this.renderStats()),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Nt,d()({className:n||"logstashNodesTable",rows:e,columns:l,sorting:o,message:i,pagination:s,search:{box:{placeholder:B.i18n.translate("xpack.monitoring.logstash.filterPipelinesPlaceholder",{defaultMessage:"Filter Pipelines"})}},onTableChange:a},r)))))}}const Mr=({clusters:e})=>{var t;const s=Object(n.useContext)(D),a=Object(c.useRouteMatch)(),{services:r}=Object(i.useKibana)(),o=s.cluster_uuid,l=s.ccs,{onBrush:u,zoomInfo:m}=Sa(),g=Object(v.find)(e,{cluster_uuid:o}),{generate:p}=q(),{getPaginationTableProps:j,getPaginationRouteOptions:x,updateTotalItemCount:h}=Ba("logstash.pipelines"),[f,O]=Object(n.useState)({}),E=B.i18n.translate("xpack.monitoring.logstash.node.pipelines.routeTitle",{defaultMessage:"Logstash - {nodeName} - Pipelines",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),M=B.i18n.translate("xpack.monitoring.logstash.node.pipelines.pageTitle",{defaultMessage:"Logstash node pipelines: {nodeName}",values:{nodeName:f.nodeSummary?f.nodeSummary.name:""}}),y=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${o}/logstash/node/${a.params.uuid}/pipelines`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:l,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...x()})}));O(n),h(n.totalPipelineCount)}),[l,o,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,x,h,a.params.uuid]);return Object(n.useEffect)((()=>{g&&f.nodeSummary&&p(g.cluster_name,{inLogstash:!0,instance:f.nodeSummary.host,name:"nodes"})}),[g,f,p]),Object(b.jsx)(mr,{instance:f,title:E,pageTitle:M,getPageData:y,cluster:g},f.pipelines&&Object(b.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},Object(b.jsx)(pipeline_listing_PipelineListing,d()({className:"monitoringLogstashPipelinesTable",onBrush:u,zoomInfo:m,stats:f.nodeSummary,data:f.pipelines,statusComponent:gr},j(),{upgradeMessage:(k=f.nodeSummary.version,!Array.isArray(k)||0===k.length||k.some(Or)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher.")}))));var k};class overview_overview_Overview extends n.PureComponent{render(){const{stats:e,metrics:t,...s}=this.props,a=[t.logstash_cluster_events_input_rate,t.logstash_cluster_events_output_rate,t.logstash_cluster_events_latency];return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.overview.heading",defaultMessage:"Logstash Overview"}))),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(br,{stats:e})),Object(b.jsx)(Y.EuiSpacer,{size:"m"}),Object(b.jsx)(Y.EuiPanel,null,Object(b.jsx)(Y.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(b.jsx)(Y.EuiFlexItem,{key:t},Object(b.jsx)(ds,d()({series:e},s)),Object(b.jsx)(Y.EuiSpacer,null))))))))}}const yr=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{zoomInfo:a,onBrush:r}=Sa(),{services:o}=Object(i.useKibana)(),l=s.cluster_uuid,c=s.ccs,u=Object(v.find)(e,{cluster_uuid:l}),{generate:d}=q(),[m,g]=Object(n.useState)(null),p=B.i18n.translate("xpack.monitoring.logstash.overview.title",{defaultMessage:"Logstash"}),j=B.i18n.translate("xpack.monitoring.logstash.overview.pageTitle",{defaultMessage:"Logstash overview"}),x=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=o.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash`,i=await(null===(t=o.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=o.data)||void 0===t?void 0:t.query.timefilter.timefilter,o.http]);return Object(n.useEffect)((()=>{u&&d(u.cluster_name,{inLogstash:!0})}),[u,m,d]),Object(b.jsx)(mr,{title:p,pageTitle:j,getPageData:x,cluster:u},Object(b.jsx)("div",{"data-test-subj":"logstashOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,logs:i}=e||{};return Object(b.jsx)(overview_overview_Overview,{stats:t,metrics:s,logs:i,onBrush:r,zoomInfo:a})})(m)))};function kr(e,t=0,s=null){const a=[];return e.forEach((e=>{a.push(...e.toList(t,s))})),a}class list_List{constructor(e,t,s,a){this.inputs=e,this.filters=t,this.outputs=s,this.queue=a}static fromPipeline(e){const{inputStatements:t,filterStatements:s,outputStatements:a,queue:i}=e;return new list_List(kr(t),kr(s),kr(a),i)}}function Sr({vertex:e,onHide:t,timeseriesTooltipXValueFormatter:s}){return Object(b.jsx)(Y.EuiFlyout,{size:"s",onClose:t},Object(b.jsx)(Y.EuiFlyoutHeader,null,Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},function(e){return Object(b.jsx)(Y.EuiIcon,{type:e.iconType,className:"lspvDetailDrawerIcon"})}(e)),Object(b.jsx)(Y.EuiFlexItem,null,Object(b.jsx)(Y.EuiTitle,null,Object(b.jsx)("h2",null,function(e){switch(e.typeString){case"plugin":return`${e.title} ${e.pluginType}`;case"if":case"queue":return e.title}}(e)))))),Object(b.jsx)(Y.EuiFlyoutBody,null,Object(b.jsx)(Y.EuiText,null,function(e){switch(e.typeString){case"plugin":return function(e){return e.hasExplicitId?Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.vertexIdDescription",defaultMessage:"This {vertexType}'s ID is {vertexId}.",values:{vertexType:e.typeString,vertexId:Object(b.jsx)(Y.EuiBadge,null,e.id)}})):Object(b.jsx)("div",null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.specifyVertexIdDescription",defaultMessage:"This {vertexType} does not have an ID explicitly specified. Specifying an ID allows you to track differences across pipeline changes. You can explicitly specify an ID for this plugin like so:",values:{vertexType:e.typeString}})),Object(b.jsx)(Y.EuiCodeBlock,null,e.name," ",'{\n  id => "mySpecialId"\n}'),Object(b.jsx)(Y.EuiSpacer,null))}(e);case"if":return function(e){const t=`if (${e.subtitle}) {\n  ...\n}`;return Object(b.jsx)("div",null,Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.conditionalStatementDescription",defaultMessage:"This is a conditional statement in your pipeline."})),Object(b.jsx)(Y.EuiCodeBlock,null,t),Object(b.jsx)(Y.EuiSpacer,null))}(e);case"queue":return Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.structureDescription",defaultMessage:"This is an internal structure used by Logstash to buffer events between inputs and the rest of the pipeline."}))}}(e),function(e,t){switch(e.typeString){case"plugin":return function(e,t){const s=e=>Et(e,"0.[00]a","ms/e"),a=Array.isArray(e.stats.millis_per_event.data)&&e.stats.millis_per_event.data.length>0?Object(v.last)(e.stats.millis_per_event.data)[1]:null,i="input"===e.pluginType?null:Object(b.jsx)(Y.EuiTableRow,{key:"events_latency"},Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsLatencyLabel",defaultMessage:"Events Latency"})),Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(b.jsx)(sparkline_Sparkline,{series:e.stats.millis_per_event.data,options:{xaxis:e.stats.millis_per_event.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:s}}))),Object(b.jsx)(Y.EuiTableRowCell,null,s(a))),n=e=>Et(e,"0.[0]a","e/s"),r=Object(b.jsx)(Y.EuiTableRow,{key:"events_out_rate"},Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedRateLabel",defaultMessage:"Events Emitted Rate"})),Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(b.jsx)(sparkline_Sparkline,{series:e.eventsPerSecond.data,options:{xaxis:e.eventsPerSecond.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:n}}))),Object(b.jsx)(Y.EuiTableRowCell,null,n(e.latestEventsPerSecond))),o=e=>Et(e,"0a","events"),l=Array.isArray(e.stats.events_in.data)&&e.stats.events_in.data.length>0?Object(v.last)(e.stats.events_in.data)[1]:null,c="input"===e.pluginType?null:Object(b.jsx)(Y.EuiTableRow,{key:"events_in"},Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(b.jsx)(sparkline_Sparkline,{series:e.stats.events_in.data,options:{xaxis:e.stats.events_in.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:o}}))),Object(b.jsx)(Y.EuiTableRowCell,null,o(l))),u=o,d=Array.isArray(e.stats.events_out.data)&&e.stats.events_out.data.length>0?Object(v.last)(e.stats.events_out.data)[1]:null,m=Object(b.jsx)(Y.EuiTableRow,{key:"events_out"},Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(b.jsx)(Y.EuiTableRowCell,null,Object(b.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(b.jsx)(sparkline_Sparkline,{series:e.stats.events_out.data,options:{xaxis:e.stats.events_out.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:u}}))),Object(b.jsx)(Y.EuiTableRowCell,null,u(d)));return Object(b.jsx)(Y.EuiTable,null,Object(b.jsx)(Y.EuiTableBody,null,i,r,c,m))}(e,t);case"if":return Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForIfDescription",defaultMessage:"There are currently no metrics to show for this if condition."}));case"queue":return Object(b.jsx)("p",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForQueueDescription",defaultMessage:"There are currently no metrics to show for the queue."}))}}(e,s))))}function _r({iconType:e,title:t}){return Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"baseline"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiIcon,{type:e})),Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiTitle,{size:"s"},Object(b.jsx)("h2",null,t))))}function Tr(){return Object(b.jsx)("div",null,Object(b.jsx)(_r,{iconType:"logstashQueue",title:"Queue"}),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(Y.EuiText,{className:"monPipelineViewer__queueMessage"},Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.queue.noMetricsDescription",defaultMessage:"Queue metrics not available"})))}s(114),s(119);class Statement{constructor(e){const{id:t,hasExplicitId:s,stats:a,meta:i}=e;this.id=t,this.hasExplicitId=s,this.stats=a,this.meta=i,this.vertex=e}}class Element{constructor(e,t,s,a){this.id=e,this.statement=t,this.depth=s,this.parentId=a}}class plugin_element_PluginElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}class plugin_statement_PluginStatement extends Statement{constructor(e){super(e);const{pluginType:t,name:s}=e;this.pluginType=t,this.name=s}toList(e,t){return[new plugin_element_PluginElement(this,e,t)]}static fromPipelineGraphVertex(e){return new plugin_statement_PluginStatement(e)}}function wr(e){return e?"arrowRight":"arrowDown"}function Cr(e){const{collapse:t,expand:s,id:a,isCollapsed:i}=e;return Object(b.jsx)(Y.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center",className:"monPipelineViewer__collapsibleStatement"},Object(b.jsx)(Y.EuiFlexItem,{key:a,grow:!1},Object(b.jsx)(Y.EuiButtonIcon,{"aria-label":"collapse",color:"text",iconType:wr(i),onClick:()=>{i?s(a):t(a)},size:"s"})),e.children)}s(124);class if_element_IfElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}var Ir=s(36),Lr=s.n(Ir);function Fr({className:e,warning:t,value:s}){const a=Lr()("monPipelineViewer__metric",e);let i;return i=t?Object(b.jsx)(Y.EuiBadge,{color:"warning",className:e},s):Object(b.jsx)(Y.EuiText,{size:"s",color:"subdued",className:a},Object(b.jsx)("span",null,s)),Object(b.jsx)(Y.EuiFlexItem,{className:"monPipelineViewer__metricFlexItem",grow:!1},i)}function Pr({statement:{hasExplicitId:e,id:t,name:s,pluginType:a,vertex:i},onShowVertexDetails:n}){const r=function(e,t){return"input"===e?function({latestEventsPerSecond:e}){return[Object(b.jsx)(Fr,{key:"eventsEmitted",className:"monPipelineViewer__metric--eventsEmitted",value:Et(e,"0.[00]a","e/s emitted")})]}(t):function(e){const{latestMillisPerEvent:t,latestEventsPerSecond:s,percentOfTotalProcessorTime:a}=e;return[Object(b.jsx)(Fr,{key:"cpuMetric",className:"monPipelineViewer__metric--cpuTime",warning:e.isTimeConsuming(),value:Et(Math.round(a||0),"0","%",{prependSpace:!1})}),Object(b.jsx)(Fr,{key:"eventMillis",className:"monPipelineViewer__metric--eventMillis",warning:e.isSlow(),value:Et(t,"0.[00]a","ms/e")}),Object(b.jsx)(Fr,{key:"eventsReceived",className:"monPipelineViewer__metric--events",value:Et(s,"0.[00]a","e/s received")})]}(t)}(a,i),o=()=>{n(i)};return Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",className:"monPipelineViewer__pluginStatement",gutterSize:"none",justifyContent:"spaceBetween"},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiButtonEmpty,{"aria-label":s,className:"monPipelineViewer__plugin",color:"primary",flush:"left",iconType:"dot",onClick:o,size:"xs"},Object(b.jsx)("span",null,s))),e&&Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiBadge,{onClick:o,onClickAriaLabel:B.i18n.translate("xpack.monitoring.logstash.pipelineStatement.viewDetailsAriaLabel",{defaultMessage:"View details"})},t)))),r&&Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiFlexGroup,{gutterSize:"s"},r)))}function Nr(e,t){return Object(b.jsx)(Y.EuiFlexItem,{grow:!1,key:"statementName"},Object(b.jsx)(Y.EuiButtonEmpty,{"aria-label":e,color:"text",size:"xs",onClick:t,flush:"left"},Object(b.jsx)("span",{className:"monPipelineViewer__conditional"},e)))}function Dr(e){const{depth:t}=e.element;return Object(b.jsx)("li",{className:"monPipelineViewer__listItem"},Object(b.jsx)("div",{className:"monPipelineViewer__spaceContainer"},function(e){const t=[];for(let s=0;s<e;s+=1)t.push(Object(b.jsx)("div",{key:`spacer_${s}`,className:"monPipelineViewer__spacer"}));return t}(t)),function({collapse:e,element:t,element:{id:s,statement:a,statement:{vertex:i}},expand:n,isCollapsed:r,onShowVertexDetails:o}){if(a instanceof plugin_statement_PluginStatement)return Object(b.jsx)(Pr,{statement:a,onShowVertexDetails:o});const l=function(e,t,s,a){const i=()=>{a(s)};return e?function({condition:e},t){return[Nr("if",t),Object(b.jsx)(Y.EuiFlexItem,{key:"ifContent",grow:!1},Object(b.jsx)(Y.EuiCodeBlock,{fontSize:"s",paddingSize:"none",transparentBackground:!0},e))]}(t,i):Nr("else",i)}(t instanceof if_element_IfElement,a,i,o);return Object(b.jsx)(Cr,{expand:n,collapse:e,isCollapsed:r,id:s},l)}(e))}s(129),s(134),s(139);class statement_list_StatementList extends r.a.PureComponent{constructor(e){super(e),I()(this,"expand",(e=>{const t=new Set(this.state.collapsedIds);t.delete(e),this.updateCollapsedElement(t)})),I()(this,"collapse",(e=>{const t=new Set(this.state.collapsedIds);t.add(e),this.updateCollapsedElement(t)})),I()(this,"updateCollapsedElement",(e=>{const{elements:t}=this.props,s=function(e,t){const s=new Set;return e.forEach((({id:e,parentId:a})=>{(t.has(a)||s.has(a))&&s.add(e)})),s}(t,e);this.setState({collapsedIds:e,collapsedChildIds:s})})),I()(this,"elementIsCollapsed",(e=>this.state.collapsedIds.has(e))),I()(this,"renderStatement",(e=>{const{id:t,parentId:s}=e,{onShowVertexDetails:a}=this.props;return this.state.collapsedIds.has(s)||this.state.collapsedChildIds.has(s)?null:Object(b.jsx)(Dr,{key:t,element:e,collapse:this.collapse,expand:this.expand,isCollapsed:this.elementIsCollapsed(t),onShowVertexDetails:a})})),this.state={collapsedIds:new Set,collapsedChildIds:new Set}}render(){const{elements:e}=this.props;return Object(b.jsx)("ul",{className:"monPipelineViewer__list"},e.map(this.renderStatement))}}function Rr({iconType:e,headingText:t,elements:s,onShowVertexDetails:a}){return s.length?Object(b.jsx)("div",{"data-test-subj":`pipelineViewerSection_${t}`},Object(b.jsx)(_r,{iconType:e,title:t}),Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(statement_list_StatementList,{elements:s,onShowVertexDetails:a})):null}class pipeline_viewer_PipelineViewer extends r.a.Component{constructor(){super(),I()(this,"renderDetailDrawer",(()=>this.props.detailVertex?Object(b.jsx)(Sr,{vertex:this.props.detailVertex,onHide:()=>this.props.setDetailVertexId(void 0),timeseriesTooltipXValueFormatter:this.props.timeseriesTooltipXValueFormatter}):null)),this.state={detailDrawer:{vertex:null}}}render(){const{inputs:e,filters:t,outputs:s,queue:a}=this.props.pipeline;return Object(b.jsx)(Y.EuiPage,null,Object(b.jsx)(Y.EuiPageBody,null,Object(b.jsx)(Y.EuiScreenReaderOnly,null,Object(b.jsx)("h1",null,Object(b.jsx)(J.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline_viewer.heading",defaultMessage:"Logstash pipelines"}))),Object(b.jsx)(Y.EuiPageSection,{alignment:"center",className:"monPipelineViewer"},Object(b.jsx)(Rr,{iconType:"logstashInput",headingText:B.i18n.translate("xpack.monitoring.logstash.pipelineViewer.inputsTitle",{defaultMessage:"Inputs"}),elements:e,onShowVertexDetails:this.props.setDetailVertexId}),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Tr,{queue:a}),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Rr,{iconType:"logstashFilter",headingText:B.i18n.translate("xpack.monitoring.logstash.pipelineViewer.filtersTitle",{defaultMessage:"Filters"}),elements:t,onShowVertexDetails:this.props.setDetailVertexId}),Object(b.jsx)(Y.EuiSpacer,null),Object(b.jsx)(Rr,{iconType:"logstashOutput",headingText:B.i18n.translate("xpack.monitoring.logstash.pipelineViewer.outputsTitle",{defaultMessage:"Outputs"}),elements:s,onShowVertexDetails:this.props.setDetailVertexId}),this.renderDetailDrawer())))}}function Ar(e,t){return e&&e.pipelineStage===t}class else_element_ElseElement extends Element{constructor(e,t,s){const{id:a}=e;super(`${a}_else`,e,t,s)}}function zr(e,t,s,a){e.forEach((e=>{let i=e;for(;Ar(i,a)&&i!==s;)t.push(Vr(i,a)),i=i.next}))}function Br(e,t,s,a){t.forEach((t=>{e.push(...t.toList(s,a))}))}class if_statement_IfStatement extends Statement{constructor(e,t,s){super(e);const{name:a}=e;this.condition=a,this.trueStatements=t,this.elseStatements=s}toList(e,t){const s=[],a=new if_element_IfElement(this,e,t);s.push(a);const i=e+1;if(Br(s,this.trueStatements,i,a.id),this.elseStatements.length){const a=new else_element_ElseElement(this,e,t);s.push(a),Br(s,this.elseStatements,i,a.id)}return s}static fromPipelineGraphVertex(e,t){const s=[],a=[],{trueOutgoingVertices:i,falseOutgoingVertices:n}=e,r=e.next;return zr(i,s,r,t),zr(n,a,r,t),new if_statement_IfStatement(e,s,a)}}class pipeline_queue_Queue extends Statement{static fromPipelineGraphVertex(e){return new pipeline_queue_Queue(e)}}function Vr(e,t){switch(e.typeString){case"plugin":return plugin_statement_PluginStatement.fromPipelineGraphVertex(e,t);case"if":return if_statement_IfStatement.fromPipelineGraphVertex(e,t);case"queue":return pipeline_queue_Queue.fromPipelineGraphVertex(e,t);default:throw new Error(`Unknown vertex class: ${e.typeString}`)}}class Vertex{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get name(){return this.json.config_name}get id(){return this.json.id}get subtitle(){return this.id}get incomingEdges(){return this.graph.edgesByTo[this.json.id]||[]}get incomingVertices(){return this.incomingEdges.map((e=>e.from))}get outgoingEdges(){return this.graph.edgesByFrom[this.json.id]||[]}get outgoingVertices(){return this.outgoingEdges.map((e=>e.to))}get meta(){return this.json.meta}get stats(){return this.json.stats||{}}descendants(){const e=[],t=[],s=[this],a={};for(;s.length>0;)s.pop().outgoingEdges.forEach((i=>{t.push(i);const n=i.to;!0!==a[n.id]&&(e.push(n),a[n.id]=!0,s.push(n))}));return{vertices:e,edges:t}}get hasExplicitId(){return Boolean(this.json.explicit_id)}}class queue_vertex_QueueVertex extends Vertex{get typeString(){return"queue"}get title(){return"queue"}get iconType(){return"logstashQueue"}get next(){return this.outgoingVertices}}class Pipeline{constructor(e,t,s,a){this.inputStatements=e,this.filterStatements=t,this.outputStatements=s,this.queue=a}static fromPipelineGraph(e){const t=function(e){return e.getVertices().filter((e=>"input"===e.pipelineStage)).map(Vr)}(e),s=function(e){const t=e.getVertices().filter((e=>"filter"===e.pipelineStage)),s=e.hasQueueVertex?t.find((e=>e.incomingVertices.every((e=>e instanceof queue_vertex_QueueVertex)))):t.find((e=>0===e.incomingVertices.length));if(!s)return[];const a=[];let i=s;for(;Ar(i,"filter");)a.push(Vr(i,"filter")),i=i.next;return a}(e),a=function(e){return e.getVertices().filter((e=>"output"===e.pipelineStage&&!e.incomingVertices.some((e=>"output"===e.pipelineStage)))).map((e=>Vr(e,"output")))}(e),i=function(e){return e.hasQueueVertex?Vr(e.queueVertex):null}(e);return new Pipeline(t,s,a,i)}}class plugin_vertex_PluginVertex extends Vertex{get typeString(){return"plugin"}get name(){return this.json.config_name}get title(){return this.name}get pluginType(){return this.json.plugin_type}get isInput(){return"input"===this.pluginType}get isFilter(){return"filter"===this.pluginType}get isOutput(){return"output"===this.pluginType}get isProcessor(){return this.isFilter||this.isOutput}get latestMillisPerEvent(){return Object(v.get)(this.stats,"millis_per_event")}get percentOfTotalProcessorTime(){return Object(v.get)(this.stats,"percent_of_total_processor_duration")}get eventsPerMillisecond(){return this.isInput?this.stats.events_out_per_millisecond:this.stats.events_in_per_millisecond}get eventsPerSecond(){if(!this.eventsPerMillisecond.hasOwnProperty("data"))return 1e3*this.eventsPerMillisecond;const e={...this.eventsPerMillisecond};return e.data=this.eventsPerMillisecond.data.map((([e,t])=>[e,1e3*t])),e}get latestEventsPerSecond(){if(!this.eventsPerSecond.hasOwnProperty("data"))return this.eventsPerSecond;const e=this.eventsPerSecond.data.length;return this.eventsPerSecond.data[e-1][1]}isTimeConsuming(){const e=1/this.graph.processorVertices.length*2;return this.percentOfTotalProcessorTime>e}isSlow(){const e=this.graph.processorVertices.length;if(0===e)return 0;const t=this.graph.processorVertices.reduce(((e,t)=>e+t.latestMillisPerEvent||0),0)/e,s=this.graph.processorVertices.reduce(((e,s)=>{const a=(s.latestMillisPerEvent||0)-t;return e+a*a}),0)/e,a=Math.sqrt(s);return(this.latestMillisPerEvent-t)/a>2}get iconType(){switch(this.pluginType){case"input":return"logstashInput";case"filter":return"logstashFilter";case"output":return"logstashOutput";default:throw new Error(`Unknown plugin type ${this.pluginType}! This shouldn't happen!`)}}get next(){return(this.outgoingEdges[0]||{}).to}}class if_vertex_IfVertex extends Vertex{get typeString(){return"if"}get name(){return this.json.condition}get iconType(){return"logstashIf"}get title(){return"if"}get subtitle(){return this.name}get trueEdge(){return this.outgoingEdges.find((e=>!0===e.when))}get trueEdges(){return this.outgoingEdges.filter((e=>!0===e.when))}get falseEdge(){return this.outgoingEdges.find((e=>!1===e.when))}get falseEdges(){return this.outgoingEdges.filter((e=>!1===e.when))}get trueOutgoingVertex(){return this.trueEdge?this.trueEdge.to:null}get trueOutgoingVertices(){return this.trueEdges.map((e=>e.to))}get falseOutgoingVertex(){return this.falseEdge?this.falseEdge.to:null}get falseOutgoingVertices(){return this.falseEdges.map((e=>e.to))}get next(){const e=this.trueOutgoingVertex?this.trueOutgoingVertex.descendants().vertices:[],t=this.falseOutgoingVertex?this.falseOutgoingVertex.descendants().vertices:[];return e.unshift(this.trueOutgoingVertex),t.unshift(this.falseOutgoingVertex),Object(v.intersection)(e,t)[0]}}function Ur(e,t){const s=t.type;switch(s){case"plugin":return new plugin_vertex_PluginVertex(e,t);case"if":return new if_vertex_IfVertex(e,t);case"queue":return new queue_vertex_QueueVertex(e,t);default:throw new Error(`Unknown vertex type ${s}! This shouldn't happen!`)}}class Edge{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get id(){return this.json.id}get from(){return this.graph.verticesById[this.fromId]}get fromId(){return this.json.from}get to(){return this.graph.verticesById[this.toId]}get toId(){return this.json.to}}class boolean_edge_BooleanEdge extends Edge{get when(){return this.json.when}get isTrue(){return!0===this.when}get isFalse(){return!1===this.when}}class graph_Graph{constructor(){this.json=null,this.verticesById={},this.edgesById={},this.edgesByFrom={},this.edgesByTo={}}getVertexById(e){return this.verticesById[e]}getVertices(){return void 0===this.vertexCache&&(this.vertexCache=Object.values(this.verticesById)),this.vertexCache}get queueVertex(){return this.getVertices().find((e=>e instanceof queue_vertex_QueueVertex))}get processorVertices(){return this.getVertices().filter((e=>e.isProcessor))}get edges(){return Object.values(this.edgesById)}update(e){this.json=e,e.vertices.forEach((e=>{const t=this.verticesById[e.id];if(void 0!==t)t.update(e);else{const t=Ur(this,e);this.verticesById[e.id]=t}})),e.edges.forEach((e=>{const t=this.edgesById[e.id];if(void 0!==t)t.update(e);else{const t=function(e,t){const s=t.type;switch(s){case"plain":return new Edge(e,t);case"boolean":return new boolean_edge_BooleanEdge(e,t);default:throw new Error(`Unknown edge type ${s}! This shouldn't happen!`)}}(this,e);this.edgesById[e.id]=t,void 0===this.edgesByFrom[t.from.json.id]&&(this.edgesByFrom[t.from.json.id]=[]),this.edgesByFrom[t.from.json.id].push(t),void 0===this.edgesByTo[t.to.json.id]&&(this.edgesByTo[t.to.json.id]=[]),this.edgesByTo[t.to.json.id].push(t)}})),this.annotateVerticesWithStages()}get startVertices(){return this.getVertices().filter((e=>0===e.incomingEdges.length))}get endVertices(){return this.getVertices().filter((e=>0===e.outgoingEdges.length))}get hasQueueVertex(){return!!this.queueVertex}annotateVerticesWithStages(){this.annotateInputStageVertices(),this.annotateOutputStageVertices(),this.annotateFilterStageVertices()}annotateInputStageVertices(){this.hasQueueVertex&&this.startVertices.forEach((e=>e.pipelineStage="input"))}annotateOutputStageVertices(){if(1===this.endVertices.length&&this.endVertices[0]instanceof queue_vertex_QueueVertex)return;if(this.endVertices.every((e=>"filter"===e.pluginType)))return;const e=[...this.endVertices];for(;e.length>0;){const t=e.shift(),s=t.incomingVertices,a=s.some((e=>e instanceof plugin_vertex_PluginVertex&&"filter"===e.pluginType)),i=s.some((e=>e instanceof queue_vertex_QueueVertex)),n=0===s.length;a||i||n?(t.pipelineStage="output",t.descendants().vertices.forEach((e=>e.pipelineStage="output"))):e.push(...s)}}annotateFilterStageVertices(){const e=[];for(this.hasQueueVertex?e.push(...this.queueVertex.outgoingVertices):e.push(...this.startVertices);e.length>0;){const t=e.shift();t.pipelineStage||(t.pipelineStage="filter",e.push(...t.outgoingVertices))}}}class config_Config{constructor(){this.graph=new graph_Graph}update(e){this.json=e,this.graph.update(e.graph)}}class pipeline_state_PipelineState{constructor(e){this.config=new config_Config,this.update(e)}update(e){this.config.update(e.representation)}}const $r=e=>{const{pipelineHash:t,pipelineVersions:s,onChangePipelineHash:a}=e;return Object(b.jsx)(Y.EuiFlexGroup,null,Object(b.jsx)(Y.EuiFlexItem,{grow:!1},Object(b.jsx)(Y.EuiSelect,{value:t,options:s.map((e=>({text:B.i18n.translate("xpack.monitoring.logstashNavigation.pipelineVersionDescription",{defaultMessage:"Version active {relativeLastSeen} and first seen {relativeFirstSeen}",values:{relativeLastSeen:e.relativeLastSeen,relativeFirstSeen:e.relativeFirstSeen}}),value:e.hash}))),onChange:({target:e})=>a(e.value)})))},Gr=({clusters:e})=>{var t;const s=Object(c.useRouteMatch)(),{hash:a,id:r}=s.params,o=Object(n.useContext)(D),{services:l}=Object(i.useKibana)(),u=o.cluster_uuid,{minIntervalSeconds:d}=Object(n.useContext)(_),m=Object(i.useUiSetting)("dateFormat"),[g,p]=Object(n.useState)(null),j=o.ccs,x=Object(v.find)(e,{cluster_uuid:u}),[h,f]=Object(n.useState)({}),[O,E]=Object(n.useState)(void 0),{updateTotalItemCount:M}=Ba("logstash.pipelines"),y=B.i18n.translate("xpack.monitoring.logstash.pipeline.routeTitle",{defaultMessage:"Logstash - Pipeline"}),k=B.i18n.translate("xpack.monitoring.logstash.pipeline.pageTitle",{defaultMessage:"Logstash pipeline: {pipeline}",values:{pipeline:h.pipeline?h.pipeline.id:""}}),T=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=a?`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${r}/${a}`:`../api/monitoring/v1/clusters/${u}/logstash/pipeline/${r}`,n=await(null===(t=l.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:j,detailVertexId:O||void 0,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})})),o=n;o.versions=o.versions.map((e=>{const t=Ge(e.firstSeen,S.c),s=Ge(e.lastSeen,S.c),a=2*d,i=Date.now()-e.lastSeen<=1e3*a;return{...e,relativeFirstSeen:B.i18n.translate("xpack.monitoring.logstash.pipeline.relativeFirstSeenAgoLabel",{defaultMessage:"{relativeFirstSeen} ago",values:{relativeFirstSeen:t}}),relativeLastSeen:i?B.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenNowLabel",{defaultMessage:"now"}):B.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenAgoLabel",{defaultMessage:"until {relativeLastSeen} ago",values:{relativeLastSeen:s}})}})),f(o),M(n.totalNodeCount)}),[j,u,l.http,M,O,d,a,r,null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter]);Object(n.useEffect)((()=>{h.pipeline&&p(new pipeline_state_PipelineState(h.pipeline))}),[h]);const{generate:w}=q(),C=Object(n.useCallback)((e=>{E(e?e.id:null)}),[]);Object(n.useEffect)((()=>{void 0!==O&&T()}),[O,T]);const I=Object(n.useCallback)((e=>{window.location.hash=Te(`#/logstash/pipelines/${r}/${e}`)}),[r]);return Object(n.useEffect)((()=>{x&&w(x.cluster_name,{inLogstash:!0,page:"pipeline"})}),[x,h,w]),Object(b.jsx)(mr,{tabsDisabled:!0,title:y,pageTitle:k,getPageData:T,cluster:x},Object(b.jsx)("div",null,Object(b.jsx)($r,{pipelineVersions:h.versions,onChangePipelineHash:I,pipelineHash:a})),g&&Object(b.jsx)("div",null,Object(b.jsx)(Y.EuiSpacer,{size:"s"}),Object(b.jsx)(pipeline_viewer_PipelineViewer,{pipeline:list_List.fromPipeline(Pipeline.fromPipelineGraph(g.config.graph)),timeseriesTooltipXValueFormatter:e=>$e()(e).format(m),setDetailVertexId:C,detailVertex:h.vertex?Ur(null,h.vertex):null})))},qr=({clusters:e})=>{var t;const s=Object(n.useContext)(D),{onBrush:a}=Sa(),{services:r}=Object(i.useKibana)(),o=Object(i.useUiSetting)("dateFormat"),l=s.cluster_uuid,c=s.ccs,u=Object(v.find)(e,{cluster_uuid:l}),[m,g]=Object(n.useState)(null),{getPaginationTableProps:p,getPaginationRouteOptions:j,updateTotalItemCount:x}=Ba("logstash.pipelines"),h=B.i18n.translate("xpack.monitoring.logstash.pipelines.routeTitle",{defaultMessage:"Logstash Pipelines"}),f=B.i18n.translate("xpack.monitoring.logstash.pipelines.pageTitle",{defaultMessage:"Logstash pipelines"}),{generate:O}=q(),E=Object(n.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash/pipelines`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...j()})}));g(i),x(i.totalPipelineCount)}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,j,x]);return Object(n.useEffect)((()=>{u&&O(u.cluster_name,{inLogstash:!0})}),[u,m,O]),Object(b.jsx)(mr,{title:h,pageTitle:f,getPageData:E,cluster:u},Object(b.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},(e=>{if(null===e)return null;const{clusterStatus:t,pipelines:s}=e||{},i=e?(n=t.versions,!Array.isArray(n)||0===n.length||n.some(Or)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."):null;var n;return Object(b.jsx)(pipeline_listing_PipelineListing,d()({className:"monitoringLogstashPipelinesTable",onBrush:e=>a({xaxis:e}),stats:t,data:s},p(),{upgradeMessage:i,dateFormat:o}))})(m)))};class enabler_Enabler{constructor(e,t){I()(this,"http",void 0),I()(this,"updateModel",void 0),this.http=e,this.updateModel=t}async enableCollectionInterval(){try{this.updateModel({isCollectionIntervalUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_interval",{method:"PUT"}),this.updateModel({isCollectionIntervalUpdated:!0,isCollectionIntervalUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionIntervalUpdated:!1,isCollectionIntervalUpdating:!1})}}async enableCollectionEnabled(){try{this.updateModel({isCollectionEnabledUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_enabled",{method:"PUT"}),this.updateModel({isCollectionEnabledUpdated:!0,isCollectionEnabledUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionEnabledUpdated:!1,isCollectionEnabledUpdating:!1})}}}const Hr=[S.n],Wr=[{message:B.i18n.translate("xpack.monitoring.noData.checker.clusterSettings",{defaultMessage:"Checking cluster settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/cluster"},{message:B.i18n.translate("xpack.monitoring.noData.checker.nodesSettings",{defaultMessage:"Checking nodes settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/nodes"}],Kr=()=>{const e=B.i18n.translate("xpack.monitoring.noData.routeTitle",{defaultMessage:"Setup Monitoring"}),{services:t}=Object(i.useKibana)(),[s,a]=Object(n.useState)(!1),[r,o]=Object(n.useState)({errors:[],checkMessage:null,isLoading:!0,isCollectionEnabledUpdating:!1,isCollectionEnabledUpdated:!1,isCollectionIntervalUpdating:!1,isCollectionIntervalUpdated:!1}),{update:l}=q();l([{"data-test-subj":"breadcrumbClusters",text:"Clusters",href:"#/home",ignoreGlobalState:!0}]);const u=Object(n.useContext)(D),m=ja();me(u,t.http,m);const g=Object(n.useCallback)((e=>{o((t=>{const s={...t};return Object.keys(e).forEach((t=>{Array.isArray(s[t])?s[t].push(e[t]):s[t]=e[t]})),s}))}),[o]),p=Object(n.useCallback)((async()=>{let e;try{const e=await async function(e){var t,s;const a=null===(t=e.data)||void 0===t?void 0:t.query.timefilter.timefilter.getBounds(),i=a.min.toISOString(),n=a.max.toISOString();return function(e){return e.map(Yr)}(await(null===(s=e.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/clusters",{method:"POST",body:JSON.stringify({css:void 0,timeRange:{min:i,max:n},codePaths:Hr})})))}(t);if(e&&e.length)return void a(!0)}catch(t){t&&503===t.status&&(e={property:"custom",message:t.data.message})}e?g({reason:e}):await function(e,t,s){const a=async e=>{s({checkMessage:e.message});const{found:i,reason:n,error:r,errorReason:o}=await async function(e,t){try{const s=await t.fetch(e.api,{method:"GET"}),{found:a,reason:i}=s;return{found:a,reason:i}}catch(e){return{error:!0,found:!1,errorReason:e.body}}}(e,t);if(r){if(s({errors:o}),e.next)return a(e.next)}else{if(i)return s({reason:n,isLoading:!1,checkMessage:null});if(e.next)return a(e.next)}s({reason:null,isLoading:!1,checkMessage:null})},i=Jr(e);return a(i[0])}(Wr,t.http,g)}),[t,g]),j=new enabler_Enabler(t.http,g);return Object(b.jsx)(Ma,{title:e,getPageData:p},s?Object(b.jsx)(c.Redirect,{to:"/home"}):Object(b.jsx)(Ce,d()({},r,{enabler:j,isCloudEnabled:N.a.shims.isCloud})))},Jr=e=>e.map(((t,s)=>{const a=e[s+1];return void 0!==a&&(t.next=a),t}));function Yr(e){return e.cluster_uuid===S.Y&&(e.cluster_name="Standalone Cluster"),e}function Qr(e,t){return t.search=e.location.search,t}function Xr(e,t){return"string"==typeof e?{pathname:e,state:t}:e}const Zr=({path:e,component:t,codePaths:s,fetchAllClusters:a,unsetGlobalState:i=!1})=>{const r=Object(n.useContext)(D),o=a?null:r.cluster_uuid,l=Object(c.useLocation)(),{clusters:u,loaded:d}=lr(o,void 0,s),m=ge(void 0,r),g=function(e,t,s=!1){const a=(()=>{const s=Object(v.find)(e,{cluster_uuid:t.cluster_uuid});if(s)return s;const a=Object(v.first)(e);return a&&a.cluster_uuid?a:null})();return a&&a.license?(t.cluster_uuid=s?void 0:a.cluster_uuid,t.ccs=s?void 0:a.ccs,t.save&&t.save(),a):null}(u,r,i);if(d&&!g&&!m)return Object(b.jsx)(c.Redirect,{to:"/no-data"});if(d&&g){if("license"!==l.pathname&&"home"!==l.pathname&&eo(g.license))return Object(b.jsx)(c.Redirect,{to:"/license"});const e=g.isSupported||1===u.length;if("/home"!==l.pathname&&!e)return Object(b.jsx)(c.Redirect,{to:"/home"})}const p=t;return d?Object(b.jsx)(x,{path:e},Object(b.jsx)(p,{clusters:u})):Object(b.jsx)(ur,{staticLoadingState:!0})},eo=e=>{const{expiry_date_in_millis:t}=e;return void 0!==t&&(new Date).getTime()>=t},to=(e,t,{element:s,history:a,setHeaderActionMenu:i,theme$:n},r)=>{const o=a.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return l.a.render(Object(b.jsx)(so,{core:e,plugins:t,externalConfig:r,setHeaderActionMenu:i,theme$:n}),s),()=>{l.a.unmountComponentAtNode(s),o()}},so=({core:e,plugins:t,externalConfig:s,setHeaderActionMenu:r,theme$:o})=>{const l=function(){const e=Object(L.createHashHistory)({hashType:"slash"}),t=e.push,s=e.replace;return e.push=(s,a)=>t.apply(e,[Qr(e,Xr(s,a))]),e.replace=(t,a)=>s.apply(e,[Qr(e,Xr(t,a))]),e}(),u=Object(n.useMemo)((()=>e.uiSettings.get$("theme:darkMode")),[e.uiSettings]),d=k()(u,e.uiSettings.get("theme:darkMode"));return Object(b.jsx)(i.KibanaContextProvider,{services:{...e,...t}},Object(b.jsx)(a.EuiThemeProvider,{darkMode:d},Object(b.jsx)(i.KibanaThemeProvider,{theme$:e.theme.theme$},Object(b.jsx)(_.Provider,{value:s},Object(b.jsx)(A,{query:t.data.query,toasts:e.notifications.toasts,uiSettings:e.uiSettings},Object(b.jsx)(z.Provider,{value:{setHeaderActionMenu:r,theme$:o}},Object(b.jsx)(W,null,Object(b.jsx)(G,{history:l},Object(b.jsx)(O,{history:l},Object(b.jsx)(M,null,Object(b.jsx)(x,{path:"/access-denied",component:Z}),Object(b.jsx)(x,{path:"/no-data",component:Kr}),Object(b.jsx)(x,{path:"/loading",component:ur}),Object(b.jsx)(Zr,{path:"/license",component:rr,codePaths:["all"],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/home",component:$n,codePaths:["all"],fetchAllClusters:!0,unsetGlobalState:!0}),Object(b.jsx)(Zr,{path:"/overview",component:Yi,codePaths:["all"],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/ml_jobs",component:hn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/ccr/:index/shard/:shardId",component:on,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/ccr",component:an,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/indices/:index/advanced",component:dn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/indices/:index",component:jn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/indices",component:xn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/nodes/:node/advanced",component:En,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/nodes/:node",component:yn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch/nodes",component:On,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/elasticsearch",component:kn,codePaths:[S.k],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/kibana/instances/:instance",component:Kn,codePaths:[S.m],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/kibana/instances",component:sr,codePaths:[S.m],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/kibana",component:ir,codePaths:[S.m],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/beats/beat/:instance",component:ci,codePaths:[S.j],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/beats/beats",component:di,codePaths:[S.j],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/beats",component:bi,codePaths:[S.j],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/nodes",component:xr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/node/:uuid/advanced",component:pr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/node/:uuid/pipelines",component:Mr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/node/:uuid",component:jr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/pipelines/:id/:hash?",component:Gr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash/pipelines",component:qr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/logstash",component:yr,codePaths:[S.o],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/apm/instances/:instance",component:ri,codePaths:[S.i],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/apm/instances",component:si,codePaths:[S.i],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/apm",component:Da,codePaths:[S.i],fetchAllClusters:!1}),Object(b.jsx)(Zr,{path:"/enterprise_search",component:wn,codePaths:[S.l],fetchAllClusters:!1}),Object(b.jsx)(c.Redirect,{to:{pathname:"/loading",search:l.location.search}})))))))))))}}])]);