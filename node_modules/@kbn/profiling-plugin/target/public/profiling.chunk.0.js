/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.profiling_bundle_jsonpfunction=window.profiling_bundle_jsonpfunction||[]).push([[0],Array(35).concat([function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),i=n(43);function a(){const e=Object(r.useContext)(i.a);if(!e)throw new Error("ProfilingDependenciesContext not found");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(17),i=n(35),a=n(75);function o(){const e=Object(r.useHistory)(),{start:{core:t}}=Object(i.a)(),n=(...e)=>a.a.link(...e);return{...a.a,push:(...t)=>{const r=n(...t);e.push(r)},replace:(t,...r)=>{const i=n(t,...r);e.replace(i)},link:(e,...r)=>t.http.basePath.prepend("/app/profiling"+n(e,...r))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(46);function i(e,...t){return Object(r.h)(e,...t)}function a(...e){return Object(r.h)(...e)}},function(e,t,n){e.exports=n(9)(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var r=n(80),i=n(59);function a(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=a,t.parseJSON=function(e,t){return a((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return a((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fold=function(e,n){return function(r){return t.isLeft(r)?e(r.left):n(r.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(r){return e(r)?t.right(r):t.left(n(r))}))};var o=function(e,n){return i.pipe(e,t.map(n))},s=function(e,n){return i.pipe(e,t.ap(n))},u=function(e,n){return i.pipe(e,t.chain(n))},l=function(e,n,r){return i.pipe(e,t.reduce(n,r))},c=function(e){return function(n,r){var a=t.foldMap(e);return i.pipe(n,a(r))}},f=function(e,n,r){return i.pipe(e,t.reduceRight(n,r))},p=function(e){var n=t.traverse(e);return function(e,t){return i.pipe(e,n(t))}},d=function(e,n,r){return i.pipe(e,t.bimap(n,r))},h=function(e,n){return i.pipe(e,t.mapLeft(n))},g=function(e,n){return i.pipe(e,t.alt(n))},m=function(e,n){return i.pipe(e,t.extend(n))},b=function(e,n){return r.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function x(e){return{concat:function(n,r){return t.isLeft(n)?n:t.isLeft(r)?r:t.right(e.concat(n.right,r.right))}}}function y(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:o,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,r){return t.isLeft(e)||r(e.right)?e:n},filterMap:function(e,r){if(t.isLeft(e))return e;var i=r(e.right);return"None"===i._tag?n:t.right(i.value)},partition:function(e,r){return t.isLeft(e)?{left:e,right:e}:r(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,r){if(t.isLeft(e))return{left:e,right:e};var i=r(e.right);return t.isLeft(i)?{left:t.right(i.left),right:n}:{left:n,right:t.right(i.right)}}}}function v(e){return{URI:t.URI,_E:void 0,map:o,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.left,r.left)):n:t.isLeft(r)?r:t.right(n.right(r.right))},of:t.of}}function j(e){return{URI:t.URI,_E:void 0,map:o,alt:function(n,r){if(t.isRight(n))return n;var i=r();return t.isLeft(i)?t.left(e.concat(n.left,i.left)):i}}}function O(e,n){return{concat:function(r,i){return t.isLeft(r)?t.isLeft(i)?t.left(e.concat(r.left,i.left)):r:t.isLeft(i)?i:t.right(n.concat(r.right,i.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(r){return t.isLeft(r)?t.left(e(r.left)):t.right(n(r.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return i.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return i.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return i.pipe(n,t.chainW((function(n){return i.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(i.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(i.identity),t.reduce=function(e,n){return function(r){return t.isLeft(r)?e:n(e,r.right)}},t.foldMap=function(e){return function(n){return function(r){return t.isLeft(r)?e.empty:n(r.right)}}},t.reduceRight=function(e,n){return function(r){return t.isLeft(r)?e:n(r.right,e)}},t.traverse=function(e){return function(n){return function(r){return t.isLeft(r)?e.of(t.left(r.left)):e.map(n(r.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(r){return t.isLeft(r)?"left("+e.show(r.left)+")":"right("+n.show(r.right)+")"}}},t.getEq=function(e,n){return{equals:function(r,i){return r===i||(t.isLeft(r)?t.isLeft(i)&&e.equals(r.left,i.left):t.isRight(i)&&n.equals(r.right,i.right))}}},t.getSemigroup=function(e){return{concat:function(n,r){return t.isLeft(r)?n:t.isLeft(n)?r:t.right(e.concat(n.right,r.right))}}},t.getApplySemigroup=x,t.getApplyMonoid=function(e){return{concat:x(e).concat,empty:t.right(e.empty)}},t.getFilterable=y,t.getWitherable=function(e){var n=y(e);return{URI:t.URI,_E:void 0,map:o,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:p,sequence:t.sequence,reduce:l,foldMap:c,reduceRight:f,wither:function(e){var t=p(e);return function(r,i){return e.map(t(r,i),n.compact)}},wilt:function(e){var t=p(e);return function(r,i){return e.map(t(r,i),n.separate)}}}},t.getApplicativeValidation=v,t.getAltValidation=j,t.getValidation=function(e){var n=v(e),r=j(e);return{URI:t.URI,_E:void 0,map:o,of:t.of,chain:u,bimap:d,mapLeft:h,reduce:l,foldMap:c,reduceRight:f,extend:m,traverse:p,sequence:t.sequence,chainRec:b,throwError:t.throwError,ap:n.ap,alt:r.alt}},t.getValidationSemigroup=O,t.Functor={URI:t.URI,map:o},t.Applicative={URI:t.URI,map:o,ap:s,of:t.of},t.Monad={URI:t.URI,map:o,ap:s,of:t.of,chain:u},t.Foldable={URI:t.URI,reduce:l,foldMap:c,reduceRight:f},t.Traversable={URI:t.URI,map:o,reduce:l,foldMap:c,reduceRight:f,traverse:p,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:d,mapLeft:h},t.Alt={URI:t.URI,map:o,alt:g},t.Extend={URI:t.URI,map:o,extend:m},t.ChainRec={URI:t.URI,map:o,ap:s,chain:u,chainRec:b},t.MonadThrow={URI:t.URI,map:o,ap:s,of:t.of,chain:u,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:O(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:o,of:t.of,ap:s,chain:u,reduce:l,foldMap:c,reduceRight:f,traverse:p,sequence:t.sequence,bimap:d,mapLeft:h,alt:g,extend:m,chainRec:b,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,r){return!t.isLeft(r)&&e.equals(n,r.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(i.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(r){return i.pipe(n(r),t.map((function(t){return i.bind_(r,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return i.flow(t.map((function(t){return function(n){return i.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(46);function i(){return Object(r.i)()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(15),i=n(2),a=n(13),o=n(17),s=n(35),u=n(61);var l=n(69),c=n(14);const f="https://ela.st/profiling-feedback";function p({children:e,tabs:t=[],hideSearchBar:n=!1,noDataConfig:p,restrictWidth:d=!1,pageTitle:h=i.i18n.translate("xpack.profiling.appPageTemplate.pageTitle",{defaultMessage:"Universal Profiling"}),showBetaBadge:g=!1}){const{start:{observabilityShared:m}}=Object(s.a)(),[b,x]=function(e,t){const[n,r]=Object(a.useState)(0),i=Object(a.useMemo)((()=>function(e,t){const n=window.localStorage.getItem(e);if(null!==n)try{return JSON.parse(n)}catch(t){window.localStorage.removeItem(e),console.log(`Unable to decode: ${e}`)}return t}(e,t)),[e,n,t]);return Object(a.useEffect)((()=>{function t(t){t.key===e&&r(n+1)}return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e,r,n]),[i,t=>{void 0===t?window.localStorage.removeItem(e):(window.localStorage.setItem(e,JSON.stringify(t)),r(n+1))}]}("profiling.privilegesWarningDismissed",!1),{profilingSetupStatus:y}=Object(l.a)(),{PageTemplate:v}=m.navigation,j=Object(o.useHistory)();return Object(a.useEffect)((()=>{window.scrollTo(0,0)}),[j.location.pathname]),Object(c.jsx)(v,{noDataConfig:p,pageHeader:{"data-test-subj":"profilingPageTemplate",rightSideItems:[Object(c.jsx)(r.EuiButton,{"data-test-subj":"profilingProfilingAppPageTemplateGiveFeedbackButton",href:f,target:"_blank",color:"warning",iconType:"editorComment"},i.i18n.translate("xpack.profiling.header.giveFeedbackLink",{defaultMessage:"Give feedback"}))],pageTitle:Object(c.jsx)(r.EuiFlexGroup,{gutterSize:"s",alignItems:"baseline"},Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)("h1",null,h)),g&&Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)(r.EuiBetaBadge,{label:"Beta",color:"hollow",tooltipContent:i.i18n.translate("xpack.profiling.header.betaBadgeTooltip",{defaultMessage:"This module is not GA. Please help us by reporting any bugs."})}))),tabs:t},restrictWidth:d,pageSectionProps:{contentProps:{style:{display:"flex",flexGrow:1}}}},Object(c.jsx)(r.EuiFlexGroup,{direction:"column",style:{maxWidth:"100%"}},!n&&Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)(r.EuiPanel,{hasShadow:!1,color:"subdued"},Object(c.jsx)(u.a,null),Object(c.jsx)(r.EuiHorizontalRule,null))),!0===(null==y?void 0:y.unauthorized)&&!0!==b?Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)(r.EuiCallOut,{iconType:"warning",title:i.i18n.translate("xpack.profiling.privilegesWarningTitle",{defaultMessage:"User privilege limitation"})},Object(c.jsx)("p",null,i.i18n.translate("xpack.profiling.privilegesWarningDescription",{defaultMessage:"Due to privileges issues we could not check the Universal Profiling status. If you encounter any issues or if data fails to load, please contact your administrator for assistance."})),Object(c.jsx)(r.EuiButton,{"data-test-subj":"profilingProfilingAppPageTemplateDismissButton",onClick:()=>{x(!0)}},i.i18n.translate("xpack.profiling.dismissPrivilegesCallout",{defaultMessage:"Dismiss"})))):null,Object(c.jsx)(r.EuiFlexItem,null,e)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(32),i=n(13),a=n(2),o=n(35),s=n(65);let u;!function(e){e.Loading="loading",e.Init="init",e.Settled="settled"}(u||(u={}));const l=(e,t)=>{const{start:{core:{notifications:n}}}=Object(o.a)(),[l,c]=Object(i.useState)(0),f=Object(i.useCallback)((()=>{c((e=>e+1))}),[]),[p,d]=Object(i.useState)({status:u.Init,refresh:f}),{data:h,error:g}=p,m=Object(s.a)(t);return Object(i.useEffect)((()=>{const t=e({http:m});void 0!==t?(d({status:u.Loading,data:h,error:g,refresh:f}),t.then((e=>{d({status:u.Settled,data:e,refresh:f})})),t.catch((e=>{if(!(e instanceof r.AbortError))throw d({status:u.Settled,error:e,refresh:f}),e}))):d({status:u.Init,data:void 0,error:void 0,refresh:f})}),[m,l,...t]),Object(i.useEffect)((()=>{const e=setTimeout((()=>{p.status===u.Loading&&n.toasts.addWarning({title:a.i18n.translate("xpack.profiling.fetch.toast.title",{defaultMessage:"Data Retrieval in Progress"}),text:a.i18n.translate("xpack.profiling.fetch.toast.describe",{defaultMessage:"If necessary, retrieving requested data from the warm storage tier may take longer than expected."})},{toastLifeTimeMs:3e5})}),15e3);return()=>{clearTimeout(e)}}),[p.status,n.toasts]),p}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(13);const i=Object(r.createContext)(void 0),a=i.Provider},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(15),i=n(14),a=n(2),o=n(13);let s,u;!function(e){e.Absolute="absolute",e.Relative="relative"}(s||(s={})),function(e){e.Scale="scale",e.Time="time"}(u||(u={}));const l=a.i18n.translate("xpack.profiling.normalizationMenu.scale",{defaultMessage:"Scale factor"}),c=a.i18n.translate("xpack.profiling.normalizationMenu.time",{defaultMessage:"Time"}),f=a.i18n.translate("xpack.profiling.normalizationMenu.normalizeBy",{defaultMessage:"Normalize by"});var p={name:"1bbwyjf",styles:".euiFormLabel{max-width:none;}"};function d(e){const[t,n]=Object(o.useState)(!1),s=Object(r.useEuiTheme)(),d=Object(r.useGeneratedHtmlId)({prefix:"baselineScaleFactor"}),h=Object(r.useGeneratedHtmlId)({prefix:"comparisonScaleFactor"}),[g,m]=Object(o.useState)(e.mode),[b,x]=Object(o.useState)(e.options);Object(o.useEffect)((()=>{m(e.mode),x(e.options)}),[e.mode,e.options]);const{baseline:y,comparison:v}=g===u.Time?{comparison:b.comparisonTime,baseline:b.baselineTime}:{comparison:b.comparisonScale,baseline:b.baselineScale};return Object(i.jsx)(r.EuiPopover,{anchorPosition:"downRight",initialFocus:`#${d}`,button:Object(i.jsx)(r.EuiFormControlLayout,{onClick:()=>{n((e=>!e))},compressed:!0,prepend:f,append:Object(i.jsx)(r.EuiButtonIcon,{"data-test-subj":"profilingNormalizationMenuButton",iconType:"arrowDown","aria-label":a.i18n.translate("xpack.profiling.normalizationMenu.menuPopoverButtonAriaLabel",{defaultMessage:"Open normalization menu"})}),css:p},Object(i.jsx)(r.EuiFlexItem,{style:{height:"100%",justifyContent:"center",backgroundColor:s.euiTheme.colors.ghost,padding:"0 16px"}},e.mode===u.Scale?l:c)),isOpen:t,closePopover:()=>n(!1)},Object(i.jsx)(r.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(i.jsx)(r.EuiFlexItem,null,Object(i.jsx)(r.EuiTitle,{size:"xxs"},Object(i.jsx)("h4",null,f))),Object(i.jsx)(r.EuiFlexItem,{grow:!1},Object(i.jsx)(r.EuiIconTip,{content:Object(i.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(i.jsx)(r.EuiFlexItem,null,Object(i.jsx)("span",null,a.i18n.translate("xpack.profiling.normalizationMenu.normalizeByTimeTooltip",{defaultMessage:"Select Normalize by Scale factor and set your Baseline and Comparison scale factors to compare a set of machines of different sizes. For example, you can compare a deployment of 10% of machines to a deployment of 90% of machines."}))),Object(i.jsx)(r.EuiFlexItem,null,Object(i.jsx)("span",null,a.i18n.translate("xpack.profiling.normalizationMenu.normalizeByScaleTooltip",{defaultMessage:"Select Normalize by Time to compare a set of machines across different time periods. For example, if you compare the last hour to the last 24 hours, the shorter timeframe (1 hour) is multiplied to match the longer timeframe (24 hours)."})))),position:"right"}))),Object(i.jsx)(r.EuiHorizontalRule,{margin:"s"}),Object(i.jsx)(r.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,onChange:(e,t)=>{m(e)},legend:a.i18n.translate("xpack.profiling.normalizationMode.selectModeLegend",{defaultMessage:"Select a normalization mode for the flamegraph"}),idSelected:g,options:[{id:u.Scale,label:l},{id:u.Time,label:c}]}),Object(i.jsx)(r.EuiSpacer,{size:"m"}),Object(i.jsx)(r.EuiTitle,{size:"xxxs"},Object(i.jsx)("h6",null,a.i18n.translate("xpack.profiling.normalizationMenu.baseline",{defaultMessage:"Baseline"}))),Object(i.jsx)(r.EuiSpacer,{size:"s"}),Object(i.jsx)(r.EuiFormControlLayout,{fullWidth:!0,prepend:Object(i.jsx)(r.EuiFormLabel,{htmlFor:d},l)},Object(i.jsx)(r.EuiFieldNumber,{"data-test-subj":"profilingNormalizationMenuFieldNumber",controlOnly:!0,id:d,value:y,onChange:e=>{g===u.Scale&&x((t=>({...t,baselineScale:e.target.valueAsNumber})))},disabled:g===u.Time})),Object(i.jsx)(r.EuiSpacer,{size:"m"}),Object(i.jsx)(r.EuiTitle,{size:"xxxs"},Object(i.jsx)("h6",null,a.i18n.translate("xpack.profiling.normalizationMenu.comparison",{defaultMessage:"Comparison"}))),Object(i.jsx)(r.EuiSpacer,{size:"s"}),Object(i.jsx)(r.EuiFormControlLayout,{fullWidth:!0,prepend:Object(i.jsx)(r.EuiFormLabel,{htmlFor:h},l)},Object(i.jsx)(r.EuiFieldNumber,{"data-test-subj":"profilingNormalizationMenuFieldNumber",controlOnly:!0,id:h,value:v,onChange:e=>{g===u.Scale&&x((t=>({...t,comparisonScale:e.target.valueAsNumber})))},disabled:g===u.Time})),Object(i.jsx)(r.EuiSpacer,{size:"m"}),Object(i.jsx)(r.EuiButton,{"data-test-subj":"profilingNormalizationMenuApplyChangesButton",onClick:()=>{e.onChange(g,b),n(!1)},fullWidth:!0},a.i18n.translate("xpack.profiling.normalizationMenu.applyChanges",{defaultMessage:"Apply changes"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(48);function i(e){return`${Object(r.a)(100*e)}%`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return NotFoundRouteException})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return C})),n.d(t,"f",(function(){return v})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return F}));var r=n(76),i=n(39),a=n(86),o=n(3),s=n(60),u=n.n(s),l=n(84);function c(e){return e.replace(/(?:{([^\/]+)})/g,":$1")}class NotFoundRouteException extends Error{constructor(e){super(e)}}function f(e){const t=new Map,n=new Map,s=Object.entries(e).map((([e,t])=>f({...t,path:e})));function f(e){var r,i,a;const o={component:()=>e.element,routes:null!==(r=null===(i=Object.entries(null!==(a=e.children)&&void 0!==a?a:{}))||void 0===i?void 0:i.map((([e,t])=>f({...t,path:e}))))&&void 0!==r?r:[],exact:!e.children||0===Object.values(e.children).length,path:c(e.path)};return t.set(o,e),n.set(e,o),o}function p(e){const n=Object(l.matchRoutes)(s,c(e));if(!n.length)throw new Error(`No matching route found for ${e}`);return n.map((e=>t.get(e.route)))}const d=(...e)=>{let n=!1;"boolean"==typeof e[e.length-1]&&(n=e[e.length-1],e.pop());const f=e[e.length-1];e.pop();let p=e;0===p.length&&(p=[f.pathname||"/"]);let d=[],h=-1;const g=p.map((t=>{const n=t.endsWith("/*")||0===e.length?1:0;return{length:t.length,greedy:n,path:t}})),m=Object(o.orderBy)(g,["greedy","length"],["desc","desc"]);for(const{path:e,greedy:t}of m){if(d=Object(l.matchRoutes)(s,c(f.pathname)),h=t?d.length-1:Object(o.findLastIndex)(d,(t=>t.route.path===c(e))),-1!==h)break;h=-1}if(-1===h){if(n)return[];let e;throw e=1===p.length?`${p[0]} does not match current path ${f.pathname}`:`None of ${p.join(", ")} match current path ${f.pathname}`,new Error(e)}if(!d.some((e=>e.match.isExact)))throw new NotFoundRouteException("No route was matched");return d.slice(0,h+1).map((e=>{const n=t.get(e.route);if(null!=n&&n.params){var s;const t=Object(r.a)(n.params).decode(Object(o.merge)({},null!==(s=n.defaults)&&void 0!==s?s:{},{path:e.match.params,query:u.a.parse(f.search,{decode:!0})}));if(Object(i.isLeft)(t))throw new Error(a.PathReporter.report(t).join("\n"));return{match:{...e.match,params:t.right},route:n}}return{match:{...e.match,params:{path:{},query:{}}},route:n}}))};return{link:(e,...t)=>((e,...t)=>{const n=t[0],s=Object(o.merge)({path:{},query:{}},n),l=p(e=e.split("/").map((e=>{const t=e.match(/(?:{([a-zA-Z]+)})/);return t?s.path[t[1]]:e})).join("/")),c=Object(r.b)(...Object(o.compact)(l.map((e=>e.params)))),f=Object(o.merge)({},...l.map((e=>{var t;return null!==(t=e.defaults)&&void 0!==t?t:{}})),s),d=c.decode(f);if(Object(i.isLeft)(d))throw new Error(a.PathReporter.report(d).join("\n"));return u.a.stringifyUrl({url:e,query:f.query},{encode:!0})})(e,...t),getParams:(...e)=>{const t=d(...e);return t.length?Object(o.merge)({path:{},query:{}},...t.map((e=>{var t,n;return Object(o.merge)({},null!==(t=null===(n=e.route)||void 0===n?void 0:n.defaults)&&void 0!==t?t:{},e.match.params)}))):void 0},matchRoutes:(...e)=>d(...e),getRoutePath:e=>e.path,getRoutesToMatch:e=>p(e)}}var p=n(13),d=n.n(p),h=n(14);const g=Object(p.createContext)(void 0);function m({element:e,children:t}){return Object(h.jsx)(g.Provider,{value:{element:e}},t)}function b(){const e=Object(p.useContext)(g);if(!e)throw new Error("Outlet context not available");return e.element||null}const x=Object(p.createContext)(void 0),y=({match:e,element:t,children:n})=>Object(h.jsx)(x.Provider,{value:{match:e,element:t}},Object(h.jsx)(m,{element:t},n)),v=()=>{const e=Object(p.useContext)(x);if(!e)throw new Error("No match was found in context");return e};var j=n(17);const O=Object(p.createContext)(void 0),E=({router:e,children:t})=>Object(h.jsx)(O.Provider,{value:e},t);function S(){const e=Object(p.useContext)(O);if(!e)throw new Error("Router not found in context");return e}function w(e){const t=S(),n=Object(j.useLocation)();return Object(p.useMemo)((()=>void 0===e?t.matchRoutes(n):t.matchRoutes(e,n)),[e,t,n])}function M(){return w().concat().reverse().reduce(((e,t)=>{const{element:n}=t.route;return Object(h.jsx)(y,{match:t,element:e},n)}),Object(h.jsx)(d.a.Fragment,null))}n(38),n(88);var k=n(26);const T=({children:e,...t})=>Object(h.jsx)(j.Router,t,Object(h.jsx)(k.CompatRouter,null,e));function C({children:e,router:t,history:n}){return Object(h.jsx)(T,{history:n},Object(h.jsx)(E,{router:t},e))}function I(...e){const t=S(),n=Object(j.useLocation)();let r=!1;const i=e[e.length-1];"boolean"==typeof i&&(r=i,e.pop());const a=[...e,n,r];return t.getParams(...a)}function F(){const e=Object(o.last)(w()),t=S();if(!e)throw new NotFoundRouteException("No route was matched");return t.getRoutePath(e.route)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(16),i=n(35);const a=31536e3,o=.0425;function s(){const{start:{core:e}}=Object(i.a)(),t=e.uiSettings.get(r.profilingPervCPUWattX86),n=e.uiSettings.get(r.profilingCo2PerKWH),s=e.uiSettings.get(r.profilingDatacenterPUE);function u({samples:e,totalSamples:r,totalSeconds:i}){const u=a/i,l=e/r,c=r/20*l,f=c/3600,p=t*f/1e3*(1e3*n)*s,d=f*o;return{percentage:l,coreSeconds:c,annualizedCoreSeconds:c*u,co2:p,annualizedCo2:p*u,dollarCost:d,annualizedDollarCost:d*u}}return e=>({totalSamples:u({samples:e.totalSamples,totalSamples:e.totalSamples,totalSeconds:e.totalSeconds}),totalCPU:u({samples:e.countInclusive,totalSamples:e.totalSamples,totalSeconds:e.totalSeconds}),selfCPU:u({samples:e.countExclusive,totalSamples:e.totalSamples,totalSeconds:e.totalSeconds})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7);function i(e){return isNaN(e)?r.b:0===e?"0":(e=Math.round(100*e)/100,Math.abs(e)<.01?"~0.00":Math.abs(e)<1e3?e.toString():Math.abs(e)<1e6?`${i(e/1e3)}k`:Math.abs(e)<1e9?`${i(e/1e6)}m`:`${i(e/1e9)}b`)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n(13);var r=n(15),i=n(14);function a({label:e,hint:t,iconSize:n,labelSize:a,labelStyle:o}){return Object(i.jsx)(r.EuiFlexGroup,{gutterSize:"xs",style:{flexGrow:0},alignItems:"center"},Object(i.jsx)(r.EuiFlexItem,{grow:!1},Object(i.jsx)(r.EuiText,{size:a,style:o},e)),Object(i.jsx)(r.EuiFlexItem,{grow:!1},Object(i.jsx)(r.EuiToolTip,{content:t},Object(i.jsx)(r.EuiIcon,{type:"questionInCircle",size:n}))))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeable=t.pipe=void 0;var r=n(59);t.pipe=r.pipe;t.pipeable=function(e){var t={};return function(e){return"function"==typeof e.map}(e)&&(t.map=function(t){return function(n){return e.map(n,t)}}),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(t){return function(n){return e.contramap(n,t)}}),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.identity)}),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.reduceRight(r,t,n)}}),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(t){return function(n){return e.alt(n,t)}}),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(t){return function(n){return e.compose(n,t)}}),function(e){return"function"==typeof e.throwError}(e)&&(t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return y}));var r=n(2),i=n(13),a=n.n(i),o=n(15),s=n(22),u=n(92),l=n.n(u),c=n(37),f=n(36),p=n(40),d=n(42),h=n(35),g=n(41),m=n(14);let b;!function(e){e.Kubernetes="kubernetes",e.Docker="docker",e.Binary="binary",e.Deb="deb",e.RPM="rpm",e.ElasticAgentIntegration="elasticAgentIntegration",e.Symbols="symbols"}(b||(b={}));const x=["x86_64","arm64"];function y(){var e,t,n,u,y;const{query:v}=Object(c.b)("/add-data-instructions"),{selectedTab:j}=v,O=Object(f.a)(),E=Object(p.a)(),[S,w]=Object(i.useState)(),{services:{setupDataCollectionInstructions:M},start:{core:k}}=Object(h.a)(),{data:T,status:C}=Object(d.b)((({http:e})=>M({http:e})),[M]),I=null==T||null===(e=T.collector)||void 0===e?void 0:e.secretToken,F=null==T||null===(t=T.collector)||void 0===t?void 0:t.host,L=null==T||null===(n=T.symbolizer)||void 0===n?void 0:n.host,A=null==T?void 0:T.stackVersion,N=A?l()(A).toString():void 0,_=Object(i.useMemo)((()=>[{key:b.Kubernetes,title:r.i18n.translate("xpack.profiling.tabs.kubernetesTitle",{defaultMessage:"Kubernetes"}),steps:[{title:r.i18n.translate("xpack.profiling.tabs.kubernetesRepositoryStep",{defaultMessage:"Configure the Universal Profiling Agent Helm repository:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},r.i18n.translate("xpack.profiling.tabs.helmRepoAddElasticCodeBlockLabel",{defaultMessage:"helm repo add elastic https://helm.elastic.co"}))},{title:r.i18n.translate("xpack.profiling.tabs.kubernetesInstallStep",{defaultMessage:"Install host-agent via Helm:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`helm install --create-namespace -n=universal-profiling universal-profiling-agent \\\n--set "projectID=1,secretToken=${I}" \\\n--set "collectionAgentHostPort=${F}" \\\n--set "version=${A}" \\\n--version=${A} \\\nelastic/pf-host-agent`)},{title:r.i18n.translate("xpack.profiling.tabs.kubernetesValidationStep",{defaultMessage:"Validate the host-agent pods are running:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},r.i18n.translate("xpack.profiling.tabs.kubectlGetPods",{defaultMessage:"kubectl -n universal-profiling get pods"}))},{title:r.i18n.translate("xpack.profiling.tabs.postValidationStep",{defaultMessage:"Use the Helm install output to get host-agent logs and spot potential errors"}),content:Object(m.jsx)(a.a.Fragment,null)}]},{key:b.Docker,title:r.i18n.translate("xpack.profiling.tabs.dockerTitle",{defaultMessage:"Docker"}),steps:[{title:r.i18n.translate("xpack.profiling.tabs.dockerRunContainerStep",{defaultMessage:"Run the Universal Profiling container:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`docker run --name pf-host-agent --privileged --pid=host -v /etc/machine-id:/etc/machine-id:ro \\\n-v /var/run/docker.sock:/var/run/docker.sock -v /sys/kernel/debug:/sys/kernel/debug:ro \\\ndocker.elastic.co/observability/profiling-agent:${A} /root/pf-host-agent \\\n-project-id=1 -secret-token=${I} \\\n-collection-agent=${F}`)}]},{key:b.Binary,title:r.i18n.translate("xpack.profiling.tabs.binaryTitle",{defaultMessage:"Binary"}),subTabs:x.map((e=>({key:e,title:`Linux ${e}`,steps:[{title:r.i18n.translate("xpack.profiling.tabs.binaryDownloadStep",{defaultMessage:"Download the binary:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`wget -O pf-host-agent.tgz "https://artifacts.elastic.co/downloads/prodfiler/pf-host-agent-${A}-linux-${e}.tar.gz" && tar xzf pf-host-agent.tgz`)},{title:r.i18n.translate("xpack.profiling.tabs.binaryGrantPermissionStep",{defaultMessage:"Grant executable permissions:"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`chmod +x pf-host-agent-${A}-linux-${e}/pf-host-agent`)},{title:r.i18n.translate("xpack.profiling.tabs.binaryRunHostAgentStep",{defaultMessage:"Run the Universal Profiling host-agent (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`sudo pf-host-agent-${A}-linux-${e}/pf-host-agent -project-id=1 -secret-token=${I} -collection-agent=${F}`)}]})))},{key:b.Deb,title:r.i18n.translate("xpack.profiling.tabs.debTitle",{defaultMessage:"DEB Package"}),steps:[{title:r.i18n.translate("xpack.profiling.tabs.debConfigureRepoStep",{defaultMessage:"Configure the apt repository (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -\n      sudo apt-get install apt-transport-https\n      echo "deb https://artifacts.elastic.co/packages/${N}.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-${N}.x.list\n      `)},{title:r.i18n.translate("xpack.profiling.tabs.debInstallPackageStep",{defaultMessage:"Install the DEB package (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},"sudo apt-get update && sudo apt-get install pf-host-agent")},{title:r.i18n.translate("xpack.profiling.tabs.debEditConfigStep",{defaultMessage:"Edit the configuration (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`echo -e "project-id 1\nsecret-token ${I}\ncollection-agent ${F}" | sudo tee -a /etc/Elastic/universal-profiling/pf-host-agent.conf`)},{title:r.i18n.translate("xpack.profiling.tabs.debStartSystemdServiceStep",{defaultMessage:"Start the Universal Profiling systemd service (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},"sudo systemctl enable pf-host-agent && sudo systemctl restart pf-host-agent")}]},{key:b.RPM,title:r.i18n.translate("xpack.profiling.tabs.rpmTitle",{defaultMessage:"RPM Package"}),steps:[{title:r.i18n.translate("xpack.profiling.tabs.rpmConfigureRepoStep",{defaultMessage:"Configure the yum repository (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`sudo rpm --import https://packages.elastic.co/GPG-KEY-elasticsearch\n      cat <<EOF > /etc/yum.repos.d/elastic.repo\n[elastic-${N}.x]\nname=Elastic repository for ${N}.x packages\nbaseurl=https://artifacts.elastic.co/packages/${N}.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\nEOF`)},{title:r.i18n.translate("xpack.profiling.tabs.rpmInstallPackageStep",{defaultMessage:"Install the RPM package (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},"sudo yum install pf-host-agent")},{title:r.i18n.translate("xpack.profiling.tabs.rpmEditConfigStep",{defaultMessage:"Edit the configuration (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`echo -e "project-id 1\nsecret-token ${I}\ncollection-agent ${F}" | sudo tee -a /etc/Elastic/universal-profiling/pf-host-agent.conf`)},{title:r.i18n.translate("xpack.profiling.tabs.rpmStartSystemdServiceStep",{defaultMessage:"Start the Universal Profiling systemd service (requires root privileges):"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},"sudo systemctl enable pf-host-agent && sudo systemctl restart pf-host-agent")}]},{key:b.ElasticAgentIntegration,title:r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.title",{defaultMessage:"Elastic Agent Integration"}),steps:[{title:r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step1",{defaultMessage:"Copy credentials"}),content:Object(m.jsx)(a.a.Fragment,null,Object(m.jsx)(o.EuiText,null,r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step1.hint",{defaultMessage:"You'll need these credentials to set up Universal Profiling. Please save them in a secure location, as they will be required in the subsequent step."})),Object(m.jsx)(o.EuiSpacer,null),Object(m.jsx)(o.EuiText,{style:{fontWeight:"bold"},size:"s"},r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step1.secretToken",{defaultMessage:"Secret token:"})),Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},I),Object(m.jsx)(o.EuiSpacer,{size:"s"}),Object(m.jsx)(o.EuiText,{style:{fontWeight:"bold"},size:"s"},r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step1.collectionAgentUrl",{defaultMessage:"Universal Profiling Collector URL:"})),Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},F))},{title:r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step2",{defaultMessage:"Fleet"}),content:Object(m.jsx)(o.EuiButton,{"data-test-subj":"profilingAddDataViewManageUniversalProfilingAgentInFleetButton",iconType:"gear",fill:!0,href:`${k.http.basePath.prepend(`/app/integrations/detail/profiler_agent-${null==T?void 0:T.profilerAgent.version}/overview`)}`},r.i18n.translate("xpack.profiling.tabs.elasticAgentIntegration.step2.button",{defaultMessage:"Manage Universal Profiling agent in Fleet"}))}]},{key:b.Symbols,title:r.i18n.translate("xpack.profiling.tabs.symbols.title",{defaultMessage:"Upload Symbols"}),subTabs:x.map((e=>({key:e,title:`Linux ${e}`,steps:[{title:r.i18n.translate("xpack.profiling.tabs.symbols.step1",{defaultMessage:"Download and extract symbtool"}),content:Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`wget -O symbtool-${e}.tgz "https://artifacts.elastic.co/downloads/prodfiler/symbtool-${A}-linux-${e}.tar.gz" && tar xzf symbtool-${e}.tgz && cd symbtool-${A}-linux-${e}`)},{title:r.i18n.translate("xpack.profiling.tabs.symbols.step2",{defaultMessage:"Generate an Elasticsearch token"}),content:Object(m.jsx)(o.EuiText,null,Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewInstructionsHereLink",target:"_blank",href:"https://www.elastic.co/guide/en/kibana/master/api-keys.html"},r.i18n.translate("xpack.profiling.tabs.symbols.step2.instructions",{defaultMessage:"Instructions here"})))},{title:r.i18n.translate("xpack.profiling.tabs.symbols.step3",{defaultMessage:"Upload symbols"}),content:Object(m.jsx)("div",null,Object(m.jsx)(o.EuiCodeBlock,{paddingSize:"s",isCopyable:!0},`./symbtool push-symbols executable -u "${L}" -t <ES token> -e <my executable>`),Object(m.jsx)(o.EuiSpacer,{size:"m"}),Object(m.jsx)(o.EuiText,null,Object(m.jsx)(s.FormattedMessage,{id:"xpack.profiling.tabs.symbols.step3.replace",defaultMessage:"Replace {es_token} etc. with the actual values. You can pass {help} to obtain a list of other arguments.",values:{es_token:Object(m.jsx)(o.EuiCode,null,"<ES token>"),help:Object(m.jsx)(o.EuiCode,null,r.i18n.translate("xpack.profiling.tabs.symbols.helpFlag",{defaultMessage:"--help"}))}})),Object(m.jsx)(o.EuiSpacer,{size:"s"}),Object(m.jsx)(o.EuiText,null,Object(m.jsx)(s.FormattedMessage,{id:"xpack.profiling.tabs.symbols.step3.doc-ref",defaultMessage:"Documentation for more advanced uses cases is available in {link}.",values:{link:Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewTheCorrespondingDocumentationPageLink",target:"_blank",href:`${k.docLinks.ELASTIC_WEBSITE_URL}/guide/en/observability/${k.docLinks.DOC_LINK_VERSION}/profiling-add-symbols.html`},r.i18n.translate("xpack.profiling.tabs.symbols.step3.doc-ref.link",{defaultMessage:"the corresponding documentation page"}))}})))}]})))}]),[F,k.docLinks.DOC_LINK_VERSION,k.docLinks.ELASTIC_WEBSITE_URL,k.http.basePath,null==T?void 0:T.profilerAgent.version,N,I,A,L]),P=Object(i.useMemo)((()=>_.find((e=>e.key===j))),[j,_]);Object(i.useEffect)((()=>{if(P.subTabs){const e=P.subTabs[0].key;w(e)}}),[P]);const R=S?null===(u=P.subTabs)||void 0===u?void 0:u.find((e=>e.key===S)):void 0,z=P.steps||(null==R?void 0:R.steps)||[],D=null!==(y=P.subTabs)&&void 0!==y?y:[],U=C===d.a.Loading;return Object(m.jsx)(g.b,{tabs:[],restrictWidth:!0,hideSearchBar:!0,pageTitle:Object(m.jsx)(o.EuiFlexGroup,{direction:"row",alignItems:"center"},Object(m.jsx)(o.EuiFlexItem,{grow:!1},Object(m.jsx)(o.EuiIcon,{type:"logoObservability",size:"m"})),Object(m.jsx)(o.EuiFlexItem,{grow:!1},r.i18n.translate("xpack.profiling.noDataPage.pageTitle",{defaultMessage:"Add profiling data"})),U?Object(m.jsx)(o.EuiFlexItem,null,Object(m.jsx)(o.EuiLoadingSpinner,null)):null)},U?Object(m.jsx)(a.a.Fragment,null):Object(m.jsx)(a.a.Fragment,null,Object(m.jsx)(o.EuiCallOut,{color:"warning",iconType:"help",title:Object(m.jsx)(s.FormattedMessage,{id:"xpack.profiling.tabs.debWarning",defaultMessage:"Due to a {linuxLink} bug which impacts stability, the Universal Profiling agent will not run on unpatched kernel versions {versionFrom} to {versionTo}. Refer to {debianLink} and {fedoraLink} to learn more. If you are running an affected kernel, the Universal Profiling agent dynamically checks for the patch. Refer to {advancedLink} for instructions on overriding this check.",values:{versionFrom:Object(m.jsx)("strong",null,r.i18n.translate("xpack.profiling.tabs.strong.5.19Label",{defaultMessage:"5.19"})),versionTo:Object(m.jsx)("strong",null,r.i18n.translate("xpack.profiling.tabs.strong.6.4Label",{defaultMessage:"6.4"})),linuxLink:Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewLinuxKernelBugLink",target:"_blank",href:"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d319f344561de23e810515d109c7278919bff7b0"},r.i18n.translate("xpack.profiling.tabs.debWarning.linuxLink",{defaultMessage:"Linux kernel bug"})),debianLink:Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewDebianLink",target:"_blank",href:"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1033398"},r.i18n.translate("xpack.profiling.tabs.debWarning.debianLink",{defaultMessage:"Debian"})),fedoraLink:Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewFedoraCentOsLink",target:"_blank",href:"https://bugzilla.redhat.com/show_bug.cgi?id=2211455"},r.i18n.translate("xpack.profiling.tabs.debWarning.fedoraLink",{defaultMessage:"Fedora/CentOS"})),advancedLink:Object(m.jsx)(o.EuiLink,{"data-test-subj":"profilingAddDataViewAdvancedConfigurationLink",target:"_blank",href:`${k.docLinks.ELASTIC_WEBSITE_URL}/guide/en/observability/${k.docLinks.DOC_LINK_VERSION}/profiling-advanced-configuration.html`},r.i18n.translate("xpack.profiling.tabs.debWarning.advancedLink",{defaultMessage:"Advanced configuration"}))}})}),Object(m.jsx)(o.EuiSpacer,null),Object(m.jsx)(o.EuiText,null,r.i18n.translate("xpack.profiling.noDataPage.addDataTitle",{defaultMessage:"Select an option below to deploy the Universal Profiling Agent."})),Object(m.jsx)(o.EuiSpacer,null),Object(m.jsx)(o.EuiSplitPanel.Outer,null,Object(m.jsx)(o.EuiPanel,{hasBorder:!1,hasShadow:!1,grow:!1,paddingSize:"none"},Object(m.jsx)(o.EuiSplitPanel.Inner,{color:"subdued",paddingSize:"none"},Object(m.jsx)(o.EuiTabs,{style:{padding:"0 24px"}},_.map((e=>Object(m.jsx)(o.EuiTab,{key:e.key,onClick:()=>{O.push(E,{path:{},query:{selectedTab:e.key}})},isSelected:e.key===j},e.title))))),Object(m.jsx)(o.EuiSplitPanel.Inner,{style:{padding:"0 24px"}},Object(m.jsx)(o.EuiSpacer,{size:"s"}),D.length>0&&Object(m.jsx)(o.EuiTabs,{style:{padding:"0 24px"}},D.map((e=>Object(m.jsx)(o.EuiTab,{key:e.key,onClick:()=>{w(e.key)},isSelected:e.key===S},e.title)))),Object(m.jsx)(o.EuiSpacer,{size:"xxl"}),z.length>0&&Object(m.jsx)(o.EuiSteps,{steps:z.map((e=>({title:e.title,children:e.content,status:"incomplete"})))}))))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),i=n(68);function a(){const e=Object(r.useContext)(i.a);if(!e)throw new Error("TimeRangeContext was not provided");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(27),i=n(3),a=n(13),o=n(7),s=n(35),u=n(14);function l({kuery:e,rangeFrom:t,rangeTo:n,onQuerySubmit:l,onRefresh:c,onRefreshClick:f,showSubmitButton:p=!0,dataTestSubj:d="profilingUnifiedSearchBar",showDatePicker:h=!0,showQueryMenu:g=!0}){const{start:{dataViews:m}}=Object(s.a)(),[b,x]=Object(a.useState)();Object(a.useEffect)((()=>{m.create({title:o.a}).then((e=>x(e)))}),[m]);const y={language:"kuery",query:e};return Object(u.jsx)(r.SearchBar,{onQuerySubmit:({dateRange:r,query:i})=>{r.from!==t||r.to!==n||(null==i?void 0:i.query)!==e?l({dateRange:r,query:i}):f()},showQueryInput:!0,showDatePicker:h,showFilterBar:!1,showSaveQuery:!1,submitButtonStyle:p?"auto":"iconOnly",query:y,dateRangeFrom:t,dateRangeTo:n,indexPatterns:Object(i.compact)([b]),onRefresh:c,displayStyle:"inPage",dataTestSubj:d,showQueryMenu:g})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(48);function i(e,t="$"){return`${t}${Object(r.a)(e)}`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(48);const i=.45359237,a=2.20462;function o(e,t){const n=Object(r.a)(e);return"lbs"===t?`${n} lbs / ${Object(r.a)(Number(e*i))} kg`:`${Object(r.a)(Number(e*a))} lbs / ${n} kg`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n(13);var r=n(15),i=n(2),a=n(14);const o={self:{label:i.i18n.translate("xpack.profiling.cpu.self.label",{defaultMessage:"Self CPU"}),hint:i.i18n.translate("xpack.profiling.cpu.self.hint",{defaultMessage:"Indicates how much CPU time was spent by the code in the function body, excluding the work done by functions that were called by it"})},total:{label:i.i18n.translate("xpack.profiling.cpu.total.label",{defaultMessage:"Total CPU"}),hint:i.i18n.translate("xpack.profiling.cpu.total.hint",{defaultMessage:"Indicates how much CPU time was spent by the function and any functions called by it"})}};function s({iconSize:e,labelSize:t,labelStyle:n,type:i}){const{label:s,hint:u}=o[i];return Object(a.jsx)(r.EuiFlexGroup,{gutterSize:"xs",style:{flexGrow:0}},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiText,{size:t,style:n},s)),Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiToolTip,{content:u},Object(a.jsx)(r.EuiIcon,{type:"questionInCircle",size:e}))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(3);function i(e){if(0===e)return{color:"text",label:"0%",icon:void 0};const t=e<0?"success":"danger",n=e<0?"sortUp":"sortDown",r=Math.abs(e)<=.01?"<0.01":Math.abs(e).toFixed(2);return isFinite(e)?{color:t,label:`${r}%`,icon:n}:{color:"text",label:void 0,icon:void 0}}function a({value:e,scaleFactor:t=1}){return e*t}function o({baselineScaleFactor:e,comparisonScaleFactor:t,comparisonTopNFunctions:n,topNFunctions:i,totalSeconds:o,calculateImpactEstimates:s}){if(!i||!i.TotalCount||0===i.TotalCount)return[];const u=n?Object(r.keyBy)(n.TopN,"Id"):{};return i.TopN.filter((e=>e.CountExclusive>=0)).map(((r,l)=>{const c=null==u?void 0:u[r.Id],f=a({value:r.CountExclusive,scaleFactor:e}),p=r.CountInclusive/i.TotalCount*100,d=r.CountExclusive/i.TotalCount*100,h=o>0?s({countExclusive:r.CountExclusive,countInclusive:r.CountInclusive,totalSamples:i.TotalCount,totalSeconds:o}):void 0;return{id:r.Id,rank:r.Rank,frame:r.Frame,samples:f,selfCPUPerc:d,totalCPUPerc:p,selfCPU:r.CountExclusive,totalCPU:r.CountInclusive,impactEstimates:h,selfAnnualCO2kgs:r.selfAnnualCO2kgs,selfAnnualCostUSD:r.selfAnnualCostUSD,totalAnnualCO2kgs:r.totalAnnualCO2kgs,totalAnnualCostUSD:r.totalAnnualCostUSD,diff:function(){if(n&&c){const e=a({value:c.CountExclusive,scaleFactor:t}),i=f-e;return{id:c.Id,rank:r.Rank-c.Rank,samples:i,selfCPU:c.CountExclusive,totalCPU:c.CountInclusive,selfCPUPerc:d-c.CountExclusive/n.TotalCount*100,totalCPUPerc:p-c.CountInclusive/n.TotalCount*100,selfAnnualCO2kgs:c.selfAnnualCO2kgs,selfAnnualCostUSD:c.selfAnnualCostUSD,totalAnnualCO2kgs:c.totalAnnualCO2kgs,totalAnnualCostUSD:c.totalAnnualCostUSD}}}()}}))}function s({baselineValue:e,baselineScaleFactor:t,comparisonValue:n,comparisonScaleFactor:r,formatValue:o}){const s=a({value:e,scaleFactor:t}),u=o?o(s):s.toLocaleString();if(0===n)return{baseValue:u};const l=a({value:n,scaleFactor:r}),c=l-s,f=c/(l-c)*100,{color:p,icon:d,label:h}=i(f);return{baseValue:u,comparisonValue:o?o(l):l.toLocaleString(),percentDiffDelta:f,color:p,icon:d,label:h}}},function(e,t,n){"use strict";function r(e){return e}function i(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=r,t.unsafeCoerce=r,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,r,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(o(a(i(r(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=i,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,r,i,a,o,s,u,l,c,f,p,d,h,g,m,b,x,y){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return o(a(i(r(n(t(e))))));case 8:return s(o(a(i(r(n(t(e)))))));case 9:return u(s(o(a(i(r(n(t(e))))))));case 10:return l(u(s(o(a(i(r(n(t(e)))))))));case 11:return c(l(u(s(o(a(i(r(n(t(e))))))))));case 12:return f(c(l(u(s(o(a(i(r(n(t(e)))))))))));case 13:return p(f(c(l(u(s(o(a(i(r(n(t(e))))))))))));case 14:return d(p(f(c(l(u(s(o(a(i(r(n(t(e)))))))))))));case 15:return h(d(p(f(c(l(u(s(o(a(i(r(n(t(e))))))))))))));case 16:return g(h(d(p(f(c(l(u(s(o(a(i(r(n(t(e)))))))))))))));case 17:return m(g(h(d(p(f(c(l(u(s(o(a(i(r(n(t(e))))))))))))))));case 18:return b(m(g(h(d(p(f(c(l(u(s(o(a(i(r(n(t(e)))))))))))))))));case 19:return x(b(m(g(h(d(p(f(c(l(u(s(o(a(i(r(n(t(e))))))))))))))))));case 20:return y(x(b(m(g(h(d(p(f(c(l(u(s(o(a(i(r(n(t(e)))))))))))))))))))}},t.hole=i,t.bind_=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){"use strict";const r=n(81),i=n(82),a=n(83);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?i(e):e}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,o]=a(t.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:u(o,t),n(u(e,t),o,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=l(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(const t of Object.keys(e))n(t)||(i[t]=e[t]);const a=Object.keys(i);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=a(e,"#");return Object.assign({url:n.split("?")[0]||"",query:d(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(e.url).split("?")[0]||"",i=t.extract(e.url),a=t.parse(i,{sort:!1}),o=Object.assign(a,e.query);let u=t.stringify(o,n);u&&(u=`?${u}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${s(e.fragmentIdentifier,n)}`),`${r}${u}${l}`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(13),i=n(37),a=n(36),o=n(40),s=n(53),u=n(35),l=n(54),c=n(14);function f({showSubmitButton:e}){const{start:{data:t}}=Object(u.a)(),n=Object(a.a)(),f=Object(o.a)(),{path:p,query:d}=Object(i.b)("/*");if(!("rangeFrom"in d))throw new Error("Range query parameters are missing");const{rangeFrom:h,rangeTo:g,kuery:m}=d,{refresh:b}=Object(s.a)();return Object(r.useEffect)((()=>{h&&g&&t.query.timefilter.timefilter.setTime({from:h,to:g})}),[h,g,t]),Object(c.jsx)(l.a,{kuery:m,rangeFrom:h,rangeTo:g,onQuerySubmit:e=>{var t;n.push(f,{path:p,query:{...d,kuery:String((null===(t=e.query)||void 0===t?void 0:t.query)||""),rangeFrom:e.dateRange.from,rangeTo:e.dateRange.to}})},onRefresh:e=>{n.push(f,{path:p,query:{...d,rangeFrom:e.dateRange.from,rangeTo:e.dateRange.to}})},onRefreshClick:()=>{b()},showSubmitButton:e})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r=n(19),i=n(15),a=n(2),o=n(1),s=n(13),u=n.n(s),l=n(98),c=n.n(l),f=n(3),p=n(6);const d={[p.b.Unsymbolized]:[16614532,16620957,16692661,16699086],[p.b.Python]:[16559723,16629385,16633510,16703428],[p.b.PHP]:[16571266,16638619,16640436,16708045],[p.b.Native]:[7196892,9099747,11002858,12971249],[p.b.Kernel]:[8167167,9875967,11585023,13359359],[p.b.JVM]:[6673324,8707261,10741197,12709342],[p.b.Ruby]:[14131196,14660349,15189501,15718910],[p.b.Perl]:[16354233,16425671,16497109,16634339],[p.b.JavaScript]:[13353955,14012392,14670830,15394803],[p.b.PHPJIT]:[13433986,13761678,14089371,14417063]};function h(e){return[Math.floor(e/65536)/255,Math.floor(e/256)%256/255,e%256/255,1]}function g(e,t,n){return(e-t)/(n-t)}var m=n(44);const b={label:[],value:new Float64Array,color:new Float32Array,position0:new Float32Array,position1:new Float32Array,size0:new Float32Array,size1:new Float32Array};var x=n(77),y=n(14),v=n(16),j=n(47),O=n(55),E=n(45),S=n(56),w=n(57);function M({value:e,label:t,comparison:n,formatDifferenceAsPercentage:r,showDifference:o,formatValue:s,prependValue:u=""}){const l=`${u}${s?s(Math.abs(e)):e.toString()}`,c=s&&Object(f.isNumber)(n)?s(n):null==n?void 0:n.toString();let p,d="",h="";return Object(f.isNumber)(n)&&o&&(h=e<n?"danger":"success",r?(p=n-e,d="("+(p>0?"+":p<0?"-":"")+Object(E.a)(Math.abs(p))+")"):(p=1-n/e,d="("+(p>0?"-":p<0?"+":"")+Object(E.a)(Math.abs(p))+")"),Math.abs(p)<1e-4&&(d="")),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"xs"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiText,{size:"xs"},Object(y.jsx)("strong",{style:{display:"flex"}},t,":"))),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiText,{size:"xs"},void 0!==n?a.i18n.translate("xpack.profiling.flameGraphTooltip.valueLabel",{defaultMessage:"{value} vs {comparison}",values:{value:l,comparison:c}}):l,Object(y.jsx)(i.EuiTextColor,{color:h}," ",d)))))}var k=n(35),T={name:"vlqrtx",styles:"p{display:flex;}"};function C({annualCO2KgsInclusive:e,annualCostsUSDInclusive:t,baselineScaleFactor:n,comparisonAnnualCO2KgsInclusive:o,comparisonAnnualCostsUSDInclusive:s,comparisonCountExclusive:l,comparisonCountInclusive:c,comparisonScaleFactor:p,comparisonTotalSamples:d,comparisonTotalSeconds:h,countExclusive:g,countInclusive:m,inline:b,isRoot:x,label:C,onShowMoreClick:I,parentLabel:F,totalSamples:L,totalSeconds:A}){const{start:{core:N}}=Object(k.a)(),_=N.uiSettings.get(v.profilingUseLegacyCo2Calculation),P=Object(i.useEuiTheme)(),R=Object(j.b)(),z=R({countExclusive:g,countInclusive:m,totalSamples:L,totalSeconds:A}),D=Object(f.isNumber)(l)&&Object(f.isNumber)(c)&&Object(f.isNumber)(d)&&Object(f.isNumber)(h)?R({countExclusive:l,countInclusive:c,totalSamples:d,totalSeconds:h}):void 0;return Object(y.jsx)(r.TooltipContainer,null,Object(y.jsx)(i.EuiPanel,{paddingSize:"s"},Object(y.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiTitle,{size:"xxxs"},Object(y.jsx)(i.EuiText,null,C))),Object(y.jsx)(i.EuiHorizontalRule,{margin:"none",style:{background:P.euiTheme.border.color}}),b&&Object(y.jsx)(i.EuiCallOut,{css:T,color:"primary",title:Object(y.jsx)(i.EuiText,{size:"xs"},a.i18n.translate("xpack.profiling.flameGraphTooltip.inlineCallout",{defaultMessage:"This function has been inlined by {parentLabel}",values:{parentLabel:F}})),size:"s",iconType:"iInCircle"}),!1===x&&Object(y.jsx)(u.a.Fragment,null,Object(y.jsx)(M,{label:Object(y.jsx)(w.a,{type:"total",labelSize:"xs",iconSize:"s",labelStyle:{fontWeight:"bold"}}),value:z.totalCPU.percentage,comparison:null==D?void 0:D.totalCPU.percentage,formatValue:E.a,showDifference:!0,formatDifferenceAsPercentage:!0}),Object(y.jsx)(M,{label:Object(y.jsx)(w.a,{type:"self",labelSize:"xs",iconSize:"s",labelStyle:{fontWeight:"bold"}}),value:z.selfCPU.percentage,comparison:null==D?void 0:D.selfCPU.percentage,showDifference:!0,formatDifferenceAsPercentage:!0,formatValue:E.a})),Object(y.jsx)(M,{label:a.i18n.translate("xpack.profiling.flameGraphTooltip.samplesLabel",{defaultMessage:"Samples"}),value:Object(f.isNumber)(n)?m*n:m,comparison:Object(f.isNumber)(c)&&Object(f.isNumber)(p)?c*p:void 0,showDifference:!0,formatDifferenceAsPercentage:!1}),Object(y.jsx)(M,{label:a.i18n.translate("xpack.profiling.flameGraphTooltip.annualizedCo2",{defaultMessage:"Annualized CO2"}),value:_?z.totalCPU.annualizedCo2:e,comparison:_?null==D?void 0:D.totalCPU.annualizedCo2:o,formatValue:e=>Object(S.a)(e,"kgs"),showDifference:!0,formatDifferenceAsPercentage:!1}),Object(y.jsx)(M,{label:a.i18n.translate("xpack.profiling.flameGraphTooltip.annualizedDollarCost",{defaultMessage:"Annualized dollar cost"}),value:_?z.totalCPU.annualizedDollarCost:t,comparison:_?null==D?void 0:D.totalCPU.annualizedDollarCost:s,formatValue:O.a,showDifference:!0,formatDifferenceAsPercentage:!1}),I&&Object(y.jsx)(u.a.Fragment,null,Object(y.jsx)(i.EuiHorizontalRule,{margin:"none",style:{background:P.euiTheme.border.color}}),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiButtonEmpty,{"data-test-subj":"profilingFlameGraphTooltipButton",size:"s",iconType:"inspect",onClick:I},Object(y.jsx)(i.EuiText,{size:"xs"},a.i18n.translate("xpack.profiling.flameGraphTooltip.showMoreButton",{defaultMessage:"Show more information"})))),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiFlexGroup,{gutterSize:"xs"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiIcon,{type:"iInCircle"})),Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiText,{color:"subdued",size:"xs"},a.i18n.translate("xpack.profiling.flameGraphTooltip.rightClickTip",{defaultMessage:"Right-click to pin tooltip"})))))))))}function I({legendItems:e}){return Object(y.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"m"},e.map((({color:e,label:t})=>Object(y.jsx)(i.EuiFlexItem,{key:t,grow:!1},Object(y.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"xs"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiIcon,{type:"dot",color:e})),Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiText,{size:"xs"},t)))))))}function F({legendItems:e,asScale:t}){return t?Object(y.jsx)(i.EuiFlexGroup,{direction:"column",alignItems:"flexStart"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiFlexGroup,{direction:"row"},Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiText,{textAlign:"center",size:"s"},a.i18n.translate("xpack.profiling.flameGraphLegend.improvement",{defaultMessage:"Improvement"}))),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiText,{textAlign:"center",size:"s"},a.i18n.translate("xpack.profiling.flameGraphLegend.regression",{defaultMessage:"Regression"}))))),Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiFlexGroup,{direction:"row"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s"},Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiText,{size:"s"},"+",Object(E.a)(1))),Object(y.jsx)(i.EuiFlexItem,{style:{width:20*e.length}},Object(y.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"none"},e.map((({color:e,label:t})=>Object(y.jsx)(i.EuiFlexItem,{key:t,style:{backgroundColor:e,justifyContent:"center"}},t?Object(y.jsx)(i.EuiText,{size:"xs",style:{verticalAlign:"center",whiteSpace:"nowrap",paddingLeft:8,paddingRight:8}},t):""))))),Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(i.EuiText,{size:"s"},Object(E.a)(-1)))))))))):Object(y.jsx)(I,{legendItems:e})}function L({id:e,comparisonMode:t,primaryFlamegraph:n,comparisonFlamegraph:l,baseline:v,comparison:j,searchText:O,onChangeSearchText:E,isEmbedded:S=!1}){var w;const[M,k]=Object(s.useState)(!1);function T(){k((e=>!e))}const I=Object(i.useEuiTheme)(),L=Object(o.useUiTracker)({app:"profiling"}),A=Object(s.useMemo)((()=>function({primaryFlamegraph:e,comparisonFlamegraph:t,colorSuccess:n,colorDanger:r,colorNeutral:i,comparisonMode:o=m.a.Absolute,comparison:s,baseline:u}){const l={};if(!e||!e.Label||0===e.Label.length)return{key:Object(f.uniqueId)(),viewModel:b,comparisonNodesById:l,legendItems:[]};const x=function(e,t=!0){const n=e.Size,r=new Float32Array(n),i=new Float32Array(n),a=[{x:0,depth:1,node:0}];for(;a.length>0;){const{x:t,depth:n,node:o}=a.pop();r[o]=t,i[o]=n;const s=e.Edges[o].sort(((t,n)=>e.CountInclusive[t]>e.CountInclusive[n]?-1:e.CountInclusive[t]<e.CountInclusive[n]?1:e.ID[t].localeCompare(e.ID[n])));let u=0;for(const t of s)u+=e.CountInclusive[t];for(let r=s.length-1;r>=0;r--)u-=e.CountInclusive[s[r]],a.push({x:t+u,depth:n+1,node:s[r]})}const o=new Float32Array(4*n);if(t)for(let t=0;t<n;t++){const n=h((s=e.FrameType[t],u=r[t],d[s][u%4]));o.set(n,4*t)}var s,u;const l=new Float32Array(2*n),c=e.CountInclusive[0],f=i.reduce(((e,t)=>t>e?t:e),0);for(let e=0;e<n;e++){const t=2*e;l[t]=g(r[e],0,c),l[t+1]=g(f-i[e],0,f)}const p=new Float32Array(n);for(let t=0;t<n;t++)p[t]=g(e.CountInclusive[t],0,c);return{label:e.Label.slice(0,n),value:Float64Array.from(e.CountInclusive.slice(0,n)),color:o,position0:l,position1:l,size0:p,size1:p}}(e,void 0===t);let y;if(t){const v=c.a.interpolateRgb(i,n),j=c.a.interpolateRgb(i,r);function O(e){return e>=0?v(e):j(Math.abs(e))}y=Object(f.range)(1,-1,-.2).concat(-1).map((e=>{const t=Math.round(100*e)/100;return{color:O(t),label:0===t?a.i18n.translate("xpack.profiling.flamegraphModel.noChange",{defaultMessage:"No change"}):""}})),t.ID.forEach(((e,n)=>{l[e]={CountInclusive:t.CountInclusive[n],CountExclusive:t.CountExclusive[n]}}));const E=Object(f.sum)(e.CountExclusive),S=Object(f.sum)(t.CountExclusive),w=o===m.a.Relative?1:(null!=s?s:1)/(null!=u?u:1);e.ID.forEach(((t,n)=>{var r;const i=e.CountInclusive[n],a=null===(r=l[t])||void 0===r?void 0:r.CountInclusive,s=o===m.a.Absolute?i:i/E,u=o===m.a.Absolute?a:(null!=a?a:0)/S,c=o===m.a.Absolute?E:s,p=function(e,t,n=e){return void 0===t?1:Object(f.clamp)((e-t)/n,-1,1)}(s,void 0===u?void 0:u*w,c),d=O(p),g=h(Number(d.replace("#","0x")));x.color.set(g,4*n)}))}else{const M=new Set([...e.FrameType]);y=Object(f.compact)(Object.entries(d).map((([e,t])=>{const n=Number(e);return M.has(n)?{color:`#${t[0].toString(16)}`,label:Object(p.k)(n)}:void 0})))}return{key:Object(f.uniqueId)(),viewModel:x,comparisonNodesById:l,legendItems:y}}({primaryFlamegraph:n,comparisonFlamegraph:l,colorSuccess:I.euiTheme.colors.success,colorDanger:I.euiTheme.colors.danger,colorNeutral:I.euiTheme.colors.lightShade,comparisonMode:t,baseline:v,comparison:j})),[n,l,I.euiTheme.colors.success,I.euiTheme.colors.danger,I.euiTheme.colors.lightShade,t,v,j]),N=A.viewModel.value[0],[_,P]=Object(s.useState)(void 0),R=n&&void 0!==_?{fileID:n.FileID[_],frameType:n.FrameType[_],exeFileName:n.ExeFilename[_],addressOrLine:n.AddressOrLine[_],functionName:n.FunctionName[_],sourceFileName:n.SourceFilename[_],sourceLine:n.SourceLine[_],countInclusive:n.CountInclusive[_],countExclusive:n.CountExclusive[_],selfAnnualCO2Kgs:n.SelfAnnualCO2KgsItems[_],totalAnnualCO2Kgs:n.TotalAnnualCO2KgsItems[_],selfAnnualCostUSD:n.SelfAnnualCostsUSDItems[_],totalAnnualCostUSD:n.TotalAnnualCostsUSDItems[_]}:void 0;return Object(s.useEffect)((()=>{P(void 0)}),[A.key]),Object(y.jsx)(u.a.Fragment,null,Object(y.jsx)(i.EuiFlexGroup,{direction:"column"},Object(y.jsx)(i.EuiFlexItem,null,Object(y.jsx)(i.EuiFlexGroup,{direction:"row"},A.viewModel.label.length>0&&Object(y.jsx)(i.EuiFlexItem,{grow:!0},Object(y.jsx)(r.Chart,{key:A.key},Object(y.jsx)(r.Settings,{theme:{chartMargins:{top:0,left:0,bottom:0,right:0},chartPaddings:{left:0,right:0,top:0,bottom:0},tooltip:{maxWidth:500}},onElementClick:e=>{const t=e[0];Number.isNaN(null==t?void 0:t.vmIndex)?P(void 0):P(t.vmIndex)},locale:a.i18n.getLocale()}),Object(y.jsx)(r.Tooltip,{actions:[{label:"",onSelect:()=>{}}],customTooltip:e=>{if(!n)return Object(y.jsx)(u.a.Fragment,null);const t=e.values[0].valueAccessor,r=n.Label[t],i=n.CountInclusive[t],a=n.CountExclusive[t],o=n.TotalSeconds,s=n.ID[t],c=n.Inline[t],f=A.comparisonNodesById[s],p=c?n.Label[n.Edges.findIndex((e=>e.includes(t)))]:void 0;return Object(y.jsx)(C,{annualCO2KgsInclusive:n.TotalAnnualCO2KgsItems[t],annualCostsUSDInclusive:n.TotalAnnualCostsUSDItems[t],baselineScaleFactor:v,comparisonAnnualCO2KgsInclusive:null==l?void 0:l.TotalAnnualCO2KgsItems[t],comparisonAnnualCostsUSDInclusive:null==l?void 0:l.TotalAnnualCostsUSDItems[t],comparisonCountExclusive:null==f?void 0:f.CountExclusive,comparisonCountInclusive:null==f?void 0:f.CountInclusive,comparisonScaleFactor:j,comparisonTotalSamples:null==l?void 0:l.CountInclusive[0],comparisonTotalSeconds:null==l?void 0:l.TotalSeconds,countExclusive:a,countInclusive:i,isRoot:0===t,label:r,onShowMoreClick:()=>{L({metric:"flamegraph_node_details_click"}),T(),P(t)},totalSamples:N,totalSeconds:o,inline:c,parentLabel:p})}}),Object(y.jsx)(r.Flame,{id:e,columnarData:A.viewModel,valueAccessor:e=>e.value,valueFormatter:e=>`${e}`,animation:{duration:100},controlProviderCallback:{},search:O?{text:O}:void 0,onSearchTextChange:E}))))),Object(y.jsx)(i.EuiFlexItem,{grow:!1},Object(y.jsx)(F,{legendItems:A.legendItems,asScale:!!l}))),M&&Object(y.jsx)(x.a,{onClose:T,frame:R,totalSeconds:null!==(w=null==n?void 0:n.TotalSeconds)&&void 0!==w?w:0,totalSamples:N,showSymbolsStatus:!S}))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(13),i=n(35);const a=["fetch","get","post","put","delete","patch"];function o(e){const t=Object(r.useRef)(new AbortController),{start:{core:{http:n}}}=Object(i.a)(),o=Object(r.useMemo)((()=>{t.current.abort(),t.current=new AbortController;const e={};for(const r of a)e[r]=(e,i)=>n[r](e,{...i,signal:t.current.signal}).catch((e=>{if("AbortError"===e.name)return new Promise((()=>{}));throw e}));return{...n,...e}}),[n,...e]);return Object(r.useEffect)((()=>()=>{t.current.abort()}),[]),o}},function(e,t,n){(function(t){const n="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=n}).call(this,n(94))},function(e,t){const n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(3),i=n(13),a=n.n(i),o=n(14);const s=a.a.createContext(void 0);function u({children:e}){const[t,n]=Object(i.useState)(Object(r.uniqueId)()),a=Object(i.useMemo)((()=>({timeRangeId:t,refresh:()=>{n(Object(r.uniqueId)())}})),[t]);return Object(o.jsx)(s.Provider,{value:a},e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),i=n(70);function a(){const e=Object(r.useContext)(i.a);if(!e)throw new Error("ProfilingSetupStatusContext not found");return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(13),i=n.n(r),a=n(14);const o=i.a.createContext(void 0);function s({children:e}){const[t,n]=Object(r.useState)();return Object(a.jsx)(o.Provider,{value:{profilingSetupStatus:t,setProfilingSetupStatus:n}},e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(15),i=(n(13),n(6)),a=n(14);function o({calleeFunctionName:e}){return Object(a.jsx)(r.EuiText,{size:"s",style:{fontWeight:"bold",overflowWrap:"anywhere"}},e)}function s({frame:e,onFrameClick:t}){const n=Object(i.o)(e);return Object(a.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(a.jsx)(r.EuiFlexItem,null,Object(a.jsx)("div",null,t?Object(a.jsx)(r.EuiLink,{"data-test-subj":"profilingStackFrameSummaryLink",onClick:function(){t&&t(n)}},Object(a.jsx)(o,{calleeFunctionName:n})):Object(a.jsx)(o,{calleeFunctionName:n}))),Object(a.jsx)(r.EuiFlexItem,{style:{overflowWrap:"anywhere"}},Object(a.jsx)(r.EuiText,{size:"s"},Object(i.p)(e)||"")))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(15),i=n(2),a=n(1),o=n(6),s=n(3),u=n(13),l=n.n(u),c=n(16),f=n(47),p=n(35),d=n(57),h=n(77),g=n(49),m=n(78),b=n(58),x=n(14);const y=Object(u.forwardRef)((({topNFunctions:e,comparisonTopNFunctions:t,totalSeconds:n,isDifferentialView:y,baselineScaleFactor:v,comparisonScaleFactor:j,onFrameClick:O,onScroll:E,showDiffColumn:S=!1,pageIndex:w,onChangePage:M,sortField:k,sortDirection:T,onChangeSort:C,dataTestSubj:I="topNFunctionsGrid",isEmbedded:F=!1},L)=>{const{start:{core:A}}=Object(p.a)(),N=A.uiSettings.get(c.profilingUseLegacyCo2Calculation),[_,P]=Object(u.useState)(),R=Object(a.useUiTracker)({app:"profiling"}),z=Object(f.b)(),D=Object(u.useMemo)((()=>e&&e.TotalCount?e.TotalCount:0),[e]),U=Object(u.useMemo)((()=>Object(b.c)({baselineScaleFactor:v,comparisonScaleFactor:j,comparisonTopNFunctions:t,topNFunctions:e,totalSeconds:n,calculateImpactEstimates:z})),[v,z,j,t,e,n]),B=Object(u.useMemo)((()=>{switch(k){case o.f.Frame:return Object(s.orderBy)(U,(e=>Object(o.o)(e.frame)),T);case o.f.SelfCPU:return Object(s.orderBy)(U,(e=>e.selfCPUPerc),T);case o.f.TotalCPU:return Object(s.orderBy)(U,(e=>e.totalCPUPerc),T);case o.f.AnnualizedCo2:return Object(s.orderBy)(U,(e=>{var t;return N?null===(t=e.impactEstimates)||void 0===t?void 0:t.totalCPU.annualizedCo2:e.totalAnnualCO2kgs}),T);case o.f.AnnualizedDollarCost:return Object(s.orderBy)(U,(e=>{var t;return N?null===(t=e.impactEstimates)||void 0===t?void 0:t.totalCPU.annualizedDollarCost:e.totalAnnualCostUSD}),T);default:return Object(s.orderBy)(U,k,T)}}),[U,N,T,k]),{columns:$,leadingControlColumns:q}=Object(u.useMemo)((()=>{const e=[{id:o.f.Rank,schema:"numeric",actions:{showHide:!1},initialWidth:y?50:90,displayAsText:i.i18n.translate("xpack.profiling.functionsView.rankColumnLabel",{defaultMessage:"Rank"})},{id:o.f.Frame,actions:{showHide:!1},displayAsText:i.i18n.translate("xpack.profiling.functionsView.functionColumnLabel",{defaultMessage:"Function"})},{id:o.f.Samples,initialWidth:y?100:200,schema:"numeric",actions:{showHide:!1},display:Object(x.jsx)(g.a,{label:i.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel",{defaultMessage:"Samples"}),hint:i.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel.hint",{defaultMessage:"Estimated values"}),labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:o.f.SelfCPU,schema:"numeric",actions:{showHide:!1},initialWidth:y?100:200,display:Object(x.jsx)(d.a,{type:"self",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:o.f.TotalCPU,schema:"numeric",actions:{showHide:!1},initialWidth:y?100:200,display:Object(x.jsx)(d.a,{type:"total",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})}],t=[];return S&&e.push({initialWidth:60,id:o.f.Diff,actions:{showHide:!1},displayAsText:i.i18n.translate("xpack.profiling.functionsView.diffColumnLabel",{defaultMessage:"Diff"})}),y||(e.push({id:o.f.AnnualizedCo2,actions:{showHide:!1},initialWidth:y?100:200,schema:"numeric",display:Object(x.jsx)(g.a,{label:i.i18n.translate("xpack.profiling.functionsView.annualizedCo2",{defaultMessage:"Annualized CO2"}),hint:i.i18n.translate("xpack.profiling.functionsView.annualizedCo2.hint",{defaultMessage:"Indicates the CO2 emission of the function and any functions called by it."}),labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:o.f.AnnualizedDollarCost,schema:"numeric",actions:{showHide:!1},initialWidth:y?100:200,display:Object(x.jsx)(g.a,{label:i.i18n.translate("xpack.profiling.functionsView.annualizedDollarCost",{defaultMessage:"Annualized dollar cost"}),hint:i.i18n.translate("xpack.profiling.functionsView.annualizedDollarCost.hint",{defaultMessage:"Indicates the Dollar cost of the function and any functions called by it."}),labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})}),t.push({id:"actions",width:40,headerCellRender:()=>Object(x.jsx)(r.EuiScreenReaderOnly,null,Object(x.jsx)("span",null,i.i18n.translate("xpack.profiling.topNFunctionsGrid.span.controlsLabel",{defaultMessage:"Controls"}))),rowCellRender:function({rowIndex:e}){return Object(x.jsx)(r.EuiButtonIcon,{"data-test-subj":"profilingTopNFunctionsGridButton","aria-label":i.i18n.translate("xpack.profiling.topNFunctionsGrid.euiButtonIcon.showActionsLabel",{defaultMessage:"Show actions"}),iconType:"expand",color:"text",onClick:function(){R({metric:"topN_function_details_click"}),P(B[e])}})}})),{columns:e,leadingControlColumns:t}}),[y,B,S,R]),[G,V]=Object(u.useState)($.map((({id:e})=>e)));return Object(x.jsx)(l.a.Fragment,null,Object(x.jsx)(r.EuiDataGrid,{"data-test-subj":I,ref:L,"aria-label":i.i18n.translate("xpack.profiling.topNFunctionsGrid.euiDataGrid.topNFunctionsLabel",{defaultMessage:"TopN functions"}),columns:$,columnVisibility:{visibleColumns:G,setVisibleColumns:V},rowCount:B.length>100?100:B.length,renderCellValue:function({rowIndex:e,columnId:t,setCellProps:n}){const r=B[e];return r?Object(x.jsx)(m.a,{functionRow:r,columnId:t,totalCount:D,onFrameClick:O,setCellProps:n}):null},sorting:{columns:[{id:k,direction:T}],onSort:function(e){const t=Object(s.last)(e);t&&C(t)}},leadingControlColumns:q,pagination:{pageIndex:w,pageSize:50,onChangeItemsPerPage:()=>{},onChangePage:M,pageSizeOptions:[]},rowHeightsOptions:{defaultHeight:"auto"},toolbarVisibility:{showColumnSelector:!1,showKeyboardShortcuts:!y,showDisplaySelector:!y,showFullScreenSelector:!y,showSortSelector:!1},virtualizationOptions:{onScroll:E}}),_&&Object(x.jsx)(h.a,{onClose:()=>{P(void 0)},frame:{addressOrLine:_.frame.AddressOrLine,countExclusive:_.selfCPU,countInclusive:_.totalCPU,exeFileName:_.frame.ExeFileName,fileID:_.frame.FileID,frameType:_.frame.FrameType,functionName:_.frame.FunctionName,sourceFileName:_.frame.SourceFilename,sourceLine:_.frame.SourceLine,selfAnnualCO2Kgs:_.selfAnnualCO2kgs,totalAnnualCO2Kgs:_.totalAnnualCO2kgs,selfAnnualCostUSD:_.selfAnnualCostUSD,totalAnnualCostUSD:_.totalAnnualCostUSD},totalSeconds:n,totalSamples:D,showAIAssistant:!F,showSymbolsStatus:!F}))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(46),i=n(3),a=n(13),o=n(1),s=n(14);const u=Object(a.createContext)(void 0);function l({children:e}){const[,t]=Object(a.useState)({}),n=Object(a.useMemo)((()=>new Map),[]),l=Object(r.g)(),c=Object(a.useMemo)((()=>({set(e,r){Object(i.isEqual)(n.get(e),r)||(n.set(e,r),t({}))},unset(e){n.has(e)&&(n.delete(e),t({}))},getBreadcrumbs:e=>Object(i.compact)(e.flatMap((e=>n.get(e.route))))})),[n]),f=c.getBreadcrumbs(l).map(((e,t,n)=>({text:e.title,...t===n.length-1?{}:{href:e.href}})));return Object(o.useBreadcrumbs)(f),Object(s.jsx)(u.Provider,{value:c},e)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return Qe}));var r=n(2),i=n(76),a=n(6),o=n(46),s=n(0),u=n(13),l=n.n(u);let c;!function(e){e.All="all",e.Hot="hot",e.Warm="warm",e.Cold="cold",e.Frozen="frozen"}(c||(c={}));const f=s.type({indexLifecyclePhase:s.union([s.literal(c.All),s.literal(c.Hot),s.literal(c.Warm),s.literal(c.Cold),s.literal(c.Frozen)])});c.Hot,c.Warm,c.Cold,c.Frozen;var p=n(44),d=n(17),h=n(14);function g({pathname:e}){const{location:t}=Object(d.useHistory)();return Object(h.jsx)(d.Redirect,{to:{pathname:e,search:t.search}})}var m=n(52),b=n(15),x=n(35),y=n(41),v=n(37),j=n(36),O=n(40),E=n(38),S=n.n(E),w=n(42);function M({children:e,status:t,error:n,mono:i,size:a,style:o,alignTop:s}){return t!==w.a.Settled||n?Object(h.jsx)(b.EuiFlexGroup,{alignItems:s?"flexStart":"center",justifyContent:"center",direction:"row",style:o,gutterSize:"none"},Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{alignContent:"center"}},n&&t===w.a.Settled?Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiIcon,{type:"warning",color:"warning"})),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{style:{whiteSpace:"nowrap"}},r.i18n.translate("xpack.profiling.asyncComponent.errorLoadingData",{defaultMessage:"Could not load data"})))):Object(h.jsx)(b.EuiLoadingChart,{mono:i,size:a}))):e}var k=n(63),T=n(99),C=n.n(T);function I(e,t={}){if(e){const n=C.a.parse(e,t);if(n&&n.isValid())return n.toDate()}}var F=n(53);function L({rangeFrom:e,rangeTo:t,optional:n}){const r=Object(F.a)(),{start:i,end:a}=Object(u.useMemo)((()=>function({state:e={},rangeFrom:t,rangeTo:n}){if(e.rangeFrom===t&&e.rangeTo===n)return{start:e.start,end:e.end};const r=I(t),i=I(n,{roundUp:!0});return r&&i?{start:r.toISOString(),end:i.toISOString()}:{start:e.start,end:e.end}}({state:{},rangeFrom:e,rangeTo:t})),[e,t,r.timeRangeId]);if(!(i&&a||n))throw new Error("start and/or end were unexpectedly not set");return{start:i,end:a,inSeconds:{start:i?new Date(i).getTime()/1e3:void 0,end:a?new Date(a).getTime()/1e3:void 0},timeRangeId:r.timeRangeId}}const A=(e,t)=>{const{timeRangeId:n}=Object(F.a)();return Object(w.b)(e,t.concat(n))};var N=n(61),_=n(54);function P(){const{path:e,query:t,query:{comparisonKuery:n,comparisonRangeFrom:i,comparisonRangeTo:a}}=Object(v.a)("/flamegraphs/differential","/functions/differential"),{refresh:o}=Object(F.a)(),s=Object(j.a)(),u=Object(O.a)();function l(n){var r,i;"/flamegraphs/differential"===u?s.push(u,{path:e,query:{...t,comparisonRangeFrom:n.rangeFrom,comparisonRangeTo:n.rangeTo,comparisonKuery:null!==(r=n.kuery)&&void 0!==r?r:t.comparisonKuery}}):s.push(u,{path:e,query:{...t,comparisonRangeFrom:n.rangeFrom,comparisonRangeTo:n.rangeTo,comparisonKuery:null!==(i=n.kuery)&&void 0!==i?i:t.comparisonKuery}})}let c,f;return"/flamegraphs/differential"===u?(c=r.i18n.translate("xpack.profiling.comparisonSearch.baselineTitleFlamegraph",{defaultMessage:"Baseline flamegraph"}),f=r.i18n.translate("xpack.profiling.comparisonSearch.comparisonTitleFlamegraph",{defaultMessage:"Comparison flamegraph"})):(c=r.i18n.translate("xpack.profiling.comparisonSearch.baselineTitleFunctions",{defaultMessage:"Baseline functions"}),f=r.i18n.translate("xpack.profiling.comparisonSearch.comparisonTitleFunctions",{defaultMessage:"Comparison functions"})),Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"flexEnd"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiTitle,{size:"xxs"},Object(h.jsx)("h3",null,c)),Object(h.jsx)(b.EuiSpacer,{size:"s"}),Object(h.jsx)(N.a,{showSubmitButton:!1})),Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{padding:"0 8px"}},Object(h.jsx)(b.EuiToolTip,{position:"top",content:"Swap sides"},Object(h.jsx)(b.EuiButtonIcon,{"data-test-subj":"profilingPrimaryAndComparisonSearchBarButton",iconType:"merge",size:"m",onClick:()=>{const r={...t,rangeFrom:i,rangeTo:a,kuery:n,comparisonRangeFrom:t.rangeFrom,comparisonRangeTo:t.rangeTo,comparisonKuery:t.kuery};s.push(u,{path:e,query:r})}}))),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiTitle,{size:"xxs"},Object(h.jsx)("h3",null,f)),Object(h.jsx)(b.EuiSpacer,{size:"s"}),Object(h.jsx)(_.a,{kuery:n,rangeFrom:i,rangeTo:a,showSubmitButton:!1,onQuerySubmit:e=>{var t;l({kuery:String((null===(t=e.query)||void 0===t?void 0:t.query)||""),rangeFrom:e.dateRange.from,rangeTo:e.dateRange.to})},onRefresh:e=>{l({rangeFrom:e.dateRange.from,rangeTo:e.dateRange.to})},onRefreshClick:()=>{o()},dataTestSubj:"profilingComparisonUnifiedSearchBar"})))}function R({comparisonMode:e,onChange:t}){return Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"m",alignItems:"center"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiTitle,{size:"xxs"},Object(h.jsx)("h3",null,r.i18n.translate("xpack.profiling.differentialComparisonMode.title",{defaultMessage:"Format"})))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiButtonGroup,{legend:r.i18n.translate("xpack.profiling.differentialComparisonMode.legend",{defaultMessage:"This switch allows you to switch between an absolute and relative comparison between both graphs"}),type:"single",buttonSize:"s",idSelected:e,onChange:e=>{t(e)},options:[{id:p.a.Absolute,label:r.i18n.translate("xpack.profiling.differentialComparisonMode.absoluteButtonLabel",{defaultMessage:"Abs"})},{id:p.a.Relative,label:r.i18n.translate("xpack.profiling.differentialComparisonMode.relativeButtonLabel",{defaultMessage:"Rel"})}]}))))}function z({comparisonMode:e,normalizationMode:t,normalizationOptions:n}){const{path:r,query:i}=Object(v.b)("/flamegraphs/*"),a=Object(O.a)(),o=Object(j.a)();return Object(h.jsx)(b.EuiPanel,{hasShadow:!1,color:"subdued"},Object(h.jsx)(P,null),Object(h.jsx)(b.EuiHorizontalRule,null),Object(h.jsx)(b.EuiFlexGroup,{direction:"row"},Object(h.jsx)(R,{comparisonMode:e,onChange:function(e){"comparisonRangeFrom"in i&&o.push(a,{path:r,query:{...i,...e===p.a.Absolute?{comparisonMode:p.a.Absolute,normalizationMode:t}:{comparisonMode:p.a.Relative}}})}}),e===p.a.Absolute&&Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"m",alignItems:"center"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(p.b,{onChange:function(e,t){o.push(a,{path:a,query:e===p.c.Scale?{...i,baseline:t.baselineScale,comparison:t.comparisonScale,normalizationMode:e}:{...i,normalizationMode:e}})},mode:t,options:n}))))))}var D=n(16),U=n(47),B=n(55),$=n(56),q=n(58);function G({title:e}){return Object(h.jsx)(b.EuiText,{style:{fontWeight:"bold"},textAlign:"left"},e)}function V({id:e,value:t,icon:n,color:r}){return Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd"},n?Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},Object(h.jsx)(b.EuiIcon,{"data-test-subj":`${e}_${n}_${r}`,type:n,color:r,size:"l"})):null,Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiTextColor,{style:{fontWeight:"bold"},color:r,"data-test-subj":`${e}_value`},t)))}function W({id:e,baseValue:t,baseIcon:n,baseColor:r,comparisonValue:i,title:a,isLoading:o,comparisonPerc:s,comparisonColor:u,comparisonIcon:c,titleHint:f}){return Object(h.jsx)(b.EuiPanel,{hasShadow:!1},Object(h.jsx)(b.EuiStat,{title:Object(h.jsx)(V,{id:e,value:t,color:r,icon:n}),titleSize:"m",description:Object(h.jsx)(l.a.Fragment,null,f?Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"s"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(G,{title:a})),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiToolTip,{content:f},Object(h.jsx)(b.EuiIcon,{type:"questionInCircle"})))):Object(h.jsx)(G,{title:a}),Object(h.jsx)(b.EuiSpacer,null)),textAlign:"right",isLoading:o},!o&&i?Object(h.jsx)(b.EuiText,{color:u},c?Object(h.jsx)(b.EuiIcon,{"data-test-subj":`${e}_comparison_${c}_${u}`,type:c}):null,Object(h.jsx)("span",{"data-test-subj":`${e}_comparison_value`},(p=i,(d=s)?`${p} (${d})`:`${p}`))):null));var p,d}const H=r.i18n.translate("xpack.profiling.diffTopNFunctions.estimatedValue",{defaultMessage:"Estimated value"});function K(e=1){return e}function Y({baseValue:e,comparisonValue:t,isLoading:n}){const{start:{core:i}}=Object(x.a)(),a=i.uiSettings.get(D.profilingUseLegacyCo2Calculation),o=Object(U.b)(),s=e?e.totalCount*K(e.scaleFactor):0,c=t?t.totalCount*K(t.scaleFactor):0,{co2EmissionDiff:f,costImpactDiff:p,totalSamplesDiff:d}=Object(u.useMemo)((()=>{var n;const r=e?o({countExclusive:e.selfCPU,countInclusive:e.totalCPU,totalSamples:e.totalCount,totalSeconds:e.duration}):void 0,i=t?o({countExclusive:t.selfCPU,countInclusive:t.totalCPU,totalSamples:t.totalCount,totalSeconds:t.duration}):void 0;return{totalSamplesDiff:Object(q.a)({baselineValue:s||0,comparisonValue:c||0}),co2EmissionDiff:Object(q.a)({baselineValue:(a?null==r||null===(n=r.totalSamples)||void 0===n?void 0:n.annualizedCo2:null==e?void 0:e.totalAnnualCO2Kgs)||0,comparisonValue:(a?null==i?void 0:i.totalSamples.annualizedCo2:null==t?void 0:t.totalAnnualCO2Kgs)||0,formatValue:e=>Object($.a)(e,"kgs")}),costImpactDiff:Object(q.a)({baselineValue:(a?null==r?void 0:r.totalSamples.annualizedDollarCost:null==e?void 0:e.totalAnnualCostUSD)||0,comparisonValue:(a?null==i?void 0:i.totalSamples.annualizedDollarCost:null==t?void 0:t.totalAnnualCostUSD)||0,formatValue:B.a})}}),[e,s,o,c,t,a]),g=[{id:"overallPerformance",title:r.i18n.translate("xpack.profiling.diffTopNFunctions.summary.performance",{defaultMessage:"{label} overall performance by",values:{label:n||void 0===d.percentDiffDelta||void 0===d.label?"Gained/Lost":(null==d?void 0:d.percentDiffDelta)>0?"Lost":"Gained"}}),baseValue:d.label||"0%",baseIcon:d.icon,baseColor:d.color,titleHint:H},{id:"annualizedCo2",title:r.i18n.translate("xpack.profiling.diffTopNFunctions.summary.co2",{defaultMessage:"Annualized CO2 emission impact"}),baseValue:f.baseValue,comparisonValue:f.comparisonValue,comparisonIcon:f.icon,comparisonColor:f.color,comparisonPerc:f.label,titleHint:H},{id:"annualizedCost",title:r.i18n.translate("xpack.profiling.diffTopNFunctions.summary.cost",{defaultMessage:"Annualized cost impact"}),baseValue:p.baseValue,comparisonValue:p.comparisonValue,comparisonIcon:p.icon,comparisonColor:p.color,comparisonPerc:p.label,titleHint:H},{id:"totalNumberOfSamples",title:r.i18n.translate("xpack.profiling.diffTopNFunctions.summary.samples",{defaultMessage:"Total number of samples"}),baseValue:d.baseValue,comparisonValue:d.comparisonValue,comparisonIcon:d.icon,comparisonColor:d.color,comparisonPerc:d.label,titleHint:H}];return Object(h.jsx)(b.EuiAccordion,{initialIsOpen:!0,id:"TopNFunctionsSummary",buttonContent:Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"xs"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiText,{color:g[0].baseColor,style:{fontWeight:"bold"},textAlign:"left"},g[0].title)),g[0].baseIcon&&Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},Object(h.jsx)(b.EuiIcon,{type:g[0].baseIcon,color:g[0].baseColor,size:"s"})),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiTextColor,{style:{fontWeight:"bold"},color:g[0].baseColor},g[0].baseValue)))},Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiSpacer,{size:"s"}),Object(h.jsx)(b.EuiFlexGroup,{direction:"row"},g.map(((e,t)=>Object(h.jsx)(b.EuiFlexItem,{key:t},Object(h.jsx)(W,S()({},e,{isLoading:n}))))))))}var X=n(3),Z=n(78),J=n(57),Q=n(49);const ee=e=>[{id:a.f.Rank,actions:{showHide:!1},displayAsText:"Rank",initialWidth:65,schema:"numeric"},{id:a.f.Frame,actions:{showHide:!1},displayAsText:r.i18n.translate("xpack.profiling.functionsView.functionColumnLabel",{defaultMessage:"Function"}),cellActions:[e]},{id:a.f.Samples,initialWidth:120,schema:"numeric",actions:{showHide:!1},display:Object(h.jsx)(Q.a,{label:r.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel",{defaultMessage:"Samples"}),hint:r.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel.hint",{defaultMessage:"Estimated values"}),labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:a.f.SelfCPU,actions:{showHide:!1},schema:"numeric",initialWidth:120,display:Object(h.jsx)(J.a,{type:"self",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:a.f.TotalCPU,actions:{showHide:!1},schema:"numeric",initialWidth:120,display:Object(h.jsx)(J.a,{type:"total",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:a.e.ComparisonRank,actions:{showHide:!1},schema:"numeric",displayAsText:"Rank",initialWidth:69,displayHeaderCellProps:{className:"thickBorderLeft"}},{id:a.e.ComparisonFrame,actions:{showHide:!1},displayAsText:r.i18n.translate("xpack.profiling.functionsView.functionColumnLabel",{defaultMessage:"Function"}),cellActions:[e]},{id:a.e.ComparisonSamples,actions:{showHide:!1},schema:"numeric",initialWidth:120,display:Object(h.jsx)(Q.a,{label:r.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel",{defaultMessage:"Samples"}),hint:r.i18n.translate("xpack.profiling.functionsView.samplesColumnLabel.hint",{defaultMessage:"Estimated values"}),labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:a.e.ComparisonSelfCPU,actions:{showHide:!1},schema:"numeric",initialWidth:120,display:Object(h.jsx)(J.a,{type:"self",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{id:a.e.ComparisonTotalCPU,actions:{showHide:!1},schema:"numeric",initialWidth:120,display:Object(h.jsx)(J.a,{type:"total",labelSize:"s",labelStyle:{fontWeight:700},iconSize:"s"})},{displayAsText:"Diff",actions:{showHide:!1},id:a.e.ComparisonDiff,initialWidth:70,isSortable:!1}];var te={name:"14pbzbw",styles:".euiPopover__anchor{align-items:start;display:flex;}"};const ne=({baseRows:e,comparisonRows:t,selectedFrame:n,onClick:i})=>({rowIndex:o,columnId:s,Component:u})=>{const l=ie(s),c=l?t[o]:e[o];if(void 0===c)return null;const f=oe(c.frame),p=!!n&&n.currentFrameId===f&&n.isComparison===l,d=l?e.find((e=>oe(e.frame)===f)):t.find((e=>oe(e.frame)===f));return Object(h.jsx)(b.EuiPopover,{button:Object(h.jsx)(u,{onClick:()=>{i({currentFrameId:f,isComparison:l})},iconType:"inspect"},r.i18n.translate("xpack.profiling.compareFrame.component.findLabel",{defaultMessage:"Find corresponding frame"})),isOpen:p,closePopover:()=>{i(void 0)},anchorPosition:"upRight",css:te},d?Object(h.jsx)("div",{style:{maxWidth:400}},Object(h.jsx)(b.EuiPopoverTitle,{paddingSize:"s"},l?r.i18n.translate("xpack.profiling.diffTopNFunctions.baseLineFunction",{defaultMessage:"Baseline function"}):r.i18n.translate("xpack.profiling.diffTopNFunctions.comparisonLineFunction",{defaultMessage:"Comparison function"})),Object(h.jsx)(b.EuiTitle,{size:"xs"},Object(h.jsx)(b.EuiText,null,Object(a.o)(d.frame))),Object(h.jsx)(b.EuiBasicTable,{items:[d],columns:[{field:"rank",name:"Rank"},{field:"samples",name:"Samples",render:(e,t)=>t.samples.toLocaleString()},{field:"selfCPUPerc",name:"Self CPU",render:(e,t)=>`${t.selfCPUPerc.toFixed(2)}%`},{field:"totalCPUPerc",name:"Total CPU",render:(e,t)=>`${t.totalCPUPerc.toFixed(2)}%`}]})):Object(h.jsx)(b.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.profiling.diffTopNFunctions.noCorrespondingValueFound",{defaultMessage:"No corresponding value found"})))},re=e=>e.replace("comparison_",""),ie=e=>e.startsWith("comparison_");function ae(e,t,n){switch(t){case a.f.Frame:return Object(X.orderBy)(e,(e=>Object(a.o)(e.frame)),n);case a.f.SelfCPU:return Object(X.orderBy)(e,(e=>e.selfCPUPerc),n);case a.f.TotalCPU:return Object(X.orderBy)(e,(e=>e.totalCPUPerc),n);default:return Object(X.orderBy)(e,t,n)}}function oe(e){return[e.SourceFilename,e.FunctionName,e.ExeFileName,e.FileID,e.AddressOrLine].join("|")}function se({base:e,baselineScaleFactor:t,comparison:n,comparisonScaleFactor:i,onChangePage:o,onChangeSort:s,pageIndex:l,sortDirection:c,sortField:f,totalSeconds:p,onFrameClick:d,comparisonSortDirection:g,comparisonSortField:m}){const x=Object(U.b)(),[y,v]=Object(u.useState)(),j=Object(b.useEuiTheme)(),O=Object(u.useMemo)((()=>e&&e.TotalCount?e.TotalCount:0),[e]),{baseRows:E,comparisonRows:S}=Object(u.useMemo)((()=>({baseRows:Object(q.c)({calculateImpactEstimates:x,topNFunctions:e,totalSeconds:p}),comparisonRows:Object(q.c)({baselineScaleFactor:t,calculateImpactEstimates:x,comparisonScaleFactor:i,comparisonTopNFunctions:e,topNFunctions:n,totalSeconds:p})})),[e,t,x,n,i,p]),w=Object(u.useMemo)((()=>{const e=ne({baseRows:E,comparisonRows:S,onClick:v,selectedFrame:y});return ee(e)}),[E,S,y]),M=Object(u.useMemo)((()=>ae(E,f,c)),[E,c,f]),k=Object(u.useMemo)((()=>ae(S,re(m),g)),[S,g,m]),[T,C]=Object(u.useState)(w.map((({id:e})=>e))),I=Math.min(Math.max(M.length,k.length),100);return Object(h.jsx)(b.EuiDataGrid,{"data-test-subj":"profilingDiffTopNFunctionsGrid",css:Object(h.css)(".thickBorderLeft{border-left:",j.euiTheme.border.thick,"!important;}",""),"aria-label":r.i18n.translate("xpack.profiling.onWeelkDiffTopN.euiDataGrid.topNFunctionsLabel",{defaultMessage:"TopN functions"}),columns:w,columnVisibility:{visibleColumns:T,setVisibleColumns:C},rowCount:I,renderCellValue:function({rowIndex:e,columnId:t,setCellProps:n}){const r=ie(t),i=r?k[e]:M[e];return Object(u.useEffect)((()=>{r&&t===a.e.ComparisonRank?n({style:{borderLeft:j.euiTheme.border.thick}}):t===a.f.TotalCPU&&n({style:{borderRight:j.euiTheme.border.thin}})}),[t,r,n]),void 0===i?null:Object(h.jsx)("div",{"data-test-subj":t},Object(h.jsx)(Z.a,{functionRow:i,columnId:re(t),setCellProps:n,totalCount:O,onFrameClick:d}))},sorting:{columns:[{id:f,direction:c},{id:m,direction:g}],onSort:function(e){const t=e.reverse().find((e=>ie(e.id)?!(m===e.id&&g===e.direction):!(f===e.id&&c===e.direction)));if(t){const e=ie(t.id);s(e?{comparisonSortDirection:t.direction,comparisonSortField:t.id}:{sortDirection:t.direction,sortField:t.id})}}},pagination:{pageIndex:l,pageSize:50,onChangeItemsPerPage:()=>{},onChangePage:o,pageSizeOptions:[]},rowHeightsOptions:{defaultHeight:"auto"},toolbarVisibility:{showColumnSelector:!1,showKeyboardShortcuts:!1,showDisplaySelector:!1,showSortSelector:!1}})}var ue=n(72),le=n(34),ce=n(22),fe=n(1);function pe({isLoading:e,onDiscardChanges:t,onSave:n,unsavedChangesCount:i,saveLabel:a}){return Object(h.jsx)(b.EuiBottomBar,{paddingSize:"s","data-test-subj":"profilingBottomBarActions"},Object(h.jsx)(b.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{flexDirection:"row",alignItems:"center"}},Object(h.jsx)(b.EuiHealth,{color:"warning"}),Object(h.jsx)(b.EuiText,null,r.i18n.translate("xpack.profiling.bottomBarActions.unsavedChanges",{defaultMessage:"{unsavedChangesCount, plural, =0{0 unsaved changes} one {1 unsaved change} other {# unsaved changes}} ",values:{unsavedChangesCount:i}}))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiFlexGroup,{justifyContent:"flexEnd"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiButtonEmpty,{"data-test-subj":"profilingBottomBarActionsDiscardChangesButton",color:"text",onClick:t},r.i18n.translate("xpack.profiling.bottomBarActions.discardChangesButton",{defaultMessage:"Discard changes"}))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiButton,{"data-test-subj":"profilingBottomBarActionsButton",onClick:n,fill:!0,isLoading:e,color:"success",iconType:"check"},a))))))}const de=[D.profilingCo2PerKWH,D.profilingDatacenterPUE,D.profilingPervCPUWattX86,D.profilingPervCPUWattArm64],he=[D.profilingAWSCostDiscountRate,D.profilingCostPervCPUPerHour],ge=r.i18n.translate("xpack.profiling.topn.otherBucketLabel",{defaultMessage:"Other"});function me({category:e,subChartSize:t,colors:n}){return n[(e=>{let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=2147483647;return n%t})(e)]}var be=n(19),xe=n(18),ye=n(28);function ve(){const[e]=Object(xe.useUiSetting$)(ye.UI_SETTINGS.DATEFORMAT_TZ);return e&&"Browser"!==e?e:"local"}const je={barSeriesStyle:{rectBorder:{strokeOpacity:1,strokeWidth:1,visible:!0},rect:{opacity:.6}},scales:{barsPadding:0,histogramPadding:0},partition:{fillLabel:{textColor:"white"},emptySizeRatio:.3,sectorLineWidth:0}};function Oe(){const{start:{charts:e}}=Object(x.a)(),t=e.theme.useChartsBaseTheme(),n=e.theme.useChartsTheme();return{chartsBaseTheme:t,chartsTheme:Object(X.merge)({},n,je)}}var Ee=n(48),Se=n(45);function we({query:e,topNType:t,category:n}){return{path:{topNType:a.g.Traces},query:{...e,kuery:`${e.kuery?`(${e.kuery}) AND `:""}${Object(a.q)(t)}:"${n}"`}}}var Me=n(71);const ke=5;function Te(e,t){return Object(h.jsx)(b.EuiFlexItem,{grow:!1,key:e.FrameID},Object(h.jsx)(b.EuiFlexGroup,{direction:"row",alignItems:"center"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},t),Object(h.jsx)(b.EuiFlexItem,{grow:!0},Object(h.jsx)(Me.a,{frame:e}))))}var Ce={name:"r8cgp9",styles:"display:flex;flex-direction:column-reverse;.css-bknxw4-euiButtonIcon-xs-empty-text-euiAccordion__arrow-left-isOpen{transform:rotate(-90deg)!important;}"};function Ie({index:e,color:t,category:n,label:i,percentage:a,height:o,data:s,width:c,showAxes:f,metadata:p,onShowMoreClick:d,style:g,showFrames:m,padTitle:x,sample:y}){const O=Object(b.useEuiTheme)(),[E,S]=Object(u.useState)({}),w=Object(j.a)(),{path:M,query:k}=Object(v.b)("/stacktraces/{topNType}"),T=w.link("/stacktraces/{topNType}",we({query:k,topNType:M.topNType,category:n})),C=ve(),{chartsTheme:I,chartsBaseTheme:F}=Oe(),L=!!d,A=p.filter((e=>!1===e.Inline)),N=L?A.concat().reverse().slice(0,ke):A.concat().reverse(),_=Object(u.useMemo)((()=>{const e=Object(X.groupBy)(p,"AddressOrLine");return Object.keys(e).reduce(((t,n)=>{const[r,...i]=e[n];return t[n]=i,t}),{})}),[p]),P=N.length<p.length;let R;return R=p.length>0?Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiFlexItem,{style:{backgroundColor:O.euiTheme.colors.lightestShade,padding:O.euiTheme.size.m}},Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"none"},N.map(((e,t)=>{const n=A.indexOf(e)+1,i=_[e.AddressOrLine].concat().reverse(),a=[t,e.FrameID].join("|"),o=E[a];return Object(h.jsx)(u.Fragment,{key:a},i.length>0?Object(h.jsx)(b.EuiAccordion,{forceState:o||"closed",onToggle:e=>{S((t=>({...t,[a]:e?"open":"closed"})))},css:Ce,id:`accordion_${e.AddressOrLine}`,buttonContent:Te(e,n),paddingSize:"s",extraAction:Object(h.jsx)(b.EuiToolTip,{content:r.i18n.translate("xpack.profiling.traces.subChart.inlineDescription",{defaultMessage:"This frame has {numberOfChildren} inline {numberOfChildren, plural, one {frame} other {frames}} inside, this allows for optimised processes.",values:{numberOfChildren:i.length}})},Object(h.jsx)(b.EuiBadge,{color:"primary"},`-> ${i.length}`))},"open"===o?Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"s",style:{marginLeft:"12px"}},i.map(((e,t)=>Object(h.jsx)(u.Fragment,{key:[a,t].join("|")},Te(e,`${n}.${i.length-t} ->`))))):null):Te(e,n),t<N.length-1||P?Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiHorizontalRule,{size:"full",margin:"s"})):null)}))),P&&!!d&&Object(h.jsx)(b.EuiButton,{"data-test-subj":"profilingSubChartShowMoreButton",onClick:d},r.i18n.translate("xpack.profiling.stackTracesView.showMoreTracesButton",{defaultMessage:"Show more"})))):n===ge&&m?Object(h.jsx)(b.EuiFlexItem,{grow:!0,style:{padding:O.euiTheme.size.m}},Object(h.jsx)(b.EuiFlexGroup,{direction:"row",alignItems:"center",justifyContent:"center"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},r.i18n.translate("xpack.profiling.stackTracesView.otherTraces",{defaultMessage:"[This summarizes all traces that are too small to display]"})))):Object(h.jsx)(b.EuiSpacer,{size:"s"}),Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"s",style:{...g,height:"100%"}},Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{...x?{padding:O.euiTheme.size.l,paddingBottom:O.euiTheme.size.s}:{}}},Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"m",alignItems:"center",style:{overflowWrap:"anywhere"}},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiBadge,{color:t},Object(h.jsx)(b.EuiText,{color:O.euiTheme.colors.lightestShade,size:"xs"},e))),Object(h.jsx)(b.EuiFlexItem,{grow:!0,style:{alignItems:"flex-start"}},m?Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSubChartLink",onClick:()=>null==d?void 0:d()},Object(h.jsx)(b.EuiText,{size:"s"},i)):n===ge?Object(h.jsx)(b.EuiText,{size:"s"},i):Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSubChartLink",href:T},Object(h.jsx)(b.EuiText,{size:"s"},i))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"xs",alignItems:"flexEnd"},y?Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{size:"m"},Object(Se.a)(y.Percentage/100))):null,Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{size:y?"xs":"s"},y?r.i18n.translate("xpack.profiling.stackFrames.subChart.avg",{defaultMessage:"avg. {percentage}",values:{percentage:Object(Se.a)(a/100)}}):Object(Se.a)(a/100))))))),Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{position:"relative"}},Object(h.jsx)(be.Chart,{size:{height:o,width:c}},Object(h.jsx)(be.Tooltip,{showNullValues:!1}),Object(h.jsx)(be.Settings,{showLegend:!1,baseTheme:F,theme:I,locale:r.i18n.getLocale()}),Object(h.jsx)(be.AreaSeries,{id:n,name:n,data:s,xAccessor:"Timestamp",yAccessors:["Count"],xScaleType:be.ScaleType.Time,timeZone:C,yScaleType:be.ScaleType.Linear,curve:be.CurveType.CURVE_STEP_AFTER,color:t}),y?Object(h.jsx)(be.LineAnnotation,{id:"highlighted_sample",domainType:be.AnnotationDomainType.XDomain,dataValues:[{dataValue:y.Timestamp}],style:{line:{strokeWidth:2,dash:[4,4],opacity:.5}},marker:Object(h.jsx)(b.EuiIcon,{type:"dot"}),markerPosition:be.Position.Top,hideTooltips:!0}):null,f?Object(h.jsx)(be.Axis,{id:"bottom-axis",position:"bottom",tickFormat:Object(be.timeFormatter)("YYYY-MM-DD HH:mm:ss")}):null,Object(h.jsx)(be.Axis,{id:"left-axis",position:"left",gridLine:{visible:!0},tickFormat:e=>f?Number(e).toFixed(0):"",style:f?{}:{tickLine:{visible:!1},tickLabel:{visible:!1},axisTitle:{visible:!1}}})),f?null:Object(h.jsx)("div",{style:{position:"absolute",top:0,left:0,backgroundColor:"rgba(255, 255, 255, 0.75)"}},y?Object(Ee.a)(y.Count):r.i18n.translate("xpack.profiling.maxValue",{defaultMessage:"Max: {max}",values:{max:Object(Ee.a)(Math.max(...s.map((e=>{var t;return null!==(t=e.Count)&&void 0!==t?t:0}))))}}))),R)}function Fe({limit:e,charts:t,showFrames:n}){var i;const a=Math.min(e,null!==(i=t.length)&&void 0!==i?i:0),o=Math.min(a,t.length),[s,c]=Object(u.useState)(void 0),f=Object(u.useMemo)((()=>Object(X.take)(t,o).map(((e,t)=>Object(h.jsx)(b.EuiFlexItem,{key:e.Category},Object(h.jsx)(b.EuiPanel,{paddingSize:"none"},Object(h.jsx)(Ie,{index:e.Index,color:e.Color,category:e.Category,label:e.Label,percentage:e.Percentage,metadata:e.Metadata,height:200,data:e.Series,sample:null,showAxes:!0,onShowMoreClick:()=>{c(e)},showFrames:n,padTitle:!0})))))),[t,o,n]);return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(b.EuiTitle,{size:"s"},Object(h.jsx)("h1",null,r.i18n.translate("xpack.profiling.chartGrid.h1.topLabel",{defaultMessage:"Top {size}",values:{size:t.length}}))),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(b.EuiFlexGrid,{columns:2,gutterSize:"m"},f),s&&Object(h.jsx)(b.EuiFlyout,{onClose:()=>{c(void 0)}},Object(h.jsx)(Ie,{style:{overflow:"auto"},index:s.Index,color:s.Color,category:s.Category,label:s.Label,percentage:s.Percentage,metadata:s.Metadata,height:200,data:s.Series,sample:null,showAxes:!0,showFrames:n,padTitle:!0})))}const Le=224;function Ae({height:e,asPercentages:t,onBrushEnd:n,charts:i,showFrames:a,onClick:o}){const s=Object(u.useMemo)((()=>Object(X.keyBy)(i,"Category")),[i]),l=ve(),[c,f]=Object(u.useState)(),{chartsBaseTheme:p,chartsTheme:d}=Oe();return Object(h.jsx)(be.Chart,{size:{height:e}},Object(h.jsx)(be.Settings,{showLegend:!1,brushAxis:be.BrushAxis.X,onBrushEnd:e=>{const t=new Date(e.x[0]).toISOString(),r=new Date(e.x[1]).toISOString();n({rangeFrom:t,rangeTo:r})},baseTheme:p,theme:d,onElementOver:e=>{const[t]=e[0];f(t.datum)},onElementClick:o?e=>{const[t]=e[0],n=t.datum;o(n.Category)}:void 0,onElementOut:()=>{f(void 0)},locale:r.i18n.getLocale()}),Object(h.jsx)(be.Tooltip,{customTooltip:function(){if(!c)return null;const e=s[c.Category];return e?Object(h.jsx)(be.TooltipContainer,null,Object(h.jsx)(b.EuiPanel,null,Object(h.jsx)(Ie,{index:e.Index,color:e.Color,category:e.Category,label:e.Label,data:e.Series,percentage:e.Percentage,sample:c,showFrames:a,metadata:[],height:128,width:Le,showAxes:!1,padTitle:!1}))):null}}),i.map((e=>Object(h.jsx)(be.HistogramBarSeries,{key:e.Category,id:e.Category,name:e.Label,data:e.Series,color:e.Color,xAccessor:"Timestamp",yAccessors:["Count"],stackMode:t?be.StackMode.Percentage:void 0,xScaleType:be.ScaleType.Time,timeZone:l}))),Object(h.jsx)(be.Axis,{id:"bottom-axis",position:"bottom",tickFormat:Object(be.timeFormatter)("YYYY-MM-DD HH:mm:ss")}),Object(h.jsx)(be.Axis,{id:"left-axis",position:"left",gridLine:{visible:!0},tickFormat:e=>t?Object(Se.a)(e):e.toFixed(0)}))}var Ne=n(73);const _e=({title:e,href:t,children:n})=>{const{start:{core:r}}=Object(x.a)();return function(e){const t=Object(u.useContext)(Ne.a);if(!t)throw new Error("Missing Breadcrumb API in context");const{match:n}=Object(o.f)(),r=Object(u.useRef)(null==n?void 0:n.route);Object(u.useEffect)((()=>(r.current&&r.current!==(null==n?void 0:n.route)&&t.unset(r.current),r.current=null==n?void 0:n.route,r.current&&t.set(r.current,Object(X.castArray)(e)),()=>{r.current&&t.unset(r.current)})),[r.current,null==n?void 0:n.route])}({title:e,href:r.http.basePath.prepend("/app/profiling/"+t)}),n};function Pe(e){switch(e){case"events":return r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.chart.samples",{defaultMessage:"Samples"});case"executables":return r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.chart.executables",{defaultMessage:"Executables"});case"metrics":return r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.chart.metrics",{defaultMessage:"Metrics"});case"stackframes":return r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.chart.stackframes",{defaultMessage:"Stackframes"});case"stacktraces":return r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.chart.stacktraces",{defaultMessage:"Stacktraces"})}}function Re({data:e=[]}){const t=Object(b.useEuiTheme)(),{chartsBaseTheme:n,chartsTheme:i}=Oe(),a=Object(b.euiPaletteColorBlind)(),o=e.map((e=>{const{indexName:t,...n}=e;return{key:Pe(e.indexName),...n}}));return Object(h.jsx)("div",{style:{backgroundColor:t.euiTheme.colors.lightestShade,height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},o.length?Object(h.jsx)(be.Chart,{size:{height:250,width:400}},Object(h.jsx)(be.Settings,{showLegend:!0,legendPosition:be.Position.Right,baseTheme:n,theme:{...i,background:{color:"transparent"}},locale:r.i18n.getLocale()}),Object(h.jsx)(be.Partition,{layout:"sunburst",id:"spec_1",data:o,valueAccessor:e=>Number(e.sizeInBytes),valueGetter:"percent",valueFormatter:e=>Object(D.asDynamicBytes)(e),layers:[{groupByRollup:e=>e.key,shape:{fillColor:(e,t)=>a[t]}}]})):Object(h.jsx)("div",{style:{height:250,display:"flex",justifyContent:"center",alignItems:"center"}},Object(h.jsx)(b.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.noDataToDisplay",{defaultMessage:"No data to display"}))))}var ze=n(7);const De={events:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.events.hint",{defaultMessage:"Universal Profiling samples linearly correlate with the probabilistic profiling value. The lower the probabilistic profiling value, the fewer samples are collected."})};function Ue({data:e=[]}){return Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"s",direction:"column"},["stackframes","stacktraces","executables","metrics","events"].map((t=>{const n=e.find((e=>e.indexName===t));return Object(h.jsx)(b.EuiFlexItem,{grow:!1,key:t},Object(h.jsx)(Be,{indexName:t,docCount:null==n?void 0:n.docCount,sizeInBytes:null==n?void 0:n.sizeInBytes,hint:De[t]}))})))}function Be({indexName:e,docCount:t,sizeInBytes:n,hint:i}){const a=Object(b.useEuiTheme)(),o=Pe(e);return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiFlexGroup,{responsive:!1},Object(h.jsx)(b.EuiFlexItem,null,i?Object(h.jsx)(Q.a,{label:o,hint:i,labelSize:"xs",labelStyle:{fontWeight:"bold"}}):Object(h.jsx)(b.EuiText,{style:{fontWeight:"bold"},size:"xs"},o)),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{style:{fontWeight:"bold"},size:"xs"},r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.size",{defaultMessage:"Size"})))),Object(h.jsx)(b.EuiFlexGroup,{responsive:!1,style:{backgroundColor:a.euiTheme.colors.lightestShade,height:41,alignItems:"center",borderTop:`${a.euiTheme.border.width.thin} solid ${a.euiTheme.border.color}`,borderBottom:`${a.euiTheme.border.width.thin} solid ${a.euiTheme.border.color}`}},Object(h.jsx)(b.EuiFlexItem,{style:{paddingLeft:8},"data-test-subj":`${e}_docSize`},void 0!==t?Object(D.asInteger)(t):Object(h.jsx)(b.EuiText,{color:"subdued",size:"s"},ze.b)),Object(h.jsx)(b.EuiFlexItem,{style:{paddingLeft:8},"data-test-subj":`${e}_size`},n?Object(D.asDynamicBytes)(n):Object(h.jsx)(b.EuiText,{color:"subdued",size:"s"},ze.b))))}const $e={sort:{field:"sizeInBytes",direction:"desc"}};function qe({data:e=[]}){const[t,n]=Object(u.useState)({pageIndex:0}),i=Object(u.useMemo)((()=>[{field:"indexName",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.index",{defaultMessage:"Index"}),sortable:!0},{field:"primaryShardsCount",width:"150px",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.primaries",{defaultMessage:"Primaries"}),render:(e,{primaryShardsCount:t})=>null!=t?t:ze.b,sortable:!0},{field:"replicaShardsCount",width:"150px",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.replicas",{defaultMessage:"Replicas"}),render:(e,{replicaShardsCount:t})=>null!=t?t:ze.b,sortable:!0},{field:"docCount",width:"150px",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.docCount",{defaultMessage:"Doc count"}),sortable:!0,render:(e,{docCount:t})=>t?Object(D.asInteger)(t):ze.b},{field:"sizeInBytes",width:"150px",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.storageSize",{defaultMessage:"Storage size"}),sortable:!0,render:(e,{sizeInBytes:t})=>t?Object(D.asDynamicBytes)(t):ze.b},{field:"dataStream",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.dataStream",{defaultMessage:"Data stream"}),sortable:!0,render:(e,{dataStream:t})=>null!=t?t:ze.b},{field:"lifecyclePhase",width:"150px",name:r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.lifecyclePhase",{defaultMessage:"Lifecycle phase"}),sortable:!0,render:(e,{lifecyclePhase:t})=>null!=t?t:ze.b}]),[]);return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiTitle,{size:"xxxs"},Object(h.jsx)(b.EuiText,null,r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.storageDetailsTable.title",{defaultMessage:"Indices breakdown"}))),Object(h.jsx)(b.EuiInMemoryTable,{items:e,columns:i,sorting:$e,pagination:{pageSize:10,showPerPageOptions:!1,...t},onTableChange:function({page:{index:e}}){n({pageIndex:e})}}))}function Ge(){var e,t,n;const i=Object(b.useEuiTheme)(),{query:a}=Object(v.b)("/storage-explorer"),{indexLifecyclePhase:o}=a,{services:{fetchStorageExplorerIndicesStorageDetails:s}}=Object(x.a)(),u=A((({http:e})=>s({http:e,indexLifecyclePhase:o})),[s,o]);return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiTitle,null,Object(h.jsx)(b.EuiText,null,r.i18n.translate("xpack.profiling.storageExplorer.dataBreakdown.title",{defaultMessage:"Data breakdown"}))),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(b.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(h.jsx)(M,S()({size:"xl"},u,{style:{height:400}}),Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"row",gutterSize:"none"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(Re,{data:null===(e=u.data)||void 0===e?void 0:e.storageDetailsGroupedByIndex})),Object(h.jsx)(b.EuiFlexItem,{grow:!1,style:{width:i.euiTheme.border.width.thin,backgroundColor:i.euiTheme.border.color,marginLeft:64,marginRight:64}}),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(Ue,{data:null===(t=u.data)||void 0===t?void 0:t.storageDetailsGroupedByIndex})))),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(qe,{data:null===(n=u.data)||void 0===n?void 0:n.storageDetailsPerIndex}))))))}function Ve({totalNumberOfDistinctProbabilisticValues:e}){const{docLinks:t}=Object(x.a)().start.core;return Object(h.jsx)(b.EuiCallOut,{title:r.i18n.translate("xpack.profiling.storageExplorer.distinctProbabilisticProfilingValues.title",{defaultMessage:"We've identified {count} distinct probabilistic profiling values. Make sure to update them.",values:{count:e}}),color:"warning",iconType:"warning"},Object(h.jsx)(b.EuiText,{size:"s",color:"subdued"},r.i18n.translate("xpack.profiling.storageExplorer.distinctProbabilisticProfilingValues.description",{defaultMessage:"We recommend using a consistent probabilistic value for each project for more efficient storage, cost management, and to maintain good statistical accuracy."})),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(b.EuiButton,{"data-test-subj":"profilingDistinctProbabilisticValuesWarningLearnHowButton",href:`${t.ELASTIC_WEBSITE_URL}/guide/en/observability/${t.DOC_LINK_VERSION}/profiling-probabilistic-profiling.html`,color:"warning",target:"_blank"},r.i18n.translate("xpack.profiling.storageExplorer.distinctProbabilisticProfilingValues.button",{defaultMessage:"Learn how"})))}const We={sort:{field:"hostName",direction:"desc"}};function He({data:e=[],hasDistinctProbabilisticValues:t}){const{query:n}=Object(v.b)("/storage-explorer"),{rangeFrom:i,rangeTo:a}=n,o=Object(j.a)(),[s,l]=Object(u.useState)({pageIndex:0}),c=e.reduce(((e,t)=>{var n;const r=t.projectId,i=null!==(n=e[r])&&void 0!==n?n:0;return{...e,[r]:i+1}}),{}),f=Object(u.useMemo)((()=>[...t?[{field:"distinctProbabilisticWarning",width:"30",name:"",sortable:!0,render:(e,t)=>{if(c[t.projectId]>1)return Object(h.jsx)(b.EuiToolTip,{content:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.distinctProbabilisticValues",{defaultMessage:"We've identified distinct probabilistic profiling values for the same project"})},Object(h.jsx)(b.EuiIcon,{type:"warning",color:"warning"}))}}]:[],{field:"projectId",width:"100",name:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.projectId",{defaultMessage:"Project ID"}),sortable:!0},{field:"hostName",name:Object(h.jsx)(Q.a,{label:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.host",{defaultMessage:"Host"}),hint:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.host.hint",{defaultMessage:"host.name[host.id]"}),labelSize:"xs",labelStyle:{fontWeight:700},iconSize:"s"}),sortable:!0,render:(e,t)=>Object(h.jsx)(b.EuiLink,{"data-test-subj":`hostId_${t.hostId}`,className:"eui-textTruncate",href:o.link("/flamegraphs/flamegraph",{query:{rangeFrom:i,rangeTo:a,kuery:`host.id: "${t.hostId}"`}})},`${t.hostName} [${t.hostId}]`)},{field:"probabilisticValues",name:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.probabilisticValues",{defaultMessage:"Probabilistic Profiling values"}),sortable:!0,render:e=>Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"s"},e.map(((e,t)=>Object(h.jsx)(b.EuiFlexItem,{key:t,grow:!1},e.date?Object(h.jsx)(b.EuiToolTip,{content:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.probabilisticProfilingValues",{defaultMessage:"Introduced on {date}",values:{date:Object(D.asAbsoluteDateTime)(e.date)}})},Object(h.jsx)(b.EuiBadge,{color:"hollow",isDisabled:t>0},e.value)):Object(h.jsx)(b.EuiBadge,{color:"hollow",isDisabled:t>0},e.value)))))},{field:"totalMetricsSize",name:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.metricsData",{defaultMessage:"Metrics data"}),sortable:!0,width:"200",render:e=>Object(D.asDynamicBytes)(e)},{field:"totalEventsSize",name:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.samplesData",{defaultMessage:"Samples data"}),sortable:!0,width:"200",render:e=>Object(D.asDynamicBytes)(e)},{field:"totalSize",name:Object(h.jsx)(Q.a,{label:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.totalData",{defaultMessage:"Total data"}),hint:r.i18n.translate("xpack.profiling.storageExplorer.hostsTable.totalData.hint",{defaultMessage:"The combined value of Universal Profiling metrics and samples."}),labelSize:"xs",labelStyle:{fontWeight:700},iconSize:"s"}),sortable:!0,width:"200",render:e=>Object(D.asDynamicBytes)(e)}]),[t,c,o,i,a]);return Object(h.jsx)(b.EuiInMemoryTable,{items:e,columns:f,sorting:We,pagination:{pageSize:10,showPerPageOptions:!1,...s},onTableChange:function({page:{index:e}}){l({pageIndex:e})}})}function Ke({data:e=[]}){const{chartsBaseTheme:t,chartsTheme:n}=Oe(),i=ve(),a=Object(u.useMemo)((()=>{var t;return null!==(t=e.map((({hostId:e,hostName:t,timeseries:n})=>({data:null!=n?n:[],type:"area",title:`${t} [${e}]`}))))&&void 0!==t?t:[]}),[e]),o=a.flatMap((({data:e})=>e.map((({x:e})=>e)))),s=Math.min(...o),l=Math.max(...o),c=Object(be.niceTimeFormatter)([s,l]);return Object(h.jsx)(be.Chart,{size:{height:400}},Object(h.jsx)(be.Settings,{showLegend:!0,legendPosition:be.Position.Right,baseTheme:t,theme:n,locale:r.i18n.getLocale()}),Object(h.jsx)(be.Axis,{id:"x-axis",position:be.Position.Bottom,showOverlappingTicks:!0,tickFormat:c,gridLine:{visible:!1}}),Object(h.jsx)(be.Axis,{id:"y-axis",position:be.Position.Left,gridLine:{visible:!0},tickFormat:D.asDynamicBytes}),a.map((e=>Object(h.jsx)(be.AreaSeries,{timeZone:i,key:e.title,id:e.title,xScaleType:be.ScaleType.Time,yScaleType:be.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],data:e.data,stackAccessors:["x"]}))))}function Ye({hasDistinctProbabilisticValues:e}){var t,n;const{query:i}=Object(v.b)("/storage-explorer"),{rangeFrom:a,rangeTo:o,kuery:s,indexLifecyclePhase:u}=i,c=L({rangeFrom:a,rangeTo:o}),{services:{fetchStorageExplorerHostStorageDetails:f}}=Object(x.a)(),p=A((({http:e})=>f({http:e,timeFrom:c.inSeconds.start,timeTo:c.inSeconds.end,kuery:s,indexLifecyclePhase:u})),[f,c.inSeconds.start,c.inSeconds.end,s,u]);return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiTitle,null,Object(h.jsx)(b.EuiText,null,r.i18n.translate("xpack.profiling.storageExplorer.hostBreakdown.title",{defaultMessage:"Host agent breakdown"}),Object(h.jsx)(b.EuiToolTip,{content:r.i18n.translate("xpack.profiling.storageExplorer.hostBreakdown.title.hint",{defaultMessage:"This graph shows the combined values of Universal Profiling samples and metrics. host.name[host.id]."})},Object(h.jsx)(b.EuiIcon,{type:"questionInCircle",style:{marginLeft:4}})))),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(b.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(h.jsx)(M,S()({size:"xl"},p,{style:{height:400}}),Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(Ke,{data:null===(t=p.data)||void 0===t?void 0:t.hostDetailsTimeseries})),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(He,{data:null===(n=p.data)||void 0===n?void 0:n.hostDetails,hasDistinctProbabilisticValues:e}))))))}function Xe(){const e=Object(j.a)(),{query:t}=Object(v.b)("/storage-explorer"),{indexLifecyclePhase:n}=t,i=[{value:c.All,label:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.all.label",{defaultMessage:"All"}),description:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.all.description",{defaultMessage:"Search data in all lifecycle phases."})},{value:c.Hot,label:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.hot.label",{defaultMessage:"Hot"}),description:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.hot.description",{defaultMessage:"Holds your most-recent, most-frequently-searched data."})},{value:c.Warm,label:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.warm.label",{defaultMessage:"Warm"}),description:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.warm.description",{defaultMessage:"Holds data from recent weeks. Updates are still allowed, but likely infrequent."})},{value:c.Cold,label:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.cold.label",{defaultMessage:"Cold"}),description:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.cold.description",{defaultMessage:"While still searchable, this tier is typically optimized for lower storage costs rather than search speed."})},{value:c.Frozen,label:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.frozen.label",{defaultMessage:"Frozen"}),description:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.frozen.description",{defaultMessage:"Holds data that are no longer being queried, or being queried rarely."})}].map((({value:e,label:t,description:n})=>({value:e,inputDisplay:t,dropdownDisplay:Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)("strong",null,t),Object(h.jsx)(b.EuiText,{size:"s",color:"subdued"},Object(h.jsx)("p",null,n)))})));return Object(h.jsx)(b.EuiSuperSelect,{prepend:r.i18n.translate("xpack.profiling.storageExplorer.indexLifecyclePhase.label",{defaultMessage:"Index lifecycle phase"}),options:i,valueOfSelected:n,onChange:n=>{e.push("/storage-explorer",{path:{},query:{...t,indexLifecyclePhase:n}})},hasDividers:!0,style:{minWidth:200}})}function Ze({data:e,isLoading:t}){const{query:n}=Object(v.b)("/storage-explorer"),{rangeFrom:i,rangeTo:o,kuery:s}=n,u=Object(j.a)(),{start:{core:l}}=Object(x.a)(),c=[{dataTestSubj:"totalData",title:r.i18n.translate("xpack.profiling.storageExplorer.summary.totalData",{defaultMessage:"Total data"}),value:null!=e&&e.totalProfilingSizeBytes?Object(D.asDynamicBytes)(null==e?void 0:e.totalProfilingSizeBytes):void 0,hint:r.i18n.translate("xpack.profiling.storageExplorer.summary.totalData.hint",{defaultMessage:"Total storage size of all Universal Profiling indices including replicas, ignoring the filter settings."})},{dataTestSubj:"dailyDataGeneration",title:r.i18n.translate("xpack.profiling.storageExplorer.summary.dailyDataGeneration",{defaultMessage:"Daily data generation"}),value:null!=e&&e.dailyDataGenerationBytes?Object(D.asDynamicBytes)(null==e?void 0:e.dailyDataGenerationBytes):void 0},{dataTestSubj:"totalDebugSymbolsSize",title:r.i18n.translate("xpack.profiling.storageExplorer.summary.totalDebugSymbolsSize",{defaultMessage:"Total debug symbols size"}),value:null!=e&&e.totalSymbolsSizeBytes?Object(D.asDynamicBytes)(null==e?void 0:e.totalSymbolsSizeBytes):void 0,hint:r.i18n.translate("xpack.profiling.storageExplorer.summary.totalDebugSymbolsSize.hint",{defaultMessage:"The total sum of private and public debug symbols."})},{dataTestSubj:"diskSpaceUsed",title:r.i18n.translate("xpack.profiling.storageExplorer.summary.discSpaceUsed",{defaultMessage:"Disk space used"}),value:null!=e&&e.diskSpaceUsedPct?Object(Se.a)(null==e?void 0:e.diskSpaceUsedPct):void 0,hint:r.i18n.translate("xpack.profiling.storageExplorer.summary.discSpaceUsed.hint",{defaultMessage:"The percentage of the storage capacity that is currently used by all of the Universal Profiling indices compared to the maximum storage capacity currently configured for Elasticsearch."})},{dataTestSubj:"numberOfHostsAgents",title:r.i18n.translate("xpack.profiling.storageExplorer.summary.numberOfHosts",{defaultMessage:"Number of host agents"}),value:null==e?void 0:e.totalNumberOfHosts,hint:r.i18n.translate("xpack.profiling.storageExplorer.summary.numberOfHosts.hint",{defaultMessage:"Total number of Universal Profiling host agents reporting into the deployment."})}];return Object(h.jsx)(b.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(h.jsx)(b.EuiFlexGroup,{justifyContent:"spaceBetween"},c.map(((e,n)=>Object(h.jsx)(b.EuiFlexItem,{grow:!1,key:n},Object(h.jsx)(b.EuiStat,{description:e.hint?Object(h.jsx)(Q.a,{label:e.title,hint:e.hint,labelSize:"xs"}):Object(h.jsx)(b.EuiText,{size:"xs"},e.title),titleSize:"s",title:Object(h.jsx)("span",{"data-test-subj":e.dataTestSubj},e.value),isLoading:t})))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSummaryGoToUniversalProfilingLink",href:u.link("/stacktraces/{topNType}",{path:{topNType:a.g.Hosts},query:{rangeFrom:i,rangeTo:o,kuery:s,limit:10,displayAs:a.d.StackTraces}})},r.i18n.translate("xpack.profiling.storageExplorer.summary.universalProfilingLink",{defaultMessage:"Go to Universal Profiling"}))),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSummaryGoToIndexManagementLink",href:l.http.basePath.prepend("/app/management/data/index_management/data_streams")},r.i18n.translate("xpack.profiling.storageExplorer.summary.indexManagement",{defaultMessage:"Go to Index Management"})))))))}const Je={"/":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.profiling",{defaultMessage:"Universal Profiling"}),href:"/"},Object(h.jsx)(o.b,null)),children:{"/settings":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.settings",{defaultMessage:"Settings"}),href:"/settings"},Object(h.jsx)((function(){const e=Object(fe.useUiTracker)({app:"profiling"}),{start:{core:{docLinks:t,notifications:n}}}=Object(x.a)(),{handleFieldChange:i,settingsEditableConfig:a,unsavedChanges:o,saveAll:s,isSaving:u,cleanUnsavedChanges:c}=Object(fe.useEditableSettings)("profiling",[...de,...he]);return Object(h.jsx)(y.b,{hideSearchBar:!0},Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiTitle,null,Object(h.jsx)(b.EuiText,null,r.i18n.translate("xpack.profiling.settings.title",{defaultMessage:"Advanced Settings"}))),Object(h.jsx)(b.EuiSpacer,null),[{label:r.i18n.translate("xpack.profiling.settings.co2Section",{defaultMessage:"Custom CO2 settings"}),description:{title:r.i18n.translate("xpack.profiling.settings.co2.title",{defaultMessage:"The Universal Profiling host agent can detect if your machine is running on AWS, Azure, or Google Cloud Platform."}),subtitle:Object(h.jsx)(ce.FormattedMessage,{id:"xpack.profiling.settings.co2.subtitle",defaultMessage:"For machines running on AWS, Universal Profiling applies the appropriate {regionalCarbonIntensityLink} for your instance's AWS region and the current AWS data center {pue}.",values:{regionalCarbonIntensityLink:Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSettingsLink",href:"https://ela.st/grid-datasheet",target:"_blank"},r.i18n.translate("xpack.profiling.settings.co2.subtitle.link",{defaultMessage:"regional carbon intensity"})),pue:Object(h.jsx)("strong",null,r.i18n.translate("xpack.profiling.settings.co2.subtitle.pue",{defaultMessage:"PUE"}))}}),text:r.i18n.translate("xpack.profiling.settings.co2.text",{defaultMessage:"For all other configurations, Universal Profiling uses the following default configurations. You can update these configurations as needed."})},settings:de},{label:r.i18n.translate("xpack.profiling.settings.costSection",{defaultMessage:"Custom cost settings"}),description:{title:Object(h.jsx)(ce.FormattedMessage,{id:"xpack.profiling.settings.cost.title",defaultMessage:"Universal Profiling sets the cost for AWS configurations using the {awsPriceList} for your EC2 instance type.",values:{awsPriceList:Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingSettingsLink",href:"https://docs.aws.amazon.com/aws-cost-management/latest/APIReference/Welcome.html#Welcome_AWS_Price_List_Service",target:"_blank"},r.i18n.translate("xpack.profiling.settings.cost.subtitle.link",{defaultMessage:"AWS price list"}))}})},settings:he}].map((e=>Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiPanel,{key:e.label,grow:!1,hasShadow:!1,hasBorder:!0,paddingSize:"none"},Object(h.jsx)(b.EuiPanel,{color:"subdued",hasShadow:!1},Object(h.jsx)(b.EuiTitle,{size:"s"},Object(h.jsx)(b.EuiText,null,e.label))),Object(h.jsx)(b.EuiPanel,{hasShadow:!1},e.description?Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiFlexGroup,{gutterSize:"xs"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiIcon,{type:"iInCircle"})),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"xs"},e.description.title&&Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{size:"s"},e.description.title)),e.description.subtitle&&Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{size:"s"},e.description.subtitle)),e.description.text&&Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiText,{size:"s"},Object(h.jsx)("strong",null,e.description.text)))))),Object(h.jsx)(b.EuiSpacer,{size:"m"})):null,e.settings.map((e=>{const r=a[e];return Object(h.jsx)(le.LazyField,{key:e,setting:r,handleChange:i,enableSaving:!0,docLinks:t.links,toasts:n.toasts,unsavedChanges:o[e]})})))),Object(h.jsx)(b.EuiSpacer,null)))),!Object(X.isEmpty)(o)&&Object(h.jsx)(pe,{isLoading:u,onDiscardChanges:c,onSave:async function(){try{const t=Object.keys(o).some((e=>a[e].requiresPageReload));await s(),e({metric:"general_settings_save"}),t&&window.location.reload()}catch(e){const t=e;n.toasts.addDanger({title:r.i18n.translate("xpack.profiling.settings.save.error",{defaultMessage:"An error occurred while saving the settings"}),text:t.message})}},saveLabel:r.i18n.translate("xpack.profiling.settings.saveButton",{defaultMessage:"Save changes"}),unsavedChangesCount:Object.keys(o).length})))}),null))},"/add-data-instructions":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.addDataView",{defaultMessage:"Add profiling data"}),href:"/add-data-instructions"},Object(h.jsx)(m.b,null)),params:s.type({query:s.type({selectedTab:s.union([s.literal(m.a.Binary),s.literal(m.a.Deb),s.literal(m.a.Docker),s.literal(m.a.ElasticAgentIntegration),s.literal(m.a.Kubernetes),s.literal(m.a.RPM),s.literal(m.a.Symbols)])})}),defaults:{query:{selectedTab:m.a.Kubernetes}}},"/delete_data_instructions":{element:Object(h.jsx)((function(){const{start:{core:{docLinks:e}}}=Object(x.a)();return Object(h.jsx)(y.b,{tabs:[],restrictWidth:!0,hideSearchBar:!0},Object(h.jsx)("div",{style:{display:"flex",flexGrow:1,justifyContent:"center",alignItems:"center"}},Object(h.jsx)(b.EuiCard,{style:{flexGrow:0,maxWidth:"500px"},icon:Object(h.jsx)(b.EuiIcon,{color:"danger",size:"xxl",type:"warning"}),title:"You have existing profiling data",description:"To proceed with the Universal Profiling setup, please delete existing profiling data following the steps described in the link below.",footer:Object(h.jsx)("div",null,Object(h.jsx)(b.EuiLink,{"data-test-subj":"profilingDeleteDataViewDeleteExistingProfilingDataLink",href:`${e.ELASTIC_WEBSITE_URL}/guide/en/observability/${e.DOC_LINK_VERSION}/profiling-upgrade.html#profiling-delete-data`,target:"_blank"},"Delete existing profiling data"))})))}),null)},"/":{children:{"/stacktraces/{topNType}":{element:Object(h.jsx)((function(){var e,t,n;const i=Object(O.a)(),o=Object(j.a)(),{path:s,query:u,path:{topNType:l},query:{rangeFrom:c,rangeTo:f,kuery:p,displayAs:d,limit:g}}=Object(v.b)("/stacktraces/{topNType}"),m=g||10,E=function({path:e,query:t,profilingRouter:n}){return[{label:r.i18n.translate("xpack.profiling.stackTracesView.threadsTabLabel",{defaultMessage:"Threads"}),topNType:a.g.Threads},{label:r.i18n.translate("xpack.profiling.stackTracesView.tracesTabLabel",{defaultMessage:"Traces"}),topNType:a.g.Traces},{label:r.i18n.translate("xpack.profiling.stackTracesView.hostsTabLabel",{defaultMessage:"Hosts"}),topNType:a.g.Hosts},{label:r.i18n.translate("xpack.profiling.stackTracesView.deploymentsTabLabel",{defaultMessage:"Deployments"}),topNType:a.g.Deployments},{label:r.i18n.translate("xpack.profiling.stackTracesView.containersTabLabel",{defaultMessage:"Containers"}),topNType:a.g.Containers}].map((r=>({label:r.label,isSelected:r.topNType===e.topNType,href:n.link("/stacktraces/{topNType}",{path:{topNType:r.topNType},query:t})})))}({path:s,query:u,profilingRouter:o}),w=E.find((e=>e.isSelected)),{services:{fetchTopN:k}}=Object(x.a)(),T=L({rangeFrom:c,rangeTo:f}),C=A((({http:e})=>l?k({http:e,type:l,timeFrom:T.inSeconds.start,timeTo:T.inSeconds.end,kuery:p}).then((e=>{const t=e.TotalCount,n=function({samples:e,totalCount:t,metadata:n,labels:r}){const i=new Map;for(let t=0;t<e.length;t++){const n=e[t];i.has(n.Category)||i.set(n.Category,[]),i.get(n.Category).push({Percentage:n.Percentage,Timestamp:n.Timestamp,Count:n.Count})}const a=[];for(const[e,s]of i){var o;const i=s.reduce(((e,{Count:t})=>e+(null!=t?t:0)),0);a.push({Category:e,Label:r[e]||e,Percentage:i/t*100,Series:s,Metadata:null!==(o=n[e])&&void 0!==o?o:[]})}const s=Object(b.euiPaletteColorBlind)({rotations:Math.ceil(a.length/10)});return Object(X.orderBy)(a,["Percentage","Category"],["desc","asc"]).map(((e,t)=>({...e,Color:me({category:e.Category,colors:s,subChartSize:a.length}),Index:t+1,Series:e.Series.map((t=>({...t,Category:e.Category})))})))}({samples:e.TopN,totalCount:t,metadata:e.Metadata,labels:e.Labels});return{charts:n}})):Promise.resolve({charts:[],metadata:{}})),[l,T.inSeconds.start,T.inSeconds.end,k,p]),{data:I}=C;return Object(h.jsx)(_e,{title:(null==w?void 0:w.label)||"",href:(null==w?void 0:w.href)||""},Object(h.jsx)(y.b,{tabs:E},Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!0},Object(h.jsx)(b.EuiPanel,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"m"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiButtonGroup,{idSelected:d,type:"single",onChange:e=>{o.push(i,{path:s,query:{...u,displayAs:e}})},options:[{id:a.d.StackTraces,iconType:"visLine",label:r.i18n.translate("xpack.profiling.stackTracesView.stackTracesCountButton",{defaultMessage:"Stack traces"})},{id:a.d.Percentage,iconType:"percent",label:r.i18n.translate("xpack.profiling.stackTracesView.percentagesButton",{defaultMessage:"Percentages"})}],legend:r.i18n.translate("xpack.profiling.stackTracesView.displayOptionLegend",{defaultMessage:"Display option"})})),Object(h.jsx)(b.EuiFlexItem,{style:{alignContent:"center"}},Object(h.jsx)(M,S()({size:"xl"},C,{style:{height:400}}),Object(h.jsx)(Ae,{height:400,charts:null!==(e=null==I?void 0:I.charts)&&void 0!==e?e:[],asPercentages:d===a.d.Percentage,onBrushEnd:e=>{o.push(i,{path:s,query:{...u,rangeFrom:e.rangeFrom,rangeTo:e.rangeTo}})},showFrames:l===a.g.Traces,onClick:l===a.g.Threads?function(e){o.push("/stacktraces/{topNType}",we({query:u,topNType:s.topNType,category:e}))}:void 0})))))),Object(h.jsx)(b.EuiFlexItem,{grow:!0},Object(h.jsx)(M,S()({size:"m",mono:!0},C,{style:{minHeight:200}}),Object(h.jsx)(Fe,{charts:null!==(t=null==I?void 0:I.charts)&&void 0!==t?t:[],limit:m,showFrames:l===a.g.Traces}))),(null!==(n=null==I?void 0:I.charts.length)&&void 0!==n?n:0)>m&&Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiButton,{"data-test-subj":"profilingStackTracesViewShowMoreButton",onClick:()=>{o.push(i,{path:s,query:{...u,limit:m+10}})}},r.i18n.translate("xpack.profiling.stackTracesView.showMoreButton",{defaultMessage:"Show more"}))))))}),null),params:s.type({path:s.type({topNType:s.union([s.literal(a.g.Containers),s.literal(a.g.Deployments),s.literal(a.g.Hosts),s.literal(a.g.Threads),s.literal(a.g.Traces)])}),query:s.type({displayAs:s.union([s.literal(a.d.StackTraces),s.literal(a.d.Percentage)]),limit:i.c})}),defaults:{query:{displayAs:a.d.StackTraces,limit:"10"}}},"/stacktraces":{element:Object(h.jsx)(g,{pathname:"/stacktraces/threads"})},"/flamegraphs":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.flamegraphs",{defaultMessage:"Flamegraphs"}),href:"/flamegraphs/flamegraph"},Object(h.jsx)((function({children:e}){const{query:t}=Object(v.b)("/flamegraphs/*"),n=Object(O.a)(),i=Object(j.a)();if("/flamegraphs"===n)return Object(h.jsx)(g,{pathname:"/flamegraphs/flamegraph"});const a="/flamegraphs/differential"===n,o=[{label:r.i18n.translate("xpack.profiling.flameGraphsView.flameGraphTabLabel",{defaultMessage:"Flamegraph"}),isSelected:!a,href:i.link("/flamegraphs/flamegraph",{query:t})},{label:r.i18n.translate("xpack.profiling.flameGraphsView.differentialFlameGraphTabLabel",{defaultMessage:"Differential flamegraph"}),isSelected:a,href:i.link("/flamegraphs/differential",{query:{...t,comparisonRangeFrom:t.rangeFrom,comparisonRangeTo:t.rangeTo,comparisonKuery:t.kuery}})}];return Object(h.jsx)(y.b,{tabs:o,hideSearchBar:a},e)}),null,Object(h.jsx)(o.b,null))),children:{"/flamegraphs/flamegraph":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.flamegraph",{defaultMessage:"Flamegraph"}),href:"/flamegraphs/flamegraph"},Object(h.jsx)((function(){const{query:e,query:{rangeFrom:t,rangeTo:n,kuery:r,searchText:i}}=Object(v.b)("/flamegraphs/flamegraph"),a=L({rangeFrom:t,rangeTo:n}),{services:{fetchElasticFlamechart:o}}=Object(x.a)(),s=A((({http:e})=>o({http:e,timeFrom:new Date(a.start).getTime(),timeTo:new Date(a.end).getTime(),kuery:r})),[o,a.start,a.end,r]),{data:u}=s,l=Object(O.a)(),c=Object(j.a)();return Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(M,S()({},s,{style:{height:"100%"},size:"xl"}),Object(h.jsx)(k.a,{id:"flamechart",primaryFlamegraph:u,searchText:i,onChangeSearchText:function(t){c.push(l,{query:{...e,searchText:t}})}}))))}),null)),params:s.type({query:s.partial({searchText:s.string})})},"/flamegraphs/differential":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.differentialFlamegraph",{defaultMessage:"Differential flamegraph"}),href:"/flamegraphs/differential"},Object(h.jsx)((function(){var e,t;const{query:n,query:{rangeFrom:r,rangeTo:i,kuery:a,comparisonRangeFrom:o,comparisonRangeTo:s,comparisonKuery:u,comparisonMode:l,baseline:c=1,comparison:f=1,normalizationMode:d,searchText:g}}=Object(v.b)("/flamegraphs/differential"),m=Object(O.a)(),y=Object(j.a)(),E=L({rangeFrom:r,rangeTo:i}),T=L({rangeFrom:o,rangeTo:s,optional:!0}),{services:{fetchElasticFlamechart:C}}=Object(x.a)(),I=A((({http:e})=>Promise.all([C({http:e,timeFrom:new Date(E.start).getTime(),timeTo:new Date(E.end).getTime(),kuery:a}),T.start&&T.end?C({http:e,timeFrom:new Date(T.start).getTime(),timeTo:new Date(T.end).getTime(),kuery:u}):Promise.resolve(void 0)]).then((([e,t])=>({primaryFlamegraph:e,comparisonFlamegraph:t})))),[C,E.start,E.end,a,T.start,T.end,u]),F=E.inSeconds.end-E.inSeconds.start,N=(new Date(T.end).getTime()-new Date(T.start).getTime())/1e3,_=F/N,P={baselineScale:c,baselineTime:1,comparisonScale:f,comparisonTime:_},{data:R}=I,D=d===p.c.Time;return Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiPanel,{hasShadow:!1,color:"subdued"},Object(h.jsx)(z,{comparisonMode:l,normalizationMode:d,normalizationOptions:P}),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(Y,{isLoading:I.status===w.a.Loading,baseValue:null!==(e=I.data)&&void 0!==e&&e.primaryFlamegraph?{duration:F,selfCPU:I.data.primaryFlamegraph.SelfCPU,totalCPU:I.data.primaryFlamegraph.TotalCPU,totalCount:I.data.primaryFlamegraph.TotalSamples,scaleFactor:D?1:c,totalAnnualCO2Kgs:I.data.primaryFlamegraph.TotalAnnualCO2KgsItems[0],totalAnnualCostUSD:I.data.primaryFlamegraph.TotalAnnualCostsUSDItems[0]}:void 0,comparisonValue:null!==(t=I.data)&&void 0!==t&&t.comparisonFlamegraph?{duration:N,selfCPU:I.data.comparisonFlamegraph.SelfCPU,totalCPU:I.data.comparisonFlamegraph.TotalCPU,totalCount:I.data.comparisonFlamegraph.TotalSamples,scaleFactor:D?_:f,totalAnnualCO2Kgs:I.data.comparisonFlamegraph.TotalAnnualCO2KgsItems[0],totalAnnualCostUSD:I.data.comparisonFlamegraph.TotalAnnualCostsUSDItems[0]}:void 0}))),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(M,S()({},I,{style:{height:"100%"},size:"xl"}),Object(h.jsx)(k.a,{id:"flamechart",primaryFlamegraph:null==R?void 0:R.primaryFlamegraph,comparisonFlamegraph:null==R?void 0:R.comparisonFlamegraph,comparisonMode:l,baseline:D?1:c,comparison:D?_:f,searchText:g,onChangeSearchText:function(e){y.push(m,{query:{...n,searchText:e}})}}))))}),null)),params:s.type({query:s.intersection([s.type({comparisonRangeFrom:s.string,comparisonRangeTo:s.string,comparisonKuery:s.string,comparisonMode:s.union([s.literal(p.a.Absolute),s.literal(p.a.Relative)]),normalizationMode:s.union([s.literal(p.c.Scale),s.literal(p.c.Time)])}),s.partial({baseline:i.c,comparison:i.c,searchText:s.string})])}),defaults:{query:{comparisonRangeFrom:"now-15m",comparisonRangeTo:"now",comparisonKuery:"",comparisonMode:p.a.Absolute,normalizationMode:p.c.Time}}}}},"/functions":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.functions",{defaultMessage:"Functions"}),href:"/functions/topn"},Object(h.jsx)((function({children:e}){const{query:t}=Object(v.b)("/functions/*"),n=Object(O.a)(),i=Object(j.a)();if("/functions"===n)return Object(h.jsx)(g,{pathname:"/functions/topn"});const o="/functions/differential"===n,s=[{label:r.i18n.translate("xpack.profiling.functionsView.functionsTabLabel",{defaultMessage:"TopN functions"}),isSelected:!o,href:i.link("/functions/topn",{query:t})},{label:r.i18n.translate("xpack.profiling.functionsView.differentialFunctionsTabLabel",{defaultMessage:"Differential TopN functions"}),isSelected:o,href:i.link("/functions/differential",{query:{...t,comparisonRangeFrom:t.rangeFrom,comparisonRangeTo:t.rangeTo,comparisonKuery:t.kuery,normalizationMode:"normalizationMode"in t?t.normalizationMode:p.c.Time,comparisonSortField:"comparisonSortField"in t?t.comparisonSortField:a.e.ComparisonRank,comparisonSortDirection:"comparisonSortDirection"in t?t.comparisonSortDirection:"asc"}})}];return Object(h.jsx)(y.b,{tabs:s,hideSearchBar:o},e)}),null,Object(h.jsx)(o.b,null))),params:s.type({query:s.type({sortField:a.u,sortDirection:s.union([s.literal("asc"),s.literal("desc")])})}),defaults:{query:{sortField:a.f.Rank,sortDirection:"asc"}},children:{"/functions/topn":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.topnFunctions",{defaultMessage:"Top N"}),href:"/functions/topn"},Object(h.jsx)((function(){const{query:e}=Object(v.b)("/functions/topn"),{rangeFrom:t,rangeTo:n,kuery:r,sortDirection:i,sortField:a,pageIndex:o=0}=e,s=L({rangeFrom:t,rangeTo:n}),{services:{fetchTopNFunctions:u}}=Object(x.a)(),c=A((({http:e})=>u({http:e,timeFrom:new Date(s.start).getTime(),timeTo:new Date(s.end).getTime(),startIndex:0,endIndex:1e5,kuery:r})),[u,s.start,s.end,r]),f=Object(j.a)();return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(M,S()({},c,{size:"xl",alignTop:!0}),Object(h.jsx)(ue.a,{topNFunctions:c.data,totalSeconds:s.inSeconds.end-s.inSeconds.start,isDifferentialView:!1,onFrameClick:function(t){f.push("/flamegraphs/flamegraph",{path:{},query:{...e,searchText:t}})},pageIndex:o,onChangePage:function(t){f.push("/functions/topn",{path:{},query:{...e,pageIndex:t}})},sortField:a,sortDirection:i,onChangeSort:function(t){f.push("/functions/topn",{path:{},query:{...e,sortField:t.id,sortDirection:t.direction}})}})))))))}),null)),params:s.type({query:s.partial({pageIndex:i.c})})},"/functions/differential":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.differentialFunctions",{defaultMessage:"Differential Top N"}),href:"/functions/differential"},Object(h.jsx)((function(){const{query:e}=Object(v.b)("/functions/differential"),{rangeFrom:t,rangeTo:n,kuery:r,sortDirection:i,sortField:a,comparisonKuery:o,normalizationMode:s,comparisonRangeFrom:u,comparisonRangeTo:c,baseline:f=1,comparison:d=1,pageIndex:g=0,comparisonSortDirection:m,comparisonSortField:y}=e,E=L({rangeFrom:t,rangeTo:n}),k=L({rangeFrom:u,rangeTo:c,optional:!0}),T=E.inSeconds.end-E.inSeconds.start,C=(new Date(k.end).getTime()-new Date(k.start).getTime())/1e3,I=T/C,F={baselineScale:f,baselineTime:1,comparisonScale:d,comparisonTime:I},{services:{fetchTopNFunctions:N}}=Object(x.a)(),_=A((({http:e})=>N({http:e,timeFrom:new Date(E.start).getTime(),timeTo:new Date(E.end).getTime(),startIndex:0,endIndex:1e5,kuery:r})),[N,E.start,E.end,r]),R=A((({http:e})=>{if(k.start&&k.end)return N({http:e,timeFrom:new Date(k.start).getTime(),timeTo:new Date(k.end).getTime(),startIndex:0,endIndex:1e5,kuery:o})}),[k.start,k.end,N,o]),z=Object(O.a)(),D=Object(j.a)(),U=s===p.c.Time;return Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiPanel,{hasShadow:!1,color:"subdued"},Object(h.jsx)(P,null),Object(h.jsx)(b.EuiHorizontalRule,null),Object(h.jsx)(p.b,{mode:s,options:F,onChange:function(t,n){D.push(z,{path:z,query:t===p.c.Scale?{...e,baseline:n.baselineScale,comparison:n.comparisonScale,normalizationMode:t}:{...e,normalizationMode:t}})}}),Object(h.jsx)(b.EuiSpacer,null),Object(h.jsx)(Y,{isLoading:_.status===w.a.Loading||R.status===w.a.Loading,baseValue:_.data?{duration:T,selfCPU:_.data.selfCPU,totalCount:_.data.TotalCount,totalCPU:_.data.totalCPU,scaleFactor:U?1:f,totalAnnualCO2Kgs:_.data.totalAnnualCO2Kgs,totalAnnualCostUSD:_.data.totalAnnualCostUSD}:void 0,comparisonValue:R.data?{duration:C,selfCPU:R.data.selfCPU,totalCount:R.data.TotalCount,totalCPU:R.data.totalCPU,scaleFactor:U?I:d,totalAnnualCO2Kgs:R.data.totalAnnualCO2Kgs,totalAnnualCostUSD:R.data.totalAnnualCostUSD}:void 0}))),Object(h.jsx)(b.EuiFlexItem,null,Object(h.jsx)(M,S()({},R.status===w.a.Loading?R:_,{size:"xl",alignTop:!0}),Object(h.jsx)(se,{base:_.data,comparison:R.data,baselineScaleFactor:U?I:d,comparisonScaleFactor:U?1:f,totalSeconds:T,pageIndex:g,onChangePage:function(t){D.push("/functions/differential",{path:{},query:{...e,pageIndex:t}})},onChangeSort:function(t){D.push("/functions/differential",{path:{},query:{...e,...t}})},sortField:a,sortDirection:i,onFrameClick:function(t){D.push("/flamegraphs/flamegraph",{path:{},query:{...e,searchText:t}})},comparisonSortDirection:m,comparisonSortField:y})))))}),null)),params:s.type({query:s.intersection([s.type({comparisonRangeFrom:s.string,comparisonRangeTo:s.string,comparisonKuery:s.string,normalizationMode:s.union([s.literal(p.c.Scale),s.literal(p.c.Time)]),comparisonSortField:a.t,comparisonSortDirection:s.union([s.literal("asc"),s.literal("desc")])}),s.partial({baseline:i.c,comparison:i.c,pageIndex:i.c})])}),defaults:{query:{comparisonRangeFrom:"now-15m",comparisonRangeTo:"now",comparisonKuery:"",normalizationMode:p.c.Time,comparisonSortField:a.e.ComparisonRank,comparisonSortDirection:"asc"}}}}},"/storage-explorer":{element:Object(h.jsx)(_e,{title:r.i18n.translate("xpack.profiling.breadcrumb.storageExplorer",{defaultMessage:"Storage explorer"}),href:"/storage-explorer"},Object(h.jsx)((function(){var e;const{query:t}=Object(v.b)("/storage-explorer"),{rangeFrom:n,rangeTo:i,kuery:a,indexLifecyclePhase:o}=t,s=L({rangeFrom:n,rangeTo:i}),[l,c]=Object(u.useState)("host_breakdown"),{services:{fetchStorageExplorerSummary:f}}=Object(x.a)(),p=A((({http:e})=>f({http:e,timeFrom:s.inSeconds.start,timeTo:s.inSeconds.end,kuery:a,indexLifecyclePhase:o})),[f,s.inSeconds.start,s.inSeconds.end,a,o]),d=(null===(e=p.data)||void 0===e?void 0:e.totalNumberOfDistinctProbabilisticValues)||0,g=d>1;return Object(h.jsx)(y.b,{hideSearchBar:!0,pageTitle:r.i18n.translate("xpack.profiling.storageExplorer.title",{defaultMessage:"Storage Explorer"}),showBetaBadge:!0},Object(h.jsx)(b.EuiFlexGroup,{direction:"column"},Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiPanel,{hasShadow:!1,color:"subdued"},Object(h.jsx)(N.a,null),Object(h.jsx)(b.EuiHorizontalRule,null),Object(h.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"}},Object(h.jsx)(Xe,null)))),g&&Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(Ve,{totalNumberOfDistinctProbabilisticValues:d})),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(Ze,{data:p.data,isLoading:p.status===w.a.Loading})),Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(b.EuiTabs,null,Object(h.jsx)(b.EuiTab,{onClick:()=>{c("host_breakdown")},isSelected:"host_breakdown"===l},r.i18n.translate("xpack.profiling.storageExplorer.tabs.hostBreakdown",{defaultMessage:"Host agent breakdown"})),Object(h.jsx)(b.EuiTab,{onClick:()=>{c("data_breakdown")},isSelected:"data_breakdown"===l},r.i18n.translate("xpack.profiling.storageExplorer.tabs.dataBreakdown",{defaultMessage:"Data breakdown"})))),"host_breakdown"===l?Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(Ye,{hasDistinctProbabilisticValues:g})):null,"data_breakdown"===l?Object(h.jsx)(b.EuiFlexItem,{grow:!1},Object(h.jsx)(Ge,null)):null))}),null)),params:s.type({query:f}),defaults:{query:{indexLifecyclePhase:c.All}}},"/":{element:Object(h.jsx)(g,{pathname:"/stacktraces/threads"})}},element:Object(h.jsx)(o.b,null),params:s.type({query:s.type({rangeFrom:s.string,rangeTo:s.string,kuery:s.string})}),defaults:{query:{kuery:""}}}}}},Qe=Object(o.e)(Je)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return f}));var r=n(0),i=n(3),a=n(39);function o(...e){return{...new r.Type("merge",(t=>e.every((e=>e.is(t)))),((t,n)=>{const o=[],s=[];e.map(((e,r)=>e.validate(t,n.concat({key:String(r),type:e,actual:t})))).forEach((e=>{Object(a.isLeft)(e)?o.push(...e.left):s.push(e.right)}));const u=Object(i.merge)({},...s);return o.length>0?r.failures(o):r.success(u)}),(t=>e.reduce(((e,t)=>t.encode(e)),t))),_tag:"MergeType",types:e}}const s=["StringType","NumberType","BooleanType","ArrayType","DictionaryType","InterfaceType","PartialType","UnionType","IntersectionType","MergeType"],u=e=>"_tag"in e&&s.includes(e._tag);function l(e){if(!u(e))return e;switch(e._tag){case"ArrayType":return r.array(l(e.type));case"DictionaryType":return r.dictionary(e.domain,l(e.codomain));case"InterfaceType":return r.exact(r.interface(Object(i.mapValues)(e.props,l)));case"PartialType":return r.exact(r.partial(Object(i.mapValues)(e.props,l)));case"IntersectionType":return r.intersection(e.types.map(l));case"UnionType":return r.union(e.types.map(l));case"MergeType":return o(l(e.types[0]),l(e.types[1]));default:return e}}const c=e=>""===e;r.brand(r.string,(e=>{return!c(t=e)&&!t.includes(" ")&&!t.split(",").some(c);var t}),"IndexPattern"),new r.Type("JSON",r.any.is,((e,t)=>a.either.chain(r.string.validate(e,t),(n=>{try{return r.success(JSON.parse(n))}catch(n){return r.failure(e,t)}}))),(e=>JSON.stringify(e))),new r.Type("isoToEpochRt",r.number.is,((e,t)=>a.either.chain(r.string.validate(e,t),(n=>{const i=new Date(n).getTime();return isNaN(i)?r.failure(e,t):r.success(i)}))),(e=>new Date(e).toISOString()));const f=new r.Type("ToNumber",r.number.is,((e,t)=>{const n=Number(e);return isNaN(n)?r.failure(e,t):r.success(n)}),r.identity);new r.Type("ToBoolean",r.boolean.is,(e=>{let t;return t="string"==typeof e?"true"===e:!!e,r.success(t)}),r.identity),r.brand(r.string,(e=>e.length>0),"NonEmptyString");var p=n(51),d=n(24),h=n.n(d);r.brand(r.string,(e=>h()(e,!0).isValid()),"Date");var g=n(30),m=n.n(g);new r.Type("datemath",r.string.is,((e,t)=>Object(p.pipe)(r.string.validate(e,t),Object(a.chain)((e=>(e=>{const t=m.a.parse(e);return!(!t||!t.isValid())})(e)?r.success(e):r.failure(e,t))))),String),n(59);const b=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3,9}Z$/,x=new r.Type("DateFromStringOrNumber",(e=>"string"==typeof e),((e,t)=>"string"==typeof e?b.test(e)?r.success(e):r.failure(e,t):Object(p.pipe)(r.number.validate(e,t),Object(a.chain)((e=>{const n=h()(e);return n.isValid()?r.success(n.toISOString()):r.failure(e,t)})))),String),y=r.type({time:x,tiebreaker:r.number});r.intersection([y,r.partial({gid:r.string,fromAutoReload:r.boolean})])},function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(15),i=n(13),a=n.n(i),o=n(2),s=n(6),u=n(16),l=n(33),c=n(35),f=n(14);function p({frame:e}){const{observabilityAIAssistant:{ObservabilityAIAssistantContextualInsight:t}}=Object(c.a)().start,n=Object(i.useMemo)((()=>{if(null!=e&&e.functionName&&e.exeFileName){const t=e.functionName,n=e.exeFileName;return[{"@timestamp":(new Date).toISOString(),message:{role:l.MessageRole.User,content:`I am a software engineer. I am trying to understand what a function in a particular\n            software library does.\n\n            The library is: ${n}\n            The function is: ${t}\n\n            Your have two tasks. Your first task is to desribe what the library is and what its use cases are, and to\n            describe what the function does. The output format should look as follows:\n\n            Library description: Provide a concise description of the library\n            Library use-cases: Provide a concise description of what the library is typically used for.\n            Function description: Provide a concise, technical, description of what the function does.\n\n            Assume the function ${t} from the library ${n} is consuming significant CPU resources.\n            Your second task is to suggest ways to optimize or improve the system that involve the ${t} function from the\n            ${n} library. Types of improvements that would be useful to me are improvements that result in:\n\n            - Higher performance so that the system runs faster or uses less CPU\n            - Better memory efficient so that the system uses less RAM\n            - Better storage efficient so that the system stores less data on disk.\n            - Better network I/O efficiency so that less data is sent over the network\n            - Better disk I/O efficiency so that less data is read and written from disk\n\n            Make up to five suggestions. Your suggestions must meet all of the following criteria:\n            1. Your suggestions should detailed, technical and include concrete examples.\n            2. Your suggestions should be specific to improving performance of a system in which the ${t} function from\n            the ${n} library is consuming significant CPU.\n            3. If you suggest replacing the function or library with a more efficient replacement you must suggest at least\n            one concrete replacement.\n\n            If you know of fewer than five ways to improve the performance of a system in which the ${t} function from the\n            ${n} library is consuming significant CPU, then provide fewer than five suggestions. If you do not know of any\n            way in which to improve the performance then say "I do not know how to improve the performance of systems where\n            this function is consuming a significant amount of CPU".\n\n            Do not suggest using a CPU profiler. I have already profiled my code. The profiler I used is Elastic Universal Profiler.\n            If there is specific information I should look for in the profiler output then tell me what information to look for\n            in the output of Elastic Universal Profiler.\n\n            You must not include URLs, web addresses or websites of any kind in your output.\n\n            If you have suggestions, the output format should look as follows:\n\n            Here are some suggestions as to how you might optimize your system if ${t} in ${n} is consuming\n            significant CPU resources:\n            1. Insert first suggestion\n            2. Insert second suggestion`}}]}}),[null==e?void 0:e.functionName,null==e?void 0:e.exeFileName]);return Object(f.jsx)(a.a.Fragment,null,t&&n?Object(f.jsx)(t,{messages:n,title:o.i18n.translate("xpack.profiling.frameInformationWindow.optimizeFunction",{defaultMessage:"Optimize function"})}):null)}function d({children:e}){return Object(f.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"m"},Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(r.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(f.jsx)(r.EuiFlexItem,{grow:!1},Object(f.jsx)(r.EuiTitle,{size:"xs"},Object(f.jsx)("h2",null,o.i18n.translate("xpack.profiling.flameGraphInformationWindowTitle",{defaultMessage:"Frame information"})))))),Object(f.jsx)(r.EuiFlexItem,null,e))}var h=n(55),g=n(24),m=n.n(g);function b(e){return 0===e?o.i18n.translate("xpack.profiling.zeroSeconds",{defaultMessage:"0 seconds"}):m.a.duration(1e3*e).humanize()}m.a.relativeTimeRounding((e=>Math.round(e*Math.pow(10,2))/Math.pow(10,2))),m.a.relativeTimeThreshold("y",365),m.a.relativeTimeThreshold("M",12),m.a.relativeTimeThreshold("w",4),m.a.relativeTimeThreshold("d",31),m.a.relativeTimeThreshold("h",24),m.a.relativeTimeThreshold("m",60),m.a.relativeTimeThreshold("s",60),m.a.relativeTimeThreshold("ss",0);var x=n(48),y=n(45),v=n(56),j=n(57),O=n(47),E=n(7);function S({rows:e,prependString:t="",...n}){return Object(f.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map(((i,o)=>Object(f.jsx)(a.a.Fragment,{key:o},Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(r.EuiFlexGroup,{direction:"row"},Object(f.jsx)(r.EuiFlexItem,{grow:!0,style:{display:"flex",flexDirection:"row"}},i.label,":"),Object(f.jsx)(r.EuiFlexItem,{grow:!1,style:{alignSelf:"flex-end",overflowWrap:"anywhere"},"data-test-subj":`${n["data-test-subj"]}_${i["data-test-subj"]}`},t,i.value))),o<e.length-1?Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(r.EuiHorizontalRule,{size:"full",margin:"none"})):void 0))))}var w=n(22),M=n(41),k=n(36),T=n(52);function C({frameType:e}){const t=Object(s.s)({frameType:e}),n=Object(k.a)(),{docLinks:i}=Object(c.a)().start.core;return"NATIVE"===t?Object(f.jsx)(r.EuiCallOut,{title:o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.native.title",{defaultMessage:"Missing symbols"}),color:"warning",iconType:"help"},Object(f.jsx)("p",null,Object(f.jsx)(w.FormattedMessage,{id:"xpack.profiling.frameInformationWindow.missingSymbols.native",defaultMessage:"To see function names and line numbers in traces of applications written in programming languages that compile to native code (C, C++, Rust, Go, etc.), you need to push symbols to the cluster using the elastic-profiling binary. {readMore}, or download the binary below.",values:{readMore:Object(f.jsx)(r.EuiLink,{"data-test-subj":"profilingMissingSymbolsCalloutReadMoreLink",href:`${i.ELASTIC_WEBSITE_URL}/guide/en/observability/${i.DOC_LINK_VERSION}/profiling-add-symbols.html`,target:"_blank"},o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.native.readMore",{defaultMessage:"Read more"}))}})),Object(f.jsx)(r.EuiButton,{"data-test-subj":"profilingMissingSymbolsCalloutUploadSymbolsButton",href:n.link("/add-data-instructions",{query:{selectedTab:T.a.Symbols}}),color:"warning"},o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.native.downloadBinary",{defaultMessage:"Upload Symbols"}))):Object(f.jsx)(r.EuiCallOut,{title:o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.interpreted.title",{defaultMessage:"Missing symbols error"}),color:"warning",iconType:"help"},Object(f.jsx)("p",null,o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.interpreted",{defaultMessage:"Symbols are not available because of an error in the unwinder for this language or an unknown error with the interpreter."})),Object(f.jsx)(r.EuiButton,{"data-test-subj":"profilingMissingSymbolsCalloutReportAProblemButton",href:M.a,target:"_blank",color:"warning"},o.i18n.translate("xpack.profiling.frameInformationWindow.missingSymbols.interpreted.reportProblem",{defaultMessage:"Report a problem"})))}function I({frame:e,totalSamples:t,totalSeconds:n,showSymbolsStatus:i=!0}){const a=Object(O.b)(),{start:{core:l}}=Object(c.a)(),g=l.uiSettings.get(u.profilingUseLegacyCo2Calculation);if(!e)return Object(f.jsx)(d,null,Object(f.jsx)(r.EuiText,null,o.i18n.translate("xpack.profiling.frameInformationWindow.selectFrame",{defaultMessage:"Click on a frame to display more information"})));const m=Object(s.r)({sourceFilename:e.sourceFileName,sourceLine:e.sourceLine,exeFileName:e.exeFileName}),{fileID:w,frameType:M,exeFileName:k,addressOrLine:T,functionName:I,sourceFileName:F,sourceLine:L,countInclusive:A,countExclusive:N,selfAnnualCO2Kgs:_,totalAnnualCO2Kgs:P,selfAnnualCostUSD:R,totalAnnualCostUSD:z}=e,D=function({fileID:e,frameType:t,exeFileName:n,addressOrLine:r,functionName:i,sourceFileName:a,sourceLine:u}){const l=""===e&&0===r?"root":n,c=u>0?`#${u}`:"",f=[];return l?f.push({"data-test-subj":"executable",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.executableLabel",{defaultMessage:"Executable"}),value:l}):f.push({"data-test-subj":"frameType",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.frameTypeLabel",{defaultMessage:"Frame type"}),value:Object(s.k)(t)}),f.push({"data-test-subj":"function",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.functionLabel",{defaultMessage:"Function"}),value:i||E.b}),f.push({"data-test-subj":"sourceFile",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.sourceFileLabel",{defaultMessage:"Source file"}),value:a?`${a}${c}`:E.b}),f}({fileID:w,frameType:M,exeFileName:k,addressOrLine:T,functionName:I,sourceFileName:F,sourceLine:L}),U=function({countInclusive:e,countExclusive:t,totalSamples:n,totalSeconds:r,calculateImpactEstimates:i,shouldUseLegacyCo2Calculation:a,selfAnnualCO2Kgs:s,totalAnnualCO2Kgs:u,selfAnnualCostUSD:l,totalAnnualCostUSD:c}){const{selfCPU:p,totalCPU:d}=i({countInclusive:e,countExclusive:t,totalSamples:n,totalSeconds:r}),g=O.a/r;return[{"data-test-subj":"totalCPU",label:Object(f.jsx)(j.a,{type:"total",labelSize:"s",iconSize:"s"}),value:Object(y.a)(d.percentage)},{"data-test-subj":"selfCPU",label:Object(f.jsx)(j.a,{type:"self",labelSize:"s",iconSize:"s"}),value:Object(y.a)(p.percentage)},{"data-test-subj":"samples",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.samplesInclusiveLabel",{defaultMessage:"Samples"}),value:Object(x.a)(e)},{"data-test-subj":"selfSamples",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.samplesExclusiveLabel",{defaultMessage:"Samples (excl. children)"}),value:Object(x.a)(t)},{"data-test-subj":"coreSeconds",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.coreSecondsInclusiveLabel",{defaultMessage:"Core-seconds"}),value:b(d.coreSeconds)},{"data-test-subj":"selfCoreSeconds",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.coreSecondsExclusiveLabel",{defaultMessage:"Core-seconds (excl. children)"}),value:b(p.coreSeconds)},{"data-test-subj":"annualizedCoreSeconds",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedCoreSecondsInclusiveLabel",{defaultMessage:"Annualized core-seconds"}),value:b(d.annualizedCoreSeconds)},{"data-test-subj":"annualizedSelfCoreSeconds",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedCoreSecondsExclusiveLabel",{defaultMessage:"Annualized core-seconds (excl. children)"}),value:b(p.annualizedCoreSeconds)},{"data-test-subj":"co2Emission",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.co2EmissionInclusiveLabel",{defaultMessage:"CO2 emission"}),value:Object(v.a)(a?d.co2:u/g,"kgs")},{"data-test-subj":"selfCo2Emission",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.co2EmissionExclusiveLabel",{defaultMessage:"CO2 emission (excl. children)"}),value:Object(v.a)(a?p.co2:s/g,"kgs")},{"data-test-subj":"annualizedCo2Emission",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedCo2InclusiveLabel",{defaultMessage:"Annualized CO2"}),value:Object(v.a)(a?d.annualizedCo2:u,"kgs")},{"data-test-subj":"annualizedSelfCo2Emission",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedCo2ExclusiveLabel",{defaultMessage:"Annualized CO2 (excl. children)"}),value:Object(v.a)(a?p.annualizedCo2:s,"kgs")},{"data-test-subj":"dollarCost",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.dollarCostInclusiveLabel",{defaultMessage:"Dollar cost"}),value:Object(h.a)(a?d.dollarCost:c/g)},{"data-test-subj":"selfDollarCost",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.dollarCostExclusiveLabel",{defaultMessage:"Dollar cost (excl. children)"}),value:Object(h.a)(a?p.dollarCost:l/g)},{"data-test-subj":"annualizedDollarCost",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedDollarCostInclusiveLabel",{defaultMessage:"Annualized dollar cost"}),value:Object(h.a)(a?d.annualizedDollarCost:c)},{"data-test-subj":"annualizedSelfDollarCost",label:o.i18n.translate("xpack.profiling.flameGraphInformationWindow.annualizedDollarCostExclusiveLabel",{defaultMessage:"Annualized dollar cost (excl. children)"}),value:Object(h.a)(a?p.annualizedDollarCost:l)}]}({countInclusive:A,countExclusive:N,totalSamples:t,totalSeconds:n,calculateImpactEstimates:a,shouldUseLegacyCo2Calculation:g,selfAnnualCO2Kgs:_,totalAnnualCO2Kgs:P,selfAnnualCostUSD:R,totalAnnualCostUSD:z});return Object(f.jsx)(d,null,Object(f.jsx)(r.EuiFlexGroup,{direction:"column"},Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(S,{"data-test-subj":"informationRows",rows:D})),Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(p,{frame:e})),i&&m!==s.a.SYMBOLIZED?Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(C,{frameType:e.frameType})):null,Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(r.EuiFlexGroup,{direction:"column"},Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(r.EuiTitle,{size:"xxs"},Object(f.jsx)("h2",null,o.i18n.translate("xpack.profiling.frameInformationWindow.impactEstimatesTitle",{defaultMessage:"Impact estimates"})))),Object(f.jsx)(r.EuiFlexItem,null,Object(f.jsx)(S,{"data-test-subj":"impactEstimates",rows:U}))))))}function F({onClose:e,...t}){return Object(f.jsx)(r.EuiFlyout,{onClose:e,size:"m"},Object(f.jsx)(r.EuiFlyoutBody,null,Object(f.jsx)(I,t)))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(15),i=n(2),a=n(6),o=n(13),s=n.n(o),u=n(16),l=n(55),c=n(56),f=n(35),p=n(71),d=n(58),h=n(14);function g({value:e,prepend:t,append:n}){const{label:i,color:a,icon:o}=Object(d.b)(e);return Object(h.jsx)(r.EuiTextColor,{color:a},t,o&&Object(h.jsx)(r.EuiIcon,{type:o,size:"s",color:a}),i,n)}function m({cpu:e,diffCPU:t}){const n=`${e.toFixed(2)}%`;return void 0===t||0===t?Object(h.jsx)(s.a.Fragment,null,n):Object(h.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(h.jsx)(r.EuiFlexItem,null,n),Object(h.jsx)(r.EuiFlexItem,null,Object(h.jsx)(g,{value:t,prepend:"(",append:")"})))}function b({samples:e,diffSamples:t,totalSamples:n}){const i=e.toLocaleString();if(void 0===t||0===t||0===n)return Object(h.jsx)(s.a.Fragment,null,i);const a=t/(e-t)*100,o=t/n*100;return Object(h.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(h.jsx)(r.EuiFlexItem,null,i),Object(h.jsx)(r.EuiFlexItem,null,Object(h.jsx)(g,{value:a,append:" rel"})),Object(h.jsx)(r.EuiFlexItem,null,Object(h.jsx)(g,{value:o,append:" abs"})))}function x({functionRow:e,columnId:t,totalCount:n,onFrameClick:r,setCellProps:i}){var o,s,d,g;const{start:{core:b}}=Object(f.a)(),x=b.uiSettings.get(u.profilingUseLegacyCo2Calculation);return t===a.f.Diff?Object(h.jsx)(v,{diff:e.diff,setCellProps:i}):t===a.f.Rank?Object(h.jsx)("div",null,e.rank):t===a.f.Frame?Object(h.jsx)(p.a,{frame:e.frame,onFrameClick:r}):t===a.f.Samples?Object(h.jsx)(y,{samples:e.samples,diffSamples:null===(j=e.diff)||void 0===j?void 0:j.samples,totalSamples:n,setCellProps:i}):t===a.f.SelfCPU?Object(h.jsx)(m,{cpu:e.selfCPUPerc,diffCPU:null===(O=e.diff)||void 0===O?void 0:O.selfCPUPerc}):t===a.f.TotalCPU?Object(h.jsx)(m,{cpu:e.totalCPUPerc,diffCPU:null===(E=e.diff)||void 0===E?void 0:E.totalCPUPerc}):t===a.f.AnnualizedCo2&&null!==(o=e.impactEstimates)&&void 0!==o&&null!==(s=o.totalCPU)&&void 0!==s&&s.annualizedCo2?Object(h.jsx)("div",null,Object(c.a)(x?e.impactEstimates.totalCPU.annualizedCo2:e.totalAnnualCO2kgs,"kgs")):t===a.f.AnnualizedDollarCost&&null!==(d=e.impactEstimates)&&void 0!==d&&null!==(g=d.totalCPU)&&void 0!==g&&g.annualizedDollarCost?Object(h.jsx)("div",null,Object(l.a)(x?e.impactEstimates.totalCPU.annualizedDollarCost:e.totalAnnualCostUSD)):null;var j,O,E}function y({samples:e,totalSamples:t,diffSamples:n,setCellProps:r}){return Object(o.useEffect)((()=>{r({css:{textAlign:"right"}})}),[r]),Object(h.jsx)(b,{samples:e,diffSamples:n,totalSamples:t})}function v({diff:e,setCellProps:t}){const n=Object(r.useEuiTheme)(),a=Object(r.useEuiBackgroundColor)("success"),s=Object(r.useEuiBackgroundColor)("danger");return Object(o.useEffect)((()=>{if(e&&0!==e.rank){const n=e.rank>0?"success":"danger";t({style:{backgroundColor:"success"===n?a:s}})}}),[s,e,t,a]),e?0===e.rank?null:Object(h.jsx)(r.EuiFlexGroup,{direction:"row",gutterSize:"xs"},Object(h.jsx)(r.EuiFlexItem,{grow:!1},Object(h.jsx)(r.EuiIcon,{type:e.rank>0?"sortUp":"sortDown",color:e.rank>0?"success":"danger"})),Object(h.jsx)(r.EuiFlexItem,{grow:!1},Object(h.jsx)(r.EuiText,{size:"s"},Math.abs(e.rank)))):Object(h.jsx)(r.EuiText,{size:"xs",color:n.euiTheme.colors.primaryText},i.i18n.translate("xpack.profiling.functionsView.newLabel",{defaultMessage:"New"}))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var r="%[a-f0-9]{2}",i=new RegExp("("+r+")|([^%]+?)","gi"),a=new RegExp("("+r+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function s(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(i)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="";for(var i=Object.keys(t),o=0;o<i.length;o++){var u=i[o];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=n(85)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(31),a=(r=n(13))&&"object"==typeof r&&"default"in r?r.default:r;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.matchRoutes=function e(t,n,r){return void 0===r&&(r=[]),t.some((function(t){var a=t.path?i.matchPath(n,t):r.length?r[r.length-1].match:i.Router.computeRootMatch(n);return a&&(r.push({route:t,match:a}),t.routes&&e(t.routes,n,r)),a})),r},t.renderRoutes=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?a.createElement(i.Switch,n,e.map((function(e,n){return a.createElement(i.Route,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(o({},n,{},t,{route:e})):a.createElement(e.component,o({},n,t,{route:e}))}})}))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i=n(39);function a(e){return void 0!==e.message?e.message:"Invalid value "+("function"==typeof(t=e.value)?r.getFunctionName(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")+" supplied to "+e.context.map((function(e){return e.key+": "+e.type.name})).join("/");var t}function o(e){return e.map(a)}function s(){return["No errors!"]}t.failure=o,t.success=s,t.PathReporter={report:i.fold(o,s)}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(39),s=o.either.map,u=o.either.chain,l=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,r){var i=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new e(r,n.is,(function(e,t){return u(i.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return i.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=l,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,r){for(var i=e.length,a=Array(i+1),o=0;o<i;o++)a[o]=e[o];return a[i]={key:t,type:n,actual:r},a},t.failures=o.left,t.failure=function(e,n,r){return t.failures([{value:e,context:n,message:r}])},t.success=o.right;var c=function(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])},f=function(e){return function(t){return t._tag===e}},p=f("AnyType"),d=f("InterfaceType"),h=f("PartialType"),g=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NullType",n}return i(n,e),n}(l);t.NullType=g,t.nullType=new g,t.null=t.nullType;var m=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="UndefinedType",n}return i(n,e),n}(l);t.UndefinedType=m;var b=new m;t.undefined=b;var x=function(e){function n(){var n=e.call(this,"void",b.is,b.validate,t.identity)||this;return n._tag="VoidType",n}return i(n,e),n}(l);t.VoidType=x,t.voidType=new x,t.void=t.voidType;var y=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return i(n,e),n}(l);t.UnknownType=y,t.unknown=new y;var v=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="StringType",n}return i(n,e),n}(l);t.StringType=v,t.string=new v;var j=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NumberType",n}return i(n,e),n}(l);t.NumberType=j,t.number=new j;var O=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="BooleanType",n}return i(n,e),n}(l);t.BooleanType=O,t.boolean=new O;var E=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyArrayType",n}return i(n,e),n}(l);t.AnyArrayType=E,t.UnknownArray=new E,t.Array=t.UnknownArray;var S=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return i(n,e),n}(l);t.AnyDictionaryType=S,t.UnknownRecord=new S;var w=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="FunctionType",n}return i(n,e),n}(l);t.FunctionType=w,t.Function=new w;var M=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i)||this;return s.type=a,s.predicate=o,s._tag="RefinementType",s}return i(t,e),t}(l);t.RefinementType=M,t.brand=function(e,t,n){return Q(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var k=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.value=a,o._tag="LiteralType",o}return i(t,e),t}(l);t.LiteralType=k,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var r=function(t){return t===e};return new k(n,r,(function(n,i){return r(n)?t.success(e):t.failure(n,i)}),t.identity,e)};var T=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.keys=a,o._tag="KeyofType",o}return i(t,e),t}(l);t.KeyofType=T;var C=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(n){return t.string.is(n)&&C.call(e,n)};return new T(n,r,(function(e,n){return r(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var I=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.runDefinition=a,o._tag="RecursiveType",o}return i(t,e),t}(l);t.RecursiveType=I,Object.defineProperty(I.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,r=function(){return n||((n=t(i)).name=e),n},i=new I(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return i};var F=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.type=a,o._tag="ArrayType",o}return i(t,e),t}(l);t.ArrayType=F,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new F(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,r){return u(t.UnknownArray.validate(n,r),(function(n){for(var i=n.length,a=n,s=[],u=0;u<i;u++){var l=n[u],f=e.validate(l,t.appendContext(r,String(u),e,l));if(o.isLeft(f))c(s,f.left);else{var p=f.right;p!==l&&(a===n&&(a=n.slice()),a[u]=p)}}return s.length>0?t.failures(s):t.success(a)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var L=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.props=a,o._tag="InterfaceType",o}return i(t,e),t}(l);t.InterfaceType=L;var A=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},N=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},_=function(e){return"{ "+A(e)+" }"};t.type=function(e,n){void 0===n&&(n=_(e));var r=Object.keys(e),i=r.map((function(t){return e[t]})),s=r.length;return new L(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<s;n++){var a=r[n];if(!C.call(e,a)||!i[n].is(e[a]))return!1}return!0}return!1}),(function(e,n){return u(t.UnknownRecord.validate(e,n),(function(e){for(var u=e,l=[],f=0;f<s;f++){var p=r[f];C.call(u,p)||(u===e&&(u=a({},e)),u[p]=u[p]);var d=u[p],h=i[f],g=h.validate(d,t.appendContext(n,p,h,d));if(o.isLeft(g))c(l,g.left);else{var m=g.right;m!==d&&(u===e&&(u=a({},e)),u[p]=m)}}return l.length>0?t.failures(l):t.success(u)}))}),N(i)?t.identity:function(e){for(var n=a({},e),o=0;o<s;o++){var u=r[o],l=i[o].encode;l!==t.identity&&(n[u]=l(e[u]))}return n},e)},t.interface=t.type;var P=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.props=a,o._tag="PartialType",o}return i(t,e),t}(l);t.PartialType=P;var R=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=R(_(e)));var r=Object.keys(e),i=r.map((function(t){return e[t]})),s=r.length;return new P(n,(function(n){if(t.UnknownRecord.is(n)){for(var i=0;i<s;i++){var a=r[i],o=n[a];if(void 0!==o&&!e[a].is(o))return!1}return!0}return!1}),(function(n,i){return u(t.UnknownRecord.validate(n,i),(function(n){for(var u=n,l=[],f=0;f<s;f++){var p=r[f],d=u[p],h=e[p],g=h.validate(d,t.appendContext(i,p,h,d));if(o.isLeft(g))void 0!==d&&c(l,g.left);else{var m=g.right;m!==d&&(u===n&&(u=a({},n)),u[p]=m)}}return l.length>0?t.failures(l):t.success(u)}))}),N(i)?t.identity:function(e){for(var t=a({},e),n=0;n<s;n++){var o=r[n],u=e[o];void 0!==u&&(t[o]=i[n].encode(u))}return t},e)};var z=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i)||this;return s.domain=a,s.codomain=o,s._tag="DictionaryType",s}return i(t,e),t}(l);t.DictionaryType=z,t.record=function(e,n,r){return void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }"),new z(r,(function(r){return t.UnknownRecord.is(r)?Object.keys(r).every((function(t){return e.is(t)&&n.is(r[t])})):p(n)&&Array.isArray(r)}),(function(r,i){if(t.UnknownRecord.is(r)){for(var a={},s=[],u=Object.keys(r),l=u.length,f=!1,d=0;d<l;d++){var h=u[d],g=r[h],m=e.validate(h,t.appendContext(i,h,e,h));if(o.isLeft(m))c(s,m.left);else{var b=m.right;f=f||b!==h,h=b;var x=n.validate(g,t.appendContext(i,h,n,g));if(o.isLeft(x))c(s,x.left);else{var y=x.right;f=f||y!==g,a[h]=y}}}return s.length>0?t.failures(s):t.success(f?a:r)}return p(n)&&Array.isArray(r)?t.success(r):t.failure(r,i)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var r={},i=Object.keys(t),a=i.length,o=0;o<a;o++){var s=i[o];r[String(e.encode(s))]=n.encode(t[s])}return r},e,n)};var D=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.types=a,o._tag="UnionType",o}return i(t,e),t}(l);t.UnionType=D;var U=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=U(e));var r=oe(e);if(void 0!==r&&e.length>0){var i=r[0],a=r[1],s=a.length,l=function(e){for(var t=0;t<s;t++)if(-1!==a[t].indexOf(e))return t};return new W(n,(function(n){if(t.UnknownRecord.is(n)){var r=l(n[i]);return void 0!==r&&e[r].is(n)}return!1}),(function(n,r){return u(t.UnknownRecord.validate(n,r),(function(a){var o=l(a[i]);if(void 0===o)return t.failure(n,r);var s=e[o];return s.validate(a,t.appendContext(r,String(o),s,a))}))}),N(e)?t.identity:function(t){var r=l(t[i]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return e[r].encode(t)},e,i)}return new D(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,r){for(var i=[],a=0;a<e.length;a++){var s=e[a],u=s.validate(n,t.appendContext(r,String(a),s,n));if(!o.isLeft(u))return t.success(u.right);c(i,u.left)}return t.failures(i)}),N(e)?t.identity:function(t){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(a.is(t))return a.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var B=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.types=a,o._tag="IntersectionType",o}return i(t,e),t}(l);t.IntersectionType=B;var $=function(e,n){for(var r=!0,i=!0,a=0,o=n;a<o.length;a++)(c=o[a])!==e&&(r=!1),t.UnknownRecord.is(c)&&(i=!1);if(r)return e;if(i)return n[n.length-1];for(var s={},u=0,l=n;u<l.length;u++){var c=l[u];for(var f in c)c[f]===e[f]&&s.hasOwnProperty(f)||(s[f]=c[f])}return s};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var r=e.length;return new B(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,i){for(var a=[],s=[],u=0;u<r;u++){var l=e[u],f=l.validate(n,t.appendContext(i,String(u),l,n));o.isLeft(f)?c(s,f.left):a.push(f.right)}return s.length>0?t.failures(s):t.success($(n,a))},0===e.length?t.identity:function(t){return $(t,e.map((function(e){return e.encode(t)})))},e)};var q=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.types=a,o._tag="TupleType",o}return i(t,e),t}(l);t.TupleType=q,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var r=e.length;return new q(n,(function(n){return t.UnknownArray.is(n)&&n.length===r&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,i){return u(t.UnknownArray.validate(n,i),(function(n){for(var a=n.length>r?n.slice(0,r):n,s=[],u=0;u<r;u++){var l=n[u],f=e[u],p=f.validate(l,t.appendContext(i,String(u),f,l));if(o.isLeft(p))c(s,p.left);else{var d=p.right;d!==l&&(a===n&&(a=n.slice()),a[u]=d)}}return s.length>0?t.failures(s):t.success(a)}))}),N(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var G=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.type=a,o._tag="ReadonlyType",o}return i(t,e),t}(l);t.ReadonlyType=G,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new G(n,e.is,(function(t,n){return s(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var V=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.type=a,o._tag="ReadonlyArrayType",o}return i(t,e),t}(l);t.ReadonlyArrayType=V,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var r=t.array(e);return new V(n,r.is,(function(e,t){return s(r.validate(e,t),(function(e){return e}))}),r.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var W=function(e){function t(t,n,r,i,a,o){var s=e.call(this,t,n,r,i,a)||this;return s.tag=o,s}return i(t,e),t}(D);t.TaggedUnionType=W,t.taggedUnion=function(e,n,r){void 0===r&&(r=U(n));var i=t.union(n,r);return i instanceof W?i:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new W(r,i.is,i.validate,i.encode,n,e))};var H=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.type=a,o._tag="ExactType",o}return i(t,e),t}(l);t.ExactType=H;var K=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return K(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,K(t))}),{})}},Y=function(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,i={},a=0;a<n.length;a++){var o=n[a];C.call(t,o)?i[o]=e[o]:r=!0}return r?i:e};t.exact=function(e,n){void 0===n&&(n=function(e){return d(e)?"{| "+A(e.props)+" |}":h(e)?R("{| "+A(e.props)+" |}"):"Exact<"+e.name+">"}(e));var r=K(e);return new H(n,e.is,(function(n,i){return u(t.UnknownRecord.validate(n,i),(function(){return s(e.validate(n,i),(function(e){return Y(e,r)}))}))}),(function(t){return e.encode(Y(t,r))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var X=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return i(n,e),n}(l);t.NeverType=X,t.never=new X;var Z=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return i(n,e),n}(l);t.AnyType=Z,t.any=new Z,t.Dictionary=t.UnknownRecord;var J=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="ObjectType",n}return i(n,e),n}(l);function Q(e,n,r){return void 0===r&&(r="("+e.name+" | "+t.getFunctionName(n)+")"),new M(r,(function(t){return e.is(t)&&n(t)}),(function(r,i){return u(e.validate(r,i),(function(e){return n(e)?t.success(e):t.failure(e,i)}))}),e.encode,e,n)}t.ObjectType=J,t.object=new J,t.refinement=Q,t.Integer=Q(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,r,i)||this;return o.props=a,o._tag="StrictType",o}return i(t,e),t}(l);t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}};var te=function(e){return e.length>0};function ne(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r];-1!==t.indexOf(a)&&n.push(a)}return n}function re(e){return"LiteralType"===e._tag}t.emptyTags={};var ie=[];function ae(e){if(-1!==ie.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var r in e.props){var i=e.props[r];re(i)&&(n===t.emptyTags&&(n={}),n[r]=[i.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return ae(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var r=Object.assign({},e);for(var i in n)if(e.hasOwnProperty(i)){var a=ne(e[i],n[i]);if(!te(a)){r=t.emptyTags;break}r[i]=a}else r[i]=n[i];return r}(e,ae(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var r=t.emptyTags;for(var i in e)n.hasOwnProperty(i)&&0===ne(e[i],n[i]).length&&(r===t.emptyTags&&(r={}),r[i]=e[i].concat(n[i]));return r}(e,ae(n))}),ae(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){ie.push(e);var a=ae(e.type);return ie.pop(),a}return t.emptyTags}function oe(e){for(var t=ae(e[0]),n=Object.keys(t),r=e.length,i=function(n){for(var i=t[n].slice(),a=[t[n]],o=1;o<r;o++){var s=ae(e[o])[n];if(void 0===s)return"continue-keys";if(s.some((function(e){return-1!==i.indexOf(e)})))return"continue-keys";i.push.apply(i,s),a.push(s)}return{value:[n,a]}},a=0,o=n;a<o.length;a++){var s=i(o[a]);if("object"==typeof s)return s.value}}t.getTags=ae,t.getIndex=oe},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),i=n(89),a=r.__importDefault(n(91));t.default=function(e,t){a.default(e,t,i.isDeepEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=n(23).__importDefault(n(90));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var o=a[i];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.default=function(e,t,n){var i=r.useRef(void 0);i.current&&n(t,i.current)||(i.current=t),r.useEffect(e,i.current)}},function(e,t,n){const r=n(93);e.exports=(e,t)=>new r(e,t).major},function(e,t,n){const r=n(66),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=n(67),{safeRe:o,t:s}=n(95),u=n(96),{compareIdentifiers:l}=n(97);class SemVer{constructor(e,t){if(t=u(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=SemVer},function(e,t,n){e.exports=n(9)(652)},function(e,t,n){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=n(67),o=n(66),s=(t=e.exports={}).re=[],u=t.safeRe=[],l=t.src=[],c=t.t={};let f=0;const p="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[p,i]],h=(e,t,n)=>{const r=(e=>{for(const[t,n]of d)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=f++;o(e,i,t),c[e]=i,l[i]=t,s[i]=new RegExp(t,n?"g":void 0),u[i]=new RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[c.NUMERICIDENTIFIER]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NUMERICIDENTIFIERLOOSE]}|${l[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${p}+`),h("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),h("FULL",`^${l[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),h("LOOSE",`^${l[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),h("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),h("COERCERTL",l[c.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},function(e,t){const n=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?n:e:r},function(e,t){const n=/^[0-9]+$/,r=(e,t)=>{const r=n.test(e),i=n.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},function(e,t,n){var r,i;!function(){var a={version:"3.5.17"},o=[].slice,s=function(e){return o.call(e)},u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(e){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var f=this.Element.prototype,p=f.setAttribute,d=f.setAttributeNS,h=this.CSSStyleDeclaration.prototype,g=h.setProperty;f.setAttribute=function(e,t){p.call(this,e,t+"")},f.setAttributeNS=function(e,t,n){d.call(this,e,t,n+"")},h.setProperty=function(e,t,n){g.call(this,e,t+"",n)}}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function b(e){return null===e?NaN:+e}function x(e){return!isNaN(e)}function y(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}a.ascending=m,a.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},a.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},a.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},a.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},a.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)x(n=+e[a])&&(r+=n);else for(;++a<i;)x(n=+t.call(e,e[a],a))&&(r+=n);return r},a.mean=function(e,t){var n,r=0,i=e.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)x(n=b(e[a]))?r+=n:--o;else for(;++a<i;)x(n=b(t.call(e,e[a],a)))?r+=n:--o;if(o)return r/o},a.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},a.median=function(e,t){var n,r=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)x(n=b(e[o]))&&r.push(n);else for(;++o<i;)x(n=b(t.call(e,e[o],o)))&&r.push(n);if(r.length)return a.quantile(r.sort(m),.5)},a.variance=function(e,t){var n,r,i=e.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)x(n=b(e[s]))&&(o+=(r=n-a)*(n-(a+=r/++u)));else for(;++s<i;)x(n=b(t.call(e,e[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++u)));if(u>1)return o/(u-1)},a.deviation=function(){var e=a.variance.apply(this,arguments);return e?Math.sqrt(e):e};var v=y(m);function j(e){return e.length}a.bisectLeft=v.left,a.bisect=a.bisectRight=v.right,a.bisector=function(e){return y(1===e.length?function(t,n){return m(e(t),n)}:e)},a.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},a.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},a.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},a.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=a.min(e,j),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},a.zip=function(){return a.transpose(arguments)},a.keys=function(e){var t=[];for(var n in e)t.push(n);return t},a.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},a.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},a.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n};var O=Math.abs;function E(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function S(){this._=Object.create(null)}a.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(e){for(var t=1;e*t%1;)t*=10;return t}(O(n)),o=-1;if(e*=a,t*=a,(n*=a)<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},a.map=function(e,t){var n=new S;if(e instanceof S)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var w="__proto__",M="\0";function k(e){return(e+="")===w||e[0]===M?M+e:e}function T(e){return(e+="")[0]===M?e.slice(1):e}function C(e){return k(e)in this._}function I(e){return(e=k(e))in this._&&delete this._[e]}function F(){var e=[];for(var t in this._)e.push(T(t));return e}function L(){var e=0;for(var t in this._)++e;return e}function A(){for(var e in this._)return!1;return!0}function N(){this._=Object.create(null)}function _(e){return e}function P(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function R(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=z.length;n<r;++n){var i=z[n]+t;if(i in e)return i}}E(S,{has:C,get:function(e){return this._[k(e)]},set:function(e,t){return this._[k(e)]=t},remove:I,keys:F,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:T(t),value:this._[t]});return e},size:L,empty:A,forEach:function(e){for(var t in this._)e.call(this,T(t),this._[t])}}),a.nest=function(){var e,t,n={},r=[],i=[];function o(i,a,s){if(s>=r.length)return t?t.call(n,a):e?a.sort(e):a;for(var u,l,c,f,p=-1,d=a.length,h=r[s++],g=new S;++p<d;)(f=g.get(u=h(l=a[p])))?f.push(l):g.set(u,[l]);return i?(l=i(),c=function(e,t){l.set(e,o(i,t,s))}):(l={},c=function(e,t){l[e]=o(i,t,s)}),g.forEach(c),l}function s(e,t){if(t>=r.length)return e;var n=[],a=i[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),a?n.sort((function(e,t){return a(e.key,t.key)})):n}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return s(o(a.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},a.set=function(e){var t=new N;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},E(N,{has:C,add:function(e){return this._[k(e+="")]=!0,e},remove:I,values:F,size:L,empty:A,forEach:function(e){for(var t in this._)e.call(this,T(t))}}),a.behavior={},a.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=P(e,t,t[n]);return e};var z=["webkit","ms","moz","Moz","o","O"];function D(){}function U(){}function B(e){var t=[],n=new S;function r(){for(var n,r=t,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return e}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,a=t.indexOf(o)).concat(t.slice(a+1)),n.remove(r)),i&&t.push(n.set(r,{on:i})),e)},r}function $(){a.event.preventDefault()}function q(){for(var e,t=a.event;e=t.sourceEvent;)t=e;return t}function G(e){for(var t=new U,n=0,r=arguments.length;++n<r;)t[arguments[n]]=B(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=e,a.event=i,t[i.type].apply(n,r)}finally{a.event=o}}},t}a.dispatch=function(){for(var e=new U,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=B(e);return e},U.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},a.event=null,a.requote=function(e){return e.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,W={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function H(e){return W(e,Z),e}var K=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},X=function(e,t){var n=e.matches||e[R(e,"matchesSelector")];return X=function(e,t){return n.call(e,t)},X(e,t)};"function"==typeof Sizzle&&(K=function(e,t){return Sizzle(e,t)[0]||null},Y=Sizzle,X=Sizzle.matchesSelector),a.selection=function(){return a.select(u.documentElement)};var Z=a.selection.prototype=[];function J(e){return"function"==typeof e?e:function(){return K(e,this)}}function Q(e){return"function"==typeof e?e:function(){return Y(e,this)}}Z.select=function(e){var t,n,r,i,a=[];e=J(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return H(a)},Z.selectAll=function(e){var t,n,r=[];e=Q(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,l=o.length;++u<l;)(n=o[u])&&(r.push(t=s(e.call(n,n.__data__,u,i))),t.parentNode=n);return H(r)};var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ne(e,t){return e=a.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function re(e){return e.trim().replace(/\s+/g," ")}function ie(e){return new RegExp("(?:^|\\s+)"+a.requote(e)+"(?:\\s+|$)","g")}function ae(e){return(e+"").trim().split(/^|\s+/)}function oe(e,t){var n=(e=ae(e).map(se)).length;return"function"==typeof t?function(){for(var r=-1,i=t.apply(this,arguments);++r<n;)e[r](this,i)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function se(e){var t=ie(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",re(i+" "+e))):n.setAttribute("class",re(i.replace(t," ")))}}function ue(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"==typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function le(e,t){return null==t?function(){delete this[e]}:"function"==typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function ce(e){return"function"==typeof e?e:(e=a.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ee&&t.documentElement.namespaceURI===ee?t.createElement(e):t.createElementNS(n,e)}}function fe(){var e=this.parentNode;e&&e.removeChild(this)}function pe(e){return{__data__:e}}function de(e){return function(){return X(this,e)}}function he(e){return arguments.length||(e=m),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function ge(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function me(e){return W(e,be),e}a.ns={prefix:te,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),te.hasOwnProperty(n)?{space:te[n],local:e}:e}},Z.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=a.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(ne(t,e[t]));return this}return this.each(ne(e,t))},Z.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=ae(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!ie(e[i]).test(t))return!1;return!0}for(t in e)this.each(oe(t,e[t]));return this}return this.each(oe(e,t))},Z.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.each(ue(n,e[n],t));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(e)}n=""}return this.each(ue(e,t,n))},Z.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(le(t,e[t]));return this}return this.each(le(e,t))},Z.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Z.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Z.append=function(e){return e=ce(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},Z.insert=function(e,t){return e=ce(e),t=J(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},Z.remove=function(){return this.each(fe)},Z.data=function(e,t){var n,r,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(e[i]=r.__data__);return e}function o(e,n){var r,i,a,o=e.length,c=n.length,f=Math.min(o,c),p=new Array(c),d=new Array(c),h=new Array(o);if(t){var g,m=new S,b=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(m.has(g=t.call(i,i.__data__,r))?h[r]=i:m.set(g,i),b[r]=g);for(r=-1;++r<c;)(i=m.get(g=t.call(n,a=n[r],r)))?!0!==i&&(p[r]=i,i.__data__=a):d[r]=pe(a),m.set(g,!0);for(r=-1;++r<o;)r in b&&!0!==m.get(b[r])&&(h[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,p[r]=i):d[r]=pe(a);for(;r<c;++r)d[r]=pe(n[r]);for(;r<o;++r)h[r]=e[r]}d.update=p,d.parentNode=p.parentNode=h.parentNode=e.parentNode,s.push(d),u.push(p),l.push(h)}var s=me([]),u=H([]),l=H([]);if("function"==typeof e)for(;++i<a;)o(n=this[i],e.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],e);return u.enter=function(){return s},u.exit=function(){return l},u},Z.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Z.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=de(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return H(i)},Z.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Z.sort=function(e){e=he.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Z.each=function(e){return ge(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},Z.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},Z.empty=function(){return!this.node()},Z.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Z.size=function(){var e=0;return ge(this,(function(){++e})),e};var be=[];function xe(e,t,n){var r="__on"+e,i=e.indexOf("."),o=ve;i>0&&(e=e.slice(0,i));var u=ye.get(e);function l(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,o=je),i?t?function(){var i=o(t,s(arguments));l.call(this),this.addEventListener(e,this[r]=i,i.$=n),i._=t}:l:t?D:function(){var t,n=new RegExp("^__on([^.]+)"+a.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}}a.selection.enter=me,a.selection.enter.prototype=be,be.append=Z.append,be.empty=Z.empty,be.node=Z.node,be.call=Z.call,be.size=Z.size,be.select=function(e){for(var t,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(t.push(r[l]=n=e.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):t.push(null)}return H(o)},be.insert=function(e,t){var n,r,i;return arguments.length<2&&(n=this,t=function(e,t,a){var o,s=n[a].update,u=s.length;for(a!=i&&(i=a,r=0),t>=r&&(r=t+1);!(o=s[r])&&++r<u;);return o}),Z.insert.call(this,e,t)},a.select=function(e){var t;return"string"==typeof e?(t=[K(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=l(e),H([t])},a.selectAll=function(e){var t;return"string"==typeof e?(t=s(Y(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,H([t])},Z.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=!1),e)this.each(xe(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(xe(e,t,n))};var ye=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ve(e,t){return function(n){var r=a.event;a.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{a.event=r}}}function je(e,t){var n=ve(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}u&&ye.forEach((function(e){"on"+e in u&&ye.remove(e)}));var Oe,Ee=0;function Se(e){var t=".dragsuppress-"+ ++Ee,n="click"+t,r=a.select(c(e)).on("touchmove"+t,$).on("dragstart"+t,$).on("selectstart"+t,$);if(null==Oe&&(Oe=!("onselectstart"in e)&&R(e.style,"userSelect")),Oe){var i=l(e).style,o=i[Oe];i[Oe]="none"}return function(e){if(r.on(t,null),Oe&&(i[Oe]=o),e){var a=function(){r.on(n,null)};r.on(n,(function(){$(),a()}),!0),setTimeout(a,0)}}}a.mouse=function(e){return Me(e,q())};var we=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Me(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(we<0){var i=c(e);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();we=!(o.f||o.e),n.remove()}}return we?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function ke(){return a.event.changedTouches[0].identifier}a.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=q().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return Me(e,r)},a.behavior.drag=function(){var e=G(i,"drag","dragstart","dragend"),t=null,n=o(D,a.mouse,c,"mousemove","mouseup"),r=o(ke,a.touch,_,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u,l=this,c=a.event.target.correspondingElement||a.event.target,f=l.parentNode,p=e.of(l,arguments),d=0,h=n(),g=".drag"+(null==h?"":"-"+h),m=a.select(i(c)).on(o+g,(function(){var e,t,n=r(f,h);n&&(e=n[0]-x[0],t=n[1]-x[1],d|=e|t,x=n,p({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t}))})).on(s+g,(function(){r(f,h)&&(m.on(o+g,null).on(s+g,null),b(d),p({type:"dragend"}))})),b=Se(c),x=r(f,h);u=t?[(u=t.apply(l,arguments)).x-x[0],u.y-x[1]]:[0,0],p({type:"dragstart"})}}return i.origin=function(e){return arguments.length?(t=e,i):t},a.rebind(i,e,"on")},a.touches=function(e,t){return arguments.length<2&&(t=q().touches),t?s(t).map((function(t){var n=Me(e,t);return n.identifier=t.identifier,n})):[]};var Te=1e-6,Ce=Te*Te,Ie=Math.PI,Fe=2*Ie,Le=Fe-Te,Ae=Ie/2,Ne=Ie/180,_e=180/Ie;function Pe(e){return e>0?1:e<0?-1:0}function Re(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ze(e){return e>1?0:e<-1?Ie:Math.acos(e)}function De(e){return e>1?Ae:e<-1?-Ae:Math.asin(e)}function Ue(e){return((e=Math.exp(e))+1/e)/2}function Be(e){return(e=Math.sin(e/2))*e}var $e=Math.SQRT2;a.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-i,f=u-a,p=c*c+f*f;if(p<Ce)r=Math.log(l/o)/$e,n=function(e){return[i+e*c,a+e*f,o*Math.exp($e*e*r)]};else{var d=Math.sqrt(p),h=(l*l-o*o+4*p)/(2*o*2*d),g=(l*l-o*o-4*p)/(2*l*2*d),m=Math.log(Math.sqrt(h*h+1)-h),b=Math.log(Math.sqrt(g*g+1)-g);r=(b-m)/$e,n=function(e){var t,n=e*r,s=Ue(m),u=o/(2*d)*(s*(t=$e*n+m,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(m));return[i+u*c,a+u*f,o*s/Ue($e*n+m)]}}return n.duration=1e3*r,n},a.behavior.zoom=function(){var e,t,n,r,i,o,s,l,f,p={x:0,y:0,k:1},d=[960,500],h=Ve,g=250,m=0,b="mousedown.zoom",x="mousemove.zoom",y="mouseup.zoom",v="touchstart.zoom",j=G(O,"zoomstart","zoom","zoomend");function O(e){e.on(b,F).on(Ge+".zoom",A).on("dblclick.zoom",N).on(v,L)}function E(e){return[(e[0]-p.x)/p.k,(e[1]-p.y)/p.k]}function S(e){p.k=Math.max(h[0],Math.min(h[1],e))}function w(e,t){t=function(e){return[e[0]*p.k+p.x,e[1]*p.k+p.y]}(t),p.x+=e[0]-t[0],p.y+=e[1]-t[1]}function M(e,n,r,i){e.__chart__={x:p.x,y:p.y,k:p.k},S(Math.pow(2,i)),w(t=n,r),e=a.select(e),g>0&&(e=e.transition().duration(g)),e.call(O.event)}function k(){s&&s.domain(o.range().map((function(e){return(e-p.x)/p.k})).map(o.invert)),f&&f.domain(l.range().map((function(e){return(e-p.y)/p.k})).map(l.invert))}function T(e){m++||e({type:"zoomstart"})}function C(e){k(),e({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function I(e){--m||(e({type:"zoomend"}),t=null)}function F(){var e=this,t=j.of(e,arguments),n=0,r=a.select(c(e)).on(x,(function(){n=1,w(a.mouse(e),i),C(t)})).on(y,(function(){r.on(x,null).on(y,null),o(n),I(t)})),i=E(a.mouse(e)),o=Se(e);Is.call(e),T(t)}function L(){var e,t=this,n=j.of(t,arguments),r={},o=0,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],f=a.select(t),d=Se(t);function h(){var n=a.touches(t);return e=p.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=E(e))})),n}function g(){var e=a.event.target;a.select(e).on(u,m).on(l,x),c.push(e);for(var n=a.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var d=h(),g=Date.now();if(1===d.length){if(g-i<500){var b=d[0];M(t,b,r[b.identifier],Math.floor(Math.log(p.k)/Math.LN2)+1),$()}i=g}else if(d.length>1){b=d[0];var y=d[1],v=b[0]-y[0],j=b[1]-y[1];o=v*v+j*j}}function m(){var s,u,l,c,f=a.touches(t);Is.call(t);for(var p=0,d=f.length;p<d;++p,c=null)if(l=f[p],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var h=(h=l[0]-s[0])*h+(h=l[1]-s[1])*h,g=o&&Math.sqrt(h/o);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],S(g*e)}i=null,w(s,u),C(n)}function x(){if(a.event.touches.length){for(var e=a.event.changedTouches,t=0,i=e.length;t<i;++t)delete r[e[t].identifier];for(var o in r)return void h()}a.selectAll(c).on(s,null),f.on(b,F).on(v,L),d(),I(n)}g(),T(n),f.on(b,null).on(v,g)}function A(){var i=j.of(this,arguments);r?clearTimeout(r):(Is.call(this),e=E(t=n||a.mouse(this)),T(i)),r=setTimeout((function(){r=null,I(i)}),50),$(),S(Math.pow(2,.002*qe())*p.k),w(t,e),C(i)}function N(){var e=a.mouse(this),t=Math.log(p.k)/Math.LN2;M(this,e,E(e),a.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return Ge||(Ge="onwheel"in u?(qe=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(qe=function(){return a.event.wheelDelta},"mousewheel"):(qe=function(){return-a.event.detail},"MozMousePixelScroll")),O.event=function(e){e.each((function(){var e=j.of(this,arguments),n=p;As?a.select(this).transition().each("start.zoom",(function(){p=this.__chart__||{x:0,y:0,k:1},T(e)})).tween("zoom:zoom",(function(){var r=d[0],i=d[1],o=t?t[0]:r/2,s=t?t[1]:i/2,u=a.interpolateZoom([(o-p.x)/p.k,(s-p.y)/p.k,r/p.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),i=r/n[2];this.__chart__=p={x:o-n[0]*i,y:s-n[1]*i,k:i},C(e)}})).each("interrupt.zoom",(function(){I(e)})).each("end.zoom",(function(){I(e)})):(this.__chart__=p,T(e),C(e),I(e))}))},O.translate=function(e){return arguments.length?(p={x:+e[0],y:+e[1],k:p.k},k(),O):[p.x,p.y]},O.scale=function(e){return arguments.length?(p={x:p.x,y:p.y,k:null},S(+e),k(),O):p.k},O.scaleExtent=function(e){return arguments.length?(h=null==e?Ve:[+e[0],+e[1]],O):h},O.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],O):n},O.size=function(e){return arguments.length?(d=e&&[+e[0],+e[1]],O):d},O.duration=function(e){return arguments.length?(g=+e,O):g},O.x=function(e){return arguments.length?(s=e,o=e.copy(),p={x:0,y:0,k:1},O):s},O.y=function(e){return arguments.length?(f=e,l=e.copy(),p={x:0,y:0,k:1},O):f},a.rebind(O,j,"on")};var qe,Ge,Ve=[0,1/0];function We(){}function He(e,t,n){return this instanceof He?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof He?new He(e.h,e.s,e.l):ht(""+e,gt,He):new He(e,t,n)}a.color=We,We.prototype.toString=function(){return this.rgb()+""},a.hsl=He;var Ke=He.prototype=new We;function Ye(e,t,n){var r,i;function a(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+t):n+t-n*t),new lt(a(e+120),a(e),a(e-120))}function Xe(e,t,n){return this instanceof Xe?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof Xe?new Xe(e.h,e.c,e.l):function(e,t,n){return e>0?new Xe(Math.atan2(n,t)*_e,Math.sqrt(t*t+n*n),e):new Xe(NaN,NaN,e)}(e instanceof Qe?e.l:(e=mt((e=a.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Xe(e,t,n)}Ke.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,this.l/e)},Ke.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new He(this.h,this.s,e*this.l)},Ke.rgb=function(){return Ye(this.h,this.s,this.l)},a.hcl=Xe;var Ze=Xe.prototype=new We;function Je(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Qe(n,Math.cos(e*=Ne)*t,Math.sin(e)*t)}function Qe(e,t,n){return this instanceof Qe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Qe?new Qe(e.l,e.a,e.b):e instanceof Xe?Je(e.h,e.c,e.l):mt((e=lt(e)).r,e.g,e.b):new Qe(e,t,n)}Ze.brighter=function(e){return new Xe(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))},Ze.darker=function(e){return new Xe(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))},Ze.rgb=function(){return Je(this.h,this.c,this.l).rgb()},a.lab=Qe;var et=18,tt=.95047,nt=1,rt=1.08883,it=Qe.prototype=new We;function at(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return new lt(ut(3.2404542*(i=ot(i)*tt)-1.5371385*(r=ot(r)*nt)-.4985314*(a=ot(a)*rt)),ut(-.969266*i+1.8760108*r+.041556*a),ut(.0556434*i-.2040259*r+1.0572252*a))}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function st(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function lt(e,t,n){return this instanceof lt?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof lt?new lt(e.r,e.g,e.b):ht(""+e,lt,Ye):new lt(e,t,n)}function ct(e){return new lt(e>>16,e>>8&255,255&e)}function ft(e){return ct(e)+""}it.brighter=function(e){return new Qe(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)},it.darker=function(e){return new Qe(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)},it.rgb=function(){return at(this.l,this.a,this.b)},a.rgb=lt;var pt=lt.prototype=new We;function dt(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function ht(e,t,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(xt(i[0]),xt(i[1]),xt(i[2]))}return(a=yt.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),t(o,s,u))}function gt(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new He(r,i,u)}function mt(e,t,n){var r=st((.4124564*(e=bt(e))+.3575761*(t=bt(t))+.1804375*(n=bt(n)))/tt),i=st((.2126729*e+.7151522*t+.072175*n)/nt);return Qe(116*i-16,500*(r-i),200*(i-st((.0193339*e+.119192*t+.9503041*n)/rt)))}function bt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}pt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new lt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new lt(i,i,i)},pt.darker=function(e){return new lt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},pt.hsl=function(){return gt(this.r,this.g,this.b)},pt.toString=function(){return"#"+dt(this.r)+dt(this.g)+dt(this.b)};var yt=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vt(e){return"function"==typeof e?e:function(){return e}}function jt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ot(t,n,e,r)}}function Ot(e,t,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var e,t=l.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||t>=200&&t<300||304===t){try{e=n.call(i,l)}catch(e){return void o.error.call(i,e)}o.load.call(i,e)}else o.error.call(i,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var t=a.event;a.event=e;try{o.progress.call(i,l)}finally{a.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(c=e,i):c},i.response=function(e){return n=e,i},["get","post"].forEach((function(e){i[e]=function(){return i.send.apply(i,[e].concat(s(arguments)))}})),i.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),l.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=a&&i.on("error",a).on("load",(function(e){a(null,e)})),o.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},a.rebind(i,o,"on"),null==r?i:i.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}yt.forEach((function(e,t){yt.set(e,ct(t))})),a.functor=vt,a.xhr=jt(_),a.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function i(e,n,r){arguments.length<3&&(r=n,n=null);var i=Ot(e,t,null==n?a:o(n),r);return i.row=function(e){return arguments.length?i.response(null==(n=e)?a:o(e)):n},i}function a(e){return i.parse(e.responseText)}function o(e){return function(t){return i.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return i.parse=function(e,t){var n;return i.parseRows(e,(function(e,r){if(n)return n(e,r-1);var i=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");n=t?function(e,n){return t(i(e),n)}:i}))},i.parseRows=function(e,t){var n,i,a={},o={},s=[],u=e.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return l=n+2,13===(s=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++l):10===s&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=e.charCodeAt(l++)))i=!0;else if(13===s)i=!0,10===e.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return e.slice(t,l-c)}return e.slice(t)}for(;(n=f())!==o;){for(var p=[];n!==a&&n!==o;)p.push(n),n=f();t&&null==(p=t(p,c++))||s.push(p)}return s},i.format=function(t){if(Array.isArray(t[0]))return i.formatRows(t);var n=new N,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(u).join(e)].concat(t.map((function(t){return r.map((function(e){return u(t[e])})).join(e)}))).join("\n")},i.formatRows=function(e){return e.map(s).join("\n")},i},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var Et,St,wt,Mt,kt=this[R(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function Tt(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return St?St.n=i:Et=i,St=i,wt||(Mt=clearTimeout(Mt),wt=1,kt(Ct)),i}function Ct(){var e=It(),t=Ft()-e;t>24?(isFinite(t)&&(clearTimeout(Mt),Mt=setTimeout(Ct,t)),wt=0):(wt=1,kt(Ct))}function It(){for(var e=Date.now(),t=Et;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Ft(){for(var e,t=Et,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:Et=t.n;return St=e,n}function Lt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}a.timer=function(){Tt.apply(this,arguments)},a.timer.flush=function(){It(),Ft()},a.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var At=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=Math.pow(10,3*O(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}));function Nt(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:_;return function(e){var n=_t.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],p=n[7],d=n[8],h=n[9],g=1,m="",b="",x=!1,y=!0;switch(d&&(d=+d.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),h){case"n":p=!0,h="g";break;case"%":g=100,b="%",h="f";break;case"p":g=100,b="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+h.toLowerCase());case"c":y=!1;case"d":x=!0,d=0;break;case"s":g=-1,h="r"}"$"===l&&(m=i[0],b=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):"e"!=h&&"f"!=h||(d=Math.max(0,Math.min(20,d)))),h=Pt.get(h)||Rt;var v=c&&p;return function(e){var n=b;if(x&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(g<0){var l=a.formatPrefix(e,d);e=l.scale(e),n=l.symbol+b}else e*=g;var j,O,E=(e=h(e,d)).lastIndexOf(".");if(E<0){var S=y?e.lastIndexOf("e"):-1;S<0?(j=e,O=""):(j=e.substring(0,S),O=e.substring(S))}else j=e.substring(0,E),O=t+e.substring(E+1);!c&&p&&(j=o(j,1/0));var w=m.length+j.length+O.length+(v?0:i.length),M=w<f?new Array(w=f-w+1).join(r):"";return v&&(j=o(M+j,M.length?f-O.length:1/0)),i+=m,e=j+O,("<"===s?i+e+M:">"===s?M+i+e:"^"===s?M.substring(0,w>>=1)+i+e+M.substring(w):i+(v?e:M+e))+n}}}a.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=a.round(e,Lt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),At[8+n/3]};var _t=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Pt=a.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=a.round(e,Lt(e,t))).toFixed(Math.max(0,Math.min(20,Lt(e*(1+1e-15),t))))}});function Rt(e){return e+""}var zt=a.time={},Dt=Date;function Ut(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ut.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Bt.setUTCDate.apply(this._,arguments)},setDay:function(){Bt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Bt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Bt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Bt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Bt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Bt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Bt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Bt.setTime.apply(this._,arguments)}};var Bt=Date.prototype;function $t(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new Dt(n-1)),1),n}function a(e,n){return t(e=new Dt(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var s=e.utc=qt(e);return s.floor=s,s.round=qt(r),s.ceil=qt(i),s.offset=qt(a),s.range=function(e,t,n){try{Dt=Ut;var r=new Ut;return r._=e,o(r,t,n)}finally{Dt=Date}},e}function qt(e){return function(t,n){try{Dt=Ut;var r=new Ut;return r._=t,e(r,n)._}finally{Dt=Date}}}function Gt(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){for(var r,i,a,o=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Vt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=j[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Dt!==Ut,i=new(r?Ut:Dt);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return e},n}function f(e,t,n,r){for(var i,a,o,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=t.charCodeAt(s++))){if(o=t.charAt(s++),!(a=O[o in Vt?t.charAt(s++):o])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(Dt=Ut);return n._=e,t(n)}finally{Dt=Date}}return n.parse=function(e){try{Dt=Ut;var n=t.parse(e);return n&&n._}finally{Dt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=dn;var p=a.map(),d=Yt(o),h=Xt(o),g=Yt(s),m=Xt(s),b=Yt(u),x=Xt(u),y=Yt(l),v=Xt(l);i.forEach((function(e,t){p.set(e.toLowerCase(),t)}));var j={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return Kt(e.getDate(),t,2)},e:function(e,t){return Kt(e.getDate(),t,2)},H:function(e,t){return Kt(e.getHours(),t,2)},I:function(e,t){return Kt(e.getHours()%12||12,t,2)},j:function(e,t){return Kt(1+zt.dayOfYear(e),t,3)},L:function(e,t){return Kt(e.getMilliseconds(),t,3)},m:function(e,t){return Kt(e.getMonth()+1,t,2)},M:function(e,t){return Kt(e.getMinutes(),t,2)},p:function(e){return i[+(e.getHours()>=12)]},S:function(e,t){return Kt(e.getSeconds(),t,2)},U:function(e,t){return Kt(zt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Kt(zt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return Kt(e.getFullYear()%100,t,2)},Y:function(e,t){return Kt(e.getFullYear()%1e4,t,4)},Z:fn,"%":function(){return"%"}},O={a:function(e,t,n){g.lastIndex=0;var r=g.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){d.lastIndex=0;var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){y.lastIndex=0;var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return f(e,j.c.toString(),t,n)},d:an,e:an,H:sn,I:sn,j:on,L:cn,m:rn,M:un,p:function(e,t,n){var r=p.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:ln,U:Jt,w:Zt,W:Qt,x:function(e,t,n){return f(e,j.x.toString(),t,n)},X:function(e,t,n){return f(e,j.X.toString(),t,n)},y:tn,Y:en,Z:nn,"%":pn};return c}zt.year=$t((function(e){return(e=zt.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),zt.years=zt.year.range,zt.years.utc=zt.year.utc.range,zt.day=$t((function(e){var t=new Dt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),zt.days=zt.day.range,zt.days.utc=zt.day.utc.range,zt.dayOfYear=function(e){var t=zt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var n=zt[e]=$t((function(e){return(e=zt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var n=zt.year(e).getDay();return Math.floor((zt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)}));zt[e+"s"]=n.range,zt[e+"s"].utc=n.utc.range,zt[e+"OfYear"]=function(e){var n=zt.year(e).getDay();return Math.floor((zt.dayOfYear(e)+(n+t)%7)/7)}})),zt.week=zt.sunday,zt.weeks=zt.sunday.range,zt.weeks.utc=zt.sunday.utc.range,zt.weekOfYear=zt.sundayOfYear;var Vt={"-":"",_:" ",0:"0"},Wt=/^\s*\d+/,Ht=/^%/;function Kt(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Yt(e){return new RegExp("^(?:"+e.map(a.requote).join("|")+")","i")}function Xt(e){for(var t=new S,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Zt(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Jt(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Qt(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function en(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tn(e,t,n){Wt.lastIndex=0;var r,i=Wt.exec(t.slice(n,n+2));return i?(e.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function nn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function rn(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function an(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function on(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function sn(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function un(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ln(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cn(e,t,n){Wt.lastIndex=0;var r=Wt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=O(t)/60|0,i=O(t)%60;return n+Kt(r,"0",2)+Kt(i,"0",2)}function pn(e,t,n){Ht.lastIndex=0;var r=Ht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function dn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}a.locale=function(e){return{numberFormat:Nt(e),timeFormat:Gt(e)}};var hn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gn(){}a.format=hn.numberFormat,a.geo={},gn.prototype={s:0,t:0,add:function(e){bn(e,this.t,mn),bn(mn.s,this.s,this),this.s?this.t+=mn.t:this.s=mn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var mn=new gn;function bn(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function xn(e,t){e&&vn.hasOwnProperty(e.type)&&vn[e.type](e,t)}a.geo.stream=function(e,t){e&&yn.hasOwnProperty(e.type)?yn[e.type](e,t):xn(e,t)};var yn={Feature:function(e,t){xn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xn(n[r].geometry,t)}},vn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){jn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jn(n[r],t,0)},Polygon:function(e,t){On(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)On(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xn(n[r],t)}};function jn(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function On(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)jn(e[n],t,1);t.polygonEnd()}a.geo.area=function(e){return En=0,a.geo.stream(e,Pn),En};var En,Sn,wn,Mn,kn,Tn,Cn,In,Fn,Ln,An,Nn,_n=new gn,Pn={sphere:function(){En+=4*Ie},point:D,lineStart:D,lineEnd:D,polygonStart:function(){_n.reset(),Pn.lineStart=Rn},polygonEnd:function(){var e=2*_n;En+=e<0?4*Ie+e:e,Pn.lineStart=Pn.lineEnd=Pn.point=D}};function Rn(){var e,t,n,r,i;function a(e,t){t=t*Ne/2+Ie/4;var a=(e*=Ne)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(t),l=Math.sin(t),c=i*l,f=r*u+c*Math.cos(s),p=c*o*Math.sin(s);_n.add(Math.atan2(p,f)),n=e,r=u,i=l}Pn.point=function(o,s){Pn.point=a,n=(e=o)*Ne,r=Math.cos(s=(t=s)*Ne/2+Ie/4),i=Math.sin(s)},Pn.lineEnd=function(){a(e,t)}}function zn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Dn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Un(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Bn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function $n(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function qn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Gn(e){return[Math.atan2(e[1],e[0]),De(e[2])]}function Vn(e,t){return O(e[0]-t[0])<Te&&O(e[1]-t[1])<Te}a.geo.bounds=function(){var e,t,n,r,i,o,s,u,l,c,f,p={point:d,lineStart:g,lineEnd:m,polygonStart:function(){p.point=b,p.lineStart=x,p.lineEnd=y,l=0,Pn.polygonStart()},polygonEnd:function(){Pn.polygonEnd(),p.point=d,p.lineStart=g,p.lineEnd=m,_n<0?(e=-(n=180),t=-(r=90)):l>Te?r=90:l<-Te&&(t=-90),f[0]=e,f[1]=n}};function d(i,a){c.push(f=[e=i,n=i]),a<t&&(t=a),a>r&&(r=a)}function h(a,o){var s=zn([a*Ne,o*Ne]);if(u){var l=Un(u,s),c=Un([l[1],-l[0],0],l);qn(c),c=Gn(c);var f=a-i,p=f>0?1:-1,h=c[0]*_e*p,g=O(f)>180;if(g^(p*i<h&&h<p*a))(m=c[1]*_e)>r&&(r=m);else if(g^(p*i<(h=(h+360)%360-180)&&h<p*a)){var m;(m=-c[1]*_e)<t&&(t=m)}else o<t&&(t=o),o>r&&(r=o);g?a<i?v(e,a)>v(e,n)&&(n=a):v(a,n)>v(e,n)&&(e=a):n>=e?(a<e&&(e=a),a>n&&(n=a)):a>i?v(e,a)>v(e,n)&&(n=a):v(a,n)>v(e,n)&&(e=a)}else d(a,o);u=s,i=a}function g(){p.point=h}function m(){f[0]=e,f[1]=n,p.point=d,u=null}function b(e,t){if(u){var n=e-i;l+=O(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Pn.point(e,t),h(e,t)}function x(){Pn.lineStart()}function y(){b(o,s),Pn.lineEnd(),O(l)>Te&&(e=-(n=180)),f[0]=e,f[1]=n,u=null}function v(e,t){return(t-=e)<0?t+360:t}function j(e,t){return e[0]-t[0]}function E(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(i){if(r=n=-(e=t=1/0),c=[],a.geo.stream(i,p),l=c.length){c.sort(j);for(var o=1,s=[g=c[0]];o<l;++o)E((d=c[o])[0],g)||E(d[1],g)?(v(g[0],d[1])>v(g[0],g[1])&&(g[1]=d[1]),v(d[0],g[1])>v(g[0],g[1])&&(g[0]=d[0])):s.push(g=d);for(var u,l,d,h=-1/0,g=(o=0,s[l=s.length-1]);o<=l;g=d,++o)d=s[o],(u=v(g[1],d[0]))>h&&(h=u,e=d[0],n=g[1])}return c=f=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),a.geo.centroid=function(e){Sn=wn=Mn=kn=Tn=Cn=In=Fn=Ln=An=Nn=0,a.geo.stream(e,Wn);var t=Ln,n=An,r=Nn,i=t*t+n*n+r*r;return i<Ce&&(t=Cn,n=In,r=Fn,wn<Te&&(t=Mn,n=kn,r=Tn),(i=t*t+n*n+r*r)<Ce)?[NaN,NaN]:[Math.atan2(n,t)*_e,De(r/Math.sqrt(i))*_e]};var Wn={sphere:D,point:Hn,lineStart:Yn,lineEnd:Xn,polygonStart:function(){Wn.lineStart=Zn},polygonEnd:function(){Wn.lineStart=Yn}};function Hn(e,t){e*=Ne;var n=Math.cos(t*=Ne);Kn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Kn(e,t,n){++Sn,Mn+=(e-Mn)/Sn,kn+=(t-kn)/Sn,Tn+=(n-Tn)/Sn}function Yn(){var e,t,n;function r(r,i){r*=Ne;var a=Math.cos(i*=Ne),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);wn+=l,Cn+=l*(e+(e=o)),In+=l*(t+(t=s)),Fn+=l*(n+(n=u)),Kn(e,t,n)}Wn.point=function(i,a){i*=Ne;var o=Math.cos(a*=Ne);e=o*Math.cos(i),t=o*Math.sin(i),n=Math.sin(a),Wn.point=r,Kn(e,t,n)}}function Xn(){Wn.point=Hn}function Zn(){var e,t,n,r,i;function a(e,t){e*=Ne;var a=Math.cos(t*=Ne),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(t),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,p=Math.sqrt(l*l+c*c+f*f),d=n*o+r*s+i*u,h=p&&-ze(d)/p,g=Math.atan2(p,d);Ln+=h*l,An+=h*c,Nn+=h*f,wn+=g,Cn+=g*(n+(n=o)),In+=g*(r+(r=s)),Fn+=g*(i+(i=u)),Kn(n,r,i)}Wn.point=function(o,s){e=o,t=s,Wn.point=a,o*=Ne;var u=Math.cos(s*=Ne);n=u*Math.cos(o),r=u*Math.sin(o),i=Math.sin(s),Kn(n,r,i)},Wn.lineEnd=function(){a(e,t),Wn.lineEnd=Xn,Wn.point=Hn}}function Jn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Qn(){return!0}function er(e,t,n,r,i){var a=[],o=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Vn(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var u=new nr(n,e,null,!0),l=new nr(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new nr(r,e,null,!1),l=new nr(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}})),o.sort(t),tr(a),tr(o),a.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,p=a[0];;){for(var d=p,h=!0;d.v;)if((d=d.n)===p)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function tr(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function nr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rr(e,t,n,r){return function(i,o){var s,u=t(o),l=i.invert(r[0],r[1]),c={point:f,lineStart:d,lineEnd:h,polygonStart:function(){c.point=v,c.lineStart=j,c.lineEnd=O,s=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=h,s=a.merge(s);var e=function(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;_n.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],p=f[0],d=f[1]/2+Ie/4,h=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0);var b=(e=l[m])[0],x=e[1]/2+Ie/4,y=Math.sin(x),v=Math.cos(x),j=b-p,O=j>=0?1:-1,E=O*j,S=E>Ie,w=h*y;if(_n.add(Math.atan2(w*O*Math.sin(E),g*v+w*Math.cos(E))),a+=S?j+O*Fe:j,S^p>=n^b>=n){var M=Un(zn(f),zn(e));qn(M);var k=Un(i,M);qn(k);var T=(S^j>=0?-1:1)*De(k[2]);(r>T||r===T&&(M[0]||M[1]))&&(o+=S^j>=0?1:-1)}if(!m++)break;p=b,h=y,g=v,f=e}}return(a<-Te||a<Te&&_n<-Te)^1&o}(l,g);s.length?(y||(o.polygonStart(),y=!0),er(s,or,e,n,o)):e&&(y||(o.polygonStart(),y=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),y&&(o.polygonEnd(),y=!1),s=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function p(e,t){var n=i(e,t);u.point(n[0],n[1])}function d(){c.point=p,u.lineStart()}function h(){c.point=f,u.lineEnd()}var g,m,b=ar(),x=t(b),y=!1;function v(e,t){m.push([e,t]);var n=i(e,t);x.point(n[0],n[1])}function j(){x.lineStart(),m=[]}function O(){v(m[0][0],m[0][1]),x.lineEnd();var e,t=x.clean(),n=b.buffer(),r=n.length;if(m.pop(),g.push(m),m=null,r)if(1&t){var i,a=-1;if((r=(e=n[0]).length-1)>0){for(y||(o.polygonStart(),y=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ir))}return c}}function ir(e){return e.length>1}function ar(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:D,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function or(e,t){return((e=e.x)[0]<0?e[1]-Ae-Te:Ae-e[1])-((t=t.x)[0]<0?t[1]-Ae-Te:Ae-t[1])}var sr=rr(Qn,(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Ie:-Ie,u=O(a-n);O(u-Ie)<Te?(e.point(n,r=(r+o)/2>0?Ae:-Ae),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=Ie&&(O(n-i)<Te&&(n-=i*Te),O(a-s)<Te&&(a-=s*Te),r=function(e,t,n,r){var i,a,o=Math.sin(e-n);return O(o)>Te?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Ae,r.point(-Ie,i),r.point(0,i),r.point(Ie,i),r.point(Ie,0),r.point(Ie,-i),r.point(0,-i),r.point(-Ie,-i),r.point(-Ie,0),r.point(-Ie,i);else if(O(e[0]-t[0])>Te){var a=e[0]<t[0]?Ie:-Ie;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-Ie,-Ie/2]);function ur(e,t,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=0,f=1,p=s.x-u,d=s.y-l;if(a=e-u,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>c&&(c=a)}if(a=n-u,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<f&&(f=a)}if(a=t-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=r-l,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}return c>0&&(i.a={x:u+c*p,y:l+c*d}),f<1&&(i.b={x:u+f*p,y:l+f*d}),i}}}}}}var lr=1e9;function cr(e,t,n,r){return function(u){var l,c,f,p,d,h,g,m,b,x,y,v=u,j=ar(),O=ur(e,t,n,r),E={point:M,lineStart:function(){E.point=k,c&&c.push(f=[]),x=!0,b=!1,g=m=NaN},lineEnd:function(){l&&(k(p,d),h&&b&&j.rejoin(),l.push(j.buffer())),E.point=M,b&&u.lineEnd()},polygonStart:function(){u=j,l=[],c=[],y=!0},polygonEnd:function(){u=v,l=a.merge(l);var t=function(e){for(var t=0,n=c.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=c[i],u=s.length,l=s[0];o<u;++o)a=s[o],l[1]<=r?a[1]>r&&Re(l,a,e)>0&&++t:a[1]<=r&&Re(l,a,e)<0&&--t,l=a;return 0!==t}([e,r]),n=y&&t,i=l.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),S(null,null,1,u),u.lineEnd()),i&&er(l,o,t,S,u),u.polygonEnd()),l=c=f=null}};function S(a,o,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(o,u))||s(a,o)<0^u>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function w(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function M(e,t){w(e,t)&&u.point(e,t)}function k(e,t){var n=w(e=Math.max(-lr,Math.min(lr,e)),t=Math.max(-lr,Math.min(lr,t)));if(c&&f.push([e,t]),x)p=e,d=t,h=n,x=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&b)u.point(e,t);else{var r={a:{x:g,y:m},b:{x:e,y:t}};O(r)?(b||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),y=!1):n&&(u.lineStart(),u.point(e,t),y=!1)}g=e,m=t,b=n}return E};function i(r,i){return O(r[0]-e)<Te?i>0?0:3:O(r[0]-n)<Te?i>0?2:1:O(r[1]-t)<Te?i>0?1:0:i>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function fr(e){var t=0,n=Ie/3,r=_r(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ie/180,n=e[1]*Ie/180):[t/Ie*180,n/Ie*180]},i}function pr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(e,t){var n=Math.sqrt(i-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),a-n*Math.cos(e)]}return o.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,De((i-(e*e+n*n)*r*r)/(2*r))]},o}a.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),(i=a(e)).valid=!0,i},extent:function(s){return arguments.length?(a=cr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(a.geo.conicEqualArea=function(){return fr(pr)}).raw=pr,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){var e,t,n,r,i=a.geo.albers(),o=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(i){var a=i[0],o=i[1];return e=null,t(a,o),e||(n(a,o),e)||r(a,o),e}return l.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,a=(e[1]-n[1])/t;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?o:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:i).invert(e)},l.stream=function(e){var t=i.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(e){return arguments.length?(i.precision(e),o.precision(e),s.precision(e),l):i.precision()},l.scale=function(e){return arguments.length?(i.scale(e),o.scale(.35*e),s.scale(e),l.translate(i.translate())):i.scale()},l.translate=function(e){if(!arguments.length)return i.translate();var a=i.scale(),c=+e[0],f=+e[1];return t=i.translate(e).clipExtent([[c-.455*a,f-.238*a],[c+.455*a,f+.238*a]]).stream(u).point,n=o.translate([c-.307*a,f+.201*a]).clipExtent([[c-.425*a+Te,f+.12*a+Te],[c-.214*a-Te,f+.234*a-Te]]).stream(u).point,r=s.translate([c-.205*a,f+.212*a]).clipExtent([[c-.214*a+Te,f+.166*a+Te],[c-.115*a-Te,f+.234*a-Te]]).stream(u).point,l},l.scale(1070)};var dr,hr,gr,mr,br,xr,yr={point:D,lineStart:D,lineEnd:D,polygonStart:function(){hr=0,yr.lineStart=vr},polygonEnd:function(){yr.lineStart=yr.lineEnd=yr.point=D,dr+=O(hr/2)}};function vr(){var e,t,n,r;function i(e,t){hr+=r*e-n*t,n=e,r=t}yr.point=function(a,o){yr.point=i,e=n=a,t=r=o},yr.lineEnd=function(){i(e,t)}}var jr={point:function(e,t){e<gr&&(gr=e),e>br&&(br=e),t<mr&&(mr=t),t>xr&&(xr=t)},lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D};function Or(){var e=Er(4.5),t=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=Er(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function i(e,r){t.push("M",e,",",r),n.point=a}function a(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function Er(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Sr,wr={point:Mr,lineStart:kr,lineEnd:Tr,polygonStart:function(){wr.lineStart=Cr},polygonEnd:function(){wr.point=Mr,wr.lineStart=kr,wr.lineEnd=Tr}};function Mr(e,t){Mn+=e,kn+=t,++Tn}function kr(){var e,t;function n(n,r){var i=n-e,a=r-t,o=Math.sqrt(i*i+a*a);Cn+=o*(e+n)/2,In+=o*(t+r)/2,Fn+=o,Mr(e=n,t=r)}wr.point=function(r,i){wr.point=n,Mr(e=r,t=i)}}function Tr(){wr.point=Mr}function Cr(){var e,t,n,r;function i(e,t){var i=e-n,a=t-r,o=Math.sqrt(i*i+a*a);Cn+=o*(n+e)/2,In+=o*(r+t)/2,Fn+=o,Ln+=(o=r*e-n*t)*(n+e),An+=o*(r+t),Nn+=3*o,Mr(n=e,r=t)}wr.point=function(a,o){wr.point=i,Mr(e=n=a,t=r=o)},wr.lineEnd=function(){i(e,t)}}function Ir(e){var t=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:D};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Fe)}function i(t,r){e.moveTo(t,r),n.point=a}function a(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Fr(e){var t=.5,n=Math.cos(30*Ne),r=16;function i(e){return(r?o:a)(e)}function a(t){return Ar(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function o(t){var n,i,a,o,u,l,c,f,p,d,h,g,m={point:b,lineStart:x,lineEnd:v,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function b(n,r){n=e(n,r),t.point(n[0],n[1])}function x(){f=NaN,m.point=y,t.lineStart()}function y(n,i){var a=zn([n,i]),o=e(n,i);s(f,p,c,d,h,g,f=o[0],p=o[1],c=n,d=a[0],h=a[1],g=a[2],r,t),t.point(f,p)}function v(){m.point=b,t.lineEnd()}function j(){x(),m.point=O,m.lineEnd=E}function O(e,t){y(n=e,t),i=f,a=p,o=d,u=h,l=g,m.point=y}function E(){s(f,p,c,d,h,g,i,a,n,o,u,l,r,t),m.lineEnd=v,v()}return m}function s(r,i,a,o,u,l,c,f,p,d,h,g,m,b){var x=c-r,y=f-i,v=x*x+y*y;if(v>4*t&&m--){var j=o+d,E=u+h,S=l+g,w=Math.sqrt(j*j+E*E+S*S),M=Math.asin(S/=w),k=O(O(S)-1)<Te||O(a-p)<Te?(a+p)/2:Math.atan2(E,j),T=e(k,M),C=T[0],I=T[1],F=C-r,L=I-i,A=y*F-x*L;(A*A/v>t||O((x*F+y*L)/v-.5)>.3||o*d+u*h+l*g<n)&&(s(r,i,a,o,u,l,C,I,k,j/=w,E/=w,S,m,b),b.point(C,I),s(C,I,k,j,E,S,c,f,p,d,h,g,m,b))}}return i.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,i):Math.sqrt(t)},i}function Lr(e){this.stream=e}function Ar(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Nr(e){return _r((function(){return e}))()}function _r(e){var t,n,r,i,o,s,u=Fr((function(e,n){return[(e=t(e,n))[0]*l+i,o-e[1]*l]})),l=150,c=480,f=250,p=0,d=0,h=0,g=0,m=0,b=sr,x=_,y=null,v=null;function j(e){return[(e=r(e[0]*Ne,e[1]*Ne))[0]*l+i,o-e[1]*l]}function E(e){return(e=r.invert((e[0]-i)/l,(o-e[1])/l))&&[e[0]*_e,e[1]*_e]}function S(){r=Jn(n=Dr(h,g,m),t);var e=t(p,d);return i=c-e[0]*l,o=f+e[1]*l,w()}function w(){return s&&(s.valid=!1,s=null),j}return j.stream=function(e){return s&&(s.valid=!1),(s=Pr(b(n,u(x(e))))).valid=!0,s},j.clipAngle=function(e){return arguments.length?(b=null==e?(y=e,sr):function(e){var t=Math.cos(e),n=t>0,r=O(t)>Te;return rr(i,(function(e){var t,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,p){var d,h=[f,p],g=i(f,p),m=n?g?0:o(f,p):g?o(f+(f<0?Ie:-Ie),p):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(d=a(t,h),(Vn(t,d)||Vn(h,d))&&(h[0]+=Te,h[1]+=Te,g=i(h[0],h[1]))),g!==u)c=0,g?(e.lineStart(),d=a(h,t),e.point(d[0],d[1])):(d=a(t,h),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(r&&t&&n^g){var b;m&s||!(b=a(h,t,!0))||(c=0,n?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1])))}!g||t&&Vn(t,h)||e.point(h[0],h[1]),t=h,u=g,s=m},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),qr(e,6*Ne),n?[0,-e]:[-Ie,e-Ie]);function i(e,n){return Math.cos(e)*Math.cos(n)>t}function a(e,n,r){var i=[1,0,0],a=Un(zn(e),zn(n)),o=Dn(a,a),s=a[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,f=Un(i,a),p=$n(i,l);Bn(p,$n(a,c));var d=f,h=Dn(p,d),g=Dn(d,d),m=h*h-g*(Dn(p,p)-1);if(!(m<0)){var b=Math.sqrt(m),x=$n(d,(-h-b)/g);if(Bn(x,p),x=Gn(x),!r)return x;var y,v=e[0],j=n[0],E=e[1],S=n[1];j<v&&(y=v,v=j,j=y);var w=j-v,M=O(w-Ie)<Te;if(!M&&S<E&&(y=E,E=S,S=y),M||w<Te?M?E+S>0^x[1]<(O(x[0]-v)<Te?E:S):E<=x[1]&&x[1]<=S:w>Ie^(v<=x[0]&&x[0]<=j)){var k=$n(d,(-h+b)/g);return Bn(k,p),[x,Gn(k)]}}}function o(t,r){var i=n?e:Ie-e,a=0;return t<-i?a|=1:t>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}((y=+e)*Ne),w()):y},j.clipExtent=function(e){return arguments.length?(v=e,x=e?cr(e[0][0],e[0][1],e[1][0],e[1][1]):_,w()):v},j.scale=function(e){return arguments.length?(l=+e,S()):l},j.translate=function(e){return arguments.length?(c=+e[0],f=+e[1],S()):[c,f]},j.center=function(e){return arguments.length?(p=e[0]%360*Ne,d=e[1]%360*Ne,S()):[p*_e,d*_e]},j.rotate=function(e){return arguments.length?(h=e[0]%360*Ne,g=e[1]%360*Ne,m=e.length>2?e[2]%360*Ne:0,S()):[h*_e,g*_e,m*_e]},a.rebind(j,u,"precision"),function(){return t=e.apply(this,arguments),j.invert=t.invert&&E,S()}}function Pr(e){return Ar(e,(function(t,n){e.point(t*Ne,n*Ne)}))}function Rr(e,t){return[e,t]}function zr(e,t){return[e>Ie?e-Fe:e<-Ie?e+Fe:e,t]}function Dr(e,t,n){return e?t||n?Jn(Br(e),$r(t,n)):Br(e):t||n?$r(t,n):zr}function Ur(e){return function(t,n){return[(t+=e)>Ie?t-Fe:t<-Ie?t+Fe:t,n]}}function Br(e){var t=Ur(e);return t.invert=Ur(-e),t}function $r(e,t){var n=Math.cos(e),r=Math.sin(e),i=Math.cos(t),a=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),De(c*i+u*a)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),De(c*n-s*r)]},o}function qr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;null!=i?(i=Gr(n,i),a=Gr(n,a),(o>0?i<a:i>a)&&(i+=o*Fe)):(i=e+o*Fe,a=e-.5*u);for(var l,c=i;o>0?c>a:c<a;c-=u)s.point((l=Gn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Gr(e,t){var n=zn(t);n[0]-=e,qn(n);var r=ze(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Te)%(2*Math.PI)}function Vr(e,t,n){var r=a.range(e,t-Te,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Wr(e,t,n){var r=a.range(e,t-Te,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Hr(e){return e.source}function Kr(e){return e.target}a.geo.path=function(){var e,t,n,r,i,o=4.5;function s(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(r)),a.geo.stream(e,i)),r.result()}function u(){return i=null,s}return s.area=function(e){return dr=0,a.geo.stream(e,n(yr)),dr},s.centroid=function(e){return Mn=kn=Tn=Cn=In=Fn=Ln=An=Nn=0,a.geo.stream(e,n(wr)),Nn?[Ln/Nn,An/Nn]:Fn?[Cn/Fn,In/Fn]:Tn?[Mn/Tn,kn/Tn]:[NaN,NaN]},s.bounds=function(e){return br=xr=-(gr=mr=1/0),a.geo.stream(e,n(jr)),[[gr,mr],[br,xr]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||(r=t,i=Fr((function(e,t){return r([e*_e,t*_e])})),function(e){return Pr(i(e))}):_,u()):e;var r,i},s.context=function(e){return arguments.length?(r=null==(t=e)?new Or:new Ir(e),"function"!=typeof o&&r.pointRadius(o),u()):t},s.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),s):o},s.projection(a.geo.albersUsa()).context(null)},a.geo.transform=function(e){return{stream:function(t){var n=new Lr(t);for(var r in e)n[r]=e[r];return n}}},Lr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},a.geo.projection=Nr,a.geo.projectionMutator=_r,(a.geo.equirectangular=function(){return Nr(Rr)}).raw=Rr.invert=Rr,a.geo.rotation=function(e){function t(t){return(t=e(t[0]*Ne,t[1]*Ne))[0]*=_e,t[1]*=_e,t}return e=Dr(e[0]%360*Ne,e[1]*Ne,e.length>2?e[2]*Ne:0),t.invert=function(t){return(t=e.invert(t[0]*Ne,t[1]*Ne))[0]*=_e,t[1]*=_e,t},t},zr.invert=Rr,a.geo.circle=function(){var e,t,n=[0,0],r=6;function i(){var e="function"==typeof n?n.apply(this,arguments):n,r=Dr(-e[0]*Ne,-e[1]*Ne,0).invert,i=[];return t(null,null,1,{point:function(e,t){i.push(e=r(e,t)),e[0]*=_e,e[1]*=_e}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(e){return arguments.length?(n=e,i):n},i.angle=function(n){return arguments.length?(t=qr((e=+n)*Ne,r*Ne),i):e},i.precision=function(n){return arguments.length?(t=qr(e*Ne,(r=+n)*Ne),i):r},i.angle(90)},a.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ne,i=e[1]*Ne,a=t[1]*Ne,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},a.geo.graticule=function(){var e,t,n,r,i,o,s,u,l,c,f,p,d=10,h=d,g=90,m=360,b=2.5;function x(){return{type:"MultiLineString",coordinates:y()}}function y(){return a.range(Math.ceil(r/g)*g,n,g).map(f).concat(a.range(Math.ceil(u/m)*m,s,m).map(p)).concat(a.range(Math.ceil(t/d)*d,e,d).filter((function(e){return O(e%g)>Te})).map(l)).concat(a.range(Math.ceil(o/h)*h,i,h).filter((function(e){return O(e%m)>Te})).map(c))}return x.lines=function(){return y().map((function(e){return{type:"LineString",coordinates:e}}))},x.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(p(s).slice(1),f(n).reverse().slice(1),p(u).reverse().slice(1))]}},x.extent=function(e){return arguments.length?x.majorExtent(e).minorExtent(e):x.minorExtent()},x.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),x.precision(b)):[[r,u],[n,s]]},x.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),x.precision(b)):[[t,o],[e,i]]},x.step=function(e){return arguments.length?x.majorStep(e).minorStep(e):x.minorStep()},x.majorStep=function(e){return arguments.length?(g=+e[0],m=+e[1],x):[g,m]},x.minorStep=function(e){return arguments.length?(d=+e[0],h=+e[1],x):[d,h]},x.precision=function(a){return arguments.length?(b=+a,l=Vr(o,i,90),c=Wr(t,e,b),f=Vr(u,s,90),p=Wr(r,n,b),x):b},x.majorExtent([[-180,-90+Te],[180,90-Te]]).minorExtent([[-180,-80-Te],[180,80+Te]])},a.geo.greatArc=function(){var e,t,n=Hr,r=Kr;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return i.distance=function(){return a.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,i):n},i.target=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,i):r},i.precision=function(){return arguments.length?i:0},i},a.geo.interpolate=function(e,t){return n=e[0]*Ne,r=e[1]*Ne,i=t[0]*Ne,a=t[1]*Ne,o=Math.cos(r),s=Math.sin(r),u=Math.cos(a),l=Math.sin(a),c=o*Math.cos(n),f=o*Math.sin(n),p=u*Math.cos(i),d=u*Math.sin(i),h=2*Math.asin(Math.sqrt(Be(a-r)+o*u*Be(i-n))),g=1/Math.sin(h),(m=h?function(e){var t=Math.sin(e*=h)*g,n=Math.sin(h-e)*g,r=n*c+t*p,i=n*f+t*d,a=n*s+t*l;return[Math.atan2(i,r)*_e,Math.atan2(a,Math.sqrt(r*r+i*i))*_e]}:function(){return[n*_e,r*_e]}).distance=h,m;var n,r,i,a,o,s,u,l,c,f,p,d,h,g,m},a.geo.length=function(e){return Sr=0,a.geo.stream(e,Yr),Sr};var Yr={sphere:D,point:D,lineStart:function(){var e,t,n;function r(r,i){var a=Math.sin(i*=Ne),o=Math.cos(i),s=O((r*=Ne)-e),u=Math.cos(s);Sr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-t*o*u)*s),t*a+n*o*u),e=r,t=a,n=o}Yr.point=function(i,a){e=i*Ne,t=Math.sin(a*=Ne),n=Math.cos(a),Yr.point=r},Yr.lineEnd=function(){Yr.point=Yr.lineEnd=D}},lineEnd:D,polygonStart:D,polygonEnd:D};function Xr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}var Zr=Xr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(a.geo.azimuthalEqualArea=function(){return Nr(Zr)}).raw=Zr;var Jr=Xr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),_);function Qr(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Ie/4+e/2)},i=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),a=n*Math.pow(r(e),i)/i;if(!i)return ni;function o(e,t){a>0?t<-Ae+Te&&(t=-Ae+Te):t>Ae-Te&&(t=Ae-Te);var n=a/Math.pow(r(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}return o.invert=function(e,t){var n=a-t,r=Pe(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Ae]},o}function ei(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),i=n/r+e;if(O(r)<Te)return Rr;function a(e,t){var n=i-t;return[n*Math.sin(r*e),i-n*Math.cos(r*e)]}return a.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,i-Pe(r)*Math.sqrt(e*e+n*n)]},a}(a.geo.azimuthalEquidistant=function(){return Nr(Jr)}).raw=Jr,(a.geo.conicConformal=function(){return fr(Qr)}).raw=Qr,(a.geo.conicEquidistant=function(){return fr(ei)}).raw=ei;var ti=Xr((function(e){return 1/e}),Math.atan);function ni(e,t){return[e,Math.log(Math.tan(Ie/4+t/2))]}function ri(e){var t,n=Nr(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Ie*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(a.geo.gnomonic=function(){return Nr(ti)}).raw=ti,ni.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Ae]},(a.geo.mercator=function(){return ri(ni)}).raw=ni;var ii=Xr((function(){return 1}),Math.asin);(a.geo.orthographic=function(){return Nr(ii)}).raw=ii;var ai=Xr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));function oi(e,t){return[Math.log(Math.tan(Ie/4+t/2)),-e]}function si(e){return e[0]}function ui(e){return e[1]}function li(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&Re(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ci(e,t){return e[0]-t[0]||e[1]-t[1]}(a.geo.stereographic=function(){return Nr(ai)}).raw=ai,oi.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Ae]},(a.geo.transverseMercator=function(){var e=ri(oi),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=oi,a.geom={},a.geom.hull=function(e){var t=si,n=ui;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,i=vt(t),a=vt(n),o=e.length,s=[],u=[];for(r=0;r<o;r++)s.push([+i.call(this,e[r],r),+a.call(this,e[r],r),r]);for(s.sort(ci),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=li(s),c=li(u),f=c[0]===l[0],p=c[c.length-1]===l[l.length-1],d=[];for(r=l.length-1;r>=0;--r)d.push(e[s[l[r]][2]]);for(r=+f;r<c.length-p;++r)d.push(e[s[c[r]][2]]);return d}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},a.geom.polygon=function(e){return W(e,fi),e};var fi=a.geom.polygon.prototype=[];function pi(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function di(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,p=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+p*o,u+p*c]}function hi(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}fi.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},fi.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},fi.clip=function(e){for(var t,n,r,i,a,o,s=hi(e),u=-1,l=this.length-hi(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],a=t[(r=t.length-s)-1],n=-1;++n<r;)pi(o=t[n],c,i)?(pi(a,c,i)||e.push(di(a,o,c,i)),e.push(o)):pi(a,c,i)&&e.push(di(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var gi,mi,bi,xi,yi,vi=[],ji=[];function Oi(){Ui(this),this.edge=this.site=this.circle=null}function Ei(e){var t=vi.pop()||new Oi;return t.site=e,t}function Si(e){Ai(e),bi.remove(e),vi.push(e),Ui(e)}function wi(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Si(e);for(var u=a;u.circle&&O(n-u.circle.x)<Te&&O(r-u.circle.cy)<Te;)a=u.P,s.unshift(u),Si(u),u=a;s.unshift(u),Ai(u);for(var l=o;l.circle&&O(n-l.circle.x)<Te&&O(r-l.circle.cy)<Te;)o=l.N,s.push(l),Si(l),l=o;s.push(l),Ai(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Ri(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Pi(u.site,l.site,null,i),Li(u),Li(l)}function Mi(e){for(var t,n,r,i,a=e.x,o=e.y,s=bi._;s;)if((r=ki(s,o)-a)>Te)s=s.L;else{if(!((i=a-Ti(s,o))>Te)){r>-Te?(t=s.P,n=s):i>-Te?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Ei(e);if(bi.insert(t,u),t||n){if(t===n)return Ai(t),n=Ei(t.site),bi.insert(u,n),u.edge=n.edge=Pi(t.site,u.site),Li(t),void Li(n);if(n){Ai(t),Ai(n);var l=t.site,c=l.x,f=l.y,p=e.x-c,d=e.y-f,h=n.site,g=h.x-c,m=h.y-f,b=2*(p*m-d*g),x=p*p+d*d,y=g*g+m*m,v={x:(m*x-d*y)/b+c,y:(p*y-g*x)/b+f};Ri(n.edge,l,h,v),u.edge=Pi(l,e,null,v),n.edge=Pi(e,h,null,v),Li(t),Li(n)}else u.edge=Pi(t.site,u.site)}}function ki(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/a-1/l,p=c/l;return f?(-p+Math.sqrt(p*p-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function Ti(e,t){var n=e.N;if(n)return ki(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ci(e){this.site=e,this.edges=[]}function Ii(e,t){return t.angle-e.angle}function Fi(){Ui(this),this.x=this.y=this.arc=this.site=this.cy=null}function Li(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=2*(u*(m=a.y-s)-l*c);if(!(f>=-Ce)){var p=u*u+l*l,d=c*c+m*m,h=(m*p-l*d)/f,g=(u*d-c*p)/f,m=g+s,b=ji.pop()||new Fi;b.arc=e,b.site=i,b.x=h+o,b.y=m+Math.sqrt(h*h+g*g),b.cy=m,e.circle=b;for(var x=null,y=yi._;y;)if(b.y<y.y||b.y===y.y&&b.x<=y.x){if(!y.L){x=y.P;break}y=y.L}else{if(!y.R){x=y;break}y=y.R}yi.insert(x,b),x||(xi=b)}}}}function Ai(e){var t=e.circle;t&&(t.P||(xi=t.N),yi.remove(t),ji.push(t),Ui(t),e.circle=null)}function Ni(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,p=c.x,d=c.y,h=f.x,g=f.y,m=(p+h)/2,b=(d+g)/2;if(g===d){if(m<o||m>=s)return;if(p>h){if(a){if(a.y>=l)return}else a={x:m,y:u};n={x:m,y:l}}else{if(a){if(a.y<u)return}else a={x:m,y:l};n={x:m,y:u}}}else if(i=b-(r=(p-h)/(g-d))*m,r<-1||r>1)if(p>h){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(d<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function _i(e,t){this.l=e,this.r=t,this.a=this.b=null}function Pi(e,t,n,r){var i=new _i(e,t);return gi.push(i),n&&Ri(i,e,t,n),r&&Ri(i,t,e,r),mi[e.i].edges.push(new zi(i,e,t)),mi[t.i].edges.push(new zi(i,t,e)),i}function Ri(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function zi(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Di(){this._=null}function Ui(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Bi(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function $i(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function qi(e){for(;e.L;)e=e.L;return e}function Gi(e,t){var n,r,i,a=e.sort(Vi).pop();for(gi=[],mi=new Array(e.length),bi=new Di,yi=new Di;;)if(i=xi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(mi[a.i]=new Ci(a),Mi(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;wi(i.arc)}t&&(function(e){for(var t,n=gi,r=ur(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Ni(t=n[i],e)||!r(t)||O(t.a.x-t.b.x)<Te&&O(t.a.y-t.b.y)<Te)&&(t.a=t.b=null,n.splice(i,1))}(t),function(e){for(var t,n,r,i,a,o,s,u,l,c,f=e[0][0],p=e[1][0],d=e[0][1],h=e[1][1],g=mi,m=g.length;m--;)if((a=g[m])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)r=(c=s[o].end()).x,i=c.y,t=(l=s[++o%u].start()).x,n=l.y,(O(r-t)>Te||O(i-n)>Te)&&(s.splice(o,0,new zi((b=a.site,x=c,y=O(r-f)<Te&&h-i>Te?{x:f,y:O(t-f)<Te?n:h}:O(i-h)<Te&&p-r>Te?{x:O(n-h)<Te?t:p,y:h}:O(r-p)<Te&&i-d>Te?{x:p,y:O(t-p)<Te?n:d}:O(i-d)<Te&&r-f>Te?{x:O(n-d)<Te?t:f,y:d}:null,v=void 0,(v=new _i(b,null)).a=x,v.b=y,gi.push(v),v),a.site,null)),++u);var b,x,y,v}(t));var o={cells:mi,edges:gi};return bi=yi=gi=mi=null,o}function Vi(e,t){return t.y-e.y||t.x-e.x}Ci.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ii),t.length},zi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Di.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=qi(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Bi(this,n),n=(e=n).U),n.C=!1,r.C=!0,$i(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&($i(this,n),n=(e=n).U),n.C=!1,r.C=!0,Bi(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?qi(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Bi(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,$i(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Bi(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,$i(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Bi(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,$i(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},a.geom.voronoi=function(e){var t=si,n=ui,r=t,i=n,a=Wi;if(e)return o(e);function o(e){var t=new Array(e.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return Gi(s(e),a).cells.forEach((function(a,s){var u=a.edges,l=a.site;(t[s]=u.length?u.map((function(e){var t=e.start();return[t.x,t.y]})):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Te)*Te,y:Math.round(i(e,t)/Te)*Te,i:t}}))}return o.links=function(e){return Gi(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return Gi(s(e)).cells.forEach((function(n,r){for(var i,a,o,s,u=n.site,l=n.edges.sort(Ii),c=-1,f=l.length,p=l[f-1].edge,d=p.l===u?p.r:p.l;++c<f;)i=d,d=(p=l[c].edge).l===u?p.r:p.l,r<i.i&&r<d.i&&(o=i,s=d,((a=u).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&t.push([e[r],e[i.i],e[d.i]])})),t},o.x=function(e){return arguments.length?(r=vt(t=e),o):t},o.y=function(e){return arguments.length?(i=vt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(a=null==e?Wi:e,o):a===Wi?null:a},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):a===Wi?null:a&&a[1]},o};var Wi=[[-1e6,-1e6],[1e6,1e6]];function Hi(e){return e.x}function Ki(e){return e.y}function Yi(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=t.nodes;u[0]&&Yi(e,u[0],n,r,o,s),u[1]&&Yi(e,u[1],o,r,i,s),u[2]&&Yi(e,u[2],n,s,o,a),u[3]&&Yi(e,u[3],o,s,i,a)}}function Xi(e,t){e=a.rgb(e),t=a.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,s=t.g-r,u=t.b-i;return function(e){return"#"+dt(Math.round(n+o*e))+dt(Math.round(r+s*e))+dt(Math.round(i+u*e))}}function Zi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=na(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function Ji(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Qi(e,t){var n,r,i,a=ea.lastIndex=ta.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ea.exec(e))&&(r=ta.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Ji(n,r)})),a=ta.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}a.geom.delaunay=function(e){return a.geom.voronoi().triangles(e)},a.geom.quadtree=function(e,t,n,r,i){var a,o=si,s=ui;if(a=arguments.length)return o=Hi,s=Ki,3===a&&(i=n,r=t,n=t=0),u(e);function u(e){var u,l,c,f,p,d,h,g,m,b=vt(o),x=vt(s);if(null!=t)d=t,h=n,g=r,m=i;else if(g=m=-(d=h=1/0),l=[],c=[],p=e.length,a)for(f=0;f<p;++f)(u=e[f]).x<d&&(d=u.x),u.y<h&&(h=u.y),u.x>g&&(g=u.x),u.y>m&&(m=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<p;++f){var y=+b(u=e[f],f),v=+x(u,f);y<d&&(d=y),v<h&&(h=v),y>g&&(g=y),v>m&&(m=v),l.push(y),c.push(v)}var j=g-d,E=m-h;function S(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,l=e.y;if(null!=u)if(O(u-n)+O(l-r)<.01)w(e,t,n,r,i,a,o,s);else{var c=e.point;e.x=e.y=e.point=null,w(e,c,u,l,i,a,o,s),w(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else w(e,t,n,r,i,a,o,s)}function w(e,t,n,r,i,a,o,s){var u=.5*(i+o),l=.5*(a+s),c=n>=u,f=r>=l,p=f<<1|c;e.leaf=!1,c?i=u:o=u,f?a=l:s=l,S(e=e.nodes[p]||(e.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,i,a,o,s)}j>E?m=h+j:g=d+E;var M={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){S(M,e,+b(e,++f),+x(e,f),d,h,g,m)}};if(M.visit=function(e){Yi(e,M,d,h,g,m)},M.find=function(e){return function(e,t,n,r,i,a,o){var s,u=1/0;return function e(l,c,f,p,d){if(!(c>a||f>o||p<r||d<i)){if(h=l.point){var h,g=t-l.x,m=n-l.y,b=g*g+m*m;if(b<u){var x=Math.sqrt(u=b);r=t-x,i=n-x,a=t+x,o=n+x,s=h}}for(var y=l.nodes,v=.5*(c+p),j=.5*(f+d),O=(n>=j)<<1|t>=v,E=O+4;O<E;++O)if(l=y[3&O])switch(3&O){case 0:e(l,c,f,v,j);break;case 1:e(l,v,f,p,j);break;case 2:e(l,c,j,v,d);break;case 3:e(l,v,j,p,d)}}}(e,r,i,a,o),s}(M,e[0],e[1],d,h,g,m)},f=-1,null==t){for(;++f<p;)S(M,e[f],l[f],c[f],d,h,g,m);--f}else e.forEach(M.add);return l=c=e=u=null,M}return u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),u):null==t?null:[[t,n],[r,i]]},u.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),u):null==t?null:[r-t,i-n]},u},a.interpolateRgb=Xi,a.interpolateObject=Zi,a.interpolateNumber=Ji,a.interpolateString=Qi;var ea=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ta=new RegExp(ea.source,"g");function na(e,t){for(var n,r=a.interpolators.length;--r>=0&&!(n=a.interpolators[r](e,t)););return n}function ra(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(na(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}a.interpolate=na,a.interpolators=[function(e,t){var n=typeof t;return("string"===n?yt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?Xi:Qi:t instanceof We?Xi:Array.isArray(t)?ra:"object"===n&&isNaN(t)?Zi:Ji)(e,t)}],a.interpolateArray=ra;var ia=function(){return _},aa=a.map({linear:ia,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return la},cubic:function(){return ca},sin:function(){return pa},exp:function(){return da},circle:function(){return ha},elastic:function(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Fe*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Fe/t)}},back:function(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}},bounce:function(){return ga}}),oa=a.map({in:_,out:sa,"in-out":ua,"out-in":function(e){return ua(sa(e))}});function sa(e){return function(t){return 1-e(1-t)}}function ua(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function la(e){return e*e}function ca(e){return e*e*e}function fa(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function pa(e){return 1-Math.cos(e*Ae)}function da(e){return Math.pow(2,10*(e-1))}function ha(e){return 1-Math.sqrt(1-e*e)}function ga(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ma(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ba(e){var t,n,r,i=[e.a,e.b],a=[e.c,e.d],o=ya(i),s=xa(i,a),u=ya(((t=a)[0]+=(r=-s)*(n=i)[0],t[1]+=r*n[1],t))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*_e,this.translate=[e.e,e.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*_e:0}function xa(e,t){return e[0]*t[0]+e[1]*t[1]}function ya(e){var t=Math.sqrt(xa(e,e));return t&&(e[0]/=t,e[1]/=t),t}a.ease=function(e){var t,n=e.indexOf("-"),r=n>=0?e.slice(0,n):e,i=n>=0?e.slice(n+1):"in";return r=aa.get(r)||ia,i=oa.get(i)||_,t=i(r.apply(null,o.call(arguments,1))),function(e){return e<=0?0:e>=1?1:t(e)}},a.interpolateHcl=function(e,t){e=a.hcl(e),t=a.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,s=t.c-r,u=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return Je(n+o*e,r+s*e,i+u*e)+""}},a.interpolateHsl=function(e,t){e=a.hsl(e),t=a.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,s=t.s-r,u=t.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return Ye(n+o*e,r+s*e,i+u*e)+""}},a.interpolateLab=function(e,t){e=a.lab(e),t=a.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,s=t.a-r,u=t.b-i;return function(e){return at(n+o*e,r+s*e,i+u*e)+""}},a.interpolateRound=ma,a.transform=function(e){var t=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ba(n?n.matrix:va)})(e)},ba.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var va={a:1,b:0,c:0,d:1,e:0,f:0};function ja(e){return e.length?e.pop()+",":""}function Oa(e,t){var n=[],r=[];return e=a.transform(e),t=a.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Ji(e[0],t[0])},{i:i-2,x:Ji(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(ja(n)+"rotate(",null,")")-2,x:Ji(e,t)})):t&&n.push(ja(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(ja(n)+"skewX(",null,")")-2,x:Ji(e,t)}):t&&n.push(ja(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(ja(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Ji(e[0],t[0])},{i:i-2,x:Ji(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(ja(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Ea(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Sa(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function wa(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;for(var n=Ma(e),r=Ma(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Ma(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function ka(e){e.fixed|=2}function Ta(e){e.fixed&=-7}function Ca(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Ia(e){e.fixed&=-5}function Fa(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,u=-1;++u<s;)null!=(a=o[u])&&(Fa(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}a.interpolateTransform=Oa,a.layout={},a.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(wa(e[n]));return t}},a.layout.chord=function(){var e,t,n,r,i,o,s,u={},l=0;function c(){var u,c,p,d,h,g={},m=[],b=a.range(r),x=[];for(e=[],t=[],u=0,d=-1;++d<r;){for(c=0,h=-1;++h<r;)c+=n[d][h];m.push(c),x.push(a.range(r)),u+=c}for(i&&b.sort((function(e,t){return i(m[e],m[t])})),o&&x.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),u=(Fe-l*r)/u,c=0,d=-1;++d<r;){for(p=c,h=-1;++h<r;){var y=b[d],v=x[y][h],j=n[y][v],O=c,E=c+=j*u;g[y+"-"+v]={index:y,subindex:v,startAngle:O,endAngle:E,value:j}}t[y]={index:y,startAngle:p,endAngle:c,value:m[y]},c+=l}for(d=-1;++d<r;)for(h=d-1;++h<r;){var S=g[d+"-"+h],w=g[h+"-"+d];(S.value||w.value)&&e.push(S.value<w.value?{source:w,target:S}:{source:S,target:w})}s&&f()}function f(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(l=n,e=t=null,u):l},u.sortGroups=function(n){return arguments.length?(i=n,e=t=null,u):i},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return t||c(),t},u},a.layout.force=function(){var e,t,n,r,i,o,s={},u=a.dispatch("start","tick","end"),l=[1,1],c=.9,f=La,p=Aa,d=-30,h=Na,g=.1,m=.64,b=[],x=[];function y(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(s*s/m<u){if(u<h){var l=t.charge/u;e.px-=a*l,e.py-=o*l}return!0}t.point&&u&&u<h&&(l=t.pointCharge/u,e.px-=a*l,e.py-=o*l)}return!t.charge}}function v(e){e.px=a.event.x,e.py=a.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,f,p,h,m,v,j,O,E=b.length,S=x.length;for(s=0;s<S;++s)p=(f=x[s]).source,(m=(j=(h=f.target).x-p.x)*j+(O=h.y-p.y)*O)&&(j*=m=n*i[s]*((m=Math.sqrt(m))-r[s])/m,O*=m,h.x-=j*(v=p.weight+h.weight?p.weight/(p.weight+h.weight):.5),h.y-=O*v,p.x+=j*(v=1-v),p.y+=O*v);if((v=n*g)&&(j=l[0]/2,O=l[1]/2,s=-1,v))for(;++s<E;)(f=b[s]).x+=(j-f.x)*v,f.y+=(O-f.y)*v;if(d)for(Fa(t=a.geom.quadtree(b),n,o),s=-1;++s<E;)(f=b[s]).fixed||t.visit(y(f));for(s=-1;++s<E;)(f=b[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(b=e,s):b},s.links=function(e){return arguments.length?(x=e,s):x},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.chargeDistance=function(e){return arguments.length?(h=e*e,s):Math.sqrt(h)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=Tt(s.tick)),s):n},s.start=function(){var e,t,n,a=b.length,u=x.length,c=l[0],h=l[1];for(e=0;e<a;++e)(n=b[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=x[e]).source&&(n.source=b[n.source]),"number"==typeof n.target&&(n.target=b[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<a;++e)n=b[e],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",h)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"==typeof f)for(e=0;e<u;++e)r[e]=+f.call(this,x[e],e);else for(e=0;e<u;++e)r[e]=f;if(i=[],"function"==typeof p)for(e=0;e<u;++e)i[e]=+p.call(this,x[e],e);else for(e=0;e<u;++e)i[e]=p;if(o=[],"function"==typeof d)for(e=0;e<a;++e)o[e]=+d.call(this,b[e],e);else for(e=0;e<a;++e)o[e]=d;function g(n,r){if(!t){for(t=new Array(a),l=0;l<a;++l)t[l]=[];for(l=0;l<u;++l){var i=x[l];t[i.source.index].push(i.target),t[i.target.index].push(i.source)}}for(var o,s=t[e],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=a.behavior.drag().origin(_).on("dragstart.force",ka).on("drag.force",v).on("dragend.force",Ta)),!arguments.length)return t;this.on("mouseover.force",Ca).on("mouseout.force",Ia).call(t)},a.rebind(s,u,"on")};var La=20,Aa=1,Na=1/0;function _a(e,t){return a.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Ba,e}function Pa(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ra(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function za(e){return e.children}function Da(e){return e.value}function Ua(e,t){return t.value-e.value}function Ba(e){return a.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}a.layout.hierarchy=function(){var e=Ua,t=za,n=Da;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=t.call(r,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;n&&(a.value=0),a.children=l}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return Ra(i,(function(t){var r,i;e&&(r=t.children)&&r.sort(e),n&&(i=t.parent)&&(i.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Pa(e,(function(e){e.children&&(e.value=0)})),Ra(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},a.layout.partition=function(){var e=a.layout.hierarchy(),t=[1,1];function n(e,t,r,i){var a=e.children;if(e.x=t,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)n(s=a[l],t,u=s.value*r,i),t+=u}}function r(e){var t=e.children,n=0;if(t&&(i=t.length))for(var i,a=-1;++a<i;)n=Math.max(n,r(t[a]));return 1+n}function i(i,a){var o=e.call(this,i,a);return n(o[0],0,t[0],t[1]/r(o[0])),o}return i.size=function(e){return arguments.length?(t=e,i):t},_a(i,e)},a.layout.pie=function(){var e=Number,t=$a,n=0,r=Fe,i=0;function o(s){var u,l=s.length,c=s.map((function(t,n){return+e.call(o,t,n)})),f=+("function"==typeof n?n.apply(this,arguments):n),p=("function"==typeof r?r.apply(this,arguments):r)-f,d=Math.min(Math.abs(p)/l,+("function"==typeof i?i.apply(this,arguments):i)),h=d*(p<0?-1:1),g=a.sum(c),m=g?(p-l*h)/g:0,b=a.range(l),x=[];return null!=t&&b.sort(t===$a?function(e,t){return c[t]-c[e]}:function(e,n){return t(s[e],s[n])}),b.forEach((function(e){x[e]={data:s[e],value:u=c[e],startAngle:f,endAngle:f+=u*m+h,padAngle:d}})),x}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(i=e,o):i},o};var $a={};function qa(e){return e.x}function Ga(e){return e.y}function Va(e,t,n){e.y0=t,e.y=n}a.layout.stack=function(){var e=_,t=Ka,n=Ya,r=Va,i=qa,o=Ga;function s(u,l){if(!(d=u.length))return u;var c=u.map((function(t,n){return e.call(s,t,n)})),f=c.map((function(e){return e.map((function(e,t){return[i.call(s,e,t),o.call(s,e,t)]}))})),p=t.call(s,f,l);c=a.permute(c,p),f=a.permute(f,p);var d,h,g,m,b=n.call(s,f,l),x=c[0].length;for(g=0;g<x;++g)for(r.call(s,c[0][g],m=b[g],f[0][g][1]),h=1;h<d;++h)r.call(s,c[h][g],m+=f[h-1][g][1],f[h][g][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"==typeof e?e:Wa.get(e)||Ka,s):t},s.offset=function(e){return arguments.length?(n="function"==typeof e?e:Ha.get(e)||Ya,s):n},s.x=function(e){return arguments.length?(i=e,s):i},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var Wa=a.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(Xa),o=e.map(Za),s=a.range(r).sort((function(e,t){return i[e]-i[t]})),u=0,l=0,c=[],f=[];for(t=0;t<r;++t)n=s[t],u<l?(u+=o[n],c.push(n)):(l+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(e){return a.range(e.length).reverse()},default:Ka}),Ha=a.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,i,a,o,s,u,l,c=e.length,f=e[0],p=f.length,d=[];for(d[0]=u=l=0,n=1;n<p;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}d[n]=u-=i?a/i*s:0,u<l&&(l=u)}for(n=0;n<p;++n)d[n]-=l;return d},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Ya});function Ka(e){return a.range(e.length)}function Ya(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function Xa(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function Za(e){return e.reduce(Ja,0)}function Ja(e,t){return e+t[1]}function Qa(e,t){return eo(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function eo(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function to(e){return[a.min(e),a.max(e)]}function no(e,t){return e.value-t.value}function ro(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function io(e,t){e._pack_next=t,t._pack_prev=e}function ao(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function oo(e){if((t=e.children)&&(u=t.length)){var t,n,r,i,a,o,s,u,l=1/0,c=-1/0,f=1/0,p=-1/0;if(t.forEach(so),(n=t[0]).x=-n.r,n.y=0,y(n),u>1&&((r=t[1]).x=r.r,r.y=0,y(r),u>2))for(co(n,r,i=t[2]),y(i),ro(n,i),n._pack_prev=i,ro(i,r),r=n._pack_next,a=3;a<u;a++){co(n,r,i=t[a]);var d=0,h=1,g=1;for(o=r._pack_next;o!==r;o=o._pack_next,h++)if(ao(o,i)){d=1;break}if(1==d)for(s=n._pack_prev;s!==o._pack_prev&&!ao(s,i);s=s._pack_prev,g++);d?(h<g||h==g&&r.r<n.r?io(n,r=o):io(n=s,r),a--):(ro(n,i),r=i,y(i))}var m=(l+c)/2,b=(f+p)/2,x=0;for(a=0;a<u;a++)(i=t[a]).x-=m,i.y-=b,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=x,t.forEach(uo)}function y(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),p=Math.max(e.y+e.r,p)}}function so(e){e._pack_next=e._pack_prev=e}function uo(e){delete e._pack_next,delete e._pack_prev}function lo(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)lo(i[a],t,n,r)}function co(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a,n.y=e.y+u*a-l*i}else n.x=e.x+r,n.y=e.y}function fo(e,t){return e.parent==t.parent?1:2}function po(e){var t=e.children;return t.length?t[0]:e.t}function ho(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function go(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function mo(e,t,n){return e.a.parent===t.parent?e.a:n}function bo(e){var t=e.children;return t&&t.length?bo(t[0]):e}function xo(e){var t,n=e.children;return n&&(t=n.length)?xo(n[t-1]):e}function yo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function vo(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function jo(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Oo(e){return e.rangeExtent?e.rangeExtent():jo(e.range())}function Eo(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function So(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function wo(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:Mo}a.layout.histogram=function(){var e=!0,t=Number,n=to,r=Qa;function i(i,o){for(var s,u,l=[],c=i.map(t,this),f=n.call(this,c,o),p=r.call(this,f,c,o),d=(o=-1,c.length),h=p.length-1,g=e?1:1/d;++o<h;)(s=l[o]=[]).dx=p[o+1]-(s.x=p[o]),s.y=0;if(h>0)for(o=-1;++o<d;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[a.bisect(p,u,1,h)-1]).y+=g,s.push(i[o]));return l}return i.value=function(e){return arguments.length?(t=e,i):t},i.range=function(e){return arguments.length?(n=vt(e),i):n},i.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return eo(t,e)}:vt(e),i):r},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},a.layout.pack=function(){var e,t=a.layout.hierarchy().sort(no),n=0,r=[1,1];function i(i,a){var o=t.call(this,i,a),s=o[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Ra(s,(function(e){e.r=+c(e.value)})),Ra(s,oo),n){var f=n*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;Ra(s,(function(e){e.r+=f})),Ra(s,oo),Ra(s,(function(e){e.r-=f}))}return lo(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return i.size=function(e){return arguments.length?(r=e,i):r},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(e){return arguments.length?(n=+e,i):n},_a(i,t)},a.layout.tree=function(){var e=a.layout.hierarchy().sort(null).value(null),t=fo,n=[1,1],r=null;function i(i,a){var l=e.call(this,i,a),c=l[0],f=function(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(Ra(f,o),f.parent.m=-f.z,Pa(f,s),r)Pa(c,u);else{var p=c,d=c,h=c;Pa(c,(function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>h.depth&&(h=e)}));var g=t(p,d)/2-p.x,m=n[0]/(d.x+t(d,p)/2+g),b=n[1]/(h.depth||1);Pa(c,(function(e){e.x=(e.x+g)*m,e.y=e.depth*b}))}return l}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n.length){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,p=u.m;s=ho(s),a=po(a),s&&a;)u=po(u),(o=ho(o)).a=e,(i=s.z+f-a.z-l+t(s._,a._))>0&&(go(mo(s,e,r),e,i),l+=i,c+=i),f+=s.m,l+=a.m,p+=u.m,c+=o.m;s&&!ho(o)&&(o.t=s,o.m+=f-c),a&&!po(u)&&(u.t=a,u.m+=l-p,r=e)}return r}(e,i,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e)?u:null,i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,i):r?n:null},_a(i,e)},a.layout.cluster=function(){var e=a.layout.hierarchy().sort(null).value(null),t=fo,n=[1,1],r=!1;function i(i,o){var s,u=e.call(this,i,o),l=u[0],c=0;Ra(l,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+a.max(e,(function(e){return e.y}))}(n)):(e.x=s?c+=t(e,s):0,e.y=0,s=e)}));var f=bo(l),p=xo(l),d=f.x-t(f,p)/2,h=p.x+t(p,f)/2;return Ra(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-d)/(h-d)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),u}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(e){return arguments.length?(r=null==(n=e),i):r?null:n},i.nodeSize=function(e){return arguments.length?(r=null!=(n=e),i):r?n:null},_a(i,e)},a.layout.treemap=function(){var e,t=a.layout.hierarchy(),n=Math.round,r=[1,1],i=null,o=yo,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,i,a=o(e),s=[],l=t.slice(),p=1/0,g="slice"===u?a.dx:"dice"===u?a.dy:"slice-dice"===u?1&e.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(c(l,a.dx*a.dy/e.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=d(s,g))<=p?(l.pop(),p=r):(s.area-=s.pop().area,h(s,g,a,!1),g=Math.min(a.dx,a.dy),s.length=s.area=0,p=1/0);s.length&&(h(s,g,a,!0),s.length=s.area=0),t.forEach(f)}}function p(e){var t=e.children;if(t&&t.length){var n,r=o(e),i=t.slice(),a=[];for(c(i,r.dx*r.dy/e.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(h(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);t.forEach(p)}}function d(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return t*=t,(r*=r)?Math.max(t*i*l/r,r/(t*a*l)):1/0}function h(e,t,r,i){var a,o=-1,s=e.length,u=r.x,l=r.y,c=t?n(e.area/t):0;if(t==r.dx){for((i||c>r.dy)&&(c=r.dy);++o<s;)(a=e[o]).x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(r.x+r.dx-u,c?n(a.area/c):0);a.z=!0,a.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++o<s;)(a=e[o]).x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(r.y+r.dy-l,c?n(a.area/c):0);a.z=!1,a.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function g(n){var i=e||t(n),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,e&&t.revalue(a),c([a],a.dx*a.dy/a.value),(e?p:f)(a),s&&(e=i),i}return g.size=function(e){return arguments.length?(r=e,g):r},g.padding=function(e){if(!arguments.length)return i;function t(t){return vo(t,e)}var n;return o=null==(i=e)?yo:"function"==(n=typeof e)?function(t){var n=e.call(g,t,t.depth);return null==n?yo(t):vo(t,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(e=[e,e,e,e],t):t,g},g.round=function(e){return arguments.length?(n=e?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(e){return arguments.length?(l=e,g):l},g.mode=function(e){return arguments.length?(u=e+"",g):u},_a(g,t)},a.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=a.random.normal.apply(a,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=a.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},a.scale={};var Mo={floor:_,ceil:_};function ko(e,t,n,r){var i=[],o=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)i.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=a.bisect(e,t,1,u)-1;return o[n](i[n](t))}}function To(e,t,n,r){var i,a;function o(){var o=Math.min(e.length,t.length)>2?ko:Eo,u=r?Sa:Ea;return i=o(e,t,u,n),a=o(t,e,u,na),s}function s(e){return i(e)}return s.invert=function(e){return a(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(ma)},s.clamp=function(e){return arguments.length?(r=e,o()):r},s.interpolate=function(e){return arguments.length?(n=e,o()):n},s.ticks=function(t){return Lo(e,t)},s.tickFormat=function(t,n){return Ao(e,t,n)},s.nice=function(t){return Io(e,t),o()},s.copy=function(){return To(e,t,n,r)},o()}function Co(e,t){return a.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Io(e,t){return So(e,wo(Fo(e,t)[2])),So(e,wo(Fo(e,t)[2])),e}function Fo(e,t){null==t&&(t=10);var n=jo(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Lo(e,t){return a.range.apply(a,Fo(e,t))}function Ao(e,t,n){var r=Fo(e,t);if(n){var i=_t.exec(n);if(i.shift(),"s"===i[8]){var o=a.formatPrefix(Math.max(O(r[0]),O(r[1])));return i[7]||(i[7]="."+_o(o.scale(r[2]))),i[8]="f",n=a.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+function(e,t){var n=_o(t[2]);return e in No?Math.abs(n-_o(Math.max(O(t[0]),O(t[1]))))+ +("e"!==e):n-2*("%"===e)}(i[8],r)),n=i.join("")}else n=",."+_o(r[2])+"f";return a.format(n)}a.scale.linear=function(){return To([0,1],[0,1],na,!1)};var No={s:1,g:1,p:1,r:1,e:1};function _o(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Po(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(i(t))}return s.invert=function(t){return o(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),s):r},s.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),s):t},s.nice=function(){var t=So(r.map(i),n?Math:zo);return e.domain(t),r=t.map(o),s},s.ticks=function(){var e=jo(r),a=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;l<c;l++)for(var p=1;p<f;p++)a.push(o(l)*p);a.push(o(l))}else for(a.push(o(l));l++<c;)for(p=f-1;p>0;p--)a.push(o(l)*p);for(l=0;a[l]<s;l++);for(c=a.length;a[c-1]>u;c--);a=a.slice(l,c)}return a},s.tickFormat=function(e,n){if(!arguments.length)return Ro;arguments.length<2?n=Ro:"function"!=typeof n&&(n=a.format(n));var r=Math.max(1,t*e/s.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return a*t<t-.5&&(a*=t),a<=r?n(e):""}},s.copy=function(){return Po(e.copy(),t,n,r)},Co(s,e)}a.scale.log=function(){return Po(a.scale.linear().domain([0,1]),10,!0,[1,10])};var Ro=a.format(".0e"),zo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Do(e,t,n){var r=Uo(t),i=Uo(1/t);function a(t){return e(r(t))}return a.invert=function(t){return i(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),a):n},a.ticks=function(e){return Lo(n,e)},a.tickFormat=function(e,t){return Ao(n,e,t)},a.nice=function(e){return a.domain(Io(n,e))},a.exponent=function(o){return arguments.length?(r=Uo(t=o),i=Uo(1/t),e.domain(n.map(r)),a):t},a.copy=function(){return Do(e.copy(),t,n)},Co(a,e)}function Uo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Bo(e,t){var n,r,i;function o(i){return r[((n.get(i)||("range"===t.t?n.set(i,e.push(i)):NaN))-1)%r.length]}function s(t,n){return a.range(e.length).map((function(e){return t+n*e}))}return o.domain=function(r){if(!arguments.length)return e;e=[],n=new S;for(var i,a=-1,s=r.length;++a<s;)n.has(i=r[a])||n.set(i,e.push(i));return o[t.t].apply(o,t.a)},o.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",a:arguments},o):r},o.rangePoints=function(n,a){arguments.length<2&&(a=0);var u=n[0],l=n[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+a);return r=s(u+c*a/2,c),i=0,t={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(n,a){arguments.length<2&&(a=0);var u=n[0],l=n[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+a)|0;return r=s(u+Math.round(c*a/2+(l-u-(e.length-1+a)*c)/2),c),i=0,t={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(n,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=n[1]<n[0],c=n[l-0],f=(n[1-l]-c)/(e.length-a+2*u);return r=s(c+f*u,f),l&&r.reverse(),i=f*(1-a),t={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(n,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var l=n[1]<n[0],c=n[l-0],f=n[1-l],p=Math.floor((f-c)/(e.length-a+2*u));return r=s(c+Math.round((f-c-(e.length-a)*p)/2),p),l&&r.reverse(),i=Math.round(p*(1-a)),t={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return i},o.rangeExtent=function(){return jo(t.a[0])},o.copy=function(){return Bo(e,t)},o.domain(e)}a.scale.pow=function(){return Do(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return Bo([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range($o)},a.scale.category20=function(){return a.scale.ordinal().range(qo)},a.scale.category20b=function(){return a.scale.ordinal().range(Go)},a.scale.category20c=function(){return a.scale.ordinal().range(Vo)};var $o=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),qo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),Go=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),Vo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);function Wo(e,t){var n;function r(){var r=0,o=t.length;for(n=[];++r<o;)n[r-1]=a.quantile(e,r/o);return i}function i(e){if(!isNaN(e=+e))return t[a.bisect(n,e)]}return i.domain=function(t){return arguments.length?(e=t.map(b).filter(x).sort(m),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},i.copy=function(){return Wo(e,t)},r()}function Ho(e,t,n){var r,i;function a(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,a}return a.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},a.range=function(e){return arguments.length?(n=e,o()):n},a.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},a.copy=function(){return Ho(e,t,n)},o()}function Ko(e,t){function n(n){if(n<=n)return t[a.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Ko(e,t)},n}function Yo(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Lo(e,t)},t.tickFormat=function(t,n){return Ao(e,t,n)},t.copy=function(){return Yo(e)},t}function Xo(){return 0}a.scale.quantile=function(){return Wo([],[])},a.scale.quantize=function(){return Ho(0,1,[0,1])},a.scale.threshold=function(){return Ko([.5],[0,1])},a.scale.identity=function(){return Yo([0,1])},a.svg={},a.svg.arc=function(){var e=Jo,t=Qo,n=Xo,r=Zo,i=es,a=ts,o=ns;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=i.apply(this,arguments)-Ae,f=a.apply(this,arguments)-Ae,p=Math.abs(f-c),d=c>f?0:1;if(l<s&&(h=l,l=s,s=h),p>=Le)return u(l,d)+(s?u(s,1-d):"")+"Z";var h,g,m,b,x,y,v,j,O,E,S,w,M=0,k=0,T=[];if((b=(+o.apply(this,arguments)||0)/2)&&(m=r===Zo?Math.sqrt(s*s+l*l):+r.apply(this,arguments),d||(k*=-1),l&&(k=De(m/l*Math.sin(b))),s&&(M=De(m/s*Math.sin(b)))),l){x=l*Math.cos(c+k),y=l*Math.sin(c+k),v=l*Math.cos(f-k),j=l*Math.sin(f-k);var C=Math.abs(f-c-2*k)<=Ie?0:1;if(k&&rs(x,y,v,j)===d^C){var I=(c+f)/2;x=l*Math.cos(I),y=l*Math.sin(I),v=j=null}}else x=y=0;if(s){O=s*Math.cos(f-M),E=s*Math.sin(f-M),S=s*Math.cos(c+M),w=s*Math.sin(c+M);var F=Math.abs(c-f+2*M)<=Ie?0:1;if(M&&rs(O,E,S,w)===1-d^F){var L=(c+f)/2;O=s*Math.cos(L),E=s*Math.sin(L),S=w=null}}else O=E=0;if(p>Te&&(h=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){g=s<l^d?0:1;var A=h,N=h;if(p<Ie){var _=null==S?[O,E]:null==v?[x,y]:di([x,y],[S,w],[v,j],[O,E]),P=x-_[0],R=y-_[1],z=v-_[0],D=j-_[1],U=1/Math.sin(Math.acos((P*z+R*D)/(Math.sqrt(P*P+R*R)*Math.sqrt(z*z+D*D)))/2),B=Math.sqrt(_[0]*_[0]+_[1]*_[1]);N=Math.min(h,(s-B)/(U-1)),A=Math.min(h,(l-B)/(U+1))}if(null!=v){var $=is(null==S?[O,E]:[S,w],[x,y],l,A,d),q=is([v,j],[O,E],l,A,d);h===A?T.push("M",$[0],"A",A,",",A," 0 0,",g," ",$[1],"A",l,",",l," 0 ",1-d^rs($[1][0],$[1][1],q[1][0],q[1][1]),",",d," ",q[1],"A",A,",",A," 0 0,",g," ",q[0]):T.push("M",$[0],"A",A,",",A," 0 1,",g," ",q[0])}else T.push("M",x,",",y);if(null!=S){var G=is([x,y],[S,w],s,-N,d),V=is([O,E],null==v?[x,y]:[v,j],s,-N,d);h===N?T.push("L",V[0],"A",N,",",N," 0 0,",g," ",V[1],"A",s,",",s," 0 ",d^rs(V[1][0],V[1][1],G[1][0],G[1][1]),",",1-d," ",G[1],"A",N,",",N," 0 0,",g," ",G[0]):T.push("L",V[0],"A",N,",",N," 0 0,",g," ",G[0])}else T.push("L",O,",",E)}else T.push("M",x,",",y),null!=v&&T.push("A",l,",",l," 0 ",C,",",d," ",v,",",j),T.push("L",O,",",E),null!=S&&T.push("A",s,",",s," 0 ",F,",",1-d," ",S,",",w);return T.push("Z"),T.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=vt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=vt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=vt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==Zo?Zo:vt(e),s):r},s.startAngle=function(e){return arguments.length?(i=vt(e),s):i},s.endAngle=function(e){return arguments.length?(a=vt(e),s):a},s.padAngle=function(e){return arguments.length?(o=vt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ae;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Zo="auto";function Jo(e){return e.innerRadius}function Qo(e){return e.outerRadius}function es(e){return e.startAngle}function ts(e){return e.endAngle}function ns(e){return e&&e.padAngle}function rs(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function is(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,p=t[0]+u,d=t[1]+l,h=(c+p)/2,g=(f+d)/2,m=p-c,b=d-f,x=m*m+b*b,y=n-r,v=c*d-p*f,j=(b<0?-1:1)*Math.sqrt(Math.max(0,y*y*x-v*v)),O=(v*b-m*j)/x,E=(-v*m-b*j)/x,S=(v*b+m*j)/x,w=(-v*m+b*j)/x,M=O-h,k=E-g,T=S-h,C=w-g;return M*M+k*k>T*T+C*C&&(O=S,E=w),[[O-u,E-l],[O*n/y,E*n/y]]}function as(e){var t=si,n=ui,r=Qn,i=ss,a=i.key,o=.7;function s(a){var s,u=[],l=[],c=-1,f=a.length,p=vt(t),d=vt(n);function h(){u.push("M",i(e(l),o))}for(;++c<f;)r.call(this,s=a[c],c)?l.push([+p.call(this,s,c),+d.call(this,s,c)]):l.length&&(h(),l=[]);return l.length&&h(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=os.get(e)||ss).key,s):a},s.tension=function(e){return arguments.length?(o=e,s):o},s}a.svg.line=function(){return as(_)};var os=a.map({linear:ss,"linear-closed":us,step:function(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":ls,"step-after":cs,basis:ds,"basis-open":function(e){if(e.length<4)return ss(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(hs(bs,a)+","+hs(bs,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),xs(n,a,o);return n.join("")},"basis-closed":function(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[hs(bs,o),",",hs(bs,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),xs(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,u=e[n][1]-o,l=-1;++l<=n;)i=l/n,(r=e[l])[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*u);return ds(e)},cardinal:function(e,t){return e.length<3?ss(e):e[0]+fs(e,ps(e,t))},"cardinal-open":function(e,t){return e.length<4?ss(e):e[1]+fs(e.slice(1,-1),ps(e,t))},"cardinal-closed":function(e,t){return e.length<3?us(e):e[0]+fs((e.push(e[0]),e),ps([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ss(e):e[0]+fs(e,function(e){for(var t,n,r,i,a=[],o=function(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=ys(i,a);++t<n;)r[t]=(o+(o=ys(i=a,a=e[t+1])))/2;return r[t]=o,r}(e),s=-1,u=e.length-1;++s<u;)t=ys(e[s],e[s+1]),O(t)<Te?o[s]=o[s+1]=0:(i=(n=o[s]/t)*n+(r=o[s+1]/t)*r)>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(e))}});function ss(e){return e.length>1?e.join("L"):e+"Z"}function us(e){return e.join("L")+"Z"}function ls(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function cs(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function fs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ss(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],u=2),t.length>1){s=t[1],a=e[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++)a=e[u],s=t[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function ps(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,u=e.length;++s<u;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function ds(e){if(e.length<3)return ss(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",hs(bs,o),",",hs(bs,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),xs(u,o,s);return e.pop(),u.push("L",r),u.join("")}function hs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}os.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var gs=[0,2/3,1/3,0],ms=[0,1/3,2/3,0],bs=[0,1/6,2/3,1/6];function xs(e,t,n){e.push("C",hs(gs,t),",",hs(gs,n),",",hs(ms,t),",",hs(ms,n),",",hs(bs,t),",",hs(bs,n))}function ys(e,t){return(t[1]-e[1])/(t[0]-e[0])}function vs(e){for(var t,n,r,i=-1,a=e.length;++i<a;)n=(t=e[i])[0],r=t[1]-Ae,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function js(e){var t=si,n=si,r=0,i=ui,a=Qn,o=ss,s=o.key,u=o,l="L",c=.7;function f(s){var f,p,d,h=[],g=[],m=[],b=-1,x=s.length,y=vt(t),v=vt(r),j=t===n?function(){return p}:vt(n),O=r===i?function(){return d}:vt(i);function E(){h.push("M",o(e(m),c),l,u(e(g.reverse()),c),"Z")}for(;++b<x;)a.call(this,f=s[b],b)?(g.push([p=+y.call(this,f,b),d=+v.call(this,f,b)]),m.push([+j.call(this,f,b),+O.call(this,f,b)])):g.length&&(E(),g=[],m=[]);return g.length&&E(),h.length?h.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=i=e,f):i},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(i=e,f):i},f.defined=function(e){return arguments.length?(a=e,f):a},f.interpolate=function(e){return arguments.length?(s="function"==typeof e?o=e:(o=os.get(e)||ss).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(c=e,f):c},f}function Os(e){return e.radius}function Es(e){return[e.x,e.y]}function Ss(){return 64}function ws(){return"circle"}function Ms(e){var t=Math.sqrt(e/Ie);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}a.svg.line.radial=function(){var e=as(vs);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ls.reverse=cs,cs.reverse=ls,a.svg.area=function(){return js(_)},a.svg.area.radial=function(){var e=js(vs);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},a.svg.chord=function(){var e=Hr,t=Kr,n=Os,r=es,i=ts;function a(n,r){var i,a,l=o(this,e,n,r),c=o(this,t,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(a=c,((i=l).a0==a.a0&&i.a1==a.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z")}function o(e,t,a,o){var s=t.call(e,a,o),u=n.call(e,s,o),l=r.call(e,s,o)-Ae,c=i.call(e,s,o)-Ae;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ie)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return a.radius=function(e){return arguments.length?(n=vt(e),a):n},a.source=function(t){return arguments.length?(e=vt(t),a):e},a.target=function(e){return arguments.length?(t=vt(e),a):t},a.startAngle=function(e){return arguments.length?(r=vt(e),a):r},a.endAngle=function(e){return arguments.length?(i=vt(e),a):i},a},a.svg.diagonal=function(){var e=Hr,t=Kr,n=Es;function r(r,i){var a=e.call(this,r,i),o=t.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=vt(t),r):e},r.target=function(e){return arguments.length?(t=vt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},a.svg.diagonal.radial=function(){var e=a.svg.diagonal(),t=Es,n=e.projection;return e.projection=function(e){return arguments.length?n(function(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Ae;return[n*Math.cos(r),n*Math.sin(r)]}}(t=e)):t},e},a.svg.symbol=function(){var e=ws,t=Ss;function n(n,r){return(ks.get(e.call(this,n,r))||Ms)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=vt(t),n):e},n.size=function(e){return arguments.length?(t=vt(e),n):t},n};var ks=a.map({circle:Ms,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Cs)),n=t*Cs;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ts),n=t*Ts/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ts),n=t*Ts/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});a.svg.symbolTypes=ks.keys();var Ts=Math.sqrt(3),Cs=Math.tan(30*Ne);Z.transition=function(e){for(var t,n,r=As||++Ps,i=Ds(e),a=[],o=Ns||{time:Date.now(),ease:fa,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&Us(n,c,i,r,o),t.push(n)}return Ls(a,i,r)},Z.interrupt=function(e){return this.each(null==e?Is:Fs(Ds(e)))};var Is=Fs(Ds());function Fs(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ls(e,t,n){return W(e,_s),e.namespace=t,e.id=n,e}var As,Ns,_s=[],Ps=0;function Rs(e,t,n,r){var i=e.id,a=e.namespace;return ge(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function zs(e){return null==e&&(e=""),function(){this.textContent=e}}function Ds(e){return null==e?"__transition__":"__transition_"+e+"__"}function Us(e,t,n,r,i){var a,o,s,u,l,c=e[n]||(e[n]={active:0,count:0}),f=c[r];function p(n){var i=c.active,p=c[i];for(var h in p&&(p.timer.c=null,p.timer.t=NaN,--c.count,delete c[i],p.event&&p.event.interrupt.call(e,e.__data__,p.index)),c)if(+h<r){var g=c[h];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[h]}o.c=d,Tt((function(){return o.c&&d(n||1)&&(o.c=null,o.t=NaN),1}),0,a),c.active=r,f.event&&f.event.start.call(e,e.__data__,t),l=[],f.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&l.push(r)})),u=f.ease,s=f.duration}function d(i){for(var a=i/s,o=u(a),p=l.length;p>0;)l[--p].call(e,o);if(a>=1)return f.event&&f.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}f||(a=i.time,o=Tt((function(e){var t=f.delay;if(o.t=t+a,t<=e)return p(e-t);o.c=p}),0,a),f=c[r]={tween:new S,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++c.count)}_s.call=Z.call,_s.empty=Z.empty,_s.node=Z.node,_s.size=Z.size,a.transition=function(e,t){return e&&e.transition?As?e.transition(t):e:a.selection().transition(e)},a.transition.prototype=_s,_s.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=J(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Us(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return Ls(o,a,i)},_s.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,u=[];e=Q(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],p=-1,d=f.length;++p<d;)if(r=f[p]){a=r[s][o],n=e.call(r,r.__data__,p,l),u.push(t=[]);for(var h=-1,g=n.length;++h<g;)(i=n[h])&&Us(i,h,s,o,a),t.push(i)}return Ls(u,s,o)},_s.filter=function(e){var t,n,r=[];"function"!=typeof e&&(e=de(e));for(var i=0,a=this.length;i<a;i++){r.push(t=[]);for(var o,s=0,u=(o=this[i]).length;s<u;s++)(n=o[s])&&e.call(n,n.__data__,s,i)&&t.push(n)}return Ls(r,this.namespace,this.id)},_s.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):ge(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},_s.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Oa:na,r=a.ns.qualify(e);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return Rs(this,"attr."+e,t,r.local?function(e){return null==e?o:(e+="",function(){var t,i=this.getAttributeNS(r.space,r.local);return i!==e&&(t=n(i,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}:function(e){return null==e?i:(e+="",function(){var t,i=this.getAttribute(r);return i!==e&&(t=n(i,e),function(e){this.setAttribute(r,t(e))})})})},_s.attrTween=function(e,t){var n=a.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}:function(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i&&function(e){this.setAttribute(n,i(e))}})},_s.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function i(){this.style.removeProperty(e)}return Rs(this,"style."+e,t,(function(t){return null==t?i:(t+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=na(i,t),function(t){this.style.setProperty(e,r(t),n)})})}))},_s.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,(function(r,i){var a=t.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}))},_s.text=function(e){return Rs(this,"text",e,zs)},_s.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},_s.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=a.ease.apply(a,arguments)),ge(this,(function(r){r[n][t].ease=e})))},_s.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:ge(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},_s.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:ge(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},_s.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ns,o=As;try{As=n,ge(this,(function(t,i,a){Ns=t[r][n],e.call(t,t.__data__,i,a)}))}finally{Ns=i,As=o}}else ge(this,(function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(e,t)}));return this},_s.transition=function(){for(var e,t,n,r=this.id,i=++Ps,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(e=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(t=l[c])&&Us(t,c,a,i,{time:(n=t[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return Ls(o,a,i)},a.svg.axis=function(){var e,t=a.scale.linear(),n=Bs,r=6,i=6,o=3,u=[10],l=null;function c(s){s.each((function(){var s,c=a.select(this),f=this.__chart__||t,p=this.__chart__=t.copy(),d=null==l?p.ticks?p.ticks.apply(p,u):p.domain():l,h=null==e?p.tickFormat?p.tickFormat.apply(p,u):_:e,g=c.selectAll(".tick").data(d,p),m=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Te),b=a.transition(g.exit()).style("opacity",Te).remove(),x=a.transition(g.order()).style("opacity",1),y=Math.max(r,0)+o,v=Oo(p),j=c.selectAll(".domain").data([0]),O=(j.enter().append("path").attr("class","domain"),a.transition(j));m.append("line"),m.append("text");var E,S,w,M,k=m.select("line"),T=x.select("line"),C=g.select("text").text(h),I=m.select("text"),F=x.select("text"),L="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=qs,E="x",w="y",S="x2",M="y2",C.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),O.attr("d","M"+v[0]+","+L*i+"V0H"+v[1]+"V"+L*i)):(s=Gs,E="y",w="x",S="y2",M="x2",C.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),O.attr("d","M"+L*i+","+v[0]+"H0V"+v[1]+"H"+L*i)),k.attr(M,L*r),I.attr(w,L*y),T.attr(S,0).attr(M,L*r),F.attr(E,0).attr(w,L*y),p.rangeBand){var A=p,N=A.rangeBand()/2;f=p=function(e){return A(e)+N}}else f.rangeBand?f=p:b.call(s,p,f);m.call(s,f,p),x.call(s,p,p)}))}return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in $s?e+"":Bs,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(e){return arguments.length?(l=e,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(e){var t=arguments.length;return t?(r=+e,i=+arguments[t-1],c):r},c.innerTickSize=function(e){return arguments.length?(r=+e,c):r},c.outerTickSize=function(e){return arguments.length?(i=+e,c):i},c.tickPadding=function(e){return arguments.length?(o=+e,c):o},c.tickSubdivide=function(){return arguments.length&&c},c};var Bs="bottom",$s={top:1,right:1,bottom:1,left:1};function qs(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function Gs(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}a.svg.brush=function(){var e,t,n=G(p,"brushstart","brush","brushend"),r=null,i=null,o=[0,0],s=[0,0],u=!0,l=!0,f=Ws[0];function p(e){e.each((function(){var e=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",m).on("touchstart.brush",m),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,_);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Vs[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",p.empty()?"none":null);var o,s=a.transition(e),u=a.transition(t);r&&(o=Oo(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),h(s)),i&&(o=Oo(i),u.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),d(s)}))}function d(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function h(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function g(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function m(){var f,m,b=this,x=a.select(a.event.target),y=n.of(b,arguments),v=a.select(b),j=x.datum(),O=!/^(n|s)$/.test(j)&&r,E=!/^(e|w)$/.test(j)&&i,S=x.classed("extent"),w=Se(b),M=a.mouse(b),k=a.select(c(b)).on("keydown.brush",(function(){32==a.event.keyCode&&(S||(f=null,M[0]-=o[1],M[1]-=s[1],S=2),$())})).on("keyup.brush",(function(){32==a.event.keyCode&&2==S&&(M[0]+=o[1],M[1]+=s[1],S=0,$())}));if(a.event.changedTouches?k.on("touchmove.brush",I).on("touchend.brush",L):k.on("mousemove.brush",I).on("mouseup.brush",L),v.interrupt().selectAll("*").interrupt(),S)M[0]=o[0]-M[0],M[1]=s[0]-M[1];else if(j){var T=+/w$/.test(j),C=+/^n/.test(j);m=[o[1-T]-M[0],s[1-C]-M[1]],M[0]=o[T],M[1]=s[C]}else a.event.altKey&&(f=M.slice());function I(){var e=a.mouse(b),t=!1;m&&(e[0]+=m[0],e[1]+=m[1]),S||(a.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),M[0]=o[+(e[0]<f[0])],M[1]=s[+(e[1]<f[1])]):f=null),O&&F(e,r,0)&&(h(v),t=!0),E&&F(e,i,1)&&(g(v),t=!0),t&&(d(v),y({type:"brush",mode:S?"move":"resize"}))}function F(n,r,i){var a,c,p=Oo(r),d=p[0],h=p[1],g=M[i],m=i?s:o,b=m[1]-m[0];if(S&&(d-=g,h-=b+g),a=(i?l:u)?Math.max(d,Math.min(h,n[i])):n[i],S?c=(a+=g)+b:(f&&(g=Math.max(d,Math.min(h,2*f[i]-a))),g<a?(c=a,a=g):c=g),m[0]!=a||m[1]!=c)return i?t=null:e=null,m[0]=a,m[1]=c,!0}function L(){I(),v.style("pointer-events","all").selectAll(".resize").style("display",p.empty()?"none":null),a.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w(),y({type:"brushend"})}v.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",x.style("cursor")),y({type:"brushstart"}),I()}return p.event=function(r){r.each((function(){var r=n.of(this,arguments),i={x:o,y:s,i:e,j:t},u=this.__chart__||i;this.__chart__=i,As?a.select(this).transition().each("start.brush",(function(){e=u.i,t=u.j,o=u.x,s=u.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=ra(o,i.x),a=ra(s,i.y);return e=t=null,function(e){o=i.x=n(e),s=i.y=a(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=i.i,t=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},p.x=function(e){return arguments.length?(f=Ws[!(r=e)<<1|!i],p):r},p.y=function(e){return arguments.length?(f=Ws[!r<<1|!(i=e)],p):i},p.clamp=function(e){return arguments.length?(r&&i?(u=!!e[0],l=!!e[1]):r?u=!!e:i&&(l=!!e),p):r&&i?[u,l]:r?u:i?l:null},p.extent=function(n){var a,u,l,c,f;return arguments.length?(r&&(a=n[0],u=n[1],i&&(a=a[0],u=u[0]),e=[a,u],r.invert&&(a=r(a),u=r(u)),u<a&&(f=a,a=u,u=f),a==o[0]&&u==o[1]||(o=[a,u])),i&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),t=[l,c],i.invert&&(l=i(l),c=i(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),p):(r&&(e?(a=e[0],u=e[1]):(a=o[0],u=o[1],r.invert&&(a=r.invert(a),u=r.invert(u)),u<a&&(f=a,a=u,u=f))),i&&(t?(l=t[0],c=t[1]):(l=s[0],c=s[1],i.invert&&(l=i.invert(l),c=i.invert(c)),c<l&&(f=l,l=c,c=f))),r&&i?[[a,l],[u,c]]:r?[a,u]:i&&[l,c])},p.clear=function(){return p.empty()||(o=[0,0],s=[0,0],e=t=null),p},p.empty=function(){return!!r&&o[0]==o[1]||!!i&&s[0]==s[1]},a.rebind(p,n,"on")};var Vs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ws=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hs=zt.format=hn.timeFormat,Ks=Hs.utc,Ys=Ks("%Y-%m-%dT%H:%M:%S.%LZ");function Xs(e){return e.toISOString()}function Zs(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=a.bisect(Qs,r);return i==Qs.length?[t.year,Fo(e.map((function(e){return e/31536e6})),n)[2]]:i?t[r/Qs[i-1]<Qs[i]/r?i-1:i]:[nu,Fo(e,n)[2]]}return r.invert=function(t){return Js(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Js)},r.nice=function(e,t){var n=r.domain(),a=jo(n),o=null==e?i(a,10):"number"==typeof e&&i(a,e);function s(n){return!isNaN(n)&&!e.range(n,Js(+n+1),t).length}return o&&(e=o[0],t=o[1]),r.domain(So(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=Js(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=Js(+t+1);return t}}:e))},r.ticks=function(e,t){var n=jo(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Js(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Zs(e.copy(),t,n)},Co(r,e)}function Js(e){return new Date(e)}Hs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Xs:Ys,Xs.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Xs.toString=Ys.toString,zt.second=$t((function(e){return new Dt(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),zt.seconds=zt.second.range,zt.seconds.utc=zt.second.utc.range,zt.minute=$t((function(e){return new Dt(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),zt.minutes=zt.minute.range,zt.minutes.utc=zt.minute.utc.range,zt.hour=$t((function(e){var t=e.getTimezoneOffset()/60;return new Dt(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),zt.hours=zt.hour.range,zt.hours.utc=zt.hour.utc.range,zt.month=$t((function(e){return(e=zt.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),zt.months=zt.month.range,zt.months.utc=zt.month.utc.range;var Qs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],eu=[[zt.second,1],[zt.second,5],[zt.second,15],[zt.second,30],[zt.minute,1],[zt.minute,5],[zt.minute,15],[zt.minute,30],[zt.hour,1],[zt.hour,3],[zt.hour,6],[zt.hour,12],[zt.day,1],[zt.day,2],[zt.week,1],[zt.month,1],[zt.month,3],[zt.year,1]],tu=Hs.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Qn]]),nu={range:function(e,t,n){return a.range(Math.ceil(e/n)*n,+t,n).map(Js)},floor:_,ceil:_};eu.year=zt.year,zt.scale=function(){return Zs(a.scale.linear(),eu,tu)};var ru=eu.map((function(e){return[e[0].utc,e[1]]})),iu=Ks.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Qn]]);function au(e){return JSON.parse(e.responseText)}function ou(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}ru.year=zt.year.utc,zt.scale.utc=function(){return Zs(a.scale.linear(),ru,iu)},a.text=jt((function(e){return e.responseText})),a.json=function(e,t){return Ot(e,"application/json",au,t)},a.html=function(e,t){return Ot(e,"text/html",ou,t)},a.xml=jt((function(e){return e.responseXML})),this.d3=a,void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){e.exports=n(9)(172)}])]);