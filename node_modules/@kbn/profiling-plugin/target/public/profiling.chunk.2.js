/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.profiling_bundle_jsonpfunction=window.profiling_bundle_jsonpfunction||[]).push([[2],{100:function(t,e,n){t.exports=n(9)(2971)},101:function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},102:function(t,e,n){"use strict";e.decode=e.parse=n(103),e.encode=e.stringify=n(104)},103:function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,a){e=e||"&",n=n||"=";var o={};if("string"!=typeof t||0===t.length)return o;var i=/\+/g;t=t.split(e);var l=1e3;a&&"number"==typeof a.maxKeys&&(l=a.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,p,f,d,g=t[u].replace(i,"%20"),b=g.indexOf(n);b>=0?(h=g.substr(0,b),p=g.substr(b+1)):(h=g,p=""),f=decodeURIComponent(h),d=decodeURIComponent(p),r(o,f)?s(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},104:function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?a(o(t),(function(o){var i=encodeURIComponent(r(o))+n;return s(t[o])?a(t[o],(function(t){return i+encodeURIComponent(r(t))})).join(e):i+encodeURIComponent(r(t[o]))})).join(e):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},109:function(t,e,n){"use strict";n.r(e),n.d(e,"renderApp",(function(){return ut}));var r=n(18),s=n(20),a=n(38),o=n.n(a),i=n(13),l=n.n(i),c=n(64),u=n.n(c),h=n(14);const p=l.a.createContext(null),f=({children:t,...e})=>{const{navigateToUrl:n,currentAppId:r}=e;return Object(h.jsx)(p.Provider,{value:{navigateToUrl:n,currentAppId:r}},t)},d=({children:t,coreStart:e})=>{const{navigateToUrl:n,currentAppId$:r}=e.application,s=u()(r,void 0);return Object(h.jsx)(p.Provider,{value:{navigateToUrl:n,currentAppId:s}},t)};var g=n(15);n(29);const b={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},j=({children:t,navigateToUrl:e,currentAppId:n,...r})=>{const s=Object(i.useRef)(null),a=Object(i.useCallback)((t=>(({event:t,container:e,navigateToUrl:n,currentAppId:r})=>{if(!e||!r)return;const s=((t,e)=>{let n=t;do{var r,s;if("a"===(null===(r=n)||void 0===r?void 0:r.tagName.toLowerCase()))return n;const t=null===(s=n)||void 0===s?void 0:s.parentElement;if(!t||t===document.body||t===e)break;n=t}while(parent||parent!==document.body||parent!==e)})(t.target,e);if(!s)return;const a=s.href,o=""===s.target||"_self"===s.target,i=0===t.button;a&&o&&i&&!t.defaultPrevented&&!(t=>t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)(t)&&(t.preventDefault(),n(s.href))})({event:t,currentAppId:n,navigateToUrl:e,container:s.current})),[n,e]);return Object(h.jsx)("div",o()({onClick:a,ref:s,css:b,"data-test-subj":"kbnRedirectAppLink"},r),t)},m=({children:t,...e})=>Object(h.jsx)(j,o()({},function(){const t=Object(i.useContext)(p);if(!t)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return t}(),e),t),v=({children:t,...e})=>{if(void 0!==e.coreStart){const{coreStart:n,...r}=e,s=Object(h.jsx)(m,r,t);return Object(h.jsx)(d,{coreStart:n},s)}const{navigateToUrl:n,currentAppId:r,...s}=e,a=Object(h.jsx)(m,s,t);return Object(h.jsx)(f,{currentAppId:r,navigateToUrl:n},a)};var x=n(46),O=n(21),y=n.n(O),k=n(1),E=n(2),S=n(22),_=n(17),I=n(42),A=n(65),C=n(36),w=n(52),T=n(41),U=n(74),L=n.n(U),M=n(35);const P="/app/management/stack/license_management";function R(){const{core:t}=Object(M.a)().start,e=L.a.format({pathname:t.http.basePath.prepend(P)});return Object(h.jsx)(g.EuiEmptyPrompt,{iconType:"logoObservability",iconColor:"warning",title:Object(h.jsx)("h1",null,E.i18n.translate("xpack.profiling.invalidLicense.message",{defaultMessage:"To access Universal Profiling, upgrade to an Enterprise subscription"})),body:Object(h.jsx)("p",null,E.i18n.translate("xpack.profiling.invalidLicense.description",{defaultMessage:"You must have an Enterprise subscription to use Universal Profiling features."})),actions:[Object(h.jsx)(g.EuiButton,{"data-test-subj":"profilingLicensePromptUpgradeSubscriptionButton",href:e,fill:!0},E.i18n.translate("xpack.profiling.invalidLicense.subscriptionManagementLink",{defaultMessage:"Upgrade subscription"}))]})}const q=l.a.createContext(void 0);function D({children:t}){const{license$:e}=Object(M.a)().setup.licensing,n=u()(e);return!1===(null==n?void 0:n.isActive)?Object(h.jsx)(T.b,{hideSearchBar:!0,tabs:[]},Object(h.jsx)(R,null)):Object(h.jsx)(q.Provider,{value:n,children:t})}var F=n(69);function H({children:t}){const{start:{core:e},services:{fetchHasSetup:n,postSetupResources:r}}=Object(M.a)(),{setProfilingSetupStatus:s}=Object(F.a)(),a=Object(i.useContext)(q),o=Object(C.a)(),c=Object(_.useHistory)(),{docLinks:u,notifications:p}=e,[f,d]=Object(i.useState)(!1),{status:b,data:j,error:m,refresh:v}=Object(I.b)((({http:t})=>n({http:t})),[n]);b===I.a.Settled&&s(j);const x=Object(A.a)([]);if(null==a||!a.hasAtLeast("enterprise"))return Object(h.jsx)(T.b,{hideSearchBar:!0,tabs:[]},Object(h.jsx)(R,null));if(b!==I.a.Settled)return Object(h.jsx)(T.b,{hideSearchBar:!0,tabs:[]},Object(h.jsx)(g.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},Object(h.jsx)(g.EuiFlexItem,{grow:!1},Object(h.jsx)(g.EuiLoadingSpinner,{size:"xxl"})),Object(h.jsx)(g.EuiFlexItem,{grow:!1},Object(h.jsx)(g.EuiText,null,E.i18n.translate("xpack.profiling.noDataConfig.loading.loaderText",{defaultMessage:"Loading data sources"})))));if(b===I.a.Settled&&!0!==(null==j?void 0:j.has_setup)&&!1===(null==j?void 0:j.pre_8_9_1_data)||m){const t=f||!1===(null==j?void 0:j.has_required_role);return Object(h.jsx)(T.b,{tabs:[],noDataConfig:{docsLink:`${u.ELASTIC_WEBSITE_URL}/guide/en/observability/${u.DOC_LINK_VERSION}/profiling-get-started.html`,logo:"logoObservability",pageTitle:E.i18n.translate("xpack.profiling.noDataConfig.pageTitle",{defaultMessage:"Universal Profiling"}),action:{elasticAgent:{description:Object(h.jsx)(g.EuiFlexGrid,{gutterSize:"s"},Object(h.jsx)(g.EuiText,null,E.i18n.translate("xpack.profiling.noDataConfig.action.title",{defaultMessage:"Universal Profiling provides fleet-wide, whole-system, continuous profiling with zero instrumentation.\n                Understand what lines of code are consuming compute resources, at all times, and across your entire infrastructure."})),Object(h.jsx)(g.EuiCallOut,{size:"s",color:"warning",title:E.i18n.translate("xpack.profiling.noDataConfig.action.permissionsWarning",{defaultMessage:"To setup Universal Profiling, you must be logged in as a superuser."})}),Object(h.jsx)(g.EuiText,{size:"xs"},Object(h.jsx)("ul",null,Object(h.jsx)("li",null,Object(h.jsx)(S.FormattedMessage,{id:"xpack.profiling.noDataConfig.action.dataRetention",defaultMessage:"Normal data storage costs apply for profiling data stored in Elasticsearch. Learn more about {dataRetentionLink}.",values:{dataRetentionLink:Object(h.jsx)(g.EuiLink,{"data-test-subj":"profilingCheckSetupControllingDataRetentionLink",href:`${u.ELASTIC_WEBSITE_URL}/guide/en/elasticsearch/reference/${u.DOC_LINK_VERSION}/set-up-lifecycle-policy.html`,target:"_blank"},E.i18n.translate("xpack.profiling.noDataConfig.action.dataRetention.link",{defaultMessage:"controlling data retention"}))}})))),Object(h.jsx)(g.EuiText,{size:"xs"})),onClick:t=>{t.preventDefault()},button:Object(h.jsx)(g.EuiToolTip,{content:!1===(null==j?void 0:j.has_required_role)?E.i18n.translate("xpack.profiling.checkSetup.tooltip",{defaultMessage:"You must be logged in as a superuser"}):""},Object(h.jsx)(g.EuiButton,{"data-test-subj":"profilingCheckSetupButton",disabled:t,onClick:t=>{t.preventDefault(),d(!0),r({http:x}).then((()=>v())).catch((t=>{var e,n,r;const s=null!==(e=null!==(n=null==t||null===(r=t.body)||void 0===r?void 0:r.message)&&void 0!==n?n:t.message)&&void 0!==e?e:String(t);p.toasts.addError(t,{title:E.i18n.translate("xpack.profiling.checkSetup.setupFailureToastTitle",{defaultMessage:"Failed to complete setup"}),toastMessage:s})})).finally((()=>{d(!1)}))},fill:!0,isLoading:f},f?E.i18n.translate("xpack.profiling.noDataConfig.action.buttonLoadingLabel",{defaultMessage:"Setting up Universal Profiling..."}):E.i18n.translate("xpack.profiling.noDataConfig.action.buttonLabel",{defaultMessage:"Set up Universal Profiling"})))}},solution:E.i18n.translate("xpack.profiling.noDataConfig.solutionName",{defaultMessage:"Universal Profiling"})},hideSearchBar:!0},Object(h.jsx)(l.a.Fragment,null))}if(!0===(null==j?void 0:j.has_data)&&!1===(null==j?void 0:j.pre_8_9_1_data)||"/add-data-instructions"===c.location.pathname||"/delete_data_instructions"===c.location.pathname)return t;if(!0===(null==j?void 0:j.pre_8_9_1_data))return o.push("/delete_data_instructions",{path:{},query:{}}),null;if(b===I.a.Settled&&!0===(null==j?void 0:j.has_setup)&&!1===(null==j?void 0:j.has_data))return o.push("/add-data-instructions",{path:{},query:{selectedTab:w.a.Kubernetes}}),null;throw new Error("Invalid state")}var N=n(43),B=n(73),K=n(68),$=n(60),z=n.n($),G=n(28);function W({children:t}){const{redirect:e,isDateRangeSet:n,skipDataRangeSet:r}=function(){const t=Object(_.useHistory)(),e=Object(_.useLocation)(),n=z.a.parse(e.search),{start:{core:r,data:s}}=Object(M.a)(),a=r.uiSettings.get(G.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),o=s.query.timefilter.timefilter.getTime();return{isDateRangeSet:"rangeFrom"in n&&"rangeTo"in n,redirect:()=>{var r,s;const i={rangeFrom:null!==(r=o.from)&&void 0!==r?r:a.from,rangeTo:null!==(s=o.to)&&void 0!==s?s:a.to,...n};t.replace({...e,search:z.a.stringify(i)})},skipDataRangeSet:"/add-data-instructions"===t.location.pathname}}();return n||r?t:(e(),null)}var X=n(75);function V(){const t=Object(C.a)(),e=Object(_.useHistory)(),{observabilityAIAssistant:{ObservabilityAIAssistantActionMenuItem:n}}=Object(M.a)().start;return Object(h.jsx)(g.EuiHeaderLinks,{gutterSize:"xs"},Object(h.jsx)(g.EuiToolTip,{content:E.i18n.translate("xpack.profiling.header.storageExplorerLink.tooltip",{defaultMessage:"This module is not GA. Please help us by reporting any bugs."})},Object(h.jsx)(g.EuiHeaderLink,{color:"text",onClick:()=>{const t=z.a.parse(window.location.search),n=L.a.format({pathname:"/storage-explorer",query:{kuery:t.kuery,rangeFrom:t.rangeFrom||"now-15m",rangeTo:t.rangeTo||"now"}});e.push(n)}},Object(h.jsx)(g.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(h.jsx)(g.EuiFlexItem,{grow:!1},Object(h.jsx)(g.EuiIcon,{type:"beta"})),Object(h.jsx)(g.EuiFlexItem,{grow:!1},E.i18n.translate("xpack.profiling.headerActionMenu.storageExplorer",{defaultMessage:"Storage Explorer"}))))),Object(h.jsx)(g.EuiHeaderLink,{href:t.link("/add-data-instructions",{query:{selectedTab:w.a.Kubernetes}}),color:"primary"},Object(h.jsx)(g.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(h.jsx)(g.EuiFlexItem,{grow:!1},Object(h.jsx)(g.EuiIcon,{type:"indexOpen"})),Object(h.jsx)(g.EuiFlexItem,{grow:!1},E.i18n.translate("xpack.profiling.headerActionMenu.addData",{defaultMessage:"Add Data"})))),Object(h.jsx)(g.EuiHeaderLink,{href:t.link("/settings"),color:"text"},E.i18n.translate("xpack.profiling.headerActionMenu.settings",{defaultMessage:"Settings"})),n?Object(h.jsx)(n,null):null)}var Y=n(4),Z=n.n(Y);const J=E.i18n.translate("sharedUXPackages.prompt.errors.notFound.title",{defaultMessage:"Page not found"}),Q=E.i18n.translate("sharedUXPackages.prompt.errors.notFound.body",{defaultMessage:"Sorry, the page you're looking for can't be found. It might have been removed or renamed, or maybe it never existed at all."}),tt=E.i18n.translate("sharedUXPackages.prompt.errors.notFound.goBacklabel",{defaultMessage:"Go back"}),et=({actions:t,title:e,body:r})=>{const{colorMode:s}=Object(g.useEuiTheme)(),[a,o]=Object(i.useState)(),l=Object(i.useCallback)((()=>history.back()),[]),c=Object(i.useMemo)((()=>[Object(h.jsx)(g.EuiButtonEmpty,{iconType:"arrowLeft",flush:"both",onClick:l},tt)]),[l]);Object(i.useEffect)((()=>{(async()=>{if("DARK"===s){const{default:t}=await n.e(6).then(n.t.bind(null,107,7));o(t)}else{const{default:t}=await n.e(7).then(n.t.bind(null,108,7));o(t)}})()}),[s]);const u=a?Object(h.jsx)(g.EuiImage,{src:a,alt:""}):null;return Object(h.jsx)(g.EuiEmptyPrompt,{color:"subdued",titleSize:"m",icon:u,title:"string"!=typeof e&&e?e:Object(h.jsx)("h2",null,null!=e?e:J),body:null!=r?r:Q,actions:null!=t?t:c})};function nt({children:t}){const e=Object(_.useLocation)();return Object(h.jsx)(router_error_boundary_ErrorBoundary,{key:e.pathname},t)}class router_error_boundary_ErrorBoundary extends l.a.Component{constructor(...t){super(...t),Z()(this,"state",{error:void 0})}static getDerivedStateFromError(t){return{error:t}}render(){return this.state.error?Object(h.jsx)(st,{error:this.state.error}):this.props.children}}const rt={pageTitle:E.i18n.translate("xpack.profiling.universalProfiling",{defaultMessage:"Universal Profiling"})};function st({error:t}){const{services:e}=Object(r.useKibana)(),{observabilityShared:n}=e,s=n.navigation.PageTemplate;return t instanceof x.a?Object(h.jsx)(s,{pageHeader:rt},Object(h.jsx)(et,null)):Object(h.jsx)(s,{pageHeader:rt},Object(h.jsx)(g.EuiErrorBoundary,null,Object(h.jsx)(at,{error:t})))}function at({error:t}){throw t}var ot=n(70);const it=new s.Storage(localStorage);function lt({theme$:t,setHeaderActionMenu:e}){return Object(h.jsx)(k.HeaderMenuPortal,{setHeaderActionMenu:e,theme$:t},Object(h.jsx)(V,null))}function ct({coreStart:t,coreSetup:e,pluginsStart:n,pluginsSetup:s,profilingFetchServices:a,theme$:o,history:c,setHeaderActionMenu:u}){const p=t.i18n,f=Object(i.useMemo)((()=>({start:{core:t,...n},setup:{core:e,...s},services:a})),[t,e,n,s,a]);return Object(h.jsx)(r.KibanaThemeProvider,{theme$:o},Object(h.jsx)(r.KibanaContextProvider,{services:{...t,...n,storage:it}},Object(h.jsx)(p.Context,null,Object(h.jsx)(v,{coreStart:t,currentAppId:"profiling"},Object(h.jsx)(x.d,{router:X.a,history:c},Object(h.jsx)(nt,null,Object(h.jsx)(K.b,null,Object(h.jsx)(N.b,{value:f},Object(h.jsx)(ot.b,null,Object(h.jsx)(D,null,Object(h.jsx)(l.a.Fragment,null,Object(h.jsx)(H,null,Object(h.jsx)(W,null,Object(h.jsx)(B.b,null,Object(h.jsx)(x.c,null)))),Object(h.jsx)(lt,{setHeaderActionMenu:u,theme$:o}))))))))))))}const ut=(t,e)=>(y.a.render(Object(h.jsx)(ct,t),e),()=>y.a.unmountComponentAtNode(e))},64:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(23),s=n(13),a=r.__importDefault(n(79));e.default=function(t,e){var n=s.useState(e),r=n[0],o=n[1];return a.default((function(){var e=t.subscribe(o);return function(){return e.unsubscribe()}}),[t]),r}},74:function(t,e,n){"use strict";var r=n(100),s=n(101);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=v,e.resolve=function(t,e){return v(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?v(t,!1,!0).resolveObject(e):e},e.format=function(t){return s.isString(t)&&(t=v(t)),t instanceof a?t.format():a.prototype.format.call(t)},e.Url=a;var o=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(102);function v(t,e,n){if(t&&s.isObject(t)&&t instanceof a)return t;var r=new a;return r.parse(t,e,n),r}a.prototype.parse=function(t,e,n){if(!s.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),i=-1!==a&&a<t.indexOf("#")?"?":"#",c=t.split(i);c[0]=c[0].replace(/\\/g,"/");var v=t=c.join(i);if(v=v.trim(),!n&&1===t.split("#").length){var x=l.exec(v);if(x)return this.path=v,this.href=v,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var O=o.exec(v);if(O){var y=(O=O[0]).toLowerCase();this.protocol=y,v=v.substr(O.length)}if(n||O||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===v.substr(0,2);!k||O&&b[O]||(v=v.substr(2),this.slashes=!0)}if(!b[O]&&(k||O&&!j[O])){for(var E,S,_=-1,I=0;I<p.length;I++)-1!==(A=v.indexOf(p[I]))&&(-1===_||A<_)&&(_=A);for(-1!==(S=-1===_?v.lastIndexOf("@"):v.lastIndexOf("@",_))&&(E=v.slice(0,S),v=v.slice(S+1),this.auth=decodeURIComponent(E)),_=-1,I=0;I<h.length;I++){var A;-1!==(A=v.indexOf(h[I]))&&(-1===_||A<_)&&(_=A)}-1===_&&(_=v.length),this.host=v.slice(0,_),v=v.slice(_),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var w=this.hostname.split(/\./),T=(I=0,w.length);I<T;I++){var U=w[I];if(U&&!U.match(f)){for(var L="",M=0,P=U.length;M<P;M++)U.charCodeAt(M)>127?L+="x":L+=U[M];if(!L.match(f)){var R=w.slice(0,I),q=w.slice(I+1),D=U.match(d);D&&(R.push(D[1]),q.unshift(D[2])),q.length&&(v="/"+q.join(".")+v),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+F,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!g[y])for(I=0,T=u.length;I<T;I++){var N=u[I];if(-1!==v.indexOf(N)){var B=encodeURIComponent(N);B===N&&(B=escape(N)),v=v.split(N).join(B)}}var K=v.indexOf("#");-1!==K&&(this.hash=v.substr(K),v=v.slice(0,K));var $=v.indexOf("?");if(-1!==$?(this.search=v.substr($),this.query=v.substr($+1),e&&(this.query=m.parse(this.query)),v=v.slice(0,$)):e&&(this.search="",this.query={}),v&&(this.pathname=v),j[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var z=this.search||"";this.path=F+z}return this.href=this.format(),this},a.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(o=m.stringify(this.query));var i=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||j[e])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),i&&"?"!==i.charAt(0)&&(i="?"+i),e+a+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(i=i.replace("#","%23"))+r},a.prototype.resolve=function(t){return this.resolveObject(v(t,!1,!0)).format()},a.prototype.resolveObject=function(t){if(s.isString(t)){var e=new a;e.parse(t,!1,!0),t=e}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var i=r[o];n[i]=this[i]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=t[u])}return j[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!j[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||b[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),O=x||v||n.host&&t.pathname,y=O,k=n.pathname&&n.pathname.split("/")||[],E=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!j[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),O=O&&(""===d[0]||""===k[0])),x)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),n.search=t.search,n.query=t.query;else if(!s.isNullOrUndefined(t.search))return E&&(n.hostname=n.host=k.shift(),(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),n.search=t.search,n.query=t.query,s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=k.slice(-1)[0],_=(n.host||t.host||k.length>1)&&("."===S||".."===S)||""===S,I=0,A=k.length;A>=0;A--)"."===(S=k[A])?k.splice(A,1):".."===S?(k.splice(A,1),I++):I&&(k.splice(A,1),I--);if(!O&&!y)for(;I--;I)k.unshift("..");!O||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),_&&"/"!==k.join("/").substr(-1)&&k.push("");var C,w=""===k[0]||k[0]&&"/"===k[0].charAt(0);return E&&(n.hostname=n.host=w?"":k.length?k.shift():"",(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.host=n.hostname=C.shift())),(O=O||n.host&&k.length)&&!w&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),s.isNull(n.pathname)&&s.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var t=this.host,e=i.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},79:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),s="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;e.default=s}}]);