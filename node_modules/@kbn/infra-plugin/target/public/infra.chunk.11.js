/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[11],{113:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(53),r=a(2),n=a(27),l=a(80),i=a(127);const o=({defaultState:e,decodeUrlState:t,encodeUrlState:a,urlStateKey:s,writeDefaultState:n=!1})=>{const o=Object(l.useHistory)(),f=null!=o&&o.location?u(o.location):"",p=Object(r.useMemo)((()=>{if(f)return d(f,s)}),[f,s]),b=Object(r.useMemo)((()=>t(c(p))),[t,p]),g=Object(r.useMemo)((()=>void 0!==b?b:e),[e,b]),h=Object(r.useCallback)((r=>{var n;if(!o||!o.location)return;const l=o.location,f=r instanceof Function?r(null!==(n=t(c(d(u(l),s))))&&void 0!==n?n:e):r,p=m(l,Object(i.f)(s,void 0!==f?a(f):void 0)(u(l)));p!==l&&o.replace(p)}),[t,e,a,o,s]),[x,v]=Object(r.useState)(n&&void 0===b);return Object(r.useEffect)((()=>{x&&(v(!1),h(e))}),[x,h,e]),[g,h]},c=e=>{try{return e?Object(n.decode)(e):void 0}catch(e){if(e instanceof Error&&e.message.startsWith("rison decoder error"))return{};throw e}},u=e=>e.search.substring(1),d=(e,t)=>{const a=Object(s.parse)(e,{sort:!1})[t];return Array.isArray(a)?a[0]:a},m=(e,t)=>t===u(e)?e:{...e,search:`?${t}`}},118:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(40),r=a(22);function n(){var e,t,a;const{euiTheme:n}=Object(s.useEuiTheme)(),{services:{charts:l}}=Object(r.b)(),i=l.theme.useChartsBaseTheme(),o=l.theme.useChartsTheme();return{baseTheme:i,theme:{...o,background:{...o.background,color:"transparent"},crosshair:{band:{...null===(e=o.crosshair)||void 0===e?void 0:e.band,fill:n.colors.lightShade}},axes:{gridLine:{horizontal:{visible:!1},vertical:{...null===(t=o.axes)||void 0===t||null===(a=t.gridLine)||void 0===a?void 0:a.vertical,dash:void 0}}}}}}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return h})),a.d(t,"d",(function(){return x}));var s=a(2),r=a(16),n=a(5),l=a(25),i=a(109),o=a.n(i),c=a(10),u=a(132),d=a(113);const m={palette:"cool",steps:10,reverseColors:!1},f={metric:{type:"cpu"},groupBy:[],nodeType:"host",view:"map",customOptions:[],boundsOverride:{max:1,min:0},autoBounds:!0,accountId:"",region:"",customMetrics:[],legend:m,source:"default",sort:{by:"name",direction:"desc"},timelineOpen:!1},p=e=>c.e.encode(e),b=e=>{const t=Object(r.pipe)(c.e.decode(e),Object(n.fold)(Object(l.constant)(void 0),l.identity));return t&&(t.source="url"),t},g=o()((()=>{const[e,t]=Object(d.a)({defaultState:f,decodeUrlState:b,encodeUrlState:p,urlStateKey:"waffleOptions"}),[a,r]=Object(s.useState)(e);Object(s.useEffect)((()=>t(a)),[t,a]);const n=Object(s.useCallback)((e=>r((t=>({...t,metric:e})))),[r]),l=Object(s.useCallback)((e=>r((t=>({...t,groupBy:e})))),[r]),i=Object(s.useCallback)((e=>r((t=>({...t,nodeType:e})))),[r]),o=Object(s.useCallback)((e=>r((t=>({...t,view:e})))),[r]),c=Object(s.useCallback)((e=>r((t=>({...t,customOptions:e})))),[r]),m=Object(s.useCallback)((e=>r((t=>({...t,autoBounds:e})))),[r]),g=Object(s.useCallback)((e=>r((t=>({...t,boundsOverride:e})))),[r]),h=Object(s.useCallback)((e=>r((t=>({...t,accountId:e})))),[r]),x=Object(s.useCallback)((e=>r((t=>({...t,region:e})))),[r]),v=Object(s.useCallback)((e=>{r((t=>({...t,customMetrics:e})))}),[r]),E=Object(s.useCallback)((e=>{r((t=>({...t,legend:e})))}),[r]),y=Object(s.useCallback)((e=>{r((t=>({...t,sort:e})))}),[r]),{inventoryPrefill:O}=Object(u.b)();Object(s.useEffect)((()=>{const{setNodeType:e,setMetric:t,setCustomMetrics:s}=O;e(a.nodeType),t(a.metric),s(a.customMetrics)}),[a,O]);const j=Object(s.useCallback)((e=>r((t=>({...t,timelineOpen:e})))),[r]);return{...f,...a,changeMetric:n,changeGroupBy:l,changeNodeType:i,changeView:o,changeCustomOptions:c,changeAutoBounds:m,changeBoundsOverride:g,changeAccount:h,changeRegion:x,changeCustomMetrics:v,changeLegend:E,changeSort:y,changeTimelineOpen:j,setWaffleOptionsState:r}})),[h,x]=g},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(2),r=a.n(s),n=a(1),l=a(24),i=a(83),o=a(111);function c(e,t,a,c=(e=>e),u,d,m=!1,f){var p;const b=Object(l.useKibana)(),g=u||(null===(p=b.services.http)||void 0===p?void 0:p.fetch),h=d||b.notifications.toasts.danger,[x,v]=Object(s.useState)(null),[E,y]=Object(s.useState)(null),O=Object(s.useRef)(new AbortController),j=Object(s.useCallback)((e=>{var t,a,s,l,c;const u=e;e&&(e instanceof o.a||e.name===i.AbortError.name)||(y(u),h({toastLifeTimeMs:3e3,title:n.i18n.translate("xpack.infra.useHTTPRequest.error.title",{defaultMessage:"Error while fetching resource"}),body:r.a.createElement("div",null,u.response?r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,n.i18n.translate("xpack.infra.useHTTPRequest.error.status",{defaultMessage:"Error"})),null===(t=u.response)||void 0===t?void 0:t.statusText," (",null===(a=u.response)||void 0===a?void 0:a.status,")",r.a.createElement("h5",null,n.i18n.translate("xpack.infra.useHTTPRequest.error.url",{defaultMessage:"URL"})),null===(s=u.response)||void 0===s?void 0:s.url,r.a.createElement("h5",null,n.i18n.translate("xpack.infra.useHTTPRequest.error.body.message",{defaultMessage:"Message"})),(null===(l=u.body)||void 0===l?void 0:l.message)||u.message):r.a.createElement("h5",null,(null===(c=u.body)||void 0===c?void 0:c.message)||u.message))}))}),[h]);Object(s.useEffect)((()=>()=>{m&&O.current.abort()}),[m]);const[k,M,T]=Object(o.b)({cancelPreviousOn:"resolution",createPromise:()=>{if(!g)throw new Error("HTTP service is unavailable");return m&&O.current.abort(),O.current=new AbortController,g(e,{signal:O.current.signal,method:t,body:a,...f})},onResolve:e=>{try{v(c(e)),y(null)}catch(e){j(e)}},onReject:e=>{j(e)}},[e,a,t,u,h,j,f]);return{response:x,error:E,loading:"uninitialized"===k.state||"pending"===k.state,makeRequest:M,resetRequestState:T}}},127:function(e,t,a){"use strict";a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return g}));var s=a(83),r=a(27),n=a(53),l=a(32),i=a.n(l),o=a(6);const c=e=>Number.isNaN(e)||null==e?e=>e:d(o.defaultPositionStateKey,{position:{time:i()(e).toISOString(),tiebreaker:0}}),u=e=>d("logView",e),d=(e,t)=>a=>{const l=Object(n.parse)(a,{sort:!1}),i=void 0===t?l:{...l,[e]:(o=t,Object(r.encode)(o))};var o;return Object(n.stringify)(s.url.encodeQuery(i),{sort:!1,encode:!1})},m=(e,t,a)=>d(o.defaultFilterStateKey,{query:e,...f(t,a),refreshInterval:o.DEFAULT_REFRESH_INTERVAL}),f=(e,t)=>t?{timeRange:{from:new Date(t.startTime).toISOString(),to:new Date(t.endTime).toISOString()}}:e?{timeRange:{from:b(e),to:g(e)}}:{},p={hours:1},b=e=>i()(e).subtract(p).toISOString(),g=e=>i()(e).add(p).toISOString()},131:function(e,t,a){"use strict";a.d(t,"h",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"i",(function(){return g})),a.d(t,"j",(function(){return h})),a.d(t,"g",(function(){return x})),a.d(t,"a",(function(){return E})),a.d(t,"e",(function(){return y})),a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return j}));var s=a(2),r=a.n(s),n=a(79),l=a(32),i=a.n(l),o=a(1),c=a(40),u=a(76),d=a(8),m=a(23);const f={headerFormatter:({value:e})=>i()(e).format("Y-MM-DD HH:mm:ss")},p=20,b={s:o.i18n.translate("xpack.infra.alerts.timeLabels.seconds",{defaultMessage:"seconds"}),m:o.i18n.translate("xpack.infra.alerts.timeLabels.minutes",{defaultMessage:"minutes"}),h:o.i18n.translate("xpack.infra.alerts.timeLabels.hours",{defaultMessage:"hours"}),d:o.i18n.translate("xpack.infra.alerts.timeLabels.days",{defaultMessage:"days"})},g=(e,t)=>Object(s.useMemo)((()=>"number"==typeof e&&"number"==typeof t?Object(n.niceTimeFormatter)([e,t]):e=>`${e}`),[e,t]),h=m.a,x=(e,t=!1)=>{let a=null,s=null;const r=e.reduce(((e,t)=>(t.points.forEach((t=>{const a=e[t.timestamp]||[];e[t.timestamp]=[...a,t.value]})),e)),{});Object.values(r).forEach((e=>{const r=t?Object(d.sum)(e):Object(d.max)(e),n=Object(d.min)(e);r&&(!s||r>s)&&(s=r),n&&(!a||n<a)&&(a=n)}));const n=Object.keys(r).map(Number),l=Object(d.min)(n)||0,i=Object(d.max)(n)||0;return{yMin:a||0,yMax:s||0,xMin:l,xMax:i}},v=({children:e})=>r.a.createElement("div",{style:{width:"100%",height:150,display:"flex",justifyContent:"center",alignItems:"center"}},e),E=({children:e})=>r.a.createElement("div",{style:{width:"100%",height:150}},e),y=()=>r.a.createElement(v,null,r.a.createElement(c.EuiText,{color:"subdued","data-test-subj":"noChartData"},r.a.createElement(u.FormattedMessage,{id:"xpack.infra.alerts.charts.noDataMessage",defaultMessage:"No chart data available"}))),O=()=>r.a.createElement(v,null,r.a.createElement(c.EuiText,{color:"subdued","data-test-subj":"loadingData"},r.a.createElement(c.EuiLoadingChart,{size:"m"}))),j=()=>r.a.createElement(v,null,r.a.createElement(c.EuiText,{color:"subdued","data-test-subj":"chartErrorState"},r.a.createElement(u.FormattedMessage,{id:"xpack.infra.alerts.charts.errorMessage",defaultMessage:"Uh oh, something went wrong"})))},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(1);const r=e=>{const t={avg:s.i18n.translate("xpack.infra.waffle.aggregationNames.avg",{defaultMessage:"Avg of {field}",values:{field:e.field}}),max:s.i18n.translate("xpack.infra.waffle.aggregationNames.max",{defaultMessage:"Max of {field}",values:{field:e.field}}),min:s.i18n.translate("xpack.infra.waffle.aggregationNames.min",{defaultMessage:"Min of {field}",values:{field:e.field}}),rate:s.i18n.translate("xpack.infra.waffle.aggregationNames.rate",{defaultMessage:"Rate of {field}",values:{field:e.field}})};return e.label?e.label:t[e.aggregation]}},166:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(5),r=a(25),n=a(16),l=a(2),i=a(19),o=a(121),c=a(33);function u({timerange:e,currentTime:t,accountId:a="",region:u="",groupBy:d=null,sendRequestImmediately:m=!0,includeTimeseries:f=!0,dropPartialBuckets:p=!0,requestTs:b,...g},h){const x={...g,accountId:a,region:u,groupBy:d,timerange:null!=e?e:{interval:"1m",to:t,from:t-12e5,lookbackSize:5},includeTimeseries:f,dropPartialBuckets:p},{error:v,loading:E,response:y,makeRequest:O,resetRequestState:j}=Object(o.a)("/api/metrics/snapshot","POST",JSON.stringify(x),(e=>Object(n.pipe)(c.g.decode(e),Object(s.fold)(Object(i.d)(i.a),r.identity))),void 0,void 0,null==h?void 0:h.abortable);return Object(l.useEffect)((()=>(m&&O(),()=>{j()})),[O,m,j,b]),{error:v&&v.message||null,loading:E,nodes:y?y.nodes:[],interval:y?y.interval:"60s",reload:O}}},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(8),r=a(43),n=a(33),l=a(146),i=a(46);const o={count:{formatter:r.b.number,template:"{{value}}"},cpu:{formatter:r.b.percent,template:"{{value}}"},diskIOReadBytes:{formatter:r.b.bytes,template:"{{value}}/s"},diskIOWriteBytes:{formatter:r.b.bytes,template:"{{value}}/s"},diskLatency:{formatter:r.b.number,template:"{{value}} ms"},diskSpaceUsage:{formatter:r.b.percent,template:"{{value}}"},memory:{formatter:r.b.percent,template:"{{value}}"},memoryFree:{formatter:r.b.bytes,template:"{{value}}"},memoryTotal:{formatter:r.b.bytes,template:"{{value}}"},normalizedLoad1m:{formatter:r.b.percent,template:"{{value}}"},rx:{formatter:r.b.bits,template:"{{value}}/s"},tx:{formatter:r.b.bits,template:"{{value}}/s"},logRate:{formatter:r.b.abbreviatedNumber,template:"{{value}}/s"},s3BucketSize:{formatter:r.b.bytes,template:"{{value}}"},s3TotalRequests:{formatter:r.b.abbreviatedNumber,template:"{{value}}"},s3NumberOfObjects:{formatter:r.b.abbreviatedNumber,template:"{{value}}"},s3UploadBytes:{formatter:r.b.bytes,template:"{{value}}"},s3DownloadBytes:{formatter:r.b.bytes,template:"{{value}}"},sqsOldestMessage:{formatter:r.b.number,template:"{{value}} seconds"},rdsLatency:{formatter:r.b.number,template:"{{value}} ms"}},c=e=>t=>{if(n.d.is(e)){const a=Object(l.a)(e);return Object(s.isNumber)(t)?a(t):t}const a=Object(s.get)(o,e.type,o.count);return null!=t&&a?Object(i.b)(a.formatter,a.template)(t):""}},168:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(1),r=a(8);const n={CPUUsage:s.i18n.translate("xpack.infra.waffle.metricOptions.cpuUsageText",{defaultMessage:"CPU usage"}),MemoryUsage:s.i18n.translate("xpack.infra.waffle.metricOptions.memoryUsageText",{defaultMessage:"memory usage"}),InboundTraffic:s.i18n.translate("xpack.infra.waffle.metricOptions.inboundTrafficText",{defaultMessage:"inbound traffic"}),OutboundTraffic:s.i18n.translate("xpack.infra.waffle.metricOptions.outboundTrafficText",{defaultMessage:"outbound traffic"}),LogRate:s.i18n.translate("xpack.infra.waffle.metricOptions.hostLogRateText",{defaultMessage:"log rate"}),Load:s.i18n.translate("xpack.infra.waffle.metricOptions.loadText",{defaultMessage:"load"}),Count:s.i18n.translate("xpack.infra.waffle.metricOptions.countText",{defaultMessage:"count"}),DiskIOReadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.diskIOReadBytes",{defaultMessage:"disk reads"}),DiskIOWriteBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.diskIOWriteBytes",{defaultMessage:"disk writes"}),s3BucketSize:s.i18n.translate("xpack.infra.waffle.metricOptions.s3BucketSize",{defaultMessage:"bucket size"}),s3TotalRequests:s.i18n.translate("xpack.infra.waffle.metricOptions.s3TotalRequests",{defaultMessage:"total requests"}),s3NumberOfObjects:s.i18n.translate("xpack.infra.waffle.metricOptions.s3NumberOfObjects",{defaultMessage:"number of objects"}),s3DownloadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.s3DownloadBytes",{defaultMessage:"downloads (bytes)"}),s3UploadBytes:s.i18n.translate("xpack.infra.waffle.metricOptions.s3UploadBytes",{defaultMessage:"uploads (bytes)"}),rdsConnections:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsConnections",{defaultMessage:"connections"}),rdsQueriesExecuted:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsQueriesExecuted",{defaultMessage:"queries executed"}),rdsActiveTransactions:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsActiveTransactions",{defaultMessage:"active transactions"}),rdsLatency:s.i18n.translate("xpack.infra.waffle.metricOptions.rdsLatency",{defaultMessage:"latency"}),sqsMessagesVisible:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesVisible",{defaultMessage:"messages available"}),sqsMessagesDelayed:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesDelayed",{defaultMessage:"messages delayed"}),sqsMessagesSent:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesSent",{defaultMessage:"messages added"}),sqsMessagesEmpty:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsMessagesEmpty",{defaultMessage:"messages returned empty"}),sqsOldestMessage:s.i18n.translate("xpack.infra.waffle.metricOptions.sqsOldestMessage",{defaultMessage:"oldest message"})},l=Object(r.mapValues)(n,(e=>`${e[0].toUpperCase()}${e.slice(1)}`)),i=e=>{switch(e){case"cpu":return{text:l.CPUUsage,textLC:n.CPUUsage,value:"cpu"};case"memory":return{text:l.MemoryUsage,textLC:n.MemoryUsage,value:"memory"};case"rx":return{text:l.InboundTraffic,textLC:n.InboundTraffic,value:"rx"};case"tx":return{text:l.OutboundTraffic,textLC:n.OutboundTraffic,value:"tx"};case"logRate":return{text:l.LogRate,textLC:n.LogRate,value:"logRate"};case"load":return{text:l.Load,textLC:n.Load,value:"load"};case"count":return{text:l.Count,textLC:n.Count,value:"count"};case"diskIOReadBytes":return{text:l.DiskIOReadBytes,textLC:n.DiskIOReadBytes,value:"diskIOReadBytes"};case"diskIOWriteBytes":return{text:l.DiskIOWriteBytes,textLC:n.DiskIOWriteBytes,value:"diskIOWriteBytes"};case"s3BucketSize":return{text:l.s3BucketSize,textLC:n.s3BucketSize,value:"s3BucketSize"};case"s3TotalRequests":return{text:l.s3TotalRequests,textLC:n.s3TotalRequests,value:"s3TotalRequests"};case"s3NumberOfObjects":return{text:l.s3NumberOfObjects,textLC:n.s3NumberOfObjects,value:"s3NumberOfObjects"};case"s3DownloadBytes":return{text:l.s3DownloadBytes,textLC:n.s3DownloadBytes,value:"s3DownloadBytes"};case"s3UploadBytes":return{text:l.s3UploadBytes,textLC:n.s3UploadBytes,value:"s3UploadBytes"};case"rdsConnections":return{text:l.rdsConnections,textLC:n.rdsConnections,value:"rdsConnections"};case"rdsQueriesExecuted":return{text:l.rdsQueriesExecuted,textLC:n.rdsQueriesExecuted,value:"rdsQueriesExecuted"};case"rdsActiveTransactions":return{text:l.rdsActiveTransactions,textLC:n.rdsActiveTransactions,value:"rdsActiveTransactions"};case"rdsLatency":return{text:l.rdsLatency,textLC:n.rdsLatency,value:"rdsLatency"};case"sqsMessagesVisible":return{text:l.sqsMessagesVisible,textLC:n.sqsMessagesVisible,value:"sqsMessagesVisible"};case"sqsMessagesDelayed":return{text:l.sqsMessagesDelayed,textLC:n.sqsMessagesDelayed,value:"sqsMessagesDelayed"};case"sqsMessagesSent":return{text:l.sqsMessagesSent,textLC:n.sqsMessagesSent,value:"sqsMessagesSent"};case"sqsMessagesEmpty":return{text:l.sqsMessagesEmpty,textLC:n.sqsMessagesEmpty,value:"sqsMessagesEmpty"};case"sqsOldestMessage":return{text:l.sqsOldestMessage,textLC:n.sqsOldestMessage,value:"sqsOldestMessage"}}}},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(79),r=a(8),n=a(2),l=a.n(n),i=a(17),o=a(26);const c=.3,u=({threshold:e,sortedThresholds:t,comparator:a,color:n,id:u,firstTimestamp:d,lastTimestamp:m,domain:f})=>{if(!a||!e)return null;const p=[i.b.GT,i.b.GT_OR_EQ].includes(a),b=[i.b.LT,i.b.LT_OR_EQ].includes(a);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.LineAnnotation,{id:`${u}-thresholds`,domainType:s.AnnotationDomainType.YDomain,"data-test-subj":"threshold-line",dataValues:t.map((e=>({dataValue:e}))),style:{line:{strokeWidth:2,stroke:Object(o.b)(n),opacity:1}}}),2===t.length&&a===i.b.BETWEEN?l.a.createElement(l.a.Fragment,null,l.a.createElement(s.RectAnnotation,{id:`${u}-lower-threshold`,"data-test-subj":"between-rect",style:{fill:Object(o.b)(n),opacity:c},dataValues:[{coordinates:{x0:d,x1:m,y0:Object(r.first)(e),y1:Object(r.last)(e)}}]})):null,2===t.length&&a===i.b.OUTSIDE_RANGE?l.a.createElement(l.a.Fragment,null,l.a.createElement(s.RectAnnotation,{id:`${u}-lower-threshold`,"data-test-subj":"outside-range-lower-rect",style:{fill:Object(o.b)(n),opacity:c},dataValues:[{coordinates:{x0:d,x1:m,y0:f.min,y1:Object(r.first)(e)}}]}),l.a.createElement(s.RectAnnotation,{id:`${u}-upper-threshold`,"data-test-subj":"outside-range-upper-rect",style:{fill:Object(o.b)(n),opacity:c},dataValues:[{coordinates:{x0:d,x1:m,y0:Object(r.last)(e),y1:f.max}}]})):null,b&&null!=Object(r.first)(e)?l.a.createElement(s.RectAnnotation,{id:`${u}-upper-threshold`,"data-test-subj":"below-rect",style:{fill:Object(o.b)(n),opacity:c},dataValues:[{coordinates:{x0:d,x1:m,y0:f.min,y1:Object(r.first)(e)}}]}):null,p&&null!=Object(r.first)(e)?l.a.createElement(s.RectAnnotation,{id:`${u}-upper-threshold`,"data-test-subj":"above-rect",style:{fill:Object(o.b)(n),opacity:c},dataValues:[{coordinates:{x0:d,x1:m,y0:Object(r.first)(e),y1:f.max}}]}):null)}},531:function(e,t,a){"use strict";a.r(t),a.d(t,"defaultExpression",(function(){return V})),a.d(t,"Expressions",(function(){return H})),a.d(t,"ExpressionRow",(function(){return X})),a.d(t,"nodeTypes",(function(){return te}));var s=a(78),r=a.n(s),n=a(40),l=a(1),i=a(77),o=a(76),c=a(90),u=a(8),d=a(2),m=a.n(d),f=a(153),p=a.n(f),b=a(20),g=a(17),h=a(33),x=a(168),v=a(110),E=a(164),y=a(139),O=a(79),j=a(32),k=a.n(j),M=a(118),T=a(26),w=a(166),C=a(119),S=a(167),F=a(145),I=a(138),L=a(147),R=a(115),B=a(131),q=a(170);const D=({expression:e,filterQuery:t,nodeType:a,sourceId:s})=>{var r,i,c,f,p;const b=Object(M.a)(),g=Object(d.useMemo)((()=>({interval:`${e.timeSize||1}${e.timeUnit}`,from:k()().subtract(20*(e.timeSize||1),e.timeUnit).valueOf(),to:k()().valueOf(),forceInterval:!0})),[e.timeSize,e.timeUnit]),h=e=>({...e,type:"custom"}),x=Object(C.d)(),{loading:v,nodes:E}=Object(w.a)({filterQuery:t,metrics:"custom"===e.metric?[h(e.customMetric)]:[{type:e.metric}],groupBy:[],nodeType:a,sourceId:s,currentTime:0,accountId:x.accountId,region:x.region,timerange:g}),y={field:e.metric,aggregation:"avg",color:T.a.color0},j=Object(d.useMemo)((()=>{var e,t,a,s;const r=null===(e=E[0])||void 0===e||null===(t=e.metrics[0])||void 0===t?void 0:t.timeseries,n=null===(a=Object(u.first)(null==r?void 0:r.rows))||void 0===a?void 0:a.timestamp,l=null===(s=Object(u.last)(null==r?void 0:r.rows))||void 0===s?void 0:s.timestamp;return null==n||null==l?e=>`${e}`:Object(O.niceTimeFormatter)([n,l])}),[E]),D=Object(d.useCallback)(Object(S.a)("custom"===e.metric?h(e.customMetric):{type:e.metric}),[e.metric]);if(v||!E)return m.a.createElement(B.c,null);const z=t=>N(e.metric,t),P=e.threshold.map(z),U=null!==(r=null===(i=e.warningThreshold)||void 0===i?void 0:i.map(z))&&void 0!==r?r:[],A=P.slice().sort(),W=U.slice().sort(),_=[...A,...W].sort(),Q=null===(c=E[0])||void 0===c||null===(f=c.metrics[0])||void 0===f?void 0:f.timeseries;if(!Q||!Q.rows||0===Q.rows.length)return m.a.createElement(B.e,null);const G={...Q,id:null===(p=E[0])||void 0===p?void 0:p.name,rows:Q.rows.map((e=>{const t={...e};return _.forEach(((e,a)=>{t[Object(I.a)(y,`threshold_${a}`)]=e})),t}))},V=Object(u.first)(Q.rows).timestamp,H=Object(u.last)(Q.rows).timestamp,$=Object(F.a)(G,[y],!1),K={max:1.1*Math.max($.max,Object(u.last)(_)||$.max),min:.9*Math.min($.min,Object(u.first)(_)||$.min)};K.min===Object(u.first)(P)&&(K.min=.9*K.min);const{timeSize:Y,timeUnit:J}=e,X=B.f[J];return m.a.createElement(m.a.Fragment,null,m.a.createElement(B.a,null,m.a.createElement(O.Chart,null,m.a.createElement(L.a,{type:R.a.bar,metric:y,id:"0",series:G,stack:!1}),m.a.createElement(q.a,{comparator:e.comparator,threshold:P,sortedThresholds:A,color:T.a.color1,id:"critical",firstTimestamp:V,lastTimestamp:H,domain:K}),e.warningComparator&&e.warningThreshold&&m.a.createElement(q.a,{comparator:e.warningComparator,threshold:U,sortedThresholds:W,color:T.a.color5,id:"warning",firstTimestamp:V,lastTimestamp:H,domain:K}),m.a.createElement(O.Axis,{id:"timestamp",position:O.Position.Bottom,showOverlappingTicks:!0,tickFormat:j}),m.a.createElement(O.Axis,{id:"values",position:O.Position.Left,tickFormat:D,domain:K}),m.a.createElement(O.Settings,{baseTheme:b.baseTheme,locale:l.i18n.getLocale()}),m.a.createElement(O.Tooltip,B.h))),m.a.createElement("div",{style:{textAlign:"center"}},"ALL"!==G.id?m.a.createElement(n.EuiText,{size:"xs",color:"subdued"},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabelWithGrouping",defaultMessage:"Last {lookback} {timeLabel} of data for {id}",values:{id:G.id,timeLabel:X,lookback:20*Y}})):m.a.createElement(n.EuiText,{size:"xs",color:"subdued"},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alerts.dataTimeRangeLabel",defaultMessage:"Last {lookback} {timeLabel}",values:{timeLabel:X,lookback:20*Y}}))))},N=(e,t)=>z[e]?z[e](t):t,z={cpu:e=>Number(e)/100,memory:e=>Number(e)/100};var P=a(154);const U={avg:l.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.avg",{defaultMessage:"Average"}),max:l.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.max",{defaultMessage:"Max"}),min:l.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.min",{defaultMessage:"Min"}),rate:l.i18n.translate("xpack.infra.waffle.customMetrics.aggregationLables.rate",{defaultMessage:"Rate"})},A=h.b.map((e=>({text:U[e],value:e}))),W=({metric:e,metrics:t,customMetric:a,fields:s,errors:r,onChange:i,onChangeCustom:c,popupPosition:f})=>{var p;const[b,g]=Object(d.useState)(!1),[x,v]=Object(d.useState)("custom"===(null==e?void 0:e.value)),[E,y]=Object(d.useState)(null==e?void 0:e.value),[O,j]=Object(d.useState)(null==a?void 0:a.label),k={text:l.i18n.translate("xpack.infra.metrics.alertFlyout.expression.metric.selectFieldLabel",{defaultMessage:"Select a metric"}),value:""},M=Object(d.useMemo)((()=>s.filter((e=>e.aggregatable&&"number"===e.type&&!((null==a?void 0:a.field)===e.name))).map((e=>({label:e.name})))),[s,null==a?void 0:a.field]),T=Object(d.useMemo)((()=>x?(null==a?void 0:a.field)&&Object(P.a)(a):(null==e?void 0:e.text)||k.text),[x,e,a,k]),w=Object(d.useCallback)((e=>{"metric-popover-custom"===e?(v(!0),i("custom")):(v(!1),i(E))}),[v,i,E]),C=Object(d.useCallback)((e=>{const t=e.target.value,s=h.c.is(t)?t:"avg",r={...a,aggregation:s};h.d.is(r)&&c(r)}),[a,c]),S=Object(d.useCallback)((e=>{const t={...a,field:e[0].label};h.d.is(t)&&c(t)}),[a,c]),F=Object(u.debounce)(c,500),I=Object(d.useCallback)((e=>{j(e.target.value);const t={...a,label:e.target.value};h.d.is(t)&&F(t)}),[a,F]),L=t.map((e=>({label:e.text,value:e.value})),[]);return m.a.createElement(n.EuiPopover,{id:"metricPopover",button:m.a.createElement(n.EuiExpression,{description:l.i18n.translate("xpack.infra.metrics.alertFlyout.expression.metric.whenLabel",{defaultMessage:"When"}),value:T,isActive:Boolean(b||r.metric&&r.metric.length>0),onClick:()=>{g(!0)},color:null!==(p=r.metric)&&void 0!==p&&p.length?"danger":"success"}),isOpen:b,closePopover:()=>{g(!1)},anchorPosition:null!=f?f:"downRight",zIndex:8e3},m.a.createElement("div",{style:{width:620}},m.a.createElement(_,{onClose:()=>g(!1)},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.expression.metric.popoverTitle",defaultMessage:"Metric"})),m.a.createElement(n.EuiButtonGroup,{isFullWidth:!0,buttonSize:"compressed",legend:"Metric type",options:[{id:"metric-popover-default",label:"Default metric"},{id:"metric-popover-custom",label:"Custom metric"}],idSelected:x?"metric-popover-custom":"metric-popover-default",onChange:w}),m.a.createElement(n.EuiSpacer,{size:"m"}),x?m.a.createElement(m.a.Fragment,null,m.a.createElement(n.EuiFormRow,{fullWidth:!0},m.a.createElement(n.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiSelect,{"data-test-subj":"infraMetricExpressionSelect",onChange:C,value:(null==a?void 0:a.aggregation)||"avg",options:A,fullWidth:!0})),m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiText,{color:"subdued"},m.a.createElement("span",null,l.i18n.translate("xpack.infra.waffle.customMetrics.of",{defaultMessage:"of"})))),m.a.createElement(n.EuiFlexItem,null,m.a.createElement(n.EuiComboBox,{fullWidth:!0,placeholder:l.i18n.translate("xpack.infra.waffle.customMetrics.fieldPlaceholder",{defaultMessage:"Select a field"}),singleSelection:{asPlainText:!0},selectedOptions:null!=a&&a.field?[{label:a.field}]:[],options:M,onChange:S,isClearable:!1,isInvalid:r.metric.length>0})))),m.a.createElement(n.EuiFormRow,{label:l.i18n.translate("xpack.infra.waffle.alerting.customMetrics.labelLabel",{defaultMessage:"Metric name (optional)"}),display:"rowCompressed",fullWidth:!0,helpText:l.i18n.translate("xpack.infra.waffle.alerting.customMetrics.helpText",{defaultMessage:'Choose a name to help identify your custom metric. Defaults to "<function> of <field name>".'})},m.a.createElement(n.EuiFieldText,{"data-test-subj":"infraMetricExpressionFieldText",name:"label",placeholder:l.i18n.translate("xpack.infra.waffle.customMetrics.labelPlaceholder",{defaultMessage:'Choose a name to appear in the "Metric" dropdown'}),value:O,fullWidth:!0,onChange:I}))):m.a.createElement(n.EuiFormRow,{fullWidth:!0},m.a.createElement(n.EuiFlexGroup,null,m.a.createElement(n.EuiFlexItem,{className:"actOf__metricContainer"},m.a.createElement(n.EuiComboBox,{fullWidth:!0,singleSelection:{asPlainText:!0},"data-test-subj":"availablefieldsOptionsComboBox",isInvalid:r.metric.length>0,placeholder:k.text,options:L,noSuggestions:!L.length,selectedOptions:e?L.filter((t=>t.value===e.value)):[],renderOption:e=>e.label,onChange:e=>{e.length>0?(i(e[0].value),y(e[0].value)):i()}}))))))},_=({children:e,onClose:t})=>m.a.createElement(n.EuiPopoverTitle,null,m.a.createElement(n.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},m.a.createElement(n.EuiFlexItem,null,e),m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiButtonIcon,{"data-test-subj":"infraClosablePopoverTitleButton",iconType:"cross",color:"danger","aria-label":l.i18n.translate("xpack.infra.metrics.expressionItems.components.closablePopoverTitle.closeLabel",{defaultMessage:"Close"}),onClick:()=>t()})))),Q=({value:e,options:t,onChange:a,popupPosition:s})=>{const[r,i]=Object(d.useState)(!1);return m.a.createElement(n.EuiPopover,{button:m.a.createElement(n.EuiExpression,{"data-test-subj":"nodeTypeExpression",description:l.i18n.translate("xpack.infra.metrics.alertFlyout.expression.for.descriptionLabel",{defaultMessage:"For"}),value:t[e].text,isActive:r,onClick:()=>{i(!0)}}),isOpen:r,closePopover:()=>{i(!1)},ownFocus:!0,anchorPosition:null!=s?s:"downLeft"},m.a.createElement("div",null,m.a.createElement(G,{onClose:()=>i(!1)},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.expression.for.popoverTitle",defaultMessage:"Node Type"})),m.a.createElement(n.EuiSelect,{"data-test-subj":"forExpressionSelect",value:e,fullWidth:!0,onChange:e=>{a(e.target.value),i(!1)},options:Object.values(t).map((e=>e))})))},G=({children:e,onClose:t})=>m.a.createElement(n.EuiPopoverTitle,null,m.a.createElement(n.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},m.a.createElement(n.EuiFlexItem,null,e),m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiButtonIcon,{"data-test-subj":"infraClosablePopoverTitleButton",iconType:"cross",color:"danger","aria-label":l.i18n.translate("xpack.infra.metrics.expressionItems.components.closablePopoverTitle.closeLabel",{defaultMessage:"Close"}),onClick:()=>t()})))),V={metric:"cpu",comparator:g.b.GT,threshold:[],timeSize:1,timeUnit:"m",customMetric:{type:"custom",id:"alert-custom-metric",field:"",aggregation:"avg"}},H=e=>{const{setRuleParams:t,ruleParams:a,errors:s,metadata:r}=e,{source:i,createDerivedIndexPattern:f}=Object(v.b)(),[p,b]=Object(d.useState)(1),[x,O]=Object(d.useState)("m"),j=Object(d.useMemo)((()=>f()),[f]),k=Object(d.useCallback)(((e,s)=>{const r=a.criteria?a.criteria.slice():[];r[e]=s,t("criteria",r)}),[t,a.criteria]),M=Object(d.useCallback)((()=>{var e;const s=(null===(e=a.criteria)||void 0===e?void 0:e.slice())||[];s.push({...V,timeSize:null!=p?p:V.timeSize,timeUnit:null!=x?x:V.timeUnit}),t("criteria",s)}),[t,a.criteria,p,x]),T=Object(d.useCallback)((e=>{const s=a.criteria.slice();s.length>1&&(s.splice(e,1),t("criteria",s))}),[t,a.criteria]),w=Object(d.useCallback)((e=>{t("filterQueryText",null!=e?e:"");try{t("filterQuery",Object(y.a)(e,j,!1)||"")}catch(e){t("filterQuery",g.f)}}),[j,t]),C=Object(d.useCallback)(Object(u.debounce)(w,500),[w]),S=Object(d.useMemo)((()=>({aggField:[],timeSizeUnit:[],timeWindowSize:[]})),[]),F=Object(d.useCallback)((e=>{const s=a.criteria.map((t=>({...t,timeSize:e})));b(e||void 0),t("criteria",s)}),[a.criteria,t]),I=Object(d.useCallback)((e=>{const s=a.criteria.map((t=>({...t,timeUnit:e})));O(e),t("criteria",s)}),[a.criteria,t]),L=Object(d.useCallback)((e=>{t("nodeType",e)}),[t]),R=Object(d.useCallback)((e=>w(e.target.value)),[w]),B=Object(d.useCallback)((()=>{const e=r;e&&e.options?t("criteria",[{...V,metric:e.options.metric.type,customMetric:h.d.is(e.options.metric)?e.options.metric:V.customMetric}]):t("criteria",[V])}),[r,t]),q=Object(d.useCallback)((()=>{const e=r;e&&e.filter&&(t("filterQueryText",e.filter),t("filterQuery",Object(y.a)(e.filter,j)||""))}),[r,j,t]);return Object(d.useEffect)((()=>{const e=r;a.nodeType||(e&&e.nodeType?t("nodeType",e.nodeType):t("nodeType","host")),a.criteria&&a.criteria.length?(b(a.criteria[0].timeSize),O(a.criteria[0].timeUnit)):B(),void 0===a.filterQuery&&q(),a.sourceId||t("sourceId",(null==i?void 0:i.id)||"default")}),[r,j,V,i]),m.a.createElement(m.a.Fragment,null,m.a.createElement(n.EuiSpacer,{size:"m"}),m.a.createElement(n.EuiText,{size:"xs"},m.a.createElement("h4",null,m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.conditions",defaultMessage:"Conditions"}))),m.a.createElement(se,null,m.a.createElement(re,null,m.a.createElement(ne,null,m.a.createElement(Q,{options:te,value:a.nodeType||"host",onChange:L})))),m.a.createElement(n.EuiSpacer,{size:"xs"}),a.criteria&&a.criteria.map(((e,t)=>m.a.createElement(X,{nodeType:a.nodeType,canDelete:a.criteria.length>1,remove:T,addExpression:M,key:t,expressionId:t,setRuleParams:k,errors:s[t]||S,expression:e||{},fields:j.fields},m.a.createElement(D,{expression:e,filterQuery:a.filterQuery,nodeType:a.nodeType,sourceId:a.sourceId,"data-test-subj":"preview-chart"})))),m.a.createElement(le,null,m.a.createElement(c.ForLastExpression,{timeWindowSize:p,timeWindowUnit:x,errors:S,onChangeWindowSize:F,onChangeWindowUnit:I})),m.a.createElement("div",null,m.a.createElement(n.EuiButtonEmpty,{"data-test-subj":"infraExpressionsAddConditionButton",color:"primary",iconSide:"left",flush:"left",iconType:"plusInCircleFilled",onClick:M},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addCondition",defaultMessage:"Add condition"}))),m.a.createElement(n.EuiSpacer,{size:"m"}),m.a.createElement(n.EuiCheckbox,{id:"metrics-alert-no-data-toggle",label:m.a.createElement(m.a.Fragment,null,l.i18n.translate("xpack.infra.metrics.alertFlyout.alertOnNoData",{defaultMessage:"Alert me if there's no data"})," ",m.a.createElement(n.EuiToolTip,{content:l.i18n.translate("xpack.infra.metrics.alertFlyout.noDataHelpText",{defaultMessage:"Enable this to trigger the action if the metric(s) do not report any data over the expected time period, or if the alert fails to query Elasticsearch"})},m.a.createElement(n.EuiIcon,{type:"questionInCircle",color:"subdued"}))),checked:a.alertOnNoData,onChange:e=>t("alertOnNoData",e.target.checked)}),m.a.createElement(n.EuiSpacer,{size:"m"}),m.a.createElement(n.EuiFormRow,{label:l.i18n.translate("xpack.infra.metrics.alertFlyout.filterLabel",{defaultMessage:"Filter (optional)"}),helpText:l.i18n.translate("xpack.infra.metrics.alertFlyout.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."}),fullWidth:!0,display:"rowCompressed"},r?m.a.createElement(E.a,{derivedIndexPattern:j,onSubmit:w,onChange:C,value:a.filterQueryText}):m.a.createElement(n.EuiFieldSearch,{"data-test-subj":"infraExpressionsFieldSearch",onChange:R,value:a.filterQueryText,fullWidth:!0})),m.a.createElement(n.EuiSpacer,{size:"m"}))};t.default=Object(v.c)(H)("default");const $=i.css`
  margin-left: 28px;
`,K=i.css`
  display: flex;
  flex-wrap: wrap;
  margin: 0 -4px;
`,Y=i.css`
  padding: 0 4px;
`,J=i.css`
  margin-left: 4px;
`,X=e=>{var t,a,s;const[r,i]=p()(!0),{children:c,setRuleParams:f,expression:v,errors:E,expressionId:y,remove:O,canDelete:j,fields:k}=e,{metric:M,comparator:T=g.b.GT,threshold:w=[],customMetric:C,warningThreshold:S=[],warningComparator:F}=v,[I,L]=Object(d.useState)(Boolean(null==S?void 0:S.length)),R=Object(d.useCallback)((e=>{const t=b.SnapshotMetricTypeRT.is(e)?e:Boolean(e)?"custom":void 0,a={...v,metric:t};f(y,a)}),[y,v,f]),B=Object(d.useCallback)((e=>{h.d.is(e)&&f(y,{...v,customMetric:e})}),[y,v,f]),q=Object(d.useCallback)((e=>{f(y,{...v,comparator:e})}),[y,v,f]),D=Object(d.useCallback)((e=>{f(y,{...v,warningComparator:e})}),[y,v,f]),N=Object(d.useCallback)((e=>{e.join()!==v.threshold.join()&&f(y,{...v,threshold:e})}),[y,v,f]),z=Object(d.useCallback)((e=>{var t;e.join()!==(null===(t=v.warningThreshold)||void 0===t?void 0:t.join())&&f(y,{...v,warningThreshold:e})}),[y,v,f]),P=Object(d.useCallback)((()=>{I?(L(!1),f(y,Object(u.omit)(v,"warningComparator","warningThreshold"))):(L(!0),f(y,{...v,warningComparator:T,warningThreshold:[]}))}),[I,L,f,T,v,y]),U=m.a.createElement(Z,{comparator:T,threshold:w,updateComparator:q,updateThreshold:N,errors:null!==(t=E.critical)&&void 0!==t?t:{},metric:M}),A=I&&m.a.createElement(Z,{comparator:F||T,threshold:S,updateComparator:D,updateThreshold:z,errors:null!==(a=E.warning)&&void 0!==a?a:{},metric:M}),_=Object(d.useMemo)((()=>{let t=b.hostSnapshotMetricTypes;switch(e.nodeType){case"awsEC2":t=b.awsEC2SnapshotMetricTypes;break;case"awsRDS":t=b.awsRDSSnapshotMetricTypes;break;case"awsS3":t=b.awsS3SnapshotMetricTypes;break;case"awsSQS":t=b.awsSQSSnapshotMetricTypes;break;case"host":t=b.hostSnapshotMetricTypes;break;case"pod":t=b.podSnapshotMetricTypes;break;case"container":t=b.containerSnapshotMetricTypes}return t.map(x.a)}),[e.nodeType]);return m.a.createElement(m.a.Fragment,null,m.a.createElement(n.EuiFlexGroup,{gutterSize:"xs"},m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiButtonIcon,{"data-test-subj":"infraExpressionRowButton",iconType:r?"arrowDown":"arrowRight",onClick:i,"aria-label":l.i18n.translate("xpack.infra.metrics.alertFlyout.expandRowLabel",{defaultMessage:"Expand row."})})),m.a.createElement(n.EuiFlexItem,{grow:!0},m.a.createElement(ie,null,m.a.createElement(oe,null,m.a.createElement(W,{metric:{value:M,text:(null===(s=_.find((e=>(null==e?void 0:e.value)===M)))||void 0===s?void 0:s.text)||""},metrics:_.filter((e=>void 0!==e&&void 0!==e.value)),onChange:R,onChangeCustom:B,errors:E,customMetric:C,fields:k})),!I&&U),I&&m.a.createElement(m.a.Fragment,null,m.a.createElement(ce,null,U,m.a.createElement(ue,{color:"danger"},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.criticalThreshold",defaultMessage:"Alert"}))),m.a.createElement(de,null,A,m.a.createElement(me,{color:"warning"},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.warningThreshold",defaultMessage:"Warning"})),m.a.createElement(n.EuiButtonIcon,{"data-test-subj":"infraExpressionRowButton","aria-label":l.i18n.translate("xpack.infra.metrics.alertFlyout.removeWarningThreshold",{defaultMessage:"Remove warningThreshold"}),iconSize:"s",color:"text",iconType:"minusInCircleFilled",onClick:P}))),!I&&m.a.createElement(m.a.Fragment,null," ",m.a.createElement(n.EuiSpacer,{size:"xs"}),m.a.createElement(fe,null,m.a.createElement(n.EuiButtonEmpty,{"data-test-subj":"infraExpressionRowAddWarningThresholdButton",color:"primary",flush:"left",size:"xs",iconType:"plusInCircleFilled",onClick:P},m.a.createElement(o.FormattedMessage,{id:"xpack.infra.metrics.alertFlyout.addWarningThreshold",defaultMessage:"Add warning threshold"}))))),j&&m.a.createElement(n.EuiFlexItem,{grow:!1},m.a.createElement(n.EuiButtonIcon,{"data-test-subj":"infraExpressionRowButton","aria-label":l.i18n.translate("xpack.infra.metrics.alertFlyout.removeCondition",{defaultMessage:"Remove condition"}),color:"danger",iconType:"trash",onClick:()=>O(y)}))),r?m.a.createElement(pe,null,c):null,m.a.createElement(n.EuiSpacer,{size:"s"}))},Z=({updateComparator:e,updateThreshold:t,threshold:a,metric:s,comparator:r,errors:l})=>{var i;return m.a.createElement(m.a.Fragment,null,m.a.createElement(be,null,m.a.createElement(c.ThresholdExpression,{thresholdComparator:r||g.b.GT,threshold:a,onChangeSelectedThresholdComparator:e,onChangeSelectedThreshold:t,errors:l})),s&&m.a.createElement(ge,null,m.a.createElement(n.EuiText,{size:"s"},(null===(i=ae[s])||void 0===i?void 0:i.label)||"")))},ee=e=>Object(b.findInventoryModel)(e).displayName,te={host:{text:ee("host"),value:"host"},pod:{text:ee("pod"),value:"pod"},container:{text:ee("container"),value:"container"},awsEC2:{text:ee("awsEC2"),value:"awsEC2"},awsS3:{text:ee("awsS3"),value:"awsS3"},awsRDS:{text:ee("awsRDS"),value:"awsRDS"},awsSQS:{text:ee("awsSQS"),value:"awsSQS"}},ae={count:{label:""},cpu:{label:"%"},memory:{label:"%"},rx:{label:"bits/s"},tx:{label:"bits/s"},logRate:{label:"/s"},diskIOReadBytes:{label:"bytes/s"},diskIOWriteBytes:{label:"bytes/s"},s3BucketSize:{label:"bytes"},s3TotalRequests:{label:""},s3NumberOfObjects:{label:""},s3UploadBytes:{label:"bytes"},s3DownloadBytes:{label:"bytes"},sqsOldestMessage:{label:"seconds"},rdsLatency:{label:"ms"},custom:{label:""}};var se=r()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-1kj6bd-0"})(["",""],Y),re=r()(n.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1kj6bd-1"})(["",""],K),ne=r()("div").withConfig({displayName:"_StyledDiv2",componentId:"sc-1kj6bd-2"})(["",""],$),le=r()("div").withConfig({displayName:"_StyledDiv3",componentId:"sc-1kj6bd-3"})(["",""],$),ie=r()(n.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup2",componentId:"sc-1kj6bd-4"})(["",""],K),oe=r()("div").withConfig({displayName:"_StyledDiv4",componentId:"sc-1kj6bd-5"})(["",""],Y),ce=r()(n.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup3",componentId:"sc-1kj6bd-6"})(["",""],K),ue=r()(n.EuiHealth).withConfig({displayName:"_StyledEuiHealth",componentId:"sc-1kj6bd-7"})(["",""],J),de=r()(n.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup4",componentId:"sc-1kj6bd-8"})(["",""],K),me=r()(n.EuiHealth).withConfig({displayName:"_StyledEuiHealth2",componentId:"sc-1kj6bd-9"})(["",""],J),fe=r()(n.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup5",componentId:"sc-1kj6bd-10"})(["",""],K),pe=r()("div").withConfig({displayName:"_StyledDiv5",componentId:"sc-1kj6bd-11"})(["padding:0 0 0 28px;"]),be=r()("div").withConfig({displayName:"_StyledDiv6",componentId:"sc-1kj6bd-12"})(["",""],Y),ge=r()("div").withConfig({displayName:"_StyledDiv7",componentId:"sc-1kj6bd-13"})(["align-self:center;"])}}]);