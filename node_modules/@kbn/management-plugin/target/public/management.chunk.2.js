(window.management_bundle_jsonpfunction=window.management_bundle_jsonpfunction||[]).push([[2],{31:function(e,t,a){e.exports=a(12)(1102)},36:function(e,t,a){var n=a(37),s=a(38),i=a(39),r=a(40);e.exports=function(e,t,a){return e=i(e),void 0===(t=a?void 0:t)?s(e)?r(e):n(e):e.match(t)||[]}},37:function(e,t){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(a)||[]}},38:function(e,t){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return a.test(e)}},39:function(e,t,a){e.exports=a(12)(3371)},40:function(e,t){var a="\\ud800-\\udfff",n="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l="["+r+"]",o="\\d+",u="["+n+"]",d="["+s+"]",c="[^"+a+r+o+n+s+i+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",j="["+i+"]",f="(?:"+d+"|"+c+")",m="(?:"+j+"|"+c+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",p="(?:['’](?:D|LL|M|RE|S|T|VE))?",h="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",x=y+h+"(?:\\u200d(?:"+["[^"+a+"]",g,b].join("|")+")"+y+h+")*",O="(?:"+[u,g,b].join("|")+")"+x,C=RegExp([j+"?"+d+"+"+v+"(?="+[l,j,"$"].join("|")+")",m+"+"+p+"(?="+[l,j+f,"$"].join("|")+")",j+"?"+f+"+"+v,j+"+"+p,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o,O].join("|"),"g");e.exports=function(e){return e.match(C)||[]}},41:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3);t.default=function(e){n.useEffect(e,[])}},78:function(e,t,a){"use strict";a.r(t),a.d(t,"SettingsApplication",(function(){return et})),a.d(t,"SettingsApplicationProvider",(function(){return qe})),a.d(t,"SettingsApplicationKibanaProvider",(function(){return Qe})),a.d(t,"KibanaSettingsApplication",(function(){return tt}));var n=a(3),s=a.n(n),i=a(4),r=a(2);const l=e=>"image"===e.type,o=e=>"json"===e.type,u=e=>"markdown"===e.type;var d=a(36),c=a.n(d),g=a(31),b=a.n(g);const j=(e,t=e.userValue)=>{const{value:a}=e;return null==t||b()(a,t)},f=(e,t)=>{if(!t)return!1;const{unsavedValue:a}=t,{savedValue:n,defaultValue:s}=e,i=null!=n;return!b()(a,i?n:s)};function m(e,t){const a=f(e,t);return[a?null==t?void 0:t.unsavedValue:void 0!==e.savedValue&&null!==e.savedValue?e.savedValue:e.defaultValue,a]}const v=e=>{const{onInputChange:t,field:a}=e;return e=>{f(a,e)?t(e):t()}},p="general",h="Presentation Labs",y="accessibility",x="autocomplete",O="banner",C="discover",w="machineLearning",E="notifications",S="observability",L="reporting",M="rollups",F="search",I="securitySolution",k="timelion",V="visualization",T=[p,h,y,x,O,C,w,E,S,L,M,F,I,k,V],P=e=>{const t=e.reduce(((e,t)=>{const a=t.categories[0],n=e[a]||{count:0,fields:[]};return n.fields=[...n.fields,t],n.count=n.fields.length,e[a]=n,e}),{}),a={};for(const e of T)t[e]&&(a[e]=t[e]);return{...a,...t}},A=(e="")=>e.replace(/^./,(e=>e.toUpperCase())),R={[p]:r.i18n.translate("management.settings.categoryNames.generalLabel",{defaultMessage:"General"}),[w]:r.i18n.translate("management.settings.categoryNames.machineLearningLabel",{defaultMessage:"Machine Learning"}),[S]:r.i18n.translate("management.settings.categoryNames.observabilityLabel",{defaultMessage:"Observability"}),[k]:r.i18n.translate("management.settings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),[E]:r.i18n.translate("management.settings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),[V]:r.i18n.translate("management.settings.categoryNames.visualizationsLabel",{defaultMessage:"Visualization"}),[C]:r.i18n.translate("management.settings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),[L]:r.i18n.translate("management.settings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),[F]:r.i18n.translate("management.settings.categoryNames.searchLabel",{defaultMessage:"Search"}),[I]:r.i18n.translate("management.settings.categoryNames.securitySolutionLabel",{defaultMessage:"Security Solution"}),enterpriseSearch:r.i18n.translate("management.settings.categoryNames.enterpriseSearchLabel",{defaultMessage:"Enterprise Search"}),[h]:r.i18n.translate("management.settings.categoryNames.presentationLabLabel",{defaultMessage:"Presentation Labs"}),[y]:r.i18n.translate("management.settings.categoryNames.accessibilityLabel",{defaultMessage:"Accessibility"}),[x]:r.i18n.translate("management.settings.categoryNames.autocompleteLabel",{defaultMessage:"Autocomplete"}),[O]:r.i18n.translate("management.settings.categoryNames.bannerLabel",{defaultMessage:"Banner"}),[M]:r.i18n.translate("management.settings.categoryNames.rollupsLabel",{defaultMessage:"Rollups"})};function $(e){return e?R[e]||A(e):""}const D="category",B=e=>c()(null!=e?e:"").map((e=>e.toLowerCase())).join(" "),z=(e="")=>{if(!e)return"";const t=i.Query.parse(e);if(t.hasOrFieldClause(D)){const e=t.getOrFieldClause(D),a=B(t.removeOrFieldClauses(D).text);if(!e||!Array.isArray(e.value))return a;let n=i.Query.parse("");return e.value.forEach((e=>{n=n.addOrFieldValue(D,e)})),`${a} ${n.text}`}return B(e)};var N=a(5),U=a.n(N),_=a(23),q=a(1);const Q=s.a.createContext(null),W=({children:e,...t})=>{const{showDanger:a,validateChange:n}=t;return Object(q.jsx)(Q.Provider,{value:{showDanger:a,validateChange:n}},e)},H=({children:e,notifications:{toasts:t},settings:{client:a}})=>Object(q.jsx)(Q.Provider,{value:{showDanger:e=>t.addDanger(e),validateChange:async(e,t)=>await a.validateValue(e,t)}},e),G=()=>{const e=Object(n.useContext)(Q);if(!e)throw new Error("FieldInputContext is missing.  Ensure your component or React root is wrapped with FieldInputProvider.");return e},Z=/,\s+/g,K=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s})=>{const[r]=m(e,t)||[],[l,o]=Object(n.useState)(null==r?void 0:r.join(", ")),{validateChange:u}=G(),d=v({onInputChange:s,field:e}),c=Object(n.useCallback)((async(t,a)=>{const n=t.replace(Z,",").split(",").filter((e=>""!==e)),s=await u(e.id,n);s.successfulValidation&&!s.valid?a({type:e.type,unsavedValue:n,isInvalid:!s.valid,error:s.errorMessage}):a({type:e.type,unsavedValue:n})}),[u,e.id,e.type]),g=Object(n.useMemo)((()=>Object(_.debounce)(c,1e3)),[c]);Object(n.useEffect)((()=>{o(null==r?void 0:r.join(", "))}),[r]);const{id:b,name:j,ariaAttributes:f}=e,{ariaLabel:p,ariaDescribedBy:h}=f;return Object(q.jsx)(i.EuiFieldText,{fullWidth:!0,"data-test-subj":`${de}-${b}`,disabled:!a,"aria-label":p,"aria-describedby":h,name:j,onChange:async e=>{const t=e.target.value;o(t),await g(t,d)},value:l})};var J=a(28),X=a(26);const Y=({onChange:e,type:t,isReadOnly:a,name:s,...i})=>{const r=Object(n.useCallback)((e=>{var t;const a=e.getDomNode();if(!a)return;const n=e.getOption(J.monaco.editor.EditorOption.lineHeight);let i=(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||6;i<6?i=6:i>30&&(i=30);const r=n*i;a.id=s,a.style.height=`${r}px`,e.layout()}),[s]),l=Object(n.useCallback)((e=>{const t=e.getModel();if(!t)return;const a=t.getValue().trim();t.setValue(a)}),[]),o=Object(n.useCallback)((e=>{r(e),e.onDidChangeModelContent((()=>{r(e)})),e.onDidBlurEditorWidget((()=>{l(e)}))}),[r,l]),u={readOnly:a,lineNumbers:"off",scrollBeyondLastLine:!1,automaticLayout:!0,folding:!1,tabSize:2,scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",wrappingIndent:"indent"};return Object(q.jsx)(X.CodeEditor,U()({onChange:e,editorDidMount:o,options:u},i,{languageId:"json"===t?J.XJsonLang.ID:X.MarkdownLang,width:"100%"}))},ee=({field:e,unsavedChange:t,type:a,isSavingEnabled:s,defaultValue:i,onInputChange:r})=>{const[l]=m(e,t),[o,u]=Object(n.useState)(l),{validateChange:d}=G(),c=v({onInputChange:r,field:e}),g=Object(n.useCallback)((async(t,a)=>{const n=Array.isArray(JSON.parse(i||"{}")),s=t||(n?"[]":"{}"),r=await d(e.id,s);r.successfulValidation&&!r.valid?a({type:e.type,unsavedValue:t,isInvalid:!r.valid,error:r.errorMessage}):a({type:e.type,unsavedValue:t})}),[d,e.id,e.type,i]),b=Object(n.useMemo)((()=>Object(_.debounce)(g,1e3)),[g]);Object(n.useEffect)((()=>{u(l)}),[l]);const{id:j,ariaAttributes:f}=e,{ariaLabel:p,ariaDescribedBy:h}=f;return Object(q.jsx)("div",null,Object(q.jsx)(Y,{"aria-describedby":h,"aria-label":p,"data-test-subj":`${de}-${j}`,isReadOnly:!s,name:`${de}-${j}-editor`,onChange:async e=>{u(e),await b(e,c)},type:a,value:o}))};var te=a(22);const ae=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=v({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:o}=e,{ariaLabel:u,ariaDescribedBy:d}=o,[c]=m(e,t);return Object(q.jsx)(i.EuiSwitch,{label:c?Object(q.jsx)(te.FormattedMessage,{id:"management.settings.onLabel",defaultMessage:"On"}):Object(q.jsx)(te.FormattedMessage,{id:"management.settings.offLabel",defaultMessage:"Off"}),"aria-label":u,"aria-describedby":d,checked:!!c,"data-test-subj":`${de}-${r}`,disabled:!a,name:l,onChange:t=>{const a=t.target.checked;s({type:e.type,unsavedValue:a})}})},ne=r.i18n.translate("management.settings.fieldInput.color.invalidMessage",{defaultMessage:"Provide a valid color value"}),se=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=v({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:o}=e,{ariaLabel:u,ariaDescribedBy:d}=o,[c]=m(e,t);return Object(q.jsx)(i.EuiColorPicker,{"aria-describedby":d,"aria-label":u,"data-test-subj":`${de}-${r}`,disabled:!a,format:"hex",isInvalid:null==t?void 0:t.isInvalid,name:l,color:c,onChange:(t,{isValid:a})=>{const n={type:e.type,unsavedValue:t};s(a?n:{...n,isInvalid:!0,error:ne})}})},ie=r.i18n.translate("management.settings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"}),re=s.a.forwardRef((({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s},r)=>{const l=Object(n.useRef)(null);Object(n.useImperativeHandle)(r,(()=>({reset:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.removeFiles()}})));const{showDanger:o}=G(),u=v({onInputChange:s,field:e}),{id:d,name:c,ariaAttributes:g}=e,{ariaLabel:b,ariaDescribedBy:j}=g,[f]=m(e,t),p={"aria-label":b,"aria-describedby":j};return f?Object(q.jsx)(i.EuiImage,U()({allowFullScreen:!0,url:f,alt:c},p)):Object(q.jsx)(i.EuiFilePicker,U()({accept:".jpg,.jpeg,.png","data-test-subj":`${de}-${d}`,disabled:!a,ref:l,fullWidth:!0,onChange:async t=>{if(null===t||!t.length)return u(),null;const a=t[0];try{let t="";a instanceof File&&(t=String(await(async e=>{const t=new FileReader;return t.readAsDataURL(e),new Promise(((e,a)=>{t.onload=()=>{e(t.result)},t.onerror=e=>{a(e)}}))})(a))),u({type:e.type,unsavedValue:t})}catch(t){o(ie),u({type:e.type,unsavedValue:"",error:ie,isInvalid:!0})}}},p))})),le=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s})=>{const[r]=m(e,t)||void 0,[l,o]=Object(n.useState)(r),{validateChange:u}=G(),d=v({onInputChange:s,field:e}),c=Object(n.useCallback)((async(t,a)=>{const n=await u(e.id,t);n.successfulValidation&&!n.valid?a({type:e.type,unsavedValue:t,isInvalid:!n.valid,error:n.errorMessage}):a({type:e.type,unsavedValue:t})}),[u,e.id,e.type]),g=Object(n.useMemo)((()=>Object(_.debounce)(c,500)),[c]);Object(n.useEffect)((()=>{o(r)}),[r]);const{id:b,name:j,ariaAttributes:f}=e,{ariaLabel:p,ariaDescribedBy:h}=f;return Object(q.jsx)(i.EuiFieldNumber,{"aria-describedby":h,"aria-label":p,"data-test-subj":`${de}-${b}`,fullWidth:!0,disabled:!a,name:j,value:l,onChange:async e=>{const t=Number(e.target.value);o(t),await g(t,d)}})},oe=({field:e,unsavedChange:t,onInputChange:a,optionLabels:s={},optionValues:r,isSavingEnabled:l})=>{if(0===r.length)throw new Error("non-empty `optionValues` are required for `SelectInput`.");const o=Object(n.useMemo)((()=>null==r?void 0:r.map((e=>({text:s.hasOwnProperty(e)?s[e]:e,value:e})))),[r,s]),u=v({onInputChange:a,field:e}),{id:d,ariaAttributes:c}=e,{ariaLabel:g,ariaDescribedBy:b}=c,[j]=m(e,t);return Object(q.jsx)(i.EuiSelect,{"aria-describedby":b,"aria-label":g,"data-test-subj":`${de}-${d}`,disabled:!l,fullWidth:!0,onChange:t=>{const a=t.target.value;u({type:e.type,unsavedValue:a})},options:o,value:j})},ue=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=v({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:o}=e,{ariaLabel:u,ariaDescribedBy:d}=o,[c]=m(e,t);return Object(q.jsx)(i.EuiFieldText,{fullWidth:!0,"data-test-subj":`${de}-${r}`,disabled:!a,"aria-label":u,"aria-describedby":d,name:l,onChange:t=>{const a=t.target.value;s({type:e.type,unsavedValue:a})},value:c})},de="management-settings-editField",ce=(e,t)=>new Error(`Unsaved change for ${e} mismatch: ${t}`),ge=s.a.forwardRef(((e,t)=>{const{field:a,unsavedChange:s,onInputChange:i,isSavingEnabled:r}=e,d=Object(n.useRef)(null);Object(n.useImperativeHandle)(t,(()=>({reset:()=>{d.current&&d.current.reset()}})));const c={isSavingEnabled:r,onInputChange:i};if("array"===a.type){if((g=s)&&void 0!==g.type&&"array"!==g.type)throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(K,U()({field:a,unsavedChange:s},c))}var g;if("boolean"===a.type){if(!(e=>!e||void 0===e.type||"boolean"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(ae,U()({field:a,unsavedChange:s},c))}if((e=>"color"===e.type)(a)){if(!(e=>!e||void 0===e.type||"color"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(se,U()({field:a,unsavedChange:s},c))}if(l(a)){if(!(e=>!e||void 0===e.type||"image"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(re,U()({field:a,unsavedChange:s},c,{ref:d}))}if(o(a)){if(!(e=>!e||void 0===e.type||"json"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(ee,U()({field:a,unsavedChange:s},c,{type:"json",defaultValue:a.savedValue||""}))}if(u(a)){if(!(e=>!e||void 0===e.type||"markdown"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(ee,U()({field:a,unsavedChange:s},c,{type:"markdown",defaultValue:a.savedValue||""}))}if((e=>"number"===e.type)(a)){if(!(e=>!e||void 0===e.type||"number"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(le,U()({field:a,unsavedChange:s},c))}if((e=>"select"===e.type)(a)){if(!(e=>!e||void 0===e.type||"select"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);const{options:{values:e,labels:t}}=a;return Object(q.jsx)(oe,U()({field:a,unsavedChange:s,optionLabels:t,optionValues:e},c))}if((e=>"string"===e.type)(a)){if(!(e=>!e||void 0===e.type||"string"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(ue,U()({field:a,unsavedChange:s},c))}if((e=>"undefined"===e.type)(a)){if(!(e=>!e||void 0===e.type||"undefined"===e.type)(s))throw ce(a.type,null==s?void 0:s.type);return Object(q.jsx)(ue,U()({field:a,unsavedChange:s},c))}throw new Error(`Unknown or incompatible field type: ${a.type}`)})),be=({field:e,unsavedChange:t})=>{const{euiTheme:{size:a,colors:n}}=Object(i.useEuiTheme)(),s=f(e,t),r=null==t?void 0:t.error;return{cssFieldFormGroup:Object(q.css)("+*{margin-top:",a.base,";}",""),cssFieldTitle:Object(q.css)("font-weight:bold;padding-left:",a.s,";margin-left:-",a.s,";",s?`box-shadow: -${a.xs} 0 ${n.warning};`:""," ",r?`box-shadow: -${a.xs} 0 ${n.danger};`:"",";",""),cssDescription:Object(q.css)("&>div{margin-bottom:",a.s,";}","")}},je=s.a.createContext(null),fe=({field:e})=>{const{links:t}=(()=>{const e=Object(n.useContext)(je);if(!e)throw new Error("FieldRowContext is missing.  Ensure your component or React root is wrapped with FieldRowProvider.");return e})(),{deprecation:a,name:s,id:l}=e;return a?Object(q.jsx)("div",{"data-test-subj":`description-block-deprecation-${l}`},Object(q.jsx)(i.EuiToolTip,{content:a.message},Object(q.jsx)(i.EuiBadge,{color:"warning",onClick:()=>{window.open(t[a.docLinksKey],"_blank")},onClickAriaLabel:r.i18n.translate("management.settings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {name}.",values:{name:s}})},"Deprecated"))):null},me=({field:e,unsavedChange:t})=>{if(e.isDefaultValue)return null;if(t&&(t.unsavedValue===e.defaultValue||void 0===t.unsavedValue))return null;const{defaultValueDisplay:a,id:n}=e;let s=Object(q.jsx)(i.EuiCode,null,a);return(o(e)||u(e))&&(s=Object(q.jsx)(i.EuiCodeBlock,{"data-test-subj":`default-display-block-${n}`,language:e.type,paddingSize:"s",overflowHeight:a.length>=500?300:void 0},a)),Object(q.jsx)(i.EuiText,{size:"xs"},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.defaultValueText",defaultMessage:"Default: {value}",values:{value:s}}))},ve=({field:e,unsavedChange:t})=>{const{cssDescription:a}=be({field:e,unsavedChange:t}),{description:n,name:r}=e;let l=n;return s.a.isValidElement(l)||(l=Object(q.jsx)("div",{dangerouslySetInnerHTML:{__html:l||""}})),l&&(l=Object(q.jsx)(i.EuiText,{size:"s","data-test-subj":`settings-description-${r}`},l)),Object(q.jsx)("div",{css:a},Object(q.jsx)(fe,{field:e}),l,Object(q.jsx)(me,{field:e,unsavedChange:t}))},pe=({field:e})=>e.isCustom?Object(q.jsx)(i.EuiIconTip,{type:"asterisk",color:"primary","aria-label":r.i18n.translate("management.settings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:Object(q.jsx)(te.FormattedMessage,{id:"management.settings.customSettingTooltip",defaultMessage:"Custom setting"})}):null,he=({field:e,unsavedChange:t})=>{if(!t||!f(e,t))return null;const{isInvalid:a}=t,n=r.i18n.translate("management.settings.field.invalidIconLabel",{defaultMessage:"Invalid"}),s=r.i18n.translate("management.settings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}),l=t.isInvalid?n:s;return Object(q.jsx)(i.EuiIconTip,{type:a?"warning":"dot",color:a?"danger":"warning","aria-label":l,content:l})},ye=({field:e,unsavedChange:t,...a})=>{const{cssFieldTitle:n}=be({field:e,unsavedChange:t});return Object(q.jsx)(i.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(q.jsx)(i.EuiFlexItem,{grow:!1,css:n},Object(q.jsx)("h3",a,e.displayName)),Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(pe,{field:e})),Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(he,{field:e,unsavedChange:t})))},xe=({onReset:e,field:t,unsavedChange:a})=>{if(function(e,t){const{defaultValue:a}=e,n=f(e,t)?null==t?void 0:t.unsavedValue:void 0!==e.savedValue&&null!==e.savedValue?e.savedValue:e.defaultValue;return b()(n,a)}(t,a)||t.isOverridden)return null;const{id:n,ariaAttributes:{ariaLabel:s}}=t;return Object(q.jsx)(i.EuiLink,{"aria-label":r.i18n.translate("management.settings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaLabel} to default",values:{ariaLabel:s}}),onClick:e,"data-test-subj":`management-settings-resetField-${n}`},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.resetToDefaultLinkText",defaultMessage:"Reset to default"}))},Oe=({field:e,onClear:t,unsavedChange:a})=>{if("image"!==e.type)return null;const{ariaAttributes:{ariaLabel:n},isOverridden:s,savedValue:l}=e;return s||!l&&!f(e,a)||l&&a&&void 0===a.unsavedValue?null:Object(q.jsx)("span",null,Object(q.jsx)(i.EuiLink,{"aria-label":r.i18n.translate("management.settings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaLabel}",values:{ariaLabel:n}}),onClick:()=>t(),"data-test-subj":`management-settings-change-image-${e.id}`},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.changeImageLinkText",defaultMessage:"Change image"})))},Ce=({field:e})=>e.isOverridden?Object(q.jsx)(i.EuiText,{size:"xs","data-test-subj":`field-row-input-overridden-message-${e.id}`},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."})):null,we=({field:e,isSavingEnabled:t,onClear:a,onReset:n,unsavedChange:s})=>{const{footerCSS:r}=(()=>{const{euiTheme:{size:e}}=Object(i.useEuiTheme)();return{footerCSS:Object(q.css)("margin-top:",e.s,";>*{margin-right:",e.s,";}","")}})();return e.isOverridden?Object(q.jsx)(Ce,{field:e}):t?Object(q.jsx)("span",{css:r,"data-test-subj":`field-row-input-footer-${e.id}`},Object(q.jsx)(xe,{field:e,onReset:n,unsavedChange:s}),Object(q.jsx)(Oe,{field:e,unsavedChange:s,onClear:a})):null},Ee=e=>{const{isSavingEnabled:t,onFieldChange:a,field:o,unsavedChange:u}=e,{id:d,groupId:c,isOverridden:g,unsavedFieldId:b}=o,{cssFieldFormGroup:j}=be({field:o,unsavedChange:u}),m=Object(n.useRef)(null),v=e=>{a(d,e)},p=Object(q.jsx)(ye,{field:o,unsavedChange:u}),h=Object(q.jsx)(ve,{field:o,unsavedChange:u}),y=null==u?void 0:u.error,x=null==u?void 0:u.isInvalid;let O=null;return u&&(O=Object(q.jsx)(i.EuiScreenReaderOnly,null,Object(q.jsx)("p",{id:`${b}`,"data-test-subj":`fieldRowScreenReaderMessage-${d}`},y||r.i18n.translate("management.settings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."})))),Object(q.jsx)(i.EuiErrorBoundary,null,Object(q.jsx)(i.EuiDescribedFormGroup,{css:j,fullWidth:!0,id:c,title:p,description:h},Object(q.jsx)(i.EuiFormRow,{fullWidth:!0,hasChildLabel:!l(o),label:d,helpText:Object(q.jsx)(we,{field:o,isSavingEnabled:t,onClear:()=>{m.current&&m.current.reset(),void 0!==o.savedValue&&null!==o.savedValue?v({type:o.type,unsavedValue:void 0}):v()},onReset:()=>{var e;null===(e=m.current)||void 0===e||e.reset();const t={type:o.type,unsavedValue:o.defaultValue};f(o,t)?v(t):v()},unsavedChange:u}),isInvalid:x,error:y},Object(q.jsx)(s.a.Fragment,null,Object(q.jsx)(ge,{isSavingEnabled:t&&!g,isInvalid:null==u?void 0:u.isInvalid,field:o,unsavedChange:u,ref:m,onInputChange:v}),O))))};var Se={name:"1jwcxx3",styles:"font-style:italic"};const Le=({fieldCount:e,displayCount:t,onClearQuery:a})=>{if(e===t)return null;const n=Se;return Object(q.jsx)(i.EuiText,{css:n,size:"s"},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.fieldCategory.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:e-t,clearSearch:Object(q.jsx)(i.EuiLink,{onClick:a},Object(q.jsx)(i.EuiText,{css:n,size:"s"},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.fieldCategory.clearSearchResultText",defaultMessage:"(clear search)"})))}}))},Me=e=>{const{category:t,fieldCount:a,onClearQuery:s,children:r}=e,{euiTheme:{size:l}}=Object(i.useEuiTheme)(),o=n.Children.count(r),u=Object(q.css)("&+&{margin-top:",l.l,";}","");return Object(q.jsx)(i.EuiSplitPanel.Outer,{hasBorder:!0,key:t,css:u},Object(q.jsx)(i.EuiSplitPanel.Inner,{color:"subdued"},Object(q.jsx)(i.EuiFlexGroup,{alignItems:"baseline"},Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(i.EuiTitle,null,Object(q.jsx)("h2",{"data-test-subj":`settingsCategory-${t}`},$(t)))),Object(q.jsx)(i.EuiFlexItem,null,Object(q.jsx)(Le,{displayCount:o,fieldCount:a,onClearQuery:s})))),Object(q.jsx)(i.EuiSplitPanel.Inner,null,r))},Fe=({categorizedFields:e,categoryCounts:t,unsavedChanges:a={},onClearQuery:n,isSavingEnabled:i,onFieldChange:r})=>Object(q.jsx)(s.a.Fragment,null,Object.entries(e).map((([e,{count:s,fields:l}])=>Object(q.jsx)(Me,{key:e,fieldCount:t[e],category:e,onClearQuery:n},l.map((e=>Object(q.jsx)(Ee,{key:e.id,unsavedChange:a[e.id],field:e,isSavingEnabled:i,onFieldChange:r}))))))),Ie=({children:e,...t})=>{const{links:a,showDanger:n,validateChange:s}=t;return Object(q.jsx)(je.Provider,{value:{links:a}},Object(q.jsx)(W,{showDanger:n,validateChange:s},e))},ke=({children:e,docLinks:t,notifications:a,settings:n})=>Object(q.jsx)(je.Provider,{value:{links:t.links.management}},Object(q.jsx)(H,{notifications:a,settings:n},e));var Ve={name:"1d3w5wq",styles:"width:100%"};const Te=()=>{const e=Object(i.useEuiTheme)(),{size:t,colors:a}=e.euiTheme;return{cssFormButton:Ve,cssFormUnsavedCount:Object(q.css)(Object(i.euiBreakpoint)(e,["xs"]),"{display:none;}",""),cssFormUnsavedCountMessage:Object(q.css)("box-shadow:-",t.xs," 0 ",a.warning,";padding-left:",t.s,";","")}},Pe=({unsavedCount:e})=>{const{cssFormUnsavedCountMessage:t}=Te();return Object(q.jsx)(i.EuiText,{size:"s",css:t},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.form.countOfSettingsChanged",defaultMessage:"{unsavedCount} unsaved {unsavedCount, plural, one {setting} other {settings} }",values:{unsavedCount:e}}))},Ae=({onSaveAll:e,onClearAllUnsaved:t,hasInvalidChanges:a,isLoading:n,unsavedChangesCount:s})=>{const{cssFormButton:l,cssFormUnsavedCount:o}=Te();return Object(q.jsx)(i.EuiBottomBar,null,Object(q.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1,gutterSize:"s"},Object(q.jsx)(i.EuiFlexItem,{grow:!1,css:o},Object(q.jsx)(Pe,{unsavedCount:s})),Object(q.jsx)(i.EuiFlexItem,null),Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(i.EuiButtonEmpty,{css:l,color:"text",size:"s",iconType:"cross",onClick:t,"data-test-subj":"settings-cancel-button"},r.i18n.translate("management.settings.form.cancelButtonLabel",{defaultMessage:"Cancel changes"}))),Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(i.EuiToolTip,{content:a&&r.i18n.translate("management.settings.form.saveButtonTooltipWithInvalidChanges",{defaultMessage:"Fix invalid settings before saving."})},Object(q.jsx)(i.EuiButton,{css:l,disabled:a,color:"success",fill:!0,size:"s",iconType:"check",onClick:e,isLoading:n,"data-test-subj":"settings-save-button"},r.i18n.translate("management.settings.form.saveButtonLabel",{defaultMessage:"Save changes"}))))))};var Re=a(11),$e=a.n(Re),De=a(14);a(0);class mount_point_portal_MountPointPortalErrorBoundary extends n.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(q.jsx)("p",null,r.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}const Be=s.a.createContext(null),ze=({children:e,...t})=>{const{saveChanges:a,showError:n,showReloadPagePrompt:s,...i}=t;return Object(q.jsx)(Be.Provider,{value:{saveChanges:a,showError:n,showReloadPagePrompt:s}},Object(q.jsx)(Ie,i,e))},Ne=({children:e,...t})=>{const{settings:a,notifications:n,docLinks:s,theme:l,i18n:o}=t,u={saveChanges:e=>{const t=Object.entries(e).map((([e,t])=>a.client.set(e,t.unsavedValue)));return Promise.all(t)},showError:e=>n.toasts.addDanger(e),showReloadPagePrompt:()=>n.toasts.add(((e,t)=>{return{title:r.i18n.translate("management.settings.form.requiresPageReloadToastDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."}),text:(a=Object(q.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(q.jsx)(i.EuiFlexItem,{grow:!1},Object(q.jsx)(i.EuiButton,{size:"s",onClick:()=>window.location.reload(),"data-test-subj":"pageReloadButton"},r.i18n.translate("management.settings.form.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"})))),n={i18n:t,theme:e},e=>($e.a.render(Object(q.jsx)(De.a,n,a),e),()=>$e.a.unmountComponentAtNode(e))),color:"success"};var a,n})(l,o))};return Object(q.jsx)(Be.Provider,{value:u},Object(q.jsx)(ke,{docLinks:s,notifications:n,settings:a},e))},Ue=e=>{const{fields:t,isSavingEnabled:a,categoryCounts:i,onClearQuery:l}=e,[o,u]=s.a.useState({}),[d,c]=s.a.useState(!1),g=Object.keys(o).length,b=Object.values(o).some((({isInvalid:e})=>e)),j=()=>{u({})},f=(e=>{const{saveChanges:t,showError:a,showReloadPagePrompt:s}=(()=>{const e=Object(n.useContext)(Be);if(!e)throw new Error("FormContext is missing. Ensure your component or React root is wrapped with FormProvider.");return e})();return async n=>{if(!Object(_.isEmpty)(n))try{await t(n),e.clearChanges(),e.fields.some((e=>n.hasOwnProperty(e.id)&&e.requiresPageReload))&&s()}catch(e){a(r.i18n.translate("management.settings.form.saveErrorMessage",{defaultMessage:"Unable to save"}))}}})({fields:t,clearChanges:j}),m=P(t);return Object(q.jsx)(n.Fragment,null,Object(q.jsx)(Fe,{categorizedFields:m,categoryCounts:i,isSavingEnabled:a,onFieldChange:(e,t)=>{if(t)u((a=>({...a,[e]:t})));else{const{[e]:t,...a}=o;u(a)}},onClearQuery:l,unsavedChanges:o}),!Object(_.isEmpty)(o)&&Object(q.jsx)(Ae,{onSaveAll:async()=>{c(!0),await f(o),c(!1)},onClearAllUnsaved:j,hasInvalidChanges:b,isLoading:d,unsavedChangesCount:g}))},_e=s.a.createContext(null),qe=({children:e,...t})=>{const{saveChanges:a,showError:n,validateChange:s,showReloadPagePrompt:i,links:r,showDanger:l,getAllowlistedSettings:o,subscribeToUpdates:u,isCustomSetting:d,isOverriddenSetting:c,addUrlToHistory:g}=t;return Object(q.jsx)(_e.Provider,{value:{getAllowlistedSettings:o,subscribeToUpdates:u,isCustomSetting:d,isOverriddenSetting:c,addUrlToHistory:g}},Object(q.jsx)(ze,{saveChanges:a,showError:n,validateChange:s,showReloadPagePrompt:i,links:r,showDanger:l},e))},Qe=({children:e,...t})=>{const{docLinks:a,notifications:n,theme:s,i18n:i,settings:r,history:l}=t,{client:o}=r,u={getAllowlistedSettings:()=>(e=>{const t={};return Object.entries(e).forEach((([e,a])=>{const n=(e=>{const{type:t,value:a,userValue:n}=e;if(t)return t;if(Array.isArray(a)||Array.isArray(n))return"array";const s=null!=a?typeof a:typeof n;if("bigint"===s)return"number";if("boolean"===s)return"boolean";if("symbol"===s||"object"===s||"function"===s)throw new Error(`incompatible SettingType: '${e.name}' type ${s} | ${JSON.stringify(e)}`);return s})(a),s=((e,t)=>{if(null===t)return null;switch(e){case"color":case"image":case"json":case"markdown":case"string":default:return t;case"number":return t?Number(t):void 0;case"boolean":return Boolean(t);case"array":return Array.isArray(t)?t:[t]}})(n,a.value),i={...a,type:n,value:s};i&&(t[e]=i)})),t})(Object.fromEntries(Object.entries(o.getAll()).filter((([e,t])=>!t.readonly&&!o.isCustom(e))))),isCustomSetting:e=>o.isCustom(e),isOverriddenSetting:e=>o.isOverridden(e),subscribeToUpdates:e=>o.getUpdate$().subscribe(e),addUrlToHistory:e=>l.push({pathname:"",search:e})};return Object(q.jsx)(_e.Provider,{value:u},Object(q.jsx)(Ne,{docLinks:a,notifications:n,theme:s,i18n:i,settings:r},e))},We=()=>{const e=Object(n.useContext)(_e);if(!e)throw new Error("SettingsApplicationContext is missing.  Ensure your component or React root is wrapped with SettingsApplicationProvider.");return e};var He=a(41),Ge=a.n(He);const Ze=e=>{const{isCustomSetting:t,isOverriddenSetting:a}=We(),s=((e,t)=>Object.entries(e).map((([e,a])=>(e=>{const{id:t,setting:a,params:n={isCustom:!1,isOverridden:!1}}=e,{category:s,deprecation:i,description:r,metric:l,name:o,optionLabels:u,options:d,order:c,readonly:g,requiresPageReload:b,type:f,userValue:m,value:v}=a,{isCustom:p,isOverridden:h}=n,y=s&&s.length?[s[0]]:["general"],x={values:d||[],labels:u||{}},O=null==v||""===v?"null":String(v);return{ariaAttributes:{ariaLabel:o||z(o)},categories:y,defaultValue:v,defaultValueDisplay:O,deprecation:i,description:r,displayName:o||t,groupId:`${o||t}-group`,id:t,isCustom:p||!1,isDefaultValue:j(a),isOverridden:h||!1,isReadOnly:!!g,metric:l,name:o||t,options:x,order:c,requiresPageReload:!!b,savedValue:m,type:f,unsavedFieldId:`${t}-unsaved`}})({id:e,setting:a,params:{isCustom:t.isCustom(e),isOverridden:t.isOverridden(e)}}))))((()=>{const{getAllowlistedSettings:e,subscribeToUpdates:t}=We(),[a,s]=Object(n.useState)(e());return Ge()((()=>{const a=t((()=>{s(e())}));return()=>{a.unsubscribe()}})),a})(),{isCustom:t,isOverridden:a});return e?i.Query.execute(e,s):s},Ke=r.i18n.translate("management.settings.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"}),Je=({categories:e,query:t,onQueryChange:a})=>{const[l,o]=Object(n.useState)(null),u=e.map((e=>({value:e,name:$(e)}))),d={incremental:!0,"data-test-subj":"settingsSearchBar",placeholder:r.i18n.translate("management.settings.searchBarPlaceholder",{defaultMessage:"Search advanced settings"})},c=[{type:"field_value_selection",field:"categories",name:r.i18n.translate("management.settings.categorySearchLabel",{defaultMessage:"Category"}),multiSelect:"or",options:u}];return Object(q.jsx)(s.a.Fragment,null,Object(q.jsx)(i.EuiSearchBar,{box:d,filters:c,onChange:({query:e,error:t})=>{t?(o((null==t?void 0:t.message)||null),a()):(o(null),a(e||i.Query.parse("")))},query:t}),l&&Object(q.jsx)(i.EuiFormErrorText,null,`${Ke}. ${l}`))},Xe=({queryText:e,onClearQuery:t})=>Object(q.jsx)(i.EuiCallOut,{color:"danger",title:Object(q.jsx)(s.a.Fragment,null,Object(q.jsx)(te.FormattedMessage,{id:"management.settings.emptyState.noSearchResultText",defaultMessage:"No settings found for {queryText} {clearSearch}",values:{clearSearch:Object(q.jsx)(i.EuiLink,{onClick:t,"data-test-subj":"settingsClearSearchLink"},Object(q.jsx)(te.FormattedMessage,{id:"management.settings.emptyState.clearNoSearchResultText",defaultMessage:"(clear search)"})),queryText:Object(q.jsx)("strong",null,e)}})),"data-test-subj":"settingsEmptyState"}),Ye=r.i18n.translate("management.settings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),et=()=>{const{addUrlToHistory:e}=We(),t=(g=window.location.href)&&new URL(g).searchParams.get("query")||"",[a,s]=Object(n.useState)(i.Query.parse(t)),r=Ze(),l=Ze(a),o=(t=i.Query.parse(""))=>{s(t);const a=function(e,t,a){const n=new URL(e);return a?n.searchParams.set(t,a):n.searchParams.delete(t),n.search}(window.location.href,"query",t.text);e(a)},u=P(r),d=Object.keys(u),c={};var g;for(const e of d)c[e]=u[e].count;return Object(q.jsx)("div",null,Object(q.jsx)(i.EuiFlexGroup,null,Object(q.jsx)(i.EuiFlexItem,null,Object(q.jsx)(i.EuiText,null,Object(q.jsx)("h1",{"data-test-subj":"managementSettingsTitle"},Ye))),Object(q.jsx)(i.EuiFlexItem,null,Object(q.jsx)(Je,{categories:d,query:a,onQueryChange:o}))),Object(q.jsx)(i.EuiSpacer,{size:"xxl"}),l.length?Object(q.jsx)(Ue,{fields:l,categoryCounts:c,isSavingEnabled:!0,onClearQuery:()=>o()}):Object(q.jsx)(Xe,{queryText:null==a?void 0:a.text,onClearQuery:()=>o()}))},tt=({docLinks:e,i18n:t,notifications:a,settings:n,theme:s,history:i})=>Object(q.jsx)(Qe,{settings:n,theme:s,i18n:t,notifications:a,docLinks:e,history:i},Object(q.jsx)(et,null))}}]);