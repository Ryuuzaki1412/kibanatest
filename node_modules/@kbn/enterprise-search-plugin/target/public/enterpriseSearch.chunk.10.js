/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[10],Array(45).concat([function(e,t,a){"use strict";a.d(t,"b",(function(){return H})),a.d(t,"a",(function(){return Q})),a.d(t,"c",(function(){return K})),a.d(t,"d",(function(){return Y}));var n=a(11),s=a(15),i=a(37),r=a(2),c=a(54),l=a(43),o=a(57),u=a(48),p=a(138),d=a(164),g=a(242),h=a(322),j=a(243),b=a(328),m=a(53),x=a(249),S=a(324),f=a(325),O=a(326),y=a(330),v=a(13);const w=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.title",{defaultMessage:"Manage engines"}),E=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.addSourceEnginesButtonLabel",{defaultMessage:"Add engines"}),C=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.addSourceEnginesModal.title",{defaultMessage:"Add engines"}),M=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.addSourceEnginesModal.description",{defaultMessage:"Add additional engines to this meta engine."}),k=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.addSourceEnginesPlaceholder",{defaultMessage:"Select engine(s)"}),T=r.i18n.translate("xpack.enterpriseSearch.appSearch.sourceEngines.removeEngineButton.label",{defaultMessage:"Remove from meta engine"});var F=a(38),_=a(320);const I=Object(i.kea)({path:["enterprise_search","app_search","source_engines_logic"],actions:()=>({addSourceEngines:e=>({sourceEngineNames:e}),fetchIndexedEngines:!0,fetchSourceEngines:!0,onSourceEngineRemove:e=>({sourceEngineNameToRemove:e}),onSourceEnginesAdd:e=>({sourceEnginesToAdd:e}),onSourceEnginesFetch:e=>({sourceEngines:e}),removeSourceEngine:e=>({sourceEngineName:e}),setIndexedEngines:e=>({indexedEngines:e}),openModal:!0,closeModal:!0,onAddEnginesSelection:e=>({selectedEngineNamesToAdd:e})}),reducers:()=>({dataLoading:[!0,{onSourceEnginesFetch:()=>!1}],modalLoading:[!1,{addSourceEngines:()=>!0,closeModal:()=>!1}],isModalOpen:[!1,{openModal:()=>!0,closeModal:()=>!1}],indexedEngines:[[],{setIndexedEngines:(e,{indexedEngines:t})=>t}],selectedEngineNamesToAdd:[[],{closeModal:()=>[],onAddEnginesSelection:(e,{selectedEngineNamesToAdd:t})=>t}],sourceEngines:[[],{onSourceEnginesAdd:(e,{sourceEnginesToAdd:t})=>[...e,...t],onSourceEnginesFetch:(e,{sourceEngines:t})=>t,onSourceEngineRemove:(e,{sourceEngineNameToRemove:t})=>e.filter((e=>e.name!==t))}]}),selectors:{indexedEngineNames:[e=>[e.indexedEngines],e=>e.map((e=>e.name))],sourceEngineNames:[e=>[e.sourceEngines],e=>e.map((e=>e.name))],selectableEngineNames:[e=>[e.indexedEngineNames,e.sourceEngineNames],(e,t)=>e.filter((e=>!t.includes(e)))]},listeners:({actions:e,values:t})=>({addSourceEngines:async({sourceEngineNames:a})=>{const{http:n}=F.a.values,{engineName:s}=Q.values;try{await n.post(`/internal/app_search/engines/${s}/source_engines/bulk_create`,{body:JSON.stringify({source_engine_slugs:a})});const i=t.indexedEngines.filter((({name:e})=>a.includes(e)));e.onSourceEnginesAdd(i),Object(l.g)((e=>r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.addSourceEnginesSuccessMessage",{defaultMessage:"{sourceEnginesCount, plural, one {# engine was} other {# engines were}} added to this meta engine",values:{sourceEnginesCount:e.length}}))(a)),Q.actions.initializeEngine()}catch(e){Object(l.e)(e)}finally{e.closeModal()}},fetchSourceEngines:()=>{const{engineName:t}=Q.values;Object(_.a)({endpoint:`/internal/app_search/engines/${t}/source_engines`,onComplete:t=>e.onSourceEnginesFetch(t)})},fetchIndexedEngines:()=>{Object(_.a)({endpoint:"/internal/app_search/engines",onComplete:t=>e.setIndexedEngines(t),query:{type:"indexed"}})},removeSourceEngine:async({sourceEngineName:t})=>{const{http:a}=F.a.values,{engineName:n}=Q.values;try{await a.delete(`/internal/app_search/engines/${n}/source_engines/${t}`),e.onSourceEngineRemove(t),Object(l.g)((e=>r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.souceEngines.removeSourceEngineSuccessMessage",{defaultMessage:"Engine '{engineName}' was removed from this meta engine",values:{engineName:e}}))(t)),Q.actions.initializeEngine()}catch(e){Object(l.e)(e)}}})});var R=a(12);const A=()=>{const{openModal:e}=Object(i.useActions)(I);return Object(R.jsx)(v.EuiButton,{fill:!0,iconType:"plusInCircle",onClick:e},E)};var L=a(42);const D=()=>{const{addSourceEngines:e,closeModal:t,onAddEnginesSelection:a}=Object(i.useActions)(I),{selectableEngineNames:n,selectedEngineNamesToAdd:s,modalLoading:r}=Object(i.useValues)(I);return Object(R.jsx)(v.EuiModal,{onClose:t},Object(R.jsx)(v.EuiModalHeader,null,Object(R.jsx)(v.EuiModalHeaderTitle,null,C)),Object(R.jsx)(v.EuiModalBody,null,Object(R.jsx)(v.EuiText,{color:"subdued"},M),Object(R.jsx)(v.EuiSpacer,null),Object(R.jsx)(v.EuiComboBox,{options:n.map((e=>({label:e}))),selectedOptions:s.map((e=>({label:e}))),onChange:e=>a(e.map((e=>e.label))),placeholder:k})),Object(R.jsx)(v.EuiModalFooter,null,Object(R.jsx)(v.EuiButtonEmpty,{onClick:t},L.e),Object(R.jsx)(v.EuiButton,{disabled:0===s.length,isLoading:r,onClick:()=>e(s),fill:!0},L.z)))};var z=a(44),P=a(79),N=a(161);const B=()=>{const{myRole:{canManageMetaEngineSourceEngines:e}}=Object(i.useValues)(o.a),{removeSourceEngine:t}=Object(i.useActions)(I),{sourceEngines:a}=Object(i.useValues)(I),n=[{...N.g,render:e=>Object(R.jsx)(z.d,{to:Object(P.a)(u.C,{engineName:e})},e)},N.d,N.e];return e&&n.push({name:N.a.name,actions:[{name:T,description:T,type:"icon",icon:"trash",color:"danger",onClick:e=>{var a;confirm((a=e.name,r.i18n.translate("xpack.enterpriseSearch.appSearch.sourceEngines.removeEngineConfirmDialogue.description",{defaultMessage:"This will remove the engine, {engineName}, from this meta engine. All existing settings will be lost. Are you sure?",values:{engineName:a}})))&&t(e.name)}}]}),Object(R.jsx)(v.EuiInMemoryTable,{items:a,columns:n,pagination:a.length>10,search:{box:{incremental:!0}}})},V=()=>{const{myRole:{canManageMetaEngineSourceEngines:e}}=Object(i.useValues)(o.a),{fetchIndexedEngines:t,fetchSourceEngines:a}=Object(i.useActions)(I),{dataLoading:s,isModalOpen:r}=Object(i.useValues)(I);return Object(n.useEffect)((()=>{t(),a()}),[]),Object(R.jsx)(m.a,{pageChrome:Y([w]),pageHeader:{pageTitle:w,rightSideItems:e?[Object(R.jsx)(A,null)]:[]},isLoading:s},Object(R.jsx)(v.EuiPanel,{hasBorder:!0},Object(R.jsx)(B,null),r&&Object(R.jsx)(D,null)))};var U=a(331);const H=()=>{const{myRole:{canViewEngineAnalytics:e,canViewEngineDocuments:t,canViewEngineSchema:a,canViewEngineCrawler:v,canViewMetaEngineSourceEngines:w,canManageEngineRelevanceTuning:E,canManageEngineSynonyms:C,canManageEngineCurations:M,canManageEngineResultSettings:k,canManageEngineSearchUi:T,canViewEngineApiLogs:F}}=Object(i.useValues)(o.a),{engineName:_}=Object(s.useParams)(),{engineName:I,dataLoading:A,engineNotFound:L,isMetaEngine:D}=Object(i.useValues)(Q),{setEngineName:z,initializeEngine:P,pollEmptyEngine:N,stopPolling:B,clearEngine:H}=Object(i.useActions)(Q);return Object(n.useEffect)((()=>(z(_),P(),N(),()=>{B(),H()})),[_]),L?(Object(l.j)(r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.notFound",{defaultMessage:"No engine with name '{engineName}' could be found.",values:{engineName:I}})),Object(R.jsx)(s.Redirect,{to:u.j})):I!==_||A?Object(R.jsx)(m.a,{isLoading:!0}):Object(R.jsx)(c.c,null,Object(R.jsx)(c.a,{exact:!0,path:u.C},Object(R.jsx)(b.a,null)),e&&Object(R.jsx)(c.a,{path:u.k},Object(R.jsx)(p.e,null)),t&&Object(R.jsx)(c.a,{path:u.B},Object(R.jsx)(j.b,null)),t&&Object(R.jsx)(c.a,{path:u.A},Object(R.jsx)(j.c,null)),a&&Object(R.jsx)(c.a,{path:u.G},Object(R.jsx)(O.b,null)),w&&D&&Object(R.jsx)(c.a,{path:u.P},Object(R.jsx)(V,null)),v&&!D&&Object(R.jsx)(c.a,{path:u.u},Object(R.jsx)(g.b,null)),E&&Object(R.jsx)(c.a,{path:u.E},Object(R.jsx)(S.b,null)),C&&Object(R.jsx)(c.a,{path:u.I},Object(R.jsx)(U.b,null)),M&&Object(R.jsx)(c.a,{path:u.x},Object(R.jsx)(h.c,null)),k&&Object(R.jsx)(c.a,{path:u.F},Object(R.jsx)(f.b,null)),T&&Object(R.jsx)(c.a,{path:u.H},Object(R.jsx)(y.b,null)),F&&Object(R.jsx)(c.a,{path:u.s},Object(R.jsx)(d.c,null)),Object(R.jsx)(c.a,null,Object(R.jsx)(x.a,{pageChrome:Y()})))};var q=a(76);const G=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.pollingErrorMessage",{defaultMessage:"Could not fetch engine data"}),$=r.i18n.translate("xpack.enterpriseSearch.appSearch.engine.pollingErrorDescription",{defaultMessage:"Please check your connection or manually reload the page."});var W=a(319);const Q=Object(i.kea)({path:["enterprise_search","app_search","engine_logic"],actions:{setEngineData:e=>({engine:e}),setEngineName:e=>({engineName:e}),setEngineNotFound:e=>({notFound:e}),clearEngine:!0,initializeEngine:!0,pollEmptyEngine:!0,onPollStart:e=>({intervalId:e}),stopPolling:!0,onPollStop:!0},reducers:{dataLoading:[!0,{setEngineData:()=>!1,clearEngine:()=>!0}],engine:[{},{setEngineData:(e,{engine:t})=>t,clearEngine:()=>({})}],engineName:["",{setEngineName:(e,{engineName:t})=>t,clearEngine:()=>""}],engineNotFound:[!1,{setEngineNotFound:(e,{notFound:t})=>t,clearEngine:()=>!1}],intervalId:[null,{onPollStart:(e,{intervalId:t})=>t,onPollStop:()=>null}]},selectors:({selectors:e})=>({hasNoDocuments:[()=>[e.engine],e=>!e.document_count],hasEmptySchema:[()=>[e.engine],e=>0===Object.keys(e.schema||{}).length],isMetaEngine:[()=>[e.engine],e=>(null==e?void 0:e.type)===W.a.meta],isElasticsearchEngine:[()=>[e.engine],e=>(null==e?void 0:e.type)===W.a.elasticsearch],isSampleEngine:[()=>[e.engine],e=>!(null==e||!e.sample)],hasSchemaErrors:[()=>[e.engine],({activeReindexJob:e})=>(null==e?void 0:e.numDocumentsWithErrors)>0],hasSchemaConflicts:[()=>[e.engine],e=>!!(null!=e&&e.schemaConflicts&&Object.keys(e.schemaConflicts).length>0)],hasUnconfirmedSchemaFields:[()=>[e.engine],e=>{var t;return(null==e||null===(t=e.unconfirmedFields)||void 0===t?void 0:t.length)>0}],searchKey:[()=>[e.engine],e=>{const t=(e.apiTokens||[]).find((e=>e.type===q.b.Search));return(null==t?void 0:t.key)||""}],hasIncompleteFields:[()=>[e.engine],({incompleteFields:e})=>(null==e?void 0:e.length)>0]}),listeners:({actions:e,values:t})=>({initializeEngine:async(a,n)=>{n();const{engineName:s}=t,{http:i}=F.a.values;try{const t=await i.get(`/internal/app_search/engines/${s}`);e.setEngineData(t)}catch(t){var r,c;(null==t||null===(r=t.response)||void 0===r?void 0:r.status)>=400&&(null==t||null===(c=t.response)||void 0===c?void 0:c.status)<500?e.setEngineNotFound(!0):Object(l.f)(G,{text:$,toastLifeTimeMs:3750})}},pollEmptyEngine:()=>{if(t.intervalId)return;const a=window.setInterval((()=>{t.hasNoDocuments?e.initializeEngine():e.stopPolling()}),5e3);e.onPollStart(a)},stopPolling:()=>{null!==t.intervalId&&(clearInterval(t.intervalId),e.onPollStop())}}),events:({actions:e})=>({beforeUnmount:()=>{e.stopPolling()}})});var J=a(84);const K=(e,t={})=>{const{engineName:a}=Q.values;return Object(P.a)(e,{engineName:a,...t})},Y=(e=[])=>{const{engineName:t}=Q.values;return[J.a,t,...e]}},,,function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return p})),a.d(t,"J",(function(){return d})),a.d(t,"K",(function(){return g})),a.d(t,"L",(function(){return h})),a.d(t,"M",(function(){return j})),a.d(t,"N",(function(){return b})),a.d(t,"Q",(function(){return m})),a.d(t,"R",(function(){return x})),a.d(t,"S",(function(){return S})),a.d(t,"U",(function(){return f})),a.d(t,"V",(function(){return O})),a.d(t,"Y",(function(){return y})),a.d(t,"ab",(function(){return v})),a.d(t,"bb",(function(){return w})),a.d(t,"T",(function(){return E})),a.d(t,"X",(function(){return C})),a.d(t,"W",(function(){return M})),a.d(t,"f",(function(){return k})),a.d(t,"Z",(function(){return T})),a.d(t,"j",(function(){return F})),a.d(t,"v",(function(){return _})),a.d(t,"C",(function(){return I})),a.d(t,"k",(function(){return R})),a.d(t,"q",(function(){return A})),a.d(t,"o",(function(){return L})),a.d(t,"p",(function(){return D})),a.d(t,"r",(function(){return z})),a.d(t,"n",(function(){return P})),a.d(t,"l",(function(){return N})),a.d(t,"m",(function(){return B})),a.d(t,"A",(function(){return V})),a.d(t,"B",(function(){return U})),a.d(t,"G",(function(){return H})),a.d(t,"D",(function(){return q})),a.d(t,"u",(function(){return G})),a.d(t,"t",(function(){return $})),a.d(t,"O",(function(){return W})),a.d(t,"P",(function(){return Q})),a.d(t,"E",(function(){return J})),a.d(t,"I",(function(){return K})),a.d(t,"F",(function(){return Y})),a.d(t,"x",(function(){return Z})),a.d(t,"w",(function(){return X})),a.d(t,"y",(function(){return ee})),a.d(t,"z",(function(){return te})),a.d(t,"H",(function(){return ae})),a.d(t,"s",(function(){return ne}));var n=a(5);const s=n.a.appSearchApis,i=n.a.appSearchApiClients,r=n.a.appSearchApiKeys,c=n.a.appSearchAuthentication,l=n.a.appSearchCrawlRules,o=n.a.appSearchCurations,u=n.a.appSearchGuide,p=n.a.appSearchDuplicateDocuments,d=n.a.appSearchEntryPoints,g=n.a.appSearchIndexingDocs,h=n.a.appSearchIndexingDocsSchema,j=n.a.appSearchLogSettings,b=n.a.appSearchMetaEngines,m=n.a.appSearchPrecision,x=n.a.appSearchRelevance,S=n.a.appSearchResultSettings,f=n.a.appSearchSearchUI,O=n.a.appSearchSecurity,y=n.a.appSearchSynonyms,v=n.a.appSearchWebCrawler,w=n.a.appSearchWebCrawlerEventLogs,E="/",C="/setup_guide",M="/settings",k="/credentials",T="/users_and_roles",F="/engines",_=`${F}/new`,I=`${F}/:engineName`,R=`${I}/analytics`,A=`${R}/top_queries`,L=`${R}/top_queries_no_clicks`,D=`${R}/top_queries_no_results`,z=`${R}/top_queries_with_clicks`,P=`${R}/recent_queries`,N=`${R}/query_detail`,B=`${N}/:query`,V=`${I}/documents`,U=`${V}/:documentId`,H=`${I}/schema`,q=`${H}/reindex_job/:reindexJobId`,G=`${I}/crawler`,$=`${G}/domains/:domainId`,W=`${F}/new_meta_engine`,Q=`${I}/engines`,J=`${I}/relevance_tuning`,K=`${I}/synonyms`,Y=`${I}/result_settings`,Z=`${I}/curations`,X=`${Z}/new`,ee=`${Z}/:curationId`,te=`${Z}/suggestions/:query`,ae=`${I}/search_ui`,ne=`${I}/api_logs`},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return D})),a.d(t,"b",(function(){return q}));var n=a(47),s=a.n(n),i=a(11),r=a.n(i),c=a(1),l=a(60),o=a(58),u=a(52),p=a(37),d=a(63),g=a(57),h=a(48),j=a(244),b=a(15),m=a(13),x=a(2),S=a(138),f=a(164),O=a(242),y=a(322),v=a(243),w=a(328),E=a(84),C=a(324),M=a(325),k=a(326),T=a(330),F=a(331),_=a(45),I=(a(919),a(12));const R=()=>{const e=!!Object(b.useRouteMatch)(h.C),{myRole:{canViewEngineAnalytics:t,canViewEngineDocuments:a,canViewEngineSchema:n,canViewEngineCrawler:s,canViewMetaEngineSourceEngines:i,canManageEngineSynonyms:c,canManageEngineCurations:l,canManageEngineRelevanceTuning:u,canManageEngineResultSettings:d,canManageEngineSearchUi:j,canViewEngineApiLogs:R}}=Object(p.useValues)(g.a),{engineName:A,dataLoading:L,isSampleEngine:D,isMetaEngine:z,isElasticsearchEngine:P,hasSchemaErrors:N,hasSchemaConflicts:B,hasUnconfirmedSchemaFields:V,engine:U,hasIncompleteFields:H}=Object(p.useValues)(_.a);if(!e)return;if(L)return;if(!A)return;const q=[{id:"engineName",name:A,renderItem:()=>Object(I.jsx)(m.EuiText,{color:"subdued",size:"s",className:"appSearchNavEngineLabel"},Object(I.jsx)("div",{className:"eui-textTruncate"},A.toUpperCase()),D&&Object(I.jsx)(m.EuiBadge,null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.sampleEngineBadge",{defaultMessage:"SAMPLE ENGINE"})),z&&Object(I.jsx)(m.EuiBadge,null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.metaEngineBadge",{defaultMessage:"META ENGINE"})),P&&Object(I.jsx)(m.EuiBadge,null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.elasticsearchEngineBadge",{defaultMessage:"ELASTICSEARCH INDEX"}))),"data-test-subj":"EngineLabel"},{id:"overview",name:w.c,...Object(o.b)({to:Object(_.c)(h.C)}),"data-test-subj":"EngineOverviewLink"}];if(t&&q.push({id:"analytics",name:S.a,...Object(o.b)({to:Object(_.c)(h.k),shouldShowActiveForSubroutes:!0}),"data-test-subj":"EngineAnalyticsLink"}),a&&q.push({id:"documents",name:v.a,...Object(o.b)({to:Object(_.c)(h.A),shouldShowActiveForSubroutes:!0}),"data-test-subj":"EngineDocumentsLink"}),n&&q.push({id:"schema",name:k.a,...Object(o.b)({to:Object(_.c)(h.G),shouldShowActiveForSubroutes:!0}),"data-test-subj":"EngineSchemaLink",icon:Object(I.jsx)(r.a.Fragment,null,N&&Object(I.jsx)(m.EuiIcon,{type:"warning",color:"danger",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.errors",{defaultMessage:"Schema change errors"}),"data-test-subj":"EngineNavSchemaErrors"}),V&&Object(I.jsx)(m.EuiIcon,{type:"iInCircle",color:"primary",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unconfirmedFields",{defaultMessage:"New unconfirmed fields"}),"data-test-subj":"EngineNavSchemaUnconfirmedFields"}),B&&Object(I.jsx)(m.EuiIcon,{type:"warning",color:"warning",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.conflicts",{defaultMessage:"Schema conflicts"}),"data-test-subj":"EngineNavSchemaConflicts"}),H&&Object(I.jsx)(m.EuiIcon,{type:"warning",color:"warning",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.hasIncompleteFields",{defaultMessage:"Precision tuning is not enabled on all fields"}),"data-test-subj":"EngineNavPrecisionTuningWarning"}))}),s&&!z&&!P&&q.push({id:"crawler",name:O.a,...Object(o.b)({to:Object(_.c)(h.u),shouldShowActiveForSubroutes:!0}),"data-test-subj":"EngineCrawlerLink"}),i&&z&&q.push({id:"sourceEngines",name:E.a,...Object(o.b)({to:Object(_.c)(h.P)}),"data-test-subj":"MetaEngineEnginesLink"}),u){const{invalidBoosts:e,unsearchedUnconfirmedFields:t}=U;q.push({id:"relevanceTuning",name:C.a,...Object(o.b)({to:Object(_.c)(h.E)}),"data-test-subj":"EngineRelevanceTuningLink",icon:Object(I.jsx)(r.a.Fragment,null,e&&Object(I.jsx)(m.EuiIcon,{type:"warning",color:"warning",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.invalidBoosts",{defaultMessage:"Invalid boosts"}),"data-test-subj":"EngineNavRelevanceTuningInvalidBoosts"}),t&&Object(I.jsx)(m.EuiIcon,{type:"warning",color:"warning",className:"appSearchNavIcon",title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.unsearchedFields",{defaultMessage:"Unsearched fields"}),"data-test-subj":"EngineNavRelevanceTuningUnsearchedFields"}))})}return c&&q.push({id:"synonyms",name:F.a,...Object(o.b)({to:Object(_.c)(h.I)}),"data-test-subj":"EngineSynonymsLink"}),l&&q.push({id:"curations",name:y.a,...Object(o.b)({to:Object(_.c)(h.x),shouldShowActiveForSubroutes:!0}),"data-test-subj":"EngineCurationsLink"}),d&&q.push({id:"resultSettings",name:M.a,...Object(o.b)({to:Object(_.c)(h.F)}),"data-test-subj":"EngineResultSettingsLink"}),j&&q.push({id:"searchUI",name:T.a,...Object(o.b)({to:Object(_.c)(h.H)}),"data-test-subj":"EngineSearchUILink"}),R&&q.push({id:"apiLogs",name:f.a,...Object(o.b)({to:Object(_.c)(h.s)}),"data-test-subj":"EngineAPILogsLink"}),q};var A=a(332);const L=()=>{const{myRole:{canViewSettings:e,canViewAccountCredentials:t,canViewRoleMappings:a}}=Object(p.useValues)(g.a),n=[{id:"engines",name:E.a,...Object(o.b)({to:h.j,shouldShowActiveForSubroutes:!0,items:R()})}];return e&&n.push({id:"settings",name:A.a,...Object(o.b)({to:h.W})}),t&&n.push({id:"credentials",name:j.a,...Object(o.b)({to:h.f})}),a&&n.push({id:"usersRoles",name:d.S,...Object(o.b)({to:h.Z})}),[{id:"",name:"",items:n}]},D=({children:e,pageChrome:t,pageViewTelemetry:a,...n})=>Object(I.jsx)(o.a,s()({},n,{solutionNav:{name:c.d.NAME,items:L()},setPageChrome:t&&Object(I.jsx)(l.c,{trail:t}),useEndpointHeaderActions:!1}),a&&Object(I.jsx)(u.a,{action:"viewed",metric:a}),e);var z=a(141);const P=x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.queryTesterTitle",{defaultMessage:"Query tester"});var N=a(102),B=a(334);const V=()=>{const e=Object(B.a)({id:"query-tester"}),{searchQuery:t,searchResults:a,searchDataLoading:n}=Object(p.useValues)(e),{search:s}=Object(p.useActions)(e),{engine:i}=Object(p.useValues)(_.a);return Object(I.jsx)(r.a.Fragment,null,Object(I.jsx)(m.EuiFieldSearch,{value:t,onChange:e=>s(e.target.value),isLoading:n,placeholder:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.queryTester.searchPlaceholder",{defaultMessage:"Search engine documents"}),fullWidth:!0,autoFocus:!0}),Object(I.jsx)(m.EuiSpacer,null),a.length>0?a.map((e=>{const t=e.id.raw;return Object(I.jsx)(r.a.Fragment,{key:t},Object(I.jsx)(N.a,{isMetaEngine:!1,key:t,result:e,schemaForTypeHighlights:i.schema,showScore:!0}),Object(I.jsx)(m.EuiSpacer,{size:"m"}))})):Object(I.jsx)(m.EuiEmptyPrompt,{body:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addResult.searchEmptyDescription",{defaultMessage:"No matching content found."})}))},U=({onClose:e})=>Object(I.jsx)(m.EuiFlyout,{onClose:e,"aria-labelledby":"queryTesterFlyoutTitle",ownFocus:!0},Object(I.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(I.jsx)(m.EuiTitle,{size:"m"},Object(I.jsx)("h2",{id:"queryTesterFlyoutTitle"},P))),Object(I.jsx)(m.EuiFlyoutBody,null,Object(I.jsx)(V,null))),H=()=>{const[e,t]=Object(i.useState)(!1);return Object(I.jsx)(r.a.Fragment,null,Object(I.jsx)(m.EuiButtonEmpty,{iconType:"beaker",size:"s",onClick:()=>t(!e)},P),e&&Object(I.jsx)(U,{onClose:()=>t(!1)}))},q=()=>{const{engineName:e}=Object(p.useValues)(_.a);return Object(I.jsx)(z.a,null,Boolean(e)&&Object(I.jsx)(H,null))}},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(37),s=a(55);a(158);const i=Object(n.kea)({path:["enterprise_search","app_search","app_logic"],actions:{setOnboardingComplete:()=>!0},reducers:({props:e})=>({account:[e.appSearch,{setOnboardingComplete:e=>({...e,onboardingComplete:!0})}],configuredLimits:[e.configuredLimits.appSearch,{}]}),selectors:{myRole:[e=>[e.account,s.a.selectors.hasPlatinumLicense],({role:e})=>e?(e=>{const t={can:(t,a)=>{var n,s;return(null==e||null===(n=e.ability)||void 0===n||null===(s=n.manage)||void 0===s?void 0:s.includes(a))||Array.isArray(e.ability[t])&&e.ability[t].includes(a)}},a={id:e.id,roleType:e.roleType,availableRoleTypes:e.ability.availableRoleTypes,credentialTypes:e.ability.credentialTypes},n={canAccessAllEngines:e.ability.accessAllEngines,canViewMetaEngines:t.can("view","account_meta_engines"),canViewAccountCredentials:t.can("view","account_credentials"),canViewEngineAnalytics:t.can("view","engine_analytics"),canViewEngineApiLogs:t.can("view","engine_api_logs"),canViewEngineCrawler:t.can("view","engine_crawler"),canViewEngineCredentials:t.can("view","engine_credentials"),canViewEngineDocuments:t.can("view","engine_documents"),canViewEngineSchema:t.can("view","engine_schema"),canViewEngineQueryTester:t.can("view","engine_query_tester"),canViewMetaEngineSourceEngines:t.can("view","meta_engine_source_engines"),canViewSettings:t.can("view","account_settings"),canViewRoleMappings:t.can("view","role_mappings"),canManageEngines:t.can("manage","account_engines"),canManageMetaEngines:t.can("manage","account_engines"),canManageLogSettings:t.can("manage","account_log_settings"),canManageSettings:t.can("manage","account_settings"),canManageEngineCrawler:t.can("manage","engine_crawler"),canManageEngineDocuments:t.can("manage","engine_documents"),canManageEngineSynonyms:t.can("manage","engine_synonyms"),canManageEngineCredentials:t.can("manage","engine_credentials"),canManageEngineCurations:t.can("manage","engine_curations"),canManageEngineRelevanceTuning:t.can("manage","engine_relevance_tuning"),canManageEngineResultSettings:t.can("manage","engine_result_settings"),canManageEngineSchema:t.can("manage","engine_schema"),canManageEngineSearchUi:t.can("manage","engine_reference_ui"),canManageMetaEngineSourceEngines:t.can("manage","meta_engine_source_engines")};return Object.assign(t,a,n)})(e):{}]}})},,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"m",(function(){return c})),a.d(t,"k",(function(){return l})),a.d(t,"n",(function(){return o})),a.d(t,"o",(function(){return u})),a.d(t,"l",(function(){return p})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return g})),a.d(t,"h",(function(){return h})),a.d(t,"j",(function(){return j})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return x})),a.d(t,"p",(function(){return S})),a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return O}));var n=a(18),s=a.n(n),i=a(2);const r=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.title",{defaultMessage:"Analytics"}),c=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalDocuments",{defaultMessage:"Total documents"}),l=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalApiOperations",{defaultMessage:"Total API operations"}),o=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalQueries",{defaultMessage:"Total queries"}),u=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalQueriesNoResults",{defaultMessage:"Total queries with no results"}),p=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.totalClicks",{defaultMessage:"Total clicks"}),d=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.topQueriesTitle",{defaultMessage:"Top queries"}),g=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.topQueriesNoResultsTitle",{defaultMessage:"Top queries with no results"}),h=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.topQueriesNoClicksTitle",{defaultMessage:"Top queries with no clicks"}),j=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.topQueriesWithClicksTitle",{defaultMessage:"Top queries with clicks"}),b=i.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.recentQueriesTitle",{defaultMessage:"Recent queries"}),m="YYYY-MM-DD",x="MMMM D, YYYY",S="M/D",f=s()().subtract(6,"days").format(m),O=s()().format(m)},function(e,t,a){"use strict";var n=a(86);a.d(t,"a",(function(){return n.a}))},,,,,,,,function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"n",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"j",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"i",(function(){return d})),a.d(t,"h",(function(){return g})),a.d(t,"o",(function(){return h})),a.d(t,"k",(function(){return j})),a.d(t,"l",(function(){return b})),a.d(t,"m",(function(){return m})),a.d(t,"g",(function(){return x})),a.d(t,"f",(function(){return S}));var n=a(2),s=a(48);const i=n.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.title",{defaultMessage:"Credentials"});let r;!function(e){e.Admin="admin",e.Private="private",e.Search="search"}(r||(r={}));const c=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.created",{defaultMessage:"API key '{name}' was created",values:{name:e}}),l=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.update",{defaultMessage:"API key '{name}' was updated",values:{name:e}}),o=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.deleted",{defaultMessage:"API key '{name}' was deleted",values:{name:e}}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.search",{defaultMessage:"search"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.all",{defaultMessage:"all"}),d=n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.readwrite",{defaultMessage:"read/write"}),g=n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.readonly",{defaultMessage:"read-only"}),h=n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.permissions.display.writeonly",{defaultMessage:"write-only"}),j={[r.Search]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.search.description",{defaultMessage:"Public Search Keys are used for search endpoints only."}),[r.Private]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.private.description",{defaultMessage:"Private API Keys are used for read and/or write access on one or more Engines."}),[r.Admin]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.admin.description",{defaultMessage:"Private Admin Keys are used to interact with the Credentials API."})},b={[r.Search]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.search.name",{defaultMessage:"Public Search Key"}),[r.Private]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.private.name",{defaultMessage:"Private API Key"}),[r.Admin]:n.i18n.translate("xpack.enterpriseSearch.appSearch.tokens.admin.name",{defaultMessage:"Private Admin Key"})},m=[{value:r.Search,text:b[r.Search]},{value:r.Private,text:b[r.Private]},{value:r.Admin,text:b[r.Admin]}],x="credentialsFlyoutTitle",S=s.d},,,function(e,t,a){"use strict";var n=a(50);a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return n.b}))},,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return ee})),a.d(t,"a",(function(){return u}));var n=a(37),s=a(42),i=a(43),r=a(38),c=a(61),l=a(319),o=a(2);const u=o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.title",{defaultMessage:"Engines"}),p=o.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.title",{defaultMessage:"Engines overview"}),d=o.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngines.title",{defaultMessage:"Meta Engines"}),g=o.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.metaEnginesTable.sourceEngines.title",{defaultMessage:"Source Engines"}),h=o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.createEngineButtonLabel",{defaultMessage:"Create engine"}),j=o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.createMetaEngineButtonLabel",{defaultMessage:"Create meta engine"}),b=Object(n.kea)({path:["enterprise_search","app_search","engines_logic"],actions:{deleteEngine:e=>({engine:e}),onDeleteEngineSuccess:e=>({engine:e}),onEnginesLoad:({results:e,meta:t})=>({results:e,meta:t}),onMetaEnginesLoad:({results:e,meta:t})=>({results:e,meta:t}),onEnginesPagination:e=>({page:e}),onMetaEnginesPagination:e=>({page:e}),loadEngines:!0,loadMetaEngines:!0},reducers:{engines:[[],{onEnginesLoad:(e,{results:t})=>t}],enginesMeta:[s.k,{onEnginesLoad:(e,{meta:t})=>t,onEnginesPagination:(e,{page:t})=>Object(c.c)(e,t)}],enginesLoading:[!0,{loadEngines:()=>!0,onEnginesLoad:()=>!1}],metaEngines:[[],{onMetaEnginesLoad:(e,{results:t})=>t}],metaEnginesMeta:[s.k,{onMetaEnginesLoad:(e,{meta:t})=>t,onMetaEnginesPagination:(e,{page:t})=>Object(c.c)(e,t)}],metaEnginesLoading:[!0,{loadMetaEngines:()=>!0,onMetaEnginesLoad:()=>!1}]},selectors:{dataLoading:[e=>[e.enginesLoading,e.engines],(e,t)=>e&&!t.length]},listeners:({actions:e,values:t})=>({deleteEngine:async({engine:t})=>{const{http:a}=r.a.values;let n;try{n=await a.delete(`/internal/app_search/engines/${t.name}`)}catch(e){Object(i.e)(e)}n&&e.onDeleteEngineSuccess(t)},loadEngines:async()=>{const{http:a}=r.a.values,{enginesMeta:n}=t;try{const t=await a.get("/internal/app_search/engines",{query:{type:"indexed","page[current]":n.page.current,"page[size]":n.page.size}});e.onEnginesLoad(t)}catch(e){Object(i.e)(e)}},loadMetaEngines:async()=>{const{http:a}=r.a.values,{metaEnginesMeta:n}=t;try{const t=await a.get("/internal/app_search/engines",{query:{type:"meta","page[current]":n.page.current,"page[size]":n.page.size}});e.onMetaEnginesLoad(t)}catch(e){Object(i.e)(e)}},onDeleteEngineSuccess:async({engine:t})=>{var a;Object(i.g)((a=t.name,o.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.action.delete.successMessage",{defaultMessage:"Engine '{engineName}' was deleted",values:{engineName:a}}))),[l.a.default,l.a.indexed,l.a.elasticsearch].includes(t.type)?e.loadEngines():t.type===l.a.meta&&e.loadMetaEngines()}})});var m=a(11),x=a.n(m),S=a(13),f=a(44),O=a(57),y=a(247),v=a(48),w=a(68),E=a(53),C=a(52);const M=o.i18n.translate("xpack.enterpriseSearch.appSearch.sampleEngineCreationCta.title",{defaultMessage:"Just kicking the tires?"}),k=o.i18n.translate("xpack.enterpriseSearch.appSearch.sampleEngineCreationCta.description",{defaultMessage:"Test an engine with sample data."}),T=o.i18n.translate("xpack.enterpriseSearch.appSearch.sampleEngineCreationCta.buttonLabel",{defaultMessage:"Try a sample engine"});var F=a(15),_=a(41),I=a(137);const R=Object(n.kea)({path:["enterprise_search","app_search","sample_engine_cta_logic"],actions:{createSampleEngine:!0,onSampleEngineCreationSuccess:!0,onSampleEngineCreationFailure:!0},reducers:{isLoading:[!1,{createSampleEngine:()=>!0,onSampleEngineCreationSuccess:()=>!1,onSampleEngineCreationFailure:()=>!1}]},listeners:({actions:e})=>({createSampleEngine:async()=>{const{http:t}=r.a.values,a=JSON.stringify({seed_sample_engine:!0});try{await t.post("/internal/app_search/onboarding_complete",{body:a}),e.onSampleEngineCreationSuccess()}catch(t){e.onSampleEngineCreationFailure(),Object(i.e)(t)}},onSampleEngineCreationSuccess:()=>{const{navigateToUrl:e}=_.a.values,t=Object(F.generatePath)(v.C,{engineName:"national-parks-demo"});Object(i.g)(Object(I.g)("national-parks-demo")),e(t)}})});var A=a(12);const L=()=>{const{isLoading:e}=Object(n.useValues)(R),{createSampleEngine:t}=Object(n.useActions)(R);return Object(A.jsx)(S.EuiPanel,{hasBorder:!0},Object(A.jsx)(S.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(A.jsx)(S.EuiFlexItem,{className:"eui-textLeft eui-textNoWrap"},Object(A.jsx)(S.EuiTitle,{size:"xs"},Object(A.jsx)("h3",null,M)),Object(A.jsx)(S.EuiText,{size:"s"},Object(A.jsx)("p",null,k))),Object(A.jsx)(S.EuiFlexItem,{grow:!1},Object(A.jsx)(S.EuiButton,{onClick:t,isLoading:e},T))))},D=()=>{const{myRole:{canManageEngines:e}}=Object(n.useValues)(O.a),{sendAppSearchTelemetry:t}=Object(n.useActions)(C.d);return e?Object(A.jsx)(S.EuiEmptyPrompt,{"data-test-subj":"AdminEmptyEnginesPrompt",iconType:y.b,title:Object(A.jsx)("h2",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.emptyState.title",{defaultMessage:"Create your first engine"})),titleSize:"l",body:Object(A.jsx)("p",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.emptyState.description1",{defaultMessage:"An App Search engine stores the documents for your search experience."})),actions:Object(A.jsx)(x.a.Fragment,null,Object(A.jsx)(f.b,{"data-test-subj":"EmptyStateCreateFirstEngineCta",fill:!0,to:v.v,onClick:()=>t({action:"clicked",metric:"create_first_engine_button"})},o.i18n.translate("xpack.enterpriseSearch.appSearch.emptyState.createFirstEngineCta",{defaultMessage:"Create an engine"})),Object(A.jsx)(S.EuiSpacer,{size:"xxl"}),Object(A.jsx)(L,null))}):Object(A.jsx)(S.EuiEmptyPrompt,{"data-test-subj":"NonAdminEmptyEnginesPrompt",iconType:y.b,title:Object(A.jsx)("h2",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.emptyState.nonAdmin.title",{defaultMessage:"No engines available"})),body:Object(A.jsx)("p",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.emptyState.nonAdmin.description",{defaultMessage:"Contact your App Search administrator to either create or grant you access to an engine."}))})},z=()=>Object(A.jsx)(S.EuiEmptyPrompt,{title:Object(A.jsx)("h3",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.metaEngines.emptyPromptTitle",{defaultMessage:"Create your first meta engine"})),titleSize:"s",body:Object(A.jsx)("p",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.metaEngines.emptyPromptDescription",{defaultMessage:"Meta engines allow you to combine multiple engines into one searchable engine."})),actions:Object(A.jsx)(S.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:v.N},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.metaEngines.emptyPromptButtonLabel",{defaultMessage:"Learn more about meta engines"}))});var P=a(1),N=a(170);const B=Object(n.kea)({path:["enterprise_search","app_search","engines_overview","audit_logs_modal"],actions:()=>({hideModal:!0,showModal:e=>({engineName:e})}),reducers:()=>({isModalVisible:[!1,{showModal:()=>!0,hideModal:()=>!1}],engineName:["",{showModal:(e,{engineName:t})=>t,hideModal:()=>""}]})});a(889);const V=()=>{const e=B(),{isModalVisible:t,engineName:a}=Object(n.useValues)(e),{hideModal:s}=Object(n.useActions)(e),i=["event.kind: event","event.action: audit",`enterprisesearch.data_repository.name: ${a}`].join(" and ");return t?Object(A.jsx)(S.EuiModal,{onClose:s,className:"auditLogsModal",maxWidth:!1},Object(A.jsx)(S.EuiModalHeader,null,Object(A.jsx)(S.EuiModalHeaderTitle,null,a)),Object(A.jsx)(S.EuiModalBody,null,Object(A.jsx)(S.EuiText,{size:"s"},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.eventTip",{defaultMessage:"Showing events from last 24 hours"})),Object(A.jsx)(S.EuiSpacer,{size:"m"}),Object(A.jsx)(N.a,{logView:{type:"log-view-reference",logViewId:P.l},columns:[{type:"timestamp"},{type:"field",field:"user.id",header:o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.headers.updatedBy",{defaultMessage:"Updated By"})},{type:"field",field:"event.category",header:o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.headers.eventCategory",{defaultMessage:"Event Category"})},{type:"field",field:"event.type",header:o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.headers.eventType",{defaultMessage:"Event Type"})},{type:"field",field:"event.outcome",header:o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.headers.outcome",{defaultMessage:"Outcome"})},{type:"field",field:"message",width:"50%"}],query:i})),Object(A.jsx)(S.EuiModalFooter,null,Object(A.jsx)(S.EuiButton,{onClick:s,fill:!0},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.auditLogsModal.closeButton",{defaultMessage:"Close"})))):null};var U=a(239),H=a(160),q=a(161);const G={field:"language",name:o.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.language",{defaultMessage:"Language"}),dataType:"string",render:e=>e||U.b},$=({items:e,loading:t,noItemsMessage:a,pagination:s,onChange:i})=>{const{myRole:{canManageEngines:r}}=Object(n.useValues)(O.a),{showModal:c}=Object(n.useActions)(B),l=[{...q.g,render:e=>Object(H.b)(e)},q.c,{...q.f,render:(e,t)=>Object(H.c)(e,(()=>{c(t.name)}))},G,q.d,q.e];return r&&l.push(q.a),Object(A.jsx)(S.EuiBasicTable,{items:e,columns:l,loading:t,pagination:s,onChange:i,noItemsMessage:a})};a(894);const W=({sourceEngines:e,conflictingEngines:t})=>Object(A.jsx)("div",{className:"metaEnginesSourceEnginesTable"},Object(A.jsx)(S.EuiTitle,{size:"xs",className:"eui-textCenter"},Object(A.jsx)("h3",null,g)),Object(A.jsx)(S.EuiBasicTable,{items:e,columns:[{...q.g,mobileOptions:{...q.g.mobileOptions,enlarge:!1}},q.c,q.b,q.d,{...q.e,render:(e,a)=>Object(A.jsx)(x.a.Fragment,null,t.has(a.name)?Object(A.jsx)(S.EuiHealth,{color:"warning"},a.field_count):a.field_count)},q.b]}));var Q=a(320);const J=Object(n.kea)({path:["enterprise_search","app_search","meta_engines_table_logic"],actions:()=>({addSourceEngines:e=>({sourceEngines:e}),displayRow:e=>({itemId:e}),hideRow:e=>({itemId:e}),fetchOrDisplayRow:e=>({itemId:e}),fetchSourceEngines:e=>({engineName:e})}),reducers:()=>({expandedRows:[{},{displayRow:(e,{itemId:t})=>({...e,[t]:!0}),hideRow:(e,{itemId:t})=>{const a={...e};return delete a[t],a}}],sourceEngines:[{},{addSourceEngines:(e,{sourceEngines:t})=>({...e,...t})}]}),selectors:{expandedSourceEngines:[e=>[e.sourceEngines,e.expandedRows],(e,t)=>Object.keys(t).reduce(((t,a)=>(t[a]=e[a],t)),{})]},listeners:({actions:e,values:t})=>({fetchOrDisplayRow:({itemId:a})=>{t.sourceEngines[a]?e.displayRow(a):e.fetchSourceEngines(a)},fetchSourceEngines:({engineName:t})=>{Object(Q.a)({endpoint:`/internal/app_search/engines/${t}/source_engines`,onComplete:a=>{e.addSourceEngines({[t]:a}),e.displayRow(t)}})}})}),K=({item:{name:e,schemaConflicts:t,engine_count:a},isExpanded:n,hideRow:s,showRow:i})=>Object(A.jsx)(S.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(H.b)(e),Object(A.jsx)("button",{type:"button",onClick:()=>n?s(e):i(e),"aria-expanded":n,"data-test-subj":"ExpandRowButton"},Object(A.jsx)(S.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(A.jsx)(S.EuiFlexItem,{grow:!1},Object(A.jsx)(S.EuiIcon,{type:n?"arrowDown":"arrowRight"})),Object(A.jsx)(S.EuiFlexItem,{grow:!1,"data-test-subj":"SourceEnginesCount"},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.metaEnginesTable.sourceEnginesCount",{defaultMessage:"{sourceEnginesCount, plural, one {# engine} other {# engines}}",values:{sourceEnginesCount:a||0}})),t&&Object.keys(t).length>0&&Object(A.jsx)(S.EuiFlexItem,{grow:!1},Object(A.jsx)(S.EuiHealth,{color:"warning"},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.metaEnginesTable.fieldTypeConflictWarning",{defaultMessage:"Field-type conflict"})))))),Y=e=>Object.values(e).flat(),Z=e=>{const t=e.schemaConflicts?(a=e.schemaConflicts,Object.values(a).flatMap(Y)):[];var a;return new Set(t)},X=({items:e,loading:t,noItemsMessage:a,pagination:s,onChange:i})=>{const{expandedSourceEngines:r}=Object(n.useValues)(J),{hideRow:c,fetchOrDisplayRow:l}=Object(n.useActions)(J),{myRole:{canManageMetaEngines:o}}=Object(n.useValues)(O.a),{showModal:u}=Object(n.useActions)(B),p=Object(m.useMemo)((()=>e.reduce(((e,t)=>({...e,[t.name]:Z(t)})),{})),[e]),d=Object(m.useMemo)((()=>Object.keys(r).reduce(((e,t)=>({...e,[t]:Object(A.jsx)(W,{sourceEngines:r[t],conflictingEngines:p[t]})})),{})),[r,p]),g=[{...q.g,render:(e,t)=>Object(A.jsx)(K,{item:t,isExpanded:!!d[t.name],hideRow:c,showRow:l})},q.c,{...q.f,render:(e,t)=>Object(H.c)(e,(()=>{u(t.name)}))},q.b,q.d,q.e];return o&&g.push(q.a),Object(A.jsx)(S.EuiBasicTable,{items:e,columns:g,loading:t,pagination:s,onChange:i,noItemsMessage:a,itemId:"name",itemIdToExpandedRowMap:d})},ee=()=>{const{myRole:{canManageEngines:e,canManageMetaEngines:t}}=Object(n.useValues)(O.a),{dataLoading:a,engines:s,enginesMeta:i,enginesLoading:r,metaEngines:l,metaEnginesMeta:o,metaEnginesLoading:g}=Object(n.useValues)(b),{loadEngines:x,loadMetaEngines:C,onEnginesPagination:M,onMetaEnginesPagination:k}=Object(n.useActions)(b);return Object(m.useEffect)((()=>{x()}),[i.page.current]),Object(m.useEffect)((()=>{C()}),[o.page.current]),Object(A.jsx)(E.a,{pageViewTelemetry:"engines_overview",pageChrome:[u],pageHeader:{pageTitle:p},isLoading:a,isEmptyState:!s.length&&!l.length,emptyState:Object(A.jsx)(D,null)},Object(A.jsx)(w.a,{hasBorder:!0,iconType:y.b,title:Object(A.jsx)("h2",null,u),titleSize:"s",action:e&&Object(A.jsx)(f.b,{color:"success",size:"s",iconType:"plusInCircle","data-test-subj":"appSearchEnginesEngineCreationButton",to:v.v},h),"data-test-subj":"appSearchEngines"},Object(A.jsx)($,{items:s,loading:r,pagination:{...Object(c.a)(i),showPerPageOptions:!1},onChange:Object(c.b)(M)})),Object(A.jsx)(S.EuiSpacer,{size:"xxl"}),Object(A.jsx)(w.a,{hasBorder:!0,iconType:y.c,title:Object(A.jsx)("h2",null,d),titleSize:"s",action:t&&Object(A.jsx)(f.b,{color:"success",size:"s",iconType:"plusInCircle","data-test-subj":"appSearchEnginesMetaEngineCreationButton",to:v.O},j),"data-test-subj":"appSearchMetaEngines"},Object(A.jsx)(X,{items:l,loading:g,pagination:{...Object(c.a)(o),showPerPageOptions:!1},noItemsMessage:Object(A.jsx)(z,null),onChange:Object(c.b)(k)})),Object(A.jsx)(V,null))}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(47),s=a.n(n),i=a(11),r=a.n(i),c=a(17),l=a.n(c),o=a(13),u=(a(205),a(64)),p=a(12);const d=({title:e,titleSize:t="xs",subtitle:a,iconType:n,action:i,filled:c,isLoading:d,footerDocLink:g,className:h,children:j,...b})=>{const m=l()("dataPanel",h,{"dataPanel--filled":c});return Object(p.jsx)(o.EuiSplitPanel.Outer,s()({color:c?"subdued":"plain",className:m,hasShadow:!1,hasBorder:!c,"aria-busy":d},b),Object(p.jsx)(o.EuiSplitPanel.Inner,null,Object(p.jsx)(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(p.jsx)(o.EuiFlexItem,{grow:!0},Object(p.jsx)(o.EuiFlexGroup,{className:"eui-textNoWrap",gutterSize:"s",alignItems:"center",responsive:!1},n&&Object(p.jsx)(o.EuiFlexItem,{grow:!1},Object(p.jsx)(o.EuiIcon,{type:n})),Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(o.EuiTitle,{size:t},e)))),i&&Object(p.jsx)(o.EuiFlexItem,{grow:!1},i)),a&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(o.EuiSpacer,{size:"xs"}),Object(p.jsx)(o.EuiText,{size:"s",color:"subdued"},Object(p.jsx)("p",null,a))),j&&Object(p.jsx)(r.a.Fragment,null,Object(p.jsx)(o.EuiSpacer,{size:c||a?"l":"s"}),j),d&&Object(p.jsx)(u.b,null)),!!g&&Object(p.jsx)(o.EuiSplitPanel.Inner,{color:"subdued"},g))}},,,,function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(2);const s="documentCreationFlyoutHeadingId",i={TITLE:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.errorsTitle",{defaultMessage:"Something went wrong. Please address the errors and try again."}),NO_FILE:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.noFileFound",{defaultMessage:"No file found."}),NO_VALID_FILE:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.noValidFile",{defaultMessage:"Problem parsing file."}),NOT_VALID:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.notValidJson",{defaultMessage:"Document contents must be a valid JSON array or object."})},r={TITLE:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.warningsTitle",{defaultMessage:"Warning!"}),LARGE_FILE:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.largeFile",{defaultMessage:"You're uploading an extremely large file. This could potentially lock your browser, or take a very long time to process. If possible, try splitting your data up into multiple smaller files."})},c='[\n        {\n          "id": "park_rocky-mountain",\n          "title": "Rocky Mountain",\n          "description": "Bisected north to south by the Continental Divide, this portion of the Rockies has ecosystems varying from over 150 riparian lakes to montane and subalpine forests to treeless alpine tundra. Wildlife including mule deer, bighorn sheep, black bears, and cougars inhabit its igneous mountains and glacial valleys. Longs Peak, a classic Colorado fourteener, and the scenic Bear Lake are popular destinations, as well as the historic Trail Ridge Road, which reaches an elevation of more than 12,000 feet (3,700 m).",\n          "nps_link": "https://www.nps.gov/romo/index.htm",\n          "states": [\n            "Colorado"\n          ],\n          "visitors": 4517585,\n          "world_heritage_site": false,\n          "location": "40.4,-105.58",\n          "acres": 265795.2,\n          "square_km": 1075.6,\n          "date_established": "1915-01-26T06:00:00Z"\n        },\n        {\n          "id": "park_saguaro",\n          "title": "Saguaro",\n          "description": "Split into the separate Rincon Mountain and Tucson Mountain districts, this park is evidence that the dry Sonoran Desert is still home to a great variety of life spanning six biotic communities. Beyond the namesake giant saguaro cacti, there are barrel cacti, chollas, and prickly pears, as well as lesser long-nosed bats, spotted owls, and javelinas.",\n          "nps_link": "https://www.nps.gov/sagu/index.htm",\n          "states": [\n            "Arizona"\n          ],\n          "visitors": 820426,\n          "world_heritage_site": false,\n          "location": "32.25,-110.5",\n          "acres": 91715.72,\n          "square_km": 371.2,\n          "date_established": "1994-10-14T05:00:00Z"\n        }\n      ]'},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(47),s=a.n(n),i=(a(11),a(37)),r=a(119),c=a(43),l=a(72),o=a(38),u=a(97);const p=Object(i.kea)({path:e=>["enterprise_search","generic_endpoint_inline_editable_table_logic",e],key:e=>e.instanceId,actions:()=>({addItem:(e,t)=>({item:e,onSuccess:t}),setLoading:!0,clearLoading:!0,deleteItem:(e,t)=>({item:e,onSuccess:t}),reorderItems:(e,t,a)=>({items:e,oldItems:t,onSuccess:a}),updateItem:(e,t)=>({item:e,onSuccess:t})}),reducers:()=>({isLoading:[!1,{addItem:()=>!0,setLoading:()=>!0,clearLoading:()=>!1,deleteItem:()=>!0,updateItem:()=>!0}]}),listeners:({actions:e,props:t})=>({addItem:async({item:a,onSuccess:n})=>{const{http:s}=o.a.values,{addRoute:i,onAdd:r,dataProperty:c}=t;try{r(a,(await s.post(i,{body:JSON.stringify(a)}))[c]),n()}catch(e){const a=Object(l.c)(e);Object(u.a)({instanceId:t.instanceId}).actions.setRowErrors(a)}finally{e.clearLoading()}},deleteItem:async({item:a,onSuccess:n})=>{const{http:s}=o.a.values,{deleteRoute:i,onDelete:r,dataProperty:c}=t;try{r(a,(await s.delete(i(a)))[c]),n()}catch(e){const a=Object(l.c)(e);Object(u.a)({instanceId:t.instanceId}).actions.setRowErrors(a)}finally{e.clearLoading()}},updateItem:async({item:a,onSuccess:n})=>{const{http:s}=o.a.values,{updateRoute:i,onUpdate:r,dataProperty:c}=t,p=(e=>{const t={...e};return delete t.id,delete t.created_at,t})(a);try{r(a,(await s.put(i(a),{body:JSON.stringify(p)}))[c]),n()}catch(e){const a=Object(l.c)(e);Object(u.a)({instanceId:t.instanceId}).actions.setRowErrors(a)}finally{e.clearLoading()}},reorderItems:async({items:a,oldItems:n,onSuccess:s})=>{const{reorderRoute:i,onReorder:r,dataProperty:l}=t;if(!i||!r)return;const{http:u}=o.a.values,p=a.map((({id:e},t)=>({id:e,order:t})));r(a);try{e.setLoading();r((await u.put(i,{body:JSON.stringify({[l]:p})}))[l]),s()}catch(e){r(n),Object(c.l)(e)}e.clearLoading()}})});var d=a(12);const g=({addRoute:e,dataProperty:t,deleteRoute:a,reorderRoute:n,updateRoute:c,onAdd:l,onDelete:o,onReorder:u,onUpdate:g,...h})=>{const{instanceId:j}=h,b=p({dataProperty:t,instanceId:j,addRoute:e,deleteRoute:a,reorderRoute:n,updateRoute:c,onAdd:l,onDelete:o,onReorder:u,onUpdate:g}),{isLoading:m}=Object(i.useValues)(b),{addItem:x,deleteItem:S,reorderItems:f,updateItem:O}=Object(i.useActions)(b);return Object(d.jsx)(r.a,s()({},h,{isLoading:m,onAdd:x,onDelete:S,onReorder:f,onUpdate:O}))}},function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return h.a}));var n=a(11),s=a.n(n),i=a(17),r=a.n(i),c=a(75),l=(a(776),a(12));const o=e=>`[${e.map((e=>(e=>"number"!=typeof e&&isNaN(parseFloat(e)))(e)?`"${e}"`:e)).join(", ")}]`,u=({snippet:e,raw:t,type:a,className:n})=>{const i=((e,t,a)=>"number"===e?null===t:!a&&!t)(a,t,e);if(i)return Object(l.jsx)(s.a.Fragment,null,"");const u=r()({[`enterpriseSearchDataType--${a}`]:!!a},n);return Object(l.jsx)("div",{className:u,dangerouslySetInnerHTML:e?{__html:(p=e,p.replace(/<em>(.+?)<\/em>/gi,'<mark class="euiMark">$1</mark>'))}:void 0},e?null:((e,t)=>e?((e,t)=>t!==c.c.Nested)(0,t)?Array.isArray(e)?o(e):e.toString():JSON.stringify(e):null)(t,a));var p};var p=a(13);const d={[c.c.Text]:"tokenString",[c.b.String]:"tokenString",[c.c.Number]:"tokenNumber",[c.b.Float]:"tokenNumber",[c.c.Geolocation]:"tokenGeo",[c.b.Location]:"tokenGeo",[c.c.Date]:"tokenDate",[c.b.Date]:"tokenDate",[c.b.Nested]:"tokenNested"},g=({fieldType:e})=>Object(l.jsx)(p.EuiToken,{iconType:d[e]});var h=a(167)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(7)(2967)},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(11),s=a.n(n),i=a(13),r=a(2),c=a(12);const l=({emptyMessage:e,options:t,selectedOptions:a,onChange:n})=>{const l=a.reduce(((e,t)=>({...e,[t]:!0})),{}),o=t.map((e=>({label:e,checked:l[e]?"on":void 0})));return Object(c.jsx)(s.a.Fragment,null,Object(c.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiButtonEmpty,{"data-test-subj":"SelectAllButton",iconType:"check",onClick:()=>n(t),disabled:a.length===t.length},r.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.simplifiedSelectable.selectAllButtonLabel",{defaultMessage:"Select all"}))),Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiButtonEmpty,{"data-test-subj":"DeselectAllButton",iconType:"cross",onClick:()=>n([]),disabled:0===a.length},r.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.simplifiedSelectable.deselectAllButtonLabel",{defaultMessage:"Deselect all"})))),Object(c.jsx)(i.EuiSelectable,{searchable:!0,options:o,listProps:{bordered:!0},onChange:e=>{n(e.filter((e=>e.checked)).map((e=>e.label)))},emptyMessage:e},((e,t)=>Object(c.jsx)(s.a.Fragment,null,t,e))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a(11);var n=a(14),s=a(112),i=a(12);const r=({timestamp:e})=>{const t=new Date(e);return t>=new Date(new Date(Date.now()).toDateString())?Object(i.jsx)(n.FormattedRelative,{value:t}):Object(i.jsx)(s.a,{date:t,hideTime:!0})}},,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return l}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.title",{defaultMessage:"API Logs"}),i=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.recent",{defaultMessage:"Recent API events"}),r=5e3,c=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.pollingErrorMessage",{defaultMessage:"Could not refresh API log data"}),l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.pollingErrorDescription",{defaultMessage:"Please check your connection or manually reload the page."})},function(e,t,a){"use strict";var n=a(112);a.d(t,"a",(function(){return n.a}))},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"h",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return d})),a.d(t,"j",(function(){return g}));var n=a(2);const s="Universal",i=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.title",{defaultMessage:"Create an engine"}),r=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.title",{defaultMessage:"Configure your search engine"}),c=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.engineName.label",{defaultMessage:"Engine name"}),l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.engineName.allowedCharactersHelpText",{defaultMessage:"Engine names can only contain lowercase letters, numbers, and hyphens"}),o=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.engineName.sanitizedNameHelpText",{defaultMessage:"Your engine will be named"}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.engineName.placeholder",{defaultMessage:"i.e., my-search-engine"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.engineLanguage.label",{defaultMessage:"Engine language"}),d=(n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.submitButton.buttonLabel",{defaultMessage:"Create engine"}),e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.successMessage",{defaultMessage:"Engine '{name}' was created",values:{name:e}})),g=[{value:"Universal",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.universalDropDownOptionLabel",{defaultMessage:"Universal"})},{text:"",disabled:!0},{value:"zh",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.chineseDropDownOptionLabel",{defaultMessage:"Chinese"})},{value:"da",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.danishDropDownOptionLabel",{defaultMessage:"Danish"})},{value:"nl",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.dutchDropDownOptionLabel",{defaultMessage:"Dutch"})},{value:"en",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.englishDropDownOptionLabel",{defaultMessage:"English"})},{value:"fr",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.frenchDropDownOptionLabel",{defaultMessage:"French"})},{value:"de",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.germanDropDownOptionLabel",{defaultMessage:"German"})},{value:"it",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.italianDropDownOptionLabel",{defaultMessage:"Italian"})},{value:"ja",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.japaneseDropDownOptionLabel",{defaultMessage:"Japanese"})},{value:"ko",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.koreanDropDownOptionLabel",{defaultMessage:"Korean"})},{value:"pt",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.portugueseDropDownOptionLabel",{defaultMessage:"Portuguese"})},{value:"pt-br",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.portugueseBrazilDropDownOptionLabel",{defaultMessage:"Portuguese (Brazil)"})},{value:"ru",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.russianDropDownOptionLabel",{defaultMessage:"Russian"})},{value:"es",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.spanishDropDownOptionLabel",{defaultMessage:"Spanish"})},{value:"th",text:n.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.supportedLanguages.thaiDropDownOptionLabel",{defaultMessage:"Thai"})}]},function(e,t,a){"use strict";a.d(t,"a",(function(){return n.a})),a.d(t,"d",(function(){return p})),a.d(t,"e",(function(){return ce})),a.d(t,"b",(function(){return C})),a.d(t,"c",(function(){return F})),a.d(t,"f",(function(){return _}));var n=a(67),s=a(37),i=a(108),r=a.n(i),c=a(43),l=a(38),o=a(41),u=a(45);const p=Object(s.kea)({path:["enterprise_search","app_search","analytics_logic"],actions:()=>({onAnalyticsDataLoad:e=>e,onQueryDataLoad:e=>e,loadAnalyticsData:!0,loadQueryData:e=>e}),reducers:()=>({dataLoading:[!0,{loadAnalyticsData:()=>!0,loadQueryData:()=>!0,onAnalyticsDataLoad:()=>!1,onQueryDataLoad:()=>!1}],allTags:[[],{onAnalyticsDataLoad:(e,{allTags:t})=>t,onQueryDataLoad:(e,{allTags:t})=>t}],recentQueries:[[],{onAnalyticsDataLoad:(e,{recentQueries:t})=>t}],topQueries:[[],{onAnalyticsDataLoad:(e,{topQueries:t})=>t}],topQueriesNoResults:[[],{onAnalyticsDataLoad:(e,{topQueriesNoResults:t})=>t}],topQueriesNoClicks:[[],{onAnalyticsDataLoad:(e,{topQueriesNoClicks:t})=>t}],topQueriesWithClicks:[[],{onAnalyticsDataLoad:(e,{topQueriesWithClicks:t})=>t}],totalQueries:[0,{onAnalyticsDataLoad:(e,{totalQueries:t})=>t}],totalQueriesNoResults:[0,{onAnalyticsDataLoad:(e,{totalQueriesNoResults:t})=>t}],totalClicks:[0,{onAnalyticsDataLoad:(e,{totalClicks:t})=>t}],queriesPerDay:[[],{onAnalyticsDataLoad:(e,{queriesPerDay:t})=>t}],queriesNoResultsPerDay:[[],{onAnalyticsDataLoad:(e,{queriesNoResultsPerDay:t})=>t}],clicksPerDay:[[],{onAnalyticsDataLoad:(e,{clicksPerDay:t})=>t}],totalQueriesForQuery:[0,{onQueryDataLoad:(e,{totalQueriesForQuery:t})=>t}],queriesPerDayForQuery:[[],{onQueryDataLoad:(e,{queriesPerDayForQuery:t})=>t}],topClicksForQuery:[[],{onQueryDataLoad:(e,{topClicksForQuery:t})=>t}],startDate:["",{onAnalyticsDataLoad:(e,{startDate:t})=>t,onQueryDataLoad:(e,{startDate:t})=>t}]}),listeners:({actions:e})=>({loadAnalyticsData:async()=>{const{history:t}=o.a.values,{http:a}=l.a.values,{engineName:s}=u.a.values;try{const{start:i,end:c,tag:l}=r.a.parse(t.location.search),o={start:i||n.c,end:c||n.b,tag:l,size:20},u=`/internal/app_search/engines/${s}/analytics/queries`,p=await a.get(u,{query:o});e.onAnalyticsDataLoad(p)}catch(e){Object(c.e)(e)}},loadQueryData:async t=>{const{history:a}=o.a.values,{http:s}=l.a.values,{engineName:i}=u.a.values;try{const{start:c,end:l,tag:o}=r.a.parse(a.location.search),u={start:c||n.c,end:l||n.b,tag:o},p=`/internal/app_search/engines/${i}/analytics/queries/${t}`,d=await s.get(p,{query:u});e.onQueryDataLoad(d)}catch(e){Object(c.e)(e)}}})});var d=a(11),g=a(15),h=a(54),j=a(48),b=a(249),m=a(13),x=a(2),S=a(44),f=a(247),O=a(68),y=a(318),v=a(53),w=a(139),E=a(12);const C=({stats:e})=>Object(E.jsx)(m.EuiFlexGroup,{direction:"column"},e.map((({text:e,stat:t,dataTestSubj:a})=>Object(E.jsx)(m.EuiFlexItem,{key:e},Object(E.jsx)(m.EuiPanel,{color:"subdued",hasShadow:!1},Object(E.jsx)(m.EuiStat,{title:t,description:e,titleColor:"primary","data-test-subj":a}))))));var M=a(18),k=a.n(M),T=a(24);const F=({height:e=300,lines:t})=>{const{charts:a}=Object(s.useValues)(o.a);return Object(E.jsx)(T.Chart,{size:{height:e}},Object(E.jsx)(T.Tooltip,{headerFormatter:e=>k()(e.value).format(n.f)}),Object(E.jsx)(T.Settings,{theme:a.theme.useChartsTheme(),baseTheme:a.theme.useChartsBaseTheme(),locale:x.i18n.getLocale()}),t.map((({id:e,data:t,isDashed:a})=>Object(E.jsx)(T.LineSeries,{key:e,id:e,data:t,xAccessor:"x",yAccessors:["y"],curve:T.CurveType.CURVE_MONOTONE_X,lineSeriesStyle:a?{line:{dash:[5,5]}}:void 0}))),Object(E.jsx)(T.Axis,{id:"bottom-axis",position:"bottom",tickFormat:e=>k()(e).format(n.p),gridLine:{visible:!0}}),Object(E.jsx)(T.Axis,{id:"left-axis",position:"left",ticks:4,gridLine:{visible:!0}}))},_=({data:e,startDate:t})=>{const a=k()(t,n.e);return e.map(((e,t)=>({x:k()(a).add(t,"days").format(n.e),y:e})))},I=()=>{const{allTags:e}=Object(s.useValues)(p),{history:t}=Object(s.useValues)(o.a),{start:a,end:i,tag:c}=r.a.parse(t.location.search),[l,u]=Object(d.useState)(a?k()(a,n.e):k()(n.c)),[g,h]=Object(d.useState)(i?k()(i,n.e):k()(n.b)),[j,b]=Object(d.useState)(c||""),S=l>g;return Object(E.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",gutterSize:"m"},Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(m.EuiSelect,{options:(f=e,f=f.slice(1),[{value:"",text:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.allTagsDropDownOptionLabel",{defaultMessage:"All analytics tags"})},...f.map((e=>({value:e,text:e})))]),value:j,onChange:e=>b(e.target.value),"aria-label":x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.filters.tagAriaLabel",{defaultMessage:'Filter by analytics tag"'}),fullWidth:!0})),Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(m.EuiDatePickerRange,{startDateControl:Object(E.jsx)(m.EuiDatePicker,{selected:l,onChange:e=>e&&u(e),startDate:l,endDate:g,isInvalid:S,"aria-label":x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.filters.startDateAriaLabel",{defaultMessage:"Filter by start date"}),locale:x.i18n.getLocale()}),endDateControl:Object(E.jsx)(m.EuiDatePicker,{selected:g,onChange:e=>e&&h(e),startDate:l,endDate:g,isInvalid:S,"aria-label":x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.filters.endDateAriaLabel",{defaultMessage:"Filter by end date"}),locale:x.i18n.getLocale()}),fullWidth:!0})),Object(E.jsx)(m.EuiFlexItem,{grow:!1},Object(E.jsx)(m.EuiButton,{fill:!0,isDisabled:S,onClick:()=>{const e=r.a.stringify({start:k()(l).format(n.e),end:k()(g).format(n.e),tag:j||void 0});t.push({search:e})}},x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.filters.applyButtonLabel",{defaultMessage:"Apply filters"}))));var f},R=({title:e,subtitle:t,iconType:a,children:n})=>Object(E.jsx)("section",null,Object(E.jsx)("header",null,Object(E.jsx)(m.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",justifyContent:"flexStart",responsive:!1},a&&Object(E.jsx)(m.EuiFlexItem,{grow:!1},Object(E.jsx)(m.EuiIcon,{type:a,size:"l"})),Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(m.EuiTitle,{size:"s"},Object(E.jsx)("h2",null,e)))),Object(E.jsx)(m.EuiSpacer,{size:"xs"}),Object(E.jsx)(m.EuiText,{size:"s",color:"subdued"},Object(E.jsx)("p",null,t))),Object(E.jsx)(m.EuiSpacer,{size:"m"}),Object(E.jsx)(m.EuiPageSection,{paddingSize:"none"},n)),A=()=>{const[e,t]=Object(d.useState)(""),{navigateToUrl:a}=Object(s.useValues)(o.a);return Object(E.jsx)("form",{onSubmit:t=>{t.preventDefault();const n=e||'""';a(Object(u.c)(j.m,{query:n}))}},Object(E.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"m",responsive:!1},Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(m.EuiFieldSearch,{value:e,onChange:e=>t(e.target.value),placeholder:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetailSearchPlaceholder",{defaultMessage:"Go to search term"}),fullWidth:!0})),Object(E.jsx)(m.EuiFlexItem,{grow:!1},Object(E.jsx)(m.EuiButton,{type:"submit"},x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetailSearchButtonLabel",{defaultMessage:"View details"})))),Object(E.jsx)(m.EuiSpacer,null))};var L=a(42);a(909);const D=({tags:e})=>null!=e&&e.length?Object(E.jsx)(m.EuiToolTip,{position:"bottom",content:e.join(", ")},Object(E.jsx)(m.EuiBadge,{color:"hollow"},x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.tagsCountBadge",{defaultMessage:"{tagsCount, plural, one {# tag} other {# tags}}",values:{tagsCount:e.length}}))):null,z=({tags:e})=>{if(null==e||!e.length)return null;const t=e.slice(0,2),a=e.slice(2);return Object(E.jsx)(m.EuiBadgeGroup,{className:"tagsList"},t.map((e=>Object(E.jsx)(m.EuiBadge,{color:"hollow",key:e},e))),a.length>0&&Object(E.jsx)(m.EuiToolTip,{position:"bottom",content:a.join(", ")},Object(E.jsx)(m.EuiBadge,null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.moreTagsBadge",{defaultMessage:"and {moreTagsCount} more",values:{moreTagsCount:a.length}}))))},P={truncateText:!0,width:"25%",mobileOptions:{enlarge:!0,width:"100%"}},N={name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.termColumn",{defaultMessage:"Search term"}),render:e=>(e||(e='""'),Object(E.jsx)(S.d,{to:Object(u.c)(j.m,{query:e})},e)),...P},B={width:"90px",actions:[{name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.viewAction",{defaultMessage:"View"}),description:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.viewTooltip",{defaultMessage:"View query analytics"}),type:"icon",icon:"eye",color:"primary",onClick:e=>{const{navigateToUrl:t}=o.a.values,a=e.key||e.query_string||'""';t(Object(u.c)(j.m,{query:a}))},"data-test-subj":"AnalyticsTableViewQueryButton"},{name:L.n,description:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.editTooltip",{defaultMessage:"Manage curation"}),type:"icon",icon:"package",onClick:async e=>{const{http:t}=l.a.values,{navigateToUrl:a}=o.a.values,{engineName:n}=u.a.values;try{const s=e.key||e.query_string||'""',i=await t.post(`/internal/app_search/engines/${n}/curations/find_or_create`,{body:JSON.stringify({query:s})});a(Object(u.c)(j.y,{curationId:i.id}))}catch(e){Object(c.e)(e)}},"data-test-subj":"AnalyticsTableEditQueryButton"}]},V={field:"tags",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.tagsColumn",{defaultMessage:"Analytics tags"}),truncateText:!0},U={...V,render:e=>Object(E.jsx)(z,{tags:e})},H={...V,render:e=>Object(E.jsx)(D,{tags:e})},q={dataType:"number",width:"100px"},G=({items:e,hasClicks:t,isSmall:a})=>{const n={field:"key",...N},s=a?H:U,i=[{field:"searches.doc_count",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.queriesColumn",{defaultMessage:"Queries"}),...q}];return t&&i.push({field:"clicks.doc_count",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.clicksColumn",{defaultMessage:"Clicks"}),...q}),Object(E.jsx)(m.EuiBasicTable,{columns:[n,s,...i,B],items:e,responsive:!0,hasActions:!0,noItemsMessage:Object(E.jsx)(m.EuiEmptyPrompt,{iconType:"visLine",title:Object(E.jsx)("h4",null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noQueriesTitle",{defaultMessage:"No queries to display"})),body:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noQueriesDescription",{defaultMessage:"No queries were performed during this time period."})})})};var $=a(136);const W=({items:e})=>{const t={...N,field:"query_string"},a={field:"timestamp",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.timeColumn",{defaultMessage:"Time"}),render:e=>Object(E.jsx)($.a,{date:new Date(e)}),width:"200px"},n={...q,field:"document_ids",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.resultsColumn",{defaultMessage:"Results"}),render:e=>e.length};return Object(E.jsx)(m.EuiBasicTable,{columns:[t,a,U,n,B],items:e,responsive:!0,hasActions:!0,noItemsMessage:Object(E.jsx)(m.EuiEmptyPrompt,{iconType:"visLine",title:Object(E.jsx)("h4",null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noRecentQueriesTitle",{defaultMessage:"No recent queries"})),body:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noRecentQueriesDescription",{defaultMessage:"Queries will appear here as they are received."})})})};var Q=a(243);const J=({items:e})=>{const{engineName:t}=u.a.values,a={...P,field:"document",name:Q.a,render:(e,a)=>e?Object(E.jsx)(S.d,{to:Object(u.c)(j.B,{engineName:t,documentId:e.id})},e.id):a.key},n={...q,field:"doc_count",name:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.clicksColumn",{defaultMessage:"Clicks"})};return Object(E.jsx)(m.EuiBasicTable,{columns:[a,U,n],items:e,responsive:!0,noItemsMessage:Object(E.jsx)(m.EuiEmptyPrompt,{iconType:"visLine",title:Object(E.jsx)("h4",null,x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noClicksTitle",{defaultMessage:"No clicks"})),body:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.empty.noClicksDescription",{defaultMessage:"No documents have been clicked from this query."})})})},K=({title:e,breadcrumbs:t=[],isQueryView:a,isAnalyticsView:i,children:r})=>{const{history:c}=Object(s.useValues)(o.a),{query:l}=Object(g.useParams)(),{dataLoading:h}=Object(s.useValues)(p),{loadAnalyticsData:j,loadQueryData:b}=Object(s.useActions)(p);return Object(d.useEffect)((()=>{a&&b(l),i&&j()}),[c.location.search]),Object(E.jsx)(v.a,{pageChrome:Object(u.d)([n.a,...t]),pageHeader:{pageTitle:e,rightSideItems:[Object(E.jsx)(w.e,{type:w.d.Analytics,position:"left"})],children:Object(E.jsx)(I,null),responsive:!1},isLoading:h},Object(E.jsx)(w.a,{type:w.d.Analytics}),r)};a(914);const Y=()=>{const{totalQueries:e,totalQueriesNoResults:t,totalClicks:a,queriesPerDay:i,queriesNoResultsPerDay:r,clicksPerDay:c,startDate:l,topQueries:o,topQueriesNoResults:d,topQueriesWithClicks:g,topQueriesNoClicks:h,recentQueries:b}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.a},Object(E.jsx)(y.a,null),Object(E.jsx)(m.EuiFlexGroup,{alignItems:"center"},Object(E.jsx)(m.EuiFlexItem,{grow:1},Object(E.jsx)(C,{stats:[{stat:e,text:n.n,dataTestSubj:"TotalQueriesCard"},{stat:t,text:n.o,dataTestSubj:"TotalQueriesNoResultsCard"},{stat:a,text:n.l,dataTestSubj:"TotalClicksCard"}]})),Object(E.jsx)(m.EuiFlexItem,{grow:3},Object(E.jsx)(m.EuiPanel,{hasBorder:!0},Object(E.jsx)(F,{lines:[{id:n.n,data:_({startDate:l,data:i})},{id:n.o,data:_({startDate:l,data:r}),isDashed:!0},{id:n.l,data:_({startDate:l,data:c}),isDashed:!0}]})))),Object(E.jsx)(m.EuiSpacer,null),Object(E.jsx)(m.EuiSpacer,null),Object(E.jsx)(R,{title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryTablesTitle",{defaultMessage:"Query analytics"}),subtitle:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryTablesDescription",{defaultMessage:"Gain insight into the most frequent queries, and which queries returned no results."}),iconType:"search"},Object(E.jsx)(m.EuiFlexGroup,{className:"analyticsOverviewTables"},Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(O.a,{title:Object(E.jsx)("h3",null,n.g),filled:!0,action:Object(E.jsx)(Z,{to:Object(u.c)(j.q)})},Object(E.jsx)(G,{items:o.slice(0,10),hasClicks:!0,isSmall:!0}))),Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(O.a,{title:Object(E.jsx)("h3",null,n.i),filled:!0,action:Object(E.jsx)(Z,{to:Object(u.c)(j.p)})},Object(E.jsx)(G,{items:d.slice(0,10),isSmall:!0}))))),Object(E.jsx)(m.EuiSpacer,{size:"xl"}),Object(E.jsx)(R,{title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.clickTablesTitle",{defaultMessage:"Click analytics"}),subtitle:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.clickTablesDescription",{defaultMessage:"Discover which queries generated the most and least amount of clicks."}),iconType:f.a},Object(E.jsx)(m.EuiFlexGroup,{className:"analyticsOverviewTables"},Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(O.a,{title:Object(E.jsx)("h3",null,n.j),filled:!0,action:Object(E.jsx)(Z,{to:Object(u.c)(j.r)})},Object(E.jsx)(G,{items:g.slice(0,10),hasClicks:!0,isSmall:!0}))),Object(E.jsx)(m.EuiFlexItem,null,Object(E.jsx)(O.a,{title:Object(E.jsx)("h3",null,n.h),filled:!0,action:Object(E.jsx)(Z,{to:Object(u.c)(j.o)})},Object(E.jsx)(G,{items:h.slice(0,10),isSmall:!0}))))),Object(E.jsx)(m.EuiSpacer,{size:"xl"}),Object(E.jsx)(O.a,{hasBorder:!0,title:Object(E.jsx)("h2",null,n.d),subtitle:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.recentQueriesDescription",{defaultMessage:"A view into queries happening right now."}),action:Object(E.jsx)(Z,{to:Object(u.c)(j.n)})},Object(E.jsx)(W,{items:b.slice(0,10)})))},Z=({to:e})=>Object(E.jsx)(S.a,{to:e,size:"s",iconType:"eye"},x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.table.viewAllButtonLabel",{defaultMessage:"View all"})),X=()=>{const{topQueries:e}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.g,breadcrumbs:[n.g]},Object(E.jsx)(A,null),Object(E.jsx)(G,{items:e,hasClicks:!0}))},ee=()=>{const{topQueriesNoResults:e}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.i,breadcrumbs:[n.i]},Object(E.jsx)(A,null),Object(E.jsx)(G,{items:e,hasClicks:!0}))},te=()=>{const{topQueriesNoClicks:e}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.h,breadcrumbs:[n.h]},Object(E.jsx)(A,null),Object(E.jsx)(G,{items:e,hasClicks:!0}))},ae=()=>{const{topQueriesWithClicks:e}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.j,breadcrumbs:[n.j]},Object(E.jsx)(A,null),Object(E.jsx)(G,{items:e,hasClicks:!0}))},ne=()=>{const{recentQueries:e}=Object(s.useValues)(p);return Object(E.jsx)(K,{isAnalyticsView:!0,title:n.d,breadcrumbs:[n.d]},Object(E.jsx)(A,null),Object(E.jsx)(W,{items:e}))};var se=a(79);const ie=x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetail.title",{defaultMessage:"Query"}),re=()=>{const{query:e}=Object(se.b)(),t='""'===e?e:`"${e}"`,{totalQueriesForQuery:a,queriesPerDayForQuery:n,startDate:i,topClicksForQuery:r}=Object(s.useValues)(p);return Object(E.jsx)(K,{isQueryView:!0,title:t,breadcrumbs:[ie,e]},Object(E.jsx)(C,{stats:[{stat:a,text:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetail.cardDescription",{defaultMessage:"Queries for {queryTitle}",values:{queryTitle:e}})}]}),Object(E.jsx)(m.EuiSpacer,null),Object(E.jsx)(m.EuiPanel,{hasBorder:!0},Object(E.jsx)(F,{lines:[{id:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetail.chartTooltip",{defaultMessage:"Queries per day"}),data:_({startDate:i,data:n})}]})),Object(E.jsx)(m.EuiSpacer,null),Object(E.jsx)(R,{title:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetail.tableTitle",{defaultMessage:"Top clicks"}),subtitle:x.i18n.translate("xpack.enterpriseSearch.appSearch.engine.analytics.queryDetail.tableDescription",{defaultMessage:"The documents with the most clicks resulting from this query."})},Object(E.jsx)(J,{items:r})))},ce=()=>Object(E.jsx)(h.c,null,Object(E.jsx)(h.a,{exact:!0,path:j.k},Object(E.jsx)(Y,null)),Object(E.jsx)(h.a,{exact:!0,path:j.q},Object(E.jsx)(X,null)),Object(E.jsx)(h.a,{exact:!0,path:j.p},Object(E.jsx)(ee,null)),Object(E.jsx)(h.a,{exact:!0,path:j.o},Object(E.jsx)(te,null)),Object(E.jsx)(h.a,{exact:!0,path:j.r},Object(E.jsx)(ae,null)),Object(E.jsx)(h.a,{exact:!0,path:j.n},Object(E.jsx)(ne,null)),Object(E.jsx)(h.a,{exact:!0,path:j.m},Object(E.jsx)(re,null)),Object(E.jsx)(h.a,{exact:!0,path:j.l},Object(E.jsx)(g.Redirect,{to:Object(u.c)(j.k)})),Object(E.jsx)(h.a,null,Object(E.jsx)(b.a,{pageChrome:Object(u.d)([n.a])})))},function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return O})),a.d(t,"f",(function(){return b})),a.d(t,"a",(function(){return _})),a.d(t,"e",(function(){return I}));var n=a(37),s=a(43),i=a(38);let r;!function(e){e.Analytics="analytics",e.API="api",e.Audit="audit",e.Crawler="crawler"}(r||(r={}));const c=e=>({[r.Analytics]:l(e[r.Analytics]),[r.API]:l(e[r.API]),[r.Audit]:l(e[r.Audit]),[r.Crawler]:l(e[r.Crawler])}),l=({disabled_at:e,enabled:t,retention_policy:a})=>({disabledAt:e,enabled:t,retentionPolicy:null===a?null:o(a)}),o=({min_age_days:e,is_default:t})=>({isDefault:t,minAgeDays:e}),u=Object(n.kea)({path:["enterprise_search","app_search","log_retention_logic"],actions:()=>({clearLogRetentionUpdating:!0,closeModals:!0,fetchLogRetention:!0,saveLogRetention:(e,t)=>({enabled:t,option:e}),setOpenedModal:e=>({option:e}),toggleLogRetention:e=>({option:e}),updateLogRetention:e=>({logRetention:e})}),reducers:()=>({logRetention:[null,{updateLogRetention:(e,{logRetention:t})=>t}],isLogRetentionUpdating:[!1,{clearLogRetentionUpdating:()=>!1,closeModals:()=>!1,fetchLogRetention:()=>!0,toggleLogRetention:()=>!0}],openedModal:[null,{closeModals:()=>null,saveLogRetention:()=>null,setOpenedModal:(e,{option:t})=>t}]}),listeners:({actions:e,values:t})=>({fetchLogRetention:async(t,a)=>{await a(100);try{const{http:t}=i.a.values,a=await t.get("/internal/app_search/log_settings");e.updateLogRetention(c(a))}catch(e){Object(s.e)(e)}finally{e.clearLogRetentionUpdating()}},saveLogRetention:async({enabled:t,option:a})=>{const n={[a]:{enabled:t}};try{const{http:t}=i.a.values,a=await t.put("/internal/app_search/log_settings",{body:JSON.stringify(n)});e.updateLogRetention(c(a))}catch(e){Object(s.e)(e)}finally{e.clearLogRetentionUpdating()}},toggleLogRetention:({option:a})=>{var n;const s=null===(n=t.logRetention)||void 0===n?void 0:n[a];s&&(s.enabled?e.setOpenedModal(a):e.saveLogRetention(a,!0))}})});var p=a(11),d=a.n(p),g=a(2),h=a(14),j=a(12);const b=e=>Object(j.jsx)(h.FormattedDate,{value:new Date(e),month:"long",day:"numeric",year:"numeric"}),m={[r.Analytics]:{capitalized:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.analytics.title.capitalized",{defaultMessage:"Analytics"}),lowercase:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.analytics.title.lowercase",{defaultMessage:"analytics"})},[r.API]:{capitalized:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.api.title.capitalized",{defaultMessage:"API"}),lowercase:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.api.title.lowercase",{defaultMessage:"API"})},[r.Audit]:{capitalized:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.audit.title.capitalized",{defaultMessage:"Audit"}),lowercase:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.audit.title.lowercase",{defaultMessage:"audit"})},[r.Crawler]:{capitalized:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.crawler.title.capitalized",{defaultMessage:"Web crawler"}),lowercase:g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.type.crawler.title.lowercase",{defaultMessage:"web crawler"})}},x=({type:e,disabledAt:t})=>Object(j.jsx)(d.a.Fragment,null,Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.noLogging",defaultMessage:"{logsType} logging has been disabled for all engines.",values:{logsType:m[e].capitalized}})," ",t?Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.noLogging.collected",defaultMessage:"The last date {logsType} logs were collected was {disabledAtDate}.",values:{logsType:m[e].lowercase,disabledAtDate:b(t)}}):Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.noLogging.notCollected",defaultMessage:"There are no {logsType} logs collected.",values:{logsType:m[e].lowercase}})),S=({type:e})=>Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.customPolicy",defaultMessage:"You have a custom {logsType} log retention policy.",values:{logsType:m[e].lowercase}}),f=({type:e,minAgeDays:t})=>Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.defaultPolicy",defaultMessage:"Your {logsType} logs are being stored for at least {minAgeDays, plural, one {# day} other {# days}}.",values:{logsType:m[e].lowercase,minAgeDays:t}}),O=({type:e})=>{var t;const{logRetention:a}=Object(n.useValues)(u);if(!a)return null;const s=a[e];return s?s.enabled?null!==(t=s.retentionPolicy)&&void 0!==t&&t.isDefault?Object(j.jsx)(f,{type:e,minAgeDays:null===(i=s.retentionPolicy)||void 0===i?void 0:i.minAgeDays}):Object(j.jsx)(S,{type:e}):Object(j.jsx)(x,{type:e,disabledAt:s.disabledAt}):null;var i};var y=a(13),v=a(44),w=a(57),E=a(48),C=a(138),M=a(164),k=a(242);const T=g.i18n.translate("xpack.enterpriseSearch.appSearch.audit.title",{defaultMessage:"Audit"}),F={[r.Analytics]:C.a,[r.API]:M.a,[r.Audit]:T,[r.Crawler]:k.a},_=({type:e})=>{const{fetchLogRetention:t}=Object(n.useActions)(u),{logRetention:a}=Object(n.useValues)(u),{myRole:{canManageLogSettings:s}}=Object(n.useValues)(w.a),i=null!==a;Object(p.useEffect)((()=>{!i&&s&&t()}),[]);const r=null==a?void 0:a[e],c=F[e];return!i||null!=r&&r.enabled?null:Object(j.jsx)(d.a.Fragment,null,Object(j.jsx)(y.EuiCallOut,{iconType:"warning",color:"primary",title:null!=r&&r.disabledAt?Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.callout.disabledSinceTitle",defaultMessage:"{logsTitle} have been disabled since {disabledDate}.",values:{logsTitle:c,disabledDate:b(r.disabledAt)}}):g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.callout.disabledTitle",{defaultMessage:"{logsTitle} have been disabled.",values:{logsTitle:c}})},Object(j.jsx)("p",null,Object(j.jsx)(h.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.logRetention.callout.description.manageSettingsDetail",defaultMessage:"To manage analytics & logging, {visitSettingsLink}.",values:{visitSettingsLink:Object(j.jsx)(v.d,{to:E.W},g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.callout.description.manageSettingsLinkText",{defaultMessage:"visit your settings"}))}}))),Object(j.jsx)(y.EuiSpacer,null))},I=({type:e,position:t="bottom"})=>{const{fetchLogRetention:a}=Object(n.useActions)(u),{logRetention:s}=Object(n.useValues)(u),{myRole:{canManageLogSettings:i}}=Object(n.useValues)(w.a),r=null!==s;return Object(p.useEffect)((()=>{!r&&i&&a()}),[]),r?Object(j.jsx)(y.EuiIconTip,{"aria-label":g.i18n.translate("xpack.enterpriseSearch.appSearch.logRetention.tooltip",{defaultMessage:"Log retention info"}),size:"l",type:"iInCircle",color:"primary",position:t,content:Object(j.jsx)(O,{type:e})}):null}},,,,,function(e,t,a){"use strict";e.exports=function(e){var t=void 0;t="string"==typeof e?[e]:e.raw;for(var a="",n=0;n<t.length;n++)a+=t[n].replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`"),n<(arguments.length<=1?0:arguments.length-1)&&(a+=arguments.length<=n+1?void 0:arguments[n+1]);var s=a.split("\n"),i=null;return s.forEach((function(e){var t=e.match(/^(\s+)\S+/);if(t){var a=t[1].length;i=i?Math.min(i,a):a}})),null!==i&&(a=s.map((function(e){return" "===e[0]?e.slice(i):e})).join("\n")),(a=a.trim()).replace(/\\n/g,"\n")}},,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>["dev","editor","analyst"].includes(e)},,function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return g})),a.d(t,"c",(function(){return h})),a(11);var n=a(13),s=a(41),i=a(44),r=a(52),c=a(48),l=a(79),o=a(136),u=a(12);const p=()=>{r.d.actions.sendAppSearchTelemetry({action:"clicked",metric:"engine_table_link"})},d=e=>{p(),s.a.values.navigateToUrl(Object(l.a)(c.C,{engineName:e}))},g=e=>Object(u.jsx)(i.d,{to:Object(l.a)(c.C,{engineName:e}),onClick:p,"data-test-subj":"EngineName"},e),h=(e,t=(()=>{}))=>Object(u.jsx)(n.EuiLink,{onClick:t},e?Object(u.jsx)(o.a,{date:new Date(e),hideTime:!0}):"-")},function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"g",(function(){return g})),a.d(t,"c",(function(){return h})),a.d(t,"f",(function(){return j})),a.d(t,"d",(function(){return b})),a.d(t,"e",(function(){return m})),a.d(t,"a",(function(){return x}));var n=a(11),s=a.n(n),i=a(2),r=a(14),c=a(84),l=a(42),o=a(136),u=a(160),p=a(12);const d={render:()=>Object(p.jsx)(s.a.Fragment,null),"aria-hidden":!0},g={field:"name",name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.name",{defaultMessage:"Name"}),width:"30%",truncateText:!0,mobileOptions:{header:!0,enlarge:!0,width:"100%"}},h={field:"created_at",name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.createdAt",{defaultMessage:"Created at"}),dataType:"string",render:e=>Object(p.jsx)(o.a,{date:new Date(e),hideTime:!0})},j={field:"updated_at",name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.lastUpdated",{defaultMessage:"Last updated"}),dataType:"string"},b={field:"document_count",name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.documentCount",{defaultMessage:"Document count"}),dataType:"number",render:e=>Object(p.jsx)(r.FormattedNumber,{value:e}),truncateText:!0},m={field:"field_count",name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.fieldCount",{defaultMessage:"Field count"}),dataType:"number",render:e=>Object(p.jsx)(r.FormattedNumber,{value:e}),truncateText:!0},x={name:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.column.actions",{defaultMessage:"Actions"}),actions:[{name:l.r,description:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.action.manage.buttonDescription",{defaultMessage:"Manage this engine"}),type:"icon",icon:"eye",onClick:e=>Object(u.a)(e.name)},{name:l.l,description:i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.action.delete.buttonDescription",{defaultMessage:"Delete this engine"}),type:"icon",icon:"trash",color:"danger",onClick:e=>{window.confirm(i.i18n.translate("xpack.enterpriseSearch.appSearch.enginesOverview.table.action.delete.confirmationPopupMessage",{defaultMessage:'Are you sure you want to permanently delete "{engineName}" and all of its content?',values:{engineName:e.name}}))&&c.b.actions.deleteEngine(e)}}]}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return n.a})),a.d(t,"e",(function(){return S})),a.d(t,"f",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return C})),a.d(t,"d",(function(){return F}));var n=a(135),s=a(47),i=a.n(s),r=a(11),c=a(37),l=a(13),o=a(2),u=a(14),p=a(61);const d=e=>{const t=new Date(Date.now());return e&&t.setDate(t.getDate()+e),t.toISOString()},g=e=>{let t="";return e>=100&&e<300&&(t="success"),e>=300&&e<400&&(t="primary"),e>=400&&e<500&&(t="warning"),e>=500&&(t="danger"),t},h=e=>{try{return JSON.stringify(JSON.parse(e),null,2)}catch{return e}};var j=a(12);const b=()=>{const{isFlyoutOpen:e,apiLog:t}=Object(c.useValues)(x),{closeFlyout:a}=Object(c.useActions)(x);return e&&t?Object(j.jsx)(l.EuiPortal,null,Object(j.jsx)(l.EuiFlyout,{ownFocus:!0,onClose:a,"aria-labelledby":"apiLogFlyout"},Object(j.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(l.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:"apiLogFlyout"},o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.flyout.title",{defaultMessage:"Request details"})))),Object(j.jsx)(l.EuiFlyoutBody,null,Object(j.jsx)(l.EuiFlexGroup,null,Object(j.jsx)(l.EuiFlexItem,null,Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.methodTitle",{defaultMessage:"Method"})),Object(j.jsx)("div",null,Object(j.jsx)(l.EuiBadge,{color:"primary"},t.http_method))),Object(j.jsx)(l.EuiFlexItem,null,Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.statusTitle",{defaultMessage:"Status"})),Object(j.jsx)(l.EuiHealth,{color:g(t.status)},t.status)),Object(j.jsx)(l.EuiFlexItem,null,Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.timestampTitle",{defaultMessage:"Timestamp"})),t.timestamp)),Object(j.jsx)(l.EuiSpacer,null),Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.userAgentTitle",{defaultMessage:"User agent"})),Object(j.jsx)(l.EuiText,null,Object(j.jsx)(l.EuiCode,null,t.user_agent)),Object(j.jsx)(l.EuiSpacer,null),Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.requestPathTitle",{defaultMessage:"Request path"})),Object(j.jsx)(l.EuiText,null,Object(j.jsx)(l.EuiCode,null,t.full_request_path)),Object(j.jsx)(l.EuiSpacer,null),Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.requestBodyTitle",{defaultMessage:"Request body"})),Object(j.jsx)(l.EuiCodeBlock,{language:"json",paddingSize:"m"},h(t.request_body)),Object(j.jsx)(l.EuiSpacer,null),Object(j.jsx)(m,null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.responseBodyTitle",{defaultMessage:"Response body"})),Object(j.jsx)(l.EuiCodeBlock,{language:"json",paddingSize:"m"},h(t.response_body))))):null},m=({children:e})=>Object(j.jsx)(l.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,e)),x=Object(c.kea)({path:["enterprise_search","app_search","api_log_logic"],actions:()=>({openFlyout:e=>({apiLog:e}),closeFlyout:!0}),reducers:()=>({isFlyoutOpen:[!1,{openFlyout:()=>!0,closeFlyout:()=>!1}],apiLog:[null,{openFlyout:(e,{apiLog:t})=>t,closeFlyout:()=>null}]})});a(756);const S=({hasPagination:e})=>{const{dataLoading:t,apiLogs:a,meta:n}=Object(c.useValues)(F),{onPaginate:s}=Object(c.useActions)(F),{openFlyout:r}=Object(c.useActions)(x),d=[{field:"http_method",name:o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.methodTableHeading",{defaultMessage:"Method"}),width:"100px",render:e=>Object(j.jsx)(l.EuiBadge,{color:"primary"},e)},{field:"timestamp",name:o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.timeTableHeading",{defaultMessage:"Time"}),width:"20%",render:e=>Object(j.jsx)(u.FormattedRelative,{value:new Date(e)})},{field:"full_request_path",name:o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.endpointTableHeading",{defaultMessage:"Endpoint"}),width:"50%",truncateText:!0,mobileOptions:{width:"100%"}},{field:"status",name:o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.statusTableHeading",{defaultMessage:"Status"}),dataType:"number",width:"100px",render:e=>Object(j.jsx)(l.EuiHealth,{color:g(e)},e)},{width:"100px",align:"right",render:e=>Object(j.jsx)(l.EuiButtonEmpty,{size:"s",className:"apiLogDetailButton","data-test-subj":"ApiLogsTableDetailsButton",onClick:()=>r(e)},o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.detailsButtonLabel",{defaultMessage:"Details"}))}],h=e?{pagination:{...Object(p.a)(n),showPerPageOptions:!1},onChange:Object(p.b)(s)}:{};return Object(j.jsx)(l.EuiBasicTable,i()({columns:d,items:a,responsive:!0,loading:t,noItemsMessage:Object(j.jsx)(y,null)},h))};a(761);const f=()=>{const{hasNewData:e}=Object(c.useValues)(F),{onUserRefresh:t}=Object(c.useActions)(F);return e?Object(j.jsx)(l.EuiPanel,{color:"subdued",hasShadow:!1,paddingSize:"s",className:"newApiEventsPrompt"},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.apiLogs.newEventsMessage",{defaultMessage:"New events have been logged."}),Object(j.jsx)(l.EuiButtonEmpty,{iconType:"refresh",size:"xs",onClick:t},o.i18n.translate("xpack.enterpriseSearch.appSearch.engines.apiLogs.newEventsButtonLabel",{defaultMessage:"Refresh"}))):null};var O=a(48);const y=()=>Object(j.jsx)(l.EuiEmptyPrompt,{iconType:"clock",title:Object(j.jsx)("h2",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.emptyTitle",{defaultMessage:"No API events in the last 24 hours"})),body:Object(j.jsx)("p",null,o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.emptyDescription",{defaultMessage:"Logs will update in real-time when an API request occurs."})),actions:Object(j.jsx)(l.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:O.b},o.i18n.translate("xpack.enterpriseSearch.appSearch.engine.apiLogs.empty.buttonLabel",{defaultMessage:"View the API reference"}))});var v=a(45),w=a(53),E=a(139);const C=()=>{const{dataLoading:e,apiLogs:t,meta:a}=Object(c.useValues)(F),{fetchApiLogs:s,pollForApiLogs:i}=Object(c.useActions)(F);return Object(r.useEffect)((()=>{s()}),[a.page.current]),Object(r.useEffect)((()=>{i()}),[]),Object(j.jsx)(w.a,{pageChrome:Object(v.d)([n.a]),pageHeader:{pageTitle:n.a},isLoading:e&&!t.length,isEmptyState:!t.length,emptyState:Object(j.jsx)(y,null)},Object(j.jsx)(E.a,{type:E.d.API}),Object(j.jsx)(l.EuiPanel,{hasBorder:!0},Object(j.jsx)(l.EuiFlexGroup,{gutterSize:"m",alignItems:"center",responsive:!1,wrap:!0},Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)(l.EuiTitle,{size:"s"},Object(j.jsx)("h2",null,n.e))),Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)(E.e,{type:E.d.API})),Object(j.jsx)(l.EuiFlexItem,null),Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)(f,null))),Object(j.jsx)(l.EuiSpacer,{size:"m"}),Object(j.jsx)(S,{hasPagination:!0}),Object(j.jsx)(b,null)))};var M=a(42),k=a(43),T=a(38);const F=Object(c.kea)({path:["enterprise_search","app_search","api_logs_logic"],actions:()=>({fetchApiLogs:({isPoll:e}={isPoll:!1})=>({isPoll:e}),pollForApiLogs:!0,onPollStart:e=>({intervalId:e}),onPollInterval:({results:e,meta:t})=>({results:e,meta:t}),storePolledData:({results:e,meta:t})=>({results:e,meta:t}),updateView:({results:e,meta:t})=>({results:e,meta:t}),onUserRefresh:!0,onPaginate:e=>({newPageIndex:e})}),reducers:()=>({dataLoading:[!0,{updateView:()=>!1,onPaginate:()=>!0}],apiLogs:[[],{updateView:(e,{results:t})=>t}],meta:[M.k,{updateView:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(p.c)(e,t)}],hasNewData:[!1,{storePolledData:()=>!0,updateView:()=>!1}],polledData:[{},{storePolledData:(e,t)=>t}],intervalId:[null,{onPollStart:(e,{intervalId:t})=>t}]}),listeners:({actions:e,values:t})=>({pollForApiLogs:()=>{if(t.intervalId)return;const a=window.setInterval((()=>e.fetchApiLogs({isPoll:!0})),n.b);e.onPollStart(a)},fetchApiLogs:async({isPoll:a})=>{if(a&&t.dataLoading)return;const{http:s}=T.a.values,{engineName:i}=v.a.values;try{const n=await s.get(`/internal/app_search/engines/${i}/api_logs`,{query:{"page[current]":t.meta.page.current,"filters[date][from]":d(-1),"filters[date][to]":d(),sort_direction:"desc"}});a?e.onPollInterval(n):e.updateView(n)}catch(e){a?Object(k.f)(n.d,{text:n.c,toastLifeTimeMs:.75*n.b}):Object(k.e)(e)}},onPollInterval:(a,n)=>{n();const s=t.meta.page.total_results,i=s!==a.meta.page.total_results;0===s&&i?e.updateView(a):i&&e.storePolledData(a)},onUserRefresh:()=>{e.updateView(t.polledData)}}),events:({values:e})=>({beforeUnmount(){null!==e.intervalId&&clearInterval(e.intervalId)}})})},,function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(11),s=a.n(n),i=a(37),r=a(816),c=a.n(r),l=a(13),o=a(42),u=a(2);const p=u.i18n.translate("xpack.enterpriseSearch.appSearch.multiInputRows.addValueButtonLabel",{defaultMessage:"Add value"}),d=u.i18n.translate("xpack.enterpriseSearch.appSearch.multiInputRows.removeValueButtonLabel",{defaultMessage:"Remove value"}),g=u.i18n.translate("xpack.enterpriseSearch.appSearch.multiInputRows.inputRowPlaceholder",{defaultMessage:"Enter a value"});a(811);var h=a(12);const j=({value:e,placeholder:t,autoFocus:a,onChange:n,onDelete:s,disableDelete:i,deleteLabel:r})=>Object(h.jsx)(l.EuiFlexGroup,{className:"inputRow",alignItems:"center",responsive:!1,gutterSize:"s"},Object(h.jsx)(l.EuiFlexItem,null,Object(h.jsx)(l.EuiFieldText,{fullWidth:!0,placeholder:t,value:e,onChange:e=>n(e.target.value),autoFocus:a})),Object(h.jsx)(l.EuiFlexItem,{grow:!1},Object(h.jsx)(l.EuiButtonIcon,{iconType:"trash",color:"danger",onClick:s,isDisabled:i,"aria-label":r,title:r,"data-test-subj":"deleteInputRowButton"}))),b=Object(i.kea)({path:e=>["enterprise_search","app_search","multi_input_rows_logic",e],key:e=>e.id,actions:()=>({addValue:!0,deleteValue:e=>({indexToDelete:e}),editValue:(e,t)=>({index:e,newValueValue:t})}),reducers:({props:e})=>({values:[e.values,{addValue:e=>[...e,""],deleteValue:(e,{indexToDelete:t})=>{const a=[...e];return a.splice(t,1),a},editValue:(e,{index:t,newValueValue:a})=>{const n=[...e];return n[t]=a,n}}],addedNewRow:[!1,{addValue:()=>!0}]}),selectors:{hasEmptyValues:[e=>[e.values],e=>e.indexOf("")>=0],hasOnlyOneValue:[e=>[e.values],e=>e.length<=1]}}),m=e=>e.filter((e=>e.length)),x=({id:e,initialValues:t=[""],onChange:a,onSubmit:n,showSubmitButton:r=!0,submitButtonText:u=o.h,addRowText:x=p,deleteRowLabel:S=d,inputPlaceholder:f=g})=>{const O=b({id:e,values:t}),{values:y,addedNewRow:v,hasEmptyValues:w,hasOnlyOneValue:E}=Object(i.useValues)(O),{addValue:C,editValue:M,deleteValue:k}=Object(i.useActions)(O);return c()((()=>{a&&a(m(y))}),[y]),Object(h.jsx)(l.EuiForm,{id:e,component:n?"form":"div",onSubmit:n?e=>{e.preventDefault(),n(m(y))}:void 0},y.map(((t,a)=>{const n=0===a,s=a===y.length-1;return Object(h.jsx)(j,{key:`inputRow-${e}-${a}`,value:t,placeholder:f,autoFocus:v?s:n,onChange:e=>M(a,e),onDelete:()=>k(a),disableDelete:E,deleteLabel:S})})),Object(h.jsx)(l.EuiButtonEmpty,{size:"s",iconType:"plusInCircle",onClick:C,isDisabled:w,"data-test-subj":"addInputRowButton"},x),r&&n&&Object(h.jsx)(s.a.Fragment,null,Object(h.jsx)(l.EuiSpacer,null),Object(h.jsx)(l.EuiButton,{fill:!0,isDisabled:E&&w,"data-test-subj":"submitInputValuesButton",type:"submit"},u)))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(47),s=a.n(n),i=a(11),r=a.n(i),c=(a(781),a(13)),l=a(2),o=a(41),u=a(48),p=a(79),d=a(313),g=a(102),h=(a(786),a(12));const j=({field:e,raw:t,snippet:a,type:n})=>Object(h.jsx)("div",{className:"appSearchResultField"},Object(h.jsx)("div",{className:"appSearchResultField__key eui-textTruncate"},n&&Object(h.jsx)(g.c,{fieldType:n}),e),Object(h.jsx)("div",{className:"appSearchResultField__separator","aria-hidden":!0}),Object(h.jsx)("div",{className:"appSearchResultField__value"},Object(h.jsx)(g.b,{className:"eui-textTruncate",raw:t,snippet:a,type:n})));var b=a(14);const m=({actions:e})=>Object(h.jsx)(c.EuiFlexGroup,{gutterSize:"s",responsive:!1},e.map((({onClick:e,title:t,iconType:a,iconColor:n,disabled:s})=>Object(h.jsx)(c.EuiFlexItem,{key:t,grow:!1},Object(h.jsx)(c.EuiButtonIcon,{iconType:a,onClick:e,color:n||"primary","aria-label":t,title:t,disabled:s})))));a(791);var x=a(78),S=a(120);const f=({field:e,type:t,value:a,href:n})=>{let s="-";"string"==typeof a?s=a:"number"==typeof a&&(s="clicks"===t?l.i18n.translate("xpack.enterpriseSearch.appSearch.result.clicks",{defaultMessage:"{clicks} Clicks",values:{clicks:a},description:"This is click count for Adaptive Relevance suggestion results"}):parseFloat(a.toFixed(2)).toString());const i=()=>Object(h.jsx)(S.a,{content:s,length:30,tooltipType:"title",beginning:"id"===t});return Object(h.jsx)("span",{className:`appSearchResultHeaderItem ${"score"===t&&"appSearchResultHeaderItem__score"}`},"clicks"!==t&&Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(S.a,{content:`${e}:`,length:30,tooltipType:"title"}),""),n?Object(h.jsx)(x.e,{to:n},Object(h.jsx)(i,null)):Object(h.jsx)(i,null))};a(801);const O=({showScore:e,resultMeta:t,isMetaEngine:a,actions:n,documentLink:s,resultPosition:i,showClick:r})=>Object(h.jsx)("header",{className:"appSearchResultHeader"},Object(h.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"spaceBetween",responsive:!1,wrap:!0},void 0!==i&&Object(h.jsx)(c.EuiFlexItem,{grow:!1},Object(h.jsx)(c.EuiBadge,{color:"hollow"},Object(h.jsx)(b.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.result.resultPositionLabel",defaultMessage:"#{resultPosition}",values:{resultPosition:i}}))),Object(h.jsx)(c.EuiFlexItem,{grow:!0},Object(h.jsx)(f,{href:s,"data-test-subj":"ResultId",field:"ID",value:t.id,type:"id"})),r&&Object(h.jsx)(c.EuiFlexItem,{grow:!1},Object(h.jsx)(f,{"data-test-subj":"ResultClicks",field:"clicks",value:t.clicks,type:"clicks"})),e&&Object(h.jsx)(c.EuiFlexItem,{grow:!1},Object(h.jsx)(f,{"data-test-subj":"ResultScore",field:"Score",value:t.score,type:"score"})),a&&Object(h.jsx)(c.EuiFlexItem,{grow:!1},Object(h.jsx)(f,{"data-test-subj":"ResultEngine",field:"Engine",value:t.engine,type:"string"})),n.length>0&&Object(h.jsx)(c.EuiFlexItem,{grow:!1},Object(h.jsx)(m,{actions:n})))),y=({result:e,isMetaEngine:t,showScore:a=!1,shouldLinkToDetailPage:n=!1,schemaForTypeHighlights:r,actions:g=[],dragHandleProps:b,resultPosition:m,showClick:x=!1})=>{const[S,f]=Object(i.useState)(!1),y=e._meta,v=Object(i.useMemo)((()=>Object.entries(Object(d.b)(e)).filter((([e])=>"id"!==e))),[e]),w=v.length,E=e=>{if(r)return(t=r)&&Object.values(t).reduce(((e,t)=>e&&"string"!=typeof t),!0)?r[e].type:r[e];var t},C=n?Object(p.a)(u.B,{engineName:y.engine,documentId:y.id}):void 0;return n&&C&&(g=[{onClick:()=>o.a.values.navigateToUrl(C),title:l.i18n.translate("xpack.enterpriseSearch.appSearch.result.documentDetailLink",{defaultMessage:"Visit document details"}),iconType:"eye"},...g]),Object(h.jsx)(c.EuiPanel,{paddingSize:"none",hasShadow:!1,className:"appSearchResult","data-test-subj":"AppSearchResult",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.result.title",{defaultMessage:"Document {id}",values:{id:e.id.raw}})},b&&Object(h.jsx)("div",s()({},b,{className:"appSearchResult__dragHandle"}),Object(h.jsx)(c.EuiIcon,{type:"grab"})),Object(h.jsx)("article",{className:"appSearchResult__content"},Object(h.jsx)(O,{resultMeta:y,showScore:!!a,isMetaEngine:t,documentLink:C,actions:g,resultPosition:m,showClick:x}),v.slice(0,S?v.length:5).map((([e,t])=>Object(h.jsx)(j,{key:e,field:e,raw:t.raw,snippet:t.snippet,type:E(e)})))),w>5&&Object(h.jsx)("button",{type:"button",className:"appSearchResult__hiddenFieldsToggle",onClick:()=>f(!S)},S?l.i18n.translate("xpack.enterpriseSearch.appSearch.result.hideAdditionalFields",{defaultMessage:"Hide additional fields"}):l.i18n.translate("xpack.enterpriseSearch.appSearch.result.showAdditionalFields",{defaultMessage:"Show {numberOfAdditionalFields, number} additional {numberOfAdditionalFields, plural, one {field} other {fields}}",values:{numberOfAdditionalFields:w-5}}),Object(h.jsx)(c.EuiIcon,{type:S?"arrowUp":"arrowDown","data-test-subj":S?"CollapseResult":"ExpandResult"})))}},,function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(47),s=a.n(n),i=(a(11),a(12));const r=({...e})=>Object(i.jsx)("svg",s()({xmlns:"http://www.w3.org/2000/svg",className:"euiIcon",width:16,height:16},e,{viewBox:"0 0 16 16","aria-hidden":"true"}),Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.4934 8.12804C11.4134 7.39347 12 6.26556 12 5C12 2.79086 10.2091 1 8 1C5.79086 1 4 2.79086 4 5C4 6.28899 4.6086 7.43538 5.55822 8.16854C6.27087 8.71875 6.9811 9.6127 6.99963 10.7647L7.5 10.9211V7.20711L6.14645 5.85355C5.95118 5.65829 5.95118 5.34171 6.14645 5.14645C6.34171 4.95118 6.65829 4.95118 6.85355 5.14645L8 6.29289L9.14645 5.14645C9.34171 4.95118 9.65829 4.95118 9.85355 5.14645C10.0488 5.34171 10.0488 5.65829 9.85355 5.85355L8.5 7.20711V11.2336L9 11.3898V10.8927C9 9.66814 9.7538 8.71852 10.4934 8.12804ZM11.1173 8.90952C10.4961 9.40552 10 10.0977 10 10.8927V12.0699C10 12.4072 9.67283 12.6478 9.35086 12.5471L6.65782 11.7056C6.26647 11.5833 6 11.2208 6 10.8108C6 10.0656 5.53698 9.4155 4.94711 8.96009C3.76279 8.04573 3 6.61195 3 5C3 2.23858 5.23858 0 8 0C10.7614 0 13 2.23858 13 5C13 6.58253 12.2648 7.99335 11.1173 8.90952ZM6.65813 12.5257C6.39616 12.4383 6.113 12.5799 6.02567 12.8419C5.93835 13.1039 6.07993 13.387 6.3419 13.4744L8.85539 14.3122C8.94176 14.341 9.00001 14.4218 9.00001 14.5128C9.00001 14.6572 8.85858 14.7592 8.72161 14.7135L6.65813 14.0257C6.39616 13.9383 6.113 14.0799 6.02567 14.3419C5.93835 14.6039 6.07993 14.887 6.3419 14.9744L8.40539 15.6622C9.18988 15.9237 10 15.3398 10 14.5128C10 13.9914 9.66633 13.5284 9.17161 13.3635L6.65813 12.5257Z"})),c=({...e})=>Object(i.jsx)("svg",s()({xmlns:"http://www.w3.org/2000/svg",className:"euiIcon",width:16,height:16},e,{viewBox:"0 0 16 16","aria-hidden":"true"}),Object(i.jsx)("path",{d:"M15.0331 0.886954C15.2956 0.973255 15.5233 1.21266 15.5414 1.55005C15.6669 3.88393 15.361 7.34896 14.1321 10.0468C13.5157 11.3998 12.6491 12.5993 11.4483 13.3465C10.2327 14.1029 8.72706 14.3628 6.91355 13.9235C6.53012 13.8306 6.17184 13.7065 5.83884 13.5557C5.54781 13.4238 5.49404 13.047 5.72206 12.8232L5.77108 12.7753C5.92249 12.6281 6.15055 12.6009 6.34449 12.6844C6.59563 12.7926 6.86382 12.8825 7.14903 12.9516C8.73299 13.3354 9.95814 13.096 10.92 12.4974C11.8967 11.8897 12.6543 10.8786 13.222 9.63227C14.2675 7.33734 14.6079 4.37902 14.5638 2.17691C13.7629 2.93049 13.0215 3.38061 12.3014 3.63327C11.4623 3.92768 10.6938 3.93856 9.97619 3.90053C9.79372 3.89086 9.61467 3.87835 9.43764 3.86598C8.22713 3.78139 7.11038 3.70335 5.63121 4.58567C3.63527 5.77625 3.1 8.36625 4.00645 10.3814C5.40683 9.10928 7.13522 8.0625 9.00009 8.0625C9.27624 8.0625 9.50009 8.28636 9.50009 8.5625C9.50009 8.83864 9.27624 9.0625 9.00009 9.0625C7.39524 9.0625 5.79665 10.0415 4.41045 11.3724C3.03666 12.6914 1.95051 14.2809 1.37654 15.3332C1.24431 15.5756 0.940593 15.6649 0.698168 15.5327C0.455744 15.4005 0.366415 15.0967 0.498647 14.8543C1.04523 13.8523 2.01371 12.4126 3.25129 11.1188C1.94153 8.63223 2.53953 5.26546 5.11893 3.72686C6.88003 2.67636 8.2969 2.77931 9.52388 2.86847C9.69587 2.88096 9.86414 2.89319 10.0291 2.90193C10.6974 2.93734 11.3129 2.92032 11.9703 2.68967C12.6272 2.45919 13.3678 1.99999 14.2457 1.08421C14.4648 0.855623 14.776 0.802403 15.0331 0.886954Z"}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(47),s=a.n(n),i=(a(11),a(35)),r=a(36),c=a(12);const l=({startTimestamp:e,endTimestamp:t,hoursAgo:a=24,...n})=>(t||(t=Date.now()),e||(e=t-60*a*60*1e3),Object(c.jsx)(i.EuiThemeProvider,null,Object(c.jsx)(r.LogStream,s()({startTimestamp:e,endTimestamp:t},n))))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(195);case"v8light":return a(197)}},function(e,t,a){var n=a(39),s=a(196);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".urlComboBox .euiComboBox__inputWrap{min-height:60px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(198);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".urlComboBox .euiComboBox__inputWrap{min-height:60px}",""]),e.exports=t},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a(11);var n=a(13),s=(a(200),a(12));const i=({hasBorder:e,iconType:t,initialIsOpen:a,items:i,rowCount:r=10,title:c})=>{const l=Object(n.useGeneratedHtmlId)({prefix:"accordionList"}),o=i.length>r;return Object(s.jsx)(n.EuiAccordion,{initialIsOpen:a,arrowProps:{isDisabled:0===i.length},className:e?"appSearchAccordion--bordered":"appSearchAccordion",buttonContent:Object(s.jsx)(n.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center"},Object(s.jsx)(n.EuiFlexItem,{grow:!1},Object(s.jsx)(n.EuiIcon,{type:t})),Object(s.jsx)(n.EuiFlexItem,null,Object(s.jsx)(n.EuiTitle,{size:"s"},Object(s.jsx)("h3",null,c)))),id:l,extraAction:Object(s.jsx)(n.EuiNotificationBadge,{color:i.length>0?"accent":"subdued",size:"m"},i.length)},Object(s.jsx)(n.EuiInMemoryTable,{items:i.map((e=>({item:e}))),columns:[{render:({item:e})=>e}],pagination:!!o&&{showPerPageOptions:!1}}),!o&&Object(s.jsx)(n.EuiSpacer,{size:"s"}))}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(201);case"v8light":return a(203)}},function(e,t,a){var n=a(39),s=a(202);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchAccordion--bordered{border:1px solid #343741;border-radius:6px;padding:12px}.appSearchAccordion .euiBasicTable .euiTableRow>.euiTableRowCell,.appSearchAccordion--bordered .euiBasicTable .euiTableRow>.euiTableRowCell{border-bottom:none}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(204);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchAccordion--bordered{border:1px solid #d3dae6;border-radius:6px;padding:12px}.appSearchAccordion .euiBasicTable .euiTableRow>.euiTableRowCell,.appSearchAccordion--bordered .euiBasicTable .euiTableRow>.euiTableRowCell{border-bottom:none}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(206);case"v8light":return a(208)}},function(e,t,a){var n=a(39),s=a(207);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".dataPanel{overflow:hidden;position:relative}.dataPanel--filled .euiTable{background-color:initial}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(209);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".dataPanel{overflow:hidden;position:relative}.dataPanel--filled .euiTable{background-color:initial}",""]),e.exports=t},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e[e.ShowCreationModes=0]="ShowCreationModes",e[e.AddDocuments=1]="AddDocuments",e[e.ShowSummary=2]="ShowSummary"}(n||(n={}))},function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.universalLanguage",{defaultMessage:"Universal"}),i=n.i18n.translate("xpack.enterpriseSearch.appSearch.actions.restoreDefaultsButonLabel",{defaultMessage:"Restore defaults"})},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>e.trim().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^[-]+|[-]+$/g,"").toLowerCase()},,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return Ye}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.crawler.title",{defaultMessage:"Web Crawler"});var i=a(11),r=a.n(i),c=a(37),l=a(54),o=a(48),u=a(43),p=a(38),d=a(45),g=a(42),h=a(61);let j;!function(e){e.allow="allow",e.deny="deny"}(j||(j={}));const b=e=>{switch(e){case j.allow:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesPolicies.allowLabel",{defaultMessage:"Allow"});case j.deny:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesPolicies.disallowLabel",{defaultMessage:"Disallow"})}};let m;!function(e){e.beginsWith="begins",e.endsWith="ends",e.contains="contains",e.regex="regex"}(m||(m={}));const x=e=>{switch(e){case m.beginsWith:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesCrawlerRules.beginsWithLabel",{defaultMessage:"Begins with"});case m.endsWith:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesCrawlerRules.endsWithLabel",{defaultMessage:"Ends with"});case m.contains:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesCrawlerRules.containsLabel",{defaultMessage:"Contains"});case m.regex:return n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesCrawlerRules.regexLabel",{defaultMessage:"Regex"})}};let S,f;!function(e){e.Pending="pending",e.Suspended="suspended",e.Starting="starting",e.Running="running",e.Suspending="suspending",e.Canceling="canceling",e.Success="success",e.Failed="failed",e.Canceled="canceled",e.Skipped="skipped"}(S||(S={})),function(e){e.Full="full",e.Partial="partial"}(f||(f={}));const O={[S.Pending]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.pending",{defaultMessage:"Pending"}),[S.Suspended]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.suspended",{defaultMessage:"Suspended"}),[S.Starting]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.starting",{defaultMessage:"Starting"}),[S.Running]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.running",{defaultMessage:"Running"}),[S.Suspending]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.suspending",{defaultMessage:"Suspending"}),[S.Canceling]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.canceling",{defaultMessage:"Canceling"}),[S.Success]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.success",{defaultMessage:"Success"}),[S.Failed]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.failed",{defaultMessage:"Failed"}),[S.Canceled]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.canceled",{defaultMessage:"Canceled"}),[S.Skipped]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusOptions.skipped",{defaultMessage:"Skipped"})},y={[f.Full]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlTypeOptions.full",{defaultMessage:"Full"}),[f.Partial]:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlTypeOptions.partial",{defaultMessage:"Partial"})};let v;function w(e){const{id:t,name:a,sitemaps:n,created_on:s,last_visited_at:i,document_count:r,crawl_rules:c,default_crawl_rule:l,entry_points:o,deduplication_enabled:u,deduplication_fields:p,available_deduplication_fields:d}=e,g={id:t,url:a,documentCount:r,createdOn:s,crawlRules:c,sitemaps:n,entryPoints:o,deduplicationEnabled:u,deduplicationFields:p,availableDeduplicationFields:d};return i&&(g.lastCrawl=i),l&&(g.defaultCrawlRule=l),g}function E(e){const{status:{avg_response_time_msec:t,crawl_duration_msec:a,pages_visited:n,urls_allowed:s,status_codes:i}}=e;return{status:{urlsAllowed:s,pagesVisited:n,avgResponseTimeMSec:t,crawlDurationMSec:a,statusCodes:i}}}function C(e){const{id:t,status:a,created_at:n,began_at:s,completed_at:i}=e;return{id:t,status:a,createdAt:n,beganAt:s,completedAt:i}}function M(e){const{domain_allowlist:t,seed_urls:a,sitemap_urls:n,max_crawl_depth:s}=e;return{domainAllowlist:t,seedUrls:a,sitemapUrls:n,maxCrawlDepth:s}}function k(e){const{domains:t,events:a,most_recent_crawl_request:n}=e;return{domains:t.map((e=>w(e))),events:a.map((e=>function(e){const{id:t,stage:a,status:n,created_at:s,began_at:i,completed_at:r,type:c,crawl_config:l}=e;return{id:t,stage:a,status:n,createdAt:s,beganAt:i,completedAt:r,type:c,crawlConfig:M(l)}}(e))),mostRecentCrawlRequest:n&&C(n)}}!function(e){e.hours="hour",e.days="day",e.weeks="week",e.months="month"}(v||(v={}));const T=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.action.deleteDomain.confirmationPopupMessage",{defaultMessage:'Are you sure you want to remove the domain "{domainUrl}" and all of its settings?',values:{domainUrl:e}}),F=e=>e.rule===m.regex?n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.regexPathPatternTooltip",{defaultMessage:"The path pattern is a regular expression compatible with the Ruby language regular expression engine."}):n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.pathPatternTooltip",{defaultMessage:"The path pattern is a literal string except for the asterisk (*) character, which is a meta character that will match anything."}),_=e=>({id:e.id,name:e.name,seedUrls:e.seed_urls,sitemapUrls:e.sitemap_urls}),I=Object(c.kea)({path:["enterprise_search","app_search","crawler","crawler_domains_logic"],actions:{deleteDomain:e=>({domain:e}),fetchCrawlerDomainsData:!0,onReceiveData:(e,t)=>({domains:e,meta:t}),onPaginate:e=>({newPageIndex:e}),crawlerDomainDeleted:e=>({data:e})},reducers:{dataLoading:[!0,{onReceiveData:()=>!1,onPaginate:()=>!0}],domains:[[],{onReceiveData:(e,{domains:t})=>t}],meta:[g.k,{onReceiveData:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(h.c)(e,t)}]},listeners:({actions:e,values:t})=>({fetchCrawlerDomainsData:async()=>{const{http:a}=p.a.values,{engineName:n}=d.a.values,{meta:s}=t,i={"page[current]":s.page.current,"page[size]":s.page.size};try{const t=await a.get(`/internal/app_search/engines/${n}/crawler/domains`,{query:i}),s=t.results.map(w);e.onReceiveData(s,t.meta)}catch(e){Object(u.e)(e)}},deleteDomain:async({domain:t})=>{const{http:a}=p.a.values,{engineName:n}=d.a.values;try{const s=k(await a.delete(`/internal/app_search/engines/${n}/crawler/domains/${t.id}`,{query:{respond_with:"crawler_details"}}));e.crawlerDomainDeleted(s),e.fetchCrawlerDomainsData()}catch(e){Object(u.e)(e)}}})}),R=[S.Pending,S.Starting,S.Running,S.Canceling],A=Object(c.kea)({path:["enterprise_search","app_search","crawler_logic"],actions:{clearTimeoutId:!0,createNewTimeoutForCrawlerData:e=>({duration:e}),fetchCrawlerData:!0,onCreateNewTimeout:e=>({timeoutId:e}),onReceiveCrawlerData:e=>({data:e}),onStartCrawlRequestComplete:!0,startCrawl:e=>({overrides:e}),stopCrawl:()=>null},reducers:{dataLoading:[!0,{onReceiveCrawlerData:()=>!1}],domains:[[],{onReceiveCrawlerData:(e,{data:{domains:t}})=>t}],events:[[],{onReceiveCrawlerData:(e,{data:{events:t}})=>t}],mostRecentCrawlRequest:[null,{onReceiveCrawlerData:(e,{data:{mostRecentCrawlRequest:t}})=>t}],timeoutId:[null,{clearTimeoutId:()=>null,onCreateNewTimeout:(e,{timeoutId:t})=>t}]},selectors:({selectors:e})=>({mostRecentCrawlRequestStatus:[()=>[e.mostRecentCrawlRequest],e=>e?e.status:S.Success]}),listeners:({actions:e,values:t})=>({fetchCrawlerData:async()=>{const{http:t}=p.a.values,{engineName:a}=d.a.values;try{const n=k(await t.get(`/internal/app_search/engines/${a}/crawler`));e.onReceiveCrawlerData(n),n.mostRecentCrawlRequest&&R.includes(n.mostRecentCrawlRequest.status)||n.events.find((e=>R.includes(e.status)))?e.createNewTimeoutForCrawlerData(1e3):e.clearTimeoutId()}catch(t){Object(u.e)(t),e.createNewTimeoutForCrawlerData(5e3)}},startCrawl:async({overrides:t={}})=>{const{http:a}=p.a.values,{engineName:n}=d.a.values;try{await a.post(`/internal/app_search/engines/${n}/crawler/crawl_requests`,{body:JSON.stringify({overrides:t})}),e.fetchCrawlerData()}catch(e){Object(u.e)(e)}finally{e.onStartCrawlRequestComplete()}},stopCrawl:async()=>{const{http:t}=p.a.values,{engineName:a}=d.a.values;try{await t.post(`/internal/app_search/engines/${a}/crawler/crawl_requests/cancel`),e.fetchCrawlerData()}catch(e){Object(u.e)(e)}},createNewTimeoutForCrawlerData:({duration:a})=>{t.timeoutId&&clearTimeout(t.timeoutId);const n=setTimeout((()=>{e.fetchCrawlerData()}),a);e.onCreateNewTimeout(n)},[I.actionTypes.crawlerDomainDeleted]:({data:t})=>{e.onReceiveCrawlerData(t)}}),events:({values:e})=>({beforeUnmount:()=>{e.timeoutId&&clearTimeout(e.timeoutId)}})});var L=a(13),D=a(53),z=a(14),P=a(72),N=a(41);const B=e=>{let t=e,a="/";const n=e.search(/[^\:\/]\//);return-1!==n&&(t=e.substring(0,n+1),a=e.substring(n+1)),{domain:t,entryPoint:a}},V=e=>{switch(e){case"valid":return"success";case"warning":return"warning";case"invalid":return"danger";default:return"subdued"}},U={networkConnectivity:{state:"invalid",message:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.networkConnectivityFailureMessage",{defaultMessage:'Unable to establish a network connection because the "Initial validation" check failed.'})},indexingRestrictions:{state:"invalid",message:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.indexingRestrictionsFailureMessage",{defaultMessage:'Unable to determine indexing restrictions because the "Network connectivity" check failed.'})},contentVerification:{state:"invalid",message:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.contentVerificationFailureMessage",{defaultMessage:'Unable to verify content because the "Indexing restrictions" check failed.'})}},H={addDomainFormInputValue:"https://",entryPointValue:"/",domainValidationResult:{steps:{contentVerification:{state:""},indexingRestrictions:{state:""},initialValidation:{state:""},networkConnectivity:{state:""}}},allowSubmit:!1,ignoreValidationFailure:!1,isValidationLoading:!1},q=Object(c.kea)({path:["enterprise_search","app_search","crawler","add_domain"],actions:()=>({clearDomainFormInputValue:!0,initialValidation:!0,performDomainValidationStep:(e,t)=>({stepName:e,checks:t}),onSubmitNewDomainSuccess:e=>({domain:e}),onSubmitNewDomainError:e=>({errors:e}),setAddDomainFormInputValue:e=>e,setDomainValidationResult:e=>({change:e}),setIgnoreValidationFailure:e=>e,startDomainValidation:!0,submitNewDomain:!0,validateDomainInitialVerification:(e,t)=>({newValue:e,newEntryPointValue:t}),validateDomainContentVerification:!0,validateDomainIndexingRestrictions:!0,validateDomainNetworkConnectivity:!0}),reducers:()=>({addDomainFormInputValue:[H.addDomainFormInputValue,{clearDomainFormInputValue:()=>H.addDomainFormInputValue,setAddDomainFormInputValue:(e,t)=>t,validateDomainInitialVerification:(e,{newValue:t})=>t}],domainValidationResult:[H.domainValidationResult,{clearDomainFormInputValue:()=>H.domainValidationResult,setAddDomainFormInputValue:()=>H.domainValidationResult,setDomainValidationResult:({steps:e},{change:t})=>({steps:{...e,...t}}),startDomainValidation:()=>({steps:{contentVerification:{state:"loading"},indexingRestrictions:{state:"loading"},initialValidation:{state:"loading"},networkConnectivity:{state:"loading"}}})}],entryPointValue:[H.entryPointValue,{clearDomainFormInputValue:()=>H.entryPointValue,setAddDomainFormInputValue:()=>H.entryPointValue,validateDomainInitialVerification:(e,{newEntryPointValue:t})=>t}],errors:[[],{clearDomainFormInputValue:()=>[],setAddDomainFormInputValue:()=>[],validateDomainInitialVerification:()=>[],submitNewDomain:()=>[],onSubmitNewDomainError:(e,{errors:t})=>t}],ignoreValidationFailure:[H.ignoreValidationFailure,{clearDomainFormInputValue:()=>H.ignoreValidationFailure,setAddDomainFormInputValue:()=>H.ignoreValidationFailure,setIgnoreValidationFailure:(e,t)=>t}]}),selectors:({selectors:e})=>({isValidationLoading:[()=>[e.domainValidationResult],e=>!!Object.values(e.steps).find((e=>"loading"===e.state))],hasValidationCompleted:[()=>[e.domainValidationResult],e=>!Object.values(e.steps).find((e=>"loading"===e.state||""===e.state))],hasBlockingFailure:[()=>[e.domainValidationResult],e=>!!Object.values(e.steps).find((e=>e.blockingFailure))],canIgnoreValidationFailure:[()=>[e.hasValidationCompleted,e.domainValidationResult],(e,t)=>!!e&&(t.steps.indexingRestrictions.blockingFailure||t.steps.contentVerification.blockingFailure)],allowSubmit:[()=>[e.ignoreValidationFailure,e.hasValidationCompleted,e.hasBlockingFailure],(e,t,a)=>!!e||t&&!a],displayValidation:[()=>[e.isValidationLoading,e.hasValidationCompleted],(e,t)=>e||t]}),listeners:({actions:e,values:t})=>({onSubmitNewDomainSuccess:({domain:e})=>{Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.action.add.successMessage",{defaultMessage:"Successfully added domain '{domainUrl}'",values:{domainUrl:e.url}})),N.a.values.navigateToUrl(Object(d.c)(o.t,{domainId:e.id}))},performDomainValidationStep:async({stepName:a,checks:s})=>{const{http:i}=p.a.values,r=(e=>{switch(e){case"initialValidation":return U;case"networkConnectivity":return{indexingRestrictions:U.indexingRestrictions,contentVerification:U.contentVerification};case"indexingRestrictions":return{contentVerification:U.contentVerification};default:return{}}})(a);try{const n=function(e){var t;if(!e.valid)return{state:"invalid",blockingFailure:!0,message:null===(t=e.results.find((e=>"failure"===e.result)))||void 0===t?void 0:t.comment};const a=e.results.find((e=>"warning"===e.result));return a?{state:"warning",blockingFailure:!e.valid,message:a.comment}:{state:"valid"}}(await i.post("/internal/app_search/crawler/validate_url",{body:JSON.stringify({url:t.addDomainFormInputValue.trim(),checks:s})}));if(n.blockingFailure)e.setDomainValidationResult({[a]:n,...r});else switch(e.setDomainValidationResult({[a]:n}),a){case"initialValidation":e.validateDomainNetworkConnectivity();break;case"networkConnectivity":e.validateDomainIndexingRestrictions();break;case"indexingRestrictions":e.validateDomainContentVerification()}}catch(t){e.setDomainValidationResult({[a]:{state:"invalid",blockingFailure:!0,message:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.unexpectedValidationErrorMessage",{defaultMessage:"Unexpected error"})},...r})}},submitNewDomain:async()=>{const{http:a}=p.a.values,{engineName:n}=d.a.values,s=JSON.stringify({name:t.addDomainFormInputValue.trim(),entry_points:[{value:t.entryPointValue}]});try{const t=k(await a.post(`/internal/app_search/engines/${n}/crawler/domains`,{query:{respond_with:"crawler_details"},body:s}));A.actions.onReceiveCrawlerData(t);const i=t.domains[t.domains.length-1];i&&e.onSubmitNewDomainSuccess(i)}catch(t){const a=Object(P.c)(t);e.onSubmitNewDomainError(a)}},startDomainValidation:async()=>{const{domain:a,entryPoint:n}=B(t.addDomainFormInputValue.trim()),s=await(async e=>{const{http:t}=p.a.values;if(!e.startsWith("https://")&&!e.startsWith("http://"))try{const a="/internal/app_search/crawler/validate_url",n=["tcp","url_request"];if((await t.post(a,{body:JSON.stringify({url:`https://${e}`,checks:n})})).valid)return`https://${e}`;if((await t.post(a,{body:JSON.stringify({url:`http://${e}`,checks:n})})).valid)return`http://${e}`}catch(e){}return e})(a);e.validateDomainInitialVerification(s,n)},validateDomainInitialVerification:()=>{e.performDomainValidationStep("initialValidation",["url"])},validateDomainContentVerification:()=>{e.performDomainValidationStep("contentVerification",["url_request","url_content"])},validateDomainIndexingRestrictions:()=>{e.performDomainValidationStep("indexingRestrictions",["robots_txt"])},validateDomainNetworkConnectivity:()=>{e.performDomainValidationStep("networkConnectivity",["dns","tcp"])}})});var G=a(12);const $=({state:e})=>{switch(e){case"valid":return Object(G.jsx)(L.EuiIcon,{color:"success",type:"check"});case"warning":return Object(G.jsx)(L.EuiIcon,{color:"warning",type:"warning"});case"invalid":return Object(G.jsx)(L.EuiIcon,{color:"danger",type:"cross"});default:return Object(G.jsx)(L.EuiLoadingSpinner,null)}},W=({step:e,label:t,action:a})=>{const n="invalid"===e.state||"warning"===e.state;return Object(G.jsx)(L.EuiPanel,{hasShadow:!1,color:V(e.state)},Object(G.jsx)(L.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)($,{state:e.state})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiTitle,{size:"xs"},Object(G.jsx)("h3",null,t)))),n&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"xs"}),Object(G.jsx)(L.EuiMarkdownFormat,{textSize:"s","data-test-subj":"errorMessage"},e.message||""),a&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"s"}),a)))},Q=()=>{const{addDomainFormInputValue:e,canIgnoreValidationFailure:t,domainValidationResult:a,ignoreValidationFailure:s}=Object(c.useValues)(q),{setIgnoreValidationFailure:i}=Object(c.useActions)(q);return Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(W,{step:a.steps.initialValidation,label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.initialVaidationLabel",{defaultMessage:"Initial validation"})})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(W,{step:a.steps.networkConnectivity,label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.networkConnectivityLabel",{defaultMessage:"Network connectivity"}),action:Object(G.jsx)(L.EuiButton,{size:"s",href:e,target:"_blank"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.testUrlButtonLabel",{defaultMessage:"Test URL in the browser"}))})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(W,{step:a.steps.indexingRestrictions,label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.indexingRestrictionsLabel",{defaultMessage:"Indexing restrictions"})})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(W,{step:a.steps.contentVerification,label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.contentVerificationLabel",{defaultMessage:"Content verification"})})),t&&Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiPanel,{hasShadow:!1},Object(G.jsx)(L.EuiCheckbox,{id:`crawler_domain_${e}`,label:Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiText,{size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.ignoreValidationTitle",{defaultMessage:"Ignore validation failures and continue"})),Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(L.EuiText,{color:"subdued",size:"xs"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.ignoreValidationDescription",{defaultMessage:"The web crawler will be unable to index any content on this domain until the errors above are addressed."}))),checked:s,onChange:e=>i(e.target.checked)})))))},J=()=>{const{setAddDomainFormInputValue:e,startDomainValidation:t}=Object(c.useActions)(q),{addDomainFormInputValue:a,displayValidation:s,entryPointValue:i}=Object(c.useValues)(q);return Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiForm,{onSubmit:e=>{e.preventDefault(),t()},component:"form"},Object(G.jsx)(L.EuiFormRow,{fullWidth:!0,label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.urlLabel",{defaultMessage:"Domain URL"}),helpText:Object(G.jsx)(L.EuiText,{size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.urlHelpText",{defaultMessage:"Domain URLs require a protocol and cannot contain any paths."}))},Object(G.jsx)(L.EuiFlexGroup,null,Object(G.jsx)(L.EuiFlexItem,{grow:!0},Object(G.jsx)(L.EuiFieldText,{autoFocus:!0,placeholder:"https://",value:a,onChange:t=>e(t.target.value),fullWidth:!0})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiButton,{type:"submit",fill:!0,disabled:0===a.length},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.validateButtonLabel",{defaultMessage:"Validate Domain"}))))),"/"!==i&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiText,{size:"s"},Object(G.jsx)("p",null,Object(G.jsx)("strong",null,Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.addDomainForm.entryPointLabel",defaultMessage:"Web Crawler entry point has been set as {entryPointValue}",values:{entryPointValue:Object(G.jsx)(L.EuiCode,null,i)}}))))),s&&Object(G.jsx)(Q,null)))},K=()=>{const{errors:e}=Object(c.useValues)(q);return e.length>0?Object(G.jsx)(L.EuiCallOut,{color:"danger",iconType:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.errorsTitle",{defaultMessage:"Something went wrong. Please address the errors and try again."})},e.map(((e,t)=>Object(G.jsx)("p",{key:t},e)))):null},Y=()=>{const{submitNewDomain:e}=Object(c.useActions)(q),{allowSubmit:t}=Object(c.useValues)(q);return Object(G.jsx)(L.EuiButton,{fill:!0,type:"button",disabled:!t,onClick:e},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainForm.submitButtonLabel",{defaultMessage:"Add domain"}))},Z=()=>{const[e,t]=Object(i.useState)(!1);return Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiButton,{size:"s",color:"success",iconType:"plusInCircle",onClick:()=>t(!0)},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainFlyout.openButtonLabel",{defaultMessage:"Add domain"})),e&&Object(G.jsx)(L.EuiPortal,null,Object(G.jsx)(L.EuiFlyout,{onClose:()=>t(!1)},Object(G.jsx)(L.EuiFlyoutHeader,null,Object(G.jsx)(L.EuiTitle,{size:"m"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainFlyout.title",{defaultMessage:"Add a new domain"})))),Object(G.jsx)(L.EuiFlyoutBody,{banner:Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"l"}),Object(G.jsx)(K,null))},Object(G.jsx)(L.EuiText,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.addDomainFlyout.description",{defaultMessage:'You can add multiple domains to this engine\'s web crawler. Add another domain here and modify the entry points and crawl rules from the "Manage" page.'}),Object(G.jsx)("p",null)),Object(G.jsx)(L.EuiSpacer,{size:"l"}),Object(G.jsx)(J,null)),Object(G.jsx)(L.EuiFlyoutFooter,null,Object(G.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiButtonEmpty,{onClick:()=>t(!1)},g.e)),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(Y,null)))))))};var X=a(64);const ee=(e,t)=>{const a=t.reduce(((e,t)=>(e[t]=!0,e)),{});return e.filter((e=>{const{domain:t}=B(e);return!!a[t]}))},te=Object(c.kea)({path:["enterprise_search","app_search","crawler","crawl_custom_settings_flyout"],actions:()=>({fetchDomainConfigData:!0,hideFlyout:!0,onRecieveDomainConfigData:e=>({domainConfigs:e}),onSelectCustomEntryPointUrls:e=>({entryPointUrls:e}),onSelectCustomSitemapUrls:e=>({sitemapUrls:e}),onSelectDomainUrls:e=>({domainUrls:e}),onSelectEntryPointUrls:e=>({entryPointUrls:e}),onSelectMaxCrawlDepth:e=>({maxCrawlDepth:e}),onSelectSitemapUrls:e=>({sitemapUrls:e}),startCustomCrawl:!0,toggleIncludeSitemapsInRobotsTxt:!0,showFlyout:!0}),reducers:()=>({customEntryPointUrls:[[],{showFlyout:()=>[],onSelectCustomEntryPointUrls:(e,{entryPointUrls:t})=>t}],customSitemapUrls:[[],{showFlyout:()=>[],onSelectCustomSitemapUrls:(e,{sitemapUrls:t})=>t}],domainConfigs:[[],{onRecieveDomainConfigData:(e,{domainConfigs:t})=>t}],includeSitemapsInRobotsTxt:[!0,{showFlyout:()=>!0,toggleIncludeSitemapsInRobotsTxt:e=>!e}],isDataLoading:[!0,{showFlyout:()=>!0,onRecieveDomainConfigData:()=>!1}],isFormSubmitting:[!1,{[A.actionTypes.startCrawl]:()=>!0,[A.actionTypes.onStartCrawlRequestComplete]:()=>!1}],isFlyoutVisible:[!1,{showFlyout:()=>!0,hideFlyout:()=>!1,[A.actionTypes.onStartCrawlRequestComplete]:()=>!1}],maxCrawlDepth:[2,{showFlyout:()=>2,onSelectMaxCrawlDepth:(e,{maxCrawlDepth:t})=>t}],selectedDomainUrls:[[],{showFlyout:()=>[],onSelectDomainUrls:(e,{domainUrls:t})=>t}],selectedEntryPointUrls:[[],{showFlyout:()=>[],onSelectEntryPointUrls:(e,{entryPointUrls:t})=>t,onSelectDomainUrls:(e,{domainUrls:t})=>ee(e,t)}],selectedSitemapUrls:[[],{showFlyout:()=>[],onSelectSitemapUrls:(e,{sitemapUrls:t})=>t,onSelectDomainUrls:(e,{domainUrls:t})=>ee(e,t)}]}),selectors:()=>({domainUrls:[e=>[e.domainConfigs],e=>e.map((e=>e.name))],domainConfigMap:[e=>[e.domainConfigs],e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{})],entryPointUrls:[e=>[e.domainConfigMap,e.selectedDomainUrls],(e,t)=>t.flatMap((t=>e[t].seedUrls))],sitemapUrls:[e=>[e.domainConfigMap,e.selectedDomainUrls],(e,t)=>t.flatMap((t=>e[t].sitemapUrls))]}),listeners:({actions:e,values:t})=>({fetchDomainConfigData:async()=>{const{http:t}=p.a.values,{engineName:a}=d.a.values;let n=[],s=1,i=1,r=100;try{for(;s<=i;){const{results:e,meta:{page:c}}=await t.get(`/internal/app_search/engines/${a}/crawler/domain_configs`,{query:{"page[current]":s,"page[size]":r}});n=[...n,...e.map(_)],s=c.current+1,i=c.total_pages,r=c.size}e.onRecieveDomainConfigData(n)}catch(e){Object(u.e)(e)}},showFlyout:()=>{e.fetchDomainConfigData()},startCustomCrawl:()=>{const e={sitemap_discovery_disabled:!t.includeSitemapsInRobotsTxt,max_crawl_depth:t.maxCrawlDepth,domain_allowlist:t.selectedDomainUrls},a=[...t.selectedEntryPointUrls,...t.customEntryPointUrls];a.length>0&&(e.seed_urls=a);const n=[...t.selectedSitemapUrls,...t.customSitemapUrls];n.length>0&&(e.sitemap_urls=n),A.actions.startCrawl(e)}})}),ae=()=>{const{maxCrawlDepth:e}=Object(c.useValues)(te),{onSelectMaxCrawlDepth:t}=Object(c.useActions)(te);return Object(G.jsx)(L.EuiPanel,{hasBorder:!0},Object(G.jsx)(L.EuiFlexGroup,null,Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.maxCrawlDepthFieldLabel",{defaultMessage:"Max crawl depth"})},Object(G.jsx)(L.EuiFieldNumber,{min:1,value:e,onChange:e=>t(parseInt(e.target.value,10))}))),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiText,{size:"xs",color:"subdued"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.maxCrawlDepthFieldDescription",{defaultMessage:"Set a max crawl depth to specify how many pages deep the crawler should traverse. Set the value to one (1) to limit the crawl to only the entry points."})))))};var ne=a(127);const se=()=>{const{domainUrls:e,selectedDomainUrls:t}=Object(c.useValues)(te),{onSelectDomainUrls:a}=Object(c.useActions)(te);return Object(G.jsx)(L.EuiPanel,{hasBorder:!0},Object(G.jsx)(L.EuiAccordion,{id:Object(L.useGeneratedHtmlId)({prefix:"domainAccordion"}),initialIsOpen:!0,buttonContent:Object(G.jsx)(L.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiIcon,{type:"globe"})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiTitle,{size:"xs"},Object(G.jsx)("h3",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.domainsAccordionButtonLabel",{defaultMessage:"Add domains to your crawl"}))))),extraAction:Object(G.jsx)(L.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(G.jsx)(L.EuiNotificationBadge,{size:"m",color:t.length>0?"accent":"subdued"},t.length),Object(G.jsx)(L.EuiFlexItem,{grow:!1},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.selectedDescriptor",{defaultMessage:"selected"})))},Object(G.jsx)(ne.a,{options:e,selectedOptions:t,onChange:a})))};var ie=a(250);const re=()=>{const{customEntryPointUrls:e,customSitemapUrls:t,entryPointUrls:a,includeSitemapsInRobotsTxt:s,selectedDomainUrls:i,selectedEntryPointUrls:l,selectedSitemapUrls:o,sitemapUrls:u}=Object(c.useValues)(te),{onSelectCustomEntryPointUrls:p,onSelectCustomSitemapUrls:d,onSelectEntryPointUrls:g,onSelectSitemapUrls:h,toggleIncludeSitemapsInRobotsTxt:j}=Object(c.useActions)(te),b=e.length+t.length+l.length+o.length;return Object(G.jsx)(L.EuiPanel,{hasBorder:!0},Object(G.jsx)(L.EuiAccordion,{id:Object(L.useGeneratedHtmlId)({prefix:"seedUrlAccordion"}),initialIsOpen:!0,buttonContent:Object(G.jsx)(L.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiIcon,{type:"globe"})),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiTitle,{size:"xs"},Object(G.jsx)("h3",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.seedUrlsAccordionButtonLabel",{defaultMessage:"Seed URLs"}))))),extraAction:Object(G.jsx)(L.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(G.jsx)(L.EuiNotificationBadge,{size:"m",color:b>0?"accent":"subdued"},b),Object(G.jsx)(L.EuiFlexItem,{grow:!1},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.selectedDescriptor",{defaultMessage:"selected"})))},Object(G.jsx)(L.EuiTabbedContent,{expand:!0,tabs:[{id:Object(L.useGeneratedHtmlId)({prefix:"sitemapsTab"}),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.sitemapsTabLabel",{defaultMessage:"Sitemaps"}),content:Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(L.EuiPanel,{color:"subdued",borderRadius:"none",hasShadow:!1,paddingSize:"s"},Object(G.jsx)(L.EuiCheckbox,{id:Object(L.useGeneratedHtmlId)({prefix:"includeRobotsCheckbox"}),label:Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.includeSitemapsCheckboxLabel",defaultMessage:"Include sitemaps discovered in {robotsDotTxt}",values:{robotsDotTxt:Object(G.jsx)("strong",null,"robots.txt")}}),checked:s,onChange:j})),Object(G.jsx)(ne.a,{options:u,selectedOptions:o,onChange:h,emptyMessage:0===i.length?n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.emptyDomainsMessage",{defaultMessage:"Please select a domain."}):void 0}),Object(G.jsx)(L.EuiHorizontalRule,null),Object(G.jsx)(ie.a,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.customSitemapUrlsTextboxLabel",{defaultMessage:"Custom sitemap URLs"}),onChange:d,selectedUrls:t}))},{id:Object(L.useGeneratedHtmlId)({prefix:"entryPointsTab"}),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.entryPointsTabLabel",{defaultMessage:"Entry points"}),content:Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(ne.a,{options:a,selectedOptions:l,onChange:g,emptyMessage:0===i.length?n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.emptyDomainsMessage",{defaultMessage:"Please select a domain."}):void 0}),Object(G.jsx)(L.EuiHorizontalRule,null),Object(G.jsx)(ie.a,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.customEntryPointUrlsTextboxLabel",{defaultMessage:"Custom entry point URLs"}),onChange:p,selectedUrls:e}))}],autoFocus:"selected"})))},ce=()=>{const{isDataLoading:e,isFormSubmitting:t,isFlyoutVisible:a,selectedDomainUrls:s}=Object(c.useValues)(te),{hideFlyout:i,startCustomCrawl:l}=Object(c.useActions)(te);return a?Object(G.jsx)(L.EuiFlyout,{ownFocus:!0,onClose:i,size:"m"},Object(G.jsx)(L.EuiFlyoutHeader,{hasBorder:!0},Object(G.jsx)(L.EuiTitle,{size:"m"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.flyoutHeadTitle",{defaultMessage:"Custom crawl configuration"}))),Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(L.EuiText,{size:"s"},Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.flyoutHeaderDescription",{defaultMessage:"Set up a one-time crawl with custom settings."})))),Object(G.jsx)(L.EuiFlyoutBody,null,e?Object(G.jsx)(X.a,null):Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(ae,null),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(se,null),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(re,null))),Object(G.jsx)(L.EuiFlyoutFooter,null,Object(G.jsx)(L.EuiFlexGroup,{justifyContent:"flexEnd"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiButtonEmpty,{onClick:i},g.e)),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiButton,{fill:!0,onClick:l,disabled:e||0===s.length,isLoading:t},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlCustomSettingsFlyout.startCrawlButtonLabel",{defaultMessage:"Apply and crawl now"})))))):null};var le=a(139);const oe=Object(c.kea)({path:["enterprise_search","app_search","crawler","crawl_detail_logic"],actions:{closeFlyout:!0,fetchCrawlRequest:e=>({requestId:e}),onRecieveCrawlRequest:e=>({crawlRequestFromServer:e}),openFlyout:!0,setSelectedTab:e=>({selectedTab:e})},reducers:{crawlRequest:[null,{onRecieveCrawlRequest:(e,{crawlRequestFromServer:t})=>function(e){const{began_at:t,completed_at:a,crawl_config:n,created_at:s,id:i,stats:r,status:c,type:l}=e;return{beganAt:t,completedAt:a,crawlConfig:M(n),createdAt:s,id:i,stats:r&&E(r),status:c,type:l}}(t)}],crawlRequestFromServer:[null,{onRecieveCrawlRequest:(e,{crawlRequestFromServer:t})=>t}],dataLoading:[!0,{fetchCrawlRequest:()=>!0,onRecieveCrawlRequest:()=>!1}],flyoutClosed:[!0,{openFlyout:()=>!1,closeFlyout:()=>!0}],selectedTab:["preview",{openFlyout:()=>"preview",setSelectedTab:(e,{selectedTab:t})=>t}]},listeners:({actions:e})=>({fetchCrawlRequest:async({requestId:t})=>{const{http:a}=p.a.values,{engineName:n}=d.a.values;try{const s=await a.get(`/internal/app_search/engines/${n}/crawler/crawl_requests/${t}`);e.onRecieveCrawlRequest(s)}catch(e){Object(u.e)(e)}}})});var ue=a(199),pe=a(18),de=a.n(pe);const ge=({crawlDepth:e,crawlType:t,crawlerLogsEnabled:a,domainCount:s,stats:i})=>{const r=(e,t)=>Object.entries(t).reduce(((t,[a,n])=>a[0]!==e?t:n+t),0),c={clientErrorCount:i&&i.status&&i.status.statusCodes?r("4",i.status.statusCodes):0,serverErrorCount:i&&i.status&&i.status.statusCodes?r("5",i.status.statusCodes):0},l=!a&&!i;return Object(G.jsx)(L.EuiPanel,{paddingSize:"l",color:"primary"},Object(G.jsx)(L.EuiFlexGroup,null,Object(G.jsx)(L.EuiFlexItem,{grow:2},Object(G.jsx)(L.EuiStat,{"data-test-subjet":"crawlType",titleSize:"s",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.components.crawlDetailsSummary.crawlCountOnDomains",{defaultMessage:"{crawlType} crawl on {domainCount, plural, one {# domain} other {# domains}}",values:{crawlType:t[0].toUpperCase()+t.substring(1),domainCount:s}}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.components.crawlDetailsSummary.crawlTypeLabel",{defaultMessage:"Crawl type"})})),Object(G.jsx)(L.EuiFlexItem,{grow:1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"crawlDepth",titleSize:"s",title:e,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.components.crawlDetailsSummary.crawlDepthLabel",{defaultMessage:"Max crawl depth"})})),!l&&Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"crawlDuration",titleSize:"s",title:(()=>{if(i&&i.status&&i.status.crawlDurationMSec){const e=de.a.duration(i.status.crawlDurationMSec,"milliseconds"),t=e.days();return`${t?t+"d ":""}${e.hours()}h ${e.minutes()}m ${e.seconds()}s`}return"--"})(),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.durationTooltipTitle",{defaultMessage:"Duration"})}))),Object(G.jsx)(L.EuiHorizontalRule,{margin:"s"}),l?Object(G.jsx)(L.EuiText,{size:"xs",textAlign:"center","data-test-subj":"logsDisabledMessage"},Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.logsDisabledMessage",{defaultMessage:"Enable Web Crawler logs in settings for more detailed crawl statistics."}))):Object(G.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"urlsAllowed",titleSize:"s",title:i&&i.status&&i.status.urlsAllowed?i.status.urlsAllowed:"--",description:Object(G.jsx)(L.EuiText,{size:"s"},"URLs"," ",Object(G.jsx)(L.EuiIconTip,{type:"iInCircle",color:"primary",size:"m",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.urlsTooltipTitle",{defaultMessage:"URLs Seen"}),content:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.urlsTooltip",{defaultMessage:"URLs found by the crawler during the crawl, including those not followed due to the crawl configuration."})}))})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"pagesVisited",titleSize:"s",title:i&&i.status&&i.status.pagesVisited?i.status.pagesVisited:"--",description:Object(G.jsx)(L.EuiText,{size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.pagesVisitedTooltipTitle",{defaultMessage:"Pages"})," ",Object(G.jsx)(L.EuiIconTip,{type:"iInCircle",color:"primary",size:"m",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.pagesTooltipTitle",{defaultMessage:"Pages visited"}),content:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.pagesTooltip",{defaultMessage:"URLs visited and extracted during the crawl."})}))})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"avgResponseTime",titleSize:"s",title:i&&i.status&&i.status.avgResponseTimeMSec?`${Math.round(i.status.avgResponseTimeMSec)}ms`:"--",description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.avgResponseTimeLabel",{defaultMessage:"Avg. response"})})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"clientErrors",titleSize:"s",title:c.clientErrorCount,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.clientErrorsLabel",{defaultMessage:"4xx Errors"})})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiStat,{"data-test-subj":"serverErrors",titleSize:"s",title:c.serverErrorCount,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsSummary.serverErrorsLabel",{defaultMessage:"5xx Errors"})}))))},he=({crawlerLogsEnabled:e=!1})=>{const{crawlRequest:t}=Object(c.useValues)(oe);return null===t?null:Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(ge,{crawlerLogsEnabled:e,crawlType:t.type,domainCount:t.crawlConfig.domainAllowlist.length,crawlDepth:t.crawlConfig.maxCrawlDepth,stats:t.stats||null}),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(ue.a,{hasBorder:!0,initialIsOpen:t.crawlConfig.domainAllowlist.length>0,title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsPreview.domainsTitle",{defaultMessage:"Domains"}),iconType:"globe",items:t.crawlConfig.domainAllowlist}),Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(ue.a,{hasBorder:!0,initialIsOpen:t.crawlConfig.seedUrls.length>0,title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsPreview.seedUrlsTitle",{defaultMessage:"Seed URLs"}),iconType:"crosshairs",items:t.crawlConfig.seedUrls}),Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(ue.a,{hasBorder:!0,initialIsOpen:t.crawlConfig.sitemapUrls.length>0,title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsPreview.sitemapUrlsTitle",{defaultMessage:"Sitemap URLs"}),iconType:"visMapRegion",items:t.crawlConfig.sitemapUrls}))},je=()=>{const{closeFlyout:e,setSelectedTab:t}=Object(c.useActions)(oe),{crawlRequestFromServer:a,dataLoading:s,flyoutClosed:l,selectedTab:o}=Object(c.useValues)(oe),{fetchLogRetention:u}=Object(c.useActions)(le.b),{logRetention:p}=Object(c.useValues)(le.b);return Object(i.useEffect)((()=>{u()}),[]),l?null:Object(G.jsx)(L.EuiFlyout,{maxWidth:"45rem",ownFocus:!0,onClose:e,"aria-labelledby":"CrawlDetailsFlyoutTitle"},Object(G.jsx)(L.EuiFlyoutHeader,{hasBorder:!0},Object(G.jsx)(L.EuiTitle,{size:"m"},Object(G.jsx)("h2",{id:"CrawlDetailsFlyoutTitle"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsFlyout.title",{defaultMessage:"Crawl request details"}))),Object(G.jsx)(L.EuiTabs,{style:{marginBottom:"-25px"}},Object(G.jsx)(L.EuiTab,{isSelected:"preview"===o,onClick:()=>t("preview")},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsFlyout.previewTabLabel",{defaultMessage:"Preview"})),Object(G.jsx)(L.EuiTab,{isSelected:"json"===o,onClick:()=>t("json")},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlDetailsFlyout.rawJSONTabLabel",{defaultMessage:"Raw JSON"})))),Object(G.jsx)(L.EuiFlyoutBody,null,s?Object(G.jsx)(X.a,null):Object(G.jsx)(r.a.Fragment,null,"preview"===o&&Object(G.jsx)(he,{crawlerLogsEnabled:!!p&&p.crawler.enabled}),"json"===o&&Object(G.jsx)(L.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(a,null,2)))))},be=({event:e})=>"process"===e.stage?Object(G.jsx)(L.EuiBadge,{color:"hollow"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlTypeOptions.reAppliedCrawlRules",{defaultMessage:"Re-applied crawl rules"})):e.type===f.Full?Object(G.jsx)(L.EuiBadge,null,y[f.Full]):e.type===f.Partial?Object(G.jsx)(L.EuiBadge,{color:"hollow"},y[f.Partial]):null;var me=a(128);const xe=()=>{const{events:e}=Object(c.useValues)(A),{fetchCrawlRequest:t,openFlyout:a}=Object(c.useActions)(oe),s=[{field:"id",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.column.domainURL",{defaultMessage:"Request ID"}),render:(e,n)=>"crawl"===n.stage?Object(G.jsx)(L.EuiLink,{onClick:()=>{t(e),a()}},e):Object(G.jsx)("span",null,e)},{field:"createdAt",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.column.created",{defaultMessage:"Created"}),render:e=>Object(G.jsx)(me.a,{timestamp:e})},{field:"type",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.column.crawlType",{defaultMessage:"Crawl type"}),render:(e,t)=>Object(G.jsx)(be,{event:t})},{name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.column.domains",{defaultMessage:"Domains"}),render:e=>Object(G.jsx)(L.EuiBadge,null,e.crawlConfig.domainAllowlist.length)},{field:"status",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.column.status",{defaultMessage:"Status"}),render:e=>O[e]}];return Object(G.jsx)(L.EuiBasicTable,{columns:s,items:e,noItemsMessage:Object(G.jsx)(L.EuiEmptyPrompt,{iconType:"tableDensityExpanded",title:Object(G.jsx)("h3",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.emptyPrompt.title",{defaultMessage:"No recent crawl requests"})),body:Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTable.emptyPrompt.body",{defaultMessage:"You haven't started any crawls yet."}))})})},Se=Object(c.kea)({path:["enterprise_search","app_search","crawler","crawl_select_domains_modal"],actions:()=>({hideModal:!0,onSelectDomainUrls:e=>({domainUrls:e}),showModal:!0}),reducers:()=>({isDataLoading:[!1,{[A.actionTypes.startCrawl]:()=>!0,[A.actionTypes.onStartCrawlRequestComplete]:()=>!1}],isModalVisible:[!1,{showModal:()=>!0,hideModal:()=>!1,[A.actionTypes.onStartCrawlRequestComplete]:()=>!1}],selectedDomainUrls:[[],{showModal:()=>[],onSelectDomainUrls:(e,{domainUrls:t})=>t}]})});a(766);const fe=()=>{const{domains:e}=Object(c.useValues)(A),t=e.map((e=>e.url)),a=Se({domains:e}),{isDataLoading:s,isModalVisible:i,selectedDomainUrls:r}=Object(c.useValues)(a),{hideModal:l,onSelectDomainUrls:o}=Object(c.useActions)(a),{startCrawl:u}=Object(c.useActions)(A);return i?Object(G.jsx)(L.EuiModal,{onClose:l,className:"crawlSelectDomainsModal"},Object(G.jsx)(L.EuiModalHeader,null,Object(G.jsx)(L.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiModalHeaderTitle,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlSelectDomainsModal.modalHeaderTitle",{defaultMessage:"Crawl select domains"}))),Object(G.jsx)(L.EuiNotificationBadge,{size:"m",color:r.length>0?"accent":"subdued"},r.length),Object(G.jsx)(L.EuiFlexItem,{grow:!1},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlSelectDomainsModal.selectedDescriptor",{defaultMessage:"selected"})))),Object(G.jsx)(L.EuiModalBody,null,Object(G.jsx)(ne.a,{options:t,selectedOptions:r,onChange:o})),Object(G.jsx)(L.EuiModalFooter,null,Object(G.jsx)(L.EuiButtonEmpty,{onClick:l},g.e),Object(G.jsx)(L.EuiButton,{fill:!0,onClick:()=>{u({domain_allowlist:r})},disabled:0===r.length,isLoading:s},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlSelectDomainsModal.startCrawlButtonLabel",{defaultMessage:"Apply and crawl now"})))):null},Oe=()=>{const{mostRecentCrawlRequestStatus:e}=Object(c.useValues)(A);return e===S.Running||e===S.Starting||e===S.Canceling?Object(G.jsx)(L.EuiCallOut,{iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusBanner.changesCalloutTitle",{defaultMessage:"Changes you make now won't take effect until the start of your next crawl."})}):null},ye=({menuButtonLabel:e,fill:t})=>{const{startCrawl:a}=Object(c.useActions)(A),{showModal:s}=Object(c.useActions)(Se),{showFlyout:r}=Object(c.useActions)(te),[l,o]=Object(i.useState)(!1),u=()=>o(!1);return Object(G.jsx)(L.EuiPopover,{button:Object(G.jsx)(L.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>o(!l),fill:t},e),isOpen:l,closePopover:u,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(G.jsx)(L.EuiContextMenuPanel,{items:[Object(G.jsx)(L.EuiContextMenuItem,{key:"crawl all domains",onClick:()=>{u(),a()}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.startCrawlContextMenu.crawlAllDomainsMenuLabel",{defaultMessage:"Crawl all domains on this engine"})),Object(G.jsx)(L.EuiContextMenuItem,{key:"crawl select domains",onClick:()=>{u(),s()}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.startCrawlContextMenu.crawlSelectDomainsMenuLabel",{defaultMessage:"Crawl select domains"})),Object(G.jsx)(L.EuiContextMenuItem,{key:"crawl with custom settings",onClick:()=>{u(),r()}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.startCrawlContextMenu.crawlCustomSettingsMenuLabel",{defaultMessage:"Crawl with custom settings"}))]}))};var ve=a(47),we=a.n(ve);const Ee=({stopCrawl:e,...t})=>{const[a,s]=Object(i.useState)(!1),r=()=>s(!1);return Object(G.jsx)(L.EuiPopover,we()({},t,{button:Object(G.jsx)(L.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>s(!a),className:"crawlInProgressButton"},Object(G.jsx)(L.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiLoadingSpinner,{size:"m"})),Object(G.jsx)(L.EuiFlexItem,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.crawlingButtonLabel",{defaultMessage:"Crawling..."})))),isOpen:a,closePopover:r,panelPaddingSize:"none",anchorPosition:"downLeft"}),Object(G.jsx)(L.EuiContextMenuPanel,{items:[Object(G.jsx)(L.EuiContextMenuItem,{key:"cancel crawl",icon:"cross",onClick:()=>{r(),e()}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.cancelCrawlMenuItemLabel",{defaultMessage:"Cancel Crawl"}))]}))},Ce=()=>{const{domains:e,mostRecentCrawlRequestStatus:t}=Object(c.useValues)(A),{stopCrawl:a}=Object(c.useActions)(A),s=Object(G.jsx)(L.EuiButton,{disabled:!0,iconType:"arrowDown",iconSide:"right"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.startACrawlButtonLabel",{defaultMessage:"Start a crawl"}));if(0===e.length)return s;switch(t){case S.Success:return Object(G.jsx)(ye,{menuButtonLabel:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.startCrawlContextMenu.startACrawlButtonLabel",{defaultMessage:"Start a crawl"})});case S.Failed:case S.Canceled:return Object(G.jsx)(ye,{fill:!0,menuButtonLabel:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.retryCrawlButtonLabel",{defaultMessage:"Retry crawl"})});case S.Pending:case S.Suspended:return Object(G.jsx)(L.EuiButton,{disabled:!0,isLoading:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.pendingButtonLabel",{defaultMessage:"Pending..."}));case S.Starting:return Object(G.jsx)(L.EuiButton,{isLoading:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.startingButtonLabel",{defaultMessage:"Starting..."}));case S.Running:return Object(G.jsx)(Ee,{stopCrawl:a});case S.Canceling:case S.Suspending:return Object(G.jsx)(L.EuiButton,{isLoading:!0,fill:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.stoppingButtonLabel",{defaultMessage:"Stopping..."}));default:return s}};var Me=a(44),ke=a(57);const Te=()=>{const{domains:e,meta:t,dataLoading:a}=Object(c.useValues)(I),{fetchCrawlerDomainsData:s,onPaginate:r,deleteDomain:l}=Object(c.useActions)(I);Object(i.useEffect)((()=>{s()}),[t.page.current]);const{myRole:{canManageEngineCrawler:u}}=Object(c.useValues)(ke.a),p=[{field:"url",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.column.domainURL",{defaultMessage:"Domain URL"}),render:(e,t)=>Object(G.jsx)(Me.d,{"data-test-subj":"CrawlerDomainURL",to:Object(d.c)(o.t,{domainId:t.id})},t.url)},{field:"lastCrawl",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.column.lastActivity",{defaultMessage:"Last activity"}),render:e=>e?Object(G.jsx)(me.a,{timestamp:e}):""},{field:"documentCount",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.column.documents",{defaultMessage:"Documents"}),render:e=>Object(G.jsx)(z.FormattedNumber,{value:e})}],j={name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.column.actions",{defaultMessage:"Actions"}),actions:[{name:g.r,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.action.manage.buttonLabel",{defaultMessage:"Manage this domain"}),type:"icon",icon:"eye",onClick:e=>N.a.values.navigateToUrl(Object(d.c)(o.t,{domainId:e.id}))},{name:g.l,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTable.action.delete.buttonLabel",{defaultMessage:"Delete this domain"}),type:"icon",icon:"trash",color:"danger",onClick:e=>{window.confirm(T(e.url))&&l(e)}}]};return u&&p.push(j),Object(G.jsx)(L.EuiBasicTable,{loading:a,items:e,columns:p,pagination:{...Object(h.a)(t),showPerPageOptions:!1},onChange:Object(h.b)(r)})};var Fe=a(107);const _e=Object(c.kea)({path:["enterprise_search","app_search","crawler","manage_crawls_popover"],actions:()=>({closePopover:!0,reApplyCrawlRules:e=>({domain:e}),togglePopover:!0}),reducers:()=>({isOpen:[!1,{closePopover:()=>!1,togglePopover:e=>!e}]}),listeners:({actions:e})=>({reApplyCrawlRules:async({domain:t})=>{const{engineName:a}=d.a.values,{http:s}=p.a.values,i={};t&&(i.domains=[t.url]);try{await s.post(`/internal/app_search/engines/${a}/crawler/process_crawls`,{body:JSON.stringify(i)}),Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.manageCrawlsPopover.reApplyCrawlRules.successMessage",{defaultMessage:"Crawl rules are being re-applied in the background"})),A.actions.fetchCrawlerData()}catch(e){Object(u.e)(e)}finally{e.closePopover()}}})}),Ie={crawlFrequency:7,crawlUnit:v.days},Re=Object(c.kea)({path:["enterprise_search","app_search","crawler","automatic_crawl_scheduler"],actions:()=>({clearCrawlSchedule:!0,deleteCrawlSchedule:!0,disableCrawlAutomatically:!0,onDoneSubmitting:!0,enableCrawlAutomatically:!0,fetchCrawlSchedule:!0,saveChanges:!0,setCrawlSchedule:e=>({crawlSchedule:e}),submitCrawlSchedule:!0,setCrawlFrequency:e=>({crawlFrequency:e}),setCrawlUnit:e=>({crawlUnit:e}),toggleCrawlAutomatically:!0}),reducers:()=>({crawlAutomatically:[!1,{clearCrawlSchedule:()=>!1,setCrawlSchedule:()=>!0,toggleCrawlAutomatically:e=>!e}],crawlFrequency:[Ie.crawlFrequency,{clearCrawlSchedule:()=>Ie.crawlFrequency,setCrawlSchedule:(e,{crawlSchedule:{frequency:t}})=>t,setCrawlFrequency:(e,{crawlFrequency:t})=>t}],crawlUnit:[Ie.crawlUnit,{clearCrawlSchedule:()=>Ie.crawlUnit,setCrawlSchedule:(e,{crawlSchedule:{unit:t}})=>t,setCrawlUnit:(e,{crawlUnit:t})=>t}],isSubmitting:[!1,{deleteCrawlSchedule:()=>!0,onDoneSubmitting:()=>!1,submitCrawlSchedule:()=>!0}]}),listeners:({actions:e,values:t})=>({deleteCrawlSchedule:async()=>{const{http:t}=p.a.values,{engineName:a}=d.a.values,{closePopover:s}=_e.actions;try{await t.delete(`/internal/app_search/engines/${a}/crawler/crawl_schedule`),e.clearCrawlSchedule(),Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlScheduler.disableCrawlSchedule.successMessage",{defaultMessage:"Automatic crawling has been disabled."})),s()}catch(t){var i;404===(null===(i=t.response)||void 0===i?void 0:i.status)?(e.clearCrawlSchedule(),s()):Object(u.e)(t)}finally{e.onDoneSubmitting()}},fetchCrawlSchedule:async()=>{const{http:t}=p.a.values,{engineName:a}=d.a.values;try{const n=await t.get(`/internal/app_search/engines/${a}/crawler/crawl_schedule`);e.setCrawlSchedule(n)}catch(t){404===t.response.status?e.clearCrawlSchedule():Object(u.e)(t)}},saveChanges:()=>{t.crawlAutomatically?e.submitCrawlSchedule():e.deleteCrawlSchedule()},submitCrawlSchedule:async()=>{const{http:a}=p.a.values,{engineName:s}=d.a.values,{closePopover:i}=_e.actions;try{const r=await a.put(`/internal/app_search/engines/${s}/crawler/crawl_schedule`,{body:JSON.stringify({unit:t.crawlUnit,frequency:t.crawlFrequency})});e.setCrawlSchedule(r),Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlScheduler.submitCrawlSchedule.successMessage",{defaultMessage:"Your automatic crawling schedule has been updated."})),i()}catch(e){Object(u.e)(e)}finally{e.onDoneSubmitting()}}})}),Ae=()=>{const{fetchCrawlSchedule:e,setCrawlFrequency:t,setCrawlUnit:a,saveChanges:s,toggleCrawlAutomatically:r}=Object(c.useActions)(Re),{closePopover:l}=Object(c.useActions)(_e),{crawlAutomatically:u,crawlFrequency:p,crawlUnit:d,isSubmitting:h}=Object(c.useValues)(Re);Object(i.useEffect)((()=>{e()}),[]);const j=Object(L.htmlIdGenerator)("AutomaticCrawlScheduler")();return Object(G.jsx)(L.EuiForm,{onSubmit:e=>{e.preventDefault(),s()},component:"form",id:j},Object(G.jsx)(L.EuiSpacer,{size:"s"}),Object(G.jsx)(L.EuiText,{size:"s",color:"subdued"},Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.formDescription",defaultMessage:"Don't worry about it, we'll start a crawl for you. {readMoreMessage}.",values:{readMoreMessage:Object(G.jsx)(L.EuiLink,{href:o.ab,target:"_blank"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.readMoreLink",{defaultMessage:"Read more."}))}})),Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)(L.EuiFormRow,{display:"rowCompressed"},Object(G.jsx)(L.EuiSwitch,{autoFocus:!0,checked:u,label:Object(G.jsx)(L.EuiText,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.crawlAutomaticallySwitchLabel",{defaultMessage:"Crawl automatically"})),onChange:r,compressed:!0})),Object(G.jsx)(L.EuiFormRow,{display:"rowCompressed"},Object(G.jsx)(L.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiText,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.crawlUnitsPrefix",{defaultMessage:"Every"}))),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiFieldNumber,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.scheduleFrequencyLabel",{defaultMessage:"Schedule frequency"}),disabled:!u,fullWidth:!1,min:0,max:99,compressed:!0,value:p,onChange:e=>t(parseInt(e.target.value,10))})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiSelect,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.scheduleUnitsLabel",{defaultMessage:"Schedule units of time"}),disabled:!u,compressed:!0,options:[{text:Fe.d,value:v.hours},{text:Fe.c,value:v.days},{text:Fe.g,value:v.weeks},{text:Fe.f,value:v.months}],value:d,onChange:e=>a(e.target.value)})),Object(G.jsx)(L.EuiFlexItem,null))),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiText,{size:"xs",color:"subdued"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.automaticCrawlSchedule.scheduleDescription",{defaultMessage:"The crawl schedule applies to every domain on this engine."})),Object(G.jsx)(L.EuiPopoverFooter,null,Object(G.jsx)(L.EuiFormRow,{display:"rowCompressed"},Object(G.jsx)(L.EuiFlexGroup,null,Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiButtonEmpty,{onClick:l},g.e)),Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiButton,{form:j,type:"submit",isLoading:h,fill:!0},g.z))))))},Le=({domain:e})=>{const{closePopover:t,reApplyCrawlRules:a,togglePopover:s}=Object(c.useActions)(_e),{isOpen:i}=Object(c.useValues)(_e),r=[{id:0,items:[{name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.manageCrawlsPopover.reApplyCrawlRulesButtonLabel",{defaultMessage:"Re-apply crawl rules"}),icon:"refresh",onClick:()=>a(e)},{name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.manageCrawlsPopover.automaticCrawlingButtonLabel",{defaultMessage:"Automatic crawling"}),icon:"gear",panel:1}]},{id:1,title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.manageCrawlsPopover.automaticCrawlingTitle",{defaultMessage:"Automatic crawling"}),width:400,content:Object(G.jsx)(Ae,null)}];return Object(G.jsx)(L.EuiPopover,{isOpen:i,closePopover:t,button:Object(G.jsx)(L.EuiButton,{onClick:s,iconType:"arrowDown",iconSide:"right"},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.manageCrawlsPopover.manageCrawlsButtonLabel",{defaultMessage:"Manage crawls"}))},Object(G.jsx)(L.EuiContextMenu,{initialPanelId:0,panels:r}))},De=()=>{const{events:e,dataLoading:t,domains:a}=Object(c.useValues)(A),{errors:i}=Object(c.useValues)(q);return Object(G.jsx)(D.a,{pageChrome:Object(d.d)([s]),pageHeader:{pageTitle:s,rightSideItems:[Object(G.jsx)(Le,null),Object(G.jsx)(Ce,null)]},isLoading:t},Object(G.jsx)(Oe,null),Object(G.jsx)(L.EuiSpacer,{size:"l"}),a.length>0?Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiFlexGroup,{direction:"row",alignItems:"stretch"},Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiTitle,{size:"s"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.domainsTitle",{defaultMessage:"Domains"})))),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(Z,null))),Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)(Te,null)):Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiTitle,{size:"s"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.empty.title",{defaultMessage:"Add a domain to get started"}))),Object(G.jsx)(L.EuiText,null,Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.empty.description",{defaultMessage:"Easily index your website's content. To get started, enter your domain name, provide optional entry points and crawl rules, and we will handle the rest."})," ",Object(G.jsx)(L.EuiLink,{external:!0,target:"_blank",href:o.ab},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.empty.crawlerDocumentationLinkDescription",{defaultMessage:"Learn more about the web crawler"})))),i&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"l"}),Object(G.jsx)(K,null)),Object(G.jsx)(L.EuiSpacer,{size:"l"}),Object(G.jsx)(J,null),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiFlexGroup,{justifyContent:"flexEnd"},Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(Y,null)))),(e.length>0||a.length>0)&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,{size:"xl"}),Object(G.jsx)(L.EuiTitle,{size:"s"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsTitle",{defaultMessage:"Recent crawl requests"}))),Object(G.jsx)(L.EuiSpacer,{size:"xs"}),Object(G.jsx)(L.EuiText,{color:"subdued",size:"s"},Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRequestsDescription",{defaultMessage:"Recent crawl requests are logged here. Using the request ID of each crawl, you can track progress and examine crawl events in Kibana's Discover or Logs user interfaces."})," ",Object(G.jsx)(L.EuiLink,{href:o.bb,target:"_blank",external:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.configurationDocumentationLinkDescription",{defaultMessage:"Learn more about configuring crawler logs in Kibana"})))),Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)(xe,null)),Object(G.jsx)(je,null),Object(G.jsx)(fe,null),Object(G.jsx)(ce,null))};var ze=a(15),Pe=a(101);const Ne=Object(c.kea)({path:["enterprise_search","app_search","crawler","crawler_single_domain"],actions:{deleteDomain:e=>({domain:e}),fetchDomainData:e=>({domainId:e}),onReceiveDomainData:e=>({domain:e}),updateCrawlRules:e=>({crawlRules:e}),updateEntryPoints:e=>({entryPoints:e}),updateSitemaps:e=>({sitemaps:e}),submitDeduplicationUpdate:(e,{fields:t,enabled:a})=>({domain:e,fields:t,enabled:a})},reducers:{dataLoading:[!0,{onReceiveDomainData:()=>!1}],domain:[null,{onReceiveDomainData:(e,{domain:t})=>t,updateCrawlRules:(e,{crawlRules:t})=>({...e,crawlRules:t}),updateEntryPoints:(e,{entryPoints:t})=>({...e,entryPoints:t}),updateSitemaps:(e,{sitemaps:t})=>({...e,sitemaps:t})}]},listeners:({actions:e})=>({deleteDomain:async({domain:e})=>{const{http:t}=p.a.values,{engineName:a}=d.a.values;try{await t.delete(`/internal/app_search/engines/${a}/crawler/domains/${e.id}`),A.actions.fetchCrawlerData(),Object(u.g)((s=e.url,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.action.deleteDomain.successMessage",{defaultMessage:"Domain '{domainUrl}' was deleted",values:{domainUrl:s}}))),N.a.values.navigateToUrl(Object(d.c)(o.u))}catch(e){Object(u.e)(e)}var s},fetchDomainData:async({domainId:t})=>{const{http:a}=p.a.values,{engineName:n}=d.a.values;try{const s=w(await a.get(`/internal/app_search/engines/${n}/crawler/domains/${t}`));e.onReceiveDomainData(s)}catch(e){Object(u.e)(e)}},submitDeduplicationUpdate:async({domain:t,fields:a,enabled:n})=>{const{http:s}=p.a.values,{engineName:i}=d.a.values,r={deduplication_enabled:n,deduplication_fields:a};try{const a=w(await s.put(`/internal/app_search/engines/${i}/crawler/domains/${t.id}`,{body:JSON.stringify(r)}));e.onReceiveDomainData(a)}catch(e){Object(u.e)(e)}}})}),Be=Object(G.jsx)("p",null,Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.description",defaultMessage:"Create a crawl rule to include or exclude pages whose URL matches the rule. Rules run in sequential order, and each URL is evaluated according to the first match. {link}",values:{link:Object(G.jsx)(L.EuiLink,{href:o.e,target:"_blank",external:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.descriptionLinkText",{defaultMessage:"Learn more about crawl rules"}))}})),Ve=({description:e=Be,domainId:t,engineName:a,crawlRules:s,defaultCrawlRule:i})=>{const{updateCrawlRules:r}=Object(c.useActions)(Ne),l=[{editingRender:(e,t,{isInvalid:a,isLoading:n})=>Object(G.jsx)(L.EuiSelect,{fullWidth:!0,hasNoInitialSelection:!0,value:e.policy,onChange:e=>t(e.target.value),disabled:n,isInvalid:a,options:[j.allow,j.deny].map((e=>({text:b(e),value:e})))}),render:e=>Object(G.jsx)(L.EuiText,{size:"s"},b(e.policy)),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.policyTableHead",{defaultMessage:"Policy"}),field:"policy"},{editingRender:(e,t,{isInvalid:a,isLoading:n})=>Object(G.jsx)(L.EuiSelect,{fullWidth:!0,hasNoInitialSelection:!0,value:e.rule,onChange:e=>t(e.target.value),disabled:n,isInvalid:a,options:[m.beginsWith,m.endsWith,m.contains,m.regex].map((e=>({text:x(e),value:e})))}),render:e=>Object(G.jsx)(L.EuiText,{size:"s"},x(e.rule)),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.ruleTableHead",{defaultMessage:"Rule"}),field:"rule"},{editingRender:(e,t,{isInvalid:a,isLoading:n})=>Object(G.jsx)(L.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)(L.EuiFieldText,{fullWidth:!0,value:e.pattern,onChange:e=>t(e.target.value),disabled:n,isInvalid:a})),Object(G.jsx)(L.EuiFlexItem,{grow:!1},Object(G.jsx)(L.EuiIconTip,{content:F(e),type:"iInCircle",position:"top"}))),render:e=>Object(G.jsx)(L.EuiCode,null,e.pattern),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.pathPatternTableHead",{defaultMessage:"Path pattern"}),field:"pattern"}],o=`/internal/app_search/engines/${a}/crawler/domains/${t}/crawl_rules`,p=`/internal/app_search/engines/${a}/crawler/domains/${t}`,d=e=>`/internal/app_search/engines/${a}/crawler/domains/${t}/crawl_rules/${e.id}`;return Object(G.jsx)(Pe.a,{addButtonText:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.addButtonLabel",{defaultMessage:"Add crawl rule"}),columns:l,description:e,instanceId:"CrawlRulesTable",items:s,addRoute:o,dataProperty:"crawl_rules",deleteRoute:d,updateRoute:d,reorderRoute:p,onAdd:(e,t)=>{r(t),Object(u.d)()},onDelete:(e,t)=>{r(t),Object(u.d)(),Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.deleteSuccessToastMessage",{defaultMessage:"The crawl rule has been deleted."}))},onUpdate:(e,t)=>{r(t),Object(u.d)()},onReorder:e=>{r(e),Object(u.d)()},title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlRulesTable.title",{defaultMessage:"Crawl rules"}),uneditableItems:i?[i]:void 0,canRemoveLastItem:!0})};var Ue=a(68);const He=e=>e.filter((e=>e.checked)).map((e=>e.label));a(771);const qe=()=>{const{domain:e}=Object(c.useValues)(Ne),{submitDeduplicationUpdate:t}=Object(c.useActions)(Ne),[a,s]=Object(i.useState)(!0),[l,u]=Object(i.useState)(!1);if(!e)return null;const{deduplicationEnabled:p,deduplicationFields:d}=e,g=((e,t)=>{const{availableDeduplicationFields:a,deduplicationFields:n,deduplicationEnabled:s}=e;let i;return i=t?a.map((e=>({label:e,checked:n.includes(e)?"on":void 0}))):a.filter((e=>n.includes(e))).map((e=>({label:e,checked:"on"}))),s||(i=i.map((e=>({...e,disabled:!0})))),i})(e,a);return Object(G.jsx)(Ue.a,{hasBorder:!0,title:Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.title",{defaultMessage:"Duplicate document handling"})),action:Object(G.jsx)(L.EuiButton,{color:"warning",iconType:"refresh",size:"s",onClick:()=>t(e,{fields:[]}),disabled:0===d.length},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.resetToDefaultsButtonLabel",{defaultMessage:"Reset to defaults"})),subtitle:Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.description",defaultMessage:"The web crawler only indexes unique pages. Choose which fields the crawler should use when considering which pages are duplicates. Deselect all schema fields to allow duplicate documents on this domain. {documentationLink}.",values:{documentationLink:Object(G.jsx)(L.EuiLink,{href:o.i,target:"_blank",external:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.learnMoreMessage",{defaultMessage:"Learn more about content hashing"}))}})},Object(G.jsx)(L.EuiSwitch,{label:"Prevent duplicate documents",checked:p,onChange:()=>t(e,p?{enabled:!1,fields:[]}:{enabled:!0})}),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiFlexGroup,null,Object(G.jsx)(L.EuiFlexItem,null,Object(G.jsx)("div",{className:"selectableWrapper"},Object(G.jsx)(L.EuiSelectable,{options:g,onChange:a=>t(e,{fields:He(a)}),searchable:!0,searchProps:{disabled:!p,append:Object(G.jsx)(L.EuiPopover,{button:Object(G.jsx)(L.EuiButtonEmpty,{size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>u(!l),className:"showAllFieldsPopoverToggle",disabled:!p},a?n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.allFieldsLabel",{defaultMessage:"All fields"}):n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.selectedFieldsLabel",{defaultMessage:"Selected fields"})),isOpen:l,closePopover:()=>u(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(G.jsx)(L.EuiContextMenuPanel,{items:[Object(G.jsx)(L.EuiContextMenuItem,{key:"all fields",icon:a?"check":"empty",onClick:()=>{s(!0),u(!1)}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deduplicationPanel.showAllFieldsButtonLabel",{defaultMessage:"Show all fields"})),Object(G.jsx)(L.EuiContextMenuItem,{key:"selected fields",icon:a?"empty":"check",onClick:()=>{s(!1),u(!1)}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.crawlerStatusIndicator.showSelectedFieldsButtonLabel",{defaultMessage:"Show only selected fields"}))]}))}},((e,t)=>Object(G.jsx)(r.a.Fragment,null,t,e)))))))},Ge=({})=>{const{domain:e}=Object(c.useValues)(Ne),{deleteDomain:t}=Object(c.useActions)(Ne);return e?Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiTitle,{size:"s"},Object(G.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deleteDomainPanel.title",{defaultMessage:"Delete domain"}))),Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)(L.EuiText,{size:"s"},Object(G.jsx)("p",null,Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.deleteDomainPanel.description",defaultMessage:"Remove this domain from your crawler. This will also delete all entry points and crawl rules you have setup. {cannotUndoMessage}.",values:{cannotUndoMessage:Object(G.jsx)("strong",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deleteDomainPanel.cannotUndoMessage",{defaultMessage:"This cannot be undone"}))}}))),Object(G.jsx)(L.EuiSpacer,{size:"m"}),Object(G.jsx)(L.EuiButton,{color:"danger",iconType:"trash",onClick:()=>{confirm(T(e.url))&&t(e)}},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.deleteDomainPanel.deleteDomainButtonLabel",{defaultMessage:"Delete domain"}))):null},$e=Object(c.kea)({path:["enterprise_search","app_search","crawler","entry_points_table"],actions:()=>({onAdd:(e,t)=>({entryPoint:e,entryPoints:t}),onDelete:(e,t)=>({entryPoint:e,entryPoints:t}),onUpdate:(e,t)=>({entryPoint:e,entryPoints:t})}),listeners:()=>({onAdd:({entryPoints:e})=>{Ne.actions.updateEntryPoints(e),Object(u.d)()},onDelete:({entryPoint:e,entryPoints:t})=>{Ne.actions.updateEntryPoints(t),Object(u.d)(),Object(u.g)(`Entry point "${e.value}" was removed.`)},onUpdate:({entryPoints:e})=>{Ne.actions.updateEntryPoints(e),Object(u.d)()}})}),We=({domain:e,engineName:t,items:a})=>{const{onAdd:s,onDelete:i,onUpdate:l}=Object(c.useActions)($e),u="value",p=[{editingRender:(t,a,{isInvalid:n,isLoading:s})=>Object(G.jsx)(L.EuiFieldText,{fullWidth:!0,value:t[u],onChange:e=>a(e.target.value),disabled:s,isInvalid:n,prepend:e.url}),render:t=>Object(G.jsx)(L.EuiText,{size:"s"},e.url,t[u]),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.urlTableHead",{defaultMessage:"URL"}),field:u}],d=`/internal/app_search/engines/${t}/crawler/domains/${e.id}/entry_points`,g=a=>`/internal/app_search/engines/${t}/crawler/domains/${e.id}/entry_points/${a.id}`;return Object(G.jsx)(Pe.a,{addButtonText:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.addButtonLabel",{defaultMessage:"Add entry point"}),columns:p,description:Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.description",{defaultMessage:"Include the most important URLs for your website here. Entry point URLs will be the first pages to be indexed and processed for links to other pages."})," ",Object(G.jsx)(L.EuiLink,{href:o.J,target:"_blank",external:!0},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.learnMoreLinkText",{defaultMessage:"Learn more about entry points."}))),instanceId:"EntryPointsTable",items:a,lastItemWarning:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.lastItemMessage",{defaultMessage:"The crawler requires at least one entry point."}),noItemsMessage:e=>Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiTitle,{size:"m"},Object(G.jsx)("h4",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.emptyMessageTitle",{defaultMessage:"There are no existing entry points."}))),Object(G.jsx)(L.EuiSpacer,null),Object(G.jsx)(L.EuiText,null,Object(G.jsx)(z.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.emptyMessageDescription",defaultMessage:"{link} to specify an entry point for the crawler",values:{link:Object(G.jsx)(L.EuiLink,{onClick:e},n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.emptyMessageLinkText",{defaultMessage:"Add an entry point"}))}})),Object(G.jsx)(L.EuiSpacer,null)),addRoute:d,canRemoveLastItem:!1,deleteRoute:g,updateRoute:g,dataProperty:"entry_points",onAdd:s,onDelete:i,onUpdate:l,title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.entryPointsTable.title",{defaultMessage:"Entry points"}),disableReordering:!0})},Qe=n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.addButtonLabel",{defaultMessage:"Add sitemap"}),Je=({domain:e,engineName:t,items:a})=>{const{updateSitemaps:s}=Object(c.useActions)(Ne),i="url",l=[{editingRender:(e,t,{isInvalid:a,isLoading:n})=>Object(G.jsx)(L.EuiFieldText,{fullWidth:!0,value:e[i],onChange:e=>t(e.target.value),disabled:n,isInvalid:a}),render:e=>Object(G.jsx)(L.EuiText,{size:"s"},e[i]),name:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.urlTableHead",{defaultMessage:"URL"}),field:i}],o=`/internal/app_search/engines/${t}/crawler/domains/${e.id}/sitemaps`,p=a=>`/internal/app_search/engines/${t}/crawler/domains/${e.id}/sitemaps/${a.id}`;return Object(G.jsx)(Pe.a,{addButtonText:Qe,columns:l,description:Object(G.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.description",{defaultMessage:"Specify sitemap URLs for the crawler on this domain."})),instanceId:"SitemapsTable",items:a,canRemoveLastItem:!0,noItemsMessage:e=>Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiEmptyPrompt,{title:Object(G.jsx)("h4",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.emptyMessageTitle",{defaultMessage:"There are no existing sitemaps."})),titleSize:"s",body:Object(G.jsx)(L.EuiText,null,"Add a sitemap to specify an entry point for the crawler."),actions:Object(G.jsx)(L.EuiButton,{onClick:e},Qe)})),addRoute:o,deleteRoute:p,updateRoute:p,dataProperty:"sitemaps",onAdd:(e,t)=>{s(t),Object(u.d)()},onDelete:(e,t)=>{s(t),Object(u.d)(),Object(u.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.deleteSuccessToastMessage",{defaultMessage:"The sitemap has been deleted."}))},onUpdate:(e,t)=>{s(t),Object(u.d)()},title:n.i18n.translate("xpack.enterpriseSearch.appSearch.crawler.sitemapsTable.title",{defaultMessage:"Sitemaps"}),disableReordering:!0})},Ke=()=>{const{domainId:e}=Object(ze.useParams)(),{engineName:t}=d.a.values,{dataLoading:a,domain:n}=Object(c.useValues)(Ne),{fetchDomainData:l}=Object(c.useActions)(Ne);return Object(i.useEffect)((()=>{l(e)}),[]),Object(G.jsx)(D.a,{pageChrome:Object(d.d)([s,(null==n?void 0:n.url)||"..."]),pageHeader:a?void 0:{pageTitle:n.url,rightSideItems:[Object(G.jsx)(Le,null),Object(G.jsx)(Ce,null)]},isLoading:a},Object(G.jsx)(Oe,null),Object(G.jsx)(L.EuiSpacer,{size:"l"}),n&&Object(G.jsx)(r.a.Fragment,null,Object(G.jsx)(L.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(G.jsx)(We,{domain:n,engineName:t,items:n.entryPoints})),Object(G.jsx)(L.EuiSpacer,{size:"xl"}),Object(G.jsx)(L.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(G.jsx)(Je,{domain:n,engineName:t,items:n.sitemaps})),Object(G.jsx)(L.EuiSpacer,{size:"xl"}),Object(G.jsx)(L.EuiPanel,{paddingSize:"l",hasBorder:!0},Object(G.jsx)(Ve,{domainId:e,engineName:t,crawlRules:n.crawlRules,defaultCrawlRule:n.defaultCrawlRule})),Object(G.jsx)(L.EuiSpacer,{size:"xxl"})),Object(G.jsx)(qe,null),Object(G.jsx)(L.EuiSpacer,{size:"xl"}),Object(G.jsx)(Ge,null),Object(G.jsx)(fe,null),Object(G.jsx)(ce,null))},Ye=()=>{const{fetchCrawlerData:e}=Object(c.useActions)(A);return Object(i.useEffect)((()=>{e()}),[]),Object(G.jsx)(l.c,null,Object(G.jsx)(l.a,{exact:!0,path:o.u},Object(G.jsx)(De,null)),Object(G.jsx)(l.a,{exact:!0,path:o.t},Object(G.jsx)(Ke,null)))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return te})),a.d(t,"b",(function(){return re}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.title",{defaultMessage:"Documents"});var i=a(37),r=a(43),c=a(38),l=a(41),o=a(48),u=a(45);const p=Object(i.kea)({path:["enterprise_search","app_search","document_detail_logic"],actions:()=>({setFields:e=>({fields:e}),getDocumentDetails:e=>({documentId:e}),deleteDocument:e=>({documentId:e})}),reducers:()=>({dataLoading:[!0,{setFields:()=>!1}],fields:[[],{setFields:(e,{fields:t})=>t}]}),listeners:({actions:e})=>({getDocumentDetails:async({documentId:t})=>{const{engineName:a}=u.a.values,{navigateToUrl:n}=l.a.values;try{const{http:n}=c.a.values,s=await n.get(`/internal/app_search/engines/${a}/documents/${t}`);e.setFields(s.fields)}catch(e){Object(r.e)(e,{isQueued:!0}),n(Object(u.c)(o.A))}},deleteDocument:async({documentId:e})=>{const{engineName:t}=u.a.values,{navigateToUrl:a}=l.a.values,s=n.i18n.translate("xpack.enterpriseSearch.appSearch.documentDetail.confirmDelete",{defaultMessage:"Are you sure you want to delete this document?"}),i=n.i18n.translate("xpack.enterpriseSearch.appSearch.documentDetail.deleteSuccess",{defaultMessage:"Your document was deleted"});if(window.confirm(s))try{const{http:n}=c.a.values;await n.delete(`/internal/app_search/engines/${t}/documents/${e}`),Object(r.g)(i),a(Object(u.c)(o.A))}catch(e){Object(r.e)(e)}}})});Object(i.kea)({path:["enterprise_search","app_search","documents_logic"],actions:()=>({openDocumentCreation:!0,closeDocumentCreation:!0}),reducers:()=>({isDocumentCreationOpen:[!1,{openDocumentCreation:()=>!0,closeDocumentCreation:()=>!1}]})});var d=a(11),g=a.n(d),h=a(13),j=a(57),b=a(53),m=a(327),x=a(12);const S=()=>{const{showCreationModes:e}=Object(i.useActions)(m.c);return Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiButton,{fill:!0,iconType:"plusInCircle","data-test-subj":"IndexDocumentsButton",onClick:e},n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.indexDocuments",{defaultMessage:"Index documents"})),Object(x.jsx)(m.b,null))},f=()=>Object(x.jsx)(h.EuiEmptyPrompt,{"data-test-subj":"EmptyDocumentPrompt",iconType:"documents",title:Object(x.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.empty.title",{defaultMessage:"Add your first documents"})),body:Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.empty.description",{defaultMessage:"You can index documents using the App Search Web Crawler, by uploading JSON, or by using the API."})),actions:Object(x.jsx)(h.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:o.K},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.documents.empty.buttonLabel",{defaultMessage:"Read the documents guide"}))});var O=a(70),y=a(853),v=a.n(y),w=(a(848),a(335)),E=a(75),C=a(16);const M=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy.option.ascendingDropDownOptionLabel",{defaultMessage:"{fieldName} (asc)",values:{fieldName:e}}),k=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy.option.descendingDropDownOptionLabel",{defaultMessage:"{fieldName} (desc)",values:{fieldName:e}}),T=e=>["asc","desc"].map((t=>({name:"asc"===t?M(e):k(e),value:e,direction:t}))),F=({onClick:e})=>Object(x.jsx)(h.EuiFlexGroup,{direction:"column",className:"customizationCallout",alignItems:"center",gutterSize:"none"},Object(x.jsx)(h.EuiIcon,{type:"iInCircle",color:"primary",size:"xxl"}),Object(x.jsx)(h.EuiSpacer,null),Object(x.jsx)(h.EuiText,{size:"s",textAlign:"center"},Object(x.jsx)("strong",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationCallout.message",{defaultMessage:'Did you know that you can customize your document search experience? Click "Customize" below to get started.'}))),Object(x.jsx)(h.EuiSpacer,null),Object(x.jsx)(h.EuiButton,{fill:!0,color:"primary",iconType:"gear",onClick:e},n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationCallout.button",{defaultMessage:"Customize"})));var _=a(42);const I=e=>({label:e}),R=({label:e})=>e,A=({filterFields:e,onClose:t,onSave:a,sortFields:s})=>{const{engine:r}=Object(i.useValues)(u.a),[c,l]=Object(d.useState)(e.map(I)),[o,p]=Object(d.useState)(s.map(I)),g=r.advancedSchema||{},j=Object(d.useMemo)((()=>Object.keys(g).filter((e=>g[e].capabilities.filter)).map(I)),[g]),b=Object(d.useMemo)((()=>Object.keys(g).filter((e=>g[e].capabilities.sort)).map(I)),[g]);return Object(x.jsx)(h.EuiModal,{onClose:t},Object(x.jsx)(h.EuiModalHeader,null,Object(x.jsx)(h.EuiModalHeaderTitle,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationModal.title",{defaultMessage:"Customize document search"}))),Object(x.jsx)(h.EuiModalBody,null,Object(x.jsx)(h.EuiForm,null,Object(x.jsx)(h.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationModal.filterFieldsLabel",{defaultMessage:"Filter fields"}),fullWidth:!0,helpText:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationModal.filterFields",{defaultMessage:"Faceted values rendered as filters and available as query refinement"})},Object(x.jsx)(h.EuiComboBox,{"data-test-subj":"filterFieldsDropdown",fullWidth:!0,options:j,selectedOptions:c,onChange:l})),Object(x.jsx)(h.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationModal.sortFieldsLabel",{defaultMessage:"Sort fields"}),fullWidth:!0,helpText:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationModal.sortFields",{defaultMessage:"Used to display result sorting options, ascending and descending"})},Object(x.jsx)(h.EuiComboBox,{"data-test-subj":"sortFieldsDropdown",fullWidth:!0,options:b,selectedOptions:o,onChange:p})))),Object(x.jsx)(h.EuiModalFooter,null,Object(x.jsx)(h.EuiButtonEmpty,{onClick:t},_.e),Object(x.jsx)(h.EuiButton,{fill:!0,onClick:()=>{a({filterFields:c.map(R),sortFields:o.map(R)})}},_.z)))};var L=a(64),D=a(47),z=a.n(D);const P=({onChange:e,value:t,inputProps:a})=>Object(x.jsx)(h.EuiFieldSearch,z()({value:t,onChange:t=>e(t.target.value),fullWidth:!0},a)),N=e=>({text:e.label,value:e.value}),B=e=>e.value,V=({onChange:e,options:t,value:a})=>{const s=t.map(B),i=a&&!s.includes(a)?void 0:a;return Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiSelect,{fullWidth:!0,options:t.map(N),value:i,prepend:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy",{defaultMessage:"Sort by"}),onChange:t=>e(t.target.value),"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy.ariaLabel",{defaultMessage:"Sort results by"})}))};var U=a(167);const H=({result:e,schemaForTypeHighlights:t,isMetaEngine:a})=>Object(x.jsx)("li",null,Object(x.jsx)(U.a,{result:e,shouldLinkToDetailPage:!0,schemaForTypeHighlights:t,isMetaEngine:a})),q=e=>({text:e,value:e}),G=({onChange:e,options:t=[],value:a=20})=>{const s=a&&!t.includes(a)?void 0:a;return Object(x.jsx)("div",null,Object(x.jsx)(h.EuiSelect,{options:t.map(q),value:s,prepend:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.resultsPerPage.show",{defaultMessage:"Show:"}),onChange:t=>e(parseInt(t.target.value,10)),"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.resultsPerPage.ariaLabel",{defaultMessage:"Number of results to show per page"})}))},$=({current:e=1,onChange:t,totalPages:a,"aria-label":n})=>Object(x.jsx)(h.EuiPagination,{pageCount:a,activePage:e-1,onPageClick:e=>t(e+1),"aria-label":n}),W=({label:e,onMoreClick:t,onRemove:a,onSelect:s,options:i,showMore:r})=>{const c=Object(h.htmlIdGenerator)(),l=i.map(((e,t)=>({id:c(String(t)),label:e.value||n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.multiCheckboxFacetsView.noValue.selectOption",{defaultMessage:"<No value>"})}))),o=i.reduce(((e,t,a)=>(t.selected&&(e[c(String(a))]=!0),e)),{});return Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiCheckboxGroup,{"data-test-subj":"checkbox-group",className:"documentsSearchExperience__facet",legend:{children:e},options:l,idToSelectedMap:o,onChange:e=>{const t=parseInt(e.split("_")[1],10),n=i[t];n.selected?a(n.value):s(n.value)},compressed:!0}),r&&Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiSpacer,{size:"m"}),Object(x.jsx)(h.EuiFlexGroup,{direction:"row",justifyContent:"center"},Object(x.jsx)(h.EuiButtonEmpty,{"data-test-subj":"more",onClick:t,iconSide:"right",iconType:"arrowDown",size:"xs"},n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.multiCheckboxFacetsView.showMore",{defaultMessage:"Show more"})))))},Q=({"aria-label":e})=>Object(x.jsx)(h.EuiFlexGroup,{alignItems:"center",responsive:!1,className:"documentsSearchExperience__pagingInfo"},Object(x.jsx)(h.EuiFlexItem,null,Object(x.jsx)(O.Paging,{view:$,"aria-label":e})),Object(x.jsx)(h.EuiFlexItem,{grow:!1},Object(x.jsx)(O.ResultsPerPage,{view:G}))),J=()=>{const{resultSearchTerm:e,totalResults:t,wasSearched:a}=(()=>{const{driver:e}=Object(d.useContext)(O.SearchContext),[t,a]=Object(d.useState)(e.state);return Object(d.useEffect)((()=>{const t=e=>{a(e)};return e.subscribeToStateChanges(t),()=>{e.unsubscribeToStateChanges(t)}}),[t]),t})(),{isMetaEngine:s,engine:r}=Object(i.useValues)(u.a);return a?t?Object(x.jsx)(h.EuiFlexGroup,{direction:"column",gutterSize:"none","data-test-subj":"documentsSearchResults"},Object(x.jsx)(Q,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.paging.ariaLabelTop",{defaultMessage:"Search results paging at top of results"})}),Object(x.jsx)(h.EuiSpacer,null),Object(x.jsx)(O.Results,{titleField:"id",resultView:({result:e})=>Object(x.jsx)(H,{result:e,schemaForTypeHighlights:r.schema,isMetaEngine:s})}),Object(x.jsx)(h.EuiSpacer,null),Object(x.jsx)(Q,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.paging.ariaLabelBottom",{defaultMessage:"Search results paging at bottom of results"})})):e?Object(x.jsx)(h.EuiEmptyPrompt,{"data-test-subj":"documentsSearchNoResults",body:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.noResults",{defaultMessage:'No results for "{resultSearchTerm}" yet!',values:{resultSearchTerm:e}})}):null:Object(x.jsx)(L.a,null)},K=n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy.option.documentId",{defaultMessage:"Document ID"}),Y=n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.sortBy.option.relevance",{defaultMessage:"Relevance"}),Z=[{name:k(K),value:"id",direction:"desc"},{name:M(K),value:"id",direction:"asc"}],X=[{name:Y,value:"_score",direction:"desc"}],ee=()=>{const{engine:e}=Object(i.useValues)(u.a),{http:t}=Object(i.useValues)(c.a),a=t.basePath.prepend("/internal/app_search/search-ui"),[s,r]=Object(d.useState)(!1),l=()=>r(!0),o=()=>r(!1),[p,j]=Object(w.a)(`documents-search-experience-customization--${e.name}`,{filterFields:[],sortFields:[]}),b="elasticsearch"===e.type||"meta"===e.type?X:Z,m=((e,t)=>[...t,...Object(C.flatten)(e.sortFields.map(T))])(p,b),S=new v.a({cacheResponses:!1,endpointBase:a,engineName:e.name,additionalHeaders:{"kbn-xsrf":!0}}),f={sortField:b[0].value,sortDirection:"desc"},y=((e,t,a,n={sortDirection:"desc",sortField:"id"})=>{const s=a.filterFields.filter((e=>!!t[e]&&t[e].type!==E.c.Geolocation)).filter((e=>!!t[e].capabilities.facet)).reduce(((e,t)=>({...e,[t]:{type:"value",size:30}})),{}),i=Object.entries(t).filter((([,e])=>e.type!==E.c.Nested)).reduce(((e,[t,a])=>a.capabilities.snippet?{...e,[t]:{raw:{},snippet:{size:300}}}:{...e,[t]:{raw:{}}}),{});return{alwaysSearchOnInitialLoad:!0,apiConnector:e,trackUrlState:!1,initialState:n,searchQuery:{disjunctiveFacets:Object.keys(s),facets:s,result_fields:i}}})(S,e.advancedSchema||{},p,f);return Object(x.jsx)("div",{className:"documentsSearchExperience"},Object(x.jsx)(O.SearchProvider,{config:y},Object(x.jsx)(O.SearchBox,{searchAsYouType:!0,inputProps:{placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.placeholder",{defaultMessage:"Filter documents..."}),"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.ariaLabel",{defaultMessage:"Filter documents"}),"data-test-subj":"DocumentsFilterInput"},view:P}),Object(x.jsx)(h.EuiSpacer,{size:"xl"}),Object(x.jsx)(h.EuiFlexGroup,{direction:"row"},Object(x.jsx)(h.EuiFlexItem,{className:"documentsSearchExperience__sidebar"},Object(x.jsx)(O.Sorting,{className:"documentsSearchExperience__sorting",sortOptions:m,view:V}),Object(x.jsx)(h.EuiSpacer,null),p.filterFields.length>0?Object(x.jsx)(g.a.Fragment,null,p.filterFields.map((e=>Object(x.jsx)("section",{key:e},Object(x.jsx)(O.Facet,{field:e,label:e,view:W,filterType:"any"}),Object(x.jsx)(h.EuiSpacer,{size:"l"})))),Object(x.jsx)(h.EuiButton,{"data-test-subj":"customize",color:"primary",iconType:"gear",onClick:l},n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.search.customizationButton",{defaultMessage:"Customize filters and sort"}))):Object(x.jsx)(F,{onClick:l})),Object(x.jsx)(h.EuiFlexItem,{className:"documentsSearchExperience__content"},Object(x.jsx)(J,null)))),s&&Object(x.jsx)(A,{filterFields:p.filterFields,sortFields:p.sortFields,onClose:o,onSave:({filterFields:e,sortFields:t})=>{j({filterFields:e,sortFields:t}),o()}}))},te=()=>{const{isMetaEngine:e,isElasticsearchEngine:t,hasNoDocuments:a,engine:{elasticsearchIndexName:r}}=Object(i.useValues)(u.a),{myRole:c}=Object(i.useValues)(j.a),l=c.canManageEngineDocuments&&!e&&!t;return Object(x.jsx)(b.a,{pageChrome:Object(u.d)([s]),pageHeader:{pageTitle:s,rightSideItems:l?[Object(x.jsx)(S,null)]:[]},isEmptyState:a,emptyState:Object(x.jsx)(f,null)},e&&Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiCallOut,{"data-test-subj":"MetaEnginesCallout",iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.metaEngineCallout.title",{defaultMessage:"You are within a Meta Engine."})},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.metaEngineCallout",{defaultMessage:"Meta Engines have many Source Engines. Visit your Source Engines to alter their documents."}))),Object(x.jsx)(h.EuiSpacer,null)),t&&Object(x.jsx)(g.a.Fragment,null,Object(x.jsx)(h.EuiCallOut,{"data-test-subj":"ElasticsearchEnginesCallout",iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.elasticsearchEngineCallout.title",{defaultMessage:"This engine's data is managed by Elasticsearch."})},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.documents.elasticsearchEngineCallout",{defaultMessage:"The engine is attached to {elasticsearchIndexName}. You can modify this index's data in Kibana.",values:{elasticsearchIndexName:r}}))),Object(x.jsx)(h.EuiSpacer,null)),Object(x.jsx)(ee,null))};var ae=a(15),ne=a(79),se=a(102);const ie=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.documentDetail.title",{defaultMessage:"Document: {documentId}",values:{documentId:e}}),re=()=>{const{dataLoading:e,fields:t}=Object(i.useValues)(p),{deleteDocument:a,getDocumentDetails:r,setFields:c}=Object(i.useActions)(p),{isMetaEngine:l,isElasticsearchEngine:o}=Object(i.useValues)(u.a),g=!l&&!o,{documentId:j}=Object(ae.useParams)(),{documentId:m}=Object(ne.b)();Object(d.useEffect)((()=>(r(j),()=>{c([])})),[]);const S=[{name:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentDetail.fieldHeader",{defaultMessage:"Field"}),width:"20%",render:e=>e.name},{name:n.i18n.translate("xpack.enterpriseSearch.appSearch.documentDetail.valueHeader",{defaultMessage:"Value"}),width:"80%",render:({value:e,type:t})=>Object(x.jsx)(se.b,{raw:e,type:t})}],f=Object(x.jsx)(h.EuiButton,{color:"danger",iconType:"trash",onClick:()=>a(j),"data-test-subj":"DeleteDocumentButton"},_.l);return Object(x.jsx)(b.a,{pageChrome:Object(u.d)([s,m]),pageHeader:{pageTitle:ie(m),rightSideItems:g?[f]:[]},isLoading:e},Object(x.jsx)(h.EuiPanel,{hasBorder:!0},Object(x.jsx)(h.EuiBasicTable,{columns:S,items:t})))}},function(e,t,a){"use strict";a.d(t,"b",(function(){return L})),a.d(t,"a",(function(){return u.d}));var n=a(11),s=a.n(n),i=a(37),r=a(13),c=a(2),l=a(73),o=a(53),u=a(76),p=a(42),d=a(43),g=a(38),h=a(61),j=a(57),b=a(240);const m={name:"",type:u.b.Private,read:!0,write:!0,access_all_engines:!0},x=Object(i.kea)({path:["enterprise_search","app_search","credentials_logic"],actions:()=>({addEngineName:e=>e,onApiTokenCreateSuccess:e=>e,onApiTokenError:e=>e,onApiTokenUpdateSuccess:e=>e,removeEngineName:e=>e,setAccessAllEngines:e=>e,setCredentialsData:(e,t)=>({meta:e,apiTokens:t}),setCredentialsDetails:e=>e,setNameInputBlurred:e=>e,setTokenReadWrite:({name:e,checked:t})=>({name:e,checked:t}),setTokenName:e=>e,setTokenType:e=>e,showCredentialsForm:(e={...m})=>e,hideCredentialsForm:!1,resetCredentials:!1,onPaginate:e=>({newPageIndex:e}),fetchCredentials:!0,fetchDetails:!0,deleteApiKey:e=>e,onApiTokenChange:()=>null,onEngineSelect:e=>e}),reducers:()=>({apiTokens:[[],{setCredentialsData:(e,{apiTokens:t})=>t,onApiTokenCreateSuccess:(e,t)=>[...e,t],onApiTokenUpdateSuccess:(e,t)=>[...e.filter((e=>e.name!==t.name)),t]}],meta:[p.k,{setCredentialsData:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(h.c)(e,t)}],isCredentialsDetailsComplete:[!1,{setCredentialsDetails:()=>!0,resetCredentials:()=>!1}],isCredentialsDataComplete:[!1,{setCredentialsData:()=>!0,fetchCredentials:()=>!1,resetCredentials:()=>!1}],engines:[[],{setCredentialsDetails:(e,{engines:t})=>t}],nameInputBlurred:[!1,{setNameInputBlurred:(e,t)=>t}],activeApiToken:[m,{addEngineName:(e,t)=>({...e,engines:[...e.engines||[],t]}),removeEngineName:(e,t)=>({...e,engines:(e.engines||[]).filter((e=>e!==t))}),setAccessAllEngines:(e,t)=>({...e,access_all_engines:t,engines:t?[]:e.engines}),onApiTokenCreateSuccess:()=>m,onApiTokenUpdateSuccess:()=>m,setTokenName:(e,t)=>({...e,name:Object(b.a)(t)}),setTokenReadWrite:(e,{name:t,checked:a})=>({...e,[t]:a}),setTokenType:(e,t)=>({...e,access_all_engines:t!==u.b.Admin&&e.access_all_engines,engines:t===u.b.Admin?[]:e.engines,write:t===u.b.Private,read:t===u.b.Private,type:t}),showCredentialsForm:(e,t)=>t}],activeApiTokenRawName:["",{setTokenName:(e,t)=>t,showCredentialsForm:(e,t)=>t.name,hideCredentialsForm:()=>"",onApiTokenCreateSuccess:()=>"",onApiTokenUpdateSuccess:()=>""}],shouldShowCredentialsForm:[!1,{showCredentialsForm:()=>!0,hideCredentialsForm:()=>!1,onApiTokenCreateSuccess:()=>!1,onApiTokenUpdateSuccess:()=>!1}],formErrors:[[],{onApiTokenError:(e,t)=>t,onApiTokenCreateSuccess:()=>[],showCredentialsForm:()=>[],resetCredentials:()=>[]}]}),selectors:({selectors:e})=>({fullEngineAccessChecked:[()=>[j.a.selectors.myRole,e.activeApiToken],(e,t)=>!(!e.canAccessAllEngines||!t.access_all_engines)],dataLoading:[()=>[e.isCredentialsDetailsComplete,e.isCredentialsDataComplete],(e,t)=>!1===e&&!1===t],activeApiTokenExists:[()=>[e.activeApiToken],e=>!!e.id]}),listeners:({actions:e,values:t})=>({showCredentialsForm:()=>{Object(d.d)()},fetchCredentials:async()=>{try{const{http:a}=g.a.values,{meta:n}=t,s={"page[current]":n.page.current,"page[size]":n.page.size},i=await a.get("/internal/app_search/credentials",{query:s});e.setCredentialsData(i.meta,i.results)}catch(e){Object(d.e)(e)}},fetchDetails:async()=>{try{const{http:t}=g.a.values,a=await t.get("/internal/app_search/credentials/details");e.setCredentialsDetails(a)}catch(e){Object(d.e)(e)}},deleteApiKey:async t=>{try{const{http:a}=g.a.values;await a.delete(`/internal/app_search/credentials/${t}`),e.fetchCredentials(),Object(d.g)(Object(u.e)(t))}catch(e){Object(d.e)(e)}},onApiTokenChange:async()=>{const{id:a,name:n,engines:s,type:i,read:r,write:c}=t.activeApiToken,l={name:n,type:i};i===u.b.Private&&(l.read=r,l.write=c),i!==u.b.Admin&&(l.access_all_engines=t.fullEngineAccessChecked,l.engines=s);try{const{http:t}=g.a.values,s=JSON.stringify(l);if(a){const a=await t.put(`/internal/app_search/credentials/${n}`,{body:s});e.onApiTokenUpdateSuccess(a),Object(d.g)(Object(u.n)(n))}else{const a=await t.post("/internal/app_search/credentials",{body:s});e.onApiTokenCreateSuccess(a),Object(d.g)(Object(u.c)(n))}}catch(e){Object(d.e)(e)}},onEngineSelect:a=>{var n,s;null!==(n=t.activeApiToken)&&void 0!==n&&null!==(s=n.engines)&&void 0!==s&&s.includes(a)?e.removeEngineName(a):e.addEngineName(a)}})});var S=a(12);const f=()=>{const{setNameInputBlurred:e,setTokenName:t}=Object(i.useActions)(x),{activeApiToken:{name:a},activeApiTokenRawName:n,activeApiTokenExists:s}=Object(i.useValues)(x);return Object(S.jsx)(r.EuiFormRow,{label:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formName.label",{defaultMessage:"Key name"}),helpText:a&&a!==n?c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formName.helpText",{defaultMessage:"Your key will be named: {name}",values:{name:a}}):"",fullWidth:!0},Object(S.jsx)(r.EuiFieldText,{name:"raw_name",id:"raw_name",placeholder:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formName.placeholder",{defaultMessage:"i.e., my-engine-key"}),"data-test-subj":"APIKeyField",value:n,onChange:e=>t(e.target.value),onBlur:()=>e(!0),autoComplete:"off",maxLength:64,disabled:s,required:!0,fullWidth:!0,autoFocus:!0}))},O=()=>{const{myRole:e}=Object(i.useValues)(j.a),{setTokenType:t}=Object(i.useActions)(x),{activeApiToken:a,activeApiTokenExists:n}=Object(i.useValues)(x),s=u.k[a.type],l=u.m.filter((t=>{var a;return null==e||null===(a=e.credentialTypes)||void 0===a?void 0:a.includes(t.value)}));return Object(S.jsx)(r.EuiFormRow,{label:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formType.label",{defaultMessage:"Key type"}),fullWidth:!0,helpText:Object(S.jsx)(r.EuiText,{size:"xs"},Object(S.jsx)("p",null,Object(S.jsx)("strong",null,s)," ",Object(S.jsx)(r.EuiLink,{href:u.f},c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.documentationLink1",{defaultMessage:"Visit the documentation"}))," ",c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.documentationLink2",{defaultMessage:"to learn more about keys."})))},Object(S.jsx)(r.EuiSelect,{name:"token_type",options:l,value:a.type,onChange:e=>t(e.target.value),placeholder:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formType.placeholder",{defaultMessage:"Select a key type"}),disabled:n,required:!0,fullWidth:!0}))},y=()=>{const{setTokenReadWrite:e}=Object(i.useActions)(x),{activeApiToken:t}=Object(i.useValues)(x);return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiSpacer,{size:"s"}),Object(S.jsx)(r.EuiPanel,{hasBorder:!0},Object(S.jsx)(r.EuiTitle,{size:"xs"},Object(S.jsx)("h3",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.label",{defaultMessage:"Read and Write Access Levels"}))),Object(S.jsx)(r.EuiText,null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.helpText",{defaultMessage:"Only applies to Private API Keys."})),Object(S.jsx)(r.EuiSpacer,{size:"s"}),Object(S.jsx)(r.EuiCheckbox,{name:"read",id:"read",checked:t.read,onChange:t=>e(t.target),label:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.readLabel",{defaultMessage:"Read Access"})}),Object(S.jsx)(r.EuiCheckbox,{name:"write",id:"write",checked:t.write,onChange:t=>e(t.target),label:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formReadWrite.writeLabel",{defaultMessage:"Write Access"})})))},v=()=>{const{myRole:e}=Object(i.useValues)(j.a),{setAccessAllEngines:t}=Object(i.useActions)(x),{fullEngineAccessChecked:a}=Object(i.useValues)(x);return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiSpacer,null),Object(S.jsx)(r.EuiFormRow,{label:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.label",{defaultMessage:"Engine Access Control"})},Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiRadio,{name:"engine_access",id:"all_engines",label:Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiTitle,{size:"xxs"},Object(S.jsx)("h3",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.fullAccess.label",{defaultMessage:"Full Engine Access"}))),Object(S.jsx)(r.EuiText,{size:"s"},c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.fullAccess.helpText",{defaultMessage:"Access to all current and future Engines."}))),hidden:!e.canAccessAllEngines,checked:a,value:a.toString(),onChange:()=>t(!0)}),Object(S.jsx)(r.EuiSpacer,{size:"s"}),Object(S.jsx)(r.EuiRadio,{name:"engine_access",id:"specific_engines",label:Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiTitle,{size:"xxs"},Object(S.jsx)("h3",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.limitedAccess.label",{defaultMessage:"Limited Engine Access"}))),Object(S.jsx)(r.EuiText,{size:"s"},c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.limitedAccess.helpText",{defaultMessage:"Limit key access to specific Engines."}))),checked:!a,value:(!a).toString(),onChange:()=>t(!1)}))),!a&&Object(S.jsx)(w,null))},w=()=>{const{onEngineSelect:e}=Object(i.useActions)(x),{activeApiToken:t,engines:a}=Object(i.useValues)(x);return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiSpacer,{size:"s"}),Object(S.jsx)(r.EuiPanel,{hasBorder:!0},Object(S.jsx)(r.EuiTitle,{size:"xs"},Object(S.jsx)("h4",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.engineAccess.label",{defaultMessage:"Select Engines"}))),Object(S.jsx)(r.EuiText,null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.formEngineAccess.engineAccess.helpText",{defaultMessage:"Engines which the key can access:"})),Object(S.jsx)(r.EuiSpacer,{size:"s"}),a.map((a=>{var n;return Object(S.jsx)(r.EuiCheckbox,{key:a.name,name:a.name,id:`engine_${a.name}`,label:a.name,checked:!(null==t||null===(n=t.engines)||void 0===n||!n.includes(a.name)),onChange:()=>e(a.name)})}))))},E=()=>Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiSpacer,null),Object(S.jsx)(r.EuiCallOut,{title:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.updateWarningTitle",{defaultMessage:"Proceed with caution!"}),color:"warning",iconType:"warning"},Object(S.jsx)("p",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.updateWarning",{defaultMessage:"Existing API keys may be shared between users. Changing permissions for this key will affect all users who have access to this key."})))),C=()=>{const{onApiTokenChange:e}=Object(i.useActions)(x),{activeApiToken:t,activeApiTokenExists:a}=Object(i.useValues)(x);return Object(S.jsx)(r.EuiFlyoutBody,null,Object(S.jsx)(d.a,null),Object(S.jsx)(r.EuiForm,{onSubmit:t=>{t.preventDefault(),e()},component:"form"},Object(S.jsx)(f,null),Object(S.jsx)(O,null),t.type===u.b.Private&&Object(S.jsx)(y,null),t.type!==u.b.Admin&&Object(S.jsx)(v,null)),a&&Object(S.jsx)(E,null))},M=()=>{const{hideCredentialsForm:e,onApiTokenChange:t}=Object(i.useActions)(x),{activeApiTokenExists:a}=Object(i.useValues)(x);return Object(S.jsx)(r.EuiFlyoutFooter,null,Object(S.jsx)(r.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(S.jsx)(r.EuiFlexItem,{grow:!1},Object(S.jsx)(r.EuiButtonEmpty,{iconType:"cross",onClick:e},p.f)),Object(S.jsx)(r.EuiFlexItem,{grow:!1},Object(S.jsx)(r.EuiButton,{onClick:t,fill:!0,color:"success",iconType:"check","data-test-subj":"APIKeyActionButton"},a?p.B:p.z))))},k=()=>{const{activeApiToken:e}=Object(i.useValues)(x);return Object(S.jsx)(r.EuiFlyoutHeader,{hasBorder:!0},Object(S.jsx)(r.EuiTitle,{size:"m"},Object(S.jsx)("h2",{id:u.g},e.id?c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.flyout.updateTitle",{defaultMessage:"Update {tokenName}",values:{tokenName:e.name}}):c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.flyout.createTitle",{defaultMessage:"Create a new key"}))))},T=()=>{const{hideCredentialsForm:e}=Object(i.useActions)(x);return Object(S.jsx)(r.EuiPortal,null,Object(S.jsx)(r.EuiFlyout,{onClose:e,hideCloseButton:!0,ownFocus:!0,"aria-labelledby":u.g,size:"s"},Object(S.jsx)(k,null),Object(S.jsx)(C,null),Object(S.jsx)(M,null)))};var F=a(333),_=a(48);const I=(e,t)=>e.id?t.id?e.id-t.id:1:-1,R=({copy:e,toggleIsHidden:t,isHidden:a,text:n})=>{const i=a?"eye":"eyeClosed",l=a?c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.showApiKey",{defaultMessage:"Show API Key"}):c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.hideApiKey",{defaultMessage:"Hide API Key"});return Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.copyApiKey",{defaultMessage:"Copy API Key to clipboard"})}),Object(S.jsx)(r.EuiButtonIcon,{onClick:t,iconType:i,"aria-label":l,"aria-pressed":!a,style:{marginRight:"0.25em"}}),n)},A=()=>{const{deleteApiKey:e,onPaginate:t,showCredentialsForm:a}=Object(i.useActions)(x),{apiTokens:s,meta:l,isCredentialsDataComplete:o}=Object(i.useValues)(x),d=Object(n.useMemo)((()=>s.slice().sort(I)),[s]),g=[{name:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.list.nameTitle",{defaultMessage:"Name"}),width:"12%",render:e=>e.name},{name:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.list.typeTitle",{defaultMessage:"Type"}),width:"15%",render:e=>u.l[e.type]},{name:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.list.keyTitle",{defaultMessage:"Key"}),width:"36%",className:"eui-textBreakAll",render:e=>{const{key:t}=e;return t?Object(S.jsx)(r.EuiCopy,{textToCopy:t,afterMessage:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.copied",{defaultMessage:"Copied"})},(e=>Object(S.jsx)(F.a,{text:t},(({hiddenText:t,isHidden:a,toggle:n})=>Object(S.jsx)(R,{copy:e,toggleIsHidden:n,isHidden:a,text:t}))))):null},mobileOptions:{width:"100%"}},{name:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.list.modesTitle",{defaultMessage:"Modes"}),width:"10%",render:e=>(e=>{const{read:t=!1,write:a=!1,type:n}=e;switch(n){case u.b.Admin:return"--";case u.b.Search:return u.j;default:return t&&a?u.i:a?u.o:u.h}})(e)},{name:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.list.enginesTitle",{defaultMessage:"Engines"}),width:"18%",render:e=>(e=>{const{type:t,access_all_engines:a,engines:n=[]}=e;return t===u.b.Admin?"--":a?u.a:Object(S.jsx)("ul",null,n.map((e=>Object(S.jsx)("li",{key:e},e))))})(e)},{actions:[{name:p.n,description:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.editKey",{defaultMessage:"Edit API Key"}),type:"icon",icon:"pencil",color:"primary",onClick:e=>a(e)},{name:p.l,description:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.deleteKey",{defaultMessage:"Delete API Key"}),type:"icon",icon:"trash",color:"danger",onClick:t=>e(t.name)}]}];return Object(S.jsx)(r.EuiBasicTable,{columns:g,items:d,noItemsMessage:Object(S.jsx)(r.EuiEmptyPrompt,{iconType:"editorStrike",title:Object(S.jsx)("h2",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.empty.title",{defaultMessage:"Create your first API key"})),body:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.empty.body",{defaultMessage:"Allow applications to access Elastic App Search on your behalf."}),actions:Object(S.jsx)(r.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:_.c},c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.empty.buttonLabel",{defaultMessage:"Learn about API keys"}))}),loading:!o,pagination:{...Object(h.a)(l),showPerPageOptions:!1},onChange:Object(h.b)(t)})},L=()=>{const{fetchCredentials:e,fetchDetails:t,resetCredentials:a,showCredentialsForm:p}=Object(i.useActions)(x),{meta:d,dataLoading:g,shouldShowCredentialsForm:h}=Object(i.useValues)(x);return Object(n.useEffect)((()=>{e()}),[d.page.current]),Object(n.useEffect)((()=>(t(),()=>{a()})),[]),Object(S.jsx)(o.a,{pageChrome:[u.d],pageHeader:{pageTitle:u.d}},h&&Object(S.jsx)(T,null),Object(S.jsx)(r.EuiPanel,{color:"subdued",className:"eui-textCenter"},Object(S.jsx)(r.EuiTitle,{size:"s"},Object(S.jsx)("h2",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.apiEndpoint",{defaultMessage:"Endpoint"}))),Object(S.jsx)(r.EuiCopy,{textToCopy:l.a.enterpriseSearchUrl,afterMessage:c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.copied",{defaultMessage:"Copied"})},(e=>Object(S.jsx)(s.a.Fragment,null,Object(S.jsx)(r.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.copyApiEndpoint",{defaultMessage:"Copy API Endpoint to clipboard."})}),l.a.enterpriseSearchUrl)))),Object(S.jsx)(r.EuiSpacer,{size:"xxl"}),Object(S.jsx)(r.EuiPageHeader,{responsive:!1},Object(S.jsx)(r.EuiTitle,{size:"m"},Object(S.jsx)("h2",null,c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.apiKeys",{defaultMessage:"API keys"}))),!g&&Object(S.jsx)(r.EuiButton,{color:"primary","data-test-subj":"CreateAPIKeyButton",fill:!0,onClick:()=>p()},c.i18n.translate("xpack.enterpriseSearch.appSearch.credentials.createKey",{defaultMessage:"Create key"}))),Object(S.jsx)(r.EuiSpacer,{size:"m"}),Object(S.jsx)(r.EuiPanel,{hasBorder:!0},Object(S.jsx)(r.EuiSkeletonText,{lines:3,isLoading:!!g},Object(S.jsx)(A,null))))}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l}));var n=a(47),s=a.n(n),i=(a(11),a(12));const r=({...e})=>Object(i.jsx)("svg",s()({xmlns:"http://www.w3.org/2000/svg",className:"euiIcon",width:16,height:16},e,{viewBox:"0 0 16 16","aria-hidden":"true"}),Object(i.jsx)("path",{d:"M2.81789 2.82933L6.19997 12.5528L7.26894 11.3176C7.46197 11.1108 7.78799 11.1051 7.98803 11.3052C8.17855 11.4957 8.18384 11.8029 8 11.9999L6.64828 13.5381C6.26304 13.9509 5.5771 13.806 5.39161 13.2728L1.70057 2.661C1.49297 2.06414 2.07135 1.4938 2.66525 1.70977L12.8156 5.40081C13.3208 5.58452 13.4744 6.22441 13.1076 6.6174L10.3139 9.61065C10.3276 9.62172 10.3408 9.63361 10.3536 9.64634L14.8536 14.1463C15.0488 14.3416 15.0488 14.6582 14.8536 14.8534C14.6583 15.0487 14.3417 15.0487 14.1464 14.8534L9.64645 10.3534C9.61737 10.3244 9.59262 10.2926 9.5722 10.2589L9.27692 9.96365C9.0864 9.77313 9.0811 9.46591 9.26494 9.26894L12.1186 6.21142L2.81789 2.82933Z"})),c=({...e})=>Object(i.jsx)("svg",s()({xmlns:"http://www.w3.org/2000/svg",className:"euiIcon",width:18,height:18},e,{viewBox:"0 0 18 18","aria-hidden":"true"}),Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.776 1.389a7.66 7.66 0 00-.725-.04v.001H9a7.65 7.65 0 00-.051 15.301v-.001H9a7.65 7.65 0 00.776-15.261zm-1.52 1.254a6.401 6.401 0 00.02 12.716l2.333-3.791a.875.875 0 00-.354-1.242l-3.07-1.534a2.125 2.125 0 01-.859-3.015l1.93-3.134zm1.489 12.714l1.929-3.134a2.125 2.125 0 00-.86-3.015l-3.07-1.534a.875.875 0 01-.353-1.242L9.724 2.64a6.401 6.401 0 01.02 12.717z"})),l=({...e})=>Object(i.jsx)("svg",s()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:18,height:18},e,{className:"euiIcon","aria-hidden":"true"}),Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 9a5.002 5.002 0 005 5 5 5 0 10-5-5zm5.506 1.653L8.37 12.697a3.751 3.751 0 01-.003-7.394L7.402 7.04a1.625 1.625 0 00.519 2.142l1.465.976a.375.375 0 01.12.495zm1.092.607l-.777 1.4a3.751 3.751 0 00-.04-7.329L8.494 7.647a.375.375 0 00.12.495l1.465.976c.705.47.93 1.402.52 2.142z"}),Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 1.375A5.125 5.125 0 001.375 6.5v5A5.125 5.125 0 006.5 16.625h5a5.125 5.125 0 005.125-5.125v-5A5.125 5.125 0 0011.5 1.375h-5zM2.625 6.5A3.875 3.875 0 016.5 2.625h5A3.875 3.875 0 0115.375 6.5v5a3.875 3.875 0 01-3.875 3.875h-5A3.875 3.875 0 012.625 11.5v-5z"}))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a(11);var n=a(1),s=a(122),i=a(52),r=a(53),c=a(12);const l=({pageChrome:e=[]})=>Object(c.jsx)(r.a,{pageChrome:[...e,"404"],customPageSections:!0},Object(c.jsx)(i.a,{action:"error",metric:"not_found"}),Object(c.jsx)(s.a,{productSupportUrl:n.d.SUPPORT_URL}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a(11);var n=a(37),s=a(13),i=a(2);const r=Object(n.kea)({key:e=>e.id,path:e=>["enterprise_search","url_combo_box",e],actions:()=>({setIsInvalid:e=>({isInvalid:e})}),reducers:()=>({isInvalid:[!1,{setIsInvalid:(e,{isInvalid:t})=>t}]})});a(194);var c=a(12);const l=({label:e,selectedUrls:t,onChange:a})=>{const l=Object(s.useGeneratedHtmlId)(),o=r({id:l}),{isInvalid:u}=Object(n.useValues)(o),{setIsInvalid:p}=Object(n.useActions)(o);return Object(c.jsx)(s.EuiFormRow,{className:"urlComboBox",fullWidth:!0,label:e,isInvalid:u,error:u?i.i18n.translate("xpack.enterpriseSearch.crawler.urlComboBox.invalidUrlErrorMessage",{defaultMessage:"Please enter a valid URL"}):void 0},Object(c.jsx)(s.EuiComboBox,{fullWidth:!0,noSuggestions:!0,selectedOptions:t.map((e=>({label:e}))),onCreateOption:e=>{if(!(e=>{let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol})(e))return p(!0),!1;p(!1),a([...t,e])},onSearchChange:()=>{p(!1)},onChange:e=>{a(e.map((e=>e.label)))},isInvalid:u}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function n(e,t){return"_meta"===e}function s(e){return e&&Object.entries(e).reduce(((e,[t,a])=>("raw"===t||"snippet"===t)&&(null===a?e:(Array.isArray(a)?a:[a]).reduce(((e,t)=>e&&null!==t&&"object"!=typeof t),e))),!0)}function i(e){return Array.isArray(e)?e.reduce(((e,t)=>e||i(t)),!1):null!=e&&"object"==typeof e&&!s(e)}function r(e){return Array.isArray(e)?e.map(r):null!==e&&"object"==typeof e?Object.entries(e).reduce(((e,[t,a])=>({...e,[t]:s(a)?a.raw:r(a)})),{}):e}function c(e){return Object.entries(e).reduce(((e,[t,a])=>!n(t)&&i(a)?{...e,[t]:{raw:r(a)}}:{...e,[t]:a}),{})}function l(e){return Object.entries(e).reduce(((e,[t,a])=>n(t)?{...e}:i(a)?{...e,[t]:{raw:r(a)}}:{...e,[t]:a}),{})}a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return l}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(11),s=a.n(n),i=a(15),r=a(13),c=a(2),l=a(169),o=a(44),u=a(335),p=a(12);const d=({title:e,description:t,buttonTo:a,lastUpdatedTimestamp:n,style:d})=>{const{pathname:g}=Object(i.useLocation)(),[h,j]=Object(u.a)(`suggestions-callout--${g}`,new Date(0).toISOString());return new Date(h)>=new Date(n)?null:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(r.EuiCallOut,{style:d,color:"success",iconType:l.b,title:e},Object(p.jsx)(r.EuiText,{size:"s"},Object(p.jsx)("p",null,t)),Object(p.jsx)(r.EuiSpacer,{size:"m"}),Object(p.jsx)(r.EuiFlexGroup,{gutterSize:"s"},Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(o.b,{to:a,color:"success",fill:!0,size:"s"},c.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsCallout.reviewSuggestionsButtonLabel",{defaultMessage:"Review suggestions"}))),Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(r.EuiButtonEmpty,{color:"success",iconType:"eyeClosed",size:"s",onClick:()=>{j((new Date).toISOString())}},c.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsCallout.hideForNowLabel",{defaultMessage:"Hide this for now"}))))))}},function(e,t,a){e.exports=a.p+"9d70f43f5a3f4e71e32eeff1c1ffb8a0.svg"},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(843);case"v8light":return a(845)}},function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));var n=a(144),s=a.n(n),i=a(37),r=a(16),c=a(38),l=a(45),o=a(90),u=a(238),p=a(847);const d=Object(i.kea)({path:["enterprise_search","app_search","document_creation_logic"],actions:()=>({showCreationModes:()=>null,openDocumentCreation:e=>({creationMode:e}),closeDocumentCreation:()=>null,setCreationStep:e=>({creationStep:e}),setActiveJsonTab:e=>({activeJsonTab:e}),setTextInput:e=>({textInput:e}),setFileInput:e=>({fileInput:e}),setWarnings:e=>({warnings:e}),setErrors:e=>({errors:e}),setSummary:e=>({summary:e}),onSubmitJson:()=>null,onSubmitFile:()=>null,uploadDocuments:({documents:e})=>({documents:e})}),reducers:()=>({isDocumentCreationOpen:[!1,{showCreationModes:()=>!0,openDocumentCreation:()=>!0,closeDocumentCreation:()=>!1}],creationMode:["api",{openDocumentCreation:(e,{creationMode:t})=>t}],activeJsonTab:["uploadTab",{setActiveJsonTab:(e,{activeJsonTab:t})=>t}],creationStep:[u.a.AddDocuments,{showCreationModes:()=>u.a.ShowCreationModes,openDocumentCreation:()=>u.a.AddDocuments,setCreationStep:(e,{creationStep:t})=>t}],textInput:[s()(o.a),{setTextInput:(e,{textInput:t})=>t,closeDocumentCreation:()=>s()(o.a),setActiveJsonTab:()=>s()(o.a)}],fileInput:[null,{setFileInput:(e,{fileInput:t})=>t,closeDocumentCreation:()=>null,setActiveJsonTab:()=>null}],isUploading:[!1,{onSubmitFile:()=>!0,onSubmitJson:()=>!0,setErrors:()=>!1,setSummary:()=>!1,setActiveJsonTab:()=>!1}],warnings:[[],{onSubmitJson:()=>[],setWarnings:(e,{warnings:t})=>t,closeDocumentCreation:()=>[],setActiveJsonTab:()=>[]}],errors:[[],{onSubmitJson:()=>[],setErrors:(e,{errors:t})=>Array.isArray(t)?t:[t],closeDocumentCreation:()=>[],setActiveJsonTab:()=>[]}],summary:[{},{setSummary:(e,{summary:t})=>t}]}),listeners:({values:t,actions:a})=>({onSubmitFile:async()=>{const{fileInput:e}=t;if(!e)return a.setErrors([o.b.NO_FILE]);try{const t=await Object(p.a)(e);a.setTextInput(t),a.onSubmitJson()}catch{a.setErrors([o.b.NO_VALID_FILE])}},onSubmitJson:()=>{const{textInput:n}=t;let s;e.byteLength(n)>5e7&&a.setWarnings([o.c.LARGE_FILE]);try{s=JSON.parse(n)}catch(e){return a.setErrors([e.message])}Array.isArray(s)?a.uploadDocuments({documents:s}):Object(r.isPlainObject)(s)?a.uploadDocuments({documents:[s]}):a.setErrors([o.b.NOT_VALID])},uploadDocuments:async({documents:e})=>{const{http:t}=c.a.values,{engineName:n}=l.a.values,s=Object(r.chunk)(e,100).map((e=>{const a=JSON.stringify({documents:e});return t.post(`/internal/app_search/engines/${n}/documents`,{body:a})}));try{const e=await Promise.all(s),t={errors:[],validDocuments:{total:0,examples:[]},invalidDocuments:{total:0,examples:[]},newSchemaFields:[]};e.forEach((e=>{var a;(null===(a=e.errors)||void 0===a?void 0:a.length)>0?t.errors=Object(r.uniq)([...t.errors,...e.errors]):(t.validDocuments.total+=e.validDocuments.total,t.invalidDocuments.total+=e.invalidDocuments.total,t.validDocuments.examples=[...t.validDocuments.examples,...e.validDocuments.examples].slice(0,5),t.invalidDocuments.examples=[...t.invalidDocuments.examples,...e.invalidDocuments.examples].slice(0,5),t.newSchemaFields=Object(r.uniq)([...t.newSchemaFields,...e.newSchemaFields]))})),t.errors.length>0?a.setErrors(t.errors):(a.setSummary(t),a.setCreationStep(u.a.ShowSummary))}catch({body:e,message:t}){const n=e?`[${e.statusCode} ${e.error}] ${e.message}`:t;a.setErrors(n)}}})})}).call(this,a(125).Buffer)},function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a(11);var n=a(37),s=a(2),i=a(48),r=a(314),c=a(45),l=a(12);const o=()=>{const{engine:{adaptive_relevance_suggestions:e,adaptive_relevance_suggestions_active:t}}=Object(n.useValues)(c.a),a=null==e?void 0:e.curation.pending;return void 0===e||0===a||!1===t?null:Object(l.jsx)(r.a,{style:{marginBottom:"24px"},title:s.i18n.translate("xpack.enterpriseSearch.appSearch.engine.suggestedCurationsCallout.title",{defaultMessage:"New suggested curations to review"}),description:s.i18n.translate("xpack.enterpriseSearch.appSearch.engine.suggestedCurationsCallout.description",{defaultMessage:"Based on your engine's analytics, there are new suggested curations ready to review."}),buttonTo:Object(c.c)(i.x),lastUpdatedTimestamp:e.curation.last_updated})}},function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e.default="default",e.indexed="indexed",e.meta="meta",e.elasticsearch="elasticsearch"}(n||(n={}))},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(43),s=a(38);const i=({endpoint:e,onComplete:t,query:a={},pageSize:i=25})=>{const{http:r}=s.a.values;let c=[];const l=async(s=1)=>{try{const{meta:n,results:o}=await r.get(e,{query:{"page[current]":s,"page[size]":i,...a}});c=[...c,...o],s>=n.page.total_pages?t(c):l(s+1)}catch(e){Object(n.e)(e)}};l()}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(924);case"v8light":return a(926)}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return Ke})),a.d(t,"b",(function(){return Se}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.title",{defaultMessage:"Curations"}),i=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.overview.title",{defaultMessage:"Curated results"}),r=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.create.title",{defaultMessage:"Create a curation"}),c=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.manage.title",{defaultMessage:"Manage curation"}),l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addQueryButtonLabel",{defaultMessage:"Add query"}),o=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.queryPlaceholder",{defaultMessage:"Enter a query"}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.deleteConfirmation",{defaultMessage:"Are you sure you want to remove this curation?"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.deleteSuccessMessage",{defaultMessage:"Your curation was deleted"}),d=(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.restoreConfirmation",{defaultMessage:"Are you sure you want to clear your changes and return to your default results?"}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.convertToManualCurationConfirmation",{defaultMessage:"Are you sure you want to convert this to a manual curation?"})),g=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.resultActionsDescription",{defaultMessage:"Promote results by clicking the star, hide them by clicking the eye."}),h={title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promoteButtonLabel",{defaultMessage:"Promote this result"}),iconType:"starPlusEmpty",iconColor:"primary"},j={title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.demoteButtonLabel",{defaultMessage:"Demote this result"}),iconType:"starMinusFilled",iconColor:"primary"},b={title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.hideButtonLabel",{defaultMessage:"Hide this result"}),iconType:"eyeClosed",iconColor:"danger"},m={title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.showButtonLabel",{defaultMessage:"Show this result"}),iconType:"eye",iconColor:"primary"},x=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.automatedLabel",{defaultMessage:"Automated"}),S=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.convertToManualCurationButtonLabel",{defaultMessage:"Convert to manual curation"});var f=a(11),O=a.n(f),y=a(54),v=a(48),w=a(37),E=a(43),C=a(38),M=a(41),k=a(45);const T=(e=[])=>Object(k.d)([s,...e]),F=e=>{const t=e.replace(" at "," ").replace("PM"," PM").replace("AM"," AM");return new Date(t)},_=(e,t)=>[...e,t],I=(e,t)=>{const a=[...e],n=a.indexOf(t);return a.splice(n,1),a},R=Object(w.kea)({path:["enterprise_search","app_search","curation_logic"],actions:()=>({convertToManual:!0,deleteCuration:!0,loadCuration:!0,onCurationLoad:e=>({curation:e}),updateCuration:!0,onCurationError:!0,updateQueries:e=>({queries:e}),setActiveQuery:e=>({query:e}),setPromotedIds:e=>({promotedIds:e}),addPromotedId:e=>({id:e}),removePromotedId:e=>({id:e}),clearPromotedIds:!0,addHiddenId:e=>({id:e}),removeHiddenId:e=>({id:e}),clearHiddenIds:!0,onSelectPageTab:e=>({pageTab:e})}),reducers:()=>({dataLoading:[!0,{loadCuration:()=>!0,onCurationLoad:()=>!1,onCurationError:()=>!1}],curation:[{id:"",last_updated:"",queries:[],promoted:[],organic:[],hidden:[]},{onCurationLoad:(e,{curation:t})=>t}],queries:[[],{onCurationLoad:(e,{curation:t})=>t.queries,updateQueries:(e,{queries:t})=>t}],queriesLoading:[!1,{updateQueries:()=>!0,onCurationLoad:()=>!1,onCurationError:()=>!1}],activeQuery:["",{setActiveQuery:(e,{query:t})=>t,onCurationLoad:(e,{curation:t})=>e||t.queries[0]}],organicDocumentsLoading:[!1,{setActiveQuery:()=>!0,onCurationLoad:()=>!1,onCurationError:()=>!1}],promotedIds:[[],{onCurationLoad:(e,{curation:t})=>t.promoted.map((e=>e.id)),setPromotedIds:(e,{promotedIds:t})=>t,addPromotedId:(e,{id:t})=>_(e,t),removePromotedId:(e,{id:t})=>I(e,t),clearPromotedIds:()=>[]}],promotedDocumentsLoading:[!1,{setPromotedIds:()=>!0,addPromotedId:()=>!0,removePromotedId:()=>!0,clearPromotedIds:()=>!0,onCurationLoad:()=>!1,onCurationError:()=>!1}],hiddenIds:[[],{onCurationLoad:(e,{curation:t})=>t.hidden.map((e=>e.id)),addHiddenId:(e,{id:t})=>_(e,t),removeHiddenId:(e,{id:t})=>I(e,t),clearHiddenIds:()=>[]}],hiddenDocumentsLoading:[!1,{addHiddenId:()=>!0,removeHiddenId:()=>!0,clearHiddenIds:()=>!0,onCurationLoad:()=>!1,onCurationError:()=>!1}],selectedPageTab:["promoted",{onSelectPageTab:(e,{pageTab:t})=>t}]}),selectors:({selectors:e})=>({isAutomated:[()=>[e.curation],e=>{var t;return"automated"===(null===(t=e.suggestion)||void 0===t?void 0:t.status)}]}),listeners:({actions:e,values:t,props:a})=>({convertToManual:async()=>{const{http:a}=C.a.values,{engineName:n}=k.a.values;try{await a.put(`/internal/app_search/engines/${n}/adaptive_relevance/suggestions`,{body:JSON.stringify([{query:t.activeQuery,type:"curation",status:"applied"}])}),e.loadCuration()}catch(e){Object(E.e)(e)}},deleteCuration:async()=>{const{http:e}=C.a.values,{engineName:t}=k.a.values,{navigateToUrl:n}=M.a.values;try{await e.delete(`/internal/app_search/engines/${t}/curations/${a.curationId}`),n(Object(k.c)(v.x)),Object(E.g)(p)}catch(e){Object(E.e)(e)}},loadCuration:async()=>{const{http:t}=C.a.values,{engineName:n}=k.a.values;try{const s=await t.get(`/internal/app_search/engines/${n}/curations/${a.curationId}`,{query:{skip_record_analytics:"true"}});e.onCurationLoad(s)}catch(e){const{navigateToUrl:t}=M.a.values;Object(E.e)(e,{isQueued:!0}),t(Object(k.c)(v.x))}},updateCuration:async(n,s)=>{const{http:i}=C.a.values,{engineName:r}=k.a.values;await s(100),Object(E.d)();try{const n=await i.put(`/internal/app_search/engines/${r}/curations/${a.curationId}`,{query:{skip_record_analytics:"true"},body:JSON.stringify({queries:t.queries,query:t.activeQuery,promoted:t.promotedIds,hidden:t.hiddenIds})});e.onCurationLoad(n)}catch(t){Object(E.e)(t),e.onCurationError()}},updateQueries:({queries:a})=>{!a.includes(t.activeQuery)&&e.setActiveQuery(a[0]),e.updateCuration()},onSelectPageTab:()=>{Object(E.d)()},setActiveQuery:()=>e.updateCuration(),setPromotedIds:()=>e.updateCuration(),addPromotedId:()=>e.updateCuration(),removePromotedId:()=>e.updateCuration(),clearPromotedIds:()=>e.updateCuration(),addHiddenId:()=>e.updateCuration(),removeHiddenId:()=>e.updateCuration(),clearHiddenIds:()=>e.updateCuration()})});var A=a(15),L=a(58),D=a(13),z=a(53),P=a(47),N=a.n(P),B=a(12);const V=({...e})=>Object(B.jsx)("svg",N()({xmlns:"http://www.w3.org/2000/svg",className:"euiIcon",width:16,height:16},e,{viewBox:"0 0 16 16","aria-hidden":"true"}),Object(B.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.5 0.894547C12.7761 0.894547 13 1.1184 13 1.39455V3.64455C13 3.92069 12.7761 4.14455 12.5 4.14455H10.25C9.97386 4.14455 9.75 3.92069 9.75 3.64455C9.75 3.3684 9.97386 3.14455 10.25 3.14455H11.5634C10.6452 2.2954 9.42289 1.77022 8.07821 1.75058C8.02894 1.74985 7.97967 1.74981 7.93044 1.75046C5.063 1.7877 2.75 4.12374 2.75 7.00001C2.75 9.87611 5.06273 12.212 7.92992 12.2496C7.97659 12.2502 8.0233 12.2502 8.07004 12.2496C9.4485 12.2315 10.6988 11.6823 11.6256 10.7971C11.6764 10.7485 11.7264 10.6989 11.7754 10.6482C12.6071 9.7876 13.1474 8.64339 13.2368 7.37476C13.2514 7.16816 13.4179 7.00001 13.625 7.00001C13.8321 7.00001 14.0012 7.16806 13.9883 7.37477C13.9804 7.50044 13.9686 7.62558 13.953 7.75001C13.8077 8.90336 13.3294 9.9956 12.569 10.889C11.6453 11.9743 10.3654 12.6953 8.95854 12.9229C7.5517 13.1506 6.10975 12.8701 4.89087 12.1316C3.67199 11.3931 2.75577 10.2449 2.30627 8.89247C1.85676 7.54007 1.90332 6.07183 2.4376 4.75062C2.97189 3.42942 3.95901 2.34153 5.22223 1.68174C6.48545 1.02195 7.94227 0.833348 9.33187 1.1497C10.33 1.37693 11.2466 1.85402 12 2.52786V1.39455C12 1.1184 12.2239 0.894547 12.5 0.894547ZM7.29699 8.22388L7.0078 9.25H6.125L7.47013 4.75H8.53177L9.875 9.25H8.9922L8.70301 8.22388H7.29699ZM7.98573 5.77832L7.50628 7.4812H8.49562L8.01617 5.77832H7.98573Z"}));var U=a(170),H=a(68);const q=({query:e,engineName:t})=>{const[a,s]=Object(f.useState)(Date.now()),i=[`appsearch.adaptive_relevance.query: ${e}`,"event.kind: event","event.dataset: search-relevance-suggestions",`appsearch.adaptive_relevance.engine: ${t}`,"event.action: curation_suggestion","appsearch.adaptive_relevance.suggestion.new_status: automated"];return Object(B.jsx)(H.a,{iconType:"tableDensityNormal",title:Object(B.jsx)(D.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(D.EuiFlexItem,{component:"h2"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.detail.historyTableTitle",{defaultMessage:"Adaptive relevance changes"})),Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiButtonEmpty,{iconType:"refresh",size:"xs",onClick:()=>s(Date.now())},n.i18n.translate("xpack.enterpriseSearch.appSearch.engines.apiLogs.newEventsButtonLabel",{defaultMessage:"Refresh"})))),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.detail.historyTableDescription",{defaultMessage:"A detailed log of recent changes to curations powered by adaptive relevance."}),hasBorder:!0},Object(B.jsx)(U.a,{logView:{type:"log-view-reference",logViewId:"default"},hoursAgo:720,endTimestamp:a,query:i.join(" and "),columns:[{type:"timestamp"},{type:"message"}]}))},G=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promotedDocuments.title",{defaultMessage:"Promoted results"}),$=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.hiddenDocuments.title",{defaultMessage:"Hidden results"});var W=a(42);const Q=()=>{const{curationId:e}=Object(A.useParams)(),{deleteCuration:t}=Object(w.useActions)(R({curationId:e}));return Object(B.jsx)(D.EuiButton,{color:"danger",iconType:"trash",onClick:()=>{window.confirm(u)&&t()}},W.l)},J=Object(w.kea)({path:["enterprise_search","app_search","curation_add_result_logic"],actions:()=>({openFlyout:!0,closeFlyout:!0}),reducers:()=>({isFlyoutOpen:[!1,{openFlyout:()=>!0,closeFlyout:()=>!1}]})});var K=a(334);const Y=()=>{const e=Object(K.a)({id:"add-results-flyout"}),{searchQuery:t,searchResults:a,searchDataLoading:s}=Object(w.useValues)(e),{closeFlyout:i}=Object(w.useActions)(J),{search:r}=Object(w.useActions)(e),{promotedIds:c,hiddenIds:l}=Object(w.useValues)(R),{addPromotedId:o,removePromotedId:u,addHiddenId:p,removeHiddenId:d}=Object(w.useActions)(R);return Object(B.jsx)(D.EuiPortal,null,Object(B.jsx)(D.EuiFlyout,{ownFocus:!0,onClose:i,"aria-labelledby":"addResultFlyout"},Object(B.jsx)(D.EuiFlyoutHeader,{hasBorder:!0},Object(B.jsx)(D.EuiTitle,{size:"m"},Object(B.jsx)("h2",{id:"addResultFlyout"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addResult.title",{defaultMessage:"Add result to curation"}))),Object(B.jsx)(D.EuiText,{color:"subdued"},Object(B.jsx)("p",null,g))),Object(B.jsx)(D.EuiFlyoutBody,{banner:Object(B.jsx)(E.a,null)},Object(B.jsx)(D.EuiFieldSearch,{value:t,onChange:e=>r(e.target.value),isLoading:s,placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addResult.searchPlaceholder",{defaultMessage:"Search engine documents"}),fullWidth:!0,autoFocus:!0}),Object(B.jsx)(D.EuiSpacer,null),a.length>0?Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s"},a.map(((e,t)=>{const a=e.id.raw,n=c.includes(a),s=l.includes(a);return Object(B.jsx)(D.EuiFlexItem,{key:t},Object(B.jsx)(ee,{result:e,actions:[s?{...m,onClick:()=>d(a)}:{...b,onClick:()=>p(a)},n?{...j,onClick:()=>u(a)}:{...h,onClick:()=>o(a)}]}))}))):Object(B.jsx)(D.EuiEmptyPrompt,{body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addResult.searchEmptyDescription",{defaultMessage:"No matching content found."})}))))},Z=()=>{const{openFlyout:e}=Object(w.useActions)(J),{isAutomated:t}=Object(w.useValues)(R);return Object(B.jsx)(D.EuiButton,{onClick:e,iconType:"plusInCircle",size:"s",disabled:t},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.addResult.buttonLabel",{defaultMessage:"Add result manually"}))};var X=a(102);const ee=({actions:e,dragHandleProps:t,result:a,index:n})=>{const{isMetaEngine:s,engine:{schema:i}}=Object(w.useValues)(k.a);return Object(B.jsx)(X.a,{result:a,actions:e,isMetaEngine:s,schemaForTypeHighlights:i,dragHandleProps:t,resultPosition:void 0===n?void 0:n+1})},te=e=>Array.isArray(e)?e.reduce(((e,t)=>e||te(t)),!1):null===e||"object"==typeof e,ae=e=>{const t=Object.entries(e).reduce(((e,[t,a])=>(e[t]=te(a)||Object.prototype.hasOwnProperty.call(a,"raw")?a:{raw:a},e)),{});var a,n;return t._meta=(a=t._meta,n=ne(e.id),{...a||{},...n}),t},ne=e=>{const t=e.split("|");return t.length>1?{engine:t[0],id:t[1]}:{id:e}};a(806);const se=()=>{const{curation:e,isAutomated:t,promotedIds:a,promotedDocumentsLoading:s}=Object(w.useValues)(R),i=e.promoted,r=i.length>0,{setPromotedIds:c,clearPromotedIds:l,removePromotedId:o}=Object(w.useActions)(R);return Object(B.jsx)(H.a,{iconType:()=>Object(B.jsx)(D.EuiBadge,{color:"accent"},i.length),title:Object(B.jsx)("h2",null,G),action:t?Object(B.jsx)(D.EuiText,{color:"subdued",size:"s"},Object(B.jsx)("p",null,Object(B.jsx)("em",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promotedDocuments.managedByAppSearchDescription",{defaultMessage:"This curation is being automated by App Search"})))):r&&Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiButtonEmpty,{onClick:l,color:"danger",size:"s",disabled:t},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promotedDocuments.removeAllButtonLabel",{defaultMessage:"Demote all"}))),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(Z,null))),isLoading:s},r?Object(B.jsx)(D.EuiDragDropContext,{onDragEnd:({source:e,destination:t})=>{if(e&&t){const n=Object(D.euiDragDropReorder)(a,e.index,t.index);c(n)}}},Object(B.jsx)(D.EuiDroppable,{droppableId:"PromotedDocuments",spacing:"m",className:"promotedDocuments--results"},Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s"},i.map(((e,a)=>Object(B.jsx)(D.EuiFlexItem,{key:a},Object(B.jsx)(D.EuiDraggable,{index:a,draggableId:e.id,customDragHandle:!0,spacing:"none",isDragDisabled:t},(n=>Object(B.jsx)(ee,{index:a,result:ae(e),actions:t?[]:[{...j,onClick:()=>o(e.id)}],dragHandleProps:n.dragHandleProps}))))))))):Object(B.jsx)(D.EuiEmptyPrompt,{body:t?n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promotedDocuments.automatedEmptyDescription",{defaultMessage:"We haven't identified any documents to promote"}):n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.promotedDocuments.emptyDescription",{defaultMessage:"Star documents from the organic results below, or search and promote a result manually."}),actions:Object(B.jsx)(Z,null)}))};var ie=a(14),re=a(169);const ce=()=>{const{addPromotedId:e,addHiddenId:t}=Object(w.useActions)(R),{curation:a,activeQuery:s,isAutomated:i,organicDocumentsLoading:r}=Object(w.useValues)(R),c=a.organic||[],l=c.length>0&&!r,o=s;return Object(B.jsx)(H.a,{iconType:re.a,title:Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.organicDocuments.title",{defaultMessage:'Top organic documents for "{currentQuery}"',values:{currentQuery:o}}))},Object(B.jsx)(D.EuiSkeletonText,{lines:5,isLoading:r},l?Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s"},c.map(((a,n)=>Object(B.jsx)(D.EuiFlexItem,{key:n},Object(B.jsx)(ee,{result:a,index:n,actions:i?[]:[{...b,onClick:()=>t(a.id.raw)},{...h,onClick:()=>e(a.id.raw)}]}))))):Object(B.jsx)(D.EuiEmptyPrompt,{body:Object(B.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.curations.organicDocuments.description",defaultMessage:"No organic results to display.{manualDescription}",values:{manualDescription:!i&&Object(B.jsx)(O.a.Fragment,null," ",Object(B.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.curations.organicDocuments.manualDescription",defaultMessage:"Add or change the active query above."}))}})})))},le=()=>{const{clearHiddenIds:e,removeHiddenId:t}=Object(w.useActions)(R),{curation:a,hiddenDocumentsLoading:s}=Object(w.useValues)(R),i=a.hidden,r=i.length>0;return Object(B.jsx)(H.a,{iconType:()=>Object(B.jsx)(D.EuiBadge,{color:"accent"},i.length),title:Object(B.jsx)("h2",null,$),action:r&&Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiButtonEmpty,{onClick:e,size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.hiddenDocuments.removeAllButtonLabel",{defaultMessage:"Unhide all"}))),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(Z,null))),isLoading:s},r?Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s"},i.map(((e,a)=>Object(B.jsx)(D.EuiFlexItem,{key:a},Object(B.jsx)(ee,{result:ae(e),index:a,actions:[{...m,onClick:()=>t(e.id)}]}))))):Object(B.jsx)(D.EuiEmptyPrompt,{titleSize:"s",title:Object(B.jsx)("h3",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.hiddenDocuments.emptyTitle",{defaultMessage:"You haven't hidden any documents yet"})),body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.hiddenDocuments.emptyDescription",{defaultMessage:"Hide documents by clicking the eye icon on the organic results above, or search and hide a result manually."}),actions:Object(B.jsx)(Z,null)}))},oe=()=>{const{curationId:e}=Object(A.useParams)(),t=R({curationId:e}),{convertToManual:a,onSelectPageTab:s}=Object(w.useActions)(t),{activeQuery:i,queries:r,curation:c,selectedPageTab:l}=Object(w.useValues)(t),{engineName:o}=Object(w.useValues)(k.a),u=[{label:G,append:Object(B.jsx)(D.EuiBadge,null,c.promoted.length),isSelected:"promoted"===l,onClick:()=>s("promoted")},{label:$,append:Object(B.jsx)(D.EuiBadge,{isDisabled:!0},"0"),isSelected:!1,disabled:!0},{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.detail.historyButtonLabel",{defaultMessage:"History"}),isSelected:"history"===l,onClick:()=>s("history")}];return Object(B.jsx)(z.a,{pageChrome:T([r.join(", ")]),pageHeader:{pageTitle:Object(B.jsx)(O.a.Fragment,null,i," ",Object(B.jsx)(D.EuiBadge,{iconType:V,color:"accent"},x)),rightSideItems:[Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"s",responsive:!1},Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(Q,null)),Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiButton,{color:"primary",fill:!0,iconType:"exportAction",onClick:()=>{window.confirm(d)&&a()}},S)))],tabs:u}},"promoted"===l&&Object(B.jsx)(se,null),"promoted"===l&&Object(B.jsx)(ce,null),"history"===l&&Object(B.jsx)(q,{query:c.queries[0],engineName:o}))},ue=()=>{const{setActiveQuery:e}=Object(w.useActions)(R),{queries:t,activeQuery:a,queriesLoading:s}=Object(w.useValues)(R);return Object(B.jsx)(D.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.activeQueryLabel",{defaultMessage:"Active query"}),helpText:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.activeQueryHelpText",{defaultMessage:"Select a query to view the organic search results for them"}),fullWidth:!0},Object(B.jsx)(D.EuiSelect,{options:t.map((e=>({value:e,text:e}))),value:a,onChange:t=>e(t.target.value),isLoading:s,fullWidth:!0}))};var pe=a(166);const de=()=>{const{queries:e,queriesLoading:t}=Object(w.useValues)(R),{updateQueries:a}=Object(w.useActions)(R),[s,i]=Object(f.useState)(!1),r=()=>i(!1);return Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiButton,{fill:!0,onClick:()=>i(!0),isLoading:t},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.manageQueryButtonLabel",{defaultMessage:"Manage queries"})),s&&Object(B.jsx)(D.EuiModal,{onClose:r},Object(B.jsx)(D.EuiModalHeader,null,Object(B.jsx)(D.EuiModalHeaderTitle,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.manageQueryTitle",{defaultMessage:"Manage queries"}))),Object(B.jsx)(D.EuiModalBody,null,Object(B.jsx)(D.EuiText,{color:"subdued"},Object(B.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.manageQueryDescription",{defaultMessage:"Edit, add, or remove queries for this curation."}))),Object(B.jsx)(D.EuiSpacer,null),Object(B.jsx)(pe.a,{id:"manageCurationQueries",initialValues:e,addRowText:l,inputPlaceholder:o,submitButtonText:W.z,onSubmit:e=>{a(e),r()}}))))};var ge=a(314);const he=()=>{const{curation:{suggestion:e,queries:t}}=Object(w.useValues)(R),{engine:{adaptive_relevance_suggestions_active:a}}=Object(w.useValues)(k.a);return void 0===e||"pending"!==e.status||!1===a?null:Object(B.jsx)(ge.a,{style:{marginTop:"24px"},title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.suggestedDocumentsCallout.title",{defaultMessage:"New suggested documents for this query"}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curation.suggestedDocumentsCallout.description",{defaultMessage:"Based on your engine's analytics, there are new suggested document promotions ready to review."}),buttonTo:Object(k.c)(v.z,{query:t[0]}),lastUpdatedTimestamp:e.updated_at})},je=()=>{const{curationId:e}=Object(A.useParams)(),t=R({curationId:e}),{onSelectPageTab:a}=Object(w.useActions)(t),{queries:n,selectedPageTab:s,curation:i}=Object(w.useValues)(t),{isFlyoutOpen:r}=Object(w.useValues)(J),l=[{label:G,append:Object(B.jsx)(D.EuiBadge,null,i.promoted.length),isSelected:"promoted"===s,onClick:()=>a("promoted")},{label:$,append:Object(B.jsx)(D.EuiBadge,null,i.hidden.length),isSelected:"hidden"===s,onClick:()=>a("hidden")}];return Object(B.jsx)(z.a,{pageChrome:T([n.join(", ")]),pageHeader:{pageTitle:c,rightSideItems:[Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"s",responsive:!1},Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(Q,null)),Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(de,null)))],tabs:l}},Object(B.jsx)(ue,null),"promoted"===s&&Object(B.jsx)(he,null),"promoted"===s&&Object(B.jsx)(se,null),"hidden"===s&&Object(B.jsx)(le,null),Object(B.jsx)(ce,null),r&&Object(B.jsx)(Y,null))},be=()=>{const{curationId:e}=Object(A.useParams)(),{loadCuration:t}=Object(w.useActions)(R({curationId:e})),{dataLoading:a,isAutomated:n}=Object(w.useValues)(R({curationId:e}));return Object(f.useEffect)((()=>{t()}),[e]),a?Object(B.jsx)(L.a,{isLoading:!0}):n?Object(B.jsx)(oe,null):Object(B.jsx)(je,null)};var me=a(44),xe=a(61);const Se=Object(w.kea)({path:["enterprise_search","app_search","curations_logic"],actions:()=>({onCurationsLoad:({results:e,meta:t})=>({results:e,meta:t}),onPaginate:e=>({newPageIndex:e}),loadCurations:!0,deleteCuration:e=>e,createCuration:e=>e,onSelectPageTab:e=>({pageTab:e})}),reducers:()=>({selectedPageTab:["overview",{onSelectPageTab:(e,{pageTab:t})=>t}],dataLoading:[!0,{onCurationsLoad:()=>!1}],curations:[[],{onCurationsLoad:(e,{results:t})=>t}],meta:[W.k,{onCurationsLoad:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(xe.c)(e,t)}]}),listeners:({actions:e,values:t})=>({loadCurations:async()=>{const{meta:a}=t,{http:n}=C.a.values,{engineName:s}=k.a.values;try{const t=await n.get(`/internal/app_search/engines/${s}/curations`,{query:{"page[current]":a.page.current,"page[size]":a.page.size}});e.onCurationsLoad(t)}catch(e){Object(E.e)(e)}},deleteCuration:async t=>{const{http:a}=C.a.values,{engineName:n}=k.a.values;if(Object(E.d)(),window.confirm(u))try{await a.delete(`/internal/app_search/engines/${n}/curations/${t}`),e.loadCurations(),Object(E.g)(p)}catch(e){Object(E.e)(e)}},createCuration:async e=>{const{http:t}=C.a.values,{engineName:a}=k.a.values,{navigateToUrl:n}=M.a.values;Object(E.d)();try{const s=await t.post(`/internal/app_search/engines/${a}/curations`,{body:JSON.stringify({queries:e})});n(Object(k.c)(v.y,{curationId:s.id}))}catch(e){Object(E.e)(e)}},onSelectPageTab:()=>{Object(E.d)()}})});var fe=a(1);const Oe=()=>{const{engineName:e}=Object(w.useValues)(k.a),[t,a]=Object(f.useState)(Date.now()),s=["event.kind: event","event.dataset: search-relevance-suggestions",`appsearch.adaptive_relevance.engine: ${e}`,"event.action: curation_suggestion","appsearch.adaptive_relevance.suggestion.new_status: automated"];return Object(B.jsx)(H.a,{iconType:"tableDensityNormal",title:Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,{component:"h2"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.automatedCurationsHistoryPanel.tableTitle",{defaultMessage:"Adaptive relevance changes"})),Object(B.jsx)(D.EuiFlexItem,{component:"span",grow:!1},Object(B.jsx)(D.EuiButtonEmpty,{iconType:"refresh",size:"xs",onClick:()=>a(Date.now())},n.i18n.translate("xpack.enterpriseSearch.appSearch.engines.curations.refreshButton",{defaultMessage:"Refresh"})))),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.automatedCurationsHistoryPanel.tableDecription",{defaultMessage:"A detailed log of recent changes to curations powered by adaptive relevance."}),hasBorder:!0},Object(B.jsx)(U.a,{logView:{type:"log-view-reference",logViewId:fe.r},hoursAgo:720,query:s.join(" and "),endTimestamp:t,columns:[{type:"field",field:"appsearch.adaptive_relevance.query",header:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.automatedCurationsHistoryPanel.queryColumnHeader",{defaultMessage:"Query"})},{type:"timestamp"},{type:"message"}]}))},ye=n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestionsPanel.allowQuerySuccessMessage",{defaultMessage:"Youll be notified about future suggestions for this query"}),ve=Object(w.kea)({path:["enterprise_search","app_search","curations","ignored_queries_panel_logic"],actions:()=>({allowIgnoredQuery:e=>({ignoredQuery:e}),loadIgnoredQueries:!0,onIgnoredQueriesLoad:(e,t)=>({ignoredQueries:e,meta:t}),onPaginate:e=>({newPageIndex:e})}),reducers:()=>({dataLoading:[!0,{loadIgnoredQueries:()=>!0,onIgnoredQueriesLoad:()=>!1}],ignoredQueries:[[],{onIgnoredQueriesLoad:(e,{ignoredQueries:t})=>t}],meta:[{...W.k,page:{...W.k.page,size:10}},{onIgnoredQueriesLoad:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(xe.c)(e,t)}]}),listeners:({actions:e,values:t})=>({loadIgnoredQueries:async()=>{const{meta:a}=t,{http:n}=C.a.values,{engineName:s}=k.a.values;try{const t=await n.post(`/internal/app_search/engines/${s}/adaptive_relevance/suggestions`,{body:JSON.stringify({page:{current:a.page.current,size:a.page.size},filters:{status:["disabled"],type:"curation"}})}),i=t.results.map((e=>e.query));e.onIgnoredQueriesLoad(i,t.meta)}catch(e){Object(E.e)(e)}},allowIgnoredQuery:async({ignoredQuery:t})=>{const{http:a}=C.a.values,{engineName:n}=k.a.values;try{const s=await a.put(`/internal/app_search/engines/${n}/adaptive_relevance/suggestions`,{body:JSON.stringify([{query:t,type:"curation",status:"rejected"}])});if(s.results[0].hasOwnProperty("error"))throw s.results[0].error;Object(E.g)(ye),e.loadIgnoredQueries()}catch(e){Object(E.e)(e)}}})}),we=()=>{const{dataLoading:e,ignoredQueries:t,meta:a}=Object(w.useValues)(ve),{allowIgnoredQuery:s,loadIgnoredQueries:i,onPaginate:r}=Object(w.useActions)(ve);Object(f.useEffect)((()=>{i()}),[a.page.current]);const c=[{render:e=>e,name:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestionsPanel.queryColumnName",{defaultMessage:"Query"})},{actions:[{type:"button",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestions.allowButtonLabel",{defaultMessage:"Allow"}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestions.allowButtonDescription",{defaultMessage:"Enable suggestions for this query"}),onClick:e=>s(e),color:"primary"}]}];return Object(B.jsx)(H.a,{isLoading:e,title:Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,{component:"h2"},n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestionsPanel.title",{defaultMessage:"Ignored queries"})),Object(B.jsx)(D.EuiFlexItem,{component:"span",grow:!1},Object(B.jsx)(D.EuiButtonEmpty,{iconType:"refresh",size:"xs",onClick:()=>i()},n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestionsPanel.refresh",{defaultMessage:"Refresh"})))),subtitle:Object(B.jsx)("span",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.ignoredSuggestionsPanel.description",{defaultMessage:"You wont be notified about suggestions for these queries"})),iconType:"eyeClosed",hasBorder:!0},Object(B.jsx)(D.EuiBasicTable,{items:t,itemId:"query",columns:c,hasActions:!0,pagination:{...Object(xe.a)(a),showPerPageOptions:!1},onChange:Object(xe.b)(r)}))},Ee=()=>{const{engineName:e}=Object(w.useValues)(k.a),[t,a]=Object(f.useState)(Date.now()),s=["event.kind: event","event.dataset: search-relevance-suggestions",`appsearch.adaptive_relevance.engine: ${e}`,"event.action: curation_suggestion","appsearch.adaptive_relevance.suggestion.new_status: rejected"];return Object(B.jsx)(H.a,{iconType:"tableDensityNormal",title:Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,{component:"h2"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.rejectedCurationsHistoryPanel.tableTitle",{defaultMessage:"Recently rejected suggestions"})),Object(B.jsx)(D.EuiFlexItem,{component:"span",grow:!1},Object(B.jsx)(D.EuiButtonEmpty,{iconType:"refresh",size:"xs",onClick:()=>a(Date.now())},n.i18n.translate("xpack.enterpriseSearch.appSearch.engines.curations.rejectedCurationsHistoryPanel.refresh",{defaultMessage:"Refresh"})))),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.rejectedCurationsHistoryPanel.tableDescription",{defaultMessage:"View suggestions youve previously rejected."}),hasBorder:!0},Object(B.jsx)(U.a,{logView:{type:"log-view-reference",logViewId:fe.r},hoursAgo:720,query:s.join(" and "),endTimestamp:t,columns:[{type:"field",field:"appsearch.adaptive_relevance.query",header:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.rejectedCurationsHistoryPanel.queryColumnHeader",{defaultMessage:"Query"})},{type:"timestamp"},{type:"message"}]}))},Ce=()=>Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,{grow:2},Object(B.jsx)(D.EuiFlexGroup,{direction:"column"},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(Oe,null)),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(Ee,null)))),Object(B.jsx)(D.EuiFlexItem,{grow:1},Object(B.jsx)(we,null)));var Me=a(136);a(818);const ke=()=>{const{dataLoading:e,curations:t,meta:a}=Object(w.useValues)(Se),{onPaginate:s,deleteCuration:i}=Object(w.useActions)(Se),r=[{field:"queries",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.column.queries",{defaultMessage:"Queries"}),render:(e,t)=>{var a,s;return Object(B.jsx)(me.d,{"data-test-subj":"CurationsTableQueriesLink",to:Object(k.c)(v.y,{curationId:t.id})},e.join(", "),"automated"===(null===(a=t.suggestion)||void 0===a?void 0:a.status)&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiBadge,{color:"accent",iconType:V,className:"curationsTableBadge"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.automatedLabel",{defaultMessage:"Automated"}))),"pending"===(null===(s=t.suggestion)||void 0===s?void 0:s.status)&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiBadge,{color:"default",className:"curationsTableBadge"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.newSuggestionLabel",{defaultMessage:"New suggestion"}))))},width:"40%",truncateText:!0,mobileOptions:{header:!0,enlarge:!0,width:"100%"}},{field:"last_updated",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.column.lastUpdated",{defaultMessage:"Last updated"}),width:"30%",dataType:"string",render:e=>Object(B.jsx)(Me.a,{date:F(e)})},{width:"120px",actions:[{name:W.n,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.editTooltip",{defaultMessage:"Edit curation"}),type:"icon",icon:"pencil",color:"primary",onClick:e=>{const{navigateToUrl:t}=M.a.values;t(Object(k.c)(v.y,{curationId:e.id}))},"data-test-subj":"CurationsTableEditButton"},{name:W.l,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.deleteTooltip",{defaultMessage:"Delete curation"}),type:"icon",icon:"trash",color:"danger",onClick:e=>i(e.id),"data-test-subj":"CurationsTableDeleteButton"}]}];return Object(B.jsx)(H.a,{className:"curationsTable",hasBorder:!0,iconType:"package",title:Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.table.title",{defaultMessage:"Active curations"}))},Object(B.jsx)(D.EuiBasicTable,{columns:r,items:t,responsive:!0,hasActions:!0,loading:e,pagination:{...Object(xe.a)(a),showPerPageOptions:!1},onChange:Object(xe.b)(s)}))},Te=()=>Object(B.jsx)(D.EuiEmptyPrompt,{"data-test-subj":"emptyCurationsPrompt",iconType:"pin",title:Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.empty.noCurationsTitle",{defaultMessage:"Create your first curation"})),body:Object(B.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.empty.description",{defaultMessage:"Use curations to promote and hide documents. Help people discover what you would most like them to discover."})),actions:Object(B.jsx)(D.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:v.g},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.empty.buttonLabel",{defaultMessage:"Read the curations guide"}))}),Fe=Object(w.kea)({path:["enterprise_search","app_search","curations","suggestions_logic"],actions:()=>({onPaginate:e=>({newPageIndex:e}),onSuggestionsLoaded:({results:e,meta:t})=>({results:e,meta:t}),loadSuggestions:!0}),reducers:()=>({dataLoading:[!0,{loadSuggestions:()=>!0,onSuggestionsLoaded:()=>!1}],suggestions:[[],{onSuggestionsLoaded:(e,{results:t})=>t}],meta:[{...W.k,page:{...W.k.page,size:10}},{onSuggestionsLoaded:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(xe.c)(e,t)}]}),listeners:({actions:e,values:t})=>({loadSuggestions:async()=>{const{meta:a}=t,{http:n}=C.a.values,{engineName:s}=k.a.values;try{const t=await n.post(`/internal/app_search/engines/${s}/adaptive_relevance/suggestions`,{body:JSON.stringify({page:{current:a.page.current,size:a.page.size},filters:{status:["pending"],type:"curation"}})});e.onSuggestionsLoaded(t)}catch(e){Object(E.e)(e)}}})});a(823);const _e=e=>Object(k.c)(v.z,{query:e}),Ie=[{field:"query",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.column.queryTableHeader",{defaultMessage:"Query"}),render:(e,t)=>Object(B.jsx)(me.d,{to:_e(e)},e,t.override_manual_curation&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiBadge,{iconType:"warning",color:"warning",className:"suggestionsTableBadge"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.overridesLabel",{defaultMessage:"Overrides"}))))},{field:"updated_at",dataType:"string",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.column.lastUpdatedTableHeader",{defaultMessage:"Last updated"}),render:e=>Object(B.jsx)(Me.a,{date:F(e)})},{field:"promoted",name:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.column.promotedDocumentsTableHeader",{defaultMessage:"Promoted results"}),render:e=>Object(B.jsx)("span",null,e.length)},{actions:[{name:W.D,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.viewTooltip",{defaultMessage:"View suggestion"}),type:"icon",icon:"eye",onClick:e=>{const{navigateToUrl:t}=M.a.values,a=e.query;t(_e(a))}}],width:"120px"}],Re=()=>{const{loadSuggestions:e,onPaginate:t}=Object(w.useActions)(Fe),{meta:a,suggestions:s,dataLoading:i}=Object(w.useValues)(Fe);Object(f.useEffect)((()=>{e()}),[a.page.current]);const r=a.page.total_results;return Object(B.jsx)(H.a,{className:"suggestionsTable",iconType:re.b,title:Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.title",{defaultMessage:"{totalSuggestions} Suggestions",values:{totalSuggestions:r}})),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestionsTable.description",{defaultMessage:"Based on your analytics, results for the following queries could be improved by promoting some documents."}),hasBorder:!0},Object(B.jsx)(D.EuiBasicTable,{columns:Ie,items:s,responsive:!0,hasActions:!0,loading:i,pagination:{...Object(xe.a)(a),showPerPageOptions:!1},onChange:Object(xe.b)(t)}))},Ae=()=>{const{curations:e}=Object(w.useValues)(Se),{engine:{adaptive_relevance_suggestions_active:t}}=Object(w.useValues)(k.a),a=t;return Object(B.jsx)(O.a.Fragment,null,a&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(Re,null),Object(B.jsx)(D.EuiSpacer,null)),e.length>0?Object(B.jsx)(ke,null):Object(B.jsx)(Te,null))};var Le=a(5),De=a(55),ze=a(64);const Pe=Object(w.kea)({path:["enterprise_search","app_search","curations","curations_settings_logic"],actions:()=>({loadCurationsSettings:!0,onCurationsSettingsLoad:e=>({curationsSettings:e}),onSkipLoadingCurationsSettings:!0,toggleCurationsEnabled:!0,toggleCurationsMode:!0,updateCurationsSetting:e=>({currationsSetting:e})}),reducers:()=>({dataLoading:[!0,{onCurationsSettingsLoad:()=>!1,onSkipLoadingCurationsSettings:()=>!1}],curationsSettings:[{enabled:!1,mode:"manual"},{onCurationsSettingsLoad:(e,{curationsSettings:t})=>t}]}),listeners:({actions:e,values:t})=>({loadCurationsSettings:async()=>{const{http:t}=C.a.values,{engineName:a}=k.a.values;try{const n=await t.get(`/internal/app_search/engines/${a}/adaptive_relevance/settings`);e.onCurationsSettingsLoad(n.curation)}catch(e){Object(E.e)(e)}},toggleCurationsEnabled:async()=>{t.curationsSettings.enabled?e.updateCurationsSetting({enabled:!1,mode:"manual"}):e.updateCurationsSetting({enabled:!0})},toggleCurationsMode:async()=>{e.updateCurationsSetting({mode:"automatic"===t.curationsSettings.mode?"manual":"automatic"})},updateCurationsSetting:async({currationsSetting:t})=>{const{http:a}=C.a.values,{engineName:n}=k.a.values;try{const s=await a.put(`/internal/app_search/engines/${n}/adaptive_relevance/settings`,{body:JSON.stringify({curation:t})});e.onCurationsSettingsLoad(s.curation),Se.actions.loadCurations(),k.a.actions.initializeEngine()}catch(e){Object(E.e)(e)}}})}),Ne=()=>{const{hasPlatinumLicense:e}=Object(w.useValues)(De.a),{curationsSettings:{enabled:t,mode:a},dataLoading:s}=Object(w.useValues)(Pe),{loadCurationsSettings:i,onSkipLoadingCurationsSettings:r,toggleCurationsEnabled:c,toggleCurationsMode:l}=Object(w.useActions)(Pe),{engine:{analytics_enabled:o}}=Object(w.useValues)(k.a);return Object(f.useEffect)((()=>{o&&s?i():r()}),[o,s]),e?s?Object(B.jsx)(ze.a,null):Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiIcon,{type:V,size:"l"})),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiTitle,{size:"s"},Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.automaticCurationsTitle",{defaultMessage:"Curations powered by adaptive relevance"}))))),Object(B.jsx)(D.EuiSpacer,{size:"m"}),!o&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiCallOut,{iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.analyticsDisabledCalloutTitle",{defaultMessage:"Analytics are disabled"})},Object(B.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.analyticsDisabledCalloutDescription",{defaultMessage:"Adaptive relevance requires analytics to be enabled on your account."})),Object(B.jsx)(me.b,{fill:!0,size:"s",to:v.W},n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.manageAnalyticsButtonLabel",{defaultMessage:"Manage analytics"}))),Object(B.jsx)(D.EuiSpacer,{size:"m"})),Object(B.jsx)(D.EuiText,{color:"subdued",size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.automaticCurationsDescription",{defaultMessage:"App Search will monitor your engine's analytics and suggest changes to your curations to help you deliver the most relevant results. Each suggestion can be accepted, rejected, or modified."})),Object(B.jsx)(D.EuiSpacer,{size:"m"}),Object(B.jsx)(D.EuiFlexGroup,{direction:"column"},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiSwitch,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.enableautomaticCurationsSwitchLabel",{defaultMessage:"Enable suggestions"}),checked:t,disabled:!o,onChange:c})),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiSwitch,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.acceptNewSuggesstionsSwitchLabel",{defaultMessage:"Automatically accept new suggestions"}),checked:"automatic"===a,disabled:!o,onChange:l})))):Object(B.jsx)(H.a,{title:Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.licenseUpgradeCTATitle",{defaultMessage:"Introducing curations powered by adaptive relevance"})),subtitle:Object(B.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.curations.settings.licenseUpgradeCTASubtitle",defaultMessage:"Upgrade to a {platinumLicenseName} subscription to harness the power of machine learning. By analyzing your engine's analytics, App Search is able to suggest new or updated curations. Effortlessly help your users find exactly what they're looking for. Start a free trial today.",values:{platinumLicenseName:Object(B.jsx)("strong",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.curations.settings.platinum",{defaultMessage:"Platinum"}))}}),action:Object(B.jsx)(me.b,{to:"/app/management/stack/license_management",shouldNotCreateHref:!0},n.i18n.translate("xpack.enterpriseSearch.curations.settings.start30DayTrialButtonLabel",{defaultMessage:"Start a 30-day trial"}))},Object(B.jsx)(D.EuiButtonEmpty,{target:"_blank",iconType:"popout",href:Le.a.licenseManagement},n.i18n.translate("xpack.enterpriseSearch.curations.settings.licenseUpgradeLink",{defaultMessage:"Learn more about license upgrades"})))},Be=()=>{const{dataLoading:e,meta:t,selectedPageTab:a}=Object(w.useValues)(Se),{loadCurations:s,onSelectPageTab:c}=Object(w.useActions)(Se),{engine:{adaptive_relevance_suggestions_active:l}}=Object(w.useValues)(k.a),o={label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.overviewPageTabLabel",{defaultMessage:"Overview"}),isSelected:"overview"===a,onClick:()=>c("overview")},u={label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.historyPageTabLabel",{defaultMessage:"History"}),isSelected:"history"===a,onClick:()=>c("history")},p={label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.settingsPageTabLabel",{defaultMessage:"Settings"}),isSelected:"settings"===a,onClick:()=>c("settings")},d=l?[o,u,p]:[o,p];return Object(f.useEffect)((()=>{s()}),[t.page.current]),Object(B.jsx)(z.a,{pageChrome:T(),pageHeader:{pageTitle:i,rightSideItems:[Object(B.jsx)(me.b,{to:Object(k.c)(v.w),iconType:"plusInCircle",fill:!0},r)],tabs:e?void 0:d},isLoading:e},"overview"===a&&Object(B.jsx)(Ae,null),"history"===a&&Object(B.jsx)(Ce,null),"settings"===a&&Object(B.jsx)(Ne,null))},Ve=()=>{const{createCuration:e}=Object(w.useActions)(Se);return Object(B.jsx)(z.a,{pageChrome:T([r]),pageHeader:{pageTitle:r}},Object(B.jsx)(D.EuiPanel,{hasBorder:!0},Object(B.jsx)(D.EuiTitle,null,Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.create.curationQueriesTitle",{defaultMessage:"Curation queries"}))),Object(B.jsx)(D.EuiText,{color:"subdued"},Object(B.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.create.curationQueriesDescription",{defaultMessage:"Add one or multiple queries to curate. You will be able add or remove more queries later."}))),Object(B.jsx)(D.EuiSpacer,null),Object(B.jsx)(pe.a,{id:"createNewCuration",addRowText:l,inputPlaceholder:o,onSubmit:t=>e(t)})))};var Ue=a(79);const He=Object(w.kea)({path:["enterprise_search","app_search","curations","suggestion_logic"],actions:()=>({loadSuggestion:!0,onSuggestionLoaded:({suggestion:e})=>({suggestion:e}),acceptSuggestion:!0,acceptAndAutomateSuggestion:!0,rejectSuggestion:!0,rejectAndDisableSuggestion:!0}),reducers:()=>({dataLoading:[!0,{loadSuggestion:()=>!0,onSuggestionLoaded:()=>!1}],suggestion:[null,{onSuggestionLoaded:(e,{suggestion:t})=>t}]}),listeners:({actions:e,values:t,props:a})=>({loadSuggestion:async()=>{const{http:t}=C.a.values,{engineName:s}=k.a.values;try{const n=await t.get(`/internal/app_search/engines/${s}/adaptive_relevance/suggestions/${a.query}`,{query:{type:"curation"}}),{suggestion:i,...r}=n,c={...r,promoted:i.promoted,organic:i.organic};e.onSuggestionLoaded({suggestion:c})}catch(e){var i;if(404===(null===(i=e.response)||void 0===i?void 0:i.status)){const e=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.notFoundError",{defaultMessage:"Could not find suggestion, it may have already been applied or rejected."});Object(E.j)(e),M.a.values.navigateToUrl(Object(k.c)(v.x))}else Object(E.e)(e)}},acceptSuggestion:async()=>{const{http:e}=C.a.values,{engineName:a}=k.a.values,{suggestion:s}=t;if("delete"!==s.operation||await Ge("Are you sure you want to delete this curation?"))try{const t=await qe(e,a,s.query,"applied");Object(E.k)(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.successfullyAppliedMessage",{defaultMessage:"Suggestion was successfully applied."})),"delete"===s.operation?M.a.values.navigateToUrl(Object(k.c)(v.x)):M.a.values.navigateToUrl(Object(k.c)(v.y,{curationId:t.curation_id}))}catch(e){e.message?Object(E.i)(e.message):Object(E.e)(e)}},acceptAndAutomateSuggestion:async()=>{const{http:e}=C.a.values,{engineName:a}=k.a.values,{suggestion:s}=t;if("delete"!==s.operation||await Ge("Are you sure you want to delete this curation?"))try{const t=await qe(e,a,s.query,"automated");Object(E.k)(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.successfullyAutomatedMessage",{defaultMessage:'Suggestion was successfully applied and all future suggestions for the query "{query}" will be automatically applied.',values:{query:s.query}})),"delete"===s.operation?M.a.values.navigateToUrl(Object(k.c)(v.x)):M.a.values.navigateToUrl(Object(k.c)(v.y,{curationId:t.curation_id}))}catch(e){e.message?Object(E.i)(e.message):Object(E.e)(e)}},rejectSuggestion:async()=>{const{http:e}=C.a.values,{engineName:a}=k.a.values,{suggestion:s}=t;try{await qe(e,a,s.query,"rejected"),Object(E.k)(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.successfullyRejectedMessage",{defaultMessage:"Suggestion was successfully rejected."})),M.a.values.navigateToUrl(Object(k.c)(v.x))}catch(e){e.message?Object(E.i)(e.message):Object(E.e)(e)}},rejectAndDisableSuggestion:async()=>{const{http:e}=C.a.values,{engineName:a}=k.a.values,{suggestion:s}=t;try{await qe(e,a,s.query,"disabled"),Object(E.k)(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.successfullyDisabledMessage",{defaultMessage:'Suggestion was successfully rejected and you will no longer receive suggestions for the query "{query}".',values:{query:s.query}})),M.a.values.navigateToUrl(Object(k.c)(v.x))}catch(e){e.message?Object(E.i)(e.message):Object(E.e)(e)}}})}),qe=async(e,t,a,n)=>{const s=await e.put(`/internal/app_search/engines/${t}/adaptive_relevance/suggestions`,{body:JSON.stringify([{query:a,type:"curation",status:n}])});if(s.results[0].hasOwnProperty("error"))throw new Error(s.results[0].error);return s.results[0]},Ge=e=>new Promise((function(t){return t(window.confirm(e))})),$e=()=>{const[e,t]=Object(f.useState)(!1),{acceptSuggestion:a,acceptAndAutomateSuggestion:s,rejectSuggestion:i,rejectAndDisableSuggestion:r}=Object(w.useActions)(He),c=Object(B.jsx)(D.EuiButtonIcon,{iconType:"boxesVertical","aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.actionsPopoverAriaLabel",{defaultMessage:"More suggestion actions"}),color:"text",onClick:()=>t(!e)});return Object(B.jsx)(D.EuiPopover,{button:c,isOpen:e,closePopover:()=>t(!1)},Object(B.jsx)(D.EuiPopoverTitle,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.actionsPopoverTitle",{defaultMessage:"Manage suggestion"})),Object(B.jsx)(D.EuiListGroup,{flush:!0},Object(B.jsx)(D.EuiListGroupItem,{size:"xs",iconType:"check",label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.actionsAcceptButtonLabel",{defaultMessage:"Accept this suggestion"}),onClick:a,"data-test-subj":"acceptButton"}),Object(B.jsx)(D.EuiListGroupItem,{size:"xs",iconType:"check",label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.actionsAutomateButtonLabel",{defaultMessage:"Automate - always accept new suggestions for this query"}),onClick:s,"data-test-subj":"automateButton"}),Object(B.jsx)(D.EuiListGroupItem,{size:"xs",iconType:"cross",label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.actionsRejectButtonLabel",{defaultMessage:"Reject this suggestion"}),onClick:i,"data-test-subj":"rejectButton"}),Object(B.jsx)(D.EuiListGroupItem,{size:"xs",iconType:"bellSlash",label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.actionsTurnOffButtonLabel",{defaultMessage:"Reject and turn off suggestions for this query"}),onClick:r,"data-test-subj":"turnoffButton"})))},We=()=>{const{acceptSuggestion:e,rejectSuggestion:t}=Object(w.useActions)(He);return Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiPanel,{color:"subdued",paddingSize:"s"},Object(B.jsx)(D.EuiFlexGroup,{alignItems:"center"},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiTitle,{size:"xs"},Object(B.jsx)("h4",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.title",{defaultMessage:"Manage suggestion"})))),Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiButton,{size:"s",color:"danger",iconType:"cross","data-test-subj":"rejectButton",onClick:t},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.rejectButtonLabel",{defaultMessage:"Reject"}))),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiButton,{size:"s",color:"success",iconType:"checkInCircleFilled","data-test-subj":"acceptButton",onClick:e},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.acceptButtonLabel",{defaultMessage:"Accept"}))),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)($e,null))))))))};a(828);const Qe=({variant:e,results:t})=>{const{isMetaEngine:a,engine:s}=Object(w.useValues)(k.a),i=t.length;return Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiFlexGroup,{className:"curationResultPanel__header",gutterSize:"s"},Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiNotificationBadge,{"data-test-subj":"curationCount"},i)),Object(B.jsx)(D.EuiFlexItem,{grow:!1},Object(B.jsx)(D.EuiTitle,{size:"xxxs"},Object(B.jsx)("h5",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.resultPanelTitle",{defaultMessage:"Promoted results"})))),"suggested"===e&&Object(B.jsx)(D.EuiFlexItem,{"data-test-subj":"suggestedText"},Object(B.jsx)(D.EuiText,{color:"subdued",textAlign:"right",size:"xs"},Object(B.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.resultPanelDescription",{defaultMessage:"This curation can be automated by App Search"}))))),Object(B.jsx)(D.EuiSpacer,{size:"xs"}),Object(B.jsx)(D.EuiFlexGroup,{alignItems:"center",justifyContent:t.length>0?"flexStart":"center",gutterSize:"s",direction:"column",className:`curationResultPanel curationResultPanel--${e}`},t.length>0?t.map(((e,t)=>Object(B.jsx)(D.EuiFlexItem,{key:e.id.raw,style:{width:"100%"},grow:!1},Object(B.jsx)(X.a,{result:e,isMetaEngine:a,schemaForTypeHighlights:s.schema,resultPosition:t+1,showClick:!0})))):Object(B.jsx)(D.EuiText,{size:"s","data-test-subj":"noResults"},Object(B.jsx)("p",null,Object(B.jsx)("b",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.noResultsMessage",{defaultMessage:"There are currently no promoted documents for this query"}))))))},Je=()=>{var e;const{query:t}=Object(Ue.b)(),{engine:a,isMetaEngine:s}=Object(w.useValues)(k.a),i=He({query:t}),{loadSuggestion:r}=Object(w.useActions)(i),{suggestion:c,dataLoading:l}=Object(w.useValues)(i),[o,u]=Object(f.useState)(!1),p=(null==c||null===(e=c.curation)||void 0===e?void 0:e.organic)||[],d=(null==c?void 0:c.organic)||[],g=p.length+d.length,h=null!=c&&c.curation?c.curation.promoted.map(ae):[],j=null!=c&&c.promoted?null==c?void 0:c.promoted.map(ae):[],b=(null==c?void 0:c.query)||"";return Object(f.useEffect)((()=>{r()}),[]),Object(B.jsx)(z.a,{isLoading:l,pageChrome:T([n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.breadcrumbLabel",{defaultMessage:"Suggested: {query}",values:{query:b}})]),pageHeader:{pageTitle:b}},Object(B.jsx)(We,null),Object(B.jsx)(D.EuiSpacer,{size:"m"}),Object(B.jsx)(D.EuiFlexGroup,null,Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiTitle,{size:"xxs"},Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.currentTitle",{defaultMessage:"Current"}))),Object(B.jsx)(D.EuiSpacer,{size:"s"}),Object(B.jsx)(Qe,{variant:"current",results:h})),Object(B.jsx)(D.EuiFlexItem,null,Object(B.jsx)(D.EuiTitle,{size:"xxs"},Object(B.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.suggestionTitle",{defaultMessage:"Suggested"}))),Object(B.jsx)(D.EuiSpacer,{size:"s"}),Object(B.jsx)(Qe,{variant:"suggested",results:j}))),Object(B.jsx)(D.EuiSpacer,null),Object(B.jsx)(D.EuiPanel,{hasBorder:!0,paddingSize:"none"},Object(B.jsx)(D.EuiButtonEmpty,{color:"text",size:"s",style:{width:"100%"},iconType:o?"fold":"unfold",iconSide:"right",onClick:()=>u(!o),"data-test-subj":"showOrganicResults"},o?n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.collapseButtonLabel",{defaultMessage:"Collapse organic search results"}):n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.expandButtonLabel",{defaultMessage:"Expand organic search results"})),o&&0===g&&Object(B.jsx)(D.EuiEmptyPrompt,{iconType:re.a,title:Object(B.jsx)("h4",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.noOrganicResultsTitle",{defaultMessage:"No results"})),body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.curations.suggestedCuration.noOrganicResultsDescription",{defaultMessage:"No organic search results were returned for this query"})}),o&&g>0&&Object(B.jsx)(O.a.Fragment,null,Object(B.jsx)(D.EuiHorizontalRule,{margin:"none"}),Object(B.jsx)(D.EuiPanel,{hasShadow:!1,"data-test-subj":"organicResults"},Object(B.jsx)(D.EuiFlexGroup,{gutterSize:"m"},Object(B.jsx)(D.EuiFlexItem,null,p.length>0&&Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":"currentOrganicResults"},p.map(((e,t)=>Object(B.jsx)(D.EuiFlexItem,{grow:!1,key:e.id.raw},Object(B.jsx)(X.a,{result:e,isMetaEngine:s,schemaForTypeHighlights:a.schema,resultPosition:t+h.length+1})))))),Object(B.jsx)(D.EuiFlexItem,null,d.length>0&&Object(B.jsx)(D.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":"proposedOrganicResults"},d.map(((e,t)=>Object(B.jsx)(D.EuiFlexItem,{grow:!1,key:e.id.raw},Object(B.jsx)(X.a,{result:e,isMetaEngine:s,schemaForTypeHighlights:a.schema,resultPosition:t+j.length+1})))))))))))},Ke=()=>Object(B.jsx)(y.c,null,Object(B.jsx)(y.a,{exact:!0,path:v.x},Object(B.jsx)(Be,null)),Object(B.jsx)(y.a,{exact:!0,path:v.w},Object(B.jsx)(Ve,null)),Object(B.jsx)(y.a,{exact:!0,path:v.z},Object(B.jsx)(Je,null)),Object(B.jsx)(y.a,{path:v.y},Object(B.jsx)(be,null)))},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return Me})),a.d(t,"c",(function(){return ae}));var n=a(2);let s,i,r,c;!function(e){e.Value="value",e.Functional="functional",e.Proximity="proximity"}(s||(s={})),function(e){e.Logarithmic="logarithmic",e.Exponential="exponential",e.Linear="linear"}(i||(i={})),function(e){e.Gaussian="gaussian",e.Exponential="exponential",e.Linear="linear"}(r||(r={})),function(e){e.Add="add",e.Multiply="multiply"}(c||(c={}));const l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.title",{defaultMessage:"Relevance Tuning"}),o=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.messages.updateSuccess",{defaultMessage:"Relevance was tuned"}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.messages.deleteSuccess",{defaultMessage:"Relevance was reset to default values"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.messages.successDescription",{defaultMessage:"The changes will impact your results shortly."}),d=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.messages.resetConfirmation",{defaultMessage:"Are you sure you want to restore relevance defaults?"}),g=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.messages.deleteConfirmation",{defaultMessage:"Are you sure you want to delete this boost?"}),h=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.proximityDropDownOptionLabel",{defaultMessage:"Proximity"}),j=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.functionalDropDownOptionLabel",{defaultMessage:"Functional"}),b=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.valueDropDownOptionLabel",{defaultMessage:"Value"}),m={[s.Proximity]:h,[s.Functional]:j,[s.Value]:b},x={[s.Value]:"tokenNumber",[s.Functional]:"tokenFunction",[s.Proximity]:"tokenGeo"},S={type:s.Value,factor:1,value:[""],newBoost:!0,function:void 0,operation:void 0},f={value:void 0,type:s.Functional,factor:1,newBoost:!0,function:i.Logarithmic,operation:c.Multiply},O={value:void 0,type:s.Proximity,factor:1,newBoost:!0,operation:void 0,function:r.Gaussian},y={[s.Value]:S,[s.Functional]:f,[s.Proximity]:O},v=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.addOperationDropDownOptionLabel",{defaultMessage:"Add"}),w=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.multiplyOperationDropDownOptionLabel",{defaultMessage:"Multiply"}),E={[c.Add]:v,[c.Multiply]:w},C=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.logarithmicBoostFunctionDropDownOptionLabel",{defaultMessage:"Logarithmic"}),M=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.gaussianFunctionDropDownOptionLabel",{defaultMessage:"Gaussian"}),k=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.exponentialFunctionDropDownOptionLabel",{defaultMessage:"Exponential"}),T=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.linearFunctionDropDownOptionLabel",{defaultMessage:"Linear"}),F={[r.Gaussian]:M,[r.Exponential]:k,[r.Linear]:T},_={[i.Logarithmic]:C,[i.Exponential]:k,[i.Linear]:T};var I=a(11),R=a.n(I),A=a(37),L=a(13),D=a(42),z=a(93),P=a(239),N=a(45),B=a(53),V=a(12);const U=({type:e})=>Object(V.jsx)(L.EuiToken,{iconType:x[e],size:"m",shape:"square",color:"euiColorVis1"});var H=a(17),q=a.n(H);a(859);const G=({children:e,disabled:t=!1})=>{const a=q()("valueBadge",{"valueBadge--disabled":t});return Object(V.jsx)("span",{className:a},e)};var $=a(48);const W=()=>Object(V.jsx)(L.EuiEmptyPrompt,{iconType:"wrench",title:Object(V.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.empty.title",{defaultMessage:"Add documents to tune relevance"})),body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.empty.description",{defaultMessage:"A schema will be automatically created for you after you index some documents."}),actions:Object(V.jsx)(L.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:$.R},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.empty.buttonLabel",{defaultMessage:"Read the relevance tuning guide"}))});var Q=a(16),J=a(43),K=a(38),Y=a(75);const Z=(e,t)=>""===t?e:e.filter((e=>e.includes(t))),X=e=>{const{precision_enabled:t,...a}=Object(Q.cloneDeep)(e),{boosts:n}=a;return Object.keys(n).forEach((e=>n[e].forEach((e=>delete e.newBoost)))),a},ee=e=>String(e),te=e=>{return e.hasOwnProperty("value")?{...e,type:e.type,value:(t=e.value,Array.isArray(t)?t:[t]).map(ee)}:Object(Q.omit)(e,"value");var t},ae=Object(A.kea)({path:["enterprise_search","app_search","relevance_tuning_logic"],actions:()=>({onInitializeRelevanceTuning:e=>e,setSearchSettings:e=>({searchSettings:e}),setFilterValue:e=>e,setSearchQuery:e=>e,setSearchResults:e=>e,setResultsLoading:e=>e,clearSearchResults:!0,resetSearchSettingsState:!0,initializeRelevanceTuning:!0,getSearchResults:!0,setSearchSettingsResponse:e=>({searchSettings:e}),onSearchSettingsSuccess:e=>({searchSettings:e}),onSearchSettingsError:()=>!0,updateSearchSettings:!0,resetSearchSettings:!0,toggleSearchField:(e,t)=>({name:e,disableField:t}),updateFieldWeight:(e,t)=>({name:e,weight:t}),addBoost:(e,t)=>({name:e,type:t}),deleteBoost:(e,t)=>({name:e,index:t}),updateBoostFactor:(e,t,a)=>({name:e,index:t,factor:a}),updateBoostValue:(e,t,a)=>({name:e,boostIndex:t,updatedValues:a}),updateBoostCenter:(e,t,a)=>({name:e,boostIndex:t,value:a}),updateBoostSelectOption:(e,t,a,n)=>({name:e,boostIndex:t,optionType:a,value:n}),setPrecision:e=>({precision:e})}),reducers:()=>({searchSettings:[{search_fields:{},boosts:{},precision:2,precision_enabled:!1},{onInitializeRelevanceTuning:(e,{searchSettings:t})=>t,setSearchSettings:(e,{searchSettings:t})=>t,setSearchSettingsResponse:(e,{searchSettings:t})=>t,setPrecision:(e,{precision:t})=>({...e,precision:t})}],schema:[{},{onInitializeRelevanceTuning:(e,{schema:t})=>t}],schemaConflicts:[{},{onInitializeRelevanceTuning:(e,{schemaConflicts:t})=>t||{}}],filterInputValue:["",{setFilterValue:(e,t)=>t}],query:["",{setSearchQuery:(e,t)=>t}],unsavedChanges:[!1,{setPrecision:()=>!0,setSearchSettings:()=>!0,setSearchSettingsResponse:()=>!1}],dataLoading:[!0,{onInitializeRelevanceTuning:()=>!1,resetSearchSettingsState:()=>!0}],searchResults:[null,{clearSearchResults:()=>null,setSearchResults:(e,t)=>t}],resultsLoading:[!1,{setResultsLoading:(e,t)=>t,setSearchResults:()=>!1}]}),selectors:({selectors:e})=>({schemaFields:[()=>[e.schema],e=>Object.entries(e).reduce(((e,[t,{capabilities:a}])=>a.fulltext||a.boost?[...e,t]:e),[])],schemaFieldsWithConflicts:[()=>[e.schemaConflicts],e=>Object.keys(e)],filteredSchemaFields:[()=>[e.schemaFields,e.filterInputValue],(e,t)=>Z(e,t)],filteredSchemaFieldsWithConflicts:[()=>[e.schemaFieldsWithConflicts,e.filterInputValue],(e,t)=>Z(e,t)],engineHasSchemaFields:[()=>[e.schemaFields],e=>e.length>0],isPrecisionTuningEnabled:[()=>[e.searchSettings],e=>e.precision_enabled]}),listeners:({actions:e,values:t})=>({initializeRelevanceTuning:async()=>{const{http:t}=K.a.values,{engineName:a}=N.a.values,n=`/internal/app_search/engines/${a}/search_settings/details`;try{const a=await t.get(n);e.onInitializeRelevanceTuning({...a,searchSettings:{...a.searchSettings,boosts:(s=a.searchSettings.boosts,Object.entries(s).reduce(((e,[t,a])=>({...e,[t]:a.map(te)})),{}))}})}catch(e){Object(J.e)(e)}var s},getSearchResults:async(a,n)=>{await n(250);const i=t.query;if(!i)return e.clearSearchResults();const{engineName:r}=N.a.values,{http:c}=K.a.values,{search_fields:l,boosts:o,precision:u}=X(t.searchSettings),p=`/internal/app_search/engines/${r}/search`;e.setResultsLoading(!0);const d=(e=>Object.entries(e).reduce(((e,[t,a])=>{const n=(e=>e.filter((e=>{if(e.type!==s.Value)return!0;const t=e.value.filter((e=>""!==e.trim()));return!!t.length&&(e.value=t,!0)})))(a);return n.length?{...e,[t]:n}:e}),{}))(o),g=t.isPrecisionTuningEnabled?{precision:u}:{};try{const t=await c.post(p,{query:{query:i},body:JSON.stringify({boosts:Object(Q.isEmpty)(d)?void 0:d,search_fields:Object(Q.isEmpty)(l)?void 0:l,...g})});e.setSearchResults(t.results),Object(J.d)()}catch(e){Object(J.e)(e)}},setSearchSettings:()=>{e.getSearchResults()},onSearchSettingsSuccess:({searchSettings:t})=>{e.setSearchSettingsResponse(t),e.getSearchResults(),window.scrollTo(0,0)},onSearchSettingsError:()=>{window.scrollTo(0,0)},updateSearchSettings:async()=>{const{http:a}=K.a.values,{engineName:n}=N.a.values,s=`/internal/app_search/engines/${n}/search_settings`;try{const n=await a.put(s,{body:JSON.stringify(X(t.searchSettings))});Object(J.g)(o,{text:p}),e.onSearchSettingsSuccess(n)}catch(t){Object(J.e)(t),e.onSearchSettingsError()}finally{const{invalidBoosts:e,unsearchedUnconfirmedFields:t}=N.a.values.engine;(e||t)&&N.a.actions.initializeEngine()}},resetSearchSettings:async()=>{if(window.confirm(d)){const{http:t}=K.a.values,{engineName:a}=N.a.values,n=`/internal/app_search/engines/${a}/search_settings/reset`;try{const a=await t.post(n);Object(J.g)(u,{text:p}),e.onSearchSettingsSuccess(a)}catch(t){Object(J.e)(t),e.onSearchSettingsError()}}},toggleSearchField:({name:a,disableField:n})=>{const{searchSettings:s}=t,i=n?Object(Q.omit)(s.search_fields,a):{...s.search_fields,[a]:{weight:1}};e.setSearchSettings({...s,search_fields:i})},updateFieldWeight:({name:a,weight:n})=>{const{searchSettings:s}=t,{search_fields:i}=s;e.setSearchSettings({...s,search_fields:{...i,[a]:{...i[a],weight:Math.round(10*n)/10}}})},addBoost:({name:a,type:n})=>{const{searchSettings:s}=t,{boosts:i}=s,r=y[n];let c;Array.isArray(i[a])?(c=i[a].slice(),c.push(r)):c=[r],e.setSearchSettings({...s,boosts:{...i,[a]:c}})},deleteBoost:({name:a,index:n})=>{if(window.confirm(g)){const{searchSettings:s}=t,{boosts:i}=s,r=i[a].slice();r.splice(n,1);const c={...i};r.length>0?c[a]=r:delete c[a],e.setSearchSettings({...s,boosts:c})}},updateBoostFactor:({name:a,index:n,factor:s})=>{const{searchSettings:i}=t,{boosts:r}=i,c=Object(Q.cloneDeep)(r[a]);c[n].factor=Math.round(10*s)/10,e.setSearchSettings({...i,boosts:{...r,[a]:c}})},updateBoostValue:({name:a,boostIndex:n,updatedValues:s})=>{const{searchSettings:i}=t,{boosts:r}=i,c=Object(Q.cloneDeep)(r[a]);c[n].value=s,e.setSearchSettings({...i,boosts:{...r,[a]:c}})},updateBoostCenter:({name:a,boostIndex:n,value:s})=>{const{searchSettings:i}=t,{boosts:r}=i,c=Object(Q.cloneDeep)(r[a]),l=t.schema[a].type;c[n].center=((e,t)=>{if(e===Y.c.Number){const e=parseFloat(t);return isNaN(e)?t:e}return t})(l,s),e.setSearchSettings({...i,boosts:{...r,[a]:c}})},updateBoostSelectOption:({name:a,boostIndex:n,optionType:s,value:i})=>{const{searchSettings:r}=t,{boosts:c}=r,l=Object(Q.cloneDeep)(c[a]);l[n][s]=i,e.setSearchSettings({...r,boosts:{...c,[a]:l}})},setSearchQuery:()=>{e.getSearchResults()},setPrecision:()=>{e.getSearchResults()}})}),ne=[void 0,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step01.description",{defaultMessage:"Highest recall, lowest precision setting."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step02.description",{defaultMessage:"Default: Less than half of the terms have to match. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step03.description",{defaultMessage:"Increased term requirements: To match, documents must contain all terms for queries with up to 2 terms, then half if there are more. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step04.description",{defaultMessage:"Increased term requirements: To match, documents must contain all terms for queries with up to 3 terms, then three-quarters if there are more. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step05.description",{defaultMessage:"\tIncreased term requirements: To match, documents must contain all terms for queries with up to 4 terms, then all but one if there are more. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step06.description",{defaultMessage:"Increased term requirements: To match, documents must contain all terms for any query. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step07.description",{defaultMessage:"Strictest term requirements: To match, documents must contain all terms in the same field. Full typo tolerance is applied."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step08.description",{defaultMessage:"Strictest term requirements: To match, documents must contain all terms in the same field. Partial typo tolerance is applied: fuzzy matching is disabled."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step09.description",{defaultMessage:"Strictest term requirements: To match, documents must contain all terms in the same field. Partial typo tolerance is applied: fuzzy matching and prefixing are disabled."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step10.description",{defaultMessage:"Strictest term requirements: To match, documents must contain all terms in the same field. Partial typo tolerance is applied: in addition to the above, contractions and hyphenations are not corrected."}),n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.step11.description",{defaultMessage:"Only exact matches will apply, with tolerance only for differences in capitalization."})];a(864);const se=()=>{const{searchSettings:{precision:e}}=Object(A.useValues)(ae),{setPrecision:t}=Object(A.useActions)(ae),a=ne[e];return Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiTitle,{size:"m"},Object(V.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.title",{defaultMessage:"Precision tuning"}))),Object(V.jsx)(L.EuiSpacer,null),Object(V.jsx)(L.EuiText,{color:"subdued"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.description",{defaultMessage:"Fine tune the precision vs. recall settings on your engine."})," ",Object(V.jsx)(L.EuiLink,{"data-test-subj":"documentationLink",href:$.Q,target:"_blank"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.learnMore.link",{defaultMessage:"Learn more."}))),Object(V.jsx)(L.EuiSpacer,null),Object(V.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween","aria-hidden":!0},Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)("strong",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.recall.label",{defaultMessage:"Recall"}))),Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)("strong",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.precision.label",{defaultMessage:"Precision"})))),Object(V.jsx)(L.EuiSpacer,{size:"s"}),Object(V.jsx)(L.EuiRange,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.precisionSlider.ariaLabel",{defaultMessage:"Recall vs. precision"}),"data-test-subj":"PrecisionRange",value:e,onChange:e=>{t(parseInt(e.target.value,10))},min:1,max:11,step:1,showRange:!0,showTicks:!0,fullWidth:!0}),a&&Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiSpacer,{size:"s"}),Object(V.jsx)(L.EuiPanel,{className:"stepDescription",color:"subdued","data-test-subj":"StepDescription"},a)))};var ie=a(14),re=a(44);const ce=()=>{const{schemaFieldsWithConflicts:e}=Object(A.useValues)(ae),{engine:{invalidBoosts:t,unsearchedUnconfirmedFields:a}}=Object(A.useValues)(N.a),s=e.length;return Object(V.jsx)(R.a.Fragment,null,t&&Object(V.jsx)(L.EuiCallOut,{color:"warning",iconType:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.invalidBoostsBannerLabel",{defaultMessage:"You have invalid boosts!"}),"data-test-subj":"RelevanceTuningInvalidBoostsCallout"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.invalidBoostsErrorMessage",{defaultMessage:"One or more of your boosts is no longer valid, possibly due to a schema type change. Delete any old or invalid boosts to dismiss this alert."})),a&&Object(V.jsx)(L.EuiCallOut,{color:"warning",iconType:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.uncofirmedFieldsBannerLabel",{defaultMessage:"Recently added fields are not being searched by default"}),"data-test-subj":"RelevanceTuningUnsearchedFieldsCallout"},Object(V.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.relevanceTuning.uncofirmedFieldsErrorMessage",defaultMessage:"If these new fields should be searchable, turn them on here by toggling Text Search. Otherwise, confirm your new {schemaLink} to dismiss this alert.",values:{schemaLink:Object(V.jsx)(re.d,{to:Object(N.c)($.G)},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.schemaFieldsLinkLabel",{defaultMessage:"schema fields"}))}})),s>0&&Object(V.jsx)(L.EuiCallOut,{color:"warning",iconType:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.schemaConflictsBannerLabel",{defaultMessage:"Disabled fields"}),"data-test-subj":"SchemaConflictsCallout"},Object(V.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.relevanceTuning.schemaConflictsErrorMessage",defaultMessage:"{schemaFieldsWithConflictsCount, number} inactive {schemaFieldsWithConflictsCount, plural, one {field} other {fields}} due to field-type conflicts. {link}",values:{schemaFieldsWithConflictsCount:s,link:Object(V.jsx)(L.EuiLink,{href:$.N,target:"_blank"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.whatsThisLinkLabel",{defaultMessage:"What's this?"}))}})))},le=({name:e,type:t,boosts:a=[],field:n})=>Object(V.jsx)(L.EuiFlexGroup,{alignItems:"center",responsive:!1},Object(V.jsx)(L.EuiFlexItem,null,Object(V.jsx)(L.EuiTitle,{size:"xs"},Object(V.jsx)("h3",null,e)),Object(V.jsx)(L.EuiText,null,Object(V.jsx)(L.EuiTextColor,{color:"subdued"},t))),Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)(L.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},a.map(((e,t)=>Object(V.jsx)(L.EuiFlexItem,{grow:!1,key:t},Object(V.jsx)(U,{type:e.type})))),Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)(G,{disabled:!n||0===n.weight},Object(V.jsx)(L.EuiIcon,{type:"controlsVertical",size:"m"}),Object(V.jsx)("span",null,n?n.weight:0)))))),oe=Object.values(i).map((e=>({value:e,text:_[e]}))),ue=Object.values(c).map((e=>({value:e,text:E[e]}))),pe=({boost:e,index:t,name:a})=>{const{updateBoostSelectOption:i}=Object(A.useActions)(ae);return Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.funtional.functionDropDownLabel",{defaultMessage:"Function"}),fullWidth:!0},Object(V.jsx)(L.EuiSelect,{name:`function-${s.Functional}${t}`,options:oe,value:e.function,onChange:e=>i(a,t,"function",e.target.value),fullWidth:!0})),Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.funtional.operationDropDownLabel",{defaultMessage:"Operation"}),fullWidth:!0},Object(V.jsx)(L.EuiSelect,{name:`operation-${s.Functional}${t}`,options:ue,value:e.operation,onChange:e=>i(a,t,"operation",e.target.value),fullWidth:!0})))},de=({boost:e,index:t,name:a})=>{const{updateBoostSelectOption:i,updateBoostCenter:c}=Object(A.useActions)(ae),l=void 0!==e.center?e.center.toString():"",o=e.function||r.Gaussian,u=Object.values(r).map((e=>({value:e,text:F[e]})));return Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.proximity.functionDropDownLabel",{defaultMessage:"Function"}),fullWidth:!0},Object(V.jsx)(L.EuiSelect,{name:`proximity-${s.Proximity}${t}`,options:u,value:o,onChange:e=>i(a,t,"function",e.target.value),fullWidth:!0})),Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.proximity.centerLabel",{defaultMessage:"Center"}),fullWidth:!0},Object(V.jsx)(L.EuiFieldText,{defaultValue:l,onChange:e=>c(a,t,e.target.value),fullWidth:!0})))};var ge=a(166);const he=({boost:e,index:t,name:a})=>{const{updateBoostValue:n}=Object(A.useActions)(ae),s=e.value;return Object(V.jsx)(ge.a,{initialValues:s,onChange:e=>n(a,t,e),id:`${a}BoostValue-${t}`})},je=({boost:e,index:t,name:a})=>{const{deleteBoost:i,updateBoostFactor:r}=Object(A.useActions)(ae),{type:c}=e;return Object(V.jsx)(L.EuiPanel,{color:"subdued",paddingSize:"none",className:"relevanceTuningAccordionItem"},Object(V.jsx)(L.EuiSpacer,{size:"m"}),(()=>{switch(c){case s.Value:return Object(V.jsx)(he,{boost:e,index:t,name:a});case s.Functional:return Object(V.jsx)(pe,{boost:e,index:t,name:a});case s.Proximity:return Object(V.jsx)(de,{boost:e,index:t,name:a})}})(),Object(V.jsx)(L.EuiSpacer,{size:"m"}),Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.impactLabel",{defaultMessage:"Impact"}),fullWidth:!0},Object(V.jsx)(L.EuiRange,{min:0,max:10,step:.1,value:e.factor,onChange:e=>r(a,t,parseFloat(e.target.value)),showInput:!0,compressed:!0,fullWidth:!0})),Object(V.jsx)(L.EuiButton,{color:"danger",iconType:"cross",size:"s",onClick:()=>i(a,t)},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.deleteBoostButtonLabel",{defaultMessage:"Delete boost"})))},be=({id:e,boost:t,index:a,name:n})=>{const i=Object(I.useMemo)((()=>(e=>e.type===s.Value?e.value?e.value.filter((e=>""!==e.trim())).join(","):"":e.type===s.Proximity?e.function||"":[e.function||"",e.operation||""].join(" ").trim())(t)),[t]);return Object(V.jsx)(L.EuiAccordion,{id:e,className:"boosts__item",buttonContentClassName:"boosts__itemButton",initialIsOpen:!!t.newBoost,buttonContent:Object(V.jsx)(L.EuiFlexGroup,{responsive:!1,alignItems:"center"},Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)(U,{type:t.type})),Object(V.jsx)(L.EuiFlexItem,{grow:!1},m[t.type]),Object(V.jsx)(L.EuiHideFor,{sizes:["xs","s","m","l"]},Object(V.jsx)(L.EuiFlexItem,{className:"eui-textBreakAll"},i)),Object(V.jsx)(L.EuiFlexItem,{grow:!1},Object(V.jsx)(G,null,t.factor))),paddingSize:"s"},Object(V.jsx)(je,{boost:t,index:a,name:n}))};a(869);const me=[{value:"add-boost",inputDisplay:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.addBoostDropDownOptionLabel",{defaultMessage:"Add boost"}),disabled:!0},{value:s.Functional,inputDisplay:Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(U,{type:s.Functional}),j)},{value:s.Proximity,inputDisplay:Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(U,{type:s.Proximity}),h)},{value:s.Value,inputDisplay:Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(U,{type:s.Value}),b)}],xe=({name:e,type:t,boosts:a=[]})=>{const{addBoost:i}=Object(A.useActions)(ae),r=Object(I.useMemo)((()=>me.filter((e=>((e,t)=>!(t===Y.c.Text&&[s.Proximity,s.Functional].includes(e)||t===Y.c.Geolocation&&[s.Functional,s.Value].includes(e)||t===Y.c.Date&&e===s.Functional))(e.value,t)))),[t]);return Object(V.jsx)(L.EuiPanel,{color:"subdued",className:"boosts"},Object(V.jsx)(L.EuiFlexGroup,{responsive:!1,alignItems:"center"},Object(V.jsx)(L.EuiFlexItem,null,Object(V.jsx)(L.EuiTitle,{size:"xxs"},Object(V.jsx)("h4",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.boosts.title",{defaultMessage:"Boosts"})))),Object(V.jsx)(L.EuiFlexItem,null,Object(V.jsx)(L.EuiSuperSelect,{className:"boosts__select",itemClassName:"boostSelectOption",valueOfSelected:"add-boost",options:r,onChange:t=>i(e,t)}))),a.map(((t,a)=>Object(V.jsx)(be,{key:a,id:`boost-${e}-${a}`,boost:t,name:e,index:a}))))},Se=({name:e,type:t,field:a})=>{const{toggleSearchField:s}=Object(A.useActions)(ae),i=t===Y.c.Text;return Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.textSearch.rowLabel",{defaultMessage:"Text search"})},Object(V.jsx)(L.EuiSwitch,{label:i?n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.textSearch.descriptionLabel",{defaultMessage:"Search this field"}):n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.textSearch.warningLabel",{defaultMessage:"Search can only be enabled on text fields"}),onChange:()=>i&&s(e,!!a),checked:!!a,disabled:!i}))},fe=({name:e,field:t})=>{const{updateFieldWeight:a}=Object(A.useActions)(ae);return Object(V.jsx)(L.EuiFormRow,{label:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.weight.label",{defaultMessage:"Weight"})},Object(V.jsx)(L.EuiRange,{min:0,max:10,step:.1,value:t.weight,onChange:t=>a(e,parseFloat(t.target.value)),showInput:!0,compressed:!0,fullWidth:!0}))},Oe=({name:e,type:t,boosts:a,field:n})=>Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiPanel,{hasShadow:!1,className:"relevanceTuningAccordionItem"},Object(V.jsx)(Se,{name:e,type:t,field:n}),n&&Object(V.jsx)(fe,{name:e,field:n})),Object(V.jsx)(xe,{name:e,type:t,boosts:a}));a(874);const ye=()=>{const{filterInputValue:e,schemaFields:t,filteredSchemaFields:a,filteredSchemaFieldsWithConflicts:s,schema:i,searchSettings:r}=Object(A.useValues)(ae),{setFilterValue:c}=Object(A.useActions)(ae);return Object(V.jsx)("section",{className:"relevanceTuningForm"},Object(V.jsx)("form",null,Object(V.jsx)(L.EuiTitle,{size:"m"},Object(V.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.title",{defaultMessage:"Manage fields"}))),Object(V.jsx)(L.EuiSpacer,null),t.length>10&&Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiFieldSearch,{value:e,onChange:e=>c(e.target.value),placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.manageFields.filterPlaceholder",{defaultMessage:"Filter {schemaFieldsLength} fields...",values:{schemaFieldsLength:t.length}}),fullWidth:!0}),Object(V.jsx)(L.EuiSpacer,null)),a.map((e=>Object(V.jsx)(L.EuiPanel,{key:e,hasBorder:!0,className:"relevanceTuningForm__panel"},Object(V.jsx)(L.EuiAccordion,{key:e,id:e,buttonContentClassName:"relevanceTuningForm__item",buttonContent:Object(V.jsx)(le,{name:e,type:i[e].type,boosts:r.boosts&&r.boosts[e],field:r.search_fields[e]}),paddingSize:"s"},Object(V.jsx)(Oe,{name:e,type:i[e].type,boosts:r.boosts&&r.boosts[e],field:r.search_fields[e]}))))),Object(V.jsx)(L.EuiSpacer,null),s.length>0&&Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(L.EuiTitle,{size:"s","data-test-subj":"DisabledFieldsSection"},Object(V.jsx)("h3",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.disabledFields.title",{defaultMessage:"Disabled fields"}))),Object(V.jsx)(L.EuiSpacer,{size:"s"}),s.map((e=>Object(V.jsx)(L.EuiPanel,{key:e,hasBorder:!0,className:"relevanceTuningForm__panel"},Object(V.jsx)(L.EuiTitle,{size:"xs"},Object(V.jsx)("h4",{"data-test-subj":"DisabledField"},e)),Object(V.jsx)(L.EuiHealth,{color:"warning"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.disabledFieldsExplanationMessage",{defaultMessage:"Inactive due to field-type conflict"}))))))))};var ve=a(167);const we=Object(V.jsx)(L.EuiEmptyPrompt,{"data-test-subj":"EmptyQueryPrompt",iconType:"glasses",body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.preview.enterQueryMessage",{defaultMessage:"Enter a query to see search results"})}),Ee=Object(V.jsx)(L.EuiEmptyPrompt,{"data-test-subj":"NoResultsPrompt",body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.preview.noResultsMessage",{defaultMessage:"No matching content found"})}),Ce=()=>{const{setSearchQuery:e}=Object(A.useActions)(ae),{searchResults:t,schema:a}=Object(A.useValues)(ae),{engineName:s,isMetaEngine:i}=Object(A.useValues)(N.a);return Object(V.jsx)(L.EuiPanel,{color:"subdued"},Object(V.jsx)(L.EuiTitle,{size:"m"},Object(V.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.preview.title",{defaultMessage:"Preview"}))),Object(V.jsx)(L.EuiSpacer,null),Object(V.jsx)(L.EuiFieldSearch,{onChange:t=>e(t.target.value),placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.preview.searchPlaceholder",{defaultMessage:"Search {engineName}",values:{engineName:s}}),fullWidth:!0}),!t&&we,t&&0===t.length&&Ee,t&&t.map((e=>Object(V.jsx)(R.a.Fragment,{key:e.id.raw},Object(V.jsx)(L.EuiSpacer,{size:"m"}),Object(V.jsx)(ve.a,{result:e,showScore:!0,isMetaEngine:i,schemaForTypeHighlights:a})))))},Me=()=>{const{dataLoading:e,engineHasSchemaFields:t,unsavedChanges:a,isPrecisionTuningEnabled:s}=Object(A.useValues)(ae),{initializeRelevanceTuning:i,resetSearchSettings:r,updateSearchSettings:c}=Object(A.useActions)(ae),{isElasticsearchEngine:o}=Object(A.useValues)(N.a);Object(I.useEffect)((()=>{i()}),[]);const u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.description",{defaultMessage:"Manage precision and relevance settings for your engine"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.relevanceTuning.elasticsearch.description",{defaultMessage:"Manage relevance settings for your engine"});return Object(V.jsx)(B.a,{pageChrome:Object(N.d)([l]),pageHeader:{pageTitle:l,description:o?p:u,rightSideItems:t?[Object(V.jsx)(L.EuiButton,{"data-test-subj":"SaveRelevanceTuning",color:"primary",fill:!0,onClick:c},D.z),Object(V.jsx)(L.EuiButton,{"data-test-subj":"ResetRelevanceTuning",color:"danger",onClick:r},P.a)]:[]},isLoading:e,isEmptyState:!t,emptyState:Object(V.jsx)(W,null)},Object(V.jsx)(z.a,{hasUnsavedChanges:a}),Object(V.jsx)(ce,null),Object(V.jsx)(L.EuiFlexGroup,{alignItems:"flexStart"},Object(V.jsx)(L.EuiFlexItem,{grow:3},Object(V.jsx)(L.EuiSpacer,{size:"m"}),s&&Object(V.jsx)(R.a.Fragment,null,Object(V.jsx)(se,null),Object(V.jsx)(L.EuiSpacer,null)),Object(V.jsx)(ye,null)),Object(V.jsx)(L.EuiFlexItem,{grow:4},Object(V.jsx)(Ce,null))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return S})),a.d(t,"b",(function(){return ne}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.title",{defaultMessage:"Result Settings"}),i={raw:!0,snippet:!1,snippetFallback:!1},r={raw:!1,snippet:!1,snippetFallback:!1};var c=a(37),l=a(16),o=a(43),u=a(38),p=a(75),d=a(45);const g=(e,t)=>Object.keys(e).reduce(((e,a)=>({...e,[a]:{...t}})),{}),h=e=>{const t={raw:!!e.raw,snippet:!!e.snippet,snippetFallback:!(!e.snippet||"object"!=typeof e.snippet||!e.snippet.fallback)};return e.raw&&"object"==typeof e.raw&&e.raw.size&&(t.rawSize=e.raw.size),e.snippet&&"object"==typeof e.snippet&&e.snippet.size&&(t.snippetSize=e.snippet.size),t},j=e=>{const t={};return e.raw&&(t.raw={},e.rawSize&&(t.raw.size=e.rawSize)),e.snippet&&(t.snippet={},e.snippetFallback&&(t.snippet.fallback=e.snippetFallback),e.snippetSize&&(t.snippet.size=e.snippetSize)),t},b=(e,t)=>Object.entries(e).reduce(((e,[a,n])=>{const s=t[a].type===p.c.Text?"textResultFields":"nonTextResultFields";return{...e,[s]:{...e[s],[a]:n}}}),{textResultFields:{},nonTextResultFields:{}}),m=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.confirmSaveMessage",{defaultMessage:"The changes will start immediately. Make sure your applications are ready to accept the new search results!"}),x=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.confirmResetMessage",{defaultMessage:"Are you sure you want to restore result settings defaults? This will set all fields back to raw with no limits."}),S=Object(c.kea)({path:["enterprise_search","app_search","result_settings_logic"],actions:()=>({initializeResultFields:(e,t,a)=>{const n=((e,t)=>Object.keys(t).reduce(((t,a)=>({...t,[a]:e[a]?h(e[a]):r})),{}))(e,t);return{resultFields:n,schema:t,schemaConflicts:a}},clearAllFields:()=>!0,resetAllFields:()=>!0,updateField:(e,t)=>({fieldName:e,settings:t}),saving:()=>!0,clearRawSizeForField:e=>({fieldName:e}),clearSnippetSizeForField:e=>({fieldName:e}),toggleRawForField:e=>({fieldName:e}),toggleSnippetForField:e=>({fieldName:e}),toggleSnippetFallbackForField:e=>({fieldName:e}),updateRawSizeForField:(e,t)=>({fieldName:e,size:t}),updateSnippetSizeForField:(e,t)=>({fieldName:e,size:t}),initializeResultSettingsData:()=>!0,confirmResetAllFields:()=>!0,saveResultSettings:()=>!0}),reducers:()=>({dataLoading:[!0,{initializeResultFields:()=>!1}],saving:[!1,{initializeResultFields:()=>!1,saving:()=>!0}],resultFields:[{},{initializeResultFields:(e,{resultFields:t})=>t,clearAllFields:e=>g(e,{}),resetAllFields:e=>g(e,i),updateField:(e,{fieldName:t,settings:a})=>e.hasOwnProperty(t)?{...e,[t]:a}:e}],lastSavedResultFields:[{},{initializeResultFields:(e,{resultFields:t})=>t}],schema:[{},{initializeResultFields:(e,{schema:t})=>t}],schemaConflicts:[{},{initializeResultFields:(e,{schemaConflicts:t})=>t||{}}]}),selectors:({selectors:e})=>({validResultFields:[()=>[e.resultFields,e.schema],(e,t)=>Object.entries(e).reduce(((e,[a,n])=>t[a]&&t[a].type!==p.c.Nested?{...e,[a]:n}:e),{})],textResultFields:[()=>[e.validResultFields,e.schema],(e,t)=>{const{textResultFields:a}=b(e,t);return a}],nonTextResultFields:[()=>[e.validResultFields,e.schema],(e,t)=>{const{nonTextResultFields:a}=b(e,t);return a}],isSnippetAllowed:[()=>[e.schema],e=>t=>{var a;return!(null===(a=e[t])||void 0===a||!a.capabilities.snippet)}],serverResultFields:[()=>[e.validResultFields],e=>Object.entries(e).reduce(((e,[t,a])=>({...e,[t]:j(a)})),{})],resultFieldsAtDefaultSettings:[()=>[e.validResultFields],e=>{return t=e,!Object.values(t).find((e=>!Object(l.isEqual)(e,i)));var t}],resultFieldsEmpty:[()=>[e.validResultFields],e=>{return t=e,!Object.values(t).find((e=>e.raw||e.snippet));var t}],stagedUpdates:[()=>[e.lastSavedResultFields,e.resultFields],(e,t)=>!Object(l.isEqual)(e,t)],reducedServerResultFields:[()=>[e.serverResultFields],e=>Object.entries(e).reduce(((e,[t,a])=>((a.raw||a.snippet)&&(e[t]=a),e)),{})],queryPerformanceScore:[()=>[e.serverResultFields,e.schema],(e,t)=>Object.entries(e).reduce(((e,[a,n])=>{let s=e;return n.raw&&(t[a].type!==p.c.Text?s+=.2:"object"==typeof n.raw&&n.raw.size&&n.raw.size<=250?s+=1:s+=1.5),n.snippet&&(s+=2),s}),0)]}),listeners:({actions:e,values:t})=>({clearRawSizeForField:({fieldName:a})=>{e.updateField(a,Object(l.omit)(t.resultFields[a],["rawSize"]))},clearSnippetSizeForField:({fieldName:a})=>{e.updateField(a,Object(l.omit)(t.resultFields[a],["snippetSize"]))},toggleRawForField:({fieldName:a})=>{const n=t.resultFields[a],s=!n.raw;e.updateField(a,{...Object(l.omit)(n,["rawSize"]),raw:s,...s&&n.rawSize?{rawSize:n.rawSize}:{}})},toggleSnippetForField:({fieldName:a})=>{const n=t.resultFields[a],s=!n.snippet;e.updateField(a,{...Object(l.omit)(n,["snippetSize"]),snippet:s,...s?{snippetSize:100}:{snippetFallback:!1}})},toggleSnippetFallbackForField:({fieldName:a})=>{const n=t.resultFields[a];e.updateField(a,{...n,snippetFallback:!n.snippetFallback})},updateRawSizeForField:({fieldName:a,size:n})=>{e.updateField(a,{...t.resultFields[a],rawSize:n})},updateSnippetSizeForField:({fieldName:a,size:n})=>{e.updateField(a,{...t.resultFields[a],snippetSize:n})},initializeResultSettingsData:async()=>{const{http:t}=u.a.values,{engineName:a}=d.a.values,n=`/internal/app_search/engines/${a}/result_settings/details`;try{const{schema:a,schemaConflicts:s,searchSettings:{result_fields:i}}=await t.get(n);e.initializeResultFields(i,a,s)}catch(e){Object(o.e)(e)}},confirmResetAllFields:()=>{window.confirm(x)&&e.resetAllFields()},saveResultSettings:async()=>{if(window.confirm(m)){e.saving();const{http:a}=u.a.values,{engineName:s}=d.a.values,i=`/internal/app_search/engines/${s}/result_settings`;e.saving();try{const s=await a.put(i,{body:JSON.stringify({result_fields:t.reducedServerResultFields})});e.initializeResultFields(s.result_fields,t.schema),Object(o.g)(n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.saveSuccessMessage",{defaultMessage:"Result settings were saved"}))}catch(e){Object(o.e)(e)}}}})});var f=a(11),O=a.n(f),y=a(13),v=a(42),w=a(93),E=a(239),C=a(53),M=a(48),k=a(12);const T=()=>Object(k.jsx)(y.EuiEmptyPrompt,{iconType:"gear",title:Object(k.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.empty.title",{defaultMessage:"Add documents to adjust settings"})),body:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.empty.description",{defaultMessage:"A schema will be automatically created for you after you index some documents."}),actions:Object(k.jsx)(y.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:M.S},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.empty.buttonLabel",{defaultMessage:"Read the result settings guide"}))}),F=()=>Object(k.jsx)(y.EuiTableHeader,{className:"resultSettingsTable__columnLabels"},Object(k.jsx)(y.EuiTableHeaderCell,{align:"left"}),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center",colSpan:2},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.rawTitle",{defaultMessage:"Raw"}),Object(k.jsx)(y.EuiIconTip,{position:"top",content:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.rawTooltip",{defaultMessage:"A raw field is an exact representation of a field value. Must be at least 20 characters. Defaults to the entire field."})})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center",colSpan:3},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.highlightingTitle",{defaultMessage:"Highlighting"}),Object(k.jsx)(y.EuiIconTip,{position:"top",content:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.highlightingTooltip",{defaultMessage:"A snippet is an escaped representaiton of a field value. Query matches are encapsulated in <em> tags for highlighting. Fallback will look for a snippet match, but fallback to an escaped raw value if none is found. Range is between 20-1000. Defaults to 100."})}))),_=()=>{const{schemaConflicts:e}=Object(c.useValues)(S);return Object(k.jsx)(O.a.Fragment,null,Object.keys(e).map((e=>Object(k.jsx)(y.EuiTableRow,{key:e},Object(k.jsx)(y.EuiTableRowCell,{colSpan:6},Object(k.jsx)(y.EuiText,{size:"s","data-test-subj":"ResultSettingFieldName"},Object(k.jsx)("code",null,e)),Object(k.jsx)(y.EuiHealth,{color:"warning"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.fieldTypeConflictText",{defaultMessage:"Field-type conflict"})))))))},I=()=>Object(k.jsx)(y.EuiTableRow,null,Object(k.jsx)(y.EuiTableHeaderCell,{align:"left",colSpan:5},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.disabledFieldsTitle",{defaultMessage:"Disabled fields"}))),R=()=>{const{nonTextResultFields:e}=Object(c.useValues)(S),{toggleRawForField:t}=Object(c.useActions)(S),a=Object(f.useMemo)((()=>Object.entries(e).sort((([e],[t])=>e>t?1:-1))),[e]);return Object(k.jsx)(O.a.Fragment,null,a.map((([e,a])=>Object(k.jsx)(y.EuiTableRow,{key:e},Object(k.jsx)(y.EuiTableRowCell,{"data-test-subj":"ResultSettingFieldName"},Object(k.jsx)("code",null,e)),Object(k.jsx)(y.EuiTableRowCellCheckbox,null,Object(k.jsx)(y.EuiCheckbox,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.rawAriaLabel",{defaultMessage:"Toggle raw field"}),"data-test-subj":"ResultSettingRawCheckBox",id:`${e}-raw}`,checked:!!a.raw,onChange:()=>{t(e)}})),Object(k.jsx)(y.EuiTableRowCell,{colSpan:4,"aria-hidden":!0})))))},A=()=>Object(k.jsx)(y.EuiTableRow,null,Object(k.jsx)(y.EuiTableHeaderCell,{align:"left"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.nonTextFieldsTitle",{defaultMessage:"Non-text fields"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.rawTitle",{defaultMessage:"Raw"})),Object(k.jsx)(y.EuiTableHeaderCell,{colSpan:4,"aria-hidden":!0})),L=(e,t,a,n)=>{"number"!=typeof t||isNaN(t)?n(e):a(e,t)},D=(e,t,a)=>n=>{const s=parseInt(n.target.value,10);L(e,s,t,a)},z=(e,t,a)=>n=>{let s=parseInt(n.target.value,10);isNaN(s)||(s=Math.min(1e3,Math.max(20,s))),L(e,s,t,a)},P=({fieldSettings:e,fieldName:t,fieldEnabledProperty:a,fieldSizeProperty:s,updateAction:i,clearAction:r})=>Object(k.jsx)(y.EuiFieldNumber,{value:"number"==typeof e[s]?e[s]:" ",placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.numberFieldPlaceholder",{defaultMessage:"No limit"}),disabled:!e[a],min:20,max:1e3,onChange:D(t,i,r),onBlur:z(t,i,r),size:4}),N=()=>{const{isSnippetAllowed:e,textResultFields:t}=Object(c.useValues)(S),{toggleRawForField:a,updateRawSizeForField:s,clearRawSizeForField:i,toggleSnippetForField:r,updateSnippetSizeForField:l,clearSnippetSizeForField:o,toggleSnippetFallbackForField:u}=Object(c.useActions)(S),p=Object(f.useMemo)((()=>Object.entries(t).sort((([e],[t])=>e>t?1:-1))),[t]);return Object(k.jsx)(O.a.Fragment,null,p.map((([t,c])=>Object(k.jsx)(y.EuiTableRow,{key:t},Object(k.jsx)(y.EuiTableRowCell,{"data-test-subj":"ResultSettingFieldName"},Object(k.jsx)("code",null,t)),Object(k.jsx)(y.EuiTableRowCellCheckbox,null,Object(k.jsx)(y.EuiCheckbox,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.rawAriaLabel",{defaultMessage:"Toggle raw field"}),"data-test-subj":"ResultSettingRawCheckBox",id:`${t}-raw}`,checked:!!c.raw,onChange:()=>{a(t)}})),Object(k.jsx)(y.EuiTableRowCell,{align:"center",textOnly:!1},Object(k.jsx)(P,{fieldName:t,fieldEnabledProperty:"raw",fieldSizeProperty:"rawSize",fieldSettings:c,updateAction:s,clearAction:i})),Object(k.jsx)(y.EuiTableRowCellCheckbox,null,Object(k.jsx)(y.EuiCheckbox,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.snippetAriaLabel",{defaultMessage:"Toggle text snippet"}),"data-test-subj":"ResultSettingSnippetTextBox",id:`${t}-snippet}`,checked:!!c.snippet,disabled:!e(t),onChange:()=>{r(t)}})),Object(k.jsx)(y.EuiTableRowCellCheckbox,null,Object(k.jsx)(y.EuiCheckbox,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.snippetFallbackAriaLabel",{defaultMessage:"Toggle snippet fallback"}),"data-test-subj":"ResultSettingFallbackTextBox",id:`${t}-snippetFallback}`,checked:c.snippetFallback,disabled:!c.snippet,onChange:()=>{u(t)}})),Object(k.jsx)(y.EuiTableRowCell,{align:"center",textOnly:!1},Object(k.jsx)(P,{fieldName:t,fieldEnabledProperty:"snippet",fieldSizeProperty:"snippetSize",fieldSettings:c,updateAction:l,clearAction:o}))))))},B=()=>Object(k.jsx)(O.a.Fragment,null,Object(k.jsx)(y.EuiTableRow,{className:"resultSettingsTable__subHeader"},Object(k.jsx)(y.EuiTableHeaderCell,{align:"left"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.textFieldsTitle",{defaultMessage:"Text fields"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.rawTitle",{defaultMessage:"Raw"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center",width:"115"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.maxSizeTitle",{defaultMessage:"Max size"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.snippetTitle",{defaultMessage:"Snippet"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.fallbackTitle",{defaultMessage:"Fallback"})),Object(k.jsx)(y.EuiTableHeaderCell,{align:"center",width:"115"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.table.column.maxSizeTitle",{defaultMessage:"Max size"}))));a(879);const V=()=>{const{schemaConflicts:e,textResultFields:t,nonTextResultFields:a}=Object(c.useValues)(S);return Object(k.jsx)(y.EuiTable,{className:"resultSettingsTable",responsive:!1},Object(k.jsx)(F,null),!!Object.keys(t).length&&Object(k.jsx)(y.EuiTableBody,null,Object(k.jsx)(B,null),Object(k.jsx)(N,null)),!!Object.keys(a).length&&Object(k.jsx)(y.EuiTableBody,{className:"resultSettingsTable__subHeader"},Object(k.jsx)(A,null),Object(k.jsx)(R,null)),!!Object.keys(e).length&&Object(k.jsx)(y.EuiTableBody,{className:"resultSettingsTable__subHeader"},Object(k.jsx)(I,null),Object(k.jsx)(_,null)))};var U;!function(e){e.Optimal="Optimal",e.Good="Good",e.Standard="Standard",e.Delayed="Delayed"}(U||(U={}));const H=e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.queryPerformanceLabel",{defaultMessage:"Query performance: {performanceValue}",values:{performanceValue:e}}),q=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.queryPerformance.optimalValue",{defaultMessage:"optimal"}),G=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.queryPerformance.goodValue",{defaultMessage:"good"}),$=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.queryPerformance.standardValue",{defaultMessage:"standard"}),W=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.queryPerformance.delayedValue",{defaultMessage:"delayed"}),Q={[U.Optimal]:H(q),[U.Good]:H(G),[U.Standard]:H($),[U.Delayed]:H(W)},J={[U.Optimal]:"#59deb4",[U.Good]:"#40bfff",[U.Standard]:"#fed566",[U.Delayed]:"#ff9173"},K=()=>{const{queryPerformanceScore:e}=Object(c.useValues)(S),t=(e=>{switch(!0){case e<6:return U.Optimal;case e<11:return U.Good;case e<21:return U.Standard;default:return U.Delayed}})(e);return Object(k.jsx)(y.EuiBadge,{role:"region","aria-live":"polite",color:J[t]},Q[t])},Y=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.sampleResponse.noResultsMessage",{defaultMessage:"No results."}),Z=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.sampleResponse.errorMessage",{defaultMessage:"An error occured."}),X=Object(c.kea)({path:["enterprise_search","app_search","sample_response_logic"],actions:{queryChanged:e=>({query:e}),getSearchResultsSuccess:e=>({response:e}),getSearchResultsFailure:e=>({response:e}),getSearchResults:(e,t)=>({query:e,resultFields:t})},reducers:{query:["",{queryChanged:(e,{query:t})=>t}],response:[null,{getSearchResultsSuccess:(e,{response:t})=>t,getSearchResultsFailure:(e,{response:t})=>t}]},listeners:({actions:e})=>({getSearchResults:async({query:t,resultFields:a},n)=>{await n(250);const{http:s}=u.a.values,{engineName:i}=d.a.values,r=`/internal/app_search/engines/${i}/search`;try{var c;const n=null===(c=(await s.post(r,{query:{query:t},body:JSON.stringify({page:{size:1,current:1},result_fields:a})})).results)||void 0===c?void 0:c[0];e.getSearchResultsSuccess(n?{...n,_meta:void 0}:Y)}catch(t){var l;t.response.status>=500?(Object(o.e)(t),e.getSearchResultsFailure(Z)):e.getSearchResultsFailure((null===(l=t.body)||void 0===l?void 0:l.attributes)||Z)}}})}),ee=()=>{const{reducedServerResultFields:e}=Object(c.useValues)(S),{query:t,response:a}=Object(c.useValues)(X),{queryChanged:s,getSearchResults:i}=Object(c.useActions)(X);return Object(f.useEffect)((()=>{i(t,e)}),[t,e]),Object(k.jsx)(y.EuiPanel,{hasBorder:!0},Object(k.jsx)(y.EuiFlexGroup,{alignItems:"center"},Object(k.jsx)(y.EuiFlexItem,null,Object(k.jsx)(y.EuiTitle,{size:"s"},Object(k.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.sampleResponseTitle",{defaultMessage:"Sample response"})))),Object(k.jsx)(y.EuiFlexItem,{grow:!1},Object(k.jsx)(K,null))),Object(k.jsx)(y.EuiSpacer,null),Object(k.jsx)(y.EuiFieldSearch,{value:t,onChange:e=>s(e.target.value),placeholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.sampleResponse.inputPlaceholder",{defaultMessage:"Type a search query to test a response..."}),"data-test-subj":"ResultSettingsQuerySampleResponse"}),Object(k.jsx)(y.EuiSpacer,null),!!a&&Object(k.jsx)(y.EuiCodeBlock,{language:"json",whiteSpace:"pre-wrap"},"string"==typeof a?a:JSON.stringify(a,null,2)))},te=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.clearButtonLabel",{defaultMessage:"Clear all values"}),ae=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.unsavedChangesMessage",{defaultMessage:"Result Settings have not been saved. Are you sure you want to leave?"}),ne=()=>{const{dataLoading:e,schema:t,stagedUpdates:a,resultFieldsAtDefaultSettings:i,resultFieldsEmpty:r}=Object(c.useValues)(S),{initializeResultSettingsData:l,saveResultSettings:o,confirmResetAllFields:u,clearAllFields:p}=Object(c.useActions)(S);Object(f.useEffect)((()=>{l()}),[]);const g=Object.keys(t).length>0;return Object(k.jsx)(C.a,{pageChrome:Object(d.d)([s]),pageHeader:{pageTitle:s,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.resultSettings.pageDescription",{defaultMessage:"Enrich search results and select which fields will appear."}),rightSideItems:g?[Object(k.jsx)(y.EuiButton,{"data-test-subj":"SaveResultSettings",color:"primary",fill:!0,onClick:o,disabled:r||!a},v.z),Object(k.jsx)(y.EuiButton,{"data-test-subj":"ResetResultSettings",color:"danger",onClick:u,disabled:i},E.a),Object(k.jsx)(y.EuiButtonEmpty,{"data-test-subj":"ClearResultSettings",onClick:p},te)]:[]},isLoading:e,isEmptyState:!g,emptyState:Object(k.jsx)(T,null)},Object(k.jsx)(w.a,{hasUnsavedChanges:a,messageText:ae}),Object(k.jsx)(y.EuiFlexGroup,{alignItems:"flexStart"},Object(k.jsx)(y.EuiFlexItem,{grow:5},Object(k.jsx)(V,null)),Object(k.jsx)(y.EuiFlexItem,{grow:3},Object(k.jsx)(ee,null))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return H}));var n=a(2);const s=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.title",{defaultMessage:"Schema"}),i=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.updateSchemaSuccessMessage",{defaultMessage:"Schema updated"});var r=a(11),c=a.n(r),l=a(37),o=a(54),u=a(48),p=a(45),d=a(15),g=a(92),h=a(53),j=a(43),b=a(38);const m=Object(l.kea)({path:["enterprise_search","app_search","reindex_job_logic"],actions:{loadReindexJob:e=>e,onLoadSuccess:e=>e,onLoadError:!0},reducers:{dataLoading:[!0,{loadReindexJob:()=>!0,onLoadSuccess:()=>!1,onLoadError:()=>!1}],fieldCoercionErrors:[{},{onLoadSuccess:(e,{fieldCoercionErrors:t})=>t}]},listeners:({actions:e})=>({loadReindexJob:async t=>{const{http:a}=b.a.values,{engineName:n}=p.a.values;try{const s=await a.get(`/internal/app_search/engines/${n}/reindex_job/${t}`);e.onLoadSuccess(s)}catch(t){Object(j.e)(t),e.onLoadError()}}})});var x=a(12);const S=()=>{const{reindexJobId:e}=Object(d.useParams)(),{loadReindexJob:t}=Object(l.useActions)(m),{dataLoading:a,fieldCoercionErrors:i}=Object(l.useValues)(m),{engine:{schema:c}}=Object(l.useValues)(p.a);return Object(r.useEffect)((()=>{t(e)}),[e]),Object(x.jsx)(h.a,{pageChrome:Object(p.d)([s,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.reindexErrorsBreadcrumb",{defaultMessage:"Reindex errors"})]),pageHeader:{pageTitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.reindexJob.title",{defaultMessage:"Schema change errors"})},isLoading:a},Object(x.jsx)(g.b,{fieldCoercionErrors:i,schema:c,generateViewPath:e=>Object(p.c)(u.B,{documentId:e})}))};var f=a(13),O=a(57),y=a(44),v=a(16);const w=Object(l.kea)({path:["enterprise_search","app_search","schema_base_logic"],actions:{loadSchema:!0,onSchemaLoad:e=>e,setSchema:e=>({schema:e})},reducers:{dataLoading:[!0,{loadSchema:()=>!0,onSchemaLoad:()=>!1}],schema:[{},{onSchemaLoad:(e,{schema:t})=>t,setSchema:(e,{schema:t})=>t}]},listeners:({actions:e})=>({loadSchema:async()=>{const{http:t}=b.a.values,{engineName:a}=p.a.values;try{const n=await t.get(`/internal/app_search/engines/${a}/schema`);e.onSchemaLoad(n)}catch(e){Object(j.e)(e)}}})}),E=Object(l.kea)({path:["enterprise_search","app_search","schema_logic"],connect:{values:[w,["dataLoading","schema"]],actions:[w,["loadSchema","onSchemaLoad","setSchema"]]},actions:{addSchemaField:(e,t)=>({fieldName:e,fieldType:t}),updateSchemaFieldType:(e,t)=>({fieldName:e,fieldType:t}),updateSchema:e=>e,onSchemaUpdateError:!0,openModal:!0,closeModal:!0},reducers:{isUpdating:[!1,{updateSchema:()=>!0,onSchemaLoad:()=>!1,onSchemaUpdateError:()=>!1}],cachedSchema:[{},{onSchemaLoad:(e,{schema:t})=>t}],mostRecentIndexJob:[{},{onSchemaLoad:(e,{mostRecentIndexJob:t})=>t}],unconfirmedFields:[[],{onSchemaLoad:(e,{unconfirmedFields:t})=>t}],incompleteFields:[[],{onSchemaLoad:(e,{incompleteFields:t})=>t}],hasNewUnsearchedFields:[!1,{onSchemaLoad:(e,{unsearchedUnconfirmedFields:t})=>t}],isModalOpen:[!1,{openModal:()=>!0,closeModal:()=>!1,onSchemaLoad:()=>!1,onSchemaUpdateError:()=>!1}]},selectors:{hasSchema:[e=>[e.cachedSchema],e=>Object.keys(e).length>0],hasSchemaChanged:[e=>[e.schema,e.cachedSchema],(e,t)=>!Object(v.isEqual)(e,t)],hasUnconfirmedFields:[e=>[e.unconfirmedFields],e=>e.length>0],hasIncompleteFields:[e=>[e.incompleteFields],e=>e.length>0]},listeners:({actions:e,values:t})=>({addSchemaField:({fieldName:a,fieldType:s})=>{if(t.schema.hasOwnProperty(a))Object(j.i)((e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.addSchemaErrorMessage",{defaultMessage:"Field name already exists: {fieldName}",values:{fieldName:e}}))(a)),e.closeModal();else{const i={...t.schema};i[a]=s,e.setSchema(i),e.updateSchema((e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.addSchemaSuccessMessage",{defaultMessage:"New field added: {fieldName}",values:{fieldName:e}}))(a))}},updateSchemaFieldType:({fieldName:a,fieldType:n})=>{const s={...t.schema};s[a]=n,e.setSchema(s)},updateSchema:async a=>{const{schema:n}=t,{http:s}=b.a.values,{engineName:r}=p.a.values;Object(j.d)();try{const t=await s.post(`/internal/app_search/engines/${r}/schema`,{body:JSON.stringify(n)});e.onSchemaLoad(t),Object(j.g)(a||i)}catch(a){Object(j.e)(a),e.onSchemaUpdateError(),e.setSchema(t.cachedSchema)}finally{p.a.actions.initializeEngine()}}})}),C=()=>{const{myRole:{canManageEngines:e}}=Object(l.useValues)(O.a),{hasUnconfirmedFields:t,hasNewUnsearchedFields:a,mostRecentIndexJob:{hasErrors:n,activeReindexJobId:s},hasIncompleteFields:i}=Object(l.useValues)(E);return Object(x.jsx)(c.a.Fragment,null,n&&Object(x.jsx)(c.a.Fragment,null,Object(x.jsx)(g.c,{viewErrorsPath:Object(p.c)(u.D,{reindexJobId:s})}),Object(x.jsx)(f.EuiSpacer,null)),t&&e&&Object(x.jsx)(c.a.Fragment,null,a?Object(x.jsx)(M,null):Object(x.jsx)(k,null),Object(x.jsx)(f.EuiSpacer,null)),i&&Object(x.jsx)(c.a.Fragment,null,Object(x.jsx)(F,null),Object(x.jsx)(f.EuiSpacer,null)))},M=()=>Object(x.jsx)(f.EuiCallOut,{iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unsearchedFields.title",{defaultMessage:"Recently added fields are not being searched by default"}),"data-test-subj":"schemaUnsearchedUnconfirmedFieldsCallout"},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unsearchedFields.description",{defaultMessage:"If these new fields should be searchable, update your search settings to include them. If you want them to remain unsearchable, confirm your new field types to dismiss this alert."})),Object(x.jsx)(f.EuiFlexGroup,{gutterSize:"s",responsive:!1},Object(x.jsx)(f.EuiFlexItem,{grow:!1},Object(x.jsx)(y.b,{fill:!0,size:"s",to:Object(p.c)(u.E),"data-test-subj":"relevanceTuningButtonLink"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unsearchedFields.searchSettingsButtonLabel",{defaultMessage:"Update search settings"}))),Object(x.jsx)(f.EuiFlexItem,{grow:!1},Object(x.jsx)(T,null)))),k=()=>Object(x.jsx)(f.EuiCallOut,{iconType:"iInCircle",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unconfirmedFields.title",{defaultMessage:"You've recently added new schema fields"}),"data-test-subj":"schemaUnconfirmedFieldsCallout"},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unconfirmedFields.description",{defaultMessage:"Set your new schema field(s) to their correct or expected types, and then confirm your field types."})),Object(x.jsx)(T,null)),T=()=>{const{updateSchema:e}=Object(l.useActions)(E),{isUpdating:t}=Object(l.useValues)(E);return Object(x.jsx)(f.EuiButton,{size:"s",isLoading:t,onClick:()=>e(),"data-test-subj":"confirmSchemaTypesButton"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.confirmSchemaButtonLabel",{defaultMessage:"Confirm types"}))},F=()=>{const{incompleteFields:e}=Object(l.useValues)(E);return Object(x.jsx)(f.EuiCallOut,{iconType:"warning",color:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.incompleteFields.title",{defaultMessage:"{count, plural, one {A field is} other {# fields are}} missing subfields",values:{count:e.length}})},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.incompleteFields.description",{defaultMessage:"Some fields are missing one or more subfields used by App Search. Some search features may not work until those subfields are added."})," "),Object(x.jsx)(f.EuiLink,{href:"https://www.elastic.co/guide/en/app-search/current/elasticsearch-engines-text-subfields-support-conventions.html","data-test-subj":"missingSubfieldsLearnMoreLink",target:"_blank"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.incompleteFields.link",{defaultMessage:"Learn more."})))};var _=a(159);const I=()=>{const{myRole:{canManageEngines:e}}=Object(l.useValues)(O.a),{schema:t,unconfirmedFields:a,incompleteFields:s}=Object(l.useValues)(E),{updateSchemaFieldType:i}=Object(l.useActions)(E),{isElasticsearchEngine:r}=Object(l.useValues)(p.a);return Object(x.jsx)(f.EuiTable,{tableLayout:"auto"},Object(x.jsx)(f.EuiTableHeader,null,Object(x.jsx)(f.EuiTableHeaderCell,null,_.a),Object(x.jsx)(f.EuiTableHeaderCell,{"aria-hidden":!0}),Object(x.jsx)(f.EuiTableHeaderCell,{align:"right",id:"schemaFieldType"},_.b)),Object(x.jsx)(f.EuiTableBody,null,Object(x.jsx)(f.EuiTableRow,{style:{height:56}},Object(x.jsx)(f.EuiTableRowCell,null,Object(x.jsx)(f.EuiText,{color:"subdued"},Object(x.jsx)("code",null,"id"))),Object(x.jsx)(f.EuiTableRowCell,{"aria-hidden":!0}),Object(x.jsx)(f.EuiTableRowCell,{align:"right"})),Object.entries(t).map((([t,c])=>{const l=a.includes(t),o="text"===c&&s.includes(t);return Object(x.jsx)(f.EuiTableRow,{key:t},Object(x.jsx)(f.EuiTableRowCell,null,Object(x.jsx)("code",null,t)),l&&Object(x.jsx)(f.EuiTableRowCell,{align:"right"},Object(x.jsx)(f.EuiHealth,{color:"success"},Object(x.jsx)(f.EuiText,{color:"subdued",size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.unconfirmedFieldLabel",{defaultMessage:"Recently added"})))),o&&Object(x.jsx)(f.EuiTableRowCell,{align:"right"},Object(x.jsx)(f.EuiHealth,{color:"warning"},Object(x.jsx)(f.EuiText,{color:"subdued",size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.missingSubfieldsLabel",{defaultMessage:"Missing subfields"})))),!(l||o)&&Object(x.jsx)(f.EuiTableRowCell,{"aria-hidden":!0}),Object(x.jsx)(f.EuiTableRowCell,{align:"right",width:150},Object(x.jsx)(g.d,{fieldName:t,fieldType:c,disabled:!e||r,updateExistingFieldType:i,"aria-labelledby":"schemaFieldType"})))}))))},R=()=>{const{isModalOpen:e}=Object(l.useValues)(E),{addSchemaField:t,closeModal:a}=Object(l.useActions)(E);return Object(x.jsx)(c.a.Fragment,null,Object(x.jsx)(f.EuiEmptyPrompt,{iconType:"database",title:Object(x.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.empty.title",{defaultMessage:"Create a schema"})),body:Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.empty.description",{defaultMessage:"Create schema fields in advance, or index some documents and a schema will be created for you."})),actions:Object(x.jsx)(f.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:u.L},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.empty.buttonLabel",{defaultMessage:"Read the indexing schema guide"}))}),e&&Object(x.jsx)(g.a,{addNewField:t,closeAddFieldModal:a}))};var A=a(84);const L=Object(l.kea)({path:["enterprise_search","app_search","meta_engine_schema_logic"],connect:{values:[w,["dataLoading","schema"]],actions:[w,["loadSchema","onSchemaLoad"]]},reducers:{fields:[{},{onSchemaLoad:(e,{fields:t})=>t}],conflictingFields:[{},{onSchemaLoad:(e,{conflictingFields:t})=>t}]},selectors:{conflictingFieldsCount:[e=>[e.conflictingFields],e=>Object.keys(e).length],hasConflicts:[e=>[e.conflictingFieldsCount],e=>e>0]}}),D=()=>{const{schema:e,fields:t}=Object(l.useValues)(L);return Object(x.jsx)(f.EuiTable,{tableLayout:"auto"},Object(x.jsx)(f.EuiTableHeader,null,Object(x.jsx)(f.EuiTableHeaderCell,null,_.a),Object(x.jsx)(f.EuiTableHeaderCell,null,A.a),Object(x.jsx)(f.EuiTableHeaderCell,{align:"right"},_.b)),Object(x.jsx)(f.EuiTableBody,null,Object(x.jsx)(f.EuiTableRow,null,Object(x.jsx)(f.EuiTableRowCell,null,Object(x.jsx)(f.EuiText,{color:"subdued"},Object(x.jsx)("code",null,"id"))),Object(x.jsx)(f.EuiTableRowCell,null,Object(x.jsx)(f.EuiText,{color:"subdued",size:"s"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.allEngines",{defaultMessage:"All"}))),Object(x.jsx)(f.EuiTableRowCell,{"aria-hidden":!0})),Object.keys(t).map((a=>{const n=e[a],s=t[a][n];return Object(x.jsx)(f.EuiTableRow,{key:a},Object(x.jsx)(f.EuiTableRowCell,{"data-test-subj":"fieldName"},Object(x.jsx)("code",null,a)),Object(x.jsx)(f.EuiTableRowCell,{"data-test-subj":"engines"},Object(x.jsx)(N,{engines:s})),Object(x.jsx)(f.EuiTableRowCell,{align:"right","data-test-subj":"fieldType"},n))}))))},z=()=>{const{conflictingFields:e}=Object(l.useValues)(L);return Object(x.jsx)(f.EuiTable,{tableLayout:"auto"},Object(x.jsx)(f.EuiTableHeader,null,Object(x.jsx)(f.EuiTableHeaderCell,null,_.a),Object(x.jsx)(f.EuiTableHeaderCell,null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.fieldTypeConflicts",{defaultMessage:"Field type conflicts"})),Object(x.jsx)(f.EuiTableHeaderCell,null,A.a)),Object(x.jsx)(f.EuiTableBody,null,Object.entries(e).map((([e,t])=>Object.entries(t).map((([a,n],s)=>{const i=0===s;return Object(x.jsx)(f.EuiTableRow,{key:`${e}-${a}`},i&&Object(x.jsx)(f.EuiTableRowCell,{rowSpan:Object.values(t).length,"data-test-subj":"fieldName"},Object(x.jsx)("code",null,e)),Object(x.jsx)(f.EuiTableRowCell,{"data-test-subj":"fieldTypes"},a),Object(x.jsx)(f.EuiTableRowCell,{"data-test-subj":"enginesPerFieldType"},Object(x.jsx)(N,{engines:n,cutoff:2})))}))))))};var P=a(79);const N=({engines:e,cutoff:t=3})=>{if(null==e||!e.length)return null;const a=e.slice(0,t),n=e.slice(t),s=", ";return Object(x.jsx)(f.EuiText,{size:"s"},a.map(((e,t)=>{const n=t===a.length-1;return Object(x.jsx)(r.Fragment,{key:e},Object(x.jsx)(y.d,{to:Object(P.a)(u.G,{engineName:e}),"data-test-subj":"displayedEngine"},e),n?"":s)})),n.length>0&&Object(x.jsx)(c.a.Fragment,null,s,Object(x.jsx)(f.EuiToolTip,{position:"bottom",content:n.join(s),"data-test-subj":"hiddenEnginesTooltip"},Object(x.jsx)(f.EuiButtonEmpty,{size:"xs",flush:"both"},"+",n.length))))},B=()=>{const{myRole:{canManageEngines:e}}=Object(l.useValues)(O.a),{loadSchema:t,updateSchema:a,addSchemaField:i,openModal:c,closeModal:o}=Object(l.useActions)(E),{dataLoading:u,isUpdating:d,hasSchema:j,hasSchemaChanged:b,isModalOpen:m}=Object(l.useValues)(E),{isElasticsearchEngine:S}=Object(l.useValues)(p.a);Object(r.useEffect)((()=>{t()}),[]);const y=[Object(x.jsx)(f.EuiButton,{fill:!0,disabled:!b,isLoading:d,onClick:()=>a(),"data-test-subj":"updateSchemaButton"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.updateSchemaButtonLabel",{defaultMessage:"Save changes"})),Object(x.jsx)(f.EuiButton,{color:"success",iconType:"plusInCircle",disabled:d,onClick:c,"data-test-subj":"addSchemaFieldModalButton"},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.createSchemaFieldButtonLabel",{defaultMessage:"Create a schema field"}))],v={pageTitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.pageTitle",{defaultMessage:"Manage engine schema"}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.pageDescription",{defaultMessage:"Add new fields or change the types of existing ones."}),rightSideItems:e?y:[]},w={pageTitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.readOnly.pageTitle",{defaultMessage:"Engine schema"}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.readOnly.pageDescription",{defaultMessage:"View schema field types."})};return Object(x.jsx)(h.a,{pageChrome:Object(p.d)([s]),pageHeader:S?w:v,isLoading:u,isEmptyState:!j,emptyState:Object(x.jsx)(R,null)},Object(x.jsx)(C,null),Object(x.jsx)(I,null),m&&Object(x.jsx)(g.a,{addNewField:i,closeAddFieldModal:o}))};var V=a(68);const U=()=>{const{loadSchema:e}=Object(l.useActions)(L),{dataLoading:t,hasConflicts:a,conflictingFieldsCount:i}=Object(l.useValues)(L);return Object(r.useEffect)((()=>{e()}),[]),Object(x.jsx)(h.a,{pageChrome:Object(p.d)([s]),pageHeader:{pageTitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.title",{defaultMessage:"Meta engine schema"}),description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.description",{defaultMessage:"Active and inactive fields, by engine."})},isLoading:t},a&&Object(x.jsx)(c.a.Fragment,null,Object(x.jsx)(f.EuiCallOut,{iconType:"warning",color:"warning",title:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.conflictsCalloutTitle",{defaultMessage:"{conflictingFieldsCount, plural, one {# field is} other {# fields are}} not searchable",values:{conflictingFieldsCount:i}})},Object(x.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.conflictsCalloutDescription",{defaultMessage:"The field(s) have an inconsistent field-type across the source engines that make up this meta engine. Apply a consistent field-type from the source engines to make these fields searchable."}))),Object(x.jsx)(f.EuiSpacer,null)),Object(x.jsx)(V.a,{hasBorder:!0,title:Object(x.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.activeFieldsTitle",{defaultMessage:"Active fields"})),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.activeFieldsDescription",{defaultMessage:"Fields which belong to one or more engine."})},Object(x.jsx)(D,null)),Object(x.jsx)(f.EuiSpacer,null),a&&Object(x.jsx)(V.a,{hasBorder:!0,title:Object(x.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.inactiveFieldsTitle",{defaultMessage:"Inactive fields"})),subtitle:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.schema.metaEngine.inactiveFieldsDescription",{defaultMessage:"These fields have type conflicts. To activate these fields, change types in the source engines to match."})},Object(x.jsx)(z,null)))},H=()=>{const{isMetaEngine:e}=Object(l.useValues)(p.a);return Object(x.jsx)(o.c,null,Object(x.jsx)(o.a,{path:u.D},Object(x.jsx)(S,null)),Object(x.jsx)(o.a,null,e?Object(x.jsx)(U,null):Object(x.jsx)(B,null)))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return K})),a.d(t,"c",(function(){return Z.a}));var n=a(11),s=a.n(n),i=a(15),r=a(37),c=a(13),l=a(2),o=a(80),u=a(44),p=a(48),d=a(45),g=a(315),h=a.n(g),j=a(12);const b=({isFlyout:e=!1,disabled:t=!1})=>{const{openDocumentCreation:a}=Object(r.useActions)(Z.a),{search:g}=Object(i.useLocation)(),{method:b}=Object(o.a)(g);Object(n.useEffect)((()=>{switch(b){case"json":a("json");break;case"api":a("api")}}),[]);const m=Object(d.c)(p.u),x=Object(j.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.helperText",{defaultMessage:"There are three ways to send documents to your engine for indexing. You can paste or upload a JSON file, POST to the documents API endpoint, or use the  Elastic Web Crawler to automatically index documents from a URL."})),S=Object(j.jsx)(c.EuiFlexItem,null,Object(j.jsx)(c.EuiEmptyPrompt,{icon:Object(j.jsx)(c.EuiImage,{size:"fullWidth",src:h.a,alt:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.emptyStateIllustrationAltText",{defaultMessage:"Illustration"})}),title:Object(j.jsx)("h2",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.emptyStateTitle",{defaultMessage:"Add documents"})),layout:"horizontal",hasBorder:!0,color:"plain",body:x,footer:Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiTitle,{size:"xxs"},Object(j.jsx)("span",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.emptyStateFooterText",{defaultMessage:"Want to learn more about indexing documents?"})))," ",Object(j.jsx)(c.EuiLink,{href:p.K,target:"_blank"},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.emptyStateFooterLink",{defaultMessage:"Read documentation"})))})),f=Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiText,{color:"subdued"},x),Object(j.jsx)(c.EuiSpacer,null));return Object(j.jsx)(s.a.Fragment,null,e&&f,Object(j.jsx)(c.EuiFlexGroup,{alignItems:"flexStart"},Object(j.jsx)(c.EuiFlexItem,{grow:!0},Object(j.jsx)(u.c,{hasBorder:!0,layout:"horizontal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.crawlTitle",{defaultMessage:"Use the Crawler"}),description:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.crawlDescription",{defaultMessage:"Automatically index documents from a URL"}),icon:Object(j.jsx)(c.EuiIcon,{type:"globe",size:"xl",color:"primary"}),to:m,isDisabled:t}),Object(j.jsx)(c.EuiSpacer,{size:"m"}),Object(j.jsx)(c.EuiCard,{hasBorder:!0,layout:"horizontal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.jsonTitle",{defaultMessage:"Paste or upload JSON"}),description:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.jsonDescription",{defaultMessage:"Add documents by pasting or uploading raw JSON"}),icon:Object(j.jsx)(c.EuiIcon,{type:"indexEdit",size:"xl",color:"primary"}),"data-test-subj":"IndexingPasteJSONButton",onClick:()=>a("json"),isDisabled:t}),Object(j.jsx)(c.EuiSpacer,{size:"m"}),Object(j.jsx)(c.EuiCard,{hasBorder:!0,layout:"horizontal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.apiTitle",{defaultMessage:"Index from API"}),description:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.buttons.apiDescription",{defaultMessage:"POST to the documents endpoint"}),icon:Object(j.jsx)(c.EuiIcon,{type:"exportAction",size:"xl",color:"primary"}),onClick:()=>a("api"),isDisabled:t})),!e&&S))};var m=a(90),x=a(42);const S=()=>{const{closeDocumentCreation:e}=Object(r.useActions)(Z.a);return Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(c.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:m.d},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showCreationModes.title",{defaultMessage:"Add new documents"})))),Object(j.jsx)(c.EuiFlyoutBody,null,Object(j.jsx)(b,{isFlyout:!0})),Object(j.jsx)(c.EuiFlyoutFooter,null,Object(j.jsx)(c.EuiButtonEmpty,{onClick:e},x.e)))};var f=a(14),O=a(85);const y=()=>Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(v,null),Object(j.jsx)(w,null),Object(j.jsx)(E,null)),v=()=>Object(j.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(c.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:m.d},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.api.title",{defaultMessage:"Indexing by API"})))),w=()=>{const{engineName:e,engine:t}=Object(r.useValues)(d.a),{apiKey:a}=t,n=Object(O.c)(`/api/as/v1/engines/${e}/documents`);return Object(j.jsx)(c.EuiFlyoutBody,null,Object(j.jsx)(c.EuiText,{color:"subdued"},Object(j.jsx)("p",null,Object(j.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.documentCreation.api.description",defaultMessage:"The {documentsApiLink} can be used to add new documents to your engine, update documents, retrieve documents by id, and delete documents. There are a variety of {clientLibrariesLink} to help you get started.",values:{documentsApiLink:Object(j.jsx)(c.EuiLink,{target:"_blank",href:p.K},"documents API"),clientLibrariesLink:Object(j.jsx)(c.EuiLink,{target:"_blank",href:p.a},"client libraries")}})),Object(j.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.api.example",{defaultMessage:"To see the API in action, you can experiment with the example request below using a command line or a client library."}))),Object(j.jsx)(c.EuiSpacer,null),Object(j.jsx)(c.EuiPanel,{hasBorder:!0,paddingSize:"s",className:"eui-textBreakAll"},Object(j.jsx)(c.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"none"},Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiBadge,{color:"primary"},"POST")),Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiCode,{transparentBackground:!0},n)))),Object(j.jsx)(c.EuiCodeBlock,{language:"bash",fontSize:"m",isCopyable:!0},`curl -X POST '${n}' \\\n  -H 'Content-Type: application/json' \\\n  -H 'Authorization: Bearer ${a}' \\\n  -d '${m.a}'\n# Returns\n# [\n#   {\n#     "id": "park_rocky-mountain",\n#     "errors": []\n#   },\n#   {\n#     "id": "park_saguaro",\n#     "errors": []\n#   }\n# ]`))},E=()=>{const{closeDocumentCreation:e}=Object(r.useActions)(Z.a);return Object(j.jsx)(c.EuiFlyoutFooter,null,Object(j.jsx)(c.EuiButtonEmpty,{onClick:e},x.e))},C=()=>{const{errors:e,warnings:t}=Object(r.useValues)(Z.a);return Object(j.jsx)(s.a.Fragment,null,e.length>0&&Object(j.jsx)(c.EuiCallOut,{color:"danger",iconType:"warning",title:m.b.TITLE},e.map(((e,t)=>Object(j.jsx)("p",{key:t},e)))),t.length>0&&Object(j.jsx)(c.EuiCallOut,{color:"warning",iconType:"warning",title:m.c.TITLE},t.map(((e,t)=>Object(j.jsx)("p",{key:t},e)))))};var M=a(238);const k=({document:e,errors:t})=>Object(j.jsx)(s.a.Fragment,null,t&&Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.documentNotIndexed",{defaultMessage:"This document was not indexed!"}))),Object(j.jsx)(c.EuiSpacer,{size:"s"}),t.map(((e,t)=>Object(j.jsx)(n.Fragment,{key:t},Object(j.jsx)(c.EuiCallOut,{color:"danger",size:"s",title:e}),Object(j.jsx)(c.EuiSpacer,{size:"s"}))))),Object(j.jsx)(c.EuiCodeBlock,{language:"json",paddingSize:"m",overflowHeight:200},JSON.stringify(e,null,2)),Object(j.jsx)(c.EuiSpacer,{size:"m"})),T=({documents:e})=>Object(j.jsx)(c.EuiText,null,Object(j.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.otherDocuments",{defaultMessage:"and {documents, number} other {documents, plural, one {document} other {documents}}.",values:{documents:e}})));a(833);const F={error:{type:"error",color:"danger"},success:{type:"checkInCircleFilled",color:"success"},info:{type:"iInCircle",color:"default"}},_=({id:e,status:t,title:a,children:n})=>Object(j.jsx)(c.EuiAccordion,{id:e,className:"documentCreationSummarySection",arrowDisplay:"right",paddingSize:"m",buttonContent:Object(j.jsx)("div",{className:"documentCreationSummarySection__title"},Object(j.jsx)(c.EuiIcon,{type:F[t].type,color:F[t].color}),a)},n),I=({title:e})=>Object(j.jsx)("div",{className:"documentCreationSummarySection"},Object(j.jsx)("div",{className:"documentCreationSummarySection__title"},Object(j.jsx)(c.EuiIcon,F.info),e)),R=()=>{const{summary:{invalidDocuments:e}}=Object(r.useValues)(Z.a),t=e.total>0,a=e.total-e.examples.length;return t?Object(j.jsx)(_,{id:"invalidDocuments",status:"error",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.invalidDocuments",{defaultMessage:"{invalidDocuments, number} {invalidDocuments, plural, one {document} other {documents}} with errors...",values:{invalidDocuments:e.total}})},e.examples.map((({document:e,errors:t},a)=>Object(j.jsx)(k,{document:e,errors:t,key:a}))),a>0&&Object(j.jsx)(T,{documents:a})):null},A=()=>{const{summary:{validDocuments:e}}=Object(r.useValues)(Z.a),t=e.total>0,a=e.total-e.examples.length;return t?Object(j.jsx)(_,{id:"newDocuments",status:"success",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.newDocuments",{defaultMessage:"Added {newDocuments, number} {newDocuments, plural, one {document} other {documents}}.",values:{newDocuments:e.total}})},e.examples.map(((e,t)=>Object(j.jsx)(k,{document:e,key:t}))),a>0&&Object(j.jsx)(T,{documents:a})):Object(j.jsx)(I,{title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.noNewDocuments",{defaultMessage:"No new documents."})})},L=()=>{const{summary:{newSchemaFields:e}}=Object(r.useValues)(Z.a);return e.length?Object(j.jsx)(_,{id:"newSchemaFields",status:"info",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.newSchemaFields",{defaultMessage:"Added {newFields, number} {newFields, plural, one {field} other {fields}} to the Engine's schema.",values:{newFields:e.length}})},Object(j.jsx)(c.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},e.map((e=>Object(j.jsx)(c.EuiFlexItem,{grow:!1,key:e},Object(j.jsx)(c.EuiBadge,null,e)))))):Object(j.jsx)(I,{title:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.noNewSchemaFields",{defaultMessage:"No new schema fields."})})},D=()=>Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(z,null),Object(j.jsx)(P,null),Object(j.jsx)(N,null)),z=()=>Object(j.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(c.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:m.d},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.title",{defaultMessage:"Indexing summary"})))),P=()=>{const{summary:e}=Object(r.useValues)(Z.a),t=e.invalidDocuments.total>0,a=Object(j.jsx)(c.EuiCallOut,{color:"danger",iconType:"warning",title:m.b.TITLE});return Object(j.jsx)(c.EuiFlyoutBody,{banner:t&&a},Object(j.jsx)(R,null),Object(j.jsx)(A,null),Object(j.jsx)(L,null))},N=()=>{const{setCreationStep:e,closeDocumentCreation:t}=Object(r.useActions)(Z.a),{summary:a}=Object(r.useValues)(Z.a),n=a.invalidDocuments.total>0;return Object(j.jsx)(c.EuiFlyoutFooter,null,Object(j.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButton,{onClick:t},x.f)),n&&Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButton,{fill:!0,onClick:()=>e(M.a.AddDocuments)},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.showSummary.fixErrors",{defaultMessage:"Fix errors"})))))};a(838);const B=()=>{var e;const{activeJsonTab:t}=Object(r.useValues)(Z.a),{setActiveJsonTab:a}=Object(r.useActions)(Z.a),n=[{id:"uploadTab",name:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.jsonFlyout.uploadTabName",{defaultMessage:"Upload"}),content:Object(j.jsx)(Q,null)},{id:"pasteTab",name:l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.jsonFlyout.pasteTabName",{defaultMessage:"Paste"}),content:Object(j.jsx)($,null)}];return Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiFlyoutHeader,{hasBorder:!0,className:"enterpriseSearchTabbedFlyoutHeader"},Object(j.jsx)(c.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:m.d},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.jsonFlyout.title",{defaultMessage:"Paste or upload JSON"}))),Object(j.jsx)(c.EuiSpacer,null),Object(j.jsx)(c.EuiTabs,{bottomBorder:!1},n.map(((e,n)=>Object(j.jsx)(c.EuiTab,{key:n,onClick:()=>a(e.id),isSelected:e.id===t},e.name))))),Object(j.jsx)(c.EuiFlyoutBody,{banner:Object(j.jsx)(C,null)},null===(e=n.find((e=>e.id===t)))||void 0===e?void 0:e.content),Object(j.jsx)(c.EuiFlyoutFooter,null,"uploadTab"===t?Object(j.jsx)(J,null):Object(j.jsx)(W,null)))};a(316);const V=()=>Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(U,null),Object(j.jsx)(H,null),Object(j.jsx)(q,null)),U=()=>Object(j.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(c.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:m.d},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.elasticsearchIndex.title",{defaultMessage:"Connect an Elasticsearch index"})))),H=()=>Object(j.jsx)(c.EuiFlyoutBody,{banner:Object(j.jsx)(C,null)},Object(j.jsx)(c.EuiText,{color:"subdued"},Object(j.jsx)("p",null,Object(j.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.documentCreation.elasticsearchIndex.description",defaultMessage:"'You can now connect directly to an existing Elasticsearch index to make its data searchable and tunable through Enterprise Search Uls. {learnMoreLink}",values:{learnMoreLink:Object(j.jsx)(c.EuiLink,{target:"_blank",href:"TODO"},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.elasticsearchIndex.link",{defaultMessage:"Learn more about using an existing index"}))}}))),Object(j.jsx)(c.EuiSpacer,null),"{Form fields go here}"),q=()=>{const{textInput:e,isUploading:t}=Object(r.useValues)(Z.a),{onSubmitJson:a,closeDocumentCreation:n}=Object(r.useActions)(Z.a);return Object(j.jsx)(c.EuiFlyoutFooter,null,Object(j.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButtonEmpty,{onClick:n},x.e)),Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButton,{fill:!0,onClick:a,isLoading:t,isDisabled:!e},l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.elasticsearchIndex.button",{defaultMessage:"Connect to index"})))))};var G=a(57);const $=()=>{const{configuredLimits:{engine:{maxDocumentByteSize:e}}}=Object(r.useValues)(G.a),{textInput:t,errors:a}=Object(r.useValues)(Z.a),{setTextInput:n}=Object(r.useActions)(Z.a);return Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiText,{color:"subdued"},Object(j.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.pasteJsonText.description",{defaultMessage:"Paste an array of JSON documents. Ensure the JSON is valid and that each document object is less than {maxDocumentByteSize} bytes.",values:{maxDocumentByteSize:e}}))),Object(j.jsx)(c.EuiSpacer,null),Object(j.jsx)(c.EuiTextArea,{value:t,onChange:e=>n(e.target.value),isInvalid:a.length>0,"aria-label":l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.pasteJsonText.label",{defaultMessage:"Paste JSON here"}),className:"pasteJsonTextArea",fullWidth:!0,rows:12}))},W=()=>{const{textInput:e,isUploading:t}=Object(r.useValues)(Z.a),{onSubmitJson:a,closeDocumentCreation:n}=Object(r.useActions)(Z.a);return Object(j.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButtonEmpty,{onClick:n},x.e)),Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButton,{fill:!0,onClick:a,isLoading:t,isDisabled:!e},x.h)))},Q=()=>{const{configuredLimits:{engine:{maxDocumentByteSize:e}}}=Object(r.useValues)(G.a),{isUploading:t,errors:a}=Object(r.useValues)(Z.a),{setFileInput:n}=Object(r.useActions)(Z.a);return Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(c.EuiText,{color:"subdued"},Object(j.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.documentCreation.uploadJsonFile.label",{defaultMessage:"If you have a .json file, drag and drop or upload it. Ensure the JSON is valid and that each document object is less than {maxDocumentByteSize} bytes.",values:{maxDocumentByteSize:e}}))),Object(j.jsx)(c.EuiSpacer,null),Object(j.jsx)(c.EuiFilePicker,{onChange:e=>n(null!=e&&e.length?e[0]:null),accept:"application/json",fullWidth:!0,isLoading:t,isInvalid:a.length>0}))},J=()=>{const{fileInput:e,isUploading:t}=Object(r.useValues)(Z.a),{onSubmitFile:a,closeDocumentCreation:n}=Object(r.useActions)(Z.a);return Object(j.jsx)(c.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButtonEmpty,{onClick:n},x.e)),Object(j.jsx)(c.EuiFlexItem,{grow:!1},Object(j.jsx)(c.EuiButton,{fill:!0,onClick:a,isLoading:t,isDisabled:!e},x.h)))},K=()=>{const{closeDocumentCreation:e}=Object(r.useActions)(Z.a),{isDocumentCreationOpen:t}=Object(r.useValues)(Z.a);return t?Object(j.jsx)(c.EuiPortal,null,Object(j.jsx)(c.EuiFlyout,{ownFocus:!0,"aria-labelledby":m.d,onClose:e},Object(j.jsx)(Y,null))):null},Y=()=>{const{creationStep:e,creationMode:t}=Object(r.useValues)(Z.a);switch(e){case M.a.ShowCreationModes:return Object(j.jsx)(S,null);case M.a.AddDocuments:switch(t){case"api":return Object(j.jsx)(y,null);case"json":return Object(j.jsx)(B,null);case"elasticsearchIndex":return Object(j.jsx)(V,null)}case M.a.ShowSummary:return Object(j.jsx)(D,null)}};var Z=a(317)},function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return L})),a.d(t,"c",(function(){return E}));var n=a(37),s=a(43),i=a(38),r=a(45);const c=Object(n.kea)({path:["enterprise_search","app_search","engine_overview_logic"],actions:()=>({loadOverviewMetrics:!0,onOverviewMetricsLoad:e=>e}),reducers:()=>({dataLoading:[!0,{onOverviewMetricsLoad:()=>!1}],startDate:["",{onOverviewMetricsLoad:(e,{startDate:t})=>t}],queriesPerDay:[[],{onOverviewMetricsLoad:(e,{queriesPerDay:t})=>t}],operationsPerDay:[[],{onOverviewMetricsLoad:(e,{operationsPerDay:t})=>t}],totalQueries:[0,{onOverviewMetricsLoad:(e,{totalQueries:t})=>t}],totalClicks:[0,{onOverviewMetricsLoad:(e,{totalClicks:t})=>t}],documentCount:[0,{onOverviewMetricsLoad:(e,{documentCount:t})=>t}]}),listeners:({actions:e})=>({loadOverviewMetrics:async()=>{const{http:t}=i.a.values,{engineName:a}=r.a.values;try{const n=await t.get(`/internal/app_search/engines/${a}/overview`);e.onOverviewMetricsLoad(n)}catch(e){Object(s.e)(e)}}})});var l=a(11),o=a.n(l),u=a(57),p=a(13),d=a(2),g=a(44),h=a(48),j=a(327),b=a(315),m=a.n(b),x=a(53),S=a(12);const f=()=>{const{isElasticsearchEngine:e,engine:{elasticsearchIndexName:t}}=Object(n.useValues)(r.a),a=Object(S.jsx)(p.EuiEmptyPrompt,{"data-test-subj":"ElasticsearchIndexEmptyState",icon:Object(S.jsx)(p.EuiImage,{size:"fullWidth",src:m.a,alt:d.i18n.translate("xpack.enterpriseSearch.appSearch.elasticsearchEngine.emptyStateIllustrationAltText",{defaultMessage:"Illustration"})}),title:Object(S.jsx)("h2",null,d.i18n.translate("xpack.enterpriseSearch.appSearch.elasticsearchEngine.emptyStateTitle",{defaultMessage:"Add documents to your index"})),layout:"horizontal",hasBorder:!0,color:"plain",body:Object(S.jsx)(o.a.Fragment,null,Object(S.jsx)("p",null,d.i18n.translate("xpack.enterpriseSearch.appSearch.elasticsearchEngine.helperText",{defaultMessage:"Your Elasticsearch index, {elasticsearchIndexName}, doesn't have any documents yet. Open Index Management in Kibana to make changes to your Elasticsearch indices.",values:{elasticsearchIndexName:t}})),Object(S.jsx)(p.EuiSpacer,{size:"m"}),Object(S.jsx)(g.b,{fill:!0,to:"/app/management/data/index_management/indices",shouldNotCreateHref:!0},d.i18n.translate("xpack.enterpriseSearch.appSearch.elasticsearchEngine.emptyStateButton",{defaultMessage:"Manage indices"})))});return Object(S.jsx)(x.a,{pageChrome:Object(r.d)(),pageHeader:{pageTitle:d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.heading",{defaultMessage:"Engine setup"}),rightSideItems:[Object(S.jsx)(p.EuiButton,{href:h.h,target:"_blank",iconType:"popout"},d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.empty.headingAction",{defaultMessage:"View documentation"}))]},"data-test-subj":"EngineOverview"},e?a:Object(S.jsx)(o.a.Fragment,null,Object(S.jsx)(j.a,null),Object(S.jsx)(j.b,null)))};var O=a(138),y=a(67);const v=()=>{const{totalQueries:e,documentCount:t,totalClicks:a}=Object(n.useValues)(c);return Object(S.jsx)(O.b,{stats:[{stat:e,text:y.n,dataTestSubj:"TotalQueriesCard"},{stat:t,text:y.m,dataTestSubj:"TotalDocumentsCard"},{stat:a,text:y.l,dataTestSubj:"TotalClicksCard"}]})};var w=a(68);const E=d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.title",{defaultMessage:"Overview"}),C=d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.analyticsLink",{defaultMessage:"View analytics"}),M=d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.apiLogsLink",{defaultMessage:"View API logs"}),k=d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.chartDuration",{defaultMessage:"Last 7 days"}),T=()=>{const{startDate:e,queriesPerDay:t,operationsPerDay:a}=Object(n.useValues)(c);return Object(S.jsx)(p.EuiFlexGroup,null,Object(S.jsx)(p.EuiFlexItem,null,Object(S.jsx)(w.a,{"data-test-subj":"TotalQueriesChart",title:Object(S.jsx)("h2",null,y.n),subtitle:k,action:Object(S.jsx)(g.a,{iconType:"eye",to:Object(r.c)(h.k),size:"s"},C),hasBorder:!0},Object(S.jsx)(O.c,{lines:[{id:y.n,data:Object(O.f)({startDate:e,data:t})}],height:240}))),Object(S.jsx)(p.EuiFlexItem,null,Object(S.jsx)(w.a,{"data-test-subj":"TotalApiOperationsChart",title:Object(S.jsx)("h2",null,y.k),subtitle:k,action:Object(S.jsx)(g.a,{iconType:"eye",to:Object(r.c)(h.s),size:"s"},M),hasBorder:!0},Object(S.jsx)(O.c,{lines:[{id:y.k,data:Object(O.f)({startDate:e,data:a})}],height:240}))))};var F=a(164),_=a(135);const I=()=>{const{fetchApiLogs:e,pollForApiLogs:t}=Object(n.useActions)(F.d);return Object(l.useEffect)((()=>{e(),t()}),[]),Object(S.jsx)(w.a,{title:Object(S.jsx)("h2",null,_.e),action:Object(S.jsx)(p.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1,wrap:!0},Object(S.jsx)(p.EuiFlexItem,{grow:!1},Object(S.jsx)(F.f,null)),Object(S.jsx)(p.EuiFlexItem,{grow:!1},Object(S.jsx)(g.a,{iconType:"eye",to:Object(r.c)(h.s),size:"s"},M))),hasBorder:!0},Object(S.jsx)(F.e,null),Object(S.jsx)(F.b,null))};var R=a(318);const A=()=>{const{loadOverviewMetrics:e}=Object(n.useActions)(c),{dataLoading:t}=Object(n.useValues)(c);return Object(l.useEffect)((()=>{e()}),[]),Object(S.jsx)(x.a,{pageChrome:Object(r.d)(),pageHeader:{pageTitle:d.i18n.translate("xpack.enterpriseSearch.appSearch.engine.overview.heading",{defaultMessage:"Engine overview"})},isLoading:t,"data-test-subj":"EngineOverview"},Object(S.jsx)(R.a,null),Object(S.jsx)(p.EuiFlexGroup,null,Object(S.jsx)(p.EuiFlexItem,{grow:1},Object(S.jsx)(v,null)),Object(S.jsx)(p.EuiFlexItem,{grow:3},Object(S.jsx)(T,null))),Object(S.jsx)(p.EuiSpacer,{size:"xl"}),Object(S.jsx)(I,null))},L=()=>{const{myRole:{canManageEngineDocuments:e,canViewEngineCredentials:t}}=Object(n.useValues)(u.a),{hasNoDocuments:a,isMetaEngine:s}=Object(n.useValues)(r.a);return a&&e&&t&&!s?Object(S.jsx)(f,null):Object(S.jsx)(A,null)}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return L}));var n=a(2),s=a(244);const i=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.title",{defaultMessage:"Search UI"}),r=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.titleFieldLabel",{defaultMessage:"Title field (Optional)"}),c=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.titleFieldHelpText",{defaultMessage:"Used as the top-level visual identifier for every rendered result"}),l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.filterFieldLabel",{defaultMessage:"Filter fields (Optional)"}),o=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.filterFieldHelpText",{defaultMessage:"Faceted values rendered as filters and available as query refinement"}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.sortFieldLabel",{defaultMessage:"Sort fields (Optional)"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.sortHelpText",{defaultMessage:"Used to display result sorting options, ascending and descending"}),d=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.urlFieldLabel",{defaultMessage:"URL field (Optional)"}),g=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.thumbnailFieldLabel",{defaultMessage:"Thumbnail field (Optional)"}),h=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.urlFieldHelpText",{defaultMessage:"Used as a result's link target, if applicable"}),j=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.thumbnailFieldHelpText",{defaultMessage:"Provide an image URL to show a thumbnail image"}),b=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.generatePreviewButtonLabel",{defaultMessage:"Generate search experience"});var m=a(11),x=a(37),S=a(13),f=a(14),O=a(48),y=a(45),v=a(53),w=a(12);const E=()=>Object(w.jsx)(S.EuiEmptyPrompt,{iconType:"search",title:Object(w.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.empty.title",{defaultMessage:"Add documents to generate a Search UI"})),body:Object(w.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.empty.description",{defaultMessage:"A schema will be automatically created for you after you index some documents."})),actions:Object(w.jsx)(S.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:O.U},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.empty.buttonLabel",{defaultMessage:"Read the Search UI guide"}))});var C=a(43),M=a(38);let k;!function(e){e.Title="Title",e.Filter="Filter",e.Sort="Sort",e.Url="Url",e.Thumb="Thumb",e.None=""}(k||(k={}));const T=Object(x.kea)({path:["enterprise_search","app_search","search_ui_logic"],actions:()=>({loadFieldData:()=>!0,onFieldDataLoaded:e=>e,onActiveFieldChange:e=>({activeField:e}),onFacetFieldsChange:e=>({facetFields:e}),onSortFieldsChange:e=>({sortFields:e}),onTitleFieldChange:e=>({titleField:e}),onUrlFieldChange:e=>({urlField:e}),onThumbnailFieldChange:e=>({thumbnailField:e})}),reducers:()=>({dataLoading:[!0,{onFieldDataLoaded:()=>!1}],validFields:[[],{onFieldDataLoaded:(e,{validFields:t})=>t}],validSortFields:[[],{onFieldDataLoaded:(e,{validSortFields:t})=>t}],validFacetFields:[[],{onFieldDataLoaded:(e,{validFacetFields:t})=>t}],titleField:["",{onTitleFieldChange:(e,{titleField:t})=>t,onFieldDataLoaded:(e,{titleField:t})=>t||""}],urlField:["",{onUrlFieldChange:(e,{urlField:t})=>t,onFieldDataLoaded:(e,{urlField:t})=>t||""}],thumbnailField:["",{onThumbnailFieldChange:(e,{thumbnailField:t})=>t}],facetFields:[[],{onFacetFieldsChange:(e,{facetFields:t})=>t}],sortFields:[[],{onSortFieldsChange:(e,{sortFields:t})=>t}],activeField:[k.None,{onActiveFieldChange:(e,{activeField:t})=>t}]}),listeners:({actions:e})=>({loadFieldData:async()=>{const{http:t}=M.a.values,{searchKey:a,engineName:i}=y.a.values;if(!a)return void Object(C.i)((e=>n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.searchUI.noSearchKeyErrorMessage",{defaultMessage:"It looks like you don't have any Public Search Keys with access to the '{engineName}' engine. Please visit the {credentialsTitle} page to set one up.",values:{engineName:e,credentialsTitle:s.a}}))(i));const r=`/internal/app_search/engines/${i}/search_ui/field_config`;try{const a=await t.get(r),{defaultValues:{urlField:n,titleField:s},validFields:i,validSortFields:c,validFacetFields:l}=a;e.onFieldDataLoaded({validFields:i,validSortFields:c,validFacetFields:l,urlField:n,titleField:s})}catch(e){Object(C.e)(e)}}})});var F=a(108),_=a.n(F),I=a(85);const R=()=>{const{searchKey:e}=Object(x.useValues)(y.a),{dataLoading:t,validFields:a,validSortFields:n,validFacetFields:s,titleField:i,urlField:m,thumbnailField:f,facetFields:O,sortFields:v}=Object(x.useValues)(T),{onActiveFieldChange:E,onFacetFieldsChange:C,onSortFieldsChange:M,onTitleFieldChange:F,onUrlFieldChange:R,onThumbnailFieldChange:A}=Object(x.useActions)(T),L=(e=>{const{engineName:t}=y.a.values;return _.a.stringifyUrl({query:e,url:Object(I.b)(`/engines/${t}/search_experience/preview`)},{arrayFormat:"bracket",skipEmptyString:!0})})({titleField:i,urlField:m,thumbnailField:f,facets:O,sortFields:v}),D=e=>({text:e,value:e}),z=e=>e.map((e=>({label:e,text:e,value:e}))),P=[{label:"",text:"",value:""},...z(a)],N=z(n),B=z(s),V=D(i),U=D(m),H=D(f),q=z(v),G=z(O);return Object(w.jsx)(S.EuiForm,{component:"form",action:L,target:"_blank",method:"POST"},Object(w.jsx)("input",{type:"hidden",id:"searchKey",name:"searchKey",value:e}),Object(w.jsx)(S.EuiFormRow,{label:r,helpText:c,fullWidth:!0},Object(w.jsx)(S.EuiSelect,{disabled:t,options:P,value:V&&V.value,onChange:e=>F(e.target.value),fullWidth:!0,onFocus:()=>E(k.Title),onBlur:()=>E(k.None),hasNoInitialSelection:!0,"data-test-subj":"selectTitle"})),Object(w.jsx)(S.EuiFormRow,{label:l,helpText:o,fullWidth:!0},Object(w.jsx)(S.EuiComboBox,{isDisabled:t,options:B,selectedOptions:G,onChange:e=>C(e.map((e=>e.value))),onFocus:()=>E(k.Filter),onBlur:()=>E(k.None),fullWidth:!0,"data-test-subj":"selectFilters"})),Object(w.jsx)(S.EuiFormRow,{label:u,helpText:p,fullWidth:!0},Object(w.jsx)(S.EuiComboBox,{isDisabled:t,options:N,selectedOptions:q,onChange:e=>M(e.map((e=>e.value))),onFocus:()=>E(k.Sort),onBlur:()=>E(k.None),fullWidth:!0,"data-test-subj":"selectSort"})),Object(w.jsx)(S.EuiFormRow,{label:d,helpText:h,fullWidth:!0},Object(w.jsx)(S.EuiSelect,{disabled:t,options:P,value:U&&U.value,onChange:e=>R(e.target.value),fullWidth:!0,onFocus:()=>E(k.Url),onBlur:()=>E(k.None),hasNoInitialSelection:!0,"data-test-subj":"selectUrl"})),Object(w.jsx)(S.EuiFormRow,{label:g,helpText:j,fullWidth:!0},Object(w.jsx)(S.EuiSelect,{disabled:t,options:P,value:H&&H.value,onChange:e=>A(e.target.value),fullWidth:!0,onFocus:()=>E(k.Thumb),onBlur:()=>E(k.None),hasNoInitialSelection:!0,"data-test-subj":"selectThumbnail"})),Object(w.jsx)(S.EuiButton,{disabled:t,type:"submit",fill:!0,iconType:"popout",iconSide:"right","data-test-subj":"generateSearchUiPreview"},b))};a(899);const A=()=>{const{activeField:e}=Object(x.useValues)(T);return Object(w.jsx)("svg",{className:`searchUIGraphic active${e}`,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 587 466"},Object(w.jsx)("g",{id:"search-area"},Object(w.jsx)("path",{className:"outerBox",d:"M39,0h527c2.2,0,4,1.8,4,4v71c0,2.2-1.8,4-4,4H39c-2.2,0-4-1.8-4-4V4C35,1.8,36.8,0,39,0z"}),Object(w.jsx)("path",{className:"field",d:"M73.5,23.5h456c8.3,0,15,6.7,15,15l0,0c0,8.3-6.7,15-15,15h-456c-8.3,0-15-6.7-15-15l0,0 C58.5,30.2,65.2,23.5,73.5,23.5z"}),Object(w.jsx)("path",{className:"searchIcon",d:"M82.5,42.3c2.8,0,5-2.2,5-5c0-2.8-2.2-5-5-5c-2.8,0-5,2.2-5,5C77.5,40,79.7,42.3,82.5,42.3z M78.5,42.2 C78.5,42.2,78.5,42.2,78.5,42.2l-4.4,4.4c-0.3,0.3-0.7,0.3-0.9,0c-0.3-0.3-0.3-0.7,0-0.9l4.4-4.4c0,0,0,0,0.1-0.1 c-0.9-1.1-1.4-2.5-1.4-4c0-3.5,2.8-6.3,6.3-6.3s6.3,2.8,6.3,6.3s-2.8,6.3-6.3,6.3C81,43.6,79.6,43.1,78.5,42.2z"}),Object(w.jsx)("path",{className:"type",d:"M100.4,42.1c-0.9,0-1.5-0.4-1.5-1.2c0-0.7,0.5-1.1,1.6-1.2l2-0.1v0.7C102.5,41.3,101.6,42.1,100.4,42.1z M100.2,43.1c1,0,1.8-0.4,2.3-1.2h0.1V43h1.1v-5c0-1.5-1-2.5-2.8-2.5c-1.6,0-2.7,0.8-2.9,2h1.2c0.2-0.6,0.8-0.9,1.7-0.9 c1.1,0,1.7,0.5,1.7,1.4v0.7l-2.1,0.1c-1.7,0.1-2.7,0.9-2.7,2.2C97.7,42.3,98.7,43.1,100.2,43.1z M106.2,33.7v1.9H105v1h1.2v4.5 c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6v-1h-1.6v-1.9H106.2z M110.7,43h1.2 v-4.4c0-1.2,0.7-2.1,2-2.1c1.1,0,1.7,0.6,1.7,2V43h1.2v-4.8c0-1.7-1-2.7-2.5-2.7c-1.1,0-1.9,0.5-2.3,1.3h-0.1v-4.1h-1.2V43z M118.9,43h1.2V32.7h-1.2V43z M125.1,36.5c1.2,0,1.9,0.9,2,2.2h-4.1C123.1,37.4,124,36.5,125.1,36.5z M127.1,41.1 c-0.3,0.6-1,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8 c1.6,0,2.7-0.8,3.1-2H127.1z M130.5,33.7v1.9h-1.2v1h1.2v4.5c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0 c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6v-1h-1.6v-1.9H130.5z M135,43h1.2v-7.4H135V43z M135.6,34.1c0.5,0,0.8-0.4,0.8-0.8 c0-0.5-0.4-0.8-0.8-0.8c-0.5,0-0.8,0.4-0.8,0.8C134.8,33.8,135.2,34.1,135.6,34.1z M144.4,37.9c-0.2-1.3-1.3-2.4-3.1-2.4 c-2.1,0-3.4,1.5-3.4,3.8c0,2.3,1.3,3.8,3.4,3.8c1.8,0,2.9-1,3.1-2.4h-1.2c-0.2,0.8-0.9,1.3-1.9,1.3c-1.3,0-2.2-1.1-2.2-2.8 c0-1.7,0.8-2.7,2.2-2.7c1.1,0,1.7,0.6,1.9,1.3H144.4z M149.6,37.6c0,1.1,0.6,1.7,2,2l1.3,0.3c0.8,0.2,1.2,0.5,1.2,1 c0,0.7-0.7,1.1-1.7,1.1c-0.9,0-1.5-0.4-1.7-1h-1.2c0.1,1.2,1.3,2,2.9,2c1.7,0,3-0.9,3-2.2c0-1.1-0.7-1.7-2.1-2l-1.1-0.3 c-0.9-0.2-1.3-0.5-1.3-1c0-0.7,0.7-1.1,1.6-1.1c0.9,0,1.5,0.4,1.6,1h1.2c-0.2-1.2-1.2-2-2.8-2C150.8,35.5,149.6,36.4,149.6,37.6z M157.1,43h1.2v-4.4c0-1.2,0.7-2.1,2-2.1c1.1,0,1.7,0.6,1.7,2V43h1.2v-4.8c0-1.7-1-2.7-2.5-2.7c-1.1,0-1.9,0.5-2.3,1.3h-0.1v-4.1 h-1.2V43z M168.2,43.1c2.1,0,3.4-1.4,3.4-3.8c0-2.4-1.3-3.8-3.4-3.8c-2.1,0-3.4,1.4-3.4,3.8C164.8,41.7,166.1,43.1,168.2,43.1z M168.2,42.1c-1.4,0-2.2-1-2.2-2.8c0-1.8,0.8-2.8,2.2-2.8c1.4,0,2.2,1,2.2,2.8C170.4,41.1,169.6,42.1,168.2,42.1z M176.2,36.5 c1.2,0,1.9,0.9,2,2.2h-4.1C174.2,37.4,175.1,36.5,176.2,36.5z M178.2,41.1c-0.3,0.6-0.9,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3 v-0.5c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H178.2z"})),Object(w.jsx)("path",{id:"background",className:"st0",d:"M87,94h454c2.2,0,4,1.8,4,4v348c0,2.2-1.8,4-4,4H87c-2.2,0-4-1.8-4-4V98C83,95.8,84.8,94,87,94\tz"}),Object(w.jsx)("g",{id:"results"},Object(w.jsx)("g",{id:"result1"},Object(w.jsx)("path",{className:"outerBox",d:"M215,140.5h352c1.9,0,3.5,1.6,3.5,3.5v66c0,1.9-1.6,3.5-3.5,3.5H215c-1.9,0-3.5-1.6-3.5-3.5v-66 C211.5,142.1,213.1,140.5,215,140.5z"}),Object(w.jsx)("g",{className:"shoe"},Object(w.jsx)("path",{className:"st4",d:"M266.1,158.3c-0.7,0.5-1.4,1.4-1.9,2.4c-0.3,0.5-0.5,1-0.6,1.1c-0.3,0.2-0.5,0.7-0.5,1.1 c0,0.3-0.1,0.5-0.4,0.7c-0.7,0.6-1.4,2-1.8,3.5c-0.1,0.3-0.2,0.5-0.5,0.6c-0.6,0.3-0.8,0.7-0.8,1.5c0,0.7,0,0.7-0.4,1 c-0.2,0.1-0.5,0.3-0.5,0.3c-0.2,0-0.8,0.5-1,0.9c-0.2,0.5-1.1,1.2-1.6,1.2c-0.4,0.1-1,0.4-1.1,0.7c-0.1,0.3-1.7,0.9-2.4,0.9 c-0.4,0-0.9,0.2-1.3,0.5c-0.2,0.2-1.6,0.7-2,0.7c-0.4,0-0.7,0.1-1.1,0.5c-0.4,0.4-1.7,0.8-2.4,0.9c-0.5,0-0.6,0.1-1.1,0.6 c-0.3,0.3-0.6,0.7-0.6,0.9c-0.1,0.2-0.1,0.4-0.1,0.5c0,0-0.5,0.1-1.1,0.2c-1.6,0.3-4.2,0.6-7,0.8c-2.8,0.2-3.2,0.3-3.8,0.7 c-0.6,0.5-1.3,1.9-1.3,2.8c0,0.2-0.1,0.3-0.1,0.3c-0.3,0.1-0.5,0.6-0.6,1.5c-0.2,1.6,0,2.4,1.2,3.5c1.9,1.8,6.3,3,12.2,3.6 c0.7,0.1,1.5,0.2,1.8,0.3c0.3,0.1,0.8,0.2,1.1,0.2c1.6,0,3,0.1,3.6,0.1c0.4,0.1,0.8,0,1.1-0.1c0.4-0.1,0.5-0.1,0.8,0.1 c0.5,0.2,3.4,0.3,4.1,0.1c0.4-0.1,0.6-0.1,1.1,0c0.3,0.1,0.7,0.1,0.8,0c0.1,0,0.8-0.1,1.5-0.1c0.7,0,1.4,0,1.6-0.1 c0.2,0,0.6,0,0.9,0c0.3,0,3.1,0,6.2,0c3.1,0,5.8,0,6,0c0.6,0,4.2-0.2,4.3-0.2c0.1,0,0.6-0.1,1.2-0.1c2.3-0.1,2.9-0.1,3.2-0.3 c0.2-0.1,0.5-0.2,0.7-0.2c0.6,0,1.5-0.6,1.6-1.2c0-0.2,0.1-1.4,0.1-2.6c0-2.1,0-2.3-0.1-2.6c-0.2-0.3-0.2-0.4-0.1-0.8 c0.2-0.7,0.2-4.6,0.1-6.4c-0.1-1.8-0.4-3.9-0.8-5.9c-0.3-1.8-1.3-5.5-1.5-5.9c-0.2-0.5-0.5-0.6-1.3-0.4 c-1.5,0.3-4.3-0.2-6.9-1.4l-0.9-0.4l-0.2-0.8c-0.3-1.2-1.2-2.4-2.8-3.6c-1.3-1-3.3-2.2-3.7-2.2 C266.6,158,266.4,158.1,266.1,158.3z M267.7,158.8c2.8,1.6,4.9,3.5,5.2,4.9c0.1,0.3,0,0.3-0.6-0.3c-0.4-0.3-1.1-0.8-1.5-1 c-0.7-0.4-0.9-0.4-1.7-0.4c-0.8,0-1,0-1.5,0.3c-0.7,0.4-1.6,1.2-2.3,2.1c-0.2,0.4-0.8,1.1-1.3,1.5c-0.8,0.8-1.3,1.7-1.3,2.1 c0,0.2,0,0.2-0.6-0.1c-0.3-0.2-0.6-0.3-0.7-0.3c-0.2,0-0.2-0.3,0-1.1c0.4-1.4,1.1-2.5,1.7-2.9c0.3-0.2,0.3-0.3,0.3-0.4 c-0.1-0.4,0.1-1,0.4-1.3c0.2-0.2,0.4-0.6,0.6-1c0.4-0.9,1.2-2,1.8-2.4c0.3-0.2,0.5-0.3,0.6-0.3 C266.8,158.3,267.3,158.5,267.7,158.8z M268.8,163.7c0,0.3-0.2,0.4-0.4,0.2c-0.1-0.1-0.1-0.2,0-0.3 C268.4,163.4,268.7,163.5,268.8,163.7z M267.4,165.1c0.4,0.2,3.4,2.3,5.1,3.6c2.2,1.7,4.2,3.5,6.4,5.6c2.9,2.9,3.8,3.6,5.1,3.7 l0.6,0.1l0.1,2c0.1,3-0.1,5.2-0.6,5.6c-0.6,0.5-2.3,0.7-7.3,0.9c-1.7,0.1-3.7,0.1-4.4,0.2l-1.2,0.1l0.2-0.6 c0.1-0.4,0.3-1.2,0.4-1.8c0.7-4.6-1.2-9.2-5-12.5c-1.9-1.7-3.4-3-3.5-3.2c-0.1-0.3,0.3-1.2,0.8-1.8 C265.1,165.2,266.3,164.6,267.4,165.1z M261.8,168.1c0.5,0.2,0.8,0.4,1.5,1.1c0.5,0.5,1.2,1.2,1.6,1.5l0.7,0.6v0.6 c0,0.8-0.1,1.3-0.5,1.7c-0.3,0.3-1.4,0.7-8.8,3.2c-4.6,1.6-8.8,3-9.2,3.1c-0.4,0.1-1.1,0.2-1.5,0.2c-0.7,0-0.7,0-0.9-0.2 c-0.1-0.2-0.2-0.5-0.2-0.9c0-0.8,0.2-1.1,0.3-0.5c0.2,0.6,0.6,0.9,1,0.9c0.6,0,0.7-0.4,0.7-1.4l0-0.8l0.8-0.3 c0.5-0.2,0.8-0.3,0.9-0.3c0,0,0.1,0.3,0.1,0.5c0.1,0.6,0.4,1.2,0.7,1.3c0.3,0.1,0.8-0.1,0.9-0.5c0.1-0.3,0.1-1.1-0.1-1.8 c-0.1-0.2,0-0.3,0.8-0.6l0.9-0.3l0.1,0.4c0.2,0.6,0.5,1.2,0.7,1.3c0.4,0.2,0.8,0.1,1-0.1c0.2-0.3,0.2-1.1,0-1.7 c-0.1-0.2-0.1-0.5-0.1-0.5c0.1-0.1,1.7-0.6,1.7-0.6c0,0,0.1,0.3,0.3,0.7c0.3,0.8,0.7,1.2,1.1,1.2c0.8,0,1-0.9,0.5-2.4l-0.2-0.6 l0.5-0.5c0.3-0.2,0.5-0.4,0.6-0.3c0.1,0.2,0.8,1.4,1,1.6c0.1,0.1,0.4,0.3,0.5,0.4c0.3,0.1,0.3,0.1,0.5,0c0.5-0.3,0.5-1.1,0-2.2 c-0.2-0.4-0.4-0.8-0.5-0.9c-0.2-0.3-0.2-0.3,0.1-0.6c0.2-0.2,0.4-0.3,0.5-0.3c0.1,0,0.4,0.4,0.8,0.8c1,1.4,2.1,2,2.7,1.7 c0.3-0.2,0.3-0.4,0-1c-0.4-0.8-2.2-3.2-2.6-3.6c-0.1-0.1-0.1-0.1,0-0.2C261.1,167.9,261.2,167.9,261.8,168.1z M244.2,179.4 c0.1,0.5,0.3,0.9,0.6,1c0.3,0.1,1.3,2.1,1.5,3c0.2,0.7,0,1-0.5,1.4c-0.7,0.4-1.4,0.1-2.5-0.9c-1.2-1.2-2.5-1.6-5.4-1.8 c-1.7-0.2-3.1-0.4-3.7-0.7c-0.4-0.2-0.9-0.7-0.9-0.8c0-0.1,0.7-0.2,2.6-0.3c2.6-0.2,6-0.6,7.3-0.9c0.4-0.1,0.8-0.1,0.8-0.2 C244.1,179.2,244.1,179.3,244.2,179.4z M231.3,184.3c0.5,0.5,2,1.3,3.2,1.7c1.8,0.6,3.7,1,6.5,1.3c4.8,0.6,7.7,0.8,11.9,0.8 c4,0,4.9-0.1,12.9-0.7c1-0.1,2.7-0.2,3.7-0.2c1.9-0.1,2.8-0.2,8.3-0.3c4.1-0.1,5.6-0.4,6.5-0.9c0.1-0.1,0.3-0.1,0.3-0.1 c0.1,0.1,0,4.8-0.1,5.1c-0.1,0.4-0.7,0.7-1.2,0.7c-0.2,0-0.6,0.1-0.8,0.2c-0.4,0.2-0.8,0.2-3,0.3c-0.5,0-1.5,0.1-2,0.1 c-0.6,0-2.6,0.1-4.5,0.1s-3.6,0-3.8,0c-0.2,0-1.1,0-1.9,0c-0.8,0-1.8,0-2,0c-0.8,0-1.7,0-2,0c-0.1,0-0.6,0-0.9,0.1 c-0.4,0-0.8,0-1-0.1c-0.3-0.1-0.4-0.1-0.7,0.1c-0.3,0.1-0.5,0.2-1.1,0.1c-0.4,0-0.8-0.1-0.8-0.1c-0.8,0.1-1.5,0.1-1.9,0 c-0.4-0.1-0.5-0.1-0.6,0c-0.2,0.2-3.5,0.2-4.2,0c-0.4-0.2-0.5-0.2-1.1,0c-0.5,0.1-0.7,0.1-1.2,0c-0.5-0.1-0.7-0.1-0.9-0.1 c-0.2,0.1-0.6,0.1-0.9,0c-0.3,0-0.9-0.1-1.2-0.1c-0.3,0-0.9-0.1-1.3-0.2c-0.4-0.1-1-0.2-1.3-0.2c-1,0-4.6-0.5-6.6-1 c-2.5-0.6-4.9-1.6-5.9-2.6c-0.7-0.7-0.9-1.1-1-1.9c-0.1-0.8,0.2-2.5,0.4-2.5C230.8,183.9,231,184.1,231.3,184.3z"}),Object(w.jsx)("path",{className:"st4",d:"M265.9,165.8c-0.3,0.3-0.1,0.7,0.4,0.7c0.3,0,0.4-0.4,0.2-0.7C266.3,165.6,266.1,165.6,265.9,165.8z"}),Object(w.jsx)("path",{className:"st4",d:"M264.3,167.6c-0.1,0.2-0.1,0.6,0.1,0.7c0.4,0.2,0.7-0.1,0.6-0.6C264.9,167.6,264.4,167.5,264.3,167.6z"})),Object(w.jsx)("path",{className:"url",d:"M304.8,188h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9 c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V188z M311,181.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7 c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H311z M314.5,181.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4 c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H314.5z M320.3,182.6 c-0.7,0-1.3,0.4-1.7,1h-0.1v-0.9h-0.8v7h0.8v-2.5h0.1c0.3,0.6,0.9,0.9,1.6,0.9c1.3,0,2.2-1.1,2.2-2.7 C322.5,183.7,321.6,182.6,320.3,182.6z M320.1,187.3c-0.9,0-1.5-0.8-1.5-2c0-1.2,0.6-2,1.6-2c1,0,1.5,0.7,1.5,2 C321.6,186.6,321,187.3,320.1,187.3z M323.6,184.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8 c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.7,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2 c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C324.4,182.6,323.6,183.3,323.6,184.2z M329.5,188c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,187.8,329.2,188,329.5,188z M329.5,184.3c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,184,329.2,184.3,329.5,184.3z M331.6,189.5l2.6-8.9h-0.7l-2.6,8.9H331.6z M334.9,189.5l2.6-8.9h-0.7l-2.6,8.9H334.9z M338,184.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.7,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C338.9,182.6,338,183.3,338,184.2z M343.3,188h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5 c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V188z M351.3,188.1 c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7C348.9,187.1,349.8,188.1,351.3,188.1z M351.3,187.3 c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2s1.6,0.7,1.6,2C352.8,186.6,352.3,187.3,351.3,187.3z M357,183.4c0.8,0,1.4,0.6,1.4,1.5 h-2.9C355.6,184,356.2,183.4,357,183.4z M358.4,186.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3 c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H358.4z M360.4,184.2 c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.7,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C361.3,182.6,360.4,183.3,360.4,184.2z M366.4,188c0.4,0,0.6-0.3,0.6-0.6 c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6C365.7,187.8,366,188,366.4,188z M372.7,184.3c-0.1-0.9-0.9-1.7-2.2-1.7 c-1.5,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.3,0,2.1-0.7,2.2-1.7h-0.8c-0.2,0.6-0.6,0.9-1.4,0.9c-0.9,0-1.5-0.8-1.5-2 c0-1.2,0.6-1.9,1.5-1.9c0.8,0,1.2,0.4,1.4,0.9H372.7z M376,188.1c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7 C373.6,187.1,374.5,188.1,376,188.1z M376,187.3c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2c1,0,1.6,0.7,1.6,2 C377.6,186.6,377,187.3,376,187.3z M379.7,188h0.8v-3.3c0-0.7,0.5-1.3,1.2-1.3c0.7,0,1.1,0.4,1.1,1v3.6h0.8v-3.4 c0-0.7,0.5-1.2,1.2-1.2c0.7,0,1.1,0.4,1.1,1.2v3.4h0.8v-3.6c0-1.1-0.6-1.7-1.7-1.7c-0.7,0-1.3,0.4-1.6,0.9h-0.1 c-0.2-0.5-0.7-0.9-1.5-0.9c-0.7,0-1.2,0.3-1.5,0.9h-0.1v-0.8h-0.8V188z M388.2,189.5l2.6-8.9h-0.7l-2.6,8.9H388.2z M391.5,188h0.8 v-3.1c0-0.9,0.5-1.5,1.4-1.5c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.3,0.3-1.6,0.9h-0.1v-0.8h-0.8 V188z M397.2,188h0.8v-5.3h-0.8V188z M397.7,181.7c0.3,0,0.6-0.3,0.6-0.6c0-0.3-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C397.1,181.4,397.3,181.7,397.7,181.7z M400.6,185L400.6,185l-0.1-4.4h-0.8v7.4h0.8v-2l0.5-0.5l2,2.5h1.1l-2.4-3l2.3-2.3h-1 L400.6,185z M406.8,183.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C405.3,184,405.9,183.4,406.8,183.4z M408.2,186.6c-0.2,0.5-0.7,0.7-1.4,0.7 c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5 H408.2z M413.5,185.6v-0.8h-3.2v0.8H413.5z M414.9,188h0.8v-3.3c0-0.7,0.6-1.3,1.4-1.3c0.2,0,0.5,0,0.5,0v-0.8c-0.1,0-0.3,0-0.4,0 c-0.7,0-1.3,0.4-1.5,0.9h-0.1v-0.8h-0.8V188z M420.6,183.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C419.1,184,419.7,183.4,420.6,183.4z M422,186.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7 c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H422z M428.3,182.7h-0.9l-1.4,4.3h-0.1l-1.4-4.3h-0.9l1.9,5.3h0.9L428.3,182.7z M431.3,188.1c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7s-2.4,1-2.4,2.7C428.8,187.1,429.8,188.1,431.3,188.1z M431.3,187.3 c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2s1.6,0.7,1.6,2C432.8,186.6,432.3,187.3,431.3,187.3z M435,188h0.8v-7.4H435V188z M441.6,182.7h-0.8v3.1c0,0.9-0.5,1.5-1.4,1.5c-0.8,0-1.2-0.4-1.2-1.4v-3.2h-0.8v3.4c0,1.2,0.6,1.9,1.8,1.9c0.8,0,1.4-0.3,1.6-0.9 h0.1v0.8h0.8V182.7z M443.4,181.4v1.4h-0.8v0.7h0.8v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0 c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H443.4z M446.6,188h0.8v-5.3h-0.8V188z M447,181.7c0.3,0,0.6-0.3,0.6-0.6 c0-0.3-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6C446.5,181.4,446.7,181.7,447,181.7z M451.1,188.1c1.5,0,2.4-1,2.4-2.7 c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7C448.7,187.1,449.6,188.1,451.1,188.1z M451.1,187.3c-1,0-1.6-0.7-1.6-2 c0-1.2,0.6-2,1.6-2c1,0,1.6,0.7,1.6,2C452.7,186.6,452.1,187.3,451.1,187.3z M454.8,188h0.8v-3.1c0-0.9,0.5-1.5,1.4-1.5 s1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.3,0.3-1.6,0.9h-0.1v-0.8h-0.8V188z M463.7,185.6v-0.8h-3.2v0.8 H463.7z M468.3,188h0.9v-1.5h1v-0.8h-1V181h-1.3c-1.3,1.9-2.4,3.7-3,4.8v0.8h3.4V188z M465.8,185.7c0.8-1.4,1.8-2.9,2.5-3.9h0.1v4 L465.8,185.7L465.8,185.7z"}),Object(w.jsx)("path",{className:"titleBox",d:"M300,153.5h231c1.9,0,3.5,1.6,3.5,3.5v14c0,1.9-1.6,3.5-3.5,3.5H300c-1.9,0-3.5-1.6-3.5-3.5v-14 C296.5,155.1,298.1,153.5,300,153.5z"}),Object(w.jsx)("path",{className:"titleCopy",d:"M306.3,168v-6h0.1l4.3,6h1.2v-8.5h-1.3v6h-0.1l-4.3-6h-1.2v8.5H306.3z M313.8,168h1.3v-6.4h-1.3V168z M314.5,160.5c0.5,0,0.8-0.3,0.8-0.8c0-0.4-0.3-0.8-0.8-0.8c-0.5,0-0.8,0.3-0.8,0.8C313.7,160.2,314,160.5,314.5,160.5z M318.2,164.3L318.2,164.3l-0.1-5.2h-1.3v8.9h1.3v-2.3l0.6-0.5l2.2,2.8h1.5l-2.8-3.6l2.6-2.7h-1.5L318.2,164.3z M325.8,162.6 c0.9,0,1.5,0.7,1.6,1.7h-3.2C324.2,163.2,324.8,162.6,325.8,162.6z M327.3,166.3c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8 v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3c1.5,0,2.5-0.7,2.8-1.8H327.3z M334.6,160.7h1.9 c1,0,1.6,0.6,1.6,1.5c0,0.9-0.6,1.5-1.6,1.5h-1.9V160.7z M334.6,164.8h1.9l1.7,3.2h1.5l-1.9-3.4c1-0.4,1.6-1.3,1.6-2.4 c0-1.6-1.1-2.6-2.8-2.6h-3.3v8.5h1.3V164.8z M343.5,162.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C341.9,163.2,342.6,162.6,343.5,162.6z M345.1,166.3c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3 s1.1,3.3,2.9,3.3c1.5,0,2.5-0.7,2.8-1.8H345.1z M353,161.6h-1.3l-1.6,5H350l-1.6-5h-1.3l2.3,6.4h1.4L353,161.6z M356.6,168.1 c1.9,0,3-1.2,3-3.3c0-2.1-1.1-3.3-3-3.3c-1.9,0-3,1.3-3,3.3C353.6,166.9,354.7,168.1,356.6,168.1z M356.6,167 c-1.1,0-1.7-0.8-1.7-2.2c0-1.4,0.6-2.2,1.7-2.2c1.1,0,1.7,0.8,1.7,2.2C358.3,166.2,357.7,167,356.6,167z M361.1,168h1.3v-8.9h-1.3 V168z M369.5,161.6h-1.3v3.7c0,1-0.6,1.6-1.6,1.6c-0.9,0-1.3-0.5-1.3-1.5v-3.8h-1.3v4.1c0,1.5,0.8,2.4,2.2,2.4 c1,0,1.6-0.4,1.9-1.1h0.1v1h1.2V161.6z M371.6,160v1.6h-1v1.1h1v3.6c0,1.2,0.6,1.7,2,1.7c0.2,0,0.5,0,0.7-0.1v-1 c-0.2,0-0.3,0-0.5,0c-0.6,0-0.9-0.3-0.9-1v-3.3h1.4v-1.1h-1.4V160H371.6z M375.7,168h1.3v-6.4h-1.3V168z M376.3,160.5 c0.5,0,0.8-0.3,0.8-0.8c0-0.4-0.3-0.8-0.8-0.8c-0.5,0-0.8,0.3-0.8,0.8C375.5,160.2,375.8,160.5,376.3,160.5z M381.4,168.1 c1.9,0,3-1.2,3-3.3c0-2.1-1.1-3.3-3-3.3c-1.9,0-3,1.3-3,3.3C378.3,166.9,379.5,168.1,381.4,168.1z M381.4,167 c-1.1,0-1.7-0.8-1.7-2.2c0-1.4,0.6-2.2,1.7-2.2c1.1,0,1.7,0.8,1.7,2.2C383.1,166.2,382.4,167,381.4,167z M385.8,168h1.3v-3.7 c0-1,0.6-1.6,1.5-1.6c0.9,0,1.4,0.5,1.4,1.5v3.8h1.3v-4.1c0-1.5-0.8-2.4-2.2-2.4c-1,0-1.6,0.4-1.9,1.1H387v-1h-1.2V168z M399.9,168h1.3v-1.6h1.2v-1.2h-1.2v-5.6h-1.9c-1.5,2.3-2.8,4.2-3.5,5.6v1.2h4.1V168z M397,165.1c1-1.7,2-3.2,2.8-4.4h0.1v4.5 L397,165.1L397,165.1z"})),Object(w.jsx)("g",{id:"result2"},Object(w.jsx)("path",{className:"outerBox",d:"M215,224.5h352c1.9,0,3.5,1.6,3.5,3.5v66c0,1.9-1.6,3.5-3.5,3.5H215c-1.9,0-3.5-1.6-3.5-3.5v-66 C211.5,226.1,213.1,224.5,215,224.5z"}),Object(w.jsx)("path",{className:"url",d:"M304.8,270h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9 c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V270z M311,263.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7 c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H311z M314.5,263.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4 c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H314.5z M320.3,264.6 c-0.7,0-1.3,0.4-1.7,1h-0.1v-0.9h-0.8v7h0.8v-2.5h0.1c0.3,0.6,0.9,0.9,1.6,0.9c1.3,0,2.2-1.1,2.2-2.7 C322.5,265.7,321.6,264.6,320.3,264.6z M320.1,269.3c-0.9,0-1.5-0.8-1.5-2c0-1.2,0.6-2,1.6-2c1,0,1.5,0.7,1.5,2 C321.6,268.6,321,269.3,320.1,269.3z M323.6,266.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8 c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2 c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C324.4,264.6,323.6,265.3,323.6,266.2z M329.5,270c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,269.8,329.2,270,329.5,270z M329.5,266.3c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,266,329.2,266.3,329.5,266.3z M331.6,271.5l2.6-8.9h-0.7l-2.6,8.9H331.6z M334.9,271.5l2.6-8.9h-0.7l-2.6,8.9H334.9z M338,266.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C338.9,264.6,338,265.3,338,266.2z M343.3,270h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5 c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V270z M351.3,270.1 c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7C348.9,269.1,349.8,270.1,351.3,270.1z M351.3,269.3 c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2s1.6,0.7,1.6,2C352.8,268.6,352.3,269.3,351.3,269.3z M357,265.4c0.8,0,1.4,0.6,1.4,1.5 h-2.9C355.6,266,356.2,265.4,357,265.4z M358.4,268.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3 c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H358.4z M360.4,266.2 c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C361.3,264.6,360.4,265.3,360.4,266.2z M366.4,270c0.4,0,0.6-0.3,0.6-0.6 c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6C365.7,269.8,366,270,366.4,270z M372.7,266.3c-0.1-0.9-0.9-1.7-2.2-1.7 c-1.5,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.3,0,2.1-0.7,2.2-1.7h-0.8c-0.2,0.6-0.6,0.9-1.4,0.9c-0.9,0-1.5-0.8-1.5-2 c0-1.2,0.6-1.9,1.5-1.9c0.8,0,1.2,0.4,1.4,0.9H372.7z M376,270.1c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7 C373.6,269.1,374.5,270.1,376,270.1z M376,269.3c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2c1,0,1.6,0.7,1.6,2 C377.6,268.6,377,269.3,376,269.3z M379.7,270h0.8v-3.3c0-0.7,0.5-1.3,1.2-1.3c0.7,0,1.1,0.4,1.1,1v3.6h0.8v-3.4 c0-0.7,0.5-1.2,1.2-1.2c0.7,0,1.1,0.4,1.1,1.2v3.4h0.8v-3.6c0-1.1-0.6-1.7-1.7-1.7c-0.7,0-1.3,0.4-1.6,0.9h-0.1 c-0.2-0.5-0.7-0.9-1.5-0.9c-0.7,0-1.2,0.3-1.5,0.9h-0.1v-0.8h-0.8V270z M388.2,271.5l2.6-8.9h-0.7l-2.6,8.9H388.2z M393.1,269.4 c-0.6,0-1.1-0.3-1.1-0.8c0-0.5,0.4-0.8,1.2-0.9l1.4-0.1v0.5C394.6,268.8,394,269.4,393.1,269.4z M393,270.1c0.7,0,1.3-0.3,1.6-0.9 h0.1v0.8h0.8v-3.6c0-1.1-0.7-1.8-2-1.8c-1.1,0-2,0.6-2.1,1.4h0.8c0.1-0.4,0.6-0.7,1.2-0.7c0.8,0,1.2,0.4,1.2,1v0.5l-1.5,0.1 c-1.2,0.1-1.9,0.6-1.9,1.6C391.2,269.5,391.9,270.1,393,270.1z M396.8,266.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2 c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6 c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C397.6,264.6,396.8,265.3,396.8,266.2z M402.1,270h0.8v-5.3h-0.8V270z M402.5,263.7c0.3,0,0.6-0.3,0.6-0.6c0-0.3-0.3-0.6-0.6-0.6 c-0.3,0-0.6,0.3-0.6,0.6C401.9,263.4,402.2,263.7,402.5,263.7z M408.8,266.3c-0.1-0.9-0.9-1.7-2.2-1.7c-1.5,0-2.4,1.1-2.4,2.7 c0,1.7,0.9,2.7,2.4,2.7c1.3,0,2.1-0.7,2.2-1.7h-0.8c-0.2,0.6-0.6,0.9-1.4,0.9c-0.9,0-1.5-0.8-1.5-2c0-1.2,0.6-1.9,1.5-1.9 c0.8,0,1.2,0.4,1.4,0.9H408.8z M409.8,266.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8 c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2 c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C410.6,264.6,409.8,265.3,409.8,266.2z M418.2,267.6v-0.8H415v0.8H418.2z M421.8,269.2c-1,0-1.5-0.7-1.5-1.9 c0-1.1,0.5-1.9,1.5-1.9c1,0,1.6,0.7,1.6,1.9C423.3,268.4,422.8,269.2,421.8,269.2z M421.8,272c1.4,0,2.3-0.8,2.3-1.9v-5.4h-0.8 v0.8h-0.1c-0.3-0.6-1-0.9-1.7-0.9c-1.4,0-2.2,1.1-2.2,2.6s0.8,2.6,2.2,2.6c0.7,0,1.3-0.3,1.7-0.9h0.1v1c0,0.8-0.6,1.2-1.5,1.2 c-0.8,0-1.2-0.3-1.3-0.7h-0.9C419.7,271.5,420.5,272,421.8,272z M427.7,265.4c0.8,0,1.4,0.6,1.4,1.5h-2.9 C426.3,266,426.9,265.4,427.7,265.4z M429.1,268.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3 c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H429.1z M431.3,270h0.8v-7.4h-0.8V270z M436.8,267.6v-0.8h-3.2v0.8H436.8z M442.5,264.7h-0.9l-1.4,4.3h-0.1l-1.4-4.3h-0.9l1.9,5.3h0.9L442.5,264.7z M445.4,265.4 c0.8,0,1.4,0.6,1.4,1.5h-2.9C444,266,444.6,265.4,445.4,265.4z M446.8,268.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0 h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H446.8z M448.9,270h0.8v-3.1 c0-0.9,0.5-1.5,1.4-1.5c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.3,0.3-1.6,0.9h-0.1v-0.8h-0.8V270z M455,263.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2 v-0.7h-1.2v-1.4H455z M462.5,264.7h-0.8v3.1c0,0.9-0.5,1.5-1.4,1.5c-0.8,0-1.2-0.4-1.2-1.4v-3.2h-0.8v3.4c0,1.2,0.6,1.9,1.8,1.9 c0.8,0,1.4-0.3,1.6-0.9h0.1v0.8h0.8V264.7z M463.9,270h0.8v-3.3c0-0.7,0.6-1.3,1.4-1.3c0.2,0,0.5,0,0.5,0v-0.8c-0.1,0-0.3,0-0.4,0 c-0.7,0-1.3,0.4-1.5,0.9h-0.1v-0.8h-0.8V270z M469.6,265.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C468.2,266,468.8,265.4,469.6,265.4z M471,268.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7 c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H471z"}),Object(w.jsx)("g",{className:"shoe"},Object(w.jsx)("path",{className:"st4",d:"M266.1,242.3c-0.7,0.5-1.4,1.4-1.9,2.4c-0.3,0.5-0.5,1-0.6,1.1c-0.3,0.2-0.5,0.7-0.5,1.1 c0,0.3-0.1,0.5-0.4,0.7c-0.7,0.6-1.4,2-1.8,3.5c-0.1,0.3-0.2,0.5-0.5,0.6c-0.6,0.3-0.8,0.7-0.8,1.5c0,0.7,0,0.7-0.4,1 c-0.2,0.1-0.5,0.3-0.5,0.3c-0.2,0-0.8,0.5-1,0.9c-0.2,0.5-1.1,1.2-1.6,1.2c-0.4,0.1-1,0.4-1.1,0.7c-0.1,0.3-1.7,0.9-2.4,0.9 c-0.4,0-0.9,0.2-1.3,0.5c-0.2,0.2-1.6,0.7-2,0.7c-0.4,0-0.7,0.1-1.1,0.5c-0.4,0.4-1.7,0.8-2.4,0.9c-0.5,0-0.6,0.1-1.1,0.6 c-0.3,0.3-0.6,0.7-0.6,0.9c-0.1,0.2-0.1,0.4-0.1,0.5c0,0-0.5,0.1-1.1,0.2c-1.6,0.3-4.2,0.6-7,0.8c-2.8,0.2-3.2,0.3-3.8,0.7 c-0.6,0.5-1.3,1.9-1.3,2.8c0,0.1-0.1,0.3-0.1,0.3c-0.3,0.1-0.5,0.6-0.6,1.5c-0.2,1.6,0,2.4,1.2,3.5c1.9,1.8,6.3,3,12.2,3.6 c0.7,0.1,1.5,0.2,1.8,0.3c0.3,0.1,0.8,0.2,1.1,0.2c1.6,0,3,0.1,3.6,0.1c0.4,0.1,0.8,0,1.1,0c0.4-0.1,0.5-0.1,0.8,0 c0.5,0.2,3.4,0.3,4.1,0.1c0.4-0.1,0.6-0.1,1.1,0c0.3,0.1,0.7,0.1,0.8,0c0.1,0,0.8-0.1,1.5-0.1c0.7,0,1.4,0,1.6,0 c0.2,0,0.6,0,0.9,0c0.3,0,3.1,0,6.2,0c3.1,0,5.8,0,6,0c0.6,0,4.2-0.1,4.3-0.2c0.1,0,0.6-0.1,1.2-0.1c2.3-0.1,2.9-0.1,3.2-0.3 c0.2-0.1,0.5-0.2,0.7-0.2c0.6,0,1.5-0.6,1.6-1.2c0-0.2,0.1-1.4,0.1-2.6c0-2.1,0-2.3-0.1-2.6c-0.2-0.3-0.2-0.4-0.1-0.8 c0.2-0.7,0.2-4.6,0.1-6.4c-0.1-1.8-0.4-3.9-0.8-5.9c-0.3-1.8-1.3-5.5-1.5-5.9c-0.2-0.5-0.5-0.6-1.3-0.4 c-1.5,0.3-4.3-0.2-6.9-1.4l-0.9-0.4l-0.2-0.8c-0.3-1.2-1.2-2.4-2.8-3.6c-1.3-1-3.3-2.2-3.7-2.2 C266.6,242,266.4,242.1,266.1,242.3z M267.7,242.8c2.8,1.6,4.9,3.5,5.2,4.9c0.1,0.3,0,0.3-0.6-0.3c-0.4-0.3-1.1-0.8-1.5-1 c-0.7-0.4-0.9-0.4-1.7-0.4c-0.8,0-1,0-1.5,0.3c-0.7,0.4-1.6,1.2-2.3,2.1c-0.2,0.4-0.8,1.1-1.3,1.5c-0.8,0.8-1.3,1.7-1.3,2.1 c0,0.2,0,0.2-0.6-0.1c-0.3-0.2-0.6-0.3-0.7-0.3c-0.2,0-0.2-0.3,0-1.1c0.4-1.4,1.1-2.5,1.7-2.9c0.3-0.2,0.3-0.3,0.3-0.4 c-0.1-0.4,0.1-1,0.4-1.3c0.2-0.2,0.4-0.6,0.6-1c0.4-0.9,1.2-2,1.8-2.4c0.3-0.2,0.5-0.3,0.6-0.3 C266.8,242.3,267.3,242.5,267.7,242.8z M268.8,247.7c0,0.3-0.2,0.4-0.4,0.2c-0.1-0.1-0.1-0.2,0-0.3 C268.4,247.4,268.7,247.5,268.8,247.7z M267.4,249.1c0.4,0.2,3.4,2.3,5.1,3.6c2.2,1.7,4.2,3.5,6.4,5.6c2.9,2.9,3.8,3.6,5.1,3.7 l0.6,0.1l0.1,2c0.1,3-0.1,5.2-0.6,5.6c-0.6,0.5-2.3,0.7-7.3,0.9c-1.7,0.1-3.7,0.1-4.4,0.2l-1.2,0.1l0.2-0.6 c0.1-0.4,0.3-1.2,0.4-1.8c0.7-4.6-1.2-9.2-5-12.5c-1.9-1.7-3.4-3-3.5-3.2c-0.1-0.3,0.3-1.2,0.8-1.8 C265.1,249.2,266.3,248.6,267.4,249.1z M261.8,252.1c0.5,0.2,0.8,0.4,1.5,1.1c0.5,0.5,1.2,1.2,1.6,1.5l0.7,0.6v0.6 c0,0.8-0.1,1.3-0.5,1.7c-0.3,0.3-1.4,0.7-8.8,3.2c-4.6,1.6-8.8,3-9.2,3.1c-0.4,0.1-1.1,0.2-1.5,0.2c-0.7,0-0.7,0-0.9-0.2 c-0.1-0.2-0.2-0.5-0.2-0.9c0-0.8,0.2-1.1,0.3-0.5c0.2,0.6,0.6,0.9,1,0.9c0.6,0,0.7-0.4,0.7-1.4l0-0.8l0.8-0.3 c0.5-0.2,0.8-0.3,0.9-0.3c0,0,0.1,0.3,0.1,0.5c0.1,0.6,0.4,1.2,0.7,1.3c0.3,0.1,0.8-0.1,0.9-0.5c0.1-0.3,0.1-1.1-0.1-1.8 c-0.1-0.2,0-0.3,0.8-0.6l0.9-0.3l0.1,0.4c0.2,0.6,0.5,1.2,0.7,1.3c0.4,0.2,0.8,0.1,1-0.1c0.2-0.3,0.2-1.1,0-1.7 c-0.1-0.2-0.1-0.5-0.1-0.5c0.1-0.1,1.7-0.6,1.7-0.6c0,0,0.1,0.3,0.3,0.7c0.3,0.8,0.7,1.2,1.1,1.2c0.8,0,1-0.9,0.5-2.4l-0.2-0.6 l0.5-0.5c0.3-0.2,0.5-0.4,0.6-0.3c0.1,0.2,0.8,1.4,1,1.6c0.1,0.1,0.4,0.3,0.5,0.4c0.3,0.1,0.3,0.1,0.5,0c0.5-0.3,0.5-1.1,0-2.2 c-0.2-0.4-0.4-0.8-0.5-0.9c-0.2-0.3-0.2-0.3,0.1-0.6c0.2-0.2,0.4-0.3,0.5-0.3c0.1,0,0.4,0.4,0.8,0.8c1,1.4,2.1,2,2.7,1.7 c0.3-0.2,0.3-0.4,0-1c-0.4-0.8-2.2-3.2-2.6-3.6c-0.1-0.1-0.1-0.1,0-0.2C261.1,251.9,261.2,251.9,261.8,252.1z M244.2,263.4 c0.1,0.5,0.3,0.9,0.6,1c0.3,0.1,1.3,2.1,1.5,3c0.2,0.7,0,1-0.5,1.4c-0.7,0.4-1.4,0.2-2.5-0.9c-1.2-1.2-2.5-1.6-5.4-1.8 c-1.7-0.2-3.1-0.4-3.7-0.7c-0.4-0.2-0.9-0.7-0.9-0.8c0-0.1,0.7-0.2,2.6-0.3c2.6-0.2,6-0.6,7.3-0.9c0.4-0.1,0.8-0.2,0.8-0.2 C244.1,263.2,244.1,263.3,244.2,263.4z M231.3,268.3c0.5,0.5,2,1.3,3.2,1.7c1.8,0.6,3.7,1,6.5,1.3c4.8,0.6,7.7,0.8,11.9,0.8 c4,0,4.9,0,12.9-0.7c1-0.1,2.7-0.2,3.7-0.2c1.9-0.1,2.8-0.2,8.3-0.3c4.1-0.1,5.6-0.4,6.5-0.9c0.1-0.1,0.3-0.1,0.3-0.1 c0.1,0.1,0,4.8-0.1,5.1c-0.1,0.3-0.7,0.7-1.2,0.7c-0.2,0-0.6,0.1-0.8,0.2c-0.4,0.2-0.8,0.2-3,0.3c-0.5,0-1.5,0.1-2,0.1 c-0.6,0-2.6,0.1-4.5,0.1s-3.6,0-3.8,0c-0.2,0-1.1,0-1.9,0c-0.8,0-1.8,0-2,0c-0.8,0-1.7,0-2,0c-0.1,0-0.6,0-0.9,0.1 c-0.4,0-0.8,0-1-0.1c-0.3-0.1-0.4-0.1-0.7,0.1c-0.3,0.1-0.5,0.2-1.1,0.1c-0.4,0-0.8-0.1-0.8-0.1c-0.8,0.1-1.5,0.1-1.9,0 c-0.4-0.1-0.5-0.1-0.6,0c-0.2,0.2-3.5,0.2-4.2,0c-0.4-0.2-0.5-0.2-1.1,0c-0.5,0.1-0.7,0.1-1.2,0c-0.5-0.1-0.7-0.1-0.9-0.1 c-0.2,0.1-0.6,0.1-0.9,0c-0.3,0-0.9-0.1-1.2-0.1c-0.3,0-0.9-0.1-1.3-0.2c-0.4-0.1-1-0.2-1.3-0.2c-1,0-4.6-0.5-6.6-1 c-2.5-0.6-4.9-1.6-5.9-2.6c-0.7-0.7-0.9-1.1-1-1.9c-0.1-0.8,0.2-2.5,0.4-2.5C230.8,267.9,231,268.1,231.3,268.3z"}),Object(w.jsx)("path",{className:"st4",d:"M265.9,249.8c-0.3,0.3-0.1,0.7,0.4,0.7c0.3,0,0.4-0.4,0.2-0.7C266.3,249.6,266.1,249.6,265.9,249.8z"}),Object(w.jsx)("path",{className:"st4",d:"M264.3,251.6c-0.1,0.2-0.1,0.6,0.1,0.7c0.4,0.2,0.7-0.1,0.6-0.6C264.9,251.6,264.4,251.5,264.3,251.6z"})),Object(w.jsx)("path",{className:"titleBox",d:"M300,236.5h231c1.9,0,3.5,1.6,3.5,3.5v14c0,1.9-1.6,3.5-3.5,3.5H300c-1.9,0-3.5-1.6-3.5-3.5v-14 C296.5,238.1,298.1,236.5,300,236.5z"}),Object(w.jsx)("path",{className:"titleCopy",d:"M310.5,251h1.4l-3.1-8.5h-1.4l-3.1,8.5h1.3l0.8-2.2h3.2L310.5,251z M308.1,244.1L308.1,244.1l1.3,3.6h-2.6 L308.1,244.1z M312.9,246.4c0,0.9,0.6,1.5,1.8,1.8l1.1,0.3c0.6,0.2,0.9,0.4,0.9,0.8c0,0.5-0.6,0.9-1.3,0.9c-0.8,0-1.2-0.3-1.4-0.8 h-1.3c0.1,1.1,1.1,1.8,2.6,1.8c1.5,0,2.6-0.8,2.6-2c0-0.9-0.6-1.5-1.8-1.7l-1.1-0.2c-0.7-0.2-1-0.4-1-0.8c0-0.5,0.5-0.8,1.2-0.8 c0.7,0,1.2,0.3,1.3,0.8h1.2c-0.1-1.1-1.1-1.8-2.5-1.8C313.9,244.5,312.9,245.3,312.9,246.4z M319.4,251h1.3v-6.4h-1.3V251z M320,243.5c0.5,0,0.8-0.3,0.8-0.8c0-0.4-0.3-0.8-0.8-0.8c-0.5,0-0.8,0.3-0.8,0.8C319.2,243.2,319.5,243.5,320,243.5z M327.8,246.7c-0.2-1.3-1.1-2.2-2.7-2.2c-1.9,0-3,1.2-3,3.3c0,2.1,1.1,3.3,3,3.3c1.6,0,2.6-0.9,2.7-2.2h-1.2c-0.2,0.7-0.7,1-1.5,1 c-1,0-1.7-0.8-1.7-2.2c0-1.4,0.6-2.2,1.7-2.2c0.8,0,1.4,0.5,1.5,1.1H327.8z M328.9,246.4c0,0.9,0.6,1.5,1.8,1.8l1.1,0.3 c0.6,0.2,0.9,0.4,0.9,0.8c0,0.5-0.6,0.9-1.3,0.9c-0.8,0-1.2-0.3-1.4-0.8h-1.3c0.1,1.1,1.1,1.8,2.6,1.8c1.5,0,2.6-0.8,2.6-2 c0-0.9-0.6-1.5-1.8-1.7l-1.1-0.2c-0.7-0.2-1-0.4-1-0.8c0-0.5,0.5-0.8,1.2-0.8c0.7,0,1.2,0.3,1.3,0.8h1.2c-0.1-1.1-1.1-1.8-2.5-1.8 C330,244.5,328.9,245.3,328.9,246.4z M345.9,247.7v-1.1h-3.5v1.1h2.2v0.2c0,1.3-1,2.1-2.3,2.1c-1.6,0-2.6-1.2-2.6-3.2 c0-2,1-3.2,2.6-3.2c1.2,0,2,0.6,2.3,1.6h1.3c-0.3-1.7-1.7-2.8-3.6-2.8c-2.4,0-3.9,1.7-3.9,4.4c0,2.7,1.5,4.4,3.9,4.4 C344.5,251.2,345.9,249.8,345.9,247.7z M350.1,245.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C348.5,246.2,349.2,245.6,350.1,245.6z M351.7,249.3c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3 s1.1,3.3,2.9,3.3c1.5,0,2.5-0.7,2.8-1.8H351.7z M354.4,251h1.3v-8.9h-1.3V251z M364.6,251l3-8.5h-1.4l-2.3,6.8h-0.1l-2.3-6.8h-1.4 l3,8.5H364.6z M370.8,245.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C369.2,246.2,369.8,245.6,370.8,245.6z M372.3,249.3 c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3 c1.5,0,2.5-0.7,2.8-1.8H372.3z M375,251h1.3v-3.7c0-1,0.6-1.6,1.5-1.6c0.9,0,1.4,0.5,1.4,1.5v3.8h1.3v-4.1c0-1.5-0.8-2.4-2.2-2.4 c-1,0-1.6,0.4-1.9,1.1h-0.1v-1H375V251z M382.5,243v1.6h-1v1.1h1v3.6c0,1.2,0.6,1.7,2,1.7c0.2,0,0.5,0,0.7-0.1v-1 c-0.2,0-0.3,0-0.5,0c-0.6,0-0.9-0.3-0.9-1v-3.3h1.4v-1.1h-1.4V243H382.5z M391.9,244.6h-1.3v3.7c0,1-0.6,1.6-1.6,1.6 c-0.9,0-1.3-0.5-1.3-1.5v-3.8h-1.3v4.1c0,1.5,0.8,2.4,2.2,2.4c1,0,1.6-0.4,1.9-1.1h0.1v1h1.2V244.6z M393.6,251h1.3v-3.8 c0-0.9,0.7-1.5,1.6-1.5c0.2,0,0.6,0,0.7,0.1v-1.2c-0.1,0-0.4-0.1-0.6-0.1c-0.8,0-1.5,0.5-1.7,1.1h-0.1v-1h-1.2V251z M400.8,245.6 c0.9,0,1.5,0.7,1.6,1.7h-3.2C399.2,246.2,399.8,245.6,400.8,245.6z M402.3,249.3c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8 v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3c1.5,0,2.5-0.7,2.8-1.8H402.3z"})),Object(w.jsx)("g",{id:"result3"},Object(w.jsx)("rect",{x:"304",y:"361",className:"blockIn",width:"239",height:"7"}),Object(w.jsx)("path",{className:"outerBox",d:"M215,308.5h352c1.9,0,3.5,1.6,3.5,3.5v66c0,1.9-1.6,3.5-3.5,3.5H215c-1.9,0-3.5-1.6-3.5-3.5v-66 C211.5,310.1,213.1,308.5,215,308.5z"}),Object(w.jsx)("path",{className:"url",d:"M304.8,353h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9 c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V353z M311,346.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7 c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H311z M314.5,346.4v1.4h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4 c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4H314.5z M320.3,347.6 c-0.7,0-1.3,0.4-1.7,1h-0.1v-0.9h-0.8v7h0.8v-2.5h0.1c0.3,0.6,0.9,0.9,1.6,0.9c1.3,0,2.2-1.1,2.2-2.7 C322.5,348.7,321.6,347.6,320.3,347.6z M320.1,352.3c-0.9,0-1.5-0.8-1.5-2c0-1.2,0.6-2,1.6-2c1,0,1.5,0.7,1.5,2 C321.6,351.6,321,352.3,320.1,352.3z M323.6,349.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8 c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2 c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C324.4,347.6,323.6,348.3,323.6,349.2z M329.5,353c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,352.8,329.2,353,329.5,353z M329.5,349.3c0.4,0,0.6-0.3,0.6-0.6c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6 C328.9,349,329.2,349.3,329.5,349.3z M331.6,354.5l2.6-8.9h-0.7l-2.6,8.9H331.6z M334.9,354.5l2.6-8.9h-0.7l-2.6,8.9H334.9z M338,349.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C338.9,347.6,338,348.3,338,349.2z M343.3,353h0.8v-3.1c0-0.9,0.5-1.5,1.5-1.5 c0.8,0,1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.4,0.3-1.6,0.9h-0.1v-2.9h-0.8V353z M351.3,353.1 c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7C348.9,352.1,349.8,353.1,351.3,353.1z M351.3,352.3 c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2s1.6,0.7,1.6,2C352.8,351.6,352.3,352.3,351.3,352.3z M357,348.4c0.8,0,1.4,0.6,1.4,1.5 h-2.9C355.6,349,356.2,348.4,357,348.4z M358.4,351.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3 c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H358.4z M360.4,349.2 c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9 c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8 c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4C361.3,347.6,360.4,348.3,360.4,349.2z M366.4,353c0.4,0,0.6-0.3,0.6-0.6 c0-0.4-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6C365.7,352.8,366,353,366.4,353z M372.7,349.3c-0.1-0.9-0.9-1.7-2.2-1.7 c-1.5,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.3,0,2.1-0.7,2.2-1.7h-0.8c-0.2,0.6-0.6,0.9-1.4,0.9c-0.9,0-1.5-0.8-1.5-2 c0-1.2,0.6-1.9,1.5-1.9c0.8,0,1.2,0.4,1.4,0.9H372.7z M376,353.1c1.5,0,2.4-1,2.4-2.7c0-1.7-0.9-2.7-2.4-2.7c-1.5,0-2.4,1-2.4,2.7 C373.6,352.1,374.5,353.1,376,353.1z M376,352.3c-1,0-1.6-0.7-1.6-2c0-1.2,0.6-2,1.6-2c1,0,1.6,0.7,1.6,2 C377.6,351.6,377,352.3,376,352.3z M379.7,353h0.8v-3.3c0-0.7,0.5-1.3,1.2-1.3c0.7,0,1.1,0.4,1.1,1v3.6h0.8v-3.4 c0-0.7,0.5-1.2,1.2-1.2c0.7,0,1.1,0.4,1.1,1.2v3.4h0.8v-3.6c0-1.1-0.6-1.7-1.7-1.7c-0.7,0-1.3,0.4-1.6,0.9h-0.1 c-0.2-0.5-0.7-0.9-1.5-0.9c-0.7,0-1.2,0.3-1.5,0.9h-0.1v-0.8h-0.8V353z M388.2,354.5l2.6-8.9h-0.7l-2.6,8.9H388.2z M393.1,352.4 c-0.6,0-1.1-0.3-1.1-0.8c0-0.5,0.4-0.8,1.2-0.9l1.4-0.1v0.5C394.6,351.8,394,352.4,393.1,352.4z M393,353.1c0.7,0,1.3-0.3,1.6-0.9 h0.1v0.8h0.8v-3.6c0-1.1-0.7-1.8-2-1.8c-1.1,0-2,0.6-2.1,1.4h0.8c0.1-0.4,0.6-0.7,1.2-0.7c0.8,0,1.2,0.4,1.2,1v0.5l-1.5,0.1 c-1.2,0.1-1.9,0.6-1.9,1.6C391.2,352.5,391.9,353.1,393,353.1z M398.9,353.1c0.7,0,1.4-0.3,1.7-0.9h0.1v0.8h0.8v-7.4h-0.8v2.9 h-0.1c-0.3-0.6-0.9-0.9-1.6-0.9c-1.3,0-2.2,1.1-2.2,2.7C396.6,352,397.5,353.1,398.9,353.1z M399,348.4c1,0,1.5,0.8,1.5,2 c0,1.2-0.6,2-1.5,2c-1,0-1.5-0.7-1.5-2C397.5,349.1,398.1,348.4,399,348.4z M403,353h0.8v-5.3H403V353z M403.4,346.7 c0.3,0,0.6-0.3,0.6-0.6c0-0.3-0.3-0.6-0.6-0.6c-0.3,0-0.6,0.3-0.6,0.6C402.8,346.4,403.1,346.7,403.4,346.7z M407.3,353.1 c0.7,0,1.4-0.3,1.7-0.9h0.1v0.8h0.8v-7.4H409v2.9h-0.1c-0.3-0.6-0.9-0.9-1.7-0.9c-1.3,0-2.2,1.1-2.2,2.7 C405,352,405.9,353.1,407.3,353.1z M407.5,348.4c1,0,1.5,0.8,1.5,2c0,1.2-0.6,2-1.5,2c-1,0-1.5-0.7-1.5-2 C405.9,349.1,406.5,348.4,407.5,348.4z M413,352.4c-0.6,0-1.1-0.3-1.1-0.8c0-0.5,0.4-0.8,1.2-0.9l1.4-0.1v0.5 C414.5,351.8,413.8,352.4,413,352.4z M412.8,353.1c0.7,0,1.3-0.3,1.6-0.9h0.1v0.8h0.8v-3.6c0-1.1-0.7-1.8-2-1.8 c-1.1,0-2,0.6-2.1,1.4h0.9c0.1-0.4,0.6-0.7,1.2-0.7c0.8,0,1.2,0.4,1.2,1v0.5L413,350c-1.2,0.1-1.9,0.6-1.9,1.6 C411,352.5,411.8,353.1,412.8,353.1z M416.6,349.2c0,0.8,0.5,1.2,1.4,1.4l0.9,0.2c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8 c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2 c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C417.5,347.6,416.6,348.3,416.6,349.2z M425.1,350.6v-0.8h-3.2v0.8H425.1z M426.4,349.2c0,0.8,0.4,1.2,1.4,1.4l0.9,0.2 c0.6,0.1,0.8,0.4,0.8,0.7c0,0.5-0.5,0.8-1.2,0.8c-0.7,0-1.1-0.3-1.2-0.7h-0.9c0.1,0.9,0.9,1.4,2.1,1.4c1.2,0,2.1-0.6,2.1-1.6 c0-0.8-0.5-1.2-1.5-1.4l-0.8-0.2c-0.6-0.2-0.9-0.4-0.9-0.7c0-0.5,0.5-0.8,1.1-0.8c0.6,0,1,0.3,1.2,0.7h0.8c-0.1-0.9-0.9-1.4-2-1.4 C427.2,347.6,426.4,348.3,426.4,349.2z M434.2,347.6c-0.7,0-1.3,0.4-1.7,1h-0.1v-0.9h-0.8v7h0.8v-2.5h0.1c0.3,0.6,0.9,0.9,1.6,0.9 c1.3,0,2.2-1.1,2.2-2.7C436.4,348.7,435.6,347.6,434.2,347.6z M434,352.3c-0.9,0-1.5-0.8-1.5-2c0-1.2,0.6-2,1.6-2 c1,0,1.5,0.7,1.5,2C435.6,351.6,435,352.3,434,352.3z M439.7,348.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C438.3,349,438.9,348.4,439.7,348.4 z M441.1,351.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7 c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H441.1z M445.4,348.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C443.9,349,444.5,348.4,445.4,348.4z M446.7,351.6c-0.2,0.5-0.7,0.7-1.4,0.7c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7 c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5H446.7z M450.8,353.1c0.7,0,1.4-0.3,1.7-0.9h0.1v0.8h0.8v-7.4h-0.8v2.9h-0.1 c-0.3-0.6-0.9-0.9-1.6-0.9c-1.3,0-2.2,1.1-2.2,2.7C448.6,352,449.5,353.1,450.8,353.1z M451,348.4c1,0,1.5,0.8,1.5,2 c0,1.2-0.6,2-1.5,2c-1,0-1.5-0.7-1.5-2C449.5,349.1,450.1,348.4,451,348.4z M458.1,350.6v-0.8h-3.2v0.8H458.1z M459.7,346.4v1.4 h-0.9v0.7h0.9v3.2c0,1,0.4,1.4,1.5,1.4c0.2,0,0.3,0,0.5,0v-0.7c-0.2,0-0.2,0-0.4,0c-0.5,0-0.8-0.3-0.8-0.9v-3h1.2v-0.7h-1.2v-1.4 H459.7z M462.9,353h0.8v-3.3c0-0.7,0.6-1.3,1.4-1.3c0.2,0,0.5,0,0.5,0v-0.8c-0.1,0-0.3,0-0.4,0c-0.7,0-1.3,0.4-1.5,0.9h-0.1v-0.8 h-0.8V353z M468.2,352.4c-0.6,0-1.1-0.3-1.1-0.8c0-0.5,0.4-0.8,1.2-0.9l1.4-0.1v0.5C469.7,351.8,469.1,352.4,468.2,352.4z M468,353.1c0.7,0,1.3-0.3,1.6-0.9h0.1v0.8h0.8v-3.6c0-1.1-0.7-1.8-2-1.8c-1.1,0-2,0.6-2.1,1.4h0.8c0.1-0.4,0.6-0.7,1.2-0.7 c0.8,0,1.2,0.4,1.2,1v0.5l-1.5,0.1c-1.2,0.1-1.9,0.6-1.9,1.6C466.3,352.5,467,353.1,468,353.1z M472,353h0.8v-5.3H472V353z M472.4,346.7c0.3,0,0.6-0.3,0.6-0.6c0-0.3-0.3-0.6-0.6-0.6s-0.6,0.3-0.6,0.6C471.9,346.4,472.1,346.7,472.4,346.7z M474.4,353 h0.8v-3.1c0-0.9,0.5-1.5,1.4-1.5s1.2,0.5,1.2,1.4v3.2h0.8v-3.4c0-1.2-0.7-1.9-1.8-1.9c-0.8,0-1.3,0.3-1.6,0.9h-0.1v-0.8h-0.8V353z M482.2,348.4c0.8,0,1.4,0.6,1.4,1.5h-2.9C480.8,349,481.4,348.4,482.2,348.4z M483.6,351.6c-0.2,0.5-0.7,0.7-1.4,0.7 c-0.9,0-1.5-0.7-1.5-1.7v0h3.8v-0.3c0-1.6-0.9-2.6-2.3-2.6c-1.4,0-2.4,1.1-2.4,2.7c0,1.7,0.9,2.7,2.4,2.7c1.2,0,2-0.6,2.2-1.5 H483.6z M485.7,353h0.8v-3.3c0-0.7,0.6-1.3,1.4-1.3c0.2,0,0.5,0,0.5,0v-0.8c-0.1,0-0.3,0-0.4,0c-0.7,0-1.3,0.4-1.5,0.9h-0.1v-0.8 h-0.8V353z"}),Object(w.jsx)("g",{className:"shoe"},Object(w.jsx)("path",{className:"st4",d:"M266.1,326.3c-0.7,0.5-1.4,1.4-1.9,2.4c-0.3,0.5-0.5,1-0.6,1.1c-0.3,0.2-0.5,0.7-0.5,1.1 c0,0.3-0.1,0.5-0.4,0.7c-0.7,0.6-1.4,2-1.8,3.5c-0.1,0.4-0.2,0.5-0.5,0.6c-0.6,0.3-0.8,0.7-0.8,1.5c0,0.7,0,0.7-0.4,1 c-0.2,0.2-0.5,0.3-0.5,0.3c-0.2,0-0.8,0.5-1,0.9c-0.2,0.5-1.1,1.2-1.6,1.2c-0.4,0.1-1,0.4-1.1,0.7c-0.1,0.3-1.7,0.9-2.4,0.9 c-0.4,0-0.9,0.2-1.3,0.5c-0.2,0.2-1.6,0.7-2,0.7c-0.4,0-0.7,0.1-1.1,0.5c-0.4,0.4-1.7,0.8-2.4,0.9c-0.5,0-0.6,0.1-1.1,0.6 c-0.3,0.3-0.6,0.7-0.6,0.9c-0.1,0.2-0.1,0.4-0.1,0.5c0,0-0.5,0.1-1.1,0.2c-1.6,0.3-4.2,0.6-7,0.8c-2.8,0.2-3.2,0.3-3.8,0.7 c-0.6,0.5-1.3,1.9-1.3,2.8c0,0.1-0.1,0.3-0.1,0.3c-0.3,0.1-0.5,0.6-0.6,1.5c-0.2,1.6,0,2.4,1.2,3.5c1.9,1.8,6.3,3,12.2,3.6 c0.7,0.1,1.5,0.2,1.8,0.3c0.3,0.1,0.8,0.2,1.1,0.2c1.6,0,3,0.1,3.6,0.1c0.4,0.1,0.8,0,1.1,0c0.4-0.1,0.5-0.1,0.8,0 c0.5,0.2,3.4,0.3,4.1,0.1c0.4-0.1,0.6-0.1,1.1,0c0.3,0.1,0.7,0.1,0.8,0c0.1,0,0.8-0.1,1.5-0.1c0.7,0,1.4,0,1.6,0 c0.2,0,0.6,0,0.9,0c0.3,0,3.1,0,6.2,0c3.1,0,5.8,0,6,0c0.6,0,4.2-0.1,4.3-0.2c0.1,0,0.6-0.1,1.2-0.1c2.3-0.1,2.9-0.1,3.2-0.3 c0.2-0.1,0.5-0.2,0.7-0.2c0.6,0,1.5-0.6,1.6-1.2c0-0.2,0.1-1.4,0.1-2.6c0-2.1,0-2.3-0.1-2.6c-0.2-0.3-0.2-0.4-0.1-0.8 c0.2-0.7,0.2-4.6,0.1-6.4c-0.1-1.8-0.4-3.9-0.8-5.9c-0.3-1.8-1.3-5.5-1.5-5.9c-0.2-0.5-0.5-0.6-1.3-0.4 c-1.5,0.3-4.3-0.2-6.9-1.4l-0.9-0.4l-0.2-0.8c-0.3-1.2-1.2-2.4-2.8-3.6c-1.3-1-3.3-2.2-3.7-2.2 C266.6,326,266.4,326.1,266.1,326.3z M267.7,326.8c2.8,1.6,4.9,3.5,5.2,4.9c0.1,0.3,0,0.3-0.6-0.3c-0.4-0.3-1.1-0.8-1.5-1 c-0.7-0.4-0.9-0.4-1.7-0.4c-0.8,0-1,0-1.5,0.3c-0.7,0.4-1.6,1.2-2.3,2.1c-0.2,0.4-0.8,1.1-1.3,1.5c-0.8,0.8-1.3,1.7-1.3,2.1 c0,0.2,0,0.2-0.6-0.1c-0.3-0.2-0.6-0.3-0.7-0.3c-0.2,0-0.2-0.3,0-1.1c0.4-1.4,1.1-2.5,1.7-2.9c0.3-0.2,0.3-0.3,0.3-0.4 c-0.1-0.4,0.1-1,0.4-1.3c0.2-0.2,0.4-0.6,0.6-1c0.4-0.9,1.2-2,1.8-2.4c0.3-0.2,0.5-0.3,0.6-0.3 C266.8,326.3,267.3,326.5,267.7,326.8z M268.8,331.7c0,0.3-0.2,0.4-0.4,0.2c-0.1-0.1-0.1-0.2,0-0.3 C268.4,331.4,268.7,331.5,268.8,331.7z M267.4,333.1c0.4,0.2,3.4,2.3,5.1,3.6c2.2,1.7,4.2,3.5,6.4,5.6c2.9,2.9,3.8,3.6,5.1,3.7 l0.6,0.1l0.1,2c0.1,3-0.1,5.2-0.6,5.6c-0.6,0.5-2.3,0.7-7.3,0.9c-1.7,0.1-3.7,0.1-4.4,0.2l-1.2,0.1l0.2-0.6 c0.1-0.4,0.3-1.2,0.4-1.8c0.7-4.6-1.2-9.2-5-12.5c-1.9-1.7-3.4-3-3.5-3.2c-0.1-0.3,0.3-1.2,0.8-1.8 C265.1,333.2,266.3,332.6,267.4,333.1z M261.8,336.1c0.5,0.2,0.8,0.4,1.5,1.1c0.5,0.5,1.2,1.2,1.6,1.5l0.7,0.6v0.6 c0,0.8-0.1,1.3-0.5,1.7c-0.3,0.3-1.4,0.7-8.8,3.2c-4.6,1.6-8.8,3-9.2,3.1c-0.4,0.1-1.1,0.2-1.5,0.2c-0.7,0-0.7,0-0.9-0.2 c-0.1-0.2-0.2-0.5-0.2-0.9c0-0.8,0.2-1.1,0.3-0.5c0.2,0.6,0.6,0.9,1,0.9c0.6,0,0.7-0.4,0.7-1.4l0-0.8l0.8-0.3 c0.5-0.2,0.8-0.3,0.9-0.3c0,0,0.1,0.3,0.1,0.5c0.1,0.6,0.4,1.2,0.7,1.3c0.3,0.1,0.8-0.1,0.9-0.5c0.1-0.3,0.1-1.1-0.1-1.8 c-0.1-0.2,0-0.3,0.8-0.6l0.9-0.3l0.1,0.4c0.2,0.6,0.5,1.2,0.7,1.3c0.4,0.2,0.8,0.1,1-0.1c0.2-0.3,0.2-1.1,0-1.7 c-0.1-0.2-0.1-0.5-0.1-0.5c0.1-0.1,1.7-0.6,1.7-0.6c0,0,0.1,0.3,0.3,0.7c0.3,0.8,0.7,1.2,1.1,1.2c0.8,0,1-0.9,0.5-2.4l-0.2-0.6 l0.5-0.5c0.3-0.2,0.5-0.4,0.6-0.3c0.1,0.2,0.8,1.4,1,1.6c0.1,0.1,0.4,0.3,0.5,0.4c0.3,0.1,0.3,0.1,0.5,0c0.5-0.3,0.5-1.1,0-2.2 c-0.2-0.4-0.4-0.8-0.5-0.9c-0.2-0.3-0.2-0.3,0.1-0.6c0.2-0.2,0.4-0.3,0.5-0.3c0.1,0,0.4,0.4,0.8,0.8c1,1.4,2.1,2,2.7,1.7 c0.3-0.2,0.3-0.4,0-1c-0.4-0.8-2.2-3.2-2.6-3.6c-0.1-0.1-0.1-0.1,0-0.2C261.1,335.9,261.2,335.9,261.8,336.1z M244.2,347.4 c0.1,0.5,0.3,0.9,0.6,1c0.3,0.1,1.3,2.1,1.5,3c0.2,0.7,0,1-0.5,1.4c-0.7,0.4-1.4,0.2-2.5-0.9c-1.2-1.2-2.5-1.6-5.4-1.8 c-1.7-0.2-3.1-0.4-3.7-0.7c-0.4-0.2-0.9-0.7-0.9-0.8c0-0.1,0.7-0.2,2.6-0.3c2.6-0.2,6-0.6,7.3-0.9c0.4-0.1,0.8-0.2,0.8-0.2 C244.1,347.2,244.1,347.3,244.2,347.4z M231.3,352.3c0.5,0.5,2,1.3,3.2,1.7c1.8,0.6,3.7,1,6.5,1.3c4.8,0.6,7.7,0.8,11.9,0.8 c4,0,4.9,0,12.9-0.7c1-0.1,2.7-0.2,3.7-0.2c1.9-0.1,2.8-0.2,8.3-0.3c4.1-0.1,5.6-0.4,6.5-0.9c0.1-0.1,0.3-0.1,0.3-0.1 c0.1,0.1,0,4.8-0.1,5.1c-0.1,0.3-0.7,0.7-1.2,0.7c-0.2,0-0.6,0.1-0.8,0.2c-0.4,0.2-0.8,0.2-3,0.3c-0.5,0-1.5,0.1-2,0.1 c-0.6,0-2.6,0.1-4.5,0.1s-3.6,0-3.8,0c-0.2,0-1.1,0-1.9,0c-0.8,0-1.8,0-2,0c-0.8,0-1.7,0-2,0c-0.1,0-0.6,0-0.9,0.1 c-0.4,0-0.8,0-1-0.1c-0.3-0.1-0.4-0.1-0.7,0.1c-0.3,0.1-0.5,0.2-1.1,0.1c-0.4,0-0.8-0.1-0.8-0.1c-0.8,0.1-1.5,0.1-1.9,0 c-0.4-0.1-0.5-0.1-0.6,0c-0.2,0.2-3.5,0.2-4.2,0c-0.4-0.2-0.5-0.2-1.1,0c-0.5,0.1-0.7,0.1-1.2,0c-0.5-0.1-0.7-0.1-0.9-0.1 c-0.2,0.1-0.6,0.1-0.9,0c-0.3,0-0.9-0.1-1.2-0.1c-0.3,0-0.9-0.1-1.3-0.2c-0.4-0.1-1-0.2-1.3-0.2c-1,0-4.6-0.5-6.6-1 c-2.5-0.6-4.9-1.6-5.9-2.6c-0.7-0.7-0.9-1.1-1-1.9c-0.1-0.8,0.2-2.5,0.4-2.5C230.8,351.9,231,352.1,231.3,352.3z"}),Object(w.jsx)("path",{className:"st4",d:"M265.9,333.8c-0.3,0.3-0.1,0.7,0.4,0.7c0.3,0,0.4-0.4,0.2-0.7C266.3,333.6,266.1,333.6,265.9,333.8z"}),Object(w.jsx)("path",{className:"st4",d:"M264.3,335.6c-0.1,0.1-0.1,0.6,0.1,0.7c0.4,0.2,0.7-0.1,0.6-0.6C264.9,335.6,264.4,335.5,264.3,335.6z"})),Object(w.jsx)("path",{className:"titleBox",d:"M300,319.5h231c1.9,0,3.5,1.6,3.5,3.5v14c0,1.9-1.6,3.5-3.5,3.5H300c-1.9,0-3.5-1.6-3.5-3.5v-14 C296.5,321.1,298.1,319.5,300,319.5z"}),Object(w.jsx)("path",{className:"titleCopy",d:"M310.5,334h1.4l-3.1-8.5h-1.4l-3.1,8.5h1.3l0.8-2.2h3.2L310.5,334z M308.1,327.1L308.1,327.1l1.3,3.6h-2.6 L308.1,327.1z M315.1,334.1c0.9,0,1.6-0.4,2-1.1h0.1v1h1.2v-8.9h-1.3v3.5h-0.1c-0.3-0.7-1.1-1.1-2-1.1c-1.6,0-2.6,1.3-2.6,3.3 C312.5,332.8,313.5,334.1,315.1,334.1z M315.5,328.6c1.1,0,1.7,0.8,1.7,2.2c0,1.3-0.7,2.2-1.7,2.2c-1.1,0-1.7-0.8-1.7-2.2 C313.8,329.5,314.4,328.6,315.5,328.6z M320.2,334h1.3v-6.4h-1.3V334z M320.9,326.5c0.5,0,0.8-0.3,0.8-0.8c0-0.4-0.3-0.8-0.8-0.8 c-0.5,0-0.8,0.3-0.8,0.8C320,326.2,320.4,326.5,320.9,326.5z M325.5,334.1c0.9,0,1.6-0.4,2-1.1h0.1v1h1.2v-8.9h-1.3v3.5h-0.1 c-0.3-0.7-1.1-1.1-2-1.1c-1.6,0-2.6,1.3-2.6,3.3C322.9,332.8,323.9,334.1,325.5,334.1z M325.9,328.6c1.1,0,1.7,0.8,1.7,2.2 c0,1.3-0.7,2.2-1.7,2.2c-1.1,0-1.7-0.8-1.7-2.2C324.2,329.5,324.8,328.6,325.9,328.6z M332.7,333c-0.7,0-1.2-0.3-1.2-0.9 c0-0.6,0.4-0.9,1.3-0.9l1.6-0.1v0.5C334.4,332.4,333.7,333,332.7,333z M332.4,334.1c0.8,0,1.5-0.4,1.9-1h0.1v0.9h1.2v-4.4 c0-1.3-0.9-2.1-2.5-2.1c-1.4,0-2.5,0.7-2.6,1.8h1.2c0.1-0.5,0.6-0.7,1.3-0.7c0.9,0,1.3,0.4,1.3,1.1v0.6l-1.7,0.1 c-1.5,0.1-2.4,0.8-2.4,1.9C330.3,333.4,331.2,334.1,332.4,334.1z M337.1,329.4c0,0.9,0.6,1.5,1.8,1.8l1.1,0.3 c0.6,0.2,0.9,0.4,0.9,0.8c0,0.5-0.6,0.9-1.3,0.9c-0.8,0-1.2-0.3-1.4-0.8H337c0.1,1.1,1.1,1.8,2.6,1.8c1.5,0,2.6-0.8,2.6-2 c0-0.9-0.6-1.5-1.8-1.7l-1.1-0.2c-0.7-0.2-1-0.4-1-0.8c0-0.5,0.5-0.8,1.2-0.8c0.7,0,1.2,0.3,1.3,0.8h1.2c-0.1-1.1-1.1-1.8-2.5-1.8 C338.2,327.5,337.1,328.3,337.1,329.4z M346.5,331.7c0.1,1.5,1.4,2.5,3.2,2.5c2,0,3.3-1,3.3-2.6c0-1.3-0.7-2-2.4-2.4l-0.9-0.2 c-1.1-0.3-1.5-0.6-1.5-1.2c0-0.8,0.7-1.3,1.7-1.3c1,0,1.7,0.5,1.8,1.3h1.3c-0.1-1.4-1.3-2.4-3-2.4c-1.8,0-3.1,1-3.1,2.5 c0,1.2,0.7,2,2.2,2.3l1.1,0.3c1.1,0.3,1.6,0.7,1.6,1.3c0,0.8-0.8,1.3-1.8,1.3c-1.1,0-1.9-0.5-2-1.3H346.5z M357.8,327.5 c-0.9,0-1.6,0.4-2,1.2h-0.1v-1.1h-1.2v8.5h1.3V333h0.1c0.3,0.7,1.1,1.1,2,1.1c1.6,0,2.6-1.3,2.6-3.3 C360.5,328.8,359.4,327.5,357.8,327.5z M357.5,333c-1.1,0-1.7-0.8-1.7-2.2c0-1.3,0.7-2.2,1.7-2.2c1.1,0,1.7,0.8,1.7,2.2 C359.2,332.2,358.5,333,357.5,333z M364.5,328.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C362.9,329.2,363.5,328.6,364.5,328.6z M366,332.3 c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3 c1.5,0,2.5-0.7,2.8-1.8H366z M371.3,328.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C369.8,329.2,370.4,328.6,371.3,328.6z M372.9,332.3 c-0.2,0.5-0.8,0.8-1.5,0.8c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3 c1.5,0,2.5-0.7,2.8-1.8H372.9z M377.9,334.1c0.9,0,1.6-0.4,2-1.1h0.1v1h1.2v-8.9H380v3.5h-0.1c-0.3-0.7-1.1-1.1-2-1.1 c-1.6,0-2.6,1.3-2.6,3.3C375.3,332.8,376.3,334.1,377.9,334.1z M378.3,328.6c1.1,0,1.7,0.8,1.7,2.2c0,1.3-0.7,2.2-1.7,2.2 c-1.1,0-1.7-0.8-1.7-2.2C376.6,329.5,377.2,328.6,378.3,328.6z M389.8,334v-7.3h2.7v-1.2h-6.6v1.2h2.7v7.3H389.8z M393,334h1.3 v-3.8c0-0.9,0.7-1.5,1.6-1.5c0.2,0,0.6,0,0.7,0.1v-1.2c-0.1,0-0.4-0.1-0.6-0.1c-0.8,0-1.5,0.5-1.7,1.1h-0.1v-1H393V334z M399.7,333c-0.7,0-1.2-0.3-1.2-0.9c0-0.6,0.4-0.9,1.3-0.9l1.6-0.1v0.5C401.3,332.4,400.6,333,399.7,333z M399.4,334.1 c0.8,0,1.5-0.4,1.9-1h0.1v0.9h1.2v-4.4c0-1.3-0.9-2.1-2.5-2.1c-1.4,0-2.5,0.7-2.6,1.8h1.2c0.1-0.5,0.6-0.7,1.3-0.7 c0.9,0,1.3,0.4,1.3,1.1v0.6l-1.7,0.1c-1.5,0.1-2.4,0.8-2.4,1.9C397.2,333.4,398.1,334.1,399.4,334.1z M404.3,334h1.3v-6.4h-1.3 V334z M404.9,326.5c0.5,0,0.8-0.3,0.8-0.8c0-0.4-0.3-0.8-0.8-0.8s-0.8,0.3-0.8,0.8C404.1,326.2,404.4,326.5,404.9,326.5z M407.3,334h1.3v-3.7c0-1,0.6-1.6,1.5-1.6s1.4,0.5,1.4,1.5v3.8h1.3v-4.1c0-1.5-0.8-2.4-2.2-2.4c-1,0-1.6,0.4-1.9,1.1h-0.1v-1h-1.2 V334z M417,328.6c0.9,0,1.5,0.7,1.6,1.7h-3.2C415.4,329.2,416,328.6,417,328.6z M418.5,332.3c-0.2,0.5-0.8,0.8-1.5,0.8 c-1,0-1.7-0.7-1.7-1.8v-0.1h4.5v-0.4c0-2-1.1-3.2-2.8-3.2c-1.8,0-2.9,1.3-2.9,3.3s1.1,3.3,2.9,3.3c1.5,0,2.5-0.7,2.8-1.8H418.5z M421.2,334h1.3v-3.8c0-0.9,0.7-1.5,1.6-1.5c0.2,0,0.6,0,0.7,0.1v-1.2c-0.1,0-0.4-0.1-0.6-0.1c-0.8,0-1.5,0.5-1.7,1.1h-0.1v-1 h-1.2V334z"}))),Object(w.jsx)("g",{id:"filter"},Object(w.jsx)("path",{className:"outerBox",d:"M34,237.5h151c1.9,0,3.5,1.6,3.5,3.5v163c0,1.9-1.6,3.5-3.5,3.5H34c-1.9,0-3.5-1.6-3.5-3.5V241 C30.5,239.1,32.1,237.5,34,237.5z"}),Object(w.jsx)("path",{className:"header",d:"M50.3,269v-3.8h4v-1.7h-4v-2.6h4.4v-1.8h-6.5v9.9H50.3z M58.5,269v-9.9h-2.1v9.9H58.5z M67.2,267.2h-4.4v-8.1 h-2.1v9.9h6.5V267.2z M72.1,269v-8.1h3v-1.8h-8v1.8h3v8.1H72.1z M83.3,267.2h-4.5v-2.4H83v-1.6h-4.2v-2.3h4.5v-1.8h-6.5v9.9h6.5 V267.2z M87.4,260.8h1.8c1,0,1.7,0.6,1.7,1.5c0,1-0.6,1.5-1.6,1.5h-1.8V260.8z M87.4,265.4h1.7l1.8,3.6h2.3l-2.1-3.9 c1.1-0.5,1.8-1.5,1.8-2.8c0-2-1.3-3.2-3.5-3.2h-4.1v9.9h2.1V265.4z M102.8,269c2.1,0,3.4-1.1,3.4-2.8c0-1.3-1-2.3-2.3-2.4v-0.1 c1-0.1,1.8-1.1,1.8-2.1c0-1.5-1.1-2.5-3.1-2.5h-4.3v9.9H102.8z M100.4,260.7h1.7c1,0,1.6,0.5,1.6,1.3c0,0.8-0.6,1.3-1.7,1.3h-1.6 V260.7z M100.4,267.4v-2.8h1.8c1.2,0,1.9,0.5,1.9,1.4c0,0.9-0.6,1.4-1.8,1.4H100.4z M112.4,269v-3.6l3.4-6.2h-2.2l-2.2,4.1h-0.1 l-2.2-4.1h-2.2l3.4,6.2v3.6H112.4z"}),Object(w.jsx)("path",{className:"filterCopy",d:"M82,298v-9.9h-1.4l-3.4,8.2h-0.1l-3.4-8.2h-1.4v9.9h1.1v-7.5h0.1l3.1,7.5h1l3.1-7.5h0.1v7.5H82z M87.1,291.5 c1.2,0,1.9,0.9,2,2.2h-4.1C85.1,292.4,86,291.5,87.1,291.5z M89.1,296.1c-0.3,0.6-1,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5 c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H89.1z M92.1,298h1.2v-4.4 c0-1.3,0.8-2.1,1.9-2.1c1.2,0,1.7,0.6,1.7,2v4.5h1.2v-4.8c0-1.8-0.9-2.7-2.6-2.7c-1.1,0-1.8,0.5-2.2,1.3h-0.1v-1.2h-1.1V298z"}),Object(w.jsx)("path",{className:"filterCopy",d:"M102.7,328h1.3l-3.6-9.9h-1.2l-3.6,9.9h1.3l1-2.8h3.9L102.7,328z M99.7,319.7h0.1l1.5,4.4h-3.2L99.7,319.7z M105.5,318.7v1.9h-1.2v1h1.2v4.5c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6 v-1h-1.6v-1.9H105.5z M110,328h1.2v-4.4c0-1.2,0.7-2.1,2-2.1c1.1,0,1.7,0.6,1.7,2v4.5h1.2v-4.8c0-1.7-1-2.7-2.5-2.7 c-1.1,0-1.9,0.5-2.3,1.3h-0.1v-4.1H110V328z M118.2,328h1.2v-10.3h-1.2V328z M124.4,321.5c1.2,0,1.9,0.9,2,2.2h-4.1 C122.4,322.4,123.3,321.5,124.4,321.5z M126.4,326.1c-0.3,0.6-0.9,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5 c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H126.4z M129.8,318.7v1.9h-1.2v1h1.2v4.5 c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6v-1H131v-1.9H129.8z M134.3,328h1.2 v-7.4h-1.2V328z M134.9,319.1c0.5,0,0.8-0.4,0.8-0.8c0-0.5-0.4-0.8-0.8-0.8s-0.8,0.4-0.8,0.8C134.1,318.8,134.5,319.1,134.9,319.1z M143.7,322.9c-0.2-1.3-1.3-2.4-3.1-2.4c-2.1,0-3.4,1.5-3.4,3.8c0,2.3,1.3,3.8,3.4,3.8c1.8,0,2.9-1,3.1-2.4h-1.2 c-0.2,0.8-0.9,1.3-1.9,1.3c-1.3,0-2.2-1.1-2.2-2.8c0-1.7,0.8-2.7,2.2-2.7c1.1,0,1.7,0.6,1.9,1.3H143.7z"}),Object(w.jsx)("path",{className:"filterCopy",d:"M77.7,352.2L77.7,352.2l2.4,7.8h1.2l2.7-9.9h-1.3l-2,8h-0.1l-2.2-8h-1.2l-2.2,8h-0.1l-2-8h-1.3l2.7,9.9h1.2 L77.7,352.2z M87.9,360.1c2.1,0,3.4-1.4,3.4-3.8c0-2.4-1.3-3.8-3.4-3.8c-2.1,0-3.4,1.4-3.4,3.8C84.5,358.7,85.8,360.1,87.9,360.1z M87.9,359.1c-1.4,0-2.2-1-2.2-2.8c0-1.8,0.8-2.8,2.2-2.8c1.4,0,2.2,1,2.2,2.8C90,358.1,89.3,359.1,87.9,359.1z M93,360h1.2v-4.6 c0-1,0.7-1.9,1.7-1.9c0.9,0,1.5,0.6,1.5,1.4v5h1.2v-4.7c0-0.9,0.7-1.7,1.7-1.7c1,0,1.6,0.5,1.6,1.6v4.8h1.2v-5.1 c0-1.5-0.8-2.4-2.3-2.4c-1,0-1.9,0.5-2.3,1.3h-0.1c-0.3-0.8-1-1.3-2-1.3c-1,0-1.7,0.5-2.1,1.3h-0.1v-1.2H93V360z M107.9,353.5 c1.2,0,1.9,0.9,2,2.2h-4.1C105.9,354.4,106.8,353.5,107.9,353.5z M109.9,358.1c-0.3,0.6-1,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3 v-0.5c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H109.9z M112.9,360h1.2v-4.4 c0-1.3,0.8-2.1,1.9-2.1s1.7,0.6,1.7,2v4.5h1.2v-4.8c0-1.8-0.9-2.7-2.6-2.7c-1.1,0-1.8,0.5-2.2,1.3H114v-1.2h-1.1V360z"}),Object(w.jsx)("path",{className:"filterCopy",d:"M102.7,390h1.3l-3.6-9.9h-1.2l-3.6,9.9h1.3l1-2.8h3.9L102.7,390z M99.7,381.7h0.1l1.5,4.4h-3.2L99.7,381.7z M105.5,380.7v1.9h-1.2v1h1.2v4.5c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6 v-1h-1.6v-1.9H105.5z M110,390h1.2v-4.4c0-1.2,0.7-2.1,2-2.1c1.1,0,1.7,0.6,1.7,2v4.5h1.2v-4.8c0-1.7-1-2.7-2.5-2.7 c-1.1,0-1.9,0.5-2.3,1.3h-0.1v-4.1H110V390z M118.2,390h1.2v-10.3h-1.2V390z M124.4,383.5c1.2,0,1.9,0.9,2,2.2h-4.1 C122.4,384.4,123.3,383.5,124.4,383.5z M126.4,388.1c-0.3,0.6-0.9,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5 c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H126.4z M129.8,380.7v1.9h-1.2v1h1.2v4.5 c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6v-1H131v-1.9H129.8z M134.3,390h1.2 v-7.4h-1.2V390z M134.9,381.1c0.5,0,0.8-0.4,0.8-0.8c0-0.5-0.4-0.8-0.8-0.8s-0.8,0.4-0.8,0.8C134.1,380.8,134.5,381.1,134.9,381.1z M143.7,384.9c-0.2-1.3-1.3-2.4-3.1-2.4c-2.1,0-3.4,1.5-3.4,3.8c0,2.3,1.3,3.8,3.4,3.8c1.8,0,2.9-1,3.1-2.4h-1.2 c-0.2,0.8-0.9,1.3-1.9,1.3c-1.3,0-2.2-1.1-2.2-2.8c0-1.7,0.8-2.7,2.2-2.7c1.1,0,1.7,0.6,1.9,1.3H143.7z"}),Object(w.jsx)("rect",{x:"48",y:"286",className:"checkbox",width:"14",height:"14"}),Object(w.jsx)("path",{className:"check",d:"M53.3,294.7l5.1-5.1c0.3-0.3,0.8-0.3,1.1,0c0.3,0.3,0.3,0.8,0,1.1l-5.7,5.7c-0.3,0.3-0.8,0.3-1.1,0l-2.3-2.3 c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0L53.3,294.7z"}),Object(w.jsx)("rect",{x:"71",y:"316",className:"checkbox",width:"14",height:"14"}),Object(w.jsx)("path",{className:"check",d:"M76.3,324.7l5.1-5.1c0.3-0.3,0.8-0.3,1.1,0c0.3,0.3,0.3,0.8,0,1.1l-5.7,5.7c-0.3,0.3-0.8,0.3-1.1,0l-2.3-2.3 c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0L76.3,324.7z"}),Object(w.jsx)("rect",{x:"48",y:"347",className:"checkbox",width:"14",height:"14"}),Object(w.jsx)("path",{className:"check",d:"M53.3,355.7l5.1-5.1c0.3-0.3,0.8-0.3,1.1,0c0.3,0.3,0.3,0.8,0,1.1l-5.7,5.7c-0.3,0.3-0.8,0.3-1.1,0l-2.3-2.3 c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0L53.3,355.7z"}),Object(w.jsx)("rect",{x:"71",y:"377",className:"checkbox",width:"14",height:"14"}),Object(w.jsx)("path",{className:"check",d:"M76.3,385.7l5.1-5.1c0.3-0.3,0.8-0.3,1.1,0c0.3,0.3,0.3,0.8,0,1.1l-5.7,5.7c-0.3,0.3-0.8,0.3-1.1,0l-2.3-2.3 c-0.3-0.3-0.3-0.8,0-1.1c0.3-0.3,0.8-0.3,1.1,0L76.3,385.7z"})),Object(w.jsx)("g",{id:"sort"},Object(w.jsx)("path",{className:"outerBox",d:"M20,117.5h151c1.9,0,3.5,1.6,3.5,3.5v83c0,1.9-1.6,3.5-3.5,3.5H20c-1.9,0-3.5-1.6-3.5-3.5v-83 C16.5,119.1,18.1,117.5,20,117.5z"}),Object(w.jsx)("path",{className:"header",d:"M33.8,146.3c0.1,1.8,1.6,3,4,3c2.5,0,4-1.2,4-3.2c0-1.5-0.9-2.4-2.8-2.8l-1.2-0.3c-1.2-0.2-1.6-0.6-1.6-1.2 c0-0.8,0.7-1.2,1.7-1.2c1,0,1.7,0.5,1.8,1.3h1.9c-0.1-1.8-1.6-3-3.8-3c-2.3,0-3.8,1.2-3.8,3.1c0,1.5,0.9,2.4,2.7,2.8l1.3,0.3 c1.2,0.3,1.7,0.6,1.7,1.3c0,0.7-0.8,1.3-1.8,1.3c-1.2,0-2-0.5-2.1-1.3H33.8z M47.8,138.9c-2.9,0-4.8,2-4.8,5.2 c0,3.2,1.8,5.2,4.8,5.2c2.9,0,4.7-2,4.7-5.2C52.6,140.9,50.7,138.9,47.8,138.9z M47.8,140.7c1.6,0,2.6,1.3,2.6,3.4 c0,2.1-1,3.4-2.6,3.4c-1.6,0-2.6-1.3-2.6-3.4C45.2,142,46.2,140.7,47.8,140.7z M56.4,140.8h1.8c1,0,1.7,0.6,1.7,1.5 c0,0.9-0.6,1.5-1.6,1.5h-1.8V140.8z M56.4,145.4h1.7L60,149h2.3l-2.1-3.9c1.1-0.5,1.8-1.5,1.8-2.8c0-2-1.3-3.2-3.5-3.2h-4.1v9.9 h2.1V145.4z M68.4,149v-8.1h3v-1.8h-8v1.8h3v8.1H68.4z M81,149c2.1,0,3.4-1.1,3.4-2.8c0-1.3-1-2.3-2.3-2.4v-0.1 c1-0.1,1.8-1.1,1.8-2.1c0-1.5-1.1-2.5-3.1-2.5h-4.3v9.9H81z M78.6,140.7h1.7c1,0,1.6,0.5,1.6,1.3c0,0.8-0.6,1.3-1.7,1.3h-1.6V140.7 z M78.6,147.4v-2.8h1.8c1.2,0,1.9,0.5,1.9,1.4c0,0.9-0.6,1.4-1.8,1.4H78.6z M90.6,149v-3.6l3.4-6.2h-2.2l-2.2,4.1h-0.1l-2.2-4.1 h-2.2l3.4,6.2v3.6H90.6z"}),Object(w.jsx)("path",{className:"selectCopy",d:"M57,168h63v10H57V168z"}),Object(w.jsx)("path",{className:"selectBox",d:"M38,160.5h115c1.9,0,3.5,1.6,3.5,3.5v19c0,1.9-1.6,3.5-3.5,3.5H38c-1.9,0-3.5-1.6-3.5-3.5v-19 C34.5,162.1,36.1,160.5,38,160.5z"}),Object(w.jsx)("path",{className:"selectCopy",d:"M45.5,178v-7.6h0.1l5.4,7.6h1.2v-9.9h-1.2v7.7h-0.1l-5.4-7.7h-1.2v9.9H45.5z M57.3,171.5c1.2,0,1.9,0.9,2,2.2 h-4.1C55.3,172.4,56.1,171.5,57.3,171.5z M59.2,176.1c-0.3,0.6-1,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5 c0-2.3-1.2-3.7-3.2-3.7c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H59.2z M71.5,170.6h-1.2l-1.4,5.9h-0.1 l-1.6-5.9H66l-1.6,5.9h-0.1l-1.4-5.9h-1.2l2.1,7.4h1.2l1.6-5.7h0.1l1.6,5.7h1.2L71.5,170.6z M75.6,171.5c1.2,0,1.9,0.9,2,2.2h-4.1 C73.6,172.4,74.4,171.5,75.6,171.5z M77.5,176.1c-0.3,0.6-1,1-1.9,1c-1.3,0-2.1-0.9-2.1-2.4v-0.1h5.3v-0.5c0-2.3-1.2-3.7-3.2-3.7 c-2,0-3.3,1.5-3.3,3.8c0,2.3,1.3,3.8,3.3,3.8c1.6,0,2.7-0.8,3.1-2H77.5z M80.3,172.6c0,1.1,0.6,1.7,2,2l1.3,0.3 c0.8,0.2,1.2,0.5,1.2,1c0,0.7-0.7,1.1-1.7,1.1c-0.9,0-1.5-0.4-1.7-1h-1.2c0.1,1.2,1.3,2,2.9,2c1.7,0,3-0.9,3-2.2 c0-1.1-0.7-1.7-2.1-2l-1.1-0.3c-0.9-0.2-1.3-0.5-1.3-1c0-0.7,0.7-1.1,1.6-1.1c0.9,0,1.5,0.4,1.6,1h1.2c-0.2-1.2-1.2-2-2.8-2 C81.5,170.5,80.3,171.4,80.3,172.6z M88.1,168.7v1.9h-1.2v1h1.2v4.5c0,1.4,0.6,2,2.1,2c0.2,0,0.5,0,0.7-0.1v-1c-0.2,0-0.3,0-0.5,0 c-0.8,0-1.1-0.4-1.1-1.2v-4.2h1.6v-1h-1.6v-1.9H88.1z"}),Object(w.jsx)("path",{className:"selectControl",d:"M140.7,175l3.3,5.8l3.3-5.8H140.7z"}),Object(w.jsx)("path",{className:"selectControl",d:"M147.3,172l-3.3-5.8l-3.3,5.8H147.3z"})),Object(w.jsx)("g",{id:"pagination"},Object(w.jsx)("path",{className:"outerBox",d:"M420,430c-2.2,0-4,1.8-4,4v28c0,2.2,1.8,4,4,4h53v-36H420z M477,430v36h53c2.2,0,4-1.8,4-4v-28 c0-2.2-1.8-4-4-4H477z"}),Object(w.jsx)("path",{className:"arrow",d:"M503,444.2c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0l4.5,4.5c0.4,0.4,0.4,1,0,1.4l-4.5,4.5 c-0.4,0.4-1,0.4-1.4,0c-0.4-0.4-0.4-1,0-1.4l3.8-3.8L503,444.2z"}),Object(w.jsx)("path",{className:"arrow",d:"M447,451.8c0.4,0.4,0.4,1,0,1.4c-0.4,0.4-1,0.4-1.4,0l-4.5-4.5c-0.4-0.4-0.4-1,0-1.4l4.5-4.5 c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-3.8,3.8L447,451.8z"})))};a(904);const L=()=>{const{loadFieldData:e}=Object(x.useActions)(T),{hasEmptySchema:t}=Object(x.useValues)(y.a);return Object(m.useEffect)((()=>{e()}),[]),Object(w.jsx)(v.a,{pageChrome:Object(y.d)([i]),pageHeader:{pageTitle:i},isEmptyState:t,emptyState:Object(w.jsx)(E,null)},Object(w.jsx)(S.EuiFlexGroup,{alignItems:"flexStart"},Object(w.jsx)(S.EuiFlexItem,null,Object(w.jsx)(S.EuiText,{size:"s",color:"subdued"},Object(w.jsx)("p",null,Object(w.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.searchUI.bodyDescription",defaultMessage:"Search UI is a free and open library for building search experiences with React. {link}.",values:{link:Object(w.jsx)(S.EuiLink,{target:"_blank",href:"https://github.com/elastic/search-ui"},Object(w.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.searchUI.repositoryLinkText",defaultMessage:"View the Github repo"}))}})),Object(w.jsx)("p",null,Object(w.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.searchUI.lowerBodyDescription",defaultMessage:"Use the fields below to generate a sample search experience built with Search UI. Use the sample to preview search results, or build upon it to create your own custom search experience. {link}.",values:{link:Object(w.jsx)(S.EuiLink,{target:"_blank",href:O.U},Object(w.jsx)(f.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.engine.searchUI.guideLinkText",defaultMessage:"Learn more about Search UI"}))}}))),Object(w.jsx)(S.EuiSpacer,null),Object(w.jsx)(R,null)),Object(w.jsx)(S.EuiFlexItem,{className:"searchUIGraphicContainer"},Object(w.jsx)(A,null))))}},function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return F})),a.d(t,"c",(function(){return R}));var n=a(2),s=a(42);const i={page:{...s.k.page,size:12}},r=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.title",{defaultMessage:"Synonyms"}),c=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.createSynonymSetTitle",{defaultMessage:"Add a synonym set"}),l=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.updateSynonymSetTitle",{defaultMessage:"Manage synonym set"}),o=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.createSuccessMessage",{defaultMessage:"Synonym set created"}),u=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.updateSuccessMessage",{defaultMessage:"Synonym set updated"}),p=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.deleteConfirmationMessage",{defaultMessage:"Are you sure you want to delete this synonym set?"}),d=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.deleteSuccessMessage",{defaultMessage:"Synonym set deleted"}),g=n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.impactDescription",{defaultMessage:"The set will impact your results shortly."});var h=a(11),j=a.n(h),b=a(37),m=a(13),x=a(45),S=a(53),f=a(47),O=a.n(f),y=a(12);const v=({...e})=>Object(y.jsx)("svg",O()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",className:"euiIcon euiIcon--subdued euiIcon--medium"},e,{"aria-label":n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.iconAriaLabel",{defaultMessage:"synonym for"})}),Object(y.jsx)("path",{d:"M5.477 4.69c-1.1-.043-2.176.7-3.365 2.596a.65.65 0 01-1.101-.69c1.413-2.255 2.883-3.27 4.518-3.204 1.214.048 2.125.522 3.977 1.812l.075.052c3.175 2.212 4.387 2.352 6.33-.339a.65.65 0 111.054.761c-2.48 3.436-4.447 3.209-8.128.645l-.074-.052c-1.64-1.142-2.415-1.546-3.286-1.58zm0 6.35c-1.1-.043-2.176.7-3.365 2.596a.65.65 0 01-1.101-.69c1.413-2.255 2.883-3.27 4.518-3.204 1.214.048 2.125.522 3.977 1.812l.075.052c3.175 2.212 4.387 2.352 6.33-.338a.65.65 0 111.054.76c-2.48 3.436-4.447 3.209-8.128.645l-.074-.052c-1.64-1.142-2.415-1.546-3.286-1.58z"})),w=e=>{const{openModal:t}=Object(b.useActions)(R),[a,...n]=e.synonyms;return Object(y.jsx)(m.EuiCard,{display:"subdued",title:a,titleElement:"h2",titleSize:"s",textAlign:"left",footer:Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexEnd"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButton,{onClick:()=>t(e)},s.r)))},Object(y.jsx)(m.EuiText,{size:"m"},n.map((e=>Object(y.jsx)("div",{key:e},Object(y.jsx)(v,null)," ",e)))))};var E=a(43),C=a(166);const M=()=>{const{isModalOpen:e,modalLoading:t,activeSynonymSet:a}=Object(b.useValues)(R),{closeModal:i,createSynonymSet:r,updateSynonymSet:o,deleteSynonymSet:u}=Object(b.useActions)(R),d=a?l:c,g=(null==a?void 0:a.id)||"createNewSynonymSet",h=(null==a?void 0:a.synonyms)||["",""],j=a?e=>o({id:g,synonyms:e}):e=>r(e);return e?Object(y.jsx)(m.EuiModal,{onClose:i},Object(y.jsx)(m.EuiModalHeader,null,Object(y.jsx)(m.EuiModalHeaderTitle,null,d)),Object(y.jsx)(E.a,null),Object(y.jsx)(m.EuiModalBody,null,Object(y.jsx)(C.a,{id:g,initialValues:h,inputPlaceholder:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.synonymInputPlaceholder",{defaultMessage:"Enter a synonym"}),onSubmit:j,showSubmitButton:!1})),Object(y.jsx)(m.EuiModalFooter,null,Object(y.jsx)(m.EuiFlexGroup,{responsive:!1},Object(y.jsx)(m.EuiFlexItem,null,a&&Object(y.jsx)("span",null,Object(y.jsx)(m.EuiButtonEmpty,{color:"danger",iconType:"trash",onClick:()=>{window.confirm(p)&&u(g)},"data-test-subj":"deleteSynonymSetButton"},s.l))),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButtonEmpty,{onClick:i},s.e)),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButton,{type:"submit",form:g,fill:!0,isLoading:t,"data-test-subj":"submitSynonymSetButton"},s.z))))):null};var k=a(48);const T=()=>Object(y.jsx)(j.a.Fragment,null,Object(y.jsx)(m.EuiEmptyPrompt,{iconType:v,title:Object(y.jsx)("h2",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.empty.title",{defaultMessage:"Create your first synonym set"})),body:Object(y.jsx)("p",null,n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.empty.description",{defaultMessage:"Synonyms relate queries with similar context or meaning together. Use them to guide users to relevant content."})),actions:Object(y.jsx)(m.EuiButton,{size:"s",target:"_blank",iconType:"popout",href:k.Y},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.empty.buttonLabel",{defaultMessage:"Read the synonyms guide"}))}),Object(y.jsx)(M,null)),F=()=>{const{loadSynonyms:e,onPaginate:t,openModal:a}=Object(b.useActions)(R),{synonymSets:s,meta:i,dataLoading:c}=Object(b.useValues)(R),l=s.length>0;return Object(h.useEffect)((()=>{e()}),[i.page.current]),Object(h.useEffect)((()=>{l||1===i.page.current||t(i.page.current-1)}),[s]),Object(y.jsx)(S.a,{pageChrome:Object(x.d)([r]),pageHeader:{pageTitle:r,description:n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.description",{defaultMessage:"Use synonyms to relate queries together that contextually have the same meaning in your dataset."}),rightSideItems:[Object(y.jsx)(m.EuiButton,{fill:!0,iconType:"plusInCircle",onClick:()=>a(null)},n.i18n.translate("xpack.enterpriseSearch.appSearch.engine.synonyms.createSynonymSetButtonLabel",{defaultMessage:"Create a synonym set"}))]},isLoading:c&&!l,isEmptyState:!l,emptyState:Object(y.jsx)(T,null)},Object(y.jsx)(m.EuiFlexGrid,{columns:3},s.map((({id:e,synonyms:t})=>Object(y.jsx)(m.EuiFlexItem,{key:e},Object(y.jsx)(w,{id:e,synonyms:t}))))),Object(y.jsx)(m.EuiSpacer,null),Object(y.jsx)(m.EuiPagination,{pageCount:i.page.total_pages,activePage:i.page.current-1,onPageClick:e=>t(e+1)}),Object(y.jsx)(M,null))};var _=a(38),I=a(61);const R=Object(b.kea)({path:["enterprise_search","app_search","synonyms_logic"],actions:()=>({loadSynonyms:!0,onSynonymsLoad:({results:e,meta:t})=>({results:e,meta:t}),onPaginate:e=>({newPageIndex:e}),openModal:e=>({synonymSet:e}),closeModal:!0,createSynonymSet:e=>({synonyms:e}),updateSynonymSet:({id:e,synonyms:t})=>({id:e,synonyms:t}),deleteSynonymSet:e=>({id:e}),onSynonymSetSuccess:e=>({successMessage:e}),onSynonymSetError:!0}),reducers:()=>({dataLoading:[!0,{loadSynonyms:()=>!0,onSynonymsLoad:()=>!1}],synonymSets:[[],{onSynonymsLoad:(e,{results:t})=>t}],meta:[i,{onSynonymsLoad:(e,{meta:t})=>t,onPaginate:(e,{newPageIndex:t})=>Object(I.c)(e,t)}],isModalOpen:[!1,{openModal:()=>!0,closeModal:()=>!1}],activeSynonymSet:[null,{openModal:(e,{synonymSet:t})=>t,closeModal:()=>null}],modalLoading:[!1,{createSynonymSet:()=>!0,updateSynonymSet:()=>!0,deleteSynonymSet:()=>!0,onSynonymSetError:()=>!1,closeModal:()=>!1}]}),listeners:({actions:e,values:t})=>({loadSynonyms:async()=>{const{meta:a}=t,{http:n}=_.a.values,{engineName:s}=x.a.values;try{const t=await n.get(`/internal/app_search/engines/${s}/synonyms`,{query:{"page[current]":a.page.current,"page[size]":a.page.size}});e.onSynonymsLoad(t)}catch(e){Object(E.e)(e)}},createSynonymSet:async({synonyms:t})=>{const{http:a}=_.a.values,{engineName:n}=x.a.values;Object(E.d)();try{await a.post(`/internal/app_search/engines/${n}/synonyms`,{body:JSON.stringify({synonyms:t})}),e.onSynonymSetSuccess(o)}catch(t){e.onSynonymSetError(),Object(E.e)(t)}},updateSynonymSet:async({id:t,synonyms:a})=>{const{http:n}=_.a.values,{engineName:s}=x.a.values;Object(E.d)();try{await n.put(`/internal/app_search/engines/${s}/synonyms/${t}`,{body:JSON.stringify({synonyms:a})}),e.onSynonymSetSuccess(u)}catch(t){e.onSynonymSetError(),Object(E.e)(t)}},deleteSynonymSet:async({id:t})=>{const{http:a}=_.a.values,{engineName:n}=x.a.values;Object(E.d)();try{await a.delete(`/internal/app_search/engines/${n}/synonyms/${t}`),e.onSynonymSetSuccess(d)}catch(t){e.onSynonymSetError(),Object(E.e)(t)}},onSynonymSetSuccess:async({successMessage:t})=>{await e.loadSynonyms(),e.closeModal(),Object(E.g)(t,{text:g})}})})},function(e,t,a){"use strict";a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return m}));var n=a(11),s=a.n(n),i=a(53),r=a(37),c=a(13),l=a(2),o=a(48),u=a(139),p=a(12);const d=()=>{const{toggleLogRetention:e,fetchLogRetention:t}=Object(r.useActions)(u.b),{logRetention:a,isLogRetentionUpdating:i}=Object(r.useValues)(u.b),d=null!==a,g=null==a?void 0:a[u.d.Analytics],h=null==a?void 0:a[u.d.API],j=null==a?void 0:a[u.d.Audit],b=null==a?void 0:a[u.d.Crawler];return Object(n.useEffect)((()=>{t()}),[]),Object(p.jsx)(c.EuiPanel,{hasBorder:!0,"data-test-subj":"LogRetentionPanel"},Object(p.jsx)(c.EuiTitle,{size:"s"},Object(p.jsx)("h2",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.title",{defaultMessage:"Log retention"}))),Object(p.jsx)(c.EuiSpacer,{size:"m"}),Object(p.jsx)(c.EuiText,null,Object(p.jsx)(c.EuiSwitch,{label:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("strong",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.analytics.label",{defaultMessage:"Log analytics events"})),": ",d&&Object(p.jsx)(c.EuiTextColor,{color:"subdued"},Object(p.jsx)(u.c,{type:u.d.Analytics}))),checked:!(null==g||!g.enabled),onChange:()=>e(u.d.Analytics),disabled:i,"data-test-subj":"LogRetentionPanelAnalyticsSwitch"})),Object(p.jsx)(c.EuiSpacer,{size:"m"}),Object(p.jsx)(c.EuiText,null,Object(p.jsx)(c.EuiSwitch,{label:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("strong",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.api.label",{defaultMessage:"Log API events"})),": ",d&&Object(p.jsx)(c.EuiTextColor,{color:"subdued"},Object(p.jsx)(u.c,{type:u.d.API}))),checked:!(null==h||!h.enabled),onChange:()=>e(u.d.API),disabled:i,"data-test-subj":"LogRetentionPanelAPISwitch"})),Object(p.jsx)(c.EuiSpacer,{size:"m"}),Object(p.jsx)(c.EuiText,null,Object(p.jsx)(c.EuiSwitch,{label:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("strong",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.crawler.label",{defaultMessage:"Web Crawler Logs"})),": ",d&&Object(p.jsx)(c.EuiTextColor,{color:"subdued"},Object(p.jsx)(u.c,{type:u.d.Crawler}))),checked:!(null==b||!b.enabled),onChange:()=>e(u.d.Crawler),disabled:i,"data-test-subj":"LogRetentionPanelCrawlerSwitch"})),Object(p.jsx)(c.EuiSpacer,{size:"m"}),Object(p.jsx)(c.EuiText,null,Object(p.jsx)(c.EuiSwitch,{label:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("strong",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.audit.label",{defaultMessage:"Log audit events"})),": ",d&&Object(p.jsx)(c.EuiTextColor,{color:"subdued"},Object(p.jsx)(u.c,{type:u.d.Audit}))),checked:!(null==j||!j.enabled),onChange:()=>e(u.d.Audit),disabled:i,"data-test-subj":"LogRetentionPanelAuditSwitch"})),Object(p.jsx)(c.EuiSpacer,{size:"l"}),Object(p.jsx)(c.EuiText,{size:"xs",color:"subdued"},Object(p.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.description",{defaultMessage:"Log retention is determined by the ILM policies for your deployment."}),Object(p.jsx)("br",null),Object(p.jsx)(c.EuiLink,{href:o.M,target:"_blank"},l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.learnMore",{defaultMessage:"Learn more about log retention for Enterprise Search."})))))};var g=a(42);const h=({description:e,onClose:t,onSave:a,subheading:s,target:i,title:r})=>{const[o,u]=Object(n.useState)("");return Object(p.jsx)(c.EuiModal,{onClose:t,initialFocus:".euiFieldText","aria-label":r},Object(p.jsx)(c.EuiModalHeader,null,Object(p.jsx)(c.EuiModalHeaderTitle,null,r)),Object(p.jsx)(c.EuiModalBody,null,Object(p.jsx)(c.EuiText,null,Object(p.jsx)("p",null,Object(p.jsx)("strong",null,s)),e),Object(p.jsx)(c.EuiSpacer,null),Object(p.jsx)(c.EuiFormRow,{label:l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.prompt",{defaultMessage:'Type "{target}" to confirm.',values:{target:i}})},Object(p.jsx)(c.EuiFieldText,{"data-test-subj":"GenericConfirmationModalInput",value:o,onChange:e=>u(e.target.value)}))),Object(p.jsx)(c.EuiModalFooter,null,Object(p.jsx)(c.EuiButtonEmpty,{"data-test-subj":"GenericConfirmationModalCancel",onClick:t},g.e),Object(p.jsx)(c.EuiButton,{"data-test-subj":"GenericConfirmationModalSave",onClick:()=>{u(""),a()},disabled:o.toLowerCase()!==i.toLowerCase()},l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.save",{defaultMessage:"Save setting"}))))},j=()=>{var e,t,a,n,i,o,d,g;const j=l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.recovery",{defaultMessage:"You cannot recover deleted data."}),b=l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.disable",{defaultMessage:"DISABLE"}),{closeModals:m,saveLogRetention:x}=Object(r.useActions)(u.b),{logRetention:S,openedModal:f}=Object(r.useValues)(u.b);return null===f?null:Object(p.jsx)(s.a.Fragment,null,f===u.d.Analytics&&Object(p.jsx)(h,{"data-test-subj":"AnalyticsLogRetentionConfirmationModal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.title",{defaultMessage:"Disable Analytics writes"}),subheading:S&&(null===(e=S[u.d.Analytics].retentionPolicy)||void 0===e?void 0:e.minAgeDays)&&l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.subheading",{defaultMessage:"Your Analytics Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:null===(t=S[u.d.Analytics].retentionPolicy)||void 0===t?void 0:t.minAgeDays}}),description:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.analytics.description",{defaultMessage:"When you disable writing, engines stop logging analytics events. Your existing data is deleted according to the storage time frame."})),Object(p.jsx)("p",null,Object(p.jsx)("strong",null,Object(p.jsx)(c.EuiTextColor,{color:"danger"},j)))),target:b,onClose:m,onSave:()=>x(u.d.Analytics,!1)}),f===u.d.API&&Object(p.jsx)(h,{"data-test-subj":"APILogRetentionConfirmationModal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.title",{defaultMessage:"Disable API writes"}),subheading:S&&(null==S||null===(a=S[u.d.API].retentionPolicy)||void 0===a?void 0:a.minAgeDays)&&l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.subheading",{defaultMessage:"Your API Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:null==S||null===(n=S[u.d.API].retentionPolicy)||void 0===n?void 0:n.minAgeDays}}),description:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.api.description",{defaultMessage:"When you disable writing, engines stop logging API events. Your existing data is deleted according to the storage time frame."})),Object(p.jsx)("p",null,Object(p.jsx)("strong",null,Object(p.jsx)(c.EuiTextColor,{color:"danger"},j)))),target:b,onClose:m,onSave:()=>x(u.d.API,!1)}),f===u.d.Audit&&Object(p.jsx)(h,{"data-test-subj":"APILogRetentionConfirmationModal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.audit.title",{defaultMessage:"Disable Audit writes"}),subheading:S&&(null==S||null===(i=S[u.d.Audit].retentionPolicy)||void 0===i?void 0:i.minAgeDays)&&l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.audit.subheading",{defaultMessage:"Your audit Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:null==S||null===(o=S[u.d.Audit].retentionPolicy)||void 0===o?void 0:o.minAgeDays}}),description:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.audit.description",{defaultMessage:"When you disable writing, engines stop logging audit events. Your existing data is deleted according to the storage time frame."})),Object(p.jsx)("p",null,Object(p.jsx)("strong",null,Object(p.jsx)(c.EuiTextColor,{color:"danger"},j)))),target:b,onClose:m,onSave:()=>x(u.d.Audit,!1)}),f===u.d.Crawler&&Object(p.jsx)(h,{"data-test-subj":"CrawlerLogRetentionConfirmationModal",title:l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.crawler.title",{defaultMessage:"Disable Web Crawler writes"}),subheading:S&&(null==S||null===(d=S[u.d.Crawler].retentionPolicy)||void 0===d?void 0:d.minAgeDays)&&l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.crawler.subheading",{defaultMessage:"Your Web Crawler Logs are currently being stored for {minAgeDays} days.",values:{minAgeDays:null==S||null===(g=S[u.d.Crawler].retentionPolicy)||void 0===g?void 0:g.minAgeDays}}),description:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)("p",null,l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.logRetention.modal.crawler.description",{defaultMessage:"When you disable writing, engines stop logging Web Crawler events. Your existing data is deleted according to the storage time frame."})),Object(p.jsx)("p",null,Object(p.jsx)("strong",null,Object(p.jsx)(c.EuiTextColor,{color:"danger"},j)))),target:b,onClose:m,onSave:()=>x(u.d.Crawler,!1)}))},b=()=>Object(p.jsx)(i.a,{pageChrome:[m],pageHeader:{pageTitle:m}},Object(p.jsx)(j,null),Object(p.jsx)(d,null)),m=l.i18n.translate("xpack.enterpriseSearch.appSearch.settings.title",{defaultMessage:"Settings"})},,function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(37),s=a(43),i=a(38),r=a(313),c=a(45);const l=Object(n.kea)({key:e=>e.id,path:e=>["enterprise_search","app_search","search_logic",e],actions:()=>({search:e=>({query:e}),onSearch:({results:e})=>({results:e})}),reducers:()=>({searchDataLoading:[!1,{search:()=>!0,onSearch:()=>!1}],searchQuery:["",{search:(e,{query:t})=>t}],searchResults:[[],{onSearch:(e,{results:t})=>t.map((e=>Object(r.a)(e)))}]}),listeners:({actions:e})=>({search:async({query:t},a)=>{await a(250);const{http:n}=i.a.values,{engineName:r}=c.a.values;try{const a=await n.post(`/internal/app_search/engines/${r}/search`,{query:{query:t}});e.onSearch(a)}catch(e){Object(s.e)(e)}}})})},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(11);const s=(e,t)=>{const a=t=>window.localStorage.setItem(e,JSON.stringify(t)),s=(()=>{const t=window.localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(t){window.localStorage.removeItem(e)}})();s||a(t);const i=s||t,[r,c]=Object(n.useState)(i);return[r,e=>{a(e),c(e)}]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(757);case"v8light":return a(759)}},function(e,t,a){var n=a(39),s=a(758);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".apiLogDetailButton{height:24px!important}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(760);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".apiLogDetailButton{height:24px!important}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(762);case"v8light":return a(764)}},function(e,t,a){var n=a(39),s=a(763);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".newApiEventsPrompt{align-items:center;display:flex;padding:4px 4px 4px 8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(765);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".newApiEventsPrompt{align-items:center;display:flex;padding:4px 4px 4px 8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(767);case"v8light":return a(769)}},function(e,t,a){var n=a(39),s=a(768);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".crawlSelectDomainsModal{max-width:90%;width:50rem}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(770);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".crawlSelectDomainsModal{max-width:90%;width:50rem}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(772);case"v8light":return a(774)}},function(e,t,a){var n=a(39),s=a(773);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".deduplicationPanel .selectableWrapper{border:1px solid #25262e;border-radius:10.8px;padding:16px}.deduplicationPanel .showAllFieldsPopoverToggle .euiButtonEmpty{padding-inline:12px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(775);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".deduplicationPanel .selectableWrapper{border:1px solid #f5f7fa;border-radius:10.8px;padding:16px}.deduplicationPanel .showAllFieldsPopoverToggle .euiButtonEmpty{padding-inline:12px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(777);case"v8light":return a(779)}},function(e,t,a){var n=a(39),s=a(778);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".enterpriseSearchDataType--float,.enterpriseSearchDataType--number{color:#f68fbe;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}.enterpriseSearchDataType--geolocation,.enterpriseSearchDataType--location{color:#7dded8;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}.enterpriseSearchDataType--date{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(780);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".enterpriseSearchDataType--float,.enterpriseSearchDataType--number{color:#c4407c;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}.enterpriseSearchDataType--geolocation,.enterpriseSearchDataType--location{color:#007e77;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}.enterpriseSearchDataType--date{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(782);case"v8light":return a(784)}},function(e,t,a){var n=a(39),s=a(783);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,'.appSearchResult{border:1px solid #343741;display:grid;grid-template-areas:"drag content" "drag toggle";grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;overflow:hidden}.appSearchResult__content{color:#dfe5ef;grid-area:content;overflow:hidden;padding:16px;width:100%}.appSearchResult__hiddenFieldsToggle{border-top:1px solid #343741;color:#36a2ef;display:flex;font-size:12px;grid-area:toggle;justify-content:center;padding:8px}.appSearchResult__hiddenFieldsToggle:focus,.appSearchResult__hiddenFieldsToggle:hover{background-color:#141519}.appSearchResult__hiddenFieldsToggle .euiIcon{margin-left:4px}.appSearchResult__dragHandle{align-items:center;border-right:1px solid #343741;display:flex;grid-area:drag;justify-content:center;width:32px}',""]),e.exports=t},function(e,t,a){var n=a(39),s=a(785);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,'.appSearchResult{border:1px solid #d3dae6;display:grid;grid-template-areas:"drag content" "drag toggle";grid-template-columns:auto 1fr;grid-template-rows:auto 1fr;overflow:hidden}.appSearchResult__content{color:#343741;grid-area:content;overflow:hidden;padding:16px;width:100%}.appSearchResult__hiddenFieldsToggle{border-top:1px solid #d3dae6;color:#07c;display:flex;font-size:12px;grid-area:toggle;justify-content:center;padding:8px}.appSearchResult__hiddenFieldsToggle:focus,.appSearchResult__hiddenFieldsToggle:hover{background-color:#fafbfd}.appSearchResult__hiddenFieldsToggle .euiIcon{margin-left:4px}.appSearchResult__dragHandle{align-items:center;border-right:1px solid #d3dae6;display:flex;grid-area:drag;justify-content:center;width:32px}',""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(787);case"v8light":return a(789)}},function(e,t,a){var n=a(39),s=a(788);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,'.appSearchResultField{grid-gap:4px;display:grid;font-size:14px;grid-template-columns:.85fr 32px 1fr;line-height:1.5}.appSearchResultField__separator{text-align:center}.appSearchResultField__separator:after{color:#98a2b3;content:"=>"}.appSearchResultField__key{align-items:center;display:flex;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;letter-spacing:normal}.appSearchResultField__key .euiToken{margin-right:8px}.appSearchResultField__value{overflow:hidden;padding-left:16px}@media only screen and (max-width:574px){.appSearchResultField__value{padding-left:0}}',""]),e.exports=t},function(e,t,a){var n=a(39),s=a(790);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,'.appSearchResultField{grid-gap:4px;display:grid;font-size:14px;grid-template-columns:.85fr 32px 1fr;line-height:1.5}.appSearchResultField__separator{text-align:center}.appSearchResultField__separator:after{color:#69707d;content:"=>"}.appSearchResultField__key{align-items:center;display:flex;font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;letter-spacing:normal}.appSearchResultField__key .euiToken{margin-right:8px}.appSearchResultField__value{overflow:hidden;padding-left:16px}@media only screen and (max-width:574px){.appSearchResultField__value{padding-left:0}}',""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(792);case"v8light":return a(794)}},function(e,t,a){var n=a(39),s=a(793);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchResultHeaderItem{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;letter-spacing:normal}.appSearchResultHeaderItem__score{color:#7dded8}.euiFlexItem:not(:first-child):not(:last-child) .appSearchResultHeaderItem{box-shadow:inset -1px 0 0 0 #343741;padding-right:8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(795);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchResultHeaderItem{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace;letter-spacing:normal}.appSearchResultHeaderItem__score{color:#007e77}.euiFlexItem:not(:first-child):not(:last-child) .appSearchResultHeaderItem{box-shadow:inset -1px 0 0 0 #d3dae6;padding-right:8px}",""]),e.exports=t},,,,,,function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(802);case"v8light":return a(804)}},function(e,t,a){var n=a(39),s=a(803);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchResultHeader{margin-bottom:12px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(805);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchResultHeader{margin-bottom:12px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(807);case"v8light":return a(809)}},function(e,t,a){var n=a(39),s=a(808);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".promotedDocuments--results{background-color:#103148;border:2px solid #36a2ef;border-radius:12px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(810);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".promotedDocuments--results{background-color:#e6f1fa;border:2px solid #07c;border-radius:12px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(812);case"v8light":return a(814)}},function(e,t,a){var n=a(39),s=a(813);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".inputRow{margin-bottom:4px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(815);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".inputRow{margin-bottom:4px}",""]),e.exports=t},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),s=a(817);t.default=function(e,t){var a=s.useFirstMountState();n.useEffect((function(){if(!a)return e()}),t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var n=a(11);t.useFirstMountState=function(){var e=n.useRef(!0);return e.current?(e.current=!1,!0):e.current}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(819);case"v8light":return a(821)}},function(e,t,a){var n=a(39),s=a(820);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".curationsTable .curationsTableBadge{margin-left:8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(822);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".curationsTable .curationsTableBadge{margin-left:8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(824);case"v8light":return a(826)}},function(e,t,a){var n=a(39),s=a(825);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".suggestionsTable .suggestionsTableBadge{margin-left:8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(827);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".suggestionsTable .suggestionsTableBadge{margin-left:8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(829);case"v8light":return a(831)}},function(e,t,a){var n=a(39),s=a(830);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".curationResultPanel{border-radius:12px;margin-top:8px;padding:4px}.curationResultPanel--current,.curationResultPanel--promoted{background-color:#103148;border:2px solid #36a2ef}.curationResultPanel--suggested{background-color:#264341;border:2px solid #7dded8}.curationResultPanel--hidden{background-color:#4a2b39;border:2px solid #f68fbe}.curationResultPanel__header{flex-grow:0}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(832);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".curationResultPanel{border-radius:12px;margin-top:8px;padding:4px}.curationResultPanel--current,.curationResultPanel--promoted{background-color:#e6f1fa;border:2px solid #07c}.curationResultPanel--suggested{background-color:#e6f9f7;border:2px solid #00bfb3}.curationResultPanel--hidden{background-color:#feedf5;border:2px solid #f04e98}.curationResultPanel__header{flex-grow:0}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(834);case"v8light":return a(836)}},function(e,t,a){var n=a(39),s=a(835);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".documentCreationSummarySection{border-bottom:1px solid #343741;border-top:1px solid #343741;color:#7a7f89;padding:16px 12px}.documentCreationSummarySection+.documentCreationSummarySection{border-top:0}.documentCreationSummarySection__title{align-items:center;display:flex;height:24px}.documentCreationSummarySection__title .euiIcon{margin-right:8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(837);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".documentCreationSummarySection{border-bottom:1px solid #d3dae6;border-top:1px solid #d3dae6;color:#69707d;padding:16px 12px}.documentCreationSummarySection+.documentCreationSummarySection{border-top:0}.documentCreationSummarySection__title{align-items:center;display:flex;height:24px}.documentCreationSummarySection__title .euiIcon{margin-right:8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(839);case"v8light":return a(841)}},function(e,t,a){var n=a(39),s=a(840);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".enterpriseSearchTabbedFlyoutHeader.euiFlyoutHeader{padding-bottom:0}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(842);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".enterpriseSearchTabbedFlyoutHeader.euiFlyoutHeader{padding-bottom:0}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(844);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".pasteJsonTextArea{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(846);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".pasteJsonTextArea{font-family:Roboto Mono,Consolas,Menlo,Courier,monospace}",""]),e.exports=t},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>{const t=new FileReader;return new Promise(((a,n)=>{t.onload=()=>{a(t.result)};try{t.readAsText(e)}catch{t.abort(),n(new Error)}}))}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(849);case"v8light":return a(851)}},function(e,t,a){var n=a(39),s=a(850);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".documentsSearchExperience .sui-results-container{flex-grow:1;padding:0}.documentsSearchExperience .sui-results-container>li+li{margin-top:16px}.documentsSearchExperience .documentsSearchExperience__sidebar{flex-grow:1;min-width:304px}.documentsSearchExperience .documentsSearchExperience__content{flex-grow:4;position:relative}.documentsSearchExperience .documentsSearchExperience__pagingInfo{flex-grow:0}.documentsSearchExperience .customizationCallout{background-color:#141519;padding:24px}.documentsSearchExperience .documentsSearchExperience__facet{line-height:0}.documentsSearchExperience .documentsSearchExperience__facet .euiCheckbox__label{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(852);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".documentsSearchExperience .sui-results-container{flex-grow:1;padding:0}.documentsSearchExperience .sui-results-container>li+li{margin-top:16px}.documentsSearchExperience .documentsSearchExperience__sidebar{flex-grow:1;min-width:304px}.documentsSearchExperience .documentsSearchExperience__content{flex-grow:4;position:relative}.documentsSearchExperience .documentsSearchExperience__pagingInfo{flex-grow:0}.documentsSearchExperience .customizationCallout{background-color:#fafbfd;padding:24px}.documentsSearchExperience .documentsSearchExperience__facet{line-height:0}.documentsSearchExperience .documentsSearchExperience__facet .euiCheckbox__label{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(854);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(s).default}})},function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return s(t,e),t},r=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(s,i){function r(e){try{l(n.next(e))}catch(e){i(e)}}function c(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,c)}l((n=n.apply(e,t||[])).next())}))},c=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(a(855)),u=a(856),p=a(857),d=l(a(858));function g(e){const{facets:t,filters:a}=e,n=c(e,["facets","filters"]);return Object.assign(Object.assign(Object.assign({},t&&Object.entries(t).length>0&&{facets:t}),a&&Object.entries(a).length>0&&{filters:a}),n)}t.default=class AppSearchAPIConnector{constructor(e){var{searchKey:t,engineName:a,beforeSearchCall:n=((e,t)=>t(e)),beforeAutocompleteResultsCall:s=((e,t)=>t(e)),beforeAutocompleteSuggestionsCall:i=((e,t)=>t(e)),cacheResponses:r=!0}=e,l=c(e,["searchKey","engineName","beforeSearchCall","beforeAutocompleteResultsCall","beforeAutocompleteSuggestionsCall","cacheResponses"]);if(!a||!("hostIdentifier"in l)&&!("endpointBase"in l))throw Error("hostIdentifier or endpointBase, and engineName are required");this.client=o.createClient(Object.assign(Object.assign(Object.assign(Object.assign({},"endpointBase"in l&&{endpointBase:l.endpointBase}),"hostIdentifier"in l&&{hostIdentifier:l.hostIdentifier}),{apiKey:t,engineName:a,cacheResponses:r}),l)),this.beforeSearchCall=n,this.beforeAutocompleteResultsCall=s,this.beforeAutocompleteSuggestionsCall=i}onResultClick({query:e,documentId:t,requestId:a,tags:n=[]}){return n=n.concat("results"),this.client.click({query:e,documentId:t,requestId:a,tags:n})}onAutocompleteResultClick({query:e,documentId:t,requestId:a,tags:n=[]}){return n=n.concat("autocomplete"),this.client.click({query:e,documentId:t,requestId:a,tags:n})}onSearch(e,t){return r(this,void 0,void 0,(function*(){const{current:a,resultsPerPage:n,sortDirection:s,sortField:i,sortList:l}=t,o=c(t,["current","resultsPerPage","sortDirection","sortField","sortList"]),h=(0,p.adaptRequest)(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),void 0!==a&&{current:a}),void 0!==n&&{resultsPerPage:n}),void 0!==s&&{sortDirection:s}),void 0!==i&&{sortField:i}),void 0!==l&&{sortList:l})),{query:j}=h,b=c(h,["query"]),m=Object.assign(Object.assign({},o),b),x=Object.assign({},g(m));return this.beforeSearchCall(x,(e=>r(this,void 0,void 0,(function*(){const a=yield this.client.search(j,e);return(0,u.adaptResponse)(a,(0,d.default)(t))}))))}))}onAutocomplete({searchTerm:e},t){return r(this,void 0,void 0,(function*(){const a={},n=[];if(t.results){const s=t.results,{current:i,filters:r,resultsPerPage:l,sortDirection:o,sortField:d,sortList:h}=s,j=c(s,["current","filters","resultsPerPage","sortDirection","sortField","sortList"]),b=(0,p.adaptRequest)({current:i,searchTerm:e,filters:r,resultsPerPage:l,sortDirection:o,sortField:d,sortList:h}),{query:m}=b,x=c(b,["query"]),S=g(Object.assign(Object.assign({},j),x));n.push(this.beforeAutocompleteResultsCall(S,(e=>this.client.search(m,Object.assign(Object.assign({},e),{record_analytics:!1})).then((e=>{a.autocompletedResults=(0,u.adaptResponse)(e).results,a.autocompletedResultsRequestId=e.info.meta.request_id})))))}if(t.suggestions){const s=t.suggestions;n.push(this.beforeAutocompleteSuggestionsCall(s,(t=>this.client.querySuggestion(e,t).then((e=>{a.autocompletedSuggestions=e.results,a.autocompletedSuggestionsRequestId=e.meta.request_id})))))}return yield Promise.all(n),a}))}}},function(e,t,a){(function(e){!function(t){"use strict";var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=function(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,s=!1,i=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){s=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(s)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(e){return Array.isArray(e)?e:Array.from(e)},o=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},u=function(){function e(t){a(this,e),t._group&&t._group.length>0&&(t=i({},t,{_group:t._group.map((function(t){return new e(t)}))})),this.data=t}return n(e,[{key:"getRaw",value:function(e){return(this.data[e]||{}).raw}},{key:"getSnippet",value:function(e){return(this.data[e]||{}).snippet}}]),e}(),p=function e(t,n){a(this,e),this.rawResults=t,this.rawInfo=n;var s=new Array;t.forEach((function(e){s.push(new u(e))})),this.results=s,this.info=n},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.filtersJSON=t}return n(e,[{key:"removeFilter",value:function(t){return new e(function e(t,a){var n=Object.entries(a).reduce((function(a,n){var r=c(n,2),l=r[0],o=r[1];return l===t?a:(["all","any","none"].includes(l)&&(o=o.reduce((function(a,n){var s=e(t,n);return s?a.concat(s):a}),[])),i({},a,s({},l,o)))}),{});if(0!==Object.keys(n).length)return n}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.filtersJSON))}},{key:"getListOfAppliedFilters",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filtersJSON,a=Object.entries(t).reduce((function(t,a){var n=c(a,2),s=n[0],i=n[1];return["all","any","none"].includes(s)?i.forEach((function(a){Object.keys(a).forEach((function(n){["all","any","none"].includes(n)?t=new Set([].concat(o(t),o(e.getListOfAppliedFilters(a)))):t.add(n)}))})):t.add(s),t}),new Set);return Array.from(a.values())}}]),e}(),g="8.1.2",h=new(function(){function e(){a(this,e),this.cache={}}return n(e,[{key:"getKey",value:function(e,t,a){return e+t+JSON.stringify(a)}},{key:"store",value:function(e,t){this.cache[e]=t}},{key:"retrieve",value:function(e){return this.cache[e]}}]),e}());function j(t,a,n,s,r){var c=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).additionalHeaders,l="POST",o=h.getKey(l,a+n,s);if(r){var u=h.retrieve(o);if(u)return Promise.resolve(u)}return function(t,a,n,s,r){var c=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).additionalHeaders,l="undefined"!=typeof window?"browser":e.version,o=new Headers(i({},a&&{Authorization:"Bearer "+a},{"Content-Type":"application/json","X-Swiftype-Client":"elastic-app-search-javascript","X-Swiftype-Client-Version":g,"x-elastic-client-meta":"ent="+g+"-legacy,js="+l+",t="+g+"-legacy,ft=universal"},c));return fetch(""+n+s,{method:t,headers:o,body:JSON.stringify(r),credentials:"include"})}(l,t,a,n,s,{additionalHeaders:c}).then((function(e){return e.json().then((function(t){var a={response:e,json:t};return r&&h.store(o,a),a})).catch((function(){return{response:e,json:{}}}))}))}var b={SEARCH:"SEARCH",MULTI_SEARCH:"MULTI_SEARCH"};function m(e){return new p(e.results,function(e,t){if(e)return e[t],r(e,[t])}(e,"results"))}function x(e){var t,a=e.response,n=e.json;if(!a.ok){var s=Array.isArray(n)?" "+(t=n.map((function(e){return e.errors})),[].concat.apply([],t)).join(", "):n.errors?" "+n.errors:"";throw new Error("["+a.status+"]"+s)}return n}var S=function(){function e(t,n,s){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.endpointBase,c=void 0===r?"":r,l=i.cacheResponses,o=void 0===l||l,u=i.additionalHeaders;a(this,e),this.additionalHeaders=u,this.searchKey=n,this.cacheResponses=o,this.engineName=s,this.apiEndpoint=c?c+"/api/as/v1/":"https://"+t+".api.swiftype.com/api/as/v1/",this.searchPath="engines/"+this.engineName+"/search",this.multiSearchPath="engines/"+this.engineName+"/multi_search",this.querySuggestionPath="engines/"+this.engineName+"/query_suggestion",this.clickPath="engines/"+this.engineName+"/click"}return n(e,[{key:"querySuggestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object.assign({query:e},t);return j(this.searchKey,this.apiEndpoint,this.querySuggestionPath,a,this.cacheResponses,{additionalHeaders:this.additionalHeaders}).then(x)}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.disjunctiveFacets,n=t.disjunctiveFacetsAnalyticsTags,s=r(t,["disjunctiveFacets","disjunctiveFacetsAnalyticsTags"]),i=Object.assign({query:e},s);return a&&a.length>0?this._performDisjunctiveSearch(i,a,n).then(m):this._performSearch(i).then(m)}},{key:"multiSearch",value:function(e){var t=e.map((function(e){return i({query:e.query},e.options||{})}));return this._performSearch({queries:t},b.MULTI_SEARCH).then((function(e){return e.map(m)}))}},{key:"_performDisjunctiveSearch",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Facet-Only"],r=this._performSearch(e),u=new d(e.filters),p=u.getListOfAppliedFilters().filter((function(e){return t.includes(e)}));if(!p.length)return r;var g=e.page||{},h=e.analytics||{};h.tags=n;var j=p.map((function(t){return a._performSearch(i({},e,{filters:u.removeFilter(t).filtersJSON,record_analytics:!1,page:i({},g,{size:0}),analytics:h,facets:s({},t,e.facets[t])}))}));return Promise.all([r].concat(o(j))).then((function(e){var t=l(e),a=t[0];return t.slice(1).forEach((function(e){var t=c(Object.entries(e.facets)[0],2),n=t[0],s=t[1];a.facets[n]=s})),a}))}},{key:"_performSearch",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.SEARCH)===b.MULTI_SEARCH?this.multiSearchPath:this.searchPath;return j(this.searchKey,this.apiEndpoint,t+".json",e,this.cacheResponses,{additionalHeaders:this.additionalHeaders}).then(x)}},{key:"click",value:function(e){var t=e.query,a=e.documentId,n=e.requestId,s=e.tags,i={query:t,document_id:a,request_id:n,tags:void 0===s?[]:s};return j(this.searchKey,this.apiEndpoint,this.clickPath+".json",i,this.cacheResponses,{additionalHeaders:this.additionalHeaders}).then(x)}}]),e}();t.createClient=function(e){var t=e.hostIdentifier,a=e.accountHostKey,n=e.apiKey,s=e.searchKey,i=e.engineName,r=e.endpointBase,c=e.cacheResponses,l=e.additionalHeaders;return new S(t=t||a,s=s||n,i,{endpointBase:r,cacheResponses:c,additionalHeaders:l})},Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,a(94))},function(e,t,a){"use strict";var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};function s(e,{additionalFacetValueFields:t={}}){return e&&0!==Object.keys(e).length?Object.entries(e).reduce(((e,[a,s])=>{const i=s.map((e=>{const{type:s,data:i}=e,r=n(e,["type","data"]);return function(e,t){return Object.assign({field:e},t)}(a,Object.assign({type:s,data:i.map((e=>function(e,t={}){const a=Object.prototype.hasOwnProperty.call(e,"value"),{count:s,value:i}=e,r=n(e,["count","value"]);return{count:s,value:a?i:Object.assign(Object.assign({},r),t)}}(e,t[a])))},r))}));return Object.assign(Object.assign({},e),{[a]:i})}),{}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.adaptResponse=void 0,t.adaptResponse=function(e,t={}){const a=e.info.facets,n=e.info.meta.request_id,i=e.info.meta.page&&void 0!==e.info.meta.page.total_pages?function(e){return Math.min(e,100)}(e.info.meta.page.total_pages):void 0,r=e.info.meta.page?e.info.meta.page.total_results:void 0;return Object.assign(Object.assign(Object.assign(Object.assign({},a&&{facets:s(a,t)}),{rawResponse:e,requestId:n,results:e.rawResults}),void 0!==i&&{totalPages:i}),void 0!==r&&{totalResults:r})}},function(e,t,a){"use strict";var n=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.adaptRequest=void 0;const s=a(130);function i(e){if(s.helpers.isFilterValueRange(e)){const{name:t}=e,a=n(e,["name"]);return Object.assign({},a)}return e}function r(e){const t=e.values.some(s.helpers.isFilterValueRange);let a;return a="all"===e.type||t||1===e.values.length?e.values.map(i).map((t=>({[e.field]:t}))):[{[e.field]:e.values.map(i).map((e=>e))}],{[e.type||"any"]:a}}t.adaptRequest=function(e){const{current:t,resultsPerPage:a,searchTerm:n,sortDirection:s,sortField:i,sortList:c}=e,l=function(e,t,a){return a&&a.length?a.map((e=>({[e.field]:e.direction}))):t&&e?{[t]:e}:void 0}(s,i,c);return Object.assign(Object.assign({query:n},void 0!==l&&{sort:l}),{page:Object.assign(Object.assign({},void 0!==a&&{size:a}),void 0!==t&&{current:t}),filters:(o=e.filters,o&&0!==o.length?{all:o.map(r)}:{})});var o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={}){const t=Object.entries(e.facets||{}).reduce(((e,[t,a])=>a.unit&&a.center?Object.assign(Object.assign({},e||{}),{[t]:Object.assign(Object.assign({},a.unit&&{unit:a.unit}),a.center&&{center:a.center})}):e),null);return Object.assign({},t&&{additionalFacetValueFields:t})}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(860);case"v8light":return a(862)}},function(e,t,a){var n=a(39),s=a(861);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".relevanceTuningForm .valueBadge{align-items:center;background:#1d2c3a;border:1px solid #343741;border-radius:4px;color:#6092c0;display:inline-flex;height:24px;padding:0 8px}.relevanceTuningForm .valueBadge .euiIcon{margin-right:4px}.relevanceTuningForm .valueBadge--disabled{background:#0000;color:#535966}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(863);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".relevanceTuningForm .valueBadge{align-items:center;background:#eff4f9;border:1px solid #d3dae6;border-radius:4px;color:#6092c0;display:inline-flex;height:24px;padding:0 8px}.relevanceTuningForm .valueBadge .euiIcon{margin-right:4px}.relevanceTuningForm .valueBadge--disabled{background:#0000;color:#98a2b3}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(865);case"v8light":return a(867)}},function(e,t,a){var n=a(39),s=a(866);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".stepDescription{min-height:64px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(868);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".stepDescription{min-height:64px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(870);case"v8light":return a(872)}},function(e,t,a){var n=a(39),s=a(871);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".boosts__select{min-width:160px}.boosts__itemButton{width:100%}.boosts__item{margin-top:16px}.boosts__item+.boosts__item{margin-top:8px}.boostSelectOption .euiContextMenuItem__text{align-items:center;display:flex}.boostSelectOption .euiContextMenuItem__text .euiToken{margin-right:8px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(873);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".boosts__select{min-width:160px}.boosts__itemButton{width:100%}.boosts__item{margin-top:16px}.boosts__item+.boosts__item{margin-top:8px}.boostSelectOption .euiContextMenuItem__text{align-items:center;display:flex}.boostSelectOption .euiContextMenuItem__text .euiToken{margin-right:8px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(875);case"v8light":return a(877)}},function(e,t,a){var n=a(39),s=a(876);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".relevanceTuningForm__item{margin-left:8px;width:100%}.relevanceTuningForm__panel+.relevanceTuningForm__panel{margin-top:12px}.relevanceTuningForm__panel .euiAccordion__button:focus,.relevanceTuningForm__panel .euiAccordion__button:hover{text-decoration:none}.relevanceTuningForm__panel .euiAccordion__button:focus h3,.relevanceTuningForm__panel .euiAccordion__button:hover h3{text-decoration:underline}.relevanceTuningForm .relevanceTuningAccordionItem{border-radius:0;border-top:1px solid #343741}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(878);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".relevanceTuningForm__item{margin-left:8px;width:100%}.relevanceTuningForm__panel+.relevanceTuningForm__panel{margin-top:12px}.relevanceTuningForm__panel .euiAccordion__button:focus,.relevanceTuningForm__panel .euiAccordion__button:hover{text-decoration:none}.relevanceTuningForm__panel .euiAccordion__button:focus h3,.relevanceTuningForm__panel .euiAccordion__button:hover h3{text-decoration:underline}.relevanceTuningForm .relevanceTuningAccordionItem{border-radius:0;border-top:1px solid #d3dae6}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(880);case"v8light":return a(882)}},function(e,t,a){var n=a(39),s=a(881);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".resultSettingsTable{table-layout:auto}.resultSettingsTable__columnLabels .euiTableHeaderCell{border-bottom:none;padding-bottom:12px}.resultSettingsTable .euiTableRow:last-of-type .euiTableRowCell,.resultSettingsTable .euiTableRow:last-of-type .euiTableRowCellCheckbox{border-bottom:none}tbody+.resultSettingsTable__subHeader{border-top:48px solid #0000}.resultSettingsTable .euiTableRowCellCheckbox .euiTableCellContent{justify-content:center}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(883);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".resultSettingsTable{table-layout:auto}.resultSettingsTable__columnLabels .euiTableHeaderCell{border-bottom:none;padding-bottom:12px}.resultSettingsTable .euiTableRow:last-of-type .euiTableRowCell,.resultSettingsTable .euiTableRow:last-of-type .euiTableRowCellCheckbox{border-bottom:none}tbody+.resultSettingsTable__subHeader{border-top:48px solid #0000}.resultSettingsTable .euiTableRowCellCheckbox .euiTableCellContent{justify-content:center}",""]),e.exports=t},,,,,,function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(890);case"v8light":return a(892)}},function(e,t,a){var n=a(39),s=a(891);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".auditLogsModal{width:75vw}@media (max-width:1200px){.auditLogsModal{width:100vw}}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(893);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".auditLogsModal{width:75vw}@media (max-width:1200px){.auditLogsModal{width:100vw}}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(895);case"v8light":return a(897)}},function(e,t,a){var n=a(39),s=a(896);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".metaEnginesSourceEnginesTable{margin:-8px -8px 8px}.metaEnginesSourceEnginesTable thead{display:none}@media only screen and (min-width:992px) and (max-width:1199px){.metaEnginesSourceEnginesTable .euiTableRowCell{border-top:none}.metaEnginesSourceEnginesTable .euiTitle{display:none}}@media only screen and (min-width:1200px){.metaEnginesSourceEnginesTable .euiTableRowCell{border-top:none}.metaEnginesSourceEnginesTable .euiTitle{display:none}}.metaEnginesSourceEnginesTable .euiTableHeaderMobile{display:none}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(898);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".metaEnginesSourceEnginesTable{margin:-8px -8px 8px}.metaEnginesSourceEnginesTable thead{display:none}@media only screen and (min-width:992px) and (max-width:1199px){.metaEnginesSourceEnginesTable .euiTableRowCell{border-top:none}.metaEnginesSourceEnginesTable .euiTitle{display:none}}@media only screen and (min-width:1200px){.metaEnginesSourceEnginesTable .euiTableRowCell{border-top:none}.metaEnginesSourceEnginesTable .euiTitle{display:none}}.metaEnginesSourceEnginesTable .euiTableHeaderMobile{display:none}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(900);case"v8light":return a(902)}},function(e,t,a){var n=a(39),s=a(901);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".searchUIGraphic{transform:rotateY(-8deg);transform-style:preserve-3d}.searchUIGraphic #search-area .outerBox{fill:#343741}.searchUIGraphic #search-area .field{fill:#1d1e24}.searchUIGraphic #search-area .searchIcon,.searchUIGraphic #search-area .type{fill:#98a2b3}.searchUIGraphic #background{fill:#25262e}.searchUIGraphic #results .outerBox{fill:#1d1e24;stroke:#343741;stroke-width:1px}.searchUIGraphic #results .shoe{fill:#535966}.searchUIGraphic #results .url{fill:#98a2b3;transform:translateY(5px)}.searchUIGraphic #results .titleCopy{fill:#98a2b3}.searchUIGraphic #results .titleBox{fill:#1d1e24}.searchUIGraphic #results .blockIn{fill:#343741}.searchUIGraphic #filter .outerBox{fill:#1d1e24;stroke:#343741;stroke-width:1px}.searchUIGraphic #filter .checkbox,.searchUIGraphic #filter .header{fill:#98a2b3}.searchUIGraphic #filter .check{fill:#1d1e24}.searchUIGraphic #filter .filterCopy{fill:#98a2b3}.searchUIGraphic #sort .outerBox{fill:#1d1e24;stroke:#343741;stroke-width:1px}.searchUIGraphic #sort .header,.searchUIGraphic #sort .selectCopy{fill:#98a2b3}.searchUIGraphic #sort .selectBox{fill:#1d1e24;stroke:#343741;stroke-width:1px}.searchUIGraphic #sort .selectControl{fill:#98a2b3}.searchUIGraphic #pagination .outerBox{fill:#343741}.searchUIGraphic #pagination .arrow{fill:#1d1e24}.searchUIGraphic.activeTitle #results .titleBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:1px}.searchUIGraphic.activeTitle #results .titleCopy{fill:#36a2ef}.searchUIGraphic.activeTitle #results .outerBox{fill:#1d1e24;stroke:#36a2ef}.searchUIGraphic.activeTitle #results .shoe,.searchUIGraphic.activeTitle #results .url{fill:#36a2ef;opacity:.1}.searchUIGraphic.activeUrl #results .outerBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:1px}.searchUIGraphic.activeUrl #results .url{fill:#36a2ef}.searchUIGraphic.activeUrl #results .titleBox{fill:#1d1e24}.searchUIGraphic.activeUrl #results .shoe,.searchUIGraphic.activeUrl #results .titleCopy{fill:#36a2ef;opacity:.1}.searchUIGraphic.activeFilter #filter .outerBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:2px}.searchUIGraphic.activeFilter #filter .checkbox,.searchUIGraphic.activeFilter #filter .header{fill:#36a2ef}.searchUIGraphic.activeFilter #filter .check{fill:#1d1e24}.searchUIGraphic.activeFilter #filter .filterCopy{fill:#36a2ef}.searchUIGraphic.activeSort #sort .outerBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:2px}.searchUIGraphic.activeSort #sort .header,.searchUIGraphic.activeSort #sort .selectCopy{fill:#36a2ef}.searchUIGraphic.activeSort #sort .selectBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:1px}.searchUIGraphic.activeSort #sort .selectControl{fill:#36a2ef}.searchUIGraphic.activeThumb #results .outerBox{fill:#1d1e24;stroke:#36a2ef;stroke-width:1px}.searchUIGraphic.activeThumb #results .url{fill:#36a2ef;opacity:.1}.searchUIGraphic.activeThumb #results .titleBox{fill:#1d1e24}.searchUIGraphic.activeThumb #results .titleCopy{fill:#36a2ef;opacity:.1}.searchUIGraphic.activeThumb #results .shoe{fill:#36a2ef}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(903);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".searchUIGraphic{transform:rotateY(-8deg);transform-style:preserve-3d}.searchUIGraphic #search-area .outerBox{fill:#d3dae6}.searchUIGraphic #search-area .field{fill:#fff}.searchUIGraphic #search-area .searchIcon,.searchUIGraphic #search-area .type{fill:#69707d}.searchUIGraphic #background{fill:#f5f7fa}.searchUIGraphic #results .outerBox{fill:#fff;stroke:#d3dae6;stroke-width:1px}.searchUIGraphic #results .shoe{fill:#98a2b3}.searchUIGraphic #results .url{fill:#69707d;transform:translateY(5px)}.searchUIGraphic #results .titleCopy{fill:#69707d}.searchUIGraphic #results .titleBox{fill:#fff}.searchUIGraphic #results .blockIn{fill:#d3dae6}.searchUIGraphic #filter .outerBox{fill:#fff;stroke:#d3dae6;stroke-width:1px}.searchUIGraphic #filter .checkbox,.searchUIGraphic #filter .header{fill:#69707d}.searchUIGraphic #filter .check{fill:#fff}.searchUIGraphic #filter .filterCopy{fill:#69707d}.searchUIGraphic #sort .outerBox{fill:#fff;stroke:#d3dae6;stroke-width:1px}.searchUIGraphic #sort .header,.searchUIGraphic #sort .selectCopy{fill:#69707d}.searchUIGraphic #sort .selectBox{fill:#fff;stroke:#d3dae6;stroke-width:1px}.searchUIGraphic #sort .selectControl{fill:#69707d}.searchUIGraphic #pagination .outerBox{fill:#d3dae6}.searchUIGraphic #pagination .arrow{fill:#fff}.searchUIGraphic.activeTitle #results .titleBox{fill:#fff;stroke:#07c;stroke-width:1px}.searchUIGraphic.activeTitle #results .titleCopy{fill:#07c}.searchUIGraphic.activeTitle #results .outerBox{fill:#fff;stroke:#07c}.searchUIGraphic.activeTitle #results .shoe,.searchUIGraphic.activeTitle #results .url{fill:#07c;opacity:.1}.searchUIGraphic.activeUrl #results .outerBox{fill:#fff;stroke:#07c;stroke-width:1px}.searchUIGraphic.activeUrl #results .url{fill:#07c}.searchUIGraphic.activeUrl #results .titleBox{fill:#fff}.searchUIGraphic.activeUrl #results .shoe,.searchUIGraphic.activeUrl #results .titleCopy{fill:#07c;opacity:.1}.searchUIGraphic.activeFilter #filter .outerBox{fill:#fff;stroke:#07c;stroke-width:2px}.searchUIGraphic.activeFilter #filter .checkbox,.searchUIGraphic.activeFilter #filter .header{fill:#07c}.searchUIGraphic.activeFilter #filter .check{fill:#fff}.searchUIGraphic.activeFilter #filter .filterCopy{fill:#07c}.searchUIGraphic.activeSort #sort .outerBox{fill:#fff;stroke:#07c;stroke-width:2px}.searchUIGraphic.activeSort #sort .header,.searchUIGraphic.activeSort #sort .selectCopy{fill:#07c}.searchUIGraphic.activeSort #sort .selectBox{fill:#fff;stroke:#07c;stroke-width:1px}.searchUIGraphic.activeSort #sort .selectControl{fill:#07c}.searchUIGraphic.activeThumb #results .outerBox{fill:#fff;stroke:#07c;stroke-width:1px}.searchUIGraphic.activeThumb #results .url{fill:#07c;opacity:.1}.searchUIGraphic.activeThumb #results .titleBox{fill:#fff}.searchUIGraphic.activeThumb #results .titleCopy{fill:#07c;opacity:.1}.searchUIGraphic.activeThumb #results .shoe{fill:#07c}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(905);case"v8light":return a(907)}},function(e,t,a){var n=a(39),s=a(906);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".searchUIGraphicContainer{transform:translateZ(0)}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(908);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".searchUIGraphicContainer{transform:translateZ(0)}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(910);case"v8light":return a(912)}},function(e,t,a){var n=a(39),s=a(911);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".tagsList .euiBadge{max-width:144px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(913);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".tagsList .euiBadge{max-width:144px}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(915);case"v8light":return a(917)}},function(e,t,a){var n=a(39),s=a(916);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,"@media only screen and (max-width:574px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:575px) and (max-width:767px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:768px) and (max-width:991px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:992px) and (max-width:1199px){.analyticsOverviewTables{flex-direction:column}}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(918);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,"@media only screen and (max-width:574px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:575px) and (max-width:767px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:768px) and (max-width:991px){.analyticsOverviewTables{flex-direction:column}}@media only screen and (min-width:992px) and (max-width:1199px){.analyticsOverviewTables{flex-direction:column}}",""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(920);case"v8light":return a(922)}},function(e,t,a){var n=a(39),s=a(921);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchNavEngineLabel{margin-left:8px;padding-bottom:8px;padding-top:4px}.appSearchNavEngineLabel .euiBadge{margin-top:4px}.appSearchNavIcon{order:1}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(923);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".appSearchNavEngineLabel{margin-left:8px;padding-bottom:8px;padding-top:4px}.appSearchNavEngineLabel .euiBadge{margin-top:4px}.appSearchNavIcon{order:1}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(925);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".entSearch__createEngineLayout{margin:auto;max-width:60rem}.entSearch__indexListItem{pointer-events:none}.entSearch__indexListItem .euiBadge{pointer-events:all}.entSearch__indexSelectable .euiSelectableListItem-isFocused,.entSearch__indexSelectable .euiSelectableListItem__append{position:absolute;right:calc(1rem - 2px);top:4px}",""]),e.exports=t},function(e,t,a){var n=a(39),s=a(927);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(40)(!1)).push([e.i,".entSearch__createEngineLayout{margin:auto;max-width:60rem}.entSearch__indexListItem{pointer-events:none}.entSearch__indexListItem .euiBadge{pointer-events:all}.entSearch__indexSelectable .euiSelectableListItem-isFocused,.entSearch__indexSelectable .euiSelectableListItem__append{position:absolute;right:calc(1rem - 2px);top:4px}",""]),e.exports=t},,,,,,function(e,t,a){e.exports=a.p+"73e29c608c16210ec702b89a5c0e258c.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"AppSearch",(function(){return He})),a.d(t,"AppSearchUnconfigured",(function(){return qe})),a.d(t,"AppSearchConfigured",(function(){return Ge}));var n=a(11),s=a.n(n),i=a(15),r=a(37),c=a(54),l=a(69),o=a(38),u=a(41),p=a(141),d=a(71),g=a(57),h=a(244),j=a(45),b=a(42),m=a(80),x=a(84),S=a(53),f=a(13),O=a(2),y=a(137),v=a(43),w=a(240),E=a(144),C=a.n(E),M=a(48);let k;!function(e){e.SelectStep="Select Engine Type",e.ConfigureStep="Configure Engine",e.ReviewStep="Review"}(k||(k={}));const T=Object(r.kea)({path:["enterprise_search","app_search","engine_creation_logic"],actions:{onEngineCreationSuccess:!0,setIngestionMethod:e=>({method:e}),setLanguage:e=>({language:e}),setRawName:e=>({rawName:e}),setAliasRawName:e=>({aliasRawName:e}),submitEngine:!0,onSubmitError:!0,loadIndices:!0,onLoadIndicesSuccess:e=>({indices:e}),setSelectedIndex:e=>({selectedIndexName:e}),setEngineType:e=>({engineType:e}),setCreationStep:e=>e,setIsAliasAllowed:e=>({isAliasAllowed:e}),initializeWithESIndex:e=>({indexName:e})},reducers:{ingestionMethod:["",{setIngestionMethod:(e,{method:t})=>t}],isLoading:[!1,{submitEngine:()=>!0,onSubmitError:()=>!1}],language:[y.b,{setLanguage:(e,{language:t})=>t}],rawName:["",{setRawName:(e,{rawName:t})=>t}],aliasRawName:["",{setAliasRawName:(e,{aliasRawName:t})=>t,setSelectedIndex:(e,{selectedIndexName:t})=>0===t.length||t.startsWith("search-")?"":`search-${t}-alias`,initializeWithESIndex:(e,{indexName:t})=>0===t.length||t.startsWith("search-")?"":`search-${t}-alias`}],isAliasAllowed:[!0,{setIsAliasAllowed:(e,{isAliasAllowed:t})=>t}],isLoadingIndices:[!1,{loadIndices:()=>!0,onLoadIndicesSuccess:()=>!1,onSubmitError:()=>!1}],indices:[[],{onLoadIndicesSuccess:(e,{indices:t})=>t}],selectedIndex:["",{setSelectedIndex:(e,{selectedIndexName:t})=>t,onSubmitError:()=>"",initializeWithESIndex:(e,{indexName:t})=>t}],engineType:["appSearch",{setEngineType:(e,{engineType:t})=>t,initializeWithESIndex:()=>"elasticsearch"}],currentEngineCreationStep:[k.SelectStep,{setCreationStep:(e,t)=>t,initializeWithESIndex:()=>k.ConfigureStep}]},selectors:({selectors:e})=>({name:[()=>[e.rawName],e=>Object(w.a)(e)],aliasName:[()=>[e.aliasRawName],e=>Object(w.a)(e)],indicesFormatted:[()=>[e.indices,e.selectedIndex],(e,t)=>((e,t)=>e.filter((({alias:e,privileges:t})=>(e||t.read)&&t.manage)).map((e=>{let a,n,s,i;return e.name.startsWith("search-")?(n="success",e.alias?(s="Alias is compatible",i="You can use this alias."):(s="Index name is compatible",i=C()("\n          You can directly use this index. You can also optionally create an\n          alias to use as the source of the engine instead.\n        "))):e.alias?(a="warning",n="danger",s="Alias name is incompatible",i='You\'ll have to create a new alias prefixed with "search-".'):(a="iInCircle",n="warning",s="Index name is incompatible",i=C()("\n          Enterprise Search will automatically create an alias to use as the\n          source of the search engine rather than use this index directly.\n        ")),{...t===e.name?{checked:"on"}:{},alias:e.alias,badge:{color:n,toolTipTitle:s,toolTipContent:i,label:e.alias?"Alias":"Index",...a?{icon:a}:{}},count:e.count,disabled:e.alias&&!e.name.startsWith("search-"),label:e.name,health:e.health,status:e.status,total:e.total}})))(e,t)],isSubmitDisabled:[()=>[e.name,e.engineType,e.selectedIndex,e.aliasName,e.showAliasNameErrorMessages],(e,t,a,n,s)=>!(0!==e.length&&!s&&("elasticsearch"!==t||0!==a.length&&(0===n.length?a.startsWith("search-"):n.startsWith("search-"))))],isAliasRequired:[()=>[e.selectedIndex],e=>e.length>0&&!(null!=e&&e.startsWith("search-"))],selectedIndexFormatted:[()=>[e.selectedIndex,e.indicesFormatted],(e,t)=>t.find((t=>t.label===e))],aliasNameErrorMessage:[()=>[e.aliasName,e.indices],(e,t)=>t.find((t=>t.name===e))?O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.aliasName.errorText",{defaultMessage:"\nThere is an existing index or alias with the name {aliasName}.\nPlease choose another alias name.\n",values:{aliasName:e}}):""],showAliasNameErrorMessages:[()=>[e.aliasNameErrorMessage],e=>e.length>0]}),listeners:({values:e,actions:t})=>({submitEngine:async()=>{const{http:a}=o.a.values,{name:n,language:s,engineType:i,selectedIndex:r,aliasName:c}=e;try{if("appSearch"===i){const e=JSON.stringify({name:n,language:s});await a.post("/internal/app_search/engines",{body:e})}else{const e=JSON.stringify({name:n,search_index:{type:"elasticsearch",index_name:r,...0===c.length?{}:{alias_name:c}}});await a.post("/internal/app_search/elasticsearch/engines",{body:e})}t.onEngineCreationSuccess()}catch(e){Object(v.e)(e),t.onSubmitError()}},onEngineCreationSuccess:()=>{const{ingestionMethod:t,name:a}=e,{navigateToUrl:n}=u.a.values,s=(({ingestionMethod:e,engineName:t})=>{if("crawler"===e)return Object(i.generatePath)(M.u,{engineName:t});let a=Object(i.generatePath)(M.C,{engineName:t});return e&&(a+=`?method=${encodeURIComponent(e)}`),a})({ingestionMethod:t,engineName:a});Object(v.g)(Object(y.g)(a)),n(s)},loadIndices:async()=>{const{http:e}=o.a.values;try{const a=await e.get("/internal/enterprise_search/search_indices");t.onLoadIndicesSuccess(a)}catch(e){Object(v.e)(e),t.onSubmitError()}}})});var F=a(12);const _=()=>{const{isSubmitDisabled:e,language:t,name:a,rawName:n}=Object(r.useValues)(T),{setCreationStep:i,setLanguage:c,setRawName:l,submitEngine:o}=Object(r.useActions)(T);return Object(F.jsx)("div",{className:"entSearch__createEngineLayout"},Object(F.jsx)(f.EuiStepsHorizontal,{steps:[{onClick:()=>i(k.SelectStep),status:"complete",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.searchEngineType.label",{defaultMessage:"Search engine type"})},{onClick:()=>{},status:"current",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.configuration.label",{defaultMessage:"Configuration"})},{onClick:()=>{},status:"disabled",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.finish.label",{defaultMessage:"Finish"})}]}),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiPanel,{hasBorder:!0,paddingSize:"l"},Object(F.jsx)(f.EuiForm,{component:"form","data-test-subj":"EngineCreationForm",onSubmit:e=>{e.preventDefault(),o()}},Object(F.jsx)(f.EuiTextAlign,{textAlign:"center"},Object(F.jsx)(f.EuiTitle,null,Object(F.jsx)("h2",null,y.f))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiText,{color:"subdued",textAlign:"center"},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.appSearch.description",{defaultMessage:"Provide a unique name and an optional language choice for your App Search engine."})),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiFormRow,{"data-test-subj":"EngineCreationNameFormRow",label:y.d,helpText:a.length>0&&n!==a?Object(F.jsx)(s.a.Fragment,null,y.i," ",Object(F.jsx)("strong",null,a)):y.a,fullWidth:!0},Object(F.jsx)(f.EuiFieldText,{name:"engine-name",value:n,onChange:e=>l(e.currentTarget.value),autoComplete:"off",fullWidth:!0,"data-test-subj":"EngineCreationNameInput",placeholder:y.e,autoFocus:!0}))),Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiFormRow,{label:y.c},Object(F.jsx)(f.EuiSelect,{name:"engine-language",value:t,options:y.j,"data-test-subj":"EngineCreationLanguageInput",onChange:e=>c(e.currentTarget.value)})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButtonEmpty,{"data-test-subj":"NewEngineBackButton",color:"primary",iconType:"arrowLeft",onClick:()=>{i(k.SelectStep)}},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.backButton.label",{defaultMessage:"Back"}))),Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButton,{disabled:e,type:"submit","data-test-subj":"NewEngineSubmitButton",iconType:"arrowRight",iconSide:"right",fill:!0},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.continue.label",{defaultMessage:"Create search engine"})))))))};a(321);var I=a(96);const R=({option:e})=>{var t,a,n,i,r,c;return e?Object(F.jsx)(f.EuiFlexGroup,{className:"entSearch__indexListItem",alignItems:"center"},Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiHealth,{color:e.health?I.b[e.health]:""},null!==(t=e.health)&&void 0!==t?t:"-")),Object(F.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"optionStatus"},Object(F.jsx)("span",null,Object(F.jsx)("b",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.status",{defaultMessage:"Status"})),":",Object(F.jsx)(f.EuiTextColor,{color:"subdued"},"",null!==(a=e.status)&&void 0!==a?a:"-"))),Object(F.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"optionDocs"},Object(F.jsx)("span",null,Object(F.jsx)("b",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.docCount",{defaultMessage:"Docs count"})),":",Object(F.jsx)(f.EuiTextColor,{color:"subdued"},"",null!==(n=e.count)&&void 0!==n?n:"-"))),Object(F.jsx)(f.EuiFlexItem,{"data-test-subj":"optionStorage"},Object(F.jsx)("span",null,Object(F.jsx)("b",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.storage",{defaultMessage:"Storage size"})),":",Object(F.jsx)(f.EuiTextColor,{color:"subdued"},"",null!==(i=null===(r=e.total)||void 0===r||null===(c=r.store)||void 0===c?void 0:c.size_in_bytes)&&void 0!==i?i:"-"))),Object(F.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"optionStorage"},Object(F.jsx)(f.EuiBadge,{color:e.badge.color,iconType:e.badge.icon},Object(F.jsx)(f.EuiToolTip,{position:"left",title:e.badge.toolTipTitle,content:e.badge.toolTipContent},Object(F.jsx)("p",null,e.badge.label))))):Object(F.jsx)(s.a.Fragment,null)},A=(e,t)=>{var a;return Object(F.jsx)(s.a.Fragment,null,Object(F.jsx)(f.EuiHighlight,{search:t},null!==(a=e.label)&&void 0!==a?a:""),Object(F.jsx)(f.EuiSpacer,{size:"xs"}),Object(F.jsx)(R,{option:e}))},L=()=>{const{aliasName:e,aliasNameErrorMessage:t,aliasRawName:a,indicesFormatted:i,isAliasAllowed:c,isAliasRequired:l,isLoading:o,isLoadingIndices:u,isSubmitDisabled:p,name:d,rawName:g,showAliasNameErrorMessages:h}=Object(r.useValues)(T),{loadIndices:j,setIsAliasAllowed:b,setAliasRawName:m,setCreationStep:x,setRawName:S,setSelectedIndex:v}=Object(r.useActions)(T),w=c?l?"Required":"Optional":"Disabled";return Object(n.useEffect)((()=>{j()}),[]),Object(F.jsx)("div",{className:"entSearch__createEngineLayout"},Object(F.jsx)(f.EuiStepsHorizontal,{steps:[{onClick:()=>x(k.SelectStep),status:"complete",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.searchEngineType.label",{defaultMessage:"Search engine type"})},{onClick:()=>{},status:"current",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.configuration.label",{defaultMessage:"Configuration"})},{onClick:()=>{},title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.review.label",{defaultMessage:"Review"})}]}),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiPanel,{hasBorder:!0},Object(F.jsx)(f.EuiForm,{component:"form","data-test-subj":"EngineCreationForm",onSubmit:e=>{e.preventDefault(),x(k.ReviewStep)}},Object(F.jsx)(f.EuiTextAlign,{textAlign:"center"},Object(F.jsx)(f.EuiTitle,null,Object(F.jsx)("h2",null,y.f))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiText,{color:"subdued",textAlign:"center"},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.description",{defaultMessage:"Provide a unique name and select an index for your App Search engine."})),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiFormRow,{"data-test-subj":"EngineCreationNameFormRow",label:y.d,helpText:d.length>0&&g!==d?Object(F.jsx)(s.a.Fragment,null,y.i," ",Object(F.jsx)("strong",null,d)):y.a,fullWidth:!0},Object(F.jsx)(f.EuiFieldText,{name:"engine-name",value:g,onChange:e=>S(e.currentTarget.value),autoComplete:"off",fullWidth:!0,"data-test-subj":"EngineCreationNameInput",placeholder:y.e,autoFocus:!0})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiCallOut,{size:"m",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.callout.title",{defaultMessage:"App Search has index and alias name requirements"}),iconType:"iInCircle"},Object(F.jsx)("p",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.callout.body",{defaultMessage:'\n                    App Search engines can only be created with indices or\n                    aliases prefixed with "search-". If you select an index that\n                    doesnt start with "search-", an alias to that index will be\n                    created and used.\n                  '}))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFormRow,{label:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.searchIndexSelectable.label",{defaultMessage:"Select the Elasticsearch index youd like to use"}),helpText:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.searchIndexSelectable.helpText",{defaultMessage:"Select an index or alias prefixed with 'search-' or create a new alias below"}),fullWidth:!0},Object(F.jsx)(f.EuiSelectable,{searchable:!0,options:i,singleSelection:!0,"aria-label":O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.indexSelectorAriaLabel",{defaultMessage:"Select the Elasticsearch index youd like to use"}),isLoading:u,listProps:{bordered:!0,rowHeight:56},onChange:e=>{var t,a,n;const s=e.find((e=>"on"===e.checked));v(null!==(t=null==s?void 0:s.label)&&void 0!==t?t:""),null!==(a=null==s?void 0:s.alias)&&void 0!==a&&a&&m(""),b(null===(n=!(null!=s&&s.alias))||void 0===n||n)},loadingMessage:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.selectable.loading",{defaultMessage:"Loading Elasticsearch indices"}),emptyMessage:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.elasticsearchIndex.selectable.empty",{defaultMessage:"No Elasticsearch indices available"}),renderOption:A,"data-test-subj":"SearchIndexSelectable",className:"entSearch__indexSelectable"},((e,t)=>Object(F.jsx)(s.a.Fragment,null,t,e)))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiFormRow,{"data-test-subj":"AliasNameFormRow",label:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.aliasName.label",{defaultMessage:"Alias name"}),helpText:e.length>0&&a!==e?Object(F.jsx)(s.a.Fragment,null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.aliasName.prefixAndNamed.helpText",{defaultMessage:"Alias names must be prefixed with 'search-' in order to be used with App Search engines. Your alias will be named"}),"",Object(F.jsx)("b",null,e)):O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.aliasName.prefix.helpText",{defaultMessage:"Alias names must be prefixed with 'search-' in order to be used with App Search engines"}),fullWidth:!0,isInvalid:h,error:t},Object(F.jsx)(f.EuiFieldText,{name:"alias-name",value:a,onChange:e=>m(e.currentTarget.value),autoComplete:"off",fullWidth:!0,"data-test-subj":"AliasNameInput",prepend:w,disabled:!c,isInvalid:h})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButtonEmpty,{"data-test-subj":"NewEngineBackButton",color:"primary",iconType:"arrowLeft",onClick:()=>x(k.SelectStep)},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.backButton.label",{defaultMessage:"Back"}))),Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButton,{disabled:p,isLoading:o,type:"submit","data-test-subj":"NewEngineContinueButton",fill:!0},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureForm.continue.label",{defaultMessage:"Continue"})))))))},D=()=>{const{aliasName:e,name:t,selectedIndex:a,selectedIndexFormatted:n}=Object(r.useValues)(T),{setCreationStep:s,submitEngine:i}=Object(r.useActions)(T);return Object(F.jsx)("div",{className:"entSearch__createEngineLayout"},Object(F.jsx)(f.EuiStepsHorizontal,{steps:[{onClick:()=>s(k.SelectStep),status:"complete",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.searchEngineType.label",{defaultMessage:"Search engine type"})},{onClick:()=>s(k.ConfigureStep),status:"complete",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.configuration.label",{defaultMessage:"Configuration"})},{onClick:()=>{},status:"current",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.review.label",{defaultMessage:"Review"})}]}),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiPanel,{hasBorder:!0},Object(F.jsx)(f.EuiForm,{component:"form","data-test-subj":"ElasticsearchEngineCreationForm",onSubmit:e=>{e.preventDefault(),i()}},Object(F.jsx)(f.EuiTextAlign,{textAlign:"center"},Object(F.jsx)(f.EuiTitle,null,Object(F.jsx)("h2",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.title.label",{defaultMessage:"Review your search engine"})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiText,{color:"subdued",textAlign:"center"},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.description",{defaultMessage:"Your App Search engine will be created with the following configuration."})),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiPanel,{color:"subdued",hasShadow:!1},Object(F.jsx)(f.EuiText,null,Object(F.jsx)("h4",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.engineType.title",{defaultMessage:"Engine Type"}))),Object(F.jsx)(f.EuiText,null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.engineType.description",{defaultMessage:"Elasticsearch index-based"})))),Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiPanel,{color:"subdued",hasShadow:!1},Object(F.jsx)(f.EuiText,null,Object(F.jsx)("h4",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.aliasName.title",{defaultMessage:"Alias Name"}))),Object(F.jsx)(f.EuiText,null,e||"--"))),Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiPanel,{color:"subdued",hasShadow:!1},Object(F.jsx)(f.EuiText,null,Object(F.jsx)("h4",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.engineName.title",{defaultMessage:"Engine Name"}))),Object(F.jsx)(f.EuiText,null,t)))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiPanel,{color:"subdued",hasShadow:!1},Object(F.jsx)(f.EuiText,null,Object(F.jsx)("h4",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.reviewForm.elasticsearchIndex.title",{defaultMessage:"Elasticsearch Index"}))),Object(F.jsx)(f.EuiText,null,a),Object(F.jsx)(f.EuiSpacer,{size:"s"}),Object(F.jsx)(R,{option:n})))),Object(F.jsx)(f.EuiSpacer,null),e.length>0&&Object(F.jsx)(f.EuiCallOut,{"data-test-subj":"ElasticsearchEngineCreationFormAliasNameCallout",size:"m",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.configureElasticsearchEngine.callout.title",{defaultMessage:"An alias will be created and used for this engine"}),iconType:"iInCircle"},Object(F.jsx)(f.EuiI18n,{token:"xpack.enterpriseSearch.appSearch.engineCreation.configureElasticsearchEngine.callout.body",default:"Enterprise Search will create an alias for you named\n                  {aliasName} and use it as the source of the engine, {name}.",values:{aliasName:Object(F.jsx)("b",null,e),name:Object(F.jsx)("b",null,t)}})),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButtonEmpty,{"data-test-subj":"NewEngineBackButton",color:"primary",iconType:"arrowLeft",onClick:()=>{s(k.ConfigureStep)}},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.editConfiguration.label",{defaultMessage:"Edit configuration"}))),Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButton,{type:"submit","data-test-subj":"NewEngineSubmitButton",iconType:"arrowRight",iconSide:"right",fill:!0},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.form.continue.label",{defaultMessage:"Create search engine"})))))))},z=()=>{const{engineType:e}=Object(r.useValues)(T),{setEngineType:t,setCreationStep:a}=Object(r.useActions)(T);return Object(F.jsx)("div",{className:"entSearch__createEngineLayout"},Object(F.jsx)(f.EuiStepsHorizontal,{steps:[{onClick:()=>{},status:"current",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.searchEngineType.label",{defaultMessage:"Search engine type"})},{onClick:()=>a(k.ConfigureStep),title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.configuration.label",{defaultMessage:"Configuration"})},{onClick:()=>{},status:"disabled",title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.steps.review.label",{defaultMessage:"Review"})}]}),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiPanel,{hasBorder:!0,paddingSize:"l"},Object(F.jsx)(f.EuiTextAlign,{textAlign:"center"},Object(F.jsx)(f.EuiTitle,null,Object(F.jsx)("h2",null,O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngineTypeForm.title",{defaultMessage:"Select a search engine type"})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiText,{color:"subdued",textAlign:"center"},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngineTypeForm.description",{defaultMessage:"\n                You can now create search engines that use an existing\n                Elasticsearch index to combine the search management tools of App\n                Search with the flexibility of Elasticsearch indices.\n              "}),Object(F.jsx)(f.EuiLink,{href:"https://www.elastic.co/guide/en/app-search/current/elasticsearch-engines.html",external:!0},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngineTypeForm.description.link",{defaultMessage:"Learn more"}))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,{gutterSize:"l"},Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiCard,{title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngine.appSearch.title",{defaultMessage:"App Search managed docs"}),description:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngine.appSearch.description",{defaultMessage:"\n                    Use App Search APIs to manage your documents. App Search will write your documents into an underlying index and manage it for you.\n                  "}),selectable:{isSelected:"appSearch"===e,onClick:()=>t("appSearch")},"data-test-subj":"AppSearchEngineSelectable",hasBorder:!0})),Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiCard,{title:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngine.elasticsearch.title",{defaultMessage:"Elasticsearch index-based"}),description:O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.selectEngine.elasticsearch.description",{defaultMessage:"\n                    Use an existing index to manage your documents.\n                    Adds search with App Search to Elasticsearch indices.\n                    Some functions require specific subfields.\n                  "}),selectable:{isSelected:"elasticsearch"===e,onClick:()=>t("elasticsearch")},"data-test-subj":"ElasticsearchEngineSelectable",hasBorder:!0}))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,{justifyContent:"flexEnd"},Object(F.jsx)(f.EuiFlexItem,{grow:!1},Object(F.jsx)(f.EuiButton,{fill:!0,iconType:"arrowRight",iconSide:"right",onClick:()=>{a(k.ConfigureStep)}},O.i18n.translate("xpack.enterpriseSearch.appSearch.engineCreation.nextStep.buttonLabel",{defaultMessage:"Continue"}))))))},P=()=>{const{search:e}=Object(i.useLocation)(),{method:t,...a}=Object(m.a)(e),{engineType:s,currentEngineCreationStep:c}=Object(r.useValues)(T),{setIngestionMethod:l,initializeWithESIndex:o}=Object(r.useActions)(T);return Object(n.useEffect)((()=>{"string"==typeof t&&l(t);const e=a[b.p];"string"==typeof e&&o(e)}),[]),Object(F.jsx)(S.a,{pageChrome:[x.a,y.h],pageHeader:{pageTitle:y.h},"data-test-subj":"EngineCreation"},c===k.SelectStep&&Object(F.jsx)(z,null),c===k.ConfigureStep&&"appSearch"===s&&Object(F.jsx)(_,null),c===k.ConfigureStep&&"elasticsearch"===s&&Object(F.jsx)(L,null),c===k.ReviewStep&&Object(F.jsx)(D,null))};var N=a(77),B=a(121),V=a(60),U=a(52);const H=()=>Object(F.jsx)(s.a.Fragment,null,Object(F.jsx)(V.c,null),Object(F.jsx)(U.a,{action:"error",metric:"cannot_connect"}),Object(F.jsx)(N.a,{isEmptyState:!0},Object(F.jsx)(B.b,null)));a(47),a(75),a(119),a(329),a(102),Object(F.jsx)(f.EuiEmptyPrompt,{iconType:"clock",title:Object(F.jsx)("h2",null,"No Items"),body:Object(F.jsx)("p",null,"No Items")});var q=a(14);const G=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.title",{defaultMessage:"Create a meta engine"}),$=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.title",{defaultMessage:"Name your meta engine"}),W=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.submitButton.buttonLabel",{defaultMessage:"Create meta engine"}),Q=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.metaEngineDescription",{defaultMessage:"Meta engines allow you to combine multiple engines into one searchable engine."}),J=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.documentationLink",{defaultMessage:"Read the documentation"}),K=Object(F.jsx)(q.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.metaEngineCreation.form.documentationDescription",defaultMessage:"{documentationLink} for information about how to get started.",values:{documentationLink:Object(F.jsx)(f.EuiLink,{href:M.N,target:"_blank"},J)}}),Y=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.engineName.label",{defaultMessage:"Meta engine name"}),Z=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.engineName.allowedCharactersHelpText",{defaultMessage:"Meta engine names can only contain lowercase letters, numbers, and hyphens"}),X=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.engineName.sanitizedNameHelpText",{defaultMessage:"Your meta engine will be named"}),ee=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.engineName.placeholder",{defaultMessage:"i.e., my-meta-engine"}),te=O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.sourceEngines.label",{defaultMessage:"Add source engines to this meta engine"}),ae=e=>O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.form.sourceEngines.maxSourceEnginesWarningTitle",{defaultMessage:"Meta engines have a limit of {maxEnginesPerMetaEngine} source engines",values:{maxEnginesPerMetaEngine:e}}),ne=Object(r.kea)({path:["enterprise_search","app_search","meta_engine_creation_logic"],actions:{fetchIndexedEngineNames:(e=b.k.page.current)=>({page:e}),onEngineCreationSuccess:!0,setIndexedEngineNames:e=>({indexedEngineNames:e}),setRawName:e=>({rawName:e}),setSelectedIndexedEngineNames:e=>({selectedIndexedEngineNames:e}),submitEngine:!0,onSubmitError:!0},reducers:{isLoading:[!1,{submitEngine:()=>!0,onSubmitError:()=>!1}],indexedEngineNames:[[],{setIndexedEngineNames:(e,{indexedEngineNames:t})=>t}],rawName:["",{setRawName:(e,{rawName:t})=>t}],selectedIndexedEngineNames:[[],{setSelectedIndexedEngineNames:(e,{selectedIndexedEngineNames:t})=>t}]},selectors:({selectors:e})=>({name:[()=>[e.rawName],e=>Object(w.a)(e)]}),listeners:({values:e,actions:t})=>({fetchIndexedEngineNames:async({page:a})=>{const{http:n}=o.a.values;let s;try{s=await n.get("/internal/app_search/engines",{query:{type:"indexed","page[current]":a,"page[size]":b.k.page.size}})}catch(e){Object(v.e)(e)}if(s){const n=s.results.map((e=>e.name));t.setIndexedEngineNames([...e.indexedEngineNames,...n]),a<s.meta.page.total_pages&&t.fetchIndexedEngineNames(a+1)}},onEngineCreationSuccess:()=>{const{name:t}=e,{navigateToUrl:a}=u.a.values,n=Object(i.generatePath)(M.C,{engineName:t});Object(v.g)((e=>O.i18n.translate("xpack.enterpriseSearch.appSearch.metaEngineCreation.successMessage",{defaultMessage:"Meta engine '{name}' was created",values:{name:e}}))(t)),a(n)},submitEngine:async()=>{const{http:a}=o.a.values,{name:n,selectedIndexedEngineNames:s}=e,i=JSON.stringify({name:n,type:"meta",source_engines:s});try{await a.post("/internal/app_search/engines",{body:i}),t.onEngineCreationSuccess()}catch(e){Object(v.e)(e),t.onSubmitError()}}})}),se=e=>({label:e}),ie=e=>e.label,re=()=>{const{configuredLimits:{engine:{maxEnginesPerMetaEngine:e}}}=Object(r.useValues)(g.a),{fetchIndexedEngineNames:t,setRawName:a,setSelectedIndexedEngineNames:i,submitEngine:c}=Object(r.useActions)(ne),{rawName:l,name:o,indexedEngineNames:u,selectedIndexedEngineNames:p,isLoading:d}=Object(r.useValues)(ne);return Object(n.useEffect)((()=>{t()}),[]),Object(F.jsx)(S.a,{pageChrome:[x.a,G],pageHeader:{pageTitle:G,description:Object(F.jsx)(s.a.Fragment,null,Q,Object(F.jsx)("br",null),K)},"data-test-subj":"MetaEngineCreation"},Object(F.jsx)(f.EuiPanel,{hasBorder:!0},Object(F.jsx)(f.EuiForm,{component:"form","data-test-subj":"MetaEngineCreationForm",onSubmit:e=>{e.preventDefault(),c()}},Object(F.jsx)(f.EuiTitle,null,Object(F.jsx)("h2",null,$)),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFlexGroup,null,Object(F.jsx)(f.EuiFlexItem,null,Object(F.jsx)(f.EuiFormRow,{"data-test-subj":"MetaEngineCreationNameFormRow",label:Y,helpText:o.length>0&&l!==o?Object(F.jsx)(s.a.Fragment,null,X," ",Object(F.jsx)("strong",null,o)):Z,fullWidth:!0},Object(F.jsx)(f.EuiFieldText,{name:"engine-name",value:l,onChange:e=>a(e.currentTarget.value),fullWidth:!0,"data-test-subj":"MetaEngineCreationNameInput",placeholder:ee,autoFocus:!0})))),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiFormRow,{label:te,fullWidth:!0},Object(F.jsx)(f.EuiComboBox,{"data-test-subj":"MetaEngineCreationSourceEnginesInput",options:u.map(se),selectedOptions:p.map(se),onChange:e=>{i(e.map(ie))}})),p.length>e&&Object(F.jsx)(s.a.Fragment,null,Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiCallOut,{color:"warning",title:ae(e)})),Object(F.jsx)(f.EuiSpacer,null),Object(F.jsx)(f.EuiButton,{disabled:0===o.length||0===p.length||p.length>e,isLoading:d,type:"submit","data-test-subj":"NewMetaEngineSubmitButton",color:"success",fill:!0},W))))};var ce=a(249),le=a(1),oe=a(91),ue=a(63);const pe=O.i18n.translate("xpack.enterpriseSearch.appSearch.roleMappingDeletedMessage",{defaultMessage:"Your role mapping was deleted"}),de=O.i18n.translate("xpack.enterpriseSearch.appSearch.roleMappingCreatedMessage",{defaultMessage:"Your role mapping was created"}),ge=O.i18n.translate("xpack.enterpriseSearch.appSearch.roleMappingUpdatedMessage",{defaultMessage:"Your role mapping was updated"}),he=O.i18n.translate("xpack.enterpriseSearch.appSearch.roleMappingsEngineAccessHeading",{defaultMessage:"Engine access"}),je=O.i18n.translate("xpack.enterpriseSearch.appSearch.DEV_ROLE_TYPE_DESCRIPTION",{defaultMessage:"Devs can manage all aspects of an engine."}),be=O.i18n.translate("xpack.enterpriseSearch.appSearch.editorRoleTypeDescription",{defaultMessage:"Editors can manage search settings."}),me=O.i18n.translate("xpack.enterpriseSearch.appSearch.analystRoleTypeDescription",{defaultMessage:"Analysts can only view documents, query tester, and analytics."}),xe=O.i18n.translate("xpack.enterpriseSearch.appSearch.ownerRoleTypeDescription",{defaultMessage:"Owners can do anything. There can be many owners on the account, but there must be at least one owner at any time."}),Se=O.i18n.translate("xpack.enterpriseSearch.appSearch.adminRoleTypeDescription",{defaultMessage:"Admins can do anything, except manage account settings."}),fe=O.i18n.translate("xpack.enterpriseSearch.appSearch.engineRequiredError",{defaultMessage:"At least one assigned engine is required."}),Oe=O.i18n.translate("xpack.enterpriseSearch.appSearch.allEnginesLabel",{defaultMessage:"Assign to all engines"}),ye=O.i18n.translate("xpack.enterpriseSearch.appSearch.allEnginesDescription",{defaultMessage:"Assigning to all engines includes all current and future engines as created and administered at a later date."}),ve=O.i18n.translate("xpack.enterpriseSearch.appSearch.specificEnginesLabel",{defaultMessage:"Assign to specific engines"}),we=O.i18n.translate("xpack.enterpriseSearch.appSearch.specificEnginesDescription",{defaultMessage:"Assign to a select set of engines statically."}),Ee=O.i18n.translate("xpack.enterpriseSearch.appSearch.engineAssignmentLabel",{defaultMessage:"Engine assignment"}),Ce=[{id:"dev",description:je},{id:"editor",description:be},{id:"analyst",description:me}],Me=[{id:"owner",description:xe},{id:"admin",description:Se}];var ke=a(158);const Te={username:"",email:""},Fe=Object(r.kea)({path:["enterprise_search","app_search","users_and_roles"],actions:{setRoleMappingsData:e=>e,setRoleMapping:e=>({roleMapping:e}),setElasticsearchUser:e=>({elasticsearchUser:e}),setSingleUserRoleMapping:e=>({singleUserRoleMapping:e}),setRoleMappings:({roleMappings:e})=>({roleMappings:e}),setRoleMappingErrors:e=>({errors:e}),handleRoleChange:e=>({roleType:e}),handleUsernameSelectChange:e=>({username:e}),handleEngineSelectionChange:e=>({engineNames:e}),handleAttributeSelectorChange:(e,t)=>({value:e,firstElasticsearchRole:t}),handleAttributeValueChange:e=>({value:e}),handleAccessAllEnginesChange:e=>({selected:e}),enableRoleBasedAccess:!0,openSingleUserRoleMappingFlyout:!0,setUserExistingRadioValue:e=>({userFormUserIsExisting:e}),resetState:!0,initializeRoleMappings:!0,initializeSingleUserRoleMapping:e=>({roleMappingId:e}),initializeRoleMapping:e=>({roleMappingId:e}),handleDeleteMapping:e=>({roleMappingId:e}),handleSaveMapping:!0,handleSaveUser:!0,openRoleMappingFlyout:!0,closeUsersAndRolesFlyout:!1,setElasticsearchUsernameValue:e=>({username:e}),setElasticsearchEmailValue:e=>({email:e}),setUserCreated:!0,setUserFormIsNewUser:e=>({userFormIsNewUser:e})},reducers:{dataLoading:[!0,{setRoleMappingsData:()=>!1,setRoleMappings:()=>!1,resetState:()=>!0,enableRoleBasedAccess:()=>!0}],roleMappings:[[],{setRoleMappingsData:(e,{roleMappings:t})=>t,setRoleMappings:(e,{roleMappings:t})=>t,resetState:()=>[]}],singleUserRoleMappings:[[],{setRoleMappingsData:(e,{singleUserRoleMappings:t})=>t,resetState:()=>[]}],hasAdvancedRoles:[!1,{setRoleMappingsData:(e,{hasAdvancedRoles:t})=>t}],availableEngines:[[],{setRoleMappingsData:(e,{availableEngines:t})=>t,resetState:()=>[]}],attributes:[[],{setRoleMappingsData:(e,{attributes:t})=>t,resetState:()=>[]}],elasticsearchRoles:[[],{setRoleMappingsData:(e,{elasticsearchRoles:t})=>t}],elasticsearchUsers:[[],{setRoleMappingsData:(e,{elasticsearchUsers:t})=>t,resetState:()=>[]}],roleMapping:[null,{setRoleMapping:(e,{roleMapping:t})=>t,initializeRoleMappings:()=>null,resetState:()=>null,closeUsersAndRolesFlyout:()=>null}],roleType:["owner",{setRoleMapping:(e,{roleMapping:t})=>t.roleType,handleRoleChange:(e,{roleType:t})=>t}],accessAllEngines:[!0,{setRoleMapping:(e,{roleMapping:t})=>t.accessAllEngines,handleRoleChange:(e,{roleType:t})=>!Object(ke.a)(t),handleAccessAllEnginesChange:(e,{selected:t})=>t,closeUsersAndRolesFlyout:()=>!0}],attributeValue:["",{setRoleMapping:(e,{roleMapping:t})=>(e=>Object.entries(e.rules)[0][1])(t),handleAttributeSelectorChange:(e,{value:t,firstElasticsearchRole:a})=>"role"===t?a:"",handleAttributeValueChange:(e,{value:t})=>t,resetState:()=>"",closeUsersAndRolesFlyout:()=>""}],attributeName:["username",{setRoleMapping:(e,{roleMapping:t})=>(e=>Object.entries(e.rules)[0][0])(t),handleAttributeSelectorChange:(e,{value:t})=>t,resetState:()=>"username",closeUsersAndRolesFlyout:()=>"username"}],selectedEngines:[new Set,{setRoleMapping:(e,{roleMapping:t})=>new Set(t.engines.map((e=>e.name))),handleAccessAllEnginesChange:()=>new Set,handleEngineSelectionChange:(e,{engineNames:t})=>{const a=new Set;return t.forEach((e=>a.add(e))),a},closeUsersAndRolesFlyout:()=>new Set}],roleMappingFlyoutOpen:[!1,{openRoleMappingFlyout:()=>!0,closeUsersAndRolesFlyout:()=>!1,initializeRoleMappings:()=>!1,initializeRoleMapping:()=>!0}],singleUserRoleMappingFlyoutOpen:[!1,{openSingleUserRoleMappingFlyout:()=>!0,closeUsersAndRolesFlyout:()=>!1,initializeSingleUserRoleMapping:()=>!0}],singleUserRoleMapping:[null,{setSingleUserRoleMapping:(e,{singleUserRoleMapping:t})=>t||null,closeUsersAndRolesFlyout:()=>null}],roleMappingErrors:[[],{setRoleMappingErrors:(e,{errors:t})=>t,handleSaveMapping:()=>[],closeUsersAndRolesFlyout:()=>[]}],userFormUserIsExisting:[!0,{setUserExistingRadioValue:(e,{userFormUserIsExisting:t})=>t,closeUsersAndRolesFlyout:()=>!0}],elasticsearchUser:[Te,{setRoleMappingsData:(e,{elasticsearchUsers:t})=>t[0]||Te,setElasticsearchUser:(e,{elasticsearchUser:t})=>t||Te,setElasticsearchUsernameValue:(e,{username:t})=>({...e,username:t}),setElasticsearchEmailValue:(e,{email:t})=>({...e,email:t}),closeUsersAndRolesFlyout:()=>Te}],userCreated:[!1,{setUserCreated:()=>!0,closeUsersAndRolesFlyout:()=>!1}],userFormIsNewUser:[!0,{setUserFormIsNewUser:(e,{userFormIsNewUser:t})=>t}],smtpSettingsPresent:[!1,{setRoleMappingsData:(e,{smtpSettingsPresent:t})=>t}],formLoading:[!1,{handleSaveMapping:()=>!0,handleSaveUser:()=>!0,initializeRoleMappings:()=>!1,setRoleMappingErrors:()=>!1}]},selectors:({selectors:e})=>({selectedOptions:[()=>[e.selectedEngines,e.availableEngines],(e,t)=>{const a=Array.from(e.values());return t.filter((({name:e})=>a.includes(e))).map((({name:e})=>({label:e,value:e})))}]}),listeners:({actions:e,values:t})=>({enableRoleBasedAccess:async()=>{const{http:t}=o.a.values;try{await t.post("/internal/app_search/role_mappings/enable_role_based_access"),e.initializeRoleMappings()}catch(e){Object(v.e)(e)}},initializeRoleMappings:async()=>{const{http:t}=o.a.values;try{const a=await t.get("/internal/app_search/role_mappings");e.setRoleMappingsData(a)}catch(e){Object(v.e)(e)}},initializeRoleMapping:async({roleMappingId:a})=>{const n=t.roleMappings.find((({id:e})=>e===a));n&&e.setRoleMapping(n)},initializeSingleUserRoleMapping:({roleMappingId:a})=>{const n=t.singleUserRoleMappings.find((({roleMapping:e})=>e.id===a));n&&(e.setElasticsearchUser(n.elasticsearchUser),e.setRoleMapping(n.roleMapping)),e.setSingleUserRoleMapping(n),e.setUserFormIsNewUser(!n)},handleDeleteMapping:async({roleMappingId:t})=>{const{http:a}=o.a.values,n=`/internal/app_search/role_mappings/${t}`;try{await a.delete(n),e.initializeRoleMappings(),Object(v.g)(pe)}catch(e){Object(v.e)(e)}},handleSaveMapping:async()=>{const{http:a}=o.a.values,{attributeName:n,attributeValue:s,roleType:i,roleMapping:r,accessAllEngines:c,selectedEngines:l}=t,u=JSON.stringify({roleType:i,accessAllEngines:c,rules:{[n]:s},engines:c?[]:Array.from(l)}),p=r?a.put(`/internal/app_search/role_mappings/${r.id}`,{body:u}):a.post("/internal/app_search/role_mappings",{body:u}),d=r?ge:de;try{await p,e.initializeRoleMappings(),Object(v.g)(d)}catch(t){var g,h;e.setRoleMappingErrors(null==t||null===(g=t.body)||void 0===g||null===(h=g.attributes)||void 0===h?void 0:h.errors)}},resetState:()=>{Object(v.d)()},handleSaveUser:async()=>{var a;const{http:n}=o.a.values,{roleType:s,singleUserRoleMapping:i,accessAllEngines:r,selectedEngines:c,elasticsearchUser:{email:l,username:u}}=t,p=JSON.stringify({roleMapping:{engines:r?[]:Array.from(c),roleType:s,accessAllEngines:r,id:null==i||null===(a=i.roleMapping)||void 0===a?void 0:a.id},elasticsearchUser:{username:u,email:l}});try{const t=await n.post("/internal/app_search/single_user_role_mapping",{body:p});e.setSingleUserRoleMapping(t),e.setUserCreated(),e.initializeRoleMappings()}catch(t){var d,g;e.setRoleMappingErrors(null==t||null===(d=t.body)||void 0===d||null===(g=d.attributes)||void 0===g?void 0:g.errors)}},closeUsersAndRolesFlyout:()=>{Object(v.d)();const a=t.elasticsearchUsers[0];e.setElasticsearchUser(a)},openRoleMappingFlyout:()=>{Object(v.d)()},openSingleUserRoleMappingFlyout:()=>{Object(v.d)()},setUserExistingRadioValue:({userFormUserIsExisting:a})=>{const n=t.elasticsearchUsers[0];e.setElasticsearchUser(a?n:Te)},handleUsernameSelectChange:({username:a})=>{const n=t.elasticsearchUsers.find((e=>e.username===a));n&&e.setElasticsearchUser(n)}})}),_e=()=>{const{handleAccessAllEnginesChange:e,handleEngineSelectionChange:t}=Object(r.useActions)(Fe),{accessAllEngines:a,availableEngines:n,roleType:i,selectedEngines:c,selectedOptions:l}=Object(r.useValues)(Fe),o=c.size>0||a,u=[{id:"all",label:Object(F.jsx)(oe.f,{label:Oe,description:ye})},{id:"specific",label:Object(F.jsx)(oe.f,{label:ve,description:we})}];return Object(F.jsx)(s.a.Fragment,null,Object(F.jsx)(f.EuiHorizontalRule,null),Object(F.jsx)(f.EuiFormRow,null,Object(F.jsx)(f.EuiRadioGroup,{options:u,disabled:!Object(ke.a)(i),idSelected:a?"all":"specific",onChange:t=>e("all"===t),legend:{children:Object(F.jsx)("span",null,Ee)}})),Object(F.jsx)(f.EuiFormRow,{isInvalid:!o,error:[fe]},Object(F.jsx)(f.EuiComboBox,{"data-test-subj":"enginesSelect",selectedOptions:l,options:n.map((({name:e})=>({label:e,value:e}))),onChange:e=>{t(e.map((({value:e})=>e)))},fullWidth:!0,isDisabled:a||!Object(ke.a)(i)})))},Ie=()=>{const{myRole:e}=Object(r.useValues)(g.a),{handleAttributeSelectorChange:t,handleAttributeValueChange:a,handleRoleChange:n,handleSaveMapping:s,closeUsersAndRolesFlyout:i}=Object(r.useActions)(Fe),{accessAllEngines:c,attributeName:l,attributeValue:o,attributes:u,elasticsearchRoles:p,hasAdvancedRoles:d,roleMapping:h,roleType:j,selectedEngines:b,roleMappingErrors:m,formLoading:x}=Object(r.useValues)(Fe),S=!h,O=b.size>0||c,y="role"!==l&&!o,v=({id:t,description:a})=>({id:t,description:a,disabled:!e.availableRoleTypes.includes(t)}),w=Me.map(v),E=Ce.map(v),C=d?[...w,...E]:w;return Object(F.jsx)(oe.c,{disabled:y||!O,formLoading:x,isNew:S,closeUsersAndRolesFlyout:i,handleSaveMapping:s},Object(F.jsx)(f.EuiForm,{isInvalid:m.length>0,error:m},Object(F.jsx)(oe.a,{attributeName:l,attributeValue:o,attributeValueInvalid:y,attributes:u,elasticsearchRoles:p,disabled:!!h,handleAttributeSelectorChange:t,handleAttributeValueChange:a}),Object(F.jsx)(f.EuiSpacer,{size:"m"}),Object(F.jsx)(oe.g,{roleType:j,roleOptions:C,onChange:n,label:"Role"}),d&&Object(F.jsx)(_e,null)))};var Re=a(85);const Ae=["owner","admin"],Le=["dev","editor","analyst"],De=()=>{const{handleSaveUser:e,closeUsersAndRolesFlyout:t,setUserExistingRadioValue:a,setElasticsearchUsernameValue:n,setElasticsearchEmailValue:s,handleRoleChange:i,handleUsernameSelectChange:c}=Object(r.useActions)(Fe),{availableEngines:l,singleUserRoleMapping:o,hasAdvancedRoles:u,userFormUserIsExisting:p,elasticsearchUsers:d,elasticsearchUser:g,roleType:h,roleMappingErrors:j,userCreated:b,userFormIsNewUser:m,smtpSettingsPresent:x,formLoading:S}=Object(r.useValues)(Fe),O=u?[...Ae,...Le]:Ae,y=l.length>0&&u,v=!(p||g.email&&g.username),w=!(!o||o.invitation||o.elasticsearchUser.enabled),E=o&&Object(F.jsx)(oe.i,{username:o.elasticsearchUser.username,email:o.elasticsearchUser.email,roleType:o.roleMapping.roleType,showKibanaAccessWarning:!o.hasEnterpriseSearchRole}),C=(null==o?void 0:o.invitation)&&Object(F.jsx)(oe.k,{isNew:b,invitationCode:o.invitation.code,urlPrefix:Object(Re.b)()}),M=Object(F.jsx)(f.EuiForm,{isInvalid:j.length>0,error:j},Object(F.jsx)(oe.l,{isNewUser:m,smtpSettingsPresent:x,elasticsearchUsers:d,handleRoleChange:i,elasticsearchUser:g,setUserExisting:a,setElasticsearchEmailValue:s,setElasticsearchUsernameValue:n,handleUsernameSelectChange:c,userFormUserIsExisting:p,roleTypes:O,roleType:h}),y&&Object(F.jsx)(_e,null));return Object(F.jsx)(oe.j,{disabled:v,formLoading:S,isComplete:b,isNew:m,closeUserFlyout:t,handleSaveUser:e},b?E:M,C,w&&Object(F.jsx)(oe.b,{isNew:m}))},ze=()=>{const{enableRoleBasedAccess:e,initializeRoleMappings:t,initializeRoleMapping:a,initializeSingleUserRoleMapping:i,handleDeleteMapping:c,resetState:l}=Object(r.useActions)(Fe),{roleMappings:o,singleUserRoleMappings:u,dataLoading:p,roleMappingFlyoutOpen:d,singleUserRoleMappingFlyoutOpen:g}=Object(r.useValues)(Fe);Object(n.useEffect)((()=>(t(),l)),[]);const h=u.length>0,j=Object(F.jsx)(oe.h,{productName:le.d.NAME,docsLink:M.V,onEnable:e}),b=Object(F.jsx)("section",null,Object(F.jsx)(oe.d,{productName:le.d.NAME,docsLink:M.V,onClick:()=>a()}),Object(F.jsx)(oe.e,{roleMappings:o,accessItemKey:"engines",accessHeader:he,initializeRoleMapping:a,handleDeleteMapping:c})),m=Object(F.jsx)(oe.p,{accessItemKey:"engines",singleUserRoleMappings:u,initializeSingleUserRoleMapping:i,handleDeleteMapping:c}),x=Object(F.jsx)(s.a.Fragment,null,Object(F.jsx)(oe.o,{onClick:()=>i()}),Object(F.jsx)(f.EuiSpacer,null),h?m:Object(F.jsx)(oe.n,null));return Object(F.jsx)(S.a,{pageChrome:[ue.S],pageHeader:{pageTitle:ue.S},isLoading:p,isEmptyState:o.length<1,emptyState:j},d&&Object(F.jsx)(Ie,null),g&&Object(F.jsx)(De,null),b,Object(F.jsx)(f.EuiSpacer,{size:"xxl"}),x)};var Pe=a(332),Ne=a(140),Be=a(933),Ve=a.n(Be);const Ue=()=>Object(F.jsx)(Ne.b,{productName:le.d.NAME,productEuiIcon:"logoAppSearch"},Object(F.jsx)(V.c,{trail:[Ne.a]}),Object(F.jsx)(U.a,{action:"viewed",metric:"setup_guide"}),Object(F.jsx)("a",{href:"https://www.elastic.co/webinars/getting-started-with-elastic-app-search",target:"_blank",rel:"noopener noreferrer"},Object(F.jsx)("img",{className:"setupGuide__thumbnail",src:Ve.a,alt:O.i18n.translate("xpack.enterpriseSearch.appSearch.setupGuide.videoAlt",{defaultMessage:"Getting started with App Search - in this short video we'll guide you through how to get App Search up and running"}),width:"1280",height:"720"})),Object(F.jsx)(f.EuiTitle,{size:"s"},Object(F.jsx)("p",null,Object(F.jsx)(q.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.setupGuide.description",defaultMessage:"Get tools to design and deploy a powerful search to your websites and mobile applications."}))),Object(F.jsx)(f.EuiSpacer,{size:"m"}),Object(F.jsx)(f.EuiText,null,Object(F.jsx)("p",null,Object(F.jsx)(q.FormattedMessage,{id:"xpack.enterpriseSearch.appSearch.setupGuide.notConfigured",defaultMessage:"App Search is not configured in your Kibana instance yet."})))),He=e=>{const{config:t}=Object(r.useValues)(u.a),{errorConnectingMessage:a}=Object(r.useValues)(o.a),{enterpriseSearchVersion:n,kibanaVersion:s}=e,i=Object(l.a)(n,s);return Object(F.jsx)(c.c,null,Object(F.jsx)(c.a,{exact:!0,path:M.X},Object(F.jsx)(Ue,null)),Object(F.jsx)(c.a,null,t.host?i?Object(F.jsx)(d.a,{enterpriseSearchVersion:n,kibanaVersion:s}):a?Object(F.jsx)(H,null):Object(F.jsx)(Ge,e):Object(F.jsx)(qe,null)))},qe=()=>{const{renderHeaderActions:e}=Object(r.useValues)(u.a);return e(p.a),Object(F.jsx)(c.c,null,Object(F.jsx)(c.a,null,Object(F.jsx)(i.Redirect,{to:M.X})))},Ge=e=>{const{myRole:{canManageEngines:t,canManageMetaEngines:a,canViewSettings:s,canViewAccountCredentials:l,canViewRoleMappings:o}}=Object(r.useValues)(Object(g.a)(e)),{renderHeaderActions:p}=Object(r.useValues)(u.a);return Object(n.useEffect)((()=>{p(S.b)}),[]),Object(F.jsx)(c.c,null,!1,Object(F.jsx)(c.a,{exact:!0,path:M.T},Object(F.jsx)(i.Redirect,{to:M.j})),Object(F.jsx)(c.a,{exact:!0,path:M.j},Object(F.jsx)(x.c,null)),t&&Object(F.jsx)(c.a,{exact:!0,path:M.v},Object(F.jsx)(P,null)),a&&Object(F.jsx)(c.a,{exact:!0,path:M.O},Object(F.jsx)(re,null)),Object(F.jsx)(c.a,{path:M.C},Object(F.jsx)(j.b,null)),s&&Object(F.jsx)(c.a,{exact:!0,path:M.W},Object(F.jsx)(Pe.b,null)),l&&Object(F.jsx)(c.a,{exact:!0,path:M.f},Object(F.jsx)(h.b,null)),o&&Object(F.jsx)(c.a,{path:M.Z},Object(F.jsx)(ze,null)),Object(F.jsx)(c.a,null,Object(F.jsx)(ce.a,null)))}}])]);