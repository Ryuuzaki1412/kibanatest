(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[19],{145:function(e,t,i){"use strict";i.r(t),i.d(t,"getSharingData",(function(){return o})),i.d(t,"showPublicUrlSwitch",(function(){return s}));var r=i(32),l=i(302),d=i(78),n=i(85);async function o(e,t,i,o){const{uiSettings:s,data:c}=i,u=e.createCopy(),a=u.getField("index");let m=u.getField("filter");u.setField("sort",Object(n.d)({sort:t.sort,dataView:a,defaultSortDir:s.get(r.t)})),u.removeField("filter"),u.removeField("highlight"),u.removeField("highlightAll"),u.removeField("aggs"),u.removeField("size");let f=t.columns||[];if(f&&f.length>0){let e;!s.get(r.e)&&a&&a.timeFieldName&&!o&&(e=a.timeFieldName),e&&!f.includes(e)&&(f=[e,...f])}const g=c.query.timefilter.timefilter.createFilter(a),F=c.query.timefilter.timefilter.createRelativeFilter(a);return{getSearchSource:({addGlobalTimeFilter:e,absoluteTime:t})=>{const i=t?g:F;if(e&&i&&(Array.isArray(m)?m=m.filter((e=>!Object(d.d)(e,g))):Object(d.d)(m,g)&&(m=void 0),m=m?Array.isArray(m)?[i,...m]:[i,m]:i),m&&u.setField("filter",m),!s.get(r.p)){u.removeField("fieldsFromSource");const e=f.length?f.map((e=>{let t=e;return Object(l.a)(e,a)&&(t=`${e}.*`),{field:t,include_unmapped:"true"}})):[{field:"*",include_unmapped:"true"}];u.setField("fields",e)}return u.getSerializedFields(!0)},columns:f}}const s=e=>!!e.discover&&!!e.discover.show}}]);