(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[11],{117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6);t.default=function(e){i.useEffect(e,[])}},283:function(e,t,n){"use strict";n.r(t),n.d(t,"DiscoverGridFlyout",(function(){return O}));var i=n(6),o=n(3),s=n(20),a=n(59),l=n(75),u=n(79),c=n(11),d=n.n(c),r=n(136),b=n(2);const m={id:"viewDocument",enabled:!0,Content:()=>Object(b.jsx)(v,null)},j=({actions:e,...t})=>{var n,i,o;const{dataView:s}=t,{singleDocHref:a,contextViewHref:l,onOpenSingleDoc:u,onOpenContextView:c}=Object(r.a)(t),{viewSingleDocument:d={disabled:!1},viewSurroundingDocument:j={disabled:!1}}=null!==(n=null==e?void 0:e.defaultActions)&&void 0!==n?n:{},v=[...null!==(i=null==e||null===(o=e.getActionItems)||void 0===o?void 0:o.call(e))&&void 0!==i?i:[]],x=[{id:"singleDocument",enabled:!d.disabled,Content:()=>Object(b.jsx)(f,{href:a,onClick:u})},{id:"surroundingDocument",enabled:Boolean(!j.disabled&&s.isTimeBased()&&s.id),Content:()=>Object(b.jsx)(g,{onClick:c,href:l})},...v],O=x.some((e=>e.enabled));return O&&x.unshift(m),{flyoutActions:x,hasEnabledActions:O}},v=()=>Object(b.jsx)(s.EuiHideFor,{sizes:["xs","s","m"]},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiText,{size:"s"},Object(b.jsx)("strong",null,o.i18n.translate("discover.grid.tableRow.viewText",{defaultMessage:"View:"}))))),f=e=>Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiButtonEmpty,d()({size:"s",iconSize:"s",iconType:"document",flush:"left","data-test-subj":"docTableRowAction"},e),o.i18n.translate("discover.grid.tableRow.viewSingleDocumentLinkTextSimple",{defaultMessage:"Single document"}))),g=e=>Object(b.jsx)(s.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"none"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiButtonEmpty,d()({size:"s",iconSize:"s",iconType:"documents",flush:"left","data-test-subj":"docTableRowAction"},e),o.i18n.translate("discover.grid.tableRow.viewSurroundingDocumentsLinkTextSimple",{defaultMessage:"Surrounding documents"}))),Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIconTip,{content:o.i18n.translate("discover.grid.tableRow.viewSurroundingDocumentsHover",{defaultMessage:"Inspect documents that occurred before and after this document. Only pinned filters remain active in the Surrounding documents view."}),type:"questionInCircle",color:"subdued",position:"right",iconProps:{className:"eui-alignTop"}})));var x=n(90);function O({hit:e,hits:t,dataView:n,columns:c,columnTypes:d,savedSearchId:r,filters:m,query:v,onFilter:f,onClose:g,onRemoveColumn:O,onAddColumn:w,setExpandedDoc:p}){var C,y;const E=Object(l.a)(),D=Object(x.b)("flyout"),h=Object(u.a)(v),S=Object(i.useMemo)((()=>(null==t?void 0:t.find((({id:t})=>t===(null==e?void 0:e.id))))||e),[e,t]),T=Object(i.useMemo)((()=>t?t.length:0),[t]),z=Object(i.useMemo)((()=>{const n=e.id;return!t||T<=1?-1:function(e,t){return e.findIndex((e=>e.id===t))}(t,n)}),[t,e,T]),R=Object(i.useCallback)((e=>{t&&t[e]&&p(t[e])}),[t,p]),I=Object(i.useCallback)((e=>{e.key!==s.keys.ARROW_LEFT&&e.key!==s.keys.ARROW_RIGHT||(e.preventDefault(),e.stopPropagation(),R(z+(e.key===s.keys.ARROW_RIGHT?1:-1)))}),[z,R]),{flyoutActions:k}=j({actions:null==D?void 0:D.actions,dataView:n,rowIndex:e.raw._index,rowId:e.raw._id,columns:c,filters:m,savedSearchId:r}),F=Object(i.useCallback)((e=>{w(e),E.toastNotifications.addSuccess(o.i18n.translate("discover.grid.flyout.toastColumnAdded",{defaultMessage:"Column '{columnName}' was added",values:{columnName:e}}))}),[w,E.toastNotifications]),M=Object(i.useCallback)((e=>{O(e),E.toastNotifications.addSuccess(o.i18n.translate("discover.grid.flyout.toastColumnRemoved",{defaultMessage:"Column '{columnName}' was removed",values:{columnName:e}}))}),[O,E.toastNotifications]),N=Object(i.useCallback)((()=>Object(b.jsx)(a.UnifiedDocViewer,{columns:c,columnTypes:d,dataView:n,filter:f,hit:S,onAddColumn:F,onRemoveColumn:M,textBasedHits:h?t:void 0})),[S,F,c,d,n,t,h,f,M]),_=Object(i.useMemo)((()=>({addFilter:f,addColumn:F,removeColumn:M})),[f,F,M]),A=null!=D&&D.Content?Object(b.jsx)(D.Content,{actions:_,doc:S,renderDefaultContent:N}):N(),H=h?o.i18n.translate("discover.grid.tableRow.textBasedDetailHeading",{defaultMessage:"Expanded row"}):o.i18n.translate("discover.grid.tableRow.detailHeading",{defaultMessage:"Expanded document"}),P=null!==(C=null==D?void 0:D.title)&&void 0!==C?C:H,B=null!==(y=null==D?void 0:D.size)&&void 0!==y?y:"m";return Object(b.jsx)(s.EuiPortal,null,Object(b.jsx)(s.EuiFlyout,{onClose:g,size:B,"data-test-subj":"docTableDetailsFlyout",onKeyDown:I,ownFocus:!1},Object(b.jsx)(s.EuiFlyoutHeader,{hasBorder:!0},Object(b.jsx)(s.EuiTitle,{size:"s",className:"unifiedDataTable__flyoutHeader","data-test-subj":"docTableRowDetailsTitle"},Object(b.jsx)("h2",null,P)),Object(b.jsx)(s.EuiSpacer,{size:"s"}),Object(b.jsx)(s.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},!h&&k.map((e=>e.enabled&&Object(b.jsx)(e.Content,{key:e.id}))),-1!==z&&Object(b.jsx)(s.EuiFlexItem,{"data-test-subj":`dscDocNavigationPage-${z}`},Object(b.jsx)(s.EuiPagination,{"aria-label":o.i18n.translate("discover.grid.flyout.documentNavigation",{defaultMessage:"Document navigation"}),pageCount:T,activePage:z,onPageClick:R,className:"unifiedDataTable__flyoutDocumentNavigation",compressed:!0,"data-test-subj":"dscDocNavigation"})))),Object(b.jsx)(s.EuiFlyoutBody,null,A)))}t.default=O},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return j}));var i=n(6),o=n(76),s=n.n(o),a=n(12),l=n(117),u=n.n(l),c=n(4);const d=()=>{const e=new c.Subject,t=new Map;return{set:n=>{var i;const o=t.get(n.id);t.set(n.id,{customization:n,enabled:null===(i=null==o?void 0:o.enabled)||void 0===i||i}),e.next(n.id)},get$:n=>e.pipe(Object(c.startWith)(n),Object(c.filter)((e=>e===n)),Object(c.map)((()=>{const e=t.get(n);if(e&&e.enabled)return e.customization}))),enable:n=>{const i=t.get(n);i&&!i.enabled&&(i.enabled=!0,e.next(i.customization.id))},disable:n=>{const i=t.get(n);i&&i.enabled&&(i.enabled=!1,e.next(i.customization.id))}}},r=Object(i.createContext)(d()),b=r.Provider,m=({customizationCallbacks:e,stateContainer:t})=>{const[n,o]=Object(i.useState)();return u()((()=>{const n=d(),i=e.map((e=>Promise.resolve(e({customizations:n,stateContainer:t})))),s=()=>Promise.all(i).then((e=>e.filter(a.isFunction)));return s().then((()=>{o(n)})),()=>{s().then((e=>{e.forEach((e=>e()))}))}})),{customizationService:n,isInitialized:Boolean(n)}},j=e=>s()((e=>Object(i.useContext)(r).get$(e))(e))}}]);