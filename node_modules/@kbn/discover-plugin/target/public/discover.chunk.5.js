(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[5],{118:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(119);case"v8light":return i(121)}},119:function(e,t,i){var n=i(73),l=i(120);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},120:function(e,t,i){(t=i(74)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},121:function(e,t,i){var n=i(73),l=i(122);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},122:function(e,t,i){(t=i(74)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},126:function(e,t,i){"use strict";i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return m}));var n=i(11),l=i.n(n),s=i(6),o=i.n(s),a=i(45),d=i.n(a),r=i(20),u=i(2);const c={iconType:"questionInCircle",color:"gray"},b={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function f({type:e,label:t,size:i="s",scripted:n,className:s,...o}){const a=b[e]||c;return Object(u.jsx)(r.EuiToken,l()({},a,{className:d()("kbnFieldIcon",s),"aria-label":t||e,title:t||e,size:i,fill:n?"dark":void 0},o))}i(118);const p={xs:"kbnFieldButton--xs",s:"kbnFieldButton--s"};function m({size:e,isActive:t=!1,fieldIcon:i,fieldName:n,fieldInfoIcon:s,fieldAction:a,flush:r,className:c,dragHandle:b,onClick:f,dataTestSubj:m,buttonProps:F,...g}){const h=d()("kbnFieldButton",e?p[e]:null,{"kbnFieldButton-isActive":t,"kbnFieldButton--flushBoth":"both"===r},c),j=d()("kbn-resetFocusState","kbnFieldButton__button"),x=Object(u.jsx)(o.a.Fragment,null,i&&Object(u.jsx)("span",{className:"kbnFieldButton__fieldIcon"},i),n&&Object(u.jsx)("span",{className:"kbnFieldButton__name eui-textBreakAll"},Object(u.jsx)("span",{className:"kbnFieldButton__nameInner"},n)),s&&Object(u.jsx)("div",{className:"kbnFieldButton__infoIcon"},s));return Object(u.jsx)("div",l()({className:h},g),b&&Object(u.jsx)("div",{className:"kbnFieldButton__dragHandle"},b),f?Object(u.jsx)("button",l()({onClick:e=>{"click"===e.type&&e.currentTarget.focus(),f()},"data-test-subj":m,className:j},F),x):Object(u.jsx)("div",{className:j,"data-test-subj":m},x),a&&Object(u.jsx)("div",{className:"kbnFieldButton__fieldAction"},a))}Object.keys(p)},151:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n={META_FIELDS:"metaFields",DOC_HIGHLIGHT:"doc_table:highlight",QUERY_STRING_OPTIONS:"query:queryString:options",QUERY_ALLOW_LEADING_WILDCARDS:"query:allowLeadingWildcards",SEARCH_QUERY_LANGUAGE:"search:queryLanguage",SORT_OPTIONS:"sort:options",COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX:"courier:ignoreFilterIfFieldNotInIndex",COURIER_SET_REQUEST_PREFERENCE:"courier:setRequestPreference",COURIER_CUSTOM_REQUEST_PREFERENCE:"courier:customRequestPreference",COURIER_MAX_CONCURRENT_SHARD_REQUESTS:"courier:maxConcurrentShardRequests",SEARCH_INCLUDE_FROZEN:"search:includeFrozen",SEARCH_TIMEOUT:"search:timeout",HISTOGRAM_BAR_TARGET:"histogram:barTarget",HISTOGRAM_MAX_BARS:"histogram:maxBars",HISTORY_LIMIT:"history:limit",TIMEPICKER_REFRESH_INTERVAL_DEFAULTS:"timepicker:refreshIntervalDefaults",TIMEPICKER_QUICK_RANGES:"timepicker:quickRanges",TIMEPICKER_TIME_DEFAULTS:"timepicker:timeDefaults",FILTERS_PINNED_BY_DEFAULT:"filters:pinnedByDefault",FILTERS_EDITOR_SUGGEST_VALUES:"filterEditor:suggestValues",AUTOCOMPLETE_USE_TIMERANGE:"autocomplete:useTimeRange",AUTOCOMPLETE_VALUE_SUGGESTION_METHOD:"autocomplete:valueSuggestionMethod",DATE_FORMAT:"dateFormat",DATEFORMAT_TZ:"dateFormat:tz"}},257:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(258);case"v8light":return i(260)}},258:function(e,t,i){var n=i(73),l=i(259);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},259:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldListSidebar{flex-grow:1;height:100%;margin:0!important;overflow:hidden;padding:0}.unifiedFieldListSidebar--collapsed{padding:8px 8px 0;width:auto}.unifiedFieldListSidebar.unifiedFieldListSidebar--fullWidth{min-width:0!important}.unifiedFieldListSidebar:not(.unifiedFieldListSidebar--fullWidth){width:304px}@media only screen and (max-width:574px){.unifiedFieldListSidebar{background-color:#141519;padding:16px;width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.unifiedFieldListSidebar{background-color:#141519;padding:16px;width:100%}}.unifiedFieldListSidebar__list{padding:8px 8px 0}@media only screen and (max-width:574px){.unifiedFieldListSidebar__list{padding:8px 0 0}}@media only screen and (min-width:575px) and (max-width:767px){.unifiedFieldListSidebar__list{padding:8px 0 0}}.unifiedFieldListSidebar__group{height:100%}.unifiedFieldListSidebar__mobile{padding:8px 8px 0;width:100%}.unifiedFieldListSidebar__mobile .unifiedFieldListSidebar__mobileBadge{margin-left:8px;vertical-align:text-bottom}.unifiedFieldListSidebar__flyoutHeader{align-items:center}.unifiedFieldListSidebar .unifiedFieldListItemButton.kbnFieldButton{margin-bottom:2px}.unifiedFieldListSidebar .unifiedFieldListItemButton.domDragDrop-isDraggable{box-shadow:none}.unifiedFieldListSidebar .unifiedFieldListItemButton:not(.unifiedFieldListItemButton__dragging){background:none;padding:0}",""]),e.exports=t},260:function(e,t,i){var n=i(73),l=i(261);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},261:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldListSidebar{flex-grow:1;height:100%;margin:0!important;overflow:hidden;padding:0}.unifiedFieldListSidebar--collapsed{padding:8px 8px 0;width:auto}.unifiedFieldListSidebar.unifiedFieldListSidebar--fullWidth{min-width:0!important}.unifiedFieldListSidebar:not(.unifiedFieldListSidebar--fullWidth){width:304px}@media only screen and (max-width:574px){.unifiedFieldListSidebar{background-color:#fafbfd;padding:16px;width:100%}}@media only screen and (min-width:575px) and (max-width:767px){.unifiedFieldListSidebar{background-color:#fafbfd;padding:16px;width:100%}}.unifiedFieldListSidebar__list{padding:8px 8px 0}@media only screen and (max-width:574px){.unifiedFieldListSidebar__list{padding:8px 0 0}}@media only screen and (min-width:575px) and (max-width:767px){.unifiedFieldListSidebar__list{padding:8px 0 0}}.unifiedFieldListSidebar__group{height:100%}.unifiedFieldListSidebar__mobile{padding:8px 8px 0;width:100%}.unifiedFieldListSidebar__mobile .unifiedFieldListSidebar__mobileBadge{margin-left:8px;vertical-align:text-bottom}.unifiedFieldListSidebar__flyoutHeader{align-items:center}.unifiedFieldListSidebar .unifiedFieldListItemButton.kbnFieldButton{margin-bottom:2px}.unifiedFieldListSidebar .unifiedFieldListItemButton.domDragDrop-isDraggable{box-shadow:none}.unifiedFieldListSidebar .unifiedFieldListItemButton:not(.unifiedFieldListItemButton__dragging){background:none;padding:0}",""]),e.exports=t},262:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(263);case"v8light":return i(265)}},263:function(e,t,i){var n=i(73),l=i(264);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},264:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldListItemButton__action{opacity:0}.unifiedFieldListItemButton__action--always,.unifiedFieldListItemButton__action:focus{opacity:1}.unifiedFieldListItemButton{width:100%}.unifiedFieldListItemButton.kbnFieldButton-isActive,.unifiedFieldListItemButton.kbnFieldButton:focus-within{outline:none}.unifiedFieldListItemButton.kbnFieldButton-isActive:focus-visible,.unifiedFieldListItemButton.kbnFieldButton:focus-within:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus{outline:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus .kbnFieldButton__nameInner{outline:2px solid currentColor}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible .kbnFieldButton__nameInner{outline-style:auto}.unifiedFieldListItemButton .kbnFieldButton__button:focus:not(:focus-visible) .kbnFieldButton__nameInner{outline:none}.unifiedFieldListItemButton button .kbnFieldButton__nameInner:hover{text-decoration:underline}.unifiedFieldListItemButton:hover .unifiedFieldListItemButton__action,.unifiedFieldListItemButton[class*=-isActive] .unifiedFieldListItemButton__action{opacity:1}.unifiedFieldListItemButton--missing{background:#1d1e24;color:#98a2b3}",""]),e.exports=t},265:function(e,t,i){var n=i(73),l=i(266);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},266:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldListItemButton__action{opacity:0}.unifiedFieldListItemButton__action--always,.unifiedFieldListItemButton__action:focus{opacity:1}.unifiedFieldListItemButton{width:100%}.unifiedFieldListItemButton.kbnFieldButton-isActive,.unifiedFieldListItemButton.kbnFieldButton:focus-within{outline:none}.unifiedFieldListItemButton.kbnFieldButton-isActive:focus-visible,.unifiedFieldListItemButton.kbnFieldButton:focus-within:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus{outline:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus .kbnFieldButton__nameInner{outline:2px solid currentColor}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible .kbnFieldButton__nameInner{outline-style:auto}.unifiedFieldListItemButton .kbnFieldButton__button:focus:not(:focus-visible) .kbnFieldButton__nameInner{outline:none}.unifiedFieldListItemButton button .kbnFieldButton__nameInner:hover{text-decoration:underline}.unifiedFieldListItemButton:hover .unifiedFieldListItemButton__action,.unifiedFieldListItemButton[class*=-isActive] .unifiedFieldListItemButton__action{opacity:1}.unifiedFieldListItemButton--missing{background:#98a2b31a;color:#69707d}",""]),e.exports=t},267:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(268);case"v8light":return i(270)}},268:function(e,t,i){var n=i(73),l=i(269);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},269:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldList__fieldPopover__fieldPopoverPanel{max-width:400px!important;min-width:260px!important}",""]),e.exports=t},270:function(e,t,i){var n=i(73),l=i(271);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},271:function(e,t,i){(t=i(74)(!1)).push([e.i,".unifiedFieldList__fieldPopover__fieldPopoverPanel{max-width:400px!important;min-width:260px!important}",""]),e.exports=t},306:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(151);function l(e){return{allowLeadingWildcards:e.get(n.a.QUERY_ALLOW_LEADING_WILDCARDS),queryStringOptions:e.get(n.a.QUERY_STRING_OPTIONS),ignoreFilterIfFieldNotInIndex:e.get(n.a.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX),dateFormatTZ:e.get("dateFormat:tz")}}},307:function(e,t,i){"use strict";i.d(t,"a",(function(){return ErrorBoundary}));var n=i(6),l=i.n(n);class ErrorBoundary extends l.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?null:this.props.children}}},309:function(e,t,i){"use strict";i.r(t);var n=i(11),l=i.n(n),s=i(6),o=i.n(s),a=i(3),d=i(44),r=i(20),u=i(4),c=i(306),b=i(94),f=i(99);const p=async()=>(await Promise.resolve().then(i.t.bind(null,22,7))).buildEsQuery,m=Object(r.htmlIdGenerator)(),F={fetchStatus:f.a.unknown,existingFieldsByFieldNameMap:{},numberOfFetches:0},g=new u.BehaviorSubject({});let h="";const j=()=>{const e=Object(s.useRef)(!0),[t,i]=Object(s.useState)(g.getValue());Object(s.useEffect)((()=>{const t=g.subscribe((t=>{e.current&&Object.keys(t).length>0&&i((e=>({...e,...t})))}));return()=>{t.unsubscribe()}}),[i,e]);const n=Object(s.useCallback)(((e,i)=>{const n=t[e];return(null==n?void 0:n.fetchStatus)!==f.a.succeeded||(null==n?void 0:n.hasDataViewRestrictions)||Boolean(null==n?void 0:n.existingFieldsByFieldNameMap[i])}),[t]),l=Object(s.useCallback)((e=>e?t[e]:F),[t]),o=Object(s.useCallback)((e=>{var t;return(null===(t=l(e))||void 0===t?void 0:t.fetchStatus)||f.a.unknown}),[l]),a=Object(s.useCallback)((e=>{const t=l(e);return Boolean((null==t?void 0:t.fetchStatus)===f.a.failed||(null==t?void 0:t.hasDataViewRestrictions))}),[l]);return Object(s.useEffect)((()=>()=>{e.current=!1}),[e]),Object(s.useMemo)((()=>({hasFieldData:n,getFieldsExistenceStatus:o,isFieldsExistenceInfoUnavailable:a})),[n,o,a])};async function x(e,t,i,n){const l=await p();try{return l(e,t,i,n)}catch(e){return{bool:{must_not:{match_all:{}}}}}}var v=i(105),_=i(100),y=i.n(_);i(257);var O=i(2),S=i(45),k=i.n(S);const B=({buttons:e,legend:t,buttonSize:i="m"})=>{const n=(({euiTheme:e})=>({button:{"&.euiButtonGroupButton":{backgroundColor:e.colors.emptyShade,border:`${e.border.thin} !important`,borderRight:"none !important","&:first-of-type":{borderTopLeftRadius:`${e.border.radius.medium} !important`,borderBottomLeftRadius:`${e.border.radius.medium} !important`},"&:last-of-type":{borderRight:`${e.border.thin} !important`,borderTopRightRadius:`${e.border.radius.medium} !important`,borderBottomRightRadius:`${e.border.radius.medium} !important`},":not(:first-child):not(.euiButtonGroupButton-isSelected):not(:disabled)":{boxShadow:"unset"}}},buttonGroup:{".euiButtonGroup__buttons":{borderRadius:`${e.border.radius.medium}`}}}))(Object(r.useEuiTheme)()),l=e.map(((e,t)=>{const{label:i,title:l=i,...s}=e;return{...s,"aria-label":null!=l?l:i,id:`${Object(r.htmlIdGenerator)()()}${t}`,label:i,title:l,css:[n.button]}}));return Object(O.jsx)(r.EuiButtonGroup,{buttonSize:i,legend:t,options:l,onChange:e=>{var t;null===(t=l.find((t=>t.id===e)))||void 0===t||t.onClick()},type:"multi",isIconOnly:!0,css:n.buttonGroup})},I=e=>({bold:e.font.weight.bold,normal:e.font.weight.regular}),L=e=>"iconButton"===e.as,w=(e,{type:t,isDisabled:i,groupPosition:n})=>{const l=(({euiTheme:e})=>({default:{borderStyle:"solid",border:e.border.thin,borderColor:e.border.color},emptyButton:{backgroundColor:e.colors.emptyShade,border:`${e.border.thin}`,color:`${e.colors.text}`},buttonPositions:{left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"},center:{borderRadius:0,borderLeft:"none"}}}))(e),s=n&&"none"!==n?l.buttonPositions[n]:{},o={...l.default,...s};return i?o:{...o,..."primary"===t?{}:l.emptyButton}},T=({hasArrow:e=!0,fontWeight:t="normal",type:i,label:n,iconSide:s,iconType:o,fullWidth:a,isDisabled:d,groupPosition:u,...c})=>{const b=Object(r.useEuiTheme)(),f={...w(b,{type:i,isDisabled:d,groupPosition:u}),fontWeight:I(b.euiTheme)[t]},p=d?{}:"primary"===i?{color:"primary",fill:!0}:{color:"text"},m=null!=o?o:e?"arrowDown":"";return Object(O.jsx)(r.EuiButton,l()({size:c.size,isDisabled:d,css:f,iconType:m,iconSide:o?s:"right",fullWidth:a,contentProps:a?{style:{justifyContent:"space-between"}}:{}},p,c),n)},E=({size:e,type:t,label:i,isDisabled:n,groupPosition:s,...o})=>{const a=Object(r.useEuiTheme)(),d=w(a,{type:t,isDisabled:n,groupPosition:s});return Object(O.jsx)(r.EuiButtonIcon,l()({},o,{disabled:n,"aria-label":null!=i?i:o["aria-label"],size:e,iconSize:e,css:d,display:"primary"===t?"fill":"base",color:"primary"===t?"primary":"text"}))};function A(e){const{type:t="empty",size:i="m"}=e;return L(e)?Object(O.jsx)(E,l()({},e,{size:i,type:t})):Object(O.jsx)(T,l()({},e,{size:i,type:t}))}a.i18n.translate("sharedUXPackages.buttonToolbar.toolbar.errorToolbarText",{defaultMessage:"There are over 120 extra buttons. Please consider limiting the number of buttons."}),i(71);var C=i(32);const M={name:"zxsb69",styles:"position:relative;width:100%;height:100%"},P=({"data-test-subj":e="fieldList",isProcessing:t,prepend:i,append:n,className:l,children:s})=>Object(O.jsx)(r.EuiFlexGroup,{gutterSize:"none",direction:"column",responsive:!1,"data-test-subj":e,css:M,className:l},t&&Object(O.jsx)(r.EuiProgress,{size:"xs",color:"accent",position:"absolute","data-test-subj":`${e}Loading`}),!!i&&Object(O.jsx)(r.EuiFlexItem,{grow:!1},i),Object(O.jsx)(r.EuiFlexItem,{grow:!0},s),!!n&&Object(O.jsx)(r.EuiFlexItem,{grow:!1},n)),D=()=>Object(O.jsx)(s.Fragment,null),R=o.a.lazy((()=>i.e(12).then(i.bind(null,314)))),N=function(e){return Object(O.jsx)(o.a.Suspense,{fallback:Object(O.jsx)(D,null)},Object(O.jsx)(R,e))},z=()=>Object(O.jsx)(s.Fragment,null),G=o.a.lazy((()=>i.e(7).then(i.bind(null,315)))),V=function(e){return Object(O.jsx)(o.a.Suspense,{fallback:Object(O.jsx)(z,null)},Object(O.jsx)(G,e))};var H=i(12);const U=Object(H.memoize)((function(e){const t=e.trim();let i=t.split(/[* ]+/).map(H.escapeRegExp).join(".*");return t.includes(" ")&&(i=".*"+i+".*"),new RegExp(i.includes("*")?`^${i}$`:i,"i")})),$=(e,t)=>{if(null==t||!t.trim())return!1;const i=U(t);return!!e.displayName&&i.test(e.displayName)||i.test(e.name)};function W(e,t){const i=(t||"").trim();return(i.includes("*")||i.includes(" "))&&$({name:e},i)?e:i}var q=i(284);const K=Object(r.htmlIdGenerator)("fieldList");const Q=new Intl.Collator(void 0,{sensitivity:"base"});function Y(e,t){return Q.compare(e.displayName||e.name,t.displayName||t.name)}function Z(){return!0}var X=i(102),J=i(126),ee=i(135),te=i(301);function ie({field:e,fieldSearchHighlight:t,isSelected:i,isActive:n,isEmpty:s,infoIcon:o,className:d,getCustomFieldType:u,dataTestSubj:c,size:b,onClick:f,shouldAlwaysShowAction:p,buttonAddFieldToWorkspaceProps:m,buttonRemoveFieldFromWorkspaceProps:F,onAddFieldToWorkspace:g,onRemoveFieldFromWorkspace:h,...j}){var x,v;const _=e.displayName||e.name,y=_!==e.name&&"___records___"!==e.name?a.i18n.translate("unifiedFieldList.fieldItemButton.fieldTitle",{defaultMessage:"{fieldDisplayName} ({fieldName})",values:{fieldName:e.name,fieldDisplayName:_}}):_,S=u?{type:u(e)}:Object(ee.a)(e),B=S.type,I=k()("unifiedFieldListItemButton",{[`unifiedFieldListItemButton--${B}`]:B,"unifiedFieldListItemButton--exists":!s,"unifiedFieldListItemButton--missing":s,"unifiedFieldListItemButton--withDragHandle":Boolean(j.dragHandle)},d),L=null!==(x=null==m?void 0:m["aria-label"])&&void 0!==x?x:a.i18n.translate("unifiedFieldList.fieldItemButton.addFieldToWorkspaceLabel",{defaultMessage:'Add "{field}" field',values:{field:e.displayName}}),w=null!==(v=null==F?void 0:F["aria-label"])&&void 0!==v?v:a.i18n.translate("unifiedFieldList.fieldItemButton.removeFieldToWorkspaceLabel",{defaultMessage:'Remove "{field}" field',values:{field:e.displayName}}),T=k()("unifiedFieldListItemButton__action",{"unifiedFieldListItemButton__action--always":p}),E=i?h&&Object(O.jsx)(r.EuiToolTip,{key:`selected-to-remove-${e.name}-${w}`,content:w},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldToggle-${e.name}`,"aria-label":w},F||{},{className:k()(T,null==F?void 0:F.className),color:"danger",iconType:"cross",onClick:t=>{t.preventDefault(),t.stopPropagation(),h(e)}}))):g&&Object(O.jsx)(r.EuiToolTip,{key:`deselected-to-add-${e.name}-${L}`,content:L},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldToggle-${e.name}`,"aria-label":L},m||{},{className:k()(T,null==m?void 0:m.className),color:"text",iconType:"plusInCircle",onClick:t=>{t.preventDefault(),t.stopPropagation(),g(e)}}))),A="conflict"===e.type?Object(O.jsx)(ne,{conflictDescriptions:e.conflictDescriptions}):null;return Object(O.jsx)(J.a,l()({key:`field-item-button-${e.name}`,dataTestSubj:c||`field-${e.name}-showDetails`,size:b||"s",className:I,isActive:n,buttonProps:{"aria-label":a.i18n.translate("unifiedFieldList.fieldItemButton.ariaLabel",{defaultMessage:"Preview {fieldDisplayName}: {fieldType}",values:{fieldDisplayName:_,fieldType:u?u(e):e.type}})},fieldIcon:Object(O.jsx)(te.a,S),fieldName:Object(O.jsx)(r.EuiHighlight,{search:W(_,t),title:y,"data-test-subj":`field-${e.name}`},_),fieldAction:E,fieldInfoIcon:A||o,onClick:f},j))}function ne({conflictDescriptions:e}){const t=e?Object.keys(e):[];return Object(O.jsx)(r.EuiToolTip,{position:"bottom",title:a.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictTitle",{defaultMessage:"Mapping Conflict"}),content:t.length?a.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictWithTypesDescription",{defaultMessage:"This field is defined as several types ({types}) across the indices that match this pattern. You may still be able to use this conflicting field, but it will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data.",values:{types:t.join(", ")}}):a.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictDescription",{defaultMessage:"This field is defined as several types (string, integer, etc) across the indices that match this pattern.You may still be able to use this conflicting field, but it will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data."})},Object(O.jsx)(r.EuiIcon,{tabIndex:0,type:"warning",size:"s"}))}i(262);var le=i(50);const se=({field:e,visualizeInfo:t,handleVisualizeLinkClick:i,buttonProps:n})=>Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(r.EuiButton,l()({fullWidth:!0,size:"s","data-test-subj":`fieldVisualize-${e.name}`},n||{},{href:t.href,onClick:i}),Object(O.jsx)(d.FormattedMessage,{id:"unifiedFieldList.fieldVisualizeButton.label",defaultMessage:"Visualize"}))),oe=(a.i18n.translate("uiActions.triggers.rowClickTitle",{defaultMessage:"Table row click"}),a.i18n.translate("uiActions.triggers.rowClickkDescription",{defaultMessage:"A click on a table row"}),"VISUALIZE_FIELD_TRIGGER"),ae={id:oe,title:"Visualize field",description:"Triggered when user wants to visualize a field."},de="VISUALIZE_GEO_FIELD_TRIGGER",re={id:de,title:"Visualize Geo field",description:"Triggered when user wants to visualize a geo field."};var ue=i(83);function ce(e){return e===ue.b.GEO_POINT||e===ue.b.GEO_SHAPE?de:oe}async function be(e,t,i,n=[],l){return await e.getTriggerCompatibleActions(l,{dataViewSpec:i.toSpec(!1),fieldName:t,contextualFields:n})}const fe=o.a.memo((({field:e,dataView:t,contextualFields:i,trackUiMetric:n,multiFields:l,originatingApp:s,uiActions:o,buttonProps:a,visualizeInfo:d})=>d?Object(O.jsx)(se,{field:e,visualizeInfo:d,handleVisualizeLinkClick:async e=>{var l;e.preventDefault(),l=t,null==n||n(le.METRIC_TYPE.CLICK,"visualize_link_click"),function(e,t,i=[],n,l){if(!l)return;const s=ce(t.type),o={dataViewSpec:l.toSpec(!1),fieldName:t.name,contextualFields:i,originatingApp:n};e.getTrigger(s).exec(o)}(o,d.field,i,s,l)},buttonProps:a}):null));const pe=({fieldName:e,handleVisualizeLinkClick:t,buttonProps:i})=>Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(r.EuiButton,l()({fullWidth:!0,size:"s","data-test-subj":`fieldCategorize-${e}`},i||{},{onClick:t,iconSide:"left",iconType:"machineLearningApp"}),Object(O.jsx)(d.FormattedMessage,{id:"unifiedFieldList.fieldCategorizeButton.label",defaultMessage:"Run pattern analysis"}))),me="CATEGORIZE_FIELD_TRIGGER";a.i18n.translate("xpack.ml.actions.runPatternAnalysis.title",{defaultMessage:"Run pattern analysis"}),a.i18n.translate("xpack.ml.actions.runPatternAnalysis.description",{defaultMessage:"Triggered when user wants to run pattern analysis on a field."});const Fe=o.a.memo((({field:e,dataView:t,trackUiMetric:i,originatingApp:n,uiActions:l,buttonProps:s,closePopover:o})=>Object(O.jsx)(pe,{fieldName:e.name,handleVisualizeLinkClick:async s=>{var a;s.preventDefault(),a=t,null==i||i(le.METRIC_TYPE.CLICK,"categorize_link_click"),function(e,t,i,n){if(!n)return;const l={dataView:n,field:t,originatingApp:i};e.getTrigger(me).exec(l)}(l,e,n,a),o&&o()},buttonProps:s})));var ge=i(307);const he=e=>{const[t,i]=Object(s.useState)(null),[n,o]=Object(s.useState)(null);return Object(s.useEffect)((()=>{(async function(e){const t=await async function(e,t,i,n=[],l=[]){var s;if("_id"!==t.name&&null!=i&&i.id)for(const d of[t,...l]){if(!d.visualizable)continue;const t=await be(e,d.name,i,n,ce(d.type));if(t.length>0){var o,a;const e={dataViewSpec:null==i?void 0:i.toSpec(!1),fieldName:d.name,contextualFields:n,trigger:(s=d.type,s===ue.b.GEO_POINT||s===ue.b.GEO_SHAPE?re:ae)};return{field:d,href:await(null===(o=(a=t[0]).getHref)||void 0===o?void 0:o.call(a,e))}}}}(e.uiActions,e.field,e.dataView,e.contextualFields,e.multiFields);return t?Object(O.jsx)(fe,l()({},e,{visualizeInfo:t})):null})(e).then(i).catch((e=>{console.error(e)})),async function(e){return await async function(e,t,i){var n;return!!("_id"!==t.name&&null!=i&&i.id&&i.isTimeBased()&&null!==(n=t.esTypes)&&void 0!==n&&n.includes("text"))&&(await async function(e,t,i,n){return await e.getTriggerCompatibleActions(n,{dataView:i,field:t})}(e,t,i,me)).length>0}(e.uiActions,e.field,e.dataView)?Object(O.jsx)(Fe,e):null}(e).then(o).catch((e=>{console.error(e)}))}),[e]),t||n?Object(O.jsx)(r.EuiPopoverFooter,null,t,t&&n?Object(O.jsx)(r.EuiSpacer,{size:"s"}):null,n):null},je=e=>Object(O.jsx)(ge.a,null,Object(O.jsx)(he,e));i(267);const xe=({isOpen:e,closePopover:t,renderHeader:i,renderContent:n,...s})=>{let a=null,d=null;if(e){try{a=(null==i?void 0:i())||null}catch(e){console.error(e)}try{d=(null==n?void 0:n())||null}catch(e){console.error(e)}}return Object(O.jsx)(r.EuiPopover,l()({ownFocus:!0,isOpen:e,closePopover:t,display:"block",anchorPosition:"rightUp","data-test-subj":"fieldPopover",panelClassName:"unifiedFieldList__fieldPopover__fieldPopoverPanel"},s),e&&Object(O.jsx)(o.a.Fragment,null,d&&a?Object(O.jsx)(r.EuiPopoverTitle,null,a):a,d))},ve=({field:e,closePopover:t,buttonAddFieldToWorkspaceProps:i,buttonAddFilterProps:n,buttonEditFieldProps:s,buttonDeleteFieldProps:o,onAddFieldToWorkspace:d,onAddFilter:u,onEditField:c,onDeleteField:b})=>{var f,p,m,F;if(!e)return null;const g=a.i18n.translate("unifiedFieldList.fieldPopover.addFieldToWorkspaceLabel",{defaultMessage:'Add "{field}" field',values:{field:e.displayName}}),h=a.i18n.translate("unifiedFieldList.fieldPopover.addExistsFilterLabel",{defaultMessage:"Filter for field present"}),j=a.i18n.translate("unifiedFieldList.fieldPopover.editFieldLabel",{defaultMessage:"Edit data view field"}),x=a.i18n.translate("unifiedFieldList.fieldPopover.deleteFieldLabel",{defaultMessage:"Delete data view field"});return Object(O.jsx)(r.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(O.jsx)(r.EuiFlexItem,{grow:!0},Object(O.jsx)(r.EuiTitle,{size:"xxs"},Object(O.jsx)("h5",{className:"eui-textBreakWord"},e.displayName))),d&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_addField"},Object(O.jsx)(r.EuiToolTip,{content:null!==(f=null==i?void 0:i["aria-label"])&&void 0!==f?f:g},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_addField-${e.name}`,"aria-label":g},i||{},{iconType:"plusInCircle",onClick:()=>{t(),d(e)}})))),u&&e.filterable&&!e.scripted&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_addExistsFilter"},Object(O.jsx)(r.EuiToolTip,{content:null!==(p=null==n?void 0:n["aria-label"])&&void 0!==p?p:h},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_addExistsFilter-${e.name}`,"aria-label":h},n||{},{iconType:"filter",onClick:()=>{t(),u("_exists_",e.name,"+")}})))),c&&(e.isRuntimeField||!["unknown","unknown_selected"].includes(e.type))&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_editField"},Object(O.jsx)(r.EuiToolTip,{content:null!==(m=null==s?void 0:s["aria-label"])&&void 0!==m?m:j},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_editField-${e.name}`,"aria-label":j},s||{},{iconType:"pencil",onClick:()=>{t(),c(e.name)}})))),b&&e.isRuntimeField&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_deleteField"},Object(O.jsx)(r.EuiToolTip,{content:null!==(F=null==o?void 0:o["aria-label"])&&void 0!==F?F:x},Object(O.jsx)(r.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_deleteField-${e.name}`,"aria-label":x},o||{},{color:"danger",iconType:"trash",onClick:()=>{t(),b(e.name)}})))))},_e=()=>Object(O.jsx)(s.Fragment,null),ye=o.a.lazy((()=>Promise.all([i.e(3),i.e(10)]).then(i.bind(null,312)))),Oe=e=>Object(O.jsx)(o.a.Suspense,{fallback:Object(O.jsx)(_e,null)},Object(O.jsx)(ye,e)),Se=o.a.memo((({stateService:e,services:t,field:i,dataView:n,multiFields:l,onAddFilter:o})=>{var a;const d=Object(v.b)({data:t.data,timeRangeUpdatesType:e.creationOptions.timeRangeUpdatesType}),r=Object(s.useMemo)((()=>{var e;return(null==l?void 0:l.length)&&(null===(e=l.find((e=>e.field.aggregatable)))||void 0===e?void 0:e.field)||i}),[i,l]),u=Object(s.useMemo)((()=>({data:t.data,dataViews:t.dataViews,fieldFormats:t.fieldFormats,charts:t.charts,uiSettings:t.core.uiSettings})),[t]);return Object(v.a)(d)?Object(O.jsx)(Oe,{services:u,query:d.query,filters:d.filters,fromDate:d.fromDate,toDate:d.toDate,dataViewOrDataViewId:n,field:r,"data-test-subj":null===(a=e.creationOptions.dataTestSubj)||void 0===a?void 0:a.fieldListItemStatsDataTestSubj,onAddFilter:o}):null}));function ke({stateService:e,field:t,size:i,isSelected:n,toggleDisplay:l}){const s="_source"===t.name?void 0:e=>l(e,n);return{field:t,size:i,isSelected:n,buttonAddFieldToWorkspaceProps:e.creationOptions.buttonAddFieldToWorkspaceProps,buttonRemoveFieldFromWorkspaceProps:e.creationOptions.buttonRemoveFieldFromWorkspaceProps,onAddFieldToWorkspace:s,onRemoveFieldFromWorkspace:s}}const Be=Object(s.memo)((({stateService:e,multiFields:t,toggleDisplay:i,alwaysShowActionButton:n,size:s})=>Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(r.EuiTitle,{size:"xxxs"},Object(O.jsx)("h5",null,a.i18n.translate("unifiedFieldList.fieldListItem.multiFields",{defaultMessage:"Multi fields"}))),Object(O.jsx)(r.EuiSpacer,{size:"xs"}),t.map((t=>Object(O.jsx)(ie,l()({key:t.field.name,flush:"both",isEmpty:!1,isActive:!1,shouldAlwaysShowAction:n,onClick:void 0},ke({stateService:e,field:t.field,isSelected:t.isSelected,toggleDisplay:i,size:s}))))))));function Ie({stateService:e,services:t,searchMode:i,alwaysShowActionButton:n=!1,field:a,highlight:d,dataView:u,onAddFieldToWorkspace:c,onRemoveFieldFromWorkspace:b,onAddFilter:f,isEmpty:p,isSelected:m,trackUiMetric:F,multiFields:g,onEditField:h,onDeleteField:j,workspaceSelectedFieldNames:x,groupIndex:v,itemIndex:_,size:y}){var S,k,B;const[I,L]=Object(s.useState)(!1),w=Object(s.useMemo)((()=>f?(...e)=>{L(!1),null==f||f(...e)}:void 0),[L,f]),T=Object(s.useCallback)((()=>{L((e=>!e))}),[L]),E=Object(s.useCallback)((()=>{L(!1)}),[L]),A=Object(s.useCallback)(((e,t)=>{E(),t?b(e):c(e)}),[c,b,E]),C=Object(s.useMemo)((()=>null==g?void 0:g.map((e=>e.field))),[g]),M=Object(s.useMemo)((()=>{var t;const i=null===(t=e.creationOptions.dataTestSubj)||void 0===t?void 0:t.fieldListItemPopoverHeaderDataTestSubjPrefix;return{buttonAddFieldToWorkspaceProps:e.creationOptions.buttonAddFieldToWorkspaceProps,...i&&{buttonAddFilterProps:{"data-test-subj":`${i}AddExistFilter-${a.name}`},buttonEditFieldProps:{"data-test-subj":`${i}Edit-${a.name}`},buttonDeleteFieldProps:{"data-test-subj":`${i}Delete-${a.name}`}}}}),[a.name,e.creationOptions]),P=Object(s.useMemo)((()=>({id:a.name,humanData:{label:a.displayName,position:_+1}})),[a,_]),D=Object(s.useMemo)((()=>[0,v,_]),[v,_]),R=n||e.creationOptions.disableFieldListItemDragAndDrop;return Object(O.jsx)(xe,{isOpen:I,button:Object(O.jsx)(X.a,{draggable:!0,dragClassName:"unifiedFieldListItemButton__dragging",order:D,value:P,onDragStart:E,isDisabled:R,dataTestSubj:`${null!==(S=null===(k=e.creationOptions.dataTestSubj)||void 0===k?void 0:k.fieldListItemDndDataTestSubjPrefix)&&void 0!==S?S:"unifiedFieldListItemDnD"}-${a.name}`},Object(O.jsx)(ie,l()({fieldSearchHighlight:d,isEmpty:p,isActive:I,flush:n?"both":void 0,shouldAlwaysShowAction:n,onClick:"_source"!==a.type?T:void 0},ke({stateService:e,field:a,isSelected:m,toggleDisplay:A,size:y})))),closePopover:E,"data-test-subj":null===(B=e.creationOptions.dataTestSubj)||void 0===B?void 0:B.fieldListItemPopoverDataTestSubj,renderHeader:()=>Object(O.jsx)(ve,l()({field:a,closePopover:E,onAddFieldToWorkspace:m?void 0:A,onAddFilter:f,onEditField:h,onDeleteField:j},M)),renderContent:"documents"===i?()=>Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(Se,{stateService:e,services:t,field:a,multiFields:g,dataView:u,onAddFilter:w}),g&&Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(r.EuiSpacer,{size:"m"}),Object(O.jsx)(Be,{stateService:e,multiFields:g,alwaysShowActionButton:n,toggleDisplay:A,size:y})),!!t.uiActions&&Object(O.jsx)(je,{field:a,dataView:u,multiFields:C,trackUiMetric:F,contextualFields:x,originatingApp:e.creationOptions.originatingApp,uiActions:t.uiActions,closePopover:()=>E()})):void 0})}const Le=Object(s.memo)(Ie),we=({"data-test-subj":e="unifiedFieldListSidebar__toggle",isSidebarCollapsed:t,buttonSize:i,onChange:n})=>Object(O.jsx)("div",{"data-test-subj":e},Object(O.jsx)(B,{legend:a.i18n.translate("unifiedFieldList.fieldListSidebar.toggleSidebarLegend",{defaultMessage:"Toggle sidebar"}),buttonSize:i,buttons:[...t?[{label:a.i18n.translate("unifiedFieldList.fieldListSidebar.expandSidebarButton",{defaultMessage:"Show sidebar"}),iconType:"transitionLeftIn","data-test-subj":`${e}-expand`,onClick:()=>n(!1)}]:[{label:a.i18n.translate("unifiedFieldList.fieldListSidebar.collapseSidebarButton",{defaultMessage:"Hide sidebar"}),iconType:"transitionLeftOut","data-test-subj":`${e}-collapse`,onClick:()=>n(!0)}]]}));var Te=i(52);const Ee={selectedFields:[],selectedFieldsMap:{}},Ae=({stateService:e,searchMode:t,services:i,workspaceSelectedFieldNames:n,isProcessing:o,alwaysShowActionButton:d,buttonAddFieldVariant:u,isSidebarCollapsed:c,allFields:b,dataView:p,trackUiMetric:m,showFieldList:F=!0,compressed:g=!0,fullWidth:h,isAffectedByGlobalFilter:x,prepend:v,onAddFieldToWorkspace:_,onRemoveFieldFromWorkspace:y,onAddFilter:S,onSelectedFieldFilter:B,onEditField:I,onDeleteField:L,onToggleSidebar:w})=>{var T,E,M,D,R,z,G;const{dataViews:U,core:W}=i,Q=Object(s.useMemo)((()=>!W.uiSettings.get(C.p)),[W.uiSettings]),[X,J]=Object(s.useState)(Ee),[ee,te]=Object(s.useState)(void 0);Object(s.useEffect)((()=>{const e=function({dataView:e,workspaceSelectedFieldNames:t,allFields:i,searchMode:n}){const l={selectedFields:[],selectedFieldsMap:{}};if(!(t&&Array.isArray(t)&&t.length&&i))return Ee;for(const o of t){var s;const t="documents"===n&&(null==e||null===(s=e.getFieldByName)||void 0===s?void 0:s.call(e,o))||i.find((e=>e.name===o))||{name:o,displayName:o,type:"unknown_selected"};l.selectedFields.push(t),l.selectedFieldsMap[t.name]=!0}return l.selectedFields=Object(H.uniqBy)(l.selectedFields,"name"),1===l.selectedFields.length&&"_source"===l.selectedFields[0].name?Ee:l}({dataView:p,workspaceSelectedFieldNames:B?[]:n,allFields:b,searchMode:t});J(e)}),[p,n,J,b,t,B]),Object(s.useEffect)((()=>{"documents"!==t||!Q||e.creationOptions.disableMultiFieldsGroupingByParent?te(void 0):te(function(e,t){if(!e)return;const i=new Map;return e.forEach((e=>{var n;const l=function(e){return function(e){var t;const i=null==e?void 0:e.subType;return!(null==i||null===(t=i.multi)||void 0===t||!t.parent)}(e)?e.subType:void 0}(e),s=null==l?void 0:l.multi.parent;if(!s)return;const o={field:e,isSelected:Boolean(null==t?void 0:t[e.name])},a=null!==(n=i.get(s))&&void 0!==n?n:[];a.push(o),i.set(s,a)})),i}(b,X.selectedFieldsMap))}),[e.creationOptions.disableMultiFieldsGroupingByParent,X.selectedFieldsMap,b,Q,te,t]);const ie=Object(s.useMemo)((()=>W.uiSettings.get(C.h)),[W.uiSettings]),ne=Object(s.useCallback)((i=>function(e,t,i){return!(null==e||!e.type||"_source"===e.type||"text-based"!==t&&!i&&Object(Te.getFieldSubtypeMulti)(null==e?void 0:e.spec))}(i,t,e.creationOptions.disableMultiFieldsGroupingByParent)),[t,e.creationOptions.disableMultiFieldsGroupingByParent]),{fieldListFiltersProps:le,fieldListGroupedProps:se}=function({dataViewId:e,allFields:t,services:i,isAffectedByGlobalFilter:n=!1,popularFieldsLimit:l,sortedSelectedFields:o,getCustomFieldType:d,onOverrideFieldGroupDetails:r,onSupportedFieldFilter:u,onSelectedFieldFilter:c}){const b=j(),p=function({allFields:e,getCustomFieldType:t,onSupportedFieldFilter:i,services:n}){const[l,o]=Object(s.useState)([]),[a,d]=Object(s.useState)(""),r=Object(s.useMemo)((()=>K()),[]),u=n.core.docLinks;return Object(s.useMemo)((()=>{const n=a.trim().toLowerCase();return{fieldSearchHighlight:n,fieldListFiltersProps:{docLinks:u,selectedFieldTypes:l,allFields:e,getCustomFieldType:t,onSupportedFieldFilter:i,onChangeFieldTypes:o,nameFilter:a,onChangeNameFilter:d,screenReaderDescriptionId:r},onFilterField:null!=n&&n.length||l.length>0?e=>!(n&&!$(e,n))&&(!(l.length>0)||l.includes(Object(q.a)(e,t))):void 0}}),[u,l,e,t,i,o,a,d,r])}({allFields:t,services:i,getCustomFieldType:d,onSupportedFieldFilter:u}),m=p.onFilterField,[F,g]=Object(s.useState)(null),h=Boolean(null==F?void 0:F.timeFieldName),x=!e||b.isFieldsExistenceInfoUnavailable(e),v=e?b.hasFieldData:Z;Object(s.useEffect)((()=>{(async()=>{if(e){let t=null;try{t=await i.dataViews.get(e,!1)}catch(e){}g(t||null)}else g(null)})()}),[e,i.dataViews,g,v]),Object(s.useEffect)((()=>{F&&!e&&g(null)}),[F,g,e]);const _=Object(s.useMemo)((()=>Date.now()),[e,m]),y=Object(s.useMemo)((()=>{const i=o||[],s=[...t||[]].sort(Y),d={specialFields:[],availableFields:[],emptyFields:[],metaFields:[],unmappedFields:[],skippedFields:[],...Object(H.groupBy)(s,(t=>{var n;return!o&&c&&c(t)&&i.push(t),u&&!u(t)?"skippedFields":"document"===t.type?"specialFields":null!=F&&null!==(n=F.metaFields)&&void 0!==n&&n.includes(t.name)?"metaFields":"nested"===t.type?"availableFields":null!=F&&F.getFieldByName&&!F.getFieldByName(t.name)?"unmappedFields":(t=>!e||v(e,t.name))(t)||x?"availableFields":"emptyFields"}))},b=l?s.filter((e=>e.count&&"_source"!==e.type&&(!u||u(e)))).sort(((e,t)=>(t.count||0)-(e.count||0))).slice(0,l):[];let f={SpecialFields:{fields:d.specialFields,fieldCount:d.specialFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!1,title:"",hideDetails:!0},SelectedFields:{fields:i,fieldCount:i.length,isInitiallyOpen:!0,showInAccordion:!0,title:a.i18n.translate("unifiedFieldList.useGroupedFields.selectedFieldsLabel",{defaultMessage:"Selected fields"}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:h,hideDetails:!1,hideIfEmpty:!0},PopularFields:{fields:b,fieldCount:b.length,isInitiallyOpen:!0,showInAccordion:!0,title:a.i18n.translate("unifiedFieldList.useGroupedFields.popularFieldsLabel",{defaultMessage:"Popular fields"}),helpText:a.i18n.translate("unifiedFieldList.useGroupedFields.popularFieldsLabelHelp",{defaultMessage:"Fields that your organization frequently uses, from most to least popular."}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:h,hideDetails:!1,hideIfEmpty:!0},AvailableFields:{fields:d.availableFields,fieldCount:d.availableFields.length,isInitiallyOpen:!0,showInAccordion:!0,title:e&&x?a.i18n.translate("unifiedFieldList.useGroupedFields.allFieldsLabel",{defaultMessage:"All fields"}):a.i18n.translate("unifiedFieldList.useGroupedFields.availableFieldsLabel",{defaultMessage:"Available fields"}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:h,hideDetails:x,defaultNoFieldsMessage:a.i18n.translate("unifiedFieldList.useGroupedFields.noAvailableDataLabel",{defaultMessage:"There are no available fields that contain data."})},UnmappedFields:{fields:d.unmappedFields,fieldCount:d.unmappedFields.length,isAffectedByGlobalFilter:n,isAffectedByTimeFilter:h,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!0,title:a.i18n.translate("unifiedFieldList.useGroupedFields.unmappedFieldsLabel",{defaultMessage:"Unmapped fields"}),helpText:a.i18n.translate("unifiedFieldList.useGroupedFields.unmappedFieldsLabelHelp",{defaultMessage:"Fields that aren't explicitly mapped to a field data type."})},EmptyFields:{fields:d.emptyFields,fieldCount:d.emptyFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!e,title:a.i18n.translate("unifiedFieldList.useGroupedFields.emptyFieldsLabel",{defaultMessage:"Empty fields"}),helpText:a.i18n.translate("unifiedFieldList.useGroupedFields.emptyFieldsLabelHelp",{defaultMessage:"Fields that don't have any values based on your filters."}),defaultNoFieldsMessage:a.i18n.translate("unifiedFieldList.useGroupedFields.noEmptyDataLabel",{defaultMessage:"There are no empty fields."})},MetaFields:{fields:d.metaFields,fieldCount:d.metaFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!e,title:a.i18n.translate("unifiedFieldList.useGroupedFields.metaFieldsLabel",{defaultMessage:"Meta fields"}),defaultNoFieldsMessage:a.i18n.translate("unifiedFieldList.useGroupedFields.noMetaDataLabel",{defaultMessage:"There are no meta fields."})}};return x&&delete f.EmptyFields,r&&(f=Object.keys(f).reduce(((e,t)=>{const i=t,n=f[i];return n&&(e[i]={...n,...r(i)||{}}),e}),{})),f}),[t,u,c,r,F,e,v,x,n,h,l,o]),O=Object(s.useMemo)((()=>m?Object.fromEntries(Object.entries(y).map((([e,t])=>[e,{...t,fieldSearchHighlight:p.fieldSearchHighlight,fields:t.fields.filter(m)}]))):y),[y,m,p.fieldSearchHighlight]),S=Boolean(t),k=null==t?void 0:t.length,B=Object(s.useMemo)((()=>!e||Boolean(k)),[e,k]),I=Object(s.useMemo)((()=>S?e&&b?b.getFieldsExistenceStatus(e):f.a.succeeded:f.a.unknown),[e,S,b]),L=p.fieldListFiltersProps.screenReaderDescriptionId;return{fieldListGroupedProps:Object(s.useMemo)((()=>({fieldGroups:O,scrollToTopResetCounter:_,fieldsExistInIndex:B,fieldsExistenceStatus:I,screenReaderDescriptionId:L})),[O,_,B,I,L]),fieldListFiltersProps:p.fieldListFiltersProps}}({dataViewId:"documents"===t&&(null==p?void 0:p.id)||null,allFields:b,popularFieldsLimit:"documents"!==t||e.creationOptions.disablePopularFields?0:ie,isAffectedByGlobalFilter:x,services:{dataViews:U,core:W},sortedSelectedFields:B?void 0:X.selectedFields,onSelectedFieldFilter:B,onSupportedFieldFilter:null!==(T=e.creationOptions.onSupportedFieldFilter)&&void 0!==T?T:ne,onOverrideFieldGroupDetails:e.creationOptions.onOverrideFieldGroupDetails}),oe=Object(s.useCallback)((({field:l,groupName:s,groupIndex:o,itemIndex:a,fieldSearchHighlight:r})=>Object(O.jsx)("li",{key:`field${l.name}`,"data-attr-field":l.name},Object(O.jsx)(Le,{stateService:e,searchMode:t,services:i,alwaysShowActionButton:d,field:l,size:g?"xs":"s",highlight:r,dataView:p,onAddFieldToWorkspace:_,onRemoveFieldFromWorkspace:y,onAddFilter:S,trackUiMetric:m,multiFields:null==ee?void 0:ee.get(l.name),onEditField:I,onDeleteField:L,workspaceSelectedFieldNames:n,groupIndex:o,itemIndex:a,isEmpty:s===f.b.EmptyFields,isSelected:s===f.b.SelectedFields||Boolean(X.selectedFieldsMap[l.name])}))),[e,t,i,d,g,p,_,y,S,m,ee,I,L,n,X.selectedFieldsMap]),{euiTheme:ae}=Object(r.useEuiTheme)();if(!p)return null;const de="boolean"==typeof c&&w?Object(O.jsx)(we,{buttonSize:g?"s":"m",isSidebarCollapsed:c,onChange:w}):null,re={className:k()("unifiedFieldListSidebar",{"unifiedFieldListSidebar--collapsed":c,"unifiedFieldListSidebar--fullWidth":h}),"aria-label":a.i18n.translate("unifiedFieldList.fieldListSidebar.indexAndFieldsSectionAriaLabel",{defaultMessage:"Index and fields"}),id:null!==(E=null===(M=e.creationOptions.dataTestSubj)||void 0===M?void 0:M.fieldListSidebarDataTestSubj)&&void 0!==E?E:"unifiedFieldListSidebarId","data-test-subj":null!==(D=null===(R=e.creationOptions.dataTestSubj)||void 0===R?void 0:R.fieldListSidebarDataTestSubj)&&void 0!==D?D:"unifiedFieldListSidebarId"};if(c&&de)return Object(O.jsx)(r.EuiHideFor,{sizes:["xs","s"]},Object(O.jsx)("div",re,de));const ue="toolbar"===u,ce={size:"s",iconType:"indexOpen","data-test-subj":null!==(z=null===(G=e.creationOptions.dataTestSubj)||void 0===G?void 0:G.fieldListAddFieldButtonTestSubj)&&void 0!==z?z:"unifiedFieldListAddField"},be=a.i18n.translate("unifiedFieldList.fieldListSidebar.addFieldButtonLabel",{defaultMessage:"Add a field"});return Object(O.jsx)(r.EuiPageSidebar,re,Object(O.jsx)(r.EuiFlexGroup,{className:"unifiedFieldListSidebar__group",direction:"column",alignItems:"stretch",gutterSize:"none",responsive:!1},Boolean(v)&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,css:Object(O.css)("margin-bottom:",ae.size.s,";","")},v),Object(O.jsx)(r.EuiFlexItem,null,Object(O.jsx)(P,{isProcessing:o,prepend:Object(O.jsx)(r.EuiFlexGroup,{direction:"row",gutterSize:"s",responsive:!1},de&&Object(O.jsx)(r.EuiFlexItem,{grow:!1},de),Object(O.jsx)(r.EuiFlexItem,null,Object(O.jsx)(N,l()({},le,{compressed:g})))),className:"unifiedFieldListSidebar__list"},F?Object(O.jsx)(V,l()({},se,{renderFieldItem:oe,localStorageKeyPrefix:e.creationOptions.localStorageKeyPrefix})):Object(O.jsx)(r.EuiFlexItem,{grow:!0}))),!!I&&Object(O.jsx)(r.EuiFlexItem,{grow:!1,css:ue?Object(O.css)("padding:",ae.size.s,";border-top:",ae.border.thin,";",""):void 0},ue?Object(O.jsx)(A,l()({},ce,{label:be,onClick:()=>I()})):Object(O.jsx)(r.EuiButton,l()({},ce,{onClick:()=>I()}),be))))},Ce=Object(s.memo)(Ae),Me=Object(s.forwardRef)((function(e,t){var n,p,j;const{getCreationOptions:_,services:S,dataView:k,workspaceSelectedFieldNames:B,prependInFlyout:I,variant:L="responsive",onFieldEdited:w}=e,[T]=Object(s.useState)((({options:e})=>({creationOptions:e}))({options:_()})),{data:E,dataViewFieldEditor:A}=S,[C,M]=Object(s.useState)(!1),{isSidebarCollapsed:P,onToggleSidebar:D}=(({stateService:e})=>{var t;const[i,n]=y()(`${null!==(t=e.creationOptions.localStorageKeyPrefix)&&void 0!==t?t:"unifiedFieldList"}:sidebarClosed`,!1),[l,o]=Object(s.useState)(null!=i&&i),a=Object(s.useCallback)((t=>{o(t),e.creationOptions.localStorageKeyPrefix&&n(t)}),[n,o,e.creationOptions.localStorageKeyPrefix]);return Object(s.useMemo)((()=>({isSidebarCollapsed:l,onToggleSidebar:a})),[l,a])})({stateService:T}),[R]=Object(s.useState)((()=>new u.BehaviorSubject(P))),N=Boolean(null==A?void 0:A.userPermissions.editIndexPattern())||Boolean(k&&!k.isPersisted()),z=Object(s.useRef)(),G=Object(s.useCallback)((e=>{z.current=e}),[]),V=Object(s.useCallback)((()=>{M(!1)}),[]),H=Object(v.b)({data:E,timeRangeUpdatesType:T.creationOptions.timeRangeUpdatesType}),U=H.searchMode,$=Boolean(null===(n=H.filters)||void 0===n?void 0:n.length),{isProcessing:W,refetchFieldsExistenceInfo:q}=(e=>{const t=Object(s.useRef)(!0),[n,l]=Object(s.useState)(0),o=n>0,a=Object(s.useCallback)((async({dataViewId:e,query:n,filters:s,fromDate:o,toDate:a,services:{dataViews:d,data:r,core:u},onNoData:b,fetchId:p})=>{var m,j,v,_,y;if(!(e&&n&&o&&a))return;const O=null===(m=g.getValue())||void 0===m?void 0:m[e];if(!t.current)return;const S=(null!==(j=null==O?void 0:O.numberOfFetches)&&void 0!==j?j:0)+1;let k=null;try{k=await d.get(e,!1)}catch(e){}if(null===(v=k)||void 0===v||!v.title)return;l((e=>e+1));const B=Boolean(null===(_=(y=k).getAggregationRestrictions)||void 0===_?void 0:_.call(y)),I={...F,numberOfFetches:S};if(B)I.fetchStatus=f.a.succeeded,I.hasDataViewRestrictions=!0;else try{const t=await(async e=>{const{loadFieldExisting:t}=await i.e(15).then(i.bind(null,317));return await t(e)})({dslQuery:await x(k,n,s||[],Object(c.a)(u.uiSettings)),fromDate:o,toDate:a,timeFieldName:k.timeFieldName,data:r,uiSettingsClient:u.uiSettings,dataViewsService:d,dataView:k}),l=(null==t?void 0:t.existingFieldNames)||[];b&&1===S&&!l.filter((e=>{var t,i;return!(null!==(t=k)&&void 0!==t&&null!==(i=t.metaFields)&&void 0!==i&&i.includes(e))})).length&&b(e),I.existingFieldsByFieldNameMap=l.reduce(((e,t)=>(e[t]=!0,e)),{}),I.fetchStatus=f.a.succeeded}catch(e){I.fetchStatus=f.a.failed}t.current&&p===h&&g.next({...g.getValue(),[e]:I}),l((e=>e-1))}),[t,l]),d=e.dataViews.map((e=>{var t,i;return`${e.id}:${e.title}:${e.timeFieldName||"no-timefield"}:${null!==(t=null===(i=e.fields)||void 0===i?void 0:i.length)&&void 0!==t?t:0}`})).join(","),r=Object(s.useCallback)((async t=>{const i=window.performance.now(),n="fetchFieldsExistenceInfo",l=m();h=l;const s={fetchId:l,dataViewId:t,...e};if(t)return await a({...s,dataViewId:t}),void Object(b.a)(e.services.core.analytics,{eventName:n,duration:window.performance.now()-i,meta:{dataViewsCount:1}});await Promise.all(e.dataViews.map((e=>a({...s,dataViewId:e.id})))),Object(b.a)(e.services.core.analytics,{eventName:n,duration:window.performance.now()-i,meta:{dataViewsCount:e.dataViews.length}})}),[a,d,e.query,e.filters,e.fromDate,e.toDate,e.services.core]);return Object(s.useEffect)((()=>{e.disableAutoFetching||r()}),[r,e.disableAutoFetching]),Object(s.useEffect)((()=>()=>{t.current=!1,g.next({})}),[t]),Object(s.useMemo)((()=>({refetchFieldsExistenceInfo:r,isProcessing:o})),[r,o])})({disableAutoFetching:T.creationOptions.disableFieldsExistenceAutoFetching,dataViews:"documents"===U&&k?[k]:[],query:H.query,filters:H.filters,fromDate:H.fromDate,toDate:H.toDate,services:S}),K=Object(s.useMemo)((()=>k&&A&&"documents"===U&&N?e=>{const t=A.openEditor({ctx:{dataView:k},fieldName:e,onSave:async()=>{w&&await w({editedFieldName:e})}});G(t),V()}:void 0),[U,N,A,k,G,V,w]),Q=Object(s.useMemo)((()=>k&&A&&K?e=>{const t=A.openDeleteModal({ctx:{dataView:k},fieldName:e,onDelete:async()=>{w&&await w({removedFieldName:e})}});G(t),V()}:void 0),[k,G,K,V,A,w]);if(Object(s.useEffect)((()=>()=>{null!=z&&z.current&&(null==z||z.current())}),[]),Object(s.useEffect)((()=>{R.next(P)}),[P,R]),Object(s.useImperativeHandle)(t,(()=>({isSidebarCollapsed$:R,refetchFieldsExistenceInfo:q,closeFieldListFlyout:V,createField:K,editField:K,deleteField:Q})),[R,q,V,K,Q]),!k)return null;const Y={...e,searchMode:U,stateService:T,isProcessing:W,isAffectedByGlobalFilter:$,onEditField:K,onDeleteField:Q,compressed:null!==(p=T.creationOptions.compressed)&&void 0!==p&&p,buttonAddFieldVariant:null!==(j=T.creationOptions.buttonAddFieldVariant)&&void 0!==j?j:"primary"};T.creationOptions.showSidebarToggleButton&&(Y.isSidebarCollapsed=P,Y.onToggleSidebar=D);const Z=T.creationOptions.buttonPropsToTriggerFlyout,X=()=>Object(O.jsx)(Ce,Y),J=()=>Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)("div",{className:"unifiedFieldListSidebar__mobile"},Object(O.jsx)(r.EuiButton,l()({},Z,{contentProps:{...null==Z?void 0:Z.contentProps,className:"unifiedFieldListSidebar__mobileButton"},fullWidth:!0,onClick:()=>M(!0)}),Object(O.jsx)(d.FormattedMessage,{id:"unifiedFieldList.fieldListSidebar.fieldsMobileButtonLabel",defaultMessage:"Fields"}),Object(O.jsx)(r.EuiBadge,{className:"unifiedFieldListSidebar__mobileBadge",color:"_source"===(null==B?void 0:B[0])?"default":"accent"},null!=B&&B.length&&"_source"!==B[0]?B.length:0))),C&&Object(O.jsx)(r.EuiPortal,null,Object(O.jsx)(r.EuiFlyout,{size:"s",onClose:()=>M(!1),"aria-labelledby":"flyoutTitle",ownFocus:!0},Object(O.jsx)(r.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(r.EuiTitle,{size:"s"},Object(O.jsx)("h2",{id:"flyoutTitle"},Object(O.jsx)(r.EuiLink,{color:"text",onClick:()=>M(!1)},Object(O.jsx)(r.EuiIcon,{className:"eui-alignBaseline","aria-label":a.i18n.translate("unifiedFieldList.fieldListSidebar.flyoutBackIcon",{defaultMessage:"Back"}),type:"arrowLeft"})," ",Object(O.jsx)("strong",null,a.i18n.translate("unifiedFieldList.fieldListSidebar.flyoutHeading",{defaultMessage:"Field list"})))))),Object(O.jsx)(Ce,l()({},Y,{alwaysShowActionButton:!0,buttonAddFieldVariant:"primary",isSidebarCollapsed:void 0,prepend:null==I?void 0:I()})))));return"button-and-flyout-always"===L?J():"list-always"===L?X():Object(O.jsx)(o.a.Fragment,null,Object(O.jsx)(r.EuiHideFor,{sizes:["xs","s"]},X()),Object(O.jsx)(r.EuiShowFor,{sizes:["xs","s"]},J()))}));t.default=Me}}]);