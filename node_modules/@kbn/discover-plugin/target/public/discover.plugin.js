!function(e){function t(t){for(var r,i,o=t[0],a=t[1],s=0,l=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&l.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(c&&c(t);l.length;)l.shift()()}var r={},n={4:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"discover.chunk."+e+".js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(l);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,r[1](c)}n[e]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=a;i(i.s=30)}([function(e,t,r){e.exports=r(25)(2)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){"use strict";r.d(t,"h",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return d})),r.d(t,"e",(function(){return u})),r.d(t,"i",(function(){return p})),r.d(t,"b",(function(){return f})),r.d(t,"j",(function(){return b})),r.d(t,"c",(function(){return h})),r.d(t,"g",(function(){return v}));var n=r(12),i=r(19),o=r(1);let a;const s=e=>a=e,c=()=>a,[l,d]=Object(o.createGetterSetter)("headerActionMenuMounter"),[u,p]=Object(o.createGetterSetter)("urlTracker"),f=Object(n.once)((()=>{const e=Object(i.createHashHistory)();return e.listen((()=>{})),e})),b=()=>{const e=f();return Object.assign(e.location,Object(i.createHashHistory)().location),e},[h,v]=Object(o.createGetterSetter)("scopedHistory")},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(32);r.d(t,"c",(function(){return n.o}));const i="SEARCH_EMBEDDABLE_CELL_ACTIONS_TRIGGER_ID",o={id:i,title:"Discover saved searches embeddable cell actions",description:"This trigger is used to replace the cell actions for Discover saved search embeddable grid."}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return o}));var n=r(23);const i=(e,t)=>{const r=e.trim(),n=r.endsWith("/");return`${r}${n?"":"/"}p/${t}${n?"/":""}`},o=e=>{var t;const r=Object(n.matchPath)(e,{path:"/p/:profile"});return{profile:null==r?void 0:r.params.profile,isProfileRootPath:null!==(t=null==r?void 0:r.isExact)&&void 0!==t&&t}}},function(e,t,r){"use strict";r.r(t),r.d(t,"PLUGIN_ID",(function(){return s})),r.d(t,"APP_ICON",(function(){return c})),r.d(t,"DISCOVER_APP_LOCATOR",(function(){return a})),r.d(t,"DiscoverAppLocatorDefinition",(function(){return locator_DiscoverAppLocatorDefinition}));var n=r(0),i=r.n(n),o=r(8);const a="DISCOVER_APP_LOCATOR";class locator_DiscoverAppLocatorDefinition{constructor(e){i()(this,"id",a),i()(this,"getLocation",(async e=>{const{useHash:t=this.deps.useHash,filters:n,dataViewId:i,indexPatternId:a,dataViewSpec:s,query:c,refreshInterval:l,savedSearchId:d,timeRange:u,searchSessionId:p,columns:f,grid:b,savedQuery:h,sort:v,interval:g,viewMode:_,hideAggregatedPreview:m,breakdownField:y,isAlertResults:S,profile:O}=e,w=d?`view/${encodeURIComponent(d)}`:"",j={},D={},{isFilterPinned:x}=await Promise.resolve().then(r.t.bind(null,22,7));c&&(j.query=c),n&&n.length&&(j.filters=null==n?void 0:n.filter((e=>!x(e)))),a&&(j.index=a),i&&(j.index=i),f&&(j.columns=f),b&&(j.grid=b),h&&(j.savedQuery=h),v&&(j.sort=v),g&&(j.interval=g),u&&(D.time=u),n&&n.length&&(D.filters=null==n?void 0:n.filter((e=>x(e)))),l&&(D.refreshInterval=l),_&&(j.viewMode=_),m&&(j.hideAggregatedPreview=m),y&&(j.breakdownField=y);const k={};s&&(k.dataViewSpec=s),S&&(k.isAlertResults=S);let P="#/";return O&&(P=Object(o.a)(P,O)),P=`${P}${w}`,p&&(P=`${P}?searchSessionId=${p}`),Object.keys(D).length&&(P=this.deps.setStateToKbnUrl("_g",D,{useHash:t},P)),Object.keys(j).length&&(P=this.deps.setStateToKbnUrl("_a",j,{useHash:t},P)),{app:"discover",path:P,state:k}})),this.deps=e}}const s="discover",c="discoverApp"},function(e,t,r){r.r(t);var n=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){e.exports=r(25)(3)},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,r){"use strict";e.exports=r(35)},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));const n="ad_hoc_data_view",i="searchSessionId"},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.History},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},,function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return b}));var n=r(6),i=r.n(n),o=r(20),a=r(2),s={name:"1azakc",styles:"text-align:center"};const c=()=>{const e=s;return Object(a.jsx)("div",{css:e},Object(a.jsx)(o.EuiLoadingSpinner,null))},l=e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey,d=(e,t)=>{let r=e;do{var n,i;if("a"===(null===(n=r)||void 0===n?void 0:n.tagName.toLowerCase()))return r;const e=null===(i=r)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;r=e}while(parent||parent!==document.body||parent!==t)};var u=r(11),p=r.n(u),f=r(18);const b=(e,t=Object(a.jsx)(c,null))=>i.a.forwardRef(((r,i)=>Object(a.jsx)(f.KibanaErrorBoundaryProvider,{analytics:r.analytics},Object(a.jsx)(f.KibanaErrorBoundary,null,Object(a.jsx)(n.Suspense,{fallback:t},Object(a.jsx)(e,p()({},r,{ref:i})))))))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){"use strict";e.exports=r(33)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=({input:e,savedSearch:t})=>{const r=t.searchSource.getField("index"),n=e.savedObjectId;return n?{savedSearchId:n}:{dataViewId:null==r?void 0:r.id,dataViewSpec:null==r?void 0:r.toMinimalSpec(),timeRange:t.timeRange,refreshInterval:t.refreshInterval,filters:t.searchSource.getField("filter"),query:t.searchSource.getField("query"),columns:t.columns,sort:t.sort,viewMode:t.viewMode,hideAggregatedPreview:t.hideAggregatedPreview,breakdownField:t.breakdownField}}},function(e,t,r){"use strict";e.exports=r(42)},function(e,t,r){r(31),__kbnBundles__.define("plugin/discover/public",r,43),__kbnBundles__.define("plugin/discover/common",r,9)},function(e,t,r){r.p=window.__kbnPublicPath__.discover},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return d})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return f})),r.d(t,"l",(function(){return b})),r.d(t,"m",(function(){return h})),r.d(t,"n",(function(){return v})),r.d(t,"o",(function(){return g})),r.d(t,"p",(function(){return _})),r.d(t,"q",(function(){return m})),r.d(t,"r",(function(){return y})),r.d(t,"s",(function(){return S})),r.d(t,"t",(function(){return O})),r.d(t,"u",(function(){return w}));const n="context:defaultSize",i="context:step",o="context:tieBreakerFields",a="defaultColumns",s="doc_table:hideTimeColumn",c="doc_table:legacy",l="discover:enableESQL",d="fields:popularLimit",u="hideAnnouncements",p="discover:maxDocFieldsDisplayed",f="discover:modifyColumnsOnSwitch",b="discover:rowHeightOption",h="discover:sampleRowsPerPage",v="discover:sampleSize",g="search",_="discover:searchFieldsFromSource",m="discover:searchOnPageLoad",y="discover:showFieldStatistics",S="discover:showMultiFields",O="discover:sort:defaultOrder",w="truncate:maxHeight"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34);r(14),r(15),r(29);var i=n.default({key:"css"}),o=i.flush,a=i.hydrate,s=i.cx,c=i.merge,l=i.getRegisteredStyles,d=i.injectGlobal,u=i.keyframes,p=i.css,f=i.sheet,b=i.cache;t.cache=b,t.css=p,t.cx=s,t.flush=o,t.getRegisteredStyles=l,t.hydrate=a,t.injectGlobal=d,t.keyframes=u,t.merge=c,t.sheet=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),i=r(15),o=r(29);function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function l(e,t,r){var n=[],i=o.getRegisteredStyles(e,n,r);return n.length<2?r:i+t(n)}var d=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(null!=i){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=e(i);else for(var a in o="",i)i[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=i}o&&(r&&(r+=" "),r+=o)}}return r};t.default=function(e){var t=s.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=i.serializeStyles(r,t.registered,void 0);return o.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:r,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return l(t.registered,r,d(n))},injectGlobal:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=i.serializeStyles(r,t.registered);c(t,o)},keyframes:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=i.serializeStyles(r,t.registered),a="animation-"+o.name;return c(t,{name:o.name,styles:"@keyframes "+a+"{"+o.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.getRegisteredStyles.bind(null,t.registered),merge:l.bind(null,t.registered,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),i=r(38),o=r(40);function a(e){return e&&e.__esModule?e:{default:e}}var s=a(n),c=a(i),l=/[A-Z]|^ms/g,d=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},p=function(e){return null!=e&&"boolean"!=typeof e},f=a(o).default((function(e){return u(e)?e:e.replace(l,"-$&").toLowerCase()})),b=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(d,(function(e,t,r){return v={name:t,styles:r,next:v},t}))}return 1===c.default[e]||u(e)||"number"!=typeof t||0===t?t:t+"px"};function h(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return v={name:r.name,styles:r.styles,next:v},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)v={name:n.name,styles:n.styles,next:v},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=h(e,t,r[i])+";";else for(var o in r){var a=r[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?n+=o+"{"+t[a]+"}":p(a)&&(n+=f(o)+":"+b(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=h(e,t,a);switch(o){case"animation":case"animationName":n+=f(o)+":"+s+";";break;default:n+=o+"{"+s+"}"}}else for(var c=0;c<a.length;c++)p(a[c])&&(n+=f(o)+":"+b(o,a[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=v,o=r(e);return v=i,h(e,t,o)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var v,g=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";v=void 0;var o=e[0];null==o||void 0===o.raw?(n=!1,i+=h(r,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=h(r,t,e[a]),n&&(i+=o[a]);g.lastIndex=0;for(var c,l="";null!==(c=g.exec(i));)l+="-"+c[1];return{name:s.default(i)+l,styles:i,next:v}}},function(e,t,r){"use strict";e.exports=r(37)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}},function(e,t,r){"use strict";e.exports=r(39)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";e.exports=r(41)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,i=function(e,t,r){var i=e.key+"-"+t.name;(!1===r||!1===n&&void 0!==e.compat)&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};t.getRegisteredStyles=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n},t.insertStyles=function(e,t,r){i(e,t,r);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",s=t;do{var c=e.insert(t===s?"."+o:"",s,e.sheet,!0);n||void 0===c||(a+=c),s=s.next}while(void 0!==s);if(!n&&0!==a.length)return a}},t.registerStyles=i},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return G})),r.d(t,"SEARCH_EMBEDDABLE_TYPE",(function(){return g.c})),r.d(t,"SEARCH_EMBEDDABLE_CELL_ACTIONS_TRIGGER_ID",(function(){return g.b})),r.d(t,"loadSharingDataHelpers",(function(){return V}));var n=r(11),i=r.n(n),o=r(0),a=r.n(o),s=r(6),c=r(4),l=r(10),d=r(1),u=r(32),p=r(9),f=r(5),b=r(3),h=r(12);const v=Object(h.memoize)((function(e,t,r,n,i,o){var a;const{usageCollection:s}=t,c=new d.Storage(localStorage);return{application:e.application,addBasePath:e.http.basePath.prepend,analytics:e.analytics,capabilities:e.application.capabilities,chrome:e.chrome,core:e,data:t.data,docLinks:e.docLinks,embeddable:t.embeddable,theme:e.theme,fieldFormats:t.fieldFormats,filterManager:t.data.query.filterManager,history:f.b,dataViews:t.data.dataViews,inspector:t.inspector,metadata:{branch:r.env.packageInfo.branch},navigation:t.navigation,share:t.share,urlForwarding:t.urlForwarding,timefilter:t.data.query.timefilter.timefilter,toastNotifications:e.notifications.toasts,notifications:e.notifications,uiSettings:e.uiSettings,settings:e.settings,storage:c,trackUiMetric:null==s?void 0:s.reportUiCounter.bind(s,"discover"),dataViewFieldEditor:t.dataViewFieldEditor,http:e.http,spaces:t.spaces,dataViewEditor:t.dataViewEditor,triggersActionsUi:t.triggersActionsUi,locator:n,contextLocator:i,singleDocLocator:o,expressions:t.expressions,charts:t.charts,savedObjectsTagging:null===(a=t.savedObjectsTaggingOss)||void 0===a?void 0:a.getTaggingApi(),savedObjectsManagement:t.savedObjectsManagement,savedSearch:t.savedSearch,unifiedSearch:t.unifiedSearch,lens:t.lens,uiActions:t.uiActions,contentClient:t.contentManagement.client,noDataPage:t.noDataPage}}));var g=r(7),_=r(13);const m=(e,t)=>{if(S(e)){const r=e.attributes.references.map((e=>t.find((t=>t.name===e.name)))).filter(Boolean);e={...e,attributes:{...e.attributes,references:r}}}return e},y=e=>{let t=[];return S(e)&&(t=e.attributes.references),{state:e,references:t}},S=e=>"attributes"in e;class search_embeddable_factory_SearchEmbeddableFactory{constructor(e,t){a()(this,"type",g.c),a()(this,"savedObjectMetaData",{name:b.i18n.translate("discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"}),type:"search",getIconForSavedObject:()=>"discoverApp"}),a()(this,"inject",m),a()(this,"extract",y),a()(this,"isEditable",(async()=>(await this.getStartServices()).isEditable())),a()(this,"createFromSavedObject",(async(e,t,r)=>(t.savedObjectId||(t.savedObjectId=e),this.create(t,r)))),this.getStartServices=e,this.getDiscoverServices=t}canCreateNew(){return!1}getDisplayName(){return b.i18n.translate("discover.embeddable.search.displayName",{defaultMessage:"search"})}async create(e,t){try{const n=await this.getDiscoverServices(),{executeTriggerActions:i}=await this.getStartServices(),{SavedSearchEmbeddable:o}=await Promise.all([r.e(0),r.e(1),r.e(9)]).then(r.bind(null,311));return new o({editable:Boolean(n.capabilities.discover.save),services:n,executeTriggerActions:i},e,t)}catch(r){return console.error(r),new _.ErrorEmbeddable(r,e,t)}}}var O=r(28);const w="ACTION_VIEW_SAVED_SEARCH";class view_saved_search_action_ViewSavedSearchAction{constructor(e,t){a()(this,"id",w),a()(this,"type",w),this.application=e,this.locator=t}async execute(e){const t=e.embeddable,r=t.getSavedSearch();if(!r)return;const n=Object(O.a)({input:t.getInput(),savedSearch:r});await this.locator.navigate(n)}getDisplayName(e){return b.i18n.translate("discover.savedSearchEmbeddable.action.viewSavedSearch.displayName",{defaultMessage:"Open in Discover"})}getIconType(e){return"inspect"}async isCompatible(e){const{embeddable:t}=e,{capabilities:r}=this.application,n=r.discover.show||r.discover.save;return Boolean(t.type===u.o&&t.getInput().viewMode===_.ViewMode.VIEW&&n)}}var j=r(14),D=r.n(j),x=r(26),k=r(15);const P=D()({key:"truncation"});var A=r(16),E=r(27),L=r(22),C=r(17);const[T,I]=Object(d.createGetterSetter)("urlTrackingEnabled");var R=r(8);class locator_DiscoverContextAppLocatorDefinition{constructor(e){a()(this,"id","DISCOVER_CONTEXT_APP_LOCATOR"),a()(this,"getLocation",(async e=>{const t=this.deps.useHash,{index:n,rowId:i,columns:o,filters:a,referrer:s}=e,c={},l={},{isFilterPinned:u}=await Promise.resolve().then(r.t.bind(null,22,7));let p;a&&a.length&&(c.filters=null==a?void 0:a.filter((e=>!u(e)))),o&&(c.columns=o),a&&a.length&&(l.filters=null==a?void 0:a.filter((e=>u(e))));const f={referrer:s};"object"==typeof n?(f.dataViewSpec=n,p=n.id):p=n;let b="#/";return e.profile&&(b=Object(R.a)(b,e.profile)),b=`${b}context/${p}/${encodeURIComponent(i)}`,Object.keys(l).length&&(b=Object(d.setStateToKbnUrl)("_g",l,{useHash:t},b)),Object.keys(c).length&&(b=Object(d.setStateToKbnUrl)("_a",c,{useHash:t},b)),{app:"discover",path:b,state:f}})),this.deps=e}}class locator_DiscoverSingleDocLocatorDefinition{constructor(){a()(this,"id","DISCOVER_SINGLE_DOC_LOCATOR"),a()(this,"getLocation",(async e=>{const{index:t,rowId:r,rowIndex:n,referrer:i}=e;let o;const a={referrer:i};"object"==typeof t?(a.dataViewSpec=t,o=t.id):o=t;let s="#/";return e.profile&&(s=Object(R.a)(s,e.profile)),s=`${s}doc/${o}/${n}?id=${encodeURIComponent(r)}`,{app:"discover",path:s,state:a}}))}}const M=e=>({id:e,customizationCallbacks:[],deepLinks:[]}),U=e=>{const t=e.reduce(((e,t)=>e.set(t.id,t)),new Map).values();return Array.from(t)};var B=r(24);const F=Object(B.c)(Object(s.lazy)((()=>Promise.all([r.e(0),r.e(1),r.e(2),r.e(17)]).then(r.bind(null,304)))));var $=r(2);class plugin_DiscoverPlugin{constructor(e){a()(this,"appStateUpdater",new c.BehaviorSubject((()=>({})))),a()(this,"stopUrlTracking",void 0),a()(this,"profileRegistry",(()=>{const e=new Map([["default",M("default")]]),t=new c.BehaviorSubject([...e.values()]);return{get:t=>e.get(t.toLowerCase()),set:r=>{e.set(r.id.toLowerCase(),r),t.next([...e.values()])},getContributedAppState$:()=>t.pipe(Object(c.map)((e=>e.flatMap((e=>{var t;return null!==(t=e.deepLinks)&&void 0!==t?t:[]})))),Object(c.map)((e=>t=>{var r;return{deepLinks:U([...null!==(r=t.deepLinks)&&void 0!==r?r:[],...e])}})))}})()),a()(this,"locator",void 0),a()(this,"contextLocator",void 0),a()(this,"singleDocLocator",void 0),a()(this,"getDiscoverServices",(async(e,t)=>{const{locator:r,contextLocator:n,singleDocLocator:i}=await H({locator:this.locator,contextLocator:this.contextLocator,singleDocLocator:this.singleDocLocator});return v(e,t,this.initializerContext,r,n,i)})),this.initializerContext=e}setup(e,t){const n=e.http.basePath.prepend("/app/discover"),i=this.initializerContext.env.mode.dev;if(t.share){const r=e.uiSettings.get("state:storeInSessionStorage");this.locator=t.share.url.locators.create(new p.DiscoverAppLocatorDefinition({useHash:r,setStateToKbnUrl:d.setStateToKbnUrl})),this.contextLocator=t.share.url.locators.create(new locator_DiscoverContextAppLocatorDefinition({useHash:r})),this.singleDocLocator=t.share.url.locators.create(new locator_DiscoverSingleDocLocatorDefinition)}if(t.globalSearch){const r=e.uiSettings.get(u.g);t.globalSearch.registerResultProvider((o=r,a=e.getStartServices().then((([{application:{capabilities:e}}])=>e)),s=e.getStartServices().then((e=>{const{data:t}=e[1];return t})),h=this.locator,{id:"esql",find:({term:e="",types:t,tags:r})=>r||t&&!t.includes("application")||!h||!o?Object(c.of)([]):Object(c.from)(Promise.all([a,s]).then((async([{navLinks:t},{dataViews:r}])=>{if(!t.discover)return[];const n=b.i18n.translate("discover.globalSearch.esqlSearchTitle",{defaultMessage:"Create ES|QL queries",description:"ES|QL is a product name and should not be translated"}),i=await r.getDefaultDataView({displayErrors:!1});if(!i)return[];const o={query:{esql:`from ${null==i?void 0:i.getIndexPattern()} | limit 10`},dataViewSpec:null==i?void 0:i.toSpec()},a=await(null==h?void 0:h.getLocation(o));let s=0;return"es|ql"===(e=e.toLowerCase())||"esql"===e?s=100:e&&("es|ql".includes(e)||"esql".includes(e))&&(s=90),0===s?[]:[{id:"esql",title:n,type:"application",icon:"logoKibana",meta:{categoryId:l.DEFAULT_APP_CATEGORIES.kibana.id,categoryLabel:l.DEFAULT_APP_CATEGORIES.kibana.label},score:s,url:`/app/${a.app}${a.path}`}]}))),getSearchableTypes:()=>["application"]}))}var o,a,s,h;const{setTrackedUrl:g,restorePreviousUrl:_,stopUrlTracker:m,appMounted:y,appUnMounted:S,setTrackingEnabled:O}=function(e,t,r,n){I({enabled:!0});const{appMounted:i,appUnMounted:o,stop:a,setActiveUrl:s,restorePreviousUrl:c}=Object(d.createKbnUrlTracker)({getHistory:f.c,baseUrl:e,defaultSubUrl:"#/",storageKey:`lastUrl:${t.http.basePath.get()}:discover`,navLinkUpdater$:r,toastNotifications:t.notifications.toasts,stateParams:[{kbnUrlKey:"_g",stateUpdate$:n.data.query.state$.pipe(Object(A.filter)((({changes:e})=>!!(e.globalFilters||e.time||e.refreshInterval))),Object(A.map)((({state:e})=>{var t;return{...e,filters:null===(t=e.filters)||void 0===t?void 0:t.filter(L.isFilterPinned)}})))}],shouldTrackUrlUpdate:()=>T().enabled,onBeforeNavLinkSaved:e=>(e.includes(C.b)&&(e=Object(E.replaceUrlHashQuery)(e,(e=>(delete e[C.b],e)))),e)});return{appMounted:i,appUnMounted:o,stopUrlTracker:a,setTrackedUrl:s,restorePreviousUrl:c,setTrackingEnabled:e=>{I({enabled:e})}}}(n,e,this.appStateUpdater,t);Object(f.i)({setTrackedUrl:g,restorePreviousUrl:_,setTrackingEnabled:O}),this.stopUrlTracking=()=>{m()};const w=Object(c.combineLatest)([this.appStateUpdater,this.profileRegistry.getContributedAppState$()]).pipe(Object(c.map)((([e,t])=>r=>({...e(r),...t(r)}))));return e.application.register({id:p.PLUGIN_ID,title:"Discover",updater$:w,order:1e3,euiIconType:"logoKibana",defaultPath:"#/",category:l.DEFAULT_APP_CATEGORIES.kibana,mount:async t=>{const[n,o]=await e.getStartServices();Object(f.g)(t.history),Object(f.f)(t.setHeaderActionMenu),Object(f.j)(),y();const a=t.history.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))})),{locator:s,contextLocator:c,singleDocLocator:l}=await H({locator:this.locator,contextLocator:this.contextLocator,singleDocLocator:this.singleDocLocator}),d=v(n,o,this.initializerContext,s,c,l);await o.dataViews.clearCache();const{renderApp:u}=await Promise.all([r.e(0),r.e(1),r.e(2),r.e(6)]).then(r.bind(null,310));t.element.classList.add("dscAppWrapper");const p=u({element:t.element,services:d,profileRegistry:this.profileRegistry,isDev:i});return()=>{a(),p(),S()}}}),t.urlForwarding.forwardApp("doc","discover",(e=>`#${e}`)),t.urlForwarding.forwardApp("context","discover",(e=>{const t=e.split("/");return t[4]?`#${[...t.slice(0,3),...t.slice(4)].join("/")}`:`#${e}`})),t.urlForwarding.forwardApp("discover","discover",(e=>{const[,t,r]=/discover\/([^\?]+)(.*)/.exec(e)||[];return t?`#/view/${t}${r||""}`:`#${e.replace("/discover","")||"/"}`})),t.home&&t.home.featureCatalogue.register({id:"discover",title:b.i18n.translate("discover.discoverTitle",{defaultMessage:"Discover"}),subtitle:b.i18n.translate("discover.discoverSubtitle",{defaultMessage:"Search and find insights."}),description:b.i18n.translate("discover.discoverDescription",{defaultMessage:"Interactively explore your data by querying and filtering raw documents."}),icon:"discoverApp",path:"/app/discover#/",showOnHomePage:!1,category:"data",solutionId:"kibana",order:200}),this.registerEmbeddable(e,t),{locator:this.locator}}start(e,t){const r=new view_saved_search_action_ViewSavedSearchAction(e.application,this.locator);t.uiActions.addTriggerAction("CONTEXT_MENU_TRIGGER",r),t.uiActions.registerTrigger(g.a),Object(f.h)(t.uiActions),(e=>{const t=Object(k.serializeStyles)((e=>e?[`\n    .dscTruncateByHeight {\n      overflow: hidden;\n      max-height: ${e}px !important;\n    }\n    .dscTruncateByHeight:before {\n      top: ${e-15}px;\n    }\n  `]:["\n    .dscTruncateByHeight {\n      max-height: none;\n    }"])(e),x.cache.registered);P.inserted[t.name]||P.insert("",t,P.sheet,!0)})(e.uiSettings.get(u.u));const n=this.initializerContext.env.mode.dev,o=()=>this.getDiscoverServices(e,t);return{locator:this.locator,DiscoverContainer:e=>Object($.jsx)(F,i()({getDiscoverServices:o,isDev:n},e)),registerCustomizationProfile:(a=this.profileRegistry,(e,t)=>{var r;const n=null!==(r=a.get(e))&&void 0!==r?r:M(e),{customize:i,deepLinks:o}=t;n.customizationCallbacks.push(i),Array.isArray(o)&&n.deepLinks?n.deepLinks=U([...n.deepLinks,...o]):Array.isArray(o)&&(n.deepLinks=U(o)),a.set(n)})};var a}stop(){this.stopUrlTracking&&this.stopUrlTracking()}registerEmbeddable(e,t){const r=new search_embeddable_factory_SearchEmbeddableFactory((async()=>{const[t,r]=await e.getStartServices();return{executeTriggerActions:r.uiActions.executeTriggerActions,isEditable:()=>t.application.capabilities.discover.save}}),(async()=>{const[t,r]=await e.getStartServices();return this.getDiscoverServices(t,r)}));t.embeddable.registerEmbeddableFactory(r.type,r)}}const H=async({locator:e,contextLocator:t,singleDocLocator:n})=>{const{ProfileAwareLocator:i}=await r.e(18).then(r.bind(null,303));return{locator:new i(e),contextLocator:new i(t),singleDocLocator:new i(n)}};async function V(){return await Promise.all([r.e(0),r.e(19)]).then(r.bind(null,145))}function G(e){return new plugin_DiscoverPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.LodashFp},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.MonacoBarePluginApi},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedDocViewer/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedHistogram/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedSearch/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjectsFinder/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts}]);