/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[0],Array(48).concat([function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(24);const a=()=>Object(r.useKibana)().services,i=()=>{const{notifications:{toasts:e}}=a();return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=(e,t=[])=>"object"==typeof e&&null!==e&&Object.keys(e).length>0&&(0===t.length||t.every((t=>({}.hasOwnProperty.call(e,t)))))},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return g.a})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return h})),n.d(t,"i",(function(){return j})),n.d(t,"h",(function(){return v})),n.d(t,"j",(function(){return O})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return S.a})),n.d(t,"k",(function(){return _.a})),n.d(t,"c",(function(){return M})),n.d(t,"b",(function(){return R})),n.d(t,"n",(function(){return d.a})),n.d(t,"o",(function(){return F})),n.d(t,"q",(function(){return I.a})),n.d(t,"p",(function(){return N})),n.d(t,"r",(function(){return L})),n.d(t,"s",(function(){return D})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return P}));var r=n(2),a=n(21),i=n(0),o=n(56),s=n(3),l=n(54),c=n(48),u=n(58),d=n(59),p=n(17);const f=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();function g(e,{transformId:r}){f.addDanger({title:i.i18n.translate("xpack.transform.stepCreateForm.createTransformErrorMessage",{defaultMessage:"An error occurred creating the transform {transformId}:",values:{transformId:r}}),text:Object(o.a)(Object(p.jsx)(u.a,{text:Object(l.a)(e)}),{theme:n,i18n:t})})}return Object(a.useMutation)({mutationFn:({transformId:t,transformConfig:n,createDataView:r=!1,timeFieldName:a})=>e.put(Object(s.u)(`transforms/${t}`),{query:{createDataView:r,timeFieldName:a},body:JSON.stringify(n),version:"1"}),onError:g,onSuccess:(e,t)=>{e.errors.length>0&&g(1===e.errors.length?e.errors[0]:e.errors,t),r()}}).mutate};var g=n(61);const m=()=>{const{data:e}=Object(c.a)();return Object(a.useQuery)([s.r.GET_DATA_VIEW_TITLES],(()=>e.dataViews.getTitles()))},b=()=>{const{http:e}=Object(c.a)();return Object(a.useQuery)([s.r.GET_ES_INDICES],(({signal:t})=>e.get("/api/index_management/indices",{version:"1",signal:t})))},h=()=>{const{http:e}=Object(c.a)();return Object(a.useQuery)([s.r.GET_ES_INGEST_PIPELINES],(({signal:t})=>e.get("/api/ingest_pipelines",{version:"1",signal:t})))},j=(e,t,n)=>{const{http:r}=Object(c.a)(),i={sortField:t,sortDirection:n};return Object(a.useQuery)([s.r.GET_TRANSFORM_AUDIT_MESSAGES,e,i],(({signal:t})=>r.get(Object(s.u)(`transforms/${e}/messages`),{query:i,version:"1",signal:t})))},v=(e,t)=>{const{http:n}=Object(c.a)();return Object(a.useQuery)([s.r.GET_TRANSFORM,e],(({signal:t})=>n.get(Object(s.u)(`transforms/${e}`),{version:"1",signal:t})),{enabled:t})},O=({enabled:e}={enabled:!0})=>{const{http:t}=Object(c.a)();return Object(a.useQuery)([s.r.GET_TRANSFORM_NODES],(async({signal:e})=>(await t.get(Object(s.u)("transforms/_nodes"),{version:"1",signal:e})).count),{refetchInterval:s.d,enabled:e})};var y=n(62),x=n(72);const w=()=>({transforms:[],transformIds:[]}),E=({enabled:e}={})=>{const{http:t}=Object(c.a)(),{data:n=w(),...r}=Object(a.useQuery)([s.r.GET_TRANSFORMS],(async({signal:e})=>{const n=w(),r=await t.get(Object(s.u)("transforms"),{version:"1",asSystemRequest:!0,signal:e});if(Array.isArray(r.errors)&&r.errors.length>0){const e=r.errors.filter((e=>e.type===x.a.DANGLING_TASK)).map((e=>{const t=/\[([^)]+)\]/.exec(e.reason);return Array.isArray(t)&&t.length>=1?t[1]:void 0})).filter(y.a);n.transformIdsWithoutConfig=e.length>0?e:void 0}return n.transforms=r.transforms.reduce(((e,t)=>(e.push({id:t.id,config:t,mode:void 0!==t.sync?s.q.CONTINUOUS:s.q.BATCH,stats:void 0,alerting_rules:t.alerting_rules}),e)),[]),n.transformIds=n.transforms.map((({id:e})=>e)),n}),{enabled:e,refetchInterval:s.d});return{data:n,...r}};var S=n(83),_=n(84),C=n(106),T=n(49);const A=(e=!1)=>({canCreateTransform:e,canCreateTransformAlerts:e,canDeleteIndex:e,canDeleteTransform:e,canGetTransform:e,canPreviewTransform:e,canReauthorizeTransform:e,canResetTransform:e,canScheduleNowTransform:e,canStartStopTransform:e,canUseTransformAlerts:e}),k=()=>{var e;const{application:t}=Object(c.a)();return n=null==t||null===(e=t.capabilities)||void 0===e?void 0:e.transform,Object(T.a)(n,Object.keys(A()))&&Object.values(n).every((e=>"boolean"==typeof e))?t.capabilities.transform:A();var n},R=e=>{var t,n;const{application:{capabilities:o}}=Object(c.a)(),l=Object(c.b)(),{canDeleteIndex:u}=k(),d=!0===(null===(t=o.savedObjectsManagement)||void 0===t?void 0:t.delete)||!0===(null===(n=o.indexPatterns)||void 0===n?void 0:n.save),[p,f]=Object(r.useState)(!0),[g,m]=Object(r.useState)(d),b=Object(r.useCallback)((()=>f(!p)),[p]),h=Object(r.useCallback)((()=>m(!g)),[g]),{error:j,data:v=1!==e.length}=(e=>{const{data:{dataViews:t}}=Object(c.a)();return Object(a.useQuery)([s.r.DATA_VIEW_EXISTS,e],(async()=>{if(1!==e.length)return!1;const n=e[0].config.dest.index;return void 0!==n&&(await t.find(n)).some((({title:e})=>e===n))}))})(e);return Object(r.useEffect)((()=>{if(null!==j&&1===e.length){const t=e[0].config.dest.index;l.addDanger(i.i18n.translate("xpack.transform.deleteTransform.errorWithCheckingIfDataViewExistsNotificationErrorMessage",{defaultMessage:"An error occurred checking if data view {dataView} exists: {error}",values:{dataView:t,error:Object(C.a)(j)}}))}}),[j]),{userCanDeleteIndex:u,userCanDeleteDataView:d,deleteDestIndex:p,dataViewExists:v,deleteDataView:g,toggleDeleteIndex:b,toggleDeleteDataView:h}},M=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();return Object(a.useMutation)({mutationFn:t=>e.post(Object(s.u)("delete_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>f.addDanger({title:i.i18n.translate("xpack.transform.transformList.deleteTransformGenericErrorMessage",{defaultMessage:"An error occurred calling the API endpoint to delete transforms."}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:Object(l.a)(e)}),{theme:n,i18n:t})}),onSuccess:e=>{for(const r in e)if(e.hasOwnProperty(r)){var a,s,l;const c=e[r],d=c.destinationIndex;if(null!==(a=c.transformDeleted)&&void 0!==a&&a.error){const e=c.transformDeleted.error.reason;f.addDanger({title:i.i18n.translate("xpack.transform.transformList.deleteTransformErrorMessage",{defaultMessage:"An error occurred deleting the transform {transformId}",values:{transformId:r}}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:e}),{theme:n,i18n:t})})}if(null!==(s=c.destIndexDeleted)&&void 0!==s&&s.error){const e=c.destIndexDeleted.error.reason;f.addDanger({title:i.i18n.translate("xpack.transform.deleteTransform.deleteAnalyticsWithIndexErrorMessage",{defaultMessage:"An error occurred deleting destination index {destinationIndex}",values:{destinationIndex:d}}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:e}),{theme:n,i18n:t})})}if(null!==(l=c.destDataViewDeleted)&&void 0!==l&&l.error){const e=Object(C.a)(c.destDataViewDeleted.error);f.addDanger({title:i.i18n.translate("xpack.transform.deleteTransform.deleteAnalyticsWithDataViewErrorMessage",{defaultMessage:"An error occurred deleting data view {destinationIndex}",values:{destinationIndex:d}}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:e}),{theme:n,i18n:t})})}}r()}}).mutate},F=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();return Object(a.useMutation)({mutationFn:t=>e.post(Object(s.u)("reset_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>f.addDanger({title:i.i18n.translate("xpack.transform.transformList.resetTransformGenericErrorMessage",{defaultMessage:"An error occurred calling the API endpoint to reset transforms."}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:Object(l.a)(e)}),{theme:n,i18n:t})}),onSuccess:e=>{for(const r in e)if(e.hasOwnProperty(r)){var a;const s=e[r];if(null!==(a=s.transformReset)&&void 0!==a&&a.error){const e=s.transformReset.error.reason;f.addDanger({title:i.i18n.translate("xpack.transform.transformList.resetTransformErrorMessage",{defaultMessage:"An error occurred resetting the transform {transformId}",values:{transformId:r}}),text:Object(o.a)(Object(p.jsx)(u.a,{previewTextLength:50,text:e}),{theme:n,i18n:t})})}}r()}}).mutate};var I=n(65);const N=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();return Object(a.useMutation)({mutationFn:t=>e.post(Object(s.u)("schedule_now_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>f.addDanger({title:i.i18n.translate("xpack.transform.stepCreateForm.scheduleNowTransformResponseSchemaErrorMessage",{defaultMessage:"An error occurred calling the request to schedule the transform to process data instantly."}),text:Object(o.a)(Object(p.jsx)(u.a,{text:Object(l.a)(e)}),{theme:n,i18n:t})}),onSuccess:e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n.success||f.addError(new Error(JSON.stringify(n.error.caused_by,null,2)),{title:i.i18n.translate("xpack.transform.transformList.scheduleNowTransformErrorMessage",{defaultMessage:"An error occurred scheduling transform {transformId} to process data instantly.",values:{transformId:t}}),toastMessage:n.error.reason})}r()}}).mutate},L=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();return Object(a.useMutation)({mutationFn:t=>e.post(Object(s.u)("start_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>f.addDanger({title:i.i18n.translate("xpack.transform.stepCreateForm.startTransformResponseSchemaErrorMessage",{defaultMessage:"An error occurred calling the start transforms request."}),text:Object(o.a)(Object(p.jsx)(u.a,{text:Object(l.a)(e)}),{theme:n,i18n:t})}),onSuccess:e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n.success||f.addError(new Error(JSON.stringify(n.error.caused_by,null,2)),{title:i.i18n.translate("xpack.transform.transformList.startTransformErrorMessage",{defaultMessage:"An error occurred starting the transform {transformId}",values:{transformId:t}}),toastMessage:n.error.reason})}r()}}).mutate},D=()=>{const{http:e,i18n:t,theme:n}=Object(c.a)(),r=Object(d.a)(),f=Object(c.b)();return Object(a.useMutation)({mutationFn:t=>e.post(Object(s.u)("stop_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>f.addDanger({title:i.i18n.translate("xpack.transform.transformList.stopTransformResponseSchemaErrorMessage",{defaultMessage:"An error occurred called the stop transforms request."}),text:Object(o.a)(Object(p.jsx)(u.a,{text:Object(l.a)(e)}),{theme:n,i18n:t})}),onSuccess:e=>{for(const t in e)e.hasOwnProperty(t)&&(e[t].success||f.addDanger(i.i18n.translate("xpack.transform.transformList.stopTransformErrorMessage",{defaultMessage:"An error occurred stopping the data frame transform {transformId}",values:{transformId:t}})));r()}}).mutate},P=(e,t)=>{const{http:n}=Object(c.a)(),r=Object(d.a)();return Object(a.useMutation)({mutationFn:()=>n.post(Object(s.u)(`transforms/${e}/_update`),{body:JSON.stringify(t),version:"1"}),onSuccess:()=>r()}).mutate}},function(e,t,n){"use strict";n.d(t,"n",(function(){return a})),n.d(t,"k",(function(){return i.b})),n.d(t,"w",(function(){return o.b})),n.d(t,"c",(function(){return s.a})),n.d(t,"l",(function(){return c})),n.d(t,"o",(function(){return u})),n.d(t,"f",(function(){return d.h})),n.d(t,"u",(function(){return d.j})),n.d(t,"a",(function(){return d.b})),n.d(t,"y",(function(){return d.p})),n.d(t,"d",(function(){return p.b})),n.d(t,"g",(function(){return p.c})),n.d(t,"m",(function(){return p.d})),n.d(t,"v",(function(){return p.i})),n.d(t,"q",(function(){return p.e})),n.d(t,"r",(function(){return p.f})),n.d(t,"s",(function(){return p.g})),n.d(t,"z",(function(){return p.j})),n.d(t,"b",(function(){return p.a})),n.d(t,"h",(function(){return x})),n.d(t,"e",(function(){return E})),n.d(t,"j",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"p",(function(){return v})),n.d(t,"t",(function(){return j})),n.d(t,"x",(function(){return h}));var r=n(29);function a(e){return null===Object(r.composeValidators)(Object(r.patternValidator)(/^[^\s]/),Object(r.patternValidator)(/[^\s]$/),Object(r.patternValidator)(/^[^\[\]>]+$/))(e)}var i=n(66),o=n(72),s=n(53),l=n(3);function c(e){var t,n,r,a;if(u(e))return 100;const i=null==e||null===(t=e.stats)||void 0===t||null===(n=t.checkpointing)||void 0===n||null===(r=n.next)||void 0===r||null===(a=r.checkpoint_progress)||void 0===a?void 0:a.percent_complete;return void 0!==i?Math.round(i):void 0}function u(e){var t;return e.stats&&e.config&&1===(null===(t=e.stats.checkpointing)||void 0===t?void 0:t.last.checkpoint)&&void 0===e.config.sync&&e.stats.state===l.t.STOPPED}var d=n(52),p=n(55),f=n(49),g=n(68);function m(e){return"string"==typeof e?{query_string:{query:e,default_operator:"AND"}}:e}function b(e){return Object(f.a)(e,["query_string"])}const h={match_all:{}};function j(e){return Object(f.a)(e,["match_all"])&&"object"==typeof e.match_all&&null!==e.match_all&&0===Object.keys(e.match_all).length}function v(e){return j(e)||b(e)&&"*"===e.query_string.query||(t=e,Object(f.a)(t,["bool"])&&Object(f.a)(t.bool,["filter"])&&Array.isArray(t.bool.filter)&&1===t.bool.filter.length&&b(t.bool.filter[0])&&("*"===e.bool.filter[0].query_string.query||j(e.bool.filter[0])));var t}const O=e=>void 0!==e.missing_bucket?{missing_bucket:e.missing_bucket}:{},y=(e,t)=>{const n={pivot:{group_by:{},aggregations:{}}};return t.forEach((e=>{if(Object(p.g)(e)){const t={terms:{field:e.field,...O(e)}};n.pivot.group_by[e.aggName]=t}else if(Object(p.f)(e)){const t={histogram:{field:e.field,interval:e.interval,...O(e)}};n.pivot.group_by[e.aggName]=t}else if(Object(p.e)(e)){const t={date_histogram:{field:e.field,calendar_interval:e.calendar_interval,time_zone:e.time_zone,...O(e)}};n.pivot.group_by[e.aggName]=t}else n.pivot.group_by[e.aggName]=Object(p.c)(e)})),e.forEach((e=>{const t=Object(d.h)(e);null!==t&&(n.pivot.aggregations[e.aggName]=t)})),n};function x(e,t,n,r,a){const i=e.getIndexPattern().split(",").map((e=>e.trim())),o=void 0!==e.timeFieldName&&""!==e.timeFieldName,s=Object(g.c)(e.timeFieldName,null==a?void 0:a.from,null==a?void 0:a.to,v(t)?void 0:t),l={bool:{filter:s}},c=o&&s.length>0?l:t;return{source:{index:i,...v(c)?{}:{query:c},...Object(f.a)(r)?{runtime_mappings:r}:{}},...null!=n?n:{}}}const w=e=>{const t={...e.transformSettingsMaxPageSearchSize&&e.transformSettingsMaxPageSearchSize!==l.g?{max_page_search_size:e.transformSettingsMaxPageSearchSize}:{},...e.transformSettingsDocsPerSecond&&e.transformSettingsDocsPerSecond!==l.f?{docs_per_second:e.transformSettingsDocsPerSecond}:{},..."number"==typeof e.transformSettingsNumFailureRetries?{num_failure_retries:e.transformSettingsNumFailureRetries}:{}};return Object.keys(t).length>0?{settings:t}:{}},E=(e,t,n)=>({...x(e,m(t.searchQuery),t.previewRequest,t.runtimeMappings,t.isDatePickerApplyEnabled&&t.timeRangeMs?t.timeRangeMs:void 0),...""!==n.transformDescription?{description:n.transformDescription}:{},...""!==n.transformFrequency&&n.transformFrequency!==l.e?{frequency:n.transformFrequency}:{},dest:{index:n.destinationIndex,...""!==n.destinationIngestPipeline?{pipeline:n.destinationIngestPipeline}:{}},...n.isContinuousModeEnabled?{sync:{time:{...n.continuousModeDelay!==l.b?{delay:n.continuousModeDelay}:{},field:n.continuousModeDateField}}}:{},...n.isRetentionPolicyEnabled&&""!==n.retentionPolicyDateField&&""!==n.retentionPolicyMaxAge?{retention_policy:{time:{field:n.retentionPolicyDateField,max_age:n.retentionPolicyMaxAge}}}:{},...n._meta?{_meta:n._meta}:{},...w(n)})},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"p",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return h})),n.d(t,"n",(function(){return j})),n.d(t,"o",(function(){return v})),n.d(t,"a",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"j",(function(){return x})),n.d(t,"k",(function(){return w})),n.d(t,"i",(function(){return E})),n.d(t,"h",(function(){return S}));var r=n(57),a=n(49),i=n(60),o=n(73),s=n(97);const l=[1,5,25,50,75,95,99],c=10,u={[r.b.ATTACHMENT]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.BOOLEAN]:[o.a.VALUE_COUNT,o.a.FILTER,o.a.TERMS],[r.b.DATE]:[o.a.MAX,o.a.MIN,o.a.VALUE_COUNT,o.a.FILTER],[r.b.GEO_POINT]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.GEO_SHAPE]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.IP]:[o.a.CARDINALITY,o.a.VALUE_COUNT,o.a.FILTER,o.a.TOP_METRICS,o.a.TERMS],[r.b.MURMUR3]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.NUMBER]:[o.a.AVG,o.a.CARDINALITY,o.a.MAX,o.a.MIN,o.a.PERCENTILES,o.a.SUM,o.a.VALUE_COUNT,o.a.FILTER,o.a.TERMS,o.a.TOP_METRICS],[r.b.STRING]:[o.a.CARDINALITY,o.a.VALUE_COUNT,o.a.FILTER,o.a.TOP_METRICS,o.a.TERMS],[r.b._SOURCE]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.UNKNOWN]:[o.a.VALUE_COUNT,o.a.FILTER],[r.b.CONFLICT]:[o.a.VALUE_COUNT,o.a.FILTER],[i.b.COUNTER]:[o.a.MAX,o.a.MIN,o.a.TOP_METRICS]},d=[r.b.NUMBER,r.b.DATE,r.b.GEO_POINT,i.b.COUNTER],p={ASC:"asc",DESC:"desc"},f={MIN:"min",MAX:"max",AVG:"avg",SUM:"sum",MEDIAN:"median"},g=(r.b.NUMBER,r.a.DOUBLE,r.a.LONG,r.b.DATE,r.a.DATE,r.a.DATE_NANOS,[r.a.DOUBLE,r.a.LONG,r.a.DATE,r.a.DATE_NANOS]),m={_SCORE:"_score"},b=e=>Object.values(m).some((t=>t===e)),h=e=>Object.values(p).some((t=>t===e)),j=e=>Object.values(f).some((t=>t===e)),v=e=>g.some((t=>t===e)),O=10;function y(e,t,n){const r=Object.keys(e),a=r.find((e=>"aggs"!==e));if(void 0===a)throw new Error("Aggregation key is required");const i={...e[a],agg:a,aggName:t,dropDownName:t},o=Object(s.a)(a,i);if(n&&(o.parentAgg=n),w(o)&&o.setUiConfigFromEs(e[a]),r.includes("aggs")){o.subAggs={};for(const[t,n]of Object.entries(e.aggs))o.subAggs[t]=y(n,t,o)}return o}function x(e){return Object(a.a)(e,["agg","aggName","dropDownName","field"])&&function(e){return"string"==typeof e&&Object.values(o.a).includes(e)}(e.agg)}function w(e){return Object(a.a)(e,["setUiConfigFromEs"])||Object(a.a)(e,["AggFormComponent"])}function E(e){return w(e)&&e.agg===o.a.TOP_METRICS}function S(e){let t={...e};if(delete t.agg,delete t.aggName,delete t.dropDownName,delete t.parentAgg,w(e)&&(t=e.getEsAggConfig(),null===t))return null;const n={[e.agg]:t};if(x(e)&&void 0!==e.subAggs&&Object.keys(e.subAggs).length>0){n.aggs={};for(const t of Object.values(e.subAggs))n.aggs[t.aggName]=S(t)}return n}},function(e,t,n){"use strict";let r;function a(e){return void 0!==e.stats}function i(e){return e.some((e=>!a(e)))}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),function(e){e.DESCRIPTION="config.description",e.ID="id"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(49);function a(e){return t=e,Object(r.a)(t,["body"])&&Object(r.a)(t.body,["message"])&&void 0!==t.body.message?`${e.body.error}: ${e.body.message}`:Object(r.a)(e,["message"])&&"string"==typeof e.message?e.message:JSON.stringify(e);var t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return g}));var r=n(57),a=n(49);let i;!function(e){e.DATE_HISTOGRAM="date_histogram",e.HISTOGRAM="histogram",e.TERMS="terms"}(i||(i={}));const o={[r.b.ATTACHMENT]:[],[r.b.BOOLEAN]:[i.TERMS],[r.b.DATE]:[i.DATE_HISTOGRAM],[r.b.GEO_POINT]:[],[r.b.GEO_SHAPE]:[],[r.b.IP]:[i.TERMS],[r.b.MURMUR3]:[],[r.b.NUMBER]:[i.HISTOGRAM,i.TERMS],[r.b.STRING]:[i.TERMS],[r.b._SOURCE]:[],[r.b.UNKNOWN]:[],[r.b.CONFLICT]:[]},s=/^([1-9][0-9]*((\.)([0-9]+))?|([0](\.)([0-9]+)))$/,l=/^[1-9][0-9]*(ms|s|m|h|d|w|M|q|y)$/;function c(e){return Object(a.a)(e,["agg","field","calendar_interval"])&&e.agg===i.DATE_HISTOGRAM}function u(e){return Object(a.a)(e,["agg","field","interval"])&&e.agg===i.HISTOGRAM}function d(e){return Object(a.a)(e,["agg","field"])&&e.agg===i.TERMS}function p(e){return c(e)||u(e)||d(e)}function f(e){const{agg:t,aggName:n,dropDownName:r,...a}=e;return{[t]:a}}function g(e){return Object(a.a)(e,["agg","field"])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var r=n(2),a=n(27),i=n.n(a),o=n(70),s=n.n(o),l=n(71),c=n.n(l),u=n(40),d=n.n(u),p=n(18);let f;!function(e){e.preboot="preboot",e.standard="standard"}(f||(f={}));const g="eui-global",m="eui-utilities",b={darkMode:!1};var h=n(17);const j=[p.euiStylisPrefixer],v=d()({key:"css",stylisPlugins:j,container:document.querySelector('meta[name="emotion"]')}),O=d()({key:g,stylisPlugins:j,container:document.querySelector(`meta[name="${g}"]`)}),y=d()({key:m,stylisPlugins:j,container:document.querySelector(`meta[name="${m}"]`)});v.compat=!0,O.compat=!0,y.compat=!0;const x={default:v,global:O,utility:y},w=({theme:{theme$:e},globalStyles:t,colorMode:n,children:a})=>{const i=c()(e,b),o=Object(r.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(i)),[i]),s=n||o,l=!1!==t&&void 0;return Object(h.jsx)(p.EuiProvider,{cache:x,colorMode:s,globalStyles:l,utilityClasses:l},a)},E=({children:e,i18n:t,...n})=>Object(h.jsx)(w,n,Object(h.jsx)(t.Context,null,e));var S=n(41);const _=({children:e,...t})=>Object(h.jsx)(E,s()({globalStyles:!1},t),Object(h.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(h.jsx)(S.KibanaErrorBoundary,null,e))),C=(e,t)=>n=>(i.a.render(Object(h.jsx)(_,t,e),n),()=>i.a.unmountComponentAtNode(n));n(4),n(0);class mount_point_portal_MountPointPortalErrorBoundary extends r.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(h.jsx)("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(4),a=n.n(r);let i,o;!function(e){e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram"}(i||(i={})),function(e){e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing"}(o||(o={}));class kbn_field_type_KbnFieldType{constructor(e={}){a()(this,"name",void 0),a()(this,"sortable",void 0),a()(this,"filterable",void 0),a()(this,"esTypes",void 0),this.name=e.name||o.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}new kbn_field_type_KbnFieldType({name:o.UNKNOWN});new kbn_field_type_KbnFieldType({name:o.STRING,sortable:!0,filterable:!0,esTypes:[i.STRING,i.TEXT,i.MATCH_ONLY_TEXT,i.KEYWORD,i.VERSION,i._TYPE,i._ID]}),new kbn_field_type_KbnFieldType({name:o.NUMBER,sortable:!0,filterable:!0,esTypes:[i.FLOAT,i.HALF_FLOAT,i.SCALED_FLOAT,i.DOUBLE,i.INTEGER,i.LONG,i.UNSIGNED_LONG,i.SHORT,i.BYTE,i.TOKEN_COUNT,i.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:o.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[i.FLOAT_RANGE,i.DOUBLE_RANGE,i.INTEGER_RANGE,i.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:o.DATE,sortable:!0,filterable:!0,esTypes:[i.DATE,i.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:o.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[i.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:o.IP,sortable:!0,filterable:!0,esTypes:[i.IP]}),new kbn_field_type_KbnFieldType({name:o.IP_RANGE,sortable:!0,filterable:!0,esTypes:[i.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:o.BOOLEAN,sortable:!0,filterable:!0,esTypes:[i.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:o.OBJECT,esTypes:[i.OBJECT]}),new kbn_field_type_KbnFieldType({name:o.NESTED,esTypes:[i.NESTED]}),new kbn_field_type_KbnFieldType({name:o.GEO_POINT,esTypes:[i.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:o.GEO_SHAPE,esTypes:[i.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:o.ATTACHMENT,esTypes:[i.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:o.MURMUR3,esTypes:[i.MURMUR3]}),new kbn_field_type_KbnFieldType({name:o._SOURCE,esTypes:[i._SOURCE]}),new kbn_field_type_KbnFieldType({name:o.HISTOGRAM,filterable:!0,esTypes:[i.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:o.CONFLICT})},function(e,t,n){"use strict";var r=n(82);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(21),a=n(3);const i=()=>{const e=Object(r.useQueryClient)();return()=>{e.invalidateQueries([a.r.GET_TRANSFORM_NODES]),e.invalidateQueries([a.r.GET_TRANSFORMS]),e.invalidateQueries([a.r.GET_TRANSFORMS_STATS]),e.invalidateQueries([a.r.GET_TRANSFORM_AUDIT_MESSAGES])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n(20),a=(n(57),n(49));n(95),n(4),n(22),[1e-5,5e-5,1e-4,5e-4,.001,.005,.01,.05,.1,.2,.3,.4,.5].map((e=>100*e)),n(122);const i=5e3;function o(e){if(void 0!==(null==e?void 0:e.min)&&void 0!==e.max&&e.min>e.max)throw new Error("Invalid validator conditions");return Object(r.memoize)((t=>{const n={};return void 0!==(null==e?void 0:e.min)&&t<e.min&&(n.min=!0),void 0!==(null==e?void 0:e.max)&&t>e.max&&(n.max=!0),null!=e&&e.integerOnly&&!Number.isInteger(t)&&(n.integerOnly=!0),Object(a.a)(n)?n:null}))}const s=e=>Object(a.a)(e,["buckets"]);let l;!function(e){e.HISTOGRAM="histogram",e.COUNTER="counter",e.GAUGE="gauge",e.SUMMARY="summary"}(l||(l={}));const c=e=>(null==e?void 0:e.timeSeriesMetric)===l.COUNTER},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(48);const a=()=>{const e=Object(r.a)(),{ELASTIC_WEBSITE_URL:t,DOC_LINK_VERSION:n}=e.docLinks;return{esAggsCompositeMissingBucket:e.docLinks.links.aggs.composite_missing_bucket,esIndicesCreateIndex:e.docLinks.links.apis.createIndex,esNodeRoles:e.docLinks.links.elasticsearch.nodeRoles,esPluginDocBasePath:`${t}guide/en/elasticsearch/plugins/${n}/`,esQueryDsl:e.docLinks.links.query.queryDsl,esTransform:e.docLinks.links.transforms.guide,esTransformPivot:e.docLinks.links.apis.createTransformRequest,esTransformUpdate:e.docLinks.links.apis.updateTransform}}},function(e,t,n){"use strict";function r(e){return null!=e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(2),a=n(17);const i=Object(r.createContext)({showNodeInfo:!0}),o=e=>{const{children:t,enabledFeatures:n}=e;return Object(a.jsx)(i.Provider,{value:n},t)};function s(){const e=Object(r.useContext)(i);return Object(r.useMemo)((()=>e),[e])}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(49);function a(e){return Object(r.a)(e,["pivot"])}function i(e){return Object(r.a)(e,["latest"])}function o(e){return Object(r.a)(e,["sync"])}let s;!function(e){e.DELETE="delete",e.REAUTHORIZE="reauthorize",e.RESET="reset",e.SCHEDULE_NOW="schedule_now",e.STOP="stop",e.START="start"}(s||(s={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(2),a=n(0),i=n(49);function o(e){return Object(i.a)(e,["title","fields"])&&"getComputedFields"in e&&"function"==typeof e.getComputedFields&&"string"==typeof e.title&&Array.isArray(e.fields)}var s=n(48),l=n(35),c=n(42),u=n(51);let d=[];async function p(e){return d=await e.find("*",1e4),d}function f(e){var t;return null===(t=d.find((({title:t})=>t===e)))||void 0===t?void 0:t.id}const g=e=>{const[t,n]=Object(r.useState)(e),[i,d]=Object(r.useState)(),g=Object(s.a)(),m=g.data.dataViews,b=g.uiSettings,[h,j]=Object(r.useState)(void 0),v=Object(r.useRef)(!0);return Object(r.useEffect)((()=>()=>{v.current=!1}),[]),Object(r.useEffect)((()=>{void 0!==t&&async function(e){let t,n;try{t=await m.get(e)}catch(e){}try{t||(n=await g.savedSearch.get(e))}catch(e){}if(v.current){if(!o(t)&&void 0===n)return void d(a.i18n.translate("xpack.transform.searchItems.errorInitializationTitle",{defaultMessage:"An error occurred initializing the Kibana data view or saved search."}));j(function(e,t,n){let r={query:"",language:"lucene"},a={bool:{must:[u.x]}};if(!o(e)&&null!==t&&void 0!==t.id){const i=t.searchSource;e=i.getField("index"),r=i.getField("query");const o=i.getField("filter"),s=o.length?o:[],u=Object(c.getEsQueryConfig)(n);a=Object(l.buildEsQuery)(e,[r],s,u)}if(!o(e))throw new Error("Data view is not defined.");return{dataView:e,savedSearch:t,query:r,combinedQuery:a}}(t,n,b)),d(void 0)}}(t)}),[t]),{error:i,getDataViewIdByTitle:f,loadDataViews:p,searchItems:h,setSavedObjectId:n}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));const r=e=>`POST _transform/_preview\n${JSON.stringify(e,null,2)}\n`,a=(e,t)=>`GET ${t}/_search\n${JSON.stringify({query:e},null,2)}\n`},function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return C})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return _})),n.d(t,"l",(function(){return w})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return N})),n.d(t,"e",(function(){return Q})),n.d(t,"k",(function(){return oe}));var r=n(25),a=n.n(r),i=n(2),o=n(0),s=n(57),l=n(80),c=n(60),u=n(79);let d,p;!function(e){e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance"}(d||(d={})),function(e){e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn"}(p||(p={}));var f=n(49);new Set([s.a.UNSIGNED_LONG,s.a.LONG,s.a.INTEGER,s.a.SHORT,s.a.BYTE]),new Set([s.a.DOUBLE,s.a.FLOAT,s.a.HALF_FLOAT,s.a.SCALED_FLOAT]);var g=n(106);let m;!function(e){e[e.UNUSED=0]="UNUSED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(m||(m={}));const b={border:"all",fontSize:"s",cellPadding:"s",stripes:!1,rowHover:"none",header:"shade"},h={showColumnSelector:!0,showDisplaySelector:!1,showSortSelector:!0,showFullScreenSelector:!1},j=e=>{const t=e.fields.map((e=>e.name));return t.filter((n=>{if(e.metaFields.includes(n))return!1;const r=n.split(".");return"keyword"!==r.pop()||!t.includes(r.join("."))}))},v="non-aggregatable",O=e=>{let t;switch(e){case s.a.GEO_POINT:case s.a.GEO_SHAPE:t="json";break;case s.a.BOOLEAN:t="boolean";break;case s.a.DATE:case s.a.DATE_NANOS:t="datetime";break;case s.a.BYTE:case s.a.DOUBLE:case s.a.FLOAT:case s.a.HALF_FLOAT:case s.a.INTEGER:case s.a.LONG:case s.a.SCALED_FLOAT:case s.a.SHORT:case"number":t="numeric";case s.a.KEYWORD:case s.a.VERSION:case s.a.TEXT:}return t},y=e=>{var t;let n;if(e){switch(e.type){case s.b.BOOLEAN:n="boolean";break;case s.b.DATE:n="datetime";break;case s.b.GEO_POINT:case s.b.GEO_SHAPE:n="json";break;case s.b.NUMBER:n="numeric";break;case s.b.NESTED:n="json"}return void 0===n&&!1===e.aggregatable||Object(c.c)(e)||"numeric"===n&&null!=e&&null!==(t=e.esTypes)&&void 0!==t&&t.some((e=>e===s.a.AGGREGATE_METRIC_DOUBLE))?v:n}},x=(e,t)=>t?"true"===e:e,w=(e,t,n,r,o)=>Object(i.useMemo)((()=>({rowIndex:i,columnId:c,setCellProps:d})=>{const p=i-t.pageIndex*t.pageSize,f=n[p];if(void 0===f)return null;if(void 0===e)return null;const g=e.fields.getByName(c);let m;void 0!==g&&(m=e.getFormatterForField(g));const b=function(e){if(n.hasOwnProperty(p)){const t=n[p];return t.hasOwnProperty(e)?t[e]:e===`${r}.feature_importance`?((e,t,n=!1)=>{const r=e[`${t}.feature_importance`];return void 0===r?[]:r.map((e=>({feature_name:Array.isArray(e.feature_name)?e.feature_name[0]:e.feature_name,classes:Array.isArray(e.classes)?e.classes.map((e=>{const t=C(e);return{importance:t.importance,class_name:x(t.class_name,n)}})):e.classes,importance:Array.isArray(e.importance)?e.importance[0]:e.importance})))})(f,null!=r?r:"ml"):e===`${r}.top_classes`?((e,t)=>{const n=e[`${t}.top_classes`];return void 0===n?[]:n.map((e=>C(e)))})(f,null!=r?r:"ml"):Object(l.a)(n[p],e,null)}return null}(c);return"function"==typeof o&&o(c,b,f,d),"object"==typeof b&&null!==b?JSON.stringify(b):null==b?null:void 0!==m?m.convert(b,"text"):"string"==typeof b||null===b?b:(null==g?void 0:g.type)===s.b.DATE?Object(u.a)(1e3*a()(b).unix()):"boolean"==typeof b?b?"true":"false":b}),[null==e?void 0:e.fields,t.pageIndex,t.pageSize,n]),E=(e,t)=>{var n;if(Object(f.a)(e,[t]))return null!==(n=Object(l.a)(e,t,null))&&void 0!==n?n:e[t]},S=e=>{const t=(n,r,a=0)=>{const i=e[a];let o=E(n,i.id),s=E(r,i.id);if("number"===i.type){var l,c;if(o=null!==(l=o)&&void 0!==l?l:0,s=null!==(c=s)&&void 0!==c?c:0,o<s)return"asc"===i.direction?-1:1;if(o>s)return"asc"===i.direction?1:-1}if("string"===i.type){var u,d;if(o=null!==(u=o)&&void 0!==u?u:"",s=null!==(d=s)&&void 0!==d?d:"",-1===o.localeCompare(s))return"asc"===i.direction?-1:1;if(1===o.localeCompare(s))return"asc"===i.direction?1:-1}return a+1<e.length?t(n,r,a+1):0};return t},_=(e,t)=>{t.addDanger(o.i18n.translate("xpack.ml.dataGrid.columnChart.ErrorMessageToast",{defaultMessage:"An error occurred fetching the histogram charts data: {error}",values:{error:Object(g.a)(e)}}))},C=(e,t)=>{const n={...e};for(const e of Object.keys(n))void 0===t?Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]):!1===t(e)&&Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]);return n};var T=n(20),A=n(17),k=n(18),R=n(19);const M={name:"2kmeas",styles:".euiDataGridRowCell--boolean{text-transform:none;}.euiDataGridHeaderCell{.euiDataGridHeaderCell__sortingArrow,.euiDataGridHeaderCell__icon,.euiPopover{margin-top:auto;}}"},F=({title:e})=>Object(A.jsx)(k.EuiTitle,{size:"xs"},Object(A.jsx)("span",null,e));function I(e){return Object(f.a)(e,["title"])&&"string"==typeof e.title&&""!==e.title}const N=Object(i.memo)((e=>{const{chartsVisible:t,chartsButtonVisible:n,ccsWarning:r,columnsWithCharts:a,dataTestSubj:s,errorMessage:l,invalidSortingColumnns:u,noDataMessage:d,onChangeItemsPerPage:p,onChangePage:g,onSort:j,pagination:v,setVisibleColumns:O,renderCellPopover:y,renderCellValue:x,rowCount:w,sortingColumns:E,status:S,tableItems:_,toastNotifications:C,toggleChartVisibility:T,visibleColumns:N,trailingControlColumns:L}=e;Object(i.useEffect)((()=>{u.length>0&&u.forEach((e=>{C.addDanger(o.i18n.translate("xpack.ml.dataGrid.invalidSortingColumnError",{defaultMessage:"The column '{columnId}' cannot be used for sorting.",values:{columnId:e}}))}))}),[u,C]);const D=Object(i.useRef)(null);if(S===m.LOADED&&0===_.length)return Object(A.jsx)("div",{"data-test-subj":`${s} empty`},I(e)&&Object(A.jsx)(F,{title:e.title}),Object(A.jsx)(k.EuiCallOut,{title:o.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutTitle",{defaultMessage:"Empty index query result."}),color:"primary"},Object(A.jsx)("p",null,o.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutBody",{defaultMessage:"The query for the index returned no results. Please make sure you have sufficient permissions, the index contains documents and your query is not too restrictive."}))));if(""!==d)return Object(A.jsx)("div",{"data-test-subj":`${s} empty`},I(e)&&Object(A.jsx)(F,{title:e.title}),Object(A.jsx)(k.EuiCallOut,{title:o.i18n.translate("xpack.ml.dataGrid.dataGridNoDataCalloutTitle",{defaultMessage:"Index preview not available"}),color:"primary"},Object(A.jsx)("p",null,d)));let P;return S===m.ERROR&&(P=l&&!l.includes("failed to create query")?Object(A.jsx)(k.EuiCallOut,{title:o.i18n.translate("xpack.ml.dataframe.analytics.exploration.querySyntaxError",{defaultMessage:"An error occurred loading the index data. Please ensure your query syntax is valid."}),color:"danger",iconType:"cross"},Object(A.jsx)("p",null,l)):Object(A.jsx)(k.EuiCallOut,{title:o.i18n.translate("xpack.ml.dataGrid.indexDataError",{defaultMessage:"An error occurred loading the index data."}),color:"danger",iconType:"cross"},Object(A.jsx)(k.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:!0},l))),Object(A.jsx)("div",{"data-test-subj":`${s} ${S===m.ERROR?"error":"loaded"}`,ref:D},I(e)&&Object(A.jsx)(k.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(A.jsx)(k.EuiFlexItem,null,Object(A.jsx)(F,{title:e.title})),e.copyToClipboard&&e.copyToClipboardDescription&&Object(A.jsx)(k.EuiFlexItem,{grow:!1},Object(A.jsx)(k.EuiCopy,{beforeMessage:e.copyToClipboardDescription,textToCopy:e.copyToClipboard},(t=>Object(A.jsx)(k.EuiButtonIcon,{onClick:t,iconType:"copyClipboard","aria-label":e.copyToClipboardDescription}))))),void 0!==P&&Object(A.jsx)("div",{"data-test-subj":`${s} error`},P,Object(A.jsx)(k.EuiSpacer,{size:"m"})),r&&Object(A.jsx)("div",{"data-test-subj":`${s} ccsWarning`},Object(A.jsx)(k.EuiCallOut,{title:o.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutTitle",{defaultMessage:"Cross-cluster search returned no fields data."}),color:"warning"},Object(A.jsx)("p",null,o.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutBody",{defaultMessage:"There was an issue retrieving data for the data view. Source preview in combination with cross-cluster search is only supported for versions 7.10 and above. You may still configure and create the transform."}))),Object(A.jsx)(k.EuiSpacer,{size:"m"})),w>0&&Object(A.jsx)(k.EuiMutationObserver,{observerOptions:{subtree:!0,attributes:!0,childList:!0},onMutation:()=>{if(null!==D.current){const e=D.current.querySelectorAll(".euiDataGrid__virtualized");for(const t of Array.from(e))Object(f.a)(t)&&Object(f.a)(t.style)&&"auto"!==t.style.height&&(t.style.height="auto")}}},(r=>Object(A.jsx)("div",{css:M,ref:r},Object(A.jsx)(k.EuiDataGrid,{"aria-label":I(e)?e.title:"",columns:a.map((e=>(e.initialWidth=165,e))),columnVisibility:{visibleColumns:N,setVisibleColumns:O},trailingControlColumns:L,gridStyle:b,rowCount:w,renderCellValue:x,renderCellPopover:y,sorting:{columns:E,onSort:j},toolbarVisibility:{...h,...n?{additionalControls:Object(A.jsx)(k.EuiToolTip,{content:o.i18n.translate("xpack.ml.dataGrid.histogramButtonToolTipContent",{defaultMessage:"Queries run to fetch histogram chart data will use a sample size per shard of {samplerShardSize} documents.",values:{samplerShardSize:c.a}})},Object(A.jsx)(k.EuiButtonEmpty,{"aria-pressed":!0===t,className:"euiDataGrid__controlBtn"+(!0===t?" euiDataGrid__controlBtn--active":""),"data-test-subj":`${s}HistogramButton`,size:"xs",iconType:"visBarVertical",color:"text",onClick:T,disabled:void 0===t},Object(A.jsx)(R.FormattedMessage,{id:"xpack.ml.dataGrid.histogramButtonText",defaultMessage:"Histogram charts"})))}:{}},pagination:{...v,pageSizeOptions:[5,10,25],onChangeItemsPerPage:p,onChangePage:g}})))))}),((e,t)=>Object(T.isEqual)(L(e),L(t))));function L(e){return[e.columnsWithCharts,e.dataTestSubj,e.errorMessage,e.invalidSortingColumnns,e.noDataMessage,e.pagination,e.rowCount,e.sortingColumns,e.status,e.tableItems,e.visibleColumns,...I(e)?[e.copyToClipboard,e.copyToClipboardDescription,e.title]:[]]}const D=e=>Object(f.a)(e,["data","id","interval","stats","type"])&&"numeric"===e.type,P=e=>Object(f.a)(e,["data","cardinality","id","type"])&&("ordinal"===e.type||"boolean"===e.type);var B=n(36),q=n.n(B),z=n(22),G=n(71),V=n.n(G),U=n(31);const $=Object(A.css)({width:"100%",minWidth:`calc(${U.euiThemeVars.euiSize} * 7)`},"",""),H={name:"1azakc",styles:"text-align:center"},W=new z.BehaviorSubject(null),J=Object(k.euiPaletteColorBlind)()[0],K=Object(k.euiPaletteColorBlind)({rotations:2})[10],Q=e=>{if(e===v)return;let t;switch(e){case"datetime":t=s.b.DATE;break;case"numeric":t=s.b.NUMBER;break;case"boolean":t=s.b.BOOLEAN;break;case"json":t=s.b.OBJECT;break;default:t=s.b.STRING}return t},X=(e,t=20)=>{if("unsupported"===e.type)return o.i18n.translate("xpack.ml.dataGridChart.histogramNotAvailable",{defaultMessage:"Chart not supported."});if(0===e.data.length)return o.i18n.translate("xpack.ml.dataGridChart.notEnoughData",{defaultMessage:"0 documents contain field."});if("boolean"===e.type)return Object(A.jsx)("table",{css:$},Object(A.jsx)("tbody",null,Object(A.jsx)("tr",null,void 0!==e.data[0]&&Object(A.jsx)("td",{css:H},e.data[0].key_as_string),void 0!==e.data[1]&&Object(A.jsx)("td",{css:H},e.data[1].key_as_string))));if(P(e)&&e.cardinality<=t)return o.i18n.translate("xpack.ml.dataGridChart.singleCategoryLegend",{defaultMessage:"{cardinality, plural, one {# category} other {# categories}}",values:{cardinality:e.cardinality}});if(P(e)&&e.cardinality>t)return o.i18n.translate("xpack.ml.dataGridChart.topCategoriesLegend",{defaultMessage:"top {maxChartColumns} of {cardinality} categories",values:{cardinality:e.cardinality,maxChartColumns:t}});if(D(e)){const t=Math.round(100*e.stats[0])/100,n=Math.round(100*e.stats[1])/100;return t!==n?`${t} - ${n}`:""+t}return""};var Y=n(68),Z=n(44);const ee=Object(A.css)({width:"100%",height:`calc(${U.euiThemeVars.euiSizeXL} + ${U.euiThemeVars.euiSizeXXL})`},"",""),te=Object(A.css)([Object(A.css)(Object(k.euiTextTruncate)(),";",""),{color:U.euiThemeVars.euiColorMediumShade,display:"block",overflowX:"hidden",margin:`${U.euiThemeVars.euiSizeXS} 0 0 0`,fontSize:U.euiThemeVars.euiFontSizeXS,fontStyle:"italic",fontWeight:"normal",textAlign:"left"}],"",""),ne=Object(A.css)([te,{textAlign:"right"}],"",""),re={background:{color:"transparent"},chartMargins:{left:0,right:0,top:0,bottom:1},chartPaddings:{left:0,right:0,top:0,bottom:0},scales:{barsPadding:.1}},ae=({chartData:e,columnType:t,dataTestSubj:n,hideLabel:r,maxChartColumns:a})=>{const{data:i,legendText:l}=((e,t,n)=>{const r=Q(t.schema),a=V()(W),i=(e=>{switch(e){case s.b.BOOLEAN:case s.b.IP:case s.b.STRING:return"ordinal";case s.b.DATE:return"time";case s.b.NUMBER:return"linear"}})(r),o=n=>null==a||P(e)&&"ordinal"===i&&a._source[t.id]===n.key||D(e)&&"linear"===i&&a._source[t.id]>=+n.key&&a._source[t.id]<+n.key+e.interval||D(e)&&"time"===i&&1e3*q()(a._source[t.id]).unix()>=+n.key&&1e3*q()(a._source[t.id]).unix()<+n.key+e.interval?J:K;let l=[];return P(e)?l=e.data.map((e=>{var t;return{...e,key_as_string:null!==(t=e.key_as_string)&&void 0!==t?t:e.key,color:o(e)}})):D(e)&&(l=e.data.map((e=>({...e,key_as_string:e.key_as_string||e.key,color:o(e)})))),{data:l,legendText:X(e,n),xScaleType:i}})(e,t,a);return Object(A.jsx)("div",{"data-test-subj":n},(c=e,!(Object(f.a)(c,["type"])&&"unsupported"===c.type)&&i.length>0&&Object(A.jsx)("div",{css:ee,"data-test-subj":`${n}-histogram`},Object(A.jsx)(Z.Chart,null,Object(A.jsx)(Z.Settings,{theme:re,locale:o.i18n.getLocale()}),Object(A.jsx)(Z.BarSeries,{id:"histogram",name:"count",xScaleType:Z.ScaleType.Ordinal,yScaleType:Z.ScaleType.Linear,xAccessor:"key_as_string",yAccessors:["doc_count"],styleAccessor:e=>e.datum.color,data:i})))),Object(A.jsx)("div",{css:"number"===t.schema?ne:te,"data-test-subj":`${n}-legend`},l),!r&&Object(A.jsx)("div",{"data-test-subj":`${n}-id`},t.id));var c},ie={rowCount:0,rowCountRelation:void 0},oe=(e,t=5,n=10,r)=>{const a={pageIndex:0,pageSize:t},[o,s]=Object(i.useState)(!1),[l,c]=Object(i.useState)(""),[u,d]=Object(i.useState)(""),[p,f]=Object(i.useState)(m.UNUSED),[g,b]=Object(i.useState)(ie),[h,j]=Object(i.useState)([]),[v,O]=Object(i.useState)([]),[y,x]=Object(i.useState)(a),[w,E]=Object(i.useState)([]),[S,_]=Object(i.useState)(void 0),{rowCount:C,rowCountRelation:T}=g,k=Object(i.useCallback)((e=>{x((t=>({pageIndex:Math.floor(t.pageSize*t.pageIndex/e),pageSize:e})))}),[]),R=Object(i.useCallback)((e=>x((t=>({...t,pageIndex:e})))),[]),[M,F]=Object(i.useState)([]),I=e.map((e=>e.id)),N=(void 0!==r?I.filter(r):I).splice(0,n);Object(i.useEffect)((()=>{F(N)}),[N.join()]);const[L,D]=Object(i.useState)([]),P=Object(i.useCallback)((t=>{const n=t.reduce(((t,n)=>{const r=e.find((e=>e.id===n.id));return"json"===(null==r?void 0:r.schema)&&t.push(n.id),t}),[]);D(n),0===n.length&&E(t)}),[e]),B=Object(i.useMemo)((()=>e.map(((e,t)=>{const n=h.find((t=>t.id===e.id));return{...e,display:void 0!==n&&!0===S?Object(A.jsx)(ae,{chartData:n,columnType:e,dataTestSubj:`mlDataGridChart-${e.id}`}):void 0}})).sort(((e,t)=>-1===M.indexOf(e.id)&&M.indexOf(t.id)>-1?1:-1===M.indexOf(t.id)&&M.indexOf(e.id)>-1?-1:-1===M.indexOf(e.id)&&-1===M.indexOf(t.id)?e.id.localeCompare(t.id):M.indexOf(e.id)-M.indexOf(t.id)))),[e,h,S,JSON.stringify(M)]);return Object(i.useEffect)((()=>{void 0===S&&C>0&&void 0!==T&&_(C<=1e4&&T!==Y.a.GTE)}),[S,C,T]),{ccsWarning:o,chartsVisible:S,chartsButtonVisible:!0,columnsWithCharts:B,errorMessage:u,invalidSortingColumnns:L,noDataMessage:l,onChangeItemsPerPage:k,onChangePage:R,onSort:P,pagination:y,resetPagination:()=>x(a),rowCount:C,rowCountRelation:T,setColumnCharts:j,setCcsWarning:s,setErrorMessage:d,setNoDataMessage:c,setPagination:x,setRowCountInfo:b,setSortingColumns:E,setStatus:f,setTableItems:O,setVisibleColumns:F,sortingColumns:w,status:p,tableItems:v,toggleChartVisibility:()=>{void 0!==S&&_(!S)},visibleColumns:M}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(20),a=n(49);const i=e=>{const t={term:{_tier:{value:"data_frozen"}}};if(!e)return{bool:{must_not:[t]}};const n=Object(r.cloneDeep)(e);return delete n.match_all,Object(a.a)(n.bool)?Array.isArray(n.bool.must_not)?n.bool.must_not.push(t):(Object(a.a)(n.bool.must_not)&&(n.bool.must_not=[n.bool.must_not,t]),void 0===n.bool.must_not&&(n.bool.must_not=[t])):n.bool={must_not:[t]},n};function o(e,t,n,r){const a=[];return e&&t&&n&&a.push({range:{[e]:{gte:t,lte:n,format:"epoch_millis"}}}),r&&"object"==typeof r&&a.push(r),a}const s={EQ:"eq",GTE:"gte"}},function(e,t,n){e.exports=n(8)(1807)},function(e,t,n){e.exports=n(8)(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),a=n(2),i=r.__importDefault(n(121));t.default=function(e,t){var n=a.useState(t),r=n[0],o=n[1];return i.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),r}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o}));var r=n(20);function a(e){return/^[a-z0-9](?:[a-z0-9_\-\.]*[a-z0-9])?$/g.test(e)}const i={DANGLING_TASK:"dangling_task"},o=e=>{var t;const n=Object(r.cloneDeep)(e);return null===(t=n._meta)||void 0===t||delete t.managed,n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={AVG:"avg",CARDINALITY:"cardinality",MAX:"max",MIN:"min",PERCENTILES:"percentiles",SUM:"sum",VALUE_COUNT:"value_count",FILTER:"filter",TOP_METRICS:"top_metrics",TERMS:"terms"}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(2),a=n.n(r),i=n(18),o=n(0),s=n(48),l=n(105),c=n(111),u=n(103),d=n(17);const p=Object(r.createContext)(void 0),f=Object(r.memo)((({actions:e,state:t})=>{const{ml:{useFieldStatsTrigger:n,FieldStatsInfoButton:f}}=Object(s.a)(),{handleFieldStatsButtonClick:g,closeFlyout:m,renderOption:b,populatedFields:h}=n(),{addAggregation:j,addGroupBy:v,deleteAggregation:O,deleteGroupBy:y,updateAggregation:x,updateGroupBy:w}=e,{aggList:E,aggOptions:S,aggOptionsData:_,groupByList:C,groupByOptions:T,groupByOptionsData:A}=t,k=Object(r.useMemo)((()=>S.map((({label:e,field:t,options:n})=>({isGroupLabelOption:!0,key:t.id,label:Object(d.jsx)(f,{isEmpty:h&&!h.has(t.id),field:t,label:e,onButtonClick:g}),options:null!=n?n:[]})))),[S,f,g,h]);return Object(d.jsx)(p.Provider,{value:{actions:e,state:t}},Object(d.jsx)(i.EuiFormRow,{fullWidth:!0,label:o.i18n.translate("xpack.transform.stepDefineForm.groupByLabel",{defaultMessage:"Group by"})},Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(u.a,{list:C,options:A,onChange:w,deleteHandler:y}),Object(d.jsx)(c.a,{changeHandler:v,options:T,placeholder:o.i18n.translate("xpack.transform.stepDefineForm.groupByPlaceholder",{defaultMessage:"Add a group by field ..."}),testSubj:"transformGroupBySelection",renderOption:b}))),Object(d.jsx)(i.EuiFormRow,{fullWidth:!0,label:o.i18n.translate("xpack.transform.stepDefineForm.aggregationsLabel",{defaultMessage:"Aggregations"})},Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(l.a,{list:E,options:_,onChange:(e,t)=>{x(e,t),m()},deleteHandler:O}),Object(d.jsx)(c.a,{changeHandler:e=>{j(e),m()},options:k,placeholder:o.i18n.translate("xpack.transform.stepDefineForm.aggregationsPlaceholder",{defaultMessage:"Add an aggregation ..."}),testSubj:"transformAggregationSelection"}))))}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return h}));var r=n(2),a=n.n(r),i=n(20),o=n(22),s=n(30),l=n(71),c=n.n(l),u=n(48),d=n(1),p=n(17);const f=({initialAlert:e,ruleParams:t,onCloseFlyout:n,onSave:i})=>{const{triggersActionsUi:o}=Object(u.a)(),s=Object(r.useMemo)((()=>{if(!o)return;const r={onClose:()=>{n()},onSave:async()=>{i&&i()}};return e?o.getEditRuleFlyout({...r,initialRule:{...e,ruleTypeId:e.alertTypeId}}):o.getAddRuleFlyout({...r,consumer:"stackAlerts",canChangeTrigger:!1,ruleTypeId:d.TRANSFORM_RULE_TYPE.TRANSFORM_HEALTH,metadata:{},initialValues:{params:t}})}),[o,e,t,n,i]);return Object(p.jsx)(a.a.Fragment,null,s)},g=Object(i.memoize)((function(){const e=new o.BehaviorSubject({editAlertRule:null,createAlertRule:null});return{editAlertRule$:e.pipe(Object(s.pluck)("editAlertRule")),createAlertRule$:e.pipe(Object(s.pluck)("createAlertRule")),setEditAlertRule:t=>{e.next({createAlertRule:null,editAlertRule:t})},setCreateAlertRule:t=>{e.next({createAlertRule:{includeTransforms:[t]},editAlertRule:null})},hideAlertFlyout:()=>{e.next({createAlertRule:null,editAlertRule:null})}}})),m=Object(r.createContext)(g());function b(){return Object(r.useContext)(m)}const h=()=>{const{editAlertRule$:e,createAlertRule$:t,hideAlertFlyout:n}=b(),r=c()(e),a=c()(t);return r||a?Object(p.jsx)(f,{initialAlert:r,ruleParams:a,onCloseFlyout:n}):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return J})),n.d(t,"b",(function(){return K}));var r=n(2),a=n.n(r),i=n(20),o=n(18),s=n(0),l=n(93),c=n(32),u=n(110),d=n(94),p=n(38),f=n(63),g=n(51),m=n(48),b=n(102),h=n(19),j=n(56),v=n(39),O=n(3),y=n(54),x=n(50),w=n(101),E=n(58),S=n(64),_=n(75),C=n(17);function T(){return{created:!1,started:!1,dataViewId:void 0}}const A=a.a.memo((({createDataView:e,transformConfig:t,transformId:n,onChange:i,overrides:l,timeFieldName:c})=>{var u,d;const p={created:!1,started:!1,dataViewId:void 0,...l},[f,b]=Object(r.useState)(!1),[T,A]=Object(r.useState)(!1),[k,R]=Object(r.useState)(p.created),[M,F]=Object(r.useState)(p.started),[I,N]=Object(r.useState)(!1),[L,D]=Object(r.useState)(p.dataViewId),[P,B]=Object(r.useState)(void 0),[q,z]=Object(r.useState)(),G=Object(m.b)(),{application:V,i18n:U,share:$,theme:H}=Object(m.a)(),W=null!==(u=null===(d=V.capabilities.discover)||void 0===d?void 0:d.show)&&void 0!==u&&u;Object(r.useEffect)((()=>{let e=!1;return i({created:k,started:M,dataViewId:L}),!0===M&&void 0!==L&&W&&(async()=>{const t=$.url.locators.get(v.DISCOVER_APP_LOCATOR);if(!t)return;const n=await t.getUrl({indexPatternId:L});e||z(n)})(),()=>{e=!0}}),[k,M,L]);const J=Object(x.r)(),K=Object(x.a)();function Q(r=!1){A(!0),K({transformId:n,transformConfig:t,createDataView:e,timeFieldName:c},{onError:()=>R(!1),onSuccess:e=>{R(!0),1===e.dataViewsCreated.length&&D(e.dataViewsCreated[0].id),r&&X()},onSettled:()=>A(!1)})}function X(){A(!0),J([{id:n}],{onError:()=>F(!1),onSuccess:e=>{var t;return F(!0===(null===(t=e[n])||void 0===t?void 0:t.success))},onSettled:()=>A(!1)})}const Y=void 0===t.sync;Object(r.useEffect)((()=>{!1===T&&!0===M&&void 0===P&&Y&&B(0)}),[T,M,P,Y]);const Z=Y&&"number"==typeof P&&P<100,ee=!!Z&&O.i,{data:te}=Object(x.k)(n,Z,ee);Object(r.useEffect)((()=>{if(void 0!==te)if(te&&Array.isArray(te.transforms)&&te.transforms.length>0){const e=Object(g.l)({id:n,config:{...t,id:n},stats:te.transforms[0]})||0;B(e)}else G.addDanger({title:s.i18n.translate("xpack.transform.stepCreateForm.progressErrorMessage",{defaultMessage:"An error occurred getting the progress percentage:"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(te)}),{theme:H,i18n:U})})}),[U,te,H,G,t,n]);const ne={height:"90px",maxWidth:"800px"},re={width:"200px"},ae={width:"300px"};return f?Object(C.jsx)(w.b,null):Object(C.jsx)("div",{"data-test-subj":"transformStepCreateForm"},Object(C.jsx)(o.EuiForm,null,!k&&Object(C.jsx)(o.EuiFlexGroup,{alignItems:"center",style:ne},Object(C.jsx)(o.EuiFlexItem,{grow:!1,style:re},Object(C.jsx)(o.EuiButton,{fill:!0,isDisabled:T||k&&M,onClick:()=>Q(!0),"data-test-subj":"transformWizardCreateAndStartButton"},s.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformButton",{defaultMessage:"Create and start"}))),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformDescription",{defaultMessage:"Creates and starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),k&&Object(C.jsx)(o.EuiFlexGroup,{alignItems:"center",style:ne},Object(C.jsx)(o.EuiFlexItem,{grow:!1,style:re},Object(C.jsx)(o.EuiButton,{fill:!0,isDisabled:T||k&&M,onClick:X,"data-test-subj":"transformWizardStartButton"},s.i18n.translate("xpack.transform.stepCreateForm.startTransformButton",{defaultMessage:"Start"}))),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.transform.stepCreateForm.startTransformDescription",{defaultMessage:"Starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),Object(S.a)(t)&&k?Object(C.jsx)(o.EuiFlexGroup,{alignItems:"center",style:ne},Object(C.jsx)(o.EuiFlexItem,{grow:!1,style:re},Object(C.jsx)(o.EuiButton,{fill:!0,isDisabled:T,onClick:N.bind(null,!0),"data-test-subj":"transformWizardCreateAlertButton"},Object(C.jsx)(h.FormattedMessage,{id:"xpack.transform.stepCreateForm.createAlertRuleButton",defaultMessage:"Create alert rule"}))),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.transform.stepCreateForm.createAlertRuleDescription",{defaultMessage:"Opens a wizard to create an alert rule for monitoring transform health."})))):null,Object(C.jsx)(o.EuiFlexGroup,{alignItems:"center",style:ne},Object(C.jsx)(o.EuiFlexItem,{grow:!1,style:re},Object(C.jsx)(o.EuiButton,{isDisabled:T||k,onClick:()=>Q(),"data-test-subj":"transformWizardCreateButton"},s.i18n.translate("xpack.transform.stepCreateForm.createTransformButton",{defaultMessage:"Create"}))),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.transform.stepCreateForm.createTransformDescription",{defaultMessage:"Creates the transform without starting it. You will be able to start the transform later by returning to the transforms list."})))),Object(C.jsx)(o.EuiFlexGroup,{alignItems:"center",style:ne},Object(C.jsx)(o.EuiFlexItem,{grow:!1,style:re},Object(C.jsx)(o.EuiCopy,{textToCopy:`PUT _transform/${n}\n${JSON.stringify(t,null,2)}\n\n`},(e=>Object(C.jsx)(o.EuiButton,{onClick:e,style:{width:"100%"},"data-test-subj":"transformWizardCopyToClipboardButton"},s.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardButton",{defaultMessage:"Copy to clipboard"}))))),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardDescription",{defaultMessage:"Copies to the clipboard the Kibana Dev Console command for creating the transform."})))),void 0!==P&&Y&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiSpacer,{size:"m"}),Object(C.jsx)(o.EuiText,{size:"xs"},Object(C.jsx)("strong",null,s.i18n.translate("xpack.transform.stepCreateForm.progressTitle",{defaultMessage:"Progress"}))),Object(C.jsx)(o.EuiFlexGroup,{gutterSize:"xs"},Object(C.jsx)(o.EuiFlexItem,{style:{width:"400px"},grow:!1},Object(C.jsx)(o.EuiProgress,{size:"l",color:"primary",value:P,max:100,"data-test-subj":"transformWizardProgressBar"})),Object(C.jsx)(o.EuiFlexItem,null,Object(C.jsx)(o.EuiText,{size:"xs"},P,"%")))),k&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiHorizontalRule,null),Object(C.jsx)(o.EuiFlexGroup,{gutterSize:"l"},Object(C.jsx)(o.EuiFlexItem,{style:ae,grow:!1},Object(C.jsx)(o.EuiCard,{icon:Object(C.jsx)(o.EuiIcon,{size:"xxl",type:"list"}),title:s.i18n.translate("xpack.transform.stepCreateForm.transformListCardTitle",{defaultMessage:"Transforms"}),description:s.i18n.translate("xpack.transform.stepCreateForm.transformListCardDescription",{defaultMessage:"Return to the transform management page."}),onClick:()=>b(!0),"data-test-subj":"transformWizardCardManagement"})),!0===M&&!0===e&&void 0===L&&Object(C.jsx)(o.EuiFlexItem,{style:ae,grow:!1},Object(C.jsx)(o.EuiPanel,{style:{position:"relative"}},Object(C.jsx)(o.EuiProgress,{size:"xs",color:"primary",position:"absolute"}),Object(C.jsx)(o.EuiText,{color:"subdued",size:"s"},Object(C.jsx)("p",null,s.i18n.translate("xpack.transform.stepCreateForm.creatingDataViewMessage",{defaultMessage:"Creating Kibana data view ..."}))))),W&&void 0!==q&&Object(C.jsx)(o.EuiFlexItem,{style:ae,grow:!1},Object(C.jsx)(o.EuiCard,{icon:Object(C.jsx)(o.EuiIcon,{size:"xxl",type:"discoverApp"}),title:s.i18n.translate("xpack.transform.stepCreateForm.discoverCardTitle",{defaultMessage:"Discover"}),description:s.i18n.translate("xpack.transform.stepCreateForm.discoverCardDescription",{defaultMessage:"Use Discover to explore the transform."}),href:q,"data-test-subj":"transformWizardCardDiscover"}))))),I?Object(C.jsx)(_.b,{ruleParams:{includeTransforms:[n]},onCloseFlyout:N.bind(null,!1)}):null)})),k=a.a.memo((()=>null));function R(){return{continuousModeDateField:"",continuousModeDelay:O.b,createDataView:!0,isContinuousModeEnabled:!1,isRetentionPolicyEnabled:!1,retentionPolicyDateField:"",retentionPolicyMaxAge:"",transformId:"",transformDescription:"",transformFrequency:O.e,transformSettingsMaxPageSearchSize:O.g,transformSettingsDocsPerSecond:O.f,transformSettingsNumFailureRetries:void 0,destinationIndex:"",destinationIngestPipeline:"",touched:!1,valid:!1,dataViewTimeField:void 0}}var M=n(57);const F=({canCreateDataView:e,createDataView:t,setCreateDataView:n})=>Object(C.jsx)(o.EuiSwitch,{name:"mlCreateDataView",disabled:!1===e,label:s.i18n.translate("xpack.ml.dataViewUtils.createDataViewSwitchLabel",{defaultMessage:"Create data view"}),checked:!0===t,onChange:()=>n(!t),"data-test-subj":"mlCreateDataViewSwitch"}),I=({dataViewAvailableTimeFields:e,dataViewTimeField:t,onTimeFieldChanged:n})=>{const r={text:s.i18n.translate("xpack.ml.dataViewUtils.noTimeFieldOptionLabel",{defaultMessage:"I don't want to use the time field option"}),value:void 0};return Object(C.jsx)(o.EuiFormRow,{label:Object(C.jsx)(h.FormattedMessage,{id:"xpack.ml.dataViewUtils.dataViewTimeFieldLabel",defaultMessage:"Time field for data view"}),helpText:Object(C.jsx)(h.FormattedMessage,{id:"xpack.ml.dataViewUtils.dataViewTimeFieldHelpText",defaultMessage:"Select a primary time field for use with the global time filter."})},Object(C.jsx)(o.EuiSelect,{options:[...e.map((e=>({text:e}))),{disabled:!0,text:"───",value:""},r],value:t,onChange:n,"data-test-subj":"mlDataViewTimeFieldSelect"}))},N=({canCreateDataView:e,createDataView:t,dataViewTitleExists:n,setCreateDataView:r,dataViewAvailableTimeFields:i,dataViewTimeField:l,onTimeFieldChanged:c})=>Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiFormRow,{isInvalid:t&&n||!1===e,error:[...!1===e?[Object(C.jsx)(o.EuiText,{size:"xs",color:"warning"},s.i18n.translate("xpack.ml.dataViewUtils.dataViewPermissionWarning",{defaultMessage:"You need permission to create data views."}))]:[],...t&&n?[s.i18n.translate("xpack.ml.dataViewUtils.dataViewTitleError",{defaultMessage:"A data view with this title already exists."})]:[]]},Object(C.jsx)(F,{canCreateDataView:e,createDataView:t,setCreateDataView:r})),t&&!n&&i.length>0&&Object(C.jsx)(I,{dataViewAvailableTimeFields:i,dataViewTimeField:l,onTimeFieldChanged:c})),L=({destIndexSameAsId:e,isJobCreated:t,setDestIndexSameAsId:n,label:r})=>Object(C.jsx)(o.EuiSwitch,{disabled:t,name:"mlCreationWizardUtilsJobIdAsDestIndexName",label:r,checked:!0===e,onChange:()=>n(!e),"data-test-subj":"mlCreationWizardUtilsJobIdAsDestIndexNameSwitch"}),D=({createIndexLink:e,destinationIndex:t,destinationIndexNameEmpty:n,destinationIndexNameExists:r,destinationIndexNameValid:i,destIndexSameAsId:l,fullWidth:c=!0,indexNameExistsMessage:u,isJobCreated:d,onDestinationIndexChange:p,setDestIndexSameAsId:f,switchLabel:g})=>Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiFormRow,{fullWidth:c,helpText:!0===l&&r&&u},Object(C.jsx)(L,{destIndexSameAsId:l,isJobCreated:d,setDestIndexSameAsId:f,label:g})),!1===l&&Object(C.jsx)(o.EuiFormRow,{fullWidth:c,label:s.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexLabel",{defaultMessage:"Destination index"}),isInvalid:n||!n&&!i,helpText:r&&u,error:!n&&!i&&[Object(C.jsx)(a.a.Fragment,null,s.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInvalidError",{defaultMessage:"Invalid destination index name."}),Object(C.jsx)("br",null),Object(C.jsx)(o.EuiLink,{href:e,target:"_blank"},s.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInvalidErrorLink",{defaultMessage:"Learn more about index name limitations."})))]},Object(C.jsx)(o.EuiFieldText,{fullWidth:c,disabled:d,placeholder:"destination index",value:t,onChange:e=>p(e.target.value),"aria-label":s.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInputAriaLabel",{defaultMessage:"Choose a unique destination index name."}),isInvalid:!n&&!i,"data-test-subj":"mlCreationWizardUtilsDestinationIndexInput"})));var P=n(86);const B=window;var q=n(85);const z=a.a.memo((({overrides:e={},onChange:t,searchItems:n,stepDefineState:i})=>{var l,c,u;const{application:d,i18n:p,theme:f}=Object(m.a)(),{capabilities:b}=d,v=Object(m.b)(),{esIndicesCreateIndex:w}=Object(x.d)(),S={...R(),...e},[_,T]=Object(r.useState)(S.transformId),[A,k]=Object(r.useState)(S.transformDescription),[F,I]=Object(r.useState)(S.destinationIndex),[L,z]=Object(r.useState)(void 0!==F&&F===_),[G,V]=Object(r.useState)(S.destinationIngestPipeline),U=Object(r.useMemo)((()=>{var e,t;return!0===(null===(e=b.savedObjectsManagement)||void 0===e?void 0:e.edit)||!0===(null===(t=b.indexPatterns)||void 0===t?void 0:t.save)}),[b]),[$,H]=Object(r.useState)(!1!==U&&S.createDataView),[W,J]=Object(r.useState)(),K=Object(r.useMemo)((()=>{const{searchQuery:e,previewRequest:t}=i,r=Object(g.j)(e);return Object(g.h)(n.dataView,r,t,i.runtimeMappings)}),[n.dataView,i]),{error:Q,data:X}=Object(x.m)(K),Y=Object(r.useMemo)((()=>{if(!X)return[];const e=X.generated_dest_index.mappings.properties;return Object.keys(e).filter((t=>"date"===e[t].type))}),[X]);Object(r.useEffect)((function(){J(Y[0])}),[Y]);const Z=a.a.useCallback((e=>{const t=e.target.value;if(""===t)return;const n=Y.find((e=>e===t));J(n)}),[J,Y]),{error:ee,data:{transformIds:te}}=Object(x.l)();Object(r.useEffect)((()=>{null!==ee&&v.addDanger({title:s.i18n.translate("xpack.transform.stepDetailsForm.errorGettingTransformList",{defaultMessage:"An error occurred getting the existing transform IDs:"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(ee)}),{theme:f,i18n:p})})}),[ee]),Object(r.useEffect)((()=>{null!==Q&&v.addDanger({title:s.i18n.translate("xpack.transform.stepDetailsForm.errorGettingTransformPreview",{defaultMessage:"An error occurred fetching the transform preview"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(Q)}),{theme:f,i18n:p})})}),[Q]);const{error:ne,data:re}=Object(x.f)(),ae=null!==(l=null==re?void 0:re.map((e=>e.name)))&&void 0!==l?l:[];Object(r.useEffect)((()=>{null!==ne&&v.addDanger({title:s.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIndexNames",{defaultMessage:"An error occurred getting the existing index names:"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(ne)}),{theme:f,i18n:p})})}),[ne]);const{error:ie,data:oe}=Object(x.g)(),se=null!==(c=null==oe?void 0:oe.map((({name:e})=>e)))&&void 0!==c?c:[];Object(r.useEffect)((()=>{null!==ie&&v.addDanger({title:s.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIngestPipelines",{defaultMessage:"An error occurred getting the existing ingest pipeline names:"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(ie)}),{theme:f,i18n:p})})}),[ie]);const{error:le,data:ce}=Object(x.e)();Object(r.useEffect)((()=>{null!==le&&v.addDanger({title:s.i18n.translate("xpack.transform.stepDetailsForm.errorGettingDataViewTitles",{defaultMessage:"An error occurred getting the existing data view titles:"}),text:Object(j.a)(Object(C.jsx)(E.a,{text:Object(y.a)(le)}),{theme:f,i18n:p})})}),[le]);const ue=n.dataView.fields.filter((e=>e.type===M.b.DATE)).map((e=>e.name)).sort(),de=ue.length>0,[pe,fe]=Object(r.useState)(S.isContinuousModeEnabled),[ge,me]=Object(r.useState)(de?ue[0]:""),[be,he]=Object(r.useState)(S.continuousModeDelay),je=Object(q.a)(be),ve=Y.length>0,[Oe,ye]=Object(r.useState)(S.isRetentionPolicyEnabled),[xe,we]=Object(r.useState)(ve?S.retentionPolicyDateField:""),[Ee,Se]=Object(r.useState)(S.retentionPolicyMaxAge),_e=""===Ee,Ce=Object(q.f)(Ee);Object(r.useEffect)((()=>{if(Oe||(we(ve?Y[0]:""),Se("")),ve&&Oe&&""===xe){const e=Y.find((e=>"@timestamp"===e));we(null!=e?e:Y[0])}}),[Oe,ve,Y]);const Te=te.some((e=>_===e)),Ae=""===_,ke=Object(g.w)(_),Re=ae.some((e=>F===e)),Me=""===F,Fe=(We=F)===We.toLowerCase()&&/^[^\*\\/\?"<>|\s,#:]+$/.test(We)&&/^[^-_\+]+$/.test(We.charAt(0))&&"."!==We&&".."!==We&&function(e){return!(B.TextEncoder&&new B.TextEncoder("utf-8").encode(e).length>255)&&e.length<=255}(We),Ie=null!==(u=null==ce?void 0:ce.some((e=>F===e)))&&void 0!==u&&u,[Ne,Le]=Object(r.useState)(S.transformFrequency),De=Object(q.g)(Ne),[Pe,Be]=Object(r.useState)(S.transformSettingsMaxPageSearchSize),[qe]=Object(r.useState)(S.transformSettingsDocsPerSecond),ze=Object(q.i)(Pe),Ge=0===ze.length,[Ve,Ue]=Object(r.useState)(S.transformSettingsNumFailureRetries),$e=void 0===Ve||"-"===Ve||0===Object(q.b)(Ve).length,He=!Ae&&ke&&!Te&&De&&Ge&&!Me&&Fe&&(!Ie||!$)&&(!de||de&&je)&&(!ve||!Oe||ve&&Oe&&!_e&&Ce);var We;return Object(r.useEffect)((()=>{t({continuousModeDateField:ge,continuousModeDelay:be,createDataView:$,isContinuousModeEnabled:pe,isRetentionPolicyEnabled:Oe,retentionPolicyDateField:xe,retentionPolicyMaxAge:Ee,transformId:_,transformDescription:A,transformFrequency:Ne,transformSettingsMaxPageSearchSize:Pe,transformSettingsDocsPerSecond:qe,transformSettingsNumFailureRetries:void 0===Ve||""===Ve?void 0:"number"==typeof Ve?Ve:parseInt(Ve,10),destinationIndex:F,destinationIngestPipeline:G,touched:!0,valid:He,dataViewTimeField:W,_meta:S._meta})}),[ge,be,$,pe,Oe,xe,Ee,_,A,Ne,Pe,Ve,F,G,He,W]),Object(r.useEffect)((()=>{!0===L&&!Ae&&ke&&I(_)}),[L,_]),Object(C.jsx)("div",{"data-test-subj":"transformStepDetailsForm"},Object(C.jsx)(o.EuiForm,null,Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.transformIdLabel",{defaultMessage:"Transform ID"}),isInvalid:!Ae&&!ke||Te,error:[...Ae||ke?[]:[s.i18n.translate("xpack.transform.stepDetailsForm.transformIdInvalidError",{defaultMessage:"Must contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores only and must start and end with alphanumeric characters."})],...Te?[s.i18n.translate("xpack.transform.stepDetailsForm.transformIdExistsError",{defaultMessage:"A transform with this ID already exists."})]:[]]},Object(C.jsx)(o.EuiFieldText,{value:_,onChange:e=>T(e.target.value),"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.transformIdInputAriaLabel",{defaultMessage:"Choose a unique transform ID."}),isInvalid:!Ae&&!ke||Te,"data-test-subj":"transformIdInput"})),Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionLabel",{defaultMessage:"Transform description"})},Object(C.jsx)(o.EuiTextArea,{placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionPlaceholderText",{defaultMessage:"Description (optional)"}),value:A,onChange:e=>k(e.target.value),"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionInputAriaLabel",{defaultMessage:"Choose an optional transform description."}),"data-test-subj":"transformDescriptionInput"})),Object(C.jsx)(D,{createIndexLink:w,destinationIndex:F,destinationIndexNameEmpty:Me,destinationIndexNameExists:Re,destinationIndexNameValid:Fe,destIndexSameAsId:L,fullWidth:!1,indexNameExistsMessage:s.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexHelpText",{defaultMessage:"An index with this name already exists. Be aware that running this transform will modify this destination index."}),isJobCreated:Te,onDestinationIndexChange:I,setDestIndexSameAsId:z,switchLabel:s.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexFormSwitchLabel",{defaultMessage:"Use transform ID as destination index name"})}),se.length>0&&Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineLabel",{defaultMessage:"Destination ingest pipeline"})},Object(C.jsx)(o.EuiComboBox,{"data-test-subj":"transformDestinationPipelineSelect","aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineAriaLabel",{defaultMessage:"Select an ingest pipeline (optional)"}),placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineComboBoxPlaceholder",{defaultMessage:"Select an ingest pipeline (optional)"}),singleSelection:{asPlainText:!0},options:se.map((e=>({label:e}))),selectedOptions:""!==G?[{label:G}]:[],onChange:e=>{var t,n;return V(null!==(t=null===(n=e[0])||void 0===n?void 0:n.label)&&void 0!==t?t:"")}})),i.transformFunction===O.k.LATEST?Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiSpacer,{size:"m"}),Object(C.jsx)(o.EuiCallOut,{color:"warning",iconType:"warning",size:"m"},Object(C.jsx)("p",null,Object(C.jsx)(h.FormattedMessage,{id:"xpack.transform.stepDetailsForm.destinationIndexWarning",defaultMessage:"Before you start the transform, use index templates or the {docsLink} to ensure the mappings for your destination index match the source index. Otherwise, the destination index is created with dynamic mappings. If the transform fails, check the messages tab on the Stack Management page for errors.",values:{docsLink:Object(C.jsx)(o.EuiLink,{href:w,target:"_blank"},s.i18n.translate("xpack.transform.stepDetailsForm.createIndexAPI",{defaultMessage:"Create index API"}))}}))),Object(C.jsx)(o.EuiSpacer,{size:"m"})):null,Object(C.jsx)(N,{canCreateDataView:U,createDataView:$,dataViewTitleExists:Ie,setCreateDataView:H,dataViewAvailableTimeFields:Y,dataViewTimeField:W,onTimeFieldChanged:Z}),Object(C.jsx)(o.EuiFormRow,{helpText:!1===de?s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeError",{defaultMessage:"Continuous mode is not available for indices without date fields."}):""},Object(C.jsx)(o.EuiSwitch,{name:"transformContinuousMode",label:s.i18n.translate("xpack.transform.stepCreateForm.continuousModeLabel",{defaultMessage:"Continuous mode"}),checked:!0===pe,onChange:()=>fe(!pe),disabled:!1===de,"data-test-subj":"transformContinuousModeSwitch"})),pe&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldLabel",{defaultMessage:"Date field for continuous mode"}),helpText:s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify new documents."})},Object(C.jsx)(o.EuiSelect,{options:ue.map((e=>({text:e,value:e}))),value:ge,onChange:e=>me(e.target.value),"data-test-subj":"transformContinuousDateFieldSelect"})),Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayLabel",{defaultMessage:"Delay"}),isInvalid:!je,error:!je&&[s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayError",{defaultMessage:"Invalid delay format"})],helpText:s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayHelpText",{defaultMessage:"Time delay between current time and latest input data time."})},Object(C.jsx)(o.EuiFieldText,{placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayPlaceholderText",{defaultMessage:"delay e.g. {exampleValue}",values:{exampleValue:"60s"}}),value:be,onChange:e=>he(e.target.value),"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.continuousModeAriaLabel",{defaultMessage:"Choose a delay."}),isInvalid:!je,"data-test-subj":"transformContinuousDelayInput"}))),Object(C.jsx)(o.EuiFormRow,{helpText:!1===ve?s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyError",{defaultMessage:"Retention policy settings are not available for indices without date fields."}):""},Object(C.jsx)(o.EuiSwitch,{name:"transformRetentionPolicy",label:s.i18n.translate("xpack.transform.stepCreateForm.retentionPolicyLabel",{defaultMessage:"Retention policy"}),checked:!0===Oe,onChange:()=>ye(!Oe),disabled:!1===ve,"data-test-subj":"transformRetentionPolicySwitch"})),Oe&&ve&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyDateFieldLabel",{defaultMessage:"Date field for retention policy"}),helpText:s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify out of date documents in the destination index."})},Object(C.jsx)(o.EuiSelect,{options:Y.map((e=>({text:e}))),value:xe,onChange:e=>we(e.target.value),"data-test-subj":"transformRetentionPolicyDateFieldSelect"})),Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeLabel",{defaultMessage:"Max age"}),isInvalid:!_e&&!Ce,error:!_e&&!Ce&&[P.e],helpText:s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeHelpText",{defaultMessage:"Documents that are older than the configured value will be removed from the destination index."})},Object(C.jsx)(o.EuiFieldText,{placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgePlaceholderText",{defaultMessage:"max_age e.g. {exampleValue}",values:{exampleValue:"7d"}}),value:Ee,onChange:e=>Se(e.target.value),"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeAriaLabel",{defaultMessage:"Choose a max age."}),isInvalid:!_e&&!Ce,"data-test-subj":"transformRetentionPolicyMaxAgeInput"}))),Object(C.jsx)(o.EuiSpacer,{size:"l"}),Object(C.jsx)(o.EuiAccordion,{"data-test-subj":"transformWizardAccordionAdvancedSettings",id:"transformWizardAccordionAdvancedSettings",buttonContent:s.i18n.translate("xpack.transform.stepDetailsForm.advancedSettingsAccordionButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.frequencyLabel",{defaultMessage:"Frequency"}),isInvalid:!De,error:!De&&[s.i18n.translate("xpack.transform.stepDetailsForm.frequencyError",{defaultMessage:"Invalid frequency format"})],helpText:s.i18n.translate("xpack.transform.stepDetailsForm.frequencyHelpText",{defaultMessage:"The interval to check for changes in source indices when the transform runs continuously."})},Object(C.jsx)(o.EuiFieldText,{placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormFrequencyPlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:O.e}}),value:Ne,onChange:e=>Le(e.target.value),"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.frequencyAriaLabel",{defaultMessage:"Choose a frequency."}),isInvalid:!De,"data-test-subj":"transformFrequencyInput"})),Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"}),isInvalid:!Ge,error:ze,helpText:s.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeHelpText",{defaultMessage:"The initial page size to use for the composite aggregation for each checkpoint."})},Object(C.jsx)(o.EuiFieldText,{placeholder:s.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormMaxPageSearchSizePlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:500}}),value:Pe?Pe.toString():Pe,onChange:e=>{if(""!==e.target.value){const t=parseInt(e.target.value,10);Be(isFinite(t)?t:void 0)}else Be(void 0)},"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeAriaLabel",{defaultMessage:"Choose a maximum page search size."}),isInvalid:!De,"data-test-subj":"transformMaxPageSearchSizeInput"})),Object(C.jsx)(o.EuiFormRow,{"data-test-subj":"transformNumFailureRetriesFormRow",label:s.i18n.translate("xpack.transform.stepDetailsForm.transformNumFailureRetriesLabel",{defaultMessage:"Number of failure retries"}),isInvalid:!$e,error:!$e&&[s.i18n.translate("xpack.transform.stepDetailsForm.NumFailureRetriesError",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."})],helpText:s.i18n.translate("xpack.transform.stepDetailsForm.transformNumRetriesHelpText",{defaultMessage:"The number of retries on a recoverable failure before the transform task is marked as failed. Set it to -1 for infinite retries."})},Object(C.jsx)(o.EuiFieldText,{value:Ve||void 0!==Ve&&Ve>=-1?Ve.toString():"",onChange:e=>{""!==e.target.value?Ue("-"===e.target.value?"-":parseInt(e.target.value,10)):Ue(void 0)},"aria-label":s.i18n.translate("xpack.transform.stepDetailsForm.numFailureRetriesAriaLabel",{defaultMessage:"Choose a maximum number of retries."}),isInvalid:!$e,"data-test-subj":"transformNumFailureRetriesInput"})))))})),G=a.a.memo((e=>{const{continuousModeDateField:t,createDataView:n,isContinuousModeEnabled:r,isRetentionPolicyEnabled:i,retentionPolicyDateField:l,retentionPolicyMaxAge:c,transformId:u,transformDescription:d,transformFrequency:p,transformSettingsMaxPageSearchSize:f,transformSettingsNumFailureRetries:g,destinationIndex:m,destinationIngestPipeline:b,touched:h,dataViewTimeField:j}=e;if(!1===h)return null;const v=n?s.i18n.translate("xpack.transform.stepDetailsSummary.createDataViewMessage",{defaultMessage:"A Kibana data view will be created for this transform."}):"";return Object(C.jsx)("div",{"data-test-subj":"transformStepDetailsSummary"},Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.transformIdLabel",{defaultMessage:"Transform ID"})},Object(C.jsx)("span",null,u)),""!==d&&Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.transformDescriptionLabel",{defaultMessage:"Transform description"})},Object(C.jsx)("span",null,d)),Object(C.jsx)(o.EuiFormRow,{helpText:v,label:s.i18n.translate("xpack.transform.stepDetailsSummary.destinationIndexLabel",{defaultMessage:"Destination index"})},Object(C.jsx)("span",null,m)),n&&void 0!==j&&""!==j&&Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.dataViewTimeFieldLabel",{defaultMessage:"Kibana data view time field"})},Object(C.jsx)("span",null,j)),void 0!==b&&""!==b&&Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.destinationIngestPipelineLabel",{defaultMessage:"Destination ingest pipeline"})},Object(C.jsx)("span",null,b)),r&&Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.continuousModeDateFieldLabel",{defaultMessage:"Continuous mode date field"})},Object(C.jsx)("span",null,t)),i&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.retentionPolicyDateFieldLabel",{defaultMessage:"Retention policy date field"})},Object(C.jsx)("span",null,l)),Object(C.jsx)(o.EuiFormRow,{label:s.i18n.translate("xpack.transform.stepDetailsSummary.retentionPolicyMaxAgeLabel",{defaultMessage:"Retention policy max age"})},Object(C.jsx)("span",null,c))),Object(C.jsx)(o.EuiSpacer,{size:"l"}),Object(C.jsx)(o.EuiAccordion,{"data-test-subj":"transformWizardAccordionAdvancedSettingsSummary",id:"transformWizardAccordionAdvancedSettingsSummary",buttonContent:s.i18n.translate("xpack.transform.stepDetailsSummary.advancedSettingsAccordionButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(C.jsx)(o.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsFrequencyLabel",label:s.i18n.translate("xpack.transform.stepDetailsSummary.frequencyLabel",{defaultMessage:"Frequency"})},Object(C.jsx)("span",null,p)),Object(C.jsx)(o.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsMaxPageSearchSizeLabel",label:s.i18n.translate("xpack.transform.stepDetailsSummary.maxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"})},Object(C.jsx)("span",null,f)),"number"==typeof g?Object(C.jsx)(o.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsNumFailureRetriesLabel",label:s.i18n.translate("xpack.transform.stepDetailsSummary.numFailureRetriesLabel",{defaultMessage:"Number of retries"})},Object(C.jsx)("span",null,g)):null))})),V=({previous:e,previousActive:t=!0,next:n,nextActive:r=!0})=>Object(C.jsx)(o.EuiFlexGroup,null,Object(C.jsx)(o.EuiFlexItem,null),e&&Object(C.jsx)(o.EuiFlexItem,{grow:!1},Object(C.jsx)(o.EuiButton,{disabled:!t,onClick:e,iconType:"arrowLeft",size:"s","data-test-subj":"transformWizardNavButtonPrevious"},s.i18n.translate("xpack.transform.wizard.previousStepButton",{defaultMessage:"Previous"}))),n&&Object(C.jsx)(o.EuiFlexItem,{grow:!1},Object(C.jsx)(o.EuiButton,{disabled:!r,onClick:n,iconType:"arrowRight",size:"s","data-test-subj":"transformWizardNavButtonNext"},s.i18n.translate("xpack.transform.wizard.nextStepButton",{defaultMessage:"Next"})))),U=["transform.frozenDataTierPreference"],$=new c.Storage(window.localStorage);var H;!function(e){e[e.DEFINE=0]="DEFINE",e[e.DETAILS=1]="DETAILS",e[e.CREATE=2]="CREATE"}(H||(H={}));const W=({isCurrentStep:e,stepDefineState:t,setCurrentStep:n,setStepDefineState:i,searchItems:o})=>{const s=Object(r.useRef)(null);return Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)("div",{ref:s}),e&&Object(C.jsx)(a.a.Fragment,null,Object(C.jsx)(b.b,{onChange:i,overrides:{...t},searchItems:o}),Object(C.jsx)(V,{next:()=>n(H.DETAILS),nextActive:t.valid})),!e&&Object(C.jsx)(b.c,{formState:{...t},searchItems:o}))},J=Object(r.createContext)({dataView:null,runtimeMappings:void 0}),K=a.a.memo((({cloneConfig:e,searchItems:t})=>{const{showNodeInfo:n}=Object(f.b)(),c=Object(m.a)(),{ml:{FieldStatsFlyoutProvider:h},uiSettings:j,data:v,fieldFormats:y,charts:x}=c,{dataView:w}=t,[E,S]=Object(r.useState)(H.DEFINE),[_,M]=Object(r.useState)(Object(b.d)(Object(b.f)(t),e,w)),[F,I]=Object(r.useState)(function(e,t){if(void 0!==t){var n,r;const l=null===(n=t.sync)||void 0===n?void 0:n.time;var a;void 0!==l&&(e.continuousModeDateField=l.field,e.continuousModeDelay=null!==(a=null==l?void 0:l.delay)&&void 0!==a?a:O.b,e.isContinuousModeEnabled=!0),void 0!==t.description&&(e.transformDescription=t.description),void 0!==t.dest.pipeline&&(e.destinationIngestPipeline=t.dest.pipeline),void 0!==t.frequency&&(e.transformFrequency=t.frequency);const c=null===(r=t.retention_policy)||void 0===r?void 0:r.time;var i,o,s;void 0!==c&&(e.retentionPolicyDateField=c.field,e.retentionPolicyMaxAge=c.max_age,e.isRetentionPolicyEnabled=!0),t.settings&&("number"==typeof(null===(i=t.settings)||void 0===i?void 0:i.max_page_search_size)&&(e.transformSettingsMaxPageSearchSize=t.settings.max_page_search_size),"number"==typeof(null===(o=t.settings)||void 0===o?void 0:o.docs_per_second)?e.transformSettingsDocsPerSecond=t.settings.docs_per_second:e.transformSettingsDocsPerSecond=null,"number"==typeof(null===(s=t.settings)||void 0===s?void 0:s.num_failure_retries)&&(e.transformSettingsNumFailureRetries=t.settings.num_failure_retries)),t._meta&&(e._meta=t._meta)}return e}(R(),e)),[N,L]=Object(r.useState)(T),D=Object(g.e)(w,_,F),P=[Object(r.useMemo)((()=>({title:s.i18n.translate("xpack.transform.transformsWizard.stepConfigurationTitle",{defaultMessage:"Configuration"}),children:Object(C.jsx)(W,{isCurrentStep:E===H.DEFINE,stepDefineState:_,setCurrentStep:S,setStepDefineState:M,searchItems:t})})),[E,_,S,M,t]),Object(r.useMemo)((()=>({title:s.i18n.translate("xpack.transform.transformsWizard.stepDetailsTitle",{defaultMessage:"Transform details"}),children:Object(C.jsx)(a.a.Fragment,null,E===H.DETAILS?Object(C.jsx)(z,{onChange:I,overrides:F,searchItems:t,stepDefineState:_}):Object(C.jsx)(G,F),E===H.DETAILS&&Object(C.jsx)(V,{previous:()=>{S(H.DEFINE)},next:()=>S(H.CREATE),nextActive:F.valid})),status:E>=H.DETAILS?void 0:"incomplete"})),[E,I,F,t,_]),Object(r.useMemo)((()=>({title:s.i18n.translate("xpack.transform.transformsWizard.stepCreateTitle",{defaultMessage:"Create"}),children:Object(C.jsx)(a.a.Fragment,null,E===H.CREATE?Object(C.jsx)(A,{createDataView:F.createDataView,transformId:F.transformId,transformConfig:D,onChange:L,overrides:N,timeFieldName:F.dataViewTimeField}):Object(C.jsx)(k,null),E===H.CREATE&&!N.created&&Object(C.jsx)(V,{previous:()=>S(H.DETAILS)})),status:E>=H.CREATE?void 0:"incomplete"})),[E,S,F.createDataView,F.transformId,D,L,N,F.dataViewTimeField])],B={...Object(i.pick)(c,["data","http","notifications","theme","uiSettings","i18n"]),uiSettingsKeys:p.UI_SETTINGS,showFrozenDataTierChoice:n},q=Object(r.useMemo)((()=>({uiSettings:j,dataViews:v.dataViews,data:v,fieldFormats:y,charts:x})),[j,v,y,x]);return Object(C.jsx)(h,{dataView:w,fieldStatsServices:q,timeRangeMs:_.timeRangeMs,dslQuery:D.source.query},Object(C.jsx)(J.Provider,{value:{dataView:w,runtimeMappings:_.runtimeMappings}},Object(C.jsx)(d.a,null,Object(C.jsx)(u.a,{storage:$,storageKeys:U},Object(C.jsx)(l.a,B,Object(C.jsx)(o.EuiSteps,{className:"transform__steps",steps:P}))))))}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(69),a=n.n(r);const{TextHighlightRules:i}=a.a.acequire("ace/mode/text_highlight_rules"),o=a.a.acequire("ace/lib/oop"),s=function(){const e=this.createKeywordMapper({keyword:["describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|orderasc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is","avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score","true|false","null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_monthinteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_secondinterval_minute_to_second|geo_point|geo_shape|shape"].join("|")},"identifier",!0);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"⇐|<⇒|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]},this.normalizeRules()};o.inherits(s,i);const l=a.a.acequire("ace/lib/oop"),{TextHighlightRules:c}=a.a.acequire("ace/mode/text_highlight_rules"),u="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function d(){this.name="ScriptHighlightRules",this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:u},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}l.inherits(d,c),n(20),n(112);const{JsonHighlightRules:p}=a.a.acequire("ace/mode/json_highlight_rules"),f=a.a.acequire("ace/lib/oop"),g=function(e){const t={},n=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:!1,push:!0},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:!1,push:!0},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:!1,regex:"{",next:e=e||"json",push:!0},{token:"paren.lparen",merge:!1,regex:"[[(]"},{token:"paren.rparen",merge:!1,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:!1,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];return t[e]=n,t[e+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:!1,push:!0}].concat(n),t.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}],t};function m(){this.$rules={...g("start")},this.embedRules(d,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]),this.embedRules(s,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}f.inherits(m,p);const b={id:"ace/mode/json_worker",src:'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\n/* @notice\n *\n * This product includes code that is based on Ace editor, which was available\n * under a "BSD" license.\n *\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable prettier/prettier,no-var,eqeqeq,no-use-before-define,block-scoped-var,no-undef,\n    guard-for-in,one-var,strict,no-redeclare,no-sequences,no-proto,new-cap,no-nested-ternary,no-unused-vars,\n    prefer-const,no-empty,no-extend-native,camelcase */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the json\n  mode from the brace distro.\n\n  It is very likely that this file will be removed in future but for now it enables\n  extended JSON parsing, like e.g. """{}""" (triple quotes)\n*/\n// @internal\n// @ts-nocheck\n"no use strict";\n! function(window) {\n  function resolveModuleId(id, paths) {\n    for (var testPath = id, tail = ""; testPath;) {\n      var alias = paths[testPath];\n      if ("string" == typeof alias) return alias + tail;\n      if (alias) return alias.location.replace(/\\/*$/, "/") + (tail || alias.main || alias.name);\n      if (alias === !1) return "";\n      var i = testPath.lastIndexOf("/");\n      if (-1 === i) break;\n      tail = testPath.substr(i) + tail, testPath = testPath.slice(0, i)\n    }\n    return id\n  }\n  if (!(void 0 !== window.window && window.document || window.acequire && window.define)) {\n    window.console || (window.console = function() {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: "log",\n        data: msgs\n      })\n    }, window.console.error = window.console.warn = window.console.log = window.console.trace = window.console), window.window = window, window.ace = window, window.onerror = function(message, file, line, col, err) {\n      postMessage({\n        type: "error",\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack\n        }\n      })\n    }, window.normalizeModule = function(parentId, moduleName) {\n      if (-1 !== moduleName.indexOf("!")) {\n        var chunks = moduleName.split("!");\n        return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1])\n      }\n      if ("." == moduleName.charAt(0)) {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        for (moduleName = (base ? base + "/" : "") + moduleName; - 1 !== moduleName.indexOf(".") && previous != moduleName;) {\n          var previous = moduleName;\n          moduleName = moduleName.replace(/^\\.\\//, "").replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "")\n        }\n      }\n      return moduleName\n    }, window.acequire = function acequire(parentId, id) {\n      if (id || (id = parentId, parentId = null), !id.charAt) throw Error("worker.js acequire() accepts only (parentId, id) as arguments");\n      id = window.normalizeModule(parentId, id);\n      var module = window.acequire.modules[id];\n      if (module) return module.initialized || (module.initialized = !0, module.exports = module.factory().exports), module.exports;\n      if (!window.acequire.tlns) return console.log("unable to load " + id);\n      var path = resolveModuleId(id, window.acequire.tlns);\n      return ".js" != path.slice(-3) && (path += ".js"), window.acequire.id = id, window.acequire.modules[id] = {}, importScripts(path), window.acequire(parentId, id)\n    }, window.acequire.modules = {}, window.acequire.tlns = {}, window.define = function(id, deps, factory) {\n      if (2 == arguments.length ? (factory = deps, "string" != typeof id && (deps = id, id = window.acequire.id)) : 1 == arguments.length && (factory = id, deps = [], id = window.acequire.id), "function" != typeof factory) return window.acequire.modules[id] = {\n        exports: factory,\n        initialized: !0\n      }, void 0;\n      deps.length || (deps = ["require", "exports", "module"]);\n      var req = function(childId) {\n        return window.acequire(id, childId)\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function() {\n          var module = this,\n            returnExports = factory.apply(this, deps.map(function(dep) {\n              switch (dep) {\n                case "require":\n                  return req;\n                case "exports":\n                  return module.exports;\n                case "module":\n                  return module;\n                default:\n                  return req(dep)\n              }\n            }));\n          return returnExports && (module.exports = returnExports), module\n        }\n      }\n    }, window.define.amd = {}, acequire.tlns = {}, window.initBaseUrls = function(topLevelNamespaces) {\n      for (var i in topLevelNamespaces) acequire.tlns[i] = topLevelNamespaces[i]\n    }, window.initSender = function() {\n      var EventEmitter = window.acequire("ace/lib/event_emitter").EventEmitter,\n        oop = window.acequire("ace/lib/oop"),\n        Sender = function() {};\n      return function() {\n        oop.implement(this, EventEmitter), this.callback = function(data, callbackId) {\n          postMessage({\n            type: "call",\n            id: callbackId,\n            data: data\n          })\n        }, this.emit = function(name, data) {\n          postMessage({\n            type: "event",\n            name: name,\n            data: data\n          })\n        }\n      }.call(Sender.prototype), new Sender\n    };\n    var main = window.main = null,\n      sender = window.sender = null;\n    window.onmessage = function(e) {\n      var msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command]) throw Error("Unknown command:" + msg.command);\n          window[msg.command].apply(window, msg.args)\n        }\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns), acequire("ace/lib/es5-shim"), sender = window.sender = window.initSender();\n        var clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender)\n      }\n    }\n  }\n}(this), ace.define("ace/lib/oop", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    })\n  }, exports.mixin = function(obj, mixin) {\n    for (var key in mixin) obj[key] = mixin[key];\n    return obj\n  }, exports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin)\n  }\n}), ace.define("ace/range", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var comparePoints = function(p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column\n    },\n    Range = function(startRow, startColumn, endRow, endColumn) {\n      this.start = {\n        row: startRow,\n        column: startColumn\n      }, this.end = {\n        row: endRow,\n        column: endColumn\n      }\n    };\n  (function() {\n    this.isEqual = function(range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column\n    }, this.toString = function() {\n      return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]"\n    }, this.contains = function(row, column) {\n      return 0 == this.compare(row, column)\n    }, this.compareRange = function(range) {\n      var cmp, end = range.end,\n        start = range.start;\n      return cmp = this.compare(end.row, end.column), 1 == cmp ? (cmp = this.compare(start.row, start.column), 1 == cmp ? 2 : 0 == cmp ? 1 : 0) : -1 == cmp ? -2 : (cmp = this.compare(start.row, start.column), -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n    }, this.comparePoint = function(p) {\n      return this.compare(p.row, p.column)\n    }, this.containsRange = function(range) {\n      return 0 == this.comparePoint(range.start) && 0 == this.comparePoint(range.end)\n    }, this.intersects = function(range) {\n      var cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp\n    }, this.isEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column\n    }, this.isStart = function(row, column) {\n      return this.start.row == row && this.start.column == column\n    }, this.setStart = function(row, column) {\n      "object" == typeof row ? (this.start.column = row.column, this.start.row = row.row) : (this.start.row = row, this.start.column = column)\n    }, this.setEnd = function(row, column) {\n      "object" == typeof row ? (this.end.column = row.column, this.end.row = row.row) : (this.end.row = row, this.end.column = column)\n    }, this.inside = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) || this.isStart(row, column) ? !1 : !0 : !1\n    }, this.insideStart = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) ? !1 : !0 : !1\n    }, this.insideEnd = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isStart(row, column) ? !1 : !0 : !1\n    }, this.compare = function(row, column) {\n      return this.isMultiLine() || row !== this.start.row ? this.start.row > row ? -1 : row > this.end.row ? 1 : this.start.row === row ? column >= this.start.column ? 0 : -1 : this.end.row === row ? this.end.column >= column ? 0 : 1 : 0 : this.start.column > column ? -1 : column > this.end.column ? 1 : 0\n    }, this.compareStart = function(row, column) {\n      return this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.compareEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.compare(row, column)\n    }, this.compareInside = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.clipRows = function(firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.end.row) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.start.row) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.extend = function(row, column) {\n      var cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = {\n        row: row,\n        column: column\n      };\n      else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.isEmpty = function() {\n      return this.start.row === this.end.row && this.start.column === this.end.column\n    }, this.isMultiLine = function() {\n      return this.start.row !== this.end.row\n    }, this.clone = function() {\n      return Range.fromPoints(this.start, this.end)\n    }, this.collapseRows = function() {\n      return 0 == this.end.column ? new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new Range(this.start.row, 0, this.end.row, 0)\n    }, this.toScreenRange = function(session) {\n      var screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column)\n    }, this.moveBy = function(row, column) {\n      this.start.row += row, this.start.column += column, this.end.row += row, this.end.column += column\n    }\n  }).call(Range.prototype), Range.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column)\n  }, Range.comparePoints = comparePoints, Range.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column\n  }, exports.Range = Range\n}), ace.define("ace/apply_delta", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.applyDelta = function(docLines, delta) {\n    var row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || "";\n    switch (delta.action) {\n      case "insert":\n        var lines = delta.lines;\n        if (1 === lines.length) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args), docLines[row] = line.substring(0, startColumn) + docLines[row], docLines[row + delta.lines.length - 1] += line.substring(startColumn)\n        }\n        break;\n      case "remove":\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow ? docLines[row] = line.substring(0, startColumn) + line.substring(endColumn) : docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn))\n    }\n  }\n}), ace.define("ace/lib/event_emitter", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var EventEmitter = {},\n    stopPropagation = function() {\n      this.propagationStopped = !0\n    },\n    preventDefault = function() {\n      this.defaultPrevented = !0\n    };\n  EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [],\n      defaultHandler = this._defaultHandlers[eventName];\n    if (listeners.length || defaultHandler) {\n      "object" == typeof e && e || (e = {}), e.type || (e.type = eventName), e.stopPropagation || (e.stopPropagation = stopPropagation), e.preventDefault || (e.preventDefault = preventDefault), listeners = listeners.slice();\n      for (var i = 0; listeners.length > i && (listeners[i](e, this), !e.propagationStopped); i++);\n      return defaultHandler && !e.defaultPrevented ? defaultHandler(e, this) : void 0\n    }\n  }, EventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (listeners) {\n      listeners = listeners.slice();\n      for (var i = 0; listeners.length > i; i++) listeners[i](e, this)\n    }\n  }, EventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n      _self.removeEventListener(eventName, newCallback), callback.apply(null, arguments)\n    })\n  }, EventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers || (handlers = this._defaultHandlers = {\n        _disabled_: {}\n      }), handlers[eventName]) {\n      var old = handlers[eventName],\n        disabled = handlers._disabled_[eventName];\n      disabled || (handlers._disabled_[eventName] = disabled = []), disabled.push(old);\n      var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n    }\n    handlers[eventName] = callback\n  }, EventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers) {\n      var disabled = handlers._disabled_[eventName];\n      if (handlers[eventName] == callback) handlers[eventName], disabled && this.setDefaultHandler(eventName, disabled.pop());\n      else if (disabled) {\n        var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n      }\n    }\n  }, EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    return listeners || (listeners = this._eventRegistry[eventName] = []), -1 == listeners.indexOf(callback) && listeners[capturing ? "unshift" : "push"](callback), callback\n  }, EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (listeners) {\n      var index = listeners.indexOf(callback); - 1 !== index && listeners.splice(index, 1)\n    }\n  }, EventEmitter.removeAllListeners = function(eventName) {\n    this._eventRegistry && (this._eventRegistry[eventName] = [])\n  }, exports.EventEmitter = EventEmitter\n}), ace.define("ace/anchor", ["require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Anchor = exports.Anchor = function(doc, row, column) {\n      this.$onChange = this.onChange.bind(this), this.attach(doc), column === void 0 ? this.setPosition(row.row, row.column) : this.setPosition(row, column)\n    };\n  (function() {\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = "insert" == delta.action,\n        deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n        deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column),\n        deltaStart = delta.start,\n        deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n      return $pointsInOrder(point, deltaStart, moveIfEqual) ? {\n        row: point.row,\n        column: point.column\n      } : $pointsInOrder(deltaEnd, point, !moveIfEqual) ? {\n        row: point.row + deltaRowShift,\n        column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n      } : {\n        row: deltaStart.row,\n        column: deltaStart.column\n      }\n    }\n    oop.implement(this, EventEmitter), this.getPosition = function() {\n      return this.$clipPositionToDocument(this.row, this.column)\n    }, this.getDocument = function() {\n      return this.document\n    }, this.$insertRight = !1, this.onChange = function(delta) {\n      if (!(delta.start.row == delta.end.row && delta.start.row != this.row || delta.start.row > this.row)) {\n        var point = $getTransformedPoint(delta, {\n          row: this.row,\n          column: this.column\n        }, this.$insertRight);\n        this.setPosition(point.row, point.column, !0)\n      }\n    }, this.setPosition = function(row, column, noClip) {\n      var pos;\n      if (pos = noClip ? {\n          row: row,\n          column: column\n        } : this.$clipPositionToDocument(row, column), this.row != pos.row || this.column != pos.column) {\n        var old = {\n          row: this.row,\n          column: this.column\n        };\n        this.row = pos.row, this.column = pos.column, this._signal("change", {\n          old: old,\n          value: pos\n        })\n      }\n    }, this.detach = function() {\n      this.document.removeEventListener("change", this.$onChange)\n    }, this.attach = function(doc) {\n      this.document = doc || this.document, this.document.on("change", this.$onChange)\n    }, this.$clipPositionToDocument = function(row, column) {\n      var pos = {};\n      return row >= this.document.getLength() ? (pos.row = Math.max(0, this.document.getLength() - 1), pos.column = this.document.getLine(pos.row).length) : 0 > row ? (pos.row = 0, pos.column = 0) : (pos.row = row, pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column))), 0 > column && (pos.column = 0), pos\n    }\n  }).call(Anchor.prototype)\n}), ace.define("ace/document", ["require", "exports", "module", "ace/lib/oop", "ace/apply_delta", "ace/lib/event_emitter", "ace/range", "ace/anchor"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    applyDelta = acequire("./apply_delta").applyDelta,\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Range = acequire("./range").Range,\n    Anchor = acequire("./anchor").Anchor,\n    Document = function(textOrLines) {\n      this.$lines = [""], 0 === textOrLines.length ? this.$lines = [""] : Array.isArray(textOrLines) ? this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines) : this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines)\n    };\n  (function() {\n    oop.implement(this, EventEmitter), this.setValue = function(text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length)), this.insert({\n        row: 0,\n        column: 0\n      }, text)\n    }, this.getValue = function() {\n      return this.getAllLines().join(this.getNewLineCharacter())\n    }, this.createAnchor = function(row, column) {\n      return new Anchor(this, row, column)\n    }, this.$split = 0 === "aaa".split(/a/).length ? function(text) {\n      return text.replace(/\\r\\n|\\r/g, "\\n").split("\\n")\n    } : function(text) {\n      return text.split(/\\r\\n|\\r|\\n/)\n    }, this.$detectNewLine = function(text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : "\\n", this._signal("changeNewLineMode")\n    }, this.getNewLineCharacter = function() {\n      switch (this.$newLineMode) {\n        case "windows":\n          return "\\r\\n";\n        case "unix":\n          return "\\n";\n        default:\n          return this.$autoNewLine || "\\n"\n      }\n    }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(newLineMode) {\n      this.$newLineMode !== newLineMode && (this.$newLineMode = newLineMode, this._signal("changeNewLineMode"))\n    }, this.getNewLineMode = function() {\n      return this.$newLineMode\n    }, this.isNewLine = function(text) {\n      return "\\r\\n" == text || "\\r" == text || "\\n" == text\n    }, this.getLine = function(row) {\n      return this.$lines[row] || ""\n    }, this.getLines = function(firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1)\n    }, this.getAllLines = function() {\n      return this.getLines(0, this.getLength())\n    }, this.getLength = function() {\n      return this.$lines.length\n    }, this.getTextRange = function(range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter())\n    }, this.getLinesForRange = function(range) {\n      var lines;\n      if (range.start.row === range.end.row) lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      else {\n        lines = this.getLines(range.start.row, range.end.row), lines[0] = (lines[0] || "").substring(range.start.column);\n        var l = lines.length - 1;\n        range.end.row - range.start.row == l && (lines[l] = lines[l].substring(0, range.end.column))\n      }\n      return lines\n    }, this.insertLines = function(row, lines) {\n      return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."), this.insertFullLines(row, lines)\n    }, this.removeLines = function(firstRow, lastRow) {\n      return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."), this.removeFullLines(firstRow, lastRow)\n    }, this.insertNewLine = function(position) {\n      return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."), this.insertMergedLines(position, ["", ""])\n    }, this.insert = function(position, text) {\n      return 1 >= this.getLength() && this.$detectNewLine(text), this.insertMergedLines(position, this.$split(text))\n    }, this.insertInLine = function(position, text) {\n      var start = this.clippedPos(position.row, position.column),\n        end = this.pos(position.row, position.column + text.length);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: [text]\n      }, !0), this.clonePos(end)\n    }, this.clippedPos = function(row, column) {\n      var length = this.getLength();\n      void 0 === row ? row = length : 0 > row ? row = 0 : row >= length && (row = length - 1, column = void 0);\n      var line = this.getLine(row);\n      return void 0 == column && (column = line.length), column = Math.min(Math.max(column, 0), line.length), {\n        row: row,\n        column: column\n      }\n    }, this.clonePos = function(pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      }\n    }, this.pos = function(row, column) {\n      return {\n        row: row,\n        column: column\n      }\n    }, this.$clipPosition = function(position) {\n      var length = this.getLength();\n      return position.row >= length ? (position.row = Math.max(0, length - 1), position.column = this.getLine(length - 1).length) : (position.row = Math.max(0, position.row), position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length)), position\n    }, this.insertFullLines = function(row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n      this.getLength() > row ? (lines = lines.concat([""]), column = 0) : (lines = [""].concat(lines), row--, column = this.$lines[row].length), this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines)\n    }, this.insertMergedLines = function(position, lines) {\n      var start = this.clippedPos(position.row, position.column),\n        end = {\n          row: start.row + lines.length - 1,\n          column: (1 == lines.length ? start.column : 0) + lines[lines.length - 1].length\n        };\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: lines\n      }), this.clonePos(end)\n    }, this.remove = function(range) {\n      var start = this.clippedPos(range.start.row, range.start.column),\n        end = this.clippedPos(range.end.row, range.end.column);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }), this.clonePos(start)\n    }, this.removeInLine = function(row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn),\n        end = this.clippedPos(row, endColumn);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, !0), this.clonePos(start)\n    }, this.removeFullLines = function(firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1), lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0,\n        deleteLastNewLine = this.getLength() - 1 > lastRow,\n        startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n        startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n        endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n        endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n        range = new Range(startRow, startCol, endRow, endCol),\n        deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      return this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: "remove",\n        lines: this.getLinesForRange(range)\n      }), deletedLines\n    }, this.removeNewLine = function(row) {\n      this.getLength() - 1 > row && row >= 0 && this.applyDelta({\n        start: this.pos(row, this.getLine(row).length),\n        end: this.pos(row + 1, 0),\n        action: "remove",\n        lines: ["", ""]\n      })\n    }, this.replace = function(range, text) {\n      if (range instanceof Range || (range = Range.fromPoints(range.start, range.end)), 0 === text.length && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n      return end = text ? this.insert(range.start, text) : range.start\n    }, this.applyDeltas = function(deltas) {\n      for (var i = 0; deltas.length > i; i++) this.applyDelta(deltas[i])\n    }, this.revertDeltas = function(deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) this.revertDelta(deltas[i])\n    }, this.applyDelta = function(delta, doNotValidate) {\n      var isInsert = "insert" == delta.action;\n      (isInsert ? 1 >= delta.lines.length && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) || (isInsert && delta.lines.length > 2e4 && this.$splitAndapplyLargeDelta(delta, 2e4), applyDelta(this.$lines, delta, doNotValidate), this._signal("change", delta))\n    }, this.$splitAndapplyLargeDelta = function(delta, MAX) {\n      for (var lines = delta.lines, l = lines.length, row = delta.start.row, column = delta.start.column, from = 0, to = 0;;) {\n        from = to, to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        if (to > l) {\n          delta.lines = chunk, delta.start.row = row + from, delta.start.column = column;\n          break\n        }\n        chunk.push(""), this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, !0)\n      }\n    }, this.revertDelta = function(delta) {\n      this.applyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: "insert" == delta.action ? "remove" : "insert",\n        lines: delta.lines.slice()\n      })\n    }, this.indexToPosition = function(index, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, i = startRow || 0, l = lines.length; l > i; i++)\n        if (index -= lines[i].length + newlineLength, 0 > index) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      return {\n        row: l - 1,\n        column: lines[l - 1].length\n      }\n    }, this.positionToIndex = function(pos, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, index = 0, row = Math.min(pos.row, lines.length), i = startRow || 0; row > i; ++i) index += lines[i].length + newlineLength;\n      return index + pos.column\n    }\n  }).call(Document.prototype), exports.Document = Document\n}), ace.define("ace/lib/lang", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.last = function(a) {\n    return a[a.length - 1]\n  }, exports.stringReverse = function(string) {\n    return string.split("").reverse().join("")\n  }, exports.stringRepeat = function(string, count) {\n    for (var result = ""; count > 0;) 1 & count && (result += string), (count >>= 1) && (string += string);\n    return result\n  };\n  var trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  exports.stringTrimLeft = function(string) {\n    return string.replace(trimBeginRegexp, "")\n  }, exports.stringTrimRight = function(string) {\n    return string.replace(trimEndRegexp, "")\n  }, exports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) copy[key] = obj[key];\n    return copy\n  }, exports.copyArray = function(array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++) copy[i] = array[i] && "object" == typeof array[i] ? this.copyObject(array[i]) : array[i];\n    return copy\n  }, exports.deepCopy = function deepCopy(obj) {\n    if ("object" != typeof obj || !obj) return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++) copy[key] = deepCopy(obj[key]);\n      return copy\n    }\n    if ("[object Object]" !== Object.prototype.toString.call(obj)) return obj;\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy\n  }, exports.arrayToMap = function(arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map\n  }, exports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) map[i] = props[i];\n    return map\n  }, exports.arrayRemove = function(array, value) {\n    for (var i = 0; array.length >= i; i++) value === array[i] && array.splice(i, 1)\n  }, exports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, "\\\\$1")\n  }, exports.escapeHTML = function(str) {\n    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/\'/g, "&#39;").replace(/</g, "&#60;")\n  }, exports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n    return string.replace(regExp, function(str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      })\n    }), matches\n  }, exports.deferredCall = function(fcn) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      deferred = function(timeout) {\n        return deferred.cancel(), timer = setTimeout(callback, timeout || 0), deferred\n      };\n    return deferred.schedule = deferred, deferred.call = function() {\n      return this.cancel(), fcn(), deferred\n    }, deferred.cancel = function() {\n      return clearTimeout(timer), timer = null, deferred\n    }, deferred.isPending = function() {\n      return timer\n    }, deferred\n  }, exports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      _self = function(timeout) {\n        null == timer && (timer = setTimeout(callback, timeout || defaultTimeout))\n      };\n    return _self.delay = function(timeout) {\n      timer && clearTimeout(timer), timer = setTimeout(callback, timeout || defaultTimeout)\n    }, _self.schedule = _self, _self.call = function() {\n      this.cancel(), fcn()\n    }, _self.cancel = function() {\n      timer && clearTimeout(timer), timer = null\n    }, _self.isPending = function() {\n      return timer\n    }, _self\n  }\n}), ace.define("ace/worker/mirror", ["require", "exports", "module", "ace/range", "ace/document", "ace/lib/lang"], function(acequire, exports) {\n  "use strict";\n  acequire("../range").Range;\n  var Document = acequire("../document").Document,\n    lang = acequire("../lib/lang"),\n    Mirror = exports.Mirror = function(sender) {\n      this.sender = sender;\n      var doc = this.doc = new Document(""),\n        deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this)),\n        _self = this;\n      sender.on("change", function(e) {\n        var data = e.data;\n        if (data[0].start) doc.applyDeltas(data);\n        else\n          for (var i = 0; data.length > i; i += 2) {\n            if (Array.isArray(data[i + 1])) var d = {\n              action: "insert",\n              start: data[i],\n              lines: data[i + 1]\n            };\n            else var d = {\n              action: "remove",\n              start: data[i],\n              end: data[i + 1]\n            };\n            doc.applyDelta(d, !0)\n          }\n        return _self.$timeout ? deferredUpdate.schedule(_self.$timeout) : (_self.onUpdate(), void 0)\n      })\n    };\n  (function() {\n    this.$timeout = 500, this.setTimeout = function(timeout) {\n      this.$timeout = timeout\n    }, this.setValue = function(value) {\n      this.doc.setValue(value), this.deferredUpdate.schedule(this.$timeout)\n    }, this.getValue = function(callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId)\n    }, this.onUpdate = function() {}, this.isPending = function() {\n      return this.deferredUpdate.isPending()\n    }\n  }).call(Mirror.prototype)\n}), ace.define("ace/mode/json/json_parse", ["require", "exports", "module"], function() {\n  "use strict";\n  var at, ch, text, value, escapee = {\n      \'"\': \'"\',\n      "\\\\": "\\\\",\n      "/": "/",\n      b: "\\b",\n      f: "\\f",\n      n: "\\n",\n      r: "\\r",\n      t: "\t"\n    },\n    error = function(m) {\n      throw {\n        name: "SyntaxError",\n        message: m,\n        at: at,\n        text: text\n      }\n    },\n    reset = function (newAt) {\n      ch = text.charAt(newAt);\n      at = newAt + 1;\n    },\n    next = function(c) {\n      return c && c !== ch && error("Expected \'" + c + "\' instead of \'" + ch + "\'"), ch = text.charAt(at), at += 1, ch\n    },\n    nextUpTo = function (upTo, errorMessage) {\n      let currentAt = at,\n        i = text.indexOf(upTo, currentAt);\n      if (i < 0) {\n        error(errorMessage || \'Expected \\\'\' + upTo + \'\\\'\');\n      }\n      reset(i + upTo.length);\n      return text.substring(currentAt, i);\n    },\n    peek = function (c) {\n      return text.substr(at, c.length) === c; // nocommit - double check\n    },\n    number = function() {\n      var number, string = "";\n      for ("-" === ch && (string = "-", next("-")); ch >= "0" && "9" >= ch;) string += ch, next();\n      if ("." === ch)\n        for (string += "."; next() && ch >= "0" && "9" >= ch;) string += ch;\n      if ("e" === ch || "E" === ch)\n        for (string += ch, next(), ("-" === ch || "+" === ch) && (string += ch, next()); ch >= "0" && "9" >= ch;) string += ch, next();\n      return number = +string, isNaN(number) ? (error("Bad number"), void 0) : number\n    },\n    string = function() {\n      var hex, i, uffff, string = "";\n      if (\'"\' === ch) {\n        if (peek(\'""\')) {\n          // literal\n          next(\'"\');\n          next(\'"\');\n          return nextUpTo(\'"""\', \'failed to find closing \\\'"""\\\'\');\n        } else {\n          for (; next();) {\n            if (\'"\' === ch) return next(), string;\n            if ("\\\\" === ch)\n              if (next(), "u" === ch) {\n                for (uffff = 0, i = 0; 4 > i && (hex = parseInt(next(), 16), isFinite(hex)); i += 1) uffff = 16 * uffff + hex;\n                string += String.fromCharCode(uffff)\n              } else {\n                if ("string" != typeof escapee[ch]) break;\n                string += escapee[ch]\n              }\n            else string += ch\n          }\n        }\n      }\n      error("Bad string")\n    },\n    white = function() {\n      for (; ch && " " >= ch;) next()\n    },\n    word = function() {\n      switch (ch) {\n        case "t":\n          return next("t"), next("r"), next("u"), next("e"), !0;\n        case "f":\n          return next("f"), next("a"), next("l"), next("s"), next("e"), !1;\n        case "n":\n          return next("n"), next("u"), next("l"), next("l"), null\n      }\n      error("Unexpected \'" + ch + "\'")\n    },\n    array = function() {\n      var array = [];\n      if ("[" === ch) {\n        if (next("["), white(), "]" === ch) return next("]"), array;\n        for (; ch;) {\n          if (array.push(value()), white(), "]" === ch) return next("]"), array;\n          next(","), white()\n        }\n      }\n      error("Bad array")\n    },\n    object = function() {\n      var key, object = {};\n      if ("{" === ch) {\n        if (next("{"), white(), "}" === ch) return next("}"), object;\n        for (; ch;) {\n          if (key = string(), white(), next(":"), Object.hasOwnProperty.call(object, key) && error(\'Duplicate key "\' + key + \'"\'), object[key] = value(), white(), "}" === ch) return next("}"), object;\n          next(","), white()\n        }\n      }\n      error("Bad object")\n    };\n  return value = function() {\n      switch (white(), ch) {\n        case "{":\n          return object();\n        case "[":\n          return array();\n        case \'"\':\n          return string();\n        case "-":\n          return number();\n        default:\n          return ch >= "0" && "9" >= ch ? number() : word()\n      }\n    },\n    function(source, reviver) {\n      var result;\n      return text = source, at = 0, ch = " ", result = value(), white(), ch && error("Syntax error"), "function" == typeof reviver ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && "object" == typeof value)\n          for (k in value) Object.hasOwnProperty.call(value, k) && (v = walk(value, k), void 0 !== v ? value[k] = v : delete value[k]);\n        return reviver.call(holder, key, value)\n      }({\n        "": result\n      }, "") : result\n    }\n}), ace.define("ace/mode/json_worker", ["require", "exports", "module", "ace/lib/oop", "ace/worker/mirror", "ace/mode/json/json_parse"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("../lib/oop"),\n    Mirror = acequire("../worker/mirror").Mirror,\n    parse = acequire("./json/json_parse"),\n    JsonWorker = exports.JsonWorker = function(sender) {\n      Mirror.call(this, sender), this.setTimeout(200)\n    };\n  oop.inherits(JsonWorker, Mirror),\n    function() {\n      this.onUpdate = function() {\n        var value = this.doc.getValue(),\n          errors = [];\n        try {\n          value && parse(value)\n        } catch (e) {\n          var pos = this.doc.indexToPosition(e.at - 1);\n          errors.push({\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: "error"\n          })\n        }\n        this.sender.emit("annotate", errors)\n      }\n    }.call(JsonWorker.prototype)\n}), ace.define("ace/lib/es5-shim", ["require", "exports", "module"], function() {\n  function Empty() {}\n\n  function doesDefinePropertyWork(object) {\n    try {\n      return Object.defineProperty(object, "sentinel", {}), "sentinel" in object\n    } catch (exception) {}\n  }\n\n  function toInteger(n) {\n    return n = +n, n !== n ? n = 0 : 0 !== n && n !== 1 / 0 && n !== -(1 / 0) && (n = (n > 0 || -1) * Math.floor(Math.abs(n))), n\n  }\n  Function.prototype.bind || (Function.prototype.bind = function(that) {\n    var target = this;\n    if ("function" != typeof target) throw new TypeError("Function.prototype.bind called on incompatible " + target);\n    var args = slice.call(arguments, 1),\n      bound = function() {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n          return Object(result) === result ? result : this\n        }\n        return target.apply(that, args.concat(slice.call(arguments)))\n      };\n    return target.prototype && (Empty.prototype = target.prototype, bound.prototype = new Empty, Empty.prototype = null), bound\n  });\n  var defineGetter, defineSetter, lookupGetter, lookupSetter, supportsAccessors, call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) && (defineGetter = call.bind(prototypeOfObject.__defineGetter__), defineSetter = call.bind(prototypeOfObject.__defineSetter__), lookupGetter = call.bind(prototypeOfObject.__lookupGetter__), lookupSetter = call.bind(prototypeOfObject.__lookupSetter__)), 2 != [1, 2].splice(0).length)\n    if (function() {\n        function makeArray(l) {\n          var a = Array(l + 2);\n          return a[0] = a[1] = 0, a\n        }\n        var lengthBefore, array = [];\n        return array.splice.apply(array, makeArray(20)), array.splice.apply(array, makeArray(26)), lengthBefore = array.length, array.splice(5, 0, "XXX"), lengthBefore + 1 == array.length, lengthBefore + 1 == array.length ? !0 : void 0\n      }()) {\n      var array_splice = Array.prototype.splice;\n      Array.prototype.splice = function(start, deleteCount) {\n        return arguments.length ? array_splice.apply(this, [void 0 === start ? 0 : start, void 0 === deleteCount ? this.length - start : deleteCount].concat(slice.call(arguments, 2))) : []\n      }\n    } else Array.prototype.splice = function(pos, removeCount) {\n      var length = this.length;\n      pos > 0 ? pos > length && (pos = length) : void 0 == pos ? pos = 0 : 0 > pos && (pos = Math.max(length + pos, 0)), length > pos + removeCount || (removeCount = length - pos);\n      var removed = this.slice(pos, pos + removeCount),\n        insert = slice.call(arguments, 2),\n        add = insert.length;\n      if (pos === length) add && this.push.apply(this, insert);\n      else {\n        var remove = Math.min(removeCount, length - pos),\n          tailOldPos = pos + remove,\n          tailNewPos = tailOldPos + add - remove,\n          tailCount = length - tailOldPos,\n          lengthAfterRemove = length - remove;\n        if (tailOldPos > tailNewPos)\n          for (var i = 0; tailCount > i; ++i) this[tailNewPos + i] = this[tailOldPos + i];\n        else if (tailNewPos > tailOldPos)\n          for (i = tailCount; i--;) this[tailNewPos + i] = this[tailOldPos + i];\n        if (add && pos === lengthAfterRemove) this.length = lengthAfterRemove, this.push.apply(this, insert);\n        else\n          for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i) this[pos + i] = insert[i]\n      }\n      return removed\n    };\n  Array.isArray || (Array.isArray = function(obj) {\n    return "[object Array]" == _toString(obj)\n  });\n  var boxedString = Object("a"),\n    splitString = "a" != boxedString[0] || !(0 in boxedString);\n  if (Array.prototype.forEach || (Array.prototype.forEach = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError;\n      for (; length > ++i;) i in self && fun.call(thisp, self[i], i, object)\n    }), Array.prototype.map || (Array.prototype.map = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = Array(length),\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (result[i] = fun.call(thisp, self[i], i, object));\n      return result\n    }), Array.prototype.filter || (Array.prototype.filter = function(fun) {\n      var value, object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = [],\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (value = self[i], fun.call(thisp, value, i, object) && result.push(value));\n      return result\n    }), Array.prototype.every || (Array.prototype.every = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && !fun.call(thisp, self[i], i, object)) return !1;\n      return !0\n    }), Array.prototype.some || (Array.prototype.some = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && fun.call(thisp, self[i], i, object)) return !0;\n      return !1\n    }), Array.prototype.reduce || (Array.prototype.reduce = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");\n      var result, i = 0;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i++];\n            break\n          }\n          if (++i >= length) throw new TypeError("reduce of empty array with no initial value")\n        }\n      for (; length > i; i++) i in self && (result = fun.call(void 0, result, self[i], i, object));\n      return result\n    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");\n      var result, i = length - 1;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i--];\n            break\n          }\n          if (0 > --i) throw new TypeError("reduceRight of empty array with no initial value")\n        }\n      do i in this && (result = fun.call(void 0, result, self[i], i, object)); while (i--);\n      return result\n    }), Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2) || (Array.prototype.indexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = 0;\n      for (arguments.length > 1 && (i = toInteger(arguments[1])), i = i >= 0 ? i : Math.max(0, length + i); length > i; i++)\n        if (i in self && self[i] === sought) return i;\n      return -1\n    }), Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = length - 1;\n      for (arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))), i = i >= 0 ? i : length - Math.abs(i); i >= 0; i--)\n        if (i in self && sought === self[i]) return i;\n      return -1\n    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject)\n    }), !Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";\n    Object.getOwnPropertyDescriptor = function(object, property) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT + object);\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (descriptor = {\n            enumerable: !0,\n            configurable: !0\n          }, supportsAccessors) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (object.__proto__ = prototype, getter || setter) return getter && (descriptor.get = getter), setter && (descriptor.set = setter), descriptor\n        }\n        return descriptor.value = object[property], descriptor\n      }\n    }\n  }\n  if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(object) {\n      return Object.keys(object)\n    }), !Object.create) {\n    var createEmpty;\n    createEmpty = null === Object.prototype.__proto__ ? function() {\n      return {\n        __proto__: null\n      }\n    } : function() {\n      var empty = {};\n      for (var i in empty) empty[i] = null;\n      return empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null, empty\n    }, Object.create = function(prototype, properties) {\n      var object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ("object" != typeof prototype) throw new TypeError("typeof prototype[" + typeof prototype + "] != \'object\'");\n        var Type = function() {};\n        Type.prototype = prototype, object = new Type, object.__proto__ = prototype\n      }\n      return void 0 !== properties && Object.defineProperties(object, properties), object\n    }\n  }\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom = "undefined" == typeof document || doesDefinePropertyWork(document.createElement("div"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ",\n      ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ",\n      ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";\n    Object.defineProperty = function(object, property, descriptor) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if ("object" != typeof descriptor && "function" != typeof descriptor || null === descriptor) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      if (definePropertyFallback) try {\n        return definePropertyFallback.call(Object, object, property, descriptor)\n      } catch (exception) {}\n      if (owns(descriptor, "value"))\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject, delete object[property], object[property] = descriptor.value, object.__proto__ = prototype\n        } else object[property] = descriptor.value;\n      else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        owns(descriptor, "get") && defineGetter(object, property, descriptor.get), owns(descriptor, "set") && defineSetter(object, property, descriptor.set)\n      }\n      return object\n    }\n  }\n  Object.defineProperties || (Object.defineProperties = function(object, properties) {\n    for (var property in properties) owns(properties, property) && Object.defineProperty(object, property, properties[property]);\n    return object\n  }), Object.seal || (Object.seal = function(object) {\n    return object\n  }), Object.freeze || (Object.freeze = function(object) {\n    return object\n  });\n  try {\n    Object.freeze(function() {})\n  } catch (exception) {\n    Object.freeze = function(freezeObject) {\n      return function(object) {\n        return "function" == typeof object ? object : freezeObject(object)\n      }\n    }(Object.freeze)\n  }\n  if (Object.preventExtensions || (Object.preventExtensions = function(object) {\n      return object\n    }), Object.isSealed || (Object.isSealed = function() {\n      return !1\n    }), Object.isFrozen || (Object.isFrozen = function() {\n      return !1\n    }), Object.isExtensible || (Object.isExtensible = function(object) {\n      if (Object(object) === object) throw new TypeError;\n      for (var name = ""; owns(object, name);) name += "?";\n      object[name] = !0;\n      var returnValue = owns(object, name);\n      return delete object[name], returnValue\n    }), !Object.keys) {\n    var hasDontEnumBug = !0,\n      dontEnums = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],\n      dontEnumsLength = dontEnums.length;\n    for (var key in {\n        toString: null\n      }) hasDontEnumBug = !1;\n    Object.keys = function(object) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError("Object.keys called on a non-object");\n      var keys = [];\n      for (var name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n          var dontEnum = dontEnums[i];\n          owns(object, dontEnum) && keys.push(dontEnum)\n        }\n      return keys\n    }\n  }\n  Date.now || (Date.now = function() {\n    return (new Date).getTime()\n  });\n  var ws = "\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";\n  if (!String.prototype.trim || ws.trim()) {\n    ws = "[" + ws + "]";\n    var trimBeginRegexp = RegExp("^" + ws + ws + "*"),\n      trimEndRegexp = RegExp(ws + ws + "*$");\n    String.prototype.trim = function() {\n      return (this + "").replace(trimBeginRegexp, "").replace(trimEndRegexp, "")\n    }\n  }\n  var toObject = function(o) {\n    if (null == o) throw new TypeError("can\'t convert " + o + " to object");\n    return Object(o)\n  }\n});\n'},{WorkerClient:h}=a.a.acequire("ace/worker/worker_client"),j=a.a.acequire("ace/lib/oop"),{Mode:v}=a.a.acequire("ace/mode/json"),{Tokenizer:O}=a.a.acequire("ace/tokenizer"),{MatchingBraceOutdent:y}=a.a.acequire("ace/mode/matching_brace_outdent"),{CstyleBehaviour:x}=a.a.acequire("ace/mode/behaviour/cstyle"),{FoldMode:w}=a.a.acequire("ace/mode/folding/cstyle"),E=function(){const e=new m;e.normalizeRules(),this.$tokenizer=new O(e.getRules()),this.$outdent=new y,this.$behaviour=new x,this.foldingRules=new w};j.inherits(E,v),E.prototype.createWorker=function(e){const t=new h(["ace"],b,"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(49),a=n(38);function i(e){return Object(r.a)(e)&&Object.values(e).every((e=>function(e){return(Object(r.a)(e,["type"])&&1===Object.keys(e).length||Object(r.a)(e,["type","script"])&&("string"==typeof e.script||Object(r.a)(e.script,["source"])&&"string"==typeof e.script.source||Object(r.a)(e.script,["id"])&&"string"==typeof e.script.id))&&a.RUNTIME_FIELD_TYPES.includes(e.type)}(e)))}function o(e,t){let n={};if(e){const t=null==e?void 0:e.getComputedFields();if(void 0!==(null==t?void 0:t.runtimeFields)){const e=t.runtimeFields;i(e)&&(n={...n,...e})}}if(i(t)&&(n={...n,...t}),i(n))return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n(37);var r=n(18);function a(e){return Object(r.formatDate)(e,"MMMM Do YYYY, HH:mm:ss")}},function(e,t,n){"use strict";function r(e,t,n){const a=t.split(".");let i=e;for(let e=0;e<a.length;e++){var o;const t=a[e];if(i=null===(o=i)||void 0===o?void 0:o[t],Array.isArray(i)){i=i.map((t=>"object"==typeof t?r(t,a.slice(e+1,a.length).join(".")):t));break}}return void 0===i?n:i}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const a=(e,t,n)=>{let r=e;const a=t.split("."),i=a.length;for(let e=0;e<i-1;e++){const t=a[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}return r[a[i-1]]=n,e}},function(e,t,n){"use strict";let r;n.d(t,"a",(function(){return r})),function(e){e.HOME="transform_management",e.CLONE_TRANSFORM="clone_transform",e.CREATE_TRANSFORM="create_transform"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(18),o=n(0),s=n(56),l=n(48),c=n(17);const u=({text:e,previewTextLength:t,inline:n=!1,forceModal:r=!1})=>{const{overlays:u,theme:d,i18n:p}=Object(l.a)();if(!r&&"string"==typeof e&&e.length<=140)return e;if(!r&&"object"==typeof e&&null!==e&&"string"==typeof e.message&&e.message.length<=140)return e.message;const f="object"==typeof e&&null!==e&&e.message?e.message:e,g="object"==typeof f?JSON.stringify(e,null,2):f,m=null!=t?t:140,b=`${g.substring(0,m)}${g.length>m?" ...":""}`;return Object(c.jsx)(a.a.Fragment,null,!n&&Object(c.jsx)("pre",null,b),Object(c.jsx)(i.EuiButtonEmpty,{onClick:()=>{const e=u.openModal(Object(s.a)(Object(c.jsx)(i.EuiModal,{onClose:()=>e.close()},Object(c.jsx)(i.EuiModalHeader,null,Object(c.jsx)(i.EuiModalHeaderTitle,null,o.i18n.translate("xpack.transform.toastText.modalTitle",{defaultMessage:"Error details"}))),Object(c.jsx)(i.EuiModalBody,null,Object(c.jsx)(i.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"s",isCopyable:!0},g)),Object(c.jsx)(i.EuiModalFooter,null,Object(c.jsx)(i.EuiButtonEmpty,{onClick:()=>e.close()},o.i18n.translate("xpack.transform.toastText.closeModalButtonText",{defaultMessage:"Close"})))),{theme:d,i18n:p}))},css:n?{blockSize:0}:{},size:n?"s":void 0},o.i18n.translate("xpack.transform.toastText.openModalButtonText",{defaultMessage:"View details"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(21),a=n(3),i=n(48);const o=(e,t)=>{const{http:n}=Object(i.a)();return Object(r.useQuery)([a.r.GET_TRANSFORMS_PREVIEW,e],(({signal:t})=>n.post(Object(a.u)("transforms/_preview"),{body:JSON.stringify(e),version:"1",signal:t})),{enabled:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(21),a=n(3),i=n(48);const o=(e,t,n)=>{const{http:o}=Object(i.a)();return Object(r.useQuery)([a.r.GET_TRANSFORM_STATS,e],(({signal:t})=>o.get(Object(a.u)(`transforms/${e}/_stats`),{version:"1",signal:t})),{enabled:t,refetchInterval:n})},s=({enabled:e,refetchInterval:t})=>{const{http:n}=Object(i.a)();return Object(r.useQuery)([a.r.GET_TRANSFORMS_STATS],(({signal:e})=>n.get(Object(a.u)("transforms/_stats"),{version:"1",asSystemRequest:!0,signal:e})),{enabled:e,refetchInterval:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return m}));var r=n(60),a=n(86);const i=60,o=["nanos","micros","ms","s","m","h","d"];function s(e){return null!==e.match(/^(0|\d*(nanos|micros|ms|s|m|h|d))$/)}function l({number:e,timeUnit:t}){return"nanos"===t&&e>=1e9*i||"micros"===t&&e>=1e6*i||"ms"===t&&e>=1e3*i||"s"===t&&e>=i||("m"===t||"h"===t||"d"===t)&&e>=1}function c(e){const t=function(e){if("string"!=typeof e||null===e)return;const t=e.match(/[a-z]+|[^a-z]+/gi);if(null===t||Array.isArray(t)&&2!==t.length)return;const n=+t[0],r=t[1];return!isNaN(n)&&Number.isInteger(n)&&o.includes(r)?{number:n,timeUnit:r}:void 0}(e);return void 0!==t&&l(t)}function u({number:e,timeUnit:t}){return"s"===t&&e<=3600||"m"===t&&e<=60||"h"===t&&1===e}const d=e=>{if("string"!=typeof e||null===e)return!1;const t=e.match(/[a-z]+|[^a-z]+/gi);if(null===t||Array.isArray(t)&&2!==t.length)return!1;const n=+t[0],r=t[1];return!(isNaN(n)||!Number.isInteger(n)||0===n)&&u({number:n,timeUnit:r})},p=e=>(e+"").includes(".")||null!==Object(r.e)({min:10,max:65536,integerOnly:!0})(+e)?[a.d]:[],f=e=>(e+"").includes(".")||null!==Object(r.e)({min:-1,max:100,integerOnly:!0})(+e)?[a.a]:[];function g(e){if("string"!=typeof e)return!1;try{return!!JSON.parse(e)}catch(e){return console.error(`JSON is invalid.\n${e}`),!1}return!0}const m=e=>(e+"").includes(".")||null!==Object(r.e)({min:-1,max:100,integerOnly:!0})(+e)?[a.c]:[]},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(0);const a=r.i18n.translate("xpack.transform.transformSettingValidations.numberGreaterThanOrEqualToNegativeOneNotValidErrorMessage",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."}),i=r.i18n.translate("xpack.transform.transformSettingValidations.numberRange10To10000NotValidErrorMessage",{defaultMessage:"Value needs to be an integer between 10 and 10000."}),o=r.i18n.translate("xpack.transform.transformSettingValidations.maxPageSearchSizeInvalidMessage",{defaultMessage:"Maximum page search size needs to be an integer between 10 and 65536."}),s=r.i18n.translate("xpack.transform.transformSettingValidations.retentionPolicyMaxAgeInvalidMessage",{defaultMessage:"Invalid max age format. Minimum of 60s required."}),l=r.i18n.translate("xpack.transform.transformSettingsValidations.numberOfRetriesInvalidErrorMessage",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."})},function(e,t,n){"use strict";function r(e){return Object.keys(e).map((t=>e[t]))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(107),a=n(73),i=n(104),o=n(108),s=n(109);function l(e,t,n,l){const c={agg:l,aggName:e,dropDownName:t,field:n};switch(l){case a.a.PERCENTILES:return Object(o.a)(c);case a.a.FILTER:return Object(i.a)(c);case a.a.TOP_METRICS:return Object(s.a)({...c,aggName:a.a.TOP_METRICS});case a.a.TERMS:return Object(r.a)(c);default:return c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(123);t.default=function(e,t){var n=a.useFirstMountState();r.useEffect((function(){if(!n)return e()}),t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(51);function a(e,t,n,a){switch(a){case r.b.TERMS:return{agg:a,aggName:e,dropDownName:t,field:n};case r.b.HISTOGRAM:return{agg:a,aggName:e,dropDownName:t,field:n,interval:"10"};case r.b.DATE_HISTOGRAM:return{agg:a,aggName:e,dropDownName:t,field:n,calendar_interval:"1m"}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(57),a=n(60),i=n(78),o=n(80),s=n(98),l=n(51),c=n(88),u=n(90);const d=/[[\]>]/g;function p(e){switch(e){case r.a.FLOAT:case r.a.HALF_FLOAT:case r.a.SCALED_FLOAT:case r.a.DOUBLE:case r.a.INTEGER:case r.a.LONG:case r.a.SHORT:case r.a.UNSIGNED_LONG:return r.b.NUMBER;case r.a.DATE:case r.a.DATE_NANOS:return r.b.DATE;case r.a.KEYWORD:case r.a.STRING:return r.b.STRING;default:return e}}function f(e,t){const n=[],r={},f=[],g={},m=["_id","_index","_type"],b=e.fields.filter((e=>!0===e.aggregatable&&!m.includes(e.name)&&!e.runtimeField&&void 0!==e.type)).map((e=>({name:e.name,type:Object(a.c)(e)?a.b.COUNTER:e.type})));let h=[];Object(i.b)(t)&&(h=Object.keys(t).map((e=>({name:e,type:p(t[e].type)}))));const j=[...b,...h].sort(((e,t)=>e.name.localeCompare(t.name)));return j.forEach((e=>{const t=e.name,a=Object(s.c)(t),i=Object(o.a)(l.z,e.type);void 0!==i&&i.forEach((i=>{const o=a.replace(d,"").trim(),s=`${i}(${a})`,l={label:s,field:{id:t,type:e.type}};n.push(l),r[s]=Object(u.a)(o,s,t,i)}));const p={label:a,options:[],field:{id:t,type:e.type}},m=Object(o.a)(l.y,e.type);void 0!==m&&m.forEach((e=>{const n=`${a.replace(d,"").trim()}.${e}`,r=`${e}(${a})`;p.options.push({label:r}),g[r]=Object(c.a)(n,r,t,e)})),f.push(p)})),{fields:j,groupByOptions:n,groupByOptionsData:r,aggOptions:f,aggOptionsData:g}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(25),a=n.n(r),i=n(2),o=n(0),s=n(45),l=n(20),c=n(57),u=n(79),d=n(68),p=n(67),f=n(54),g=n(51),m=n(83),b=n(100);const h=(e,t,n,r,h,j)=>{const[v,O]=Object(i.useState)({}),y=Object.keys(v).filter((e=>"object"!==v[e].type));if(Object(b.b)(r)){const e=Object.keys(r.pivot.group_by);y.sort(function(e){return(t,n)=>e.some((e=>e===t))&&e.some((e=>e===n))?t.localeCompare(n):e.some((e=>e===t))?-1:e.some((e=>e===n))?1:t.localeCompare(n)}(e))}else Object(b.a)(r)&&y.sort((x=r.latest.sort,(e,t)=>x===e&&x===t?e.localeCompare(t):x===e?-1:x===t?1:e.localeCompare(t)));var x;const w=y.map((e=>{const t=v[e];return{id:e,schema:Object(p.c)(null==t?void 0:t.type)}})),E=Object(p.k)(w),{pagination:S,resetPagination:_,setErrorMessage:C,setNoDataMessage:T,setRowCountInfo:A,setStatus:k,setTableItems:R,sortingColumns:M,tableItems:F}=E,I=Object(i.useMemo)((()=>Object(g.h)(e,t,r,h,j)),[e,t,r,h,j]),{error:N,data:L,isError:D,isLoading:P}=Object(m.a)(I,n.isValid);if(Object(i.useEffect)((()=>{if(P)C(""),T(""),k(p.b.LOADING);else if(D)C(Object(f.a)(N)),R([]),A({rowCount:0,rowCountRelation:d.a.EQ}),O({}),k(p.b.ERROR);else if(!P&&!D&&void 0!==L){const e=L.preview.map(s.getFlattenedObject),t=[...new Set(e.map(Object.keys).flat(1))];let n=Object.entries(L.generated_dest_index.mappings.properties).filter((([e])=>t.includes(e))).reduce(((e,[t,n])=>({...e,[t]:n})),{});n=function(e,t){const n=Object(l.difference)([...new Set(t.flatMap(Object.keys))],Object.keys(e));return{...e,...n.reduce(((e,n)=>{var r;const a=null!==(r=t.find((e=>void 0!==e[n])))&&void 0!==r?r:{};return e[n]={type:typeof a[n]},e}),{})}}(n,e),R(e),A({rowCount:e.length,rowCountRelation:d.a.EQ}),O(n),k(p.b.LOADED),0===e.length?T(o.i18n.translate("xpack.transform.pivotPreview.PivotPreviewNoDataCalloutBody",{defaultMessage:"The preview request did not return any data. Please ensure the optional query returns data and that values exist for the field used by group-by and aggregation fields."})):T("")}}),[D,P,L]),Object(i.useEffect)((()=>{n.isValid||(R([]),A({rowCount:0,rowCountRelation:d.a.EQ}),T(n.errorMessage))}),[n.isValid]),Object(i.useEffect)((()=>{_()}),[JSON.stringify(t)]),M.length>0){const e=M.map((e=>{const t=F.find((t=>void 0!==Object(p.g)(t,e.id)));return{...e,type:typeof Object(p.g)(t,e.id)}}));F.sort(Object(p.i)(e))}const B=F.slice(S.pageIndex*S.pageSize,(S.pageIndex+1)*S.pageSize),q=Object(i.useMemo)((()=>({rowIndex:e,columnId:t})=>{var n;const r=e-S.pageIndex*S.pageSize,i=B.hasOwnProperty(r)&&null!==(n=B[r][t])&&void 0!==n?n:null;return"object"==typeof i&&null!==i?JSON.stringify(i):null==i?null:[c.a.DATE,c.a.DATE_NANOS].includes(v[t].type)?Object(u.a)(1e3*a()(i).unix()):v[t].type===c.a.BOOLEAN?i?"true":"false":i}),[B,S.pageIndex,S.pageSize,v]);return{...E,chartsButtonVisible:!1,renderCellValue:q}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return A})),n.d(t,"e",(function(){return g})),n.d(t,"c",(function(){return T}));var r=n(2),a=n.n(r),i=n(17);const o=Object(r.createContext)(void 0),s=()=>{const e=Object(r.useContext)(o);if(void 0===e)throw new Error("datePickerContext was used outside of its Provider");return e},l=e=>{const{children:t,...n}=e;return Object(i.jsx)(o.Provider,{value:n},t)};var c=n(71),u=n.n(c),d=n(22),p=n(30),f=n(20);const g=new d.Subject,m=(e={})=>{const{timeRangeSelector:t,autoRefreshSelector:n}=e,{data:{query:{timefilter:{timefilter:a}}}}=s();return Object(r.useEffect)((()=>{!0!==t||a.isTimeRangeSelectorEnabled()?!1===t&&a.isTimeRangeSelectorEnabled()&&a.disableTimeRangeSelector():a.enableTimeRangeSelector(),!0!==n||a.isAutoRefreshSelectorEnabled()?!1===n&&a.isAutoRefreshSelectorEnabled()&&a.disableAutoRefreshSelector():a.enableAutoRefreshSelector()}),[t,n,a]),a};var b=n(18),h=n(0),j=n(19),v=n(94),O=n(56);const y=5e3;function x(e){g.next({lastRefresh:Date.now(),...e?{timeRange:e}:{}})}const w=e=>{var t,n,o;const{isAutoRefreshOnly:l,isLoading:c=!1,showRefresh:g,width:w,flexGroup:E=!0}=e,{data:S,notifications:{toasts:_},uiSettings:C,uiSettingsKeys:T,theme:A,i18n:k}=s(),R=Object(b.useIsWithinMaxBreakpoint)("l"),{timefilter:M,history:F}=S.query.timefilter,[I,N]=Object(v.b)("_g"),L=(D=F,function(){var e,t;return null!==(e=null===(t=D.get())||void 0===t?void 0:t.map((({from:e,to:t})=>({start:e,end:t}))))&&void 0!==e?e:[]});var D;const P=(()=>{const e=m(),t=Object(r.useMemo)((()=>e.getRefreshIntervalUpdate$().pipe(Object(p.map)(e.getRefreshInterval))),[e]);return u()(t,e.getRefreshInterval())})(),B=((e=!1)=>{const t=m(),n=Object(r.useMemo)((()=>e?t.getAbsoluteTime.bind(t):t.getTime.bind(t)),[e,t]),a=Object(r.useMemo)((()=>t.getTimeUpdate$().pipe(Object(p.map)(n),Object(p.distinctUntilChanged)(f.isEqual))),[t,n]);return u()(a,n())})();Object(r.useEffect)((function(){void 0!==(null==I?void 0:I.time)&&M.setTime({from:I.time.from,to:I.time.to})}),[null==I||null===(t=I.time)||void 0===t?void 0:t.from,null==I||null===(n=I.time)||void 0===n?void 0:n.to,null==I||null===(o=I.time)||void 0===o?void 0:o.ts]),Object(r.useEffect)((function(){var e,t;void 0!==(null==I?void 0:I.refreshInterval)&&M.setRefreshInterval({pause:!(null==I||null===(e=I.refreshInterval)||void 0===e||!e.pause),value:null==I||null===(t=I.refreshInterval)||void 0===t?void 0:t.value})}),[null==I?void 0:I.refreshInterval]);const q=Object(r.useCallback)(Object(f.debounce)((e=>{N("refreshInterval",e,!0)}),200),[N]),[z,G]=Object(r.useState)(L()),[V,U]=Object(r.useState)(M.isAutoRefreshSelectorEnabled()),[$,H]=Object(r.useState)(M.isTimeRangeSelectorEnabled()),W=P;Object(r.useEffect)((function(){const e=!(null==I||!I.refreshInterval);W.value<y&&!W.pause&&_.addWarning({title:e?h.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalURLWarningMessage",{defaultMessage:"The refresh interval in the URL is shorter than the minimum supported interval."}):h.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalTimeFilterWarningMessage",{defaultMessage:"The refresh interval in Advanced Settings is shorter than the minimum supported interval."}),text:Object(O.a)(Object(i.jsx)(b.EuiButton,{onClick:q.bind(null,{pause:W.pause,value:y})},Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshResetButton",defaultMessage:"Set to {defaultInterval}",values:{defaultInterval:"5s"}})),{theme:A,i18n:k})},{toastLifeTimeMs:3e4})}),[JSON.stringify(W),JSON.stringify(null==I?void 0:I.refreshInterval),q]);const J=C.get("dateFormat"),K=C.get(T.TIMEPICKER_QUICK_RANGES),Q=Object(r.useMemo)((()=>K.map((({from:e,to:t,display:n})=>({start:e,end:t,label:n})))),[K]);Object(r.useEffect)((()=>{const e=new d.Subscription,t=M.getEnabledUpdated$();return void 0!==t&&e.add(t.subscribe((e=>{U(M.isAutoRefreshSelectorEnabled()),H(M.isTimeRangeSelectorEnabled())}))),function(){e.unsubscribe()}}),[]);const X=Object(r.useCallback)((({start:e,end:t})=>{G(L()),N("time",{from:e,to:t,..."now"===e||"now"===t?{ts:Date.now()}:{}})}),[N]),Y=Object(i.jsx)(a.a.Fragment,null,Object(i.jsx)(b.EuiFlexItem,null,Object(i.jsx)(b.EuiSuperDatePicker,{isLoading:c,start:B.from,end:B.to,isPaused:W.pause,isAutoRefreshOnly:!$||l,refreshInterval:W.value||y,onTimeChange:X,onRefresh:x,onRefreshChange:function({isPaused:e,refreshInterval:t}){!1===e&&t<=0&&q({pause:e,value:5e3}),q({pause:e,value:t})},recentlyUsedRanges:z,dateFormat:J,commonlyUsedRanges:Q,updateButtonProps:{iconOnly:R,fill:!1},width:w})),!0!==g&&$?null:Object(i.jsx)(b.EuiFlexItem,{grow:!1},Object(i.jsx)(b.EuiButton,{fill:!1,color:"primary",iconType:"refresh",onClick:()=>x(),"data-test-subj":"mlDatePickerRefreshPageButton"+(c?" loading":" loaded"),isLoading:c},Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshButton",defaultMessage:"Refresh"})))),Z=E?Object(i.jsx)(b.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Y):Y;return V||$?Z:null};var E=n(36),S=n.n(E),_=(n(37),n(49)),C=n(68);const T={EXCLUDE:"exclude-frozen",INCLUDE:"include-frozen"},A=e=>{const{frozenDataPreference:t,setFrozenDataPreference:n,timefilter:a,dataView:o,query:l,disabled:c,callback:u,apiPath:d}=e,{http:p,notifications:{toasts:f},showFrozenDataTierChoice:g}=s(),m=Object(r.useCallback)((async()=>{try{const e=await async function(e,t,n,r,a,i,o="/internal/file_upload/time_field_range"){try{const s=t.getRuntimeMappings(),l=await async function(e){const{http:t,path:n,...r}=e;return await t.fetch({path:n,method:"POST",body:JSON.stringify(r),version:"1"})}({index:t.getIndexPattern(),timeFieldName:t.timeFieldName,query:i?Object(C.b)(a):a,...Object(_.a)(s)?{runtimeMappings:s}:{},http:r,path:o});if(l.start.epoch&&l.end.epoch)return e.setTime({from:S()(l.start.epoch).toISOString(),to:S()(l.end.epoch).toISOString()}),l;if("number"==typeof l.start&&"number"==typeof l.end)return e.setTime({from:S()(l.start).toISOString(),to:S()(l.end).toISOString()}),{success:!0,start:{epoch:l.start,string:S()(l.start).toISOString()},end:{epoch:l.end,string:S()(l.end).toISOString()}};n.addWarning({title:h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.noResults",{defaultMessage:"No results match your search criteria"})})}catch(e){n.addDanger(h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.errorSettingTimeRangeNotification",{defaultMessage:"An error occurred setting the time range."}))}}(a,o,f,p,l,!1!==g&&t===T.EXCLUDE,d);"function"==typeof u&&void 0!==e&&u(e)}catch(e){f.addDanger(h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.errorSettingTimeRangeNotification",{defaultMessage:"An error occurred setting the time range."}))}}),[a,o,f,p,l,g,t,d,u]),[v,O]=Object(r.useState)(!1),y=Object(r.useCallback)((e=>{n(e),x()}),[n]),x=()=>{O(!1)},w=Object(r.useMemo)((()=>[{id:T.EXCLUDE,label:h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.useFullDataExcludingFrozenMenuLabel",{defaultMessage:"Exclude frozen data tier"})},{id:T.INCLUDE,label:h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.useFullDataIncludingFrozenMenuLabel",{defaultMessage:"Include frozen data tier"})}]),[]),E=Object(r.useMemo)((()=>Object(i.jsx)(b.EuiPanel,null,Object(i.jsx)(b.EuiRadioGroup,{options:w,idSelected:t,onChange:y,compressed:!0}))),[w,t,y]),A=Object(r.useMemo)((()=>!1===g?Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullData",defaultMessage:"Use full range of data."}):t===T.EXCLUDE?Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataExcludingFrozenButtonTooltip",defaultMessage:"Use full range of data excluding frozen data tier."}):Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataIncludingFrozenButtonTooltip",defaultMessage:"Use full range of data including frozen data tier, which might have slower search results."})),[t,g]);return Object(i.jsx)(b.EuiFlexGroup,{responsive:!1,gutterSize:"xs"},Object(i.jsx)(b.EuiToolTip,{content:A},Object(i.jsx)(b.EuiButton,{isDisabled:c,onClick:()=>m(),"data-test-subj":"mlDatePickerButtonUseFullData"},Object(i.jsx)(j.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataButtonLabel",defaultMessage:"Use full data"}))),!1===g?null:Object(i.jsx)(b.EuiFlexItem,{grow:!1},Object(i.jsx)(b.EuiPopover,{id:"mlFullTimeRangeSelectorOption",button:Object(i.jsx)(b.EuiButtonIcon,{display:"base",size:"m",iconType:"boxesVertical","aria-label":h.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.moreOptionsButtonAriaLabel",{defaultMessage:"More options"}),onClick:()=>{O(!v)}}),isOpen:v,closePopover:x,panelPaddingSize:"none",anchorPosition:"downRight"},E)))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return m})),n(4);var r=n(96),a=n(2),i=n(23),o=n(20),s=n(80),l=n(43),c=(n(22),n(30),n(49),n(17));const u=new Set(["_a","_g"]);function d(e){return u.has(e)}function p(e){const t={},n=Object(r.parse)(e,{sort:!1});try{Object.keys(n).forEach((e=>{d(e)?t[e]=Object(l.decode)(n[e]):t[e]=n[e]}))}catch(e){console.error("Could not read url state",e)}return t}const f=Object(a.createContext)({searchString:"",setUrlState:()=>{}}),{Provider:g}=f,m=({children:e})=>{const t=Object(i.useHistory)(),{search:n}=Object(i.useLocation)(),u=Object(a.useRef)(n);Object(a.useEffect)((()=>{u.current=n}),[n]);const f=Object(a.useCallback)(((e,n,a,i)=>{const c=u.current,f=p(c),g=Object(r.parse)(c,{sort:!1});if(Object.prototype.hasOwnProperty.call(f,e)||(f[e]={}),"string"==typeof n){if(Object(o.isEqual)(Object(s.a)(f,`${e}.${n}`),a))return c;f[e][n]=a}else{const t=n;Object.keys(t).forEach((n=>{f[e][n]=t[n]}))}try{const e=Object(r.stringify)(g,{sort:!1,encode:!1});if(Object.keys(f).forEach((e=>{d(e)?g[e]=Object(l.encode)(f[e]):g[e]=f[e]})),e!==Object(r.stringify)(g,{sort:!1,encode:!1})){const e=Object(r.stringify)(g,{sort:!1});u.current=e,i?t.replace({search:e}):t.push({search:e})}}catch(e){console.error("Could not save url state",e)}}),[]);return Object(c.jsx)(g,{value:{searchString:n,setUrlState:f}},e)},b=e=>{const{searchString:t,setUrlState:n}=Object(a.useContext)(f);return[Object(a.useMemo)((()=>{const n=p(t);if("object"==typeof n)return n[e]}),[t]),Object(a.useCallback)(((t,r,a)=>{n(e,t,r,a)}),[e,n])]}},function(e,t,n){"use strict";function r(e){let t=0,n=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t<0?-2*t:t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";const r=n(118),a=n(119),i=n(120);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function l(e,t){return t.decode?a(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const a="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const a of e.split("&")){let[e,o]=i(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}t.extract=d,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",a,"]"].join("")]:[...n,[s(t,e),"[",s(a,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[s(t,e),"=",s(r,e)].join("")]:[[n,s(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const i=Object.keys(a);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const a=e[n];return void 0===a?"":null===a?s(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):s(n,t)+"="+s(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:l(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=u(e.url).split("?")[0]||"",a=t.extract(e.url),i=t.parse(a,{sort:!1}),o=Object.assign(i,e.query);let l=t.stringify(o,n);l&&(l=`?${l}`);let c=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c=`#${s(e.fragmentIdentifier,n)}`),`${r}${l}${c}`}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(107),a=n(108),i=n(73),o=n(104),s=n(109);function l(e,t){switch(e){case i.a.FILTER:return Object(o.a)(t);case i.a.TOP_METRICS:return Object(s.a)(t);case i.a.PERCENTILES:return Object(a.a)(t);case i.a.TERMS:return Object(r.a)(t);default:return t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o}));const r=".keyword",a=(e,t)=>t.has(`${e}${r}`),i=(e,t)=>e.endsWith(r)&&t.has(o(e)),o=e=>e.replace(new RegExp(`${r}$`),"")},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(21),a=n(22),i=n(3),o=n(48);const s=(e,t)=>{const{data:n}=Object(o.a)();return Object(r.useQuery)([i.r.DATA_SEARCH,e],(async({signal:t})=>{const{rawResponse:r}=await Object(a.lastValueFrom)(n.search.search({params:e},{abortSignal:t}));return r}),{enabled:t})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(49);function a(e){return Object(r.a)(e,["pivot"])}function i(e){return Object(r.a)(e,["latest"])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n(2);var r=n(23),a=n(81),i=n(17);const o=()=>Object(i.jsx)(r.Redirect,{to:`/${a.a.HOME}`}),s=({savedObjectId:e})=>Object(i.jsx)(r.Redirect,{push:!0,to:`/${a.a.CREATE_TRANSFORM}/${e}`})},function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return C})),n.d(t,"f",(function(){return A})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return Le})),n.d(t,"c",(function(){return Ve}));const r="*",a="kuery";var i=n(20),o=n(78),s=n(64),l=n(51),c=n(52),u=n(3),d=n(2),p=n.n(d),f=n(0),g=n(60),m=n(48);const b={toAPIConfig(e){var t,n;return{unique_key:null!==(t=e.unique_key)&&void 0!==t&&t.length?e.unique_key.map((e=>e.value)):[],sort:void 0!==(null===(n=e.sort)||void 0===n?void 0:n.value)?e.sort.value:""}},toUIConfig(){}};function h(e){var t;const n=!(null==e||null===(t=e.unique_key)||void 0===t||!t.length)&&"string"==typeof(null==e?void 0:e.sort)&&(null==e?void 0:e.sort.length)>0;return{isValid:n,...n?{}:{errorMessage:f.i18n.translate("xpack.transform.latestPreview.latestPreviewIncompleteConfigCalloutBody",{defaultMessage:"Please choose at least one unique key and sort field."})}}}var j=n(57),v=n(62),O=n(87),y=n(73),x=n(55);function w(e,t){const n={...e};if(void 0!==t&&(n.parentAgg=t),void 0!==n.subAggs){const e={};for(const[t,r]of Object.entries(n.subAggs))e[t]=w(r,n);n.subAggs=e}return n}function E(e){return e.some((e=>Object(c.k)(e)&&!e.isValid()||e.subAggs&&E(Object.values(e.subAggs))))}function S(e){const t=Object.values(e.aggregations).length>0&&Object.values(e.group_by).length>0&&!E(Object(O.a)(e.aggregations));return{isValid:t,...t?{}:{errorMessage:f.i18n.translate("xpack.transform.pivotPreview.PivotPreviewIncompleteConfigCalloutBody",{defaultMessage:"Please choose at least one group-by field and aggregation."})}}}function _(e){let t=e;for(;void 0!==t.parentAgg;)t=t.parentAgg;return t}function C(e,t,n){var r,a,d;if(e.runtimeMappings=Object(o.a)(n,null==t||null===(r=t.source)||void 0===r?void 0:r.runtime_mappings),void 0===t)return e;Object(s.c)(t)&&(e.transformFunction=u.k.PIVOT,e.aggList=Object.keys(t.pivot.aggregations).reduce(((e,n)=>{const r=t.pivot.aggregations[n];return e[n]=Object(c.g)(r,n),e}),{}),e.groupByList=Object.keys(t.pivot.group_by).reduce(((e,n)=>{const r=t.pivot.group_by[n],a=Object.keys(r)[0];return e[n]={agg:a,aggName:n,dropDownName:n,...r[a]},e}),{}),e.previewRequest={pivot:t.pivot},e.validationStatus=S(t.pivot)),Object(s.b)(t)&&(e.transformFunction=u.k.LATEST,e.latestConfig={unique_key:t.latest.unique_key.map((e=>{var t,r;return{value:e,label:n&&null!==(t=null===(r=n.fields.find((t=>t.name===e)))||void 0===r?void 0:r.displayName)&&void 0!==t?t:e}})),sort:{value:t.latest.sort,label:n&&null!==(a=null===(d=n.fields.find((e=>e.name===t.latest.sort)))||void 0===d?void 0:d.displayName)&&void 0!==a?a:t.latest.sort}},e.previewRequest={latest:t.latest},e.validationStatus=h(t.latest));const p=t.source.query;return void 0===p||Object(i.isEqual)(p,l.x)||(e.isAdvancedSourceEditorEnabled=!0,e.searchQuery=p,e.sourceConfigUpdated=!0),e.valid=!0,e}function T(e,t,n){if(void 0!==t[e])return[f.i18n.translate("xpack.transform.stepDefineForm.aggExistsErrorMessage",{defaultMessage:"An aggregation configuration with the name '{aggName}' already exists.",values:{aggName:e}})];if(void 0!==n[e])return[f.i18n.translate("xpack.transform.stepDefineForm.groupByExistsErrorMessage",{defaultMessage:"A group by configuration with the name '{aggName}' already exists.",values:{aggName:e}})];const r=[];let a;if(e.split(".").forEach((i=>{a=void 0===a?i:`${a}.${i}`,void 0===t[a]&&void 0===n[a]||r.push(f.i18n.translate("xpack.transform.stepDefineForm.nestedConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{aggNameCheck}'.",values:{aggName:e,aggNameCheck:a}}))})),r.length>0)return r;e:for(const n of Object.keys(t)){const t=n.split(".");let a;for(const i of t)if(a=void 0===a?i:`${a}.${i}`,a===e){r.push(f.i18n.translate("xpack.transform.stepDefineForm.nestedAggListConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{aggListName}'.",values:{aggName:e,aggListName:n}}));break e}}if(r.length>0)return r;e:for(const t of Object.keys(n)){const n=t.split(".");let a;for(const i of n)if(a=void 0===a?i:`${a}.${i}`,a===e){r.push(f.i18n.translate("xpack.transform.stepDefineForm.nestedGroupByListConflictErrorMessage",{defaultMessage:"Couldn't add configuration '{aggName}' because of a nesting conflict with '{groupByListName}'.",values:{aggName:e,groupByListName:t}}));break e}}return r}function A(e){return{transformFunction:u.k.PIVOT,latestConfig:{},aggList:{},groupByList:{},isAdvancedPivotEditorEnabled:!1,isAdvancedSourceEditorEnabled:!1,isDatePickerApplyEnabled:!1,searchLanguage:a,searchString:void 0,searchQuery:void 0!==e.savedSearch?e.combinedQuery:r,sourceConfigUpdated:!1,valid:!1,validationStatus:{isValid:!1},previewRequest:void 0,runtimeMappings:void 0,runtimeMappingsUpdated:!1,isRuntimeMappingsEditorEnabled:!1}}n(88),n(90);var k=n(91),R=n(22),M=n(18),F=n(67),I=n(93),N=n(110),L=n(94);var D=n(66),P=n(61);var B=n(68),q=n(98),z=n(54),G=n(21),V=n(99);const U=(e,t,n,r,a)=>{const{analytics:i}=Object(m.a)(),s=Object(d.useRef)(window.performance.now()),c=Object(d.useMemo)((()=>e.getIndexPattern()),[e]),p=Object(m.b)(),f=Object(B.c)(e.timeFieldName,null==r?void 0:r.from,null==r?void 0:r.to,t),b=Object(d.useMemo)((()=>r&&e.timeFieldName?f[0]:l.x),[f,e,r]),h={bool:{filter:f}},{error:j,data:v,isError:O,isLoading:y}=Object(V.a)({index:c,body:{fields:["*"],_source:!1,query:{function_score:{query:b,random_score:{}}},size:500}},!(Array.isArray(a)||void 0!==e.timeFieldName&&void 0===r));Object(d.useEffect)((()=>{if(y&&!O)k(""),M(F.b.LOADING);else if(null!==j)k(Object(z.a)(j)),M(F.b.ERROR);else if(!y&&!O&&void 0!==v){const e=c.includes(":"),t=v.hits.hits.every((e=>void 0===e.fields));A(e&&t),M(F.b.LOADED)}}),[v,j,O,y]);const x=Object(d.useMemo)((()=>{let t=Array.isArray(a)?a:[];if(void 0===a&&v){const e=v.hits.hits.map((e=>{var t;return Object(F.h)(null!==(t=e.fields)&&void 0!==t?t:{})}));t=[...new Set(e.map(Object.keys).flat(1))]}const n=Object(F.f)(e);return t.filter((e=>n.includes(e))).sort()}),[v,a]),w=Object(d.useMemo)((()=>{if(void 0===x)return[];let t=[];return void 0!==n&&(t=Object.keys(n).map((e=>{const t=n[e];return{id:e,schema:Object(F.c)(t.type)}}))),x.forEach((n=>{const r=e.fields.getByName(n);if(null==r||!r.runtimeField){const e=Object(F.d)(r);t.push({id:n,schema:e})}})),t.sort(((e,t)=>e.id.localeCompare(t.id)))}),[x,e.fields,n]),E=Object(F.k)(w),{chartsVisible:S,pagination:_,resetPagination:C,setColumnCharts:T,setCcsWarning:A,setErrorMessage:k,setRowCountInfo:R,setStatus:M,setTableItems:I,sortingColumns:N,tableItems:L}=E;Object(d.useEffect)((()=>{C()}),[JSON.stringify([t,r])]);const D=N.reduce(((e,t)=>(e[t.id]={order:t.direction},e)),{}),{error:P,data:U,isError:$,isLoading:H}=Object(V.a)({index:c,body:{fields:["*"],_source:!1,query:Object(l.p)(t)?b:h,from:_.pageIndex*_.pageSize,size:_.pageSize,...Object.keys(D).length>0?{sort:D}:{},...Object(o.b)(n)?{runtime_mappings:n}:{}}},void 0!==x);Object(d.useEffect)((()=>{if(H&&!$)k(""),M(F.b.LOADING);else if(null!==P)k(Object(z.a)(P)),M(F.b.ERROR);else if(!H&&!$&&void 0!==U){const e=c.includes(":"),t=U.hits.hits.every((e=>void 0===e.fields)),n=U.hits.hits.map((e=>{var t;return Object(F.h)(null!==(t=e.fields)&&void 0!==t?t:{})}));A(e&&t),R({rowCount:"number"==typeof U.hits.total?U.hits.total:U.hits.total.value,rowCountRelation:"number"==typeof U.hits.total?"eq":U.hits.total.relation}),I(n),M(F.b.LOADED)}}),[P,$,H]);const W=new Set(e.fields.map((e=>e.name))),{error:J,data:K}=((e,t,n,r,a,i=g.a)=>{const{http:o}=Object(m.a)();return Object(G.useQuery)([u.r.GET_HISTOGRAMS_FOR_FIELDS,{dataViewTitle:e,fields:t,query:n,runtimeMappings:r,samplerShardSize:i}],(({signal:a})=>o.post(Object(u.u)(`field_histograms/${e}`),{body:JSON.stringify({query:n,fields:t,samplerShardSize:i,...void 0!==r?{runtimeMappings:r}:{}}),version:"1",signal:a})),{enabled:a})})(c,w.filter((e=>E.visibleColumns.includes(e.id))).map((e=>{const t=e.id;return Object(q.a)(t,W)?{fieldName:`${t}.keyword`,type:Object(F.e)(void 0)}:{fieldName:t,type:Object(F.e)(e.schema)}})),Object(l.p)(t)?b:h,n,S);Object(d.useEffect)((()=>{null!==J&&Object(F.j)(J,p)}),[J]),Object(d.useEffect)((()=>{K&&T(K.map((e=>({...e,...Object(q.b)(e.id,W)?{id:Object(q.c)(e.id)}:{}}))))}),[K]);const Q=Object(F.l)(e,_,L);if(E.status===F.b.LOADED&&void 0!==x&&Array.isArray(K)&&K.length>0&&void 0!==s.current){const e=window.performance.now()-s.current;s.current=void 0,function(e,t){e.reportEvent("performance_metric",t)}(i,{eventName:"transformLoadIndexPreview",duration:e})}return{...E,renderCellValue:Q}};var $=n(92),H=n(17);const W=f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalTitle",{defaultMessage:"Unapplied changes"}),J=f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalTitle",{defaultMessage:"Edits will be lost"}),K=f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalBodyText",{defaultMessage:"The changes in the advanced editor haven't been applied yet. By disabling the advanced editor you will lose your edits."}),Q=f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalBodyText",{defaultMessage:"By switching back to the query bar you will lose your edits."}),X=f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalConfirmButtonText",{defaultMessage:"Disable advanced editor"}),Y=f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalConfirmButtonText",{defaultMessage:"Switch to query bar"}),Z=f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalCancelButtonText",{defaultMessage:"Cancel"}),ee=({onCancel:e,onConfirm:t,type:n})=>Object(H.jsx)(M.EuiConfirmModal,{title:"pivot"===n?W:J,onCancel:e,onConfirm:t,cancelButtonText:Z,confirmButtonText:"pivot"===n?X:Y,buttonColor:"danger",defaultFocusedButton:"confirm"},Object(H.jsx)("p",null,"pivot"===n?K:Q)),te=({advancedSourceEditor:{actions:{setAdvancedSourceEditorSwitchModalVisible:e,setSourceConfigUpdated:t,toggleAdvancedSourceEditor:n},state:{isAdvancedSourceEditorEnabled:a,isAdvancedSourceEditorSwitchModalVisible:i,sourceConfigUpdated:o,advancedEditorSourceConfigLastApplied:s,advancedEditorSourceConfig:l}},searchBar:{actions:{setSearchQuery:c}}})=>{const u=(e=!1)=>{!0===e&&(c(r),t(!1)),n(e)};return Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiSwitch,{label:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSourceConfigSwitchLabel",{defaultMessage:"Edit JSON query"}),checked:a,onChange:()=>{!a||!o&&l===s?u():e(!0)},"data-test-subj":"transformAdvancedQueryEditorSwitch"}),i&&Object(H.jsx)(ee,{onCancel:()=>e(!1),onConfirm:()=>{e(!1),u(!0)},type:"source"}))};var ne=n(24);const re=({searchBar:{actions:{setSearchString:e}},advancedSourceEditor:{actions:{setAdvancedEditorSourceConfig:t,setAdvancedSourceEditorApplyButtonEnabled:n},state:{advancedEditorSourceConfig:r,advancedEditorSourceConfigLastApplied:a}}})=>Object(H.jsx)("div",{"data-test-subj":"transformAdvancedRuntimeMappingsEditor"},Object(H.jsx)(ne.CodeEditor,{height:250,languageId:"json",onChange:r=>{if(e(void 0),t(r),a!==r)try{JSON.parse(r),n(!0)}catch(e){n(!1)}else n(!1)},options:{ariaLabel:f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorAriaLabel",{defaultMessage:"Advanced query editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:r}));var ae=n(46);const ie=({dataView:e,searchBar:t})=>{const{actions:{searchChangeHandler:n,searchSubmitHandler:r,setQueryErrorMessage:i},state:{queryErrorMessage:o,searchInput:s}}=t,{uiSettings:l,notifications:c,http:d,docLinks:p,data:g,dataViews:b,storage:h,unifiedSearch:j,usageCollection:v}=Object(m.a)();return Object(H.jsx)(M.EuiInputPopover,{style:{maxWidth:"100%"},closePopover:()=>i(void 0),input:Object(H.jsx)(ae.QueryStringInput,{bubbleSubmitEvent:!0,query:s,indexPatterns:[e],onChange:n,onSubmit:r,placeholder:s.language===a?f.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderKql",{defaultMessage:"e.g. {example}",values:{example:'method : "GET" or status : "404"'}}):f.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderLucene",{defaultMessage:"e.g. {example}",values:{example:"method:GET OR status:404"}}),disableAutoFocus:!0,dataTestSubj:"transformQueryInput",languageSwitcherPopoverAnchorPosition:"rightDown",appName:u.h.getI18nName(),deps:{unifiedSearch:j,notifications:c,http:d,docLinks:p,uiSettings:l,data:g,dataViews:b,storage:h,usageCollection:v}}),isOpen:(null==o?void 0:o.query)===s.query&&""!==(null==o?void 0:o.message)},Object(H.jsx)(M.EuiCode,null,f.i18n.translate("xpack.transform.stepDefineForm.invalidKuerySyntaxErrorMessageQueryBar",{defaultMessage:"Invalid query: {queryErrorMessage}",values:{queryErrorMessage:null==o?void 0:o.message.split("\n")[0]}})))};var oe=n(19);const se=Object(d.memo)((({actions:{convertToJson:e,setAdvancedRuntimeMappingsConfig:t,setRuntimeMappingsEditorApplyButtonEnabled:n},state:{advancedEditorRuntimeMappingsLastApplied:r,advancedRuntimeMappingsConfig:a,xJsonMode:i}})=>Object(H.jsx)("div",{"data-test-subj":"transformAdvancedRuntimeMappingsEditor"},Object(H.jsx)(ne.CodeEditor,{height:250,languageId:"json",onChange:a=>{if(t(a),r!==a)try{const t=""===a,r=t?{}:JSON.parse(e(a));n(t||Object(o.b)(r))}catch(e){n(!1)}else n(!1)},options:{ariaLabel:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorAriaLabel",{defaultMessage:"Advanced pivot editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:a}))),((e,t)=>Object(i.isEqual)(le(e),le(t))));function le(e){return[e.state.advancedEditorRuntimeMappingsLastApplied,e.state.advancedRuntimeMappingsConfig]}const ce=f.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalTitle",{defaultMessage:"Edits will be lost"}),ue=f.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalCancelButtonText",{defaultMessage:"Cancel"}),de=f.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalConfirmButtonText",{defaultMessage:"Close editor"}),pe=f.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalBodyText",{defaultMessage:"The changes in the advanced editor haven't been applied yet. By closing the editor you will lose your edits."}),fe=({onCancel:e,onConfirm:t})=>Object(H.jsx)(M.EuiConfirmModal,{title:ce,onCancel:e,onConfirm:t,cancelButtonText:ue,confirmButtonText:de,buttonColor:"danger",defaultFocusedButton:"confirm"},Object(H.jsx)("p",null,pe)),ge=e=>{const{actions:{toggleRuntimeMappingsEditor:t,setRuntimeMappingsEditorSwitchModalVisible:n},state:{isRuntimeMappingsEditorEnabled:r,isRuntimeMappingsEditorSwitchModalVisible:a,advancedEditorRuntimeMappingsLastApplied:i,advancedRuntimeMappingsConfig:o}}=e,s=(e=!1)=>{t(e)};return Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiSwitch,{label:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorRuntimeFieldsSwitchLabel",{defaultMessage:"Edit runtime fields"}),checked:r,onChange:()=>{r&&o!==i?n(!0):s()},"data-test-subj":"transformAdvancedRuntimeMappingsEditorSwitch"}),a&&Object(H.jsx)(fe,{onCancel:()=>n(!1),onConfirm:()=>{n(!1),s(!0)}}))},me="220px",be=f.i18n.translate("xpack.transform.indexPreview.copyRuntimeFieldsClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the runtime fields to the clipboard."}),he=e=>{const{actions:{applyRuntimeMappingsEditorChanges:t},state:{runtimeMappings:n,advancedRuntimeMappingsConfig:r,isRuntimeMappingsEditorApplyButtonEnabled:a,isRuntimeMappingsEditorEnabled:i}}=e.runtimeMappingsEditor,{actions:{deleteAggregation:o,deleteGroupBy:s,updateAggregation:c},state:{groupByList:u,aggList:d}}=e.pivotConfig;return Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:f.i18n.translate("xpack.transform.stepDefineForm.runtimeFieldsLabel",{defaultMessage:"Runtime fields"})},Object(H.jsx)(M.EuiFlexGroup,{alignItems:"baseline",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!0},void 0!==n&&Object.keys(n).length>0?Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.runtimeFieldsListLabel",defaultMessage:"{runtimeFields}",values:{runtimeFields:Object.keys(n).join(",")}}):Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.noRuntimeMappingsLabel",defaultMessage:"No runtime field"}),i&&Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(se,e.runtimeMappingsEditor))),Object(H.jsx)(M.EuiFlexItem,{grow:!1,style:{width:me}},Object(H.jsx)(M.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(ge,e.runtimeMappingsEditor)),Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiCopy,{beforeMessage:be,textToCopy:null!=r?r:""},(e=>Object(H.jsx)(M.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":be})))))),i&&Object(H.jsx)(M.EuiFlexItem,{style:{width:me}},Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiText,{size:"xs"},f.i18n.translate("xpack.transform.stepDefineForm.advancedRuntimeFieldsEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the runtime fields of the transform configuration."})),Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:()=>{const e=""===r?{}:JSON.parse(r),a=n,i=t=>(null==a?void 0:a.hasOwnProperty(t))&&!e.hasOwnProperty(t);t(),Object.keys(u).forEach((t=>{const n=u[t];Object(l.v)(n)&&null!=a&&a.hasOwnProperty(n.field)&&!e.hasOwnProperty(n.field)&&s(t)})),Object.keys(d).forEach((e=>{const t=d[e];if(Object(x.h)(t))if(Array.isArray(t.field)){const n=t.field.filter((e=>!i(e)));c(e,{...t,field:n})}else Object(v.a)(t.field)&&i(t.field)&&o(e)}))},disabled:!a,"data-test-subj":"transformRuntimeMappingsApplyButton"},f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorApplyButtonText",{defaultMessage:"Apply changes"}))))))),Object(H.jsx)(M.EuiSpacer,{size:"s"}))};var je=n(77),ve=n(26);const{useXJsonMode:Oe}=ve.XJson,ye=new je.a;var xe=n(35);const{useXJsonMode:we}=ve.XJson,Ee=new je.a,Se=({overrides:e,onChange:t,searchItems:n})=>{const r={...A(n),...e},{dataView:i}=n,[o,s]=Object(d.useState)(r.transformFunction),p=((e,t)=>{const n=Object(d.useMemo)((()=>void 0!==t.timeFieldName&&""!==t.timeFieldName),[t.timeFieldName]),r=Object(I.f)({timeRangeSelector:n,autoRefreshSelector:!1}),[a,i]=Object(d.useState)(e.isDatePickerApplyEnabled),[o,s]=Object(d.useState)();return Object(d.useEffect)((()=>{const e=()=>s(r.getTime()),t=Object(R.merge)(r.getAutoRefreshFetch$(),r.getTimeUpdate$(),I.e).subscribe(e),n=r.getEnabledUpdated$().subscribe(e);return()=>{t.unsubscribe(),n.unsubscribe()}}),[]),{actions:{setDatePickerApplyEnabled:i},state:{isDatePickerApplyEnabled:a,hasValidTimeField:n,timeRange:o,timeRangeMs:Object(d.useMemo)((()=>{const e=r.getActiveBounds();if(void 0!==e&&void 0!==e.min&&void 0!==e.max)return{from:e.min.valueOf(),to:e.max.valueOf()}}),[o])}}})(r,i),f=((e,t)=>{const[n,r]=Object(d.useState)({query:e.searchString||"",language:e.searchLanguage}),[i,o]=Object(d.useState)(e.searchLanguage),[s,c]=Object(d.useState)(e.searchString),[u,p]=Object(d.useState)(e.searchQuery),[f,g]=Object(d.useState)(void 0),m=Object(l.j)(u);return{actions:{searchChangeHandler:e=>r(e),searchSubmitHandler:e=>{o(e.language),c(""!==e.query?e.query:void 0);try{switch(e.language){case a:return void p(Object(xe.toElasticsearchQuery)(Object(xe.fromKueryExpression)(e.query),t));case"lucene":return void p(Object(xe.luceneStringToDsl)(e.query))}}catch(t){g({query:e.query,message:t.message})}},setQueryErrorMessage:g,setSearchInput:r,setSearchLanguage:o,setSearchQuery:p,setSearchString:c},state:{queryErrorMessage:f,transformConfigQuery:m,searchInput:n,searchLanguage:i,searchQuery:u,searchString:s}}})(r,i),E=((e,t)=>{const n=Object(m.b)(),{aggOptions:r,aggOptionsData:a,groupByOptions:i,groupByOptionsData:o,fields:s}=Object(d.useMemo)((()=>Object(k.b)(t,e.runtimeMappings)),[e.runtimeMappings,t]),[u,p]=Object(d.useState)(e.aggList),[f,g]=Object(d.useState)(e.groupByList),b=Object(d.useCallback)((e=>{const t=e[0].label,r=o[t],a=r.aggName,i=T(a,u,f);i.length>0?i.forEach((e=>n.addDanger(e))):(f[a]=r,g({...f}))}),[u,f,o,n]),h=Object(d.useCallback)(((e,t)=>{const r={...f};delete r[e];const a=T(t.aggName,u,r);a.length>0?a.forEach((e=>n.addDanger(e))):(r[t.aggName]=t,g(r))}),[u,f,n]),E=Object(d.useCallback)((e=>{delete f[e],g({...f})}),[f]),C=Object(d.useCallback)((e=>{const t=e[0].label,r=a[t];let i=r.aggName;if(Object(c.i)(r)){let e=[...new Set(Object.values(f).map((e=>Object(l.v)(e)?e.field:void 0)))].find((e=>{var t;return(null===(t=s.find((t=>t.name===e)))||void 0===t?void 0:t.type)===j.b.DATE}));e||(e=[...new Set(Object.values(u).map((e=>Object(x.h)(e)?e.field:void 0)).flat().filter(v.a))].find((e=>{var t;return(null===(t=s.find((t=>t.name===e)))||void 0===t?void 0:t.type)===j.b.DATE}))),e&&(r.aggConfig.sortField=e,r.aggConfig.sortSettings={},r.aggConfig.sortSettings.order="desc")}if(u[i]&&i===y.a.TOP_METRICS){const e=new RegExp(`^${y.a.TOP_METRICS}(\\d)*$`),t=Object.keys(u).reduce(((t,n)=>{const r=n.match(e);if(!r||!r[1])return t;const a=Number(r[1]);return a>t?a:t}),0);i=`${y.a.TOP_METRICS}${t+1}`,r.aggName=i}const o=T(i,u,f);o.length>0?o.forEach((e=>n.addDanger(e))):(u[i]=r,p({...u}))}),[u,a,f,n,s]),A=Object(d.useCallback)(((e,t)=>{const r={...u};delete r[e];const a=T(t.aggName,r,f);a.length>0?a.forEach((e=>n.addDanger(e))):(r[t.aggName]=t,p(r))}),[u,f,n]),R=Object(d.useCallback)(((e,t)=>{var r;if(!e.isSubAggsSupported)throw new Error(`Aggregation "${e.agg}" does not support sub-aggregations`);const i=t[0].label,o=a[i];e.subAggs=null!==(r=e.subAggs)&&void 0!==r?r:{};const s=T(o.aggName,e.subAggs,{});if(s.length>0)return void s.forEach((e=>n.addDanger(e)));e.subAggs[o.aggName]=o;const l=w(_(e));A(l.aggName,l)}),[a,n,A]),M=Object(d.useCallback)(((e,t)=>{const r=t.parentAgg;if(!r||!r.subAggs)throw new Error("No parent aggregation reference found");const{[e]:a,...i}=r.subAggs,o=T(t.aggName,i,{});if(o.length>0)return void o.forEach((e=>n.addDanger(e)));r.subAggs={...i,[t.aggName]:t};const s=w(_(t));A(s.aggName,s)}),[n,A]),F=Object(d.useCallback)(((e,t)=>{if(!e.subAggs||!e.subAggs[t])throw new Error("Unable to delete a sub-agg");delete e.subAggs[t];const n=w(_(e));A(n.aggName,n)}),[A]),I=Object(d.useCallback)((e=>{delete u[e],p({...u})}),[u]),N=Object(d.useMemo)((()=>Object(O.a)(u)),[u]),L=Object(d.useMemo)((()=>Object(O.a)(f)),[f]),D=Object(d.useMemo)((()=>Object(l.i)(N,L)),[N,L]),P=Object(d.useMemo)((()=>S(D.pivot)),[D]),B=Object(d.useMemo)((()=>({addAggregation:C,addGroupBy:b,addSubAggregation:R,updateSubAggregation:M,deleteSubAggregation:F,deleteAggregation:I,deleteGroupBy:E,setAggList:p,setGroupByList:g,updateAggregation:A,updateGroupBy:h})),[C,b,R,I,E,F,A,h,M]);return Object(d.useMemo)((()=>({actions:B,state:{aggList:u,aggOptions:r,aggOptionsData:a,groupByList:f,groupByOptions:i,groupByOptionsData:o,pivotAggsArr:N,pivotGroupByArr:L,validationStatus:P,requestPayload:D,fields:s}})),[B,u,r,a,f,i,o,N,L,P,D,s])})(r,i),C=function(e,t,n){const[r,a]=Object(d.useState)({unique_key:e.unique_key,sort:e.sort}),{data:i}=Object(m.a)(),{uniqueKeyOptions:o,sortFieldOptions:s}=Object(d.useMemo)((()=>{const e=i.search.aggs.createAggConfigs(t,[{type:"terms"}]);return function(e,t,n){const r=t.aggs[0],a=r.type.params.find((e=>"field"===e.type)),i=a?a.getAvailableFields(r).filter((e=>void 0===e.runtimeField)):[],o=new Set(["_source","_type","_index","_id","_version","_score"]),s=n?Object.entries(n).map((([e,t])=>({label:e,value:e,field:{id:e,type:t.type}}))):[],l=i.filter((e=>!o.has(e.name)&&!Object(g.c)(e))).map((e=>{var t;return{label:e.displayName,value:e.name,field:{id:e.name,type:Array.isArray(e.esTypes)&&(null===(t=e.esTypes)||void 0===t?void 0:t.length)>0?e.esTypes[0]:"keyword"}}})),c=n?Object.entries(n).filter((([e,t])=>"date"===t.type)).map((([e,t])=>({label:e,value:e,field:{id:e,type:t.type}}))):[],u=e.fields.filter((e=>!o.has(e.name)&&e.sortable&&"date"===e.type)).map((e=>{var t;return{label:e.displayName,value:e.name,field:{id:e.name,type:Array.isArray(e.esTypes)&&(null===(t=e.esTypes)||void 0===t?void 0:t.length)>0?e.esTypes[0]:"keyword"}}})),d=(e,t)=>e.label.localeCompare(t.label);return{uniqueKeyOptions:[...l,...s].sort(d),sortFieldOptions:[...u,...c].sort(d)}}(t,e,n)}),[t,i.search.aggs,n]),l=Object(d.useCallback)((e=>a({...r,...e})),[r]),c=Object(d.useMemo)((()=>{const e=b.toAPIConfig(r);return e?{latest:e}:void 0}),[r]),u=Object(d.useMemo)((()=>h(null==c?void 0:c.latest)),[null==c?void 0:c.latest]);return{config:r,uniqueKeyOptions:o,sortFieldOptions:s,updateLatestFunctionConfig:l,validationStatus:u,requestPayload:c}}(r.latestConfig,i,null==r?void 0:r.runtimeMappings),M=Object(l.h)(i,f.state.transformConfigQuery,E.state.requestPayload,null==r?void 0:r.runtimeMappings),F=((e,t)=>{const n=JSON.stringify(t.pivot,null,2),[r,a]=Object(d.useState)(!1),[i,o]=Object(d.useState)(!1),[s,l]=Object(d.useState)(e.isAdvancedPivotEditorEnabled),[c,u]=Object(d.useState)(n),{convertToJson:p,setXJson:f,xJson:g}=Oe(n);return Object(d.useEffect)((()=>{f(n)}),[f,n]),{actions:{convertToJson:p,setAdvancedEditorConfig:f,setAdvancedEditorConfigLastApplied:u,setAdvancedEditorSwitchModalVisible:a,setAdvancedPivotEditorApplyButtonEnabled:o,setAdvancedPivotEditorEnabled:l,toggleAdvancedEditor:()=>{f(g),l(!s),o(!1),!1===s&&u(g)}},state:{advancedEditorConfig:g,advancedEditorConfigLastApplied:c,isAdvancedEditorSwitchModalVisible:r,isAdvancedPivotEditorApplyButtonEnabled:i,isAdvancedPivotEditorEnabled:s,xJsonMode:ye}}})(r,M),N=((e,t)=>{const n=JSON.stringify(t.source.query,null,2),[r,a]=Object(d.useState)(e.sourceConfigUpdated),[i,o]=Object(d.useState)(!1),[s,l]=Object(d.useState)(e.isAdvancedSourceEditorEnabled),[c,u]=Object(d.useState)(!1),[p,f]=Object(d.useState)(n),[g,m]=Object(d.useState)(n);return{actions:{applyAdvancedSourceEditorChanges:()=>{const e=JSON.parse(g),t=JSON.stringify(e,null,2);a(!0),m(t),f(t),u(!1)},setAdvancedSourceEditorApplyButtonEnabled:u,setAdvancedSourceEditorEnabled:l,setAdvancedEditorSourceConfig:m,setAdvancedEditorSourceConfigLastApplied:f,setAdvancedSourceEditorSwitchModalVisible:o,setSourceConfigUpdated:a,toggleAdvancedSourceEditor:(e=!1)=>{!0===e&&a(!1),!1===s&&f(g),l(!s),u(!1)}},state:{advancedEditorSourceConfig:g,advancedEditorSourceConfigLastApplied:p,isAdvancedSourceEditorApplyButtonEnabled:c,isAdvancedSourceEditorEnabled:s,isAdvancedSourceEditorSwitchModalVisible:i,sourceConfigUpdated:r}}})(r,M),L=(e=>{const t=JSON.stringify(e.runtimeMappings,null,2),[n,r]=Object(d.useState)(e.runtimeMappingsUpdated),[a,i]=Object(d.useState)(e.runtimeMappings),[o,s]=Object(d.useState)(!1),[l,c]=Object(d.useState)(e.isRuntimeMappingsEditorEnabled),[u,p]=Object(d.useState)(!1),[f,g]=Object(d.useState)(t),{convertToJson:m,setXJson:b,xJson:h}=we(null!=t?t:"");return{actions:{applyRuntimeMappingsEditorChanges:()=>{const e=""===h?{}:JSON.parse(h),t=JSON.stringify(e,null,2);r(!0),i(e),b(t),g(t),p(!1)},setRuntimeMappingsEditorApplyButtonEnabled:p,setRuntimeMappingsEditorEnabled:c,setAdvancedEditorRuntimeMappingsLastApplied:g,setRuntimeMappingsEditorSwitchModalVisible:s,setRuntimeMappingsUpdated:r,toggleRuntimeMappingsEditor:(e=!1)=>{!0===e&&(r(!1),b(f)),c(!l),p(!1)},convertToJson:m,setAdvancedRuntimeMappingsConfig:b},state:{advancedEditorRuntimeMappingsLastApplied:f,isRuntimeMappingsEditorApplyButtonEnabled:u,isRuntimeMappingsEditorEnabled:l,isRuntimeMappingsEditorSwitchModalVisible:o,runtimeMappingsUpdated:n,advancedRuntimeMappingsConfig:h,xJsonMode:Ee,runtimeMappings:a}}})(r);return Object(d.useEffect)((()=>{const e=L.state.runtimeMappings;if(!N.state.isAdvancedSourceEditorEnabled){const t=Object(l.h)(i,f.state.transformConfigQuery,E.state.requestPayload,e),n=JSON.stringify(t.source.query,null,2);N.actions.setAdvancedEditorSourceConfig(n)}t({transformFunction:o,latestConfig:C.config,aggList:E.state.aggList,groupByList:E.state.groupByList,isAdvancedPivotEditorEnabled:F.state.isAdvancedPivotEditorEnabled,isAdvancedSourceEditorEnabled:N.state.isAdvancedSourceEditorEnabled,isDatePickerApplyEnabled:p.state.isDatePickerApplyEnabled,searchLanguage:f.state.searchLanguage,searchString:f.state.searchString,searchQuery:f.state.searchQuery,sourceConfigUpdated:N.state.sourceConfigUpdated,valid:o===u.k.PIVOT?E.state.validationStatus.isValid:C.validationStatus.isValid,validationStatus:o===u.k.PIVOT?E.state.validationStatus:C.validationStatus,previewRequest:o===u.k.PIVOT?E.state.requestPayload:C.requestPayload,runtimeMappings:e,runtimeMappingsUpdated:L.state.runtimeMappingsUpdated,isRuntimeMappingsEditorEnabled:L.state.isRuntimeMappingsEditorEnabled,timeRangeMs:p.state.timeRangeMs})}),[JSON.stringify(F.state),JSON.stringify(N.state),JSON.stringify(p.state),E.state,JSON.stringify(f.state),JSON.stringify([L.state.runtimeMappings,L.state.runtimeMappingsUpdated,L.state.isRuntimeMappingsEditorEnabled]),C.config,o]),{transformFunction:o,setTransformFunction:s,advancedPivotEditor:F,advancedSourceEditor:N,runtimeMappingsEditor:L,datePicker:p,pivotConfig:E,latestFunctionConfig:C,searchBar:f}},_e=({selectedFunction:e,onChange:t})=>{const n=[{name:u.k.PIVOT,helpText:f.i18n.translate("xpack.transform.stepDefineForm.pivotHelperText",{defaultMessage:"Aggregate and group your data."}),icon:"aggregate",title:f.i18n.translate("xpack.transform.stepDefineForm.pivotLabel",{defaultMessage:"Pivot"})},{name:u.k.LATEST,helpText:f.i18n.translate("xpack.transform.stepDefineForm.latestHelperText",{defaultMessage:"Keep track of your most recent data."}),icon:"clock",title:f.i18n.translate("xpack.transform.stepDefineForm.latestLabel",{defaultMessage:"Latest"})}];return Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFlexGroup,{gutterSize:"m","data-test-subj":"transformFunctionSelection"},n.map((({helpText:n,icon:r,name:a,title:i})=>Object(H.jsx)(M.EuiFlexItem,{key:a,style:{width:320},grow:!1},Object(H.jsx)(M.EuiCard,{icon:Object(H.jsx)(M.EuiIcon,{size:"xl",type:r}),title:i,description:n,"data-test-subj":`transformCreation-${a}-option${e===a?" selectedFunction":""}`,selectable:{onClick:()=>{e!==a&&t(a)},isSelected:e===a}}))))),Object(H.jsx)(M.EuiSpacer,{size:"m"}))},Ce=({copyToClipboard:e,copyToClipboardDescription:t,latestFunctionService:n})=>{var r;const{ml:{useFieldStatsTrigger:a}}=Object(m.a)(),{renderOption:i,closeFlyout:o}=a();return Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.uniqueKeysLabel",defaultMessage:"Unique keys"}),"data-test-subj":"transformLatestFunctionForm"},Object(H.jsx)(M.EuiComboBox,{fullWidth:!0,placeholder:f.i18n.translate("xpack.transform.stepDefineForm.uniqueKeysPlaceholder",{defaultMessage:"Add unique keys ..."}),options:n.uniqueKeyOptions,selectedOptions:null!==(r=n.config.unique_key)&&void 0!==r?r:[],onChange:e=>{n.updateLatestFunctionConfig({unique_key:e}),o()},isClearable:!1,"data-test-subj":"transformWizardUniqueKeysSelector",renderOption:i})),Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortLabel",defaultMessage:"Sort field"}),helpText:n.sortFieldOptions.length>0?f.i18n.translate("xpack.transform.stepDefineForm.sortHelpText",{defaultMessage:"Select the date field to be used to identify the latest document."}):void 0},Object(H.jsx)(p.a.Fragment,null,n.sortFieldOptions.length>0&&Object(H.jsx)(M.EuiComboBox,{fullWidth:!0,placeholder:f.i18n.translate("xpack.transform.stepDefineForm.sortPlaceholder",{defaultMessage:"Add a date field ..."}),singleSelection:{asPlainText:!0},options:n.sortFieldOptions,selectedOptions:n.config.sort?[n.config.sort]:[],onChange:e=>{n.updateLatestFunctionConfig({sort:{value:e[0].value,label:e[0].label}}),o()},isClearable:!1,"data-test-subj":"transformWizardSortFieldSelector",renderOption:i}),0===n.sortFieldOptions.length&&Object(H.jsx)(M.EuiCallOut,{color:"danger",iconType:"warning",size:"m"},Object(H.jsx)("p",null,Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortFieldOptionsEmptyError",defaultMessage:"No date fields are available to sort on. To use another field type, copy the configuration to the clipboard and continue creating the transform in the Console."})," ",Object(H.jsx)(M.EuiCopy,{beforeMessage:t,textToCopy:e},(e=>Object(H.jsx)(M.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":t}))))))))},Te=Object(d.memo)((({actions:{convertToJson:e,setAdvancedEditorConfig:t,setAdvancedPivotEditorApplyButtonEnabled:n},state:{advancedEditorConfigLastApplied:r,advancedEditorConfig:a,xJsonMode:i}})=>Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorLabel",{defaultMessage:"Pivot configuration object"}),"data-test-subj":"transformAdvancedPivotEditor"},Object(H.jsx)(ne.CodeEditor,{height:250,languageId:"json",onChange:a=>{if(t(a),r!==a)try{JSON.parse(e(a)),n(!0)}catch(e){n(!1)}else n(!1)},options:{ariaLabel:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorAriaLabel",{defaultMessage:"Advanced pivot editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:a}))),((e,t)=>Object(i.isEqual)(Ae(e),Ae(t))));function Ae(e){return[e.state.advancedEditorConfigLastApplied,e.state.advancedEditorConfig]}const ke=({advancedPivotEditor:{actions:{setAdvancedEditorSwitchModalVisible:e,toggleAdvancedEditor:t},state:{advancedEditorConfig:n,advancedEditorConfigLastApplied:r,isAdvancedEditorSwitchModalVisible:a,isAdvancedPivotEditorEnabled:i,isAdvancedPivotEditorApplyButtonEnabled:o}}})=>Object(H.jsx)(M.EuiFormRow,null,Object(H.jsx)(M.EuiFlexGroup,{gutterSize:"none"},Object(H.jsx)(M.EuiFlexItem,null,Object(H.jsx)(M.EuiSwitch,{label:f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchLabel",{defaultMessage:"Edit JSON config"}),checked:i,onChange:()=>{!i||!o&&n===r?t():e(!0)},"data-test-subj":"transformAdvancedPivotEditorSwitch"}),a&&Object(H.jsx)(ee,{onCancel:()=>e(!1),onConfirm:()=>{e(!1),t()},type:"pivot"}))));var Re=n(74);const Me="220px",Fe=({applyPivotChangesHandler:e,copyToClipboardPivot:t,copyToClipboardPivotDescription:n,stepDefineForm:r})=>{const{esTransformPivot:a}=Object(P.a)(),{isAdvancedPivotEditorEnabled:i,isAdvancedPivotEditorApplyButtonEnabled:o}=r.advancedPivotEditor.state;return Object(H.jsx)(M.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,null,!i&&Object(H.jsx)(Re.a,r.pivotConfig),i&&Object(H.jsx)(Te,r.advancedPivotEditor)),Object(H.jsx)(M.EuiFlexItem,{grow:!1,style:{width:Me}},Object(H.jsx)(M.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiFormRow,{hasEmptyLabelSpace:!0},Object(H.jsx)(M.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(ke,r)),Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiCopy,{beforeMessage:n,textToCopy:t},(e=>Object(H.jsx)(M.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":n}))))))),i&&Object(H.jsx)(M.EuiFlexItem,{style:{width:Me}},Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiText,{size:"xs"},Object(H.jsx)(p.a.Fragment,null,f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the pivot configuration of the transform."})," ",Object(H.jsx)(M.EuiLink,{href:a,target:"_blank"},f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."})))),Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:e,disabled:!o},f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorApplyButtonText",{defaultMessage:"Apply changes"}))))))},Ie="220px",Ne=({title:e})=>Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiSpacer,{size:"m"}),Object(H.jsx)(M.EuiTitle,{size:"xs"},Object(H.jsx)("span",null,e)),Object(H.jsx)(M.EuiSpacer,{size:"s"})),Le=p.a.memo((e=>{var t,n;const[r,a]=Object(L.b)("_g"),{searchItems:i}=e,{dataView:o}=i,s=Object(d.useMemo)((()=>o.getIndexPattern()),[o]),[g,b]=Object(N.b)("transform.frozenDataTierPreference",I.c.EXCLUDE),h=Object(m.b)(),j=Se(e),{advancedEditorConfig:v}=j.advancedPivotEditor.state,{advancedEditorSourceConfig:O,isAdvancedSourceEditorEnabled:y,isAdvancedSourceEditorApplyButtonEnabled:x}=j.advancedSourceEditor.state,{isDatePickerApplyEnabled:w,timeRangeMs:E}=j.datePicker.state,{transformConfigQuery:S}=j.searchBar.state,{runtimeMappings:_}=j.runtimeMappingsEditor.state,C=Object(m.a)(),{ml:{useFieldStatsFlyoutContext:T}}=C,A=T(),k={...U(o,S,_,E,(B=null==A?void 0:A.populatedFields,B instanceof Set?[...A.populatedFields]:[])),dataTestSubj:"transformIndexPreview",toastNotifications:h};var B;const{requestPayload:q,validationStatus:z}=j.transformFunction===u.k.PIVOT?j.pivotConfig.state:j.latestFunctionConfig,G=Object(D.a)(S,s),V=f.i18n.translate("xpack.transform.indexPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the index preview to the clipboard."}),W=Object(l.h)(o,S,q,_,w?E:void 0),J=Object(D.b)(W),K=f.i18n.translate("xpack.transform.pivotPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the transform preview to the clipboard."}),Q={...Object($.a)(o,S,z,q,_,E),dataTestSubj:"transformPivotPreview",toastNotifications:h,...j.transformFunction===u.k.LATEST?{copyToClipboard:J,copyToClipboardDescription:K}:{}},{esQueryDsl:X}=Object(P.a)(),Y=Object(d.useMemo)((()=>void 0!==o.timeFieldName&&""!==o.timeFieldName),[o.timeFieldName]),Z=Object(I.f)({timeRangeSelector:void 0!==(null==o?void 0:o.timeFieldName),autoRefreshSelector:!1});return Object(d.useEffect)((()=>{void 0!==(null==r?void 0:r.time)&&Z.setTime({from:r.time.from,to:r.time.to})}),[JSON.stringify(null==r?void 0:r.time),Z]),Object(d.useEffect)((()=>{void 0!==(null==r?void 0:r.refreshInterval)&&Z.setRefreshInterval(r.refreshInterval)}),[JSON.stringify(null==r?void 0:r.refreshInterval),Z]),Object(d.useEffect)((()=>{const e=Object(R.merge)(Z.getAutoRefreshFetch$(),Z.getTimeUpdate$(),I.e).subscribe((()=>{a&&a({time:Z.getTime(),refreshInterval:Z.getRefreshInterval()})}));return()=>{e.unsubscribe()}})),Object(H.jsx)("div",{"data-test-subj":"transformStepDefineForm"},Object(H.jsx)(M.EuiForm,null,Object(H.jsx)(M.EuiFormRow,{fullWidth:!0},Object(H.jsx)(_e,{selectedFunction:j.transformFunction,onChange:j.setTransformFunction})),Object(H.jsx)(Ne,{title:"Source data"}),void 0===i.savedSearch&&Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineForm.dataViewLabel",{defaultMessage:"Data view"})},Object(H.jsx)("span",null,s)),Y&&Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:Object(H.jsx)(p.a.Fragment,null,f.i18n.translate("xpack.transform.stepDefineForm.datePickerLabel",{defaultMessage:"Time range"})," ",Object(H.jsx)(M.EuiIconTip,{content:f.i18n.translate("xpack.transform.stepDefineForm.datePickerIconTipContent",{defaultMessage:"The time range is applied to previews only and will not be part of the final transform configuration."})}))},Object(H.jsx)(M.EuiFlexGroup,{alignItems:"flexStart",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,null,Object(H.jsx)(I.b,{isAutoRefreshOnly:!Y,showRefresh:!Y,width:"full"})),Object(H.jsx)(M.EuiFlexItem,{grow:!1,style:{width:Ie}},!1,Object(H.jsx)(I.d,{frozenDataPreference:g,setFrozenDataPreference:b,dataView:o,query:void 0,disabled:!1,timefilter:Z})))),Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:void 0!==(null==i||null===(t=i.savedSearch)||void 0===t?void 0:t.id)?f.i18n.translate("xpack.transform.stepDefineForm.savedSearchLabel",{defaultMessage:"Saved search"}):f.i18n.translate("xpack.transform.stepDefineForm.searchFilterLabel",{defaultMessage:"Search filter"})},Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFlexGroup,{alignItems:"flexStart",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,null,void 0===i.savedSearch&&Object(H.jsx)(p.a.Fragment,null,!y&&Object(H.jsx)(ie,{dataView:o,searchBar:j.searchBar}),y&&Object(H.jsx)(re,j)),void 0!==(null==i||null===(n=i.savedSearch)||void 0===n?void 0:n.id)&&Object(H.jsx)("span",null,i.savedSearch.title)),Object(H.jsx)(M.EuiFlexItem,{grow:!1,style:{width:Ie}},Object(H.jsx)(M.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(H.jsx)(M.EuiFlexItem,{grow:!1},void 0===i.savedSearch&&Object(H.jsx)(te,j)),Object(H.jsx)(M.EuiFlexItem,{grow:!1},Object(H.jsx)(M.EuiCopy,{beforeMessage:V,textToCopy:G},(e=>Object(H.jsx)(M.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":V})))))),y&&Object(H.jsx)(M.EuiFlexItem,{style:{width:Ie}},Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiText,{size:"xs"},f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the source query clause of the transform configuration."}),Object(H.jsx)(M.EuiLink,{href:X,target:"_blank"},f.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."}))),Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:()=>{const e=JSON.parse(O);j.searchBar.actions.setSearchQuery(e),j.advancedSourceEditor.actions.applyAdvancedSourceEditorChanges()},disabled:!x},f.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorApplyButtonText",{defaultMessage:"Apply changes"})))))),Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(he,j),Object(H.jsx)(M.EuiSpacer,{size:"s"}),Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:f.i18n.translate("xpack.transform.stepDefineForm.dataGridLabel",{defaultMessage:"Source documents"})},Object(H.jsx)(F.a,k))))),Object(H.jsx)(Ne,{title:"Transform configuration"}),Object(H.jsx)(M.EuiForm,null,j.transformFunction===u.k.PIVOT?Object(H.jsx)(Fe,{applyPivotChangesHandler:()=>{const e=JSON.parse(j.advancedPivotEditor.actions.convertToJson(v)),t={};void 0!==e&&void 0!==e.group_by&&Object.entries(e.group_by).forEach((e=>{const n=e[0],r=e[1],a=Object.keys(r)[0];t[n]={...r[a],agg:a,aggName:n,dropDownName:""}})),j.pivotConfig.actions.setGroupByList(t);const n={};void 0!==e&&void 0!==e.aggregations&&Object.entries(e.aggregations).forEach((e=>{const t=e[0],r=e[1];n[t]=Object(c.g)(r,t)})),j.pivotConfig.actions.setAggList(n),j.advancedPivotEditor.actions.setAdvancedEditorConfigLastApplied(v),j.advancedPivotEditor.actions.setAdvancedPivotEditorApplyButtonEnabled(!1)},copyToClipboardPivot:J,copyToClipboardPivotDescription:K,stepDefineForm:j}):null,j.transformFunction===u.k.LATEST?Object(H.jsx)(Ce,{copyToClipboard:J,copyToClipboardDescription:K,latestFunctionService:j.latestFunctionConfig}):null),Object(H.jsx)(M.EuiSpacer,{size:"m"}),(j.transformFunction!==u.k.LATEST||j.latestFunctionConfig.sortFieldOptions.length>0)&&Object(H.jsx)(M.EuiFormRow,{fullWidth:!0,label:f.i18n.translate("xpack.transform.stepDefineForm.previewLabel",{defaultMessage:"Preview"})},Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(F.a,Q),Object(H.jsx)(M.EuiSpacer,{size:"m"}))))}));var De=n(70),Pe=n.n(De),Be=n(79),qe=n(105),ze=n(103),Ge=n(100);const Ve=({formState:{isDatePickerApplyEnabled:e,timeRangeMs:t,runtimeMappings:n,searchString:r,searchQuery:a,groupByList:i,aggList:o,transformFunction:s,previewRequest:c,validationStatus:d},searchItems:g})=>{const b=Object(m.b)(),h=Object(l.j)(a),j=Object(l.h)(g.dataView,h,c,n,e?t:void 0),v=Object($.a)(g.dataView,h,d,c,n,e?t:void 0),O=void 0===r&&!Object(l.p)(h)&&!Object(l.t)(h);let y=[],x="";return Object(Ge.a)(j)&&(y=j.latest.unique_key,x=j.latest.sort),Object(H.jsx)("div",{"data-test-subj":"transformStepDefineSummary"},Object(H.jsx)(M.EuiForm,null,void 0===g.savedSearch&&Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.dataViewLabel",{defaultMessage:"Data view"})},Object(H.jsx)("span",null,g.dataView.getIndexPattern())),e&&t&&Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.timeRangeLabel",{defaultMessage:"Time range"})},Object(H.jsx)("span",null,Object(Be.a)(t.from)," -"," ",Object(Be.a)(t.to))),"string"==typeof r&&Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.queryLabel",{defaultMessage:"Query"})},Object(H.jsx)("span",null,r)),O&&Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.queryCodeBlockLabel",{defaultMessage:"Query"})},Object(H.jsx)(M.EuiCodeBlock,{language:"js",fontSize:"s",paddingSize:"s",color:"light",overflowHeight:300,isCopyable:!0},JSON.stringify(h,null,2)))),void 0!==g.savedSearch&&void 0!==g.savedSearch.id&&Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.savedSearchLabel",{defaultMessage:"Saved search"})},Object(H.jsx)("span",null,g.savedSearch.title)),s===u.k.PIVOT?Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.groupByLabel",{defaultMessage:"Group by"})},Object(H.jsx)(ze.b,{list:i})),Object(H.jsx)(M.EuiFormRow,{label:f.i18n.translate("xpack.transform.stepDefineSummary.aggregationsLabel",{defaultMessage:"Aggregations"})},Object(H.jsx)(qe.b,{list:o}))):Object(H.jsx)(p.a.Fragment,null,Object(H.jsx)(M.EuiFormRow,{label:Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.uniqueKeysLabel",defaultMessage:"Unique keys"})},Object(H.jsx)(p.a.Fragment,null,y.map((e=>Object(H.jsx)(M.EuiBadge,{color:"hollow",key:e},e))))),Object(H.jsx)(M.EuiFormRow,{label:Object(H.jsx)(oe.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortLabel",defaultMessage:"Sort field"})},Object(H.jsx)(M.EuiText,null,x))),Object(H.jsx)(M.EuiSpacer,{size:"m"}),Object(H.jsx)(F.a,Pe()({},v,{copyToClipboard:Object(l.k)(j),copyToClipboardDescription:f.i18n.translate("xpack.transform.pivotPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the transform preview to the clipboard."}),dataTestSubj:"transformPivotPreview",title:f.i18n.translate("xpack.transform.pivotPreview.transformPreviewTitle",{defaultMessage:"Transform preview"}),toastNotifications:b}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O}));var r=n(2),a=n.n(r),i=n(18),o=n(0),s=n(51),l=n(62),c=n(25);const u=new Set([...n.n(c).a.tz.names().filter((e=>!["America/Nuuk","EST","HST","ROC","MST"].includes(e)))]),d=e=>Object(l.a)(e)&&"string"==typeof e&&u.has(e);var p=n(87),f=n(61),g=n(17);function m(e,t){if(""!==e&&void 0!==e){if(t===s.b.HISTOGRAM)return!!s.m.test(e)&&(0!==parseFloat(e)||0!==parseInt(e,10));if(t===s.b.DATE_HISTOGRAM){if(!s.d.test(e))return!1;const t=e.match(s.d);if(null!==t&&Array.isArray(t)&&2===t.length){const n=t[1],r=parseInt(e.replace(n,""),10);if(("w"===n||"M"===n||"y"===n)&&r>1)return!1}return!0}}return!1}const b=({defaultData:e,otherAggNames:t,onChange:n,options:c})=>{const{esAggsCompositeMissingBucket:b}=Object(f.a)(),h=!Object(s.v)(e),[j,v]=Object(r.useState)(e.agg),[O,y]=Object(r.useState)(e.aggName),[x,w]=Object(r.useState)(Object(s.v)(e)?e.field:""),[E,S]=Object(r.useState)(function(e){return Object(s.q)(e)?e.calendar_interval:Object(s.r)(e)?e.interval:void 0}(e)),_=Object(r.useMemo)((()=>[...u].map((e=>({value:e,label:e})))),[]),[C,T]=Object(r.useState)(Object(s.q)(e)&&d(e.time_zone)?[_.find((t=>t.value===e.time_zone))]:[]),A=Object(r.useMemo)((()=>{var e;return null===(e=C[0])||void 0===e?void 0:e.value}),[C]),[k,R]=Object(r.useState)(Object(s.v)(e)&&e.missing_bucket),M=Object(r.useMemo)((()=>Object(i.htmlIdGenerator)()()),[]),F=[],I=[];if(!h){const t=Object(p.a)(c);t.filter((t=>t.agg===e.agg)).forEach((e=>{F.push({text:e.field})})),t.filter((t=>Object(s.v)(e)&&t.field===e.field)).forEach((e=>{I.push({text:e.agg})}))}let N="",L=Object(s.n)(O);L||(N=o.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})),L&&(L=!t.includes(O),N=o.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another group by configuration already uses that name."}));const D=(Object(s.q)(e)||Object(s.r)(e))&&m(E,e.agg),P=Object(s.q)(e)&&d(A);let B=L;return B&&(Object(s.q)(e)||Object(s.r)(e))&&(B=m(E,e.agg),Object(s.q)(e)&&Object(l.a)(e.time_zone)&&(B=P)),Object(g.jsx)(i.EuiForm,{style:{width:"300px"}},Object(g.jsx)(i.EuiFormRow,{error:!L&&[N],isInvalid:!L,helpText:h?o.i18n.translate("xpack.transform.groupBy.popoverForm.unsupportedGroupByHelpText",{defaultMessage:"Only the group_by name can be edited in this form. Please use the advanced editor to edit the other parts of the group_by configuration."}):"",label:o.i18n.translate("xpack.transform.groupBy.popoverForm.nameLabel",{defaultMessage:"Group by name"})},Object(g.jsx)(i.EuiFieldText,{defaultValue:O,isInvalid:!L,onChange:e=>y(e.target.value)})),I.length>0&&Object(g.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.transform.groupby.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},Object(g.jsx)(i.EuiSelect,{options:I,value:j,onChange:e=>v(e.target.value)})),F.length>0&&Object(g.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.transform.groupBy.popoverForm.fieldLabel",{defaultMessage:"Field"})},Object(g.jsx)(i.EuiSelect,{options:F,value:x,onChange:e=>w(e.target.value)})),(Object(s.q)(e)||Object(s.r)(e))&&Object(g.jsx)(i.EuiFormRow,{error:[o.i18n.translate("xpack.transform.groupBy.popoverForm.intervalError",{defaultMessage:"Invalid interval."})],isInvalid:!D,label:o.i18n.translate("xpack.transform.groupBy.popoverForm.intervalLabel",{defaultMessage:"Interval"})},Object(g.jsx)(a.a.Fragment,null,Object(s.r)(e)&&Object(g.jsx)(i.EuiFieldText,{defaultValue:E,isInvalid:!D,onChange:e=>S(e.target.value)}),Object(s.q)(e)&&Object(g.jsx)(i.EuiSelect,{options:[{value:"1m",text:"1m"},{value:"1h",text:"1h"},{value:"1d",text:"1d"},{value:"1w",text:"1w"},{value:"1M",text:"1M"},{value:"1q",text:"1q"},{value:"1y",text:"1y"}],value:E,onChange:e=>S(e.target.value)}))),Object(s.q)(e)&&Object(l.a)(e.time_zone)?Object(g.jsx)(i.EuiFormRow,{error:o.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneError",{defaultMessage:"Invalid time zone."}),isInvalid:!P,label:o.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneLabel",{defaultMessage:"Time zone"})},Object(g.jsx)(i.EuiComboBox,{options:_,onChange:e=>T(e),selectedOptions:C,"aria-label":o.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneAriaLabel",{defaultMessage:"Time zone"}),singleSelection:{asPlainText:!0}})):null,!h&&Object(g.jsx)(i.EuiFormRow,{helpText:Object(g.jsx)(a.a.Fragment,null,o.i18n.translate("xpack.transform.groupBy.popoverForm.missingBucketCheckboxHelpText",{defaultMessage:"Select to include documents without a value."}),Object(g.jsx)("br",null),Object(g.jsx)(i.EuiLink,{href:b,target:"_blank"},o.i18n.translate("xpack.transform.stepDetailsForm.missingBucketCheckboxHelpTextLink",{defaultMessage:"Learn more"})))},Object(g.jsx)(i.EuiCheckbox,{id:M,label:o.i18n.translate("xpack.transform.groupby.popoverForm.missingBucketCheckboxLabel",{defaultMessage:"Include missing buckets"}),checked:k,onChange:()=>R(!k)})),h&&Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(i.EuiSpacer,{size:"m"}),Object(g.jsx)(i.EuiCodeBlock,{"aria-label":o.i18n.translate("xpack.transform.agg.popoverForm.codeBlock",{defaultMessage:"JSON of transform aggregation"}),fontSize:"s",language:"json",paddingSize:"s",style:{width:"100%",height:"200px"}},JSON.stringify(Object(s.g)(e),null,2))),Object(g.jsx)(i.EuiFormRow,{hasEmptyLabelSpace:!0},Object(g.jsx)(i.EuiButton,{isDisabled:!B,onClick:()=>n(function(){const t={...e,agg:j,aggName:O,field:x,missing_bucket:k};return Object(s.r)(t)&&void 0!==E?t.interval=E:Object(s.q)(t)&&void 0!==E&&(t.calendar_interval=E,d(A)&&(t.time_zone=A)),t}())},o.i18n.translate("xpack.transform.groupBy.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))},h=({deleteHandler:e,item:t,otherAggNames:n,onChange:a,options:l})=>{const[c,u]=Object(r.useState)(!1);let d;return Object(s.q)(t)?d=t.calendar_interval:Object(s.r)(t)&&(d=t.interval),Object(g.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(g.jsx)(i.EuiFlexItem,{className:"transform__GroupByLabel--text"},Object(g.jsx)("span",{className:"eui-textTruncate","data-test-subj":"transformGroupByEntryLabel"},t.aggName)),void 0!==d&&Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},Object(g.jsx)(i.EuiTextColor,{color:"subdued",className:"eui-textTruncate","data-test-subj":"transformGroupByEntryIntervalLabel"},d)),Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(g.jsx)(i.EuiPopover,{id:"transformIntervalFormPopover",ownFocus:!0,button:Object(g.jsx)(i.EuiButtonIcon,{"aria-label":o.i18n.translate("xpack.transform.groupByLabelForm.editIntervalAriaLabel",{defaultMessage:"Edit interval"}),size:"s",iconType:"pencil",onClick:()=>u(!c),"data-test-subj":"transformGroupByEntryEditButton"}),isOpen:c,closePopover:()=>u(!1)},Object(g.jsx)(b,{defaultData:t,onChange:function(e){a({...e}),u(!1)},otherAggNames:n,options:l}))),Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(g.jsx)(i.EuiButtonIcon,{"aria-label":o.i18n.translate("xpack.transform.groupByLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:()=>e(t.aggName),"data-test-subj":"transformGroupByEntryDeleteButton"})))},j=({deleteHandler:e,list:t,onChange:n,options:o})=>{const s=Object.keys(t);return Object(g.jsx)(a.a.Fragment,null,s.map(((a,l)=>{const c=s.filter((e=>e!==a));return Object(g.jsx)(r.Fragment,{key:a},Object(g.jsx)(i.EuiPanel,{paddingSize:"s","data-test-subj":`transformGroupByEntry ${l}`},Object(g.jsx)(h,{deleteHandler:e,item:t[a],otherAggNames:c,onChange:e=>n(a,e),options:o})),s.length>0&&Object(g.jsx)(i.EuiSpacer,{size:"s"}))})))},v=({item:e,optionsDataId:t})=>{let n;return Object(s.q)(e)?n=e.calendar_interval:Object(s.r)(e)&&(n=e.interval),Object(g.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(g.jsx)(i.EuiFlexItem,{className:"transform__GroupByLabel--text"},Object(g.jsx)("span",{className:"eui-textTruncate"},t)),void 0!==n&&Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},Object(g.jsx)(i.EuiTextColor,{color:"subdued",className:"eui-textTruncate"},n)))},O=({list:e})=>{const t=Object.keys(e);return Object(g.jsx)(a.a.Fragment,null,t.map((n=>Object(g.jsx)(r.Fragment,{key:n},Object(g.jsx)(i.EuiPanel,{paddingSize:"s"},Object(g.jsx)(v,{item:e[n],optionsDataId:n})),t.length>0&&Object(g.jsx)(i.EuiSpacer,{size:"s"})))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return k}));var r=n(85),a=n(52),i=n(57);const o={CUSTOM:"custom",PHRASES:"phrases",PHRASE:"phrase",EXISTS:"exists",MATCH_ALL:"match_all",MISSING:"missing",QUERY_STRING:"query_string",RANGE:"range",GEO_BOUNDING_BOX:"geo_bounding_box",GEO_POLYGON:"geo_polygon",SPATIAL_FILTER:"spatial_filter",TERM:"term",TERMS:"terms",BOOL:"bool"},s={[i.b.ATTACHMENT]:[],[i.b.BOOLEAN]:[],[i.b.DATE]:[o.RANGE],[i.b.GEO_POINT]:[o.GEO_BOUNDING_BOX,o.GEO_POLYGON],[i.b.GEO_SHAPE]:[o.GEO_BOUNDING_BOX,o.GEO_POLYGON],[i.b.IP]:[o.RANGE],[i.b.MURMUR3]:[],[i.b.NUMBER]:[o.RANGE],[i.b.STRING]:[o.TERM],[i.b._SOURCE]:[],[i.b.UNKNOWN]:[],[i.b.CONFLICT]:[]},l=[o.BOOL,o.EXISTS];var c=n(2),u=n.n(c),d=n(18),p=n(24),f=n(19),g=n(17);const m=({config:e,onChange:t,isValid:n})=>Object(g.jsx)(u.a.Fragment,null,Object(g.jsx)(d.EuiSpacer,{size:"m"}),Object(g.jsx)(p.CodeEditor,{height:300,languageId:"json",onChange:e=>{t({config:e})},options:{automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:e||""}),!1===n?Object(g.jsx)(u.a.Fragment,null,Object(g.jsx)(d.EuiSpacer,{size:"m"}),Object(g.jsx)(d.EuiCallOut,{color:"danger",iconType:"warning",size:"s"},Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.filterEditorForm.jsonInvalidErrorMessage",defaultMessage:"JSON is invalid."}))):null);var b=n(89),h=n.n(b),j=n(49),v=n(76),O=n(91);const y=({aggConfig:e,onChange:t,selectedField:n})=>{var r;const{dataView:a,runtimeMappings:i}=Object(c.useContext)(v.a),o=Object(c.useMemo)((()=>function(e,t,n){const r=t.fields.getByName(e);if(void 0!==r)return[...l,...s[r.type]];if(Object(j.a)(n)&&n.hasOwnProperty(e)){const t=n[e];return[...l,...s[Object(O.a)(t.type)]]}console.error(`The field ${e} does not exist in the index or runtime fields`)}(n,a,i)),[a,n,i]);h()((function(){t({})}),[n]);const p=null==e?void 0:e.aggTypeConfig,m=null!==(r=null==e?void 0:e.filterAgg)&&void 0!==r?r:"",b=null!=p&&p.isValid?null==p?void 0:p.isValid():void 0;return Object(g.jsx)(u.a.Fragment,null,void 0!==o?Object(g.jsx)(d.EuiFormRow,{label:Object(g.jsx)(u.a.Fragment,null,Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAggLabel",defaultMessage:"Filter query"}),Object(g.jsx)(d.EuiToolTip,{content:Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerQueryAdvancedSuggestionTooltip",defaultMessage:"To add other filter query aggregations, edit the JSON config."})},Object(g.jsx)(d.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"})))},Object(g.jsx)(d.EuiSelect,{options:[{text:"",value:""}].concat(o.map((e=>({text:e,value:e})))),value:m,onChange:e=>{const r=e.target.value;t({filterAgg:r,aggTypeConfig:k(r,n)})},"data-test-subj":"transformFilterAggTypeSelector"})):null,""!==m&&(null==p?void 0:p.FilterAggFormComponent)&&Object(g.jsx)(p.FilterAggFormComponent,{config:null==p?void 0:p.filterAggConfig,onChange:n=>{t({...e,aggTypeConfig:{...p,filterAggConfig:n.config}})},selectedField:n,isValid:b}))};var x=n(20),w=n(0),E=n(60),S=n(99),_=n(48);const C=({config:e,onChange:t,selectedField:n})=>{var r,a;const{dataView:i,runtimeMappings:o}=Object(c.useContext)(v.a),s=Object(_.b)(),[l,u]=Object(c.useState)(""),p=Object(c.useMemo)((()=>Object(x.debounce)((e=>u(e)),600)),[]);Object(c.useEffect)((()=>(p(""),()=>p.cancel())),[]);const m=Object(c.useCallback)((n=>{t({config:{...e,...n}})}),[e,t]),{data:b,isError:j,isLoading:O}=Object(S.a)({index:i.title,body:{...void 0!==o?{runtime_mappings:o}:{},query:{wildcard:{[n]:{value:`*${l}*`}}},aggs:{field_values:{terms:{field:n,size:10}}},size:0}},void 0!==n);Object(c.useEffect)((()=>{j&&s.addWarning(w.i18n.translate("xpack.transform.agg.popoverForm.filerAgg.term.errorFetchSuggestions",{defaultMessage:"Unable to fetch suggestions"}))}),[j]);const y=Object(E.d)(null==b||null===(r=b.aggregations)||void 0===r?void 0:r.field_values)?(null==b||null===(a=b.aggregations)||void 0===a?void 0:a.field_values.buckets).map((e=>({label:e.key+""}))):[];h()((()=>{n&&t({config:{value:void 0}})}),[n]);const C=null!=e&&e.value?[{label:e.value}]:void 0;return void 0===n?null:Object(g.jsx)(d.EuiFormRow,{label:Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.term.valueLabel",defaultMessage:"Value"})},Object(g.jsx)(d.EuiComboBox,{async:!0,isLoading:O,fullWidth:!0,singleSelection:{asPlainText:!0},options:y,selectedOptions:C,isClearable:!1,onChange:e=>{m({value:e.length>0?e[0].label:void 0})},onCreateOption:e=>{m({value:e})},onSearchChange:p,"data-test-subj":"transformFilterTermValueSelector"}))},T=({config:e,onChange:t})=>{var n,r,a,i;const o=null!==(n=null==e?void 0:e.from)&&void 0!==n?n:"",s=null!==(r=null==e?void 0:e.to)&&void 0!==r?r:"",l=null!==(a=null==e?void 0:e.includeFrom)&&void 0!==a&&a,p=null!==(i=null==e?void 0:e.includeTo)&&void 0!==i&&i,m=Object(c.useCallback)((n=>{t({config:{...e,...n}})}),[e]);return Object(g.jsx)(u.a.Fragment,null,Object(g.jsx)(d.EuiSpacer,{size:"m"}),Object(g.jsx)(d.EuiFlexGroup,{direction:"row"},Object(g.jsx)(d.EuiFlexItem,null,Object(g.jsx)(d.EuiFormRow,{label:Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.range.greaterThanLabel",defaultMessage:"Greater than"})},Object(g.jsx)(d.EuiFieldNumber,{value:o,max:""!==s?s:void 0,onChange:e=>{m({from:""===e.target.value?void 0:Number(e.target.value)})},step:"any",prepend:Object(g.jsx)(d.EuiButton,{minWidth:40,style:{maxWidth:40},onChange:e=>{m({includeFrom:e.target.checked})},fill:l},l?"≥":">")}))),Object(g.jsx)(d.EuiFlexItem,null,Object(g.jsx)(d.EuiFormRow,{label:Object(g.jsx)(f.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.range.lessThanLabel",defaultMessage:"Less than"})},Object(g.jsx)(d.EuiFieldNumber,{value:s,min:""!==o?o:void 0,onChange:e=>{m({to:""===e.target.value?void 0:Number(e.target.value)})},step:"any",append:Object(g.jsx)(d.EuiButton,{minWidth:40,style:{maxWidth:40},onClick:()=>{m({includeTo:!p})},fill:p},p?"≤":"<")})))))};function A(e){const t=Object(a.j)(e)?e.field:null;return{...e,isSubAggsSupported:!0,field:t,AggFormComponent:y,aggConfig:{},getEsAggConfig(){var e;if(!this.isValid())return null;const t=null===(e=this.aggConfig.aggTypeConfig)||void 0===e?void 0:e.getEsAggConfig(this.field);return{[this.aggConfig.filterAgg]:t}},setUiConfigFromEs(e){var n;const r=Object.keys(e)[0],a=e[r],i=k(r,t,a);this.field=null!==(n=null!=t?t:i.fieldName)&&void 0!==n?n:null,this.aggConfig={filterAgg:r,aggTypeConfig:i}},isValid(){var e,t;return void 0!==(null===(e=this.aggConfig)||void 0===e?void 0:e.filterAgg)&&(null===(t=this.aggConfig.aggTypeConfig)||void 0===t||!t.isValid||this.aggConfig.aggTypeConfig.isValid())},getAggName(){var e,t;return null!==(e=this.aggConfig)&&void 0!==e&&null!==(t=e.aggTypeConfig)&&void 0!==t&&t.getAggName?this.aggConfig.aggTypeConfig.getAggName():void 0},helperText(){var e,t;return null!==(e=this.aggConfig)&&void 0!==e&&null!==(t=e.aggTypeConfig)&&void 0!==t&&t.helperText?this.aggConfig.aggTypeConfig.helperText():void 0}}}function k(e,t,n){var a,i;let s=t;switch(e){case o.TERM:const e="object"==typeof n?Object.values(n)[0]:void 0;return s=n?Object.keys(n)[0]:s,{FilterAggFormComponent:C,filterAggConfig:{value:e},getEsAggConfig(){if(void 0===this.fieldName||!this.filterAggConfig)throw new Error(`Config ${o.TERM} is not completed`);return{[this.fieldName]:this.filterAggConfig.value}},isValid(){var e;return void 0!==(null===(e=this.filterAggConfig)||void 0===e?void 0:e.value)},getAggName(){var e;return null!==(e=this.filterAggConfig)&&void 0!==e&&e.value?this.filterAggConfig.value:void 0},fieldName:s};case o.RANGE:s=n?Object.keys(n)[0]:s;const l="object"==typeof n?Object.values(n)[0]:void 0;return{fieldName:s,FilterAggFormComponent:T,filterAggConfig:"object"==typeof l?{from:null!==(a=l.gte)&&void 0!==a?a:l.gt,to:null!==(i=l.lte)&&void 0!==i?i:l.lt,includeFrom:void 0!==l.gte,includeTo:void 0!==l.lte}:void 0,getEsAggConfig(){if(void 0===this.fieldName||!this.filterAggConfig)throw new Error(`Config ${o.RANGE} is not completed`);const{from:e,includeFrom:t,to:n,includeTo:r}=this.filterAggConfig,a={};return e&&(a[t?"gte":"gt"]=e),n&&(a[r?"lte":"lt"]=n),{[this.fieldName]:a}},isValid(){return"object"==typeof this.filterAggConfig&&(void 0!==this.filterAggConfig.from||void 0!==this.filterAggConfig.to)&&(void 0===this.filterAggConfig.from||void 0===this.filterAggConfig.to||this.filterAggConfig.from<=this.filterAggConfig.to)},helperText(){if(!this.isValid())return;const{from:e,to:t,includeFrom:n,includeTo:r}=this.filterAggConfig;return`range: ${`${void 0!==e?`${n?"≥":">"} ${e}`:""} ${void 0!==e&&void 0!==t?"&":""} ${void 0!==t?`${r?"≤":"<"} ${t}`:""}`.trim()}`}};case o.EXISTS:return s=n?n.field:s,{fieldName:s,getEsAggConfig(){if(void 0===this.fieldName)throw new Error(`Config ${o.EXISTS} is not completed`);return{field:this.fieldName}},isValid(){return"string"==typeof this.fieldName}};case o.BOOL:return{FilterAggFormComponent:m,filterAggConfig:JSON.stringify({must:[],must_not:[],should:[]},null,2),isValid(){return Object(r.e)(this.filterAggConfig)},getEsAggConfig(){return JSON.parse(this.filterAggConfig)}};default:return{fieldName:t,FilterAggFormComponent:m,filterAggConfig:"",getEsAggConfig(){return void 0!==this.filterAggConfig?JSON.parse(this.filterAggConfig):{}},isValid(){return Object(r.e)(this.filterAggConfig)}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return E}));var r=n(2),a=n.n(r),i=n(18),o=n(0),s=n(51),l=n(20),c=n(89),u=n.n(c),d=n(87),p=n(52),f=n(97),g=n(17),m={name:"18ji2p4",styles:"width:300px"},b={name:"nm8ipk",styles:"width:100%;height:200px"};const h=({defaultData:e,otherAggNames:t,onChange:n,options:a})=>{const[c,h]=Object(r.useState)(Object(l.cloneDeep)(e)),[j,v]=Object(r.useState)(e.aggName),[O,y]=Object(r.useState)(e.agg),[x,w]=Object(r.useState)(Object(s.u)(e)?e.field:""),E=!Object(s.u)(e);Object(r.useEffect)((()=>{if(O===c.agg)return;const e=Object(f.a)(O,{parentAgg:c.parentAgg,subAggs:c.subAggs,agg:O,aggName:j,dropDownName:j,field:x});h(e)}),[O,c]),u()((()=>{if(Object(p.k)(c)){const e=c.getAggName?c.getAggName():void 0;void 0!==e&&v(e)}}),[c]);const S=[],_=[];if(!E){const t=Object(d.a)(a);t.filter((t=>t.agg===e.agg)).forEach((e=>{S.push({text:e.field})})),t.filter((t=>Object(s.u)(e)&&(Array.isArray(e.field)?e.field.includes(t.field):t.field===e.field))).forEach((e=>{_.push({text:e.agg})}))}let C="",T=Object(s.n)(j);T||(C=o.i18n.translate("xpack.transform.agg.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})),T&&(T=!t.includes(j),C=o.i18n.translate("xpack.transform.agg.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another aggregation already uses that name."}));let A=T;return Object(p.k)(c)&&(A=T&&c.isValid()),Object(g.jsx)(i.EuiForm,{css:m,"data-test-subj":"transformAggPopoverForm_"+j},Object(g.jsx)(i.EuiFormRow,{error:!T&&[C],isInvalid:!T,helpText:E?o.i18n.translate("xpack.transform.agg.popoverForm.unsupportedAggregationHelpText",{defaultMessage:"Only the aggregation name can be edited in this form. Please use the advanced editor to edit the other parts of the aggregation."}):"",label:o.i18n.translate("xpack.transform.agg.popoverForm.nameLabel",{defaultMessage:"Aggregation name"})},Object(g.jsx)(i.EuiFieldText,{value:j,isInvalid:!T,onChange:e=>v(e.target.value),"data-test-subj":"transformAggName"})),S.length>0?c.isMultiField?Object(g.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.transform.agg.popoverForm.fieldsLabel",{defaultMessage:"Fields"})},Object(g.jsx)(i.EuiComboBox,{fullWidth:!0,options:S.map((e=>({value:e.text,label:e.text}))),selectedOptions:x?("string"==typeof x?[x]:x).map((e=>({value:e,label:e}))):[],onChange:e=>{const t=e.map((e=>e.value));w(t)},isClearable:!1,"data-test-subj":"transformAggFields"})):Object(g.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.transform.agg.popoverForm.fieldLabel",{defaultMessage:"Field"})},Object(g.jsx)(i.EuiSelect,{options:S,value:x,onChange:e=>w(e.target.value),"data-test-subj":"transformAggField"})):null,_.length>0&&Object(g.jsx)(i.EuiFormRow,{label:o.i18n.translate("xpack.transform.agg.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},Object(g.jsx)(i.EuiSelect,{options:_,value:O,onChange:e=>{return t=e.target.value,void y(t);var t},"data-test-subj":"transformAggType"})),Object(p.k)(c)?Object(g.jsx)(c.AggFormComponent,{aggConfig:c.aggConfig,selectedField:x,onChange:e=>{h({...c,aggConfig:e})},isValid:c.isValid()}):null,E&&Object(g.jsx)(i.EuiCodeBlock,{"aria-label":o.i18n.translate("xpack.transform.agg.popoverForm.codeBlock",{defaultMessage:"JSON of transform aggregation"}),fontSize:"s",language:"json",paddingSize:"s",css:b},JSON.stringify(Object(s.f)(e),null,2)),Object(g.jsx)(i.EuiFormRow,{hasEmptyLabelSpace:!0},Object(g.jsx)(i.EuiButton,{isDisabled:!A,onClick:()=>n(function(){let t=x;return Object(s.u)(c)&&!c.isMultiField&&Array.isArray(x)&&(t=x[0]),{...c,agg:O,aggName:j,dropDownName:e.dropDownName,...E?{}:{field:t}}}()),"data-test-subj":"transformApplyAggChanges"},o.i18n.translate("xpack.transform.agg.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))};var j=n(19),v=n(111),O=n(74);const y=({item:e})=>{const{state:t,actions:n}=Object(r.useContext)(O.b),s=Object(r.useCallback)((t=>{n.addSubAggregation(e,t)}),[n,e]),l=Object(r.useCallback)(((e,t)=>{n.updateSubAggregation(e,t)}),[n]),c=Object(r.useCallback)((t=>{n.deleteSubAggregation(e,t)}),[n,e]),u=Object(r.useMemo)((()=>{let t=1,n=e.parentAgg;for(;void 0!==n;)t++,n=n.parentAgg;return t<=p.a}),[e]),d=Object(g.jsx)(v.a,{changeHandler:s,options:t.aggOptions,placeholder:o.i18n.translate("xpack.transform.stepDefineForm.addSubAggregationPlaceholder",{defaultMessage:"Add a sub-aggregation ..."}),testSubj:"transformSubAggregationSelection",isDisabled:!u});return Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(i.EuiSpacer,{size:"m"}),e.subAggs&&Object(g.jsx)(w,{onChange:l,deleteHandler:c,list:e.subAggs,options:t.aggOptionsData}),u?d:Object(g.jsx)(i.EuiToolTip,{anchorClassName:"eui-displayBlock",content:Object(g.jsx)(j.FormattedMessage,{id:"xpack.transform.stepDefineForm.maxSubAggsLevelsLimitMessage",defaultMessage:"You have reached the maximum number of levels of sub-aggregations that can be added in the form. Please edit the JSON config if you want to add another level."})},d))},x=({deleteHandler:e,item:t,otherAggNames:n,onChange:l,options:c})=>{const[u,d]=Object(r.useState)(Object(p.k)(t)&&!t.isValid()),f=Object(p.k)(t)&&t.helperText&&t.helperText(),m=Object(s.u)(t)&&t.isSubAggsSupported&&(!Object(p.k)(t)||t.isValid());return Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(g.jsx)(i.EuiFlexItem,{className:"transform__AggregationLabel--text"},Object(g.jsx)("span",{className:"eui-textTruncate","data-test-subj":"transformAggregationEntryLabel"},t.aggName)),f&&Object(g.jsx)(i.EuiFlexItem,{grow:!1},Object(g.jsx)(i.EuiTextColor,{color:"subdued",className:"eui-textTruncate","data-test-subj":"transformAggHelperText",style:{lineHeight:"20px"}},f)),Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(g.jsx)(i.EuiPopover,{id:"transformFormPopover",ownFocus:!0,button:Object(g.jsx)(i.EuiButtonIcon,{"aria-label":o.i18n.translate("xpack.transform.aggLabelForm.editAggAriaLabel",{defaultMessage:"Edit aggregation"}),size:"s",iconType:"pencil",onClick:()=>d(!u),"data-test-subj":`transformAggregationEntryEditButton_${t.aggName}`}),isOpen:u,closePopover:()=>d(!1)},Object(g.jsx)(h,{defaultData:t,onChange:function(e){l({...e}),d(!1)},otherAggNames:n,options:c}))),Object(g.jsx)(i.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(g.jsx)(i.EuiButtonIcon,{"aria-label":o.i18n.translate("xpack.transform.aggLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:()=>e(t.aggName),"data-test-subj":"transformAggregationEntryDeleteButton"}))),m&&Object(g.jsx)(y,{item:t}))},w=({deleteHandler:e,list:t,onChange:n,options:o})=>{const s=Object.keys(t);return Object(g.jsx)(a.a.Fragment,null,s.map(((a,l)=>{const c=s.filter((e=>e!==a));return Object(g.jsx)(r.Fragment,{key:a},Object(g.jsx)(i.EuiPanel,{paddingSize:"s","data-test-subj":`transformAggregationEntry_${l}`},Object(g.jsx)(x,{deleteHandler:e,item:t[a],onChange:e=>n(a,e),otherAggNames:c,options:o})),s.length>0&&Object(g.jsx)(i.EuiSpacer,{size:"s"}))})))},E=({list:e})=>{const t=Object.keys(e);return Object(g.jsx)(i.EuiForm,null,t.map((e=>Object(g.jsx)(r.Fragment,{key:e},Object(g.jsx)(i.EuiPanel,{paddingSize:"s"},Object(g.jsx)("div",{className:"eui-textTruncate"},e)),t.length>0&&Object(g.jsx)(i.EuiSpacer,{size:"s"})))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class MLRequestFailure extends Error{constructor(e,t){if(super(e.message),Object.setPrototypeOf(this,new.target.prototype),"string"!=typeof t&&void 0!==t)if("body"in t)this.stack=JSON.stringify(t.body,null,2);else try{this.stack=JSON.stringify(t,null,2)}catch(e){}}}var r=n(49);const a=e=>{const t=(e=>{var t;if(function(e){var t;return e&&void 0!==(null===(t=e.error)||void 0===t?void 0:t.reason)}(e))return{message:null!==(t=e.error.reason)&&void 0!==t?t:"",statusCode:e.status,fullError:e};if(function(e){return"string"==typeof e}(e))return{message:e};if(function(e){return!0===(null==e?void 0:e.isBoom)}(e))return{message:e.output.payload.message,statusCode:e.output.payload.statusCode};if(void 0===(null==e?void 0:e.body)&&(null==e||!e.message))return{message:""};if("string"==typeof e.body)return{message:e.body};if(function(e){return"object"==typeof e.body&&"message"in e.body}(e)){var n,a;if("object"==typeof e.body.attributes&&"string"==typeof(null===(n=e.body.attributes.body)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.reason)){var i,o,s;const t={message:e.body.attributes.body.error.reason,statusCode:e.body.statusCode,fullError:e.body.attributes.body};var l,c,u;return"object"!=typeof e.body.attributes.body.error.caused_by||"string"!=typeof(null===(i=e.body.attributes.body.error.caused_by)||void 0===i?void 0:i.reason)&&"string"!=typeof(null===(o=e.body.attributes.body.error.caused_by)||void 0===o||null===(s=o.caused_by)||void 0===s?void 0:s.reason)||(t.causedBy=(null===(l=e.body.attributes.body.error.caused_by)||void 0===l||null===(c=l.caused_by)||void 0===c?void 0:c.reason)||(null===(u=e.body.attributes.body.error.caused_by)||void 0===u?void 0:u.reason)),Array.isArray(e.body.attributes.body.error.root_cause)&&"object"==typeof e.body.attributes.body.error.root_cause[0]&&Object(r.a)(e.body.attributes.body.error.root_cause[0],["script"])&&(t.causedBy=e.body.attributes.body.error.root_cause[0].script,t.message+=`: '${e.body.attributes.body.error.root_cause[0].script}'`),t}return{message:e.body.message,statusCode:e.body.statusCode}}return function(e){return e&&void 0!==e.message&&"string"==typeof e.message}(e)?{message:e.message}:{message:""}})(e);return t.message}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n.n(r),i=n(0),o=n(18),s=n(17);const l=({aggConfig:e,onChange:t,isValid:n})=>Object(s.jsx)(a.a.Fragment,null,Object(s.jsx)(o.EuiFormRow,{label:i.i18n.translate("xpack.transform.agg.popoverForm.sizeLabel",{defaultMessage:"Size"}),error:!n&&[i.i18n.translate("xpack.transform.groupBy.popoverForm.invalidSizeErrorMessage",{defaultMessage:"Enter a valid positive number"})],isInvalid:!n},Object(s.jsx)(o.EuiFieldNumber,{value:e.size,onChange:e=>{t({size:Number(e.target.value)})}})));var c=n(52);function u(e){const t=Object(c.j)(e)?e.field:null;return{...e,isSubAggsSupported:!1,isMultiField:!1,AggFormComponent:l,field:t,aggConfig:{size:c.d},setUiConfigFromEs(e){const{field:t,size:n}=e;this.field=t,this.aggConfig.size=n},getEsAggConfig(){return this.isValid()?{field:this.field,size:this.aggConfig.size}:null},isValid(){return"number"==typeof this.aggConfig.size&&this.aggConfig.size>0}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(2),a=n.n(r),i=n(0),o=n(18),s=n(17);const l=({aggConfig:e,onChange:t,isValid:n})=>Object(s.jsx)(a.a.Fragment,null,Object(s.jsx)(o.EuiFormRow,{label:i.i18n.translate("xpack.transform.agg.popoverForm.percentsLabel",{defaultMessage:"Percents"}),error:!n&&[i.i18n.translate("xpack.transform.groupBy.popoverForm.intervalPercents",{defaultMessage:"Enter a comma-separated list of percentiles"})],isInvalid:!n},Object(s.jsx)(o.EuiFieldText,{value:e.percents,onChange:e=>{t({percents:e.target.value})}})));var c=n(51);function u(e){if(void 0!==e){const t=e.split(","),n=[];for(const e of t)if(e.trim().length>0&&!1===isNaN(e)){const t=Number(e);if(!(t>=0&&t<=100))return[];n.push(t)}return n}return[]}function d(e){const t=Object(c.u)(e)?e.field:null;return{...e,isSubAggsSupported:!1,isMultiField:!1,AggFormComponent:l,field:t,aggConfig:{percents:c.a.toString()},setUiConfigFromEs(e){const{field:t,percents:n}=e;this.field=t,this.aggConfig.percents=n.join(",")},getEsAggConfig(){return this.isValid()?{field:this.field,percents:u(this.aggConfig.percents)}:null},isValid(){return"string"==typeof this.aggConfig.percents&&(e=this.aggConfig.percents,/^[0-9]+(,[0-9]+)*$/.test(e));var e}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(49),a=n(52),i=n(2),o=n.n(i),s=n(0),l=n(19),c=n(18),u=n(74),d=n(17);const p=({onChange:e,aggConfig:t})=>{var n,r;const{state:{fields:p}}=Object(i.useContext)(u.b),f=p.filter((e=>a.e.includes(e.type))).map((({name:e})=>({text:e,value:e})));Object.values(a.f).forEach((e=>{f.unshift({text:e,value:e})})),f.unshift({text:"",value:""});const g=Object(a.l)(t.sortField),m=Object.values(a.c).map((e=>({id:e,label:e}))),b=null!==(n=t.sortSettings)&&void 0!==n?n:{},h=Object(i.useCallback)((n=>{var r;e({...t,sortSettings:{...null!==(r=t.sortSettings)&&void 0!==r?r:{},...n}})}),[t,e]);return Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(c.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.transform.agg.popoverForm.sortFieldTopMetricsLabel",defaultMessage:"Sort field"})},Object(d.jsx)(c.EuiSelect,{options:f,value:t.sortField,onChange:n=>{e({...t,sortField:n.target.value})},"data-test-subj":"transformSortFieldTopMetricsLabel"})),t.sortField?Object(d.jsx)(o.a.Fragment,null,g?null:Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(c.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.transform.agg.popoverForm.sortDirectionTopMetricsLabel",defaultMessage:"Sort direction"})},Object(d.jsx)(c.EuiButtonGroup,{type:"single",legend:s.i18n.translate("xpack.transform.agg.popoverForm.sortDirectionTopMetricsLabel",{defaultMessage:"Sort direction"}),options:m,idSelected:null!==(r=b.order)&&void 0!==r?r:"",onChange:e=>{h({order:e})},color:"text"})),Object(d.jsx)(c.EuiSpacer,{size:"s"}))):null)};function f(e){return{...e,isSubAggsSupported:!1,isMultiField:!0,field:Object(a.j)(e)?e.field:"",AggFormComponent:p,aggConfig:{},getEsAggConfig(){if(!this.isValid())return null;const{sortField:e,sortSettings:t={},...n}=this.aggConfig;let i=null;if(Object(a.l)(e))i=e;else{const{mode:n,numericType:a,order:o,...s}=t;i=n||a||Object(r.a)(s)?{[e]:{...s,order:o,...n?{mode:n}:{},...a?{numeric_type:a}:{}}}:{[e]:t.order}}return{metrics:(Array.isArray(this.field)?this.field:[this.field]).map((e=>({field:e}))),sort:i,...null!=n?n:{}}},setUiConfigFromEs(e){var t;const{metrics:n,sort:i,...o}=e;if(this.field=(Array.isArray(n)?n:[n]).map((e=>e.field)),Object(a.l)(i))return void(this.aggConfig.sortField=i);if(!i)return void(this.aggConfig={...this.aggConfig,...null!=o?o:{}});const s=Object.keys(i)[0];this.aggConfig.sortField=s;const l=i[s];if(this.aggConfig.sortSettings=null!==(t=this.aggConfig.sortSettings)&&void 0!==t?t:{},Object(a.m)(l)&&(this.aggConfig.sortSettings.order=l),Object(r.a)(l)){const{order:e,mode:t,numeric_type:n,...r}=l;this.aggConfig.sortSettings=r,Object(a.m)(e)&&(this.aggConfig.sortSettings.order=e),Object(a.n)(t)&&(this.aggConfig.sortSettings.mode=t),Object(a.o)(n)&&(this.aggConfig.sortSettings.numericType=n)}this.aggConfig={...this.aggConfig,...null!=o?o:{}}},isValid(){var e;return!(!this.aggConfig.sortField||!Object(a.l)(this.aggConfig.sortField)&&(null===(e=this.aggConfig.sortSettings)||void 0===e||!e.order))}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(2),a=n.n(r),i=n(20),o=n(62),s=n(17);const l=a.a.createContext({value:null,setValue(){throw new Error("MlStorageContext set method is not implemented")},removeValue(){throw new Error("MlStorageContext remove method is not implemented")}});function c({children:e,storage:t,storageKeys:n}){const a=Object(r.useMemo)((()=>n.reduce(((e,n)=>(e[n]=t.get(n),e)),{})),[t,n]),[c,u]=Object(r.useState)(a),d=Object(r.useCallback)(((e,n)=>{t.set(e,n),u((t=>({...t,[e]:n})))}),[t]),p=Object(r.useCallback)((e=>{t.remove(e),u((t=>Object(i.omit)(t,e)))}),[t]);Object(r.useEffect)((function(){const e=e=>{(function(e,t){return t.includes(e)})(e.key,n)&&(Object(o.a)(e.newValue)?u((t=>({...t,[e.key]:"string"==typeof e.newValue?JSON.parse(e.newValue):e.newValue}))):u((t=>Object(i.omit)(t,e.key))))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[n]);const f=Object(r.useMemo)((()=>({value:c,setValue:d,removeValue:p})),[c,d,p]);return Object(s.jsx)(l.Provider,{value:f},e)}function u(e,t){const{value:n,setValue:a,removeValue:i}=Object(r.useContext)(l);return[Object(r.useMemo)((()=>{var r;return null!==(r=null==n?void 0:n[e])&&void 0!==r?r:t}),[n,e,t]),Object(r.useCallback)((t=>{Object(o.a)(t)?a(e,t):i(e)}),[a,i,e])]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(2);var r=n(18),a=n(17);const i=({renderOption:e,changeHandler:t,options:n,placeholder:i="Search ...",testSubj:o,isDisabled:s})=>Object(a.jsx)(r.EuiComboBox,{fullWidth:!0,placeholder:i,singleSelection:{asPlainText:!0},options:n,selectedOptions:[],onChange:t,isClearable:!1,"data-test-subj":o,isDisabled:s,renderOption:e})},function(e,t,n){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var r=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,i=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};r.inherits(i,a),t.JsonHighlightRules=i})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var r=e("../range").Range,a=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var a=n[1].length,i=e.findMatchingBracket({row:t,column:a});if(!i||i.row==t)return 0;var o=this.$getIndent(e.getLine(i.row));e.replace(new r(t,0,t,a-1),o)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(a.prototype),t.MatchingBraceOutdent=a})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var r=e("../../lib/oop"),a=e("../../range").Range,i=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,i),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var a=this._getFoldWidgetBase(e,t,n);return!a&&this.startRegionRe.test(r)?"start":a},this.getFoldWidgetRange=function(e,t,n,r){var a,i=e.getLine(n);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(e,i,n);if(a=i.match(this.foldingStartMarker)){var o=a.index;if(a[1])return this.openingBracketBlock(e,a[1],n,o);var s=e.getCommentFoldRange(n,o+a[0].length,1);return s&&!s.isMultiLine()&&(r?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}return"markbegin"!==t&&(a=i.match(this.foldingStopMarker))?(o=a.index+a[0].length,a[1]?this.closingBracketBlock(e,a[1],n,o):e.getCommentFoldRange(n,o,-1)):void 0},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),i=t,o=n.length,s=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=i)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}s=t}}return new a(i,o,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),i=e.getLength(),o=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<i;){t=e.getLine(n);var c=s.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new a(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(e,t,r){"use strict";var a=e("../lib/oop"),i=e("./text").Mode,o=e("./json_highlight_rules").JsonHighlightRules,s=e("./matching_brace_outdent").MatchingBraceOutdent,l=e("./behaviour/cstyle").CstyleBehaviour,c=e("./folding/cstyle").FoldMode,u=e("../worker/worker_client").WorkerClient,d=function(){this.HighlightRules=o,this.$outdent=new s,this.$behaviour=new l,this.foldingRules=new c};a.inherits(d,i),function(){this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t);return"start"==e&&t.match(/^.*[\{\(\[]\s*$/)&&(r+=n),r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u(["ace"],n(113),"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/json"}.call(d.prototype),t.Mode=d}))},function(e,t){e.exports.id="ace/mode/json_worker",e.exports.src='"no use strict";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},,,,,function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var r="%[a-f0-9]{2}",a=new RegExp("("+r+")|([^%]+?)","gi"),i=new RegExp("("+r+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function s(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(a)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(a)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=s(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var l=a[o];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=a},function(e,t,n){e.exports=n(8)(1918)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var r=n(2);t.useFirstMountState=function(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}}])]);