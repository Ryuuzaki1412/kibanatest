/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[7],{178:function(e,t,s){"use strict";s.r(t),s.d(t,"EmbeddableWrapper",(function(){return z})),s.d(t,"IndexDataVisualizerViewWrapper",(function(){return C})),s.d(t,"DataVisualizerGridEmbeddable",(function(){return grid_embeddable_DataVisualizerGridEmbeddable}));var i=s(1),a=s.n(i),n=s(6),r=s(13),d=s(38),u=s.n(d),o=s(0),l=s(61),c=s.n(l),b=s(9),j=s(27),p=s(42),x=s(33),g=s(30),h=s(64),m=s(17),O=s(2);const f=()=>Object(O.jsx)(b.EuiText,{textAlign:"center"},Object(O.jsx)(b.EuiSpacer,{size:"l"}),Object(O.jsx)(b.EuiLoadingSpinner,{size:"l"}),Object(O.jsx)(b.EuiSpacer,{size:"l"}));var v=s(92),E=s(78),w=s(114),S=s(112);const y=Object(E.b)(),z=({input:e,onOutputChange:t})=>{const[s,i]=Object(o.useState)(y),a=Object(o.useCallback)((e=>{i({...s,...e}),t&&t(e)}),[s,t]),{configs:n,searchQueryLanguage:r,searchString:d,extendedColumns:u,progress:l,overallStatsProgress:c,setLastRefresh:p}=Object(S.a)(e,s);Object(o.useEffect)((()=>{p(Date.now())}),[null==e?void 0:e.lastReloadRequestTime,p]);const x=Object(o.useCallback)((function(t,s){return t.reduce(((t,i)=>{const a=s.find((e=>e.fieldName===i));return void 0!==a&&(t[i]=Object(O.jsx)(w.a,{item:a,dataView:e.dataView,combinedQuery:{searchQueryLanguage:r,searchString:d},onAddFilter:e.onAddFilter,totalDocuments:e.totalDocuments})),t}),{})}),[e,r,d]);return 100===l&&0===n.length?Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flex:"1 0 100%",textAlign:"center"}},Object(O.jsx)(b.EuiText,{size:"xs",color:"subdued"},Object(O.jsx)(b.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued"}),Object(O.jsx)(b.EuiSpacer,{size:"m"}),Object(O.jsx)(j.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableNoResultsMessage",defaultMessage:"No results found"}))):Object(O.jsx)(v.a,{items:n,pageState:s,updatePageState:a,getItemIdToExpandedRowMap:x,extendedColumns:u,showPreviewByDefault:null==e?void 0:e.showPreviewByDefault,onChange:t,loading:l<100,overallStatsRunning:c.isRunning})},C=e=>{const{embeddableInput:t,onOutputChange:s}=e,i=c()(t);return i&&i.dataView?Object(O.jsx)(z,{input:i,onOutputChange:s}):Object(O.jsx)(b.EuiEmptyPrompt,{iconType:"warning",iconColor:"danger",title:Object(O.jsx)("h2",null,Object(O.jsx)(j.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorTitle",defaultMessage:"Error loading embeddable"})),body:Object(O.jsx)("p",null,Object(O.jsx)(j.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableErrorDescription",defaultMessage:"There was an error loading the embeddable. Please check if all the required input is valid."}))})};class grid_embeddable_DataVisualizerGridEmbeddable extends p.Embeddable{constructor(e,t,s){super(e,{},s),a()(this,"node",void 0),a()(this,"reload$",new r.Subject),a()(this,"type",m.a),this.services=t}render(e){super.render(e),this.node=e;const t=this.services[0].i18n.Context,s={...this.services[0],...this.services[1]},i={...Object(n.pick)(s,["data","http","notifications","theme","uiSettings","i18n"]),uiSettingsKeys:x.UI_SETTINGS};u.a.render(Object(O.jsx)(t,null,Object(O.jsx)(g.KibanaThemeProvider,{theme$:this.services[0].theme.theme$},Object(O.jsx)(g.KibanaContextProvider,{services:s},Object(O.jsx)(h.a,i,Object(O.jsx)(o.Suspense,{fallback:Object(O.jsx)(f,null)},Object(O.jsx)(C,{id:this.input.id,embeddableContext:this,embeddableInput:this.getInput$(),onOutputChange:e=>this.updateOutput(e)})))))),e)}destroy(){super.destroy(),this.node&&u.a.unmountComponentAtNode(this.node)}reload(){this.reload$.next()}supportedTriggers(){return[]}}}}]);