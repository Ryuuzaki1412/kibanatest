(window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[]).push([[0],{23:function(e,n,l){"use strict";l.r(n),l.d(n,"convertToLens",(function(){return r}));var s=l(3),a=l(17),t=l(19),i=l(11),o=l(0);const d=(e,n,l,s)=>{var t,i,d,u,r,p,g,c,m,y,v,f;const b=n.uiState.get("vis.legendOpen"),D=void 0!==b?b?o.LegendDisplay.SHOW:o.LegendDisplay.HIDE:void 0,L=null!==(t=null!==(i=n.params.labels.values)&&void 0!==i?i:n.params.showValuesInLegend)&&void 0!==t?t:n.type.visConfig.defaults.showValuesInLegend;return[{layerId:e,layerType:"data",primaryGroups:s,secondaryGroups:[],metrics:l.length?[l[0]]:[],numberDisplay:!1===L?a.NumberDisplayTypes.HIDDEN:null!==(d=n.params.labels.valuesFormat)&&void 0!==d?d:n.type.visConfig.defaults.labels.valuesFormat,categoryDisplay:n.params.labels.show?null!==(u=n.params.labels.position)&&void 0!==u?u:n.type.visConfig.defaults.labels.position:a.CategoryDisplayTypes.HIDE,legendDisplay:null!==(r=null!=D?D:n.params.legendDisplay)&&void 0!==r?r:n.type.visConfig.defaults.legendDisplay,legendPosition:null!==(p=n.params.legendPosition)&&void 0!==p?p:n.type.visConfig.defaults.legendPosition,showValuesInLegend:L,nestedLegend:null!==(g=n.params.nestedLegend)&&void 0!==g?g:n.type.visConfig.defaults.nestedLegend,percentDecimals:null!==(c=n.params.labels.percentDecimals)&&void 0!==c?c:n.type.visConfig.defaults.labels.percentDecimals,emptySizeRatio:null!==(m=n.params.emptySizeRatio)&&void 0!==m?m:n.type.visConfig.defaults.emptySizeRatio,legendMaxLines:null!==(y=n.params.maxLegendLines)&&void 0!==y?y:n.type.visConfig.defaults.maxLegendLines,legendSize:null!==(v=n.params.legendSize)&&void 0!==v?v:n.type.visConfig.defaults.legendSize,truncateLegend:null!==(f=n.params.truncateLegend)&&void 0!==f?f:n.type.visConfig.defaults.truncateLegend}]},u=(e,n,{metrics:l,buckets:s})=>({shape:n.params.isDonut?"donut":"pie",layers:d(e,n,l,s.all),palette:n.params.palette}),r=async(e,n)=>{var l;if(!n)return null;const o=Object(i.a)(),d=await Object(s.getDataViewByIndexPatternId)(null===(l=e.data.indexPattern)||void 0===l?void 0:l.id,o);if(!d)return null;const{getColumnsFromVis:r}=await s.convertToLensModule,p=r(e,n,d,{buckets:[],splits:["segment"],unsupported:["split_row","split_column"]});if(null===p)return null;const[g]=p;if(g.buckets.all.length>3||!g.buckets.all.length)return null;const c=Object(t.v4)(),m=d.id;return{type:"lnsPie",layers:[{indexPatternId:m,layerId:c,columns:g.columns.map(a.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:u(c,e,g),indexPatternIds:[m]}}}}]);