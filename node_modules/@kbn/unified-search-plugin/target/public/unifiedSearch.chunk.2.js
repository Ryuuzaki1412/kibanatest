(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[2],{56:function(e,t,s){"use strict";var i=s(60);s.d(t,"c",(function(){return i.d}));var r=s(57);s.d(t,"g",(function(){return r.c})),s.d(t,"a",(function(){return r.b}));var a=s(59);s.d(t,"b",(function(){return a.a})),s.d(t,"e",(function(){return a.c})),s.d(t,"d",(function(){return a.b})),s.d(t,"f",(function(){return a.d}))},61:function(e,t,s){"use strict";s.d(t,"g",(function(){return i.b})),s.d(t,"i",(function(){return i.e})),s.d(t,"h",(function(){return i.d})),s.d(t,"j",(function(){return i.f})),s.d(t,"k",(function(){return i.g})),s.d(t,"f",(function(){return i.a})),s.d(t,"b",(function(){return r.a})),s.d(t,"d",(function(){return v})),s.d(t,"c",(function(){return F})),s.d(t,"e",(function(){return M})),s.d(t,"l",(function(){return L})),s.d(t,"a",(function(){return I.a})),s.d(t,"m",(function(){return W}));var i=s(56),r=s(64),a=s(3),l=s.n(a),o=s(0),n=s.n(o),u=s(11),d=s(12),c=s(4),p=s(20);class phrase_suggestor_PhraseSuggestorUI extends n.a.Component{constructor(...e){super(...e),l()(this,"services",this.props.kibana.services),l()(this,"abortController",void 0),l()(this,"state",{suggestions:[],isLoading:!1}),l()(this,"onSearchChange",(e=>{this.setState({isLoading:!0}),this.updateSuggestions(`${e}`)})),l()(this,"updateSuggestions",Object(c.debounce)((async(e="")=>{var t;this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const{indexPattern:s,field:i,timeRangeForSuggestionsOverride:r,filtersForSuggestions:a}=this.props;if(!i||!this.isSuggestingValues())return;this.setState({isLoading:!0});const l=await this.services.unifiedSearch.autocomplete.getValueSuggestions({indexPattern:s,field:i,query:e,signal:this.abortController.signal,useTimeRange:r,boolFilter:Object(p.buildQueryFromFilters)(a,void 0).filter,method:null!=a&&a.length?"terms_agg":void 0,querySuggestionKey:null===(t=this.props.suggestionsAbstraction)||void 0===t?void 0:t.type});this.setState({suggestions:l,isLoading:!1})}),500))}componentDidMount(){this.updateSuggestions()}componentWillUnmount(){this.abortController&&this.abortController.abort()}isSuggestingValues(){var e;const t=this.services.uiSettings.get(d.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES),{field:s}=this.props,i=null==s||null===(e=s.esTypes)||void 0===e?void 0:e.includes("version");return t&&s&&s.aggregatable&&"string"===s.type&&!i}}Object(u.withKibana)(phrase_suggestor_PhraseSuggestorUI);var h=s(39),f=s(19),b=s(80),g=s(58),m=s(60),j=s(1);function O(e){return Object(r.a)(e)}const v=Object(h.injectI18n)(Object(f.withEuiTheme)(Object(u.withKibana)(class phrases_values_input_PhrasesValuesInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const{suggestions:e,isLoading:t}=this.state,{values:s,intl:i,onChange:r,fullWidth:a,onParamsUpdate:l,compressed:o,disabled:n}=this.props,u=s?Object(c.uniq)([...s,...e]):e,d=Object(b.a)(u);return Object(j.jsx)(O,{async:!0,isLoading:t,fullWidth:a,compressed:o,placeholder:i.formatMessage({id:"unifiedSearch.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),"aria-label":i.formatMessage({id:"unifiedSearch.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),delimiter:",",isCaseSensitive:!0,options:u,getLabel:e=>e,selectedOptions:s||[],onSearchChange:this.onSearchChange,onCreateOption:e=>{l(e.trim())},className:(p=this.props.theme,Object(g.css)(".euiComboBox__inputWrap{",Object(f.euiScrollBarStyles)(p)," overflow:auto;max-height:100px;}","")),onChange:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox",isDisabled:n,truncationProps:m.a,inputPopoverProps:{panelMinWidth:d,anchorPosition:"downRight"}});var p}})));var S=s(59);class value_input_type_ValueInputTypeUI extends o.Component{constructor(...e){super(...e),l()(this,"getValueForNumberField",(e=>{if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?e:t}return e})),l()(this,"onBoolChange",(e=>{const t="true"===e.target.value;this.props.onChange(t)})),l()(this,"onChange",(e=>{const t=e.target.value;this.props.onChange(t)})),l()(this,"onBlur",(e=>{if(this.props.onBlur){const t=e.target.value;this.props.onBlur(t)}}))}render(){var e,t,s;const i=null!==(e=this.props.value)&&void 0!==e?e:"";let r;switch(null!==(t=null===(s=this.props.field)||void 0===s?void 0:s.type)&&void 0!==t?t:"string"){case"string":r=Object(j.jsx)(f.EuiFieldText,{compressed:this.props.compressed,disabled:this.props.disabled,fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,"aria-label":this.props.placeholder,value:i,onChange:this.onChange,isInvalid:!Object(S.f)(i,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className,"data-test-subj":this.props.dataTestSubj});break;case"number":case"number_range":r=Object(j.jsx)(f.EuiFieldNumber,{compressed:this.props.compressed,disabled:this.props.disabled,fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,"aria-label":this.props.placeholder,value:this.getValueForNumberField(i),onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className,"data-test-subj":this.props.dataTestSubj});break;case"date":case"date_range":r=Object(j.jsx)(f.EuiFieldText,{compressed:this.props.compressed,disabled:this.props.disabled,fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,"aria-label":this.props.placeholder,value:i,onChange:this.onChange,onBlur:this.onBlur,isInvalid:this.props.isInvalid,controlOnly:this.props.controlOnly,className:this.props.className,"data-test-subj":this.props.dataTestSubj});break;case"ip":case"ip_range":r=Object(j.jsx)(f.EuiFieldText,{fullWidth:this.props.fullWidth,disabled:this.props.disabled,placeholder:this.props.placeholder,"aria-label":this.props.placeholder,value:i,onChange:this.onChange,isInvalid:!Object(c.isEmpty)(i)&&!Object(S.f)(i,this.props.field),controlOnly:this.props.controlOnly,className:this.props.className,compressed:this.props.compressed,"data-test-subj":this.props.dataTestSubj});break;case"boolean":r=Object(j.jsx)(f.EuiSelect,{options:[{value:void 0,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:i,onChange:this.onBoolChange,"aria-label":this.props.placeholder,className:this.props.className,fullWidth:this.props.fullWidth,compressed:this.props.compressed,"data-test-subj":this.props.dataTestSubj})}return r}}const x=Object(h.injectI18n)(value_input_type_ValueInputTypeUI);function C(e){return Object(r.a)(e)}const F=Object(h.injectI18n)(Object(u.withKibana)(class phrase_value_input_PhraseValueInputUI extends phrase_suggestor_PhraseSuggestorUI{constructor(...e){super(...e),l()(this,"inputRef",null)}render(){return Object(j.jsx)(n.a.Fragment,null,this.isSuggestingValues()?this.renderWithSuggestions():Object(j.jsx)(x,{disabled:this.props.disabled,compressed:this.props.compressed,fullWidth:this.props.fullWidth,placeholder:this.props.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,field:this.props.field,isInvalid:this.props.invalid}))}renderWithSuggestions(){const{suggestions:e,isLoading:t}=this.state,{value:s,intl:i,onChange:r,fullWidth:a}=this.props,l=String(s),o=s?Object(c.uniq)([l,...e]):e,n=Object(b.a)(o);return Object(j.jsx)(C,{async:!0,isLoading:t,inputRef:e=>{this.inputRef=e},isDisabled:this.props.disabled,fullWidth:a,compressed:this.props.compressed,placeholder:i.formatMessage({id:"unifiedSearch.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),"aria-label":i.formatMessage({id:"unifiedSearch.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:o,getLabel:e=>e,selectedOptions:s?[l]:[],onChange:([e=""])=>{r(e)},onSearchChange:this.onSearchChange,onCreateOption:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox",singleSelection:m.b,truncationProps:m.a,inputPopoverProps:{panelMinWidth:n,anchorPosition:"downRight"}})}}));var E=s(17),y=s.n(E);function L(e){return Boolean(e&&"from"in e&&"to"in e)}const M=Object(h.injectI18n)((function(e){const t=Object(u.useKibana)(),s=e=>{if("string"!=typeof e&&"number"!=typeof e)return e;const s=t.services.uiSettings.get("dateFormat:tz"),i=s&&"Browser"!==s?s:y.a.tz.guess(),r=y()(e).tz(i);return r.isValid()?null==r?void 0:r.format("YYYY-MM-DDTHH:mm:ss.SSSZ"):e},i=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:t,to:Object(c.get)(e,"value.to")})},r=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:Object(c.get)(e,"value.from"),to:t})};return Object(j.jsx)("div",null,Object(j.jsx)(f.EuiFormControlLayoutDelimited,{compressed:e.compressed,fullWidth:e.fullWidth,"aria-label":e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:Object(j.jsx)(x,{controlOnly:!0,compressed:e.compressed,field:e.field,value:e.value?e.value.from:void 0,onChange:i,onBlur:e=>{i(s(e))},placeholder:e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start"}),disabled:e.disabled,dataTestSubj:"range-start"}),endControl:Object(j.jsx)(x,{controlOnly:!0,compressed:e.compressed,field:e.field,value:e.value?e.value.to:void 0,onChange:r,onBlur:e=>{r(s(e))},placeholder:e.intl.formatMessage({id:"unifiedSearch.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End"}),disabled:e.disabled,dataTestSubj:"range-end"})}))}));var I=s(68),D=s(7),w=s.n(D),P=s(5);const T=Object(o.memo)((function(e){return Object(j.jsx)(f.EuiConfirmModal,w()({"data-test-subj":"close-filter-editor-confirm-modal",title:P.i18n.translate("unifiedSearch.filter.closeEditorConfirmModal.title",{defaultMessage:"Unsaved changes"}),cancelButtonText:P.i18n.translate("unifiedSearch.filter.closeEditorConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:P.i18n.translate("unifiedSearch.filter.closeEditorConfirmModal.confirmButton",{defaultMessage:"Discard changes"}),buttonColor:"danger",defaultFocusedButton:"confirm"},e),Object(j.jsx)("p",null,P.i18n.translate("unifiedSearch.filter.closeEditorConfirmModal.warningLabel",{defaultMessage:"If you leave now, your unsaved filters will be lost."})))})),_=e=>"queryDsl"in e&&"customLabel"in e,B=(e,t)=>e.queryDsl!==t.queryDsl||e.customLabel!==t.customLabel;function W(e){return function(t){const[s,i]=Object(o.useState)(),[r,a]=Object(o.useState)(!1),[l,u]=Object(o.useState)(),[d,c]=Object(o.useState)(),h=Object(o.useCallback)((()=>{a(!1)}),[a]),f=Object(o.useCallback)((()=>{a(!1),null==s||s.map((e=>e()))}),[s,a]),b=Object(o.useCallback)((e=>{l&&d&&(_(l)&&B(d.queryDslFilter,l)||!_(l)&&!Object(p.compareFilters)(d.filter,l,{index:!0,alias:!0}))?(a(!0),i(e)):null==e||e.map((e=>e()))}),[d,l,a,i]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(e,w()({},t,{onCloseFilterPopover:b,onLocalFilterCreate:c,onLocalFilterUpdate:u})),r&&Object(j.jsx)(T,{onCancel:h,onConfirm:f}))}}},64:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var i=s(7),r=s.n(i),a=s(19),l=(s(0),s(58));const o=e=>Object(l.css)(".euiComboBoxPlaceholder{padding-right:calc(",e.size.xs,");}","");var n=s(1);function u(e){const{options:t,selectedOptions:s,getLabel:i,onChange:l,...u}=e,{euiTheme:d}=Object(a.useEuiTheme)(),c=t.map(i),p=c.map((e=>({label:e}))),h=s.filter((e=>-1!==t.indexOf(e))).map((e=>p[t.indexOf(e)]));return Object(n.jsx)(a.EuiComboBox,r()({options:p,className:o(d),selectedOptions:h,onChange:e=>{const s=e.map((({label:e})=>t[c.indexOf(e)]));l(s)},sortMatchesBy:"startsWith"},u))}},68:function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var i=s(3),r=s.n(i),a=s(19),l=s(39),o=s(20),n=s(4),u=s(0),d=s.n(u),c=s(5),p=s(50),h=s(23),f=s(11),b=s(58),g=s(64),m=s(59),j=s(29),O=s(45),v=s(60);const S=Object(b.css)({name:"1qpkor7",styles:".euiFormRow__fieldWrapper{line-height:1.5;}"}),x=Object(b.css)({name:"1rv48pq",styles:"& .euiFormLabel[for]{cursor:default;}"});var C=s(1);var F={name:"1yc9uo8",styles:"overflow-wrap:break-word"};class filter_editor_FilterEditorComponent extends u.Component{constructor(e){var t;super(e),r()(this,"toggleCustomEditor",(()=>{const e=!this.state.isCustomEditorOpen;if(this.setState({isCustomEditorOpen:e}),this.props.onLocalFilterUpdate){const{customLabel:t,queryDsl:s,localFilter:i}=this.state;e?this.props.onLocalFilterUpdate({queryDsl:s,customLabel:t}):this.props.onLocalFilterUpdate(i)}})),r()(this,"isQueryDslValid",(e=>{try{const t=JSON.parse(e);return Object.keys(t).length>0}catch{return!1}})),r()(this,"onIndexPatternChange",(([e])=>{this.setState({selectedDataView:e,localFilter:Object(o.buildEmptyFilter)(!1,e.id)})})),r()(this,"onCustomLabelChange",(e=>{const t=e.target.value;if(this.setState({customLabel:t}),this.props.onLocalFilterUpdate)if(this.state.isCustomEditorOpen){const{queryDsl:e}=this.state;this.props.onLocalFilterUpdate({queryDsl:e,customLabel:t})}else{const e={...this.state.localFilter,meta:{...this.state.localFilter.meta,alias:t||null}};this.props.onLocalFilterUpdate(e)}})),r()(this,"onQueryDslChange",(e=>{if(this.setState({queryDsl:e}),this.props.onLocalFilterUpdate){const{customLabel:t}=this.state;this.props.onLocalFilterUpdate({queryDsl:e,customLabel:t})}})),r()(this,"getFilterFromQueryDsl",(e=>{const{customLabel:t}=this.state,{$state:s,meta:{index:i,disabled:r=!1,negate:a=!1}}=this.props.filter;if(!s||!s.store)return;const l=i||this.props.indexPatterns[0].id;try{const i=JSON.parse(e);return Object(o.buildCustomFilter)(l,i,r,a,t||null,s.store)}catch{return null}})),r()(this,"onLocalFilterChange",(e=>{var t,s;const{selectedDataView:i,customLabel:r}=this.state,a=r||null,{$state:l,meta:{disabled:n=!1}}=this.props.filter;if(!l||!l.store||!i)return;let u;if(1===e.length){const t=e[0];u={...t,$state:{store:l.store},meta:{...t.meta,disabled:n,alias:a}}}else u=Object(o.buildCombinedFilter)(o.BooleanRelation.AND,e,i,n,!1,a,l.store);this.setState({localFilter:u}),null===(t=(s=this.props).onLocalFilterUpdate)||void 0===t||t.call(s,u)})),r()(this,"onSubmit",(()=>{const{isCustomEditorOpen:e,queryDsl:t,customLabel:s}=this.state,{$state:i}=this.props.filter;if(i&&i.store)if(e){var r,a;const e=(null===(r=this.props.filter)||void 0===r?void 0:r.meta.type)===o.FILTERS.CUSTOM||t!==this.parseFilterToQueryDsl(this.props.filter)?this.getFilterFromQueryDsl(t):{...this.props.filter,meta:{...null!==(a=this.props.filter.meta)&&void 0!==a?a:{},alias:s||null}};if(!e)return;this.props.onSubmit(e)}else{const e={...this.state.localFilter,meta:{...this.state.localFilter.meta,alias:s||null}};this.props.onSubmit(e)}}));const s=this.getIndexPatternFromFilter();this.state={selectedDataView:s,customLabel:e.filter.meta.alias||"",queryDsl:this.parseFilterToQueryDsl(e.filter),isCustomEditorOpen:this.isUnknownFilterType()||!(null===(t=this.props.filter)||void 0===t||!t.meta.isMultiIndex),localFilter:s?Object(n.merge)({},e.filter):Object(o.buildEmptyFilter)(!1)}}componentDidMount(){var e,t,s,i;const{localFilter:r,queryDsl:a,customLabel:l}=this.state;null===(e=(t=this.props).onLocalFilterCreate)||void 0===e||e.call(t,{filter:r,queryDslFilter:{queryDsl:a,customLabel:l}}),null===(s=(i=this.props).onLocalFilterUpdate)||void 0===s||s.call(i,r)}parseFilterToQueryDsl(e){const t=Object(o.filterToQueryDsl)(e,this.props.indexPatterns);return JSON.stringify(t,null,2)}render(){var e;const t=null!==(e=this.props.filter)&&void 0!==e&&e.meta.isMultiIndex?null:Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiButtonEmpty,{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?Object(C.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):Object(C.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"})));return Object(C.jsx)("div",null,Object(C.jsx)(a.EuiPopoverTitle,{paddingSize:"s"},Object(C.jsx)(a.EuiFlexGroup,{alignItems:"baseline",responsive:!1},Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"s"},"add"===this.props.mode?c.i18n.translate("unifiedSearch.filter.filterEditor.addFilterPopupTitle",{defaultMessage:"Add filter"}):c.i18n.translate("unifiedSearch.filter.filterEditor.editFilterPopupTitle",{defaultMessage:"Edit filter"}),Object(C.jsx)(a.EuiBadge,{color:"hollow"},c.i18n.translate("unifiedSearch.filter.filterEditor.experimentalLabel",{defaultMessage:"Technical preview"}))),Object(C.jsx)(a.EuiFlexItem,{grow:!1,className:"filterEditor__hiddenItem"}),t)),Object(C.jsx)(a.EuiForm,null,Object(C.jsx)("div",{className:"globalFilterItem__editorForm"},this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderFiltersBuilderEditor(),Object(C.jsx)(a.EuiSpacer,{size:"l"}),Object(C.jsx)(a.EuiFormRow,{label:c.i18n.translate("unifiedSearch.filter.filterEditor.createCustomLabelInputLabel",{defaultMessage:"Custom label (optional)"}),fullWidth:!0},Object(C.jsx)(a.EuiFieldText,{value:`${this.state.customLabel}`,onChange:this.onCustomLabelChange,placeholder:c.i18n.translate("unifiedSearch.filter.filterEditor.customLabelPlaceholder",{defaultMessage:"Add a custom label here"}),fullWidth:!0}))),Object(C.jsx)(a.EuiPopoverFooter,{paddingSize:"s"},Object(C.jsx)(a.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",style:{isolation:"isolate"},responsive:!1},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiButton,{fill:!0,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},"add"===this.props.mode?c.i18n.translate("unifiedSearch.filter.filterEditor.addButtonLabel",{defaultMessage:"Add filter"}):c.i18n.translate("unifiedSearch.filter.filterEditor.updateButtonLabel",{defaultMessage:"Update filter"}))),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},Object(C.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(C.jsx)(a.EuiFlexItem,null)))))}renderIndexPatternInput(){var e;if(null!==(e=this.props.filter)&&void 0!==e&&e.meta.isMultiIndex)return null;if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((e=>e===this.getIndexPatternFromFilter())))return null;const{selectedDataView:t}=this.state;return Object(C.jsx)(d.a.Fragment,null,Object(C.jsx)(a.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("unifiedSearch.filter.filterEditor.dateViewSelectLabel",{defaultMessage:"Data view"})},Object(C.jsx)(g.a,{fullWidth:!0,placeholder:c.i18n.translate("unifiedSearch.filter.filterBar.indexPatternSelectPlaceholder",{defaultMessage:"Select a data view"}),options:this.props.indexPatterns,selectedOptions:t?[t]:[],getLabel:e=>e.getName(),onChange:this.onIndexPatternChange,isClearable:!1,"data-test-subj":"filterIndexPatternsSelect",singleSelection:v.b,truncationProps:v.a})),Object(C.jsx)(a.EuiSpacer,{size:"s"}))}hasCombinedFilterCustomType(e){return e.some((e=>"custom"===e.meta.type))}renderFiltersBuilderEditor(){const{selectedDataView:e,localFilter:t}=this.state,s=Object(v.c)([t]),i=e&&(s.length>1&&!this.hasCombinedFilterCustomType(s)||1===s.length&&Object(m.e)(e,Object(m.a)(s[0],e),Object(m.c)(s[0]),Object(o.getFilterParams)(s[0])));return Object(C.jsx)(d.a.Fragment,null,Object(C.jsx)("div",{role:"region","aria-label":"",className:Object(b.cx)((r=this.props.theme.euiTheme,Object(b.css)("max-height:",r.size.base," * 10;","")),"eui-yScroll")},Object(C.jsx)(a.EuiToolTip,{position:"top",content:e?"":c.i18n.translate("unifiedSearch.filter.filterEditor.chooseDataViewFirstToolTip",{defaultMessage:"You need to select a data view first"}),display:"block"},Object(C.jsx)(j.a,{filters:[t],timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,filtersForSuggestions:this.props.filtersForSuggestions,dataView:e,onChange:this.onLocalFilterChange,disabled:!e,suggestionsAbstraction:this.props.suggestionsAbstraction,filtersCount:this.props.filtersCount}))),i?Object(C.jsx)(a.EuiFormRow,{fullWidth:!0,hasEmptyLabelSpace:!0,className:Object(b.cx)(S,x),label:Object(C.jsx)("strong",null,Object(C.jsx)(l.FormattedMessage,{id:"unifiedSearch.filter.filterBar.preview",defaultMessage:"{icon} Preview",values:{icon:Object(C.jsx)(a.EuiIcon,{type:"inspect",size:"s"})}}))},Object(C.jsx)(a.EuiText,{size:"xs","data-test-subj":"filter-preview",css:F},Object(C.jsx)(O.FilterBadgeGroup,{filters:[t],dataViews:this.props.indexPatterns,booleanRelation:o.BooleanRelation.AND,shouldShowBrackets:!1}))):null);var r}renderCustomEditor(){var e;let t="";return this.props.docLinks&&(t=Object(C.jsx)(a.EuiLink,{href:this.props.docLinks.links.query.queryDsl,target:"_blank"},c.i18n.translate("unifiedSearch.filter.filterEditor.queryDslDocsLinkLabel",{defaultMessage:"Learn about Query DSL syntax"}))),(null===(e=this.props.filter)||void 0===e?void 0:e.meta.type)===o.FILTERS.SPATIAL_FILTER&&(t=Object(C.jsx)(a.EuiTextColor,{color:"warning"},c.i18n.translate("unifiedSearch.filter.filterEditor.spatialFilterQueryDslHelpText",{defaultMessage:"Editing Elasticsearch Query DSL prevents filter geometry from displaying in map."}))),Object(C.jsx)(a.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("unifiedSearch.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"}),helpText:t},Object(C.jsx)(f.CodeEditor,{languageId:p.XJsonLang.ID,width:"100%",height:"250px",value:this.state.queryDsl,onChange:this.onQueryDslChange,"data-test-subj":"customEditorInput","aria-label":c.i18n.translate("unifiedSearch.filter.filterEditor.queryDslAriaLabel",{defaultMessage:"Elasticsearch Query DSL editor"})}))}isUnknownFilterType(){const{type:e}=this.props.filter.meta;if(Object(o.isCombinedFilter)(this.props.filter)){const{params:e}=this.props.filter.meta;return e&&this.hasCombinedFilterCustomType(e)}return!!e&&!["phrase","phrases","range","exists","combined"].includes(e)}getIndexPatternFromFilter(){return Object(h.getIndexPatternFromFilter)(this.props.filter,this.props.indexPatterns)}isFilterValid(){const{isCustomEditorOpen:e,queryDsl:t,selectedDataView:s,localFilter:i}=this.state;return e?this.isQueryDslValid(t):!!s&&Object(v.c)([i]).every((e=>Object(m.e)(s,Object(m.a)(e,s),Object(m.c)(e),Object(o.getFilterParams)(e))))}}const E=Object(a.withEuiTheme)(filter_editor_FilterEditorComponent)},80:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));const i={maxWidth:550,avCharWidth:7,paddingsWidth:116},r=(e,t)=>e.reduce(((e,s)=>{const i=t.find((e=>s[e]));if(!i)return e;const r=s[i].length;return e>r?e:r}),0),a=e=>e.reduce(((e,t)=>e>t.length?e:t.length),0);function l(e,t,s){return function(e,t){const{maxWidth:s,avCharWidth:r,paddingsWidth:a,minWidth:l}={...i,...t},o=a+e*r;return l&&o<l?l:Math.min(o,s)}(t?r(e,t):a(e),s)}}}]);