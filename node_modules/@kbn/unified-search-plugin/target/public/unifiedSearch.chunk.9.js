(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[9,12,19],{127:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJIMlYxM1YxNEgxVjEzVjJWMUgxM1YySDEyWk01IDVIMTAuOTk5VjRINVY1Wk0zIDVWNEg0VjVIM1pNNSA4VjdIOVY4SDVaTTMgOFY3SDRWOEgzWk01IDExVjEwSDhWMTFINVpNMyAxMVYxMEg0VjExSDNaIiBmaWxsPSIjMDdDIi8+CjxyZWN0IHg9IjEuNSIgeT0iMS41IiB3aWR0aD0iMTEiIGhlaWdodD0iMTIiIHN0cm9rZT0iIzA3QyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAyIi8+Cjwvc3ZnPgo="},41:function(e,t,a){"use strict";a.r(t),a.d(t,"DataViewsList",(function(){return S}));var i=a(7),n=a.n(i),s=a(0),r=a.n(s),o=a(19),c=a(5),d=a(1),l=a(3),u=a.n(l),g=a(8);const b="unified_search_sorting",j="alphabetically";class sorting_service_SortingService{constructor(e,t=new g.Storage(window.localStorage)){u()(this,"sortingStrategyType",void 0),u()(this,"direction",void 0),this.sortingStrategies=e,this.storage=t;const{sortingStrategyType:a,direction:i}=this.getSorting();this.sortingStrategyType=a,this.direction=i}getSorting(){var e,t;let a;try{a=this.storage.get(b)}catch(e){a=void 0}return{sortingStrategyType:(null===(e=a)||void 0===e?void 0:e.sortingStrategyType)||j,direction:(null===(t=a)||void 0===t?void 0:t.direction)||o.SortDirection.ASC}}setDirection(e){this.direction=e,this.storage.set(b,{direction:e,sortingStrategyType:this.sortingStrategyType})}setSortingStrategyType(e){this.sortingStrategyType=e,this.storage.set(b,{sortingStrategyType:e,direction:this.direction})}getOrderDirections(){return[o.SortDirection.ASC,o.SortDirection.DESC]}getSortingStrategyTypes(){return[j]}sortData(e){return[...e].sort(((e,t)=>{const a=this.sortingStrategies[this.sortingStrategyType],i=a(e),n=a(t);return this.compare(i,n)}))}compare(e,t){return this.direction===o.SortDirection.ASC?e.localeCompare(t):t.localeCompare(e)}}var p=a(60);const h={sortOrder:{asc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.asc",{defaultMessage:"Ascending"})},desc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.desc",{defaultMessage:"Descending"})}},editorAndPopover:{getSortDirectionLegend:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortDirections",{defaultMessage:"Sort directions"}),adhoc:{getTemporaryDataviewLabel:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.temporaryDataviewLabel",{defaultMessage:"Temporary"})},search:{getSearchPlaceholder:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.findDataView",{defaultMessage:"Find a data view"})}}};var x={name:"18g08sj",styles:"padding-bottom:0"};function S({dataViewsList:e,onChangeDataView:t,isTextBasedLangSelected:a,currentDataViewId:i,selectableProps:c,searchListInputId:l}){const u=Object(s.useMemo)((()=>new sorting_service_SortingService({alphabetically:e=>{var t;return null!==(t=e.name)&&void 0!==t?t:e.title}})),[]),[g,b]=Object(s.useState)(u.sortData(e)),j=Object(s.useMemo)((()=>u.getOrderDirections().map((e=>({id:e,iconType:`sort${Object(o.toSentenceCase)(e)}ending`,label:h.sortOrder[e].getSortOrderLabel()})))),[u]),S=Object(s.useCallback)((e=>{u.setDirection(e),b((e=>u.sortData(e)))}),[u]);return Object(d.jsx)(o.EuiSelectable,n()({},c,{listProps:{truncationProps:p.a,...null!=c&&c.listProps?c.listProps:void 0},"data-test-subj":"indexPattern-switcher",searchable:!0,singleSelection:"always",options:null==g?void 0:g.map((({title:e,id:t,name:n,isAdhoc:s})=>({key:t,label:n||e,value:t,checked:t!==i||Boolean(a)?void 0:"on",append:s?Object(d.jsx)(o.EuiBadge,{color:"hollow","data-test-subj":`dataViewItemTempBadge-${n}`},h.editorAndPopover.adhoc.getTemporaryDataviewLabel()):null}))),onChange:e=>{const a=e.find((({checked:e})=>e));t(a.value)},searchProps:{id:l,compressed:!0,placeholder:h.editorAndPopover.search.getSearchPlaceholder(),"data-test-subj":"indexPattern-switcher--input",...c?c.searchProps:void 0}}),((e,t)=>Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(o.EuiPanel,{css:x,color:"transparent",paddingSize:"s"},Object(d.jsx)(o.EuiFlexGroup,{gutterSize:"xs",direction:"row",justifyContent:"spaceBetween",alignItems:"center",responsive:!1},Object(d.jsx)(o.EuiFlexItem,null,t),Object(d.jsx)(o.EuiFlexItem,{grow:!1},Object(d.jsx)(o.EuiButtonGroup,{isIconOnly:!0,buttonSize:"compressed",options:j,legend:h.editorAndPopover.getSortDirectionLegend(),idSelected:u.direction,onChange:S})))),e)))}t.default=S},46:function(e,t,a){"use strict";a.r(t),a.d(t,"DataViewSelector",(function(){return l}));var i=a(0),n=a(11),s=a(41),r=a(19),o=a(1),c=a(5);const d=({noDataViewMatches:e,indexMatches:t,dataViewSearchString:a,setPopoverIsOpen:i,onCreateDefaultAdHocDataView:n})=>{const{euiTheme:s}=Object(r.useEuiTheme)();return n&&e&&t>0?Object(o.jsx)(r.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",css:Object(o.css)("margin:",s.size.s,";margin-bottom:0;","")},Object(o.jsx)(r.EuiFlexItem,{grow:!0},Object(o.jsx)(r.EuiButton,{fullWidth:!0,size:"s","data-test-subj":"explore-matching-indices-button",onClick:()=>{i(!1),n({title:a})}},c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.createForMatchingIndices",{defaultMessage:"Explore {indicesLength, plural,\n              one {# matching index}\n              other {# matching indices}}",values:{indicesLength:t}})),Object(o.jsx)(r.EuiSpacer,{size:"s"}))):null},l=({currentDataViewId:e,searchListInputId:t,dataViewsList:a,selectableProps:r,isTextBasedLangSelected:c,setPopoverIsOpen:l,onChangeDataView:u,onCreateDefaultAdHocDataView:g})=>{const b=Object(n.useKibana)(),{dataViews:j}=b.services,[p,h]=Object(i.useState)(!1),[x,S]=Object(i.useState)(""),[w,y]=Object(i.useState)(0),O=Object(i.useRef)();return Object(i.useEffect)((()=>(O.current=setTimeout((async function(){if(""!==x&&p){const e=await j.getIndices({pattern:x,isRollupIndex:()=>!1,showAllIndices:!1});y(e.length)}}),250),()=>{O.current&&clearTimeout(O.current)})),[x,j,p]),Object(o.jsx)(i.Fragment,null,Object(o.jsx)(s.DataViewsList,{dataViewsList:a,onChangeDataView:u,currentDataViewId:e,selectableProps:{...r||{},searchProps:{...(null==r?void 0:r.searchProps)||{},onChange:(e,t)=>{var i,n;null==r||null===(i=r.searchProps)||void 0===i||null===(n=i.onChange)||void 0===n||n.call(i,e,t),h(0===t.length&&a.length>0),S(e)}}},searchListInputId:t,isTextBasedLangSelected:c}),Object(o.jsx)(d,{noDataViewMatches:p,indexMatches:w,dataViewSearchString:x,setPopoverIsOpen:l,onCreateDefaultAdHocDataView:g}))};t.default=l},54:function(e,t,a){"use strict";a.r(t),a.d(t,"TextBasedLanguages",(function(){return v})),a.d(t,"DataViewPicker",(function(){return I}));var i=a(0),n=a.n(i),s=a(7),r=a.n(s),o=a(5),c=a(1),d=a(19),l=a(10),u=a(11),g=a(20),b=a(127),j=a.n(b),p=a(80);const h=({fullWidth:e,dataViewsList:t})=>({trigger:{maxWidth:e?void 0:300},popoverContent:{width:Object(p.a)(t,["name","id"],{minWidth:300})}});var x=a(46);const S="data.textLangTransitionModal",w=()=>Object(c.jsx)("div",null),y=n.a.lazy((()=>a.e(20).then(a.bind(null,142)))),O=e=>Object(c.jsx)(n.a.Suspense,{fallback:Object(c.jsx)(w,null)},Object(c.jsx)(y,e)),m=e=>({title:e.title,name:e.name,id:e.id,isAdhoc:!0});var f={name:"18s6nrc",styles:"border-top-right-radius:unset;border-top-left-radius:unset"};function D({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:a,savedDataViews:s,onChangeDataView:b,onAddField:p,onDataViewCreated:w,trigger:y,selectableProps:D,textBasedLanguages:v,onSaveTextLanguageQuery:I,onTextLangQuerySubmit:V,textBasedLanguage:L,isDisabled:C,onEditDataView:T,onCreateDefaultAdHocDataView:E}){const{euiTheme:P}=Object(d.useEuiTheme)(),[M,B]=Object(i.useState)(!1),[k,A]=Object(i.useState)([]),[W,F]=Object(i.useState)(""),[q,z]=Object(i.useState)(Boolean(L)),[N,H]=Object(i.useState)(!1),[_,Q]=Object(i.useState)(t),R=Object(u.useKibana)(),{application:G,data:Y,storage:Z,dataViews:$,dataViewEditor:J,appName:K,usageCollection:U}=R.services,X=null==U?void 0:U.reportUiCounter.bind(U,K),ee=h({fullWidth:y.fullWidth,dataViewsList:k}),[te,ae]=Object(i.useState)((()=>Boolean(Z.get(S)))),ie=Object(d.useGeneratedHtmlId)({prefix:"dataviewPickerListSearchInput"});Object(i.useEffect)((()=>{(async()=>{const e=s||await Y.dataViews.getIdsWithTitle(),t=!q&&(null==a?void 0:a.map(m))||[];A(e.concat(t))})()}),[Y,t,a,s,q]),Object(i.useEffect)((()=>{F(L?Object(g.getLanguageDisplayName)(L):y.label)}),[L,y.label]),Object(i.useEffect)((()=>{Boolean(L)!==q&&z(Boolean(L))}),[q,L]);const ne=Object(i.useMemo)((()=>null==a?void 0:a.some((e=>e.id===t))),[a,t]);let se;const re=Object(i.useCallback)((()=>{Z.set(S,!0),ae(!0)}),[Z]),oe=Object(i.useCallback)((e=>{null==V||V(e),B(!1),null==X||X(l.METRIC_TYPE.CLICK,"esql:unified_search_clicked")}),[V,X]),ce=Object(i.useCallback)((e=>{H(!1),z(!1),null==V||V({language:"kuery",query:""}),_&&b(_),F(y.label),e&&re()}),[b,V,re,_,y.label]),de=Object(i.useCallback)(((e,t)=>{Boolean(t)?(H(!1),null==I||I({onSave:()=>{ce(e)},onCancel:()=>{H(!1)}})):ce(e)}),[ce,I]);return N&&!te&&(se=Object(c.jsx)(O,{closeModal:de,setIsTextLangTransitionModalVisible:H,textBasedLanguage:L})),Object(c.jsx)(n.a.Fragment,null,Object(c.jsx)(d.EuiPopover,{panelClassName:"changeDataViewPopover",button:function(){const{label:t,title:a,"data-test-subj":i,fullWidth:s,...o}=y;return Object(c.jsx)(d.EuiButton,r()({css:ee.trigger,"data-test-subj":i,onClick:()=>{B(!M)},color:e?"danger":"primary",iconSide:"right",iconType:"arrowDown",title:W,fullWidth:s,disabled:C,textProps:{className:"eui-textTruncate"}},o),Object(c.jsx)(n.a.Fragment,null,ne&&!q&&Object(c.jsx)(d.EuiIcon,{type:j.a,color:"primary",css:Object(c.css)("margin-right:",P.size.s,";","")}),W))}(),panelProps:{"data-test-subj":"changeDataViewPopover"},isOpen:M,closePopover:()=>B(!1),panelPaddingSize:"none",initialFocus:q?void 0:`#${ie}`,display:"block",buffer:8},Object(c.jsx)("div",{css:ee.popoverContent},Object(c.jsx)(d.EuiContextMenuPanel,{size:"s",items:(()=>{const e=[];return p&&!q&&e.push(Object(c.jsx)(d.EuiContextMenuItem,{key:"add",icon:"indexOpen","data-test-subj":"indexPattern-add-field",onClick:()=>{B(!1),p()}},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addFieldButton",{defaultMessage:"Add a field to this data view"})),T||J.userPermissions.editDataView()?Object(c.jsx)(d.EuiContextMenuItem,{key:"manage",icon:"indexSettings","data-test-subj":"indexPattern-manage-field",onClick:async()=>{if(T){const e=await $.get(t);J.openEditor({editData:e,onSave:e=>{T(e)}})}else G.navigateToApp("management",{path:`/kibana/indexPatterns/patterns/${t}`});B(!1)}},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.manageFieldButton",{defaultMessage:"Manage this data view"})):Object(c.jsx)(n.a.Fragment,{key:"empty"}),Object(c.jsx)(d.EuiHorizontalRule,{margin:"none",key:"dataviewActions-divider"})),e.push(Object(c.jsx)(n.a.Fragment,{key:"add-dataview"},w&&Object(c.jsx)(d.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1,css:Object(c.css)("margin:",P.size.s,";margin-bottom:0;","")},Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(c.jsx)(d.EuiFlexItem,{grow:!1},Boolean(q)?Object(c.jsx)(d.EuiToolTip,{position:"top",content:o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.textBasedLangSwitchWarning",{defaultMessage:"Switching data views removes the current {textBasedLanguage} query. Save this search to ensure you don't lose work.",values:{textBasedLanguage:Object(g.getLanguageDisplayName)(L)}})},Object(c.jsx)(d.EuiIcon,{type:"warning",color:"warning","data-test-subj":"textBasedLang-warning"})):null),Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiText,{size:"s"},Object(c.jsx)("h5",null,o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.dataViewsLabel",{defaultMessage:"Data views"})))))),Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiButtonEmpty,{onClick:()=>{B(!1),w(),q&&(z(!1),null==V||V({language:"kuery",query:""}),F(y.label))},size:"xs",iconType:"plusInCircleFilled",iconSide:"left","data-test-subj":"dataview-create-new"},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addNewDataView",{defaultMessage:"Create a data view"})))),Object(c.jsx)(x.DataViewSelector,{currentDataViewId:t,searchListInputId:ie,dataViewsList:k,selectableProps:D,isTextBasedLangSelected:q,setPopoverIsOpen:B,onChangeDataView:async e=>{try{await $.get(e,!1,!0)}catch(e){}Q(e),B(!1),q&&!te?H(!0):q&&te?(z(!1),null==V||V({language:"kuery",query:""}),b(e),F(y.label)):b(e)},onCreateDefaultAdHocDataView:E}))),null!=v&&v.length&&e.push(Object(c.jsx)(d.EuiHorizontalRule,{margin:"none",key:"textbasedLanguages-divider"}),Object(c.jsx)(d.EuiPanel,{color:"transparent",paddingSize:"none",key:"try-esql"},Object(c.jsx)(d.EuiButton,{css:f,color:"success",size:"s",fullWidth:!0,onClick:()=>oe({esql:`from ${y.title} | limit 10`}),"data-test-subj":"select-text-based-language-panel",contentProps:{css:{justifyContent:"flex-start",paddingLeft:"26px"}}},o.i18n.translate("unifiedSearch.query.queryBar.textBasedLanguagesTryLabel",{defaultMessage:"Try ES|QL"}),Object(c.jsx)(d.EuiBadge,{color:"hollow"},o.i18n.translate("unifiedSearch.query.queryBar.textBasedLanguagesTechPreviewLabel",{defaultMessage:"Technical preview"}))))),e})()}))),se)}let v;!function(e){e.SQL="SQL",e.ESQL="ESQL"}(v||(v={}));const I=({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:a,savedDataViews:i,onChangeDataView:n,onEditDataView:s,onAddField:r,onDataViewCreated:o,trigger:d,selectableProps:l,textBasedLanguages:u,onSaveTextLanguageQuery:g,onTextLangQuerySubmit:b,textBasedLanguage:j,onCreateDefaultAdHocDataView:p,isDisabled:h})=>Object(c.jsx)(D,{isMissingCurrent:e,currentDataViewId:t,onChangeDataView:n,onEditDataView:s,onAddField:r,onDataViewCreated:o,onCreateDefaultAdHocDataView:p,trigger:d,adHocDataViews:a,savedDataViews:i,selectableProps:l,textBasedLanguages:u,onSaveTextLanguageQuery:g,onTextLangQuerySubmit:b,textBasedLanguage:j,isDisabled:h});t.default=I},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const i={maxWidth:550,avCharWidth:7,paddingsWidth:116},n=(e,t)=>e.reduce(((e,a)=>{const i=t.find((e=>a[e]));if(!i)return e;const n=a[i].length;return e>n?e:n}),0),s=e=>e.reduce(((e,t)=>e>t.length?e:t.length),0);function r(e,t,a){return function(e,t){const{maxWidth:a,avCharWidth:n,paddingsWidth:s,minWidth:r}={...i,...t},o=s+e*n;return r&&o<r?r:Math.min(o,a)}(t?n(e,t):s(e),a)}}}]);