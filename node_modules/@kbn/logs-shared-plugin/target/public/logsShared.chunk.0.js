/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.logsShared_bundle_jsonpfunction=window.logsShared_bundle_jsonpfunction||[]).push([[0,2,4,5,6,7,8,9],{109:function(e,t,n){"use strict";n.r(t),n.d(t,"LogColumnHeadersWrapper",(function(){return r}));var i=n(13),s=n(30),o=n(110);const r=i.euiStyled.div.attrs((e=>{var t;return{role:null!==(t=e.role)&&void 0!==t?t:"row"}}))`
    align-items: stretch;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
    overflow: hidden;
    padding-right: ${o.a}px;
    border-bottom: ${e=>e.theme.eui.euiBorderThin};
    box-shadow: 0 2px 2px -1px ${e=>Object(s.transparentize)(.3,e.theme.eui.euiColorLightShade)};
    position: relative;
    z-index: 1;
  `;t.default=r},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return VerticalScrollPanel}));var i=n(33),s=n.n(i),o=n(39),r=n(8),l=n(1),a=n(13),u=n(2);const d=20;class VerticalScrollPanel extends l.PureComponent{constructor(...e){super(...e),s()(this,"scrollRef",l.createRef()),s()(this,"childRefs",new Map),s()(this,"childDimensions",new Map),s()(this,"nextScrollEventFromCenterTarget",!1),s()(this,"handleScroll",Object(r.throttle)((()=>{this.reportVisibleChildren(!this.nextScrollEventFromCenterTarget),this.nextScrollEventFromCenterTarget=!1}),250)),s()(this,"registerChild",((e,t)=>{null===t?this.childRefs.delete(e):this.childRefs.set(e,t)})),s()(this,"updateChildDimensions",(()=>{this.childDimensions=new Map(Object(r.sortBy)(Array.from(this.childRefs.entries()).reduce(((e,[t,n])=>{const i=n.getOffsetRect();return null!==i&&e.push([t,i]),e}),[]),"1.top"))})),s()(this,"getVisibleChildren",(()=>{if(null===this.scrollRef.current||this.childDimensions.size<=0)return;const{childDimensions:e,props:{height:t},scrollRef:{current:{scrollTop:n}}}=this;return m(Array.from(e.entries()),t,n)})),s()(this,"getScrollPosition",(()=>{if(null===this.scrollRef.current)return;const{props:{height:e},scrollRef:{current:{scrollHeight:t,scrollTop:n}}}=this;return{pagesAbove:n/e,pagesBelow:(t-n-e)/e}})),s()(this,"reportVisibleChildren",((e=!1)=>{const{onVisibleChildrenChange:t}=this.props,n=this.getVisibleChildren(),i=this.getScrollPosition();n&&i&&"function"==typeof t&&t({bottomChild:n.bottomChild,middleChild:n.middleChild,topChild:n.topChild,fromScroll:e,...i})})),s()(this,"centerTarget",((e,t)=>{const{props:{height:n},childDimensions:i,scrollRef:s}=this;if(null===s.current||!e||i.size<=0)return!1;const o=i.get(e);if(o){const e=void 0===t?o.height/2:t;this.nextScrollEventFromCenterTarget=!0;const i=s.current.scrollTop,r=o.top+e-n/2;return s.current.scrollTop=r,i!==r}return!1})),s()(this,"handleUpdatedChildren",((e,t)=>{this.updateChildDimensions();let n=!1;e&&(n=this.centerTarget(e,t)),n||this.reportVisibleChildren()}))}componentDidMount(){this.handleUpdatedChildren(this.props.target,void 0)}getSnapshotBeforeUpdate(e){if(0===e.height&&this.props.height>0||e.target!==this.props.target&&this.props.target)return{scrollOffset:void 0,scrollTarget:this.props.target};if(this.props.height>0){const e=this.getVisibleChildren();if(e)return{scrollOffset:e.middleChildOffset,scrollTarget:e.middleChild}}return{scrollOffset:void 0,scrollTarget:void 0}}componentDidUpdate(e,t,n){e.height===this.props.height&&e.target===this.props.target&&e.entriesCount===this.props.entriesCount||this.handleUpdatedChildren(n.scrollTarget,n.scrollOffset),e.isLocked&&!this.props.isLocked&&this.scrollRef.current&&(this.scrollRef.current.scrollTop=this.scrollRef.current.scrollHeight)}componentWillUnmount(){this.childRefs.clear()}render(){const{children:e,height:t,width:n,hideScrollbar:i,"data-test-subj":s}=this.props,o=i?d:0;return Object(u.jsx)(c,{"data-test-subj":s,style:{height:t,width:n+o},scrollbarOffset:o,onScroll:this.handleScroll,ref:this.scrollRef},"function"==typeof e?e(this.registerChild):null)}}s()(VerticalScrollPanel,"defaultProps",{hideScrollbar:!1});const c=a.euiStyled.div`
  overflow-x: hidden;
  overflow-y: scroll;
  position: relative;
  padding-right: ${e=>e.scrollbarOffset||0}px;

  & * {
    overflow-anchor: none;
  }
`,m=(e,t,n)=>{const i=Math.min(h(e,n+t/2),e.length-1),s=Math.min(h(e,n,0,i),e.length-1),o=Math.min(h(e,n+t,i),e.length-1);return{bottomChild:e[o][0],bottomChildOffset:e[o][1].top-n-t,middleChild:e[i][0],middleChildOffset:n+t/2-e[i][1].top,topChild:e[s][0],topChildOffset:e[s][1].top-n}},h=Object(o.bisector)((([e,t])=>t.top+t.height)).left},111:function(e,t,n){"use strict";n.r(t),n.d(t,"LogColumnHeaders",(function(){return h})),n.d(t,"LogColumnHeader",(function(){return g}));var i=n(34),s=n.n(i),o=n(17),r=(n(1),n(13)),l=n(52),a=n(40),u=n(112),d=n(37),c=n(109),m=n(2);const h=({columnConfigurations:e,columnWidths:t})=>{const{firstVisiblePosition:n}=Object(a.b)();return Object(m.jsx)(c.default,null,e.map((e=>{if(Object(d.d)(e)){let i;return i=!1===e.timestampColumn.header?null:"string"==typeof e.timestampColumn.header?e.timestampColumn.header:n?Object(u.a)(new Date(n.time)):o.i18n.translate("xpack.logsShared.logs.stream.timestampColumnTitle",{defaultMessage:"Timestamp"}),Object(m.jsx)(g,{key:e.timestampColumn.id,columnWidth:t[e.timestampColumn.id],"data-test-subj":"logColumnHeader timestampLogColumnHeader"},i)}if(Object(d.c)(e)){let n;return n=!1===e.messageColumn.header?null:"string"==typeof e.messageColumn.header?e.messageColumn.header:o.i18n.translate("xpack.logsShared.logs.stream.messageColumnTitle",{defaultMessage:"Message"}),Object(m.jsx)(g,{columnWidth:t[e.messageColumn.id],"data-test-subj":"logColumnHeader messageLogColumnHeader",key:e.messageColumn.id},n)}if(Object(d.b)(e)){let n;return n=!1===e.fieldColumn.header?null:"string"==typeof e.fieldColumn.header?e.fieldColumn.header:e.fieldColumn.field,Object(m.jsx)(g,{columnWidth:t[e.fieldColumn.id],"data-test-subj":"logColumnHeader fieldLogColumnHeader",key:e.fieldColumn.id},n)}})))},g=({children:e,columnWidth:t,"data-test-subj":n})=>Object(m.jsx)(p,s()({"data-test-subj":n},t),Object(m.jsx)(f,null,e)),p=Object(r.euiStyled)(l.LogEntryColumn).attrs((e=>{var t;return{role:null!==(t=e.role)&&void 0!==t?t:"columnheader"}}))`
  align-items: center;
  display: flex;
  flex-direction: row;
  height: 32px;
  overflow: hidden;
`,f=Object(r.euiStyled)(l.LogEntryColumnContent)`
  color: ${e=>e.theme.eui.euiTitleColor};
  font-size: ${e=>e.theme.eui.euiFontSizeS};
  font-weight: ${e=>e.theme.eui.euiFontWeightSemiBold};
  line-height: ${e=>e.theme.eui.euiLineHeight};
  text-overflow: clip;
  white-space: pre;
`;t.default=g},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(17);function s(e,t=i.i18n.getLocale()){return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(e)}},113:function(e,t,n){"use strict";n.r(t),n.d(t,"LogEntryContextMenu",(function(){return m}));var i=n(34),s=n.n(i),o=n(1),r=n(17),l=n(5),a=n(13),u=n(52),d=n(2);const c=r.i18n.translate("xpack.logsShared.logEntryItemView.logEntryActionsMenuToolTip",{defaultMessage:"View actions for line"}),m=({"aria-label":e,isOpen:t,onOpen:n,onClose:i,items:r,externalItems:a})=>{const u=Object(o.useMemo)((()=>e=>t=>{i(),null==e||e(t)}),[i]),m=Object(d.jsx)(p,null,Object(d.jsx)(l.EuiButton,{"data-test-subj":"infraLogEntryContextMenuButton",size:"s",fill:!0,"aria-label":e||c,onClick:t?i:n,minWidth:"auto"},Object(d.jsx)(l.EuiIcon,{type:"boxesHorizontal"}))),f=Object(o.useMemo)((()=>r.map(((e,t)=>Object(d.jsx)(l.EuiContextMenuItem,{key:t,onClick:u(e.onClick),href:e.href},e.label))).concat((null!=a?a:[]).map(((e,t)=>Object(d.jsx)(l.EuiContextMenuItem,s()({key:`external_${t}`},e,{onClick:u(e.onClick)})))))),[r,u,a]);return Object(d.jsx)(h,null,Object(d.jsx)(g,null,Object(d.jsx)(l.EuiPopover,{panelPaddingSize:"none",closePopover:i,isOpen:t,button:m,ownFocus:!0},Object(d.jsx)(l.EuiContextMenuPanel,{items:f}))))},h=Object(a.euiStyled)(u.LogEntryColumnContent)`
  overflow: hidden;
  user-select: none;
`,g=a.euiStyled.div`
  position: absolute;
`,p=a.euiStyled.div`
  transform: translate(-6px, -6px);
`;t.default=m},114:function(e,t,n){"use strict";n.r(t),n.d(t,"LogEntryFieldColumn",(function(){return u})),n(1);var i=n(13),s=n(36),o=n(64),r=n(52),l=n(63),a=n(2);const u=({columnValue:e,highlights:[t],isActiveHighlight:n,wrapMode:i,render:r})=>Object(s.e)(e)?Object(a.jsx)(d,{wrapMode:i},Object(a.jsx)(o.a,{highlightTerms:Object(s.g)(t)?t.highlights:[],isActiveHighlight:n,value:e.value,render:r})):null,d=Object(i.euiStyled)(r.LogEntryColumnContent)`
  text-overflow: ellipsis;

  ${e=>"long"===e.wrapMode?l.c:"pre-wrapped"===e.wrapMode?l.e:l.f};
`;t.default=u},115:function(e,t,n){"use strict";n.r(t),n.d(t,"LogEntryMessageColumn",(function(){return d}));var i=n(1),s=n(13),o=n(36),r=n(64),l=n(52),a=n(63),u=n(2);const d=Object(i.memo)((({columnValue:e,highlights:t,isActiveHighlight:n,wrapMode:s,render:r})=>{const l=Object(i.useMemo)((()=>Object(o.j)(e)?m(e.message,t,n):null),[e,t,n]),a=Object(i.useMemo)((()=>Object(o.j)(e)?h(e.message):""),[e]);return Object(u.jsx)(c,{wrapMode:s},r?r(a):l)})),c=Object(s.euiStyled)(l.LogEntryColumnContent)`
  text-overflow: ellipsis;
  ${e=>"long"===e.wrapMode?a.c:"pre-wrapped"===e.wrapMode?a.e:a.f};
`,m=(e,t,n)=>e.map(((e,i)=>{if(Object(o.f)(e)){const[s=[]]=t.map((e=>{if(Object(o.i)(e)){const t=e.message[i];if(Object(o.h)(t))return t.highlights}return[]}));return Object(u.jsx)(r.a,{highlightTerms:s,isActiveHighlight:n,key:`MessageSegment-${i}`,value:e.value})}return Object(o.d)(e)?e.constant:"failed to format message"})),h=e=>e.map((e=>Object(o.d)(e)?e.constant:Object(o.f)(e)?e.value.toString():void 0)).join(" ");t.default=d},116:function(e,t,n){"use strict";n.r(t),n.d(t,"LogEntryRowWrapper",(function(){return o}));var i=n(13),s=n(63);const o=i.euiStyled.div.attrs((()=>({role:"row"})))`
    align-items: stretch;
    color: ${e=>e.theme.eui.euiTextColor};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: flex-start;
    overflow: hidden;
  
    ${e=>Object(s.d)(e.scale)};
    ${e=>e.isHighlighted?s.a:""}
  
    &:hover {
      ${s.b}
    }
  `;t.default=o},117:function(e,t,n){"use strict";n.r(t),n.d(t,"LogEntryTimestampColumn",(function(){return a}));var i=n(1),s=n(13),o=n(66),r=n(52),l=n(2);const a=Object(i.memo)((({format:e="time",time:t,render:n})=>{const i=Object(o.a)(t,{format:e});return Object(l.jsx)(u,null,n?n(t):i)})),u=Object(s.euiStyled)(r.LogEntryColumnContent)`
  color: ${e=>e.theme.eui.euiColorDarkShade};
  overflow: hidden;
  text-overflow: clip;
  white-space: pre;
`;t.default=a},118:function(e,t,n){"use strict";n.r(t),n.d(t,"ScrollableLogTextStreamView",(function(){return scrollable_log_text_stream_view_ScrollableLogTextStreamView}));var i=n(33),s=n.n(i),o=n(17),r=n(19),l=n(1),a=n.n(l),u=n(25),d=n.n(u),c=n(13),m=n(8);class auto_sizer_AutoSizer extends a.a.PureComponent{constructor(e){super(e),s()(this,"element",null),s()(this,"resizeObserver",null),s()(this,"windowWidth",-1),s()(this,"windowHeight",-1),s()(this,"state",{boundsMeasurement:{height:void 0,width:void 0},contentMeasurement:{height:void 0,width:void 0}}),s()(this,"measure",(e=>{if(!this.element)return;const{content:t=!0,bounds:n=!1}=this.props,{boundsMeasurement:i,contentMeasurement:s}=this.state,o=n?this.element.getBoundingClientRect():null,r=o?{height:o.height,width:o.width}:i;if(this.props.detectAnyWindowResize&&r){if(r.width&&-1!==this.windowWidth&&this.windowWidth>window.innerWidth){const e=this.windowWidth-window.innerWidth;r.width=r.width-e}if(r.height&&-1!==this.windowHeight&&this.windowHeight>window.innerHeight){const e=this.windowHeight-window.innerHeight;r.height=r.height-e}}this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight;const l=t&&e&&e.contentRect&&e?{height:e.contentRect.height,width:e.contentRect.width}:s;Object(m.isEqual)(r,i)&&Object(m.isEqual)(l,s)||requestAnimationFrame((()=>{this.resizeObserver&&(this.setState({boundsMeasurement:r,contentMeasurement:l}),this.props.onResize&&this.props.onResize({bounds:r,content:l}))}))})),s()(this,"updateMeasurement",(()=>requestAnimationFrame((()=>{const{detectAnyWindowResize:e}=this.props;if(e)switch(e){case"height":this.windowHeight!==window.innerHeight&&this.measure(null);break;case"width":this.windowWidth!==window.innerWidth&&this.measure(null);break;default:this.measure(null)}})))),s()(this,"storeRef",(e=>{this.element&&this.resizeObserver&&this.resizeObserver.unobserve(this.element),e&&this.resizeObserver&&this.resizeObserver.observe(e),this.element=e})),this.props.detectAnyWindowResize&&window.addEventListener("resize",this.updateMeasurement),this.resizeObserver=new ResizeObserver((e=>{e.forEach((e=>{e.target===this.element&&this.measure(e)}))}))}componentWillUnmount(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.props.detectAnyWindowResize&&window.removeEventListener("resize",this.updateMeasurement)}render(){const{children:e}=this.props,{boundsMeasurement:t,contentMeasurement:n}=this.state;return e({bounds:t,content:n,measureRef:this.storeRef})}}var h=n(5),g=n(2);const p=({titleText:e,bodyText:t,refetchText:n,onRefetch:i,testString:s})=>Object(g.jsx)(f,{title:Object(g.jsx)("h2",null,e),titleSize:"m",body:Object(g.jsx)("p",null,t),actions:Object(g.jsx)(h.EuiButton,{"data-test-subj":"infraNoDataButton",iconType:"refresh",color:"primary",fill:!0,onClick:i},n),"data-test-subj":s}),f=Object(c.euiStyled)(h.EuiEmptyPrompt)`
  align-self: center;
`;class loading_LogsSharedLoadingPanel extends l.PureComponent{render(){const{height:e,text:t,width:n}=this.props;return Object(g.jsx)(b,{style:{height:e,width:n}},Object(g.jsx)(j,null,Object(g.jsx)(h.EuiPanel,null,Object(g.jsx)(h.EuiLoadingChart,{size:"m"}),Object(g.jsx)(h.EuiText,null,Object(g.jsx)("p",null,t)))))}}const b=c.euiStyled.div`
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,j=c.euiStyled.div`
  flex: 0 0 auto;
  align-self: center;
  text-align: center;
`;var x=n(39),w=n(61);function O(e){if("logEntry"===e.kind)return`${e.logEntry.cursor.time}/${e.logEntry.cursor.tiebreaker}/${e.logEntry.id}`}function y(e){const t=e.split("/");return{gid:t.slice(2).join(":"),tiebreaker:parseInt(t[1],10),time:t[0]}}const C=Object(x.bisector)(Object(w.a)((function(e){if("logEntry"===e.kind)return e.logEntry.cursor})));var v=n(111),S=n(34),E=n.n(S);const M=({children:e})=>Object(g.jsx)(h.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(g.jsx)(h.EuiFlexItem,{grow:!1},e),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiHorizontalRule,null)));var L=n(48),T=n.n(L);const k=864e13;function _(e){const t=T.a.parse(e);return!(!t||!t.isValid())}function R(e,t="down",n){const i=T.a.parse(e,{roundUp:"up"===t,forceNow:n});return i&&i.isValid()?i.valueOf():null}const F=/(\+|\-)(\d+)(ms|s|m|h|d|w|M|y)$/;function z(e,t="before",n){if(_(e))return"now"===e?{value:"now"}:e.startsWith("now")?function(e,t){const[,n,i,s]=F.exec(e)||[];if(!n||!i||!s)return;const o="-"===n&&"before"===t||"+"===n&&"after"===t,r=parseInt(i,10);let l,a=s;switch(s){case"ms":case"s":l=o?2*r:Math.floor(r/2);break;case"m":let e;const t=10;o?(e=r>=t?.5:1,l=r+Math.floor(r*e)):l=r>=t?Math.floor(r/1.5):r-Math.floor(.5*r);break;case"h":1===r?(l=o?90:30,a="m"):l=o?r+1:r-1;break;case"d":case"w":case"M":case"y":1===r?(a=T.a.unitsDesc[T.a.unitsDesc.indexOf(s)+1],l=o?D(1,s,a)+1:D(1,s,a)-1):l=o?r+1:r-1;break;default:throw new TypeError("Unhandled datemath unit")}const{unit:u,amount:d}=H(l,a),c=Math.abs(d-D(r,s,u)),m=c%1!=0,h=`now${n}${d}${u}`;return B(h)?{value:h,diffUnit:m?s:a,diffAmount:m?Math.abs(l-r):c}:void 0}(e,t):n&&_(n)?function(e,t,n){const i=R(e),s=R(n),o=H(Math.abs(i-s),"ms"),r=D(o.amount,o.unit,"ms"),l="before"===t?i-r:i+r;return B(l)?{value:new Date(l).toISOString(),diffUnit:o.unit,diffAmount:o.amount}:void 0}(e,t,n):void 0}const I={wy:[["w",52],["y",1]],w:[["ms",1e3],["s",60],["m",60],["h",24],["d",7],["w",4],["M",12],["y",1]],M:[["ms",1e3],["s",60],["m",60],["h",24],["d",30],["M",12],["y",1]],default:[["ms",1e3],["s",60],["m",60],["h",24],["d",365],["y",1]]};function V(e,t){return"y"===e&&"w"===t||"w"===e&&"y"===t?I.wy:"w"===e||"w"===t?I.w:"M"===e||"M"===t?I.M:I.default}function D(e,t,n){if(t===n)return e;const i=V(t,n),s=i.findIndex((e=>e[0]===t)),o=i.findIndex((e=>e[0]===n));let r=e;if(s>o)for(let e=o;e<s;e++)r*=i[e][1];else for(let e=s;e<o;e++)r/=i[e][1];return r}function H(e,t){if("y"===t)return{amount:e,unit:t};const n=T.a.unitsAsc[T.a.unitsAsc.indexOf(t)+1],i=e/V(t,n).find((e=>e[0]===t))[1];return 1===i?{amount:i,unit:n}:i>=2?H(Math.round(i),n):{amount:e,unit:t}}function B(e){try{var t;const n="string"==typeof e?null!==(t=R(e))&&void 0!==t?t:-1:e;return n>=0&&n<=k}catch{return!1}}const W={hour12:!1,month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};class loading_item_view_LogTextStreamLoadingItemView extends l.PureComponent{render(){const{position:e,timestamp:t,startDateExpression:n,endDateExpression:i,className:s,hasMore:o,isLoading:r,isStreaming:l,onExtendRange:a,onStreamStart:u}=this.props,d=!o&&!l,c=Object(g.jsx)(A,{justifyContent:"center",alignItems:"center",gutterSize:"m"},r||l?Object(g.jsx)(U,{kind:l?"streaming":"loading"}):d?Object(g.jsx)(K,{position:e,onStreamStart:u,onExtendRange:a,startDateExpression:n,endDateExpression:i}):null);return Object(g.jsx)($,{className:s,position:e},"start"===e?c:null,Object(g.jsx)(P,{timestamp:t,position:e,isStreaming:l}),"end"===e?c:null)}}const A=Object(c.euiStyled)(h.EuiFlexGroup)`
  height: 40px;
`,$=c.euiStyled.div`
  padding-left: ${e=>e.theme.eui.euiSizeS};
  padding-top: ${e=>"start"===e.position?e.theme.eui.euiSizeL:e.theme.eui.euiSizeM};
  padding-bottom: ${e=>"end"===e.position?e.theme.eui.euiSizeL:e.theme.eui.euiSizeM};
`,P=({timestamp:e,position:t,isStreaming:n})=>{const i=n&&"end"===t?Object(g.jsx)(r.FormattedRelative,{units:"second",value:e,updateInterval:1}):Object(g.jsx)(r.FormattedTime,E()({value:e},W)),s="start"===t?Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.showingEntriesFromTimestamp",defaultMessage:"Showing entries from {timestamp}",values:{timestamp:i}}):n?Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.lastUpdate",defaultMessage:"Last update {timestamp}",values:{timestamp:i}}):Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.showingEntriesUntilTimestamp",defaultMessage:"Showing entries until {timestamp}",values:{timestamp:i}});return Object(g.jsx)(M,null,Object(g.jsx)(h.EuiTitle,{size:"xxs"},s))},U=({kind:e})=>Object(g.jsx)(l.Fragment,null,Object(g.jsx)(h.EuiFlexItem,{grow:!1},Object(g.jsx)(h.EuiLoadingSpinner,{size:"l"})),Object(g.jsx)(h.EuiFlexItem,{grow:!1},Object(g.jsx)(h.EuiText,{size:"s"},"streaming"===e?Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.streamingNewEntriesText",defaultMessage:"Streaming new entries"}):Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.loadingNewEntriesText",defaultMessage:"Loading new entries"})))),K=({position:e,startDateExpression:t,endDateExpression:n,onExtendRange:i,onStreamStart:s})=>{if("now"===("start"===e?t:n)&&"end"===e)return Object(g.jsx)(h.EuiButton,{"data-test-subj":"infraProgressCtaStreamLiveButton",onClick:s,size:"s"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.streamLive",defaultMessage:"Stream live"}));const o="start"===e?"arrowUp":"arrowDown",l="start"===e?z(t,"before",n):z(n,"after",t);return l&&"diffUnit"in l?Object(g.jsx)(h.EuiButton,{"data-test-subj":"infraProgressCtaButton",onClick:()=>{"function"==typeof i&&i(l.value)},iconType:o,size:"s"},Object(g.jsx)(N,{amount:l.diffAmount,unit:l.diffUnit})):null},N=({amount:e,unit:t})=>{switch(t){case"ms":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByMillisecondsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {millisecond} other {milliseconds}}",values:{amount:e}});case"s":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeBySecondsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {second} other {seconds}}",values:{amount:e}});case"m":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByMinutesButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {minute} other {minutes}}",values:{amount:e}});case"h":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByHoursButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {hour} other {hours}}",values:{amount:e}});case"d":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByDaysButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {day} other {days}}",values:{amount:e}});case"w":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByWeeksButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {week} other {weeks}}",values:{amount:e}});case"M":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByMonthsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {month} other {months}}",values:{amount:e}});case"y":return Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.extendTimeframeByYearsButton",defaultMessage:"Extend time frame by {amount, number} {amount, plural, one {year} other {years}}",values:{amount:e}});default:throw new TypeError("Unhandled unit: "+t)}};class jump_to_tail_LogTextStreamJumpToTail extends l.PureComponent{render(){const{onClickJump:e,width:t}=this.props;return Object(g.jsx)(J,{width:t},Object(g.jsx)(q,null,Object(g.jsx)(h.EuiText,{color:"subdued"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.streamingNewEntriesText",defaultMessage:"Streaming new entries"}))),Object(g.jsx)(h.EuiButtonEmpty,{"data-test-subj":"infraJumpToMostRecentEntriesButton",size:"xs",onClick:e,iconType:"arrowDown"},Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.jumpToTailText",defaultMessage:"Jump to most recent entries"})))}}const J=c.euiStyled.div`
  align-items: center;
  display: flex;
  min-height: ${e=>e.theme.eui.euiSizeXXL};
  width: ${e=>e.width}px;
  position: fixed;
  bottom: 0;
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};
`,q=c.euiStyled.div`
  padding: 8px 16px;
`;var G=n(108),X=n(60),Y=n(119),Q=n.n(Y),Z=n(20),ee=n(37),te=n(36),ne=n(52),ie=n(113),se=n(114),oe=n(115),re=n(116),le=n(117);const ae=o.i18n.translate("xpack.logsShared.logEntryItemView.logEntryActionsMenuToolTip",{defaultMessage:"View actions for line"}),ue=o.i18n.translate("xpack.logsShared.logs.logEntryActionsDetailsButton",{defaultMessage:"View details"}),de=o.i18n.translate("xpack.logsShared.lobs.logEntryActionsViewInContextButton",{defaultMessage:"View in context"}),ce=Object(l.memo)((({boundingBoxRef:e,columnConfigurations:t,columnWidths:n,highlights:i,isActiveHighlight:s,isHighlighted:o,logEntry:r,openFlyoutWithItem:a,openViewLogInContext:u,scale:d,wrap:c})=>{const h=Object(X.useUiTracker)({app:"infra_logs"}),[p,f]=Object(l.useState)(!1),[b,j]=Object(l.useState)(!1),x=Object(l.useCallback)((()=>j(!0)),[]),w=Object(l.useCallback)((()=>j(!1)),[]),O=Object(l.useCallback)((()=>f(!0)),[]),y=Object(l.useCallback)((()=>f(!1)),[]),C=Object(l.useCallback)((()=>null==a?void 0:a(r.id)),[a,r.id]),v=Object(l.useCallback)((()=>{null==u||u(r),h({metric:"view_in_context__stream"})}),[u,r,h]),S=Object(l.useMemo)((()=>!Object(m.isEmpty)(r.context)),[r]),M=void 0!==a,L=S&&void 0!==u,T=M||L,k=Object(Z.a)().services.uiActions,_=Q()((()=>Object(X.getContextMenuItemsFromActions)({uiActions:k,triggerId:G.ObservabilityTriggerId.LogEntryContextMenu,context:r})),[k,r]),R=Object(l.useMemo)((()=>{const e=[];return M&&e.push({label:ue,onClick:C}),L&&e.push({label:de,onClick:v}),e}),[M,L,C,v]),F=Object(l.useMemo)((()=>r.columns.reduce(((e,t)=>({...e,[t.columnId]:t})),{})),[r.columns]),z=Object(l.useMemo)((()=>i.reduce(((e,t)=>t.columns.reduce(((e,t)=>({...e,[t.columnId]:[...e[t.columnId]||[],t]})),e)),{})),[i]);return Object(g.jsx)(re.LogEntryRowWrapper,{"data-test-subj":"streamEntry logTextStreamEntry",ref:e,onMouseEnter:O,onMouseLeave:y,isHighlighted:o,scale:d},t.map((e=>{if(Object(ee.d)(e)){const t=F[e.timestampColumn.id],i=n[e.timestampColumn.id];return Object(g.jsx)(ne.LogEntryColumn,E()({"data-test-subj":"logColumn timestampLogColumn",key:e.timestampColumn.id},i),Object(te.k)(t)?Object(g.jsx)(le.LogEntryTimestampColumn,{time:t.time,render:e.timestampColumn.render}):null)}if(Object(ee.c)(e)){const t=F[e.messageColumn.id],i=n[e.messageColumn.id];return Object(g.jsx)(ne.LogEntryColumn,E()({"data-test-subj":"logColumn messageLogColumn",key:e.messageColumn.id},i),t?Object(g.jsx)(oe.LogEntryMessageColumn,{columnValue:t,highlights:z[t.columnId]||[],isActiveHighlight:s,wrapMode:c?"long":"pre-wrapped",render:e.messageColumn.render}):null)}if(Object(ee.b)(e)){const t=F[e.fieldColumn.id],i=n[e.fieldColumn.id];return Object(g.jsx)(ne.LogEntryColumn,E()({"data-test-subj":`logColumn fieldLogColumn fieldLogColumn:${e.fieldColumn.field}`,key:e.fieldColumn.id},i),t?Object(g.jsx)(se.LogEntryFieldColumn,{columnValue:t,highlights:z[t.columnId]||[],isActiveHighlight:s,wrapMode:c?"long":"pre-wrapped",render:e.fieldColumn.render}):null)}})),T?Object(g.jsx)(ne.LogEntryColumn,E()({key:"logColumn iconLogColumn iconLogColumn:details"},n[ne.iconColumnId]),p||b?Object(g.jsx)(ie.LogEntryContextMenu,{"aria-label":ae,isOpen:b,onOpen:x,onClose:w,items:R,externalItems:_.value}):null):null)}));class measurable_item_view_MeasurableItemView extends l.PureComponent{constructor(...e){super(...e),s()(this,"childRef",l.createRef()),s()(this,"getOffsetRect",(()=>{const e=this.childRef.current;return null===e?null:{height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth}}))}componentDidMount(){this.props.register(this.props.registrationKey,this)}componentWillUnmount(){this.props.register(this.props.registrationKey,null)}componentDidUpdate(e){e.registrationKey!==this.props.registrationKey&&(this.props.register(e.registrationKey,null),this.props.register(this.props.registrationKey,this))}render(){return this.props.children(this.childRef)}}var me=n(110),he=n(112);const ge=({time:e})=>{const t=Object(he.a)(new Date(e));return Object(g.jsx)(h.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(g.jsx)(h.EuiFlexItem,{grow:!1},Object(g.jsx)(h.EuiTitle,{size:"xxs"},Object(g.jsx)("h2",{style:{paddingLeft:8}},t))),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiHorizontalRule,null)))};class scrollable_log_text_stream_view_ScrollableLogTextStreamView extends a.a.PureComponent{constructor(e){super(e),s()(this,"handleOpenFlyout",(e=>{var t,n;null===(t=(n=this.props).onOpenLogEntryFlyout)||void 0===t||t.call(n,e)})),s()(this,"handleOpenViewLogInContext",(e=>{const{setContextEntry:t}=this.props;t&&t(e)})),s()(this,"handleReload",(()=>{const{reloadItems:e}=this.props;e&&e()})),s()(this,"handleVisibleChildrenChange",function(e,t=m.isEqual){let n,i;return(...s)=>(t(s,n)||(n=s,i=e(...s)),i)}((({topChild:e,middleChild:t,bottomChild:n,pagesAbove:i,pagesBelow:s,fromScroll:o})=>{o&&this.setState({isScrollLocked:!!this.props.isStreaming&&s>0}),this.props.reportVisibleInterval({endKey:y(n),middleKey:y(t),pagesAfterEnd:s,pagesBeforeStart:i,startKey:y(e),fromScroll:o})}))),s()(this,"handleJumpToTail",(()=>{const{items:e}=this.props,t=O(e[e.length-1]);this.setState({targetId:t,isScrollLocked:!1})})),this.state={target:null,targetId:null,items:e.items,isScrollLocked:!1}}render(){var e;const{columnConfigurations:t,currentHighlightKey:n,hasMoreAfterEnd:i,hasMoreBeforeStart:s,highlightedItem:u,isLoadingMore:c,isReloading:m,isStreaming:h,scale:f,wrap:b,startDateExpression:j,endDateExpression:x,lastLoadedTime:w,updateDateRange:y,startLiveStreaming:C,onOpenLogEntryFlyout:S,setContextEntry:E}=this.props,M=null===(e=this.props.hideScrollbar)||void 0===e||e,{targetId:L,items:T,isScrollLocked:k}=this.state,_=T.length>0,R=!!S,F=!!E;return Object(g.jsx)(fe,null,!m||h&&_?_?Object(g.jsx)(pe,{columnConfigurations:t,scale:f},(({columnWidths:e,CharacterDimensionsProbe:o})=>Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(o,null),Object(g.jsx)(v.LogColumnHeaders,{columnConfigurations:t,columnWidths:e}),Object(g.jsx)(auto_sizer_AutoSizer,{bounds:!0,content:!0,detectAnyWindowResize:"height"},(({measureRef:o,bounds:{height:r=0},content:{width:m=0}})=>Object(g.jsx)(be,{ref:o},Object(g.jsx)(me.b,{height:r,width:m,onVisibleChildrenChange:this.handleVisibleChildrenChange,target:L,hideScrollbar:M,"data-test-subj":"logStream",isLocked:k,entriesCount:T.length},(o=>T.length>0?Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(loading_item_view_LogTextStreamLoadingItemView,{position:"start",isLoading:c,hasMore:s,timestamp:d()(T[0].logEntry.cursor.time).valueOf(),isStreaming:!1,startDateExpression:j,endDateExpression:x,onExtendRange:e=>y({startDateExpression:e})}),T.map(((i,s)=>{const r=i.logEntry.cursor.time;let a=!1;if(s>0){const e=T[s-1].logEntry.cursor.time;a=!d()(r).isSame(e,"day")}return Object(g.jsx)(l.Fragment,{key:O(i)},a&&Object(g.jsx)(ge,{time:r}),Object(g.jsx)(measurable_item_view_MeasurableItemView,{register:o,registrationKey:O(i)},(s=>Object(g.jsx)(ce,{columnConfigurations:t,columnWidths:e,openFlyoutWithItem:R?this.handleOpenFlyout:void 0,openViewLogInContext:F?this.handleOpenViewLogInContext:void 0,boundingBoxRef:s,logEntry:i.logEntry,highlights:i.highlights,isActiveHighlight:!!n&&n.gid===i.logEntry.id,scale:f,wrap:b,isHighlighted:!!u&&i.logEntry.id===u}))))})),Object(g.jsx)(loading_item_view_LogTextStreamLoadingItemView,{position:"end",isLoading:h||c,hasMore:i,isStreaming:h,timestamp:h&&w?w.getTime():d()(T[T.length-1].logEntry.cursor.time).valueOf(),startDateExpression:j,endDateExpression:x,onExtendRange:e=>y({endDateExpression:e}),onStreamStart:()=>C()}),k&&Object(g.jsx)(jump_to_tail_LogTextStreamJumpToTail,{width:m,onClickJump:this.handleJumpToTail})):null)))))))):Object(g.jsx)(p,{titleText:o.i18n.translate("xpack.logsShared.logs.emptyView.noLogMessageTitle",{defaultMessage:"There are no log messages to display."}),bodyText:o.i18n.translate("xpack.logsShared.logs.emptyView.noLogMessageDescription",{defaultMessage:"Try adjusting your filter."}),refetchText:o.i18n.translate("xpack.logsShared.logs.emptyView.checkForNewDataButtonLabel",{defaultMessage:"Check for new data"}),onRefetch:this.handleReload,testString:"logsNoDataPrompt"}):Object(g.jsx)(loading_LogsSharedLoadingPanel,{width:"100%",height:"100%",text:Object(g.jsx)(r.FormattedMessage,{id:"xpack.logsShared.logs.scrollableLogTextStreamView.loadingEntriesLabel",defaultMessage:"Loading entries"})}))}}s()(scrollable_log_text_stream_view_ScrollableLogTextStreamView,"getDerivedStateFromProps",((e,t)=>{const n=e.target&&e.target!==t.target,i=e.items.length>0,s=i&&t.isScrollLocked?t.items:e.items;return e.isStreaming&&i?{target:e.target,targetId:O(e.items[e.items.length-1]),items:s}:n&&i?{target:e.target,targetId:O((o=e.items,r=e.target,o[Math.min(C.left(o,r),o.length-1)])),items:s,isScrollLocked:!1}:i?!i||s.length===t.items.length&&s[0]===t.items[0]?{isScrollLocked:!1}:{...t,items:s,isScrollLocked:!1}:{target:null,targetId:null,items:[],isScrollLocked:!1};var o,r})),t.default=scrollable_log_text_stream_view_ScrollableLogTextStreamView;const pe=({children:e,columnConfigurations:t,scale:n})=>e(Object(ne.useColumnWidths)({columnConfigurations:t,scale:n})),fe=c.euiStyled.div`
  overflow: hidden;
  display: flex;
  flex: 1 1 0%;
  flex-direction: column;
  align-items: stretch;
`,be=c.euiStyled.div`
  overflow: hidden;
  flex: 1 1 0%;
`},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65),s=n(1),o=i.__importDefault(n(120));t.default=function(e,t){void 0===t&&(t=[]);var n=o.default(e,t,{loading:!0}),i=n[0],r=n[1];return s.useEffect((function(){r()}),[r]),i}},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(65),s=n(1),o=i.__importDefault(n(73));t.default=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var r=s.useRef(0),l=o.default(),a=s.useState(n),u=a[0],d=a[1],c=s.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=++r.current;return d((function(e){return i.__assign(i.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return l()&&s===r.current&&d({value:e,loading:!1}),e}),(function(e){return l()&&s===r.current&&d({error:e,loading:!1}),e}))}),t);return[u,c]}}}]);