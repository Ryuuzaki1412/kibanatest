(window.visTypeGauge_bundle_jsonpfunction=window.visTypeGauge_bundle_jsonpfunction||[]).push([[0],{23:function(e,t,n){"use strict";n.r(t),n.d(t,"convertGaugeToLens",(function(){return c})),n.d(t,"convertGoalToLens",(function(){return i}));var o=n(21),a=n(7),r=n(22),s=n(11);const l=(e,t,n,{metricAccessor:o,minAccessor:a,maxAccessor:r})=>({layerId:e,layerType:"data",palette:n,metricAccessor:o,minAccessor:a,maxAccessor:r,shape:"horizontalBullet",ticksPosition:"bands",labelMajorMode:"auto",colorMode:n?"palette":"none",labelMinor:Boolean(t.gauge.labels.show)?t.gauge.style.subText:void 0}),c=async(e,t)=>{var n;if(!t)return null;const c=Object(s.a)(),u=await Object(a.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,c);if(!u)return null;const{getColumnsFromVis:i,createStaticValueColumn:d,getPalette:m,getPercentageModeConfig:g}=await a.convertToLensModule,p=g(e.params.gauge,!1),b=i(e,t,u,{unsupported:["group"]},{dropEmptyRowsInDateHistogram:!0,...p});if(null===b)return null;const[y]=b;if(y.metrics.length>1||y.buckets.all.length)return null;if(y.metrics[0]){const e=y.columns.find((({columnId:e})=>e===y.metrics[0]));if("number"!==(null==e?void 0:e.dataType))return null}const f=Object(o.v4)(),x=u.id,v=y.metrics[0],{min:I,max:w,isPercentageMode:P}=p,A=d(P?0:I),M=d(P?1:w);return{type:"lnsGauge",layers:[{indexPatternId:x,layerId:f,columns:[...y.columns,A,M].map(r.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:l(f,e.params,m(e.params.gauge,p,!0),{metricAccessor:v,minAccessor:A.columnId,maxAccessor:M.columnId}),indexPatternIds:[x]}},u=(e,{gauge:t},n,{metrics:o,buckets:a,maxAccessor:r,columnsWithoutReferenced:s,bucketCollapseFn:l})=>{const[c]=o,[u]=a.all,i=l?Object.keys(l).find((e=>l[e].includes(u))):void 0;return{layerId:e,layerType:"data",palette:n,metricAccessor:c,breakdownByAccessor:u,maxAccessor:r,showBar:Boolean(r),collapseFn:i,subtitle:t.labels.show&&t.style.subText?t.style.subText:void 0}},i=async(e,t)=>{var n;if(!t)return null;const l=Object(s.a)(),c=await Object(a.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,l);if(!c)return null;const{getColumnsFromVis:i,getPalette:d,getPercentageModeConfig:m,createStaticValueColumn:g}=await a.convertToLensModule,p=m(e.params.gauge,!1),b=i(e,t,c,{splits:["group"]},{dropEmptyRowsInDateHistogram:!0,...p});if(null===b)return null;const[y]=b;if(y.metrics.length>1||y.buckets.all.length>1)return null;if(y.metrics[0]){const e=y.columns.find((({columnId:e})=>e===y.metrics[0]));if("number"!==(null==e?void 0:e.dataType))return null}const{isPercentageMode:f,max:x}=p,v=g(f?1:x),I=[...y.columns,v],w=Object(o.v4)(),P=c.id;return{type:"lnsMetric",layers:[{indexPatternId:P,layerId:w,columns:I.map(r.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:u(w,e.params,d(e.params.gauge,p,!0),{...y,maxAccessor:v.columnId}),indexPatternIds:[P]}}}}]);