/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[9,16],{114:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="/internal/rac/alerts"},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a.n(n),l=a(4),i=a(12);function s({alert:e}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiTitle,{size:"m","data-test-subj":"alertsFlyoutTitle"},r.a.createElement("h2",null,e.fields[l.D])))}},118:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(1),r=a.n(n),l=a(16),i=a(12),s=a(4),o=a(0),u=a(137),c=a(33),d=a.n(c),p=a(13),b=a(42),m=a(10),f=a(7),y=a(53),E=a(32);function v({alert:e,id:t}){var a,n;const{http:{basePath:{prepend:c}}}=Object(b.a)().services,v=Object(p.useUiSetting)("dateFormat"),h=null!==(a=Object(l.get)(e.fields,s.R))&&void 0!==a?a:null,g=t!==E.d&&h&&c?c(f.r.observability.ruleDetails(h)):null,T=[{title:o.i18n.translate("xpack.observability.alertsFlyout.statusLabel",{defaultMessage:"Status"}),description:r.a.createElement(u.a,{alertStatus:e.fields[s.V],flapping:e.fields[s.i]})},{title:o.i18n.translate("xpack.observability.alertsFlyout.startedAtLabel",{defaultMessage:"Started at"}),description:r.a.createElement("span",{title:e.start.toString()},d()(e.start).format(v))},{title:o.i18n.translate("xpack.observability.alertsFlyout.lastUpdatedLabel",{defaultMessage:"Last updated"}),description:r.a.createElement("span",{title:e.lastUpdated.toString()},d()(e.lastUpdated).format(v))},{title:o.i18n.translate("xpack.observability.alertsFlyout.durationLabel",{defaultMessage:"Duration"}),description:Object(m.b)(e.fields[s.d],{extended:!0})},{title:o.i18n.translate("xpack.observability.alertsFlyout.expectedValueLabel",{defaultMessage:"Expected value"}),description:Object(y.a)(e.fields[s.O],e.fields[s.f])},{title:o.i18n.translate("xpack.observability.alertsFlyout.actualValueLabel",{defaultMessage:"Actual value"}),description:Object(y.a)(e.fields[s.O],e.fields[s.g])},{title:o.i18n.translate("xpack.observability.alertsFlyout.ruleTypeLabel",{defaultMessage:"Rule type"}),description:null!==(n=e.fields[s.t])&&void 0!==n?n:"-"}];return r.a.createElement(i.EuiFlyoutBody,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h4",null,o.i18n.translate("xpack.observability.alertsFlyout.reasonTitle",{defaultMessage:"Reason"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiText,{size:"s"},e.reason),r.a.createElement(i.EuiSpacer,{size:"s"}),!!g&&r.a.createElement(i.EuiLink,{href:g,"data-test-subj":"viewRuleDetailsFlyout"},o.i18n.translate("xpack.observability.alertsFlyout.viewRulesDetailsLinkText",{defaultMessage:"View rule details"})),r.a.createElement(i.EuiHorizontalRule,{size:"full"}),r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h4",null,o.i18n.translate("xpack.observability.alertsFlyout.documentSummaryTitle",{defaultMessage:"Document Summary"}))),r.a.createElement(i.EuiSpacer,{size:"m"}),r.a.createElement(i.EuiDescriptionList,{compressed:!0,type:"responsiveColumn",listItems:T,titleProps:{"data-test-subj":"alertsFlyoutDescriptionListTitle"},descriptionProps:{"data-test-subj":"alertsFlyoutDescriptionListDescription"}}))}},119:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(1),r=a.n(n),l=a(12),i=a(0),s=a(42),o=a(103),u=a(131),c=a(7);function d({alert:e,isInApp:t}){const{http:{basePath:{prepend:a}}}=Object(s.a)().services,{config:d}=Object(o.a)(),[p,b]=Object(n.useState)();return Object(n.useEffect)((()=>{var t;e.hasBasePath?b(e.link):b(a(null!==(t=e.link)&&void 0!==t?t:""))}),[e.hasBasePath,e.link,a]),r.a.createElement(l.EuiFlyoutFooter,null,r.a.createElement(l.EuiFlexGroup,{justifyContent:"flexEnd"},!e.link||t?null:r.a.createElement(l.EuiFlexItem,{grow:!1},r.a.createElement(l.EuiButton,{"data-test-subj":"alertsFlyoutViewInAppButton",fill:!0,href:p},i.i18n.translate("xpack.observability.alertsFlyout.viewInAppButtonText",{defaultMessage:"View in app"}))),Object(u.a)(e,d)?r.a.createElement(l.EuiFlexItem,{grow:!1},r.a.createElement(l.EuiButton,{"data-test-subj":"alertsFlyoutAlertDetailsButton",fill:!0,href:a&&a(c.r.observability.alertDetails(e.fields["kibana.alert.uuid"]))},i.i18n.translate("xpack.observability.alertsFlyout.alertsDetailsButtonText",{defaultMessage:"Alert details"}))):null))}},124:function(e,t,a){"use strict";a.r(t),a.d(t,"AlertsFlyout",(function(){return d}));var n=a(1),r=a.n(n),l=a(12),i=a(4),s=a(117),o=a(118),u=a(119),c=a(112);function d({alert:e,alerts:t,isInApp:a=!1,observabilityRuleTypeRegistry:d,onClose:p,selectedAlertId:b}){const m=Object(n.useMemo)((()=>{const e=Object(c.a)(d);return(null!=t?t:[]).map(e)}),[t,d]);let f=e;return f||(f=null==m?void 0:m.find((e=>e.fields[i.hb]===b))),f?r.a.createElement(l.EuiFlyout,{className:"oblt__flyout",onClose:p,size:"s","data-test-subj":"alertsFlyout"},r.a.createElement(l.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(s.a,{alert:f})),r.a.createElement(o.a,{alert:f}),r.a.createElement(u.a,{alert:f,isInApp:a})):null}t.default=d},150:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n,r=a(1),l=a(81),i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},n(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),s="html",o="svg",u=function(e,t){var a,n,r,l={};if(e===s)r=document.createElement("div");else{if(e!==o)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');r=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var i=0,u=Object.entries(t.attributes);i<u.length;i++){var c=u[i],d=c[0],p=c[1];r.setAttribute(d,p)}var b={element:r,elementType:e,setPortalProps:function(e){l=e},getInitialPortalProps:function(){return l},mount:function(t,r){if(r!==n){if(b.unmount(),t!==a&&!function(e,t){if(t===s)return e instanceof HTMLElement;if(t===o)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(b.element,r),a=t,n=r}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,b.element),a=void 0,n=void 0)}};return b},c=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return i(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,n=t.node;return l.createPortal(r.Children.map(a,(function(t){return r.isValidElement(t)?r.cloneElement(t,e.state.nodeProps):t})),n.element)},t}(r.PureComponent),d=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=r.createRef(),a.passPropsThroughPortal(),a}return i(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return r.createElement("div",{ref:this.placeholderNode})},t}(r.PureComponent),p=u.bind(null,s);u.bind(null,o)},165:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a.n(n),l=a(0),i=a(12),s=a(4),o=a(80);function u({alertStatus:e,textSize:t="xs"}){return e===s.W?r.a.createElement(i.EuiHealth,{color:o.LIGHT_THEME.colors.vizColors[2],textSize:t},l.i18n.translate("xpack.observability.alertsTGrid.statusActiveDescription",{defaultMessage:"Active"})):r.a.createElement(i.EuiHealth,{color:o.LIGHT_THEME.colors.vizColors[1],textSize:t},r.a.createElement(i.EuiText,{color:"subdued",size:"relative"},l.i18n.translate("xpack.observability.alertsTGrid.statusRecoveredDescription",{defaultMessage:"Recovered"})))}},166:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a.n(n),l=a(12),i=a(54);function s({time:e,timeUnit:t="milliseconds"}){const a=Object(i.a)(e,t);return r.a.createElement(l.EuiToolTip,{content:a},r.a.createElement(r.a.Fragment,null,a))}},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a.n(n),l=a(117),i=a(118),s=a(119),o=a(112);a(124);const u=e=>{const t=Object(n.useCallback)((t=>{const a=Object(o.a)(e)(t.alert);return r.a.createElement(i.a,{alert:a,id:t.id})}),[e]),a=Object(n.useCallback)((t=>{const a=Object(o.a)(e)(t.alert);return r.a.createElement(l.a,{alert:a})}),[e]),u=Object(n.useCallback)((t=>{const a=Object(o.a)(e)(t.alert);return r.a.createElement(s.a,{isInApp:!1,alert:a})}),[e]);return Object(n.useMemo)((()=>({body:t,header:a,footer:u})),[t,a,u])}},228:function(e,t,a){"use strict";a.r(t),a.d(t,"getAlertsTableConfiguration",(function(){return M}));var n=a(65),r=a.n(n),l=a(1),i=a.n(l),s=a(4),o=a(5),u=a(79),c=a.n(u),d=a(12),p=a(16),b=a(10);const m={critical:"danger",warning:"warning"};function f({severityLevel:e}){return e?i.a.createElement(d.EuiBadge,{color:e?m[e]:"default"},e):null}var y=a(165),E=a(166),v=a(112);var h=c()(d.EuiLink).withConfig({displayName:"_StyledEuiLink",componentId:"sc-1r2c777-0"})({display:"contents"}),g=a(0);const T=[{columnHeaderType:"not-filtered",displayAsText:g.i18n.translate("xpack.observability.alertsTGrid.statusColumnDescription",{defaultMessage:"Alert Status"}),id:s.V,initialWidth:140},{columnHeaderType:"not-filtered",displayAsText:g.i18n.translate("xpack.observability.alertsTGrid.lastUpdatedColumnDescription",{defaultMessage:"Last updated"}),id:s.wb,initialWidth:230,schema:"datetime"},{columnHeaderType:"not-filtered",displayAsText:g.i18n.translate("xpack.observability.alertsTGrid.durationColumnDescription",{defaultMessage:"Duration"}),id:s.d,initialWidth:116},{columnHeaderType:"not-filtered",displayAsText:g.i18n.translate("xpack.observability.alertsTGrid.reasonColumnDescription",{defaultMessage:"Reason"}),id:s.q,linkField:"*"}];var x=a(92),j=a(32),P=a(7),A=a(131),O=a(42),k=a(36),w=a(191);function F({config:e,observabilityRuleTypeRegistry:t,...a}){const{alert:n,refresh:r}=a,{cases:{helpers:{getRuleIdFromEvent:s,canUseCases:o},hooks:{useCasesAddToNewCaseFlyout:u,useCasesAddToExistingCaseModal:c}},http:{basePath:{prepend:p}},triggersActionsUi:b}=Object(O.a)().services,m=Object(l.useMemo)((()=>Object.entries(null!=n?n:{}).reduce(((e,[t,a])=>[...e,{field:t,value:a}]),[])),[n]),f=Object(l.useMemo)((()=>({_id:n._id,_index:n._index})),[n._id,n._index]),y=o([k.observabilityFeatureId]),[E,h]=Object(l.useState)(),T=Object(l.useMemo)((()=>Object(v.a)(t)),[t])(n);Object(l.useEffect)((()=>{const e=T.link;T.hasBasePath?h(e):h(p(null!=e?e:""))}),[T.hasBasePath,T.link,p]);const[F,C]=Object(l.useState)(!1),M=Object(l.useMemo)((()=>{var e,t;return null!=f&&f._id?[{alertId:null!==(e=null==f?void 0:f._id)&&void 0!==e?e:"",index:null!==(t=null==f?void 0:f._index)&&void 0!==t?t:"",type:x.AttachmentType.alert,rule:s({ecs:f,data:null!=m?m:[]})}]:[]}),[f,s,m]),I=Object(l.useCallback)((()=>{r()}),[r]),S=u({onSuccess:I}),D=c({onSuccess:I}),N=()=>{C(!1)},R=Object(l.useMemo)((()=>b.getAlertsTableDefaultAlertActions({key:"defaultRowActions",onActionExecuted:N,isAlertDetailsEnabled:Object(A.a)(T,e),resolveRulePagePath:(e,t)=>t!==j.d?P.r.observability.ruleDetails(e):null,resolveAlertPagePath:(e,t)=>t!==w.a?P.r.observability.alertDetails(e):null,...a})),[e,a,T,b]),L=[...y.create&&y.read?[i.a.createElement(d.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",key:"addToExistingCase",onClick:()=>{D.open({getAttachments:()=>M}),N()},size:"s"},g.i18n.translate("xpack.observability.alerts.actions.addToCase",{defaultMessage:"Add to existing case"})),i.a.createElement(d.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",key:"addToNewCase",onClick:()=>{S.open({attachments:M}),N()},size:"s"},g.i18n.translate("xpack.observability.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}))]:[],R],_=L.length<=0?g.i18n.translate("xpack.observability.alertsTable.notEnoughPermissions",{defaultMessage:"Additional privileges required"}):g.i18n.translate("xpack.observability.alertsTable.moreActionsTextLabel",{defaultMessage:"More actions"});return i.a.createElement(i.a.Fragment,null,E?i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiToolTip,{content:g.i18n.translate("xpack.observability.alertsTable.viewInAppTextLabel",{defaultMessage:"View in app"})},i.a.createElement(d.EuiButtonIcon,{"data-test-subj":"o11yAlertActionsButton","aria-label":g.i18n.translate("xpack.observability.alertsTable.viewInAppTextLabel",{defaultMessage:"View in app"}),color:"text",href:E,iconType:"eye",size:"s"}))):i.a.createElement(d.EuiFlexItem,{style:{width:32}}),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiPopover,{anchorPosition:"downLeft",button:i.a.createElement(d.EuiToolTip,{content:_},i.a.createElement(d.EuiButtonIcon,{"aria-label":_,color:"text","data-test-subj":"alertsTableRowActionMore",display:"empty",iconType:"boxesHorizontal",onClick:()=>{C(!F)},size:"s"})),closePopover:N,isOpen:F,panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenuPanel,{size:"s",items:L,"data-test-subj":"alertsTableActionsMenu"}))))}var C=a(167);const M=(e,t)=>({id:o.observabilityFeatureId,cases:{featureId:o.casesFeatureId,owner:[o.observabilityFeatureId]},columns:T,getRenderCellValue:({setFlyoutAlert:t})=>(({setFlyoutAlert:e,observabilityRuleTypeRegistry:t})=>({columnId:a,data:n})=>{if(!n)return null;const r=(({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value})({data:n,fieldName:a}),l=(e=>{const t=Array.isArray(e)?e.join():e;if(!Object(p.isEmpty)(t)){if("object"==typeof t)try{return JSON.stringify(t)}catch(e){return"Error: Unable to parse JSON value."}return t}return"—-"})(r);switch(a){case s.V:return l!==s.W&&l!==s.X?null:i.a.createElement(y.a,{alertStatus:l});case s.wb:return i.a.createElement(E.a,{time:new Date(null!=l?l:"").getTime(),timeUnit:"milliseconds"});case s.d:return Object(b.b)(Number(l));case s.T:return i.a.createElement(f,{severityLevel:null!=l?l:void 0});case s.q:const a=n.reduce(((e,t)=>({...e,[t.field]:t.value})),{}),r=Object(v.a)(t)(a);return i.a.createElement(h,{"data-test-subj":"o11yGetRenderCellValueLink",onClick:()=>e&&e(r.fields[s.hb])},r.reason);default:return i.a.createElement(i.a.Fragment,null,l)}})({observabilityRuleTypeRegistry:e,setFlyoutAlert:t}),sort:[{[s.wb]:{order:"desc"}}],useActionsColumn:()=>({renderCustomActionsRow:a=>i.a.createElement(F,r()({},a,{config:t,observabilityRuleTypeRegistry:e}))}),useInternalFlyout:()=>{const{header:t,body:a,footer:n}=Object(C.a)(e);return{header:t,body:a,footer:n}}})}}]);