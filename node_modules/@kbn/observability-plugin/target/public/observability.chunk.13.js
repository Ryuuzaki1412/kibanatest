/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[13],{108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(66),r=n(1),o=a.__importDefault(n(120));t.default=function(e,t){var n=r.useState(t),a=n[0],i=n[1];return o.default((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),a}},110:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=n(12);const r=e=>e.darkMode?a.COLOR_MODES_STANDARD.dark:a.COLOR_MODES_STANDARD.light,o={darkMode:!1}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(78),o=n(1),i=n(49),s=n(25),l=n(42),c=n(106);function u({kqlQuery:e="",page:t=1,sortBy:n="status",sortDirection:u="desc",shouldRefetch:d,perPage:b=i.a}={}){const{http:f,notifications:{toasts:m}}=Object(l.a)().services,y=Object(r.useQueryClient)(),[g,v]=Object(o.useState)(s.d),{isInitialLoading:p,isLoading:E,isError:S,isSuccess:h,isRefetching:O,data:j}=Object(r.useQuery)({queryKey:c.a.list({kqlQuery:e,page:t,perPage:b,sortBy:n,sortDirection:u}),queryFn:async({signal:a})=>await f.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...n&&{sortBy:n},...u&&{sortDirection:u},...t&&{page:t},...b&&{perPage:b}},signal:a}),cacheTime:0,refetchOnWindowFocus:!1,refetchInterval:d?g:void 0,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{y.invalidateQueries({queryKey:c.a.historicalSummaries(),exact:!1}),y.invalidateQueries({queryKey:c.a.activeAlerts(),exact:!1}),y.invalidateQueries({queryKey:c.a.rules(),exact:!1}),d&&(e.find((e=>"NO_DATA"===e.summary.status||!e.summary))?v(s.d):v(s.c))},onError:e=>{m.addError(e,{title:a.i18n.translate("xpack.observability.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:j,isInitialLoading:p,isLoading:E,isRefetching:O,isSuccess:h,isError:S}}},116:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return E}));var a=n(1),r=n(108),o=n.n(r),i=n(89),s=n.n(i),l=n(12);let c;!function(e){e.preboot="preboot",e.standard="standard"}(c||(c={}));const u="eui-global",d="eui-utilities";var b=n(110),f=n(77);const m=[l.euiStylisPrefixer],y=s()({key:"css",stylisPlugins:m,container:document.querySelector('meta[name="emotion"]')}),g=s()({key:u,stylisPlugins:m,container:document.querySelector(`meta[name="${u}"]`)}),v=s()({key:d,stylisPlugins:m,container:document.querySelector(`meta[name="${d}"]`)});y.compat=!0,g.compat=!0,v.compat=!0;const p={default:y,global:g,utility:v},E=({theme:{theme$:e},globalStyles:t,colorMode:n,children:r})=>{const i=o()(e,b.a),s=Object(a.useMemo)((()=>Object(b.b)(i)),[i]),c=n||s,u=!1!==t&&void 0;return Object(f.jsx)(l.EuiProvider,{cache:p,colorMode:c,globalStyles:u,utilityClasses:u},r)},S=({children:e,i18n:t,...n})=>Object(f.jsx)(E,n,Object(f.jsx)(t.Context,null,e))},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=r},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(1),r=n(81),o=n.n(r),i=n(65),s=n.n(i),l=n(116),c=n(85),u=n(77);const d=({children:e,...t})=>Object(u.jsx)(l.b,s()({globalStyles:!1},t),Object(u.jsx)(c.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(u.jsx)(c.KibanaErrorBoundary,null,e))),b=(e,t)=>n=>(o.a.render(Object(u.jsx)(d,t,e),n),()=>o.a.unmountComponentAtNode(n));n(2),n(0);class mount_point_portal_MountPointPortalErrorBoundary extends a.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(u.jsx)("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),r=n.n(a),o=n(12),i=n(0),s=n(16),l=n(102),c=n(111);const u=i.i18n.translate("xpack.observability.sloEmbeddable.config.errors.sloRequired",{defaultMessage:"SLO is required."});function d({initialSlos:e,onSelected:t,hasError:n,singleSelection:d}){const b=e=>{var t;return null!==(t=null==e?void 0:e.map((e=>({label:e.instanceId!==l.a?`${e.name} (${e.groupBy}: ${e.instanceId})`:e.name,value:`${e.id}-${e.instanceId}`}))))&&void 0!==t?t:[]},[f,m]=Object(a.useState)([]),[y,g]=Object(a.useState)(b(e)),[v,p]=Object(a.useState)(""),E=`${v.replaceAll(" ","*")}*`,{isLoading:S,data:h}=Object(c.a)({kqlQuery:`slo.name: ${E} or slo.instanceId: ${E}`,perPage:100});Object(a.useEffect)((()=>{const e=S||void 0===(null==h?void 0:h.results)?[]:b(null==h?void 0:h.results);m(e)}),[S,h]);const O=Object(a.useMemo)((()=>Object(s.debounce)((e=>{p(e)}),300)),[]);return r.a.createElement(o.EuiFormRow,{fullWidth:!0,isInvalid:n,error:n?u:void 0},r.a.createElement(o.EuiComboBox,{"aria-label":i.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.ariaLabel",{defaultMessage:"SLO"}),placeholder:i.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.placeholder",{defaultMessage:"Select a SLO"}),"data-test-subj":"sloSelector",options:f,selectedOptions:y,async:!0,isLoading:S,onChange:e=>{var n;g(e);const a=e.length>=1?null===(n=h.results)||void 0===n?void 0:n.filter((t=>e.find((e=>e.value===`${t.id}-${t.instanceId}`)))):void 0;t(d?null==a?void 0:a[0]:a)},fullWidth:!0,onSearchChange:O,isInvalid:n,singleSelection:d?{asPlainText:!0}:void 0}))}},230:function(e,t,n){"use strict";n.r(t),n.d(t,"resolveEmbeddableSloUserInput",(function(){return f}));var a=n(1),r=n.n(a),o=n(123),i=n(13),s=n(78),l=n(12),c=n(43),u=n(0),d=n(136);function b({onCreate:e,onCancel:t}){const[n,o]=Object(a.useState)(),[i,s]=Object(a.useState)(!1);return r.a.createElement(l.EuiModal,{onClose:t,style:{minWidth:550}},r.a.createElement(l.EuiModalHeader,null,r.a.createElement(l.EuiModalHeaderTitle,null,u.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.headerTitle",{defaultMessage:"SLO configuration"}))),r.a.createElement(l.EuiModalBody,null,r.a.createElement(l.EuiFlexGroup,null,r.a.createElement(l.EuiFlexItem,{grow:!0},r.a.createElement(d.a,{singleSelection:!0,hasError:i,onSelected:e=>{s(void 0===e),e&&"id"in e&&o({sloId:e.id,sloInstanceId:e.instanceId})}})))),r.a.createElement(l.EuiModalFooter,null,r.a.createElement(l.EuiButtonEmpty,{onClick:t,"data-test-subj":"sloCancelButton"},r.a.createElement(c.FormattedMessage,{id:"xpack.observability.sloEmbeddable.config.cancelButtonLabel",defaultMessage:"Cancel"})),r.a.createElement(l.EuiButton,{"data-test-subj":"sloConfirmButton",isDisabled:!n||i,onClick:()=>e({sloId:null==n?void 0:n.sloId,sloInstanceId:null==n?void 0:n.sloInstanceId}),fill:!0},r.a.createElement(c.FormattedMessage,{id:"xpack.observability.embeddableSlo.config.confirmButtonLabel",defaultMessage:"Confirm configurations"}))))}async function f(e,t,n){const{overlays:a}=e,l=new s.QueryClient;return new Promise((async(n,c)=>{try{const u=a.openModal(Object(o.a)(r.a.createElement(i.KibanaContextProvider,{services:{...e,...t}},r.a.createElement(s.QueryClientProvider,{client:l},r.a.createElement(b,{onCreate:e=>{u.close(),n(e)},onCancel:()=>{u.close(),c()}}))),{i18n:e.i18n,theme:e.theme}))}catch(e){c(e)}}))}}}]);