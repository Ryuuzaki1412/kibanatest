/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[20],{144:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(27),n=a(4),u=a(19);function l(e,t,a=[],l={}){const s=e&&Object(u.getTime)(void 0,e,{fieldName:n.fb}),i=s?[s]:[],o=[...t?[{query:t,language:"kuery"}]:[],...a];return Object(r.buildEsQuery)(void 0,o,i,l)}},170:function(e,t,a){"use strict";a.r(t),a.d(t,"ObservabilityAlertSearchBar",(function(){return m}));var r=a(12),n=a(1),u=a.n(n),l=a(0),s=a(19),i=a(48);const o=[{id:i.c.status,label:i.c.label,value:i.c.query,"data-test-subj":"alert-status-filter-show-all-button"},{id:i.a.status,label:i.a.label,value:i.a.query,"data-test-subj":"alert-status-filter-active-button"},{id:i.f.status,label:i.f.label,value:i.f.query,"data-test-subj":"alert-status-filter-recovered-button"},{id:i.g.status,label:i.g.label,value:i.g.query,"data-test-subj":"alert-status-filter-untracked-button"}];function c({status:e,onChange:t}){return u.a.createElement(r.EuiButtonGroup,{legend:l.i18n.translate("xpack.observability.alerts.alertStatusFilter.legend",{defaultMessage:"Filter by"}),color:"primary",options:o,idSelected:e,onChange:e=>t(e)})}var b=a(31),d=a(144),g=a(42);const f=e=>i.b[e]?[{query:i.b[e],language:"kuery"}]:[],y=l.i18n.translate("xpack.observability.alerts.searchBar.invalidQueryTitle",{defaultMessage:"Invalid query string"});function m({appName:e,defaultSearchQueries:t=i.d,onEsQueryChange:a,onKueryChange:l,onRangeFromChange:o,onRangeToChange:m,onStatusChange:v,kuery:E,rangeFrom:h,rangeTo:j,services:{AlertsSearchBar:p,timeFilterService:C,useToasts:F},status:O}){const S=F(),{uiSettings:q}=Object(g.a)().services,k=Object(n.useCallback)((e=>{try{a(Object(d.a)({to:j,from:h},E,[...f(e),...t],Object(s.getEsQueryConfig)(q)))}catch(e){S.addError(e,{title:y}),l(i.e)}}),[a,j,h,E,t,q,S,l]);Object(n.useEffect)((()=>{k(O)}),[k,O]);const w=Object(n.useCallback)((({dateRange:e,query:r})=>{try{const n=Object(d.a)({to:e.to,from:e.from},r,[...f(O),...t],Object(s.getEsQueryConfig)(q));r&&l(r),C.setTime(e),o(e.from),m(e.to),a(n)}catch(e){S.addError(e,{title:y}),l(i.e)}}),[O,t,q,l,C,o,m,a,S]);return u.a.createElement(r.EuiFlexGroup,{direction:"column",gutterSize:"s"},u.a.createElement(r.EuiFlexItem,null,u.a.createElement(p,{appName:e,featureIds:b.h,rangeFrom:h,rangeTo:j,query:E,onQuerySubmit:w})),u.a.createElement(r.EuiFlexItem,null,u.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},u.a.createElement(r.EuiFlexItem,{grow:!1},u.a.createElement(c,{status:O,onChange:v})))))}t.default=m}}]);