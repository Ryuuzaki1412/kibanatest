/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[7,20,21],{104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=(i=a(1))&&"object"==typeof i&&"default"in i?i:{default:i},l=e=>"checkbox"===e.type,s=e=>e instanceof Date,n=e=>null==e;const o=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&o(e)&&!s(e),u=e=>c(e)&&e.target?l(e.target)?e.target.checked:e.target.value:e,d=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),m="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(m&&(e instanceof Blob||e instanceof FileList)||!a&&!c(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return c(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=p(e[a]));else t=e}return t}var b=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,E=(e,t,a)=>{if(!t||!c(e))return a;const i=b(t.split(/[,[\].]+?/)).reduce(((e,t)=>n(e)?e:e[t]),e);return g(i)||i===e?g(e[t])?a:e[t]:i};const f="blur",v="focusout",y="change",h="onChange",x="onSubmit",S="all",T="pattern",k="required",O=r.default.createContext(null),F=()=>r.default.useContext(O);var w=(e,t,a,i=!0)=>{const r={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(r,l,{get:()=>{const r=l;return t._proxyFormState[r]!==S&&(t._proxyFormState[r]=!i||S),a&&(a[r]=!0),e[r]}});return r},I=e=>c(e)&&!Object.keys(e).length,j=(e,t,a,i)=>{a(e);const{name:r,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find((e=>t[e]===(!i||S)))},M=e=>Array.isArray(e)?e:[e],L=(e,t,a)=>a&&t?e===t:!e||!t||e===t||M(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function C(e){const t=r.default.useRef(e);t.current=e,r.default.useEffect((()=>{const a=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}}),[e.disabled])}function A(e){const t=F(),{control:a=t.control,disabled:i,name:l,exact:s}=e||{},[n,o]=r.default.useState(a._formState),c=r.default.useRef(!0),u=r.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=r.default.useRef(l);return d.current=l,C({disabled:i,next:e=>c.current&&L(d.current,e.name,s)&&j(e,u.current,a._updateFormState)&&o({...a._formState,...e}),subject:a._subjects.state}),r.default.useEffect((()=>(c.current=!0,u.current.isValid&&a._updateValid(!0),()=>{c.current=!1})),[a]),w(n,a,u.current,!1)}var R=e=>"string"==typeof e,D=(e,t,a,i,r)=>R(e)?(i&&t.watch.add(e),E(a,e,r)):Array.isArray(e)?e.map((e=>(i&&t.watch.add(e),E(a,e)))):(i&&(t.watchAll=!0),a);function P(e){const t=F(),{control:a=t.control,name:i,defaultValue:l,disabled:s,exact:n}=e||{},o=r.default.useRef(i);o.current=i,C({disabled:s,subject:a._subjects.values,next:e=>{L(o.current,e.name,n)&&u(p(D(o.current,a._names,e.values||a._formValues,!1,l)))}});const[c,u]=r.default.useState(a._getWatch(i,l));return r.default.useEffect((()=>a._removeUnmounted())),c}var B=e=>/^\w*$/.test(e),_=e=>b(e.replace(/["|']|\]/g,"").split(/\.|\[/));function N(e,t,a){let i=-1;const r=B(t)?[t]:_(t),l=r.length,s=l-1;for(;++i<l;){const t=r[i];let l=a;if(i!==s){const a=e[t];l=c(a)||Array.isArray(a)?a:isNaN(+r[i+1])?{}:[]}e[t]=l,e=e[t]}return e}function V(e){const t=F(),{name:a,control:i=t.control,shouldUnregister:l}=e,s=d(i._names.array,a),n=P({control:i,name:a,defaultValue:E(i._formValues,a,E(i._defaultValues,a,e.defaultValue)),exact:!0}),o=A({control:i,name:a}),c=r.default.useRef(i.register(a,{...e.rules,value:n}));return c.current=i.register(a,e.rules),r.default.useEffect((()=>{const e=i._options.shouldUnregister||l,t=(e,t)=>{const a=E(i._fields,e);a&&(a._f.mount=t)};if(t(a,!0),e){const e=p(E(i._options.defaultValues,a));N(i._defaultValues,a,e),g(E(i._formValues,a))&&N(i._formValues,a,e)}return()=>{(s?e&&!i._state.action:e)?i.unregister(a):t(a,!1)}}),[a,i,s,l]),{field:{name:a,value:n,onChange:r.default.useCallback((e=>c.current.onChange({target:{value:u(e),name:a},type:y})),[a]),onBlur:r.default.useCallback((()=>c.current.onBlur({target:{value:E(i._formValues,a),name:a},type:f})),[a,i]),ref:e=>{const t=E(i._fields,a);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:o,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!E(o.errors,a)},isDirty:{enumerable:!0,get:()=>!!E(o.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!E(o.touchedFields,a)},error:{enumerable:!0,get:()=>E(o.errors,a)}})}}const z="post";var G=(e,t,a,i,r)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[i]:r||!0}}:{};const $=(e,t,a)=>{for(const i of a||Object.keys(e)){const a=E(e,i);if(a){const{_f:e,...i}=a;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else c(i)&&$(i,t)}}};var q=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)}))},W=(e,t,a={})=>a.shouldFocus||g(a.shouldFocus)?a.focusName||`${e}.${g(a.focusIndex)?t:a.focusIndex}.`:"",U=e=>({isOnSubmit:!e||e===x,isOnBlur:"onBlur"===e,isOnChange:e===h,isOnAll:e===S,isOnTouch:"onTouched"===e}),H=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),Q=(e,t,a)=>{const i=b(E(e,a));return N(i,"root",t[a]),N(e,a,i),e},K=e=>"boolean"==typeof e,X=e=>"file"===e.type,J=e=>"function"==typeof e,Y=e=>{if(!m)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Z=e=>R(e),ee=e=>"radio"===e.type,te=e=>e instanceof RegExp;const ae={value:!1,isValid:!1},ie={value:!0,isValid:!0};var re=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?ie:{value:e[0].value,isValid:!0}:ie:ae}return ae};const le={isValid:!1,value:null};var se=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),le):le;function ne(e,t,a="validate"){if(Z(e)||Array.isArray(e)&&e.every(Z)||K(e)&&!e)return{type:a,message:Z(e)?e:"",ref:t}}var oe=e=>c(e)&&!te(e)?e:{value:e,message:""},ce=async(e,t,a,i,r)=>{const{ref:s,refs:o,required:u,maxLength:d,minLength:m,min:p,max:b,pattern:f,validate:v,name:y,valueAsNumber:h,mount:x,disabled:S}=e._f,O=E(t,y);if(!x||S)return{};const F=o?o[0]:s,w=e=>{i&&F.reportValidity&&(F.setCustomValidity(K(e)?"":e||""),F.reportValidity())},j={},M=ee(s),L=l(s),C=M||L,A=(h||X(s))&&g(s.value)&&g(O)||Y(s)&&""===s.value||""===O||Array.isArray(O)&&!O.length,D=G.bind(null,y,a,j),P=(e,t,a,i="maxLength",r="minLength")=>{const l=e?t:a;j[y]={type:e?i:r,message:l,ref:s,...D(e?i:r,l)}};if(r?!Array.isArray(O)||!O.length:u&&(!C&&(A||n(O))||K(O)&&!O||L&&!re(o).isValid||M&&!se(o).isValid)){const{value:e,message:t}=Z(u)?{value:!!u,message:u}:oe(u);if(e&&(j[y]={type:k,message:t,ref:F,...D(k,t)},!a))return w(t),j}if(!(A||n(p)&&n(b))){let e,t;const i=oe(b),r=oe(p);if(n(O)||isNaN(O)){const a=s.valueAsDate||new Date(O),l=e=>new Date((new Date).toDateString()+" "+e),n="time"==s.type,o="week"==s.type;R(i.value)&&O&&(e=n?l(O)>l(i.value):o?O>i.value:a>new Date(i.value)),R(r.value)&&O&&(t=n?l(O)<l(r.value):o?O<r.value:a<new Date(r.value))}else{const a=s.valueAsNumber||(O?+O:O);n(i.value)||(e=a>i.value),n(r.value)||(t=a<r.value)}if((e||t)&&(P(!!e,i.message,r.message,"max","min"),!a))return w(j[y].message),j}if((d||m)&&!A&&(R(O)||r&&Array.isArray(O))){const e=oe(d),t=oe(m),i=!n(e.value)&&O.length>+e.value,r=!n(t.value)&&O.length<+t.value;if((i||r)&&(P(i,e.message,t.message),!a))return w(j[y].message),j}if(f&&!A&&R(O)){const{value:e,message:t}=oe(f);if(te(e)&&!O.match(e)&&(j[y]={type:T,message:t,ref:s,...D(T,t)},!a))return w(t),j}if(v)if(J(v)){const e=ne(await v(O,t),F);if(e&&(j[y]={...e,...D("validate",e.message)},!a))return w(e.message),j}else if(c(v)){let e={};for(const i in v){if(!I(e)&&!a)break;const r=ne(await v[i](O,t),F,i);r&&(e={...r,...D(i,r.message)},w(r.message),a&&(j[y]=e))}if(!I(e)&&(j[y]={ref:F,...e},!a))return j}return w(!0),j};function ue(e,t){return[...e,...M(t)]}var de=e=>Array.isArray(e)?e.map((()=>{})):void 0;function me(e,t,a){return[...e.slice(0,t),...M(a),...e.slice(t)]}var pe=(e,t,a)=>Array.isArray(e)?(g(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[];function be(e,t){return[...M(t),...M(e)]}var ge=(e,t)=>g(t)?[]:function(e,t){let a=0;const i=[...e];for(const e of t)i.splice(e-a,1),a++;return b(i).length?i:[]}(e,M(t).sort(((e,t)=>e-t))),Ee=(e,t,a)=>{e[t]=[e[a],e[a]=e[t]][0]};function fe(e,t){const a=Array.isArray(t)?t:B(t)?[t]:_(t),i=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let i=0;for(;i<a;)e=g(e)?i++:e[t[i++]];return e}(e,a),r=a.length-1,l=a[r];return i&&delete i[l],0!==r&&(c(i)&&I(i)||Array.isArray(i)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!g(e[t]))return!1;return!0}(i))&&fe(e,a.slice(0,-1)),e}var ve=(e,t,a)=>(e[t]=a,e);function ye(){let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var he=e=>n(e)||!o(e);function xe(e,t){if(he(e)||he(t))return e===t;if(s(e)&&s(t))return e.getTime()===t.getTime();const a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(const r of a){const a=e[r];if(!i.includes(r))return!1;if("ref"!==r){const e=t[r];if(s(a)&&s(e)||c(a)&&c(e)||Array.isArray(a)&&Array.isArray(e)?!xe(a,e):a!==e)return!1}}return!0}var Se=e=>"select-multiple"===e.type,Te=e=>Y(e)&&e.isConnected,ke=e=>{for(const t in e)if(J(e[t]))return!0;return!1};function Oe(e,t={}){const a=Array.isArray(e);if(c(e)||a)for(const a in e)Array.isArray(e[a])||c(e[a])&&!ke(e[a])?(t[a]=Array.isArray(e[a])?[]:{},Oe(e[a],t[a])):n(e[a])||(t[a]=!0);return t}function Fe(e,t,a){const i=Array.isArray(e);if(c(e)||i)for(const i in e)Array.isArray(e[i])||c(e[i])&&!ke(e[i])?g(t)||he(a[i])?a[i]=Array.isArray(e[i])?Oe(e[i],[]):{...Oe(e[i])}:Fe(e[i],n(t)?{}:t[i],a[i]):a[i]=!xe(e[i],t[i]);return a}var we=(e,t)=>Fe(e,t,Oe(t)),Ie=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:i})=>g(e)?e:t?""===e?NaN:e?+e:e:a&&R(e)?new Date(e):i?i(e):e;function je(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return X(t)?t.files:ee(t)?se(e.refs).value:Se(t)?[...t.selectedOptions].map((({value:e})=>e)):l(t)?re(e.refs).value:Ie(g(t.value)?e.ref.value:t.value,e)}var Me=e=>g(e)?e:te(e)?e.source:c(e)?te(e.value)?e.value.source:e.value:e;function Le(e,t,a){const i=E(e,a);if(i||B(a))return{error:i,name:a};const r=a.split(".");for(;r.length;){const i=r.join("."),l=E(t,i),s=E(e,i);if(l&&!Array.isArray(l)&&a!==i)return{name:a};if(s&&s.type)return{name:i,error:s};r.pop()}return{name:a}}const Ce={mode:x,reValidateMode:h,shouldFocusError:!0};function Ae(e={},t){let a,i={...Ce,...e},r={submitCount:0,isDirty:!1,isLoading:J(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},o={},y=(c(i.defaultValues)||c(i.values))&&p(i.defaultValues||i.values)||{},h=i.shouldUnregister?{}:p(y),x={action:!1,mount:!1,watch:!1},T={mount:new Set,unMount:new Set,array:new Set,watch:new Set},k=0;const O={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},F={values:ye(),array:ye(),state:ye()},w=e.resetOptions&&e.resetOptions.keepDirtyValues,j=U(i.mode),L=U(i.reValidateMode),C=i.criteriaMode===S,A=async e=>{if(O.isValid||e){const e=i.resolver?I((await z()).errors):await G(o,!0);e!==r.isValid&&F.state.next({isValid:e})}},P=e=>O.isValidating&&F.state.next({isValidating:e}),B=(e,t,a,i)=>{const r=E(o,e);if(r){const l=E(h,e,g(a)?E(y,e):a);g(l)||i&&i.defaultChecked||t?N(h,e,t?l:je(r._f)):Z(e,l),x.mount&&A()}},_=(e,t,a,i,l)=>{let s=!1,n=!1;const o={name:e};if(!a||i){O.isDirty&&(n=r.isDirty,r.isDirty=o.isDirty=q(),s=n!==o.isDirty);const a=xe(E(y,e),t);n=E(r.dirtyFields,e),a?fe(r.dirtyFields,e):N(r.dirtyFields,e,!0),o.dirtyFields=r.dirtyFields,s=s||O.dirtyFields&&n!==!a}if(a){const t=E(r.touchedFields,e);t||(N(r.touchedFields,e,a),o.touchedFields=r.touchedFields,s=s||O.touchedFields&&t!==a)}return s&&l&&F.state.next(o),s?o:{}},V=(t,i,l,s)=>{const n=E(r.errors,t),o=O.isValid&&K(i)&&r.isValid!==i;var c;if(e.delayError&&l?(c=()=>((e,t)=>{N(r.errors,e,t),F.state.next({errors:r.errors})})(t,l),a=e=>{clearTimeout(k),k=setTimeout(c,e)},a(e.delayError)):(clearTimeout(k),a=null,l?N(r.errors,t,l):fe(r.errors,t)),(l?!xe(n,l):n)||!I(s)||o){const e={...s,...o&&K(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...e},F.state.next(e)}P(!1)},z=async e=>i.resolver(h,i.context,((e,t,a,i)=>{const r={};for(const a of e){const e=E(t,a);e&&N(r,a,e._f)}return{criteriaMode:a,names:[...e],fields:r,shouldUseNativeValidation:i}})(e||T.mount,o,i.criteriaMode,i.shouldUseNativeValidation)),G=async(e,t,a={valid:!0})=>{for(const l in e){const s=e[l];if(s){const{_f:e,...l}=s;if(e){const l=T.array.has(e.name),n=await ce(s,h,C,i.shouldUseNativeValidation&&!t,l);if(n[e.name]&&(a.valid=!1,t))break;!t&&(E(n,e.name)?l?Q(r.errors,n,e.name):N(r.errors,e.name,n[e.name]):fe(r.errors,e.name))}l&&await G(l,t,a)}}return a.valid},q=(e,t)=>(e&&t&&N(h,e,t),!xe(le(),y)),W=(e,t,a)=>D(e,T,{...x.mount?h:g(t)?y:R(e)?{[e]:t}:t},a,t),Z=(e,t,a={})=>{const i=E(o,e);let r=t;if(i){const a=i._f;a&&(!a.disabled&&N(h,e,Ie(t,a)),r=Y(a.ref)&&n(t)?"":t,Se(a.ref)?[...a.ref.options].forEach((e=>e.selected=r.includes(e.value))):a.refs?l(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(r)?!!r.find((t=>t===e.value)):r===e.value))):a.refs[0]&&(a.refs[0].checked=!!r):a.refs.forEach((e=>e.checked=e.value===r)):X(a.ref)?a.ref.value="":(a.ref.value=r,a.ref.type||F.values.next({name:e,values:{...h}})))}(a.shouldDirty||a.shouldTouch)&&_(e,r,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&re(e)},te=(e,t,a)=>{for(const i in t){const r=t[i],l=`${e}.${i}`,n=E(o,l);!T.array.has(e)&&he(r)&&(!n||n._f)||s(r)?Z(l,r,a):te(l,r,a)}},ae=(e,a,i={})=>{const l=E(o,e),s=T.array.has(e),c=p(a);N(h,e,c),s?(F.array.next({name:e,values:{...h}}),(O.isDirty||O.dirtyFields)&&i.shouldDirty&&F.state.next({name:e,dirtyFields:we(y,h),isDirty:q(e,c)})):!l||l._f||n(c)?Z(e,c,i):te(e,c,i),H(e,T)&&F.state.next({...r}),F.values.next({name:e,values:{...h}}),!x.mount&&t()},ie=async e=>{const t=e.target;let l=t.name,s=!0;const n=E(o,l);if(n){let d,m;const p=t.type?je(n._f):u(e),b=e.type===f||e.type===v,g=!((c=n._f).mount&&(c.required||c.min||c.max||c.maxLength||c.minLength||c.pattern||c.validate)||i.resolver||E(r.errors,l)||n._f.deps)||((e,t,a,i,r)=>!r.isOnAll&&(!a&&r.isOnTouch?!(t||e):(a?i.isOnBlur:r.isOnBlur)?!e:!(a?i.isOnChange:r.isOnChange)||e))(b,E(r.touchedFields,l),r.isSubmitted,L,j),y=H(l,T,b);N(h,l,p),b?(n._f.onBlur&&n._f.onBlur(e),a&&a(0)):n._f.onChange&&n._f.onChange(e);const x=_(l,p,b,!1),S=!I(x)||y;if(!b&&F.values.next({name:l,type:e.type,values:{...h}}),g)return O.isValid&&A(),S&&F.state.next({name:l,...y?{}:x});if(!b&&y&&F.state.next({...r}),P(!0),i.resolver){const{errors:e}=await z([l]),t=Le(r.errors,o,l),a=Le(e,o,t.name||l);d=a.error,l=a.name,m=I(e)}else d=(await ce(n,h,C,i.shouldUseNativeValidation))[l],s=isNaN(p)||p===E(h,l,p),s&&(d?m=!1:O.isValid&&(m=await G(o,!0)));s&&(n._f.deps&&re(n._f.deps),V(l,m,d,x))}var c},re=async(e,t={})=>{let a,l;const s=M(e);if(P(!0),i.resolver){const t=await(async e=>{const{errors:t}=await z();if(e)for(const a of e){const e=E(t,a);e?N(r.errors,a,e):fe(r.errors,a)}else r.errors=t;return t})(g(e)?e:s);a=I(t),l=e?!s.some((e=>E(t,e))):a}else e?(l=(await Promise.all(s.map((async e=>{const t=E(o,e);return await G(t&&t._f?{[e]:t}:t)})))).every(Boolean),(l||r.isValid)&&A()):l=a=await G(o);return F.state.next({...!R(e)||O.isValid&&a!==r.isValid?{}:{name:e},...i.resolver||!e?{isValid:a}:{},errors:r.errors,isValidating:!1}),t.shouldFocus&&!l&&$(o,(e=>e&&E(r.errors,e)),e?s:T.mount),l},le=e=>{const t={...y,...x.mount?h:{}};return g(e)?t:R(e)?E(t,e):e.map((e=>E(t,e)))},se=(e,t)=>({invalid:!!E((t||r).errors,e),isDirty:!!E((t||r).dirtyFields,e),isTouched:!!E((t||r).touchedFields,e),error:E((t||r).errors,e)}),ne=(e,t,a)=>{const i=(E(o,e,{_f:{}})._f||{}).ref;N(r.errors,e,{...t,ref:i}),F.state.next({name:e,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&i&&i.focus&&i.focus()},oe=(e,t={})=>{for(const a of e?M(e):T.mount)T.mount.delete(a),T.array.delete(a),t.keepValue||(fe(o,a),fe(h,a)),!t.keepError&&fe(r.errors,a),!t.keepDirty&&fe(r.dirtyFields,a),!t.keepTouched&&fe(r.touchedFields,a),!i.shouldUnregister&&!t.keepDefaultValue&&fe(y,a);F.values.next({values:{...h}}),F.state.next({...r,...t.keepDirty?{isDirty:q()}:{}}),!t.keepIsValid&&A()},ue=(e,t={})=>{let a=E(o,e);const r=K(t.disabled);return N(o,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),T.mount.add(e),a?r&&N(h,e,t.disabled?void 0:E(h,e,je(a._f))):B(e,!0,t.value),{...r?{disabled:t.disabled}:{},...i.progressive?{required:!!t.required,min:Me(t.min),max:Me(t.max),minLength:Me(t.minLength),maxLength:Me(t.maxLength),pattern:Me(t.pattern)}:{},name:e,onChange:ie,onBlur:ie,ref:r=>{if(r){ue(e,t),a=E(o,e);const i=g(r.value)&&r.querySelectorAll&&r.querySelectorAll("input,select,textarea")[0]||r,s=(e=>ee(e)||l(e))(i),n=a._f.refs||[];if(s?n.find((e=>e===i)):i===a._f.ref)return;N(o,e,{_f:{...a._f,...s?{refs:[...n.filter(Te),i,...Array.isArray(E(y,e))?[{}]:[]],ref:{type:i.type,name:e}}:{ref:i}}}),B(e,!1,void 0,i)}else a=E(o,e,{}),a._f&&(a._f.mount=!1),(i.shouldUnregister||t.shouldUnregister)&&(!d(T.array,e)||!x.action)&&T.unMount.add(e)}}},de=()=>i.shouldFocusError&&$(o,(e=>e&&E(r.errors,e)),T.mount),me=(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let l=p(h);if(F.state.next({isSubmitting:!0}),i.resolver){const{errors:e,values:t}=await z();r.errors=e,l=t}else await G(o);fe(r.errors,"root"),I(r.errors)?(F.state.next({errors:{}}),await e(l,a)):(t&&await t({...r.errors},a),de(),setTimeout(de)),F.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(r.errors),submitCount:r.submitCount+1,errors:r.errors})},pe=(a,i={})=>{const l=a||y,s=p(l),n=a&&!I(a)?s:y;if(i.keepDefaultValues||(y=l),!i.keepValues){if(i.keepDirtyValues||w)for(const e of T.mount)E(r.dirtyFields,e)?N(n,e,E(h,e)):ae(e,E(n,e));else{if(m&&g(a))for(const e of T.mount){const t=E(o,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Y(e)){const t=e.closest("form");if(t){t.reset();break}}}}o={}}h=e.shouldUnregister?i.keepDefaultValues?p(y):{}:p(n),F.array.next({values:{...n}}),F.values.next({values:{...n}})}T={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&t(),x.mount=!O.isValid||!!i.keepIsValid,x.watch=!!e.shouldUnregister,F.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:i.keepDirty?r.isDirty:!(!i.keepDefaultValues||xe(a,y)),isSubmitted:!!i.keepIsSubmitted&&r.isSubmitted,dirtyFields:i.keepDirtyValues?r.dirtyFields:i.keepDefaultValues&&a?we(y,a):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},be=(e,t)=>pe(J(e)?e(h):e,t);return{control:{register:ue,unregister:oe,getFieldState:se,handleSubmit:me,setError:ne,_executeSchema:z,_getWatch:W,_getDirty:q,_updateValid:A,_removeUnmounted:()=>{for(const e of T.unMount){const t=E(o,e);t&&(t._f.refs?t._f.refs.every((e=>!Te(e))):!Te(t._f.ref))&&oe(e)}T.unMount=new Set},_updateFieldArray:(e,t=[],a,i,l=!0,s=!0)=>{if(i&&a){if(x.action=!0,s&&Array.isArray(E(o,e))){const t=a(E(o,e),i.argA,i.argB);l&&N(o,e,t)}if(s&&Array.isArray(E(r.errors,e))){const t=a(E(r.errors,e),i.argA,i.argB);l&&N(r.errors,e,t),((e,t)=>{!b(E(e,t)).length&&fe(e,t)})(r.errors,e)}if(O.touchedFields&&s&&Array.isArray(E(r.touchedFields,e))){const t=a(E(r.touchedFields,e),i.argA,i.argB);l&&N(r.touchedFields,e,t)}O.dirtyFields&&(r.dirtyFields=we(y,h)),F.state.next({name:e,isDirty:q(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else N(h,e,t)},_getFieldArray:t=>b(E(x.mount?h:y,t,e.shouldUnregister?E(y,t,[]):[])),_reset:pe,_resetDefaultValues:()=>J(i.defaultValues)&&i.defaultValues().then((e=>{be(e,i.resetOptions),F.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_subjects:F,_proxyFormState:O,get _fields(){return o},get _formValues(){return h},get _state(){return x},set _state(e){x=e},get _defaultValues(){return y},get _names(){return T},set _names(e){T=e},get _formState(){return r},set _formState(e){r=e},get _options(){return i},set _options(e){i={...i,...e}}},trigger:re,register:ue,handleSubmit:me,watch:(e,t)=>J(e)?F.values.subscribe({next:a=>e(W(void 0,t),a)}):W(e,t,!0),setValue:ae,getValues:le,reset:be,resetField:(e,t={})=>{E(o,e)&&(g(t.defaultValue)?ae(e,E(y,e)):(ae(e,t.defaultValue),N(y,e,t.defaultValue)),t.keepTouched||fe(r.touchedFields,e),t.keepDirty||(fe(r.dirtyFields,e),r.isDirty=t.defaultValue?q(e,E(y,e)):q()),t.keepError||(fe(r.errors,e),O.isValid&&A()),F.state.next({...r}))},clearErrors:e=>{e&&M(e).forEach((e=>fe(r.errors,e))),F.state.next({errors:e?r.errors:{}})},unregister:oe,setError:ne,setFocus:(e,t={})=>{const a=E(o,e),i=a&&a._f;if(i){const e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:se}}t.Controller=e=>e.render(V(e)),t.Form=function(e){const t=F(),[a,i]=r.default.useState(!1),{control:l=t.control,onSubmit:s,children:n,action:o,method:c=z,headers:u,encType:d,onError:m,render:p,onSuccess:b,validateStatus:g,...f}=e,v=async t=>{let a=!1,i="";await l.handleSubmit((async e=>{const r=new FormData;let n="";try{n=JSON.stringify(e)}catch(e){}for(const t of l._names.mount)r.append(t,E(e,t));if(s&&s({data:e,event:t,method:c,formData:r,formDataJson:n}),o)try{const e=[u&&u["Content-Type"],d].some((e=>e&&e.includes("json"))),t=await fetch(o,{method:c,headers:{...u,...d?{"Content-Type":d}:{}},body:e?n:r});t&&(g?!g(t.status):t.status<200||t.status>=300)?(a=!0,m&&m({response:t}),i=String(t.status)):b&&b({response:t})}catch(e){a=!0,m&&m({error:e})}}))(t),a&&e.control&&(e.control._subjects.state.next({isSubmitSuccessful:!1}),e.control.setError("root.server",{type:i}))};return r.default.useEffect((()=>{i(!0)}),[]),p?r.default.createElement(r.default.Fragment,null,p({submit:v})):r.default.createElement("form",{noValidate:a,action:o,method:c,encType:d,onSubmit:v,...f},n)},t.FormProvider=e=>{const{children:t,...a}=e;return r.default.createElement(O.Provider,{value:a},t)},t.appendErrors=G,t.get=E,t.set=N,t.useController=V,t.useFieldArray=function(e){const t=F(),{control:a=t.control,name:i,keyName:l="id",shouldUnregister:s}=e,[n,o]=r.default.useState(a._getFieldArray(i)),c=r.default.useRef(a._getFieldArray(i).map(q)),u=r.default.useRef(n),d=r.default.useRef(i),m=r.default.useRef(!1);d.current=i,u.current=n,a._names.array.add(i),e.rules&&a.register(i,e.rules),C({next:({values:e,name:t})=>{if(t===d.current||!t){const t=E(e,d.current);Array.isArray(t)&&(o(t),c.current=t.map(q))}},subject:a._subjects.array});const b=r.default.useCallback((e=>{m.current=!0,a._updateFieldArray(i,e)}),[a,i]);return r.default.useEffect((()=>{if(a._state.action=!1,H(i,a._names)&&a._subjects.state.next({...a._formState}),m.current&&(!U(a._options.mode).isOnSubmit||a._formState.isSubmitted))if(a._options.resolver)a._executeSchema([i]).then((e=>{const t=E(e.errors,i),r=E(a._formState.errors,i);(r?!t&&r.type||t&&(r.type!==t.type||r.message!==t.message):t&&t.type)&&(t?N(a._formState.errors,i,t):fe(a._formState.errors,i),a._subjects.state.next({errors:a._formState.errors}))}));else{const e=E(a._fields,i);e&&e._f&&ce(e,a._formValues,a._options.criteriaMode===S,a._options.shouldUseNativeValidation,!0).then((e=>!I(e)&&a._subjects.state.next({errors:Q(a._formState.errors,e,i)})))}a._subjects.values.next({name:i,values:{...a._formValues}}),a._names.focus&&$(a._fields,(e=>!!e&&e.startsWith(a._names.focus||""))),a._names.focus="",a._updateValid()}),[n,i,a]),r.default.useEffect((()=>(!E(a._formValues,i)&&a._updateFieldArray(i),()=>{(a._options.shouldUnregister||s)&&a.unregister(i)})),[i,a,l,s]),{swap:r.default.useCallback(((e,t)=>{const r=a._getFieldArray(i);Ee(r,e,t),Ee(c.current,e,t),b(r),o(r),a._updateFieldArray(i,r,Ee,{argA:e,argB:t},!1)}),[b,i,a]),move:r.default.useCallback(((e,t)=>{const r=a._getFieldArray(i);pe(r,e,t),pe(c.current,e,t),b(r),o(r),a._updateFieldArray(i,r,pe,{argA:e,argB:t},!1)}),[b,i,a]),prepend:r.default.useCallback(((e,t)=>{const r=M(p(e)),l=be(a._getFieldArray(i),r);a._names.focus=W(i,0,t),c.current=be(c.current,r.map(q)),b(l),o(l),a._updateFieldArray(i,l,be,{argA:de(e)})}),[b,i,a]),append:r.default.useCallback(((e,t)=>{const r=M(p(e)),l=ue(a._getFieldArray(i),r);a._names.focus=W(i,l.length-1,t),c.current=ue(c.current,r.map(q)),b(l),o(l),a._updateFieldArray(i,l,ue,{argA:de(e)})}),[b,i,a]),remove:r.default.useCallback((e=>{const t=ge(a._getFieldArray(i),e);c.current=ge(c.current,e),b(t),o(t),a._updateFieldArray(i,t,ge,{argA:e})}),[b,i,a]),insert:r.default.useCallback(((e,t,r)=>{const l=M(p(t)),s=me(a._getFieldArray(i),e,l);a._names.focus=W(i,e,r),c.current=me(c.current,e,l.map(q)),b(s),o(s),a._updateFieldArray(i,s,me,{argA:e,argB:de(t)})}),[b,i,a]),update:r.default.useCallback(((e,t)=>{const r=p(t),l=ve(a._getFieldArray(i),e,r);c.current=[...l].map(((t,a)=>t&&a!==e?c.current[a]:q())),b(l),o([...l]),a._updateFieldArray(i,l,ve,{argA:e,argB:r},!0,!1)}),[b,i,a]),replace:r.default.useCallback((e=>{const t=M(p(e));c.current=t.map(q),b([...t]),o([...t]),a._updateFieldArray(i,[...t],(e=>e),{},!0,!1)}),[b,i,a]),fields:r.default.useMemo((()=>n.map(((e,t)=>({...e,[l]:c.current[t]||q()})))),[n,l])}},t.useForm=function(e={}){const t=r.default.useRef(),[a,i]=r.default.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:J(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Ae(e,(()=>i((e=>({...e}))))),formState:a});const l=t.current.control;return l._options=e,C({subject:l._subjects.state,next:e=>{j(e,l._proxyFormState,l._updateFormState,!0)&&i({...l._formState})}}),r.default.useEffect((()=>{e.values&&!xe(e.values,l._defaultValues)?l._reset(e.values,l._options.resetOptions):l._resetDefaultValues()}),[e.values,l]),r.default.useEffect((()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()})),t.current.formState=w(a,l),t.current},t.useFormContext=F,t.useFormState=A,t.useWatch=P},111:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(0),r=a(78),l=a(1),s=a(49),n=a(25),o=a(42),c=a(106);function u({kqlQuery:e="",page:t=1,sortBy:a="status",sortDirection:u="desc",shouldRefetch:d,perPage:m=s.a}={}){const{http:p,notifications:{toasts:b}}=Object(o.a)().services,g=Object(r.useQueryClient)(),[E,f]=Object(l.useState)(n.d),{isInitialLoading:v,isLoading:y,isError:h,isSuccess:x,isRefetching:S,data:T}=Object(r.useQuery)({queryKey:c.a.list({kqlQuery:e,page:t,perPage:m,sortBy:a,sortDirection:u}),queryFn:async({signal:i})=>await p.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...a&&{sortBy:a},...u&&{sortDirection:u},...t&&{page:t},...m&&{perPage:m}},signal:i}),cacheTime:0,refetchOnWindowFocus:!1,refetchInterval:d?E:void 0,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{g.invalidateQueries({queryKey:c.a.historicalSummaries(),exact:!1}),g.invalidateQueries({queryKey:c.a.activeAlerts(),exact:!1}),g.invalidateQueries({queryKey:c.a.rules(),exact:!1}),d&&(e.find((e=>"NO_DATA"===e.summary.status||!e.summary))?f(n.d):f(n.c))},onError:e=>{b.addError(e,{title:i.i18n.translate("xpack.observability.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:T,isInitialLoading:v,isLoading:y,isRefetching:S,isSuccess:x,isError:h}}},143:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(78),r=a(42),l=a(106);function s({name:e="",includeOutdatedOnly:t=!1,page:a=1,perPage:s=100}){const{http:n}=Object(r.a)().services,o=e.endsWith("*")?e:`${e}*`,{isLoading:c,isError:u,isSuccess:d,data:m,refetch:p}=Object(i.useQuery)({queryKey:l.a.definitions(o,a,s,t),queryFn:async({signal:e})=>{try{return await n.get("/api/observability/slos/_definitions",{query:{search:o,includeOutdatedOnly:t,page:a,perPage:s},signal:e})}catch(e){throw new Error(`Something went wrong. Error: ${e}`)}},retry:!1,refetchOnWindowFocus:!1});return{isLoading:c,isError:u,isSuccess:d,data:m,refetch:p}}},144:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(27),r=a(4),l=a(19);function s(e,t,a=[],s={}){const n=e&&Object(l.getTime)(void 0,e,{fieldName:r.fb}),o=n?[n]:[],c=[...t?[{query:t,language:"kuery"}]:[],...a];return Object(i.buildEsQuery)(void 0,c,o,s)}},146:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(66),r=a(147),l=i.__importDefault(a(149));t.default=function(e,t){l.default(e,t,r.isDeepEqual)}},147:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=a(66).__importDefault(a(148));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},148:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var i,r,l;if(Array.isArray(t)){if((i=t.length)!=a.length)return!1;for(r=i;0!=r--;)if(!e(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(a,l[r]))return!1;for(r=i;0!=r--;){var s=l[r];if(!("_owner"===s&&t.$$typeof||e(t[s],a[s])))return!1}return!0}return t!=t&&a!=a}},149:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(1);t.default=function(e,t,a){var r=i.useRef(void 0);r.current&&a(t,r.current)||(r.current=t),i.useEffect(e,r.current)}},152:function(e,t,a){e.exports=a(21)(3293)},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return E})),a.d(t,"c",(function(){return v}));var i=a(65),r=a.n(i),l=a(1),s=a.n(l),n=a(23);const o={services:{}},c=Object(l.createContext)(o);var u=a(146),d=a.n(u),m=a(77);const p=({children:e,component:t,render:a,...i})=>{const o=Object(l.useMemo)((()=>{if(t)return e=>Object(m.jsx)(s.a.Fragment,null,Object(m.jsx)(b,null),Object(m.jsx)(t,e))}),[t]);if(o)return Object(m.jsx)(n.Route,r()({},i,{component:o}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(m.jsx)(n.Route,r()({},i,{render:e=>Object(m.jsx)(s.a.Fragment,null,Object(m.jsx)(b,null),t(e))}))}return Object(m.jsx)(n.Route,i,Object(m.jsx)(b,null),e)},b=()=>{const{executionContext:e}=Object(l.useContext)(c).services,t=Object(n.useRouteMatch)();return function(e,t){d()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var g=a(88);const E=({children:e,...t})=>Object(m.jsx)(n.Router,t,Object(m.jsx)(g.CompatRouter,null,e));var f=a(16);const v=({legacySwitch:e=!0,children:t})=>{const a=Object(n.useRouteMatch)();return e?Object(m.jsx)(n.Switch,null,t):Object(m.jsx)(g.Routes,null,l.Children.map(t,(e=>{if(s.a.isValidElement(e)&&e.type===p){var i;const r=Object(f.replace)(null==e?void 0:e.props.path,a.url+"/",""),l="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(m.jsx)(g.Route,{path:r,element:Object(m.jsx)(s.a.Fragment,null,Object(m.jsx)(b,null),(null==e||null===(i=e.props)||void 0===i?void 0:i.component)&&Object(m.jsx)(e.props.component,null)||l&&l()||t)})}return e})))}},170:function(e,t,a){"use strict";a.r(t),a.d(t,"ObservabilityAlertSearchBar",(function(){return E}));var i=a(12),r=a(1),l=a.n(r),s=a(0),n=a(19),o=a(48);const c=[{id:o.c.status,label:o.c.label,value:o.c.query,"data-test-subj":"alert-status-filter-show-all-button"},{id:o.a.status,label:o.a.label,value:o.a.query,"data-test-subj":"alert-status-filter-active-button"},{id:o.f.status,label:o.f.label,value:o.f.query,"data-test-subj":"alert-status-filter-recovered-button"},{id:o.g.status,label:o.g.label,value:o.g.query,"data-test-subj":"alert-status-filter-untracked-button"}];function u({status:e,onChange:t}){return l.a.createElement(i.EuiButtonGroup,{legend:s.i18n.translate("xpack.observability.alerts.alertStatusFilter.legend",{defaultMessage:"Filter by"}),color:"primary",options:c,idSelected:e,onChange:e=>t(e)})}var d=a(31),m=a(144),p=a(42);const b=e=>o.b[e]?[{query:o.b[e],language:"kuery"}]:[],g=s.i18n.translate("xpack.observability.alerts.searchBar.invalidQueryTitle",{defaultMessage:"Invalid query string"});function E({appName:e,defaultSearchQueries:t=o.d,onEsQueryChange:a,onKueryChange:s,onRangeFromChange:c,onRangeToChange:E,onStatusChange:f,kuery:v,rangeFrom:y,rangeTo:h,services:{AlertsSearchBar:x,timeFilterService:S,useToasts:T},status:k}){const O=T(),{uiSettings:F}=Object(p.a)().services,w=Object(r.useCallback)((e=>{try{a(Object(m.a)({to:h,from:y},v,[...b(e),...t],Object(n.getEsQueryConfig)(F)))}catch(e){O.addError(e,{title:g}),s(o.e)}}),[a,h,y,v,t,F,O,s]);Object(r.useEffect)((()=>{w(k)}),[w,k]);const I=Object(r.useCallback)((({dateRange:e,query:i})=>{try{const r=Object(m.a)({to:e.to,from:e.from},i,[...b(k),...t],Object(n.getEsQueryConfig)(F));i&&s(i),S.setTime(e),c(e.from),E(e.to),a(r)}catch(e){O.addError(e,{title:g}),s(o.e)}}),[k,t,F,s,S,c,E,a,O]);return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(x,{appName:e,featureIds:d.h,rangeFrom:y,rangeTo:h,query:v,onQuerySubmit:I})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(u,{status:k,onChange:f})))))}t.default=E},181:function(e,t,a){const i=a(182),{MAX_LENGTH:r,MAX_SAFE_INTEGER:l}=a(183),{safeRe:s,t:n}=a(184),o=a(209),{compareIdentifiers:c}=a(210);class SemVer{constructor(e,t){if(t=o(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const a=e.trim().match(t.loose?s[n.LOOSE]:s[n.FULL]);if(!a)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>l||this.major<0)throw new TypeError("Invalid major version");if(this.minor>l||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>l||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<l)return t}return e})):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(i("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const a=this.prerelease[t],r=e.prerelease[t];if(i("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const a=this.build[t],r=e.build[t];if(i("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}inc(e,t,a){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,a),this.inc("pre",t,a);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,a),this.inc("pre",t,a);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(a)?1:0;if(!t&&!1===a)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(t===this.prerelease.join(".")&&!1===a)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let i=[t,e];!1===a&&(i=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=SemVer},182:function(e,t,a){(function(t){const a="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=a}).call(this,a(145))},183:function(e,t){const a=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},184:function(e,t,a){const{MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:l}=a(183),s=a(182),n=(t=e.exports={}).re=[],o=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const m="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",l],[m,r]],b=(e,t,a)=>{const i=(e=>{for(const[t,a]of p)e=e.split(`${t}*`).join(`${t}{0,${a}}`).split(`${t}+`).join(`${t}{1,${a}}`);return e})(t),r=d++;s(e,r,t),u[e]=r,c[r]=t,n[r]=new RegExp(t,a?"g":void 0),o[r]=new RegExp(i,a?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),b("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${m}+`),b("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),b("FULL",`^${c[u.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),b("LOOSE",`^${c[u.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),b("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),b("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),b("COERCERTL",c[u.COERCE],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},190:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));var i=a(1),r=a.n(i),l=a(12),s=a(0);const n=s.i18n.translate("xpack.observability.ux.coreVitals.noData",{defaultMessage:"No data is available."}),o=s.i18n.translate("xpack.observability.ux.coreVitals.lcp",{defaultMessage:"Largest contentful paint"}),c=s.i18n.translate("xpack.observability.ux.coreVitals.inp",{defaultMessage:"Interaction to next paint"}),u=s.i18n.translate("xpack.observability.ux.coreVitals.cls",{defaultMessage:"Cumulative layout shift"}),d=s.i18n.translate("xpack.observability.ux.coreVitals.poor",{defaultMessage:"a poor"}),m=s.i18n.translate("xpack.observability.ux.coreVitals.good",{defaultMessage:"a good"}),p=s.i18n.translate("xpack.observability.ux.coreVitals.average",{defaultMessage:"an average"}),b=s.i18n.translate("xpack.observability.ux.coreVitals.legends.poor",{defaultMessage:"Poor"}),g=s.i18n.translate("xpack.observability.ux.coreVitals.legends.good",{defaultMessage:"Good"}),E=s.i18n.translate("xpack.observability.ux.coreVitals.legends.needsImprovement",{defaultMessage:"Needs improvement"}),f=s.i18n.translate("xpack.observability.ux.coreVitals.more",{defaultMessage:"more"}),v=s.i18n.translate("xpack.observability.ux.coreVitals.less",{defaultMessage:"less"}),y=s.i18n.translate("xpack.observability.ux.coreVitals.is",{defaultMessage:"is"}),h=s.i18n.translate("xpack.observability.ux.coreVitals.takes",{defaultMessage:"takes"}),x=s.i18n.translate("xpack.observability.ux.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),S=s.i18n.translate("xpack.observability.ux.coreVitals.inp.help",{defaultMessage:"INP assesses responsiveness using data from the Event Timing API. When an interaction causes a page to become unresponsive, that is a poor user experience. INP observes the latency of all interactions a user has made with the page, and reports a single value which all (or nearly all) interactions were below. A low INP means the page was consistently able to respond quickly to all—or the vast majority—of user interactions."}),T=s.i18n.translate("xpack.observability.ux.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."});var k=a(79),O=a.n(k),F=a(43),w=a(84),I=a(13);const j=O()(l.EuiHealth).withConfig({displayName:"PaletteLegend",componentId:"sc-138xunt-0"})(["&:hover{cursor:pointer;text-decoration:underline;}"]),M=O.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-138xunt-1"})(["&:hover{background-color:",";}"],(e=>e.darkMode?w.euiDarkVars.euiColorLightestShade:w.euiLightVars.euiColorLightestShade));function L({ranks:e,title:t,onItemHover:a,thresholds:i,isCls:s}){const[n]=Object(I.useUiSetting$)("theme:darkMode"),o=Object(l.euiPaletteForStatus)(3),c=[g,E,b];return r.a.createElement(l.EuiFlexGroup,{responsive:!1,gutterSize:"s"},o.map(((o,u)=>r.a.createElement(l.EuiFlexItem,{key:u,grow:!1,onMouseEnter:()=>{a(u)},onMouseLeave:()=>{a(null)}},r.a.createElement(l.EuiToolTip,{content:D(i,u,t,e[u],s),position:"bottom"},r.a.createElement(M,{darkMode:n},r.a.createElement(j,{color:o},r.a.createElement(l.EuiText,{size:"xs","data-test-subj":`${c[u]}-${null==e?void 0:e[u]}`},r.a.createElement(F.FormattedMessage,{id:"xpack.observability.ux.coreVitals.paletteLegend.rankPercentage",defaultMessage:"{labelsInd} ({ranksInd}%)",values:{labelsInd:c[u],ranksInd:null==e?void 0:e[u]}})))))))))}const C=O.a.div.withConfig({displayName:"ColoredSpan",componentId:"sc-6eejho-0"})(["height:16px;width:100%;cursor:pointer;"]),A=(e,t,a,i)=>{let r=0===e||100===i,l=2===e||100===i;100===i&&(r=!0,l=!0);const s={backgroundColor:a,opacity:t?.3:1};let n="";return r&&(n="4px 0 0 4px"),l&&(n="0 4px 4px 0"),r&&l&&(n="4px"),s.borderRadius=n,s};function R({hexCode:e,inFocus:t,percentage:a,tooltip:i,position:s}){const n=A(s,t,e,a);return r.a.createElement(l.EuiFlexItem,{key:e,grow:!1,style:{width:a+"%"}},r.a.createElement(l.EuiToolTip,{content:i},r.a.createElement(C,{style:n})))}function D(e,t,a,i,r){const l=0===t,n=2===t,o=!l&&!n;return s.i18n.translate("xpack.observability.ux.dashboard.webVitals.palette.tooltip",{defaultMessage:"{percentage} % of users have {exp} experience because the {title} {isOrTakes} {moreOrLess} than {value}{averageMessage}.",values:{percentage:i,isOrTakes:r?y:h,title:null==a?void 0:a.toLowerCase(),exp:l?m:n?d:p,moreOrLess:n||o?f:v,value:l||o?e.good:e.bad,averageMessage:o?s.i18n.translate("xpack.observability.ux.coreVitals.averageMessage",{defaultMessage:" and less than {bad}",values:{bad:e.bad}}):""}})}function P({loading:e,title:t,value:a,thresholds:s,ranks:o=[100,0,0],isCls:c,helpLabel:u,dataTestSubj:d}){const m=Object(l.euiPaletteForStatus)(3),[p,b]=Object(i.useState)(null),g=o.indexOf(Math.max(...o));return a||e?r.a.createElement(r.a.Fragment,null,r.a.createElement(l.EuiStat,{"data-test-subj":d,"aria-label":`${t} ${a}`,titleSize:"s",title:null!=a?a:"",description:r.a.createElement(r.a.Fragment,null,t,r.a.createElement(l.EuiIconTip,{content:u,type:"questionInCircle"})),titleColor:m[g],isLoading:e}),r.a.createElement(l.EuiSpacer,{size:"s"}),r.a.createElement(l.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",style:{maxWidth:350},responsive:!1},m.map(((e,a)=>r.a.createElement(R,{hexCode:e,key:e,position:a,inFocus:p!==a&&null!==p,percentage:o[a],tooltip:D(s,a,t,o[a],c)})))),r.a.createElement(l.EuiSpacer,{size:"s"}),r.a.createElement(L,{ranks:o,thresholds:s,title:t,onItemHover:e=>{b(e)},isCls:c})):r.a.createElement(l.EuiCard,{title:t,isDisabled:!0,description:n})}const B=s.i18n.translate("xpack.observability.ux.coreWebVitals",{defaultMessage:"Core web vitals"}),_=s.i18n.translate("xpack.observability.ux.coreWebVitals.browser.support",{defaultMessage:"browser support for core web vitals"});function N({loading:e,coreVitalPages:t,totalPageViews:a=0,displayTrafficMetric:n}){const[o,c]=Object(i.useState)(!1),[u,d]=Object(i.useState)(!1),m=s.i18n.translate("xpack.observability.ux.dashboard.webCoreVitals.helpAriaLabel",{defaultMessage:"help"});return r.a.createElement(l.EuiFlexGroup,{gutterSize:"none"},r.a.createElement(l.EuiFlexItem,null,r.a.createElement(l.EuiTitle,{size:"xs"},r.a.createElement("h3",null,B,r.a.createElement(l.EuiPopover,{isOpen:o,button:r.a.createElement(l.EuiButtonIcon,{"data-test-subj":"o11yWebCoreVitalsTitleButton","aria-label":m,onClick:()=>c(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>c(!1)},r.a.createElement("div",null,r.a.createElement(l.EuiText,null,r.a.createElement(F.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.help",defaultMessage:"Learn more about"})," ",r.a.createElement(l.EuiLink,{"data-test-subj":"o11yWebCoreVitalsTitleLink",href:"https://web.dev/vitals/",external:!0,target:"_blank"},B))))))),n&&a>0&&r.a.createElement(l.EuiFlexItem,{grow:!1},e?r.a.createElement(l.EuiLoadingSpinner,null):r.a.createElement(l.EuiText,{size:"s"},r.a.createElement(F.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.traffic",defaultMessage:"{trafficPerc} of the traffic represented",values:{trafficPerc:r.a.createElement("strong",null," ",((t||0)/a*100).toFixed(0),"%")}}),r.a.createElement(l.EuiPopover,{isOpen:u,button:r.a.createElement(l.EuiButtonIcon,{"data-test-subj":"o11yWebCoreVitalsTitleButton","aria-label":m,onClick:()=>d(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>d(!1)},r.a.createElement("div",null,r.a.createElement(l.EuiText,null,r.a.createElement(F.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.browser.help",defaultMessage:"Learn more about"})," ",r.a.createElement(l.EuiLink,{"data-test-subj":"o11yWebCoreVitalsTitleLink",href:"https://github.com/GoogleChrome/web-vitals#browser-support",external:!0,target:"_blank"},_)))))))}const V=s.i18n.translate("xpack.observability.ux.coreWebVitals.service",{defaultMessage:"Service"}),z=s.i18n.translate("xpack.observability.ux.service.help",{defaultMessage:"The RUM service with the most traffic is selected"});function G({name:e}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.EuiText,{size:"s"},V,r.a.createElement(l.EuiIconTip,{color:"text","aria-label":z,type:"questionInCircle",content:z})),r.a.createElement(l.EuiTitle,{size:"s"},r.a.createElement("h3",null,e)))}function $(e){return null==e?null:function(e,t="MicroSec"){const a=Number(null!=e?e:0)/("MicroSec"===t?1e3:1);return a<1e3?a.toFixed(0)+" ms":(a/1e3).toFixed(2)+" s"}(e,"ms")}const q={LCP:{good:"2.5s",bad:"4.0s"},INP:{good:"200ms",bad:"500ms"},CLS:{good:"0.1",bad:"0.25"}};function W({data:e,loading:t,displayServiceName:a,serviceName:r,totalPageViews:s,displayTrafficMetric:n=!1}){var d;const{lcp:m,lcpRanks:p,inp:b,inpRanks:g,cls:E,clsRanks:f,coreVitalPages:v}=e||{};return i.createElement(i.Fragment,null,i.createElement(N,{loading:t,coreVitalPages:v,totalPageViews:s,displayTrafficMetric:n}),i.createElement(l.EuiSpacer,{size:"s"}),a&&i.createElement(G,{name:r}),i.createElement(l.EuiSpacer,{size:"s"}),i.createElement(l.EuiFlexGroup,{gutterSize:"xl",justifyContent:"spaceBetween",wrap:!0},i.createElement(l.EuiFlexItem,{style:{flexBasis:380}},i.createElement(P,{title:o,value:$(m),ranks:p,loading:t,thresholds:q.LCP,helpLabel:x,dataTestSubj:"lcp-core-vital"})),i.createElement(l.EuiFlexItem,{style:{flexBasis:380}},i.createElement(P,{title:c,value:$(b),ranks:g,loading:t,thresholds:q.INP,helpLabel:S,dataTestSubj:"inp-core-vital"})),i.createElement(l.EuiFlexItem,{style:{flexBasis:380}},i.createElement(P,{title:u,value:null!==(d=null==E?void 0:E.toFixed(3))&&void 0!==d?d:null,ranks:f,loading:t,thresholds:q.CLS,isCls:!0,helpLabel:T,dataTestSubj:"cls-core-vital"}))))}},205:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(206);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},206:function(e,t,a){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.useIsNestedEuiProvider=t.EuiProviderNestedCheck=t.EuiNestedProviderContext=void 0;var r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var o=l?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n]}return r.default=e,a&&a.set(e,r),r}(a(1)),l=a(77);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}var n=(0,r.createContext)(!1);t.EuiNestedProviderContext=n,t.EuiProviderNestedCheck=function(e){var t=e.children;return(0,l.jsx)(n.Provider,{value:!0},t)},t.useIsNestedEuiProvider=function(){return!!(0,r.useContext)(n)}},207:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},208:function(e,t,a){const i=a(181),r=a(211),{safeRe:l,t:s}=a(184);e.exports=(e,t)=>{if(e instanceof i)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let a=null;if((t=t||{}).rtl){let t;for(;(t=l[s.COERCERTL].exec(e))&&(!a||a.index+a[0].length!==e.length);)a&&t.index+t[0].length===a.index+a[0].length||(a=t),l[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;l[s.COERCERTL].lastIndex=-1}else a=e.match(l[s.COERCE]);return null===a?null:r(`${a[2]}.${a[3]||"0"}.${a[4]||"0"}`,t)}},209:function(e,t){const a=Object.freeze({loose:!0}),i=Object.freeze({});e.exports=e=>e?"object"!=typeof e?a:e:i},210:function(e,t){const a=/^[0-9]+$/,i=(e,t)=>{const i=a.test(e),r=a.test(t);return i&&r&&(e=+e,t=+t),e===t?0:i&&!r?-1:r&&!i?1:e<t?-1:1};e.exports={compareIdentifiers:i,rcompareIdentifiers:(e,t)=>i(t,e)}},211:function(e,t,a){const i=a(181);e.exports=(e,t,a=!1)=>{if(e instanceof i)return e;try{return new i(e,t)}catch(e){if(!a)return null;throw e}}},212:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(213);case"v8light":return a(215)}},213:function(e,t,a){var i=a(140),r=a(214);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);i(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},214:function(e,t,a){(t=a(141)(!1)).push([e.i,".obsNewsFeed__itemImg{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125)}",""]),e.exports=t},215:function(e,t,a){var i=a(140),r=a(216);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);i(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},216:function(e,t,a){(t=a(141)(!1)).push([e.i,".obsNewsFeed__itemImg{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d}",""]),e.exports=t},217:function(e,t,a){e.exports=a.p+"059c3a548a47cf1b7b7288eacf4ddaa9.svg"},223:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Os}));var i=a(12),r=a(1),l=a.n(r),s=a(81),n=a.n(s),o=a(78),c=a(0),u=a(169),d=a(15),m=a(14),p=a(13),b=a(65),g=a.n(b),E=a(108),f=a.n(E),v=a(205),y=a(207),h=a(116),x=a(110),S=a(77);const T=({theme:{theme$:e},euiTheme:t,children:a,...l})=>{const s=f()(e,x.a),n=Object(r.useMemo)((()=>Object(x.b)(s)),[s]);return Object(S.jsx)(i.EuiThemeProvider,g()({colorMode:n,theme:t},l),a)},k=({theme:e,children:t,...a})=>Object(v.useIsNestedEuiProvider)()?Object(S.jsx)(T,g()({theme:e},a),t):(Object(y.emitEuiProviderWarning)("KibanaThemeProvider requires a parent KibanaRenderContextProvider.  Check your React tree and ensure that they are wrapped in a KibanaRenderContextProvider."),Object(S.jsx)(h.a,{theme:e,globalStyles:!1},t)),O=l.a.createContext(null),F=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:i}=t;return Object(S.jsx)(O.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},w=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:i}=t.application,r=f()(i,void 0);return Object(S.jsx)(O.Provider,{value:{navigateToUrl:a,currentAppId:r}},e)};a(85);const I={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},j=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const l=Object(r.useRef)(null),s=Object(r.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:i})=>{if(!t||!i)return;const r=((e,t)=>{let a=e;do{var i,r;if("a"===(null===(i=a)||void 0===i?void 0:i.tagName.toLowerCase()))return a;const e=null===(r=a)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const l=r.href,s=""===r.target||"_self"===r.target,n=0===e.button;l&&s&&n&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(r.href))})({event:e,currentAppId:a,navigateToUrl:t,container:l.current})),[a,t]);return Object(S.jsx)("div",g()({onClick:s,ref:l,css:I,"data-test-subj":"kbnRedirectAppLink"},i),e)},M=({children:e,...t})=>Object(S.jsx)(j,g()({},function(){const e=Object(r.useContext)(O);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),L=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...i}=t,r=Object(S.jsx)(M,i,e);return Object(S.jsx)(w,{coreStart:a},r)}const{navigateToUrl:a,currentAppId:i,...r}=t,l=Object(S.jsx)(M,r,e);return Object(S.jsx)(F,{currentAppId:i,navigateToUrl:a},l)};var C=a(9),A=a(125),R=a(23),D=a(35),P=a(42),B=a(86),_=a(4),N=a(44),V=a(137),z=a(194),G=a(5),$=a(103),q=a(51),W=a(121);const U=()=>Object(P.a)().services.notifications.toasts;var H=a(84);const Q=m.euiStyled.div`
  border-right: 1px solid ${H.euiThemeVars.euiColorLightShade};
  height: 100%;
`,K=Object(m.euiStyled)(i.EuiStat)`
  .euiText {
    line-height: 1;
  }
`,X=({condition:e,wrap:t,children:a})=>e?t(a):a,J=(e,t,a,r)=>{const s=async(e,t)=>{const a=((e,t)=>"snoozed"===t?e.snoozed+e.muted:e[t])(e,t);if(a>0)switch(t){case"error":await(null==r?void 0:r.navigate({lastResponse:["failed"]},{replace:!1}));break;case"snoozed":case"disabled":await(null==r?void 0:r.navigate({status:[t]},{replace:!1}))}},n=l.a.createElement(X,{condition:e.disabled>0,wrap:t=>l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yDisabledStatsComponentButton",onClick:()=>s(e,"disabled")},t)},l.a.createElement(K,{title:e.disabled,description:c.i18n.translate("xpack.observability.alerts.ruleStats.disabled",{defaultMessage:"Disabled"}),color:"primary",titleColor:e.disabled>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statDisabled"})),o=l.a.createElement(X,{condition:e.muted+e.snoozed>0,wrap:t=>l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11ySnoozedStatsComponentButton",onClick:()=>s(e,"snoozed")},t)},l.a.createElement(K,{title:e.muted+e.snoozed,description:c.i18n.translate("xpack.observability.alerts.ruleStats.muted",{defaultMessage:"Snoozed"}),color:"primary",titleColor:e.muted+e.snoozed>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statMuted"})),u=l.a.createElement(X,{condition:e.error>0,wrap:t=>l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yErrorStatsComponentButton",onClick:()=>s(e,"error")},t)},l.a.createElement(K,{title:e.error,description:c.i18n.translate("xpack.observability.alerts.ruleStats.errors",{defaultMessage:"Errors"}),color:"primary",titleColor:e.error>0?"primary":"",titleSize:"xs",isLoading:a,"data-test-subj":"statErrors"}));return[l.a.createElement(K,{title:e.total,description:c.i18n.translate("xpack.observability.alerts.ruleStats.ruleCount",{defaultMessage:"Rule count"}),color:"primary",titleSize:"xs",isLoading:a,"data-test-subj":"statRuleCount"}),n,o,u,l.a.createElement(Q,null),l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"manageRulesPageButton",href:t},c.i18n.translate("xpack.observability.alerts.manageRulesButtonLabel",{defaultMessage:"Manage Rules"}))].reverse()};var Y=a(170);const Z={rangeFrom:"now-15m",rangeTo:"now",kuery:"",status:a(48).c.status},ee=Object(C.createStateContainer)(Z,{setRangeFrom:e=>t=>({...e,rangeFrom:t}),setRangeTo:e=>t=>({...e,rangeTo:t}),setKuery:e=>t=>({...e,kuery:t}),setStatus:e=>t=>({...e,status:t})}),{Provider:te,useContainer:ae}=Object(C.createStateContainerReactHelpers)();var ie=a(105),re=a(113),le=a(20),se=a(56),ne=a.n(se);const oe=new le.Type("datemath",le.string.is,((e,t)=>Object(re.pipe)(le.string.validate(e,t),Object(ie.chain)((e=>function(e){const t=ne.a.parse(e);return!(!t||!t.isValid())}(e)?le.success(e):le.failure(e,t))))),String);var ce=a(31);const ue=le.partial({rangeFrom:oe,rangeTo:oe,kuery:le.string,status:le.union([le.literal(_.W),le.literal(_.X),le.literal(ce.c)])});function de(e,{replace:t}={}){const a=ae();!function(e,t,a=!0){const i=Object(R.useHistory)(),l=function(){const{services:e}=Object(p.useKibana)();return e.data.query.timefilter.timefilter}();Object(r.useEffect)((()=>{const r=Object(C.createKbnUrlStateStorage)({history:i,useHash:!1,useHashQuery:!1}),{start:s,stop:n}=function(e,t,a,i=!0){return Object(C.syncState)({storageKey:a,stateContainer:{...e,set:t=>{e.set({...Z,...t})}},stateStorage:{...t,set:(e,a)=>t.set(e,a,{replace:i})}})}(e,r,t,a);return s(),function(e,t,a,i,r=!0){const l=ue.decode(a.get(i));if(Object(ie.isRight)(l)){const e={...Z,...Object(re.pipe)(l).right};return t.set(e),void a.set(i,t.get(),{replace:!0})}if(e.isTimeTouched()){const{from:a,to:i}=e.getTime(),r={...Z,rangeFrom:a,rangeTo:i};t.set(r)}else t.set(Z);a.set(i,t.get(),{replace:r})}(l,e,r,t,a),n}),[e,i,l,t,a])}(a,e,t);const{setRangeFrom:i,setRangeTo:l,setKuery:s,setStatus:n}=a.transitions,{rangeFrom:o,rangeTo:c,kuery:u,status:d}=Object(C.useContainerSelector)(a,(e=>e));return{kuery:u,onKueryChange:s,onRangeFromChange:i,onRangeToChange:l,onStatusChange:n,rangeFrom:o,rangeTo:c,status:d}}var me=a(52),pe=a(50),be=a(107);const ge="alerts-search-bar-o11y",Ee=50,fe="xpack.observability.alerts.alert.table",ve="60s",ye="YYYY-MM-DD HH:mm";function he(){const e=Object(P.a)().services,{charts:t,data:{query:{timefilter:{timefilter:a}}},http:s,notifications:{toasts:n},share:{url:{locators:o}},triggersActionsUi:{alertsTableConfigurationRegistry:u,getAlertsSearchBar:d,getAlertsStateTable:m,getAlertSummaryWidget:p}}=e,{ObservabilityPageTemplate:b}=Object($.a)(),E=de(ce.a,{replace:!1}),f=Object(W.a)(),v={theme:t.theme.useChartsTheme(),baseTheme:t.theme.useChartsBaseTheme(),onBrushEnd:e=>{const{x:t}=e;if(t){const[e,a]=t;E.onRangeFromChange(new Date(e).toISOString()),E.onRangeToChange(new Date(a).toISOString())}}},[y,h]=Object(r.useState)(!1),[x,S]=Object(r.useState)({total:0,disabled:0,muted:0,error:0,snoozed:0}),[T,k]=Object(r.useState)(),O=Object(q.a)(),F=Object(r.useMemo)((()=>Object(me.b)({from:E.rangeFrom,to:E.rangeTo},O)),[E.rangeFrom,E.rangeTo,O]),w=Object(r.useMemo)((()=>Object(pe.b)({from:E.rangeFrom,to:E.rangeTo},(null==F?void 0:F.intervalString)||ve,(null==F?void 0:F.dateFormat)||ye)),[E.rangeFrom,E.rangeTo,F,T]);Object(N.useBreadcrumbs)([{text:c.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"})}]),Object(r.useEffect)((()=>{!async function(){h(!0);try{const e=await Object(B.loadRuleAggregations)({http:s,typesFilter:f,filterConsumers:ce.h}),{ruleExecutionStatus:t,ruleMutedStatus:a,ruleEnabledStatus:i,ruleSnoozedStatus:r}=e;if(t&&a&&i&&r){const e=Object.values(t).reduce(((e,t)=>e+t),0),{disabled:l}=i,{muted:s}=a,{error:n}=t,{snoozed:o}=r;S({...x,total:e,disabled:l,muted:s,error:n,snoozed:o})}h(!1)}catch(e){n.addDanger({title:c.i18n.translate("xpack.observability.alerts.ruleStats.loadError",{defaultMessage:"Unable to load rule stats"})}),h(!1)}}()}),[]);const I=s.basePath.prepend("/app/observability/alerts/rules");return l.a.createElement(te,{value:ee},l.a.createElement(b,{"data-test-subj":"alertsPageWithData",pageHeader:{pageTitle:l.a.createElement(l.a.Fragment,null,c.i18n.translate("xpack.observability.alertsTitle",{defaultMessage:"Alerts"})," "),rightSideItems:J(x,I,y,o.get(G.rulesLocatorID))}},l.a.createElement(be.a,null),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(V.b,{kibanaServices:e,categories:[z.a.observability.id]})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Y.ObservabilityAlertSearchBar,g()({},E,{appName:ge,onEsQueryChange:k,services:{timeFilterService:a,AlertsSearchBar:d,useToasts:U}}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(p,{featureIds:ce.h,filter:T,fullSize:!0,timeRange:w,chartProps:v})),l.a.createElement(i.EuiFlexItem,null,T&&l.a.createElement(m,{alertsTableConfigurationRegistry:u,configurationId:_.ob.OBSERVABILITY,id:fe,featureIds:ce.h,query:T,showAlertStatusWithFlapping:!0,pageSize:Ee})))))}function xe(){return l.a.createElement(te,{value:ee},l.a.createElement(he,null))}var Se=a(191),Te=a(176),ke=a(16),Oe=a(114),Fe=a(177);const we=e=>{const t=Object(r.useMemo)((()=>Me(e)),[e]),a=Object(r.useCallback)((e=>e.length>0),[]),{loading:i,data:l}=Object(Fe.a)({paramsForApiCall:t,initialDataState:void 0,executeApiCall:Ie,shouldExecuteApiCall:a});return[i,null!=l?l:{}]},Ie=async(e,t,a)=>{try{const i=await a.post(`${Oe.a}/find`,{body:JSON.stringify({query:{ids:{values:e}},track_total_hits:!1,size:1e4}),signal:t.signal});if(i)return je(i)}catch(e){}},je=e=>e.hits.hits.reduce(((e,{_id:t,_index:a,_source:i})=>({...e,[t]:{_id:t,_index:a,...i}})),{}),Me=e=>e.filter((e=>!Object(ke.isEmpty)(e)));var Le=a(36),Ce=a(7);function Ae({permissions:e}){const{application:{navigateToUrl:t},cases:{ui:{getCases:a}},http:{basePath:{prepend:i}}}=Object(P.a)().services,{observabilityRuleTypeRegistry:s}=Object($.a)(),[n,o]=Object(r.useState)(""),[c,u]=Object(Te.a)(n);return l.a.createElement(l.a.Fragment,null,l.a.createElement(a,{basePath:Ce.c,features:{alerts:{sync:!1,isExperimental:!1}},owner:[G.observabilityFeatureId],permissions:e,ruleDetailsNavigation:{href:e=>i(Ce.r.observability.ruleDetails(e||"")),onClick:(e,a)=>{const r=i(Ce.r.observability.ruleDetails(e||""));return null!=a&&a.preventDefault(),t(r)}},showAlertDetails:e=>{o(e)},useFetchAlertData:we}),u&&""!==n&&!1===c?l.a.createElement(r.Suspense,{fallback:null},l.a.createElement(Le.LazyAlertsFlyout,{alert:u,observabilityRuleTypeRegistry:s,onClose:()=>o("")})):null)}var Re=a(79),De=a.n(Re);const Pe=De()(i.EuiEmptyPrompt).withConfig({displayName:"EmptyPrompt",componentId:"sc-dx38w3-0"})(["align-self:center;max-width:60em;"]);Pe.displayName="EmptyPrompt";const Be=l.a.memo((({actions:e,message:t,title:a,...s})=>{const n=Object.keys(e),o=Object(r.useMemo)((()=>Object.values(e).filter((e=>e.label&&e.url)).map((({icon:e,label:t,target:a,url:r,descriptionTitle:s,description:o,onClick:c,fill:u=!0},d)=>null!=s||null!=o?l.a.createElement(i.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${n[d]}`},l.a.createElement(i.EuiCard,{title:null!=s&&s,description:null!=o&&o,footer:l.a.createElement(i.EuiButton,{href:r,onClick:c,iconType:e,target:a,fill:u,"data-test-subj":`emptyPageAction-${n[d]}`},t)})):l.a.createElement(i.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${n[d]}`},l.a.createElement(i.EuiButton,{href:r,onClick:c,iconType:e,target:a,"data-test-subj":`emptyPageAction-${n[d]}`},t))))),[e,n]);return l.a.createElement(Pe,g()({iconType:"casesApp",title:l.a.createElement("h2",null,a),body:t&&l.a.createElement("p",null,t),actions:l.a.createElement(i.EuiFlexGroup,{justifyContent:"center"},o)},s))}));Be.displayName="EmptyPageComponent";const _e=l.a.memo(Be);_e.displayName="EmptyPage";const Ne=l.a.memo((()=>{const{docLinks:e}=Object(P.a)().services,t=Object(r.useMemo)((()=>({savedObject:{icon:"documents",label:c.i18n.translate("xpack.observability.cases.caseView.goToDocumentationButton",{defaultMessage:"View documentation"}),target:"_blank",url:`${e.ELASTIC_WEBSITE_URL}guide/en/security/${e.DOC_LINK_VERSION}s`}})),[e]);return l.a.createElement(_e,{actions:t,"data-test-subj":"noFeaturePermissions",message:c.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsMessage",{defaultMessage:"To view cases, you must have privileges for the Cases feature in the Kibana space. For more information, contact your Kibana administrator."}),title:c.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsTitle",{defaultMessage:"Kibana feature privileges required"})})}));function Ve(){const{ObservabilityPageTemplate:e}=Object($.a)(),{canUseCases:t}=Object(P.a)().services.cases.helpers,a=t([G.observabilityFeatureId]);return a.read?l.a.createElement(e,{isPageDataLoaded:!0,"data-test-subj":"o11yCasesPage"},l.a.createElement(be.a,null),l.a.createElement(Ae,{permissions:a})):l.a.createElement(Ne,null)}Ne.displayName="CaseSavedObjectNoPermissions";var ze=a(59),Ge=a(83);const $e="alert",qe="ux",We="uptime",Ue="apm",He="infra_logs",Qe="infra_metrics",Ke="universal_profiling";var Xe=a(47),Je=a(46);const Ye=["apm","uptime","logs","infrastructure","alerts"],Ze=Object(r.createContext)({}),et=[Ue,We,He,Qe,qe,$e,Ke];function tt({children:e}){const{http:t}=Object(P.a)().services,[a,i]=Object(r.useState)(""),{absoluteStart:s,absoluteEnd:n}=Object(Je.a)(),[o,c]=Object(r.useState)({});Object(r.useEffect)((()=>{Object(Ge.asyncForEach)(et,(async e=>{var t,a,i,r,l;try{const o=({hasData:t,indices:a,serviceName:i})=>{c((r=>({...r,[e]:{hasData:t,...i?{serviceName:i}:{},...a?{indices:a}:{},status:N.FETCH_STATUS.SUCCESS}})))};switch(e){case qe:const c={absoluteTime:{start:s,end:n}},u=await(null===(t=Object(Xe.a)(e))||void 0===t?void 0:t.hasData(c));o({hasData:null==u?void 0:u.hasData,indices:null==u?void 0:u.indices,serviceName:null==u?void 0:u.serviceName});break;case We:const d=await(null===(a=Object(Xe.a)(e))||void 0===a?void 0:a.hasData());o({hasData:null==d?void 0:d.hasData,indices:null==d?void 0:d.indices});break;case Ue:const m=await(null===(i=Object(Xe.a)(e))||void 0===i?void 0:i.hasData());o({hasData:null==m?void 0:m.hasData,indices:null==m?void 0:m.indices});break;case He:const p=await(null===(r=Object(Xe.a)(e))||void 0===r?void 0:r.hasData());o({hasData:null==p?void 0:p.hasData,indices:null==p?void 0:p.indices});break;case Qe:const b=await(null===(l=Object(Xe.a)(e))||void 0===l?void 0:l.hasData());o({hasData:null==b?void 0:b.hasData,indices:null==b?void 0:b.indices});break;case Ke:o({hasData:!1})}}catch(t){c((t=>({...t,[e]:{hasData:void 0,status:N.FETCH_STATUS.FAILURE}})))}}))}),[]),Object(r.useEffect)((()=>{!async function(){try{const e=await async function({http:e}){try{const{data:t=[]}=await e.get("/api/alerts/_find",{query:{page:1,per_page:20}})||{};return t.filter((({consumer:e})=>Ye.includes(e)))}catch(e){throw console.error("Error while fetching alerts",e),e}}({http:t});c((t=>({...t,[$e]:{hasData:e.length>0,status:N.FETCH_STATUS.SUCCESS}})))}catch(e){c((e=>({...e,[$e]:{hasData:void 0,status:N.FETCH_STATUS.FAILURE}})))}}()}),[a,t]);const u=et.every((e=>{var t;const a=null===(t=o[e])||void 0===t?void 0:t.status;return void 0!==a&&a!==N.FETCH_STATUS.LOADING})),d=Object.keys(o).some((e=>{var t;return!0===(null===(t=o[e])||void 0===t?void 0:t.hasData)}));return l.a.createElement(Ze.Provider,{value:{hasDataMap:o,hasAnyData:Object(ke.isEmpty)(o)?void 0:d,isAllRequestsComplete:u,forceUpdate:a,onRefreshTimeRange:()=>{i(Object(ke.uniqueId)())}},children:e})}function at(){return Object(r.useContext)(Ze)}function it(){const{hasDataMap:e,isAllRequestsComplete:t}=at(),{application:{navigateToUrl:a,navigateToApp:i},http:{basePath:s},share:{url:n}}=Object(P.a)().services;return Object(r.useEffect)((()=>{if(t){const{apm:t,infra_logs:i}=e,r=null==t?void 0:t.hasData;if(null==i?void 0:i.hasData){const e=n.locators.get(ze.a);null==e||e.navigate({})}else a(r?s.prepend("/app/apm/services"):s.prepend("/app/observabilityOnboarding"))}}),[s,e,t,i,a,n.locators]),l.a.createElement(l.a.Fragment,null)}function rt(){const{ObservabilityPageTemplate:e}=Object($.a)();return l.a.createElement(e,{pageSectionProps:{alignment:"center"},showSolutionNav:!1},l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiLoadingSpinner,{size:"xl"})),l.a.createElement(i.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},l.a.createElement(i.EuiText,null,lt))))}const lt=c.i18n.translate("xpack.observability.overview.loadingObservability",{defaultMessage:"Loading Observability"});var st=a(25),nt=a(144),ot=a(43);function ct({id:e,title:t,modules:a,addLink:s,addTitle:n,goToAppTitle:o,goToAppLink:c}){const{application:u}=Object(P.a)().services,d=Object(N.useUiTracker)({app:"observability-overview"}),m=Object(r.useCallback)((()=>{d({metric:`guided_setup_add_integrations_${e}`}),u.navigateToUrl(s)}),[s,u,d,e]);return l.a.createElement(i.EuiPanel,{color:"plain",hasBorder:!0},l.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement("div",null,l.a.createElement(i.EuiIcon,{type:"checkInCircleFilled",color:"success",className:"eui-displayInline eui-alignMiddle",style:{marginRight:8}}),l.a.createElement(i.EuiTitle,{size:"xs",className:"eui-displayInline eui-alignMiddle"},l.a.createElement("h2",null,t)))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yCompletedStatusBoxButton",size:"s",iconType:"plusInCircle",flush:"right",onClick:m},n))),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.status.dataAvailable",defaultMessage:"Data is available."}))),l.a.createElement(i.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",style:{marginTop:8},role:"list"},a.map((e=>l.a.createElement(i.EuiFlexItem,{role:"listitem",key:e.name},l.a.createElement(i.EuiBadge,{color:e.hasData?"success":"hollow",iconType:"check",iconSide:"left"},e.name))))),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButton,{"data-test-subj":"o11yCompletedStatusBoxButton",color:"primary",href:c},o))))}function ut({id:e,title:t,description:a,learnMoreLink:s,addTitle:n,addLink:o}){const{application:c}=Object(P.a)().services,u=Object(N.useUiTracker)({app:"observability-overview"}),d=Object(r.useCallback)((()=>{u({metric:`guided_setup_add_data_${e}`}),c.navigateToUrl(o)}),[e,u,c,o]);return l.a.createElement(i.EuiPanel,{color:"warning",hasBorder:!0},l.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement("div",null,l.a.createElement(i.EuiIcon,{type:"minusInCircleFilled",color:"warning",className:"eui-displayInline eui-alignMiddle",style:{marginRight:8}}),l.a.createElement(i.EuiTitle,{size:"xs",className:"eui-displayInline eui-alignMiddle"},l.a.createElement("h2",null,t))))),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{size:"s"},a))),l.a.createElement(i.EuiFlexGroup,{alignItems:"center"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiButton,{"data-test-subj":"o11yEmptyStatusBoxButton",color:"primary",onClick:d,fill:!0},n)),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiLink,{"data-test-subj":"o11yEmptyStatusBoxLearnMoreLink",color:"primary",href:s,target:"_blank"},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.status.learnMoreButton",defaultMessage:"Learn more"})))))}const dt=(e,t)=>e.weight-t.weight;function mt({boxes:e}){const t=e.filter((e=>e.hasData)).sort(dt),a=e.filter((e=>!e.hasData)).sort(dt);return l.a.createElement(i.EuiFlexGroup,{direction:"column"},a.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.status.recommendedSteps",defaultMessage:"Recommended next steps"})))),a.map((e=>l.a.createElement(i.EuiFlexItem,{key:e.id,"data-test-id":`box-${e.id}`},l.a.createElement(ut,e))))),a.length>0&&t.length>0&&l.a.createElement(i.EuiHorizontalRule,null),t.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.status.dataAvailableTitle",defaultMessage:"Data available for"})))),t.map((e=>l.a.createElement(i.EuiFlexItem,{key:e.id,"data-test-subj":`box-${e.id}`},l.a.createElement(ct,e))))))}const pt=(e,t)=>[{id:"infra_logs",title:c.i18n.translate("xpack.observability.statusVisualization.logs.title",{defaultMessage:"Logs"}),description:c.i18n.translate("xpack.observability.statusVisualization.logs.description",{defaultMessage:"Fast, easy, and scalable centralized log monitoring with out-of-the-box support for common data sources."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.logs.link",{defaultMessage:"Add integrations"}),addLink:e.basePath.prepend("/app/integrations/browse?q=logs"),learnMoreLink:t.links.observability.monitorLogs,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.logs.goToAppTitle",{defaultMessage:"Show log stream"}),goToAppLink:e.basePath.prepend("/app/logs/stream"),weight:1},{id:"apm",title:c.i18n.translate("xpack.observability.statusVisualization.apm.title",{defaultMessage:"APM"}),description:c.i18n.translate("xpack.observability.statusVisualization.apm.description",{defaultMessage:"Get deeper visibility into your applications with extensive support for popular languages, OpenTelemetry, and distributed tracing."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.apm.link",{defaultMessage:"Add data"}),addLink:e.basePath.prepend("/app/apm/tutorial"),learnMoreLink:t.links.apm.overview,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.apm.goToAppTitle",{defaultMessage:"Show services inventory"}),goToAppLink:e.basePath.prepend("/app/apm/services"),weight:3},{id:"infra_metrics",title:c.i18n.translate("xpack.observability.statusVisualization.metrics.title",{defaultMessage:"Infrastructure"}),description:c.i18n.translate("xpack.observability.statusVisualization.metrics.description",{defaultMessage:"Stream, visualize, and analyze your infrastructure metrics."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.metrics.link",{defaultMessage:"Add integrations"}),addLink:e.basePath.prepend("/app/integrations/browse?q=metrics"),learnMoreLink:t.links.observability.analyzeMetrics,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.metrics.goToAppTitle",{defaultMessage:"Show inventory"}),goToAppLink:e.basePath.prepend("/app/metrics/inventory"),weight:2},{id:"uptime",title:c.i18n.translate("xpack.observability.statusVisualization.uptime.title",{defaultMessage:"Uptime"}),description:c.i18n.translate("xpack.observability.statusVisualization.uptime.description",{defaultMessage:"Proactively monitor the availability and functionality of user journeys."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.uptime.link",{defaultMessage:"Add monitors"}),addLink:e.basePath.prepend("/app/home#/tutorial/uptimeMonitors"),learnMoreLink:t.links.observability.monitorUptimeSynthetics,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.uptime.goToAppTitle",{defaultMessage:"Show monitors "}),goToAppLink:e.basePath.prepend("/app/uptime"),weight:4},{id:"ux",title:c.i18n.translate("xpack.observability.statusVisualization.ux.title",{defaultMessage:"User Experience"}),description:c.i18n.translate("xpack.observability.statusVisualization.ux.description",{defaultMessage:"Collect, measure, and analyze performance data that reflects real-world user experiences."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.ux.link",{defaultMessage:"Add data"}),addLink:e.basePath.prepend("/app/apm/tutorial"),learnMoreLink:t.links.observability.userExperience,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.ux.goToAppTitle",{defaultMessage:"Show dashboard"}),goToAppLink:e.basePath.prepend("/app/ux"),weight:5},{id:"alert",title:c.i18n.translate("xpack.observability.statusVisualization.alert.title",{defaultMessage:"Alerting"}),description:c.i18n.translate("xpack.observability.statusVisualization.alert.description",{defaultMessage:"Detect complex conditions in Observability and trigger actions when those conditions are met."}),addTitle:c.i18n.translate("xpack.observability.statusVisualization.alert.link",{defaultMessage:"Create rules"}),addLink:e.basePath.prepend(Ce.r.observability.rules),learnMoreLink:t.links.observability.createAlerts,goToAppTitle:c.i18n.translate("xpack.observability.statusVisualization.alert.goToAppTitle",{defaultMessage:"Show alerts"}),goToAppLink:e.basePath.prepend("/app/observability/alerts"),weight:6}];function bt(){const{http:e,docLinks:t}=Object(P.a)().services,{hasDataMap:a}=at(),i=pt(e,t).map((e=>{var t,i;return{...e,hasData:null!==(t=null===(i=a[e.id])||void 0===i?void 0:i.hasData)&&void 0!==t&&t,modules:[]}}));return l.a.createElement(mt,{boxes:i})}function gt({onClose:e}){return l.a.createElement(i.EuiFlyout,{ownFocus:!0,"aria-labelledby":"statusVisualizationFlyoutTitle",className:"oblt__flyout",size:"s",onClose:e},l.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0},l.a.createElement(i.EuiTitle,{size:"m"},l.a.createElement("h2",{id:"statusVisualizationFlyoutTitle","data-test-subj":"statusVisualizationFlyoutTitle"},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.statusVisualizationFlyoutTitle",defaultMessage:"Data assistant"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiText,{size:"s"},l.a.createElement("p",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.statusVisualizationFlyoutDescription",defaultMessage:"Track your progress towards adding observability integrations and features."})))),l.a.createElement(i.EuiFlyoutBody,null,l.a.createElement(bt,null)))}var Et=a(80),ft=a(152),vt=a(24),yt=a.n(vt),ht=a(6),xt=a.n(ht);function St(){return l.a.createElement(i.EuiFlexGroup,{justifyContent:"center",alignItems:"center"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiText,{color:"subdued"},c.i18n.translate("xpack.observability.section.errorPanel",{defaultMessage:"An error happened when trying to fetch data. Please try again"}))))}var Tt=a(178);function kt({title:e,appLink:t,children:a,hasError:r,initialIsOpen:s=!0,showExperimentalBadge:n=!1}){const{http:o}=Object(P.a)().services;return l.a.createElement(i.EuiPanel,{color:"subdued"},l.a.createElement(i.EuiAccordion,{initialIsOpen:s,id:e,buttonContentClassName:"accordion-button","data-test-subj":`accordion-${e}`,buttonContent:l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h5",null,e))),n&&l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Tt.a,null)))),extraAction:(null==t?void 0:t.href)&&l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11ySectionContainerButton",iconType:"sortRight",size:"xs",color:"text",href:o.basePath.prepend(t.href)},t.label)},l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiPanel,{hasBorder:!0},r?l.a.createElement(St,null):l.a.createElement(l.a.Fragment,null,a)))))}const Ot=120;function Ft({isInitialLoad:e,children:t,iconSize:a="l",height:r=Ot}){return e?l.a.createElement("div",{"data-test-subj":"loading",style:{height:r,display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement(i.EuiLoadingChart,{size:a})):l.a.createElement(Et.Chart,{size:{height:r}},t)}const wt=De()(i.EuiStat).withConfig({displayName:"Stat",componentId:"sc-1iozdyr-0"})([".euiStat__title{color:",";}"],(e=>e.color)),It="--";function jt(e){const{description:t=It,title:a=It,...i}=e;return l.a.createElement(wt,g()({description:t,title:a,titleSize:"s"},i))}var Mt=a(39);const Lt=({x:e,history:t})=>{if(e){const a=e[0],i=e[1],r=Object(Mt.b)(t.location.search),l={rangeFrom:new Date(a).toISOString(),rangeTo:new Date(i).toISOString()};t.push({...t.location,search:Object(Mt.a)({...r,...l})})}};function Ct({bucketSize:e}){var t;const a=Object(r.useContext)(Re.ThemeContext),s=Object(N.useChartTheme)(),n=Object(R.useHistory)(),{forceUpdate:o,hasDataMap:u}=at(),{relativeStart:d,relativeEnd:m,absoluteStart:p,absoluteEnd:b,lastUpdated:g}=Object(Je.a)(),{data:E,status:f}=Object(N.useFetcher)((()=>{var t;if(e&&p&&b)return null===(t=Object(Xe.a)("apm"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:p,end:b},relativeTime:{start:d,end:m},...e})}),[e,d,m,p,b,o,g]);if(null===(t=u.apm)||void 0===t||!t.hasData)return null;const{appLink:v,stats:y,series:h}=E||{},x=xt.a.utc(p).valueOf(),S=xt.a.utc(b).valueOf(),T=null!=e&&e.dateFormat?Object(ft.timeFormatter)(null==e?void 0:e.dateFormat):Object(Et.niceTimeFormatter)([x,S]),k=f===N.FETCH_STATUS.LOADING,O=a.eui.euiColorVis1;return l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.apm.title",{defaultMessage:"Services"}),appLink:{href:v,label:c.i18n.translate("xpack.observability.overview.apm.appLink",{defaultMessage:"Show service inventory"})},hasError:f===N.FETCH_STATUS.FAILURE},l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{title:yt()(null==y?void 0:y.services.value).format("0a"),description:c.i18n.translate("xpack.observability.overview.apm.services",{defaultMessage:"Services"}),isLoading:k})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{title:`${F=null==y?void 0:y.transactions.value,F&&0!==F?F<=.1?"< 0.1":F>1e3?yt()(F).format("0.00a"):yt()(F).format("0,0.0"):"0"} tpm`,description:l.a.createElement(i.EuiToolTip,{content:c.i18n.translate("xpack.observability.overview.apm.throughputTip",{defaultMessage:'Values are calculated for transactions with type "Request" or "page-load". If neither are available, values reflect the top transaction type.'})},l.a.createElement(l.a.Fragment,null,c.i18n.translate("xpack.observability.overview.apm.throughput",{defaultMessage:"Throughput"})," ",l.a.createElement(i.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignCenter"}))),isLoading:k,color:O}))),l.a.createElement(Ft,{isInitialLoad:k&&!E},l.a.createElement(Et.Settings,{onBrushEnd:e=>Lt({x:e.x,history:n}),theme:s,showLegend:!1,xDomain:{min:x,max:S},locale:c.i18n.getLocale()}),(null==h?void 0:h.transactions.coordinates)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Et.BarSeries,{id:"transactions",name:"Transactions",data:null==h?void 0:h.transactions.coordinates,xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],color:O}),l.a.createElement(Et.Axis,{id:"y-axis",position:Et.Position.Left,gridLine:{visible:!0},tickFormat:e=>`${function(e){return yt()(e).format("0.00a")}(e)} tpm`}),l.a.createElement(Et.Axis,{id:"x-axis",position:Et.Position.Bottom,tickFormat:T}))));var F}function At(e){const{value:t,type:a}=e;switch(a){case"bytesPerSecond":return`${yt()(t).format("0.0b")}/s`;case"number":return yt()(t).format("0a");case"percent":return yt()(t).format("0.0%")}}function Rt({bucketSize:e}){var t;const a=Object(R.useHistory)(),s=Object(N.useChartTheme)(),{forceUpdate:n,hasDataMap:o}=at(),{relativeStart:u,relativeEnd:d,absoluteStart:m,absoluteEnd:p,lastUpdated:b}=Object(Je.a)(),{data:g,status:E}=Object(N.useFetcher)((()=>{var t;if(e&&m&&p)return null===(t=Object(Xe.a)("infra_logs"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:m,end:p},relativeTime:{start:u,end:d},...e})}),[e,u,d,m,p,n,b]);if(null===(t=o.infra_logs)||void 0===t||!t.hasData)return null;const f=xt.a.utc(m).valueOf(),v=xt.a.utc(p).valueOf(),y=null!=e&&e.dateFormat?Object(ft.timeFormatter)(null==e?void 0:e.dateFormat):Object(Et.niceTimeFormatter)([f,v]),{appLink:h,stats:x,series:S}=g||{},T=function(e){if(!e)return{};const t=Object(i.euiPaletteColorBlind)({rotations:Math.ceil(Object.keys(e).length/10)});return Object.keys(e).reduce(((e,a,i)=>(e[a]=t[i],e)),{})}(S),k=E===N.FETCH_STATUS.LOADING;return l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.logs.title",{defaultMessage:"Log Events"}),appLink:{href:h,label:c.i18n.translate("xpack.observability.overview.logs.appLink",{defaultMessage:"Show log stream"})},hasError:E===N.FETCH_STATUS.FAILURE},l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("h4",null,c.i18n.translate("xpack.observability.overview.logs.subtitle",{defaultMessage:"Logs rate per minute"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,null,!x||Object(ke.isEmpty)(x)?l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{isLoading:k})):Object.keys(x).map((e=>{const t=x[e];return l.a.createElement(i.EuiFlexItem,{grow:!1,key:e},l.a.createElement(jt,{title:At(t),description:t.label,isLoading:k,color:T[e]}))}))),l.a.createElement(Ft,{isInitialLoad:k&&!g},l.a.createElement(Et.Settings,{onBrushEnd:e=>Lt({x:e.x,history:a}),theme:s,showLegend:!0,legendPosition:Et.Position.Right,xDomain:{min:f,max:v},showLegendExtra:!0,locale:c.i18n.getLocale()}),S&&Object.keys(S).map((e=>{const t=S[e],a=t.coordinates.map((e=>({...e,g:t.label})));return l.a.createElement(r.Fragment,{key:e},l.a.createElement(Et.BarSeries,{id:e,xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],stackAccessors:["x"],splitSeriesAccessors:["g"],data:a,color:T[e]}),l.a.createElement(Et.Axis,{id:"x-axis",position:Et.Position.Bottom,showOverlappingTicks:!1,showOverlappingLabels:!1,tickFormat:y}),l.a.createElement(Et.Axis,{id:"y-axis",gridLine:{visible:!0},position:Et.Position.Left,tickFormat:e=>yt()(e).format("0a")}))}))))}function Dt({name:e,id:t,timerange:a}){const i=`../../app/metrics/link-to/host-detail/${t}?from=${a.from}&to=${a.to}`;return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:i},e))}const Pt=3600,Bt=86400,_t=e=>e<60?`${Math.floor(e)}s`:e<Pt?`${Math.floor(e/60)}m ${Math.floor(e%60)}s`:e<Bt?`${Math.floor(e/Pt)}h ${Math.floor(e%Pt/60)}m`:`${Math.floor(e/Bt)}d ${Math.floor(e%Bt/Pt)}h`;var Nt=a(93);function Vt({id:e,formatter:t,value:a,timeseries:s,color:n}){var o,u;const d=Object(r.useContext)(Re.ThemeContext),m=d&&d.darkMode||!1,p=[Nt.EUI_SPARKLINE_THEME_PARTIAL,m?Nt.EUI_CHARTS_THEME_DARK.theme:Nt.EUI_CHARTS_THEME_LIGHT.theme],b=null!==(o=null===(u=p[1].colors)||void 0===u?void 0:u.vizColors)&&void 0!==o?o:[];return a?l.a.createElement(i.EuiFlexGroup,{gutterSize:"m",responsive:!1},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Et.Chart,{size:{height:18,width:40}},l.a.createElement(Et.Tooltip,{type:Et.TooltipType.None}),l.a.createElement(Et.Settings,{theme:p,showLegend:!1,locale:c.i18n.getLocale()}),l.a.createElement(Et.AreaSeries,{id:e,data:s,xAccessor:"timestamp",yAccessors:[e],color:b[n]||"#006BB4"}))),l.a.createElement(i.EuiFlexItem,{grow:!1,style:{whiteSpace:"nowrap"}},t(a))):l.a.createElement(i.EuiTextColor,{color:"subdued"},l.a.createElement(i.EuiIcon,{type:"visLine"})," ",l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.metricWithSparkline.nATextColorLabel",defaultMessage:"N/A"}))}const zt=7,Gt=1,$t=0,qt=3,Wt=e=>null===e?"":yt()(e).format("0[.0]%"),Ut=e=>null===e?"":yt()(e).format("0[.0]"),Ht=e=>null===e?"":yt()(e).format("0b")+"/s";function Qt({bucketSize:e}){var t,a;const{forceUpdate:s,hasDataMap:n}=at(),{relativeStart:o,relativeEnd:u,absoluteStart:d,absoluteEnd:m,lastUpdated:p}=Object(Je.a)(),[b,g]=Object(r.useState)("asc"),[E,f]=Object(r.useState)("uptime"),[v,y]=Object(r.useState)(null),{data:h,status:x}=Object(N.useFetcher)((()=>{var t;if(e&&d&&m)return null===(t=Object(Xe.a)("infra_metrics"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:d,end:m},relativeTime:{start:o,end:u},...e})}),[e,o,u,d,m,s,p]),S=Object(r.useCallback)((({sort:e})=>{if(e){const{field:t,direction:a}=e;f(t),g(a),h&&(async()=>{const e=await h.sort(t,a);y(e||null)})()}}),[h,f,g]);if(null===(t=n.infra_metrics)||void 0===t||!t.hasData)return null;const T=x===N.FETCH_STATUS.LOADING,k=T&&!h,O=[{field:"uptime",name:c.i18n.translate("xpack.observability.overview.metrics.colunms.uptime",{defaultMessage:"Uptime"}),sortable:!0,width:"80px",render:e=>null==e?"N/A":_t(e/1e3)},{field:"name",name:c.i18n.translate("xpack.observability.overview.metrics.colunms.hostname",{defaultMessage:"Hostname"}),sortable:!0,truncateText:!0,isExpander:!0,textOnly:!0,render:(e,t)=>l.a.createElement(Dt,{id:t.id,name:e,timerange:{from:d,to:m}})},{field:"cpu",name:c.i18n.translate("xpack.observability.overview.metrics.colunms.cpu",{defaultMessage:"CPU %"}),sortable:!0,render:(e,t)=>l.a.createElement(Vt,{id:"cpu",value:e,formatter:Wt,timeseries:t.timeseries,color:zt})},{field:"load",name:c.i18n.translate("xpack.observability.overview.metrics.colunms.load15",{defaultMessage:"Load 15"}),sortable:!0,render:(e,t)=>l.a.createElement(Vt,{id:"load",value:e,formatter:Ut,timeseries:t.timeseries,color:Gt})},{field:"rx",name:"RX",sortable:!0,render:(e,t)=>l.a.createElement(Vt,{id:"rx",value:e,formatter:Ht,timeseries:t.timeseries,color:$t})},{field:"tx",name:"TX",sortable:!0,render:(e,t)=>l.a.createElement(Vt,{id:"tx",value:e,formatter:Ht,timeseries:t.timeseries,color:qt})}],F={sort:{field:E,direction:b}},w=v||h,{appLink:I}=h||{};return l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.metrics.title",{defaultMessage:"Hosts"}),appLink:{href:I,label:c.i18n.translate("xpack.observability.overview.metrics.appLink",{defaultMessage:"Show inventory"})},hasError:x===N.FETCH_STATUS.FAILURE},k?l.a.createElement("div",{"data-test-subj":"loading",style:{height:240,display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement(i.EuiLoadingChart,{size:"l"})):l.a.createElement(i.EuiBasicTable,{onChange:S,sorting:F,items:null!==(a=null==w?void 0:w.series)&&void 0!==a?a:[],columns:O,loading:T}))}function Kt({bucketSize:e}){var t;const a=Object(r.useContext)(Re.ThemeContext),s=Object(N.useChartTheme)(),n=Object(R.useHistory)(),{forceUpdate:o,hasDataMap:u}=at(),{relativeStart:d,relativeEnd:m,absoluteStart:p,absoluteEnd:b,lastUpdated:g}=Object(Je.a)(),E=Object(N.useTimeZone)(),{data:f,status:v}=Object(N.useFetcher)((()=>{var t;if(e&&p&&b)return null===(t=Object(Xe.a)("uptime"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:p,end:b},relativeTime:{start:d,end:m},timeZone:E,...e})}),[e,d,m,p,b,o,g,E]);if(null===(t=u.uptime)||void 0===t||!t.hasData)return null;const y=xt.a.utc(p).valueOf(),h=xt.a.utc(b).valueOf(),x=null!=e&&e.dateFormat?Object(ft.timeFormatter)(null==e?void 0:e.dateFormat):Object(Et.niceTimeFormatter)([y,h]),S=v===N.FETCH_STATUS.LOADING,{appLink:T,stats:k,series:O}=f||{},F=a.eui.euiColorVis2,w=a.eui.euiColorMediumShade;return l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.uptime.title",{defaultMessage:"Monitors"}),appLink:{href:T,label:c.i18n.translate("xpack.observability.overview.uptime.appLink",{defaultMessage:"Show monitors"})},hasError:v===N.FETCH_STATUS.FAILURE},l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{title:yt()(null==k?void 0:k.monitors.value).format("0a"),description:c.i18n.translate("xpack.observability.overview.uptime.monitors",{defaultMessage:"Monitors"}),isLoading:S})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{title:yt()(null==k?void 0:k.up.value).format("0a"),description:c.i18n.translate("xpack.observability.overview.uptime.up",{defaultMessage:"Up"}),isLoading:S,color:w})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(jt,{title:yt()(null==k?void 0:k.down.value).format("0a"),description:c.i18n.translate("xpack.observability.overview.uptime.down",{defaultMessage:"Down"}),isLoading:S,color:F}))),l.a.createElement(Ft,{isInitialLoad:S&&!f},l.a.createElement(Et.Settings,{onBrushEnd:e=>Lt({x:e.x,history:n}),theme:s,showLegend:!1,legendPosition:Et.Position.Right,xDomain:{min:y,max:h},locale:c.i18n.getLocale()}),l.a.createElement(Xt,{id:"down",label:c.i18n.translate("xpack.observability.overview.uptime.chart.down",{defaultMessage:"Down"}),series:null==O?void 0:O.down,tickFormatter:x,color:F}),l.a.createElement(Xt,{id:"up",label:c.i18n.translate("xpack.observability.overview.uptime.chart.up",{defaultMessage:"Up"}),series:null==O?void 0:O.up,tickFormatter:x,color:w})))}function Xt({id:e,label:t,series:a,color:i,tickFormatter:r}){if(!a)return null;const s=a.coordinates.map((e=>({...e,g:t})));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Et.BarSeries,{id:e,xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],color:i,stackAccessors:["x"],splitSeriesAccessors:["g"],data:s}),l.a.createElement(Et.Axis,{id:"x-axis",position:Et.Position.Bottom,showOverlappingTicks:!1,showOverlappingLabels:!1,tickFormat:r}),l.a.createElement(Et.Axis,{id:"y-axis",gridLine:{visible:!0},position:Et.Position.Left,tickFormat:e=>yt()(e).format("0a")}))}var Jt=a(98),Yt=a(190);function Zt({bucketSize:e}){const{forceUpdate:t,hasDataMap:a}=at(),{services:i}=Object(p.useKibana)(),{ExploratoryViewEmbeddable:r}=i.exploratoryView,{relativeStart:s,relativeEnd:n,absoluteStart:o,absoluteEnd:u,lastUpdated:d}=Object(Je.a)(),m=a.ux,b=null==m?void 0:m.serviceName,g=[{name:ea,time:{from:s,to:n},reportDefinitions:{[Jt.SERVICE_NAME]:["ALL_VALUES"]},breakdown:Jt.SERVICE_NAME,dataType:qe,selectedMetricField:Jt.TRANSACTION_DURATION,showPercentileAnnotations:!1}],{data:E,status:f}=Object(N.useFetcher)((()=>{var t;if(b&&e&&o&&u)return null===(t=Object(Xe.a)("ux"))||void 0===t?void 0:t.fetchData({absoluteTime:{start:o,end:u},relativeTime:{start:s,end:n},serviceName:b,...e})}),[e,s,n,o,u,t,b,d]);if(null==m||!m.hasData)return null;const v=f===N.FETCH_STATUS.LOADING,{appLink:y,coreWebVitals:h}=E||{};return l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.ux.title",{defaultMessage:"User Experience"}),appLink:{href:y,label:c.i18n.translate("xpack.observability.overview.ux.appLink",{defaultMessage:"Show dashboard"})},hasError:f===N.FETCH_STATUS.FAILURE},l.a.createElement("div",{style:{height:320}},l.a.createElement(r,{attributes:g,reportType:"data-distribution",title:ea,withActions:!1})),l.a.createElement(Yt.default,{data:h,loading:v,displayServiceName:!0,serviceName:b}))}const ea=c.i18n.translate("xpack.observability.overview.ux.pageLoadDistribution.title",{defaultMessage:"Page load distribution"});function ta({bucketSize:e}){return l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Rt,{bucketSize:e})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Qt,{bucketSize:e})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Ct,{bucketSize:e})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Kt,{bucketSize:e})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Zt,{bucketSize:e}))))}var aa=a(57);function ia({showTour:e=!1,onGuidedSetupClick:t,onTimeRangeRefresh:a,onTourDismiss:s}){const n=Object(r.useRef)(),{relativeStart:o,relativeEnd:u,refreshInterval:d,refreshPaused:m}=Object(Je.a)(),{endTour:p,isTourVisible:b}=Object(N.useObservabilityTourContext)();return l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s",justifyContent:"flexEnd"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(aa.a,{rangeFrom:o,rangeTo:u,refreshInterval:d,refreshPaused:m,width:"auto",onTimeRangeRefresh:a})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiButton,{buttonRef:n,color:"text","data-test-subj":"guidedSetupButton",id:"guidedSetupButton",iconType:"wrench",onClick:()=>{b&&p(),t()}},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.guidedSetupButton",defaultMessage:"Data assistant"})),e?l.a.createElement(i.EuiTourStep,{anchor:()=>n.current,step:1,stepsTotal:1,isStepOpen:!0,maxWidth:400,onFinish:s,title:c.i18n.translate("xpack.observability.overview.guidedSetupTourTitle",{defaultMessage:"Data assistant is always available"}),content:l.a.createElement(i.EuiText,{size:"s"},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.guidedSetupTourContent",defaultMessage:"If you're ever in doubt you can always access the data assistant and view your next steps by clicking here."})),footerAction:l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yHeaderActionsDismissButton",color:"text",flush:"right",size:"xs",onClick:s},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.guidedSetupTourDismissButton",defaultMessage:"Dismiss"}))}):null))}var ra=a(208),la=a.n(ra);const sa=e=>{var t,a;return null!==(t=null===(a=la()(e))||void 0===a?void 0:a.version)&&void 0!==t?t:e};function na({items:e}){return l.a.createElement(i.EuiErrorBoundary,null,l.a.createElement(i.EuiFlexGrid,{direction:"row",gutterSize:"s",alignItems:"start"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h4",null,c.i18n.translate("xpack.observability.news.title",{defaultMessage:"What's new"})))),e.map(((e,t)=>l.a.createElement(i.EuiFlexItem,{key:t,grow:!1},l.a.createElement(ca,{item:e}))))))}a(212);const oa=(e,t)=>Object(ke.truncate)(e,{length:t});function ca({item:e}){var t;const a=Object(r.useContext)(Re.ThemeContext);return l.a.createElement(i.EuiPanel,{hasBorder:!0},l.a.createElement(i.EuiFlexGrid,{direction:"row",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("h4",null,e.title.en))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{size:"s",color:"subdued"},oa(e.description.en,128))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{size:"s"},l.a.createElement(i.EuiLink,{"data-test-subj":"o11yNewsItemReadFullStoryLink",href:e.link_url.en,target:"_blank",external:!0},c.i18n.translate("xpack.observability.news.readFullStory",{defaultMessage:"Read full story"})))))),(null===(t=e.image_url)||void 0===t?void 0:t.en)&&l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement("img",{"data-test-subj":"newsImage",style:{border:a.eui.euiBorderThin},width:48,height:48,alt:e.title.en,src:e.image_url.en,className:"obsNewsFeed__itemImg"}))))))}const ua="DISMISS_OBSERVABILITY_ONBOARDING";function da(){const{application:e}=Object(p.useKibana)().services,t=Object(N.useUiTracker)({app:"observability-overview"}),{isObservabilityOnboardingDismissed:a,dismissObservabilityOnboarding:s}=function(){const e=window.localStorage.getItem(ua),[t,a]=Object(r.useState)(JSON.parse(e||"false"));return{isObservabilityOnboardingDismissed:t,dismissObservabilityOnboarding:Object(r.useCallback)((()=>{window.localStorage.setItem(ua,"true"),a(!0)}),[])}}(),n=Object(r.useCallback)((()=>{s(),t({metric:"observability_onboarding_dismiss"})}),[s,t]);return a?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiPanel,{color:"primary","data-test-subj":"observability-onboarding-callout"},l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("h2",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.observabilityOnboarding",defaultMessage:"Collect and analyze logs in observability"}))),l.a.createElement(i.EuiText,{size:"xs",color:"subdued"},l.a.createElement("p",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.observabilityOnboarding.description",defaultMessage:"Onboard your data in up to 5 minutes to start analysing it straight away."})))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yObservabilityOnboardingDismissButton",size:"s",onClick:n},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.observabilityOnboarding.dismiss",defaultMessage:"Dismiss"}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButton,{"data-test-subj":"o11yObservabilityOnboardingGetStartedButton",size:"s",onClick:()=>{t({metric:"observability_onboarding_get_started"}),null==e||e.navigateToApp("observabilityOnboarding")}},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.overview.observabilityOnboarding.getStarted",defaultMessage:"Get started"}))))))),l.a.createElement(i.EuiSpacer,null))}function ma(){return l.a.createElement(i.EuiFlexGrid,{direction:"row"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h4",null,c.i18n.translate("xpack.observability.resources.title",{defaultMessage:"Resources"})))),l.a.createElement(i.EuiListGroup,{flush:!0,listItems:pa,"data-test-subj":"listGroup",size:"s"}))}const pa=[{iconType:"documents",label:c.i18n.translate("xpack.observability.resources.documentation",{defaultMessage:"Documentation"}),href:"https://ela.st/observability-documentation"},{iconType:"editorComment",label:c.i18n.translate("xpack.observability.resources.forum",{defaultMessage:"Discuss Forum"}),href:"https://ela.st/observability-discuss"},{iconType:"play",label:c.i18n.translate("xpack.observability.resources.quick_start",{defaultMessage:"Quick Start Videos"}),href:"https://ela.st/observability-quick-starts"},{iconType:"training",label:c.i18n.translate("xpack.observability.resources.training",{defaultMessage:"Free Observability Course"}),href:"https://ela.st/observability-training"}];function ba({section:e}){return l.a.createElement(i.EuiEmptyPrompt,{style:{maxWidth:"none"},title:l.a.createElement("h2",null,e.title),titleSize:"xs",body:l.a.createElement(i.EuiText,{color:"default"},e.description),actions:l.a.createElement(l.a.Fragment,null,e.linkTitle&&l.a.createElement(i.EuiButton,{size:"s",color:"primary",fill:!0,href:e.href,target:e.target,"data-test-subj":`empty-${e.id}`},e.linkTitle))})}function ga(){const{http:e}=Object(P.a)().services,t=Object(r.useContext)(Re.ThemeContext),{hasDataMap:a}=at(),s=Ea({http:e}).filter((({id:e})=>{const t=a[e];return!(!t||t.status!==N.FETCH_STATUS.FAILURE&&t.hasData)}));return l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGrid,{columns:s.length>2?2:1,gutterSize:"s"},s.map((e=>l.a.createElement(i.EuiFlexItem,{key:e.id,style:{border:`${t.eui.euiBorderEditable}`,borderRadius:`${t.eui.euiBorderRadius}`}},l.a.createElement(ba,{section:e}))))))}const Ea=({http:e})=>[{id:"infra_logs",title:c.i18n.translate("xpack.observability.emptySection.apps.logs.title",{defaultMessage:"Logs"}),icon:"logoLogging",description:c.i18n.translate("xpack.observability.emptySection.apps.logs.description",{defaultMessage:"Fast, easy, and scalable centralized log monitoring with out-of-the-box support for common data sources."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.logs.link",{defaultMessage:"Install Filebeat"}),href:e.basePath.prepend("/app/home#/tutorial_directory/logging")},{id:"apm",title:c.i18n.translate("xpack.observability.emptySection.apps.apm.title",{defaultMessage:"APM"}),icon:"logoObservability",description:c.i18n.translate("xpack.observability.emptySection.apps.apm.description",{defaultMessage:"Get deeper visibility into your applications with extensive support for popular languages, OpenTelemetry, and distributed tracing."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.apm.link",{defaultMessage:"Install Agent"}),href:e.basePath.prepend("/app/apm/tutorial")},{id:"infra_metrics",title:c.i18n.translate("xpack.observability.emptySection.apps.metrics.title",{defaultMessage:"Metrics"}),icon:"logoMetrics",description:c.i18n.translate("xpack.observability.emptySection.apps.metrics.description",{defaultMessage:"Stream, visualize, and analyze your infrastructure metrics."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.metrics.link",{defaultMessage:"Install Metricbeat"}),href:e.basePath.prepend("/app/home#/tutorial_directory/metrics")},{id:"uptime",title:c.i18n.translate("xpack.observability.emptySection.apps.uptime.title",{defaultMessage:"Uptime"}),icon:"logoUptime",description:c.i18n.translate("xpack.observability.emptySection.apps.uptime.description",{defaultMessage:"Proactively monitor the availability and functionality of user journeys."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.uptime.link",{defaultMessage:"Install Heartbeat"}),href:e.basePath.prepend("/app/home#/tutorial/uptimeMonitors")},{id:"ux",title:c.i18n.translate("xpack.observability.emptySection.apps.ux.title",{defaultMessage:"User Experience"}),icon:"logoObservability",description:c.i18n.translate("xpack.observability.emptySection.apps.ux.description",{defaultMessage:"Collect, measure, and analyze performance data that reflects real-world user experiences."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.ux.link",{defaultMessage:"Install RUM Agent"}),href:e.basePath.prepend("/app/apm/tutorial")},{id:"alert",title:c.i18n.translate("xpack.observability.emptySection.apps.alert.title",{defaultMessage:"No alerts found."}),icon:"watchesApp",description:c.i18n.translate("xpack.observability.emptySection.apps.alert.description",{defaultMessage:"Detect complex conditions within Observability and trigger actions when those conditions are met."}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.alert.link",{defaultMessage:"Create rule"}),href:e.basePath.prepend(Ce.r.observability.rules)},{id:"universal_profiling",title:c.i18n.translate("xpack.observability.emptySection.apps.universalProfiling.title",{defaultMessage:"Universal Profiling"}),icon:"logoObservability",description:c.i18n.translate("xpack.observability.emptySection.apps.universalProfiling.description",{defaultMessage:"Understand what lines of code are consuming compute resources across your entire infrastructure, with minimal overhead and zero instrumentation"}),linkTitle:c.i18n.translate("xpack.observability.emptySection.apps.universalProfiling.link",{defaultMessage:"Install Profiling Host Agent"}),href:e.basePath.prepend("/app/profiling/add-data-instructions")}],fa=10,va="xpack.observability.overview.alert.table";function ya(){var e;const{charts:t,http:a,triggersActionsUi:{alertsTableConfigurationRegistry:s,getAlertsStateTable:n,getAlertSummaryWidget:o},kibanaVersion:u}=Object(P.a)().services,{ObservabilityPageTemplate:d}=Object($.a)();Object(N.useBreadcrumbs)([{text:c.i18n.translate("xpack.observability.breadcrumbs.overviewLinkText",{defaultMessage:"Overview"})}]);const{data:m}=Object(N.useFetcher)((()=>async function({http:e,kibanaVersion:t}){try{return await e.get(`https://feeds.elastic.co/observability-solution/v${sa(t)}.json`)}catch(e){return console.error("Error while fetching news feed",e),{items:[]}}}({http:a,kibanaVersion:u})),[a,u]),{hasAnyData:p,isAllRequestsComplete:b}=at(),[g,E]=Object(r.useState)(!1),[f,v]=Object(r.useState)(!1),{relativeStart:y,relativeEnd:h,absoluteStart:x,absoluteEnd:S}=Object(Je.a)(),[T,k]=Object(r.useState)(Object(nt.a)({from:y,to:h})),O=Object(q.a)(),F=Object(r.useMemo)((()=>Object(me.a)({start:x,end:S,timeBuckets:O})),[x,S,O]),w=Object(r.useMemo)((()=>Object(pe.b)({from:y,to:h},(null==F?void 0:F.intervalString)||st.b,(null==F?void 0:F.dateFormat)||st.a)),[F,h,y]),I={theme:t.theme.useChartsTheme(),baseTheme:t.theme.useChartsBaseTheme()};Object(r.useEffect)((()=>{k(Object(nt.a)({from:y,to:h}))}),[h,y]);const j=Object(r.useCallback)((()=>{k(Object(nt.a)({from:y,to:h}))}),[h,y]),M=()=>{v(!1)},L=Object(r.useCallback)((()=>{M(),E(!0)}),[]);return void 0===p?l.a.createElement(rt,null):l.a.createElement(d,{isPageDataLoaded:b,pageHeader:{pageTitle:c.i18n.translate("xpack.observability.overview.pageTitle",{defaultMessage:"Overview"}),rightSideItems:[l.a.createElement(ia,{showTour:f,onGuidedSetupClick:L,onTourDismiss:M,onTimeRangeRefresh:j})],rightSideGroupProps:{responsive:!0},"data-test-subj":"obltOverviewPageHeader"}},l.a.createElement(be.a,null),l.a.createElement(da,null),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":"obltOverviewAlerts"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(kt,{title:c.i18n.translate("xpack.observability.overview.alerts.title",{defaultMessage:"Alerts"}),appLink:{href:Ce.r.observability.alerts,label:c.i18n.translate("xpack.observability.overview.alerts.appLink",{defaultMessage:"Show alerts"})},initialIsOpen:p,hasError:!1},l.a.createElement(o,{chartProps:I,featureIds:ce.h,filter:T,fullSize:!0,timeRange:w}),l.a.createElement(n,{alertsTableConfigurationRegistry:s,configurationId:_.ob.OBSERVABILITY,featureIds:ce.h,hideLazyLoader:!0,id:va,pageSize:fa,query:T,showAlertStatusWithFlapping:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ta,{bucketSize:F}),l.a.createElement(ga,null)),l.a.createElement(i.EuiSpacer,{size:"s"})),l.a.createElement(i.EuiHorizontalRule,null),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:4},!(null==m||null===(e=m.items)||void 0===e||!e.length)&&l.a.createElement(na,{items:m.items.slice(0,3)})),l.a.createElement(i.EuiFlexItem,{grow:2},l.a.createElement(ma,null))))),g?l.a.createElement(gt,{onClose:()=>E(!1)}):null)}var ha=a(87);function xa({setRefresh:e,stateRefresh:t}){const{triggersActionsUi:{getRulesList:a}}=Object(P.a)().services,i=Object(R.useHistory)(),s=Object(C.createKbnUrlStateStorage)({history:i,useHash:!1,useHashQuery:!1}),n=Object(W.a)(),{lastResponse:o,params:c,search:u,status:d,type:m}=s.get("_a")||{lastResponse:[],params:{},search:"",status:[],type:[]},[p,b]=Object(r.useState)(o),[g,E]=Object(r.useState)(c),[f,v]=Object(r.useState)(u),[y,h]=Object(r.useState)(d),[x,S]=Object(r.useState)(m);return l.a.createElement(a,{filterConsumers:ce.h,filteredRuleTypes:n,lastRunOutcomeFilter:p,refresh:t,ruleDetailsRoute:"alerts/rules/:ruleId",rulesListKey:"observability_rulesListColumns",ruleParamFilter:g,showActionFilter:!1,statusFilter:y,searchFilter:f,typeFilter:x,visibleColumns:["ruleName","ruleExecutionStatusLastDate","ruleSnoozeNotify","ruleExecutionStatus","ruleExecutionState"],onLastRunOutcomeFilterChange:t=>{e(new Date),b(t),s.set("_a",{lastResponse:t,params:c,search:u,status:d,type:m})},onRuleParamFilterChange:e=>{E(e),s.set("_a",{lastResponse:o,params:e,search:u,status:d,type:m})},onSearchFilterChange:e=>{v(e),s.set("_a",{lastResponse:o,params:c,search:e,status:d,type:m})},onStatusFilterChange:e=>{h(e),s.set("_a",{lastResponse:o,params:c,search:u,status:e,type:m})},onTypeFilterChange:e=>{S(e),s.set("_a",{lastResponse:o,params:c,search:u,status:d,type:e})},initialSelectedConsumer:_.ob.LOGS})}const Sa=Object(r.lazy)((()=>a.e(22).then(a.bind(null,222)))),Ta="rules";function ka({activeTab:e=Ta}){const{http:t,docLinks:a,triggersActionsUi:{getAddRuleFlyout:s,getRulesSettingsLink:n}}=Object(P.a)().services,{ObservabilityPageTemplate:o}=Object($.a)(),u=Object(R.useHistory)(),[d,m]=Object(r.useState)(!1),[p,b]=Object(r.useState)(new Date);Object(N.useBreadcrumbs)([{text:c.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:t.basePath.prepend("/app/observability/alerts"),deepLinkId:"observability-overview:alerts"},{text:c.i18n.translate("xpack.observability.breadcrumbs.rulesLinkText",{defaultMessage:"Rules"})}]);const g=Object(W.a)(),{ruleTypesState:{data:E}}=Object(B.useLoadRuleTypesQuery)({filteredRuleTypes:g}),f=[...E.values()].some((e=>{var t;return null===(t=e.authorizedConsumers[ha.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all})),v=[{name:"rules",label:l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.rulePage.rulesTabTitle",defaultMessage:"Rules"}),onClick:()=>u.push(Ce.j),isSelected:e===Ta},{name:"logs",label:l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.rulePage.logsTabTitle",defaultMessage:"Logs"}),onClick:()=>u.push(Ce.i),"data-test-subj":"ruleLogsTab",isSelected:e!==Ta}],y=[...e===Ta?[l.a.createElement(i.EuiButton,{"data-test-subj":"createRuleButton",disabled:!f,fill:!0,iconType:"plusInCircle",key:"create-alert",onClick:()=>m(!0)},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.rules.addRuleButtonLabel",defaultMessage:"Create rule"}))]:[],l.a.createElement(n,null),l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"documentationLink",href:a.links.observability.createAlerts,iconType:"help",target:"_blank"},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.rules.docsLinkText",defaultMessage:"Documentation"}))];return l.a.createElement(o,{pageHeader:{pageTitle:c.i18n.translate("xpack.observability.rulesTitle",{defaultMessage:"Rules"}),rightSideItems:y,tabs:v},"data-test-subj":"rulesPage"},l.a.createElement(be.a,null),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,e===Ta?l.a.createElement(xa,{setRefresh:b,stateRefresh:p}):l.a.createElement(Sa,null))),d&&l.a.createElement(s,{consumer:ha.ALERTS_FEATURE_ID,filteredRuleTypes:g,validConsumers:ce.i,initialSelectedConsumer:_.ob.LOGS,onClose:()=>{m(!1)},onSave:()=>(b(new Date),Promise.resolve()),hideGrouping:!0,useRuleProducer:!0}))}var Oa=a(151);function Fa(e){switch(e){case"active":return"success";case"error":return"danger";case"ok":return"primary";case"pending":return"accent";default:return"subdued"}}function wa({rule:e}){const{triggersActionsUi:{getRuleTagBadge:t}}=Object(P.a)().services;return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexGroup,{alignItems:"center"},l.a.createElement(i.EuiFlexItem,{grow:!1,"data-test-subj":"ruleName"},e.name)),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiSpacer,{size:"m"}),l.a.createElement(i.EuiText,{size:"xs"},l.a.createElement(i.EuiBadge,{color:Fa(e.executionStatus.status)},e.executionStatus.status.charAt(0).toUpperCase()+e.executionStatus.status.slice(1))),l.a.createElement(i.EuiSpacer,{size:"m"})),l.a.createElement(i.EuiFlexGroup,{direction:"column",alignItems:"flexStart"},l.a.createElement(i.EuiFlexItem,{component:"span",grow:!1},l.a.createElement(i.EuiText,{color:"subdued",size:"xs"},l.a.createElement("strong",null,c.i18n.translate("xpack.observability.ruleDetails.lastUpdatedMessage",{defaultMessage:"Last updated"}))," ",Ia," ",e.updatedBy," ",ja," ",xt()(e.updatedAt).format("ll"),"  ",l.a.createElement("strong",null,c.i18n.translate("xpack.observability.ruleDetails.createdWord",{defaultMessage:"Created"}))," ",Ia," ",e.createdBy," ",ja," ",xt()(e.createdAt).format("ll"))),l.a.createElement(i.EuiSpacer,{size:"xs"})),e.tags.length>0&&l.a.createElement(t,{tagsOutPopover:!0,tags:e.tags}),l.a.createElement(i.EuiSpacer,{size:"xs"}))}const Ia=c.i18n.translate("xpack.observability.ruleDetails.byWord",{defaultMessage:"by"}),ja=c.i18n.translate("xpack.observability.ruleDetails.onWord",{defaultMessage:"on"});function Ma({ruleIdToDelete:e,title:t,onCancel:a,onDeleted:s,onDeleting:n}){const[u,d]=Object(r.useState)(Boolean(e)),{mutateAsync:m}=function(){const{http:e,notifications:{toasts:t}}=Object(P.a)().services;return Object(o.useMutation)(["deleteRules"],(({ids:t,filter:a})=>{try{const i=JSON.stringify({...null!=t&&t.length?{ids:t}:{},...a?{filter:JSON.stringify(a)}:{}});return e.patch(`${ha.INTERNAL_BASE_ALERTING_API_PATH}/rules/_bulk_delete`,{body:i})}catch(e){throw new Error(`Unable to parse bulk delete params: ${e}`)}}),{onError:(e,a,i)=>{t.addDanger(c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.errorNotification.descriptionText",{defaultMessage:"Failed to delete rule"}))},onSuccess:()=>{t.addSuccess(c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.successNotification.descriptionText",{defaultMessage:"Deleted rule"}))}})}();return u?l.a.createElement(i.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.descriptionText",{defaultMessage:"You can't recover {title} after deleting.",values:{title:t}}),cancelButtonText:c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.deleteButtonLabel",{defaultMessage:"Delete {title}",values:{title:t}}),onCancel:a,onConfirm:async()=>{e&&(d(!1),n(),await m({ids:[e]}),s())}},c.i18n.translate("xpack.observability.rules.deleteConfirmationModal.descriptionText",{defaultMessage:"You can't recover {title} after deleting.",values:{title:t}})):null}var La=a(179);function Ca(){return l.a.createElement(i.EuiPanel,null,l.a.createElement(i.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:l.a.createElement("h2",null,c.i18n.translate("xpack.observability.ruleDetails.errorPromptTitle",{defaultMessage:"Unable to load rule details"})),body:l.a.createElement("p",null,c.i18n.translate("xpack.observability.ruleDetails.errorPromptBody",{defaultMessage:"There was an error loading the rule details."}))}))}function Aa({isLoading:e,isRuleEditable:t,onDeleteRule:a,onEditRule:s}){const[n,o]=Object(r.useState)(!1),u=()=>o(!n);return t?l.a.createElement(i.EuiFlexGroup,{direction:"rowReverse",alignItems:"flexStart"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiPopover,{id:"contextRuleEditMenu",isOpen:n,closePopover:u,button:l.a.createElement(i.EuiButton,{"data-test-subj":"actions",disabled:e,fill:!0,iconSide:"right",iconType:"arrowDown",onClick:u},c.i18n.translate("xpack.observability.ruleDetails.actionsButtonLabel",{defaultMessage:"Actions"}))},l.a.createElement(i.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"s"},l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"editRuleButton",size:"s",iconType:"pencil",onClick:()=>{o(!1),s()}},l.a.createElement(i.EuiText,{size:"s"},c.i18n.translate("xpack.observability.ruleDetails.editRule",{defaultMessage:"Edit rule"}))),l.a.createElement(i.EuiButtonEmpty,{size:"s",iconType:"trash",color:"danger",onClick:()=>{o(!1),a()},"data-test-subj":"deleteRuleButton"},l.a.createElement(i.EuiText,{size:"s"},c.i18n.translate("xpack.observability.ruleDetails.deleteRule",{defaultMessage:"Delete rule"}))))))):null}function Ra(e){const{urlStorageKey:t,...a}=e,i=de(t),{data:{query:{timefilter:{timefilter:r}}},triggersActionsUi:{getAlertsSearchBar:s}}=Object(P.a)().services;return l.a.createElement(Y.ObservabilityAlertSearchBar,g()({},i,a,{services:{timeFilterService:r,AlertsSearchBar:s,useToasts:U}}))}function Da(e){return l.a.createElement(te,{value:ee},l.a.createElement(Ra,e))}var Pa=a(32);function Ba({activeTabId:e,esQuery:t,featureIds:a,rule:s,ruleId:n,ruleType:o,onSetTabId:u,onEsQueryChange:d}){const{triggersActionsUi:{alertsTableConfigurationRegistry:m,getAlertsStateTable:p,getRuleEventLogList:b}}=Object(P.a)().services,g=Object(r.useRef)([{query:`kibana.alert.rule.uuid: ${n}`,language:"kuery"}]),E=[{id:Pa.c,name:c.i18n.translate("xpack.observability.ruleDetails.rule.eventLogTabText",{defaultMessage:"Execution history"}),"data-test-subj":"eventLogListTab",content:l.a.createElement(i.EuiFlexGroup,{style:{minHeight:600},direction:"column"},l.a.createElement(i.EuiFlexItem,null,s&&o?l.a.createElement(b,{ruleId:s.id,ruleType:o}):null))},{id:Pa.b,name:c.i18n.translate("xpack.observability.ruleDetails.rule.alertsTabText",{defaultMessage:"Alerts"}),"data-test-subj":"ruleAlertListTab",content:l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiSpacer,{size:"m"}),l.a.createElement(Da,{appName:Pa.a,onEsQueryChange:d,urlStorageKey:Pa.e,defaultSearchQueries:g.current}),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{style:{minHeight:450},direction:"column"},l.a.createElement(i.EuiFlexItem,null,t&&a&&l.a.createElement(p,{alertsTableConfigurationRegistry:m,configurationId:G.observabilityFeatureId,id:Pa.d,featureIds:a,query:t,showAlertStatusWithFlapping:!0}))))}];return l.a.createElement(i.EuiTabbedContent,{"data-test-subj":"ruleDetailsTabbedContent",tabs:E,selectedTab:E.find((t=>t.id===e)),onTabClick:e=>{var t;t=e.id,u(t)}})}function _a(){var e;const{application:{capabilities:t,navigateToUrl:a},charts:{theme:{useChartsBaseTheme:s,useChartsTheme:n}},http:{basePath:u},share:{url:{locators:d}},triggersActionsUi:{actionTypeRegistry:m,ruleTypeRegistry:p,getAlertSummaryWidget:b,getEditRuleFlyout:g,getRuleDefinition:E,getRuleStatusPanel:f}}=Object(P.a)().services,{ObservabilityPageTemplate:v}=Object($.a)(),{ruleId:y}=Object(R.useParams)(),{search:h}=Object(R.useLocation)(),x=n(),S=s(),{rule:T,isLoading:k,isError:O,refetch:F}=Object(Oa.a)({ruleId:y}),w=Object(W.a)(),{ruleTypes:I}=function({filterByRuleTypeIds:e}){const{http:t,notifications:{toasts:a}}=Object(P.a)().services,{isInitialLoading:i,isLoading:r,isError:l,isSuccess:s,isRefetching:n,data:u,refetch:d}=Object(o.useQuery)({queryKey:["fetchRuleTypes",e],queryFn:async({signal:a})=>{try{const i=(await t.get(`${ha.BASE_ALERTING_API_PATH}/rule_types`,{signal:a})).map((e=>Object(ke.mapKeys)(e,((e,t)=>Object(ke.camelCase)(t)))));return e&&e.length>0?i.filter((t=>e.includes(t.id))):i}catch(e){throw e}},keepPreviousData:!0,refetchOnWindowFocus:!1,onError:e=>{a.addError(e,{title:c.i18n.translate("xpack.observability.ruleDetails.ruleTypeLoadError",{defaultMessage:"Unable to load rule type."}),toastMessage:e instanceof Error?e.message:"string"==typeof e?e:""})}});return{ruleTypes:u,isLoading:r,isInitialLoading:i,isRefetching:n,isSuccess:s,isError:l,refetch:d}}({filterByRuleTypeIds:w});Object(N.useBreadcrumbs)([{text:c.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:u.prepend(Ce.r.observability.alerts),deepLinkId:"observability-overview:alerts"},{href:u.prepend(Ce.r.observability.rules),text:c.i18n.translate("xpack.observability.breadcrumbs.rulesLinkText",{defaultMessage:"Rules"})},{text:T&&T.name}]);const[j,M]=Object(r.useState)((()=>{const e=new URLSearchParams(h).get(Pa.f);return e&&[Pa.c,Pa.b].includes(e)?e:Pa.c})),[L,C]=Object(r.useState)(),[A,D]=Object(r.useState)(pe.c),[B,_]=Object(r.useState)(!1),[V,z]=Object(r.useState)(void 0),[q,U]=Object(r.useState)(!1),H=Object(r.useRef)(null);Object(r.useEffect)((()=>{D(Object(pe.c)())}),[L]);const Q=null==I?void 0:I.find((e=>e.id===(null==T?void 0:T.ruleTypeId))),K=function({capabilities:e,rule:t,ruleType:a,ruleTypeRegistry:i}){var r,l,s;const n=null==e||null===(r=e.actions)||void 0===r?void 0:r.execute,o=null!==(l=t&&(null==a||null===(s=a.authorizedConsumers[t.consumer])||void 0===s?void 0:s.all))&&void 0!==l&&l,c=t&&o&&(n||!n&&0===t.actions.length);return Boolean(c&&!!i.has(t.ruleTypeId)&&!i.get(t.ruleTypeId).requiresAppContext)}({capabilities:t,rule:T,ruleType:Q,ruleTypeRegistry:p}),X=(null==T?void 0:T.consumer)===ha.ALERTS_FEATURE_ID&&null!=Q&&Q.producer?[Q.producer]:T?[T.consumer]:[],J=(null==T||null===(e=T.executionStatus.error)||void 0===e?void 0:e.reason)===ha.RuleExecutionStatusErrorReasons.License?Na.noLicense:T?Na[T.executionStatus.status]:"";return k||q?l.a.createElement(La.a,null):!T||O?l.a.createElement(Ca,null):l.a.createElement(v,{"data-test-subj":"ruleDetails",pageHeader:{pageTitle:l.a.createElement(wa,{rule:T}),bottomBorder:!1,rightSideItems:[l.a.createElement(Aa,{isLoading:k||q,isRuleEditable:K,onEditRule:()=>{_(!0)},onDeleteRule:()=>{z(null==T?void 0:T.id),_(!1)}})]}},l.a.createElement(be.a,null),l.a.createElement(i.EuiFlexGroup,{wrap:!0,gutterSize:"m"},l.a.createElement(i.EuiFlexItem,{style:{minWidth:350}},l.a.createElement(f,{rule:T,isEditable:K,requestRefresh:F,healthColor:Fa(T.executionStatus.status),statusMessage:J})),l.a.createElement(i.EuiFlexItem,{style:{minWidth:350}},l.a.createElement(b,{chartProps:{theme:x,baseTheme:S},featureIds:X,onClick:async(e=ce.c)=>{var t,a;D(Object(pe.c)()),await(null===(t=d.get(G.ruleDetailsLocatorID))||void 0===t?void 0:t.navigate({rangeFrom:pe.a.from,rangeTo:pe.a.to,ruleId:y,status:e,tabId:Pa.b},{replace:!0})),M(Pa.b),null===(a=H.current)||void 0===a||a.scrollIntoView({behavior:"smooth"})},timeRange:A,filter:{term:{"kibana.alert.rule.uuid":y}}})),l.a.createElement(E,{actionTypeRegistry:m,rule:T,ruleTypeRegistry:p,onEditRule:async()=>{F()}})),l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement("div",{ref:H}),l.a.createElement(Ba,{esQuery:L,featureIds:X,rule:T,ruleId:y,ruleType:Q,activeTabId:j,onEsQueryChange:C,onSetTabId:async e=>{var t;M(e),await(null===(t=d.get(G.ruleDetailsLocatorID))||void 0===t?void 0:t.navigate({ruleId:y,tabId:e},{replace:!0}))}}),B&&l.a.createElement(g,{initialRule:T,onClose:()=>{_(!1)},onSave:async()=>{F()}}),V?l.a.createElement(Ma,{ruleIdToDelete:V,title:T.name,onCancel:()=>z(void 0),onDeleting:()=>{U(!0)},onDeleted:()=>{z(void 0),U(!1),a(u.prepend(Ce.r.observability.rules))}}):null)}const Na={ok:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusOk",{defaultMessage:"Ok"}),active:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusActive",{defaultMessage:"Active"}),error:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusError",{defaultMessage:"Error"}),pending:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusPending",{defaultMessage:"Pending"}),unknown:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusUnknown",{defaultMessage:"Unknown"}),warning:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusWarning",{defaultMessage:"Warning"}),noLicense:c.i18n.translate("xpack.observability.ruleDetails.ruleStatusLicenseError",{defaultMessage:"License Error"})};var Va=a(26);const za=()=>{var e;const{licensing:t}=Object(P.a)().services,a=f()(null!==(e=null==t?void 0:t.license$)&&void 0!==e?e:new Va.Observable,null);return{getLicense:()=>a,hasAtLeast:Object(r.useCallback)((e=>{if(a)return!!a&&a.isAvailable&&a.isActive&&a.hasAtLeast(e)}),[a])}};var Ga=a(122),$a=a(111),qa=a(40),Wa=a(102),Ua=a(133),Ha=a(139),Qa=a(126),Ka=a(172);const Xa=e=>{var t;const a=Object(i.useIsWithinBreakpoints)(["xs","s"]),r=Object(i.useIsWithinBreakpoints)(["m"]),l=Object(i.useIsWithinBreakpoints)(["l"]),s=null!==(t=Number(e))&&void 0!==t?t:3;switch(!0){case a:return 1;case r:return s>2?2:s;case l:return s>3?3:s;default:return s}};function Ja({sloList:e,loading:t,error:a,cardsPerRow:r,rulesBySlo:s,activeAlertsBySlo:n}){const{isLoading:o,data:c=[]}=Object(Qa.a)({list:e.map((e=>{var t;return{sloId:e.id,instanceId:null!==(t=e.instanceId)&&void 0!==t?t:Wa.a}}))}),u=Xa(r);return t&&0===e.length?l.a.createElement(Ya,{gridSize:Number(r)}):l.a.createElement(i.EuiFlexGrid,{columns:u,gutterSize:"m"},e.filter((e=>e.summary)).map((e=>{var u,d;return l.a.createElement(i.EuiFlexItem,{key:`${e.id}-${null!==(u=e.instanceId)&&void 0!==u?u:"ALL_VALUE"}`},l.a.createElement(Ka.b,{slo:e,loading:t,error:a,activeAlerts:n.get(e),rules:null==s?void 0:s[e.id],historicalSummary:null===(d=c.find((t=>{var a;return t.sloId===e.id&&t.instanceId===(null!==(a=e.instanceId)&&void 0!==a?a:Wa.a)})))||void 0===d?void 0:d.data,historicalSummaryLoading:o,cardsPerRow:Number(r)}))})))}function Ya({gridSize:e}){const t=e,a=Array(4*t).fill(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexGrid,{gutterSize:"m",columns:t},a.map(((e,t)=>l.a.createElement(i.EuiFlexItem,{key:t},l.a.createElement(i.EuiPanel,{style:{height:"200px"},hasBorder:!0},l.a.createElement(i.EuiSkeletonText,{lines:2}))," ")))))}function Za(){return l.a.createElement(i.EuiCallOut,{title:c.i18n.translate("xpack.observability.slo.list.emptyTitle",{defaultMessage:"No results"}),color:"warning",iconType:"warning"},c.i18n.translate("xpack.observability.slo.list.emptyMessage",{defaultMessage:"There are no results for your criteria."}))}function ei(){return l.a.createElement(i.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:l.a.createElement("h2",null,c.i18n.translate("xpack.observability.slo.list.errorTitle",{defaultMessage:"Unable to load SLOs"})),body:l.a.createElement("p",null,c.i18n.translate("xpack.observability.slo.list.errorMessage",{defaultMessage:"There was an error loading the SLOs. Contact your administrator for help."}))})}var ti=a(134),ai=a(156),ii=a(155),ri=a(185),li=a(186),si=a(187),ni=a(127);function oi({chart:e,data:t,id:a,isLoading:r,size:s,state:n}){const o=Object(P.a)().services.charts,u=o.theme.useChartsTheme(),d=o.theme.useChartsBaseTheme(),{euiTheme:m}=Object(i.useEuiTheme)(),p="error"===n?m.colors.danger:m.colors.success,b="area"===e?Et.AreaSeries:Et.LineSeries;if(r)return l.a.createElement(i.EuiLoadingChart,{style:{minWidth:60,justifyContent:"center"},size:"m",mono:!0});const g="compact"===s?14:28,E="compact"===s?40:60;return l.a.createElement(Et.Chart,{size:{height:g,width:E}},l.a.createElement(Et.Settings,{baseTheme:d,showLegend:!1,theme:[u,Nt.EUI_SPARKLINE_THEME_PARTIAL],locale:c.i18n.getLocale()}),l.a.createElement(Et.Tooltip,{type:Et.TooltipType.None}),l.a.createElement(Et.Axis,{id:"axis",hide:!0,domain:{min:NaN,max:NaN,fit:!0},gridLine:{visible:!1}}),l.a.createElement(b,{color:p,data:t,fit:Et.Fit.Nearest,id:a,lineSeriesStyle:{point:{visible:!1}},xAccessor:"key",xScaleType:Et.ScaleType.Time,yAccessors:["value"],yScaleType:Et.ScaleType.Linear}))}function ci({slo:e,historicalSummary:t=[],historicalSummaryLoading:a}){const{sliValue:r,sloTarget:s,errorBudgetRemaining:n}=Object(ai.a)(e),o="VIOLATED"===e.summary.status||"DEGRADING"===e.summary.status,u=o?"danger":"",d=Object(ni.a)(t,"error_budget_remaining"),m=Object(ni.a)(t,"sli_value");return l.a.createElement(i.EuiFlexGroup,{direction:"row",justifyContent:"spaceBetween",gutterSize:"l",responsive:!1},l.a.createElement(i.EuiFlexItem,{grow:!1,style:{maxWidth:200}},l.a.createElement(i.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{description:c.i18n.translate("xpack.observability.slo.slo.stats.objective",{defaultMessage:"{objective} target",values:{objective:s}}),title:r,textAlign:"right",titleColor:u,titleSize:"m",reverse:!0})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(oi,{chart:"line",id:"sli_history",state:o?"error":"success",data:m,isLoading:a})))),l.a.createElement(i.EuiFlexItem,{grow:!1,style:{maxWidth:200}},l.a.createElement(i.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{description:c.i18n.translate("xpack.observability.slo.slo.stats.budgetRemaining",{defaultMessage:"Budget remaining"}),textAlign:"right",title:n,titleColor:u,titleSize:"m",reverse:!0})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(oi,{chart:"area",id:"error_budget_burn_down",state:o?"error":"success",data:d,isLoading:a})))))}function ui({slo:e,rules:t,historicalSummary:a=[],historicalSummaryLoading:s,activeAlerts:n}){const[o,c]=Object(r.useState)(!1),[u,d]=Object(r.useState)(!1),[m,p]=Object(r.useState)(!1),{sloDetailsUrl:b}=Object(ai.a)(e),{handleCreateRule:g,handleDeleteCancel:E,handleDeleteConfirm:f}=Object(ri.a)({slo:e,setDeleteConfirmationModalOpen:p,setIsActionsPopoverOpen:c,setIsAddRuleFlyoutOpen:d});return l.a.createElement(i.EuiPanel,{"data-test-subj":"sloItem",hasBorder:!0,hasShadow:!1},l.a.createElement(i.EuiFlexGroup,{responsive:!1,alignItems:"center"},l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{size:"s"},e.summary?l.a.createElement("a",{"data-test-subj":"o11ySloListItemLink",href:b},e.name):l.a.createElement("span",null,e.name))),l.a.createElement(si.b,{activeAlerts:n,isLoading:!e.summary,rules:t,slo:e,onClickRuleBadge:g}))),l.a.createElement(i.EuiFlexItem,{grow:!1},e.summary?l.a.createElement(ci,{slo:e,historicalSummary:a,historicalSummaryLoading:s}):null))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(li.a,{slo:e,isActionsPopoverOpen:o,setIsAddRuleFlyoutOpen:d,setIsActionsPopoverOpen:c,setDeleteConfirmationModalOpen:p}))),l.a.createElement(ii.a,{slo:e,isAddRuleFlyoutOpen:u,setIsAddRuleFlyoutOpen:d}),m?l.a.createElement(ti.a,{slo:e,onCancel:E,onConfirm:f}):null)}var di=a(157),mi=a(17),pi=a(173),bi=a(161),gi=a(106),Ei=a(142),fi=a(163);function vi({sloList:e,loading:t,error:a}){const{application:{navigateToUrl:s},http:{basePath:n},uiSettings:u,share:{url:{locators:d}},triggersActionsUi:{getAddRuleFlyout:m}}=Object(P.a)().services,p=u.get("format:percent:defaultPattern"),b=e.map((e=>{var t;return[e.id,null!==(t=e.instanceId)&&void 0!==t?t:Wa.a]})),{hasWriteCapabilities:g}=Object(Ga.a)(),E=Object(W.a)(),f=Object(o.useQueryClient)(),{mutate:v}=Object(Ei.a)(),[y,h]=Object(r.useState)(void 0),[x,S]=Object(r.useState)(void 0),{data:T}=Object(Ha.a)({sloIdsAndInstanceIds:b}),{data:k}=Object(Ua.a)({sloIds:b.map((e=>e[0]))}),{isLoading:O,data:F=[]}=Object(Qa.a)({list:e.map((e=>{var t;return{sloId:e.id,instanceId:null!==(t=e.instanceId)&&void 0!==t?t:Wa.a}}))}),w=Object(di.a)(),I=[{field:"status",name:"Status",render:(e,t)=>t.summary?l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(pi.a,{slo:t})):l.a.createElement(i.EuiSkeletonRectangle,{isLoading:!0,contentAriaLabel:"Loading",width:"54.16px",height:"20px",borderRadius:"s"})},{field:"alerts",name:"Alerts",truncateText:!0,width:"5%",render:(e,t)=>l.a.createElement(l.a.Fragment,null,l.a.createElement(fi.a,{rules:null==k?void 0:k[t.id],onClick:()=>h(t)}),l.a.createElement(bi.a,{slo:t,activeAlerts:T.get(t),viewMode:"compact"}))},{field:"name",name:"Name",width:"20%",truncateText:{lines:2},"data-test-subj":"sloItem",render:(e,t)=>{const a=n.prepend(Ce.r.observability.sloDetails(t.id,t.groupBy!==Wa.a&&t.instanceId?t.instanceId:void 0));return l.a.createElement(i.EuiToolTip,{position:"top",content:t.name,display:"block"},l.a.createElement(i.EuiText,{size:"s"},t.summary?l.a.createElement("a",{"data-test-subj":"o11ySloListItemLink",href:a},t.name):l.a.createElement("span",null,t.name)))}},{field:"instance",name:"Instance",render:(e,t)=>t.groupBy!==Wa.a?l.a.createElement(i.EuiToolTip,{position:"top",content:c.i18n.translate("xpack.observability.slo.groupByBadge",{defaultMessage:"Group by {groupKey}",values:{groupKey:t.groupBy}}),display:"block"},l.a.createElement("span",null,t.instanceId)):l.a.createElement("span",null,mi.a)},{field:"objective",name:"Objective",render:(e,t)=>yt()(t.objective.target).format("0.00%")},{field:"sli",name:"SLI value",truncateText:!0,render:(e,t)=>t.summary&&"NO_DATA"!==t.summary.status?yt()(t.summary.sliValue).format(p):mi.a},{field:"historicalSli",name:"Historical SLI",render:(e,t)=>{var a;const i=t.summary&&"VIOLATED"===t.summary.status||t.summary&&"DEGRADING"===t.summary.status,r=Object(ni.a)(null===(a=F.find((e=>{var a;return e.sloId===t.id&&e.instanceId===(null!==(a=t.instanceId)&&void 0!==a?a:Wa.a)})))||void 0===a?void 0:a.data,"sli_value");return l.a.createElement(oi,{chart:"line",id:"sli_history",size:"compact",state:i?"error":"success",data:r,isLoading:O})}},{field:"errorBudgetRemaining",name:"Budget remaining",truncateText:!0,render:(e,t)=>t.summary&&"NO_DATA"!==t.summary.status?yt()(t.summary.errorBudget.remaining).format(p):mi.a},{field:"historicalErrorBudgetRemaining",name:"Historical budget remaining",render:(e,t)=>{var a;const i=t.summary&&"VIOLATED"===t.summary.status||t.summary&&"DEGRADING"===t.summary.status,r=Object(ni.a)(null===(a=F.find((e=>{var a;return e.sloId===t.id&&e.instanceId===(null!==(a=t.instanceId)&&void 0!==a?a:Wa.a)})))||void 0===a?void 0:a.data,"error_budget_remaining");return l.a.createElement(oi,{chart:"area",id:"error_budget_burn_down",state:i?"error":"success",size:"compact",data:r,isLoading:O})}},{name:"Actions",actions:[{type:"icon",icon:"inspect",name:c.i18n.translate("xpack.observability.slo.item.actions.details",{defaultMessage:"Details"}),description:c.i18n.translate("xpack.observability.slo.item.actions.details",{defaultMessage:"Details"}),onClick:e=>{const t=n.prepend(Ce.r.observability.sloDetails(e.id,e.groupBy!==Wa.a&&e.instanceId?e.instanceId:void 0));s(t)}},{type:"icon",icon:"pencil",name:c.i18n.translate("xpack.observability.slo.item.actions.edit",{defaultMessage:"Edit"}),description:c.i18n.translate("xpack.observability.slo.item.actions.edit",{defaultMessage:"Edit"}),"data-test-subj":"sloActionsEdit",enabled:e=>g,onClick:e=>{s(n.prepend(Ce.r.observability.sloEdit(e.id)))}},{type:"icon",icon:"bell",name:c.i18n.translate("xpack.observability.slo.item.actions.createRule",{defaultMessage:"Create new alert rule"}),description:c.i18n.translate("xpack.observability.slo.item.actions.createRule",{defaultMessage:"Create new alert rule"}),"data-test-subj":"sloActionsCreateRule",enabled:e=>g,onClick:e=>{h(e)}},{type:"icon",icon:"gear",name:c.i18n.translate("xpack.observability.slo.item.actions.manageRules",{defaultMessage:"Manage rules"}),description:c.i18n.translate("xpack.observability.slo.item.actions.manageRules",{defaultMessage:"Manage rules"}),"data-test-subj":"sloActionsManageRules",enabled:e=>g,onClick:e=>{const t=d.get(G.rulesLocatorID);null==t||t.navigate({params:{sloId:e.id}},{replace:!1})}},{type:"icon",icon:"copy",name:c.i18n.translate("xpack.observability.slo.item.actions.clone",{defaultMessage:"Clone"}),description:c.i18n.translate("xpack.observability.slo.item.actions.clone",{defaultMessage:"Clone"}),"data-test-subj":"sloActionsClone",enabled:e=>g,onClick:e=>{w(e)}},{type:"icon",icon:"trash",name:c.i18n.translate("xpack.observability.slo.item.actions.delete",{defaultMessage:"Delete"}),description:c.i18n.translate("xpack.observability.slo.item.actions.delete",{defaultMessage:"Delete"}),"data-test-subj":"sloActionsDelete",enabled:e=>g,onClick:e=>S(e)}],width:"5%"}];return t||a||0!==e.length?!t&&a?l.a.createElement(ei,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiBasicTable,{items:e,columns:I}),y?l.a.createElement(m,{consumer:G.sloFeatureId,filteredRuleTypes:E,ruleTypeId:ce.g,initialValues:{name:`${y.name} burn rate rule`,params:{sloId:y.id}},onSave:async()=>{f.invalidateQueries({queryKey:gi.a.rules(),exact:!1})},onClose:()=>{h(void 0)},useRuleProducer:!0}):null,x?l.a.createElement(ti.a,{slo:x,onCancel:()=>{S(void 0)},onConfirm:()=>{x&&v({id:x.id,name:x.name}),S(void 0)}}):null):l.a.createElement(Za,null)}function yi({sloList:e,activeAlertsBySlo:t,rulesBySlo:a,loading:r,error:s,isCompact:n=!0}){const{isLoading:o,data:c=[]}=Object(Qa.a)({list:e.map((e=>{var t;return{sloId:e.id,instanceId:null!==(t=e.instanceId)&&void 0!==t?t:Wa.a}}))});return l.a.createElement(i.EuiFlexItem,null,n&&l.a.createElement(vi,{sloList:e,loading:r,error:s}),!n&&l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map((e=>{var r,s;return l.a.createElement(i.EuiFlexItem,{key:`${e.id}-${null!==(r=e.instanceId)&&void 0!==r?r:Wa.a}`},l.a.createElement(ui,{activeAlerts:t.get(e),rules:null==a?void 0:a[e.id],historicalSummary:null===(s=c.find((t=>{var a;return t.sloId===e.id&&t.instanceId===(null!==(a=e.instanceId)&&void 0!==a?a:Wa.a)})))||void 0===s?void 0:s.data,historicalSummaryLoading:o,slo:e}))}))))}function hi({isCompact:e,sloList:t,loading:a,error:r,sloView:s}){const n=t.map((e=>{var t;return[e.id,null!==(t=e.instanceId)&&void 0!==t?t:Wa.a]})),{data:o}=Object(Ha.a)({sloIdsAndInstanceIds:n}),{data:c}=Object(Ua.a)({sloIds:n.map((e=>e[0]))});return a||r||0!==t.length?!a&&r?l.a.createElement(ei,null):"cardView"===s?l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Ja,{sloList:t,loading:a,error:r,cardsPerRow:e?"4":"3",activeAlertsBySlo:o,rulesBySlo:c})):l.a.createElement(i.EuiFlexItem,null,l.a.createElement(yi,{sloList:t,activeAlertsBySlo:o,rulesBySlo:c,error:r,loading:a,isCompact:e})):l.a.createElement(Za,null)}var xi=a(11);function Si({indexPatternString:e}){const{dataViews:t}=Object(P.a)().services,[a,i]=Object(r.useState)(),[l,s]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{e&&(s(!0),t.create({title:e,allowNoIndex:!0}).then((e=>{i(e)})).finally((()=>{s(!1)})))}),[e,t]),{dataView:a,loading:l}}const Ti=[{label:c.i18n.translate("xpack.observability.slo.list.sortBy.sliValue",{defaultMessage:"SLI value"}),type:"sli_value"},{label:c.i18n.translate("xpack.observability.slo.list.sortBy.sloStatus",{defaultMessage:"SLO status"}),type:"status"},{label:c.i18n.translate("xpack.observability.slo.list.sortBy.errorBudgetConsumed",{defaultMessage:"Error budget consumed"}),type:"error_budget_consumed"},{label:c.i18n.translate("xpack.observability.slo.list.sortBy.errorBudgetRemaining",{defaultMessage:"Error budget remaining"}),type:"error_budget_remaining"}];function ki({loading:e,onChangeQuery:t,onChangeSort:a,initialState:s}){var n;const{data:o,dataViews:u,docLinks:d,http:m,notifications:p,storage:b,uiSettings:g,unifiedSearch:E}=Object(P.a)().services,{dataView:f}=Si({indexPatternString:".slo-observability.summary-*"}),[v,y]=Object(r.useState)(s.kqlQuery),[h,x]=Object(r.useState)(!1),[S,T]=Object(r.useState)(Ti.map((e=>({...e,checked:e.type===s.sort.by?"on":void 0})))),k=S.find((e=>"on"===e.checked)),O=()=>x(!h);return l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s",responsive:!0},l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(xi.QueryStringInput,{appName:"Observability",bubbleSubmitEvent:!1,deps:{data:o,dataViews:u,docLinks:d,http:m,notifications:p,storage:b,uiSettings:g,unifiedSearch:E},disableAutoFocus:!0,onSubmit:e=>{y(String(e.query)),t(String(e.query))},disableLanguageSwitcher:!0,isDisabled:e,autoSubmit:!0,indexPatterns:f?[f]:[],placeholder:c.i18n.translate("xpack.observability.slo.list.search",{defaultMessage:"Search your SLOs..."}),query:{query:String(v),language:"kuery"},size:"s",onChange:e=>y(String(e.query))})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s",responsive:!0},l.a.createElement(i.EuiFlexItem,{style:{maxWidth:250}},l.a.createElement(i.EuiFilterGroup,null,l.a.createElement(i.EuiPopover,{button:l.a.createElement(i.EuiFilterButton,{disabled:e,iconType:"arrowDown",onClick:O,isSelected:h},c.i18n.translate("xpack.observability.slo.list.sortByType",{defaultMessage:"Sort by {type}",values:{type:null!==(n=null==k?void 0:k.label.toLowerCase())&&void 0!==n?n:""}})),isOpen:h,closePopover:O,panelPaddingSize:"none",anchorPosition:"downCenter"},l.a.createElement("div",{style:{width:250}},l.a.createElement(i.EuiPopoverTitle,{paddingSize:"s"},c.i18n.translate("xpack.observability.slo.list.sortBy",{defaultMessage:"Sort by"})),l.a.createElement(i.EuiSelectable,{singleSelection:"always",options:S,onChange:e=>{T(e),x(!1),a(e.find((e=>e.checked)).type)},isLoading:e},(e=>e)))))))))}function Oi({toggleCompactView:e,isCompact:t}){return l.a.createElement(i.EuiSwitch,{label:l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.listView.compactViewLabel",defaultMessage:"Compact view"}),id:"sloListCompactToggle",checked:t,onChange:e,compressed:!0})}const Fi=[{id:"cardView",label:"Card View",iconType:"visGauge","data-test-subj":"sloCardViewButton"},{id:"listView",label:"List View",iconType:"list","data-test-subj":"sloListViewButton"}];function wi({sloView:e,onChangeView:t,onToggleCompactView:a,isCompact:r=!0}){return l.a.createElement(i.EuiFlexGroup,{alignItems:"center"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButtonGroup,{legend:c.i18n.translate("xpack.observability.toggleSLOView.euiButtonGroup.sloView",{defaultMessage:"SLO View"}),options:Fi,idSelected:e,onChange:e=>t(e),isIconOnly:!0})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(Oi,{toggleCompactView:a,isCompact:r})))}function Ii({autoRefresh:e}){const{state:t,store:a}=Object(qa.c)(),[s,n]=Object(r.useState)(t.page),[c,u]=Object(r.useState)(t.perPage),[d,m]=Object(r.useState)(t.kqlQuery),[p,b]=Object(r.useState)(t.sort.by),[g]=Object(r.useState)(t.sort.direction),[E,f]=Object(r.useState)(t.view),[v,y]=Object(r.useState)(t.compact),{isLoading:h,isRefetching:x,isError:S,data:T}=Object($a.a)({perPage:c,page:s+1,kqlQuery:d,sortBy:p,sortDirection:g,shouldRefetch:e}),{results:k=[],total:O=0}=null!=T?T:{},F=Boolean(Object(o.useIsMutating)(["creatingSlo"])),w=Boolean(Object(o.useIsMutating)(["cloningSlo"])),I=Boolean(Object(o.useIsMutating)(["updatingSlo"])),j=Boolean(Object(o.useIsMutating)(["deleteSlo"]));return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"m","data-test-subj":"sloList"},l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(ki,{loading:h||F||w||I||j,onChangeQuery:e=>{n(0),m(e),a({page:0,kqlQuery:e})},onChangeSort:e=>{n(0),b(e),a({page:0,sort:{by:e,direction:t.sort.direction}})},initialState:t})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(wi,{sloView:E,onChangeView:e=>{f(e),a({view:e})},onToggleCompactView:()=>{const e=!v;y(e),a({compact:e})},isCompact:v})),l.a.createElement(hi,{sloList:k,loading:h||x,error:S,isCompact:v,sloView:E}),O>0?l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTablePagination,{pageCount:Math.ceil(O/c),activePage:s,onChangePage:e=>{n(e),a({page:e})},itemsPerPage:c,itemsPerPageOptions:[10,25,50,100],onChangeItemsPerPage:e=>{u(e),a({perPage:e})}})):null)}function ji({disabled:e,isAutoRefreshing:t,onClick:a}){return t?l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"autoRefreshButton",disabled:e,iconSide:"left",iconType:"pause",onClick:a},c.i18n.translate("xpack.observability.slosPage.stopRefreshingButtonLabel",{defaultMessage:"Stop refreshing"})):l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"autoRefreshButton",disabled:e,iconSide:"left",iconType:"play",onClick:a},c.i18n.translate("xpack.observability.slosPage.autoRefreshButtonLabel",{defaultMessage:"Auto-refresh"}))}function Mi(){return l.a.createElement(i.EuiFlexItem,{grow:!1},c.i18n.translate("xpack.observability.slosPageTitle",{defaultMessage:"SLOs"}))}const Li="https://ela.st/slo-feedback";function Ci({disabled:e}){return l.a.createElement(i.EuiButton,{"data-test-subj":"sloFeedbackButton",isDisabled:e,href:Li,target:"_blank",color:"warning",iconType:"editorComment"},c.i18n.translate("xpack.observability.slo.feedbackButtonLabel",{defaultMessage:"Tell us what you think!"}))}const Ai="slo.auto_refresh";function Ri(){return localStorage?{storeAutoRefreshState:e=>{localStorage.setItem(Ai,JSON.stringify(e))},getAutoRefreshState:()=>{const e=localStorage.getItem(Ai);return null===e||Boolean(JSON.parse(e))}}:{storeAutoRefreshState:()=>{},getAutoRefreshState:()=>!0}}var Di=a(143);function Pi(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(P.a)().services,{isLoading:a,data:r}=Object(Di.a)({includeOutdatedOnly:!0});return!a&&r&&r.total>0?l.a.createElement(i.EuiCallOut,{color:"warning",iconType:"warning",title:c.i18n.translate("xpack.observability.slo.outdatedSloCallout.title",{defaultMessage:"{total} Outdated SLOs Detected",values:{total:r.total}})},l.a.createElement("p",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.outdatedSloCallout.message",defaultMessage:"We've noticed that you have {total} outdated SLO definitions, these SLOs will not be running or alerting until you've reset them. Please click the button below to review the SLO definitions; you can choose to either reset the SLO definition or remove it.",values:{total:r.total}})),l.a.createElement("p",null,l.a.createElement(i.EuiButton,{color:"warning","data-test-subj":"o11ySloOutdatedCalloutViewOutdatedSloDefinitionsButton",fill:!0,onClick:()=>{e(t.prepend(Ce.r.observability.slosOutdatedDefinitions))}},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.outdatedSloCallout.buttonLabel",defaultMessage:"Review Outdated SLO Definitions"})))):null}function Bi(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(P.a)().services,{ObservabilityPageTemplate:a}=Object($.a)(),{hasWriteCapabilities:s}=Object(Ga.a)(),{hasAtLeast:n}=za(),{isLoading:o,isError:u,data:d}=Object($a.a)(),{total:m}=null!=d?d:{total:0},{storeAutoRefreshState:p,getAutoRefreshState:b}=Ri(),[g,E]=Object(r.useState)(b());return Object(N.useBreadcrumbs)([{href:t.prepend(Ce.r.observability.slos),text:c.i18n.translate("xpack.observability.breadcrumbs.slosLinkText",{defaultMessage:"SLOs"}),deepLinkId:"observability-overview:slos"}]),Object(r.useEffect)((()=>{(!o&&0===m||!1===n("platinum")||u)&&e(t.prepend(Ce.r.observability.slosWelcome))}),[t,n,u,o,e,m]),l.a.createElement(a,{pageHeader:{pageTitle:l.a.createElement(Mi,null),rightSideItems:[l.a.createElement(i.EuiButton,{color:"primary","data-test-subj":"slosPageCreateNewSloButton",disabled:!s,fill:!0,onClick:()=>{e(t.prepend(Ce.r.observability.sloCreate))}},c.i18n.translate("xpack.observability.slo.sloList.pageHeader.createNewButtonLabel",{defaultMessage:"Create new SLO"})),l.a.createElement(ji,{isAutoRefreshing:g,onClick:()=>{E(!g),p(!g)}}),l.a.createElement(Ci,null)],bottomBorder:!1},"data-test-subj":"slosPage"},l.a.createElement(be.a,null),l.a.createElement(Pi,null),l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement(Ii,{autoRefresh:g}))}var _i=a(217),Ni=a.n(_i);function Vi(){const{http:e,notifications:{toasts:t}}=Object(P.a)().services,{isInitialLoading:a,isLoading:i,isError:r,isSuccess:l,isRefetching:s,data:n}=Object(o.useQuery)({queryKey:gi.a.globalDiagnosis(),queryFn:async({signal:t})=>{try{return await e.get("/internal/observability/slos/_diagnosis",{query:{},signal:t})}catch(e){throw function(e){return{...e,message:Object(e).body.message}}(e)}},keepPreviousData:!0,refetchOnWindowFocus:!1,retry:!1,onError:e=>{t.addError(e,{title:c.i18n.translate("xpack.observability.slo.globalDiagnosis.errorNotification",{defaultMessage:"You do not have the right permissions to use this feature."})})}});return{data:n,isLoading:i,isInitialLoading:a,isRefetching:s,isSuccess:l,isError:r}}function zi(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(P.a)().services,{hasWriteCapabilities:a}=Object(Ga.a)(),{data:s}=Vi(),{ObservabilityPageTemplate:n}=Object($.a)(),{hasAtLeast:o}=za(),u=o("platinum"),{isLoading:d,data:m}=Object($a.a)(),{total:p}=null!=m?m:{total:0},b=!(null==s||!s.userPrivileges.write.has_all_requested),g=!(null==s||!s.userPrivileges.read.has_all_requested),E=p>0&&!0===o("platinum")&&g;return Object(r.useEffect)((()=>{E&&e(t.prepend(Ce.r.observability.slos))}),[t,E,e]),E||d?null:l.a.createElement(n,{"data-test-subj":"slosPageWelcomePrompt"},l.a.createElement(be.a,null),l.a.createElement(Pi,null),l.a.createElement(i.EuiPageTemplate.EmptyPrompt,{title:l.a.createElement(i.EuiTitle,{size:"l"},l.a.createElement("h1",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.title",{defaultMessage:"Track and deliver on your SLOs"}))),icon:l.a.createElement(i.EuiImage,{size:"fullWidth",src:Ni.a,alt:""}),color:"transparent",layout:"horizontal",hasBorder:!1,body:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.messageParagraph1",{defaultMessage:"Measure key metrics important to the business, such as service-level indicators and service-level objectives (SLIs/SLOs) to deliver on SLAs."})),l.a.createElement("p",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.messageParagraph2",{defaultMessage:"Easily report the uptime and reliability of your services to stakeholders with real-time insights."})),l.a.createElement(i.EuiSpacer,{size:"s"})),actions:l.a.createElement(l.a.Fragment,null,u?l.a.createElement(i.EuiFlexGroup,{direction:"column"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.getStartedMessage",{defaultMessage:"To get started, create your first SLO."})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement("span",null,l.a.createElement(i.EuiButton,{"data-test-subj":"o11ySloListWelcomePromptCreateSloButton",fill:!0,color:"primary",onClick:()=>{e(t.prepend(Ce.r.observability.sloCreate))},disabled:!a||!b},c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.buttonLabel",{defaultMessage:"Create SLO"}))))):l.a.createElement(i.EuiFlexGroup,{direction:"column"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.needLicenseMessage",{defaultMessage:"You need an Elastic Cloud subscription or Platinum license to use SLOs."})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,{direction:"row"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButton,{fill:!0,href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank","data-test-subj":"slosPageWelcomePromptSignupForCloudButton"},c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.signupForCloud",{defaultMessage:"Sign up for Elastic Cloud"}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiButton,{href:"https://www.elastic.co/subscriptions",target:"_blank","data-test-subj":"slosPageWelcomePromptSignupForLicenseButton"},c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.signupForLicense",{defaultMessage:"Sign up for license"}))))))),footer:l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiTitle,{size:"xxs"},l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.learnMore",{defaultMessage:"Want to learn more?"})))," ",l.a.createElement(i.EuiLink,{"data-test-subj":"o11ySloListWelcomePromptReadTheDocsLink",href:"https://www.elastic.co/guide/en/observability/current/slo.html",target:"_blank"},c.i18n.translate("xpack.observability.slo.sloList.welcomePrompt.learnMoreLink",{defaultMessage:"Read the docs"})))}))}var Gi=a(129),$i=a(180),qi=a(82);function Wi(e){if(!e)return 0;const t=Wa.b.decode(e);if(Object(ie.isLeft)(t))throw new Error(`Invalid duration string: ${e}`);return t.right.asSeconds()}var Ui=a(49);function Hi({slo:e,fromRange:t}){const{lens:{EmbeddableComponent:a}}=Object(P.a)().services,r=function(e){var t;const{euiTheme:a}=Object(i.useEuiTheme)(),r=Wa.i.is(e.budgetingMethod)?e.objective.timesliceWindow:"60s";return{title:"SLO Error Rate",description:"",visualizationType:"lnsXY",type:"lens",references:[],state:{visualization:{legend:{isVisible:!1,position:"right",showSingleSeries:!1},valueLabels:"hide",fittingFunction:"None",axisTitlesVisibilitySettings:{x:!1,yLeft:!1,yRight:!0},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},labelsOrientation:{x:0,yLeft:0,yRight:0},gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},preferredSeriesType:"area",layers:[{layerId:"8730e8af-7dac-430e-9cef-3b9989ff0866",accessors:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14"],position:"top",seriesType:"area",showGridlines:!1,layerType:"data",xAccessor:"627ded04-eae0-4437-83a1-bbb6138d2c3b",yConfig:[{forAccessor:"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14",color:a.colors.danger}]},{layerId:"34298f84-681e-4fa3-8107-d6facb32ed92",layerType:"referenceLine",accessors:["0a42b72b-cd5a-4d59-81ec-847d97c268e6","76d3bcc9-7d45-4b08-b2b1-8d3866ca0762","c531a6b1-70dd-4918-bdd0-a21535a7af05","61f9e663-10eb-41f7-b584-1f0f95418489"],yConfig:[{forAccessor:"0a42b72b-cd5a-4d59-81ec-847d97c268e6",axisMode:"left",textVisibility:!0,color:a.colors.danger,iconPosition:"right"},{forAccessor:"76d3bcc9-7d45-4b08-b2b1-8d3866ca0762",axisMode:"left",textVisibility:!0,color:a.colors.danger,iconPosition:"right"},{forAccessor:"c531a6b1-70dd-4918-bdd0-a21535a7af05",axisMode:"left",textVisibility:!0,color:a.colors.danger,iconPosition:"right"},{forAccessor:"61f9e663-10eb-41f7-b584-1f0f95418489",axisMode:"left",textVisibility:!0,color:a.colors.danger,iconPosition:"right"}]}]},query:{query:`slo.id : "${e.id}" and slo.instanceId : "${null!==(t=e.instanceId)&&void 0!==t?t:Wa.a}"`,language:"kuery"},filters:[],datasourceStates:{formBased:{layers:{"8730e8af-7dac-430e-9cef-3b9989ff0866":{columns:{"627ded04-eae0-4437-83a1-bbb6138d2c3b":{label:"@timestamp",dataType:"date",operationType:"date_histogram",sourceField:"@timestamp",isBucketed:!0,scale:"interval",params:{interval:r,includeEmptyRows:!0,dropPartials:!1}},..."occurrences"===e.budgetingMethod&&{"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0":{label:"Part of Error rate",dataType:"number",operationType:"sum",sourceField:"slo.numerator",isBucketed:!1,scale:"ratio",params:{emptyAsNull:!1},customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1":{label:"Part of Error rate",dataType:"number",operationType:"sum",sourceField:"slo.denominator",isBucketed:!1,scale:"ratio",params:{emptyAsNull:!1},customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X2":{label:"Part of Error rate",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"subtract",args:[1,{type:"function",name:"divide",args:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1"],location:{min:3,max:47},text:"(sum(slo.numerator) / sum(slo.denominator))"}],location:{min:0,max:47},text:"1 - (sum(slo.numerator) / sum(slo.denominator))"}},references:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1"],customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14":{label:"Error rate",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:"1 - (sum(slo.numerator) / sum(slo.denominator))",isFormulaBroken:!1,format:{id:"percent",params:{decimals:2}}},references:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X2"],customLabel:!0}},..."timeslices"===e.budgetingMethod&&{"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0":{label:"Part of Error rate",dataType:"number",operationType:"sum",sourceField:"slo.isGoodSlice",isBucketed:!1,scale:"ratio",params:{emptyAsNull:!1},customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1":{label:"Part of Error rate",dataType:"number",operationType:"count",sourceField:"slo.isGoodSlice",isBucketed:!1,scale:"ratio",params:{emptyAsNull:!1},customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X2":{label:"Part of Error rate",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"subtract",args:[1,{type:"function",name:"divide",args:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1"],location:{min:3,max:47},text:"(sum(slo.isGoodSlice) / count(slo.isGoodSlice))"}],location:{min:0,max:47},text:"1 - (sum(slo.isGoodSlice) / count(slo.isGoodSlice))"}},references:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1"],customLabel:!0},"9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14":{label:"Error rate",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:"1 - (sum(slo.isGoodSlice) / count(slo.isGoodSlice))",isFormulaBroken:!1,format:{id:"percent",params:{decimals:2}}},references:["9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X2"],customLabel:!0}}},columnOrder:["627ded04-eae0-4437-83a1-bbb6138d2c3b","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X0","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X1","9f69a7b0-34b9-4b76-9ff7-26dc1a06ec14X2"],incompleteColumns:{},sampling:1},"34298f84-681e-4fa3-8107-d6facb32ed92":{linkToLayers:[],columns:{"0a42b72b-cd5a-4d59-81ec-847d97c268e6X0":{label:"Part of 14.4x",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"multiply",args:[{type:"function",name:"subtract",args:[1,e.objective.target],location:{min:1,max:9},text:`1 - ${e.objective.target}`},14.4],location:{min:0,max:17},text:`(1 - ${e.objective.target}) * 14.4`}},references:[],customLabel:!0},"0a42b72b-cd5a-4d59-81ec-847d97c268e6":{label:"14.4x",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:`(1 - ${e.objective.target}) * 14.4`,isFormulaBroken:!1},references:["0a42b72b-cd5a-4d59-81ec-847d97c268e6X0"],customLabel:!0},"76d3bcc9-7d45-4b08-b2b1-8d3866ca0762X0":{label:"Part of 6x",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"multiply",args:[{type:"function",name:"subtract",args:[1,e.objective.target],location:{min:1,max:9},text:`1 - ${e.objective.target}`},6],location:{min:0,max:14},text:`(1 - ${e.objective.target}) * 6`}},references:[],customLabel:!0},"76d3bcc9-7d45-4b08-b2b1-8d3866ca0762":{label:"6x",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:`(1 - ${e.objective.target}) * 6`,isFormulaBroken:!1},references:["76d3bcc9-7d45-4b08-b2b1-8d3866ca0762X0"],customLabel:!0},"c531a6b1-70dd-4918-bdd0-a21535a7af05X0":{label:"Part of 3x",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"multiply",args:[{type:"function",name:"subtract",args:[1,e.objective.target],location:{min:1,max:9},text:`1 - ${e.objective.target}`},3],location:{min:0,max:14},text:`(1 - ${e.objective.target}) * 3`}},references:[],customLabel:!0},"c531a6b1-70dd-4918-bdd0-a21535a7af05":{label:"3x",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:`(1 - ${e.objective.target}) * 3`,isFormulaBroken:!1},references:["c531a6b1-70dd-4918-bdd0-a21535a7af05X0"],customLabel:!0},"61f9e663-10eb-41f7-b584-1f0f95418489X0":{label:"Part of 1x",dataType:"number",operationType:"math",isBucketed:!1,scale:"ratio",params:{tinymathAst:{type:"function",name:"multiply",args:[{type:"function",name:"subtract",args:[1,e.objective.target],location:{min:1,max:9},text:`1 - ${e.objective.target}`},1],location:{min:0,max:14},text:`(1 - ${e.objective.target}) * 1`}},references:[],customLabel:!0},"61f9e663-10eb-41f7-b584-1f0f95418489":{label:"1x",dataType:"number",operationType:"formula",isBucketed:!1,scale:"ratio",params:{formula:`(1 - ${e.objective.target}) * 1`,isFormulaBroken:!1},references:["61f9e663-10eb-41f7-b584-1f0f95418489X0"],customLabel:!0}},columnOrder:["0a42b72b-cd5a-4d59-81ec-847d97c268e6","0a42b72b-cd5a-4d59-81ec-847d97c268e6X0","76d3bcc9-7d45-4b08-b2b1-8d3866ca0762X0","76d3bcc9-7d45-4b08-b2b1-8d3866ca0762","c531a6b1-70dd-4918-bdd0-a21535a7af05X0","c531a6b1-70dd-4918-bdd0-a21535a7af05","61f9e663-10eb-41f7-b584-1f0f95418489X0","61f9e663-10eb-41f7-b584-1f0f95418489"],sampling:1,ignoreGlobalFilters:!1,incompleteColumns:{}}}},indexpattern:{layers:{}},textBased:{layers:{}}},internalReferences:[{type:"index-pattern",id:"32ca1ad4-81c0-4daf-b9d1-07118044bdc5",name:"indexpattern-datasource-layer-8730e8af-7dac-430e-9cef-3b9989ff0866"},{type:"index-pattern",id:"32ca1ad4-81c0-4daf-b9d1-07118044bdc5",name:"indexpattern-datasource-layer-34298f84-681e-4fa3-8107-d6facb32ed92"}],adHocDataViews:{"32ca1ad4-81c0-4daf-b9d1-07118044bdc5":{id:"32ca1ad4-81c0-4daf-b9d1-07118044bdc5",title:Ui.b,timeFieldName:"@timestamp",sourceFilters:[],fieldFormats:{},runtimeFieldMap:{},fieldAttrs:{},allowNoIndex:!1,name:"SLO Rollup Data"}}}}}(e),s=function(e){return(Wa.i.is(e.budgetingMethod)?Wi(e.objective.timesliceWindow):60)+Wi(e.settings.syncDelay)+Wi(e.settings.frequency)}(e),n=xt()(t).subtract(s,"seconds").toISOString(),o=xt()().subtract(s,"seconds").toISOString();return l.a.createElement(a,{id:"sloErrorRateChart",style:{height:190},timeRange:{from:n,to:o},attributes:r,viewMode:qi.ViewMode.VIEW,noPadding:!0})}var Qi=a(115);function Ki({threshold:e,burnRate:t,slo:a,isLoading:r}){const s=void 0===t?"NO_DATA":t>e?"BREACHED":"OK",n="NO_DATA"===s?"subdued":"BREACHED"===s?"danger":"success";return l.a.createElement(i.EuiPanel,{color:n,hasShadow:!1},l.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween",direction:"column",style:{minHeight:"100%"}},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{color:"default",size:"m"},l.a.createElement("h5",null,function(e){return"NO_DATA"===e?c.i18n.translate("xpack.observability.slo.burnRate.noDataStatusTitle",{defaultMessage:"No value"}):"BREACHED"===e?c.i18n.translate("xpack.observability.slo.burnRate.breachedStatustTitle",{defaultMessage:"Critical value breached"}):c.i18n.translate("xpack.observability.slo.burnRate.okStatusTitle",{defaultMessage:"Acceptable value"})}(s)))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{color:"subdued",size:"s"},function(e,t=1,a){return"NO_DATA"===e?c.i18n.translate("xpack.observability.slo.burnRate.noDataStatusSubtitle",{defaultMessage:"Waiting for more data."}):"BREACHED"===e?c.i18n.translate("xpack.observability.slo.burnRate.breachedStatustSubtitle",{defaultMessage:"At current rate, the error budget will be exhausted in {hour} hours.",values:{hour:yt()(xt.a.duration(Object(Qi.c)(Object(Qi.b)(a.timeWindow.duration))/t,"minutes").asHours()).format("0")}}):c.i18n.translate("xpack.observability.slo.burnRate.okStatusSubtitle",{defaultMessage:"There is no risk of error budget exhaustion."})}(s,t,a)))),l.a.createElement(i.EuiFlexGroup,{direction:"row",justifyContent:"flexEnd",alignItems:"flexEnd"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{title:void 0!==t?`${yt()(t).format("0.[00]")}x`:"--",titleColor:"default",titleSize:"s",textAlign:"right",isLoading:r,"data-test-subj":"sloDetailsBurnRateStat",description:l.a.createElement(i.EuiTextColor,{color:"default"},l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.burnRate.threshold",{defaultMessage:"Threshold is {threshold}x",values:{threshold:e}})))})))))}const Xi="CRITICAL",Ji="HIGH",Yi="MEDIUM",Zi=[{name:Xi,duration:"1h"},{name:Ji,duration:"6h"},{name:Yi,duration:"24h"},{name:"LOW",duration:"72h"}],er=[{id:Object(i.htmlIdGenerator)()(),label:c.i18n.translate("xpack.observability.slo.burnRates.fromRange.1hLabel",{defaultMessage:"1h"}),windowName:Xi,threshold:14.4,duration:1},{id:Object(i.htmlIdGenerator)()(),label:c.i18n.translate("xpack.observability.slo.burnRates.fromRange.6hLabel",{defaultMessage:"6h"}),windowName:Ji,threshold:6,duration:6},{id:Object(i.htmlIdGenerator)()(),label:c.i18n.translate("xpack.observability.slo.burnRates.fromRange.24hLabel",{defaultMessage:"24h"}),windowName:Yi,threshold:3,duration:24},{id:Object(i.htmlIdGenerator)()(),label:c.i18n.translate("xpack.observability.slo.burnRates.fromRange.72hLabel",{defaultMessage:"72h"}),windowName:"LOW",threshold:1,duration:72}];function tr({slo:e,isAutoRefreshing:t}){var a;const{isLoading:s,data:n}=function({slo:e,windows:t,shouldRefetch:a}){const{http:i}=Object(P.a)().services,{isInitialLoading:r,isLoading:l,isError:s,isSuccess:n,isRefetching:c,data:u,refetch:d}=Object(o.useQuery)({queryKey:gi.a.burnRates(e.id,e.instanceId),queryFn:async({signal:a})=>{try{var r;return await i.post(`/internal/observability/slos/${e.id}/_burn_rates`,{body:JSON.stringify({windows:t,instanceId:null!==(r=e.instanceId)&&void 0!==r?r:Wa.a}),signal:a})}catch(e){}},refetchInterval:a?st.c:void 0,refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:u,refetch:d,isLoading:l,isRefetching:c,isInitialLoading:r,isSuccess:n,isError:s}}({slo:e,shouldRefetch:t,windows:Zi}),[u,d]=Object(r.useState)(er[0].id),[m,p]=Object(r.useState)(er[0]);Object(r.useEffect)((()=>{var e;const t=null!==(e=er.find((e=>e.id===u)))&&void 0!==e?e:er[0];p(t)}),[u]);const b=xt()().subtract(m.duration,"hour").toDate(),g=m.threshold,E=null==n||null===(a=n.burnRates.find((e=>e.name===m.windowName)))||void 0===a?void 0:a.burnRate;return l.a.createElement(i.EuiPanel,{paddingSize:"m",color:"transparent",hasBorder:!0,"data-test-subj":"burnRatePanel"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween"},l.a.createElement(i.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,c.i18n.translate("xpack.observability.slo.burnRate.title",{defaultMessage:"Burn rate"})," "))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiBetaBadge,{label:c.i18n.translate("xpack.observability.slo.burnRate.technicalPreviewBadgeTitle",{defaultMessage:"Technical Preview"}),size:"s",tooltipPosition:"bottom",tooltipContent:c.i18n.translate("xpack.observability.slo.burnRate.technicalPreviewBadgeDescription",{defaultMessage:"This functionality is in technical preview and is subject to change or may be removed in future versions. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Technical preview features are not subject to the support service level agreement of official generally available features."})}))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiButtonGroup,{legend:c.i18n.translate("xpack.observability.slo.burnRate.timeRangeBtnLegend",{defaultMessage:"Select the time range"}),options:er,idSelected:u,onChange:e=>{d(e)},buttonSize:"compressed"}))),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"m"},l.a.createElement(i.EuiFlexItem,{grow:1},l.a.createElement(Ki,{threshold:g,burnRate:E,slo:e,isLoading:s})),l.a.createElement(i.EuiFlexItem,{grow:3},l.a.createElement(Hi,{slo:e,fromRange:b})))))}var ar=a(128),ir=a(91);function rr({chart:e,data:t,id:a,isLoading:s,state:n}){const{charts:o,uiSettings:u}=Object(P.a)().services,d=o.theme.useChartsTheme(),m=o.theme.useChartsBaseTheme(),{euiTheme:p}=Object(i.useEuiTheme)(),b=u.get("dateFormat"),g=u.get("format:percent:defaultPattern"),E="error"===n?p.colors.danger:p.colors.success,f="area"===e?Et.AreaSeries:Et.LineSeries,v=Object(r.useRef)(null),y=Object(ir.useActiveCursor)(o.activeCursor,v,{isDateHistogram:!0});return s?l.a.createElement(i.EuiLoadingChart,{size:"m",mono:!0,"data-test-subj":"wideChartLoading"}):l.a.createElement(Et.Chart,{size:{height:150,width:"100%"},ref:v},l.a.createElement(Et.Tooltip,{type:Et.TooltipType.VerticalCursor}),l.a.createElement(Et.Settings,{baseTheme:m,showLegend:!1,theme:[d],noResults:l.a.createElement(i.EuiIcon,{type:"visualizeApp",size:"l",color:"subdued",title:"no results"}),onPointerUpdate:y,externalPointerEvents:{tooltip:{visible:!0}},pointerUpdateDebounce:0,pointerUpdateTrigger:"x",locale:c.i18n.getLocale()}),l.a.createElement(Et.Axis,{id:"bottom",position:Et.Position.Bottom,showOverlappingTicks:!0,tickFormat:e=>xt()(e).format(b)}),l.a.createElement(Et.Axis,{id:"left",ticks:4,position:Et.Position.Left,tickFormat:e=>yt()(e).format(g),domain:{fit:!0,min:NaN,max:NaN}}),l.a.createElement(f,{color:E,data:t,fit:Et.Fit.Nearest,id:a,lineSeriesStyle:{line:{strokeWidth:1},point:{visible:!1}},xAccessor:"key",xScaleType:Et.ScaleType.Time,yAccessors:["value"],yScaleType:Et.ScaleType.Linear,yNice:!0}))}function lr({data:e,isLoading:t,slo:a}){const{uiSettings:r}=Object(P.a)().services,s=r.get("format:percent:defaultPattern"),n="DEGRADING"===a.summary.status||"VIOLATED"===a.summary.status;return l.a.createElement(i.EuiPanel,{paddingSize:"m",color:"transparent",hasBorder:!0,"data-test-subj":"errorBudgetChartPanel"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,c.i18n.translate("xpack.observability.slo.sloDetails.errorBudgetChartPanel.title",{defaultMessage:"Error budget burn down"})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{color:"subdued",size:"s"},Wa.f.is(a.timeWindow.type)?c.i18n.translate("xpack.observability.slo.sloDetails.errorBudgetChartPanel.duration",{defaultMessage:"Last {duration}",values:{duration:Object(ar.j)(a.timeWindow.duration)}}):Object(ar.i)(a.timeWindow.duration)))),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l",alignItems:"flexStart",responsive:!1},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{titleColor:n?"danger":"success",title:yt()(a.summary.errorBudget.remaining).format(s),titleSize:"s",description:c.i18n.translate("xpack.observability.slo.sloDetails.errorBudgetChartPanel.remaining",{defaultMessage:"Remaining"}),reverse:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(rr,{chart:"area",id:c.i18n.translate("xpack.observability.slo.sloDetails.errorBudgetChartPanel.chartTitle",{defaultMessage:"Error budget remaining"}),state:n?"error":"success",data:e,isLoading:t}))))}function sr(e,t,a){const{http:i}=Object(P.a)().services,{isInitialLoading:r,isLoading:l,isError:s,isSuccess:n,data:c}=Object(o.useQuery)({queryKey:gi.a.preview(t,a),queryFn:async({signal:e})=>{const r=await i.post("/internal/observability/slos/_preview",{body:JSON.stringify({indicator:t,range:a}),signal:e});return Array.isArray(r)?r:[]},retry:!1,refetchOnWindowFocus:!1,enabled:e});return{data:c,isLoading:l,isInitialLoading:r,isSuccess:n,isError:s}}function nr({slo:e,range:t}){var a,s;const{charts:n,uiSettings:o}=Object(P.a)().services,{euiTheme:u}=Object(i.useEuiTheme)(),{isLoading:d,data:m}=sr(!0,e.indicator,t),p=n.theme.useChartsTheme(),b=n.theme.useChartsBaseTheme(),g=Object(r.useRef)(null),E=Object(ir.useActiveCursor)(n.activeCursor,g,{isDateHistogram:!0}),f=o.get("dateFormat");return l.a.createElement(i.EuiPanel,{paddingSize:"m",color:"transparent",hasBorder:!0,"data-test-subj":"eventsChartPanel"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,c.i18n.translate("xpack.observability.slo.sloDetails.eventsChartPanel.title",{defaultMessage:"Good vs bad events"})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{color:"subdued",size:"s"},c.i18n.translate("xpack.observability.slo.sloDetails.eventsChartPanel.duration",{defaultMessage:"Last 24h"})))),l.a.createElement(i.EuiFlexItem,null,d&&l.a.createElement(i.EuiLoadingChart,{size:"m",mono:!0,"data-test-subj":"sliEventsChartLoading"}),!d&&l.a.createElement(Et.Chart,{size:{height:150,width:"100%"},ref:g},l.a.createElement(Et.Tooltip,{type:Et.TooltipType.VerticalCursor}),l.a.createElement(Et.Settings,{baseTheme:b,showLegend:!0,showLegendExtra:!1,legendPosition:Et.Position.Left,theme:[p],noResults:l.a.createElement(i.EuiIcon,{type:"visualizeApp",size:"l",color:"subdued",title:"no results"}),onPointerUpdate:E,externalPointerEvents:{tooltip:{visible:!0}},pointerUpdateDebounce:0,pointerUpdateTrigger:"x",locale:c.i18n.getLocale()}),l.a.createElement(Et.Axis,{id:"bottom",position:Et.Position.Bottom,showOverlappingTicks:!0,tickFormat:e=>xt()(e).format(f)}),l.a.createElement(Et.Axis,{id:"left",position:Et.Position.Left,tickFormat:e=>yt()(e).format("0,0")}),l.a.createElement(Et.BarSeries,{id:c.i18n.translate("xpack.observability.slo.sloDetails.eventsChartPanel.goodEventsLabel",{defaultMessage:"Good events"}),color:u.colors.success,barSeriesStyle:{rect:{fill:u.colors.success},displayValue:{fill:u.colors.success}},xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"key",yAccessors:["value"],stackAccessors:[0],data:null!==(a=null==m?void 0:m.map((e=>{var t;return{key:new Date(e.date).getTime(),value:null===(t=e.events)||void 0===t?void 0:t.good}})))&&void 0!==a?a:[]}),l.a.createElement(Et.BarSeries,{id:c.i18n.translate("xpack.observability.slo.sloDetails.eventsChartPanel.badEventsLabel",{defaultMessage:"Bad events"}),color:u.colors.danger,barSeriesStyle:{rect:{fill:u.colors.danger},displayValue:{fill:u.colors.danger}},xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"key",yAccessors:["value"],stackAccessors:[0],data:null!==(s=null==m?void 0:m.map((e=>{var t;return{key:new Date(e.date).getTime(),value:null===(t=e.events)||void 0===t?void 0:t.bad}})))&&void 0!==s?s:[]})))))}var or=a(160);function cr({title:e,subtitle:t}){return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiText,{size:"xs"},l.a.createElement("strong",null,e))),l.a.createElement(i.EuiFlexItem,{grow:!1},t))}function ur({indicator:e}){const{http:{basePath:t}}=Object(P.a)().services,{service:a,transactionType:r,transactionName:s,environment:n,filter:o}=e.params,u=t.prepend(Object(or.a)({environment:n,filter:o,service:a,transactionName:s,transactionType:r}));return l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.apmSource",{defaultMessage:"APM source"}),subtitle:l.a.createElement(i.EuiFlexGroup,{direction:"row",alignItems:"flexStart",gutterSize:"s",responsive:!1,wrap:!0},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiBadge,{color:"hollow",href:u},c.i18n.translate("xpack.observability.slo.sloDetails.overview.apmSource.serviceLabel",{defaultMessage:"service: {value}",values:{value:a}}))),n!==Wa.a&&l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiBadge,{color:"hollow",href:u},c.i18n.translate("xpack.observability.slo.sloDetails.overview.apmSource.environmentLabel",{defaultMessage:"environment: {value}",values:{value:n}}))),r!==Wa.a&&l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiBadge,{color:"hollow",href:u},c.i18n.translate("xpack.observability.slo.sloDetails.overview.apmSource.transactionTypeLabel",{defaultMessage:"transactionType: {value}",values:{value:r}}))),s!==Wa.a&&l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiBadge,{color:"hollow",href:u},c.i18n.translate("xpack.observability.slo.sloDetails.overview.apmSource.transactionNameLabel",{defaultMessage:"transactionName: {value}",values:{value:s}}))))})}function dr({slo:e}){const t=Object(i.useIsWithinBreakpoints)(["xs","s"]),{uiSettings:a}=Object(P.a)().services,r=a.get("format:percent:defaultPattern"),s="NO_DATA"===e.summary.status;let n=null;switch(e.indicator.type){case"sli.apm.transactionDuration":case"sli.apm.transactionErrorRate":n=l.a.createElement(ur,{indicator:e.indicator})}return l.a.createElement(i.EuiPanel,{paddingSize:"none",color:"transparent","data-test-subj":"overview"},l.a.createElement(i.EuiFlexGrid,{columns:t?2:4,gutterSize:"l",responsive:!1},l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.observedValueTitle",{defaultMessage:"Observed value"}),subtitle:l.a.createElement(i.EuiText,{size:"s"},c.i18n.translate("xpack.observability.slo.sloDetails.overview.observedValueSubtitle",{defaultMessage:"{value} (objective is {objective})",values:{value:s?"-":yt()(e.summary.sliValue).format(r),objective:yt()(e.objective.target).format(r)}}))}),l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.indicatorTypeTitle",{defaultMessage:"Indicator type"}),subtitle:l.a.createElement(i.EuiText,{size:"s"},Object(ar.k)(e.indicator.type))}),l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.timeWindowTitle",{defaultMessage:"Time window"}),subtitle:(o=e.timeWindow,Wa.f.is(o.type)?c.i18n.translate("xpack.observability.slo.sloDetails.overview.rollingTimeWindow",{defaultMessage:"{duration} rolling",values:{duration:Object(ar.j)(o.duration)}}):c.i18n.translate("xpack.observability.slo.sloDetails.overview.calendarAlignedTimeWindow",{defaultMessage:"{duration} calendar aligned",values:{duration:Object(ar.i)(o.duration)}}))}),l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.budgetingMethodTitle",{defaultMessage:"Budgeting method"}),subtitle:Wa.e.is(e.budgetingMethod)?l.a.createElement(i.EuiText,{size:"s"},ar.a):l.a.createElement(i.EuiText,{size:"s"},ar.b," (","sli.metric.timeslice"===e.indicator.type?c.i18n.translate("xpack.observability.slo.sloDetails.overview.timeslicesBudgetingMethodDetailsForTimesliceMetric",{defaultMessage:"{duration} slices",values:{duration:Object(ar.j)(e.objective.timesliceWindow)}}):c.i18n.translate("xpack.observability.slo.sloDetails.overview.timeslicesBudgetingMethodDetails",{defaultMessage:"{duration} slices, {target} target",values:{duration:Object(ar.j)(e.objective.timesliceWindow),target:yt()(e.objective.timesliceTarget).format(r)}}),")")}),l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.descriptionTitle",{defaultMessage:"Description"}),subtitle:l.a.createElement(i.EuiText,{size:"s"},e.description?e.description:"-")}),l.a.createElement(cr,{title:c.i18n.translate("xpack.observability.slo.sloDetails.overview.tagsTitle",{defaultMessage:"Tags"}),subtitle:e.tags.length>0?l.a.createElement(i.EuiFlexGroup,{direction:"row",alignItems:"flexStart",gutterSize:"s",responsive:!1,wrap:!0},e.tags.map((e=>l.a.createElement(i.EuiFlexItem,{grow:!1,key:e},l.a.createElement(i.EuiBadge,{color:"hollow"},e))))):l.a.createElement(i.EuiText,{size:"s"},"-")}),n));var o}function mr({data:e,isLoading:t,slo:a}){const{uiSettings:r}=Object(P.a)().services,s=r.get("format:percent:defaultPattern"),n="DEGRADING"===a.summary.status||"VIOLATED"===a.summary.status,o="NO_DATA"===a.summary.status;return l.a.createElement(i.EuiPanel,{paddingSize:"m",color:"transparent",hasBorder:!0,"data-test-subj":"sliChartPanel"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h2",null,c.i18n.translate("xpack.observability.slo.sloDetails.sliHistoryChartPanel.title",{defaultMessage:"Historical SLI"})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,{color:"subdued",size:"s"},Wa.f.is(a.timeWindow.type)?c.i18n.translate("xpack.observability.slo.sloDetails.sliHistoryChartPanel.duration",{defaultMessage:"Last {duration}",values:{duration:Object(ar.j)(a.timeWindow.duration)}}):Object(ar.i)(a.timeWindow.duration)))),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l",alignItems:"flexStart",responsive:!1},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{titleColor:n?"danger":"success",title:o?"-":yt()(a.summary.sliValue).format(s),titleSize:"s",description:c.i18n.translate("xpack.observability.slo.sloDetails.sliHistoryChartPanel.current",{defaultMessage:"Observed value"}),reverse:!0})),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiStat,{title:yt()(a.objective.target).format(s),titleSize:"s",description:c.i18n.translate("xpack.observability.slo.sloDetails.sliHistoryChartPanel.objective",{defaultMessage:"Objective"}),reverse:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(rr,{chart:"line",id:c.i18n.translate("xpack.observability.slo.sloDetails.sliHistoryChartPanel.chartTitle",{defaultMessage:"SLI value"}),state:n?"error":"success",data:e,isLoading:t}))))}const pr="xpack.observability.slo.sloDetails.alertTable";function br({slo:e}){var t;const{triggersActionsUi:{alertsTableConfigurationRegistry:a,getAlertsStateTable:s}}=Object(P.a)().services;return l.a.createElement(r.Fragment,null,l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"xl"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(s,{alertsTableConfigurationRegistry:a,configurationId:_.ob.OBSERVABILITY,id:pr,"data-test-subj":"alertTable",featureIds:[_.ob.SLO,_.ob.OBSERVABILITY],query:{bool:{filter:[{term:{"slo.id":e.id}},{term:{"slo.instanceId":null!==(t=e.instanceId)&&void 0!==t?t:Wa.a}}]}},showAlertStatusWithFlapping:!0,pageSize:100}))))}const gr="tabId",Er="overview",fr="alerts",vr=864e5;function yr({slo:e,isAutoRefreshing:t}){var a,s,n,o;const{search:u}=Object(R.useLocation)(),{data:d}=Object(Ha.a)({sloIdsAndInstanceIds:[[e.id,null!==(a=e.instanceId)&&void 0!==a?a:Wa.a]],shouldRefetch:t}),{isLoading:m,data:p=[]}=Object(Qa.a)({list:[{sloId:e.id,instanceId:null!==(s=e.instanceId)&&void 0!==s?s:Wa.a}],shouldRefetch:t}),b=p.find((t=>{var a;return t.sloId===e.id&&t.instanceId===(null!==(a=e.instanceId)&&void 0!==a?a:Wa.a)})),[g,E]=Object(r.useState)({start:(new Date).getTime()-vr,end:(new Date).getTime()});Object(r.useEffect)((()=>{let e;return t&&(e=setInterval((()=>{E({start:(new Date).getTime()-vr,end:(new Date).getTime()})}),6e4)),()=>clearInterval(e)}),[t]);const f=Object(ni.a)(null==b?void 0:b.data,"error_budget_remaining"),v=Object(ni.a)(null==b?void 0:b.data,"sli_value"),y=[{id:Er,name:c.i18n.translate("xpack.observability.slo.sloDetails.tab.overviewLabel",{defaultMessage:"Overview"}),"data-test-subj":"overviewTab",content:l.a.createElement(r.Fragment,null,l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"xl"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(dr,{slo:e})),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(tr,{slo:e,isAutoRefreshing:t})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(mr,{data:v,isLoading:m,slo:e})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(lr,{data:f,isLoading:m,slo:e})),"sli.metric.timeslice"!==e.indicator.type?l.a.createElement(i.EuiFlexItem,null,l.a.createElement(nr,{slo:e,range:g})):null)))},{id:fr,name:c.i18n.translate("xpack.observability.slo.sloDetails.tab.alertsLabel",{defaultMessage:"Alerts"}),"data-test-subj":"alertsTab",append:l.a.createElement(i.EuiNotificationBadge,{className:"eui-alignCenter",size:"m"},null!==(n=d&&d.get(e))&&void 0!==n?n:0),content:l.a.createElement(br,{slo:e})}],[h,x]=Object(r.useState)((()=>{const e=new URLSearchParams(u).get(gr);return e&&[Er,fr].includes(e)?e:Er}));return l.a.createElement(i.EuiTabbedContent,{"data-test-subj":"sloDetailsTabbedContent",tabs:y,selectedTab:null!==(o=y.find((e=>e.id===h)))&&void 0!==o?o:y[0],onTabClick:e=>{return t=e.id,void x(t);var t}})}var hr=a(189);function xr(e){const{isLoading:t,slo:a}=e;return t?l.a.createElement(i.EuiLoadingSpinner,{"data-test-subj":"loadingTitle"}):a?l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,{grow:!1},a.name),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center",justifyContent:"flexStart",responsive:!1},l.a.createElement(pi.a,{slo:a}),l.a.createElement(hr.a,{slo:a})))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{gutterSize:"m"},l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiText,{color:"subdued",size:"xs"},l.a.createElement("strong",null,c.i18n.translate("xpack.observability.slo.sloDetails.headerTitle.lastUpdatedMessage",{defaultMessage:"Last updated on"}))," ",xt()(a.updatedAt).format("ll"))),l.a.createElement(i.EuiFlexItem,{grow:!1},l.a.createElement(i.EuiText,{color:"subdued",size:"xs"},l.a.createElement("strong",null,c.i18n.translate("xpack.observability.slo.sloDetails.headerTitle.createdMessage",{defaultMessage:"Created on"}))," ",xt()(a.createdAt).format("ll"))))):null}var Sr=a(188);function Tr({isLoading:e,slo:t}){const{application:{navigateToUrl:a,capabilities:s},http:{basePath:n},share:{url:{locators:o}},triggersActionsUi:{getAddRuleFlyout:u}}=Object(P.a)().services,d=s.apm.show,{hasWriteCapabilities:m}=Object(Ga.a)(),[p,b]=Object(r.useState)(!1),[g,E]=Object(r.useState)(!1),[f,v]=Object(r.useState)(!1),{mutate:y}=Object(Ei.a)(),h=()=>b(!1),x=Object(di.a)(),S=Object(r.useCallback)((e=>setTimeout((()=>a(e)))),[a]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiPopover,{"data-test-subj":"sloDetailsHeaderControlPopover",button:l.a.createElement(i.EuiButton,{"data-test-subj":"o11yHeaderControlActionsButton",fill:!0,iconSide:"right",iconType:"arrowDown",iconSize:"s",onClick:()=>b((e=>!e)),disabled:e||!t},c.i18n.translate("xpack.observability.slo.sloDetails.headerControl.actions",{defaultMessage:"Actions"})),isOpen:p,closePopover:h},l.a.createElement(i.EuiContextMenuPanel,{size:"m",items:[l.a.createElement(i.EuiContextMenuItem,{key:"edit",disabled:!m,icon:"pencil",onClick:()=>{t&&S(n.prepend(Ce.r.observability.sloEdit(t.id)))},"data-test-subj":"sloDetailsHeaderControlPopoverEdit"},c.i18n.translate("xpack.observability.slo.sloDetails.headerControl.edit",{defaultMessage:"Edit"})),l.a.createElement(i.EuiContextMenuItem,{key:"createBurnRateRule",disabled:!m,icon:"bell",onClick:()=>{h(),E(!0)},"data-test-subj":"sloDetailsHeaderControlPopoverCreateRule"},c.i18n.translate("xpack.observability.slo.sloDetails.headerControl.createBurnRateRule",{defaultMessage:"Create new alert rule"})),l.a.createElement(i.EuiContextMenuItem,{key:"manageRules",disabled:!m,icon:"gear",onClick:async()=>{const e=o.get(G.rulesLocatorID);null!=t&&t.id&&e&&e.navigate({params:{sloId:t.id}},{replace:!1})},"data-test-subj":"sloDetailsHeaderControlPopoverManageRules"},c.i18n.translate("xpack.observability.slo.sloDetails.headerControl.manageRules",{defaultMessage:"Manage rules"}))].concat(t&&Object(Sr.a)(t.indicator.type)?l.a.createElement(i.EuiContextMenuItem,{key:"exploreInApm",icon:"bullseye",disabled:!d,onClick:()=>{if("sli.apm.transactionDuration"===(null==t?void 0:t.indicator.type)||"sli.apm.transactionErrorRate"===(null==t?void 0:t.indicator.type)){const{indicator:{params:{environment:e,filter:a,service:i,transactionName:r,transactionType:l}},timeWindow:{duration:s}}=t,o=Object(or.a)({duration:s,environment:e,filter:a,service:i,transactionName:r,transactionType:l});S(n.prepend(o))}},"data-test-subj":"sloDetailsHeaderControlPopoverExploreInApm"},c.i18n.translate("xpack.observability.slos.sloDetails.headerControl.exploreInApm",{defaultMessage:"Service details"})):[]).concat(l.a.createElement(i.EuiContextMenuItem,{key:"clone",disabled:!m,icon:"copy",onClick:async()=>{t&&(b(!1),x(t))},"data-test-subj":"sloDetailsHeaderControlPopoverClone"},c.i18n.translate("xpack.observability.slo.slo.item.actions.clone",{defaultMessage:"Clone"})),l.a.createElement(i.EuiContextMenuItem,{key:"delete",icon:"trash",disabled:!m,onClick:()=>{v(!0),b(!1)},"data-test-subj":"sloDetailsHeaderControlPopoverDelete"},c.i18n.translate("xpack.observability.slo.slo.item.actions.delete",{defaultMessage:"Delete"})))})),t&&g?l.a.createElement(u,{consumer:G.sloFeatureId,ruleTypeId:ce.g,canChangeTrigger:!1,onClose:()=>{E(!1)},initialValues:{name:`${t.name} burn rate`,params:{sloId:t.id}},useRuleProducer:!0}):null,t&&f?l.a.createElement(ti.a,{slo:t,onCancel:()=>{v(!1)},onConfirm:async()=>{t&&(y({id:t.id,name:t.name}),S(n.prepend(Ce.r.observability.slos)))}}):null)}const kr="instanceId";function Or(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(P.a)().services,{ObservabilityPageTemplate:a}=Object($.a)(),{hasAtLeast:s}=za(),n=s("platinum"),{sloId:u}=Object(R.useParams)(),d=function(){const{search:e}=Object(R.useLocation)(),t=new URLSearchParams(e).get(kr);return t&&t!==Wa.a?t:void 0}(),{storeAutoRefreshState:m,getAutoRefreshState:p}=Ri(),[b,g]=Object(r.useState)(p()),{isLoading:E,data:f}=Object(Gi.a)({sloId:u,instanceId:d,shouldRefetch:b}),v=Boolean(Object(o.useIsMutating)());if(Object(N.useBreadcrumbs)(function(e,t){var a;return[{href:e.prepend(Ce.r.observability.slos),text:c.i18n.translate("xpack.observability.breadcrumbs.slosLinkText",{defaultMessage:"SLOs"}),deepLinkId:"observability-overview:slos"},{text:null!==(a=null==t?void 0:t.name)&&void 0!==a?a:c.i18n.translate("xpack.observability.breadcrumbs.sloDetailsLinkText",{defaultMessage:"Details"})}]}(t,f)),!E&&void 0===f)return l.a.createElement($i.a,null);!1===n&&e(t.prepend(Ce.r.observability.slos));const y=E||v;return l.a.createElement(a,{pageHeader:{pageTitle:l.a.createElement(xr,{isLoading:y,slo:f}),rightSideItems:[l.a.createElement(Tr,{isLoading:y,slo:f}),l.a.createElement(ji,{disabled:y,isAutoRefreshing:b,onClick:()=>{g(!b),m(!b)}}),l.a.createElement(Ci,{disabled:y})],bottomBorder:!1},"data-test-subj":"sloDetailsPage"},l.a.createElement(be.a,null),E&&l.a.createElement(i.EuiLoadingSpinner,{"data-test-subj":"sloDetailsLoading"}),!E&&l.a.createElement(yr,{slo:f,isAutoRefreshing:b}))}var Fr=a(104),wr=a(90),Ir=a(94);const jr=[{value:"sli.kql.custom",text:ar.e},{value:"sli.metric.custom",text:ar.f},{value:"sli.metric.timeslice",text:ar.h},{value:"sli.histogram.custom",text:ar.g},{value:"sli.apm.transactionDuration",text:ar.d},{value:"sli.apm.transactionErrorRate",text:ar.c}],Mr=[{value:"occurrences",text:ar.a},{value:"timeslices",text:ar.b}],Lr=[{value:"rolling",text:c.i18n.translate("xpack.observability.slo.sloEdit.timeWindow.rolling",{defaultMessage:"Rolling"})},{value:"calendarAligned",text:c.i18n.translate("xpack.observability.slo.sloEdit.timeWindow.calendarAligned",{defaultMessage:"Calendar aligned"})}],Cr=[{value:"1w",text:c.i18n.translate("xpack.observability.slo.sloEdit.calendarTimeWindow.weekly",{defaultMessage:"Weekly"})},{value:"1M",text:c.i18n.translate("xpack.observability.slo.sloEdit.calendarTimeWindow.monthly",{defaultMessage:"Monthly"})}],Ar=[90,30,7].map((e=>({value:`${e}d`,text:c.i18n.translate("xpack.observability.slo.sloEdit.rollingTimeWindow.days",{defaultMessage:"{number} days",values:{number:e}})}))),Rr={type:"sli.kql.custom",params:{index:"",filter:"",good:"",total:"",timestampField:""}},Dr={type:"sli.metric.custom",params:{index:"",filter:"",good:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},total:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},timestampField:""}},Pr={type:"sli.metric.timeslice",params:{index:"",filter:"",metric:{metrics:[{name:"A",aggregation:"avg",field:""}],equation:"A",comparator:"GT",threshold:0},timestampField:""}},Br={type:"sli.histogram.custom",params:{index:"",timestampField:"",filter:"",good:{field:"",aggregation:"value_count"},total:{field:"",aggregation:"value_count"}}},_r={type:"sli.apm.transactionDuration",params:{service:"",environment:"",transactionType:"",transactionName:"",threshold:250,filter:"",index:""}},Nr={type:"sli.apm.transactionErrorRate",params:{service:"",environment:"",transactionType:"",transactionName:"",filter:"",index:""}},Vr={name:"",description:"",indicator:Rr,timeWindow:{duration:Ar[1].value,type:"rolling"},tags:[],budgetingMethod:Mr[0].value,objective:{target:99},groupBy:Wa.a},zr=(Ar[1].value,Mr[0].value,Wa.a,c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.gtLabel",{defaultMessage:"Greater than"})),Gr=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.gteLabel",{defaultMessage:"Greater than or equal to"}),$r=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.ltLabel",{defaultMessage:"Less than"}),qr=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.lteLabel",{defaultMessage:"Less than or equal to"}),Wr={GT:zr,GTE:Gr,LT:$r,LTE:qr},Ur=[{text:zr,value:"GT"},{text:Gr,value:"GTE"},{text:$r,value:"LT"},{text:qr,value:"LTE"}];function Hr(e){return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:e.objective.target/100,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}},tags:e.tags,groupBy:e.groupBy}}const Qr="create-rule";function Kr({getFieldState:e,getValues:t,formState:a,watch:i}){let r=!1;switch(i("indicator.type")){case"sli.metric.custom":const i=()=>{var a;const i=t("indicator.params.good"),r=!e("indicator.params.good.equation").invalid,l=Object(ke.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>!!Wa.d.is(e)||!(!Wa.c.is(e)||null==e.field)));return r&&l},l=()=>{var a;const i=t("indicator.params.total"),r=!e("indicator.params.total.equation").invalid,l=Object(ke.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>!!Wa.d.is(e)||!(!Wa.c.is(e)||null==e.field)));return r&&l};r=["indicator.params.index","indicator.params.filter","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&i()&&l();break;case"sli.metric.timeslice":const s=()=>{var a;const i=t("indicator.params.metric"),r=!e("indicator.params.metric.equation").invalid,l=Object(ke.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>Wa.g.is(e)?Boolean(e.field):!Wa.h.is(e)||Boolean(e.field)&&Boolean(e.percentile)));return r&&l};r=["indicator.params.index","indicator.params.filter","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&s();break;case"sli.histogram.custom":const n=e=>{if("value_count"===t(`indicator.params.${e}.aggregation`))return!0;const a=t(`indicator.params.${e}.from`),i=t(`indicator.params.${e}.to`);return null!=a&&null!=i&&a<i};r=["indicator.params.index","indicator.params.filter","indicator.params.timestampField","indicator.params.good.aggregation","indicator.params.total.aggregation","indicator.params.good.field","indicator.params.total.field","indicator.params.good.filter","indicator.params.total.filter"].every((t=>!e(t).invalid))&&["indicator.params.good.aggregation","indicator.params.total.aggregation","indicator.params.good.field","indicator.params.total.field","indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&n("good")&&n("total");break;case"sli.kql.custom":r=["indicator.params.index","indicator.params.filter","indicator.params.total","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.good","indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)));break;case"sli.apm.transactionDuration":r=["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName","indicator.params.threshold"].every((i=>!e(i,a).invalid&&""!==t(i)))&&!e("indicator.params.index",a).invalid;break;case"sli.apm.transactionErrorRate":r=["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName"].every((i=>!e(i,a).invalid&&""!==t(i)))&&["indicator.params.index"].every((t=>!e(t,a).invalid));break;default:r=!1}return{isIndicatorSectionValid:r,isObjectiveSectionValid:["budgetingMethod","timeWindow.duration","objective.target","objective.timesliceTarget","objective.timesliceWindow"].every((t=>void 0===e(t).error)),isDescriptionSectionValid:!e("name").invalid&&""!==t("name")&&!e("description").invalid}}function Xr(){const{control:e,getFieldState:t}=Object(Fr.useFormContext)(),a=Object(i.useGeneratedHtmlId)({prefix:"sloName"}),r=Object(i.useGeneratedHtmlId)({prefix:"sloDescription"}),s=Object(i.useGeneratedHtmlId)({prefix:"tags"});return l.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:ms},"data-test-subj":"sloEditFormDescriptionSection"},l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:t("name").invalid,label:c.i18n.translate("xpack.observability.slo.sloEdit.description.sloName",{defaultMessage:"SLO Name"})},l.a.createElement(Fr.Controller,{name:"name",control:e,rules:{required:!0},render:({field:{ref:e,...t},fieldState:r})=>l.a.createElement(i.EuiFieldText,g()({},t,{fullWidth:!0,isInvalid:r.invalid,id:a,"data-test-subj":"sloFormNameInput",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.description.sloNamePlaceholder",{defaultMessage:"Name for the SLO"})}))}))),l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("xpack.observability.slo.sloEdit.description.sloDescription",{defaultMessage:"Description"})},l.a.createElement(Fr.Controller,{name:"description",defaultValue:"",control:e,rules:{required:!1},render:({field:{ref:e,...t}})=>l.a.createElement(i.EuiTextArea,g()({},t,{fullWidth:!0,id:r,"data-test-subj":"sloFormDescriptionTextArea",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.description.sloDescriptionPlaceholder",{defaultMessage:"A short description of the SLO"})}))}))),l.a.createElement(i.EuiFlexItem,{grow:!0},l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("xpack.observability.slo.sloEdit.tags.label",{defaultMessage:"Tags"})},l.a.createElement(Fr.Controller,{name:"tags",control:e,defaultValue:[],rules:{required:!1},render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiComboBox,g()({},t,{id:s,fullWidth:!0,"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.tags.placeholder",{defaultMessage:"Add tags"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.tags.placeholder",{defaultMessage:"Add tags"}),isInvalid:a.invalid,options:[],noSuggestions:!0,selectedOptions:Jr(t.value),onChange:e=>{if(e.length)return t.onChange(e.map((e=>e.value)));t.onChange([])},onCreateOption:(e,a=[])=>{var i;const r=e.trim().toLowerCase();if(!r)return;const l=null!==(i=t.value)&&void 0!==i?i:[];-1===l.findIndex((e=>e.trim().toLowerCase()===r))&&t.onChange([...l,e])},isClearable:!0,"data-test-subj":"sloEditTagsSelector"}))})))))}function Jr(e=[]){return e.map((e=>({label:e,value:e,"data-test-subj":`${e}Option`})))}var Yr=a(28),Zr=a.n(Yr);function el(){const{http:e}=Object(P.a)().services,{isInitialLoading:t,isLoading:a,isError:i,isSuccess:r,isRefetching:l,data:s}=Object(o.useQuery)({queryKey:["fetchApmIndices"],queryFn:async({signal:t})=>{try{const i=(await e.get("/internal/apm/settings/apm-index-settings",{signal:t})).apmIndexSettings.find((e=>"metric"===e.configurationName));let r="";var a;return i&&(r=null!==(a=i.savedValue)&&void 0!==a?a:i.defaultValue),r}catch(e){}},refetchOnWindowFocus:!1});return{data:t?"":null!=s?s:"",isLoading:t||a||l,isSuccess:r,isError:i}}var tl=a(109);function al(e){const{dataViews:t}=Object(P.a)().services,{isLoading:a,isError:i,isSuccess:r,data:l}=Object(o.useQuery)({queryKey:["fetchIndexPatternFields",e],queryFn:async({signal:a})=>{if(!e)return[];try{return await t.getFieldsForWildcard({pattern:e,allowNoIndex:!0})}catch(e){throw new Error(`Something went wrong. Error: ${e}`)}},retry:!1,refetchOnWindowFocus:!1,enabled:Boolean(e)});return{isLoading:a,isError:i,isSuccess:r,data:l}}const il=[];function rl({allowAllOption:e=!0,dataTestSubj:t,fieldName:a,label:s,name:n,placeholder:u,tooltip:d}){const{control:m,watch:p,getFieldState:b}=Object(Fr.useFormContext)(),E=p("indicator.params.service"),[f,v]=Object(r.useState)(""),{suggestions:y,isLoading:h}=function({fieldName:e,search:t="",serviceName:a=""}){const{http:i}=Object(P.a)().services,{isInitialLoading:r,isLoading:l,isError:s,isSuccess:n,isRefetching:c,data:u}=Object(o.useQuery)({queryKey:["fetchApmSuggestions",e,t,a],queryFn:async({signal:r})=>{try{const{terms:l=[]}=await i.get("/internal/apm/suggestions",{query:{fieldName:e,start:xt()().subtract(2,"days").toISOString(),end:xt()().toISOString(),fieldValue:t,...!!a&&"service.name"!==e&&{serviceName:a}},signal:r});return l}catch(e){}},refetchOnWindowFocus:!1,keepPreviousData:!0});return{suggestions:r?il:null!=u?u:il,isLoading:r||l||c,isSuccess:n,isError:s}}({fieldName:a,search:f,serviceName:E}),x=Object(ke.debounce)((e=>v(e)),200),S=(e?[{value:Wa.a,label:c.i18n.translate("xpack.observability.slo.sloEdit.fieldSelector.all",{defaultMessage:"All"})}]:[]).concat(function(e){return e.map((e=>({label:e,value:e}))).sort(((e,t)=>String(e.label).localeCompare(t.label)))}(y)),T="indicator.params.service"!==n&&!E;return l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:d?l.a.createElement("span",null,s," ",d):s,isInvalid:b(n).invalid},l.a.createElement(Fr.Controller,{defaultValue:"",name:n,control:m,rules:{required:!T},render:({field:e,fieldState:a})=>l.a.createElement(i.EuiComboBox,g()({},e,{"aria-label":u,async:!0,"data-test-subj":t,isClearable:!0,isDisabled:T,isInvalid:a.invalid,isLoading:h,onChange:t=>{if(t.length)return e.onChange(t[0].value);e.onChange("")},onSearchChange:e=>x(e),options:S,placeholder:u,selectedOptions:e.value&&"string"==typeof e.value?[{value:e.value,label:e.value,"data-test-subj":`${t}SelectedValue`}]:[],singleSelection:!0}))})))}const ll=36e5;function sl({formatPattern:e,threshold:t,thresholdDirection:a,thresholdColor:s,thresholdMessage:n}){const{watch:o,getFieldState:u,formState:d,getValues:m}=Object(Fr.useFormContext)(),{charts:p,uiSettings:b}=Object(P.a)().services,{isIndicatorSectionValid:g}=Kr({getFieldState:u,getValues:m,formState:d,watch:o}),[E,f]=Object(r.useState)({start:(new Date).getTime()-ll,end:(new Date).getTime()}),{data:v,isLoading:y,isSuccess:h,isError:x}=function(e,t,a){const i=JSON.stringify(t),[l,s]=Object(r.useState)(i),n=Object(r.useCallback)(Object(ke.debounce)((e=>s(e)),800),[]);return Object(r.useEffect)((()=>{l!==i&&n(i)}),[l,i,n]),sr(e,JSON.parse(l),a)}(g,o("indicator"),E),S=p.theme.useChartsTheme(),T=p.theme.useChartsBaseTheme(),k=b.get("dateFormat"),O=null!=e?e:b.get("format:percent:defaultPattern"),F=(v||[]).map((e=>e.sliValue)),w=Object(ke.max)(F),I=Object(ke.min)(F),j={fit:!0,min:null!=t&&null!=I&&t<I?t:I||NaN,max:null!=t&&null!=w&&t>w?t:w||NaN},M=l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.dataPreviewChart.panelLabel",defaultMessage:"SLI preview"}))),l.a.createElement(i.EuiSpacer,{size:"s"}));if(!g)return l.a.createElement(i.EuiFlexItem,null,M,l.a.createElement(i.EuiFormRow,{fullWidth:!0},l.a.createElement(i.EuiPanel,{hasBorder:!0,hasShadow:!1,style:{minHeight:194}},l.a.createElement(i.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{minHeight:160}},l.a.createElement(i.EuiFlexItem,{grow:!1},c.i18n.translate("xpack.observability.slo.sloEdit.dataPreviewChart.explanationMessage",{defaultMessage:"Fill the indicator fields to see visualisation of the current metrics"}))))));const L=null!=t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Et.LineAnnotation,{id:"thresholdAnnotation",domainType:Et.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{strokeWidth:2,stroke:s||"#000",opacity:1}}}),l.a.createElement(Et.RectAnnotation,{dataValues:[{coordinates:"above"===a?{y0:t,y1:w}:{y0:I,y1:t},details:n}],id:"thresholdShade",style:{fill:s||"#000",opacity:.1}}));return l.a.createElement(i.EuiFlexItem,null,M,l.a.createElement(i.EuiFormRow,{fullWidth:!0},l.a.createElement(i.EuiPanel,{hasBorder:!0,hasShadow:!1,style:{minHeight:194}},(y||x)&&l.a.createElement(i.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:160}},l.a.createElement(i.EuiFlexItem,{grow:!1},y&&l.a.createElement(i.EuiLoadingChart,{size:"m",mono:!0}),x&&l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.dataPreviewChart.errorMessage",{defaultMessage:"The current indicator settings are invalid"})))),h&&l.a.createElement(Et.Chart,{size:{height:160,width:"100%"}},l.a.createElement(Et.Tooltip,{type:"vertical"}),l.a.createElement(Et.Settings,{baseTheme:T,showLegend:!1,theme:[{...S,lineSeriesStyle:{point:{visible:!1}}}],noResults:l.a.createElement(i.EuiIcon,{type:"visualizeApp",size:"l",color:"subdued",title:"no results"}),locale:c.i18n.getLocale()}),L,l.a.createElement(Et.Axis,{id:"y-axis",title:c.i18n.translate("xpack.observability.slo.sloEdit.dataPreviewChart.yTitle",{defaultMessage:"SLI"}),ticks:5,position:Et.Position.Left,tickFormat:e=>yt()(e).format(O),domain:j}),l.a.createElement(Et.Axis,{id:"time",title:c.i18n.translate("xpack.observability.slo.sloEdit.dataPreviewChart.xTitle",{defaultMessage:"Last hour"}),tickFormat:e=>xt()(e).format(k),position:Et.Position.Bottom,timeAxisLayerCount:2,gridLine:{visible:!0},style:{tickLine:{size:1e-4,padding:4,visible:!0},tickLabel:{alignment:{horizontal:Et.Position.Left,vertical:Et.Position.Bottom},padding:0,offset:{x:0,y:0}}}}),l.a.createElement(Et.AreaSeries,{id:"SLI",xScaleType:Et.ScaleType.Time,yScaleType:Et.ScaleType.Linear,xAccessor:"date",yAccessors:["value"],data:(null!=v?v:[]).map((e=>({date:new Date(e.date).getTime(),value:e.sliValue>=0?e.sliValue:null})))})))))}function nl(e,t){const a=e.map((e=>({label:e.name,value:e.name}))).sort(((e,t)=>String(e.label).localeCompare(t.label)));return t?a.filter(t):a}function ol({indexFields:e,name:t,label:a,placeholder:s,isDisabled:n,isLoading:o,isRequired:c=!1,defaultValue:u=""}){const{control:d,getFieldState:m}=Object(Fr.useFormContext)(),[p,b]=Object(r.useState)(nl(e));return Object(r.useEffect)((()=>{b(nl(e))}),[e]),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:a,isInvalid:m(t).invalid},l.a.createElement(Fr.Controller,{defaultValue:u,name:t,control:d,rules:{required:c&&!n},render:({field:t,fieldState:a})=>l.a.createElement(i.EuiComboBox,g()({},t,{async:!0,placeholder:s,"aria-label":s,isClearable:!0,isDisabled:o||n,isInvalid:a.invalid,isLoading:o,onChange:e=>{if(e.length)return t.onChange(e[0].value);t.onChange(u)},options:p,onSearchChange:t=>{b(nl(e,(({value:e})=>e.includes(t))))},selectedOptions:e&&t.value&&e.some((e=>e.name===t.value))?[{value:t.value,label:t.value}]:[],singleSelection:!0}))})))}function cl({dataTestSubj:e,indexPatternString:t,label:a,name:r,placeholder:s,required:n,tooltip:o}){const{data:c,dataViews:u,docLinks:d,http:m,notifications:p,storage:b,uiSettings:g,unifiedSearch:E}=Object(P.a)().services,{control:f,getFieldState:v}=Object(Fr.useFormContext)(),{dataView:y}=Si({indexPatternString:t});return l.a.createElement(i.EuiFormRow,{label:o?l.a.createElement("span",null,a," ",o):a,isInvalid:v(r).invalid,fullWidth:!0},l.a.createElement(Fr.Controller,{defaultValue:"",name:r,control:f,rules:{required:Boolean(n)},render:({field:a,fieldState:i})=>l.a.createElement(xi.QueryStringInput,{appName:"Observability",bubbleSubmitEvent:!1,dataTestSubj:e,deps:{data:c,dataViews:u,docLinks:d,http:m,notifications:p,storage:b,uiSettings:g,unifiedSearch:E},disableAutoFocus:!0,disableLanguageSwitcher:!0,indexPatterns:y?[y]:[],isDisabled:!t,isInvalid:i.invalid,languageSwitcherPopoverAnchorPosition:"rightDown",placeholder:s,query:{query:String(a.value),language:"kuery"},size:"s",onChange:e=>{a.onChange(e.query)}})}))}function ul(){const{watch:e,setValue:t}=Object(Fr.useFormContext)(),{data:a}=el();Object(r.useEffect)((()=>{""!==a&&t("indicator.params.index",a)}),[t,a]);const{isLoading:s,data:n=[]}=al(a),o=n.filter((e=>e.aggregatable));return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(rl,{allowAllOption:!1,label:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.serviceName",{defaultMessage:"Service name"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.serviceName.placeholder",{defaultMessage:"Select the APM service"}),fieldName:"service.name",name:"indicator.params.service",dataTestSubj:"apmAvailabilityServiceSelector",tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.apm.serviceName.tooltip",{defaultMessage:"This is the APM service monitored by this SLO."}),position:"top"})}),l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.serviceEnvironment",{defaultMessage:"Service environment"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.serviceEnvironment.placeholder",{defaultMessage:"Select the environment"}),fieldName:"service.environment",name:"indicator.params.environment",dataTestSubj:"apmAvailabilityEnvironmentSelector"})),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.transactionType",{defaultMessage:"Transaction type"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.transactionType.placeholder",{defaultMessage:"Select the transaction type"}),fieldName:"transaction.type",name:"indicator.params.transactionType",dataTestSubj:"apmAvailabilityTransactionTypeSelector"}),l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.transactionName",{defaultMessage:"Transaction name"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmAvailability.transactionName.placeholder",{defaultMessage:"Select the transaction name"}),fieldName:"transaction.name",name:"indicator.params.transactionName",dataTestSubj:"apmAvailabilityTransactionNameSelector"})),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"apmLatencyFilterInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.filter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.filter.placeholder",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.apm.filter.tooltip",{defaultMessage:"This KQL query is used to filter the APM metrics on some relevant criteria for this SLO."}),position:"top"})}))),l.a.createElement(ol,{indexFields:o,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!a&&s,isDisabled:!a}),l.a.createElement(sl,null))}function dl(){const{control:e,watch:t,getFieldState:a,setValue:s}=Object(Fr.useFormContext)(),{data:n}=el();Object(r.useEffect)((()=>{""!==n&&s("indicator.params.index",n)}),[s,n]);const{isLoading:o,data:u=[]}=al(n),d=u.filter((e=>e.aggregatable));return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(rl,{allowAllOption:!1,label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.serviceName",{defaultMessage:"Service name"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.serviceName.placeholder",{defaultMessage:"Select the APM service"}),fieldName:"service.name",name:"indicator.params.service",dataTestSubj:"apmLatencyServiceSelector",tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.apm.serviceName.tooltip",{defaultMessage:"This is the APM service monitored by this SLO."}),position:"top"})}),l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.serviceEnvironment",{defaultMessage:"Service environment"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.serviceEnvironment.placeholder",{defaultMessage:"Select the environment"}),fieldName:"service.environment",name:"indicator.params.environment",dataTestSubj:"apmLatencyEnvironmentSelector"})),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.transactionType",{defaultMessage:"Transaction type"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.transactionType.placeholder",{defaultMessage:"Select the transaction type"}),fieldName:"transaction.type",name:"indicator.params.transactionType",dataTestSubj:"apmLatencyTransactionTypeSelector"}),l.a.createElement(rl,{label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.transactionName",{defaultMessage:"Transaction name"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.transactionName.placeholder",{defaultMessage:"Select the transaction name"}),fieldName:"transaction.name",name:"indicator.params.transactionName",dataTestSubj:"apmLatencyTransactionNameSelector"})),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.threshold.placeholder",{defaultMessage:"Threshold (ms)"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.threshold.tooltip",{defaultMessage:'Configure the threshold in milliseconds defining the "good" or "successful" requests for the SLO.'}),position:"top"})),isInvalid:a("indicator.params.threshold").invalid},l.a.createElement(Fr.Controller,{name:"indicator.params.threshold",control:e,defaultValue:250,rules:{required:!0,min:0},render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFieldNumber,g()({},t,{required:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"apmLatencyThresholdInput",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"apmLatencyFilterInput",indexPatternString:t("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.filter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.apmLatency.filter.placeholder",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.apm.filter.tooltip",{defaultMessage:"This KQL query is used to filter the APM metrics on some relevant criteria for this SLO."}),position:"top"})}))),l.a.createElement(ol,{indexFields:d,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!n&&o,isDisabled:!n}),l.a.createElement(sl,null))}function ml(){const{control:e,getFieldState:t}=Object(Fr.useFormContext)(),[a,s]=Object(r.useState)(""),{isLoading:n,data:u=[]}=function({search:e}){const{http:t}=Object(P.a)().services,{isLoading:a,isError:i,isSuccess:r,data:l}=Object(o.useQuery)({queryKey:["fetchIndices",e],queryFn:async()=>{const a=null!=e&&e.endsWith("*")?e:`${e}*`;return(await t.get(`/internal/index-pattern-management/resolve_index/${a}`)).indices.map((e=>e.name))},retry:!1,enabled:Boolean(e),refetchOnWindowFocus:!1,keepPreviousData:!0});return{isLoading:a,isError:i,isSuccess:r,data:l}}({search:a}),{isLoading:d,data:m=[]}=function({name:e="",size:t=10}){const{dataViews:a}=Object(P.a)().services,i=e.endsWith("*")?e:`${e}*`,{isLoading:r,isError:l,isSuccess:s,data:n}=Object(o.useQuery)({queryKey:["fetchDataViews",i],queryFn:async()=>a.find(i,t),retry:!1,keepPreviousData:!0,refetchOnWindowFocus:!1});return{isLoading:r,isError:l,isSuccess:s,data:n}}({name:a}),p=[];!d&&m.length>0&&p.push(function(e){return{label:c.i18n.translate("xpack.observability.slo.sloEdit.indexSelection.dataViewOptionsLabel",{defaultMessage:"Select an index pattern from an existing Data View"}),options:e.map((e=>{return{label:(t=e,`${t.getName()} (${t.getIndexPattern()})`),value:e.getIndexPattern()};var t})).sort(((e,t)=>String(e.label).localeCompare(t.label)))}}(m)),!n&&a&&p.push(function(e,t){const a=e.endsWith("*")?e:`${e}*`,i=t.length>0;return{label:c.i18n.translate("xpack.observability.slo.sloEdit.customKql.indexSelection.indexPatternLabel",{defaultMessage:"Use the index pattern"}),options:[{value:a,label:i?c.i18n.translate("xpack.observability.slo.sloEdit.customKql.indexSelection.indexPatternFoundLabel",{defaultMessage:"{searchPattern} (match {num, plural, one {# index} other {# indices}})",values:{searchPattern:a,num:t.length}}):c.i18n.translate("xpack.observability.slo.sloEdit.indexSelection.indexPatternNoMatchLabel",{defaultMessage:"{searchPattern}",values:{searchPattern:a}})}]}}(a,u));const b=Object(ke.debounce)((e=>s(e)),300),E=c.i18n.translate("xpack.observability.slo.sloEdit.indexSelection.placeholder",{defaultMessage:"Select an index pattern"});return l.a.createElement(i.EuiFormRow,{label:c.i18n.translate("xpack.observability.slo.sloEdit.customKql.indexSelection.label",{defaultMessage:"Index"}),helpText:c.i18n.translate("xpack.observability.slo.sloEdit.customKql.indexSelection.helpText",{defaultMessage:"Use * to broaden your query."}),isInvalid:t("indicator.params.index").invalid},l.a.createElement(Fr.Controller,{defaultValue:"",name:"indicator.params.index",control:e,rules:{required:!0},render:({field:e,fieldState:t})=>l.a.createElement(i.EuiComboBox,g()({},e,{"aria-label":E,async:!0,"data-test-subj":"indexSelection",isClearable:!0,isInvalid:t.invalid,isLoading:n&&d,placeholder:E,onChange:t=>{if(t.length)return e.onChange(t[0].value);e.onChange("")},options:p,onSearchChange:b,selectedOptions:e.value?[{value:e.value,label:e.value,"data-test-subj":"indexSelectionSelectedValue"}]:[],singleSelection:!0}))}))}function pl(){const{watch:e}=Object(Fr.useFormContext)(),t=e("indicator.params.index"),{isLoading:a,data:r=[]}=al(t),s=r.filter((e=>"date"===e.type)),n=r.filter((e=>e.aggregatable));return l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ml,null)),l.a.createElement(ol,{indexFields:s,name:"indicator.params.timestampField",label:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&a,isDisabled:!t,isRequired:!0})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"customKqlIndicatorFormQueryFilterInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"customKqlIndicatorFormGoodQueryInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.goodQuery",{defaultMessage:"Good query"}),name:"indicator.params.good",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.goodQueryPlaceholder",{defaultMessage:"Define the good events"}),required:!0,tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.goodQuery.tooltip",{defaultMessage:'This KQL query should return a subset of events that are considered "good" or "successful" for the purpose of calculating the SLO. The query should filter events based on some relevant criteria, such as status codes, error messages, or other relevant fields.'}),position:"top"})})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"customKqlIndicatorFormTotalQueryInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.totalQuery",{defaultMessage:"Total query"}),name:"indicator.params.total",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.totalQueryPlaceholder",{defaultMessage:"Define the total events"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customKql.totalQuery.tooltip",{defaultMessage:"This KQL query should return all events that are relevant to the SLO calculation, including both good and bad events."}),position:"top"})})),l.a.createElement(ol,{indexFields:n,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!t&&a,isDisabled:!t}),l.a.createElement(sl,null))}const bl=[{value:"avg",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.average",{defaultMessage:"Average"})},{value:"max",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.max",{defaultMessage:"Max"})},{value:"min",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.min",{defaultMessage:"Min"})},{value:"sum",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.sum",{defaultMessage:"Sum"})},{value:"cardinality",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.cardinality",{defaultMessage:"Cardinality"})},{value:"last_value",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.last_value",{defaultMessage:"Last value"})},{value:"std_deviation",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.std_deviation",{defaultMessage:"Std. Deviation"})},{value:"doc_count",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.doc_count",{defaultMessage:"Doc count"})},{value:"percentile",label:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceMetric.aggregation.percentile",{defaultMessage:"Percentile"})}],gl=bl.filter((e=>["doc_count","sum"].includes(e.value)));function El(e){const t=bl.find((t=>t.value===e));return t?t.label:e}const fl={name:"A",aggregation:"sum",field:""},vl=26,yl=65+vl,hl=Object(ke.range)(65,yl).map((e=>String.fromCharCode(e))),xl=/[^A-Z|+|\-|\s|\d+|\.|\(|\)|\/|\*|>|<|=|\?|\:|&|\!|\|]+/,Sl=e=>null===e.match(xl);function Tl(e){return e.join(" + ")}const kl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.metricLabel",{defaultMessage:"Metric"}),Ol=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.filterLabel",{defaultMessage:"Filter"}),Fl=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.totalMetric.tooltip",{defaultMessage:'This data from this field will be aggregated with the "sum" aggregation or document count.'}),position:"top"}),wl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.equationLabel",{defaultMessage:"Equation"}),Il=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.totalEquation.tooltip",{defaultMessage:"This supports basic math (A + B / C) and boolean logic (A < B ? A : B)."}),position:"top"});function jl({type:e,metricFields:t,isLoadingIndex:a}){const{control:s,watch:n,setValue:o,register:u,getFieldState:d}=Object(Fr.useFormContext)(),[m,p]=Object(r.useState)(nl(t)),[b,E]=Object(r.useState)(gl);Object(r.useEffect)((()=>{p(nl(t))}),[t]);const{fields:f,append:v,remove:y}=Object(Fr.useFieldArray)({control:s,name:`indicator.params.${e}.metrics`}),h=n(`indicator.params.${e}.equation`),x=n("indicator.params.index"),S=(null==f?void 0:f.length)===vl||!x,T=1===(null==f?void 0:f.length)||!x,k=(t,a)=>{Tl(t)===h&&o(`indicator.params.${e}.equation`,Tl(a))},O=e=>()=>{var t;const a=null!==(t=f.map((e=>e.name)))&&void 0!==t?t:["A"],i=a[e];k(a,Object(ke.xor)(a,[i])),y(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,null==f?void 0:f.map(((r,o)=>l.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",key:r.id},l.a.createElement("input",g()({hidden:!0},u(`indicator.params.${e}.metrics.${o}.name`))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:d(`indicator.params.${e}.metrics.${o}.aggregation`).invalid,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.customMetric.aggregationLabel",{defaultMessage:"Aggregation"})," ",r.name)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.metrics.${o}.aggregation`,defaultValue:"sum",rules:{required:!0},control:s,render:({field:{ref:e,...t},fieldState:r})=>l.a.createElement(i.EuiComboBox,g()({},t,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),isClearable:!0,isInvalid:r.invalid,isDisabled:a||!x,isLoading:!!x&&a,onChange:e=>{if(e.length)return t.onChange(e[0].value);t.onChange("")},selectedOptions:x&&t.value&&gl.some((e=>e.value===t.value))?[{value:t.value,label:El(t.value)}]:[],onSearchChange:e=>{E(gl.filter((({value:t})=>t.includes(e))))},options:b}))}))),"doc_count"!==n(`indicator.params.${e}.metrics.${o}.aggregation`)&&l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:d(`indicator.params.${e}.metrics.${o}.field`).invalid,label:l.a.createElement("span",null,kl," ",r.name," ",Fl)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.metrics.${o}.field`,defaultValue:"",rules:{required:!0},shouldUnregister:!0,control:s,render:({field:{ref:e,...r},fieldState:s})=>l.a.createElement(i.EuiComboBox,g()({},r,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),isClearable:!0,isInvalid:s.invalid,isDisabled:a||!x,isLoading:!!x&&a,onChange:e=>{if(e.length)return r.onChange(e[0].value);r.onChange("")},selectedOptions:x&&r.value&&t.some((e=>e.name===r.value))?[{value:r.value,label:r.value}]:[],onSearchChange:e=>{p(nl(t,(({value:t})=>t.includes(e))))},options:m}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"customKqlIndicatorFormGoodQueryInput",indexPatternString:n("indicator.params.index"),label:`${Ol} ${r.name}`,name:`indicator.params.${e}.metrics.${o}.filter`,placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.placeholder",{defaultMessage:"KQL filter"}),required:!1,tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.tooltip",{defaultMessage:"This KQL query should return a subset of events."}),position:"top"})})),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yMetricIndicatorButton",iconType:"trash",color:"danger",style:{marginTop:"1.5em"},onClick:O(o),disabled:T,title:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.deleteLabel",{defaultMessage:"Delete metric"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.deleteLabel",{defaultMessage:"Delete metric"})}))))),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiSpacer,{size:"xs"}),l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"customMetricIndicatorAddMetricButton",color:"primary",size:"xs",iconType:"plusInCircleFilled",onClick:()=>{var e;const t=null!==(e=f.map((e=>e.name)))&&void 0!==e?e:["A"],a=Object(ke.first)(Object(ke.xor)(hl,t));k(t,[...t,a]),v({...fl,name:a})},isDisabled:S,"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.addMetricAriaLabel",{defaultMessage:"Add metric"})},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.customMetric.addMetricLabel",defaultMessage:"Add metric"})),l.a.createElement(i.EuiSpacer,{size:"m"})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.equation`,defaultValue:"",rules:{required:!0,validate:{validateEquation:Sl}},control:s,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,wl," ",Il),helpText:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.equationHelpText",{defaultMessage:"Supports basic math equations, valid charaters are: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="}),isInvalid:a.invalid,error:[c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.equation.invalidCharacters",{defaultMessage:"The equation field only supports the following characters: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="})]},l.a.createElement(i.EuiFieldText,g()({},t,{isInvalid:a.invalid,fullWidth:!0,"data-test-subj":"o11yCustomMetricEquation"})))})))}const Ml=["number","histogram"];function Ll(){const{watch:e}=Object(Fr.useFormContext)(),t=e("indicator.params.index"),{isLoading:a,data:r=[]}=al(t),s=r.filter((e=>"date"===e.type)),n=r.filter((e=>e.aggregatable)),o=r.filter((e=>Ml.includes(e.type)));return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.histogram.sourceTitle",defaultMessage:"Source"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ml,null)),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ol,{indexFields:s,name:"indicator.params.timestampField",label:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&a,isDisabled:!t,isRequired:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"customMetricIndicatorFormQueryFilterInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.customMetric.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.customMetric.goodTitle",defaultMessage:"Good events"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(jl,{type:"good",metricFields:o,isLoadingIndex:a})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.customMetric.totalTitle",defaultMessage:"Total events"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(jl,{type:"total",metricFields:o,isLoadingIndex:a})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(ol,{indexFields:n,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!t&&a,isDisabled:!t}),l.a.createElement(sl,null)))}const Cl={value_count:{value:"value_count",label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.valueCountLabel",{defaultMessage:"Value count"})},range:{value:"range",label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.rangeLabel",{defaultMessage:"Range"})}},Al=Object.values(Cl),Rl=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.aggregationTooltip",{defaultMessage:'The "value count" aggreation will return the total count for the histogram field. Range will return the count from the histogram field that is within the range defined below.'}),position:"top"}),Dl=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.fromTooltip",{defaultMessage:'The "from" value is inclusive.'}),position:"top"}),Pl=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.toTooltip",{defaultMessage:'The "to" value is NOT inclusive.'}),position:"top"}),Bl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.aggregationLabel",{defaultMessage:"Aggregation"}),_l=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.metricLabel",{defaultMessage:"Field"}),Nl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.toLabel",{defaultMessage:"To"}),Vl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.fromLabel",{defaultMessage:"From"});function zl({type:e,histogramFields:t,isLoadingIndex:a}){const{control:s,watch:n,getFieldState:o}=Object(Fr.useFormContext)(),[u,d]=Object(r.useState)(nl(t));Object(r.useEffect)((()=>{d(nl(t))}),[t]);const m=n("indicator.params.index"),p=n(`indicator.params.${e}.aggregation`);return l.a.createElement(r.Fragment,null,l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,Bl," ",Rl)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.aggregation`,rules:{required:!0},control:s,render:({field:{ref:e,...t},fieldState:r})=>l.a.createElement(i.EuiComboBox,g()({},t,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),isInvalid:r.invalid,isDisabled:!m,isLoading:!!m&&a,onChange:e=>{if(e.length)return t.onChange(e[0].value);t.onChange("")},selectedOptions:t.value?[Cl[t.value]]:[],options:Al}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:o(`indicator.params.${e}.field`).invalid,label:l.a.createElement("span",null,_l)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.field`,defaultValue:"",rules:{required:!0},control:s,render:({field:{ref:e,...r},fieldState:s})=>l.a.createElement(i.EuiComboBox,g()({},r,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.metricField.placeholder",{defaultMessage:"Select a histogram field"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.metricField.placeholder",{defaultMessage:"Select a histogram field"}),isInvalid:s.invalid,isDisabled:a||!m,isLoading:!!m&&a,onChange:e=>{if(e.length)return r.onChange(e[0].value);r.onChange("")},selectedOptions:m&&r.value&&t.some((e=>e.name===r.value))?[{value:r.value,label:r.value}]:[],onSearchChange:e=>{d(nl(t,(({value:t})=>t.includes(e))))},options:u}))})))),l.a.createElement(i.EuiSpacer,{size:"m"}),l.a.createElement(i.EuiFlexGroup,null,"range"===p&&l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,Vl," ",Dl)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.from`,defaultValue:NaN,control:s,rules:{required:!0},shouldUnregister:!0,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFieldNumber,g()({},t,{required:!0,fullWidth:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"histogramRangeFrom",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,Nl," ",Pl)},l.a.createElement(Fr.Controller,{name:`indicator.params.${e}.to`,defaultValue:NaN,rules:{required:!0},shouldUnregister:!0,control:s,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFieldNumber,g()({},t,{required:!0,fullWidth:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"histogramRangeTo",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:`histogramIndicatorForm${e}QueryInput`,indexPatternString:m,label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.kqlFilterLabel",{defaultMessage:"KQL filter"}),name:`indicator.params.${e}.filter`,placeholder:"",required:!1,tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.query.tooltip",{defaultMessage:"This KQL query should return a subset of events for this indicator."}),position:"top"})}))))}function Gl(){const{watch:e}=Object(Fr.useFormContext)(),t=e("indicator.params.index"),{isLoading:a,data:r=[]}=al(t),s=r.filter((e=>"histogram"===e.type)),n=r.filter((e=>"date"===e.type)),o=r.filter((e=>e.aggregatable));return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.histogram.sourceTitle",defaultMessage:"Source"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ml,null)),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ol,{indexFields:n,name:"indicator.params.timestampField",label:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&a,isDisabled:!t,isRequired:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"histogramIndicatorFormQueryFilterInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.histogram.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.histogram.goodTitle",defaultMessage:"Good events"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(zl,{type:"good",histogramFields:s,isLoadingIndex:a})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.histogram.totalTitle",defaultMessage:"Total events"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(zl,{type:"total",histogramFields:s,isLoadingIndex:a})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(ol,{indexFields:o,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!t&&a,isDisabled:!t}),l.a.createElement(sl,null)))}const $l=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.fieldLabel",{defaultMessage:"Field"}),ql=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.aggregationLabel",{defaultMessage:"Aggregation"}),Wl=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.filterLabel",{defaultMessage:"Filter"}),Ul=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.totalMetric.tooltip",{defaultMessage:"This is the field used in the aggregation."}),position:"top"}),Hl=["number","histogram"],Ql=["number","string"];function Kl({metricIndex:e,indexPattern:t,isLoadingIndex:a,indexFields:s}){const{control:n,watch:o}=Object(Fr.useFormContext)(),u=o(`indicator.params.metric.metrics.${e}`),d=o(`indicator.params.metric.metrics.${e}.aggregation`),[m,p]=Object(r.useState)(s.filter((e=>Hl.includes(e.type)))),[b,E]=Object(r.useState)(bl),[f,v]=Object(r.useState)(nl(m));return Object(r.useEffect)((()=>{p(s.filter((e=>"cardinality"===d?Ql.includes(e.type):Hl.includes(e.type))))}),[d,p,s]),Object(r.useEffect)((()=>{v(nl(m))}),[m,v]),l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Fr.Controller,{name:`indicator.params.metric.metrics.${e}.aggregation`,defaultValue:"avg",rules:{required:!0},control:n,render:({field:{ref:e,...r},fieldState:s})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,ql," ",u.name),isInvalid:s.invalid},l.a.createElement(i.EuiComboBox,g()({},r,{async:!0,fullWidth:!0,isClearable:!1,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.aggregationField.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.aggregationField.placeholder",{defaultMessage:"Select an aggregation"}),isInvalid:s.invalid,isDisabled:!t,isLoading:!!t&&a,onChange:e=>{if(e.length)return r.onChange(e[0].value);r.onChange("")},selectedOptions:t&&r.value&&bl.some((e=>e.value===r.value))?[{value:r.value,label:El(r.value)}]:[],onSearchChange:e=>{E(bl.filter((({value:t})=>t.includes(e))))},options:b})))})),"percentile"===d&&l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(Fr.Controller,{name:`indicator.params.metric.metrics.${e}.percentile`,defaultValue:95,rules:{required:!0,min:.001,max:99.999},shouldUnregister:!0,control:n,render:({field:{ref:e,onChange:r,...s},fieldState:n})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:n.invalid,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.percentileLabel",{defaultMessage:"Percentile"})," ",u.name)},l.a.createElement(i.EuiFieldNumber,g()({},s,{style:{width:80},"data-test-subj":"timesliceMetricPercentileNumber",required:!0,min:.1,max:99.999,step:.1,value:s.value,isInvalid:n.invalid,disabled:!t,isLoading:!!t&&a,onChange:e=>r(Number(e.target.value))})))})),"doc_count"!==d&&l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Fr.Controller,{name:`indicator.params.metric.metrics.${e}.field`,defaultValue:"",rules:{required:!0},shouldUnregister:!0,control:n,render:({field:{ref:e,...r},fieldState:s})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:s.invalid,label:l.a.createElement("span",null,$l," ",u.name," ",Ul)},l.a.createElement(i.EuiComboBox,g()({},r,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),isInvalid:s.invalid,isDisabled:!t,isLoading:!!t&&a,onChange:e=>{if(e.length)return r.onChange(e[0].value);r.onChange("")},selectedOptions:t&&r.value&&m.some((e=>e.name===r.value))?[{value:r.value,label:r.value}]:[],onSearchChange:e=>{v(nl(m,(({value:t})=>t.includes(e))))},options:f})))})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"timesliceMetricIndicatorFormMetricQueryInput",indexPatternString:o("indicator.params.index"),label:`${Wl} ${u.name}`,name:`indicator.params.metric.metrics.${e}.filter`,placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.goodQuery.placeholder",{defaultMessage:"KQL filter"}),required:!1,tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.goodQuery.tooltip",{defaultMessage:"This KQL query should return a subset of events."}),position:"top"})})))}const Xl={name:"A",aggregation:"avg",field:""},Jl=26,Yl=65+Jl,Zl=Object(ke.range)(65,Yl).map((e=>String.fromCharCode(e))),es=/[^A-Z|+|\-|\s|\d+|\.|\(|\)|\/|\*|>|<|=|\?|\:|&|\!|\|]+/,ts=e=>null===e.match(es);function as(e){return e.join(" + ")}const is=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.equationLabel",{defaultMessage:"Equation"}),rs=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.totalEquation.tooltip",{defaultMessage:"This supports basic math (A + B / C) and boolean logic (A < B ? A : B)."}),position:"top"}),ls=c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.thresholdLabel",{defaultMessage:"Threshold"}),ss=l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.threshold.tooltip",{defaultMessage:'This value combined with the comparator will determine if the slice is "good" or "bad".'}),position:"top"});function ns({indexFields:e,isLoadingIndex:t}){const{control:a,watch:r,setValue:s,register:n,getFieldState:o}=Object(Fr.useFormContext)(),{fields:u,append:d,remove:m}=Object(Fr.useFieldArray)({control:a,name:"indicator.params.metric.metrics"}),p=r("indicator.params.metric.equation"),b=r("indicator.params.index"),E=(null==u?void 0:u.length)===Jl||!b,f=1===(null==u?void 0:u.length)||!b,v=(e,t)=>{as(e)===p&&s("indicator.params.metric.equation",as(t))},y=e=>()=>{var t;const a=null!==(t=u.map((e=>e.name)))&&void 0!==t?t:["A"],i=a[e];v(a,Object(ke.xor)(a,[i])),m(e)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,null==u?void 0:u.map(((a,r)=>l.a.createElement(l.a.Fragment,{key:a.id},l.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},l.a.createElement("input",g()({hidden:!0},n(`indicator.params.metric.metrics.${r}.name`))),l.a.createElement(Kl,{isLoadingIndex:t,metricIndex:r,indexPattern:b,indexFields:e}),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yMetricIndicatorButton",iconType:"trash",color:"danger",style:{marginTop:"1.5em"},onClick:y(r),disabled:f,title:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.deleteLabel",{defaultMessage:"Delete metric"}),"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.deleteLabel",{defaultMessage:"Delete metric"})}))),l.a.createElement(i.EuiSpacer,{size:"xs"})))),l.a.createElement(i.EuiFlexGroup,null,l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiSpacer,{size:"xs"}),l.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"timesliceMetricIndicatorAddMetricButton",color:"primary",size:"xs",iconType:"plusInCircleFilled",onClick:()=>{var e;const t=null!==(e=u.map((e=>e.name)))&&void 0!==e?e:["A"],a=Object(ke.first)(Object(ke.xor)(Zl,t));v(t,[...t,a]),d({...Xl,name:a})},isDisabled:E,"aria-label":c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.addMetricAriaLabel",{defaultMessage:"Add metric"})},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.timesliceMetric.addMetricLabel",defaultMessage:"Add metric"})),l.a.createElement(i.EuiSpacer,{size:"m"})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,{gutterSize:"xs"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(Fr.Controller,{name:"indicator.params.metric.equation",defaultValue:"",rules:{required:!0,validate:{validateEquation:ts}},control:a,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.a.createElement("span",null,is," ",rs),isInvalid:a.invalid,error:[c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.equation.invalidCharacters",{defaultMessage:"The equation field only supports the following characters: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="})]},l.a.createElement(i.EuiFieldText,g()({},t,{isInvalid:a.invalid,disabled:!b,fullWidth:!0,value:t.value,"data-test-subj":"timesliceMetricEquation",onChange:e=>t.onChange(e.target.value)})))})),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(Fr.Controller,{name:"indicator.params.metric.comparator",rules:{required:!0},control:a,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:a.invalid,label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.comparatorLabel",{defaultMessage:"Comparator"})},l.a.createElement(i.EuiSelect,g()({},t,{"data-test-subj":"timesliceMetricComparatorSelection",disabled:!b,value:t.value,options:Ur,onChange:e=>t.onChange(e.target.value)})))})),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:o("indicator.params.metric.threshold").invalid,label:l.a.createElement("span",null,ls," ",ss)},l.a.createElement(Fr.Controller,{name:"indicator.params.metric.threshold",control:a,rules:{required:!0},defaultValue:0,render:({field:{ref:e,...t},fieldState:a})=>l.a.createElement(i.EuiFieldNumber,{required:!0,isInvalid:a.invalid,"data-test-subj":"timesliceMetricThreshold",value:t.value,style:{width:80},disabled:!b,onChange:e=>t.onChange(Number(e.target.value))})})))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiSpacer,{size:"xs"}),l.a.createElement(i.EuiText,{size:"xs",color:"subdued"},l.a.createElement("p",null,c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.equationHelpText",{defaultMessage:"Supports basic math equations, valid charaters are: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="}))))))}function os(){const{watch:e}=Object(Fr.useFormContext)(),t=e("indicator.params.index"),{isLoading:a,data:r=[]}=al(t),s=r.filter((e=>"date"===e.type)),n=r.filter((e=>e.aggregatable)),{uiSettings:o}=Object(P.a)().services,u=e("indicator.params.metric.threshold"),d=e("indicator.params.metric.comparator"),{euiTheme:m}=Object(i.useEuiTheme)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.sourceTitle",defaultMessage:"Source"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ml,null)),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ol,{indexFields:s,name:"indicator.params.timestampField",label:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&a,isDisabled:!t,isRequired:!0}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(cl,{dataTestSubj:"timesliceMetricIndicatorFormQueryFilterInput",indexPatternString:e("indicator.params.index"),label:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.sliType.timesliceMetric.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.timesliceMetric.metricTitle",defaultMessage:"Metric definition"}))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(ns,{indexFields:r,isLoadingIndex:a})),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiHorizontalRule,{margin:"none"})),l.a.createElement(ol,{indexFields:n,name:"groupBy",defaultValue:tl.a,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),placeholder:c.i18n.translate("xpack.observability.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!t&&a,isDisabled:!t}),l.a.createElement(sl,{formatPattern:o.get("format:number:defaultPattern"),threshold:u,thresholdDirection:["GT","GTE"].includes(d)?"above":"below",thresholdColor:m.colors.warning,thresholdMessage:`${Wr[d]} ${u}`})))}function cs({isEditMode:e}){const{control:t,watch:a}=Object(Fr.useFormContext)();return function({isEditMode:e}){const{data:t}=el(),{watch:a,unregister:i,reset:l,resetField:s}=Object(Fr.useFormContext)(),[n,o]=Object(r.useState)(a("indicator.type")),c=a("indicator.type");Object(r.useEffect)((()=>{if(c!==n&&!e)switch(o(c),i("indicator.params"),c){case"sli.metric.custom":l(Object.assign({},Vr,{indicator:Dr}),{keepDefaultValues:!0});break;case"sli.metric.timeslice":l(Object.assign({},Vr,{budgetingMethod:Mr[1].value,objective:{target:99,timesliceTarget:95,timesliceWindow:1},indicator:Pr}),{keepDefaultValues:!0});break;case"sli.kql.custom":l(Object.assign({},Vr,{indicator:Rr}),{keepDefaultValues:!0});break;case"sli.histogram.custom":l(Object.assign({},Vr,{indicator:Br}),{keepDefaultValues:!0});break;case"sli.apm.transactionDuration":l(Object.assign({},Vr,{indicator:Zr()(_r,{params:{index:t}})}),{keepDefaultValues:!0});break;case"sli.apm.transactionErrorRate":l(Object.assign({},Vr,{indicator:Zr()(Nr,{params:{index:t}})}),{keepDefaultValues:!0});break;default:Object(Ge.assertNever)(c)}}),[e,c,n,i,l,s,t])}({isEditMode:e}),l.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:ms},"data-test-subj":"sloEditFormIndicatorSection"},!e&&l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFormRow,{label:c.i18n.translate("xpack.observability.slo.sloEdit.definition.sliType",{defaultMessage:"Choose the SLI type"})},l.a.createElement(Fr.Controller,{name:"indicator.type",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>l.a.createElement(i.EuiSelect,g()({},t,{required:!0,"data-test-subj":"sloFormIndicatorTypeSelect",options:jr}))})),l.a.createElement(i.EuiSpacer,{size:"xxl"})),(()=>{switch(a("indicator.type")){case"sli.kql.custom":return l.a.createElement(pl,null);case"sli.apm.transactionDuration":return l.a.createElement(dl,null);case"sli.apm.transactionErrorRate":return l.a.createElement(ul,null);case"sli.metric.custom":return l.a.createElement(Ll,null);case"sli.histogram.custom":return l.a.createElement(Gl,null);case"sli.metric.timeslice":return l.a.createElement(os,null);default:return null}})())}function us(){const{control:e,getFieldState:t,watch:a}=Object(Fr.useFormContext)(),r=a("indicator.type");return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{isInvalid:t("objective.timesliceTarget").invalid,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.timeSliceTarget.label",{defaultMessage:"Timeslice target (%)"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.timeSliceTarget.tooltip",{defaultMessage:"The individual time slices target used to determine whether the slice is good or bad."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"objective.timesliceTarget",control:e,defaultValue:95,rules:{required:!0,min:.001,max:99.999},render:({field:{ref:e,onChange:t,...a},fieldState:s})=>l.a.createElement(i.EuiFieldNumber,g()({},a,{required:!0,disabled:"sli.metric.timeslice"===r,isInvalid:s.invalid,value:a.value,"data-test-subj":"sloFormObjectiveTimesliceTargetInput",min:.001,max:99.999,step:.001,onChange:e=>t(e.target.value)}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{isInvalid:t("objective.timesliceWindow").invalid,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.timesliceWindow.label",{defaultMessage:"Timeslice window (in minutes)"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.timesliceWindow.tooltip",{defaultMessage:"The time slice window size used to evaluate the data from."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"objective.timesliceWindow",defaultValue:"1",control:e,rules:{required:!0,min:1,max:120},render:({field:{ref:e,onChange:t,...a},fieldState:r})=>l.a.createElement(i.EuiFieldNumber,g()({},a,{isInvalid:r.invalid,required:!0,"data-test-subj":"sloFormObjectiveTimesliceWindowInput",value:a.value,min:1,max:120,step:1,onChange:e=>t(String(parseInt(e.target.value,10)))}))}))))}function ds(){var e;const{control:t,watch:a,getFieldState:s,setValue:n,formState:{defaultValues:o}}=Object(Fr.useFormContext)(),u=Object(i.useGeneratedHtmlId)({prefix:"budgetingSelect"}),d=Object(i.useGeneratedHtmlId)({prefix:"timeWindowTypeSelect"}),m=Object(i.useGeneratedHtmlId)({prefix:"timeWindowSelect"}),p=a("timeWindow.type"),b=a("indicator.type"),[E,f]=Object(r.useState)(null==o||null===(e=o.timeWindow)||void 0===e?void 0:e.type);return Object(r.useEffect)((()=>{if("calendarAligned"===p&&E!==p){var e,t,a;f(p);const i=Cr.map((e=>e.value)).includes(null!==(e=null==o||null===(t=o.timeWindow)||void 0===t?void 0:t.duration)&&void 0!==e?e:"");n("timeWindow.duration",i?null==o||null===(a=o.timeWindow)||void 0===a?void 0:a.duration:Cr[1].value)}else if("rolling"===p&&E!==p){var i,r,l;const e=Ar.map((e=>e.value)).includes(null!==(i=null==o||null===(r=o.timeWindow)||void 0===r?void 0:r.duration)&&void 0!==i?i:"");f(p),n("timeWindow.duration",e?null==o||null===(l=o.timeWindow)||void 0===l?void 0:l.duration:Ar[1].value)}}),[p,n,o,E]),l.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:ms},"data-test-subj":"sloEditFormObjectiveSection"},l.a.createElement(i.EuiFlexGrid,{columns:3},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.timeWindowType.label",{defaultMessage:"Time window"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.timeWindowType.tooltip",{defaultMessage:"Choose between a rolling or a calendar aligned window."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"timeWindow.type",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>l.a.createElement(i.EuiSelect,g()({},t,{required:!0,id:d,"data-test-subj":"sloFormTimeWindowTypeSelect",options:Lr,value:t.value}))}))),l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.timeWindowDuration.label",{defaultMessage:"Duration"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.timeWindowDuration.tooltip",{defaultMessage:"The time window duration used to compute the SLO over."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"timeWindow.duration",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>l.a.createElement(i.EuiSelect,g()({},t,{required:!0,id:m,"data-test-subj":"sloFormTimeWindowDurationSelect",options:"calendarAligned"===p?Cr:Ar,value:t.value}))})))),l.a.createElement(i.EuiSpacer,{size:"l"}),"sli.metric.timeslice"===b&&l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiCallOut,{color:"warning"},l.a.createElement("p",null,l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slo.sloEdit.sliType.timesliceMetric.objectiveMessage",defaultMessage:"The timeslice metric requires the budgeting method to be set to 'Timeslices' due to the nature of the statistical aggregations. The 'timeslice target' is also ignored in favor of the 'threshold' set in the metric definition above. The 'timeslice window' will set the size of the window the aggregation is performed on."}))),l.a.createElement(i.EuiSpacer,{size:"l"})),l.a.createElement(i.EuiFlexGrid,{columns:3},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.budgetingMethod.label",{defaultMessage:"Budgeting method"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.budgetingMethod.tooltip",{defaultMessage:"Occurrences-based SLO uses the ratio of good events over the total events during the time window. Timeslices-based SLO uses the ratio of good time slices over the total time slices during the time window."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"budgetingMethod",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>l.a.createElement(i.EuiSelect,g()({},t,{disabled:"sli.metric.timeslice"===b,required:!0,id:u,"data-test-subj":"sloFormBudgetingMethodSelect",options:Mr}))}))),"timeslices"===a("budgetingMethod")?l.a.createElement(us,null):null),l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement(i.EuiFlexGrid,{columns:3},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFormRow,{isInvalid:s("objective.target").invalid,label:l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.targetSlo.label",{defaultMessage:"Target / SLO (%)"})," ",l.a.createElement(i.EuiIconTip,{content:c.i18n.translate("xpack.observability.slo.sloEdit.targetSlo.tooltip",{defaultMessage:"The target objective in percentage for the SLO."}),position:"top"}))},l.a.createElement(Fr.Controller,{name:"objective.target",control:t,rules:{required:!0,min:.001,max:99.999},render:({field:{ref:e,onChange:t,...a},fieldState:r})=>l.a.createElement(i.EuiFieldNumber,g()({},a,{required:!0,isInvalid:r.invalid,"data-test-subj":"sloFormObjectiveTargetInput",value:a.value,min:.001,max:99.999,step:.001,onChange:e=>t(e.target.value)}))})))))}const ms=775;function ps({slo:e}){const{application:{navigateToUrl:t},http:{basePath:a}}=Object(P.a)().services,s=void 0!==e,{data:n,isInitialLoading:u}=Object(Ua.a)({sloIds:null!=e&&e.id?[e.id]:void 0}),d=function(){const e=Object(R.useHistory)(),t=Object(C.createKbnUrlStateStorage)({history:e,useHash:!1,useHashQuery:!1}).get("_a");return t?function(e){var t,a;const i=Object(ke.cloneDeep)(Vr),r=function(e){var t,a,i,r,l,s;if(void 0===e||void 0===e.type)return;const n=e.type;switch(n){case"sli.apm.transactionDuration":return{type:"sli.apm.transactionDuration",params:Object.assign({},_r.params,null!==(t=e.params)&&void 0!==t?t:{})};case"sli.apm.transactionErrorRate":return{type:"sli.apm.transactionErrorRate",params:Object.assign({},Nr.params,null!==(a=e.params)&&void 0!==a?a:{})};case"sli.histogram.custom":return{type:"sli.histogram.custom",params:Object.assign({},Br.params,null!==(i=e.params)&&void 0!==i?i:{})};case"sli.kql.custom":return{type:"sli.kql.custom",params:Object.assign({},Rr.params,null!==(r=e.params)&&void 0!==r?r:{})};case"sli.metric.custom":return{type:"sli.metric.custom",params:Object.assign({},Dr.params,null!==(l=e.params)&&void 0!==l?l:{})};case"sli.metric.timeslice":return{type:"sli.metric.timeslice",params:Object.assign({},Pr.params,null!==(s=e.params)&&void 0!==s?s:{})};default:Object(Ge.assertNever)(n)}}(e.indicator);return void 0!==r&&(i.indicator=r),e.name&&(i.name=e.name),e.description&&(i.description=e.description),e.tags&&(i.tags=e.tags),e.objective&&e.objective.target&&(i.objective={target:100*e.objective.target},e.objective.timesliceTarget&&e.objective.timesliceWindow&&(i.objective.timesliceTarget=100*e.objective.timesliceTarget,i.objective.timesliceWindow=String(Object(Qi.b)(e.objective.timesliceWindow).value))),e.budgetingMethod&&(i.budgetingMethod=e.budgetingMethod),e.groupBy&&(i.groupBy=e.groupBy),null!==(t=e.timeWindow)&&void 0!==t&&t.duration&&null!==(a=e.timeWindow)&&void 0!==a&&a.type&&(i.timeWindow={duration:e.timeWindow.duration,type:e.timeWindow.type}),i}(t):void 0}(),m=function(e){if(e)return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:100*e.objective.target,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:100*e.objective.timesliceTarget},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:String(Object(Qi.b)(e.objective.timesliceWindow).value)}},groupBy:e.groupBy,tags:e.tags}}(e),p=function(e){const[t,a]=Object(r.useState)(!1),{search:i}=Object(R.useLocation)();return new URLSearchParams(i).has(Qr)&&e&&!t&&a(!0),t}(s),[b,g]=Object(r.useState)(!0);Object(r.useEffect)((()=>{s&&n&&n[e.id].length&&g(!1)}),[s,n,e]);const E=Object(Fr.useForm)({defaultValues:Vr,values:d||m,mode:"all"}),{watch:f,getFieldState:v,getValues:y,formState:h,trigger:x}=E,S=function({trigger:e,getValues:t}){const{notifications:a}=Object(P.a)().services;return async()=>{if(!await e())return;const i=Hr(t());try{await(async e=>{var t;if(null===(t=window.navigator)||void 0===t||!t.clipboard)throw new Error("Could not copy to clipboard!");await window.navigator.clipboard.writeText(e)})(JSON.stringify(i,null,2)),a.toasts.add({title:c.i18n.translate("xpack.observability.slo.sloEdit.copyJsonNotification",{defaultMessage:"JSON copied to clipboard"})})}catch(e){a.toasts.add({title:c.i18n.translate("xpack.observability.slo.sloEdit.copyJsonFailedNotification",{defaultMessage:"Could not copy JSON to clipboard"})})}}}({trigger:x,getValues:y}),{isIndicatorSectionValid:T,isObjectiveSectionValid:k,isDescriptionSectionValid:O}=Kr({getFieldState:v,getValues:y,formState:h,watch:f}),{showDescriptionSection:F,showObjectiveSection:w}=function(e,t,a,i){const[l,s]=Object(r.useState)(e),[n,o]=Object(r.useState)(e);return Object(r.useEffect)((()=>{t||n||!a||o(!0)}),[n,a,t]),Object(r.useEffect)((()=>{!t&&!l&&a&&i&&s(!0)}),[l,a,i,t]),{showDescriptionSection:l,showObjectiveSection:n}}(s,h.isValidating,T,k),{mutateAsync:I,isLoading:j}=function(){const{application:{navigateToUrl:e},http:t,notifications:{toasts:a}}=Object(P.a)().services,i=Object(o.useQueryClient)();return Object(o.useMutation)(["createSlo"],(({slo:e})=>{const a=JSON.stringify(e);return t.post("/api/observability/slos",{body:a})}),{onMutate:async({slo:e})=>{var t,a,r,l;await i.cancelQueries({queryKey:gi.a.lists(),exact:!1});const s=i.getQueriesData({queryKey:gi.a.lists(),exact:!1}),[n,o]=null!==(t=null==s?void 0:s.at(0))&&void 0!==t?t:[],c={...e,id:Object(Ir.v4)(),summary:void 0},u={page:null!==(a=null==o?void 0:o.page)&&void 0!==a?a:1,perPage:null!==(r=null==o?void 0:o.perPage)&&void 0!==r?r:25,total:null!=o&&o.total?o.total+1:1,results:[...null!==(l=null==o?void 0:o.results)&&void 0!==l?l:[],c]};return n&&i.setQueryData(n,u),{queryKey:n,previousData:o}},onSuccess:(e,{slo:t})=>{a.addSuccess(c.i18n.translate("xpack.observability.slo.create.successNotification",{defaultMessage:"Successfully created {name}",values:{name:t.name}})),i.invalidateQueries({queryKey:gi.a.lists(),exact:!1})},onError:(r,{slo:l},s)=>{var n,o;null!=s&&s.previousData&&null!=s&&s.queryKey&&i.setQueryData(s.queryKey,s.previousData),a.addError(new Error(null!==(n=null===(o=r.body)||void 0===o?void 0:o.message)&&void 0!==n?n:r.message),{title:c.i18n.translate("xpack.observability.slo.create.errorNotification",{defaultMessage:"Something went wrong while creating {name}",values:{name:l.name}})}),e(t.basePath.prepend(Ce.r.observability.sloCreateWithEncodedForm(Object(wr.encode)(l))))}})}(),{mutateAsync:M,isLoading:L}=function(){const{application:{navigateToUrl:e},http:t,notifications:{toasts:a}}=Object(P.a)().services,i=Object(o.useQueryClient)();return Object(o.useMutation)(["updateSlo"],(({sloId:e,slo:a})=>{const i=JSON.stringify(a);return t.put(`/api/observability/slos/${e}`,{body:i})}),{onMutate:async({sloId:e,slo:t})=>{var a,r,l,s,n;await i.cancelQueries({queryKey:gi.a.lists(),exact:!1});const o=i.getQueriesData({queryKey:gi.a.lists(),exact:!1}),[c,u]=null!==(a=null==o?void 0:o.at(0))&&void 0!==a?a:[],d={...t,id:e},m={page:null!==(r=null==u?void 0:u.page)&&void 0!==r?r:1,perPage:null!==(l=null==u?void 0:u.perPage)&&void 0!==l?l:25,total:null!=u&&u.total?u.total:1,results:[...null!==(s=null==u||null===(n=u.results)||void 0===n?void 0:n.filter((t=>t.id!==e)))&&void 0!==s?s:[],d]};return c&&i.setQueryData(c,m),{previousData:u,queryKey:c,sloId:e}},onSuccess:(e,{slo:{name:t}})=>{a.addSuccess(c.i18n.translate("xpack.observability.slo.update.successNotification",{defaultMessage:"Successfully updated {name}",values:{name:t}})),i.invalidateQueries({queryKey:gi.a.lists(),exact:!1})},onError:(r,{slo:l},s)=>{var n,o;null!=s&&s.previousData&&null!=s&&s.queryKey&&i.setQueryData(s.queryKey,s.previousData),a.addError(new Error(null!==(n=null===(o=r.body)||void 0===o?void 0:o.message)&&void 0!==n?n:r.message),{title:c.i18n.translate("xpack.observability.slo.update.errorNotification",{defaultMessage:"Something went wrong when updating {name}",values:{name:l.name}})}),null!=s&&s.sloId&&e(t.basePath.prepend(Ce.r.observability.sloEditWithEncodedForm(s.sloId,Object(wr.encode)(l))))}})}(),A=Object(r.useCallback)((e=>setTimeout((()=>t(e)))),[t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Fr.FormProvider,E,l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":"sloForm"},l.a.createElement(i.EuiSteps,{steps:[{title:c.i18n.translate("xpack.observability.slo.sloEdit.definition.title",{defaultMessage:"Define SLI"}),children:l.a.createElement(cs,{isEditMode:s}),status:T?"complete":"incomplete"},{title:c.i18n.translate("xpack.observability.slo.sloEdit.objectives.title",{defaultMessage:"Set objectives"}),children:w?l.a.createElement(ds,null):null,status:w&&k?"complete":"incomplete"},{title:c.i18n.translate("xpack.observability.slo.sloEdit.description.title",{defaultMessage:"Describe SLO"}),children:F?l.a.createElement(Xr,null):null,status:F&&O?"complete":"incomplete"}]}),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s"},l.a.createElement(i.EuiCheckbox,{id:"createNewRuleCheckbox",checked:b,disabled:u,"data-test-subj":"createNewRuleCheckbox",label:l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,c.i18n.translate("xpack.observability.slo.sloEdit.createAlert.title",{defaultMessage:"Create an"})," ",l.a.createElement("strong",null,c.i18n.translate("xpack.observability.slo.sloEdit.createAlert.ruleName",{defaultMessage:"SLO burn rate alert rule"})))," ",l.a.createElement(i.EuiIconTip,{content:"Selecting this will allow you to create a new alert rule for this SLO upon saving.",position:"top"})),onChange:()=>{g(!b)}})),l.a.createElement(i.EuiSpacer,{size:"m"}),l.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"s"},l.a.createElement(i.EuiButton,{color:"primary","data-test-subj":"sloFormSubmitButton",fill:!0,isLoading:j||L,onClick:async()=>{if(!await x())return;const t=y();if(s){const i=function(e){return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:e.objective.target/100,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}},tags:e.tags,groupBy:e.groupBy}}(t);b?(await M({sloId:e.id,slo:i}),A(a.prepend(`${Ce.r.observability.sloEdit(e.id)}?${Qr}=true`))):(M({sloId:e.id,slo:i}),A(a.prepend(Ce.r.observability.slos)))}else{const e=Hr(t);if(b){const{id:t}=await I({slo:e});A(a.prepend(`${Ce.r.observability.sloEdit(t)}?${Qr}=true`))}else I({slo:e}),A(a.prepend(Ce.r.observability.slos))}}},s?c.i18n.translate("xpack.observability.slo.sloEdit.editSloButton",{defaultMessage:"Update SLO"}):c.i18n.translate("xpack.observability.slo.sloEdit.createSloButton",{defaultMessage:"Create SLO"})),l.a.createElement(i.EuiButtonEmpty,{color:"primary","data-test-subj":"sloFormCancelButton",disabled:j||L,onClick:()=>t(a.prepend(Ce.r.observability.slos))},c.i18n.translate("xpack.observability.slo.sloEdit.cancelButton",{defaultMessage:"Cancel"})),l.a.createElement(i.EuiButtonEmpty,{color:"primary",iconType:"copyClipboard","data-test-subj":"sloFormCopyJsonButton",disabled:j||L,onClick:S},c.i18n.translate("xpack.observability.slo.sloEdit.copyJsonButton",{defaultMessage:"Copy JSON"}))))),l.a.createElement(ii.a,{slo:e,isAddRuleFlyoutOpen:p,canChangeTrigger:!1}))}function bs(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(P.a)().services,{hasWriteCapabilities:a}=Object(Ga.a)(),{isError:i}=Vi(),{ObservabilityPageTemplate:r}=Object($.a)(),{sloId:s}=Object(R.useParams)(),{hasAtLeast:n}=za(),o=n("platinum"),{data:u}=Object(Gi.a)({sloId:s});return Object(N.useBreadcrumbs)([{href:t.prepend(Ce.r.observability.slos),text:c.i18n.translate("xpack.observability.breadcrumbs.sloLabel",{defaultMessage:"SLOs"}),deepLinkId:"observability-overview:slos"},...u?[{href:t.prepend(Ce.r.observability.sloDetails(u.id)),text:u.name}]:[],{text:u?c.i18n.translate("xpack.observability.breadcrumbs.sloEditLabel",{defaultMessage:"Edit"}):c.i18n.translate("xpack.observability.breadcrumbs.sloCreateLabel",{defaultMessage:"Create"})}]),!1!==o&&a&&!i||e(t.prepend(Ce.r.observability.slos)),l.a.createElement(r,{pageHeader:{pageTitle:u?c.i18n.translate("xpack.observability.sloEditPageTitle",{defaultMessage:"Edit SLO"}):c.i18n.translate("xpack.observability.sloCreatePageTitle",{defaultMessage:"Create new SLO"}),rightSideItems:[l.a.createElement(Ci,null)],bottomBorder:!1},"data-test-subj":"slosEditPage"},l.a.createElement(be.a,null),l.a.createElement(ps,{slo:u}))}var gs=a(162),Es=a(159);function fs({slo:e,onCancel:t,onConfirm:a}){const{name:r}=e;return l.a.createElement(i.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"sloResetConfirmationModal",title:c.i18n.translate("xpack.observability.slo.resetConfirmationModal.title",{defaultMessage:"Reset {name}?",values:{name:r}}),cancelButtonText:c.i18n.translate("xpack.observability.slo.resetConfirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:c.i18n.translate("xpack.observability.slo.resetConfirmationModal.resetButtonLabel",{defaultMessage:"Reset"}),onCancel:t,onConfirm:a},c.i18n.translate("xpack.observability.slo.resetConfirmationModal.descriptionText",{defaultMessage:"Resetting this SLO will also regenerate the historical data."}))}function vs({slo:e,onReset:t,onDelete:a}){const{mutateAsync:s,isLoading:n}=function(){const{http:e,notifications:{toasts:t}}=Object(P.a)().services;return Object(o.useMutation)(["resetSlo"],(({id:t,name:a})=>{try{return e.post(`/api/observability/slos/${t}/_reset`)}catch(e){return Promise.reject(c.i18n.translate("xpack.observability.slo.slo.reset.errorMessage",{defaultMessage:"Failed to reset {name} (id: {id}), something went wrong: {error}",values:{error:String(e),name:a,id:t}}))}}),{onError:(e,{name:a,id:i})=>{var r,l;t.addError(new Error(null!==(r=null===(l=e.body)||void 0===l?void 0:l.message)&&void 0!==r?r:e.message),{title:c.i18n.translate("xpack.observability.slo.slo.reset.errorNotification",{defaultMessage:"Failed to reset {name} (id: {id})",values:{name:a,id:i}})})},onSuccess:(e,{name:a})=>{t.addSuccess(c.i18n.translate("xpack.observability.slo.slo.reset.successNotification",{defaultMessage:"{name} reset successfully",values:{name:a}}))}})}(),{mutateAsync:u,isLoading:d}=Object(Ei.a)(),[m,p]=Object(r.useState)(!1),[b,g]=Object(r.useState)(!1);return l.a.createElement(i.EuiPanel,{hasBorder:!0,hasShadow:!1},l.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiText,null,l.a.createElement("span",null,e.name))),l.a.createElement(i.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center",wrap:!0},l.a.createElement(Es.a,{slo:e}),l.a.createElement(gs.a,{slo:e})))),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiButton,{"data-test-subj":"o11ySlosOutdatedDefinitionsResetButton",color:"primary",fill:!0,isLoading:n,onClick:()=>{g(!0)}},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slosOutdatedDefinitions.resetButtonLabel",defaultMessage:"Reset"}))),l.a.createElement(i.EuiFlexItem,{grow:0},l.a.createElement(i.EuiButton,{"data-test-subj":"o11ySlosOutdatedDefinitionsDeleteButton",color:"danger",fill:!0,isLoading:d,onClick:()=>{p(!0)}},l.a.createElement(ot.FormattedMessage,{id:"xpack.observability.slosOutdatedDefinitions.deleteButtonLabel",defaultMessage:"Delete"})))),m?l.a.createElement(ti.a,{slo:e,onCancel:()=>{p(!1)},onConfirm:async()=>{p(!1),await u({id:e.id,name:e.name}),a()}}):null,b?l.a.createElement(fs,{slo:e,onCancel:()=>{g(!1)},onConfirm:async()=>{g(!1),await s({id:e.id,name:e.name}),t()}}):null)}function ys({onSearch:e,onRefresh:t,initialSearch:a=""}){const[s,n]=Object(r.useState)(a),[o,u]=Object(r.useState)(a),d=()=>{s!==o?(u(s),e(s)):t()};return l.a.createElement(i.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiFieldSearch,{"data-test-subj":"o11ySlosOutdatedDefinitionsFieldSearch",fullWidth:!0,value:s,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d()}})),l.a.createElement(i.EuiFlexItem,{grow:0},o===s&&l.a.createElement(i.EuiButton,{"data-test-subj":"o11ySlosOutdatedDefinitionsRefreshButton",iconType:"refresh",onClick:d},c.i18n.translate("xpack.observability.slosOutdatedDefinitions.refreshButtonLabel",{defaultMessage:"Refresh"})),o!==s&&l.a.createElement(i.EuiButton,{"data-test-subj":"o11ySlosOutdatedDefinitionsUpdateButton",iconType:"kqlFunction",color:"success",fill:!0,onClick:d},c.i18n.translate("xpack.observability.slosOutdatedDefinitions.updateButtonLabel",{defaultMessage:"Update"}))))}function hs(){const{http:{basePath:e}}=Object(P.a)().services,{hasWriteCapabilities:t}=Object(Ga.a)(),{data:a}=Vi(),{ObservabilityPageTemplate:s}=Object($.a)();Object(N.useBreadcrumbs)([{href:e.prepend(Ce.r.observability.slos),text:c.i18n.translate("xpack.observability.breadcrumbs.slosLinkText",{defaultMessage:"SLOs"}),deepLinkId:"observability-overview:slos"},{text:c.i18n.translate("xpack.observability.breadcrumbs.slosOutdatedDefinitions",{defaultMessage:"Outdated SLO Definitions"})}]);const[n,o]=Object(r.useState)(""),[u,d]=Object(r.useState)(0),[m,p]=Object(r.useState)(10),{hasAtLeast:b}=za(),{isLoading:g,data:E,refetch:f}=Object(Di.a)({name:n,includeOutdatedOnly:!0,page:u+1,perPage:m}),{total:v}=null!=E?E:{total:0},y=!(null==a||!a.userPrivileges.write.has_all_requested)&&t,h=!0===b("platinum"),x=h&&y,S=y?h?null:l.a.createElement(i.EuiText,null,c.i18n.translate("xpack.observability.slo.slosOutdatedDefinitions.licenseError",{defaultMessage:"You must have atleast a platinum license to access this page"})):l.a.createElement(i.EuiText,null,c.i18n.translate("xpack.observability.slo.slosOutdatedDefinitions.sloPermissionsError",{defaultMessage:"You must have write permissions for SLOs to access this page"}));return l.a.createElement(s,{"data-test-subj":"slosOutdatedDefinitions",pageHeader:{pageTitle:c.i18n.translate("xpack.observability.slo.slosOutdatedDefinitions.pageTitle",{defaultMessage:"Outdated SLO Definitions"})}},l.a.createElement(be.a,null),x?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,c.i18n.translate("xpack.observability.slo.slosOutdatedDefinitions.description",{defaultMessage:"The following SLOs are from a previous version and need to either be reset to upgrade to the latest version OR deleted and removed from the system. When you reset the SLO, the transform will be updated to the latest version and the historical data will be regenerated from the source data."})),l.a.createElement(i.EuiSpacer,{size:"l"}),l.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(ys,{initialSearch:n,onRefresh:f,onSearch:o})),!g&&0===v&&l.a.createElement(Za,null),!g&&v>0&&E&&E.results.map((e=>l.a.createElement(vs,{slo:e,onDelete:f,onReset:f})))),l.a.createElement(i.EuiSpacer,{size:"m"}),!g&&E&&l.a.createElement(i.EuiTablePagination,{activePage:u,pageCount:Math.ceil(v/m),itemsPerPage:m,onChangePage:d,onChangeItemsPerPage:e=>{p(e),d(0)},itemsPerPageOptions:[10,20,50,100]})):S)}function xs({to:e,redirectToApp:t}){const{application:{navigateToApp:a}}=Object(P.a)().services,i=Object(R.useHistory)(),{search:r,hash:l}=Object(R.useLocation)();return t?a(t,{path:`/${r}${l}`,replace:!0}):e&&i.replace(e),null}const Ss={[Ce.h]:{handler:()=>l.a.createElement(xs,{to:Ce.g}),params:{},exact:!0},[Ce.e]:{handler:()=>l.a.createElement(tt,null,l.a.createElement(it,null)),params:{},exact:!0},[Ce.g]:{handler:()=>l.a.createElement(tt,null,l.a.createElement(D.b,null,l.a.createElement(ya,null))),params:{},exact:!0},[Ce.c]:{handler:()=>l.a.createElement(Ve,null),params:{},exact:!1},[Ce.a]:{handler:()=>l.a.createElement(xe,null),params:{},exact:!0},[Ce.d]:{handler:()=>l.a.createElement(xs,{to:"/",redirectToApp:"exploratory-view"}),params:{},exact:!0},[Ce.j]:{handler:()=>l.a.createElement(ka,null),params:{},exact:!0},[Ce.i]:{handler:()=>l.a.createElement(ka,{activeTab:"logs"}),params:{},exact:!0},[Ce.k]:{handler:()=>l.a.createElement(_a,null),params:{},exact:!0},[Ce.b]:{handler:()=>l.a.createElement(Se.b,null),params:{},exact:!0},[Ce.m]:{handler:()=>l.a.createElement(Bi,null),params:{},exact:!0},[Ce.o]:{handler:()=>l.a.createElement(bs,null),params:{},exact:!0},[Ce.n]:{handler:()=>l.a.createElement(zi,null),params:{},exact:!0},[Ce.l]:{handler:()=>l.a.createElement(hs,null),params:{},exact:!0},[Ce.q]:{handler:()=>l.a.createElement(bs,null),params:{},exact:!0},[Ce.p]:{handler:()=>l.a.createElement(Or,null),params:{},exact:!0}};function Ts(){const[e,t]=Object(r.useState)(!1);return null}function ks(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.c,null,Object.keys(Ss).map((e=>{const t=e,{handler:a,exact:i}=Ss[t];return l.a.createElement(u.a,{key:t,path:t,exact:i,component:()=>a()})}))))}a(99);const Os=({core:e,config:t,plugins:a,appMountParameters:r,observabilityRuleTypeRegistry:s,ObservabilityPageTemplate:b,usageCollection:g,isDev:E,kibanaVersion:f,isServerless:v})=>{var y,h,x;const{element:S,history:T,theme$:O}=r,F=e.i18n,w=e.uiSettings.get("theme:darkMode");e.chrome.setHelpExtension({appName:c.i18n.translate("xpack.observability.feedbackMenu.appName",{defaultMessage:"Observability"}),links:[{linkType:"discuss",href:"https://ela.st/observability-discuss"}]}),S.classList.add(d.APP_WRAPPER_CLASS);const I=new o.QueryClient,j=null!==(y=null==g?void 0:g.components.ApplicationUsageTrackingProvider)&&void 0!==y?y:l.a.Fragment,M=null!==(h=null===(x=a.cloud)||void 0===x?void 0:x.CloudContextProvider)&&void 0!==h?h:l.a.Fragment;return n.a.render(l.a.createElement(i.EuiErrorBoundary,null,l.a.createElement(j,null,l.a.createElement(k,{theme:{theme$:O}},l.a.createElement(M,null,l.a.createElement(p.KibanaContextProvider,{services:{...e,...a,storage:new C.Storage(localStorage),isDev:E,kibanaVersion:f,isServerless:v}},l.a.createElement(A.a.Provider,{value:{config:t,appMountParameters:r,observabilityRuleTypeRegistry:s,ObservabilityPageTemplate:b}},l.a.createElement(u.b,{history:T},l.a.createElement(m.EuiThemeProvider,{darkMode:w},l.a.createElement(F.Context,null,l.a.createElement(L,{coreStart:e,"data-test-subj":"observabilityMainContainer"},l.a.createElement(o.QueryClientProvider,{client:I},l.a.createElement(ks,null),l.a.createElement(Ts,null)))))))))))),S),()=>{a.data.search.session.clear(),n.a.unmountComponentAtNode(S)}}}}]);