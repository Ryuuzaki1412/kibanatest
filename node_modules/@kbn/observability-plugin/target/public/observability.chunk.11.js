/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[11,12],{108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(66),r=n(1),i=a.__importDefault(n(120));t.default=function(e,t){var n=r.useState(t),a=n[0],o=n[1];return i.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),a}},110:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(12);const r=e=>e.darkMode?a.COLOR_MODES_STANDARD.dark:a.COLOR_MODES_STANDARD.light,i={darkMode:!1}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(0),r=n(78),i=n(1),o=n(49),l=n(25),s=n(42),c=n(106);function u({kqlQuery:e="",page:t=1,sortBy:n="status",sortDirection:u="desc",shouldRefetch:d,perPage:b=o.a}={}){const{http:m,notifications:{toasts:f}}=Object(s.a)().services,y=Object(r.useQueryClient)(),[v,g]=Object(i.useState)(l.d),{isInitialLoading:p,isLoading:E,isError:S,isSuccess:h,isRefetching:O,data:j}=Object(r.useQuery)({queryKey:c.a.list({kqlQuery:e,page:t,perPage:b,sortBy:n,sortDirection:u}),queryFn:async({signal:a})=>await m.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...n&&{sortBy:n},...u&&{sortDirection:u},...t&&{page:t},...b&&{perPage:b}},signal:a}),cacheTime:0,refetchOnWindowFocus:!1,refetchInterval:d?v:void 0,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{y.invalidateQueries({queryKey:c.a.historicalSummaries(),exact:!1}),y.invalidateQueries({queryKey:c.a.activeAlerts(),exact:!1}),y.invalidateQueries({queryKey:c.a.rules(),exact:!1}),d&&(e.find((e=>"NO_DATA"===e.summary.status||!e.summary))?g(l.d):g(l.c))},onError:e=>{f.addError(e,{title:a.i18n.translate("xpack.observability.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:j,isInitialLoading:p,isLoading:E,isRefetching:O,isSuccess:h,isError:S}}},116:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return E}));var a=n(1),r=n(108),i=n.n(r),o=n(89),l=n.n(o),s=n(12);let c;!function(e){e.preboot="preboot",e.standard="standard"}(c||(c={}));const u="eui-global",d="eui-utilities";var b=n(110),m=n(77);const f=[s.euiStylisPrefixer],y=l()({key:"css",stylisPlugins:f,container:document.querySelector('meta[name="emotion"]')}),v=l()({key:u,stylisPlugins:f,container:document.querySelector(`meta[name="${u}"]`)}),g=l()({key:d,stylisPlugins:f,container:document.querySelector(`meta[name="${d}"]`)});y.compat=!0,v.compat=!0,g.compat=!0;const p={default:y,global:v,utility:g},E=({theme:{theme$:e},globalStyles:t,colorMode:n,children:r})=>{const o=i()(e,b.a),l=Object(a.useMemo)((()=>Object(b.b)(o)),[o]),c=n||l,u=!1!==t&&void 0;return Object(m.jsx)(s.EuiProvider,{cache:p,colorMode:c,globalStyles:u,utilityClasses:u},r)},S=({children:e,i18n:t,...n})=>Object(m.jsx)(E,n,Object(m.jsx)(t.Context,null,e))},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),r="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=r},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(1),r=n(81),i=n.n(r),o=n(65),l=n.n(o),s=n(116),c=n(85),u=n(77);const d=({children:e,...t})=>Object(u.jsx)(s.b,l()({globalStyles:!1},t),Object(u.jsx)(c.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(u.jsx)(c.KibanaErrorBoundary,null,e))),b=(e,t)=>n=>(i.a.render(Object(u.jsx)(d,t,e),n),()=>i.a.unmountComponentAtNode(n));n(2),n(0);class mount_point_portal_MountPointPortalErrorBoundary extends a.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(u.jsx)("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),r=n.n(a),i=n(12),o=n(0),l=n(16),s=n(102),c=n(111);const u=o.i18n.translate("xpack.observability.sloEmbeddable.config.errors.sloRequired",{defaultMessage:"SLO is required."});function d({initialSlos:e,onSelected:t,hasError:n,singleSelection:d}){const b=e=>{var t;return null!==(t=null==e?void 0:e.map((e=>({label:e.instanceId!==s.a?`${e.name} (${e.groupBy}: ${e.instanceId})`:e.name,value:`${e.id}-${e.instanceId}`}))))&&void 0!==t?t:[]},[m,f]=Object(a.useState)([]),[y,v]=Object(a.useState)(b(e)),[g,p]=Object(a.useState)(""),E=`${g.replaceAll(" ","*")}*`,{isLoading:S,data:h}=Object(c.a)({kqlQuery:`slo.name: ${E} or slo.instanceId: ${E}`,perPage:100});Object(a.useEffect)((()=>{const e=S||void 0===(null==h?void 0:h.results)?[]:b(null==h?void 0:h.results);f(e)}),[S,h]);const O=Object(a.useMemo)((()=>Object(l.debounce)((e=>{p(e)}),300)),[]);return r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:n,error:n?u:void 0},r.a.createElement(i.EuiComboBox,{"aria-label":o.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.ariaLabel",{defaultMessage:"SLO"}),placeholder:o.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.placeholder",{defaultMessage:"Select a SLO"}),"data-test-subj":"sloSelector",options:m,selectedOptions:y,async:!0,isLoading:S,onChange:e=>{var n;v(e);const a=e.length>=1?null===(n=h.results)||void 0===n?void 0:n.filter((t=>e.find((e=>e.value===`${t.id}-${t.instanceId}`)))):void 0;t(d?null==a?void 0:a[0]:a)},fullWidth:!0,onSearchChange:O,isInvalid:n,singleSelection:d?{asPlainText:!0}:void 0}))}},171:function(e,t,n){"use strict";n.r(t),n.d(t,"resolveEmbeddableSloUserInput",(function(){return v}));var a=n(1),r=n.n(a),i=n(123),o=n(13),l=n(78),s=n(79),c=n.n(s),u=n(12),d=n(43),b=n(0),m=n(136);function f({initialInput:e,onCreate:t,onCancel:n}){var i;const[o,l]=Object(a.useState)(null!==(i=null==e?void 0:e.slos)&&void 0!==i?i:[]),[s,c]=Object(a.useState)(!1);return r.a.createElement(y,{onClose:n},r.a.createElement(u.EuiModalHeader,null,r.a.createElement(u.EuiModalHeaderTitle,null,b.i18n.translate("xpack.observability.sloEmbeddable.config.sloSelector.headerTitle",{defaultMessage:"SLO configuration"}))),r.a.createElement(u.EuiModalBody,null,r.a.createElement(u.EuiFlexGroup,null,r.a.createElement(u.EuiFlexItem,{grow:!0},r.a.createElement(m.a,{initialSlos:o,hasError:s,singleSelection:!1,onSelected:e=>{c(void 0===e),Array.isArray(e)&&l(null==e?void 0:e.map((e=>({id:null==e?void 0:e.id,instanceId:null==e?void 0:e.instanceId,name:null==e?void 0:e.name,groupBy:null==e?void 0:e.groupBy}))))}})))),r.a.createElement(u.EuiModalFooter,null,r.a.createElement(u.EuiButtonEmpty,{onClick:n,"data-test-subj":"sloCancelButton"},r.a.createElement(d.FormattedMessage,{id:"xpack.observability.sloEmbeddable.config.cancelButtonLabel",defaultMessage:"Cancel"})),r.a.createElement(u.EuiButton,{"data-test-subj":"sloConfirmButton",isDisabled:!o||0===o.length||s,onClick:()=>t({slos:o}),fill:!0},r.a.createElement(d.FormattedMessage,{id:"xpack.observability.embeddableSlo.config.confirmButtonLabel",defaultMessage:"Confirm configurations"}))))}var y=c()(u.EuiModal).withConfig({displayName:"_StyledEuiModal",componentId:"sc-1dxn4ww-0"})(["min-width:550px;"]);async function v(e,t,n){const{overlays:a}=e,s=new l.QueryClient;return new Promise((async(c,u)=>{try{const u=a.openModal(Object(i.a)(r.a.createElement(o.KibanaContextProvider,{services:{...e,...t}},r.a.createElement(l.QueryClientProvider,{client:s},r.a.createElement(f,{initialInput:n,onCreate:e=>{u.close(),c(e)},onCancel:()=>{u.close(),c(void 0)}}))),{i18n:e.i18n,theme:e.theme}))}catch(e){u(e)}}))}}}]);