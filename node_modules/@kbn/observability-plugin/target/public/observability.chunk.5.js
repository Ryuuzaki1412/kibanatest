/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[5],{107:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a(12),n=a(0),i=a(1),s=a.n(i),l=a(42),o=a(103),u=a(150),c=a(123);function d({children:e,setHeaderActionMenu:t,theme$:a}){const{i18n:r}=Object(l.a)().services,n=Object(i.useMemo)((()=>Object(u.c)()),[]);return Object(i.useEffect)((()=>(t((e=>Object(c.a)(s.a.createElement(u.b,{node:n}),{theme:{theme$:a},i18n:r})(e))),()=>{n.unmount(),t(void 0)})),[n,t,r,a]),s.a.createElement(u.a,{node:n},e)}function b(){const{http:e,theme:t,observabilityAIAssistant:{ObservabilityAIAssistantActionMenuItem:a}}=Object(l.a)().services,{appMountParameters:{setHeaderActionMenu:n}}=Object(o.a)();return s.a.createElement(d,{setHeaderActionMenu:n,theme$:t.theme$},s.a.createElement(r.EuiHeaderLinks,null,s.a.createElement(r.EuiHeaderLink,{color:"primary",href:e.basePath.prepend("/app/integrations/browse"),iconType:"indexOpen"},m),a?s.a.createElement(a,null):null))}const m=n.i18n.translate("xpack.observability.home.addData",{defaultMessage:"Add integrations"})},108:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(66),n=a(1),i=r.__importDefault(a(120));t.default=function(e,t){var a=n.useState(t),r=a[0],s=a[1];return i.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),r}},110:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var r=a(12);const n=e=>e.darkMode?r.COLOR_MODES_STANDARD.dark:r.COLOR_MODES_STANDARD.light,i={darkMode:!1}},116:function(e,t,a){"use strict";a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return v}));var r=a(1),n=a(108),i=a.n(n),s=a(89),l=a.n(s),o=a(12);let u;!function(e){e.preboot="preboot",e.standard="standard"}(u||(u={}));const c="eui-global",d="eui-utilities";var b=a(110),m=a(77);const p=[o.euiStylisPrefixer],f=l()({key:"css",stylisPlugins:p,container:document.querySelector('meta[name="emotion"]')}),E=l()({key:c,stylisPlugins:p,container:document.querySelector(`meta[name="${c}"]`)}),g=l()({key:d,stylisPlugins:p,container:document.querySelector(`meta[name="${d}"]`)});f.compat=!0,E.compat=!0,g.compat=!0;const y={default:f,global:E,utility:g},v=({theme:{theme$:e},globalStyles:t,colorMode:a,children:n})=>{const s=i()(e,b.a),l=Object(r.useMemo)((()=>Object(b.b)(s)),[s]),u=a||l,c=!1!==t&&void 0;return Object(m.jsx)(o.EuiProvider,{cache:y,colorMode:u,globalStyles:c,utilityClasses:c},n)},h=({children:e,i18n:t,...a})=>Object(m.jsx)(v,a,Object(m.jsx)(t.Context,null,e))},120:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),n="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=n},123:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a(1),n=a(81),i=a.n(n),s=a(65),l=a.n(s),o=a(116),u=a(85),c=a(77);const d=({children:e,...t})=>Object(c.jsx)(o.b,l()({globalStyles:!1},t),Object(c.jsx)(u.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(c.jsx)(u.KibanaErrorBoundary,null,e))),b=(e,t)=>a=>(i.a.render(Object(c.jsx)(d,t,e),a),()=>i.a.unmountComponentAtNode(a));a(2),a(0);class mount_point_portal_MountPointPortalErrorBoundary extends r.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(c.jsx)("p",null,external_kbnSharedDeps_KbnI18n_.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}},151:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(78),n=a(0),i=a(87),s=a(86),l=a(42);function o({ruleId:e}){const{http:t,notifications:{toasts:a}}=Object(l.a)().services,{isInitialLoading:o,isLoading:u,isError:c,isSuccess:d,isRefetching:b,data:m,refetch:p}=Object(r.useQuery)({queryKey:["fetchRule",e],queryFn:async({signal:a})=>{try{if(!e)return;const r=await t.get(`${i.INTERNAL_BASE_ALERTING_API_PATH}/rule/${encodeURIComponent(e)}`,{signal:a});return Object(s.transformRule)(r)}catch(e){throw e}},keepPreviousData:!0,enabled:Boolean(e),refetchOnWindowFocus:!1,onError:e=>{a.addError(e,{title:n.i18n.translate("xpack.observability.ruleDetails.ruleLoadError",{defaultMessage:"Unable to load rule"}),toastMessage:e instanceof Error?e.message:"string"==typeof e?e:""})}});return{rule:m,isLoading:u,isInitialLoading:o,isRefetching:b,isSuccess:d,isError:c,refetch:p}}},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a(1),n=a(16),i=a(114),s=a(103),l=a(177),o=a(112);const u=e=>{const{observabilityRuleTypeRegistry:t}=Object(s.a)(),a=Object(r.useMemo)((()=>({id:e,ruleType:t})),[e,t]),i=Object(r.useCallback)((e=>!Object(n.isEmpty)(e.id)),[]),{loading:o,data:u}=Object(l.a)({paramsForApiCall:a,initialDataState:null,executeApiCall:c,shouldExecuteApiCall:i});return[o,u]},c=async(e,t,a)=>{const{id:r,ruleType:n}=e;try{const e=await a.get(i.a,{query:{id:r},signal:t.signal});if(void 0!==e)return Object(o.a)(n)(e)}catch(e){}return null}},177:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(1),n=a(42);const i=({paramsForApiCall:e,initialDataState:t,executeApiCall:a,shouldExecuteApiCall:i})=>{const{http:s}=Object(n.a)().services,[l,o]=Object(r.useState)(!1),[u,c]=Object(r.useState)(!1),[d,b]=Object(r.useState)(t),{fetch:m,cancel:p}=Object(r.useMemo)((()=>{const t=new AbortController;let r=!1;return{fetch:async()=>{if(i(e)){c(!1),o(!0);try{const n=await a(e,t,s);r||(o(!1),b(n))}catch(e){c(!0),o(!1)}}},cancel:()=>{r=!0,t.abort()}}}),[a,s,e,i]);return Object(r.useEffect)((()=>(m(),()=>{p()})),[m,p]),{data:d,loading:l,error:u}}},178:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(12),n=a(0),i=a(1),s=a.n(i);function l(){return s.a.createElement(r.EuiBetaBadge,{label:n.i18n.translate("xpack.observability.experimentalBadgeLabel",{defaultMessage:"Technical preview"}),tooltipContent:n.i18n.translate("xpack.observability.experimentalBadgeDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})})}},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(1),n=a.n(r),i=a(12);function s({size:e}){return n.a.createElement(i.EuiFlexGroup,{"data-test-subj":"centerJustifiedSpinner",justifyContent:"center"},n.a.createElement(i.EuiFlexItem,{grow:!1},n.a.createElement(i.EuiLoadingSpinner,{size:e||"xl"})))}},180:function(e,t,a){"use strict";var r=a(1),n=a.n(r),i=a(43),s=a(12),l=a(103);t.a=function(){const{ObservabilityPageTemplate:e}=Object(l.a)();return n.a.createElement(e,{"data-test-subj":"pageNotFound"},n.a.createElement(s.EuiCallOut,{color:"warning",iconType:"iInCircle",title:n.a.createElement(i.FormattedMessage,{id:"xpack.observability.notFoundPage.title",defaultMessage:"Page Not Found"}),"data-test-subj":"observabilityPageNotFoundBanner"},n.a.createElement("p",{"data-test-subj":"observabilityPageNotFoundBannerText"},n.a.createElement(i.FormattedMessage,{id:"xpack.observability.notFoundPage.bannerText",defaultMessage:"The Observability application doesn't recognize this route"}))))}},191:function(e,t,a){"use strict";a.d(t,"a",(function(){return L})),a.d(t,"d",(function(){return N})),a.d(t,"c",(function(){return $})),a.d(t,"b",(function(){return G}));var r=a(1),n=a.n(r),i=a(0),s=a(23),l=a(12),o=a(4),u=a(44),c=a(42),d=a(151),b=a(103),m=a(176),p=a(79),f=a.n(p),E=a(137),g=a(43),y=a(6),v=a.n(y),h=(a(77),a(10)),x=a(178);function j(e){return i.i18n.translate("xpack.observability.pages.alertDetails.pageTitle.title",{defaultMessage:"{ruleCategory} {ruleCategory, select, Anomaly {detected} Inventory {threshold breached} other {breached}}",values:{ruleCategory:e}})}function O({alert:e,dataTestSubj:t}){var a;const{euiTheme:r}=Object(l.useEuiTheme)();if(!e)return n.a.createElement(l.EuiLoadingSpinner,null);const s=e.fields[o.O]===N||e.fields[o.O]===$;return n.a.createElement("div",{"data-test-subj":t},n.a.createElement(l.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"s"},j(e.fields[o.t]),s&&n.a.createElement(x.a,null)),n.a.createElement(l.EuiSpacer,{size:"l"}),n.a.createElement(l.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xl"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(E.a,{alertStatus:e.active?o.W:o.X,flapping:e.fields[o.i]})),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{gutterSize:"none"},n.a.createElement(l.EuiText,{size:"s",color:"subdued"},n.a.createElement(g.FormattedMessage,{id:"xpack.observability.pages.alertDetails.pageTitle.triggered",defaultMessage:"Triggered"}),": "),n.a.createElement(S,{size:"s",$_css:r.font.weight.semiBold},v()(Number(e.start)).locale(i.i18n.getLocale()).fromNow()))),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{gutterSize:"none"},n.a.createElement(l.EuiText,{size:"s",color:"subdued"},n.a.createElement(g.FormattedMessage,{id:"xpack.observability.pages.alertDetails.pageTitle.duration",defaultMessage:"Duration"}),": "),n.a.createElement(T,{size:"s",$_css2:r.font.weight.semiBold},Object(h.b)(Number(e.fields[o.d]))))),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{gutterSize:"none"},n.a.createElement(l.EuiText,{size:"s",color:"subdued"},n.a.createElement(g.FormattedMessage,{id:"xpack.observability.pages.alertDetails.pageTitle.lastStatusUpdate",defaultMessage:"Last status update"}),": "),n.a.createElement(w,{size:"s",$_css3:r.font.weight.semiBold},v()(null===(a=e.fields[o.wb])||void 0===a?void 0:a.toString()).locale(i.i18n.getLocale()).fromNow())))))}var S=f()(l.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1nz92ps-0"})(["font-weight:",";"],(e=>e.$_css)),T=f()(l.EuiText).withConfig({displayName:"_StyledEuiText2",componentId:"sc-1nz92ps-1"})(["font-weight:",";"],(e=>e.$_css2)),w=f()(l.EuiText).withConfig({displayName:"_StyledEuiText3",componentId:"sc-1nz92ps-2"})(["font-weight:",";"],(e=>e.$_css3)),M=a(16),k=a(92);function A({alert:e}){const{cases:{hooks:{useCasesAddToExistingCaseModal:t}},triggersActionsUi:{getEditRuleFlyout:a,getRuleSnoozeModal:s}}=Object(c.a)().services,{rule:u,refetch:b}=Object(d.a)({ruleId:(null==e?void 0:e.fields[o.R])||""}),[m,p]=Object(r.useState)(!1),[f,E]=Object(r.useState)(!1),[g,y]=Object(r.useState)(!1),v=t(),h=e&&u?[{alertId:(null==e?void 0:e.fields[o.hb])||"",index:".internal.alerts-observability.metrics.alerts-*",rule:{id:u.id,name:u.name},type:k.AttachmentType.alert}]:[];return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiPopover,{isOpen:m,closePopover:()=>p(!1),button:n.a.createElement(l.EuiButton,{fill:!0,iconType:"arrowDown",iconSide:"right",onClick:()=>p(!m),"data-test-subj":"alert-details-header-actions-menu-button"},i.i18n.translate("xpack.observability.alertDetails.actionsButtonLabel",{defaultMessage:"Actions"}))},n.a.createElement(l.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"s"},n.a.createElement(l.EuiButtonEmpty,{size:"s",color:"text",disabled:!(null!=e&&e.fields[o.R]&&u),onClick:()=>{p(!1),E(!0)},"data-test-subj":"view-rule-details-button"},n.a.createElement(l.EuiText,{size:"s"},i.i18n.translate("xpack.observability.alertDetails.viewRuleDetails",{defaultMessage:"View rule details"}))),n.a.createElement(l.EuiButtonEmpty,{size:"s",color:"text",onClick:()=>{p(!1),y(!0)},"data-test-subj":"snooze-rule-button"},n.a.createElement(l.EuiText,{size:"s"},i.i18n.translate("xpack.observability.alertDetails.editSnoozeRule",{defaultMessage:"Snooze the rule"}))),n.a.createElement(l.EuiButtonEmpty,{size:"s",color:"text",onClick:()=>{p(!1),v.open({getAttachments:()=>h})},"data-test-subj":"add-to-case-button"},n.a.createElement(l.EuiText,{size:"s"},i.i18n.translate("xpack.observability.alertDetails.addToCase",{defaultMessage:"Add to case"}))))),u&&f?n.a.createElement(a,{initialRule:u,onClose:()=>{E(!1)},onSave:async()=>{b()}}):null,u&&g?n.a.createElement(s,{rule:u,onClose:()=>y(!1),onRuleChanged:async()=>{b()},onLoading:M.noop}):null)}function C({alertSummaryFields:e}){const t=Object(l.useIsWithinBreakpoints)(["xs","s"]);return n.a.createElement(l.EuiFlexGrid,{responsive:!1,"data-test-subj":"alert-summary-container",style:{gridTemplateColumns:t?"repeat(2, 1fr)":"repeat(5, 1fr)"}},null==e?void 0:e.map(((e,t)=>n.a.createElement(l.EuiFlexItem,{key:t},n.a.createElement(l.EuiText,{color:"subdued"},e.label),n.a.createElement(l.EuiText,null,e.value)))))}var _=a(179),F=a(180),D=a(41),P=a(131),I=a(5),z=a(7),B=a(107);const L="alert-details-o11y",R=i.i18n.translate("xpack.observability.breadcrumbs.alertDetails",{defaultMessage:"Alert details"}),N="metrics.alert.threshold",$="metrics.alert.inventory.threshold";function G(){const{cases:{helpers:{canUseCases:e},ui:{getCasesContext:t}},http:a,triggersActionsUi:{ruleTypeRegistry:p},uiSettings:f}=Object(c.a)().services,{ObservabilityPageTemplate:E,config:g}=Object(b.a)(),{alertId:y}=Object(s.useParams)(),[v,h]=Object(m.a)(y),[x,S]=Object(r.useState)(null),T=t(),w=e([I.observabilityFeatureId]),{rule:M}=Object(d.a)({ruleId:null==h?void 0:h.fields[o.R]}),[k,L]=Object(r.useState)();if(Object(r.useEffect)((()=>{h&&S(p.get(null==h?void 0:h.fields[o.O]))}),[h,p]),Object(u.useBreadcrumbs)([{href:a.basePath.prepend(z.r.observability.alerts),text:i.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),deepLinkId:"observability-overview:alerts"},{text:h?j(h.fields[o.t]):R}]),v)return n.a.createElement(_.a,null);if(h&&!Object(P.a)(h,g))return n.a.createElement(F.a,null);if(!v&&!h)return n.a.createElement(l.EuiPanel,{"data-test-subj":"alertDetailsError"},n.a.createElement(l.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:n.a.createElement("h2",null,i.i18n.translate("xpack.observability.alertDetails.errorPromptTitle",{defaultMessage:"Unable to load alert details"})),body:n.a.createElement("p",null,i.i18n.translate("xpack.observability.alertDetails.errorPromptBody",{defaultMessage:"There was an error loading the alert details."}))}));const N=x?x.alertDetailsAppSection:null,$=function(e){const t=null==e?void 0:e.get(D.a.DATEFORMAT_TZ);return t&&"Browser"!==t?t:"local"}(f);return n.a.createElement(E,{pageHeader:{pageTitle:n.a.createElement(O,{alert:h,dataTestSubj:(null==M?void 0:M.ruleTypeId)||"alertDetailsPageTitle"}),rightSideItems:[n.a.createElement(T,{owner:[I.observabilityFeatureId],permissions:w,features:{alerts:{sync:!1}}},n.a.createElement(A,{alert:h}))],bottomBorder:!0},"data-test-subj":"alertDetails"},n.a.createElement(B.a,null),n.a.createElement(C,{alertSummaryFields:k}),n.a.createElement(l.EuiSpacer,{size:"l"}),N&&M&&n.a.createElement(N,{alert:h,rule:M,timeZone:$,setAlertSummaryFields:L,ruleLink:a.basePath.prepend(z.r.observability.ruleDetails(M.id))}))}}}]);