/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[4],{114:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="/internal/rac/alerts"},115:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(83);function r(e){const t=e.substring(0,e.length-1),a=e.substring(e.length-1);return{value:parseInt(t,10),unit:a}}function i(e){switch(e.unit){case"m":return e.value;case"h":return 60*e.value;case"d":return 24*e.value*60;case"w":return 7*e.value*24*60;case"M":return 30*e.value*24*60;default:Object(n.assertNever)(e.unit)}}function o(e){switch(e){default:case"w":return"isoWeek";case"M":return"months"}}},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(1),r=a(4),i=a(103);function o(){const{observabilityRuleTypeRegistry:e}=Object(i.a)();return Object(n.useMemo)((()=>[r.qb,...e.list()]),[e])}},122:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(5),r=a(42);function i(){var e,t;const{application:{capabilities:a}}=Object(r.a)().services;return{hasReadCapabilities:null!==(e=!!a[n.sloFeatureId].read)&&void 0!==e&&e,hasWriteCapabilities:null!==(t=!!a[n.sloFeatureId].write)&&void 0!==t&&t}}},126:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(78),r=a(42),i=a(106),o=a(25);function s({list:e=[],shouldRefetch:t}){const{http:a}=Object(r.a)().services,{isInitialLoading:s,isLoading:l,isError:u,isSuccess:c,isRefetching:d,data:p}=Object(n.useQuery)({queryKey:i.a.historicalSummary(e),queryFn:async({signal:t})=>{try{return await a.post("/internal/observability/slos/_historical_summary",{body:JSON.stringify({list:e}),signal:t})}catch(e){}},refetchInterval:t?o.c:void 0,refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:p,isLoading:l,isRefetching:d,isInitialLoading:s,isSuccess:c,isError:u}}},127:function(e,t,a){"use strict";function n(e=[],t){function a(e){switch(t){case"error_budget_consumed":return e.errorBudget.consumed;case"error_budget_remaining":return e.errorBudget.remaining;default:return e.sliValue}}return e?e.map((e=>({key:new Date(e.date).getTime(),value:"NO_DATA"===e.status?void 0:a(e)}))):[]}a.d(t,"a",(function(){return n}))},128:function(e,t,a){"use strict";a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"k",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"j",(function(){return g})),a.d(t,"i",(function(){return b}));var n=a(0),r=a(83),i=a(115);const o=n.i18n.translate("xpack.observability.slo.indicators.customKql",{defaultMessage:"Custom KQL"}),s=n.i18n.translate("xpack.observability.slo.indicators.customMetric",{defaultMessage:"Custom Metric"}),l=n.i18n.translate("xpack.observability.slo.indicators.timesliceMetric",{defaultMessage:"Timeslice Metric"}),u=n.i18n.translate("xpack.observability.slo.indicators.histogram",{defaultMessage:"Histogram Metric"}),c=n.i18n.translate("xpack.observability.slo.indicators.apmLatency",{defaultMessage:"APM latency"}),d=n.i18n.translate("xpack.observability.slo.indicators.apmAvailability",{defaultMessage:"APM availability"});function p(e){switch(e){case"sli.kql.custom":return o;case"sli.apm.transactionDuration":return c;case"sli.apm.transactionErrorRate":return d;case"sli.metric.custom":return s;case"sli.histogram.custom":return u;case"sli.metric.timeslice":return l;default:Object(r.assertNever)(e)}}const m=n.i18n.translate("xpack.observability.slo.budgetingMethod.occurrences",{defaultMessage:"Occurrences"}),f=n.i18n.translate("xpack.observability.slo.budgetingMethod.timeslices",{defaultMessage:"Timeslices"});function g(e){const t=Object(i.b)(e);switch(t.unit){case"m":return n.i18n.translate("xpack.observability.slo.duration.minute",{defaultMessage:"{duration, plural, one {1 minute} other {# minutes}}",values:{duration:t.value}});case"h":return n.i18n.translate("xpack.observability.slo.duration.hour",{defaultMessage:"{duration, plural, one {1 hour} other {# hours}}",values:{duration:t.value}});case"d":return n.i18n.translate("xpack.observability.slo.duration.day",{defaultMessage:"{duration, plural, one {1 day} other {# days}}",values:{duration:t.value}});case"w":return n.i18n.translate("xpack.observability.slo.duration.week",{defaultMessage:"{duration, plural, one {1 week} other {# weeks}}",values:{duration:t.value}});case"M":return n.i18n.translate("xpack.observability.slo.duration.month",{defaultMessage:"{duration, plural, one {1 month} other {# months}}",values:{duration:t.value}})}}function b(e){switch(Object(i.b)(e).unit){case"m":return n.i18n.translate("xpack.observability.slo.duration.minutely",{defaultMessage:"Minutely"});case"h":return n.i18n.translate("xpack.observability.slo.duration.hourly",{defaultMessage:"Hourly"});case"d":return n.i18n.translate("xpack.observability.slo.duration.daily",{defaultMessage:"Daily"});case"w":return n.i18n.translate("xpack.observability.slo.duration.weekly",{defaultMessage:"Weekly"});case"M":return n.i18n.translate("xpack.observability.slo.duration.monthly",{defaultMessage:"Monthly"})}}},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(102),r=a(78),i=a(25),o=a(42),s=a(106);function l({sloId:e,instanceId:t,shouldRefetch:a}){const{http:l}=Object(o.a)().services,{isInitialLoading:u,isLoading:c,isError:d,isSuccess:p,isRefetching:m,data:f,refetch:g}=Object(r.useQuery)({queryKey:s.a.detail(e),queryFn:async({signal:a})=>{try{return await l.get(`/api/observability/slos/${e}`,{query:{...!!t&&t!==n.a&&{instanceId:t}},signal:a})}catch(e){}},keepPreviousData:!0,enabled:Boolean(e),refetchInterval:a?i.c:void 0,refetchOnWindowFocus:!1});return{data:f,isLoading:c,isInitialLoading:u,isRefetching:m,isSuccess:p,isError:d,refetch:g}}},133:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(78),r=a(42),i=a(106);function o({sloIds:e=[]}){const{http:t}=Object(r.a)().services,{isInitialLoading:a,isLoading:o,isError:s,isSuccess:l,isRefetching:u,data:c,refetch:d}=Object(n.useQuery)({queryKey:i.a.rule(e),queryFn:async()=>{try{const a=JSON.stringify({filter:e.map((e=>`alert.attributes.params.sloId:${e}`)).join(" or "),fields:["params.sloId","name"],per_page:1e3}),n=await t.post("/internal/alerting/rules/_find",{body:a}),r=e.reduce(((e,t)=>({...e,[t]:[]})),{});return n.data.reduce(((e,t)=>({...e,[t.params.sloId]:e[t.params.sloId].concat(t)})),r)}catch(e){}},enabled:Boolean(e.length),refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:c,isLoading:o,isInitialLoading:a,isRefetching:u,isSuccess:l,isError:s,refetch:d}}},134:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(12),r=a(0),i=a(102),o=a(1),s=a.n(o);function l({slo:e,onCancel:t,onConfirm:a}){const{name:o,groupBy:l}=e;return s.a.createElement(n.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"sloDeleteConfirmationModal",title:r.i18n.translate("xpack.observability.slo.deleteConfirmationModal.title",{defaultMessage:"Delete {name}?",values:{name:o}}),cancelButtonText:r.i18n.translate("xpack.observability.slo.deleteConfirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:r.i18n.translate("xpack.observability.slo.deleteConfirmationModal.deleteButtonLabel",{defaultMessage:"Delete"}),onCancel:t,onConfirm:a},l!==i.a?r.i18n.translate("xpack.observability.slo.deleteConfirmationModal.groupByDisclaimerText",{defaultMessage:'This SLO has been generated with a group key on "{groupKey}". Deleting this SLO definition will result in all instances being deleted.',values:{groupKey:l}}):r.i18n.translate("xpack.observability.slo.deleteConfirmationModal.descriptionText",{defaultMessage:"You can't recover this SLO after deleting it."}))}},139:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(78),r=a(153),i=a(4),o=a(42),s=a(106),l=a(2),u=a.n(l),c=a(102);class active_alerts_ActiveAlerts{constructor(e){u()(this,"data",new Map),e&&Object.keys(e).forEach((t=>this.data.set(t,e[t])))}set(e,t){var a;this.data.set(`${e.id}|${null!==(a=e.instanceId)&&void 0!==a?a:c.a}`,t)}get(e){var t;return this.data.get(`${e.id}|${null!==(t=e.instanceId)&&void 0!==t?t:c.a}`)}has(e){var t;return this.data.has(`${e.id}|${null!==(t=e.instanceId)&&void 0!==t?t:c.a}`)}delete(e){var t;return this.data.delete(`${e.id}|${null!==(t=e.instanceId)&&void 0!==t?t:c.a}`)}clear(){return this.data.clear()}}var d=a(25);const p=new active_alerts_ActiveAlerts;function m({sloIdsAndInstanceIds:e=[],shouldRefetch:t=!1}){const{http:a}=Object(o.a)().services,{isInitialLoading:l,isLoading:u,isError:c,isSuccess:m,isRefetching:f,data:g}=Object(n.useQuery)({queryKey:s.a.activeAlert(e),queryFn:async({signal:t})=>{try{const n=(await a.post(`${r.a}/find`,{body:JSON.stringify({feature_ids:[i.ob.SLO,i.ob.OBSERVABILITY],size:0,query:{bool:{filter:[{range:{"@timestamp":{gte:"now-5m/m"}}},{term:{"kibana.alert.rule.rule_type_id":"slo.rules.burnRate"}},{term:{"kibana.alert.status":"active"}}],should:e.map((([e,t])=>({bool:{filter:[{term:{"slo.id":e}},{term:{"slo.instanceId":t}}]}}))),minimum_should_match:1}},aggs:{perSloId:{multi_terms:{size:e.length,terms:[{field:"slo.id"},{field:"slo.instanceId"}]}}}}),signal:t})).aggregations.perSloId.buckets.reduce(((e,t)=>{var a;return{...e,[t.key_as_string]:null!==(a=t.doc_count)&&void 0!==a?a:0}}),{});return new active_alerts_ActiveAlerts(n)}catch(e){}},refetchOnWindowFocus:!1,refetchInterval:t?d.c:void 0,enabled:Boolean(e.length)});return{data:l?p:null!=g?g:p,isLoading:l||u||f,isSuccess:m,isError:c}}},142:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(78),r=a(0),i=a(42),o=a(106);function s(){const{http:e,notifications:{toasts:t}}=Object(i.a)().services,a=Object(n.useQueryClient)();return Object(n.useMutation)(["deleteSlo"],(({id:t})=>{try{return e.delete(`/api/observability/slos/${t}`)}catch(e){return Promise.reject(`Something went wrong: ${String(e)}`)}}),{onMutate:async e=>{var t,n,r,i,s,l,u,c;await a.cancelQueries({queryKey:o.a.lists(),exact:!1});const d=a.getQueriesData({queryKey:o.a.lists(),exact:!1}),[p,m]=null!==(t=null==d?void 0:d.at(0))&&void 0!==t?t:[],f=null!==(n=null==m||null===(r=m.results)||void 0===r||null===(i=r.filter((t=>t.id===e.id)))||void 0===i?void 0:i.length)&&void 0!==n?n:0,g={page:null!==(s=null==m?void 0:m.page)&&void 0!==s?s:1,perPage:null!==(l=null==m?void 0:m.perPage)&&void 0!==l?l:25,total:null!=m&&m.total?m.total-f:0,results:null!==(u=null==m||null===(c=m.results)||void 0===c?void 0:c.filter((t=>t.id!==e.id)))&&void 0!==u?u:[]};return p&&a.setQueryData(p,g),{previousData:m,queryKey:p}},onError:(e,{name:n},i)=>{var o,s;null!=i&&i.previousData&&null!=i&&i.queryKey&&a.setQueryData(i.queryKey,i.previousData),t.addError(new Error(null!==(o=null===(s=e.body)||void 0===s?void 0:s.message)&&void 0!==o?o:e.message),{title:r.i18n.translate("xpack.observability.slo.slo.delete.errorNotification",{defaultMessage:"Failed to delete {name}",values:{name:n}})})},onSuccess:(e,{name:a})=>{t.addSuccess(r.i18n.translate("xpack.observability.slo.slo.delete.successNotification",{defaultMessage:"Deleted {name}",values:{name:a}}))}})}},150:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var n,r=a(1),i=a(81),o=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},n(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),s="html",l="svg",u=function(e,t){var a,n,r,i={};if(e===s)r=document.createElement("div");else{if(e!==l)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');r=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var o=0,u=Object.entries(t.attributes);o<u.length;o++){var c=u[o],d=c[0],p=c[1];r.setAttribute(d,p)}var m={element:r,elementType:e,setPortalProps:function(e){i=e},getInitialPortalProps:function(){return i},mount:function(t,r){if(r!==n){if(m.unmount(),t!==a&&!function(e,t){if(t===s)return e instanceof HTMLElement;if(t===l)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(m.element,r),a=t,n=r}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,m.element),a=void 0,n=void 0)}};return m},c=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return o(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,n=t.node;return i.createPortal(r.Children.map(a,(function(t){return r.isValidElement(t)?r.cloneElement(t,e.state.nodeProps):t})),n.element)},t}(r.PureComponent),d=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=r.createRef(),a.passPropsThroughPortal(),a}return o(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return r.createElement("div",{ref:this.placeholderNode})},t}(r.PureComponent),p=u.bind(null,s);u.bind(null,l)},153:function(e,t,a){"use strict";a(138);var n=a(114);a.d(t,"a",(function(){return n.a}))},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1),r=a.n(n),i=a(150),o=a(81),s=a.n(o);function l({children:e,containerRef:t}){const a=Object(n.useMemo)((()=>Object(i.c)()),[]);return Object(n.useEffect)((()=>(null!=t&&t.current&&setTimeout((()=>{var e;const n=null==t||null===(e=t.current)||void 0===e?void 0:e.querySelector(".echMetricText__gap");n&&s.a.render(r.a.createElement(i.b,{node:a}),n)}),100),()=>{a.unmount()})),[a,t]),r.a.createElement(i.a,{node:a},e)}},155:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(1),r=a.n(n),i=a(78),o=a(7),s=a(121),l=a(106),u=a(42),c=a(31),d=a(5);function p({slo:e,isAddRuleFlyoutOpen:t,canChangeTrigger:a,setIsAddRuleFlyoutOpen:n}){const{application:{navigateToUrl:p},http:{basePath:m},triggersActionsUi:{getAddRuleFlyout:f}}=Object(u.a)().services,g=Object(s.a)(),b=Object(i.useQueryClient)();return t&&e?r.a.createElement(f,{canChangeTrigger:a,consumer:d.sloFeatureId,filteredRuleTypes:g,ruleTypeId:c.g,initialValues:{name:`${e.name} Burn Rate rule`,params:{sloId:e.id}},onSave:async()=>{n?b.invalidateQueries({queryKey:l.a.rules(),exact:!1}):p(m.prepend(o.r.observability.slos))},onClose:async()=>{n?n(!1):p(m.prepend(o.r.observability.slos))},useRuleProducer:!0}):null}},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(24),r=a.n(n),i=a(102),o=a(7),s=a(42),l=a(17);const u=e=>{const{http:{basePath:t}}=Object(s.a)().services,{uiSettings:a}=Object(s.a)().services,n=a.get("format:percent:defaultPattern"),u="NO_DATA"===e.summary.status?l.a:r()(e.summary.sliValue).format(n),c=r()(e.objective.target).format(n),d=e.summary.errorBudget.remaining<=0?Math.trunc(100*e.summary.errorBudget.remaining)/100:e.summary.errorBudget.remaining,p="NO_DATA"===e.summary.status?l.a:r()(d).format(n);return{sloDetailsUrl:t.prepend(o.r.observability.sloDetails(e.id,e.groupBy!==i.a&&e.instanceId?e.instanceId:void 0)),sliValue:u,sloTarget:c,errorBudgetRemaining:p}}},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(90),r=a(1),i=a(7),o=a(42);function s(){const{http:{basePath:e},application:{navigateToUrl:t}}=Object(o.a)().services;return Object(r.useCallback)((a=>{t(e.prepend(i.r.observability.sloCreateWithEncodedForm(Object(n.encode)({...a,name:`[Copy] ${a.name}`,id:void 0}))))}),[t,e])}},158:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(1),r=a.n(n),i=a(79),o=a.n(i),s=a(12),l=a(187),u=a(159),c=a(162),d=a(161),p=a(163);const m=o.a.div.withConfig({displayName:"Container",componentId:"sc-1xvmihm-0"})(["display:inline-block;margin-top:5px;"]);function f({slo:e,activeAlerts:t,rules:a,handleCreateRule:n}){return r.a.createElement(m,null,r.a.createElement(s.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"xs",alignItems:"center",wrap:!0},e.summary?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{slo:e,activeAlerts:t,viewMode:"compact"}),r.a.createElement(u.a,{slo:e,color:"default"}),r.a.createElement(c.a,{slo:e,color:"default"}),r.a.createElement(p.a,{rules:a,onClick:n})):r.a.createElement(l.a,null)))}},159:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(1),r=a.n(n),i=a(12),o=a(84),s=a(0),l=a(42),u=a(160),c=a(188),d=a(128);function p({slo:e,color:t}){const{application:{navigateToUrl:a},http:{basePath:n}}=Object(l.a)().services;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiBadge,{color:null!=t?t:o.euiLightVars.euiColorDisabled},Object(d.k)(e.indicator.type))),Object(c.a)(e.indicator.type)&&"service"in e.indicator.params&&r.a.createElement(i.EuiFlexItem,{grow:!1,style:{maxWidth:100}},r.a.createElement(i.EuiToolTip,{position:"top",content:s.i18n.translate("xpack.observability.slo.indicatorTypeBadge.exploreInApm",{defaultMessage:"View {service} details",values:{service:e.indicator.params.service}})},r.a.createElement(i.EuiBadge,{color:null!=t?t:o.euiLightVars.euiColorDisabled,onClick:()=>{if("sli.apm.transactionDuration"===e.indicator.type||"sli.apm.transactionErrorRate"===e.indicator.type){const{indicator:{params:{environment:t,filter:r,service:i,transactionName:o,transactionType:s}},timeWindow:{duration:l}}=e,c=Object(u.a)({duration:l,environment:t,filter:r,service:i,transactionName:o,transactionType:s});a(n.prepend(c))}},onClickAriaLabel:s.i18n.translate("xpack.observability.slo.indicatorTypeBadge.exploreInApm",{defaultMessage:"View {service} details",values:{service:e.indicator.params.service}})},e.indicator.params.service))))}},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(102);function r({duration:e,environment:t,filter:a,service:r,transactionName:i,transactionType:o}){if(!r)return"";const s=new URLSearchParams("comparisonEnabled=true");t&&s.append("environment",t===n.a?"ENVIRONMENT_ALL":t),o&&s.append("transactionType",o===n.a?"":o),e&&(s.append("rangeFrom",`now-${e}`),s.append("rangeTo","now"));const l=[];return i&&i!==n.a&&l.push(`transaction.name : "${i}"`),a&&a.length>0&&l.push(a),l.length>0&&s.append("kuery",l.join(" and ")),`/app/apm/services/${r}/overview?${s.toString()}`}},161:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(12),r=a(0),i=a(1),o=a.n(i),s=a(7),l=a(42);function u({slo:e,activeAlerts:t,viewMode:a="default"}){const{application:{navigateToUrl:i},http:{basePath:u}}=Object(l.a)().services;return t?o.a.createElement(n.EuiFlexItem,{grow:!1},o.a.createElement(n.EuiBadge,{iconType:"warning",color:"danger",onClick:()=>{if(t){const t=encodeURIComponent(`'slo.id:"${e.id}" and slo.instanceId:"${e.instanceId}"'`);i(`${u.prepend(s.r.observability.alerts)}?_a=(kuery:${t},rangeFrom:now-15m,rangeTo:now,status:active)`)}},onClickAriaLabel:r.i18n.translate("xpack.observability.slo.slo.activeAlertsBadge.ariaLabel",{defaultMessage:"active alerts badge"}),"data-test-subj":"o11ySloActiveAlertsBadge"},"default"!==a?t:r.i18n.translate("xpack.observability.slo.slo.activeAlertsBadge.label",{defaultMessage:"{count, plural, one {# alert} other {# alerts}}",values:{count:t}}))):null}},162:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(12),r=a(0),i=a(102),o=a(84),s=a(6),l=a.n(s),u=a(1),c=a.n(u),d=a(115),p=a(128);function m({slo:e,color:t}){const a=e.timeWindow.duration.slice(-1);if(i.f.is(e.timeWindow.type))return c.a.createElement(n.EuiFlexItem,{grow:!1},c.a.createElement(n.EuiBadge,{color:null!=t?t:o.euiLightVars.euiColorDisabled,iconType:"editorItemAlignRight",iconSide:"left"},Object(p.j)(e.timeWindow.duration)));const s=Object(d.a)(a),u=l.a.utc(),m=u.clone().startOf(s),f=u.clone().endOf(s).diff(m,"days")+1,g=u.diff(m,"days")+1;return c.a.createElement(n.EuiFlexItem,{grow:!1},c.a.createElement(n.EuiBadge,{color:null!=t?t:o.euiLightVars.euiColorDisabled,iconType:"calendar",iconSide:"left"},r.i18n.translate("xpack.observability.slo.slo.timeWindow.calendar",{defaultMessage:"{elapsed}/{total} days",values:{elapsed:Math.min(g,f),total:f}})))}},163:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(79),r=a.n(n),i=a(1),o=a.n(i),s=a(12),l=a(0);function u({rules:e,onClick:t}){return void 0===e||e.length>0?null:o.a.createElement(s.EuiToolTip,{position:"top",content:l.i18n.translate("xpack.observability.slo.slo.rulesBadge.popover",{defaultMessage:"There are no rules configured for this SLO yet. You will not receive alerts when SLO is breached."}),display:"block"},o.a.createElement("span",{onClick:t,onKeyDown:t},o.a.createElement(c,{color:"text",iconType:"alert"})))}var c=r()(s.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-1wynnna-0"})({cursor:"pointer"})},172:function(e,t,a){"use strict";a.d(t,"b",(function(){return C})),a.d(t,"a",(function(){return j}));var n=a(79),r=a.n(n),i=a(1),o=a.n(i),s=a(43),l=a(80),u=a(12),c=a(102),d=a(0),p=(a(77),a(154)),m=a(185),f=a(155),g=a(127),b=a(42),v=a(156),y=a(65),h=a.n(y),E=a(186);const O=r.a.div.withConfig({displayName:"Container",componentId:"sc-6yj7rz-0"})([""," border-radius:",";",""],(({position:e})=>"relative"===e?"\n  display: inline-block;\n  position: relative;\n  bottom: 42px;\n  left: 12px;\n  z-index: 1;\n":""),(({theme:e})=>e.eui.euiBorderRadius),(({boxShadow:e,position:t})=>"relative"===t?e:""));function w(e){const t=Object(u.useEuiShadow)("l");return o.a.createElement(O,{boxShadow:t,position:"relative"},o.a.createElement(E.a,h()({},e,{btnProps:{iconType:"boxesHorizontal",color:"primary",display:"empty"}})))}var k=a(134),M=a(158);const I=e=>({DEGRADING:Object(u.useEuiBackgroundColor)("warning"),VIOLATED:Object(u.useEuiBackgroundColor)("danger"),HEALTHY:Object(u.useEuiBackgroundColor)("success"),NO_DATA:Object(u.useEuiBackgroundColor)("subdued")}[null!=e?e:"NO_DATA"]),x=e=>e.groupBy&&e.groupBy!==c.a?`${e.groupBy}: ${e.instanceId}`:"";function C({slo:e,rules:t,activeAlerts:a,historicalSummary:n,cardsPerRow:r}){const s=o.a.useRef(null),[l,u]=Object(i.useState)(!1),[d,b]=Object(i.useState)(!1),[v,y]=Object(i.useState)(!1),[h,E]=Object(i.useState)(!1),O=Object(g.a)(n,"sli_value"),{handleCreateRule:I,handleDeleteCancel:x,handleDeleteConfirm:C}=Object(m.a)({slo:e,setDeleteConfirmationModalOpen:E,setIsActionsPopoverOpen:b,setIsAddRuleFlyoutOpen:y});return o.a.createElement(o.a.Fragment,null,o.a.createElement(A,{panelRef:s,onMouseOver:()=>{l||u(!0)},onMouseLeave:()=>{l&&u(!1)},paddingSize:"none",title:e.summary.status},o.a.createElement(j,{slo:e,historicalSliData:O}),(l||d)&&o.a.createElement(w,{slo:e,isActionsPopoverOpen:d,setIsActionsPopoverOpen:b,setIsAddRuleFlyoutOpen:y,setDeleteConfirmationModalOpen:E})),o.a.createElement(p.a,{containerRef:s},o.a.createElement(M.a,{slo:e,rules:t,activeAlerts:a,handleCreateRule:I,hasGroupBy:Boolean(e.groupBy&&e.groupBy!==c.a)})),o.a.createElement(f.a,{slo:e,isAddRuleFlyoutOpen:v,setIsAddRuleFlyoutOpen:y}),h?o.a.createElement(k.a,{slo:e,onCancel:x,onConfirm:C}):null)}function j({slo:e,historicalSliData:t}){const{application:{navigateToUrl:a}}=Object(b.a)().services,n=I(e.summary.status),r=x(e),{sliValue:i,sloTarget:c,sloDetailsUrl:p}=Object(v.a)(e);return o.a.createElement(l.Chart,null,o.a.createElement(l.Settings,{baseTheme:l.DARK_THEME,onElementClick:([e])=>{Object(l.isMetricElementEvent)(e)&&a(p)},locale:d.i18n.getLocale()}),o.a.createElement(l.Metric,{id:`${e.id}-${e.instanceId}`,data:[[{title:e.name,subtitle:r,value:i,trendShape:l.MetricTrendShape.Area,trend:null==t?void 0:t.map((e=>({x:e.key,y:e.value}))),extra:o.a.createElement(s.FormattedMessage,{id:"xpack.observability.sLOGridItem.targetFlexItemLabel",defaultMessage:"Target {target}",values:{target:c}}),icon:()=>o.a.createElement(u.EuiIcon,{type:"visGauge",size:"l"}),color:n}]]}))}var A=r()(u.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-1e8oa0h-0"})(["height:182px;overflow:hidden;position:relative;"])},173:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1),r=a.n(n),i=a(12),o=a(0);function s({slo:e}){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement("div",null,"NO_DATA"===e.summary.status&&r.a.createElement(i.EuiToolTip,{position:"top",content:o.i18n.translate("xpack.observability.slo.sloStatusBadge.noDataTooltip",{defaultMessage:"It may take some time before the data is aggregated and available."})},r.a.createElement(i.EuiBadge,{color:"default"},o.i18n.translate("xpack.observability.slo.sloStatusBadge.noData",{defaultMessage:"No data"}))),"HEALTHY"===e.summary.status&&r.a.createElement(i.EuiBadge,{color:"success"},o.i18n.translate("xpack.observability.slo.sloStatusBadge.healthy",{defaultMessage:"Healthy"})),"DEGRADING"===e.summary.status&&r.a.createElement(i.EuiBadge,{color:"warning"},o.i18n.translate("xpack.observability.slo.sloStatusBadge.degrading",{defaultMessage:"Degrading"})),"VIOLATED"===e.summary.status&&r.a.createElement(i.EuiBadge,{color:"danger"},o.i18n.translate("xpack.observability.slo.sloStatusBadge.violated",{defaultMessage:"Violated"})))),e.summary.errorBudget.isEstimated&&r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement("div",null,r.a.createElement(i.EuiBadge,{color:"default"},o.i18n.translate("xpack.observability.slo.sloStatusBadge.forecasted",{defaultMessage:"Forecasted"})))))}},185:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(142);function r({slo:e,setIsAddRuleFlyoutOpen:t,setIsActionsPopoverOpen:a,setDeleteConfirmationModalOpen:r}){const{mutate:i}=Object(n.a)();return{handleDeleteConfirm:()=>{r(!1),i({id:e.id,name:e.name})},handleDeleteCancel:()=>{r(!1)},handleCreateRule:()=>{a(!1),t(!0)}}}},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(65),r=a.n(n),i=a(12),o=a(0),s=a(1),l=a.n(s),u=a(102),c=a(79),d=a.n(c),p=a(157),m=a(122),f=a(42),g=a(7),b=a(5);const v=d()(i.EuiPanel).withConfig({displayName:"CustomShadowPanel",componentId:"sc-18pl20q-0"})(["",""],(e=>e.shadow));function y({children:e,hasPanel:t}){const a=Object(i.useEuiShadow)("s");return t?l.a.createElement(v,{color:"plain",element:"button",grow:!1,paddingSize:"none",hasShadow:!1,shadow:a},e):e}function h({slo:e,isActionsPopoverOpen:t,setIsActionsPopoverOpen:a,setIsAddRuleFlyoutOpen:n,setDeleteConfirmationModalOpen:s,btnProps:c}){const{application:{navigateToUrl:d},http:{basePath:v},share:{url:{locators:h}}}=Object(f.a)().services,{hasWriteCapabilities:E}=Object(m.a)(),O=v.prepend(g.r.observability.sloDetails(e.id,e.groupBy!==u.a&&e.instanceId?e.instanceId:void 0)),w=()=>{a(!t)},k=Object(p.a)(),M=l.a.createElement(i.EuiButtonIcon,r()({"data-test-subj":"o11ySloListItemButton","aria-label":o.i18n.translate("xpack.observability.slo.item.actions.button",{defaultMessage:"Actions"}),color:"text",disabled:!e.summary,display:"empty",iconType:"boxesVertical",size:"s",onClick:w},c));return l.a.createElement(i.EuiPopover,{anchorPosition:"downLeft",button:c?l.a.createElement(y,{hasPanel:!0},M):M,panelPaddingSize:"m",closePopover:w,isOpen:t},l.a.createElement(i.EuiContextMenuPanel,{size:"m",items:[l.a.createElement(i.EuiContextMenuItem,{key:"view",icon:"inspect",onClick:()=>{d(O)},"data-test-subj":"sloActionsView"},o.i18n.translate("xpack.observability.slo.item.actions.details",{defaultMessage:"Details"})),l.a.createElement(i.EuiContextMenuItem,{key:"edit",icon:"pencil",disabled:!E,onClick:()=>{d(v.prepend(g.r.observability.sloEdit(e.id)))},"data-test-subj":"sloActionsEdit"},o.i18n.translate("xpack.observability.slo.item.actions.edit",{defaultMessage:"Edit"})),l.a.createElement(i.EuiContextMenuItem,{key:"createRule",icon:"bell",disabled:!E,onClick:()=>{a(!1),n(!0)},"data-test-subj":"sloActionsCreateRule"},o.i18n.translate("xpack.observability.slo.item.actions.createRule",{defaultMessage:"Create new alert rule"})),l.a.createElement(i.EuiContextMenuItem,{key:"manageRules",icon:"gear",disabled:!E,onClick:async()=>{const t=h.get(b.rulesLocatorID);null==t||t.navigate({params:{sloId:e.id}},{replace:!1})},"data-test-subj":"sloActionsManageRules"},o.i18n.translate("xpack.observability.slo.item.actions.manageRules",{defaultMessage:"Manage rules"})),l.a.createElement(i.EuiContextMenuItem,{key:"clone",disabled:!E,icon:"copy",onClick:()=>{k(e)},"data-test-subj":"sloActionsClone"},o.i18n.translate("xpack.observability.slo.item.actions.clone",{defaultMessage:"Clone"})),l.a.createElement(i.EuiContextMenuItem,{key:"delete",icon:"trash",disabled:!E,onClick:()=>{s(!0),a(!1)},"data-test-subj":"sloActionsDelete"},o.i18n.translate("xpack.observability.slo.item.actions.delete",{defaultMessage:"Delete"}))]}))}},187:function(e,t,a){"use strict";a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return m}));var n=a(1),r=a.n(n),i=a(12),o=a(159),s=a(173),l=a(161),u=a(162),c=a(163),d=a(189);function p({activeAlerts:e,isLoading:t,rules:a,slo:n,onClickRuleBadge:p}){return r.a.createElement(i.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s",alignItems:"center",wrap:!0},t?r.a.createElement(m,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{slo:n}),r.a.createElement(d.a,{slo:n}),r.a.createElement(o.a,{slo:n}),r.a.createElement(u.a,{slo:n}),r.a.createElement(l.a,{slo:n,activeAlerts:e}),r.a.createElement(c.a,{rules:a,onClick:p})))}function m(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiSkeletonRectangle,{isLoading:!0,contentAriaLabel:"Loading",width:"54.16px",height:"20px",borderRadius:"s"}),r.a.createElement(i.EuiSkeletonRectangle,{isLoading:!0,contentAriaLabel:"Loading",width:"54.16px",height:"20px",borderRadius:"s"}),r.a.createElement(i.EuiSkeletonRectangle,{isLoading:!0,contentAriaLabel:"Loading",width:"54.16px",height:"20px",borderRadius:"s"}))}},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>["sli.apm.transactionDuration","sli.apm.transactionErrorRate"].includes(e)},189:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(12),r=a(0),i=a(102),o=a(1),s=a.n(o),l=a(84);function u({slo:e,color:t}){return e.groupBy&&e.groupBy!==i.a?s.a.createElement(n.EuiFlexItem,{grow:!1},s.a.createElement(n.EuiBadge,{color:null!=t?t:l.euiLightVars.euiColorDisabled},s.a.createElement(n.EuiToolTip,{position:"top",content:r.i18n.translate("xpack.observability.slo.groupByBadge",{defaultMessage:"Group by {groupKey}",values:{groupKey:e.groupBy}}),display:"block"},s.a.createElement("span",null,e.groupBy,": ",e.instanceId)))):null}}}]);