(window.dataViewManagement_bundle_jsonpfunction=window.dataViewManagement_bundle_jsonpfunction||[]).push([[1],{28:function(e,t,a){"use strict";a.r(t),a.d(t,"mountManagementSection",(function(){return _a}));var n=a(5),i=a.n(n),s=a(21),l=a.n(s),r=a(10),d=a(30),o=a.n(d);const c={services:{}},u=Object(n.createContext)(c);var p=a(36),m=a.n(p),b=a(6);const g=({children:e,component:t,render:a,...s})=>{const l=Object(n.useMemo)((()=>{if(t)return e=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(j,null),Object(b.jsx)(t,e))}),[t]);if(l)return Object(b.jsx)(r.Route,o()({},s,{component:l}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(b.jsx)(r.Route,o()({},s,{render:e=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(j,null),t(e))}))}return Object(b.jsx)(r.Route,s,Object(b.jsx)(j,null),e)},j=()=>{const{executionContext:e}=Object(n.useContext)(u).services,t=Object(r.useRouteMatch)();return function(e,t){m()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var x=a(17);const f=({children:e,...t})=>Object(b.jsx)(r.Router,t,Object(b.jsx)(x.CompatRouter,null,e));var h=a(11);const O=({legacySwitch:e=!0,children:t})=>{const a=Object(r.useRouteMatch)();return e?Object(b.jsx)(r.Switch,null,t):Object(b.jsx)(x.Routes,null,n.Children.map(t,(e=>{if(i.a.isValidElement(e)&&e.type===g){var n;const s=Object(h.replace)(null==e?void 0:e.props.path,a.url+"/",""),l="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(b.jsx)(x.Route,{path:s,element:Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(j,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(b.jsx)(e.props.component,null)||l&&l()||t)})}return e})))};var y=a(0),M=a(31),F=a.n(M),v=a(13),P=a.n(v),E=a(7);let w;!function(e){e.preboot="preboot",e.standard="standard"}(w||(w={}));const T="eui-global",S="eui-utilities",C={darkMode:!1},I=[E.euiStylisPrefixer],D=P()({key:"css",stylisPlugins:I,container:document.querySelector('meta[name="emotion"]')}),_=P()({key:T,stylisPlugins:I,container:document.querySelector(`meta[name="${T}"]`)}),L=P()({key:S,stylisPlugins:I,container:document.querySelector(`meta[name="${S}"]`)});D.compat=!0,_.compat=!0,L.compat=!0;const k={default:D,global:_,utility:L},N=({theme:{theme$:e},globalStyles:t,colorMode:a,children:i})=>{const s=F()(e,C),l=Object(n.useMemo)((()=>(e=>e.darkMode?E.COLOR_MODES_STANDARD.dark:E.COLOR_MODES_STANDARD.light)(s)),[s]),r=a||l,d=!1!==t&&void 0;return Object(b.jsx)(E.EuiProvider,{cache:k,colorMode:r,globalStyles:d,utilityClasses:d},i)},A=({children:e,i18n:t,...a})=>Object(b.jsx)(N,a,Object(b.jsx)(t.Context,null,e));var V=a(18);const R=({children:e,...t})=>Object(b.jsx)(A,o()({globalStyles:!1},t),Object(b.jsx)(V.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(b.jsx)(V.KibanaErrorBoundary,null,e)));var B=a(9),U=a(8),H={name:"1azakc",styles:"text-align:center"};const z=()=>{const e=H;return Object(b.jsx)("div",{css:e},Object(b.jsx)(E.EuiLoadingSpinner,null))};function G({href:e}){return Object(b.jsx)("dl",null,Object(b.jsx)(E.EuiTitle,{size:"xxs"},Object(b.jsx)("dt",{className:"eui-displayInline"},Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.learnMore",defaultMessage:"Want to learn more?"}))),"â€ƒ",Object(b.jsx)("dd",{className:"eui-displayInline"},Object(b.jsx)(E.EuiLink,{href:e,target:"_blank",external:!0},Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.readDocumentation",defaultMessage:"Read the docs"}))))}const K=y.i18n.translate("sharedUXPackages.noDataViewsPrompt.addDataViewText",{defaultMessage:"Create data view"}),$=({onClickCreate:e,canCreateNewDataView:t,dataViewsDocLink:s,emptyPromptColor:l="plain"})=>{const r=t&&Object(b.jsx)(E.EuiButton,{onClick:e,iconType:"plusInCircle",fill:!0,"data-test-subj":"createDataViewButton"},K),d=t?Object(b.jsx)("h2",null,Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.youHaveData",defaultMessage:"You have data in Elasticsearch."}),Object(b.jsx)("br",null),Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.nowCreate",defaultMessage:"Now, create a data view."})):Object(b.jsx)("h2",null,Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.noPermission.title",defaultMessage:"You need permission to create data views"})),c=t?Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.dataViewExplanation",defaultMessage:"Data views identify the Elasticsearch data you want to explore. You can point data views to one or more data streams, indices, and index aliases, such as your log data from yesterday, or all indices that contain your log data."})):Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"sharedUXPackages.noDataViewsPrompt.noPermission.dataViewExplanation",defaultMessage:"Data views identify the Elasticsearch data that you want to explore. To create data views, ask your administrator for the required permissions."})),u=s?Object(b.jsx)(G,{href:s}):void 0,p=((e,t=Object(b.jsx)(z,null))=>i.a.forwardRef(((a,i)=>Object(b.jsx)(V.KibanaErrorBoundaryProvider,{analytics:a.analytics},Object(b.jsx)(V.KibanaErrorBoundary,null,Object(b.jsx)(n.Suspense,{fallback:t},Object(b.jsx)(e,o()({},a,{ref:i}))))))))(i.a.lazy((()=>a.e(2).then(a.bind(null,58)).then((({DataViewIllustration:e})=>({default:e}))))),Object(b.jsx)(E.EuiPanel,{color:"subdued",style:{width:226,height:206}})),m=Object(b.jsx)(p,null);return Object(b.jsx)(E.EuiEmptyPrompt,{"data-test-subj":"noDataViewsPrompt",layout:"horizontal",css:Object(b.css)("max-width:",830,"px!important;flex-grow:0;",""),color:l,actions:r,icon:m,title:d,body:c,footer:u})};a(41);var W={name:"y1f223",styles:"margin:auto"};const q=({onRefresh:e,createAnyway:t,canSaveIndexPattern:a,addDataUrl:n,navigateToApp:i})=>{const s=Object(b.jsx)(E.EuiText,{color:"subdued",textAlign:"center",size:"xs"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.createAnywayTxt",defaultMessage:"You can also {link}",values:{link:Object(b.jsx)(E.EuiLink,{onClick:()=>t(),"data-test-subj":"createAnyway"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.createAnywayLink",defaultMessage:"create a data view against hidden, system or default indices."}))}}));return Object(b.jsx)(E.EuiPanel,{className:"inpEmptyState","data-test-subj":"indexPatternEmptyState",color:"subdued",hasShadow:!1,paddingSize:"xl",css:W},Object(b.jsx)(E.EuiPageHeader,null,Object(b.jsx)(E.EuiTitle,null,Object(b.jsx)("h2",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.noDataTitle",defaultMessage:"Ready to try Kibana? First, you need data."})))),Object(b.jsx)(E.EuiSpacer,{size:"xl"}),Object(b.jsx)("div",null,Object(b.jsx)(E.EuiFlexGrid,{className:"inpEmptyState__cardGrid",columns:3,responsive:!0},Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiCard,{className:"inpEmptyState__card",onClick:()=>{i("integrations",{path:"/browse"})},icon:Object(b.jsx)(E.EuiIcon,{size:"xl",type:"database",color:"subdued"}),title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.integrationCardTitle",defaultMessage:"Add integration"}),description:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.integrationCardDescription",defaultMessage:"Add data from a variety of sources."})})),Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiCard,{onClick:()=>i("home",{path:"#/tutorial_directory/fileDataViz"}),className:"inpEmptyState__card",icon:Object(b.jsx)(E.EuiIcon,{size:"xl",type:"document",color:"subdued"}),title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.uploadCardTitle",defaultMessage:"Upload a file"}),description:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.uploadCardDescription",defaultMessage:"Import a CSV, NDJSON, or log file."})})),Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiCard,{className:"inpEmptyState__card",onClick:()=>{i("home",{path:"#/tutorial_directory/sampleData"})},icon:Object(b.jsx)(E.EuiIcon,{size:"xl",type:"heatmap",color:"subdued"}),title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.sampleDataCardTitle",defaultMessage:"Add sample data"}),description:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.sampleDataCardDescription",defaultMessage:"Load a data set and a Kibana dashboard."})}))),Object(b.jsx)(E.EuiSpacer,{size:"xxl"}),Object(b.jsx)("div",{className:"inpEmptyState__footer"},Object(b.jsx)(E.EuiFlexGroup,{justifyContent:"center"},Object(b.jsx)(E.EuiFlexItem,{grow:!1,className:"inpEmptyState__footerFlexItem"},Object(b.jsx)(E.EuiDescriptionList,{listItems:[{title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.learnMore",defaultMessage:"Want to learn more?"}),description:Object(b.jsx)(E.EuiLink,{href:n,target:"_blank",external:!0},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.readDocs",defaultMessage:"Read documentation"}))}]})),Object(b.jsx)(E.EuiFlexItem,{grow:!1,className:"inpEmptyState__footerFlexItem"},Object(b.jsx)(E.EuiDescriptionList,{listItems:[{title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.haveData",defaultMessage:"Think you already have data?"}),description:Object(b.jsx)(E.EuiLink,{onClick:e,"data-test-subj":"refreshIndicesButton"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createDataView.emptyState.checkDataButton",defaultMessage:"Check for new data"})," ",Object(b.jsx)(E.EuiIcon,{type:"refresh",size:"s"}))}]}))),Object(b.jsx)(E.EuiSpacer,null),a&&s)))};function Y(e){return[{text:y.i18n.translate("indexPatternManagement.dataViews.listBreadcrumb",{defaultMessage:"Data views"}),href:e?"/":""}]}function J(e,t){return[...Y(!0),{text:e.getName(),href:t?`/patterns/${e.id}`:""}]}var X=a(14);const Q=y.i18n.translate("indexPatternManagement.indexPatternTable.savedObjectName",{defaultMessage:"data view"}),Z=({spacesApi:e,capabilities:t,spaceIds:a,id:s,title:l,refresh:r})=>{const[d,c]=Object(n.useState)(!1),u=e.ui.components.getSpaceList,p=e.ui.components.getShareToSpaceFlyout,m={savedObjectTarget:{type:X.DATA_VIEW_SAVED_OBJECT_TYPE,namespaces:a,id:s,title:l,noun:Q},onUpdate:r,onClose:function(){c(!1)}},g=!t||t.savedObjectsManagement.shareIntoSpace?{cursorStyle:"pointer",listOnClick:()=>c(!0)}:{cursorStyle:"not-allowed"};return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(u,o()({namespaces:a,displayLimit:8,behaviorContext:"outside-space"},g)),d&&Object(b.jsx)(p,m))};var ee=a(15),te=a(22);const ae="_a",ne="indexedFields",ie="scriptedFields",se="sourceFilters",le="relationships";var re=a(29),de=a.n(re),oe=a(19);const ce=y.i18n.translate("indexPatternManagement.editIndexPattern.sourcePlaceholder",{defaultMessage:"field filter, accepts wildcards (e.g., `user*` to filter fields starting with 'user')"}),ue=({onAddFilter:e})=>{const[t,a]=Object(n.useState)(""),i=Object(n.useCallback)((()=>{e(t),a("")}),[t,e]);return Object(b.jsx)(E.EuiFlexGroup,null,Object(b.jsx)(E.EuiFlexItem,{grow:10},Object(b.jsx)(E.EuiFieldText,{fullWidth:!0,value:t,"data-test-subj":"fieldFilterInput",onChange:e=>a(e.target.value.trim()),placeholder:ce})),Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiButton,{"data-test-subj":"addFieldFilterButton",isDisabled:0===t.length,onClick:i},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.addButtonLabel",defaultMessage:"Add"}))))},pe=({filterToDeleteValue:e,onCancelConfirmationModal:t,onDeleteFilter:a})=>Object(b.jsx)(E.EuiConfirmModal,{title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteSourceFilterLabel",defaultMessage:"Delete field filter '{value}'?",values:{value:e}}),onCancel:t,onConfirm:a,cancelButtonText:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteFilter.cancelButtonLabel",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.deleteFilter.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:E.EUI_MODAL_CONFIRM_BUTTON}),me=()=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.sourceLabel",defaultMessage:"Field filters can be used to exclude one or more fields when fetching a document. This happens when viewing a document in the Discover app, or with a table displaying results from a saved search in the Dashboard app. If you have documents with large or unimportant fields you may benefit from filtering those out at this lower level."})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.noteLabel",defaultMessage:"Note that multi-fields will incorrectly appear as matches in the table below. These filters only actually apply to fields in the original source document, so matching multi-fields are not actually being filtered."}))),Object(b.jsx)(E.EuiSpacer,{size:"s"})),be=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.filterHeader",{defaultMessage:"Filter"}),ge=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.filterDescription",{defaultMessage:"Filter name"}),je=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.matchesHeader",{defaultMessage:"Matches"}),xe=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.matchesDescription",{defaultMessage:"Language used for the field"}),fe=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.editAria",{defaultMessage:"Edit"}),he=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.saveAria",{defaultMessage:"Save"}),Oe=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.deleteAria",{defaultMessage:"Delete"}),ye=y.i18n.translate("indexPatternManagement.editIndexPattern.source.table.cancelAria",{defaultMessage:"Cancel"});class table_Table extends n.Component{constructor(e){super(e),de()(this,"startEditingFilter",((e,t)=>this.setState({editingFilterId:e,editingFilterValue:t}))),de()(this,"stopEditingFilter",(()=>this.setState({editingFilterId:""}))),de()(this,"onEditingFilterChange",(e=>this.setState({editingFilterValue:e.target.value}))),de()(this,"onEditFieldKeyDown",(({key:e})=>{E.keys.ENTER===e&&this.state.editingFilterId&&this.state.editingFilterValue&&(this.props.saveFilter({clientId:this.state.editingFilterId,value:this.state.editingFilterValue}),this.stopEditingFilter()),E.keys.ESCAPE===e&&this.stopEditingFilter()})),this.state={editingFilterId:"",editingFilterValue:""}}getColumns(){const{deleteFilter:e,fieldWildcardMatcher:t,indexPattern:a,saveFilter:n}=this.props;return[{field:"value",name:be,description:ge,dataType:"string",sortable:!0,render:(e,t)=>this.state.editingFilterId&&this.state.editingFilterId===t.clientId?Object(b.jsx)(E.EuiFieldText,{autoFocus:!0,value:this.state.editingFilterValue,onChange:this.onEditingFilterChange,onKeyDown:this.onEditFieldKeyDown,"data-test-subj":`filter_input_${e}`}):Object(b.jsx)("span",null,e)},{field:"value",name:je,description:xe,dataType:"string",sortable:!0,render:(e,n)=>{const i=t([this.state.editingFilterId===n.clientId?this.state.editingFilterValue:e]),s=a.getNonScriptedFields().map((e=>e.name)).filter(i).sort();return s.length?Object(b.jsx)("span",null,s.join(", ")):Object(b.jsx)("em",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.source.table.notMatchedLabel",defaultMessage:"The source filter doesn't match any known fields."}))}},{name:"",align:E.RIGHT_ALIGNMENT,width:"100",render:t=>this.state.editingFilterId===t.clientId?Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiButtonIcon,{size:"s",onClick:()=>{n({clientId:this.state.editingFilterId,value:this.state.editingFilterValue}),this.stopEditingFilter()},iconType:"checkInCircleFilled","aria-label":he,"data-test-subj":`save_filter-${t.value}`}),Object(b.jsx)(E.EuiButtonIcon,{size:"s",onClick:()=>{this.stopEditingFilter()},iconType:"cross","aria-label":ye})):Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiButtonIcon,{size:"s",onClick:()=>this.startEditingFilter(t.clientId,t.value),iconType:"pencil","aria-label":fe,"data-test-subj":`edit_filter-${t.value}`}),Object(b.jsx)(E.EuiButtonIcon,{size:"s",color:"danger",onClick:()=>e(t),iconType:"trash","aria-label":Oe}))}]}render(){const{items:e,isSaving:t}=this.props,a=this.getColumns();return Object(b.jsx)(E.EuiInMemoryTable,{loading:t,items:e,columns:a,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:!0})}}class source_filters_table_SourceFiltersTable extends n.Component{constructor(e){super(e),de()(this,"clientSideId",0),de()(this,"updateFilters",(()=>{const e=(this.props.indexPattern.sourceFilters||[]).map((e=>({...e,clientId:++this.clientSideId})));this.setState({filters:e})})),de()(this,"getFilteredFilters",Object(oe.createSelector)((e=>e.filters),((e,t)=>t.filterFilter),((e,t)=>{if(t){const a=t.toLowerCase();return e.filter((e=>e.value.toLowerCase().includes(a)))}return e}))),de()(this,"startDeleteFilter",(e=>{this.setState({filterToDelete:e,isDeleteConfirmationModalVisible:!0})})),de()(this,"hideDeleteConfirmationModal",(()=>{this.setState({filterToDelete:void 0,isDeleteConfirmationModalVisible:!1})})),de()(this,"deleteFilter",(async()=>{const{indexPattern:e,onAddOrRemoveFilter:t,saveIndexPattern:a}=this.props,{filterToDelete:n,filters:i}=this.state;e.sourceFilters=i.filter((e=>e.clientId!==(null==n?void 0:n.clientId))),this.setState({isSaving:!0}),await a(e),t&&t(),this.updateFilters(),this.setState({isSaving:!1}),this.hideDeleteConfirmationModal()})),de()(this,"onAddFilter",(async e=>{const{indexPattern:t,onAddOrRemoveFilter:a,saveIndexPattern:n}=this.props;t.sourceFilters=[...t.sourceFilters||[],{value:e}],this.setState({isSaving:!0}),await n(t),a&&a(),this.updateFilters(),this.setState({isSaving:!1})})),de()(this,"saveFilter",(async({clientId:e,value:t})=>{const{indexPattern:a,saveIndexPattern:n}=this.props,{filters:i}=this.state;a.sourceFilters=i.map((a=>a.clientId===e?{value:t,clientId:e}:a)),this.setState({isSaving:!0}),await n(a),this.updateFilters(),this.setState({isSaving:!1})})),this.state={filterToDelete:void 0,isDeleteConfirmationModalVisible:!1,isSaving:!1,filters:[]}}UNSAFE_componentWillMount(){this.updateFilters()}render(){const{indexPattern:e,fieldWildcardMatcher:t}=this.props,{isSaving:a,filterToDelete:n}=this.state,s=this.getFilteredFilters(this.state,this.props);return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(me,null),Object(b.jsx)(ue,{onAddFilter:this.onAddFilter}),Object(b.jsx)(E.EuiSpacer,{size:"l"}),Object(b.jsx)(table_Table,{isSaving:a,indexPattern:e,items:s,fieldWildcardMatcher:t,deleteFilter:this.startDeleteFilter,saveFilter:this.saveFilter}),n&&Object(b.jsx)(pe,{filterToDeleteValue:n.value,onCancelConfirmationModal:this.hideDeleteConfirmationModal,onDeleteFilter:this.deleteFilter}))}}const Me=e=>{var t,a;return!e.isMapped&&e.isUserEditable&&"composite"!==(null===(t=e.runtimeField)||void 0===t?void 0:t.type)||"composite"===(null===(a=e.runtimeField)||void 0===a?void 0:a.type)&&"composite"===e.type},Fe=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.additionalInfoAriaLabel",{defaultMessage:"Additional field information"}),ve=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictDetailIconAria",{defaultMessage:"Conflict Detail"}),Pe=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.primaryTimeAriaLabel",{defaultMessage:"Primary time field"}),Ee=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.primaryTimeTooltip",{defaultMessage:"This field represents the time that events occurred."}),we=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.nameHeader",{defaultMessage:"Name"}),Te=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.typeHeader",{defaultMessage:"Type"}),Se=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.formatHeader",{defaultMessage:"Format"}),Ce=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.searchableHeader",{defaultMessage:"Searchable"}),Ie=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.searchableDescription",{defaultMessage:"These fields can be used in the filter bar"}),De=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isSearchableAria",{defaultMessage:"Is searchable"}),_e=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.aggregatableLabel",{defaultMessage:"Aggregatable"}),Le=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.aggregatableDescription",{defaultMessage:"These fields can be used in visualization aggregations"}),ke=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isAggregatableAria",{defaultMessage:"Is aggregatable"}),Ne=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.excludedLabel",{defaultMessage:"Excluded"}),Ae=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.excludedDescription",{defaultMessage:"Fields that are excluded from _source when it is fetched"}),Ve=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.isExcludedAria",{defaultMessage:"Is excluded"}),Re=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.editLabel",{defaultMessage:"Edit"}),Be=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.editDescription",{defaultMessage:"Edit"}),Ue=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.deleteLabel",{defaultMessage:"Delete"}),He=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.deleteDescription",{defaultMessage:"Delete"}),ze=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.customLabelTooltip",{defaultMessage:"A custom label for the field."}),Ge=y.i18n.translate("indexPatternManagement.editDataView.fields.table.runtimeIconTipText",{defaultMessage:"This field exists on the data view only."}),Ke=y.i18n.translate("indexPatternManagement.editDataView.fields.table.conflictType",{defaultMessage:"Conflict"}),$e=e=>{const t=[];return Object.keys(e).forEach((a=>{t.push({type:a,indices:e[a].slice(0,99).join(", ")})})),t},We=[{field:"type",name:y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictModalTypeColumn",{defaultMessage:"Type"})},{field:"indices",name:y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.conflictModalIndicesColumn",{defaultMessage:"Indices"})}];class table_table_Table extends n.PureComponent{renderBooleanTemplate(e,t){return e?Object(b.jsx)(E.EuiIcon,{type:"dot",color:"success","aria-label":t}):Object(b.jsx)("span",null)}renderFieldType(e,t){const a=t.conflictDescriptions&&t.conflictDescriptions[t.name];return Object(b.jsx)("span",null,"conflict"===e&&a?"":e,t.conflictDescriptions?((e,t,a,n)=>{const s=()=>{const s=a(Object(B.toMountPoint)((({closeFn:e,fieldName:t,conflictDescriptions:a})=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiModalHeader,null,Object(b.jsx)(E.EuiModalHeaderTitle,null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.title",defaultMessage:"This field has a type conflict"}))),Object(b.jsx)(E.EuiModalBody,null,Object(b.jsx)(E.EuiText,null,Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.description",defaultMessage:"The type of the {fieldName} field changes across indices and might not be available for search, visualizations, and other analysis.",values:{fieldName:Object(b.jsx)(E.EuiCode,null,t)}})),Object(b.jsx)(E.EuiBasicTable,{tableCaption:"Demo of EuiBasicTable",items:$e(a),rowHeader:"firstName",columns:We,tableLayout:"auto"}))),Object(b.jsx)(E.EuiModalFooter,null,Object(b.jsx)(E.EuiButton,{onClick:e,fill:!0},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.fields.conflictModal.closeBtn",defaultMessage:"Close"})))))({closeFn:()=>{s.close()},fieldName:e,conflictDescriptions:t}),{theme$:n.theme$}))};return Object(b.jsx)("span",null," ",Object(b.jsx)(E.EuiBadge,{color:"warning",iconType:"warning",onClick:s,iconOnClick:s,iconOnClickAriaLabel:ve,onClickAriaLabel:ve},Ke))})(t.name,t.conflictDescriptions,this.props.openModal,this.props.theme):"")}render(){const{items:e,editField:t,deleteField:a,indexPattern:n}=this.props,i=[{field:"displayName",name:we,dataType:"string",sortable:!0,render:(e,t)=>((e,t)=>{return Object(b.jsx)("span",{"data-test-subj":`field-name-${e.name}`},e.name,e.info&&e.info.length?Object(b.jsx)("span",null,"Â ",Object(b.jsx)(E.EuiIconTip,{type:"questionInCircle",color:"primary","aria-label":Fe,content:e.info.map(((e,t)=>Object(b.jsx)("div",{key:t},e)))})):null,t===e.name?Object(b.jsx)("span",null,"Â ",Object(b.jsx)(E.EuiIconTip,{type:"clock",color:"primary","aria-label":Pe,content:Ee})):null,!e.isMapped&&e.hasRuntime?Object(b.jsx)("span",null,"Â ",Object(b.jsx)(E.EuiIconTip,{type:"indexRuntime",title:(a=e,"composite"===(null===(n=a.runtimeField)||void 0===n?void 0:n.type)?"composite"!==a.type?y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.runtimeIconTipTitleCompositeSubfield",{defaultMessage:"Composite runtime subfield"}):y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.runtimeIconTipTitleComposite",{defaultMessage:"Composite runtime field"}):y.i18n.translate("indexPatternManagement.editIndexPattern.fields.table.runtimeIconTipTitle",{defaultMessage:"Runtime field"})),content:Ge})):null,e.customLabel&&e.customLabel!==e.name?Object(b.jsx)("div",null,Object(b.jsx)(E.EuiToolTip,{content:ze},Object(b.jsx)(E.EuiBadge,{iconType:"flag",iconSide:"left"},e.customLabel))):null);var a,n})(t,n.timeFieldName),width:"38%","data-test-subj":"indexedFieldName"},{field:"type",name:Te,dataType:"string",sortable:!0,render:(e,t)=>this.renderFieldType(e,t),"data-test-subj":"indexedFieldType"},{field:"format",name:Se,dataType:"string",sortable:!0},{field:"searchable",name:Ce,description:Ie,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,De)},{field:"aggregatable",name:_e,description:Le,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,ke)},{field:"excluded",name:Ne,description:Ae,dataType:"boolean",sortable:!0,render:e=>this.renderBooleanTemplate(e,Ve)},{name:"",actions:[{name:Re,description:Be,icon:"pencil",onClick:t,type:"icon","data-test-subj":"editFieldFormat",available:e=>e.isUserEditable}],width:"40px"},{name:"",actions:[{name:Ue,description:He,icon:"trash",onClick:e=>{var t,n;const i=[e.name];if(null!==(t=e.spec)&&void 0!==t&&null!==(n=t.runtimeField)&&void 0!==n&&n.fields){const t=Object.keys(e.spec.runtimeField.fields).map((t=>`${e.name}.${t}`));i.push(...t)}a(i)},type:"icon","data-test-subj":"deleteField",available:Me}],width:"40px"}];return Object(b.jsx)(E.EuiInMemoryTable,{items:e,columns:i,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:{sort:{field:"displayName",direction:"asc"}}})}}class indexed_fields_table_IndexedFieldsTable extends n.Component{constructor(e){super(e),de()(this,"getFilteredFields",Object(oe.createSelector)((e=>e.fields),((e,t)=>t.fieldFilter),((e,t)=>t.indexedFieldTypeFilter),((e,t)=>t.schemaFieldTypeFilter),((e,t,a,n)=>{if(t){const a=t.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(a)||e.displayName&&e.displayName.toLowerCase().includes(a)))}return a.length&&(e=e.filter((e=>{var t,n,i;return!(!a.includes("conflict")||"conflict"!==e.kbnType)||!!("runtimeField"in e&&null!==(t=e.runtimeField)&&void 0!==t&&t.type&&a.includes(null===(n=e.runtimeField)||void 0===n?void 0:n.type))||(null===(i=e.esTypes)||void 0===i?void 0:i.length)&&e.esTypes.filter((e=>a.includes(e))).length}))),n.length&&(e=e.filter((e=>n.includes("runtime")&&"runtimeField"in e||n.includes("indexed")&&!("runtimeField"in e)))),e}))),this.state={fields:[...this.mapCompositeRuntimeFields(this.props.compositeRuntimeFields),...this.mapFields(this.props.fields)]}}UNSAFE_componentWillReceiveProps(e){e.fields===this.props.fields&&e.compositeRuntimeFields===this.props.compositeRuntimeFields||this.setState({fields:[...this.mapCompositeRuntimeFields(e.compositeRuntimeFields),...this.mapFields(e.fields)]})}mapFields(e){const{indexPattern:t,fieldWildcardMatcher:a,helpers:n,userEditPermission:i}=this.props,s=a(t.sourceFilters&&t.sourceFilters.map((e=>e.value))||[]);return e&&e.map((e=>{var a,l,r;return{...e.spec,id:e.name,type:(null===(a=e.esTypes)||void 0===a?void 0:a.join(", "))||"",kbnType:e.type,displayName:e.displayName,format:(null===(l=t.getFormatterForFieldNoDefault(e.name))||void 0===l||null===(r=l.type)||void 0===r?void 0:r.title)||"",excluded:!!s&&s(e.name),info:n.getFieldInfo&&n.getFieldInfo(t,e),isMapped:!!e.isMapped,isUserEditable:i,hasRuntime:!!e.runtimeField}}))||[]}mapCompositeRuntimeFields(e){const{indexPattern:t,fieldWildcardMatcher:a,userEditPermission:n}=this.props,i=a(t.sourceFilters&&t.sourceFilters.map((e=>e.value))||[]);return Object.entries(e).map((([e,t])=>({spec:{searchable:!1,aggregatable:!1,name:e,type:"composite",runtimeField:{type:"composite",script:t.script,fields:t.fields}},name:e,id:e,type:"composite",kbnType:"",displayName:e,excluded:!!i&&i(e),info:[],isMapped:!1,isUserEditable:n,hasRuntime:!0,runtimeField:{type:"composite",script:t.script,fields:t.fields}})))}render(){const{indexPattern:e}=this.props,t=this.getFilteredFields(this.state,this.props);return Object(b.jsx)("div",null,Object(b.jsx)(table_table_Table,{indexPattern:e,items:t,editField:e=>this.props.helpers.editField(e.name),deleteField:e=>this.props.helpers.deleteField(e),openModal:this.props.openModal,theme:this.props.theme}))}}var qe=a(23);class components_table_table_Table extends n.PureComponent{constructor(...e){super(...e),de()(this,"renderFormatCell",(e=>{const{indexPattern:t}=this.props,a=Object(h.get)(t,["fieldFormatMap",e,"type","title"],"");return Object(b.jsx)("span",null,a)}))}render(){const{items:e,editField:t,deleteField:a}=this.props,n=[{field:"displayName",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.nameHeader",{defaultMessage:"Name"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.nameDescription",{defaultMessage:"Name of the field"}),dataType:"string",sortable:!0,width:"38%"},{field:"lang",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.langHeader",{defaultMessage:"Lang"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.langDescription",{defaultMessage:"Language used for the field"}),dataType:"string",sortable:!0,"data-test-subj":"scriptedFieldLang"},{field:"script",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.scriptHeader",{defaultMessage:"Script"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.scriptDescription",{defaultMessage:"Script for the field"}),dataType:"string",sortable:!0},{field:"name",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.formatHeader",{defaultMessage:"Format"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.formatDescription",{defaultMessage:"Format used for the field"}),render:this.renderFormatCell,sortable:!1},{name:"",actions:[{type:"icon",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.editHeader",{defaultMessage:"Edit"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.editDescription",{defaultMessage:"Edit this field"}),icon:"pencil",onClick:t,available:e=>!!e.isUserEditable},{type:"icon",name:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.deleteHeader",{defaultMessage:"Delete"}),description:y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.table.deleteDescription",{defaultMessage:"Delete this field"}),icon:"trash",color:"danger",onClick:a,available:e=>!!e.isUserEditable}],width:"40px"}];return Object(b.jsx)(E.EuiInMemoryTable,{items:e,columns:n,pagination:{initialPageSize:10,pageSizeOptions:[5,10,25,50]},sorting:!0})}}const Ye=Object(r.withRouter)((({indexPatternId:e,history:t})=>{const{dataViews:a,docLinks:n}=Object(B.useKibana)().services,i=null==n?void 0:n.links,s=a.getCanSaveSync();return Object(b.jsx)(E.EuiFlexGroup,{alignItems:"center"},Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scriptedLabel",defaultMessage:"Scripted fields can be used in visualizations and displayed in documents. However, they cannot be searched."}),Object(b.jsx)("br",null),Object(b.jsx)(E.EuiIcon,{type:"warning",color:"warning",style:{marginRight:"4px"}}),Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.deprecation",defaultMessage:"Scripted fields are deprecated. Use {runtimeDocs} instead.",values:{runtimeDocs:Object(b.jsx)(E.EuiLink,{target:"_blank",href:i.runtimeFields.overview},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.header.runtimeLink",defaultMessage:"runtime fields"}))}})))),s&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiButton,o()({"data-test-subj":"addScriptedFieldLink"},Object(B.reactRouterNavigate)(t,`patterns/${e}/create-field/`)),Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.addFieldButton",defaultMessage:"Add scripted field"}))))})),Je=({deprecatedLangsInUse:e,painlessDocLink:t})=>e.length?Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiCallOut,{title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangHeader",defaultMessage:"Deprecation languages in use"}),color:"danger",iconType:"cross"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangLabel.deprecationLangDetail",defaultMessage:"The following deprecated languages are in use: {deprecatedLangsInUse}. Support for these languages will be removed in the next major version of Kibana and Elasticsearch. Convert you scripted fields to {link} to avoid any problems.",values:{deprecatedLangsInUse:e.join(", "),link:Object(b.jsx)(E.EuiLink,{href:t},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editIndexPattern.scripted.deprecationLangLabel.painlessDescription",defaultMessage:"Painless"}))}}))),Object(b.jsx)(E.EuiSpacer,{size:"m"})):null,Xe=({field:e,hideDeleteConfirmationModal:t,deleteField:a})=>{const n=y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteFieldLabel",{defaultMessage:"Delete scripted field '{fieldName}'?",values:{fieldName:e.name}}),i=y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteField.cancelButton",{defaultMessage:"Cancel"}),s=y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.deleteField.deleteButton",{defaultMessage:"Delete"});return Object(b.jsx)(E.EuiConfirmModal,{title:n,onCancel:t,onConfirm:a,cancelButtonText:i,confirmButtonText:s,defaultFocusedButton:E.EUI_MODAL_CONFIRM_BUTTON})};class scripted_fields_table_ScriptedFieldsTable extends n.Component{constructor(e){super(e),de()(this,"fetchFields",(async()=>{const e=await this.props.indexPattern.getScriptedFields(),t=[],a=[],n=["painless"];for(const i of e){const e=i.lang;!a.includes(e)&&n.includes(e)||t.push(e)}this.setState({fields:e,deprecatedLangsInUse:t})})),de()(this,"getFilteredItems",(()=>{const{fields:e}=this.state,{fieldFilter:t,scriptedFieldLanguageFilter:a,userEditPermission:n}=this.props;let i=e;a.length&&(i=e.filter((e=>a.includes(e.lang))));let s=i;if(t){const e=t.toLowerCase();s=i.filter((t=>t.name.toLowerCase().includes(e)))}return s.forEach((e=>e.isUserEditable=n)),s})),de()(this,"startDeleteField",(e=>{this.setState({fieldToDelete:e,isDeleteConfirmationModalVisible:!0})})),de()(this,"hideDeleteConfirmationModal",(()=>{this.setState({fieldToDelete:void 0,isDeleteConfirmationModalVisible:!1})})),de()(this,"deleteField",(()=>{const{indexPattern:e,onRemoveField:t,saveIndexPattern:a}=this.props,{fieldToDelete:n}=this.state;e.removeScriptedField(n.name),a(e),t&&t(),this.fetchFields(),this.hideDeleteConfirmationModal()})),this.state={deprecatedLangsInUse:[],fieldToDelete:void 0,isDeleteConfirmationModalVisible:!1,fields:[]}}UNSAFE_componentWillMount(){this.fetchFields()}render(){const{indexPattern:e,painlessDocLink:t}=this.props,{fieldToDelete:a,deprecatedLangsInUse:n}=this.state,s=this.getFilteredItems();return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(Ye,{indexPatternId:e.id||""}),Object(b.jsx)(Je,{deprecatedLangsInUse:n,painlessDocLink:t}),Object(b.jsx)(E.EuiSpacer,{size:"l"}),Object(b.jsx)(components_table_table_Table,{indexPattern:e,items:s,editField:e=>this.props.helpers.redirectToRoute(e),deleteField:this.startDeleteField}),a&&Object(b.jsx)(Xe,{deleteField:this.deleteField,field:a,hideDeleteConfirmationModal:this.hideDeleteConfirmationModal}))}}const Qe=i.a.createContext(null),Ze=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(b.jsx)(Qe.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},et=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,i=F()(n,void 0);return Object(b.jsx)(Qe.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},tt={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},at=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const s=Object(n.useRef)(null),l=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const i=((e,t)=>{let a=e;do{var n,i;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(i=a)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const s=i.href,l=""===i.target||"_self"===i.target,r=0===e.button;s&&l&&r&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(i.href))})({event:e,currentAppId:a,navigateToUrl:t,container:s.current})),[a,t]);return Object(b.jsx)("div",o()({onClick:l,ref:s,css:tt,"data-test-subj":"kbnRedirectAppLink"},i),e)},nt=({children:e,...t})=>Object(b.jsx)(at,o()({},function(){const e=Object(n.useContext)(Qe);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),it=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,i=Object(b.jsx)(nt,n,e);return Object(b.jsx)(et,{coreStart:a},i)}const{navigateToUrl:a,currentAppId:n,...i}=t,s=Object(b.jsx)(nt,i,e);return Object(b.jsx)(Ze,{currentAppId:n,navigateToUrl:a},s)};var st=a(1);const lt=y.i18n.translate("indexPatternManagement.objectsTable.relationships.columnTypeName",{defaultMessage:"Type"}),rt=y.i18n.translate("indexPatternManagement.objectsTable.relationships.columnTypeDescription",{defaultMessage:"Type of the saved object"}),dt=y.i18n.translate("indexPatternManagement.objectsTable.relationships.columnTitleName",{defaultMessage:"Title"}),ot=y.i18n.translate("indexPatternManagement.objectsTable.relationships.columnTitleDescription",{defaultMessage:"Title of the saved object"}),ct=y.i18n.translate("indexPatternManagement.objectsTable.relationships.search.filters.type.name",{defaultMessage:"Type"}),ut=({basePath:e,capabilities:t,id:a,navigateToUrl:n,getDefaultTitle:i,getSavedObjectLabel:s,relationships:l,allowedTypes:r})=>{const d=[{field:"type",name:lt,width:"50px",align:"center",description:rt,sortable:!1,render:(e,t)=>{const a=s(e,r);return Object(b.jsx)(E.EuiToolTip,{position:"top",content:a},Object(b.jsx)(E.EuiIcon,{"aria-label":a,type:t.meta.icon||"apps",size:"s","data-test-subj":"relationshipsObjectType"}))}},{field:"title",name:dt,description:ot,dataType:"string",sortable:!1,render:(a,n)=>{var s;const l=(null===(s=n.meta.inAppUrl)||void 0===s?void 0:s.path)||"",r=((e,t)=>{const{inAppUrl:a}=e.meta;return!!a&&(!a.uiCapabilitiesPath||Boolean(Object(h.get)(t,a.uiCapabilitiesPath)))})(n,t),d=a||i(n);return r?Object(b.jsx)(E.EuiLink,{href:e.prepend(l),"data-test-subj":"relationshipsTitle"},d):Object(b.jsx)(E.EuiText,{size:"s","data-test-subj":"relationshipsTitle"},d)}}],o=new Map(l.map((e=>[e.type,{value:e.type,name:e.type,view:e.type}]))),c={box:{incremental:!0,schema:!0},filters:[{type:"field_value_selection",field:"type",name:ct,multiSelect:"or",options:[...o.values()]}]};return Object(b.jsx)(it,{currentAppId:st.a,navigateToUrl:n},Object(b.jsx)(E.EuiInMemoryTable,{items:l,columns:d,pagination:!0,search:c,rowProps:()=>({"data-test-subj":"relationshipsTableRow"})}))},pt=y.i18n.translate("indexPatternManagement.editIndexPattern.list.defaultIndexPatternListName",{defaultMessage:"Default"}),mt=y.i18n.translate("indexPatternManagement.editIndexPattern.list.rollupIndexPatternListName",{defaultMessage:"Rollup"}),bt=(e="")=>"rollup"===e,gt=(e,t,a)=>{const n=[];return t&&n.push({key:"default",name:pt,"data-test-subj":"default-tag"}),bt(e.type)&&a&&n.push({key:"rollup",name:mt,"data-test-subj":"rollup-tag"}),n},jt=(e,t)=>{var a;if(!bt(e.type))return[];const n=null===(a=e.typeMeta)||void 0===a?void 0:a.aggs,i=n&&Object.keys(n).filter((e=>n[e][t.name]));return i&&i.length?["Rollup aggregations:"].concat(i.map((e=>{const a=n[e][t.name];switch(e){case"date_histogram":return y.i18n.translate("indexPatternManagement.editIndexPattern.list.dateHistogramSummary",{defaultMessage:"{aggName} (interval: {interval}, {delay} {time_zone})",values:{aggName:e,interval:a.fixed_interval,delay:a.delay?y.i18n.translate("indexPatternManagement.editIndexPattern.list.DateHistogramDelaySummary",{defaultMessage:"delay: {delay},",values:{delay:a.delay}}):"",time_zone:a.time_zone}});case"histogram":return y.i18n.translate("indexPatternManagement.editIndexPattern.list.histogramSummary",{defaultMessage:"{aggName} (interval: {interval})",values:{aggName:e,interval:a.interval}});default:return e}}))):[]};function xt(e,t,a=""){const n=Object(h.countBy)(function(e,t){const a=(t||"").toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(a)))}(e,a),(function(e){return e.scripted?"scripted":"indexed"}));return Object(h.defaults)(n,{indexed:0,scripted:0,sourceFilters:t.excludes?t.excludes.filter((e=>e.toLowerCase().includes(a.toLowerCase()))).length:0}),n}function ft(e,t,a){let n="";switch(e){case"indexed":n=y.i18n.translate("indexPatternManagement.editIndexPattern.tabs.fieldsHeader",{defaultMessage:"Fields"});break;case"scripted":n=y.i18n.translate("indexPatternManagement.editIndexPattern.tabs.scriptedHeader",{defaultMessage:"Scripted fields"});break;case"sourceFilters":n=y.i18n.translate("indexPatternManagement.editIndexPattern.tabs.sourceHeader",{defaultMessage:"Field filters"})}return n+` (${t[e]===a[e]?t[e]:t[e]+" / "+a[e]})`}function ht(e){return Object(h.uniq)(e).map((e=>({value:e,name:e})))}const Ot=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.searchAria",{defaultMessage:"Search fields"}),yt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.filter",{defaultMessage:"Field type"}),Mt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.filterAria",{defaultMessage:"Filter field types"}),Ft=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.schema",{defaultMessage:"Schema type"}),vt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.schemaAria",{defaultMessage:"Filter schema types"}),Pt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.scriptedFieldFilter",{defaultMessage:"All languages"}),Et=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.scriptedFieldFilterAria",{defaultMessage:"Filter scripted field languages"}),wt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.runtime",{defaultMessage:"Runtime"}),Tt=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.indexed",{defaultMessage:"Indexed"}),St=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.filterPlaceholder",{defaultMessage:"Search"}),Ct=y.i18n.translate("indexPatternManagement.editIndexPattern.fields.addFieldButtonLabel",{defaultMessage:"Add field"}),It=[{value:"runtime",name:wt},{value:"indexed",name:Tt}],Dt=({indexPattern:e,saveIndexPattern:t,fields:a,history:s,refreshFields:l,relationships:r,allowedTypes:d,compositeRuntimeFields:o})=>{const{uiSettings:c,docLinks:u,dataViewFieldEditor:p,overlays:m,theme:g,dataViews:j,http:x,application:f,savedObjectsManagement:O}=Object(B.useKibana)().services,[M,F]=Object(n.useState)(""),[v,P]=Object(n.useState)({}),[w,T]=Object(n.useState)([]),[S,C]=Object(n.useState)(!1),[I,D]=Object(n.useState)([]),[_,L]=Object(n.useState)([]),[k,N]=Object(n.useState)(!1),[A,V]=Object(n.useState)([]),[R,U]=Object(n.useState)([]),[H,z]=Object(n.useState)(!1),G=Object(n.useRef)(),{DeleteRuntimeFieldProvider:K}=p,$=Object(n.useMemo)((()=>Object(h.uniq)(_.filter((e=>A.some((t=>t.value===e)))))),[_,A]),W=Object(n.useMemo)((()=>Object(h.uniq)(R.filter((e=>It.some((t=>t.value===e)))))),[R]),q=Object(n.useCallback)((e=>{var t;null===(t=v.setCurrentTab)||void 0===t||t.call(v,e.id)}),[v]),Y=Object(n.useCallback)((e=>{var t;null==v||null===(t=v.setCurrentFieldTypes)||void 0===t||t.call(v,e)}),[v]),J=Object(n.useCallback)((e=>{var t;null==v||null===(t=v.setCurrentSchemaFieldTypes)||void 0===t||t.call(v,e)}),[v]),Q=Object(n.useCallback)((e=>{var t;null==v||null===(t=v.setCurrentFieldFilter)||void 0===t||t.call(v,e||void 0)}),[v]),Z=Object(n.useCallback)((()=>{const t=[],a=[];e.fields.getAll().forEach((e=>{e.scripted?e.lang&&a.push(e.lang):("conflict"===e.type&&t.push("conflict"),e.esTypes&&e.esTypes.forEach((e=>t.push(e))))})),V(ht(t)),D(ht(a))}),[e]),re=Object(n.useCallback)((()=>{G.current&&G.current()}),[]),de=Object(n.useCallback)((t=>{G.current=p.openEditor({ctx:{dataView:e},onSave:l,fieldName:t})}),[p,e,l]);Object(n.useEffect)((()=>{Z()}),[e,e.fields,Z]),Object(n.useEffect)((()=>()=>{re()}),[re]);const oe=Object(n.useCallback)((e=>Object(ee.fieldWildcardMatcher)(e,c.get(X.META_FIELDS))),[c]),ce=j.getCanSaveSync(),ue=Object(n.useCallback)((e=>Object(b.jsx)(E.EuiFlexGroup,null,Object(b.jsx)(E.EuiFlexItem,{grow:!0},Object(b.jsx)(E.EuiFieldSearch,{fullWidth:!0,placeholder:St,value:M,onChange:e=>Q(e.target.value),"data-test-subj":"indexPatternFieldFilter","aria-label":Ot})),e===ne&&A.length>0&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiFilterGroup,null,Object(b.jsx)(E.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"indexedFieldTypeFilterDropdown-popover",button:Object(b.jsx)(E.EuiFilterButton,{"aria-label":Mt,"data-test-subj":"indexedFieldTypeFilterDropdown",iconType:"arrowDown",onClick:()=>N(!k),isSelected:k,numFilters:A.length,hasActiveFilters:$.length>0,numActiveFilters:$.length},yt),isOpen:k,closePopover:()=>N(!1)},A.map(((e,t)=>{const a=$.includes(e.value);return Object(b.jsx)(E.EuiFilterSelectItem,{checked:a?"on":void 0,key:e.value,onClick:()=>{Y(a?$.filter((t=>t!==e.value)):[...$,e.value])},"data-test-subj":`indexedFieldTypeFilterDropdown-option-${e.value}${a?"-checked":""}`},e.name)}))),Object(b.jsx)(E.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"schemaFieldTypeFilterDropdown-popover",button:Object(b.jsx)(E.EuiFilterButton,{"aria-label":vt,"data-test-subj":"schemaFieldTypeFilterDropdown",iconType:"arrowDown",onClick:()=>z(!H),isSelected:H,numFilters:It.length,hasActiveFilters:W.length>0,numActiveFilters:W.length},Ft),isOpen:H,closePopover:()=>z(!1)},It.map((e=>{const t=W.includes(e.value);return Object(b.jsx)(E.EuiFilterSelectItem,{checked:t?"on":void 0,key:e.value,onClick:()=>{J(t?W.filter((t=>t!==e.value)):[...W,e.value])},"data-test-subj":`schemaFieldTypeFilterDropdown-option-${e.value}${t?"-checked":""}`},e.name)}))))),ce&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiButton,{fill:!0,onClick:()=>de(),"data-test-subj":"addField"},Ct))),e===ie&&I.length>0&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiFilterGroup,null,Object(b.jsx)(E.EuiPopover,{anchorPosition:"downCenter","data-test-subj":"scriptedFieldLanguageFilterDropdown-popover",button:Object(b.jsx)(E.EuiFilterButton,{"aria-label":Et,"data-test-subj":"scriptedFieldLanguageFilterDropdown",iconType:"arrowDown",onClick:()=>C(!S),isSelected:S,numFilters:I.length,hasActiveFilters:!!I.find((e=>"on"===e.checked)),numActiveFilters:I.filter((e=>"on"===e.checked)).length},Pt),isOpen:S,closePopover:()=>C(!1)},I.map(((e,t)=>Object(b.jsx)(E.EuiFilterSelectItem,{checked:e.checked,key:e.value,onClick:()=>{T(e.checked?w.filter((t=>t!==e.value)):[...w,e.value]),((e,t,a)=>{if(!e[t])return;const n=[...e];"on"===n[t].checked?n[t].checked=void 0:n[t].checked="on",a(n)})(I,t,D)},"data-test-subj":`scriptedFieldLanguageFilterDropdown-option-${e.value}${e.checked?"-checked":""}`},e.name)))))))),[M,W,$,A,k,w,I,S,H,de,ce,Q,Y,J]),pe=Object(n.useCallback)((i=>{switch(i){case ne:return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"m"}),ue(i),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(K,{dataView:e,onDelete:l},(t=>Object(b.jsx)(indexed_fields_table_IndexedFieldsTable,{fields:a,compositeRuntimeFields:o,indexPattern:e,fieldFilter:M,fieldWildcardMatcher:oe,indexedFieldTypeFilter:$,schemaFieldTypeFilter:W,helpers:{editField:de,deleteField:t,getFieldInfo:jt},openModal:m.openModal,theme:g,userEditPermission:j.getCanSaveSync()}))));case ie:return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"m"}),ue(i),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(scripted_fields_table_ScriptedFieldsTable,{indexPattern:e,saveIndexPattern:t,fieldFilter:M,scriptedFieldLanguageFilter:w,helpers:{redirectToRoute:t=>{s.push(function(e,t){return`/dataView/${null==t?void 0:t.id}/field/${encodeURIComponent(e.name)}`}(t,e))}},onRemoveField:Z,painlessDocLink:u.links.scriptedFields.painless,userEditPermission:j.getCanSaveSync()}));case se:return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"m"}),ue(i),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(source_filters_table_SourceFiltersTable,{saveIndexPattern:t,indexPattern:e,filterFilter:M,fieldWildcardMatcher:oe,onAddOrRemoveFilter:Z}));case le:return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(ut,{basePath:x.basePath,id:e.id,capabilities:f.capabilities,relationships:r,allowedTypes:d,navigateToUrl:f.navigateToUrl,getDefaultTitle:O.getDefaultTitle,getSavedObjectLabel:O.getSavedObjectLabel}))}}),[u.links.scriptedFields.painless,M,oe,a,ue,s,e,$,W,Z,w,t,de,K,l,m,g,j,o,x,f,O,d,r]),me=Object(n.useMemo)((()=>function(e,t,a=0,n){const i=xt(e.fields.getAll(),e.getSourceFiltering()),s=xt(e.fields.getAll(),e.getSourceFiltering(),t),l=[];return l.push({name:ft("indexed",s,i),id:ne,"data-test-subj":"tab-indexedFields"}),!bt(e.type)&&n&&l.push({name:ft("scripted",s,i),id:ie,"data-test-subj":"tab-scriptedFields"}),l.push({name:ft("sourceFilters",s,i),id:se,"data-test-subj":"tab-sourceFilters"}),l.push({name:y.i18n.translate("indexPatternManagement.editIndexPattern.tabs.relationshipsHeader",{defaultMessage:"Relationships ({count})",values:{count:a}}),id:le,"data-test-subj":"tab-relationships"}),l}(e,M,r.length,j.scriptedFieldsEnabled).map((e=>({...e,content:pe(e.id)})))),[M,pe,e,r,j.scriptedFieldsEnabled]),[be,ge]=Object(n.useState)(me[0].id);return Object(n.useEffect)((()=>{const{startSyncingState:e,stopSyncingState:t,setCurrentTab:a,setCurrentFieldTypes:n,setCurrentFieldFilter:i,setCurrentSchemaFieldTypes:s,stateContainer:l}=function({defaultTab:e,useHashedUrl:t}){const a=Object(te.createHashHistory)(),n={tab:e},i=Object(ee.createKbnUrlStateStorage)({useHash:t,history:a}),s=i.get(ae),l=Object(ee.createStateContainer)({...n,...s},{setTab:e=>t=>({...e,tab:t}),setFieldFilter:e=>t=>({...e,fieldFilter:t}),setFieldTypes:e=>t=>({...e,fieldTypes:null!=t&&t.length?t:void 0}),setSchemaFieldTypes:e=>t=>({...e,schemaFieldTypes:null!=t&&t.length?t:void 0})},{tab:e=>()=>e.tab,fieldFilter:e=>()=>e.fieldFilter,fieldTypes:e=>()=>e.fieldTypes,schemaFieldTypes:e=>()=>e.schemaFieldTypes}),{start:r,stop:d}=Object(ee.syncState)({storageKey:ae,stateContainer:{...l,set:e=>e&&l.set(e)},stateStorage:i});return i.set(ae,l.getState(),{replace:!0}),{stateContainer:l,startSyncingState:r,stopSyncingState:d,setCurrentTab:e=>l.transitions.setTab(e),setCurrentFieldFilter:e=>l.transitions.setFieldFilter(e),setCurrentFieldTypes:e=>l.transitions.setFieldTypes(e),setCurrentSchemaFieldTypes:e=>l.transitions.setSchemaFieldTypes(e)}}({useHashedUrl:c.get("state:storeInSessionStorage"),defaultTab:ne});e(),P({setCurrentTab:a,setCurrentFieldTypes:n,setCurrentFieldFilter:i,setCurrentSchemaFieldTypes:s}),ge(l.selectors.tab()),L((e=>{var t;return null!==(t=l.selectors.fieldTypes())&&void 0!==t?t:[]})),U((e=>{var t;return null!==(t=l.selectors.schemaFieldTypes())&&void 0!==t?t:[]})),F((e=>{var t;return null!==(t=l.selectors.fieldFilter())&&void 0!==t?t:""}));const r=l.state$.subscribe((()=>{ge(l.selectors.tab()),L((e=>{var t;return null!==(t=l.selectors.fieldTypes())&&void 0!==t?t:[]})),U((e=>{var t;return null!==(t=l.selectors.schemaFieldTypes())&&void 0!==t?t:[]})),F((e=>{var t;return null!==(t=l.selectors.fieldFilter())&&void 0!==t?t:""}))}));return()=>{r.unsubscribe(),t()}}),[c]),Object(b.jsx)(E.EuiTabbedContent,{tabs:me,selectedTab:me.find((e=>e.id===be)),onTabClick:q})},_t=y.i18n.translate("indexPatternManagement.editDataView.setDefaultAria",{defaultMessage:"Set as default data view."}),Lt=y.i18n.translate("indexPatternManagement.editDataView.setDefaultTooltip",{defaultMessage:"Set as default"}),kt=y.i18n.translate("indexPatternManagement.editDataView.editAria",{defaultMessage:"Edit data view."}),Nt=y.i18n.translate("indexPatternManagement.editDataView.editTooltip",{defaultMessage:"Edit"}),At=y.i18n.translate("indexPatternManagement.editDataView.removeAria",{defaultMessage:"Delete data view."}),Vt=y.i18n.translate("indexPatternManagement.editDataView.removeTooltip",{defaultMessage:"Delete"}),Rt=({defaultIndex:e,indexPattern:t,setDefault:a,editIndexPatternClick:n,deleteIndexPatternClick:i,children:s,canSave:l})=>Object(b.jsx)(E.EuiPageHeader,{pageTitle:Object(b.jsx)("span",{"data-test-subj":"indexPatternTitle"},t.getName()),rightSideItems:[l&&Object(b.jsx)(E.EuiButton,{onClick:n,iconType:"pencil","aria-label":kt,"data-test-subj":"editIndexPatternButton"},Nt),e!==t.id&&a&&l&&t.isPersisted()&&Object(b.jsx)(E.EuiButton,{onClick:a,iconType:"starFilled","aria-label":_t,"data-test-subj":"setDefaultIndexPatternButton"},Lt),l&&t.isPersisted()&&Object(b.jsx)(E.EuiButtonEmpty,{color:"danger",onClick:i,iconType:"trash","aria-label":At,"data-test-subj":"deleteIndexPatternButton"},Vt)].filter(Boolean)},s);var Bt=a(24);const Ut={confirmButtonText:y.i18n.translate("indexPatternManagement.editIndexPattern.deleteButton",{defaultMessage:"Delete"}),title:y.i18n.translate("indexPatternManagement.editDataView.deleteHeader",{defaultMessage:"Delete data view"}),buttonColor:"danger"},Ht=({dataViews:e,overlays:t,onDelete:a})=>(n,i)=>{t.openConfirm(Object(B.toMountPoint)(i),Ut).then((async t=>{t&&(await Object(Bt.asyncForEach)(n,(async({id:t})=>e.delete(t))),a())}))},zt={marginLeft:"8px",overflowWrap:"anywhere"},Gt=y.i18n.translate("indexPatternManagement.editIndexPattern.mappingConflictHeader",{defaultMessage:"Mapping conflict"}),Kt=y.i18n.translate("indexPatternManagement.editIndexPattern.badge.securityDataViewTitle",{defaultMessage:"Security Data View"}),$t=e=>Object(h.pickBy)(e.getAllRuntimeFields(),(e=>"composite"===e.type)),Wt=Object(r.withRouter)((({indexPattern:e,history:t,location:a})=>{const{uiSettings:s,overlays:l,chrome:d,dataViews:o,IndexPatternEditor:c,savedObjectsManagement:u,application:p}=Object(B.useKibana)().services,[m,g]=Object(n.useState)(e.getNonScriptedFields()),[j,x]=Object(n.useState)((()=>$t(e))),[f,h]=Object(n.useState)(e.fields.getAll().filter((e=>"conflict"===e.type))),[O,M]=Object(n.useState)(s.get("defaultIndex")),[F,v]=Object(n.useState)([]),[P,w]=Object(n.useState)(!1),[T,S]=Object(n.useState)([]),[C,I]=Object(n.useState)([]),D=Object(n.useMemo)((()=>Object(ee.setStateToKbnUrl)(ae,{fieldTypes:["conflict"],tab:"indexedFields"},{useHash:s.get("state:storeInSessionStorage")},p.getUrlForApp("management",{path:`/kibana/dataViews/dataView/${encodeURIComponent(e.id)}`}))),[p,e.id,s]);Object(n.useEffect)((()=>{const e=t.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return()=>{e()}}),[t]),Object(n.useEffect)((()=>{u.getAllowedTypes().then((e=>{I(e)}))}),[u]),Object(n.useEffect)((()=>{if(0===C.length||!e.isPersisted())return;const t=C.map((e=>e.name));u.getRelationships(X.DATA_VIEW_SAVED_OBJECT_TYPE,e.id,t).then((e=>{S(e.relations.map((e=>({...e,title:e.meta.title}))))}))}),[u,e,C]),Object(n.useEffect)((()=>{g(e.getNonScriptedFields()),h(e.fields.getAll().filter((e=>"conflict"===e.type)))}),[e]),Object(n.useEffect)((()=>{v(gt(e,e.id===O,o.getRollupsEnabled()))}),[O,e,o]);const _=Object(n.useCallback)((()=>{s.set("defaultIndex",e.id),M(e.id||"")}),[s,e.id]),L=Ht({dataViews:o,uiSettings:s,overlays:l,onDelete:()=>{t.push("")}}),k="rollup"===new URLSearchParams(Object(r.useLocation)().search).get("type")&&o.getRollupsEnabled(),N=P?Object(b.jsx)(c,{onSave:()=>{g(e.getNonScriptedFields()),w(!1)},onCancel:()=>w(!1),defaultTypeIsRollup:k,editData:e}):Object(b.jsx)(i.a.Fragment,null),A=y.i18n.translate("indexPatternManagement.editIndexPattern.indexPatternHeading",{defaultMessage:"Index pattern:"}),V=y.i18n.translate("indexPatternManagement.editIndexPattern.timeFilterHeading",{defaultMessage:"Time field:"}),R=y.i18n.translate("indexPatternManagement.editIndexPattern.mappingConflictLabel",{defaultMessage:"{conflictFieldsLength, plural, one {A field is} other {# fields are}} defined as several types (string, integer, etc) across the indices that match this pattern. You may still be able to use these conflict fields in parts of Kibana, but they will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data.",values:{conflictFieldsLength:f.length}}),H=y.i18n.translate("indexPatternManagement.editDataView.detailsAria",{defaultMessage:"Data view details"});d.docTitle.change(e.getName());const z=o.getCanSaveSync(),G=e.namespaces&&e.namespaces.length>1||e.namespaces.includes("*")?Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editDataView.deleteWarningWithNamespaces",defaultMessage:"Delete the data view {dataViewName} from every space it is shared in. You can't undo this action.",values:{dataViewName:Object(b.jsx)(E.EuiCode,null,e.getName())}}):Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editDataView.deleteWarning",defaultMessage:"The data view {dataViewName} will be deleted. You can't undo this action.",values:{dataViewName:Object(b.jsx)(E.EuiCode,null,e.getName())}});return Object(b.jsx)("div",{"data-test-subj":"editIndexPattern",role:"region","aria-label":H},Object(b.jsx)(Rt,{indexPattern:e,setDefault:_,editIndexPatternClick:()=>{w(!0)},deleteIndexPatternClick:()=>L([e],Object(b.jsx)("div",null,G)),defaultIndex:O,canSave:z},Object(b.jsx)(E.EuiHorizontalRule,{margin:"none"}),Object(b.jsx)(E.EuiSpacer,{size:"l"}),Object(b.jsx)(E.EuiFlexGroup,{wrap:!0,gutterSize:"l",alignItems:"center"},Boolean(e.title)&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(b.jsx)(E.EuiText,{size:"s"},A),Object(b.jsx)(E.EuiCode,{"data-test-subj":"currentIndexPatternTitle",style:zt},e.title))),Boolean(e.timeFieldName)&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(b.jsx)(E.EuiText,{size:"s"},V),Object(b.jsx)(E.EuiCode,{"data-test-subj":"currentIndexPatternTimeField",style:zt},e.timeFieldName))),e.id&&0===e.id.indexOf("security-solution")&&Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiBadge,null,Kt)),F.map((e=>Object(b.jsx)(E.EuiFlexItem,{grow:!1,key:e.key},"default"===e.key?Object(b.jsx)(E.EuiBadge,{iconType:"starFilled",color:"default","data-test-subj":e["data-test-subj"]},e.name):Object(b.jsx)(E.EuiBadge,{color:"hollow"},e.name))))),f.length>0&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiSpacer,null),Object(b.jsx)(E.EuiCallOut,{title:Gt,color:"warning",iconType:"warning","data-test-subj":"dataViewMappingConflict"},Object(b.jsx)("p",null,R),Object(b.jsx)(E.EuiLink,{"data-test-subj":"viewDataViewMappingConflictsButton",href:D},y.i18n.translate("indexPatternManagement.editIndexPattern.viewMappingConflictButton",{defaultMessage:"View conflicts"}))))),Object(b.jsx)(E.EuiSpacer,{size:"xl"}),Object(b.jsx)(Dt,{indexPattern:e,saveIndexPattern:o.updateSavedObject.bind(o),fields:m,relationships:T,allowedTypes:C,history:t,location:a,compositeRuntimeFields:j,refreshFields:()=>{g(e.getNonScriptedFields()),x($t(e))}}),N)})),qt=Object(r.withRouter)((({...e})=>{const{dataViews:t,setBreadcrumbs:a,notifications:i}=Object(B.useKibana)().services,[s,l]=Object(n.useState)(),[r,d]=Object(n.useState)();if(Object(n.useEffect)((()=>{t.get(e.match.params.id).then((e=>{d(e),a(J(e))})).catch((e=>{l(e)}))}),[t,e.match.params.id,a,l]),s){const[t,a]=[y.i18n.translate("indexPatternManagement.editIndexPattern.couldNotLoadTitle",{defaultMessage:"Unable to load data view"}),y.i18n.translate("indexPatternManagement.editIndexPattern.couldNotLoadMessage",{defaultMessage:"The data view with id:{objectId} could not be loaded. Try creating a new one.",values:{objectId:e.match.params.id}})];i.toasts.addError(null!=s?s:new Error(t),{title:t,toastMessage:a}),e.history.push("/")}return null!=r?Object(b.jsx)(Wt,{indexPattern:r}):null}));var Yt=a(25);const Jt=({isVisible:e=!1})=>e?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiCallOut,{title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.disabledCallOutHeader",defaultMessage:"Scripting disabled",description:"Showing the status that scripting is disabled in Elasticsearch. Not an update message, that it JUST got disabled."}),color:"danger",iconType:"warning"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.disabledCallOutLabel",defaultMessage:"All inline scripting has been disabled in Elasticsearch. You must enable inline scripting for at least one language in order to use scripted fields in Kibana."}))),Object(b.jsx)(E.EuiSpacer,{size:"m"})):null;Jt.displayName="ScriptingDisabledCallOut";const Xt=({isVisible:e=!1})=>{var t;const a=null===(t=Object(B.useKibana)().services.docLinks)||void 0===t?void 0:t.links;return e?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.callOutDetail",defaultMessage:"Familiarize yourself with {scripFields} and {scriptsInAggregation} before using this feature. Scripted fields can be used to display and aggregate calculated values. As such, they can be very slow and, if done incorrectly, can cause Kibana to become unusable.",values:{scripFields:Object(b.jsx)(E.EuiLink,{target:"_blank",href:a.scriptedFields.scriptFields},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.scripFieldsLink",defaultMessage:"scripted fields"})),scriptsInAggregation:Object(b.jsx)(E.EuiLink,{target:"_blank",href:a.scriptedFields.scriptAggs},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.scriptsInAggregationLink",defaultMessage:"scripts in aggregations"}))}}))),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(E.EuiCallOut,{color:"warning",iconType:"warning",title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.scriptedFieldsDeprecatedTitle",defaultMessage:"Scripted fields are deprecated",description:"Deprecation warning title within scripted field editor"})},Object(b.jsx)(E.EuiText,{size:"s"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.scriptedFieldsDeprecatedBody",defaultMessage:"For greater flexibility and Painless script support, use {runtimeDocs}.",values:{runtimeDocs:Object(b.jsx)(E.EuiLink,{target:"_blank",href:a.runtimeFields.overview},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningCallOutLabel.runtimeLink",defaultMessage:"runtime fields"}))}})))),Object(b.jsx)(E.EuiSpacer,{size:"m"})):null};Xt.displayName="ScriptingWarningCallOut";const Qt=()=>{var e;const t=null===(e=Object(B.useKibana)().services.docLinks)||void 0===e?void 0:e.links.scriptedFields;return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,null),Object(b.jsx)(E.EuiText,null,Object(b.jsx)("h3",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntaxHeader",defaultMessage:"Syntax"})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.defaultLabel.defaultDetail",defaultMessage:"By default, Kibana scripted fields use {painless}, a simple and secure scripting language designed specifically for use with Elasticsearch, to access values in the document use the following format:",values:{painless:Object(b.jsx)(E.EuiLink,{target:"_blank",href:t.painless},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.defaultLabel.painlessLink",defaultMessage:"Painless"})," ",Object(b.jsx)(E.EuiIcon,{type:"link"}))}})),Object(b.jsx)("p",null,Object(b.jsx)(E.EuiCode,null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.default.formatLabel",defaultMessage:"doc['some_field'].value"}))),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.painlessDetail",defaultMessage:"Painless is powerful but easy to use. It provides access to many {javaAPIs}. Read up on its {syntax} and you'll be up to speed in no time!",values:{javaAPIs:Object(b.jsx)(E.EuiLink,{target:"_blank",href:t.painlessApi},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.javaAPIsLink",defaultMessage:"native Java APIs"}),"Â ",Object(b.jsx)(E.EuiIcon,{type:"link"})),syntax:Object(b.jsx)(E.EuiLink,{target:"_blank",href:t.painlessSyntax},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.painlessLabel.syntaxLink",defaultMessage:"syntax"}),"Â ",Object(b.jsx)(E.EuiIcon,{type:"link"}))}})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.kibanaLabel",defaultMessage:"Kibana currently imposes one special limitation on the painless scripts you write. They cannot contain named functions."})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.commonLabel.commonDetail",defaultMessage:"Coming from an older version of Kibana? The {lucene} you know and love are still available. Lucene expressions are a lot like JavaScript, but limited to basic arithmetic, bitwise and comparison operations.",values:{lucene:Object(b.jsx)(E.EuiLink,{target:"_blank",href:t.luceneExpressions},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.commonLabel.luceneLink",defaultMessage:"Lucene Expressions"}),"Â ",Object(b.jsx)(E.EuiIcon,{type:"link"}))}})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limitsLabel",defaultMessage:"There are a few limitations when using Lucene Expressions:"})),Object(b.jsx)("ul",null,Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.typesLabel",defaultMessage:"Only numeric, boolean, date, and geo_point fields may be accessed"})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.fieldsLabel",defaultMessage:"Stored fields are not available"})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.limits.sparseLabel",defaultMessage:"If a field is sparse (only some documents contain a value), documents missing the field will have a value of 0"}))),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operationsLabel",defaultMessage:"Here are all the operations available to lucene expressions:"})),Object(b.jsx)("ul",null,Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.arithmeticLabel",defaultMessage:"Arithmetic operators: {operators}",values:{operators:Object(b.jsx)("code",null,"+ - * / %")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.bitwiseLabel",defaultMessage:"Bitwise operators: {operators}",values:{operators:Object(b.jsx)("code",null,"| & ^ ~ << >> >>>")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.booleanLabel",defaultMessage:"Boolean operators (including the ternary operator): {operators}",values:{operators:Object(b.jsx)("code",null,"&& || ! ?:")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.comparisonLabel",defaultMessage:"Comparison operators: {operators}",values:{operators:Object(b.jsx)("code",null,"< <= == >= >")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.mathLabel",defaultMessage:"Common mathematic functions: {operators}",values:{operators:Object(b.jsx)("code",null,"abs ceil exp floor ln log10 logn max min sqrt pow")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.trigLabel",defaultMessage:"Trigonometric library functions: {operators}",values:{operators:Object(b.jsx)("code",null,"acosh acos asinh asin atanh atan atan2 cosh cos sinh sin tanh tan")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.distanceLabel",defaultMessage:"Distance functions: {operators}",values:{operators:Object(b.jsx)("code",null,"haversin")}})),Object(b.jsx)("li",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.syntax.lucene.operations.miscellaneousLabel",defaultMessage:"Miscellaneous functions: {operators}",values:{operators:Object(b.jsx)("code",null,"min, max")}})))))};var Zt=a(26),ea=a(27);class test_script_TestScript extends n.Component{constructor(...e){super(...e),de()(this,"defaultProps",{name:"myScriptedField"}),de()(this,"state",{isLoading:!1,additionalFields:[],previewData:void 0}),de()(this,"previewScript",(async e=>{var t;const{indexPattern:a,name:n,script:i,executeScript:s}=this.props;if(!i||0===i.length)return;let l;if(this.setState({isLoading:!0}),e){const t=Object(ea.getEsQueryConfig)(this.context.services.uiSettings);l=Object(Zt.buildEsQuery)(this.props.indexPattern,e.query||[],[],t)}const r=await s({name:n,script:i,indexPatternTitle:a.title,query:l,additionalFields:this.state.additionalFields.map((e=>e.value)),http:this.context.services.http});200===r.status?this.setState({isLoading:!1,previewData:null===(t=r.hits)||void 0===t?void 0:t.hits.map((e=>({_id:e._id,...e._source,...e.fields})))}):this.setState({isLoading:!1,previewData:r})})),de()(this,"onAdditionalFieldsChange",(e=>{this.setState({additionalFields:e})}))}componentDidMount(){this.props.script&&this.previewScript()}renderPreview(e){return e?e.error?Object(b.jsx)(E.EuiCallOut,{title:y.i18n.translate("indexPatternManagement.testScript.errorMessage",{defaultMessage:"There's an error in your script"}),color:"danger",iconType:"cross"},Object(b.jsx)(E.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(e.error,null," "))):Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiTitle,{size:"xs"},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.testScript.resultsLabel",defaultMessage:"First 10 results"}))),Object(b.jsx)(E.EuiSpacer,{size:"s"}),Object(b.jsx)(E.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(e,null," "))):null}renderToolbar(){const e=new Map,t=[];return this.props.indexPattern.fields.getAll().filter((e=>{const t=e.isSubtypeMulti();return!e.name.startsWith("_")&&!t&&!e.scripted})).forEach((t=>{if(e.has(t.type)){const a=e.get(t.type);a.push(t.name),e.set(t.type,a)}else e.set(t.type,[t.name])})),e.forEach(((e,a)=>{t.push({label:a,options:e.sort().map((e=>({value:e,label:e})))})})),t.sort(((e,t)=>e.label<t.label?-1:e.label>t.label?1:0)),Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.testScript.fieldsLabel",{defaultMessage:"Additional fields"}),fullWidth:!0},Object(b.jsx)(E.EuiComboBox,{placeholder:y.i18n.translate("indexPatternManagement.testScript.fieldsPlaceholder",{defaultMessage:"Select..."}),options:t,selectedOptions:this.state.additionalFields,onChange:e=>this.onAdditionalFieldsChange(e),"data-test-subj":"additionalFieldsSelect",fullWidth:!0})),Object(b.jsx)(E.EuiSpacer,{size:"s"}),Object(b.jsx)("div",{className:"testScript__searchBar"},Object(b.jsx)(this.context.services.unifiedSearch.ui.SearchBar,{displayStyle:"inPage",appName:"indexPatternManagement",showFilterBar:!1,showDatePicker:!1,showQueryInput:!0,query:this.context.services.data.query.queryString.getDefaultQuery(),onQuerySubmit:this.previewScript,indexPatterns:[this.props.indexPattern],customSubmitButton:Object(b.jsx)(E.EuiButton,{disabled:!this.props.script,isLoading:this.state.isLoading,"data-test-subj":"runScriptButton"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.testScript.submitButtonLabel",defaultMessage:"Run script"}))})))}render(){return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiSpacer,null),Object(b.jsx)(E.EuiText,null,Object(b.jsx)("h3",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.testScript.resultsTitle",defaultMessage:"Preview results"})),Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.testScript.instructions",defaultMessage:"Run your script to preview the first 10 results. You can also select some additional fields to include in your results to gain more context or add a query to filter on specific documents."}))),Object(b.jsx)(E.EuiSpacer,null),this.renderToolbar(),Object(b.jsx)(E.EuiSpacer,null),this.renderPreview(this.state.previewData))}}de()(test_script_TestScript,"contextType",B.context);const ta=({isVisible:e=!1,onClose:t=(()=>{}),indexPattern:a,lang:n,name:i,script:s,executeScript:l})=>{const r=[{id:"syntax",name:"Syntax","data-test-subj":"syntaxTab",content:Object(b.jsx)(Qt,null)},{id:"test",name:"Preview results","data-test-subj":"testTab",content:Object(b.jsx)(test_script_TestScript,{indexPattern:a,lang:n,name:i,script:s,executeScript:l})}];return e?Object(b.jsx)(E.EuiFlyout,{onClose:t,"data-test-subj":"scriptedFieldsHelpFlyout"},Object(b.jsx)(E.EuiFlyoutBody,null,Object(b.jsx)(E.EuiTabbedContent,{tabs:r,initialSelectedTab:r[0]}))):null};ta.displayName="ScriptingHelpFlyout";const aa=Object(h.memoize)((e=>e?i.a.lazy((()=>e().then((e=>({default:e}))))):null));class field_format_editor_FieldFormatEditor extends n.PureComponent{constructor(e){super(e),this.state={EditorComponent:aa(e.fieldFormatEditors.getById(e.fieldFormatId))}}static getDerivedStateFromProps(e){return{EditorComponent:aa(e.fieldFormatEditors.getById(e.fieldFormatId))}}render(){const{EditorComponent:e}=this.state,{fieldType:t,fieldFormat:a,fieldFormatParams:n,onChange:s,onError:l}=this.props;return Object(b.jsx)(i.a.Fragment,null,e?Object(b.jsx)(i.a.Suspense,{fallback:Object(b.jsx)("div",{style:{minHeight:430,marginTop:8}},Object(b.jsx)(E.EuiDelayRender,null,Object(b.jsx)(E.EuiSkeletonText,{lines:4})))},Object(b.jsx)(e,{fieldType:t,format:a,formatParams:n,onChange:s,onError:l})):null)}}let na,ia;!function(e){e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram"}(na||(na={})),function(e){e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing"}(ia||(ia={}));class kbn_field_type_KbnFieldType{constructor(e={}){de()(this,"name",void 0),de()(this,"sortable",void 0),de()(this,"filterable",void 0),de()(this,"esTypes",void 0),this.name=e.name||ia.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}const sa=new kbn_field_type_KbnFieldType({name:ia.UNKNOWN}),la=[new kbn_field_type_KbnFieldType({name:ia.STRING,sortable:!0,filterable:!0,esTypes:[na.STRING,na.TEXT,na.MATCH_ONLY_TEXT,na.KEYWORD,na.VERSION,na._TYPE,na._ID]}),new kbn_field_type_KbnFieldType({name:ia.NUMBER,sortable:!0,filterable:!0,esTypes:[na.FLOAT,na.HALF_FLOAT,na.SCALED_FLOAT,na.DOUBLE,na.INTEGER,na.LONG,na.UNSIGNED_LONG,na.SHORT,na.BYTE,na.TOKEN_COUNT,na.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:ia.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[na.FLOAT_RANGE,na.DOUBLE_RANGE,na.INTEGER_RANGE,na.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:ia.DATE,sortable:!0,filterable:!0,esTypes:[na.DATE,na.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:ia.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[na.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:ia.IP,sortable:!0,filterable:!0,esTypes:[na.IP]}),new kbn_field_type_KbnFieldType({name:ia.IP_RANGE,sortable:!0,filterable:!0,esTypes:[na.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:ia.BOOLEAN,sortable:!0,filterable:!0,esTypes:[na.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:ia.OBJECT,esTypes:[na.OBJECT]}),new kbn_field_type_KbnFieldType({name:ia.NESTED,esTypes:[na.NESTED]}),new kbn_field_type_KbnFieldType({name:ia.GEO_POINT,esTypes:[na.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:ia.GEO_SHAPE,esTypes:[na.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:ia.ATTACHMENT,esTypes:[na.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:ia.MURMUR3,esTypes:[na.MURMUR3]}),new kbn_field_type_KbnFieldType({name:ia._SOURCE,esTypes:[na._SOURCE]}),new kbn_field_type_KbnFieldType({name:ia.HISTOGRAM,filterable:!0,esTypes:[na.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:ia.CONFLICT}),sa],ra={painless:["number","string","date","boolean"],expression:["number"]},da=la.filter((e=>e.name)).map((e=>e.name)),oa=async({name:e,script:t,indexPatternTitle:a,query:n,additionalFields:i=[],http:s})=>s.post("/internal/index-pattern-management/preview_scripted_field",{body:JSON.stringify({index:a,name:e,script:t,query:n,additionalFields:i})}).then((e=>({status:e.statusCode,hits:e.body.hits}))).catch((e=>({status:e.statusCode,error:e.body.attributes.error}))),ca=(e,t,a)=>{const n=a.getByFieldType(e.type).map((({id:e,title:t})=>({id:e,title:t})));return[{id:"",defaultFieldFormat:t,title:y.i18n.translate("indexPatternManagement.defaultFormatDropDown",{defaultMessage:"- Default -"})},...n]};class field_editor_FieldEditor extends n.PureComponent{constructor(e,t){super(e,t),de()(this,"supportedLangs",[]),de()(this,"deprecatedLangs",[]),de()(this,"onFieldChange",((e,t)=>{const{spec:a}=this.state;a[e]=t,this.forceUpdate()})),de()(this,"onTypeChange",(e=>{const{fieldFormats:t}=this.context.services,{spec:a,format:n}=this.state,i=t.getDefaultType(e);a.type=e,this.setState({fieldTypeFormats:ca(a,i,t),fieldFormatId:i.id,fieldFormatParams:n.params()})})),de()(this,"onLangChange",(e=>{const{spec:t}=this.state,a=Object(h.get)(ra,e,da);t.lang=e,t.type=a.includes(t.type)?t.type:a[0],this.setState({fieldTypes:a})})),de()(this,"onFormatChange",((e,t)=>{const{fieldTypeFormats:a}=this.state,{uiSettings:n,fieldFormats:i}=this.context.services,s=new(i.getType(e||a[0].defaultFieldFormat.id))(t,(e=>n.get(e)));this.setState({fieldFormatId:e,fieldFormatParams:t,format:s})})),de()(this,"onFormatParamsChange",(e=>{const{fieldFormatId:t}=this.state;this.onFormatChange(t,e)})),de()(this,"onFormatParamsError",(e=>{this.setState({hasFormatError:!!e})})),de()(this,"onScriptChange",(e=>{this.setState({hasScriptError:!1}),this.onFieldChange("script",e)})),de()(this,"showScriptingHelp",(()=>{this.setState({showScriptingHelp:!0})})),de()(this,"hideScriptingHelp",(()=>{this.setState({showScriptingHelp:!1})})),de()(this,"renderDeleteModal",(()=>{const{spec:e}=this.state;return this.state.showDeleteModal?Object(b.jsx)(E.EuiConfirmModal,{title:y.i18n.translate("indexPatternManagement.deleteFieldHeader",{defaultMessage:"Delete field '{fieldName}'",values:{fieldName:e.name}}),onCancel:this.hideDeleteModal,onConfirm:()=>{this.hideDeleteModal(),this.deleteField()},cancelButtonText:y.i18n.translate("indexPatternManagement.deleteField.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:y.i18n.translate("indexPatternManagement.deleteField.deleteButton",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:E.EUI_MODAL_CONFIRM_BUTTON},Object(b.jsx)("p",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.deleteFieldLabel",defaultMessage:"You can't recover a deleted field.{separator}Are you sure you want to do this?",values:{separator:Object(b.jsx)("span",null,Object(b.jsx)("br",null),Object(b.jsx)("br",null))}}))):null})),de()(this,"showDeleteModal",(()=>{this.setState({showDeleteModal:!0})})),de()(this,"hideDeleteModal",(()=>{this.setState({showDeleteModal:!1})})),de()(this,"renderScriptingPanels",(()=>{const{scriptingLangs:e,spec:t,showScriptingHelp:a}=this.state;if(t.scripted)return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(Jt,{isVisible:!e.length}),Object(b.jsx)(Xt,{isVisible:!0}),Object(b.jsx)(ta,{isVisible:a,onClose:this.hideScriptingHelp,indexPattern:this.props.indexPattern,lang:t.lang,name:t.name,script:t.script,executeScript:oa}))})),de()(this,"deleteField",(()=>{const{redirectAway:e,indexPatternService:t}=this.props.services,{indexPattern:a}=this.props,{spec:n}=this.state;a.removeScriptedField(n.name),t.updateSavedObject(a).then((()=>{const t=y.i18n.translate("indexPatternManagement.deleteField.deletedHeader",{defaultMessage:"Deleted '{fieldName}'",values:{fieldName:n.name}});this.context.services.notifications.toasts.addSuccess(t),e()}))})),de()(this,"saveField",(async()=>{const e=this.state.spec,{indexPattern:t}=this.props,{fieldFormatId:a,fieldFormatParams:n,customLabel:i}=this.state;if(e.scripted&&(this.setState({isSaving:!0}),!await(async({name:e,script:t,indexPatternTitle:a,http:n})=>200===(await oa({name:e,script:t,indexPatternTitle:a,http:n})).status)({name:e.name,script:e.script,indexPatternTitle:t.title,http:this.context.services.http})))return void this.setState({hasScriptError:!0,isSaving:!1});const{redirectAway:s,indexPatternService:l}=this.props.services;return t.upsertScriptedField(e),a?t.setFieldFormat(e.name,{id:a,params:n}):t.deleteFieldFormat(e.name),e.customLabel!==i&&(e.customLabel=i,t.setFieldCustomLabel(e.name,i)),l.updateSavedObject(t).then((()=>{const t=y.i18n.translate("indexPatternManagement.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:e.name}});this.context.services.notifications.toasts.addSuccess(t),s()})).catch((()=>{t.fields.remove(e)}))}));const{spec:a,indexPattern:i}=e;this.state={isReady:!1,isCreating:!1,isDeprecatedLang:!1,scriptingLangs:[],fieldTypes:[],fieldTypeFormats:[],existingFieldNames:i.fields.getAll().map((e=>e.name)),fieldFormatId:void 0,fieldFormatParams:{},showScriptingHelp:!1,showDeleteModal:!1,hasFormatError:!1,hasScriptError:!1,isSaving:!1,format:e.indexPattern.getFormatterForField(a),spec:{...a},customLabel:""},this.supportedLangs=["painless"],this.deprecatedLangs=[],this.init(t)}async init(e){var t,a;const{http:n,notifications:i,fieldFormats:s}=e.services,{format:l,spec:r}=this.state,{indexPattern:d}=this.props,o=await((e,t)=>e.get("/internal/scripts/languages",{version:qe.SCRIPT_LANGUAGES_ROUTE_LATEST_VERSION}).catch((()=>(t.addDanger(y.i18n.translate("indexPatternManagement.scriptingLanguages.errorFetchingToastDescription",{defaultMessage:"Error getting available scripting languages from Elasticsearch"})),[]))))(n,i.toasts),c=Object(h.intersection)(o,Object(h.union)(this.supportedLangs,this.deprecatedLangs));r.lang=r.lang&&c.includes(r.lang)?r.lang:void 0,r.scripted&&!r.lang&&(r.lang=c[0]);const u=Object(h.get)(ra,r.lang||"",da);r.type=u.includes(r.type)?r.type:u[0];const p=s.getDefaultType(r.type,r.esTypes);this.setState({isReady:!0,isCreating:!d.fields.getByName(r.name),isDeprecatedLang:this.deprecatedLangs.includes(r.lang||""),errors:[],scriptingLangs:c,fieldTypes:u,fieldTypeFormats:ca(r,p,s),fieldFormatId:null===(t=d.getFormatterForFieldNoDefault(r.name))||void 0===t||null===(a=t.type)||void 0===a?void 0:a.id,customLabel:r.customLabel||"",fieldFormatParams:l.params()})}isDuplicateName(){const{isCreating:e,spec:t,existingFieldNames:a}=this.state;return e&&a.includes(t.name)}renderName(){var e;const{isCreating:t,spec:a}=this.state,n=null==a||null===(e=a.name)||void 0===e?void 0:e.includes("*"),i=!a.name||!a.name.trim()||n;return t?Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.nameLabel",{defaultMessage:"Name"}),helpText:this.isDuplicateName()?Object(b.jsx)("span",null,Object(b.jsx)(E.EuiIcon,{type:"warning",color:"warning",size:"s"}),"Â ",Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.mappingConflictLabel.mappingConflictDetail",defaultMessage:"{mappingConflict} You already have a field with the name {fieldName}. Naming your scripted field with the same name means you won't be able to query both fields at the same time.",values:{mappingConflict:Object(b.jsx)("strong",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.mappingConflictLabel.mappingConflictLabel",defaultMessage:"Mapping Conflict:"})),fieldName:Object(b.jsx)(E.EuiCode,null,a.name)}})):null,isInvalid:i,error:i&&(n?y.i18n.translate("indexPatternManagement.starCharacterNotAllowedValidationErrorMessage",{defaultMessage:"The field cannot have * in the name."}):y.i18n.translate("indexPatternManagement.nameErrorMessage",{defaultMessage:"Name is required"}))},Object(b.jsx)(E.EuiFieldText,{value:a.name||"",placeholder:y.i18n.translate("indexPatternManagement.namePlaceholder",{defaultMessage:"New scripted field"}),"data-test-subj":"editorFieldName",onChange:e=>{this.onFieldChange("name",e.target.value)},isInvalid:i})):null}renderLanguage(){const{spec:e,scriptingLangs:t,isDeprecatedLang:a}=this.state;return e.scripted?Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.languageLabel",{defaultMessage:"Language"}),helpText:a?Object(b.jsx)("span",null,Object(b.jsx)(E.EuiIcon,{type:"warning",color:"warning",size:"s"}),"Â ",Object(b.jsx)("strong",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningHeader",defaultMessage:"Deprecation Warning:"})),"Â ",Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningLabel.warningDetail",defaultMessage:"{language} is deprecated and support will be removed in the next major version of Kibana and Elasticsearch. We recommend using {painlessLink} for new scripted fields.",values:{language:Object(b.jsx)(E.EuiCode,null,e.lang),painlessLink:Object(b.jsx)(E.EuiLink,{target:"_blank",href:this.context.services.docLinks.links.scriptedFields.painless},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.warningLabel.painlessLinkLabel",defaultMessage:"Painless"}))}})):null},Object(b.jsx)(E.EuiSelect,{value:e.lang,options:t.map((e=>({value:e,text:e}))),"data-test-subj":"editorFieldLang",onChange:e=>{this.onLangChange(e.target.value)}})):null}renderType(){const{spec:e,fieldTypes:t}=this.state;return Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.typeLabel",{defaultMessage:"Type"})},Object(b.jsx)(E.EuiSelect,{value:e.type,disabled:!e.scripted,options:t.map((e=>({value:e,text:e}))),"data-test-subj":"editorFieldType",onChange:e=>{this.onTypeChange(e.target.value)}}))}renderCustomLabel(){const{customLabel:e,spec:t}=this.state;return Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.customLabel",{defaultMessage:"Custom label"}),helpText:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.labelHelpText",defaultMessage:"Set a custom label to use when this field is displayed in Discover, Maps, and Visualize. Queries and filters don't currently support a custom label and will use the original field name."})},Object(b.jsx)(E.EuiFieldText,{value:e||"",placeholder:t.name,"data-test-subj":"editorFieldCustomLabel",onChange:e=>{this.setState({customLabel:e.target.value})}}))}renderTypeConflict(){const{spec:e}=this.state;if(!e.conflictDescriptions||"object"!=typeof e.conflictDescriptions)return null;const t=[{field:"type",name:y.i18n.translate("indexPatternManagement.typeLabel",{defaultMessage:"Type"}),width:"100px"},{field:"indices",name:y.i18n.translate("indexPatternManagement.indexNameLabel",{defaultMessage:"Index names"})}],a=Object.entries(e.conflictDescriptions).map((([e,t])=>({type:e,indices:Array.isArray(t)?t.join(", "):"Index names unavailable"})));return Object(b.jsx)("div",null,Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(E.EuiCallOut,{color:"warning",iconType:"warning",title:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.fieldTypeConflict",defaultMessage:"Field type conflict"}),size:"s"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.multiTypeLabelDesc",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions. The indices per type are as follows:"})),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(E.EuiBasicTable,{items:a,columns:t}),Object(b.jsx)(E.EuiSpacer,{size:"m"}))}renderFormat(){const{spec:e,fieldTypeFormats:t,fieldFormatId:a,fieldFormatParams:i,format:s}=this.state,{fieldFormatEditors:l}=this.context.services,r=t[0].defaultFieldFormat.title,d=r?Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:Object(b.jsx)(E.EuiCode,null,r)}}):Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.formatHeader",defaultMessage:"Format"});return Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiFormRow,{label:d,helpText:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.formatLabel",defaultMessage:"Formatting controls how values are displayed. Changing this setting might also affect the field value and highlighting in Discover."})},Object(b.jsx)(E.EuiSelect,{value:a,options:t.map((e=>({value:e.id||"",text:e.title}))),"data-test-subj":"editorSelectedFormatId",onChange:e=>{this.onFormatChange(e.target.value)}})),a?Object(b.jsx)(field_format_editor_FieldFormatEditor,{fieldType:e.type,fieldFormat:s,fieldFormatId:a,fieldFormatParams:i||{},fieldFormatEditors:l,onChange:this.onFormatParamsChange,onError:this.onFormatParamsError}):null)}renderPopularity(){const{spec:e}=this.state;return Object(b.jsx)(E.EuiFormRow,{label:y.i18n.translate("indexPatternManagement.popularityLabel",{defaultMessage:"Popularity",description:'"Popularity" refers to Kibana\'s measurement how popular a field is (i.e. how commonly it is used).'})},Object(b.jsx)(E.EuiFieldNumber,{value:e.count,"data-test-subj":"editorFieldCount",onChange:e=>{this.onFieldChange("count",e.target.value?Number(e.target.value):"")}}))}renderScript(){var e;const{spec:t,hasScriptError:a}=this.state,i=!t.script||!t.script.trim()||a,s=a?Object(b.jsx)("span",{"data-test-subj":"invalidScriptError"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.scriptInvalidErrorMessage",defaultMessage:"Script is invalid. View script preview for details"})):Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.scriptRequiredErrorMessage",defaultMessage:"Script is required"});return t.scripted?Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiFormRow,{fullWidth:!0,label:y.i18n.translate("indexPatternManagement.scriptLabel",{defaultMessage:"Script"}),isInvalid:i,error:i?s:null},Object(b.jsx)(B.CodeEditor,{languageId:Yt.PainlessLang.ID,width:"100%",height:"300px",value:null!==(e=t.script)&&void 0!==e?e:"",onChange:this.onScriptChange,"data-test-subj":"editorFieldScript","aria-label":y.i18n.translate("indexPatternManagement.scriptLabelAriaLabel",{defaultMessage:"Script editor"})})),Object(b.jsx)(E.EuiFormRow,null,Object(b.jsx)(n.Fragment,null,Object(b.jsx)(E.EuiText,null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.script.accessWithLabel",defaultMessage:"Access fields with {code}.",values:{code:Object(b.jsx)("code",null,"doc['some_field'].value")}})),Object(b.jsx)("br",null),Object(b.jsx)(E.EuiLink,{onClick:this.showScriptingHelp,"data-test-subj":"scriptedFieldsHelpLink"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.script.getHelpLabel",defaultMessage:"Get help with the syntax and preview the results of your script."}))))):null}renderActions(){const{isCreating:e,spec:t,isSaving:a}=this.state,{redirectAway:n}=this.props.services;return Object(b.jsx)(E.EuiFormRow,null,Object(b.jsx)(E.EuiFlexGroup,null,Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiButton,{fill:!0,onClick:this.saveField,isDisabled:this.isSavingDisabled(),isLoading:a,"data-test-subj":"fieldSaveButton"},e?Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.actions.createButton",defaultMessage:"Create field"}):Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.actions.saveButton",defaultMessage:"Save field"}))),Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiButtonEmpty,{onClick:n,"data-test-subj":"fieldCancelButton"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.actions.cancelButton",defaultMessage:"Cancel"}))),!e&&t.scripted?Object(b.jsx)(E.EuiFlexItem,null,Object(b.jsx)(E.EuiFlexGroup,{justifyContent:"flexEnd"},Object(b.jsx)(E.EuiFlexItem,{grow:!1},Object(b.jsx)(E.EuiButtonEmpty,{color:"danger",onClick:this.showDeleteModal},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.actions.deleteButton",defaultMessage:"Delete"}))))):null))}isSavingDisabled(){const{spec:e,hasFormatError:t,hasScriptError:a}=this.state;return!(!t&&!a&&e.name&&e.name.trim()&&(!e.scripted||e.script&&e.script.trim()))}render(){const{isReady:e,isCreating:t,spec:a}=this.state;return e?Object(b.jsx)("div",null,Object(b.jsx)(E.EuiText,null,Object(b.jsx)("h3",null,t?Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.createHeader",defaultMessage:"Create scripted field"}):Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.editHeader",defaultMessage:"Edit {fieldName}",values:{fieldName:a.name}}))),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(E.EuiForm,null,this.renderScriptingPanels(),this.renderName(),this.renderCustomLabel(),this.renderLanguage(),this.renderType(),this.renderTypeConflict(),this.renderFormat(),this.renderPopularity(),this.renderScript(),this.renderActions(),this.renderDeleteModal()),Object(b.jsx)(E.EuiSpacer,{size:"l"})):null}}de()(field_editor_FieldEditor,"contextType",B.context);const ua=y.i18n.translate("indexPatternManagement.editIndexPattern.scripted.newFieldPlaceholder",{defaultMessage:"New Scripted Field"}),pa=Object(r.withRouter)((({indexPattern:e,mode:t,fieldName:a,history:n})=>{var s;const{uiSettings:l,chrome:r,notifications:d,dataViews:o}=Object(B.useKibana)().services,c="edit"===t&&a?null===(s=e.fields.getByName(a))||void 0===s?void 0:s.spec:{scripted:!0,type:"number",name:void 0},u=`/dataView/${e.id}`;if("edit"===t&&!c){const t=y.i18n.translate("indexPatternManagement.editDataView.scripted.noFieldLabel",{defaultMessage:"'{dataViewTitle}' data view doesn't have a scripted field called '{fieldName}'",values:{dataViewTitle:e.title,fieldName:a}});d.toasts.addWarning(t),n.push(u)}const p=(null==c?void 0:c.name)||ua;r.docTitle.change([p,e.getName()]);return c?Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(Rt,{indexPattern:e,defaultIndex:l.get("defaultIndex"),canSave:o.getCanSaveSync()}),Object(b.jsx)(E.EuiSpacer,{size:"l"}),Object(b.jsx)(field_editor_FieldEditor,{indexPattern:e,spec:c,services:{indexPatternService:o,redirectAway:()=>{n.push(`${u}#/?_a=(tab:${null!=c&&c.scripted?ie:ne})`)}}})):Object(b.jsx)(i.a.Fragment,null)})),ma=Object(r.withRouter)((({...e})=>{const{setBreadcrumbs:t,dataViews:a}=Object(B.useKibana)().services,[s,l]=Object(n.useState)(),r=e.match.params.fieldName&&decodeURIComponent(e.match.params.fieldName);return Object(n.useEffect)((()=>{a.get(e.match.params.id).then((e=>{l(e),e&&t(r?function(e,t){return[...J(e,!0),{text:t}]}(e,r):function(e){return[...J(e,!0),{text:y.i18n.translate("indexPatternManagement.indexPatterns.createFieldBreadcrumb",{defaultMessage:"Create field"})}]}(e))}))}),[e.match.params.id,r,t,a]),s?Object(b.jsx)(pa,{indexPattern:s,mode:r?"edit":"create",fieldName:r}):Object(b.jsx)(i.a.Fragment,null)})),ba=y.i18n.translate("indexPatternManagement.dataViewTable.spaceCountAll",{defaultMessage:"all"}),ga=y.i18n.translate("indexPatternManagement.dataViewTable.dataViewColumnName",{defaultMessage:"Data view"}),ja=y.i18n.translate("indexPatternManagement.dataViewTable.spacesColumnName",{defaultMessage:"Spaces"}),xa=y.i18n.translate("indexPatternManagement.dataViewTable.tableTitle",{defaultMessage:"Data views selected for deletion"}),fa=(e,t)=>{const a=[{field:"name",name:ga,sortable:!0}];return t&&a.push({field:"namespaces",name:ja,sortable:!0,width:"100px",align:"right",render:e=>-1!==e.indexOf("*")?ba:e.length}),e.forEach((e=>e.name=e.getName())),Object(b.jsx)("div",null,Object(b.jsx)(E.EuiCallOut,{color:"warning",iconType:"warning",title:"Data views are deleted from every space they are shared in."}),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)("div",null,Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.dataViewTable.deleteConfirmSummary",defaultMessage:"You'll permanently delete {count, number} {count, plural, one {data view} other {data views}\n}.",values:{count:e.length}})),Object(b.jsx)(E.EuiSpacer,{size:"m"}),Object(b.jsx)(E.EuiBasicTable,{tableCaption:xa,items:e,columns:a}))};var ha=a(20);const Oa={isLoadingDataViews:!1,isLoadingHasData:!0,hasDataView:!1,hasEsData:!1,dataViews:[]},ya=e=>e.dataViews,Ma=e=>e.hasDataView,Fa=e=>e.hasEsData,va=e=>e.isLoadingDataViews,Pa=e=>e.isLoadingHasData;class data_view_table_controller_DataViewTableController{constructor({services:{dataViews:e},config:{defaultDataView:t}}){de()(this,"state",{...Oa}),de()(this,"state$",new ha.BehaviorSubject(this.state)),de()(this,"dataViews",void 0),de()(this,"defaultDataView",void 0),de()(this,"isLoadingIndexPatterns$",void 0),de()(this,"indexPatterns$",void 0),de()(this,"isLoadingDataState$",void 0),de()(this,"hasDataView$",void 0),de()(this,"hasESData$",void 0),de()(this,"updateState",(e=>{this.state={...this.state,...e},this.state$.next(this.state)})),de()(this,"loadHasData",(async()=>{const e=this.dataViews.hasData.hasDataView().then((e=>{this.updateState({hasDataView:e})})),t=this.dataViews.hasData.hasESData().then((e=>{this.updateState({hasEsData:e})}));return Promise.all([e,t]).then((()=>{this.updateState({isLoadingHasData:!1})}))})),de()(this,"getDataViews",(async()=>{this.updateState({isLoadingDataViews:!0});const e=await async function(e,t){return(await t.getIdsWithTitle(!0)).map((a=>{const{id:n,title:i,namespaces:s,name:l}=a,r=e===n,d=gt(a,r,t.getRollupsEnabled()),o=l||i;return{id:n,namespaces:s,title:i,name:l,default:r,tags:d,sort:`${r?"0":"1"}${o}`,getName:()=>o}})).sort(((e,t)=>e.sort<t.sort?-1:e.sort>t.sort?1:0))||[]}(this.defaultDataView,this.dataViews);this.updateState({dataViews:e,isLoadingDataViews:!1})})),de()(this,"loadDataViews",(async()=>{const e=this.loadHasData(),t=this.getDataViews();return Promise.all([e,t])})),this.dataViews=e,this.defaultDataView=t;const a=(n=this.state$,(e,t)=>n.pipe(Object(ha.map)(e),Object(ha.distinctUntilChanged)(t)));var n;this.isLoadingIndexPatterns$=a(va),this.indexPatterns$=a(ya,h.isEqual),this.isLoadingDataState$=a(Pa),this.hasDataView$=a(Ma),this.hasESData$=a(Fa),this.loadDataViews()}}const Ea={initialPageSize:10,pageSizeOptions:[5,10,25,50]},wa={sort:{field:"title",direction:"asc"}},Ta=y.i18n.translate("indexPatternManagement.dataViewTable.title",{defaultMessage:"Data Views"}),Sa=y.i18n.translate("indexPatternManagement.indexPatternTable.badge.securityDataViewTitle",{defaultMessage:"Security Data View"}),Ca=({children:e})=>Object(b.jsx)(i.a.Fragment,null,e),Ia=Object(r.withRouter)((({history:e,canSave:t,showCreateDialog:a=!1})=>{const{setBreadcrumbs:s,uiSettings:l,application:d,chrome:c,dataViews:u,IndexPatternEditor:p,spaces:m,overlays:g,docLinks:j}=Object(B.useKibana)().services,[x,f]=Object(n.useState)(""),[h,O]=Object(n.useState)(a),[M,v]=Object(n.useState)([]),[P]=Object(n.useState)((()=>new data_view_table_controller_DataViewTableController({services:{dataViews:u},config:{defaultDataView:l.get("defaultIndex")}}))),w=F()(P.isLoadingIndexPatterns$,Oa.isLoadingDataViews),T=F()(P.indexPatterns$,Oa.dataViews),S=F()(P.isLoadingDataState$,Oa.isLoadingHasData),C=F()(P.hasDataView$,Oa.hasDataView),I=F()(P.hasESData$,Oa.hasEsData),D=(()=>{const e=Ht({dataViews:u,overlays:g,uiSettings:l,onDelete:()=>{v([]),P.loadDataViews()}});if(0!==M.length)return Object(b.jsx)(E.EuiButton,{color:"danger",iconType:"trash","data-test-subj":"delete-data-views-button",onClick:()=>e(M,fa(M,!!m))},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.dataViewTable.deleteButtonLabel",defaultMessage:"Delete {selectedItems, number} {selectedItems, plural, one {Data View} other {Data Views}\n}",values:{selectedItems:M.length}}))})(),_={toolsLeft:D&&[D],query:x,onChange:({queryText:e,error:t})=>{t||f(e)},box:{incremental:!0,schema:{fields:{title:{type:"string"}}}}};s(Y()),c.docTitle.change(Ta);const L="rollup"===new URLSearchParams(Object(r.useLocation)().search).get("type")&&u.getRollupsEnabled(),k=Object(n.useMemo)((()=>m?m.ui.components.getSpacesContextProvider:Ca),[m]),N=Ht({dataViews:u,uiSettings:l,overlays:g,onDelete:()=>P.loadDataViews()}),A={name:"Actions",field:"id",width:"10%",actions:[{name:y.i18n.translate("indexPatternManagement.dataViewTable.columnDelete",{defaultMessage:"Delete"}),description:y.i18n.translate("indexPatternManagement.dataViewTable.columnDeleteDescription",{defaultMessage:"Delete this data view"}),icon:"trash",color:"danger",type:"icon",onClick:e=>N([e],fa([e],!!m)),isPrimary:!0,"data-test-subj":"action-delete"}]},V=[{field:"title",name:y.i18n.translate("indexPatternManagement.dataViewTable.nameColumn",{defaultMessage:"Name"}),width:m?"70%":"90%",render:(t,a)=>{var n,s;return Object(b.jsx)("div",null,Object(b.jsx)(E.EuiLink,o()({},Object(B.reactRouterNavigate)(e,`patterns/${a.id}`),{"data-test-subj":`detail-link-${a.name}`}),a.getName(),a.name?Object(b.jsx)(i.a.Fragment,null,"Â ",Object(b.jsx)(E.EuiIconTip,{type:"iInCircle",color:"text","aria-label":a.title,content:a.title})):null),0===(null==a||null===(n=a.id)||void 0===n?void 0:n.indexOf("security-solution"))&&Object(b.jsx)(i.a.Fragment,null,"â€ƒ",Object(b.jsx)(E.EuiBadge,null,Sa)),null==a||null===(s=a.tags)||void 0===s?void 0:s.map((({key:e,name:t})=>Object(b.jsx)("span",{key:e},"â€ƒ",Object(b.jsx)(E.EuiBadge,null,t)))))},dataType:"string",sortable:({sort:e})=>e}];m&&V.push({field:"namespaces",name:y.i18n.translate("indexPatternManagement.dataViewTable.spacesColumn",{defaultMessage:"Spaces"}),width:"20%",render:(e,t)=>m?Object(b.jsx)(Z,{spacesApi:m,capabilities:null==d?void 0:d.capabilities,spaceIds:t.namespaces||[],id:t.id,title:t.title,refresh:()=>{u.clearInstanceCache(t.id),P.loadDataViews()}}):Object(b.jsx)(i.a.Fragment,null)}),u.getCanSaveSync()&&V.push(A);const R=t?Object(b.jsx)(E.EuiButton,{fill:!0,iconType:"plusInCircle",onClick:()=>O(!0),"data-test-subj":"createIndexPatternButton"},Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.dataViewTable.createBtn",defaultMessage:"Create data view"})):Object(b.jsx)(i.a.Fragment,null);if(w)return Object(b.jsx)(i.a.Fragment,null);const H=h?Object(b.jsx)(p,{onSave:t=>{e.push(`patterns/${t.id}`)},onCancel:()=>O(!1),defaultTypeIsRollup:L}):Object(b.jsx)(i.a.Fragment,null),z={onSelectionChange:v};let G=Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiPageHeader,{pageTitle:Ta,description:Object(b.jsx)(U.FormattedMessage,{id:"indexPatternManagement.dataViewTable.indexPatternExplanation",defaultMessage:"Create and manage the data views that help you retrieve your data from Elasticsearch."}),bottomBorder:!0,rightSideItems:[R]}),Object(b.jsx)(E.EuiSpacer,{size:"l"}),Object(b.jsx)(k,null,Object(b.jsx)(E.EuiInMemoryTable,{allowNeutralSort:!1,itemId:"id",isSelectable:u.getCanSaveSync(),items:T,columns:V,pagination:Ea,sorting:wa,search:_,selection:u.getCanSaveSync()?z:void 0})));return C||(G=Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"xxl"}),Object(b.jsx)($,{onClickCreate:()=>O(!0),canCreateNewDataView:d.capabilities.indexPatterns.save,dataViewsDocLink:j.links.indexPatterns.introduction,emptyPromptColor:"subdued"}))),C||I||(G=Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(E.EuiSpacer,{size:"xxl"}),Object(b.jsx)(q,{onRefresh:P.loadDataViews,createAnyway:()=>O(!0),canSaveIndexPattern:!!d.capabilities.indexPatterns.save,navigateToApp:d.navigateToApp,addDataUrl:j.links.indexPatterns.introduction}))),Object(b.jsx)("div",{"data-test-subj":"indexPatternTable",role:"region","aria-label":Ta},S?Object(b.jsx)("div",{style:{display:"flex",justifyContent:"center"}},Object(b.jsx)(E.EuiLoadingSpinner,{size:"xxl"})):G,H)})),Da={text:y.i18n.translate("indexPatternManagement.indexPatterns.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:y.i18n.translate("indexPatternManagement.dataViews.badge.readOnly.tooltip",{defaultMessage:"Unable to save data views"}),iconType:"glasses"};async function _a(e,t){const[{application:a,chrome:n,uiSettings:i,settings:s,notifications:d,overlays:o,http:c,docLinks:u,theme:p,i18n:m},{data:j,dataViewFieldEditor:x,dataViewEditor:h,dataViews:y,fieldFormats:M,unifiedSearch:F,spaces:v,savedObjectsManagement:P},E]=await e(),w=y.getCanSaveSync();w||n.setBadge(Da);const T={application:a,chrome:n,uiSettings:i,settings:s,notifications:d,overlays:o,unifiedSearch:F,http:c,docLinks:u,data:j,dataViewFieldEditor:x,dataViews:y,indexPatternManagementStart:E,setBreadcrumbs:t.setBreadcrumbs,fieldFormatEditors:x.fieldFormatEditors,IndexPatternEditor:h.IndexPatternEditorComponent,fieldFormats:M,spaces:null!=v&&v.hasOnlyDefaultSpace?void 0:v,theme:p,savedObjectsManagement:P},S="/dataView/:id/field/:fieldName",C=y.scriptedFieldsEnabled?[S,"/dataView/:id/create-field/"]:[S];return l.a.render(Object(b.jsx)(R,{theme:p,i18n:m},Object(b.jsx)(B.KibanaContextProvider,{services:T},Object(b.jsx)(f,{history:t.history},Object(b.jsx)(O,null,Object(b.jsx)(g,{path:["/create"]},Object(b.jsx)(Ia,{canSave:w,showCreateDialog:!0})),Object(b.jsx)(g,{path:C},Object(b.jsx)(ma,null)),Object(b.jsx)(g,{path:["/dataView/:id"]},Object(b.jsx)(qt,null)),Object(b.jsx)(r.Redirect,{path:"/patterns*",to:"dataView*"}),Object(b.jsx)(g,{path:["/"]},Object(b.jsx)(Ia,{canSave:w})))))),t.element),()=>{n.docTitle.reset(),l.a.unmountComponentAtNode(t.element)}}},29:function(e,t,a){e.exports=a(16)(2)},30:function(e,t,a){e.exports=a(16)(3)},31:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(12),i=a(5),s=n.__importDefault(a(40));t.default=function(e,t){var a=i.useState(t),n=a[0],l=a[1];return s.default((function(){var t=e.subscribe(l);return function(){return t.unsubscribe()}}),[e]),n}},32:function(e,t,a){"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function l(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function r(e,t){for(var a={},n=[],i=0;i<e.length;i++){var r=e[i],d=t.base?r[0]+t.base:r[0],o=a[d]||0,c="".concat(d," ").concat(o);a[d]=o+1;var u=l(c),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:c,updater:g(p,t),references:1}),n.push(c)}return n}function d(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=a.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var l=i(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var o,c=(o=[],function(e,t){return o[e]=t,o.filter(Boolean).join("\n")});function u(e,t,a,n){var i=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var s=document.createTextNode(i),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(s,l[t]):e.appendChild(s)}}function p(e,t,a){var n=a.css,i=a.media,s=a.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,b=0;function g(e,t){var a,n,i;if(t.singleton){var s=b++;a=m||(m=d(t)),n=u.bind(null,a,s,!1),i=u.bind(null,a,s,!0)}else a=d(t),n=p.bind(null,a,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var i=l(a[n]);s[i].references--}for(var d=r(e,t),o=0;o<a.length;o++){var c=l(a[o]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}a=d}}}},33:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,i,s=e[1]||"",l=e[3];if(!l)return s;if(t&&"function"==typeof btoa){var r=(a=l,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(i," */")),d=l.sources.map((function(e){return"/*# sourceURL=".concat(l.sourceRoot||"").concat(e," */")}));return[s].concat(d).concat([r]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);n&&i[d[0]]||(a&&(d[2]?d[2]="".concat(a," and ").concat(d[2]):d[2]=a),t.push(d))}},t}},36:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(12),i=a(37),s=n.__importDefault(a(39));t.default=function(e,t){s.default(e,t,i.isDeepEqual)}},37:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(12).__importDefault(a(38));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},38:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(i=n;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,s[i]))return!1;for(i=n;0!=i--;){var l=s[i];if(!("_owner"===l&&t.$$typeof||e(t[l],a[l])))return!1}return!0}return t!=t&&a!=a}},39:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5);t.default=function(e,t,a){var i=n.useRef(void 0);i.current&&a(t,i.current)||(i.current=t),n.useEffect(e,i.current)}},40:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=i},41:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(42);case"v8light":return a(44)}},42:function(e,t,a){var n=a(32),i=a(43);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},43:function(e,t,a){(t=a(33)(!1)).push([e.i,".inpEmptyState__footer{background:#25262e;border-radius:0 0 6px 6px;margin:0 -24px -24px;padding:24px}@media only screen and (max-width:574px){.inpEmptyState__footer{text-align:center}}@media only screen and (min-width:575px) and (max-width:767px){.inpEmptyState__footer{text-align:center}}.inpEmptyState{max-width:760px!important}.inpEmptyState__cardGrid{justify-content:center}.inpEmptyState__card{min-width:192px}.inpEmptyState__footerFlexItem{min-width:224px}",""]),e.exports=t},44:function(e,t,a){var n=a(32),i=a(45);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},45:function(e,t,a){(t=a(33)(!1)).push([e.i,".inpEmptyState__footer{background:#f5f7fa;border-radius:0 0 6px 6px;margin:0 -24px -24px;padding:24px}@media only screen and (max-width:574px){.inpEmptyState__footer{text-align:center}}@media only screen and (min-width:575px) and (max-width:767px){.inpEmptyState__footer{text-align:center}}.inpEmptyState{max-width:760px!important}.inpEmptyState__cardGrid{justify-content:center}.inpEmptyState__card{min-width:192px}.inpEmptyState__footerFlexItem{min-width:224px}",""]),e.exports=t}}]);