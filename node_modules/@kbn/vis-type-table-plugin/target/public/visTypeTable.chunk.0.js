(window.visTypeTable_bundle_jsonpfunction=window.visTypeTable_bundle_jsonpfunction||[]).push([[0],{37:function(e,n,t){"use strict";t.r(n),t.d(n,"convertToLens",(function(){return d}));var o=t(6),a=t(24),l=t(25),i=t(3);const r=(e,n,t,o)=>{const{showTotal:a,totalFunc:l}=e;return t.map((({columnId:e})=>{const t=o?Object.keys(o).find((n=>o[n].includes(e))):void 0;return{columnId:e,alignment:"left",...a&&n.includes(e)?{summaryRow:l}:{},...t?{collapseFn:t}:{}}}))},s=({perPage:e})=>({enabled:""!==e,size:""!==e?e:0}),u=e=>{const{autoFitRowToContent:n}=e;return{rowHeight:n?"auto":"single",headerRowHeight:n?"auto":"single"}},c=(e,n,{metrics:t,buckets:o,columnsWithoutReferenced:a,bucketCollapseFn:l})=>({layerId:e,layerType:"data",columns:r(n,t,a,l),paging:s(n),...u(n)}),d=async(e,n)=>{var t;if(!n)return null;const r=Object(i.a)(),s=await Object(o.getDataViewByIndexPatternId)(null===(t=e.data.indexPattern)||void 0===t?void 0:t.id,r);if(!s)return null;const{getColumnsFromVis:u,getPercentageColumnFormulaColumn:d}=await o.convertToLensModule,m=u(e,n,s,{buckets:["bucket"],splits:["split_row","split_column"]},{dropEmptyRowsInDateHistogram:!0,isPercentageMode:!1});if(null===m)return null;const[g]=m;if(e.params.percentageCol){const t=Object(o.getVisSchemas)(e,{timefilter:n,timeRange:n.getAbsoluteTime()}),a=t.metric.find((n=>n.label===e.params.percentageCol));if(!a)return null;const l=d({visType:e.type.name,agg:a,dataView:s,aggs:t.metric});if(!l)return null;g.columns.splice(g.columnsWithoutReferenced.findIndex((e=>e.meta.aggId===a.aggId))+1,0,l),g.columnsWithoutReferenced.push(l)}const p=Object(l.v4)(),f=s.id;return{type:"lnsDatatable",layers:[{indexPatternId:f,layerId:p,columns:g.columns.map(a.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:c(p,e.params,g),indexPatternIds:[f]}}}}]);