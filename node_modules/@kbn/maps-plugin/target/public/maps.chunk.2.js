/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[2,9,19],{154:function(e,t,r){"use strict";r.d(t,"a",(function(){return raster_tile_layer_RasterTileLayer}));var n=r(2),i=r.n(n),o=r(40),s=r.n(o),a=r(125),c=r(0);class tile_style_TileStyle{constructor(){i()(this,"_descriptor",void 0),this._descriptor={type:c.Y.TILE}}getType(){return c.Y.TILE}renderEditor(){return null}}class raster_tile_layer_RasterTileLayer extends a.a{static createDescriptor(e){const t=super.createDescriptor(e);return t.type=c.Z.RASTER_TILE,t.alpha=s.a.get(e,"alpha",1),t.style={type:c.Y.TILE},t}constructor({source:e,layerDescriptor:t}){super({source:e,layerDescriptor:t}),i()(this,"_style",void 0),this._style=new tile_style_TileStyle}_isTiled(){return!0}getSource(){return super.getSource()}async hasLegendDetails(){const e=this.getSource();return await e.hasLegendDetails()}renderLegendDetails(){const e=this.getSourceDataRequest();return this.getSource().renderLegendDetails(e)}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}async syncData({startLoading:e,stopLoading:t,onLoadError:r,dataFilters:n,isForceRefresh:i}){const o=this.getSource(),s={...n,applyGlobalQuery:o.getApplyGlobalQuery(),applyGlobalTime:o.getApplyGlobalTime(),applyForceRefresh:!!o.isESSource()&&o.getApplyForceRefresh(),sourceQuery:this.getQuery()||void 0,isForceRefresh:i},a=this.getSourceDataRequest();if(a&&await o.canSkipSourceUpdate(a,s))return;const l=Symbol(`layer-source-refresh:${this.getId()} - source`);try{e(c.zb,l,s);const r={url:await o.getUrlTemplate(s)};t(c.zb,l,r,{})}catch(e){r(c.zb,l,e)}}_getMbLayerId(){return this.makeMbLayerId("raster")}getMbLayerIds(){return[this._getMbLayerId()]}ownsMbLayerId(e){return this._getMbLayerId()===e}ownsMbSourceId(e){return this.getId()===e}_requiresPrevSourceCleanup(e){const t=this.getSource(),r=e.getSource(this.getMbSourceId());if(!r)return!1;const n=this.getSourceDataRequest();if(n){const e=n.getData();if(e)return t.isSourceStale(r,e)}return!1}syncLayerWithMB(e){this._removeStaleMbSourcesAndLayers(e);const t=e.getSource(this.getId()),r=this._getMbLayerId();if(!t){const t=this.getSourceDataRequest();if(!t)return;const n=t.getData();if(!n||!n.url)return;const i=this.getMbSourceId();e.addSource(i,{type:"raster",tiles:[n.url],tileSize:256,scheme:"xyz"}),e.addLayer({id:r,type:"raster",source:i,minzoom:this._descriptor.minZoom,maxzoom:this._descriptor.maxZoom})}this._setTileLayerProperties(e,r)}_setTileLayerProperties(e,t){this.syncVisibilityWithMb(e,t),e.setLayerZoomRange(t,this.getMinZoom(),this.getMaxZoom()),e.setPaintProperty(t,"raster-opacity",this.getAlpha())}getLayerTypeIconName(){return"grid"}isBasemap(e){return 0===e}async isFilteredByGlobalTime(){return this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware()}}},158:function(e,t,r){const n=r(244),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(245),{safeRe:s,t:a}=r(246),c=r(364),{compareIdentifiers:l}=r(365);class SemVer{constructor(e,t){if(t=c(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return l(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=SemVer},170:function(e,t,r){"use strict";r.r(t),r.d(t,"createBasemapLayerDescriptor",(function(){return p}));var n=r(40),i=r.n(n),o=r(81),s=r(5),a=r(304),c=r(154),l=r(228),u=r(229),h=r(0);function p(){const e=Object(o.getKibanaTileMap)();return i.a.get(e,"url")?c.a.createDescriptor({sourceDescriptor:a.a.createDescriptor()}):Object(s.l)().isEMSEnabled()?l.a.createDescriptor({locale:h.g,sourceDescriptor:u.a.createDescriptor({isAutoSelect:!0})}):null}},186:function(e,t,r){"use strict";var n=r(357),i=r(358);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),h=["%","/","?",";","#"].concat(u),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(359);function b(e,t,r){if(e&&i.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}o.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(a);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(a);if(b=b.trim(),!r&&1===e.split("#").length){var E=c.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=s.exec(b);if(S){var _=(S=S[0]).toLowerCase();this.protocol=_,b=b.substr(S.length)}if(r||S||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||S&&g[S]||(b=b.substr(2),this.slashes=!0)}if(!g[S]&&(w||S&&!d[S])){for(var x,I,O=-1,L=0;L<p.length;L++)-1!==(T=b.indexOf(p[L]))&&(-1===O||T<O)&&(O=T);for(-1!==(I=-1===O?b.lastIndexOf("@"):b.lastIndexOf("@",O))&&(x=b.slice(0,I),b=b.slice(I+1),this.auth=decodeURIComponent(x)),O=-1,L=0;L<h.length;L++){var T;-1!==(T=b.indexOf(h[L]))&&(-1===O||T<O)&&(O=T)}-1===O&&(O=b.length),this.host=b.slice(0,O),b=b.slice(O),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var A=this.hostname.split(/\./),M=(L=0,A.length);L<M;L++){var R=A[L];if(R&&!R.match(f)){for(var j="",N=0,P=R.length;N<P;N++)R.charCodeAt(N)>127?j+="x":j+=R[N];if(!j.match(f)){var D=A.slice(0,L),C=A.slice(L+1),$=R.match(m);$&&(D.push($[1]),C.unshift($[2])),C.length&&(b="/"+C.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+U,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!y[_])for(L=0,M=u.length;L<M;L++){var G=u[L];if(-1!==b.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),b=b.split(G).join(V)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var B=b.indexOf("?");if(-1!==B?(this.search=b.substr(B),this.query=b.substr(B+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,B)):t&&(this.search="",this.query={}),b&&(this.pathname=b),d[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||d[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(r[u]=e[u])}return d[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!d[e.protocol]){for(var h=Object.keys(e),p=0;p<h.length;p++){var f=h[p];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var y=r.pathname||"",v=r.search||"";r.path=y+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),E=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=E||b||r.host&&e.pathname,_=S,w=r.pathname&&r.pathname.split("/")||[],x=(m=e.pathname&&e.pathname.split("/")||[],r.protocol&&!d[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),S=S&&(""===m[0]||""===w[0])),E)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=m;else if(m.length)w||(w=[]),w.pop(),w=w.concat(m),r.search=e.search,r.query=e.query;else if(!i.isNullOrUndefined(e.search))return x&&(r.hostname=r.host=w.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),r.search=e.search,r.query=e.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=w.slice(-1)[0],O=(r.host||e.host||w.length>1)&&("."===I||".."===I)||""===I,L=0,T=w.length;T>=0;T--)"."===(I=w[T])?w.splice(T,1):".."===I?(w.splice(T,1),L++):L&&(w.splice(T,1),L--);if(!S&&!_)for(;L--;L)w.unshift("..");!S||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var k,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(r.hostname=r.host=A?"":w.length?w.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),(S=S||r.host&&w.length)&&!A&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},228:function(e,t,r){"use strict";r.d(t,"a",(function(){return ems_vector_tile_layer_EmsVectorTileLayer}));var n=r(2),i=r.n(n),o=(r(4),r(40)),s=r.n(o),a=r(128),c=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){if("string"==typeof e){var r=t(e);return"rgba(".concat(r.rgba().join(","),")")}if("object"==l(e)&&"stops"in e&&Array.isArray(null==e?void 0:e.stops)){var n=e.stops.map((function(e){var r=u(e[1],t);return[e[0],r]}));return Object.assign({},e,{stops:n})}return e}function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"screen",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return u(e,(function(e){return"mix"!==r?c.a.blend(c()(e),t,r):c.a.mix(c()(e),t,n)}))}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function m(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function d(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(a)throw o}}}}function b(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */w=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,s=Object.create(o.prototype),a=new R(n||[]);return i(s,"_invoke",{value:T(e,r,a)}),s}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",y="completed",d={};function v(){}function b(){}function E(){}var S={};l(S,s,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(j([])));x&&x!==r&&n.call(x,s)&&(S=x);var I=E.prototype=v.prototype=Object.create(S);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==g(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(u).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,r,n){var i=p;return function(o,s){if(i===m)throw new Error("Generator is already running");if(i===y){if("throw"===o)throw s;return{value:e,done:!0}}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var c=k(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var l=h(t,r,n);if("normal"===l.type){if(i=n.done?y:f,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=y,n.method="throw",n.arg=l.arg)}}}function k(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=h(i,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var s=o.arg;return s?s.done?(r[t.resultName]=s.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function j(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(g(t)+" is not iterable")}return b.prototype=E,i(I,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=l(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,l(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},O(L.prototype),l(L.prototype,a,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new L(u(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},O(I),l(I,c,"Generator"),l(I,s,(function(){return this})),l(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=j,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:j(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}function x(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){x(o,n,i,s,a,"next",e)}function a(e){x(o,n,i,s,a,"throw",e)}s(void 0)}))}}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function A(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===g(t)?t:String(t)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(R,e);var t,r,n,i,o,a,c,l,u,p,f,m,y,b,E,S,x,M=(S=R,x=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(S);if(x){var r=k(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(this,e)});function R(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,R),A(T(n=M.call(this,e,t,r)),"_config",void 0),A(T(n),"_getRasterStyleJson",s.a.once(I(w().mark((function e(){var t,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n._getStyleUrlForLocale("raster"))){e.next=6;break}return r=n._proxyPath+n._getAbsoluteUrl(t),e.abrupt("return",n._emsClient.getManifest(n._emsClient.extendUrlWithParams(r)));case 6:return e.abrupt("return");case 7:case"end":return e.stop()}}),e)}))))),A(T(n),"_getVectorStyleJsonRaw",s.a.once(I(w().mark((function e(){var t,r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n._getStyleUrlForLocale("vector"))){e.next=9;break}return r=n._proxyPath+n._getAbsoluteUrl(t),e.next=5,n._emsClient.getManifest(n._emsClient.extendUrlWithParams(r));case 5:return i=e.sent,e.abrupt("return",_({},i));case 9:return e.abrupt("return");case 10:case"end":return e.stop()}}),e)}))))),A(T(n),"_getVectorStyleJsonInlined",s.a.once(I(w().mark((function e(){var t,r,i,o,s,a,c,l,u,h,p,f;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._getVectorStyleJsonRaw();case 2:if(!(t=e.sent)){e.next=44;break}r={},i=t.sources,o=v(Object.getOwnPropertyNames(i)),e.prev=7,o.s();case 9:if((s=o.n()).done){e.next=22;break}if(a=s.value,!(c=i[a].url)){e.next=20;break}return u=n._proxyPath+n._getAbsoluteUrl(c),h=n._emsClient.extendUrlWithParams(u),e.next=17,n._emsClient.getManifest(h);case 17:p=e.sent,f=null==p||null===(l=p.tiles)||void 0===l?void 0:l.map((function(e){var t=n._proxyPath+n._getAbsoluteUrl(e);return n._emsClient.extendUrlWithParams(t)})),r[a]=_(_({},p),{},{type:"vector",tiles:f});case 20:e.next=9;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(7),o.e(e.t0);case 27:return e.prev=27,o.f(),e.finish(27);case 30:return e.t1=_,e.t2=_({},t),e.t3={},e.t4=r,e.next=36,n._getSpriteSheetRootPath();case 36:return e.t5=e.sent,e.next=39,n._getUrlTemplateForGlyphs();case 39:return e.t6=e.sent,e.t7={sources:e.t4,sprite:e.t5,glyphs:e.t6},e.abrupt("return",(0,e.t1)(e.t2,e.t3,e.t7));case 44:return e.abrupt("return");case 45:case"end":return e.stop()}}),e,null,[[7,24,27,30]])}))))),n._config=e,n}return t=R,r=[{key:"getDefaultRasterStyle",value:(E=I(w().mark((function e(){var t,r,n=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getRasterStyleJson();case 2:if(!(t=e.sent)){e.next=8;break}return r=t.tiles.map((function(e){return n._proxyPath+n._getAbsoluteUrl(e)})),e.abrupt("return",_(_({},t),{tiles:r}));case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"getUrlTemplate",value:(b=I(w().mark((function e(){var t,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getRasterStyleJson();case 2:if(!(t=e.sent)){e.next=8;break}return r=this._proxyPath+this._getAbsoluteUrl(t.tiles[0]),e.abrupt("return",this._emsClient.extendUrlWithParams(r));case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"getUrlTemplateForVector",value:(y=I(w().mark((function e(t){var r,n,i,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getVectorStyleJsonInlined();case 2:if(n=e.sent,!(i=null==n||null===(r=n.sources[t])||void 0===r||null===(r=r.tiles)||void 0===r?void 0:r.pop())){e.next=9;break}return o=this._proxyPath+this._getAbsoluteUrl(i),e.abrupt("return",this._emsClient.extendUrlWithParams(o));case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"getVectorStyleSheet",value:(m=I(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getVectorStyleJsonInlined();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"getVectorStyleSheetRaw",value:(f=I(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getVectorStyleJsonRaw();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getSpriteSheetMeta",value:(p=I(w().mark((function e(){var t,r,n,i,o,s=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],e.next=3,this.getSpriteSheetJsonPath(t);case 3:return r=e.sent,e.next=6,this.getSpriteSheetPngPath(t);case 6:if(n=e.sent,!r||!n){e.next=15;break}return i=this._emsClient.extendUrlWithParams(r),e.next=11,this._emsClient.getManifest(i);case 11:return o=e.sent,e.abrupt("return",{png:n,json:o});case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"getSpriteSheetJsonPath",value:(u=I(w().mark((function e(){var t,r,n,i=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=e.sent)){e.next=9;break}return n=t?"@2x":"",e.abrupt("return",r+n+".json");case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getSpriteSheetPngPath",value:(l=I(w().mark((function e(){var t,r,n,i=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=e.sent)){e.next=9;break}return n=t?"@2x":"",e.abrupt("return",r+n+".png");case 9:return e.abrupt("return","");case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getDisplayName",value:function(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getMinZoom",value:(c=I(w().mark((function e(){var t,r,n,i,o,s=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:"vector",e.t0=t,e.next="vector"===e.t0?4:"raster"===e.t0?12:20;break;case 4:return e.next=6,this._getVectorStyleJsonInlined();case 6:if(e.t1=e.sent,e.t1){e.next=9;break}e.t1={sources:{}};case 9:return r=e.t1,n=r.sources,e.abrupt("return",Math.min.apply(Math,d(Object.values(n).map((function(e){return e.minzoom})).filter((function(e){return Number.isFinite(e)})))));case 12:return e.next=14,this._getRasterStyleJson();case 14:if(e.t2=e.sent,e.t2){e.next=17;break}e.t2={};case 17:return i=e.t2,o=i.minzoom,e.abrupt("return",o);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getMaxZoom",value:(a=I(w().mark((function e(){var t,r,n,i,o,s=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:"vector",e.t0=t,e.next="vector"===e.t0?4:"raster"===e.t0?12:20;break;case 4:return e.next=6,this._getVectorStyleJsonInlined();case 6:if(e.t1=e.sent,e.t1){e.next=9;break}e.t1={sources:{}};case 9:return r=e.t1,n=r.sources,e.abrupt("return",Math.max.apply(Math,d(Object.values(n).map((function(e){return e.maxzoom})).filter((function(e){return Number.isFinite(e)})))));case 12:return e.next=14,this._getRasterStyleJson();case 14:if(e.t2=e.sent,e.t2){e.next=17;break}e.t2={};case 17:return i=e.t2,o=i.maxzoom,e.abrupt("return",o);case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getId",value:function(){return this._config.id}},{key:"hasId",value:function(e){return this._config.id===e}},{key:"getApiUrl",value:function(){return this._emsClient.getTileApiUrl()}},{key:"_getStyleUrlForLocale",value:function(e){var t=this._getFormats(e,this._emsClient.getLocale());if(t.length||(t=this._getFormats(e,this._emsClient.getDefaultLocale())),!t.length)throw new Error("Cannot find ".concat(e," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()));var r=t[0];if(r&&r.hasOwnProperty("url"))return r.url}},{key:"_getFormats",value:function(e,t){return this._config.formats.filter((function(r){return r.locale===t&&r.format===e}))}},{key:"_getSpriteSheetRootPath",value:(o=I(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(t=e.sent)||!t.sprite){e.next=7;break}return e.abrupt("return",this._proxyPath+this._getAbsoluteUrl(t.sprite));case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_getUrlTemplateForGlyphs",value:(i=I(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(t=e.sent)||!t.glyphs){e.next=7;break}return e.abrupt("return",this._proxyPath+this._getAbsoluteUrl(t.glyphs));case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}],n=[{key:"transformLanguageProperty",value:function(e,t){var r=this.SupportedLanguages.find((function(e){return e.key===t}));if("symbol"===e.type&&void 0!==e.layout&&void 0!==r){var n=r.omt,i=e.layout["text-field"];if(i&&"string"==typeof i)return R._getTextField(i,n)}}},{key:"transformColorProperties",value:function(e,t,r,n){if(-1!==["background","fill","line","symbol"].indexOf(e.type)&&e.paint){var i=e.paint;return"symbol"===e.type&&0===Object.keys(i).length&&(i["text-color"]="rgb(0,0,0)"),Object.keys(i).filter((function(e){return-1!==["background-color","circle-color","circle-stroke-color","fill-color","fill-extrusion-color","fill-outline-color","icon-color","icon-halo-color","line-color","text-color","text-halo-color"].indexOf(e)})).map((function(e){var o=i[e];return{property:e,color:o&&t?h(o,t,r,n):o}}))}return[]}},{key:"_getTextField",value:function(e,t){var r=e.match(/\{name([:_])(.{2})\}/);return r&&r[1]!=t?["coalesce",["get","name:".concat(t)],["get","name".concat(r[1]).concat(r[2])]]:e.includes("latin")&&e.includes("nonlatin")?["coalesce",["get","name:".concat(t)],["concat",["get","name:latin"],"\n",["get","name:nonlatin"]]]:e}}],r&&O(t.prototype,r),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),R}(function(){function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_emsClient",void 0),m(this,"_config",void 0),m(this,"_proxyPath",void 0),m(this,"_getAbsoluteUrl",(function(e){return/^https?:\/\//.test(e)?e:function(e,t){if(!e)return t;var r="/"===e[e.length-1],n="/"===t[0];return!0===r&&!0===n?e+t.slice(1):r!==n?e+t:e+"/"+t}(i.getApiUrl(),e)})),this._config=t,this._emsClient=r,this._proxyPath=n}var t,r;return t=e,(r=[{key:"getAttributions",value:function(){var e=this;return this._config.attribution.map((function(t){return{url:e._emsClient.getValueInLanguage(t.url),label:e._emsClient.getValueInLanguage(t.label)}}))}},{key:"getMarkdownAttribution",value:function(){var e=this;return this._config.attribution.map((function(t){var r=e._emsClient.getValueInLanguage(t.url),n=e._emsClient.getValueInLanguage(t.label);return"[".concat(n,"](").concat(r,")")})).join("|")}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}());A(R,"SupportedLanguages",[{key:"ar",omt:"ar"},{key:"az",omt:"az"},{key:"be",omt:"be"},{key:"bg",omt:"bg"},{key:"br",omt:"br"},{key:"bs",omt:"bs"},{key:"ca",omt:"ca"},{key:"cs",omt:"cs"},{key:"cy",omt:"cy"},{key:"da",omt:"da"},{key:"de",omt:"de"},{key:"el",omt:"el"},{key:"en",omt:"en"},{key:"eo",omt:"eo"},{key:"es",omt:"es"},{key:"et",omt:"et"},{key:"fi",omt:"fi"},{key:"fr-fr",omt:"fr"},{key:"fy",omt:"fy"},{key:"ga",omt:"ga"},{key:"gd",omt:"gd"},{key:"he",omt:"he"},{key:"hi-in",omt:"hi"},{key:"hr",omt:"hr"},{key:"hu",omt:"hu"},{key:"hy",omt:"hy"},{key:"is",omt:"is"},{key:"it",omt:"it"},{key:"ja_kana",omt:"ja_kana"},{key:"ja_rm",omt:"ja_rm"},{key:"ja-jp",omt:"ja"},{key:"ka",omt:"ka"},{key:"kk",omt:"kk"},{key:"kn",omt:"kn"},{key:"ko_rm",omt:"ko_rm"},{key:"ko",omt:"ko"},{key:"la",omt:"la"},{key:"lb",omt:"lb"},{key:"lt",omt:"lt"},{key:"lv",omt:"lv"},{key:"mk",omt:"mk"},{key:"mt",omt:"mt"},{key:"nl",omt:"nl"},{key:"no",omt:"no"},{key:"pl",omt:"pl"},{key:"pt-pt",omt:"pt"},{key:"rm",omt:"rm"},{key:"ro",omt:"ro"},{key:"ru-ru",omt:"ru"},{key:"sk",omt:"sk"},{key:"sl",omt:"sl"},{key:"sq",omt:"sq"},{key:"sr-Ltn",omt:"sr-Ltn"},{key:"sr",omt:"sr"},{key:"sv",omt:"sv"},{key:"th",omt:"th"},{key:"tr",omt:"tr"},{key:"uk",omt:"uk"},{key:"zh-cn",omt:"zh"}]),A(R,"colorOperationDefaults",[{style:"road_map",operation:"mix",percentage:.25},{style:"road_map_desaturated",operation:"screen",percentage:.25},{style:"dark_map",operation:"dodge",percentage:.25}]),r(186),r(362),r(363),r(366),r(367),r(368),r(369);var j=r(1),N=r(15),P=r(372),D=r.n(P);function C(e,{width:t,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*r*n);return e.width=t,e.height=r,e.data=i,e}function $(e,t,r,n,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const s=e.data,a=t.data;D()(s!==a);for(let c=0;c<i.height;c++){const l=((r.y+c)*e.width+r.x)*o,u=((n.y+c)*t.width+n.x)*o;for(let e=0;e<i.width*o;e++)a[u+e]=s[l+e]}return t}class RGBAImage{constructor(e,t){C(this,e,4,t)}resize(e){!function(e,{width:t,height:r},n){if(t===e.width&&r===e.height)return;const i=C({},{width:t,height:r},n);$(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},n),e.width=t,e.height=r,e.data=i.data}(this,e,4)}replace(e,t){t?this.data.set(e):e instanceof Uint8ClampedArray?this.data=new Uint8Array(e.buffer):this.data=e}clone(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){$(e,t,r,n,i,4)}}var U=r(125),F=r(0),G=r(81),V=r(3);function q({color:e,onColorChange:t}){const r=j.i18n.translate("xpack.maps.emsVectorTileStyleEditor.colorBlendPickerLabel",{defaultMessage:"Color blend"}),n=j.i18n.translate("xpack.maps.emsVectorTileStyleEditor.colorBlendPickerPlaceholder",{defaultMessage:"No color"});return Object(V.jsx)(N.EuiFormRow,{display:"columnCompressed",label:r},Object(V.jsx)(N.EuiColorPicker,{compressed:!0,"aria-label":r,color:e,onChange:e=>{t({color:e})},secondaryInputDisplay:"top",isClearable:!0,format:"hex",placeholder:n,"aria-placeholder":n}))}class ems_vector_tile_style_EMSVectorTileStyle{constructor(e={color:""}){i()(this,"_descriptor",void 0),this._descriptor=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(e.color)}static createDescriptor(e){return{type:F.Y.EMS_VECTOR_TILE,color:null!=e?e:""}}getType(){return F.Y.EMS_VECTOR_TILE}getColor(){return this._descriptor.color}renderEditor(e){return Object(V.jsx)(q,{color:this._descriptor.color,onColorChange:({color:t})=>{const r=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(t);e(r)}})}}class ems_vector_tile_layer_EmsVectorTileLayer extends U.a{static createDescriptor(e){const t=super.createDescriptor(e);return t.type=F.Z.EMS_VECTOR_TILE,t.alpha=s.a.get(e,"alpha",1),t.locale=s.a.get(e,"locale",F.g),t.style=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(),t}constructor({source:e,layerDescriptor:t}){if(super({source:e,layerDescriptor:t}),i()(this,"_style",void 0),t.style)this._style=new ems_vector_tile_style_EMSVectorTileStyle(t.style);else{const e=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor();this._style=new ems_vector_tile_style_EMSVectorTileStyle(e)}}_isTiled(){return!0}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}getLocale(){var e;return null!==(e=this._descriptor.locale)&&void 0!==e?e:F.qb}_canSkipSync({prevDataRequest:e,nextMeta:t}){if(!e)return!1;const r=e.getMeta();return!!r&&r.tileLayerId===t.tileLayerId}async syncData({startLoading:e,stopLoading:t,onLoadError:r}){const n={tileLayerId:this.getSource().getTileLayerId()};if(this._canSkipSync({prevDataRequest:this.getSourceDataRequest(),nextMeta:n}))return;const i=Symbol(`layer-source-refresh:${this.getId()} - source`);try{e(F.zb,i,n);const r=await this.getSource().getVectorStyleSheetAndSpriteMeta(Object(G.isRetina)()),o=r.spriteMeta?await this._loadSpriteSheetImageData(r.spriteMeta.png):void 0,s={...r,spriteSheetImageData:o};t(F.zb,i,s)}catch(e){r(F.zb,i,e)}}_generateMbId(e){return`${this.getId()}_${e}`}_generateMbSourceIdPrefix(){return`${this.getId()}___${this.getSource().getTileLayerId()}___`}_generateMbSourceId(e){return`${this._generateMbSourceIdPrefix()}${e}`}_getVectorStyle(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.vectorStyleSheet:null}_getSpriteMeta(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.spriteMeta:null}_getSpriteImageData(){var e;const t=this.getSourceDataRequest();return t?null===(e=t.getData())||void 0===e?void 0:e.spriteSheetImageData:null}getMbLayerIds(){const e=this._getVectorStyle();return e&&e.layers?e.layers.map((e=>this._generateMbId(e.id))):[]}getMbSourceIds(){const e=this._getVectorStyle();return e&&e.sources?Object.keys(e.sources).map((e=>this._generateMbSourceId(e))):[]}ownsMbLayerId(e){return e.startsWith(this.getId())}ownsMbSourceId(e){return e.startsWith(this.getId())}_makeNamespacedImageId(e){return this.getSource().getSpriteNamespacePrefix()+"/"+e}_requiresPrevSourceCleanup(e){const t=this._generateMbSourceIdPrefix(),r=e.getStyle();return!!r.sources&&Object.keys(r.sources).some((e=>{const r=this.ownsMbSourceId(e),n=e.startsWith(t);return r&&!n}))}_getImageData(e){const t=window.document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(0,0,e.width,e.height)}_isCrossOriginUrl(e){const t=window.document.createElement("a");return t.href=e,t.protocol!==window.document.location.protocol||t.host!==window.document.location.host||t.port!==window.document.location.port}_loadSpriteSheetImageData(e){return new Promise(((t,r)=>{const n=new Image;this._isCrossOriginUrl(e)&&(n.crossOrigin="Anonymous"),n.onload=e=>{t(this._getImageData(n))},n.onerror=e=>{r(e)},n.src=e}))}_addSpriteSheetToMapFromImageData(e,t,r){for(const n in e){if(!e.hasOwnProperty(n)||r.hasImage(n))continue;const{width:i,height:o,x:s,y:a,sdf:c,pixelRatio:l}=e[n];if("number"!=typeof i||"number"!=typeof o)continue;const u=new RGBAImage({width:i,height:o});RGBAImage.copy(t,u,{x:s,y:a},{x:0,y:0},{width:i,height:o}),r.addImage(n,u,{pixelRatio:l,sdf:c})}}syncLayerWithMB(e){const t=this._getVectorStyle();if(!t)return;this._removeStaleMbSourcesAndLayers(e);let r=!1;if((t.sources?Object.keys(t.sources):[]).forEach((n=>{if(r)return;const i=this._generateMbSourceId(n);e.getSource(i)?r=!0:e.addSource(i,t.sources[n])})),!r){const r=this._getSpriteMeta();if(!r)return;const n={};for(const e in r.json)r.json.hasOwnProperty(e)&&(n[this._makeNamespacedImageId(e)]=r.json[e]);const i=this._getSpriteImageData();if(!i)return;this._addSpriteSheetToMapFromImageData(n,i,e),(t.layers?t.layers:[]).forEach((t=>{const r=this._generateMbId(t.id);if(e.getLayer(r))return;const n={...t,source:this._generateMbSourceId("source"in t&&"string"==typeof t.source?t.source:void 0),id:r};"symbol"===n.type&&n.layout&&"string"==typeof n.layout["icon-image"]&&(n.layout["icon-image"]=this._makeNamespacedImageId(n.layout["icon-image"])),"fill"===n.type&&n.paint&&"string"==typeof n.paint["fill-pattern"]&&(n.paint["fill-pattern"]=this._makeNamespacedImageId(n.paint["fill-pattern"])),e.addLayer(n)}))}this._setTileLayerProperties(e)}_getOpacityProps(e){return"fill"===e?["fill-opacity"]:"line"===e?["line-opacity"]:"circle"===e?["circle-opacity"]:"background"===e?["background-opacity"]:"symbol"===e?["icon-opacity","text-opacity"]:[]}_setColorFilter(e,t,r){const n=this.getCurrentStyle().getColor(),i=R.colorOperationDefaults.find((({style:e})=>e===this.getSource().getTileLayerId()));if(!i)return;const{operation:o,percentage:s}=i,a=R.transformColorProperties(t,n,o,s);for(const{property:t,color:n}of a)e.setPaintProperty(r,t,n)}_setOpacityForType(e,t,r){this._getOpacityProps(t.type).forEach((n=>{const i=t.paint;if(i&&"number"==typeof i[n]){const t=i[n]*this.getAlpha();e.setPaintProperty(r,n,t)}else e.setPaintProperty(r,n,this.getAlpha())}))}_setLanguage(e,t,r){const n=this.getLocale();if(null===n||n===F.qb){var i;if("symbol"!==t.type)return;const n=null===(i=t.layout)||void 0===i?void 0:i["text-field"];return void(t.layout&&n&&e.setLayoutProperty(r,"text-field",n))}const o=n===F.g?R.transformLanguageProperty(t,j.i18n.getLocale()):R.transformLanguageProperty(t,n);void 0!==o&&e.setLayoutProperty(r,"text-field",o)}_setLayerZoomRange(e,t,r){let n=this.getMinZoom();"number"==typeof t.minzoom&&(n=Math.max(n,t.minzoom));let i=this.getMaxZoom();"number"==typeof t.maxzoom&&(i=Math.min(i,t.maxzoom)),e.setLayerZoomRange(r,n,i)}_setTileLayerProperties(e){const t=this._getVectorStyle();t&&t.layers&&t.layers.forEach((t=>{const r=this._generateMbId(t.id);this.syncVisibilityWithMb(e,r),this._setLayerZoomRange(e,t,r),this._setOpacityForType(e,t,r),this._setColorFilter(e,t,r),this._setLanguage(e,t,r)}))}areLabelsOnTop(){return!!this._descriptor.areLabelsOnTop}supportsLabelsOnTop(){return!0}supportsLabelLocales(){return!0}async getLicensedFeatures(){return this._source.getLicensedFeatures()}getLayerTypeIconName(){return"grid"}getLayerIcon(){return{icon:Object(V.jsx)(N.EuiIcon,{size:"m",type:"grid"}),tooltipContent:j.i18n.translate("xpack.maps.emsVectorTileLayer.layerDescription",{defaultMessage:"Reference map provided by Elastic Maps Service (EMS)."})}}isBasemap(e){return 0===e}}},229:function(e,t,r){"use strict";r.d(t,"b",(function(){return w})),r.d(t,"a",(function(){return ems_tms_source_EMSTMSSource}));var n=r(4),i=r(1),o=r(2),s=r.n(o),a=r(133),c=r(81),l=r(15),u=r(41),h=r(98),p=r(3);const f="auto_select";class tile_service_select_TileServiceSelect extends n.Component{constructor(...e){super(...e),s()(this,"_isMounted",!1),s()(this,"state",{emsTmsOptions:[],hasLoaded:!1}),s()(this,"_loadTmsOptions",(async()=>{try{const e=await Object(c.getEmsTmsServices)();if(!this._isMounted)return;const t=e.map((e=>({value:e.getId(),text:e.getDisplayName()?e.getDisplayName():e.getId()})));t.unshift({value:f,text:i.i18n.translate("xpack.maps.source.emsTile.autoLabel",{defaultMessage:"Autoselect based on Kibana theme"})}),this.setState({emsTmsOptions:t,hasLoaded:!0})}catch(e){this._isMounted&&this.setState({emsTmsOptions:[],hasLoaded:!0})}})),s()(this,"_onChange",(e=>{const t=e.target.value,r=t===f;this.props.onTileSelect({id:r?void 0:t,isAutoSelect:r})}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadTmsOptions()}render(){const e=0===this.state.emsTmsOptions.length?Object(h.a)():null;let t;return this.props.config&&(t=this.props.config.isAutoSelect?f:this.props.config.id),Object(p.jsx)(l.EuiFormRow,{label:i.i18n.translate("xpack.maps.source.emsTile.label",{defaultMessage:"Tile service"}),helpText:e,display:"columnCompressed"},Object(p.jsx)(l.EuiSelect,{hasNoInitialSelection:!t,value:t,options:this.state.emsTmsOptions,onChange:this._onChange,isLoading:!this.state.hasLoaded,disabled:this.state.hasLoaded&&0===this.state.emsTmsOptions.length,compressed:!0}))}}function m({onChange:e,config:t}){return Object(p.jsx)(n.Fragment,null,Object(p.jsx)(l.EuiPanel,null,Object(p.jsx)(l.EuiTitle,{size:"xs"},Object(p.jsx)("h5",null,Object(p.jsx)(u.FormattedMessage,{id:"xpack.maps.source.emsTile.settingsTitle",defaultMessage:"Basemap"}))),Object(p.jsx)(l.EuiSpacer,{size:"m"}),Object(p.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:({id:t,isAutoSelect:r})=>{e({propName:"id",value:t}),e({propName:"isAutoSelect",value:r})},config:t})),Object(p.jsx)(l.EuiSpacer,{size:"s"}))}var y=r(78),g=r(0),d=r(5),v=r(20);function b(e){return i.i18n.translate("xpack.maps.source.emsTile.unableToFindTileIdErrorMessage",{defaultMessage:"Unable to find EMS tile configuration for id: {id}. {info}",values:{id:e,info:Object(h.a)()}})}function E(){return Object(d.l)().isEMSUrlSet()?i.i18n.translate("xpack.maps.source.emsOnPremTileTitle",{defaultMessage:"Elastic Maps Server Basemaps"}):i.i18n.translate("xpack.maps.source.emsTileTitle",{defaultMessage:"EMS Basemaps"})}class ems_tms_source_EMSTMSSource extends a.a{static createDescriptor(e){return{type:g.Cb.EMS_TMS,id:e.id,isAutoSelect:void 0!==e.isAutoSelect&&e.isAutoSelect,lightModeDefault:void 0!==e.lightModeDefault?e.lightModeDefault:Object(d.n)().desaturated}}constructor(e){const t=ems_tms_source_EMSTMSSource.createDescriptor(e);super(t),s()(this,"_descriptor",void 0),this._descriptor=t}renderSourceSettingsEditor({onChange:e}){return Object(p.jsx)(m,{onChange:e,config:this._descriptor})}async getImmutableProperties(){const e=await this._getTileServiceName(),t=i.i18n.translate("xpack.maps.source.emsTile.isAutoSelectLabel",{defaultMessage:"autoselect based on Kibana theme"}),r=[{label:Object(y.a)(),value:E()},{label:i.i18n.translate("xpack.maps.source.emsTile.serviceId",{defaultMessage:"Tile service"}),value:this._descriptor.isAutoSelect?`${e} - ${t}`:e}],n=Object(d.l)();return n.isEMSUrlSet()&&r.push({label:i.i18n.translate("xpack.maps.source.emsTile.emsOnPremLabel",{defaultMessage:"Elastic Maps Server"}),value:n.getEMSRoot()}),r}async _getEMSTMSService(){let e;const t=this.getTileLayerId();try{e=await Object(c.getEmsTmsServices)()}catch(e){throw new Error(`${b(t)} - ${e.message}`)}const r=e.find((e=>e.getId()===t));if(!r)throw new Error(b(t));return r}async getDisplayName(){return i.i18n.translate("xpack.maps.source.emsTile.basemapLabel",{defaultMessage:"Basemap"})}async _getTileServiceName(){try{return(await this._getEMSTMSService()).getDisplayName()}catch(e){return this.getTileLayerId()}}getAttributionProvider(){return async()=>(await this._getEMSTMSService()).getAttributions()}async getUrlTemplate(){const e=await this._getEMSTMSService();return await e.getUrlTemplate()}getSpriteNamespacePrefix(){return"ems/"+this.getTileLayerId()}async getVectorStyleSheetAndSpriteMeta(e){const t=await this._getEMSTMSService();return{vectorStyleSheet:await t.getVectorStyleSheet(),spriteMeta:await t.getSpriteSheetMeta(e)}}getTileLayerId(){return!this._descriptor.isAutoSelect&&this._descriptor.id?this._descriptor.id:Object(d.y)()?Object(d.n)().dark:this._descriptor.lightModeDefault}async getLicensedFeatures(){return Object(d.l)().isEMSUrlSet()?[v.a.ON_PREM_EMS]:[]}}var S=r(228);class create_source_editor_CreateSourceEditor extends n.Component{constructor(...e){super(...e),s()(this,"state",{}),s()(this,"_onTileSelect",(e=>{this.setState({config:e}),this.props.onTileSelect(e)}))}componentDidMount(){this._onTileSelect({isAutoSelect:!0})}render(){return Object(p.jsx)(l.EuiPanel,null,Object(p.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:this._onTileSelect,config:this.state.config}))}}var _=r(301);const w={id:g.Jb.EMS_BASEMAP,order:10,categories:[g.ab.REFERENCE],checkVisibility:async()=>Object(d.l)().isIncludeElasticMapsService(),description:function(){const e=Object(d.l)();return i.i18n.translate("xpack.maps.source.emsTileSourceDescription",{defaultMessage:"Basemap service from {host}",values:{host:e.isEMSUrlSet()?e.getEMSRoot():"Elastic Maps Service"}})}(),disabledReason:i.i18n.translate("xpack.maps.source.emsTileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const e=Object(d.l)();return e.isEMSUrlSet()&&!e.hasOnPremLicense()},icon:_.a,renderWizard:({previewLayers:e})=>Object(p.jsx)(create_source_editor_CreateSourceEditor,{onTileSelect:t=>{const r=S.a.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor(t)});e([r])}}),title:E()}},235:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(4),i=r(1),o=r(15),s=r(81),a=r(3);function c({onSourceConfigChange:e}){const t=Object(s.getKibanaTileMap)();return Object(n.useEffect)((()=>{t.url&&e()}),[]),Object(a.jsx)(o.EuiPanel,null,Object(a.jsx)(o.EuiFormRow,{label:i.i18n.translate("xpack.maps.source.kbnTMS.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),helpText:t.url?null:i.i18n.translate("xpack.maps.source.kbnTMS.noLayerAvailableHelptext",{defaultMessage:'No tilemap layer is available. Ask your system administrator to set "map.tilemap.url" in kibana.yml.'})},Object(a.jsx)(o.EuiFieldText,{readOnly:!0,value:t.url?t.url:""})))}var l=r(237),u=r(154),h=r(0);const p={id:h.Jb.KIBANA_BASEMAP,order:10,categories:[h.ab.REFERENCE],checkVisibility:async()=>!!Object(s.getKibanaTileMap)().url,description:i.i18n.translate("xpack.maps.source.kbnTMSDescription",{defaultMessage:"Tile map service configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:e})=>Object(a.jsx)(c,{onSourceConfigChange:()=>{const t=u.a.createDescriptor({sourceDescriptor:l.a.createDescriptor()});e([t])}}),title:l.b}},237:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return kibana_tilemap_source_KibanaTilemapSource}));var n=r(2),i=r.n(n),o=r(133),s=r(81),a=r(1),c=r(78),l=r(40),u=r.n(l),h=r(0);const p=a.i18n.translate("xpack.maps.source.kbnTMSTitle",{defaultMessage:"Configured Tile Map Service"});class kibana_tilemap_source_KibanaTilemapSource extends o.a{static createDescriptor(){return{type:kibana_tilemap_source_KibanaTilemapSource.type}}async getImmutableProperties(){return[{label:Object(c.a)(),value:p},{label:a.i18n.translate("xpack.maps.source.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),value:await this.getUrlTemplate()}]}async hasLegendDetails(){return!1}renderLegendDetails(){return null}isSourceStale(e,t){var r;return!!t.url&&(null===(r=e.tiles)||void 0===r?void 0:r[0])!==t.url}async canSkipSourceUpdate(){return!1}async getUrlTemplate(){const e=Object(s.getKibanaTileMap)();if(!e.url)throw new Error(a.i18n.translate("xpack.maps.source.kbnTMS.noConfigErrorMessage",{defaultMessage:"Unable to find map.tilemap.url configuration in the kibana.yml"}));return e.url}getAttributionProvider(){return async()=>{const e=Object(s.getKibanaTileMap)();return function(e){const t=[];return e.split("|").forEach((e=>{e=e.trim();const r=/\[(.*)\]\((.*)\)/.exec(e);r&&(null==r?void 0:r.length)>=3&&r[1]&&r[2]&&t.push({label:r[1],url:r[2]})})),t}(u.a.get(e,"options.attribution",""))}}async getDisplayName(){try{return await this.getUrlTemplate()}catch(e){return""}}}i()(kibana_tilemap_source_KibanaTilemapSource,"type",h.Cb.KIBANA_TILEMAP)},244:function(e,t,r){(function(t){const r="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r}).call(this,r(106))},245:function(e,t){const r=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},246:function(e,t,r){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(245),s=r(244),a=(t=e.exports={}).re=[],c=t.safeRe=[],l=t.src=[],u=t.t={};let h=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,i]],m=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),i=h++;s(e,i,t),u[e]=i,l[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),m("FULL",`^${l[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),m("LOOSE",`^${l[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),m("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),m("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),m("COERCERTL",l[u.COERCE],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},247:function(e,t,r){const n=r(158);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},301:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r(4);var n=r(3);const i=()=>Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(n.jsx)("path",{className:"mapLayersWizardIcon__highlight",d:"M13.175 15.71s-1.357 1.258.523 2.987c1.88 1.73-.379 3.912 1.096 5.712.782-.248-.418-.63 2.454-3.616 2.872-2.987 1.045-3.72-.574-4.454-1.619-.733-2.245-2.096-3.499-.629zm-2.506-2.987s.209-.68 1.305-.157c1.097.524 1.306-2.253 3.29-2.986 1.985-.734 2.037-1.625.783-2.306-1.253-.681-.888-1.205-2.088.472-1.202 1.676-2.007-1.516-.157-2.096.835-.262 1.044-1.468 0-1.834-1.045-.367-3.238.104-4.334-1.153C8.37 1.405 6.596.148 5.028 2.82c-1.566 2.672-.626 2.62 0 2.882.628.262 1.358-.42 2.09.943.73 1.363-.21 3.93.73 4.873.94.943-.068 2.841 3.604 3.302.418.052.835.157 1.044.366.21.21.992-.995-.679-1.362-1.67-.367-1.357-.786-1.148-1.1zm5.84-9.941c.495.332 1.462.157.992 1.258-.47 1.1-.627 2.882.313 3.51.94.63.836-1.938 2.559-1.938 1.723 0 2.872-6.13-.784-5.083-3.655 1.048-3.55 1.939-3.08 2.253zM44.716 1.3c.575-1.152-1.514-.89-2.715-.157-1.201.734-2.611.629-3.394.157-.784-.471-.418.734-1.619.891-1.201.157-2.559.262-2.298-.733.261-.996-1.096-.525-1.096-.525-1.15.367-1.985 1.677-1.724 2.83.261 1.153-1.514 1.834-3.133 1.153s-3.551.105-4.125 2.148c-.575 2.044-.992 2.463-1.723 3.197-.732.733.94 1.677 2.036-.053 1.097-1.729 1.828-.366 2.506.367.285.308.68 1.048.68 1.048s.115.258.317.618a2.081 2.081 0 00-.644-.103h-.258a2.028 2.028 0 00-1.518-.681h-2.297a2.04 2.04 0 00-2.037 2.043 2.04 2.04 0 002.037 2.044h1.712l.055.066c-.102.34-.272 1.214.457 1.701.919.615-.51.974.357 2.51.868 1.537 1.736 1.178 2.246.359.51-.82.306-1.025.97-1.537.664-.512.766-1.383.102-2.1-.29-.313-.287-.684-.193-1.003.163-.205.289-.442.366-.7l.031-.039-.02.003a2.106 2.106 0 00.07-.74c.27.209.56.355.857.389 1.32.147.948-1.129 1.836-1.121.51.233.796.626.984 1.435.366 1.572.575.262 1.62-.786 1.044-1.048 1.357-.173 2.819 1.153s.888-.524.731-1.467c-.157-.944 1.88-.01 1.306-2.146-.575-2.135 1.149-.422 1.514-2.098.366-1.677-1.201-1.94-.731-3.25.47-1.31 1.785-2.061 2.037-.209.275 2.031 2.287 1.773 1.817-.218-.47-1.991-.13-1.981.654-2.505.783-.525-1.166-.788-.592-1.94zM39.39 20.007c-1.134.27-.731 2.205.627 2.046 1.357-.16 2.245-.055 2.82 1.203.574 1.258 2.558-1.467 1.514-2.83-1.044-1.362-.835-1.467-1.358-2.358-.522-.89-2.507 1.677-3.603 1.94zm2.432-4.866h-.108a.792.792 0 010-1.583h.108a.792.792 0 110 1.583zm-4.302 3.486a.798.798 0 01-.56-.233.8.8 0 01-.231-.56.8.8 0 01.231-.56.8.8 0 01.56-.23.8.8 0 01.56.23.797.797 0 01.233.56.796.796 0 01-.792.793zm-7.133 3.593a.793.793 0 01-.56-1.35.793.793 0 011.12 0 .795.795 0 01.232.559.797.797 0 01-.792.792zm9.693-4.574a.797.797 0 01-.56-.231.794.794 0 01.56-1.352.793.793 0 010 1.583zm2.288-4.574a.792.792 0 01-.345-1.505c.597-.288.968-.88.968-1.544a.792.792 0 111.584 0 3.316 3.316 0 01-1.863 2.97.79.79 0 01-.344.08z"}))},304:function(e,t,r){"use strict";r(235);var n=r(237);r.d(t,"a",(function(){return n.a}))},357:function(e,t,r){e.exports=r(22)(2971)},358:function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},359:function(e,t,r){"use strict";t.decode=t.parse=r(360),t.encode=t.stringify=r(361)},360:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var h,p,f,m,y=e[u].replace(a,"%20"),g=y.indexOf(r);g>=0?(h=y.substr(0,g),p=y.substr(g+1)):(h=y,p=""),f=decodeURIComponent(h),m=decodeURIComponent(p),n(s,f)?i(s[f])?s[f].push(m):s[f]=[s[f],m]:s[f]=m}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},361:function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),(function(s){var a=encodeURIComponent(n(s))+r;return i(e[s])?o(e[s],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[s]))})).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},362:function(e,t,r){!function(e){"use strict";function t(e){return e}function r(e){if(null==e)return t;var r,n,i=e.scale[0],o=e.scale[1],s=e.translate[0],a=e.translate[1];return function(e,t){t||(r=n=0);var c=2,l=e.length,u=new Array(l);for(u[0]=(r+=e[0])*i+s,u[1]=(n+=e[1])*o+a;c<l;)u[c]=e[c],++c;return u}}function n(e){var t,n=r(e.transform),i=1/0,o=i,s=-i,a=-i;function c(e){(e=n(e))[0]<i&&(i=e[0]),e[0]>s&&(s=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}function l(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(l);break;case"Point":c(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(c)}}for(t in e.arcs.forEach((function(e){for(var t,r=-1,c=e.length;++r<c;)(t=n(e[r],r))[0]<i&&(i=t[0]),t[0]>s&&(s=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])})),e.objects)l(e.objects[t]);return[i,o,s,a]}function i(e,t){var r=t.id,n=t.bbox,i=null==t.properties?{}:t.properties,s=o(e,t);return null==r&&null==n?{type:"Feature",properties:i,geometry:s}:null==n?{type:"Feature",id:r,properties:i,geometry:s}:{type:"Feature",id:r,bbox:n,properties:i,geometry:s}}function o(e,t){var n=r(e.transform),i=e.arcs;function o(e,t){t.length&&t.pop();for(var r=i[e<0?~e:e],o=0,s=r.length;o<s;++o)t.push(n(r[o],o));e<0&&function(e,t){for(var r,n=e.length,i=n-t;i<--n;)r=e[i],e[i++]=e[n],e[n]=r}(t,s)}function s(e){return n(e)}function a(e){for(var t=[],r=0,n=e.length;r<n;++r)o(e[r],t);return t.length<2&&t.push(t[0]),t}function c(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(c)}return function e(t){var r,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(e)};case"Point":r=s(t.coordinates);break;case"MultiPoint":r=t.coordinates.map(s);break;case"LineString":r=a(t.arcs);break;case"MultiLineString":r=t.arcs.map(a);break;case"Polygon":r=l(t.arcs);break;case"MultiPolygon":r=t.arcs.map(l);break;default:return null}return{type:n,coordinates:r}}(t)}function s(e,t){var r={},n={},i={},o=[],s=-1;function a(e,t){for(var n in e){var i=e[n];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){r[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(r,n){var i,o=e.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++s],t[s]=r,t[n]=i)})),t.forEach((function(t){var r,o,s=function(t){var r,n=e.arcs[t<0?~t:t],i=n[0];return e.transform?(r=[0,0],n.forEach((function(e){r[0]+=e[0],r[1]+=e[1]}))):r=n[n.length-1],t<0?[r,i]:[i,r]}(t),a=s[0],c=s[1];if(r=i[a])if(delete i[r.end],r.push(t),r.end=c,o=n[c]){delete n[o.start];var l=o===r?r:r.concat(o);n[l.start=r.start]=i[l.end=o.end]=l}else n[r.start]=i[r.end]=r;else if(r=n[c])if(delete n[r.start],r.unshift(t),r.start=a,o=i[a]){delete i[o.end];var u=o===r?r:o.concat(r);n[u.start=o.start]=i[u.end=r.end]=u}else n[r.start]=i[r.end]=r;else n[(r=[t]).start=a]=i[r.end=c]=r})),a(i,n),a(n,i),t.forEach((function(e){r[e<0?~e:e]||o.push([e])})),o}function a(e,t,r){var n,i,o;if(arguments.length>1)n=function(e,t,r){var n,i=[],o=[];function s(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:n})}function a(e){e.forEach(s)}function c(e){e.forEach(a)}function l(e){e.forEach(c)}function u(e){switch(n=e,e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":c(e.arcs);break;case"MultiPolygon":l(e.arcs)}}return u(t),o.forEach(null==r?function(e){i.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,r);else for(i=0,n=new Array(o=e.arcs.length);i<o;++i)n[i]=i;return{type:"MultiLineString",arcs:s(e,n)}}function c(e,t){var r={},n=[],i=[];function a(e){e.forEach((function(t){t.forEach((function(t){(r[t=t<0?~t:t]||(r[t]=[])).push(e)}))})),n.push(e)}function c(t){return function(e){for(var t,r=-1,n=e.length,i=e[n-1],o=0;++r<n;)t=i,i=e[r],o+=t[0]*i[1]-t[1]*i[0];return Math.abs(o)}(o(e,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach((function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}})),n.forEach((function(e){if(!e._){var t=[],n=[e];for(e._=1,i.push(t);e=n.pop();)t.push(e),e.forEach((function(e){e.forEach((function(e){r[e<0?~e:e].forEach((function(e){e._||(e._=1,n.push(e))}))}))}))}})),n.forEach((function(e){delete e._})),{type:"MultiPolygon",arcs:i.map((function(t){var n,i=[];if(t.forEach((function(e){e.forEach((function(e){e.forEach((function(e){r[e<0?~e:e].length<2&&i.push(e)}))}))})),(n=(i=s(e,i)).length)>1)for(var o,a,l=1,u=c(i[0]);l<n;++l)(o=c(i[l]))>u&&(a=i[0],i[0]=i[l],i[l]=a,u=o);return i})).filter((function(e){return e.length>0}))}}function l(e,t){for(var r=0,n=e.length;r<n;){var i=r+n>>>1;e[i]<t?r=i+1:n=i}return r}function u(e){if(null==e)return t;var r,n,i=e.scale[0],o=e.scale[1],s=e.translate[0],a=e.translate[1];return function(e,t){t||(r=n=0);var c=2,l=e.length,u=new Array(l),h=Math.round((e[0]-s)/i),p=Math.round((e[1]-a)/o);for(u[0]=h-r,r=h,u[1]=p-n,n=p;c<l;)u[c]=e[c],++c;return u}}e.bbox=n,e.feature=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return i(e,t)}))}:i(e,t)},e.merge=function(e){return o(e,c.apply(this,arguments))},e.mergeArcs=c,e.mesh=function(e){return o(e,a.apply(this,arguments))},e.meshArcs=a,e.neighbors=function(e){var t={},r=e.map((function(){return[]}));function n(e,r){e.forEach((function(e){e<0&&(e=~e);var n=t[e];n?n.push(r):t[e]=[r]}))}function i(e,t){e.forEach((function(e){n(e,t)}))}var o={LineString:n,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach((function(e){i(e,t)}))}};for(var s in e.forEach((function e(t,r){"GeometryCollection"===t.type?t.geometries.forEach((function(t){e(t,r)})):t.type in o&&o[t.type](t.arcs,r)})),t)for(var a=t[s],c=a.length,u=0;u<c;++u)for(var h=u+1;h<c;++h){var p,f=a[u],m=a[h];(p=r[f])[s=l(p,m)]!==m&&p.splice(s,0,m),(p=r[m])[s=l(p,f)]!==f&&p.splice(s,0,f)}return r},e.quantize=function(e,t){if(e.transform)throw new Error("already quantized");if(t&&t.scale)c=e.bbox;else{if(!((r=Math.floor(t))>=2))throw new Error("n must be ≥2");var r,i=(c=e.bbox||n(e))[0],o=c[1],s=c[2],a=c[3];t={scale:[s-i?(s-i)/(r-1):1,a-o?(a-o)/(r-1):1],translate:[i,o]}}var c,l,h=u(t),p=e.objects,f={};function m(e){return h(e)}function y(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(y)};break;case"Point":t={type:"Point",coordinates:m(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(m)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}for(l in p)f[l]=y(p[l]);return{type:"Topology",bbox:c,transform:t,objects:f,arcs:e.arcs.map((function(e){var t,r=0,n=1,i=e.length,o=new Array(i);for(o[0]=h(e[0],0);++r<i;)((t=h(e[r],r))[0]||t[1])&&(o[n++]=t);return 1===n&&(o[n++]=[0,0]),o.length=n,o}))}},e.transform=r,e.untransform=u,Object.defineProperty(e,"__esModule",{value:!0})}(t)},363:function(e,t,r){const n=r(158),i=r(247),{safeRe:o,t:s}=r(246);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=o[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),o[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[s.COERCERTL].lastIndex=-1}else r=e.match(o[s.COERCE]);return null===r?null:i(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},364:function(e,t){const r=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?r:e:n},365:function(e,t){const r=/^[0-9]+$/,n=(e,t)=>{const n=r.test(e),i=r.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},366:function(e,t,r){const n=r(247);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},367:function(e,t,r){const n=r(158);e.exports=(e,t)=>new n(e,t).major},368:function(e,t,r){const n=r(158);e.exports=(e,t)=>new n(e,t).minor},369:function(e,t,r){"use strict";const n=r(370),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),h=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),m=()=>1,y=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(g(e,t)){if(v(e,n),!e[a])return}else r&&(e[f]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},d=e=>{if(e[o]>e[i])for(let t=e[h].tail;e[o]>e[i]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[o]-=r.length,e[p].delete(r.key),e[h].removeNode(t)}};class Entry{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const b=(e,t,r,n)=>{let i=r.value;g(e,i)&&(v(e,r),e[a]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class LRUCache{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||m;if(this[s]="function"!=typeof t?m:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,d(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,d(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=m),e!==this[s]&&(this[s]=e,this[o]=0,this[h].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),d(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){const n=r.prev;b(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){const n=r.next;b(this,e,r,t),r=n}}keys(){return this[h].toArray().map((e=>e.key))}values(){return this[h].toArray().map((e=>e.value))}reset(){this[l]&&this[h]&&this[h].length&&this[h].forEach((e=>this[l](e.key,e.value))),this[p]=new Map,this[h]=new n,this[o]=0}dump(){return this[h].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[p].has(e)){if(a>this[i])return v(this,this[p].get(e)),!1;const s=this[p].get(e).value;return this[l]&&(this[u]||this[l](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),d(this),!0}const f=new Entry(e,t,a,n,r);return f.length>this[i]?(this[l]&&this[l](e,t),!1):(this[o]+=f.length,this[h].unshift(f),this[p].set(e,this[h].head),d(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!g(this,t)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){const e=this[h].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>y(this,t,!1)))}}},370:function(e,t,r){"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r,n){if(!(this instanceof i))return new i(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=i,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n=arguments[e],(r=this).tail=new i(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++;var r,n;return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)n=arguments[e],(r=this).head=new i(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++;var r,n;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var s,a,c,l,u=[];for(n=0;o&&n<t;n++)u.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<r.length;n++)s=this,a=o,c=r[n],l=void 0,null===(l=a===s.head?new i(c,null,a,s):new i(c,a,a.next,s)).next&&(s.tail=l),null===l.prev&&(s.head=l),s.length++,o=l;return u},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(371)(n)}catch(e){}},371:function(e,t,r){"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},372:function(e,t,r){"use strict";(function(t){var n=r(373);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(374),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,l="foo"===function(){}.name;function u(e){return Object.prototype.toString.call(e)}function h(e){return!o(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var p=e.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function m(e){if(s.isFunction(e)){if(l)return e.name;var t=e.toString().match(f);return t&&t[1]}}function y(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(l||!s.isFunction(e))return s.inspect(e);var t=m(e);return"[Function"+(t?": "+t:"")+"]"}function d(e,t,r,n,i){throw new p.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function v(e,t){e||d(e,!0,t,"==",p.ok)}function b(e,t,r,n){if(e===t)return!0;if(o(e)&&o(t))return 0===i(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(h(e)&&h(t)&&u(e)===u(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===i(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=E(e),o=E(t);if(i&&!o||!i&&o)return!1;if(i)return b(e=c.call(e),t=c.call(t),r);var a,l,u=w(e),h=w(t);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),l=u.length-1;l>=0;l--)if(u[l]!==h[l])return!1;for(l=u.length-1;l>=0;l--)if(!b(e[a=u[l]],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function E(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function S(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&d(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!e&&i&&!r;if((!e&&s.isError(i)&&o&&S(i,r)||a)&&d(i,r,"Got unwanted exception"+n),e&&i&&r&&!S(i,r)||!e&&i)throw i}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=y(g(this.actual),128)+" "+this.operator+" "+y(g(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=m(t),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(p.AssertionError,Error),p.fail=d,p.ok=v,p.equal=function(e,t,r){e!=t&&d(e,t,r,"==",p.equal)},p.notEqual=function(e,t,r){e==t&&d(e,t,r,"!=",p.notEqual)},p.deepEqual=function(e,t,r){b(e,t,!1)||d(e,t,r,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,r){b(e,t,!0)||d(e,t,r,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,r){b(e,t,!1)&&d(e,t,r,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&d(t,r,n,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,r){e!==t&&d(e,t,r,"===",p.strictEqual)},p.notStrictEqual=function(e,t,r){e===t&&d(e,t,r,"!==",p.notStrictEqual)},p.throws=function(e,t,r){_(!0,e,t,r)},p.doesNotThrow=function(e,t,r){_(!1,e,t,r)},p.ifError=function(e){if(e)throw e},p.strict=n((function e(t,r){t||d(t,!0,r,"==",e)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var w=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(101))},373:function(e,t,r){e.exports=r(22)(1168)},374:function(e,t,r){e.exports=r(22)(2972)},81:function(e,t,r){"use strict";r.r(t),r.d(t,"getKibanaTileMap",(function(){return o})),r.d(t,"getEmsFileLayers",(function(){return s})),r.d(t,"getEmsTmsServices",(function(){return a})),r.d(t,"isRetina",(function(){return h}));var n=r(5),i=r(20);function o(){const e=Object(n.A)();return e.config.tilemap?e.config.tilemap:{}}async function s(){return Object(n.l)().isEMSEnabled()?(await u()).getFileLayers():[]}async function a(){return Object(n.l)().isEMSEnabled()?(await u()).getTMSServices():[]}let c,l=null;async function u(){l||(l=new Promise((async(e,t)=>{try{e(await Object(n.A)().createEMSClient())}catch(e){t(e)}})));const e=await l,t=Object(i.c)();return c!==t&&(c=t,e.addQueryParams({license:t||""})),e}function h(){return 2===window.devicePixelRatio}},98:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(1),i=r(5);function o(){const e=Object(i.l)();return e.isIncludeElasticMapsService()?e.isEMSUrlSet()?e.hasOnPremLicense()?n.i18n.translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:e.getEMSRoot()}}):n.i18n.translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."}):n.i18n.translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."}):n.i18n.translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}}}]);