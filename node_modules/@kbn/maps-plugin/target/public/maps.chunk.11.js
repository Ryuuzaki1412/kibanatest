/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[11],{175:function(e,t,a){"use strict";e.exports=a(176)},176:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(156);a(52),a(143),a(144);var i=n.default({key:"css"}),s=i.flush,r=i.hydrate,o=i.cx,l=i.merge,c=i.getRegisteredStyles,d=i.injectGlobal,u=i.keyframes,p=i.css,b=i.sheet,g=i.cache;t.cache=g,t.css=p,t.cx=o,t.flush=s,t.getRegisteredStyles=c,t.hydrate=r,t.injectGlobal=d,t.keyframes=u,t.merge=l,t.sheet=b},238:function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},239:function(e,t,a){e.exports=a.p+"1cbd62546f764080f7071e03889e9de3.svg"},324:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(54),i=a(325),s=n.__importDefault(a(327));t.default=function(e,t){s.default(e,t,i.isDeepEqual)}},325:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(54).__importDefault(a(326));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},326:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(i=n;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,s[i]))return!1;for(i=n;0!=i--;){var r=s[i];if(!("_owner"===r&&t.$$typeof||e(t[r],a[r])))return!1}return!0}return t!=t&&a!=a}},327:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(4);t.default=function(e,t,a){var i=n.useRef(void 0);i.current&&a(t,i.current)||(i.current=t),n.useEffect(e,i.current)}},334:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(335);case"v8light":return a(337)}},335:function(e,t,a){var n=a(87),i=a(336);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},336:function(e,t,a){(t=a(88)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#141519}.kbnSolutionNav{background:linear-gradient(160deg,#3437414d,#3437414d 32px,#f000 0),linear-gradient(175deg,#3437414d,#3437414d 16px,#f000 0);display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px) and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px) and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},337:function(e,t,a){var n=a(87),i=a(338);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},338:function(e,t,a){(t=a(88)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#fafbfd}.kbnSolutionNav{background:linear-gradient(160deg,#d3dae64d,#d3dae64d 32px,#f000 0),linear-gradient(175deg,#d3dae64d,#d3dae64d 16px,#f000 0);display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px) and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px) and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},339:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(340);case"v8light":return a(342)}},340:function(e,t,a){var n=a(87),i=a(341);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},341:function(e,t,a){var n=a(88),i=a(238),s=a(239);t=n(!1);var r=i(s);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125)}.kbnSolutionAvatar--xxl{background:#1d1e24 url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},342:function(e,t,a){var n=a(87),i=a(343);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},343:function(e,t,a){var n=a(88),i=a(238),s=a(239);t=n(!1);var r=i(s);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d}.kbnSolutionAvatar--xxl{background:#fff url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},344:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(345);case"v8light":return a(347)}},345:function(e,t,a){var n=a(87),i=a(346);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},346:function(e,t,a){(t=a(88)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#1d1e24!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},347:function(e,t,a){var n=a(87),i=a(348);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},348:function(e,t,a){(t=a(88)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#fff!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},349:function(e,t,a){e.exports=a.p+"baad30acfe492601d08a0e839c9bb3f5.svg"},350:function(e,t,a){"use strict";const n=a(351),i=a(352),s=a(353);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?i(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function b(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const i="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);n[t]=i};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){let[e,r]=s(t.decode?i.replace(/\+/g," "):i,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),a(l(e,t),r,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else n[e]=p(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=u,t.parse=b,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const i=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[",i,"]"].join("")]:[...a,[o(t,e),"[",o(i,e),"]=",o(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[o(t,e),"=",o(n,e)].join("")]:[[a,o(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,o(t,e)]:[...a,[o(t,e),"=",o(n,e)].join("")]}}(t),i={};for(const t of Object.keys(e))a(t)||(i[t]=e[t]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map((a=>{const i=e[a];return void 0===i?"":null===i?o(a,t):Array.isArray(i)?i.reduce(n(a),[]).join("&"):o(a,t)+"="+o(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=s(e,"#");return Object.assign({url:a.split("?")[0]||"",query:b(u(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=d(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),r=Object.assign(s,e.query);let l=t.stringify(r,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${n}${l}${c}`}},351:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},352:function(e,t,a){"use strict";var n="%[a-f0-9]{2}",i=new RegExp("("+n+")|([^%]+?)","gi"),s=new RegExp("("+n+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],r(a),r(n))}function o(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(i)||[],a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=s.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=o(a[0]);n!==a[0]&&(t[a[0]]=n)}a=s.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),r=0;r<i.length;r++){var l=i[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},353:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},615:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Xt}));var n=a(4),i=a.n(n),s=a(8),r=a(47),o=a(23),l=a.n(o);const c={services:{}},d=Object(n.createContext)(c);var u=a(324),p=a.n(u),b=a(3);const g=({children:e,component:t,render:a,...s})=>{const o=Object(n.useMemo)((()=>{if(t)return e=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(m,null),Object(b.jsx)(t,e))}),[t]);if(o)return Object(b.jsx)(r.Route,l()({},s,{component:o}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(b.jsx)(r.Route,l()({},s,{render:e=>Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(m,null),t(e))}))}return Object(b.jsx)(r.Route,s,Object(b.jsx)(m,null),e)},m=()=>{const{executionContext:e}=Object(n.useContext)(d).services,t=Object(r.useRouteMatch)();return function(e,t){p()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var h=a(57);const j=({children:e,...t})=>Object(b.jsx)(r.Router,t,Object(b.jsx)(h.CompatRouter,null,e));var f=a(40),x=a.n(f);const O=({legacySwitch:e=!0,children:t})=>{const a=Object(r.useRouteMatch)();return e?Object(b.jsx)(r.Switch,null,t):Object(b.jsx)(h.Routes,null,n.Children.map(t,(e=>{if(i.a.isValidElement(e)&&e.type===g){var n;const s=Object(f.replace)(null==e?void 0:e.props.path,a.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(b.jsx)(h.Route,{path:s,element:Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(m,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(b.jsx)(e.props.component,null)||r&&r()||t)})}return e})))};var v=a(1),y=a(317),S=a(45),C=a(41),E=a(240),I=a.n(E),k=a(15),T=a(44),F=a.n(T);a(334),a(339);const L=e=>{const{className:t,size:a,...n}=e,i={};return(e=>void 0===e.iconType)(e)&&(i.iconType=`logo${e.name.replace(/\s+/g,"")}`),Object(b.jsx)(k.EuiAvatar,l()({className:F()("kbnSolutionAvatar",{[`kbnSolutionAvatar--${a}`]:a},t),size:"xxl"===a?"xl":a,iconSize:a,color:"plain"},n,i))};a(344);const M=v.i18n.translate("sharedUXPackages.solutionNav.collapsibleLabel",{defaultMessage:"Collapse side navigation"}),w=v.i18n.translate("sharedUXPackages.solutionNav.openLabel",{defaultMessage:"Open side navigation"}),N=({className:e,isCollapsed:t,...a})=>{const n=F()("kbnSolutionNavCollapseButton",{"kbnSolutionNavCollapseButton-isCollapsed":t},e);return Object(b.jsx)(k.EuiButtonIcon,l()({className:n,size:"s",color:"text",iconType:t?"menuRight":"menuLeft","aria-label":t?w:M,title:t?w:M},a))},_=(e,t)=>e.map((e=>(e.tabIndex=t?-1:void 0,e.items=e.items&&_(e.items,t),e))),P=Object(k.htmlIdGenerator)("SolutionNav"),A=({children:e,headingProps:t,icon:a,isOpenOnDesktop:s=!1,items:r,mobileBreakpoints:o=["xs","s"],closeFlyoutButtonPosition:c="outside",name:d,onCollapse:u,canBeCollapsed:p=!0,...g})=>{const m=Object(k.useIsWithinBreakpoints)(o),h=Object(k.useIsWithinBreakpoints)(["m"]),j=Object(k.useIsWithinMinBreakpoint)("l"),[f,x]=Object(n.useState)(!1),O=j&&!s&&p,y=!!e,S=F()("kbnSolutionNav",{"kbnSolutionNav--hidden":O}),E=(null==t?void 0:t.id)||P("heading"),I=(null==t?void 0:t.element)||"h2",T=Object(b.jsx)(k.EuiTitle,{size:"xs",id:E,"data-test-subj":null==t?void 0:t["data-test-subj"],className:"kbnSolutionNav__title"},Object(b.jsx)(I,null,a&&Object(b.jsx)(L,{className:"kbnSolutionNav__titleAvatar",iconType:a,name:d}),Object(b.jsx)("strong",null,Object(b.jsx)(C.FormattedMessage,{id:"sharedUXPackages.solutionNav.mobileTitleText",defaultMessage:"{solutionName} {menuText}",values:{solutionName:d||"Navigation",menuText:m?v.i18n.translate("sharedUXPackages.solutionNav.menuText",{defaultMessage:"menu"}):""}})))),M=Object(n.useMemo)((()=>y?e:r?Object(b.jsx)(k.EuiSideNav,l()({"aria-labelledby":E,"aria-hidden":O,items:_(r,O),mobileBreakpoints:[]},g)):null),[e,E,y,O,r,g]);return Object(b.jsx)(i.a.Fragment,null,m&&Object(b.jsx)(k.EuiCollapsibleNavGroup,{className:S,paddingSize:"none",background:"none",title:T,titleElement:"span",isCollapsible:p,initialIsOpen:!1},Object(b.jsx)(k.EuiPanel,{color:"transparent",paddingSize:"s"},M)),h&&Object(b.jsx)(i.a.Fragment,null,(f||!p)&&Object(b.jsx)(k.EuiFlyout,{ownFocus:!1,outsideClickCloses:!0,onClose:()=>x(!1),side:"left",size:248,closeButtonPosition:c,className:"kbnSolutionNav__flyout",hideCloseButton:!p},Object(b.jsx)("div",{className:S},T,Object(b.jsx)(k.EuiSpacer,{size:"l"}),M)),p&&Object(b.jsx)(N,{isCollapsed:!0,onClick:()=>{x(!f)}})),j&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)("div",{className:S},T,Object(b.jsx)(k.EuiSpacer,{size:"l"}),M),p&&Object(b.jsx)(N,{isCollapsed:!s,onClick:u})))};var D=a(175);const R="solutionNavIsCollapsed",B=e=>{const t=t=>{var a;const i=Object(k.useIsWithinBreakpoints)(["m"]),s=Object(k.useIsWithinMinBreakpoint)("l"),[r,o]=Object(n.useState)(!JSON.parse(String(localStorage.getItem(R)))),{solutionNav:c,children:d,...u}=t,{euiTheme:p}=Object(k.useEuiTheme)(),{canBeCollapsed:g=!0}=c,m=i||g&&s&&!r,h=(e=>Object(D.css)("flex:0 1 0;overflow:hidden;",k.euiCanAnimate,"{transition:min-width ",e.animation.fast," ",e.animation.resistance,";}",""))(p),j=F()("kbnSolutionNav__sidebar",{"kbnSolutionNav__sidebar--shrink":m},null===(a=t.pageSideBarProps)||void 0===a?void 0:a.className,h),f=Object(b.jsx)(A,l()({isOpenOnDesktop:r,onCollapse:()=>{o(!r),localStorage.setItem(R,JSON.stringify(r))}},c)),x={paddingSize:"none",...t.pageSideBarProps,minWidth:m?p.size.xxl:void 0,className:j};return Object(b.jsx)(e,l()({},u,{pageSideBar:f,pageSideBarProps:x}),d)};var a;return t.displayName=`WithSolutionNavBar(${a=e,a.displayName||a.name||"UnnamedComponent"})`,t};var z=a(174),U=a.n(z);const W=i.a.createContext(null),G=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(b.jsx)(W.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},V=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,i=U()(n,void 0);return Object(b.jsx)(W.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)};a(58);const J={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},$=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const s=Object(n.useRef)(null),r=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const i=((e,t)=>{let a=e;do{var n,i;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(i=a)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const s=i.href,r=""===i.target||"_self"===i.target,o=0===e.button;s&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(i.href))})({event:e,currentAppId:a,navigateToUrl:t,container:s.current})),[a,t]);return Object(b.jsx)("div",l()({onClick:r,ref:s,css:J,"data-test-subj":"kbnRedirectAppLink"},i),e)},q=({children:e,...t})=>Object(b.jsx)($,l()({},function(){const e=Object(n.useContext)(W);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),H=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,i=Object(b.jsx)(q,n,e);return Object(b.jsx)(V,{coreStart:a},i)}const{navigateToUrl:a,currentAppId:n,...i}=t,s=Object(b.jsx)(q,i,e);return Object(b.jsx)(G,{currentAppId:n,navigateToUrl:a},s)};var Q=a(349),K=a.n(Q);const X=v.i18n.translate("sharedUXPackages.card.noData.noPermission.title",{defaultMessage:"Contact your administrator"}),Y=v.i18n.translate("sharedUXPackages.card.noData.noPermission.description",{defaultMessage:"This integration is not yet enabled. Your administrator has the required permissions to turn it on."}),Z=v.i18n.translate("sharedUXPackages.card.noData.title",{defaultMessage:"Add Elastic Agent"}),ee=v.i18n.translate("sharedUXPackages.card.noData.description",{defaultMessage:"Use Elastic Agent for a simple, unified way to collect data from your machines."}),te=()=>Object(b.jsx)(k.EuiImage,{size:"fullWidth",style:{width:"max(100%, 360px)",height:240,objectFit:"cover",background:"aliceblue"},url:K.a,alt:""}),ae=({title:e,description:t,canAccessFleet:a,button:n,...i})=>Object(b.jsx)(k.EuiCard,l()({css:{maxWidth:400,marginInline:"auto"},paddingSize:"l",title:a?Object(b.jsx)(k.EuiScreenReaderOnly,null,Object(b.jsx)("span",null,e||Z)):Object(b.jsx)(k.EuiTextColor,{color:"default"},X),description:a?t||ee:Object(b.jsx)(k.EuiTextColor,{color:"default"},Y),footer:(()=>{if(a)return n&&"string"!=typeof n?n:Object(b.jsx)(k.EuiButton,{fill:!0},n||e||Z)})(),isDisabled:!a,image:Object(b.jsx)(te,null)},i)),ne=i.a.createContext(null),ie=({href:e,category:t,description:a,...i})=>{var s;const{canAccessFleet:r,addBasePath:o}=function(){const e=Object(n.useContext)(ne);if(!e)throw new Error("NoDataCard Context is missing.  Ensure your component or React root is wrapped with NoDataCardContext.");return e}(),c=Object(n.useMemo)((()=>{if(e)return e;const a="/app/integrations/browse";return o(t?`${a}/${t}`:a)}),[o,e,t]);return Object(b.jsx)(q,null,Object(b.jsx)(ae,l()({},i,{href:c,canAccessFleet:null!==(s=i.canAccessFleet)&&void 0!==s?s:r,description:a})))},se=({action:e})=>{const t=Object.keys(e);if(1!==t.length)return null;const a=t[0],n="elasticAgent"===a?"empty-page-agent-action":`empty-page-${a}-action`;return Object(b.jsx)(ie,l()({key:n},e[a]))},re=({solution:e,logo:t,action:a,docsLink:n,pageTitle:i,pageDescription:s,className:r})=>{const o=i||v.i18n.translate("sharedUXPackages.noDataPage.welcomeTitle",{defaultMessage:"Welcome to Elastic {solution}!",values:{solution:e}}),l=n?Object(b.jsx)(k.EuiLink,{href:n,target:"_blank"},Object(b.jsx)(C.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro.link",defaultMessage:"learn more"})):null,c=null!=s?s:l?Object(b.jsx)(C.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro",defaultMessage:"Add your data to get started, or {link} about {solution}.",values:{solution:e,link:l}}):Object(b.jsx)(C.FormattedMessage,{id:"sharedUXPackages.noDataPage.introNoDocLink",defaultMessage:"Add your data to get started."});return Object(b.jsx)(k.EuiPageTemplate.Section,{alignment:"center",grow:!0,className:F()("kbnNoDataPageContents",r),"data-test-subj":"kbnNoDataPage"},Object(b.jsx)(k.EuiText,{textAlign:"center"},Object(b.jsx)(L,{name:e,iconType:t||`logo${e}`,size:"xxl"}),Object(b.jsx)(k.EuiSpacer,{size:"l"}),Object(b.jsx)("h1",null,o),Object(b.jsx)(k.EuiTextColor,{color:"subdued"},Object(b.jsx)("p",null,c))),Object(b.jsx)(k.EuiSpacer,{size:"xxl"}),Object(b.jsx)(se,{action:a}))},oe=e=>{const{className:t,noDataConfig:a,pageSideBar:n,pageSideBarProps:i,...s}=e;if(!a)return null;let r;n&&(r=Object(b.jsx)(k.EuiPageTemplate.Sidebar,i,n));const o=((e,t)=>F()("kbnPageTemplate","",t||""))(0,t);return Object(b.jsx)(k.EuiPageTemplate,l()({className:o,restrictWidth:950,panelled:!1,offset:0,minHeight:0},s),r,Object(b.jsx)(re,a))},le=B(oe),ce=({className:e,pageHeader:t,children:a,isEmptyState:n,pageSideBar:i,pageSideBarProps:s,...r})=>{let o,c;if(n&&t&&!a){const{iconType:e,pageTitle:n,description:i,rightSideItems:s}=t,r=n?Object(b.jsx)("h1",null,n):void 0,o=i?Object(b.jsx)("p",null,i):void 0;a=Object(b.jsx)(k.EuiPageTemplate.EmptyPrompt,{iconType:e,iconColor:"",title:r,body:o,actions:s})}else t&&(o=Object(b.jsx)(k.EuiPageTemplate.Header,t));if(i){const e={...s};e.sticky=!0,c=Object(b.jsx)(k.EuiPageTemplate.Sidebar,e,i)}const d=((e,t)=>F()("kbnPageTemplate","",t||""))(0,e);return Object(b.jsx)(k.EuiPageTemplate,l()({className:d,offset:0,minHeight:o?"calc(100vh - var(--euiFixedHeadersOffset, 0))":0,grow:!o&&void 0},r),c,o,a)},de=B(ce),ue=Object.assign((({className:e,children:t,solutionNav:a,noDataConfig:n,...i})=>n&&a?Object(b.jsx)(le,{"data-test-subj":i["data-test-subj"],className:e,noDataConfig:n,solutionNav:a}):n?Object(b.jsx)(oe,{"data-test-subj":i["data-test-subj"],className:e,noDataConfig:n}):a?Object(b.jsx)(de,l()({className:e,solutionNav:a,children:t},i)):Object(b.jsx)(ce,l()({className:e,children:t},i))),{Sidebar:k.EuiPageTemplate.Sidebar,Header:k.EuiPageTemplate.Header,Section:k.EuiPageTemplate.Section,BottomBar:k.EuiPageTemplate.BottomBar,EmptyPrompt:k.EuiPageTemplate.EmptyPrompt}),pe=i.a.createContext(null),be=({children:e,...t})=>Object(b.jsx)(pe.Provider,{value:t},e),ge=({children:e,...t})=>{const{core:a,toMountPoint:i,savedObjectsTagging:s}=t,{openFlyout:r}=a.overlays,{theme$:o}=a.theme,l=Object(n.useMemo)((()=>({references:e})=>{if(null==s||!s.ui.components.TagList)return null;const t=s.ui.components.TagList;return Object(b.jsx)(t,{object:{references:e}})}),[null==s?void 0:s.ui.components.TagList]),c=Object(n.useCallback)(((e,t)=>r(i(e,{theme$:o}),t)),[r,i,o]);return Object(b.jsx)(be,{openFlyout:c,notifyError:(e,t)=>{a.notifications.toasts.addDanger({title:i(e),text:t})},TagList:l,TagSelector:null==s?void 0:s.ui.components.SavedObjectSaveModalTagSelector},e)},me=e=>{const[t,s]=Object(n.useState)(null),r=Object(n.useCallback)((async()=>{const{ContentEditorFlyoutContentContainer:e}=await a.e(27).then(a.bind(null,617));s((()=>e))}),[]);return Object(n.useEffect)((()=>{r()}),[r]),t?Object(b.jsx)(t,e):Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiFlyoutHeader,null),Object(b.jsx)(k.EuiFlyoutBody,null),Object(b.jsx)(k.EuiFlyoutFooter,null))};const he=i.a.createContext(null),je=({children:e,...t})=>Object(b.jsx)(he.Provider,{value:t},e),fe=({children:e,...t})=>{var a;const{core:i,toMountPoint:s,savedObjectsTagging:r,FormattedRelative:o}=t,l=Object(n.useMemo)((()=>{if(r)return async e=>{const t=await r.ui.parseSearchQuery(e,{useName:!0});return{searchQuery:t.searchTerm,references:t.tagReferences,referencesToExclude:t.tagReferencesToExclude}}}),[r]),c=Object(n.useMemo)((()=>({references:e,onClick:t,tagRender:a})=>{if(null==r||!r.ui.components.TagList)return null;const n=r.ui.components.TagList;return Object(b.jsx)(n,{object:{references:e},onClick:t,tagRender:a})}),[null==r?void 0:r.ui.components.TagList]),d=Object(n.useCallback)((e=>null!=r&&r.ui.getTagIdsFromReferences?r.ui.getTagIdsFromReferences(e):[]),[null==r?void 0:r.ui]),u=Object(n.useCallback)((()=>null!=r&&r.ui.getTagList?r.ui.getTagList():[]),[null==r?void 0:r.ui]),p=Object(n.useCallback)((e=>d(e).length>0),[d]);return Object(b.jsx)(V,{coreStart:i},Object(b.jsx)(ge,{core:i,toMountPoint:s,savedObjectsTagging:r},Object(b.jsx)(je,{canEditAdvancedSettings:Boolean(null===(a=i.application.capabilities.advancedSettings)||void 0===a?void 0:a.save),getListingLimitSettingsUrl:()=>i.application.getUrlForApp("management",{path:"/kibana/settings?query=savedObjects:listingLimit"}),notifyError:(e,t)=>{i.notifications.toasts.addDanger({title:s(e),text:t})},searchQueryParser:l,DateFormatterComp:e=>Object(b.jsx)(o,e),currentAppId$:i.application.currentAppId$,navigateToUrl:i.application.navigateToUrl,getTagList:u,TagList:c,itemHasTags:p,getTagIdsFromReferences:d,getTagManagementUrl:()=>i.http.basePath.prepend("/app/management/kibana/tags")},e)))};function xe(){const e=Object(n.useContext)(he);if(!e)throw new Error("TableListViewContext is missing. Ensure your component or React root is wrapped with <TableListViewProvider /> or <TableListViewKibanaProvider />.");return e}const Oe={nameAscSort:v.i18n.translate("contentManagement.tableList.listing.tableSortSelect.nameAscLabel",{defaultMessage:"Name A-Z"}),nameDescSort:v.i18n.translate("contentManagement.tableList.listing.tableSortSelect.nameDescLabel",{defaultMessage:"Name Z-A"}),updatedAtAscSort:v.i18n.translate("contentManagement.tableList.listing.tableSortSelect.updatedAtAscLabel",{defaultMessage:"Least recently updated"}),updatedAtDescSort:v.i18n.translate("contentManagement.tableList.listing.tableSortSelect.updatedAtDescLabel",{defaultMessage:"Recently updated"}),headerSort:v.i18n.translate("contentManagement.tableList.listing.tableSortSelect.headerLabel",{defaultMessage:"Sort by"})};function ve({tableSort:e,hasUpdatedAtMetadata:t,onChange:a}){var s,r;const{euiTheme:o}=Object(k.useEuiTheme)(),[l,c]=Object(n.useState)(!1),[d,u]=Object(n.useState)((()=>{let e=[{label:Oe.nameAscSort,column:"attributes.title",direction:"asc",append:Object(b.jsx)(k.EuiIcon,{type:"sortUp"})},{label:Oe.nameDescSort,column:"attributes.title",direction:"desc",append:Object(b.jsx)(k.EuiIcon,{type:"sortDown"})}];return t&&(e=e.concat([{label:Oe.updatedAtDescSort,column:"updatedAt",direction:"desc",append:Object(b.jsx)(k.EuiIcon,{type:"sortDown"})},{label:Oe.updatedAtAscSort,column:"updatedAt",direction:"asc",append:Object(b.jsx)(k.EuiIcon,{type:"sortUp"})}])),e})),p=null!==(s=null===(r=d.find((({checked:e})=>"on"===e)))||void 0===r?void 0:r.label)&&void 0!==s?s:"",g=Object(b.css)("border-bottom:",o.border.thin,";font-weight:",600,";padding:",o.size.s,";",""),m=Object(b.jsx)(k.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{c((e=>!e))},"data-test-subj":"tableSortSelectBtn",grow:!0},p);return Object(n.useEffect)((()=>{u((t=>t.map((t=>{const a=t.column===e.field&&t.direction===e.direction?"on":void 0;return{...t,checked:a}}))))}),[e]),Object(b.jsx)(k.EuiPopover,{button:m,isOpen:l,closePopover:()=>{c(!1)},panelPaddingSize:"none",anchorPosition:"downCenter",panelProps:{css:{width:18*o.base}}},Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiText,{css:g},Oe.headerSort),Object(b.jsx)(k.EuiSelectable,{singleSelection:!0,"aria-label":"some aria label",options:d,onChange:e=>{u(e);const t=e.find((({checked:e})=>"on"===e));t&&a&&a(t.column,t.direction)},"data-test-subj":"sortSelect"},(e=>e))))}const ye=navigator.platform.toLowerCase().indexOf("mac")>=0?"⌘":"^",Se={name:"pit38s",styles:"height:auto"},Ce={name:"1d3w5wq",styles:"width:100%"},Ee=({isPopoverOpen:e,isInUse:t,options:a,totalActiveFilters:n,onFilterButtonClick:s,onSelectChange:r,closePopover:o,clearTagSelection:c})=>{const{euiTheme:d}=Object(k.useEuiTheme)(),{navigateToUrl:u,currentAppId$:p,getTagManagementUrl:g}=xe(),m=a.length>10,h=Object(b.css)("padding:",d.size.s,";border-bottom:",d.border.thin,";",""),j=Object(b.css)("height:",d.size.xxxl,";","");let f={searchable:!1};return m&&(f={searchable:!0,searchProps:{compressed:!0}}),Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiPopover,{button:Object(b.jsx)(k.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:s,"data-test-subj":"tagFilterPopoverButton",hasActiveFilters:n>0,numActiveFilters:n,grow:!0},"Tags"),isOpen:e,closePopover:o,panelPaddingSize:"none",anchorPosition:"downCenter",panelProps:{css:{width:18*d.base}},panelStyle:t?{transition:"none"}:void 0},Object(b.jsx)(k.EuiPopoverTitle,{paddingSize:"m",css:j},Object(b.jsx)(k.EuiFlexGroup,null,Object(b.jsx)(k.EuiFlexItem,null,"Tags"),Object(b.jsx)(k.EuiFlexItem,{grow:!1},n>0&&Object(b.jsx)(k.EuiButtonEmpty,{flush:"both",onClick:c,css:Se},v.i18n.translate("contentManagement.tableList.tagFilterPanel.clearSelectionButtonLabelLabel",{defaultMessage:"Clear selection"}))))),Object(b.jsx)(k.EuiSelectable,l()({singleSelection:!1,"aria-label":"some aria label",options:a,renderOption:e=>e.view,emptyMessage:"There aren't any tags",noMatchesMessage:"No tag matches the search",onChange:r,"data-test-subj":"tagSelectableList"},f),((e,t)=>Object(b.jsx)(i.a.Fragment,null,m?Object(b.jsx)("div",{css:h},t):Object(b.jsx)(k.EuiSpacer,{size:"s"}),e))),Object(b.jsx)(k.EuiPopoverFooter,{paddingSize:"m"},Object(b.jsx)(k.EuiFlexGroup,{direction:"column",alignItems:"center",gutterSize:"s"},Object(b.jsx)(k.EuiFlexItem,null,Object(b.jsx)(k.EuiText,{size:"xs"},Object(b.jsx)(k.EuiTextColor,{color:"dimgrey"},v.i18n.translate("contentManagement.tableList.tagFilterPanel.modifierKeyHelpText",{defaultMessage:"{modifierKeyPrefix} + click exclude",values:{modifierKeyPrefix:ye}})))),Object(b.jsx)(k.EuiFlexItem,{css:Ce},Object(b.jsx)(k.EuiButton,{onClick:o},v.i18n.translate("contentManagement.tableList.tagFilterPanel.doneButtonLabel",{defaultMessage:"Done"}))),Object(b.jsx)(k.EuiFlexItem,null,Object(b.jsx)(H,{coreStart:{application:{navigateToUrl:u,currentAppId$:p}}},Object(b.jsx)(k.EuiLink,{href:g(),"data-test-subj":"manageAllTagsLink",external:!0},v.i18n.translate("contentManagement.tableList.tagFilterPanel.manageAllTagsLinkLabel",{defaultMessage:"Manage tags"}))))))))},Ie=navigator.platform.toLowerCase().indexOf("mac")>=0,ke=e=>Array.isArray(e)?e:[e],Te=e=>e.replace(" ","_"),Fe=({query:e,tagsToTableItemMap:t,getTagList:a,addOrRemoveExcludeTagFilter:i,addOrRemoveIncludeTagFilter:s})=>{const[r,o]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),[d,u]=Object(n.useState)([]),[p,g]=Object(n.useState)({}),m=Object.keys(p).length,h=Object(n.useCallback)((e=>{const t=e.find(((e,t)=>e.checked!==d[t].checked));t&&s(t.tag)}),[d,s]),j=Object(n.useCallback)((e=>t=>{Ie&&t.metaKey||!Ie&&t.ctrlKey?i(e):s(e)}),[s,i]),f=Object(n.useCallback)((()=>{const e=a().map((e=>{var a,n;const{name:i,id:s,color:r}=e;let o;return p[i]&&(o="include"===p[i]?"on":"off"),{name:i,label:i,value:null!=s?s:"",tag:e,checked:o,view:Object(b.jsx)(k.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(b.jsx)(k.EuiFlexItem,null,Object(b.jsx)(k.EuiHealth,{color:r,"data-test-subj":`tag-searchbar-option-${Te(i)}`,onClick:j(e)},Object(b.jsx)(k.EuiText,null,i))),Object(b.jsx)(k.EuiFlexItem,{grow:!1},Object(b.jsx)(k.EuiBadge,{color:void 0!==o?"accent":void 0},null!==(a=null===(n=t[null!=s?s:""])||void 0===n?void 0:n.length)&&void 0!==a?a:0)))}}));u(e)}),[a,t,p,j]),x=Object(n.useCallback)((()=>{o((e=>!e))}),[]),O=Object(n.useCallback)((()=>{o(!1)}),[]);return Object(n.useEffect)((()=>{if(e){const t=e.ast.getOrFieldClause("tag",void 0,!0,"eq"),a=e.ast.getOrFieldClause("tag",void 0,!1,"eq"),n={};t&&ke(t.value).forEach((e=>{n[e]="include"})),a&&ke(a.value).forEach((e=>{n[e]="exclude"})),g(n)}}),[e]),Object(n.useEffect)((()=>{r?(f(),setTimeout((()=>{c(!0)}),250)):c(!1)}),[r,f]),{isPopoverOpen:r,isInUse:l,options:d,totalActiveFilters:m,onFilterButtonClick:x,onSelectChange:h,closePopover:O}};function Le({dispatch:e,items:t,isFetchingItems:a,searchQuery:i,selectedIds:s,pagination:r,tableColumns:o,tableSort:l,hasUpdatedAtMetadata:c,entityName:d,entityNamePlural:u,tagsToTableItemMap:p,tableItemsRowActions:g,deleteItems:m,renderCreateButton:h,tableCaption:j,onTableChange:f,onTableSearchChange:x,onSortChange:O,addOrRemoveExcludeTagFilter:y,addOrRemoveIncludeTagFilter:S,clearTagSelection:E}){const{getTagList:I}=xe(),T=Object(n.useCallback)((()=>{if(m&&0!==s.length)return Object(b.jsx)(k.EuiButton,{color:"danger",iconType:"trash",onClick:()=>e({type:"showConfirmDeleteItemsModal"}),"data-test-subj":"deleteSelectedItems"},Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.deleteButtonMessage",defaultMessage:"Delete {itemCount} {entityName}",values:{itemCount:s.length,entityName:1===s.length?d:u}}))}),[m,e,d,u,s.length]),F=Object(n.useMemo)((()=>{if(m)return{onSelectionChange:t=>{e({type:"onSelectionChange",data:t})},selectable:e=>{var t;const a=g[e.id];return!1!==(null==a||null===(t=a.delete)||void 0===t?void 0:t.enabled)},selectableMessage:(e,t)=>{if(!e){var a,n;const e=g[t.id];return null!==(a=null==e||null===(n=e.delete)||void 0===n?void 0:n.reason)&&void 0!==a?a:v.i18n.translate("contentManagement.tableList.actionsDisabledLabel",{defaultMessage:"Actions disabled for this item"})}return""},initialSelected:[]}}),[m,e,g]),{isPopoverOpen:L,isInUse:M,closePopover:w,onFilterButtonClick:N,onSelectChange:_,options:P,totalActiveFilters:A}=Fe({query:i.query,getTagList:I,tagsToTableItemMap:p,addOrRemoveExcludeTagFilter:y,addOrRemoveIncludeTagFilter:S}),D=Object(n.useMemo)((()=>({type:"custom_component",component:()=>Object(b.jsx)(ve,{tableSort:l,hasUpdatedAtMetadata:c,onChange:O})})),[c,O,l]),R=Object(n.useMemo)((()=>({type:"custom_component",component:()=>Object(b.jsx)(Ee,{isPopoverOpen:L,isInUse:M,closePopover:w,options:P,totalActiveFilters:A,onFilterButtonClick:N,onSelectChange:_,clearTagSelection:E})})),[L,M,w,P,A,N,_,E]),B=Object(n.useMemo)((()=>[D,R]),[D,R]),z=Object(n.useMemo)((()=>{var e;return{onChange:x,toolsLeft:T(),toolsRight:h(),query:null!==(e=i.query)&&void 0!==e?e:void 0,box:{incremental:!0,"data-test-subj":"tableListSearchBox"},filters:B}}),[x,h,T,B,i.query]),U=Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.noMatchedItemsMessage",defaultMessage:"No {entityNamePlural} matched your search.",values:{entityNamePlural:u}});return Object(b.jsx)(k.EuiInMemoryTable,{itemId:"id",items:t,columns:o,pagination:r,loading:a,message:U,selection:F,search:z,executeQueryOptions:{enabled:!1},sorting:l?{sort:l}:void 0,onChange:f,"data-test-subj":"itemsInMemTable",rowHeader:"attributes.title",tableCaption:j,isSelectable:!0})}var Me=a(55),we=a.n(Me);const Ne=({value:e,children:t})=>t(new Date(e).toDateString()),_e=({dateTime:e,DateFormatterComp:t=Ne})=>{if(!e)return Object(b.jsx)(k.EuiToolTip,{content:v.i18n.translate("contentManagement.tableList.updatedDateUnknownLabel",{defaultMessage:"Last updated unknown"})},Object(b.jsx)("span",null,"-"));const a=we()(e);return a.diff(we()(),"days")>-7?Object(b.jsx)(t,{value:new Date(e).getTime()},(e=>Object(b.jsx)(k.EuiToolTip,{content:a.format("LL LT")},Object(b.jsx)("span",null,e)))):Object(b.jsx)(k.EuiToolTip,{content:a.format("LL LT")},Object(b.jsx)("span",null,a.format("LL")))};function Pe({isDeletingItems:e,items:t,entityName:a,entityNamePlural:i,onCancel:s,onConfirm:r}){const{deleteBtnLabel:o,deletingBtnLabel:l,title:c,description:d,cancelBtnLabel:u}=Object(n.useMemo)((()=>function(e,t,a){return{deleteBtnLabel:v.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.confirmButtonLabel",{defaultMessage:"Delete"}),deletingBtnLabel:v.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.confirmButtonLabelDeleting",{defaultMessage:"Deleting"}),title:v.i18n.translate("contentManagement.tableList.listing.deleteSelectedConfirmModal.title",{defaultMessage:"Delete {itemCount} {entityName}?",values:{itemCount:e.length,entityName:1===e.length?t:a}}),description:v.i18n.translate("contentManagement.tableList.listing.deleteConfirmModalDescription",{defaultMessage:"You can't recover deleted {entityNamePlural}.",values:{entityNamePlural:a}}),cancelBtnLabel:v.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"})}}(t,a,i)),[a,i,t]);return Object(b.jsx)(k.EuiConfirmModal,{title:c,buttonColor:"danger",onCancel:s,onConfirm:r,cancelButtonText:u,confirmButtonText:e?l:o,defaultFocusedButton:"cancel"},Object(b.jsx)("p",null,d))}function Ae({entityNamePlural:e,totalItems:t,listingLimit:a,canEditAdvancedSettings:n,advancedSettingsLink:s}){return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiCallOut,{title:Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededTitle",defaultMessage:"Listing limit exceeded"}),color:"warning",iconType:"help"},Object(b.jsx)("p",null,Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescription",defaultMessage:"You have {totalItems} {entityNamePlural}, but your {listingLimitText} setting prevents the table below from displaying more than {listingLimitValue}.",values:{entityNamePlural:e,totalItems:t,listingLimitValue:a,listingLimitText:Object(b.jsx)("strong",null,"listingLimit")}})," ",n?Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescriptionPermissions",defaultMessage:"You can change this setting under {advancedSettingsLink}.",values:{advancedSettingsLink:Object(b.jsx)(k.EuiLink,{href:s},Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceeded.advancedSettingsLinkText",defaultMessage:"Advanced Settings"}))}}):Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescriptionNoPermissions",defaultMessage:"Contact your system administrator to change this setting."}))),Object(b.jsx)(k.EuiSpacer,{size:"m"}))}const De=navigator.platform.toLowerCase().indexOf("mac")>=0,Re=({tag:e,onClick:t})=>Object(b.jsx)(k.EuiBadge,{color:e.color,title:e.description,"data-test-subj":`tag-${e.id}`,onClick:a=>{const n=De&&a.metaKey||!De&&a.ctrlKey;t(e,n)},onClickAriaLabel:v.i18n.translate("contentManagement.tableList.tagBadge.buttonLabel",{defaultMessage:"{tagName} tag button.",values:{tagName:e.name}})},e.name),Be=e=>e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&");function ze({id:e,item:t,searchTerm:a="",getDetailViewLink:s,onClickTitle:r,onClickTag:o}){const{references:l,attributes:{title:c,description:d}}=t,{navigateToUrl:u,currentAppId$:p,TagList:g,itemHasTags:m}=xe(),h=Object(n.useMemo)((()=>({application:{navigateToUrl:u,currentAppId$:p}})),[p,u]),j=Object(n.useMemo)((()=>{if(r&&(null==s||!s(t)))return e=>{e.preventDefault(),r(t)}}),[t,r,s]),f=Object(n.useCallback)((()=>(s?s(t):void 0)||r?Object(b.jsx)(H,{coreStart:h},Object(b.jsx)(k.EuiLink,{href:null==s?void 0:s(t),onClick:j,"data-test-subj":`${e}ListingTitleLink-${t.attributes.title.split(" ").join("-")}`},Object(b.jsx)(k.EuiHighlight,{highlightAll:!0,search:Be(a)},c))):Object(b.jsx)("span",null,c)),[s,e,t,r,j,h,a,c]),x=m(l);return Object(b.jsx)("div",null,Object(b.jsx)(k.EuiText,{size:"s"},f()),Boolean(d)&&Object(b.jsx)(k.EuiText,{size:"s",color:"subdued"},Object(b.jsx)("p",null,Object(b.jsx)(k.EuiHighlight,{highlightAll:!0,search:Be(a)},d))),x&&Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiSpacer,{size:"s"}),Object(b.jsx)(g,{references:l,tagRender:e=>Object(b.jsx)(Re,{key:e.name,tag:e,onClick:o})})))}var Ue=a(350),We=a.n(Ue);const Ge=e=>{var t;const a={},n={...e};if(["s","title","sort","sortdir"].forEach((e=>{Array.isArray(n[e])&&(n[e]=n[e][0])})),a.s=null!==(t=n.s)&&void 0!==t?t:n.title,"title"===n.sort||"updatedAt"===n.sort){const e="title"===n.sort?"attributes.title":"updatedAt";a.sort={field:e,direction:"asc"},"desc"!==n.sortdir&&"asc"!==n.sortdir||(a.sort.direction=n.sortdir)}return a},Ve=e=>{const t={};return e.sort&&(t.sort=e.sort.field,t.sortdir=e.sort.direction),void 0!==e.s&&(t.s=e.s,t.title=void 0),"string"==typeof t.s&&""===t.s.trim()&&(t.s=void 0,t.title=void 0),t},Je={title:{field:"attributes.title",name:"Name, description, tags"},updatedAt:{field:"updatedAt",name:"Last updated"}};function $e({tableCaption:e,entityName:t,entityNamePlural:a,initialFilter:s,headingId:o,initialPageSize:c,listingLimit:d,urlStateEnabled:u=!0,customTableColumn:p,emptyPrompt:g,rowItemActions:m,findItems:h,createItem:j,editItem:x,itemIsEditable:O,deleteItems:y,getDetailViewLink:S,onClickTitle:E,id:T="userContent",contentEditor:F={enabled:!1},titleColumnName:L,withoutPageTemplateWrapper:M,onFetchSuccess:w,refreshListBouncer:N,setPageDataTestSubject:_}){if(Object(n.useEffect)((()=>{_(`${t}LandingPage`)}),[t,_]),!S&&!E)throw new Error('[TableListView] One o["getDetailViewLink" or "onClickTitle"] prop must be provided.');if(!1===F.isReadonly&&void 0===F.onSave)throw new Error("[TableListView] A value for [contentEditor.onSave()] must be provided when [contentEditor.isReadonly] is false.");const P=Object(n.useRef)(!1),A=Object(n.useRef)(0),D=Object(n.useRef)(0),R=Object(n.useRef)(!1),{canEditAdvancedSettings:B,getListingLimitSettingsUrl:z,getTagIdsFromReferences:U,searchQueryParser:W,notifyError:G,DateFormatterComp:V,getTagList:J}=xe(),$=function(){const e=function(){const e=Object(n.useContext)(pe);if(!e)throw new Error("ContentEditorContext is missing. Ensure your component or React root is wrapped with <ContentEditorProvider /> or <ContentEditorKibanaProvider />.");return e}(),{openFlyout:t}=e,a=Object(n.useRef)(null);return Object(n.useCallback)((n=>{if(!1===n.isReadonly&&void 0===n.onSave)throw new Error("A value for [onSave()] must be provided when [isReadonly] is false.");const i=()=>{var e;null===(e=a.current)||void 0===e||e.close()};return a.current=t(Object(b.jsx)(me,l()({},n,{onCancel:i,services:e})),{maxWidth:600,size:"m",ownFocus:!0,hideCloseButton:!0}),i}),[t,e])}();if(!function(){try{return Object(r.useLocation)(),!0}catch(e){return!1}}())throw new Error("<TableListView/> requires a React Router context. Ensure your component or React root is being rendered in the context of a <Router>.");const[q,H]=function({queryParamsDeserializer:e,queryParamsSerializer:t}){const a=Object(r.useHistory)(),i=function(){const{search:e}=Object(r.useLocation)();return Object(n.useMemo)((()=>We.a.parse(e)),[e])}(),[s,o]=Object(n.useState)({}),l=Object(n.useCallback)((e=>{const n=t(e),s={...i,...n};a.replace({search:`?${We.a.stringify(s,{encode:!1})}`})}),[a,i,t]);return Object(n.useEffect)((()=>{const t=e(i);o(t)}),[i,e]),[s,l]}({queryParamsDeserializer:Ge,queryParamsSerializer:Ve}),Q=Object(n.useMemo)((()=>function(){let e=!1;return(t,a)=>{switch(a.type){case"onFetchItems":return{...t,isFetchingItems:!0};case"onFetchItemsSuccess":{var n;const i=a.data.response.hits;let s,r=t.hasUpdatedAtMetadata;t.hasInitialFetchReturned||(r=Boolean(i.find((e=>Boolean(e.updatedAt)))),r&&!e&&(s={field:"updatedAt",direction:"desc"}));let o=t.hasNoItems;return o=""!==t.searchQuery.text?void 0:0===i.length,{...t,hasInitialFetchReturned:!0,isFetchingItems:!1,items:i,hasNoItems:o,totalItems:a.data.response.total,hasUpdatedAtMetadata:r,tableSort:null!==(n=s)&&void 0!==n?n:t.tableSort,pagination:{...t.pagination,totalItemCount:i.length}}}case"onFetchItemsError":return{...t,isFetchingItems:!1,items:[],totalItems:0,fetchError:a.data};case"onSearchQueryChange":return a.data.text===t.searchQuery.text?t:{...t,searchQuery:a.data,isFetchingItems:!0};case"onTableChange":{var i,s,r,o,l;a.data.sort&&(e=!0);const n=null!==(i=a.data.sort)&&void 0!==i?i:t.tableSort,c=null!==(s=null===(r=a.data.page)||void 0===r?void 0:r.pageIndex)&&void 0!==s?s:t.pagination.pageIndex,d=null!==(o=null===(l=a.data.page)||void 0===l?void 0:l.pageSize)&&void 0!==o?o:t.pagination.pageSize;return{...t,pagination:{...t.pagination,pageIndex:c,pageSize:d},tableSort:n}}case"showConfirmDeleteItemsModal":return{...t,showDeleteModal:!0};case"onDeleteItems":return{...t,isDeletingItems:!0};case"onCancelDeleteItems":return{...t,showDeleteModal:!1};case"onItemsDeleted":return{...t,isDeletingItems:!1,selectedIds:[],showDeleteModal:!1};case"onSelectionChange":return{...t,selectedIds:a.data.map((e=>null==e?void 0:e.id)).filter((e=>Boolean(e)))}}}}()),[]),K=Object(n.useMemo)((()=>({items:[],hasNoItems:void 0,totalItems:0,hasInitialFetchReturned:!1,isFetchingItems:!0,isDeletingItems:!1,showDeleteModal:!1,hasUpdatedAtMetadata:!1,selectedIds:[],searchQuery:{text:"",query:new k.Query(k.Ast.create([]),void 0,"")},pagination:{pageIndex:0,totalItemCount:0,pageSize:c,pageSizeOptions:Object(f.uniq)([10,20,50,c]).sort()},tableSort:{field:"attributes.title",direction:"asc"}})),[c]),[X,Y]=Object(n.useReducer)(Q,K),{searchQuery:Z,hasInitialFetchReturned:ee,isFetchingItems:te,items:ae,hasNoItems:ne,fetchError:ie,showDeleteModal:se,isDeletingItems:re,selectedIds:oe,totalItems:le,hasUpdatedAtMetadata:ce,pagination:de,tableSort:be}=X,ge=Boolean(ie),he=!ge&&le>d,je=Object(n.useCallback)((async()=>{Y({type:"onFetchItems"});try{const e=++A.current,{searchQuery:t,references:a,referencesToExclude:n}=W?await W(Z.text):{searchQuery:Z.text,references:void 0,referencesToExclude:void 0},i=await h(t,{references:a,referencesToExclude:n});if(!P.current)return;e===A.current&&(Y({type:"onFetchItemsSuccess",data:{response:i}}),w())}catch(e){Y({type:"onFetchItemsError",data:e})}}),[W,Z.text,h,w]),fe=Object(n.useCallback)((e=>{u?H({s:e.text}):Y({type:"onSearchQueryChange",data:{query:e,text:e.text}})}),[u,H]),{addOrRemoveIncludeTagFilter:Oe,addOrRemoveExcludeTagFilter:ve,clearTagSelection:ye,tagsToTableItemMap:Se}=function({query:e,updateQuery:t,items:a}){const i=Object(n.useMemo)((()=>a.reduce(((e,t)=>{const a=t.references.filter((e=>"tag"===e.type));return a.length>0&&a.forEach((a=>{e[a.id]||(e[a.id]=[]),e[a.id].push(t.id)})),e}),{})),[a]),s=Object(n.useCallback)((a=>(n,i=e,s=!0)=>{const r=a(i,n);return s&&t(r),r}),[e,t]),r=Object(n.useCallback)((t=>(a,n)=>{const i=Boolean(n)?n:e;if(i.ast.getFieldClauses("tag")){var s;const e=null===(s=i.ast.getFieldClauses("tag").find((({match:e})=>e===t)))||void 0===s?void 0:s.value;if(e&&e.includes(a.name))return!0}return!1}),[e]),o=Object(n.useMemo)((()=>s(((e,t)=>e.addOrFieldValue("tag",t.name,!0,"eq")))),[s]),l=Object(n.useMemo)((()=>s(((e,t)=>e.removeOrFieldValue("tag",t.name)))),[s]),c=Object(n.useMemo)((()=>s(((e,t)=>e.addOrFieldValue("tag",t.name,!1,"eq")))),[s]),d=Object(n.useMemo)((()=>s(((e,t)=>e.removeOrFieldValue("tag",t.name)))),[s]),u=Object(n.useMemo)((()=>r("must")),[r]),p=Object(n.useMemo)((()=>r("must_not")),[r]);return{addOrRemoveIncludeTagFilter:Object(n.useCallback)((e=>{let t;if(p(e))t=d(e,void 0,!1);else if(u(e,t))return void l(e,t);o(e,t)}),[p,u,d,o,l]),addOrRemoveExcludeTagFilter:Object(n.useCallback)((e=>{let t;u(e)&&(t=l(e,void 0,!1)),p(e,t)?d(e,t):c(e,t)}),[u,p,l,c,d]),clearTagSelection:Object(n.useCallback)((()=>{const a=e.removeOrFieldClauses("tag");return t(a),t}),[e,t]),tagsToTableItemMap:i}}({query:Z.query,updateQuery:fe,items:ae}),Ce=Object(n.useCallback)((e=>{var t;return!e.managed&&(null===(t=null==O?void 0:O(e))||void 0===t||t)}),[O]),Ee=Object(n.useCallback)((e=>{const a=U(e.references).map((t=>e.references.find((({id:e})=>e===t)))),n=$({item:{id:e.id,title:e.attributes.title,description:e.attributes.description,tags:a},entityName:t,...F,isReadonly:F.isReadonly||!Ce(e),onSave:F.onSave&&(async e=>{await F.onSave(e),await je(),n()})})}),[U,$,t,F,Ce,je]),Ie=Object(n.useMemo)((()=>{const e=[{field:Je.title.field,name:null!=L?L:v.i18n.translate("contentManagement.tableList.mainColumnName",{defaultMessage:"Name, description, tags"}),sortable:!0,render:(e,t)=>Object(b.jsx)(ze,{id:T,item:t,getDetailViewLink:S,onClickTitle:E,onClickTag:(e,t)=>{t?ve(e):Oe(e)},searchTerm:Z.text})}];if(p&&e.push(p),ce&&e.push({field:Je.updatedAt.field,name:v.i18n.translate("contentManagement.tableList.lastUpdatedColumnTitle",{defaultMessage:"Last updated"}),render:(e,t)=>Object(b.jsx)(_e,{dateTime:t.updatedAt,DateFormatterComp:V}),sortable:!0,width:"150px"}),x||!1!==F.enabled){const t=[];x&&t.push({name:e=>v.i18n.translate("contentManagement.tableList.listing.table.editActionName",{defaultMessage:"Edit {itemDescription}",values:{itemDescription:Object(f.get)(e,"attributes.title")}}),description:v.i18n.translate("contentManagement.tableList.listing.table.editActionDescription",{defaultMessage:"Edit"}),icon:"pencil",type:"icon",available:e=>Ce(e),enabled:e=>!(null!=e&&e.error),onClick:x,"data-test-subj":"edit-action"}),!1!==F.enabled&&t.push({name:e=>v.i18n.translate("contentManagement.tableList.listing.table.viewDetailsActionName",{defaultMessage:"View {itemTitle} details",values:{itemTitle:Object(f.get)(e,"attributes.title")}}),description:v.i18n.translate("contentManagement.tableList.listing.table.viewDetailsActionDescription",{defaultMessage:"View details"}),icon:"iInCircle",type:"icon",onClick:Ee,"data-test-subj":"inspect-action"}),e.push({name:v.i18n.translate("contentManagement.tableList.listing.table.actionTitle",{defaultMessage:"Actions"}),width:"100px",actions:t})}return e}),[L,p,ce,x,F.enabled,T,S,E,Z.text,ve,Oe,V,Ce,Ee]),ke=Object(n.useMemo)((()=>Object(f.keyBy)(ae,"id")),[ae]),Te=Object(n.useMemo)((()=>oe.map((e=>ke[e]))),[oe,ke]),Fe=Object(n.useMemo)((()=>ae.reduce(((e,t)=>({...e,[t.id]:m?m(t):void 0})),{})),[ae,m]),Me=Object(n.useCallback)((async e=>{let t=k.Ast.create([]),a=e;if(W){const{references:n,referencesToExclude:i,searchQuery:s}=await W(e);if(a=s,null!=n&&n.length||null!=i&&i.length){const e=J();null!=n&&n.length&&n.forEach((({id:a})=>{const n=e.find((({id:e})=>e===a));n&&(t=t.addOrFieldValue("tag",n.name,!0,"eq"))})),null!=i&&i.length&&i.forEach((({id:a})=>{const n=e.find((({id:e})=>e===a));n&&(t=t.addOrFieldValue("tag",n.name,!1,"eq"))}))}}return""!==a.trim()&&(t=t.addClause({type:"term",value:a,match:"must"})),new k.Query(t,void 0,e)}),[J,W]),we=Object(n.useCallback)((e=>{if(e.query)fe(e.query);else{const t=D.current+1;Me(e.queryText).then((e=>{t===D.current&&fe(e)}))}}),[fe,Me]),Ne=Object(n.useCallback)((e=>{e.sort&&u&&H({sort:{field:"attributes.title"===e.sort.field?"title":e.sort.field,direction:e.sort.direction}}),!e.page&&u||Y({type:"onTableChange",data:e})}),[H,u]),De=Object(n.useCallback)(((e,t)=>{Ne({sort:{field:e,direction:t}})}),[Ne]),Re=Object(n.useCallback)((e=>{const t={};if(e.sort){let a=e.sort.field;a===Je.title.name?a=Je.title.field:a===Je.updatedAt.name&&(a=Je.updatedAt.field),t.sort={field:a,direction:e.sort.direction}}t.page={pageIndex:e.page.index,pageSize:e.page.size},Ne(t)}),[Ne]),Be=Object(n.useCallback)((async()=>{if(!re){Y({type:"onDeleteItems"});try{await y(Te)}catch(e){G(Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.unableToDeleteDangerMessage",defaultMessage:"Unable to delete {entityName}(s)",values:{entityName:t}}),e)}je(),Y({type:"onItemsDeleted"})}}),[y,t,je,re,G,Te]),Ue=Object(n.useCallback)((()=>{if(j)return Object(b.jsx)(k.EuiButton,{onClick:j,"data-test-subj":"newItemButton",iconType:"plusInCircleFilled",fill:!0},Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.createNewItemButtonLabel",defaultMessage:"Create {entityName}",values:{entityName:t}}))}),[j,t]),$e=Object(n.useCallback)((()=>g||Object(b.jsx)(k.EuiEmptyPrompt,{title:Object(b.jsx)("h1",null,Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.noAvailableItemsMessage",defaultMessage:"No {entityNamePlural} available.",values:{entityNamePlural:a}})),actions:Ue()})),[g,a,Ue]),qe=Object(n.useCallback)((()=>{var e;return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(k.EuiCallOut,{title:Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.fetchErrorTitle",defaultMessage:"Fetching listing failed"}),color:"danger",iconType:"warning"},Object(b.jsx)("p",null,Object(b.jsx)(C.FormattedMessage,{id:"contentManagement.tableList.listing.fetchErrorDescription",defaultMessage:"The {entityName} listing could not be fetched: {message}.",values:{entityName:t,message:(null===(e=ie.body)||void 0===e?void 0:e.message)||ie.message}}))),Object(b.jsx)(k.EuiSpacer,{size:"m"}))}),[t,ie]);I()(je,300,[je,N]),Object(n.useEffect)((()=>{var e;u&&((async(e="")=>{const t=await Me(e);Y({type:"onSearchQueryChange",data:{query:t,text:e}})})(q.s),(e=q.sort)&&Y({type:"onTableChange",data:{sort:{field:e.field,direction:e.direction}}}))}),[q,Me,u]),Object(n.useEffect)((()=>(P.current=!0,()=>{P.current=!1})),[]),Object(n.useEffect)((()=>{s&&!R.current&&(R.current=!0,Me(s).then(fe))}),[s,Me,fe]);const He=Object(n.useMemo)((()=>M?({children:e,"data-test-subj":t})=>Object(b.jsx)("div",{"data-test-subj":t},e):ue),[M]);if(!ee)return null;if(!ge&&ne)return Object(b.jsx)(He,{isEmptyState:!0},Object(b.jsx)(ue.Section,{"aria-labelledby":ee?o:void 0},$e()));const Qe=re?"table-is-deleting":ee&&!te?"table-is-ready":"table-is-loading";return Object(b.jsx)(i.a.Fragment,null,he&&Object(b.jsx)(Ae,{canEditAdvancedSettings:B,advancedSettingsLink:z(),entityNamePlural:a,totalItems:le,listingLimit:d}),ge&&qe(),Object(b.jsx)("div",{"data-test-subj":Qe},Object(b.jsx)(Le,{dispatch:Y,items:ae,renderCreateButton:Ue,isFetchingItems:te,searchQuery:Z,tableColumns:Ie,hasUpdatedAtMetadata:ce,tableSort:be,tableItemsRowActions:Fe,pagination:de,selectedIds:oe,entityName:t,entityNamePlural:a,tagsToTableItemMap:Se,deleteItems:y,tableCaption:e,onTableChange:Re,onTableSearchChange:we,onSortChange:De,addOrRemoveIncludeTagFilter:Oe,addOrRemoveExcludeTagFilter:ve,clearTagSelection:ye}),se&&Object(b.jsx)(Pe,{isDeletingItems:re,entityName:t,entityNamePlural:a,items:Te,onConfirm:Be,onCancel:()=>Y({type:"onCancelDeleteItems"})})))}const qe=i.a.memo($e);var He=a(5),Qe=a(171),Ke=a(16);const Xe=({title:e,description:t,entityName:a,entityNamePlural:s,initialFilter:r,headingId:o,initialPageSize:l,listingLimit:c,urlStateEnabled:d=!0,customTableColumn:u,emptyPrompt:p,findItems:g,createItem:m,editItem:h,deleteItems:j,getDetailViewLink:f,onClickTitle:x,rowItemActions:O,id:v,contentEditor:y,children:S,titleColumnName:C,additionalRightSideActions:E,withoutPageTemplateWrapper:I,itemIsEditable:k})=>{const T=I?i.a.Fragment:ue,[F,L]=Object(n.useState)(!1),[M,w]=Object(n.useState)(),N=Object(n.useCallback)((()=>{L(!0)}),[]);return Object(b.jsx)(T,{panelled:!0,"data-test-subj":M},Object(b.jsx)(ue.Header,{pageTitle:Object(b.jsx)("span",{id:o},e),description:t,rightSideItems:null==E?void 0:E.slice(0,2),"data-test-subj":"top-nav"}),Object(b.jsx)(ue.Section,{"aria-labelledby":F?o:void 0},S,Object(b.jsx)(qe,{tableCaption:e,entityName:a,entityNamePlural:s,initialFilter:r,headingId:o,initialPageSize:l,listingLimit:c,urlStateEnabled:d,customTableColumn:u,emptyPrompt:p,findItems:g,createItem:m,editItem:h,deleteItems:j,rowItemActions:O,getDetailViewLink:f,onClickTitle:x,id:v,contentEditor:y,titleColumnName:C,itemIsEditable:k,withoutPageTemplateWrapper:I,onFetchSuccess:N,setPageDataTestSubject:w})))};var Ye=a(0),Ze=a(27);const et="savedObjects:listingLimit",tt="savedObjects:perPage";function at(){var e;const t=Object(He.B)();null===(e=Object(He.T)())||void 0===e||e.reportUiCounter(Ye.e,Ke.METRIC_TYPE.CLICK,"create_maps_vis_editor"),t(Ye.e,{path:Ye.eb})}const nt=e=>{var t;return{...e,updatedAt:e.updatedAt,attributes:{...e.attributes,title:null!==(t=e.attributes.title)&&void 0!==t?t:""}}};async function it(e){await Promise.all(e.map((({id:e})=>Object(Ze.b)().delete(e))))}function st({history:e}){Object(He.o)().set({type:"application",name:Ye.e,page:"list"});const t=!Object(He.z)().save,a=Object(He.S)().get(et),i=Object(He.S)().get(tt);Object(n.useEffect)((()=>{Object(He.f)().docTitle.change(Ye.f),Object(He.K)()?Object(He.K)().setBreadcrumbs({text:Ye.f}):Object(He.f)().setBreadcrumbs([{text:Ye.f}])}),[]);const s=Object(n.useCallback)((async(e,{references:t=[],referencesToExclude:a=[]}={})=>Object(Ze.b)().search({text:e?`${e}*`:void 0,limit:Object(He.S)().get(et),tags:{included:t.map((({id:e})=>e)),excluded:a.map((({id:e})=>e))}}).then((({hits:e,pagination:{total:t}})=>({total:t,hits:e.map(nt)}))).catch((e=>({total:0,hits:[]})))),[]);return Object(b.jsx)(Xe,{id:"map",headingId:"mapsListingPage",createItem:t?void 0:at,findItems:s,deleteItems:t?void 0:it,listingLimit:a,initialFilter:"",initialPageSize:i,entityName:v.i18n.translate("xpack.maps.mapListing.entityName",{defaultMessage:"map"}),entityNamePlural:v.i18n.translate("xpack.maps.mapListing.entityNamePlural",{defaultMessage:"maps"}),title:Ye.f,onClickTitle:({id:t})=>e.push(Object(Ye.Mb)(t))})}const rt=Object(n.memo)(st);function ot(e){const[t,a]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!0);return Object(n.useEffect)((()=>{e.stateTransfer.clearEditorState(Ye.e);let t=!1;return Object(Ze.b)().search({limit:1}).then((e=>{t||(s(e.hits.length>0),a(!0))})).catch((e=>{t||(a(!0),s(!1))})),()=>{t=!0}}),[]),t?i?Object(b.jsx)(rt,{history:e.history}):Object(b.jsx)(r.Redirect,{to:"/map"}):null}var lt=a(26),ct=a(2),dt=a.n(ct),ut=a(236),pt=a(76),bt=a(111);let gt;var mt;!function(e){e.CONFIGURE_UPLOAD="CONFIGURE_UPLOAD",e.UPLOAD="UPLOAD",e.ADD_DOCUMENT_LAYER="ADD_DOCUMENT_LAYER"}(gt||(gt={})),function(e){e.CONFIGURE="CONFIGURE",e.TRIGGERED="TRIGGERED",e.SUCCESS="SUCCESS",e.ERROR="ERROR"}(mt||(mt={}));class wizard_ClientFileCreateSourceEditor extends n.Component{constructor(...e){super(...e),dt()(this,"_isMounted",!1),dt()(this,"state",{indexingStage:mt.CONFIGURE}),dt()(this,"_addDocumentLayer",x.a.once((e=>{const t={indexPatternId:e.indexPatternId,geoField:e.geoFieldName,scalingType:Ye.wb.MVT};this.props.previewLayers([Object(bt.createDefaultLayerDescriptor)(t,this.props.mapColors)]),this.props.advanceToNextStep()}))),dt()(this,"_onFileSelect",((e,t,a)=>{if(!this._isMounted)return;if(!e)return void this.props.previewLayers([]);const n=a<100,i=ut.a.createDescriptor({__featureCollection:e,areResultsTrimmed:n,tooltipContent:n?v.i18n.translate("xpack.maps.fileUpload.trimmedResultsMsg",{defaultMessage:"Results limited to {numFeatures} features, {previewCoverage}% of file.",values:{numFeatures:e.features.length.toLocaleString(),previewCoverage:a}}):null,name:t}),s=pt.b.createDescriptor({sourceDescriptor:i},this.props.mapColors);this.props.previewLayers([s])})),dt()(this,"_onFileClear",(()=>{this.props.previewLayers([])})),dt()(this,"_onUploadComplete",(e=>{this._isMounted&&(this.setState({results:e}),this.setState({indexingStage:mt.SUCCESS}),this.props.advanceToNextStep(),this.props.enableNextBtn())})),dt()(this,"_onUploadError",(()=>{this._isMounted&&(this.props.stopStepLoading(),this.props.disableNextBtn(),this.setState({indexingStage:mt.ERROR}))}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){if(this.props.currentStepId===gt.UPLOAD&&this.state.indexingStage===mt.CONFIGURE)return this.setState({indexingStage:mt.TRIGGERED}),void this.props.startStepLoading();this.props.isOnFinalStep&&this.state.indexingStage===mt.SUCCESS&&this.state.results&&this._addDocumentLayer(this.state.results)}render(){const e=Object(He.q)();return Object(b.jsx)(k.EuiPanel,null,Object(b.jsx)(e,{isIndexingTriggered:this.state.indexingStage===mt.TRIGGERED,onFileSelect:this._onFileSelect,onFileClear:this._onFileClear,enableImportBtn:this.props.enableNextBtn,disableImportBtn:this.props.disableNextBtn,onUploadComplete:this._onUploadComplete,onUploadError:this._onUploadError}))}}const ht={id:Ye.Jb.GEO_FILE,order:10,categories:[],description:v.i18n.translate("xpack.maps.fileUploadWizard.description",{defaultMessage:"Index GeoJSON and Shapefile data in Elasticsearch"}),disabledReason:v.i18n.translate("xpack.maps.fileUploadWizard.disabledDesc",{defaultMessage:'Unable to upload files, you are missing the Kibana privilege "Data View Management".'}),getIsDisabled:async()=>!await Object(He.p)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1}),icon:"importAction",prerequisiteSteps:[{id:gt.CONFIGURE_UPLOAD,label:v.i18n.translate("xpack.maps.fileUploadWizard.configureUploadLabel",{defaultMessage:"Import file"})},{id:gt.UPLOAD,label:v.i18n.translate("xpack.maps.fileUploadWizard.uploadLabel",{defaultMessage:"Importing file"})},{id:gt.ADD_DOCUMENT_LAYER,label:v.i18n.translate("xpack.maps.fileUploadWizard.configureDocumentLayerLabel",{defaultMessage:"Add as document layer"})}],renderWizard:e=>Object(b.jsx)(wizard_ClientFileCreateSourceEditor,e),title:v.i18n.translate("xpack.maps.fileUploadWizard.title",{defaultMessage:"Upload file"})};var jt=a(90);class wizard_LayerGroupWizard extends n.Component{constructor(...e){super(...e),dt()(this,"state",{label:jt.a}),dt()(this,"_onLabelChange",(e=>{this.setState({label:e.target.value},this._previewLayer)}))}componentDidMount(){this._previewLayer()}_previewLayer(){const e=jt.b.createDescriptor({label:this.state.label});this.props.previewLayers([e])}render(){return Object(b.jsx)(k.EuiPanel,null,Object(b.jsx)(k.EuiFormRow,{label:v.i18n.translate("xpack.maps.layerPanel.settingsPanel.layerNameLabel",{defaultMessage:"Name"})},Object(b.jsx)(k.EuiFieldText,{value:this.state.label,onChange:this._onLabelChange})))}}const ft={id:Ye.Jb.LAYER_GROUP,order:10,categories:[],description:v.i18n.translate("xpack.maps.layerGroupWizard.description",{defaultMessage:"Organize related layers in a hierarchy"}),icon:"layers",renderWizard:e=>Object(b.jsx)(wizard_LayerGroupWizard,e),title:v.i18n.translate("xpack.maps.layerGroupWizard.title",{defaultMessage:"Layer group"})};var xt=a(141),Ot=a(312),vt=a(232),yt=a(122),St=a(229),Ct=a(235),Et=a(318),It=a(233),kt=a(314),Tt=a(315),Ft=a(602),Lt=a(78),Mt=a(137),wt=a(99),Nt=a(94),_t=a(85),Pt=a(81),At=a(43),Dt=a(93),Rt=a(86),Bt=a(83);const zt=Object(Bt.i)();function Ut({sourceDescriptor:e,leftField:t,rightIndexPatternId:a,rightTermField:n,layerType:i}){const s={type:Ye.b.COUNT},r=Object(At.v4)(),o=Object(Dt.a)({aggType:s.type,aggFieldName:"",rightSourceId:r}),l={[Ye.Ib.FILL_COLOR]:{type:Ye.Eb.DYNAMIC,options:{...zt[Ye.Ib.FILL_COLOR].options,field:{name:o,origin:Ye.D.JOIN},color:"Yellow to Red",type:Ye.j.ORDINAL}},[Ye.Ib.LINE_COLOR]:{type:Ye.Eb.STATIC,options:{color:"#3d3d3d"}}};i===Ye.Z.GEOJSON_VECTOR&&(l[Ye.Ib.LABEL_TEXT]={type:Ye.Eb.DYNAMIC,options:{...zt[Ye.Ib.LABEL_TEXT].options,field:{name:o,origin:Ye.D.JOIN}}});const c=[{leftField:t,right:{type:Ye.Cb.ES_TERM_SOURCE,id:r,indexPatternId:a,term:n,metrics:[s],applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0}}];return i===Ye.Z.MVT_VECTOR?pt.c.createDescriptor({joins:c,sourceDescriptor:e,style:Rt.a.createDescriptor(l)}):pt.b.createDescriptor({joins:c,sourceDescriptor:e,style:Rt.a.createDescriptor(l)})}var Wt=a(151);let Gt;!function(e){e.ELASTICSEARCH="ELASTICSEARCH",e.EMS="EMS"}(Gt||(Gt={}));const Vt=[{id:Gt.EMS,label:v.i18n.translate("xpack.maps.choropleth.boundaries.ems",{defaultMessage:"Administrative boundaries from the Elastic Maps Service"})},{id:Gt.ELASTICSEARCH,label:v.i18n.translate("xpack.maps.choropleth.boundaries.elasticsearch",{defaultMessage:"Points, lines, and polygons from Elasticsearch"})}];class layer_template_LayerTemplate extends n.Component{constructor(...e){super(...e),dt()(this,"_isMounted",!1),dt()(this,"state",{leftSource:Gt.EMS,leftEmsFileId:null,leftEmsFields:[],leftIndexPattern:null,leftGeoFields:[],leftJoinFields:[],leftGeoField:null,leftEmsJoinField:null,leftElasticsearchJoinField:null,rightIndexPatternId:"",rightTermsFields:[],rightJoinField:null}),dt()(this,"_loadRightFields",(async e=>{let t;this.setState({rightTermsFields:[]});try{t=await Object(He.u)().get(e)}catch(e){return}this._isMounted&&e===this.state.rightIndexPatternId&&this.setState({rightTermsFields:Object(_t.i)(t.fields)})})),dt()(this,"_loadEmsFileFields",(async()=>{let e;try{e=(await Object(Pt.getEmsFileLayers)()).find((e=>e.getId()===this.state.leftEmsFileId))}catch(e){}if(!this._isMounted||!e)return;const t=e.getFieldsInLanguage().filter((e=>"id"===e.type)).map((e=>({value:e.name,label:e.description})));this.setState({leftEmsFields:t,leftEmsJoinField:t.length?t[0].value:null},this._previewLayer)})),dt()(this,"_onLeftSourceChange",(e=>{this.setState({leftSource:e,rightJoinField:null},this._previewLayer)})),dt()(this,"_onLeftIndexPatternChange",(e=>{this.setState({leftIndexPattern:e,leftGeoFields:Object(_t.b)(e.fields),leftJoinFields:Object(_t.h)(e.fields),leftGeoField:null,leftElasticsearchJoinField:null,rightJoinField:null},(()=>{this.state.leftGeoFields.length&&this._onLeftGeoFieldSelect(this.state.leftGeoFields[0].name)}))})),dt()(this,"_onLeftGeoFieldSelect",(e=>{e&&this.setState({leftGeoField:e},this._previewLayer)})),dt()(this,"_onLeftJoinFieldSelect",(e=>{e&&this.setState({leftElasticsearchJoinField:e},this._previewLayer)})),dt()(this,"_onLeftEmsFileChange",(e=>{this.setState({leftEmsFileId:e,leftEmsJoinField:null,rightJoinField:null},(()=>{this._previewLayer(),this._loadEmsFileFields()}))})),dt()(this,"_onLeftEmsFieldChange",(e=>{0!==e.length&&this.setState({leftEmsJoinField:e[0].value},this._previewLayer)})),dt()(this,"_onRightIndexPatternChange",(e=>{e&&this.setState({rightIndexPatternId:e,rightJoinField:null},(()=>{this._previewLayer(),this._loadRightFields(e)}))})),dt()(this,"_onRightJoinFieldSelect",(e=>{e&&this.setState({rightJoinField:e},this._previewLayer)}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_isLeftConfigComplete(){return this.state.leftSource===Gt.ELASTICSEARCH?!!this.state.leftIndexPattern&&!!this.state.leftGeoField&&!!this.state.leftElasticsearchJoinField:!!this.state.leftEmsFileId&&!!this.state.leftEmsJoinField}_isRightConfigComplete(){return!!this.state.rightIndexPatternId&&!!this.state.rightJoinField}_previewLayer(){if(!this._isLeftConfigComplete()||!this._isRightConfigComplete())return void this.props.previewLayers([]);const e=this.state.leftSource===Gt.ELASTICSEARCH?function({leftIndexPatternId:e,leftGeoField:t,leftJoinField:a,rightIndexPatternId:n,rightTermField:i}){return Ut({sourceDescriptor:bt.ESSearchSource.createDescriptor({indexPatternId:e,geoField:t,scalingType:Ye.wb.MVT,tooltipProperties:[a],applyGlobalQuery:!1,applyGlobalTime:!1,applyForceRefresh:!1}),leftField:a,rightIndexPatternId:n,rightTermField:i,layerType:Ye.Z.MVT_VECTOR})}({leftIndexPatternId:this.state.leftIndexPattern.id,leftGeoField:this.state.leftGeoField,leftJoinField:this.state.leftElasticsearchJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightTermField:this.state.rightJoinField}):function({leftEmsFileId:e,leftEmsField:t,rightIndexPatternId:a,rightTermField:n}){return Ut({sourceDescriptor:yt.a.createDescriptor({id:e,tooltipProperties:[t]}),leftField:t,rightIndexPatternId:a,rightTermField:n,layerType:Ye.Z.GEOJSON_VECTOR})}({leftEmsFileId:this.state.leftEmsFileId,leftEmsField:this.state.leftEmsJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightTermField:this.state.rightJoinField});this.props.previewLayers([e])}_renderLeftSourceForm(){if(this.state.leftSource===Gt.ELASTICSEARCH){let e,t;return this.state.leftGeoFields.length&&(e=Object(b.jsx)(k.EuiFormRow,{label:v.i18n.translate("xpack.maps.choropleth.geofieldLabel",{defaultMessage:"Geospatial field"})},Object(b.jsx)(Nt.a,{placeholder:v.i18n.translate("xpack.maps.choropleth.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.leftGeoField,onChange:this._onLeftGeoFieldSelect,fields:this.state.leftGeoFields,isClearable:!1}))),this.state.leftJoinFields.length&&(t=Object(b.jsx)(k.EuiFormRow,{label:v.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(b.jsx)(Nt.a,{placeholder:Wt.a.fieldSelectPlaceholder,value:this.state.leftElasticsearchJoinField,onChange:this._onLeftJoinFieldSelect,fields:this.state.leftJoinFields,isClearable:!1}))),Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(wt.a,{dataView:this.state.leftIndexPattern,onChange:this._onLeftIndexPatternChange}),e,t)}{let e;if(this.state.leftEmsFields.length){let t;this.state.leftEmsJoinField&&(t=this.state.leftEmsFields.find((e=>this.state.leftEmsJoinField===e.value))),e=Object(b.jsx)(k.EuiFormRow,{label:v.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(b.jsx)(k.EuiComboBox,{singleSelection:!0,isClearable:!1,options:this.state.leftEmsFields,selectedOptions:t?[t]:[],onChange:this._onLeftEmsFieldChange}))}return Object(b.jsx)(i.a.Fragment,null,Object(b.jsx)(Mt.a,{value:this.state.leftEmsFileId,onChange:this._onLeftEmsFileChange}),e)}}_renderLeftPanel(){return Object(b.jsx)(k.EuiPanel,null,Object(b.jsx)(k.EuiTitle,{size:"xs"},Object(b.jsx)("h5",null,Object(b.jsx)(C.FormattedMessage,{id:"xpack.maps.choropleth.boundariesLabel",defaultMessage:"Boundaries source"}))),Object(b.jsx)(k.EuiSpacer,{size:"m"}),Object(b.jsx)(k.EuiFormRow,null,Object(b.jsx)(k.EuiRadioGroup,{options:Vt,idSelected:this.state.leftSource,onChange:this._onLeftSourceChange})),this._renderLeftSourceForm())}_renderRightPanel(){if(!this._isLeftConfigComplete())return null;const e=Object(He.t)();let t;return this.state.rightTermsFields.length&&(t=Object(b.jsx)(k.EuiFormRow,{label:v.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(b.jsx)(Nt.a,{placeholder:Wt.a.fieldSelectPlaceholder,value:this.state.rightJoinField,onChange:this._onRightJoinFieldSelect,fields:this.state.rightTermsFields,isClearable:!1}))),Object(b.jsx)(k.EuiPanel,null,Object(b.jsx)(k.EuiTitle,{size:"xs"},Object(b.jsx)("h5",null,Object(b.jsx)(C.FormattedMessage,{id:"xpack.maps.choropleth.statisticsLabel",defaultMessage:"Statistics source"}))),Object(b.jsx)(k.EuiSpacer,{size:"m"}),Object(b.jsx)(k.EuiFormRow,{label:Object(Lt.b)()},Object(b.jsx)(e,{placeholder:Object(Lt.d)(),indexPatternId:this.state.rightIndexPatternId,onChange:this._onRightIndexPatternChange,isClearable:!1})),t)}render(){return Object(b.jsx)(i.a.Fragment,null,this._renderLeftPanel(),Object(b.jsx)(k.EuiSpacer,{size:"s"}),this._renderRightPanel())}}const Jt={id:Ye.Jb.CHOROPLETH,order:10,categories:[Ye.ab.ELASTICSEARCH],description:v.i18n.translate("xpack.maps.choropleth.desc",{defaultMessage:"Shade areas to compare statistics across boundaries"}),icon:()=>Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(b.jsx)("path",{fill:"#98A2B3",d:"M32.206 15.364V1.588l-1.492.204c-.743.254-1.768.38-2.702.45a41.39 41.39 0 01-1.258.07l-.093.005c-.312.014-.57.025-.72.042a1.895 1.895 0 00-.558.167c-.156.07-.316.156-.47.238l-.057.031c-.356.19-.687.357-1.025.4l-2.262.474v5.864c0 .698-.677 2.578-.818 3.852l.34 1.807 11.114.17z"}),Object(b.jsx)("path",{fill:"#69707D",d:"M22.36 3.558c-.178-.104-.416-.15-.664-.172a6.333 6.333 0 00-.885 0c-.657.04-1.452.144-2.264.261l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.065 3.065 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 11.445-.366 12.196-.45a.58.58 0 00.334-.17 1.41 1.41 0 00.224-.293c.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.314-1.32.452-1.92l.16-.695c.088-.378.167-.707.235-.963.07-.267.123-.43.156-.494a1.57 1.57 0 00.1-.314c.03-.129.063-.291.096-.48.067-.38.14-.876.213-1.45.146-1.149.296-2.614.403-4.073.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.135-.275-.276-.358z"}),Object(b.jsx)("path",{fill:"#D3DAE6",d:"M31.435 15.227c-.218.006-1.066-.01-1.445 0-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.558-.468.643-1.44.086-.972.086-2.063.086-2.063l-8.131-2.744h-3.907z"}),Object(b.jsx)("path",{className:"mapLayersWizardIcon__highlight",d:"M32.206 1.588s-2.046 13.417-1.603 13.639c.787.393 2.66.63 3.785 1.636 1.23 1.1 1.171 2.5 2.318 3.239.834.538 6.73-.874 6.73-.874l.228-7.956s-.174-4.5-.89-5.216c-.716-.715-2.489-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351l-4.5-.037z"})),renderWizard:e=>Object(b.jsx)(layer_template_LayerTemplate,e),title:v.i18n.translate("xpack.maps.choropleth.title",{defaultMessage:"Choropleth"})};var $t=a(316);const qt={created:{properties:{"@timestamp":{type:"date"},user:{type:"keyword"}}}};class wizard_NewVectorLayerEditor extends n.Component{constructor(...e){super(...e),dt()(this,"_isMounted",!1),dt()(this,"state",{indexName:"",indexNameError:"",indexingTriggered:!1,createIndexError:"",userHasIndexWritePermissions:!0}),dt()(this,"_createNewIndex",(async()=>{let e;try{const t=await this._checkIndexPermissions();if(!t)return void this._setCreateIndexError(v.i18n.translate("xpack.maps.layers.newVectorLayerWizard.indexPermissionsError",{defaultMessage:"You must have 'create' and 'create_index' index privileges to create and write data to \"{indexName}\".",values:{indexName:this.state.indexName}}),t);e=(await(async({indexName:e,defaultMappings:t={}})=>await Object(He.r)().fetch({path:Ye.Q,method:"POST",version:"1",body:JSON.stringify({index:e,mappings:{properties:{coordinates:{type:"geo_shape"},...t}}})}))({indexName:this.state.indexName,defaultMappings:qt})).indexPatternId}catch(e){return void this._setCreateIndexError(e.message)}if(!e)return void this._setCreateIndexError(v.i18n.translate("xpack.maps.layers.newVectorLayerWizard.createIndexError",{defaultMessage:"Could not create index with name {message}",values:{message:this.state.indexName}}));if(!this._isMounted)return;const t=bt.ESSearchSource.createDescriptor({indexPatternId:e,geoField:"coordinates",filterByMapBounds:!1,applyGlobalQuery:!1}),a=pt.b.createDescriptor({sourceDescriptor:t},this.props.mapColors);this.props.previewLayers([a]),this.props.advanceToNextStep()})),dt()(this,"_onIndexChange",((e,t)=>{this.setState({indexName:e,indexNameError:t||""}),e&&!t?this.props.enableNextBtn():this.props.disableNextBtn()}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}async componentDidUpdate(){this.props.currentStepId!==$t.a||this.state.indexingTriggered||(this.setState({indexingTriggered:!0}),await this._createNewIndex())}_setCreateIndexError(e,t=!0){this._isMounted&&this.setState({createIndexError:e,userHasIndexWritePermissions:t})}async _checkIndexPermissions(){return await Object(He.p)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1,indexName:this.state.indexName})}render(){if(this.state.createIndexError)return this.state.userHasIndexWritePermissions?Object(b.jsx)(k.EuiCallOut,{title:v.i18n.translate("xpack.maps.layers.newVectorLayerWizard.createIndexErrorTitle",{defaultMessage:"Unable to create index"}),color:"danger",iconType:"warning"},Object(b.jsx)("p",null,this.state.createIndexError)):Object(b.jsx)(k.EuiCallOut,{title:v.i18n.translate("xpack.maps.layers.newVectorLayerWizard.indexPrivsErrorTitle",{defaultMessage:"Missing index privileges"}),color:"danger",iconType:"warning"},Object(b.jsx)("p",null,this.state.createIndexError));const e=Object(He.s)();return Object(b.jsx)(k.EuiPanel,null,Object(b.jsx)(e,{indexName:this.state.indexName,indexNameError:this.state.indexNameError,onIndexNameChange:this._onIndexChange,onIndexNameValidationStart:()=>{},onIndexNameValidationEnd:()=>{}}))}}const Ht={id:Ye.Jb.NEW_VECTOR,order:10,categories:[Ye.ab.ELASTICSEARCH],description:v.i18n.translate("xpack.maps.newVectorLayerWizard.description",{defaultMessage:"Draw shapes on the map and index in Elasticsearch"}),disabledReason:v.i18n.translate("xpack.maps.newVectorLayerWizard.disabledDesc",{defaultMessage:'Unable to create index, you are missing the Kibana privilege "Data View Management".'}),getIsDisabled:async()=>!await Object(He.p)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1}),isBeta:!0,icon:()=>Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(b.jsx)("path",{className:"mapLayersWizardIcon__background",d:"M12.281 3l-6.625 7.625 1.657 8.938 35.218-.813v-13l-10.625-3.5-9.781 9.5L12.281 3z"}),Object(b.jsx)("path",{className:"mapLayersWizardIcon__highlight",fillRule:"evenodd",d:"M31.775 1.68l11.256 3.708v13.85l-36.133.834-1.777-9.593 7.114-8.189 9.875 8.778 9.665-9.388zm.262 1.14l-9.897 9.612-9.813-8.722-6.135 7.06 1.535 8.283 34.304-.792V6.111L32.037 2.82z",clipRule:"evenodd"}),Object(b.jsx)("circle",{cx:"7.281",cy:"19.5",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"5.656",cy:"10.25",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"12.156",cy:"3.625",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"22",cy:"11.6",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"31.969",cy:"2.5",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"42.344",cy:"6.125",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(b.jsx)("circle",{cx:"42.344",cy:"19",r:"2.5",className:"mapLayersWizardIcon__highlight"})),prerequisiteSteps:[{id:"ADD_VECTOR_DRAWING_LAYER",label:v.i18n.translate("xpack.maps.newVectorLayerWizard.indexNewLayer",{defaultMessage:"Create index"})}],renderWizard:e=>Object(b.jsx)(wizard_NewVectorLayerEditor,e),showFeatureEditTools:!0,title:v.i18n.translate("xpack.maps.newVectorLayerWizard.title",{defaultMessage:"Create index"})};var Qt=a(313);let Kt=!1;async function Xt({element:e,history:t,onAppLeave:a,setHeaderActionMenu:n,theme$:i},{coreStart:o,AppUsageTracker:l,savedObjectsTagging:c}){const d=Object(He.m)().getStateTransfer();function u(e){const{embeddableId:i,originatingApp:s,valueInput:r,originatingPath:o}=d.getIncomingEditorState(Ye.e)||{};let l;return e.match.params.savedMapId?l={savedObjectId:e.match.params.savedMapId}:r&&(l=r),Object(b.jsx)(y.b,{coreStart:Object(He.e)()},Object(b.jsx)(Qe.a,{mapEmbeddableInput:l,embeddableId:i,onAppLeave:a,setHeaderActionMenu:n,stateTransfer:d,originatingApp:s,originatingPath:o,history:t,key:e.match.params.savedMapId?e.match.params.savedMapId:"new"}))}Kt||(Object(lt.d)(ht),Object(lt.d)(ft),Object(lt.d)(bt.esDocumentsLayerWizardConfig),Object(lt.d)(Jt),Object(lt.d)(Qt.b),Object(lt.d)(vt.a),Object(lt.d)(xt.b),Object(lt.d)(xt.c),Object(lt.d)(bt.esTopHitsLayerWizardConfig),Object(lt.d)(Ot.b),Object(lt.d)(yt.b),Object(lt.d)(St.b),Object(lt.d)(Ht),Object(lt.d)(Ct.a),Object(lt.d)(Et.b),Object(lt.d)(It.a),Object(lt.d)(kt.b),Object(lt.d)(Tt.b),Object(lt.d)(Ft.SecurityLayerWizardConfig),Kt=!0),function(){Object(He.z)().save||Object(He.f)().setBadge({text:v.i18n.translate("xpack.maps.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:v.i18n.translate("xpack.maps.badge.readOnly.tooltip",{defaultMessage:"Unable to save maps"}),iconType:"glasses"});const e=Object(He.k)().links.maps.guide;Object(He.f)().setHelpExtension({appName:"Maps",links:[{linkType:"documentation",href:`${e}`},{linkType:"github",title:"[Maps]",labels:["Team:Geo"]}]})}();const p=Object(He.g)().Context;return Object(s.render)(Object(b.jsx)(l,null,Object(b.jsx)(p,null,Object(b.jsx)(S.KibanaThemeProvider,{theme$:i},Object(b.jsx)(fe,{core:o,toMountPoint:S.toMountPoint,savedObjectsTagging:c,FormattedRelative:C.FormattedRelative},Object(b.jsx)(j,{history:t},Object(b.jsx)(O,null,Object(b.jsx)(g,{path:"/map/:savedMapId",render:u}),Object(b.jsx)(g,{exact:!0,path:"/map",render:u}),"// Redirect other routes to list, or if hash-containing, their non-hash equivalents",Object(b.jsx)(g,{path:"",render:({location:{pathname:e,hash:a}})=>{if(a){const e=a.substr(1);return Object(b.jsx)(r.Redirect,{to:e})}return"/"===e||""===e?Object(b.jsx)(ot,{history:t,stateTransfer:d}):Object(b.jsx)(r.Redirect,{to:"/"})}}))))))),e),()=>{Object(s.unmountComponentAtNode)(e)}}}}]);