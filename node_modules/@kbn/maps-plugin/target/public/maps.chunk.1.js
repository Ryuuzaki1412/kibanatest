/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[1],Array(76).concat([function(e,t,r){"use strict";r.d(t,"f",(function(){return n})),r.d(t,"e",(function(){return A})),r.d(t,"d",(function(){return O})),r.d(t,"a",(function(){return blended_vector_layer_BlendedVectorLayer})),r.d(t,"b",(function(){return geojson_vector_layer_GeoJsonVectorLayer})),r.d(t,"c",(function(){return mvt_vector_layer_MvtVectorLayer})),r.d(t,"g",(function(){return de}));var i=r(0);async function n({layerId:e,syncContext:t,source:r,sourceQuery:n}){const{startLoading:o,stopLoading:a,registerCancelCallback:l,dataFilters:c,isFeatureEditorOpenForLayer:u}=t,h=Symbol(`${i.yb}-${e}`),p={sourceQuery:n||void 0,query:c.query,timeFilters:c.timeFilters,timeslice:c.timeslice,embeddableSearchContext:c.embeddableSearchContext,filters:c.filters,joinKeyFilter:c.joinKeyFilter,applyGlobalQuery:r.getApplyGlobalQuery(),applyGlobalTime:r.getApplyGlobalTime(),isFeatureEditorOpenForLayer:u,executionContext:c.executionContext};let d=null;try{o(i.yb,h,p),d=await r.getBoundsForFilters(p,l.bind(null,h))}finally{a(i.yb,h,d||{})}return d}var o=r(2),a=r.n(o),l=r(4),c=r.n(l),u=r(43),h=r(48),p=r(40),d=r.n(p),f=r(15),m=r(1),g=r(125),y=r(86),v=r(3);class term_join_key_label_TermJoinKeyLabel extends l.Component{constructor(...e){super(...e),a()(this,"_isMounted",!1),a()(this,"state",{rightSourceLabels:[]})}componentDidMount(){this._isMounted=!0,this._loadRightSourceLabels()}componentWillUnmount(){this._isMounted=!1}async _loadRightSourceLabels(){const e=await Object(h.asyncMap)(this.props.termJoins,(async e=>{const t=e.getTermField();return`'${await t.getLabel()}'`}));this._isMounted&&this.setState({rightSourceLabels:e})}render(){if(0===this.state.rightSourceLabels.length)return this.props.leftFieldName;const e=m.i18n.translate("xpack.maps.tooltip.joinPropertyTooltipContent",{defaultMessage:"Shared key '{leftFieldName}' is joined with {rightSources}",values:{leftFieldName:this.props.leftFieldName,rightSources:this.state.rightSourceLabels.join(",")}});return Object(v.jsx)(c.a.Fragment,null,this.props.leftFieldName,Object(v.jsx)(f.EuiToolTip,{position:"bottom",content:e},Object(v.jsx)(f.EuiIcon,{type:"link"})))}}class term_join_tooltip_property_TermJoinTooltipProperty{constructor(e,t){a()(this,"_tooltipProperty",void 0),a()(this,"_termJoins",void 0),this._tooltipProperty=e,this._termJoins=t}isFilterable(){return!0}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return Object(v.jsx)(term_join_key_label_TermJoinKeyLabel,{leftFieldName:this._tooltipProperty.getPropertyName(),termJoins:this._termJoins})}getRawValue(){return this._tooltipProperty.getRawValue()}getHtmlDisplayValue(){return this._tooltipProperty.getHtmlDisplayValue()}async getESFilters(){const e=[];for(let t=0;t<this._termJoins.length;t++){const r=this._termJoins[t].getTermField();try{const t=await r.createTooltipProperty(this._tooltipProperty.getRawValue());if(t){const r=await t.getESFilters();e.push(...r)}}catch(e){console.error("Cannot create joined filter",e)}}return e}}var _=r(100),b=r(132),x=r(265),w=r(163),S=r(140),C=r(218),M=r(93),E=r(108);const T="SUPPORTS_FEATURE_EDITING_REQUEST_ID";function A(e){return void 0!==e.canShowTooltip}const P=Object(v.jsx)(f.EuiIcon,{size:"m",color:"subdued",type:"minusInCircle"}),O={icon:P,tooltipContent:m.i18n.translate("xpack.maps.vectorLayer.noResultsFoundTooltip",{defaultMessage:"No results found."})};class vector_layer_AbstractVectorLayer extends g.a{static createDescriptor(e,t){var r;const n=super.createDescriptor(e);if(n.type=void 0!==n.type?n.type:i.Z.GEOJSON_VECTOR,!e.style){const e=y.a.createDefaultStyleProperties(t||[]);n.style=y.a.createDescriptor(e)}return e.joins||(n.joins=[]),n.disableTooltips=null!==(r=e.disableTooltips)&&void 0!==r&&r,n}constructor({layerDescriptor:e,source:t,joins:r=[],customIcons:i,chartsPaletteServiceGetColor:n}){super({layerDescriptor:e,source:t}),a()(this,"_style",void 0),a()(this,"_joins",void 0),a()(this,"_descriptor",void 0),a()(this,"_masks",void 0),this._joins=r,this._descriptor=vector_layer_AbstractVectorLayer.createDescriptor(e),this._style=new y.a(this._descriptor.style,t,this,i,n),this._masks=this._createMasks()}async cloneDescriptor(){const e=await super.cloneDescriptor();if(0===e.length)return[];const t=e[0];return t.joins&&t.joins.forEach((e=>{var r;if(!e.right)return;const n=e.right,o=null!==(r=n.id)&&void 0!==r?r:"",a=Object(u.v4)();var l;(e.right.id=a,t.style&&"properties"in t.style)&&(null!==(l=n.metrics)&&void 0!==l?l:[{type:i.b.COUNT}]).forEach((e=>{const r=Object(M.a)({aggType:e.type,aggFieldName:"field"in e?e.field:"",rightSourceId:o}),n=Object(M.a)({aggType:e.type,aggFieldName:"field"in e?e.field:"",rightSourceId:a});Object.keys(t.style.properties).forEach((e=>{const o=t.style.properties[e];if("type"in o&&o.type===i.Eb.DYNAMIC){const e=o.options;e.field&&e.field.origin===i.D.JOIN&&e.field.name===r&&(e.field.name=n)}}))}))})),[t]}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}getJoins(){return this._joins.slice()}getValidJoins(){return this.getJoins().filter((e=>e.hasCompleteConfig()))}supportsFeatureEditing(){const e=this.getDataRequest(T),t=null==e?void 0:e.getData();return!!t&&t.supportsFeatureEditing}hasJoins(){return this.getValidJoins().length>0}_isLoadingJoins(){return this.getValidJoins().some((e=>{const t=this.getDataRequest(e.getSourceDataRequestId());return!t||t.isLoading()}))}_getSourceErrorTitle(){return m.i18n.translate("xpack.maps.vectorLayer.sourceErrorTitle",{defaultMessage:"An error occurred when loading layer features"})}getErrors(){const e=super.getErrors();return this.getValidJoins().forEach((t=>{const r=this.getDataRequest(t.getSourceDataRequestId()),i=null==r?void 0:r.renderError();i&&e.push({title:m.i18n.translate("xpack.maps.vectorLayer.joinFetchErrorTitle",{defaultMessage:"An error occurred when loading join metrics"}),body:i})})),e}getLayerIcon(e){throw new Error("Should implement AbstractVectorLayer#getLayerIcon")}getLayerTypeIconName(){return"vector"}async hasLegendDetails(){return this.getCurrentStyle().hasLegendDetails()}renderLegendDetails(){return this.getCurrentStyle().renderLegendDetails()}async getBounds(e){return n({layerId:this.getId(),syncContext:e(this.getId()),source:this.getSource(),sourceQuery:this.getQuery()})}async getLeftJoinFields(){return await this.getSource().getLeftJoinFields()}_getJoinFields(){const e=[];return this.getValidJoins().forEach((t=>{const r=t.getJoinFields();e.push(...r)})),e}async getFields(){return[...await this.getSource().getFields(),...this._getJoinFields()]}async getStyleEditorFields(){return[...await this.getSourceForEditing().getFields(),...this._getJoinFields()]}getIndexPatternIds(){const e=this.getSource().getIndexPatternIds();return this.getValidJoins().forEach((t=>{e.push(...t.getIndexPatternIds())})),e}getQueryableIndexPatternIds(){const e=this.getSource().getQueryableIndexPatternIds();return this.getValidJoins().forEach((t=>{e.push(...t.getQueryableIndexPatternIds())})),e}async isFilteredByGlobalTime(){if(this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware())return!0;const e=this.getValidJoins().map((async e=>e.getRightJoinSource().getApplyGlobalTime()&&await e.getRightJoinSource().isTimeAware()));return(await Promise.all(e)).some((e=>e))}async _getVectorSourceRequestMeta(e,t,r,i,n){const o=[...i.getSourceFieldNames(),...this.getValidJoins().filter((e=>!Object(w.a)(e.toDescriptor()))).map((e=>e.getLeftField().getName()))],a=await r.getTimesliceMaskFieldName();return a&&o.push(a),Object(C.a)(r,o,t,this.getQuery(),e,n)}async _syncSourceStyleMeta(e,t,r){const n=this.getQuery();return this._syncStyleMeta({source:t,style:r,sourceQuery:n||void 0,dataRequestId:i.Bb,dynamicStyleProps:r.getDynamicPropertiesArray().filter((e=>e.getFieldOrigin()===i.D.SOURCE&&e.isFieldMetaEnabled())),...e})}async _syncStyleMeta({source:e,style:t,sourceQuery:r,dataRequestId:i,dynamicStyleProps:n,dataFilters:o,startLoading:a,stopLoading:l,onLoadError:c,registerCancelCallback:u,inspectorAdapters:h}){if(!e.isESSource()||0===n.length)return;const p=n.map((e=>`${e.getFieldName()}${e.getStyleMetaHash()}`)),f={dynamicStyleFields:d.a.uniq(p).sort(),sourceQuery:r,isTimeAware:this.getCurrentStyle().isTimeAware()&&await e.isTimeAware(),timeFilters:o.timeFilters,searchSessionId:o.searchSessionId},m=this.getDataRequest(i);if(Object(b.c)({prevDataRequest:m,nextMeta:f}))return;const g=Symbol(`layer-${this.getId()}-${i}`);try{a(i,g,f);const r=await this.getDisplayName(e),{styleMeta:c,warnings:p}=await e.loadStylePropsMeta({layerName:r,style:t,dynamicStyleProps:n,registerCancelCallback:u.bind(null,g),sourceQuery:f.sourceQuery,timeFilters:f.timeFilters,searchSessionId:o.searchSessionId,inspectorAdapters:h,executionContext:o.executionContext});l(i,g,c,{...f,warnings:p})}catch(e){throw e instanceof _.b||c(i,g,e),e}}async _syncSourceFormatters(e,t,r){return this._syncFormatters({source:t,dataRequestId:i.Ab,fields:r.getDynamicPropertiesArray().filter((e=>e.getFieldOrigin()===i.D.SOURCE)).map((e=>e.getField())),...e})}async _syncFormatters({source:e,dataRequestId:t,fields:r,startLoading:i,stopLoading:n,onLoadError:o}){if(0===r.length)return;const a=r.map((e=>e.getName())),l={fieldNames:d.a.uniq(a).sort()},c=this.getDataRequest(t);if(Object(b.a)({prevDataRequest:c,nextMeta:l}))return;const u=Symbol(`layer-${this.getId()}-${t}`);try{i(t,u,l);const o={},a=r.filter((e=>e.canValueBeFormatted())).map((async t=>{o[t.getName()]=await e.createFieldFormatter(t)}));await Promise.all(a),n(t,u,o,l)}catch(e){throw o(t,u,e),e}}async _syncJoin({join:e,joinIndex:t,featureCollection:r,startLoading:i,stopLoading:n,onLoadError:o,registerCancelCallback:a,dataFilters:l,isForceRefresh:c,isFeatureEditorOpenForLayer:u,inspectorAdapters:h}){const p=e.getRightJoinSource(),d=e.getSourceDataRequestId(),f=Symbol(`layer-join-refresh:${this.getId()} - ${d}`),m=Object(C.a)(p,[],l,p.getWhereQuery(),c,u),g=this.getDataRequest(d);if(await Object(b.b)({source:p,prevDataRequest:g,nextRequestMeta:m,extentAware:!1,getUpdateDueToTimeslice:()=>!0}))return{dataHasChanged:!1,join:e,joinIndex:t,joinMetrics:null==g?void 0:g.getData()};try{i(d,f,m);const{joinMetrics:o,warnings:l}=await p.getJoinMetrics(m,await this.getDisplayName(),a.bind(null,f),h,r);return n(d,f,o,{warnings:l}),{dataHasChanged:!0,join:e,joinIndex:t,joinMetrics:o}}catch(e){throw e instanceof _.b||o(d,f,e),e}}async _syncJoins(e,t,r){const i=this.getJoins().map(((e,t)=>({join:e,joinIndex:t}))).filter((({join:e})=>e.hasCompleteConfig())),n=[];return await Object(h.asyncForEach)(i,(async({join:i,joinIndex:o})=>{await this._syncJoinStyleMeta(e,i,t),await this._syncJoinFormatters(e,i,t);const a=await this._syncJoin({join:i,joinIndex:o,featureCollection:r,...e});n.push(a)})),n}async _syncJoinStyleMeta(e,t,r){const n=t.getRightJoinSource();return this._syncStyleMeta({source:n,style:r,sourceQuery:n.getWhereQuery(),dataRequestId:t.getSourceMetaDataRequestId(),dynamicStyleProps:this.getCurrentStyle().getDynamicPropertiesArray().filter((e=>{const t=n.getFieldByName(e.getFieldName());return e.getFieldOrigin()===i.D.JOIN&&!!t&&e.isFieldMetaEnabled()})),...e})}async _syncJoinFormatters(e,t,r){const n=t.getRightJoinSource();return this._syncFormatters({source:n,dataRequestId:t.getSourceFormattersDataRequestId(),fields:r.getDynamicPropertiesArray().filter((e=>{const t=n.getFieldByName(e.getFieldName());return e.getFieldOrigin()===i.D.JOIN&&!!t})).map((e=>e.getField())),...e})}async _syncSupportsFeatureEditing({syncContext:e,source:t}){if(e.dataFilters.isReadOnly)return;const{startLoading:r,stopLoading:i,onLoadError:n}=e,o=T,a=Symbol(`layer-${this.getId()}-${o}`);if(!this.getDataRequest(o))try{r(o,a),i(o,a,{supportsFeatureEditing:await t.supportsFeatureEditing()})}catch(e){throw n(o,a,e),e}}_getJoinFilterExpression(){}_createMasks(){const e=[],t=this.getSource();return"getMetricFields"in t&&t.getMetricFields().forEach((r=>{const i=r.getMask();i&&e.push(new E.d({esAggField:r,isGeometrySourceMvt:t.isMvt(),...i}))})),this.getValidJoins().forEach((r=>{const i=r.getRightJoinSource();"getMetricFields"in i&&i.getMetricFields().forEach((r=>{const i=r.getMask();i&&e.push(new E.d({esAggField:r,isGeometrySourceMvt:t.isMvt(),...i}))}))})),e}getMasks(){return this._masks}_getAlphaExpression(){const e=[];return this.getMasks().forEach((t=>{e.push(t.getMatchMaskedExpression()),e.push(0)})),e.length?["case",...e,this.getAlpha()]:this.getAlpha()}_setMbPointsProperties(e,t,r){const i=this.getId(),n=this._getMbLabelLayerId(),o=this._getMbPointLayerId(),a=this._getMbSymbolLayerId(),l=e.getLayer(o),c=e.getLayer(a);let u;if(this.getCurrentStyle().arePointsSymbolizedAsCircles()){if(u=o,!l){const r={id:o,type:"circle",source:i,paint:{}};t&&(r["source-layer"]=t),e.addLayer(r,n)}c&&e.setLayoutProperty(a,"visibility","none")}else{if(u=a,!c){const r={id:a,type:"symbol",source:i};t&&(r["source-layer"]=t),e.addLayer(r,n)}l&&e.setLayoutProperty(o,"visibility","none")}const h=!this.getSource().isMvt(),p=Object(x.e)(h,this.getSource().isESSource(),this._getJoinFilterExpression(),r);d.a.isEqual(p,e.getFilter(u))||e.setFilter(u,p),this.getCurrentStyle().arePointsSymbolizedAsCircles()?this.getCurrentStyle().setMBPaintPropertiesForPoints({alpha:this._getAlphaExpression(),mbMap:e,pointLayerId:u}):this.getCurrentStyle().setMBSymbolPropertiesForPoints({alpha:this._getAlphaExpression(),mbMap:e,symbolLayerId:u}),this.syncVisibilityWithMb(e,u),e.setLayerZoomRange(u,this.getMinZoom(),this.getMaxZoom())}_setMbLinePolygonProperties(e,t,r){const i=this.getId(),n=this._getMbLabelLayerId(),o=this._getMbPolygonLayerId(),a=this._getMbLineLayerId();if(!e.getLayer(o)){const r={id:o,type:"fill",source:i,paint:{}};t&&(r["source-layer"]=t),e.addLayer(r,n)}if(!e.getLayer(a)){const r={id:a,type:"line",source:i,paint:{}};t&&(r["source-layer"]=t),e.addLayer(r,n)}this.getCurrentStyle().setMBPaintProperties({alpha:this._getAlphaExpression(),mbMap:e,fillLayerId:o,lineLayerId:a});const l=this._getJoinFilterExpression();this.syncVisibilityWithMb(e,o),e.setLayerZoomRange(o,this.getMinZoom(),this.getMaxZoom());const c=Object(x.b)(l,r);d.a.isEqual(c,e.getFilter(o))||e.setFilter(o,c),this.syncVisibilityWithMb(e,a),e.setLayerZoomRange(a,this.getMinZoom(),this.getMaxZoom());const u=Object(x.d)(l,r);d.a.isEqual(u,e.getFilter(a))||e.setFilter(a,u)}_setMbLabelProperties(e,t,r){const i=this._getMbLabelLayerId();if(!e.getLayer(i)){const r={id:i,type:"symbol",source:this.getId()};t&&(r["source-layer"]=t),e.addLayer(r)}const n=!this.getSource().isMvt(),o=Object(x.c)(n,this.getSource().isESSource(),this._getJoinFilterExpression(),r);d.a.isEqual(o,e.getFilter(i))||e.setFilter(i,o),this.getCurrentStyle().setMBPropertiesForLabelText({alpha:this._getAlphaExpression(),mbMap:e,textLayerId:i}),this.syncVisibilityWithMb(e,i)}_getMbPointLayerId(){return this.makeMbLayerId("circle")}_getMbLabelLayerId(){return this.makeMbLayerId("label")}_getMbSymbolLayerId(){return this.makeMbLayerId("symbol")}_getMbLineLayerId(){return this.makeMbLayerId("line")}_getMbPolygonLayerId(){return this.makeMbLayerId("fill")}getMbTooltipLayerIds(){return[this._getMbPointLayerId(),this._getMbLabelLayerId(),this._getMbSymbolLayerId(),this._getMbLineLayerId(),this._getMbPolygonLayerId()]}getMbLayerIds(){return this.getMbTooltipLayerIds()}ownsMbLayerId(e){return this.getMbLayerIds().includes(e)}ownsMbSourceId(e){return this.getId()===e}_addJoinsToSourceTooltips(e){for(let t=0;t<e.length;t++){const r=e[t],i=[];for(let e=0;e<this.getJoins().length;e++){const t=this.getJoins()[e].getRightJoinSource();Object(S.f)(t)&&this.getJoins()[e].getLeftField().getName()===r.getPropertyKey()&&i.push(t)}i.length&&(e[t]=new term_join_tooltip_property_TermJoinTooltipProperty(r,i))}}async getPropertiesForTooltip(e,t){const r=this.getSource();let i=await r.getTooltipProperties(e,t);this._addJoinsToSourceTooltips(i);for(let r=0;r<this.getJoins().length;r++){const n=await this.getJoins()[r].getTooltipProperties(e,t);i=[...i,...n]}return i}canShowTooltip(){return this.getSource().hasTooltipProperties()||this.getJoins().length>0}areTooltipsDisabled(){var e;return null!==(e=this._descriptor.disableTooltips)&&void 0!==e&&e}getFeatureId(e){throw new Error("Should implement AbstractVectorLayer#getFeatureId")}getFeatureById(e){throw new Error("Should implement AbstractVectorLayer#getFeatureById")}async getLicensedFeatures(){return await this._source.getLicensedFeatures()}async addFeature(e){const t=this.getSource();await t.addFeature(e)}async deleteFeature(e){const t=this.getSource();await t.deleteFeature(e)}async getStyleMetaDescriptorFromLocalFeatures(){throw new Error("Should implement AbstractVectorLayer#getStyleMetaDescriptorFromLocalFeatures")}}var I=r(299),k=r(568),F=r.n(k),D=r(570),j=r.n(D),z=r(571),N=r.n(z),B=r(579),V=r.n(B),U=r(89);function H(e){let t=null;if(e.geometry.type===i.J.LINE_STRING)t=G(e);else if(e.geometry.type===i.J.MULTI_LINE_STRING){const r=e.geometry.coordinates;let i=r[0],n=V()(Object(U.lineString)(i));for(let e=1;e<r.length;e++){const t=r[e],o=V()(Object(U.lineString)(t));o>n&&(i=t,n=o)}t=G(Object(U.lineString)(i))}else if(e.geometry.type===i.J.POLYGON)t=N()(e).geometry;else if(e.geometry.type===i.J.MULTI_POLYGON){const r=e.geometry.coordinates;let i=r[0],n=j()(Object(U.polygon)(i));for(let e=1;e<r.length;e++){const t=r[e],o=j()(Object(U.polygon)(t));o>n&&(i=t,n=o)}t=N()(Object(U.polygon)(i)).geometry}else if(e.geometry.type===i.J.GEOMETRY_COLLECTION&&e.geometry.geometries.length){const r=e.geometry.geometries[0];if(r.type===i.J.POINT)t=r;else{if(r.type!==i.J.MULTI_POINT)return H({...e,geometry:r});t={type:"Point",coordinates:r.coordinates[0]}}}return t?{type:"Feature",id:e.id,properties:{...e.properties,[i.U]:!0},geometry:t}:null}function G(e){const t=V()(e);return F()(e,t/2).geometry}let q=0;function Z(){const e=q<Number.MAX_SAFE_INTEGER?q:0;return q=e+1,e}function $(e){return e.length<=5?e.join(","):e.slice(0,5).join(",")+m.i18n.translate("xpack.maps.vectorLayer.joinError.firstTenMsg",{defaultMessage:" (5 of {total})",values:{total:e.length}})}var W=r(124);const X=[i.J.POINT,i.J.MULTI_POINT],Y=[i.J.LINE_STRING,i.J.MULTI_LINE_STRING],K=[i.J.POLYGON,i.J.MULTI_POLYGON];function J(e,t,r){return 1===t.length?t[0]===e:Object.keys(r).reduce(((t,i)=>{const n=r[i];return i===e?t&&n:t&&!n}),!0)}class geojson_vector_layer_GeoJsonVectorLayer extends vector_layer_AbstractVectorLayer{static createDescriptor(e,t){const r=super.createDescriptor(e);if(r.type=i.Z.GEOJSON_VECTOR,!e.style){const e=y.a.createDefaultStyleProperties(t||[]);r.style=y.a.createDescriptor(e)}return e.joins||(r.joins=[]),r}isLayerLoading(e){var t;if(!this.isVisible()||!this.showAtZoomLevel(e))return!1;if(super.isLayerLoading(e))return!0;const r=this._getSourceFeatureCollection();return!(!r||0===(null==r||null===(t=r.features)||void 0===t?void 0:t.length))&&this._isLoadingJoins()}_isTiled(){return!1}async getBounds(e){return!this.getSource().isBoundsAware()||this.hasJoins()?Object(I.a)(this._getSourceFeatureCollection(),this.hasJoins()):super.getBounds(e)}getLayerIcon(e){const t=this._getSourceFeatureCollection();if(!t||0===t.features.length)return O;if(this.getJoins().length&&!t.features.some((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t[i.C]})))return{icon:P,tooltipContent:m.i18n.translate("xpack.maps.vectorLayer.noResultsFoundInJoinTooltip",{defaultMessage:"No matching results found in term joins"})};const r=this.getSourceDataRequest(),{tooltipContent:n,areResultsTrimmed:o,isDeprecated:a}=this.getSource().getSourceStatus(r);return{icon:a?Object(v.jsx)(f.EuiIcon,{type:"warning",color:"danger"}):this.getCurrentStyle().getIcon(e&&o),tooltipContent:n,areResultsTrimmed:o}}getFeatureId(e){var t;return null===(t=e.properties)||void 0===t?void 0:t[i.H]}getFeatureById(e){const t=this._getSourceFeatureCollection();if(!t)return null;return t.features.find((t=>this.getFeatureId(t)===e))||null}async getStyleMetaDescriptorFromLocalFeatures(){const e=this.getSourceDataRequest();return this.getCurrentStyle()&&e?await async function(e,t,r){const n={[i.Hb.POINT]:!1,[i.Hb.LINE]:!1,[i.Hb.POLYGON]:!1};if(t.length>1)for(let t=0;t<e.length;t++){var o;const r=e[t];null!==(o=r.properties)&&void 0!==o&&o[i.U]||(!n[i.Hb.POINT]&&X.includes(r.geometry.type)&&(n[i.Hb.POINT]=!0),!n[i.Hb.LINE]&&Y.includes(r.geometry.type)&&(n[i.Hb.LINE]=!0),!n[i.Hb.POLYGON]&&K.includes(r.geometry.type)&&(n[i.Hb.POLYGON]=!0))}const a={geometryTypes:{isPointsOnly:J(i.Hb.POINT,t,n),isLinesOnly:J(i.Hb.LINE,t,n),isPolygonsOnly:J(i.Hb.POLYGON,t,n)},fieldMeta:{}};return 0===r.length||0===e.length||r.forEach((t=>{const r=t.getFieldName();a.fieldMeta[r]||(a.fieldMeta[r]={categories:[]});const i=function(e,t){const r=e.getNumberOfCategories();if(!e.isCategorical()||r<=0)return[];const i=new Map;for(let r=0;r<t.length;r++){const n=t[r],o=n.properties?n.properties[e.getFieldName()]:void 0;void 0!==typeof o&&(i.has(o)?i.set(o,i.get(o)+1):i.set(o,1))}const n=[];for(const[e,t]of i)n.push({key:e,count:t});if(n.sort(((e,t)=>t.count-e.count)),n.length<=r)return n;const o=n.slice(0,r);let a=0;for(let e=r;e<n.length;e++)a+=n[e].count;return[...o,{key:W.b,count:a}]}(t,e);i.length&&(a.fieldMeta[r].categories=i);const n=function(e,t){const r=e.getField();if(!r||!e.isOrdinal())return null;const i=e.getFieldName(),n=r.isCount();let o=n?1:1/0,a=-1/0;for(let e=0;e<t.length;e++){const r=t[e],l=r.properties?parseFloat(r.properties[i]):NaN;isNaN(l)||(n||(o=Math.min(o,l)),a=Math.max(a,l))}return o===1/0||a===-1/0?null:{min:o,max:a,delta:a-o}}(t,e);n&&(a.fieldMeta[r].range=n)})),a}(d.a.get(e.getData(),"features",[]),await this.getSource().getSupportedShapeTypes(),this.getCurrentStyle().getDynamicPropertiesArray()):null}getErrors(){const e=super.getErrors();return this.getValidJoins().forEach((t=>{const r=t.toDescriptor();r.error&&e.push({title:m.i18n.translate("xpack.maps.geojsonVectorLayer.joinErrorTitle",{defaultMessage:"An error occurred when adding join metrics to layer features"}),body:r.error})})),e}_requiresPrevSourceCleanup(e){const t=e.getSource(this.getMbSourceId());return!!t&&"geojson"!==t.type}syncLayerWithMB(e,t){this._removeStaleMbSourcesAndLayers(e);const r=this.getMbSourceId();e.getSource(r)||e.addSource(r,{type:"geojson",data:i.z}),this._syncFeatureCollectionWithMb(e);const n=this._getTimesliceMaskConfig(t);this._setMbLabelProperties(e,void 0,n),this._setMbPointsProperties(e,void 0,n),this._setMbLinePolygonProperties(e,void 0,n)}_getJoinFilterExpression(){return this.hasJoins()?["==",["get",i.C],!0]:void 0}_syncFeatureCollectionWithMb(e){const t=e.getSource(this.getId()),r=this._getSourceFeatureCollection(),n=g.a.getBoundDataForSource(e,this.getId());if(!r)return n&&this.getCurrentStyle().clearFeatureState(n,e,this.getId()),void t.setData(i.z);const o=this.getCurrentStyle().setFeatureStateAndStyleProps(r,e,this.getId());(r!==n||o)&&t.setData(r)}_getTimesliceMaskConfig(e){var t;if(!e||this.hasJoins())return;const r=null===(t=this.getSourceDataRequest())||void 0===t?void 0:t.getMeta();return void 0!==r&&void 0!==r.timesliceMaskField?{timesliceMaskField:r.timesliceMaskField,timeslice:e}:void 0}async syncData(e){await this._syncData(e,this.getSource(),this.getCurrentStyle())}_isLoadingBounds(){const e=this.getDataRequest(i.yb);return!!e&&e.isLoading()}async _syncData(e,t,r){if(!this._isLoadingBounds())try{await this._syncSourceStyleMeta(e,t,r),await this._syncSourceFormatters(e,t,r);const n=await async function({layerId:e,layerName:t,prevDataRequest:r,requestMeta:n,syncContext:o,source:a,getUpdateDueToTimeslice:l}){const{startLoading:c,stopLoading:u,onLoadError:h,registerCancelCallback:p,isRequestStillActive:f}=o,m=i.zb,g=Symbol(`${e}-${m}`);if(!o.forceRefreshDueToDrawing&&await Object(b.b)({source:a,prevDataRequest:r,nextRequestMeta:n,extentAware:a.isFilterByMapBounds(),getUpdateDueToTimeslice:l}))return{refreshed:!1,featureCollection:r?r.getData():i.z};try{c(m,g,n);const{data:e,meta:r}=await a.getGeoJsonWithMeta(t,n,p.bind(null,g),(()=>f(m,g)),o.inspectorAdapters),l=function(e){const t=[];for(let r=0;r<e.features.length;r++){const e=Z();t.push(e)}const r=d.a.shuffle(t),n=[];for(let t=0;t<e.features.length;t++){const o=r[t],a=e.features[t];n.push({type:"Feature",geometry:a.geometry,properties:{[i.H]:null==a.id?o:a.id,...a.properties},id:o})}return{type:"FeatureCollection",features:n}}(e),h=await a.getSupportedShapeTypes();(h.includes(i.Hb.LINE)||h.includes(i.Hb.POLYGON))&&l.features.push(...function(e){const t=[];for(let r=0;r<e.features.length;r++){const i=H(e.features[r]);i&&t.push(i)}return t}(l));const y=r?{...r}:{};if(n.applyGlobalTime&&await a.isTimeAware()){const e=await a.getTimesliceMaskFieldName();e&&(y.timesliceMaskField=e)}return u(m,g,l,y),{refreshed:!0,featureCollection:l}}catch(e){throw e instanceof _.b||h(m,g,e),e}}({layerId:this.getId(),layerName:await this.getDisplayName(t),prevDataRequest:this.getSourceDataRequest(),requestMeta:await this._getVectorSourceRequestMeta(e.isForceRefresh,e.dataFilters,t,r,e.isFeatureEditorOpenForLayer),syncContext:e,source:t,getUpdateDueToTimeslice:e=>this._getUpdateDueToTimesliceFromSourceRequestMeta(t,e)});if(await this._syncSupportsFeatureEditing({syncContext:e,source:t}),!n.featureCollection||!n.featureCollection.features.length||!this.hasJoins())return;const o=await this._syncJoins(e,r,n.featureCollection);await async function(e,t,r,n){let o=e.refreshed||t.some((e=>e.dataHasChanged));if(!o)return;const a=t.map((e=>({joinedWithAtLeastOneFeature:!1,keys:[],joinState:e})));for(let r=0;r<e.featureCollection.features.length;r++){const n=e.featureCollection.features[r];n.properties||(n.properties={});const l=n.properties[i.C];let c=!0;for(let e=0;e<t.length;e++){const r=t[e],i=r.join,o=a[e],l=i.getJoinKey(n);null!==l&&o.keys.push(l);const u=!!r.joinMetrics&&i.joinPropertiesToFeature(n,r.joinMetrics);u&&!o.joinedWithAtLeastOneFeature&&(o.joinedWithAtLeastOneFeature=!0),c=c&&u}l!==c&&(o=!0),n.properties[i.C]=c}o&&r({...e.featureCollection}),await Object(h.asyncForEach)(a,(async e=>{n(e.joinState.joinIndex,await async function(e){if(!Object(S.f)(e.joinState.join.getRightJoinSource()))return;if(!(e.joinState.joinMetrics&&e.joinState.joinMetrics.size>0)||e.joinedWithAtLeastOneFeature)return;const t=await e.joinState.join.getLeftField().getLabel(),r=e.joinState.join.getRightJoinSource(),i=await r.getTermField().getLabel();return 0===e.keys.length?m.i18n.translate("xpack.maps.vectorLayer.joinError.noLeftFieldValuesMsg",{defaultMessage:"Left field: '{leftFieldName}', did not provide any values.",values:{leftFieldName:t}}):m.i18n.translate("xpack.maps.vectorLayer.joinError.noMatchesMsg",{defaultMessage:"Left field values do not match right field values. Left field: '{leftFieldName}' has values: { leftFieldValues }. Right field: '{rightFieldName}' has values: { rightFieldValues }.",values:{leftFieldName:t,leftFieldValues:$(e.keys),rightFieldName:i,rightFieldValues:$(Array.from(e.joinState.joinMetrics.keys()))}})}(e))}))}(n,o,e.updateSourceData,e.setJoinError)}catch(e){}}_getSourceFeatureCollection(){const e=this.getSourceDataRequest();return e?e.getData():null}_getUpdateDueToTimesliceFromSourceRequestMeta(e,t){const r=this.getSourceDataRequest(),i=null==r?void 0:r.getMeta();return!i||e.getUpdateDueToTimeslice(i,t)}}var ee=r(83),te=r(103),re=r(208);const ie="ACTIVE_COUNT_DATA_ID";function ne(e){return e.isOrdinal()?i.b.AVG:i.b.TERMS}class blended_vector_layer_BlendedVectorLayer extends geojson_vector_layer_GeoJsonVectorLayer{static createDescriptor(e,t){const r=geojson_vector_layer_GeoJsonVectorLayer.createDescriptor(e,t);return r.type=i.Z.BLENDED_VECTOR,r}constructor(e){super({...e,joins:[]}),a()(this,"_isClustered",void 0),a()(this,"_clusterSource",void 0),a()(this,"_clusterStyle",void 0),a()(this,"_documentSource",void 0),a()(this,"_documentStyle",void 0),a()(this,"getSource",(()=>this._isClustered?this._clusterSource:this._documentSource)),this._documentSource=this._source,this._documentStyle=this._style,this._clusterSource=function(e,t){const r=te.a.createDescriptor({indexPatternId:e.getIndexPatternId(),geoField:e.getGeoFieldName(),requestType:i.ub.POINT,resolution:i.L.COARSE});return r.applyGlobalQuery=e.getApplyGlobalQuery(),r.applyGlobalTime=e.getApplyGlobalTime(),r.applyForceRefresh=e.getApplyForceRefresh(),r.metrics=[{type:i.b.COUNT},...t.getDynamicPropertiesArray().map((e=>({type:ne(e),field:e.getFieldName()})))],r.id=e.getId(),new te.a(r)}(this._documentSource,this._documentStyle);const t=function(e,t){const r=Object(ee.i)(),n={type:i.Y.VECTOR,properties:{[i.Ib.LABEL_TEXT]:{type:i.Eb.DYNAMIC,options:{...r[i.Ib.LABEL_TEXT].options,field:{name:i.k,origin:i.D.SOURCE}}},[i.Ib.ICON_SIZE]:{type:i.Eb.DYNAMIC,options:{...r[i.Ib.ICON_SIZE].options,field:{name:i.k,origin:i.D.SOURCE}}}},isTimeAware:!0};return e.getAllStyleProperties().forEach((e=>{const r=e.getStyleName();if(![i.Ib.LABEL_TEXT,i.Ib.ICON_SIZE].includes(r)||e.isDynamic()&&e.isComplete())if(r===i.Ib.SYMBOLIZE_AS||r===i.Ib.LABEL_BORDER_SIZE)n.properties[r]={options:{...e.getOptions()}};else if(e.isDynamic()){const o=e.getOptions(),a=o&&o.field&&o.field.name?{...o.field,name:t.getAggKey(ne(e),o.field.name)}:void 0;n.properties[r]={type:i.Eb.DYNAMIC,options:{...o,field:a}}}else n.properties[r]={type:i.Eb.STATIC,options:{...e.getOptions()}}})),n}(this._documentStyle,this._clusterSource);this._clusterStyle=new y.a(t,this._clusterSource,this,e.customIcons,e.chartsPaletteServiceGetColor);let r=!1;const n=this.getDataRequest(ie);if(n){const e=n.getData();e&&e.isSyncClustered&&(r=!0)}this._isClustered=r}async getDisplayName(e){const t=await super.getDisplayName(e);return this._isClustered?m.i18n.translate("xpack.maps.blendedVectorLayer.clusteredLayerName",{defaultMessage:"Clustered {displayName}",values:{displayName:t}}):t}getJoins(){return[]}hasJoins(){return!1}async cloneDescriptor(){const e=await super.cloneDescriptor();if(0===e.length)return[];const t=e[0],r=await super.getDisplayName();return t.label=`Clone of ${r}`,t.sourceDescriptor=this._documentSource.cloneDescriptor(),[t]}getSourceForEditing(){return this._documentSource}getCurrentStyle(){return this._isClustered?this._clusterStyle:this._documentStyle}getStyleForEditing(){return this._documentStyle}async syncData(e){const t=ie,r=Symbol(`layer-active-count:${this.getId()}`),i=await this._getVectorSourceRequestMeta(e.isForceRefresh,e.dataFilters,this.getSource(),this.getCurrentStyle(),e.isFeatureEditorOpenForLayer),n=this.getSource();let o,a;if(await Object(b.b)({source:n,prevDataRequest:this.getDataRequest(t),nextRequestMeta:i,extentAware:n.isFilterByMapBounds(),getUpdateDueToTimeslice:e=>this._getUpdateDueToTimesliceFromSourceRequestMeta(n,e)}))this._isClustered?(o=this._clusterSource,a=this._clusterStyle):(o=this._documentSource,a=this._documentStyle);else{let n;try{e.startLoading(t,r,i);const o=[];n=!await this._documentSource.canLoadAllDocuments(await this.getDisplayName(this._documentSource),i,e.registerCancelCallback.bind(null,r),e.inspectorAdapters,(e=>{o.push(e)})),e.stopLoading(t,r,{isSyncClustered:n},{...i,warnings:o})}catch(i){return void(i instanceof _.b&&Object(re.b)(i)||e.onLoadError(t,r,i))}n?(this._isClustered=!0,o=this._clusterSource,a=this._clusterStyle):(this._isClustered=!1,o=this._documentSource,a=this._documentStyle)}super._syncData(e,o,a)}async getLicensedFeatures(){return[...await this._clusterSource.getLicensedFeatures(),...await this._documentSource.getLicensedFeatures()]}}var se=r(46),ae=r(79);async function de({buffer:e,hasLabels:t,layerId:r,layerName:n,prevDataRequest:o,requestMeta:a,source:l,syncContext:c}){const h=Symbol(`${r}-${i.zb}`),p=o?o.getData():void 0;if(p){const r=p.tileSourceLayer===l.getTileSourceLayer()&&p.tileMinZoom===l.getMinZoom()&&p.tileMaxZoom===l.getMaxZoom(),i=await Object(b.b)({extentAware:!1,source:l,prevDataRequest:o,nextRequestMeta:a,getUpdateDueToTimeslice:e=>!0});if(!c.forceRefreshDueToDrawing&&r&&i&&p.hasLabels===t&&p.buffer===e)return}c.startLoading(i.zb,h,a);try{const o=!p||c.forceRefreshDueToDrawing||a.isForceRefresh&&a.applyForceRefresh?Object(u.v4)():p.refreshToken,d=await l.getTileUrl(a,o,t,e);l.isESSource()&&c.inspectorAdapters.vectorTiles.addLayer(r,n,d);const f={tileUrl:d,tileSourceLayer:l.getTileSourceLayer(),tileMinZoom:l.getMinZoom(),tileMaxZoom:l.getMaxZoom(),refreshToken:o,hasLabels:t,buffer:e};c.stopLoading(i.zb,h,f,{})}catch(e){c.onLoadError(i.zb,h,e)}}var fe=r(114);const me="maxResultWindow";class mvt_vector_layer_MvtVectorLayer extends vector_layer_AbstractVectorLayer{static createDescriptor(e,t){const r=super.createDescriptor(e,t);if(r.type=i.Z.MVT_VECTOR,!r.style){const e=y.a.createDefaultStyleProperties(t||[]);r.style=y.a.createDescriptor(e)}return r}constructor(e){super(e),a()(this,"_source",void 0),this._source=e.source}isLayerLoading(e){return!(!this.isVisible()||!this.showAtZoomLevel(e))&&(!!super.isLayerLoading(e)||this._isLoadingJoins())}_isTiled(){return!0}async getBounds(e){let t;if(this.getSource().isESSource()){const{join:e,joinPropertiesMap:r}=this._getJoinResults();if(e&&r){const i=await this.getSource().getIndexPattern(),n=Object(ae.l)(i,e.getLeftField().getName());t=Object(se.buildPhrasesFilter)(n,Array.from(r.keys()),i)}}const r=e(this.getId());return n({layerId:this.getId(),syncContext:{...r,dataFilters:{...r.dataFilters,joinKeyFilter:t}},source:this.getSource(),sourceQuery:this.getQuery()})}getFeatureId(e){var t,r;return this.getSource().isESSource()?this.getSource().getType()===i.Cb.ES_SEARCH?null===(t=e.properties)||void 0===t?void 0:t._id:null===(r=e.properties)||void 0===r?void 0:r._key:e.id}getLayerIcon(e){if(!this.getSource().isESSource())return{icon:this.getCurrentStyle().getIcon(!1),tooltipContent:null,areResultsTrimmed:!1};if(this.getSource().getType()===i.Cb.ES_GEO_GRID){const{docCount:e}=Object(fe.e)(this._getTileMetaFeatures());return 0===e?O:{icon:this.getCurrentStyle().getIcon(!1),tooltipContent:null,areResultsTrimmed:!1}}const t=this._getMaxResultWindow();if(void 0===t)return{icon:this.getCurrentStyle().getIcon(!1),tooltipContent:null,areResultsTrimmed:!1};const{totalFeaturesCount:r,tilesWithFeatures:n,tilesWithTrimmedResults:o}=Object(fe.f)(this._getTileMetaFeatures(),t);if(0===r)return O;const a=o>0,l=!this.getStyle().getIsPointsOnly()&&r>1&&n>1,c=l?"~":"",u=a?m.i18n.translate("xpack.maps.tiles.resultsTrimmedMsg",{defaultMessage:"Results limited to {countPrefix}{count} documents.",values:{count:r.toLocaleString(),countPrefix:c}}):m.i18n.translate("xpack.maps.tiles.resultsCompleteMsg",{defaultMessage:"Found {countPrefix}{count} documents.",values:{count:r.toLocaleString(),countPrefix:c}}),h=l?u+m.i18n.translate("xpack.maps.tiles.shapeCountMsg",{defaultMessage:" This count is approximate."}):u;return{icon:this.getCurrentStyle().getIcon(e&&a),tooltipContent:h,areResultsTrimmed:a}}_getMaxResultWindow(){const e=this.getDataRequest(me);if(!e)return;const t=e.getData();return t?t.maxResultWindow:void 0}async _syncMaxResultWindow({startLoading:e,stopLoading:t}){if(this.getDataRequest(me))return;const r=Symbol(`${this.getId()}-${me}`);e(me,r);const i=await this.getSource().getMaxResultWindow();t(me,r,{maxResultWindow:i})}async syncData(e){try{this.getSource().getType()===i.Cb.ES_SEARCH&&await this._syncMaxResultWindow(e),await this._syncSourceStyleMeta(e,this.getSource(),this.getCurrentStyle()),await this._syncSourceFormatters(e,this.getSource(),this.getCurrentStyle()),await this._syncSupportsFeatureEditing({syncContext:e,source:this.getSource()});let t=0;const r=this.getCurrentStyle().getAllStyleProperties().find((e=>e.getStyleName()===i.Ib.LINE_WIDTH));r&&(!r.isDynamic()&&r.isComplete()?t=r.getOptions().size:r.isDynamic()&&r.isComplete()&&(t=r.getOptions().maxSize));const n=Math.ceil(3.5*t);await de({buffer:n,hasLabels:this.getCurrentStyle().hasLabels(),layerId:this.getId(),layerName:await this.getDisplayName(),prevDataRequest:this.getSourceDataRequest(),requestMeta:await this._getVectorSourceRequestMeta(e.isForceRefresh,e.dataFilters,this.getSource(),this.getCurrentStyle(),e.isFeatureEditorOpenForLayer),source:this.getSource(),syncContext:e}),this.hasJoins()&&await this._syncJoins(e,this.getCurrentStyle())}catch(e){}}_syncSourceBindingWithMb(e){if(e.getSource(this.getMbSourceId()))return;const t=this.getSourceDataRequest();if(!t)return;const r=t.getData();if(!r)return;const i=this.getMbSourceId();e.addSource(i,{type:"vector",tiles:[r.tileUrl],minzoom:r.tileMinZoom,maxzoom:r.tileMaxZoom,promoteId:this._getSourcePromoteId()})}getMbLayerIds(){return[...super.getMbLayerIds(),this._getMbTooManyFeaturesLayerId()]}ownsMbSourceId(e){return this.getMbSourceId()===e}_getJoinResults(){const e=this.getValidJoins();if(!e||!e.length)return{};const t=e[0],r=this.getDataRequest(t.getSourceDataRequestId());return{join:t,joinPropertiesMap:null==r?void 0:r.getData(),joinRequestMeta:null==r?void 0:r.getMeta()}}_getMbTooManyFeaturesLayerId(){return this.makeMbLayerId("toomanyfeatures")}_getJoinFilterExpression(){const{join:e,joinPropertiesMap:t}=this._getJoinResults();if(!e)return;const r=["has","__kbn_never_prop__"];if(!t)return r;const i=Array.from(t.keys());return i.length?["match",["get",e.getLeftField().getName()],i,!0,!1]:r}_syncFeatureState(e){const{joinPropertiesMap:t,joinRequestMeta:r}=this._getJoinResults();if(!t)return;const[i]=t.keys(),n=e.getFeatureState({source:this.getMbSourceId(),sourceLayer:this._source.getTileSourceLayer(),id:i}),o=null==r?void 0:r.requestStopTime;if((null==n?void 0:n.requestStopTime)===o)return;e.removeFeatureState({source:this.getMbSourceId(),sourceLayer:this._source.getTileSourceLayer()});const a={source:this.getMbSourceId(),sourceLayer:this._source.getTileSourceLayer(),id:void 0};t.forEach(((t,r)=>{a.id=r,e.setFeatureState(a,{...t,requestStopTime:o})}))}_syncStylePropertiesWithMb(e){if(!e.getSource(this.getMbSourceId()))return;const t=this.getSourceDataRequest();if(!t)return;const r=t.getData();r&&""!==r.tileSourceLayer&&(this._setMbLabelProperties(e,r.tileSourceLayer),this._setMbPointsProperties(e,r.tileSourceLayer),this._setMbLinePolygonProperties(e,r.tileSourceLayer),this._syncTooManyFeaturesProperties(e))}_syncTooManyFeaturesProperties(e){if(this.getSource().getType()!==i.Cb.ES_SEARCH)return;const t=this._getMaxResultWindow();if(void 0===t)return;const r=this._getMbTooManyFeaturesLayerId();if(!e.getLayer(r)){const i={id:r,type:"line",source:this.getId(),paint:{}};i["source-layer"]=fe.c,e.addLayer(i),e.setFilter(r,["all",["==",["get",fe.a],"gte"],[">=",["get",fe.b],t+1]]),e.setPaintProperty(r,"line-color",this.getCurrentStyle().getPrimaryColor()),e.setPaintProperty(r,"line-width",3),e.setPaintProperty(r,"line-dasharray",[2,1]),e.setPaintProperty(r,"line-opacity",this.getAlpha())}this.syncVisibilityWithMb(e,r),e.setLayerZoomRange(r,this.getMinZoom(),this.getMaxZoom())}_getSourcePromoteId(){const{join:e}=this._getJoinResults();return e?{[this._source.getTileSourceLayer()]:e.getLeftField().getName()}:void 0}_requiresPrevSourceCleanup(e){var t;const r=e.getSource(this.getMbSourceId());if(!r)return!1;if(!("tiles"in r))return!0;const i=r,n=this.getSourceDataRequest();if(!n)return!1;const o=n.getData();if(!o)return!1;if((null===(t=i.tiles)||void 0===t?void 0:t[0])!==o.tileUrl||i.minzoom!==o.tileMinZoom||i.maxzoom!==o.tileMaxZoom||!d.a.isEqual(i.promoteId,this._getSourcePromoteId()))return!0;const a=this.getMbLayerIds();for(let t=0;t<a.length;t++){const r=e.getLayer(a[t]);if(r&&r.sourceLayer!==o.tileSourceLayer&&r.sourceLayer!==fe.c)return!0}return!1}syncLayerWithMB(e){this._removeStaleMbSourcesAndLayers(e),this._syncSourceBindingWithMb(e),this._syncFeatureState(e),this._syncStylePropertiesWithMb(e)}getMinZoom(){return Math.max(this._source.getMinZoom(),super.getMinZoom())}getFeatureById(e){return null}async getStyleMetaDescriptorFromLocalFeatures(){const{joinPropertiesMap:e}=this._getJoinResults();return await async function(e,t,r,n){const o={geometryTypes:{isPointsOnly:1===r.length&&r.includes(i.Hb.POINT),isLinesOnly:1===r.length&&r.includes(i.Hb.LINE),isPolygonsOnly:1===r.length&&r.includes(i.Hb.POLYGON)},fieldMeta:{}};return 0!==n.length&&e?(n.forEach((r=>{const n=r.getFieldName();o.fieldMeta[n]||(o.fieldMeta[n]={categories:[]});const a=[];a.length&&(o.fieldMeta[n].categories=a);const l=function(e,t,r){const n=e.getField();if(!n||!e.isOrdinal())return null;const o=n.isCount();let a=o?1:1/0,l=-1/0;if(e.getFieldOrigin()===i.D.SOURCE)for(let e=0;e<t.length;e++){const r=n.pluckRangeFromTileMetaFeature(t[e]);r&&(o||(a=Math.min(r.min,a)),l=Math.max(r.max,l))}else e.getFieldOrigin()===i.D.JOIN&&r&&r.forEach((e=>{const t=e[n.getName()];"number"==typeof t&&(o||(a=Math.min(t,a)),l=Math.max(t,l))}));return a===1/0||l===-1/0?null:{min:a,max:l,delta:l-a}}(r,e,t);l&&(o.fieldMeta[n].range=l)})),o):o}(this._getTileMetaFeatures(),e,await this.getSource().getSupportedShapeTypes(),this.getCurrentStyle().getDynamicPropertiesArray())}}},,,function(e,t,r){"use strict";r.d(t,"l",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"j",(function(){return u})),r.d(t,"m",(function(){return p})),r.d(t,"o",(function(){return m})),r.d(t,"p",(function(){return g})),r.d(t,"k",(function(){return y})),r.d(t,"e",(function(){return _})),r.d(t,"f",(function(){return b})),r.d(t,"d",(function(){return x})),r.d(t,"q",(function(){return w})),r.d(t,"r",(function(){return S})),r.d(t,"h",(function(){return O})),r.d(t,"c",(function(){return I})),r.d(t,"b",(function(){return k})),r.d(t,"g",(function(){return F})),r.d(t,"i",(function(){return D})),r.d(t,"n",(function(){return j}));var i=r(1),n=r(40),o=r.n(n),a=r(0);function l(e,t){const r=e.fields.getByName(t);if(!r)throw new Error(i.i18n.translate("xpack.maps.source.esSearch.fieldNotFoundMsg",{defaultMessage:"Unable to find '{fieldName}' in index-pattern '{indexPatternName}'.",values:{fieldName:t,indexPatternName:e.getName()}}));return r}function c(e,t){return t.scripted?{...e,script:{source:t.script,lang:t.lang}}:{...e,field:t.name}}function u(e,t=[]){const r={};for(const i in e)if(!t.includes(i)&&e.hasOwnProperty(i))if(o.a.has(e[i],"value"))r[i]=e[i].value;else if(o.a.has(e[i],"buckets")){if(0===e[i].buckets.length)continue;r[i]=o.a.get(e[i],"buckets[0].key");const t=e[i].buckets[0].doc_count,n=e.doc_count;n&&t&&(r[`${i}${a.Gb}`]=Math.round(t/n*100))}else if(i.startsWith(a.b.PERCENTILE)||i.startsWith(a.T+a.b.PERCENTILE)){const t=e[i].values;for(const e in t)if(t.hasOwnProperty(e)){r[i]=t[e];break}}else r[i]=e[i];return r}function h(e){const t=[a.A.GEO_POINT,a.A.GEO_SHAPE];if(!t.includes(e)){const r=i.i18n.translate("xpack.maps.es_geo_utils.unsupportedFieldTypeErrorMessage",{defaultMessage:"Unsupported field type, expected: {expectedTypes}, you provided: {fieldType}",values:{fieldType:e,expectedTypes:t.join(",")}});throw new Error(r)}}function p(e,t,r,i,n){const o=[],l=[];for(let c=0;c<e.length;c++){const u={...t(e[c])};l.length=0,h(i),i===a.A.GEO_POINT?d(u[r],l):f(u[r],l);for(let e=0;e<n.length;e++){const t=n[e];"string"==typeof u[t]&&(u[t]=parseInt(u[t],10))}delete u[r];for(let e=0;e<l.length;e++)o.push({type:"Feature",geometry:l[e],id:`${u._index}:${u._id}:${e}`,properties:u})}return{type:"FeatureCollection",features:o}}function d(e,t){if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++)d(e[r],t);else t.push(e)}function f(e,t){if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++)f(e[r],t);else if(e.type.toLowerCase()!==a.J.GEOMETRY_COLLECTION.toLowerCase())if("envelope"===e.type.toLowerCase()){const r=e.coordinates,i=v({minLon:r[0][0],maxLon:r[1][0],minLat:r[1][1],maxLat:r[0][1]});t.push(i)}else{if("circle"===e.type.toLowerCase()){const t=i.i18n.translate("xpack.maps.es_geo_utils.convert.unsupportedGeometryTypeErrorMessage",{defaultMessage:"Unable to convert {geometryType} geometry to geojson, not supported",values:{geometryType:e.type}});throw new Error(t)}t.push(e)}else{const r=e;for(let e=0;e<r.geometries.length;e++)f(r.geometries[e],t)}}function m({maxLat:e,maxLon:t,minLat:r,minLon:i}){const n=_(r),o=_(e);let a;return a=t-i>=360?{top_left:[-180,o],bottom_right:[180,n]}:{top_left:[(i+180+360)%360-180,o],bottom_right:[(t+180+360)%360-180,n]},a}function g(e){for(let t=0;t<e.length;t++){const r=e[t];Array.isArray(r)?g(r):isNaN(r)||(e[t]=o.a.round(r,a.o))}}function y(e){!function(e,t){if(!t.includes(e)){const r=i.i18n.translate("xpack.maps.es_geo_utils.unsupportedGeometryTypeErrorMessage",{defaultMessage:"Unsupported geometry type, expected: {expectedTypes}, you provided: {geometryType}",values:{geometryType:e,expectedTypes:t.join(",")}});throw new Error(r)}}(e.type,[a.J.POLYGON]);const t=e.coordinates[a.tb],r={minLon:t[0][a.bb],minLat:t[0][a.X],maxLon:t[0][a.bb],maxLat:t[0][a.X]};for(let e=1;e<t.length;e++)r.minLon=Math.min(t[e][a.bb],r.minLon),r.minLat=Math.min(t[e][a.X],r.minLat),r.maxLon=Math.max(t[e][a.bb],r.maxLon),r.maxLat=Math.max(t[e][a.X],r.maxLat);return v(r)}function v({maxLat:e,maxLon:t,minLat:r,minLon:i}){const n=t-i,o=n>360?-180:i,l=n>360?180:t,c=_(e),u=_(r),h=[o,c],p=[o,u],d=[l,u],f=[l,c];return{type:a.J.POLYGON,coordinates:[[h,p,d,f,h]]}}function _(e){return x(e,-89,89)}function b(e){return x(e,-180,180)}function x(e,t,r){return e>r?r:e<t?t:e}function w(e,t){const r=e.maxLon-e.minLon,i=e.maxLat-e.minLat,n=e.minLon-r*t,o=e.maxLon+r*t,a=o-n,l=a>360?180:o;return{minLon:a>360?-180:n,minLat:_(e.minLat-i*t),maxLon:l,maxLat:b(e.maxLat+i*t)}}function S(e){return{minLon:e[0],minLat:e[1],maxLon:e[2],maxLat:e[3]}}var C=r(267),M=r.n(C),E=r(46),T=r(78);const A=E.FILTERS.SPATIAL_FILTER;function P(e,t,r){if(0===e.length)throw new Error("Unable to create filter, geo fields not provided");return 1===e.length?{meta:{...t,isMultiIndex:!0},query:{bool:{must:[{exists:{field:e[0]}},r(e[0])]}}}:{meta:{...t,isMultiIndex:!0},query:{bool:{should:e.map((e=>({bool:{must:[{exists:{field:e}},r(e)]}})))}}}}function O(e,t){const r=m(e);return P(t,{type:A,alias:null,disabled:!1,negate:!1},(function(e){return{geo_bounding_box:{[e]:r}}}))}function I({preIndexedShape:e,geometry:t,geometryLabel:r,geoFieldNames:i,relation:n="intersects"}){return P(i,{type:A,negate:!1,alias:`${Object(T.e)(n)} ${r}`,disabled:!1},(function(r){const i={relation:n};if(e)i.indexed_shape=e;else{if(!t)throw new Error("Must supply either preIndexedShape or geometry, you did not supply either");i.shape=t}return{geo_shape:{ignore_unmapped:!0,[r]:i}}}))}function k({geoFieldNames:e,gridId:t,isHex:r}){return P(e,{type:A,negate:!1,alias:i.i18n.translate("xpack.maps.common.esSpatialRelation.clusterFilterLabel",{defaultMessage:"intersects cluster {gridId}",values:{gridId:t}}),disabled:!1},(e=>({geo_grid:{[e]:r?{geohex:t}:{geotile:t}}})))}function F({alias:e,distanceKm:t,geoFieldNames:r,point:n}){return P(r,{type:A,negate:!1,alias:e||i.i18n.translate("xpack.maps.es_geo_utils.distanceFilterAlias",{defaultMessage:"within {distanceKm}km of {pointLabel}",values:{distanceKm:t,pointLabel:n.join(", ")}}),disabled:!1},(function(e){return{geo_distance:{distance:`${t}km`,[e]:n}}}))}function D(e){const t=[];return e.filter((e=>e.meta.type===A)).forEach((e=>{var r,i,n,o,a,l,c,u,h,p,d,f;let m;const g=null!=e&&null!==(r=e.query)&&void 0!==r&&null!==(i=r.bool)&&void 0!==i&&null!==(n=i.should)&&void 0!==n&&n.length?null==e||null===(o=e.query)||void 0===o||null===(a=o.bool)||void 0===a||null===(l=a.should)||void 0===l||null===(c=l[0])||void 0===c||null===(u=c.bool)||void 0===u?void 0:u.must:null==e||null===(h=e.query)||void 0===h||null===(p=h.bool)||void 0===p?void 0:p.must,y=null==g||null===(d=g[0])||void 0===d||null===(f=d.exists)||void 0===f?void 0:f.field,v=null==g?void 0:g[1];y&&v&&(m=function(e,t){if(t.geo_distance&&t.geo_distance[e]){const r=t.geo_distance.distance.split("km"),i=parseFloat(r[0]);return M()(t.geo_distance[e],i).geometry}if(t.geo_shape&&t.geo_shape[e]&&t.geo_shape[e].shape)return t.geo_shape[e].shape}(y,v)),m&&t.push({type:"Feature",geometry:m,properties:{filter:e.meta.alias}})})),t}function j(e,t){if("eq"===e.relation)return e.value>t;if(t>e.value)throw new Error(i.i18n.translate("xpack.maps.totalHits.lowerBoundPrecisionExceeded",{defaultMessage:"Unable to determine if total hits is greater than value. Total hits precision is lower than value. Total hits: {totalHitsString}, value: {value}. Ensure _search.body.track_total_hits is at least as large as value.",values:{totalHitsString:JSON.stringify(e,null,""),value:t}}));return!0}},,,function(e,t){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"f",(function(){return l})),r.d(t,"c",(function(){return h})),r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return y})),r.d(t,"h",(function(){return v})),r.d(t,"j",(function(){return _})),r.d(t,"i",(function(){return b}));var i=r(0),n=r(84),o=r(5);const a=1,l=64,c=7,u=32,h=3,p=14,d=6,f=n.e[0].value,m=n.a[0].value,g=[i.Ib.LABEL_SIZE,i.Ib.LABEL_COLOR,i.Ib.LABEL_BORDER_COLOR,i.Ib.LABEL_BORDER_SIZE],y=[i.Ib.LINE_COLOR,i.Ib.LINE_WIDTH,...g],v=[i.Ib.FILL_COLOR,i.Ib.LINE_COLOR,i.Ib.LINE_WIDTH,...g];function _(e=[]){let t=0;if(e.length){const r=e[e.length-1];n.b.includes(r)&&(t=(n.b.indexOf(r)+1)%n.b.length)}const r=n.b[t],a=n.d[t],l=Object(o.y)();return{[i.Ib.ICON]:{type:i.Eb.STATIC,options:{value:i.r}},[i.Ib.FILL_COLOR]:{type:i.Eb.STATIC,options:{color:r}},[i.Ib.LINE_COLOR]:{type:i.Eb.STATIC,options:{color:a}},[i.Ib.LINE_WIDTH]:{type:i.Eb.STATIC,options:{size:1}},[i.Ib.ICON_SIZE]:{type:i.Eb.STATIC,options:{size:d}},[i.Ib.ICON_ORIENTATION]:{type:i.Eb.STATIC,options:{orientation:0}},[i.Ib.LABEL_TEXT]:{type:i.Eb.STATIC,options:{value:""}},[i.Ib.LABEL_COLOR]:{type:i.Eb.STATIC,options:{color:l?"#FFFFFF":"#000000"}},[i.Ib.LABEL_SIZE]:{type:i.Eb.STATIC,options:{size:p}},[i.Ib.LABEL_ZOOM_RANGE]:{options:{useLayerZoomRange:!0,minZoom:i.mb,maxZoom:i.hb}},[i.Ib.LABEL_BORDER_COLOR]:{type:i.Eb.STATIC,options:{color:l?"#000000":"#FFFFFF"}},[i.Ib.SYMBOLIZE_AS]:{options:{value:i.Fb.CIRCLE}},[i.Ib.LABEL_BORDER_SIZE]:{options:{size:i.V.SMALL}},[i.Ib.LABEL_POSITION]:{options:{position:i.W.CENTER}}}}function b(){return{[i.Ib.ICON]:{type:i.Eb.DYNAMIC,options:{iconPaletteId:"filledShapes",field:void 0,fieldMetaOptions:{isEnabled:!0}}},[i.Ib.FILL_COLOR]:{type:i.Eb.DYNAMIC,options:{color:f,colorCategory:m,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.LINE_COLOR]:{type:i.Eb.DYNAMIC,options:{color:f,colorCategory:m,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.LINE_WIDTH]:{type:i.Eb.DYNAMIC,options:{minSize:1,maxSize:10,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.ICON_SIZE]:{type:i.Eb.DYNAMIC,options:{minSize:c,maxSize:u,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.ICON_ORIENTATION]:{type:i.Eb.DYNAMIC,options:{field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.LABEL_TEXT]:{type:i.Eb.DYNAMIC,options:{field:void 0}},[i.Ib.LABEL_ZOOM_RANGE]:{options:{useLayerZoomRange:!0,minZoom:i.mb,maxZoom:i.hb}},[i.Ib.LABEL_COLOR]:{type:i.Eb.DYNAMIC,options:{color:f,colorCategory:m,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.LABEL_SIZE]:{type:i.Eb.DYNAMIC,options:{minSize:c,maxSize:u,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.LABEL_BORDER_COLOR]:{type:i.Eb.DYNAMIC,options:{color:f,colorCategory:m,field:void 0,fieldMetaOptions:{isEnabled:!0,sigma:h}}},[i.Ib.SYMBOLIZE_AS]:{options:{value:i.Fb.CIRCLE}},[i.Ib.LABEL_BORDER_SIZE]:{options:{size:i.V.SMALL}},[i.Ib.LABEL_POSITION]:{options:{position:i.W.CENTER}}}}},function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return g})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return v})),r.d(t,"h",(function(){return _}));var i=r(380),n=r.n(i),o=r(15);const a="theclassic",l=Object(o.euiPaletteColorBlind)(),c=[...l.map((e=>n()(e).darken().toHexString())),"#000","#FFF"],u=["rgb(65, 105, 225)","rgb(0, 256, 256)","rgb(0, 256, 0)","rgb(256, 256, 0)","rgb(256, 0, 0)"];function h(e){const t=Math.ceil(e/10);return Object(o.euiPaletteColorBlind)({rotations:t}).slice(0,e-1)}const p=[{value:"Blues",getPalette:e=>Object(o.euiPaletteCool)(e),palette:Object(o.euiPaletteCool)(8),type:"gradient"},{value:"Greens",getPalette:e=>Object(o.euiPalettePositive)(e),palette:Object(o.euiPalettePositive)(8),type:"gradient"},{value:"Greys",getPalette:e=>Object(o.euiPaletteGray)(e),palette:Object(o.euiPaletteGray)(8),type:"gradient"},{value:"Reds",getPalette:e=>Object(o.euiPaletteNegative)(e),palette:Object(o.euiPaletteNegative)(8),type:"gradient"},{value:"Yellow to Red",getPalette:e=>Object(o.euiPaletteWarm)(e),palette:Object(o.euiPaletteWarm)(8),type:"gradient"},{value:"Green to Red",getPalette:e=>Object(o.euiPaletteForStatus)(e),palette:Object(o.euiPaletteForStatus)(8),type:"gradient"},{value:"Blue to Red",getPalette:e=>Object(o.euiPaletteForTemperature)(e),palette:Object(o.euiPaletteForTemperature)(8),type:"gradient"},{value:a,getPalette:e=>Object(o.colorPalette)(u,e,!0,!0),palette:u,type:"gradient"},{value:"palette_0",getPalette:h,palette:Object(o.euiPaletteColorBlind)(),type:"fixed"},{value:"palette_20",getPalette:h,palette:Object(o.euiPaletteColorBlind)({rotations:2}),type:"fixed"},{value:"palette_30",getPalette:h,palette:Object(o.euiPaletteColorBlind)({rotations:3}),type:"fixed"}],d=p.filter((e=>"gradient"===e.type)),f=p.filter((e=>"fixed"===e.type));function m(e){const t=p.find((({value:t})=>t===e));return t?[...t.palette]:[]}function g(e){if(!e)return null;const t=m(e);return 0===t.length?null:t[Math.floor(t.length/2)]}function y(e,t,r,i){if(!e)return null;if(t>r)return null;const n=m(e);if(i&&n.reverse(),0===n.length)return null;if(r===t)return[r,n[n.length-1]];const o=r-t;return n.reduce(((e,r,i,n)=>{const a=t+o*i/n.length;return e.push(a,r),e}),[])}function v(e,t,r){if(!e)return null;const i=d.find((({value:t})=>t===e));if(!i)return null;const n=i.getPalette(t.length);return r&&n.reverse(),n.reduce(((e,r,i)=>(e.push(t[i].value,r),e)),[])}function _(e){const t=e.length;let r=`linear-gradient(to right, ${e[0]} 0%,`;for(let i=1;i<t-1;i++)r=`${r} ${e[i]}       ${Math.floor(100*i/(t-1))}%,`;return`${r} ${e[e.length-1]} 100%)`}},function(e,t,r){"use strict";r.d(t,"f",(function(){return u})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return p})),r.d(t,"i",(function(){return d})),r.d(t,"g",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return g})),r.d(t,"a",(function(){return y})),r.d(t,"j",(function(){return v})),r.d(t,"h",(function(){return _}));var i=r(1),n=r(48),o=r(24),a=r(5),l=r(0),c=r(20);function u(e){return e.fields.some((e=>e.timeSeriesDimension||e.timeSeriesMetric))}function h(e){return e.aggregatable?e.type!==l.A.GEO_SHAPE||Object(c.b)()?null:i.i18n.translate("xpack.maps.geoTileAgg.disabled.license",{defaultMessage:"Geo_shape clustering requires a Gold license."}):i.i18n.translate("xpack.maps.geoTileAgg.disabled.docValues",{defaultMessage:"Clustering requires aggregations. Enable aggregations by setting doc_values to true."})}async function p(e=[]){return(await Object(n.asyncMap)(e,(async e=>{try{return await Object(a.u)().get(e)}catch(e){return null}}))).filter((e=>null!==e))}function d(e){return e.filter((e=>e.aggregatable&&!o.indexPatterns.isNestedField(e)&&["number","boolean","date","ip","string"].includes(e.type)))}function f(e){return e.filter((e=>e.sortable&&!o.indexPatterns.isNestedField(e)))}function m(e){return e.filter((e=>!o.indexPatterns.isNestedField(e)&&l.B.includes(e.type)))}function g(e){return e.filter((e=>!o.indexPatterns.isNestedField(e)&&l.A.GEO_POINT===e.type))}function y(e){return e.filter(v)}function v(e){return!!e&&!!e.aggregatable&&!o.indexPatterns.isNestedField(e)&&function(){const e=[l.A.GEO_POINT];return Object(c.b)()&&e.push(l.A.GEO_SHAPE),e}().includes(e.type)}function _(e){return e.filter((e=>!e.isSubtypeMulti()&&!e.isSubtypeNested()))}},function(e,t,r){"use strict";r.d(t,"a",(function(){return vector_style_VectorStyle}));var i=r(2),n=r.n(i),o=r(4),a=r.n(o),l=r(40),c=r.n(l),u=r(1),h=r(15),p=r(23),d=r.n(p),f=r(107),m=r(0),g=r(3);const y=u.i18n.translate("xpack.maps.styles.staticDynamicSelect.staticLabel",{defaultMessage:"Fixed"}),v=u.i18n.translate("xpack.maps.styles.staticDynamicSelect.dynamicLabel",{defaultMessage:"By value"});class style_prop_editor_StylePropEditor extends o.Component{constructor(...e){super(...e),n()(this,"_prevStaticStyleOptions",this.props.defaultStaticStyleOptions),n()(this,"_prevDynamicStyleOptions",this.props.defaultDynamicStyleOptions),n()(this,"_onTypeToggle",(()=>{this.props.styleProperty.isDynamic()?(this._prevDynamicStyleOptions=this.props.styleProperty.getOptions(),this.props.onStaticStyleChange(this.props.styleProperty.getStyleName(),this._prevStaticStyleOptions)):(this._prevStaticStyleOptions=this.props.styleProperty.getOptions(),this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),this._prevDynamicStyleOptions))})),n()(this,"_onDataMappingChange",(e=>{const t={...this.props.styleProperty.getOptions(),...e};this.props.onDynamicStyleChange(this.props.styleProperty.getStyleName(),t)}))}renderStaticDynamicSelect(){const e=[{value:m.Eb.STATIC,text:this.props.customStaticOptionLabel?this.props.customStaticOptionLabel:y},{value:m.Eb.DYNAMIC,text:v}];return Object(g.jsx)(h.EuiSelect,{options:e,value:this.props.styleProperty.isDynamic()?m.Eb.DYNAMIC:m.Eb.STATIC,onChange:this._onTypeToggle,disabled:this.props.disabled||0===this.props.fields.length,"aria-label":u.i18n.translate("xpack.maps.styles.staticDynamicSelect.ariaLabel",{defaultMessage:"Select to style by fixed value or by data value"}),compressed:!0,"data-test-subj":`staticDynamicSelect_${this.props.styleProperty.getStyleName()}`})}render(){const e=this.renderStaticDynamicSelect(),t=this.props.disabled&&this.props.disabledBy?Object(g.jsx)(h.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:Object(f.a)(this.props.disabledBy)},Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},e),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiFieldText,{compressed:!0,disabled:!0})))):Object(g.jsx)(o.Fragment,null,a.a.cloneElement(this.props.children,{staticDynamicSelect:e}),this.props.styleProperty.renderDataMappingPopover(this._onDataMappingChange));return Object(g.jsx)(h.EuiFormRow,{label:Object(f.b)(this.props.styleProperty.getStyleName()),display:"rowCompressed"},t)}}var _=r(619),b=r(153);function x({fields:e,selectedFieldName:t,onChange:r,styleName:i,...n}){let o;if(t){const r=e.find((e=>e.name===t));r&&(o={value:r,label:r.label})}const a=function(e){const t=new Map;function r(e){return e.map((e=>({value:e,label:e.label,disabled:e.isUnsupported,title:e.unsupportedMsg,prepend:e.type?Object(g.jsx)(b.a,{type:e.type,fill:"none",className:"eui-alignMiddle"}):null}))).sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase())))}if(e.forEach((e=>{if(t.has(e.origin)){const r=t.get(e.origin);r.push(e),t.set(e.origin,r)}else t.set(e.origin,[e])})),1===t.size){const e=t.keys().next().value;return r(t.get(e))}const i=[];return t.forEach(((e,t)=>{i.push({label:u.i18n.translate("xpack.maps.style.fieldSelect.OriginLabel",{defaultMessage:"Fields from {fieldOrigin}",values:{fieldOrigin:t}}),options:r(e)})})),i.sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase()))),i}(e),l=Object(_.a)(e,["label"]);return Object(g.jsx)(h.EuiComboBox,d()({selectedOptions:o?[o]:[],options:a,onChange:e=>{r({field:e.length>0&&e[0].value?e[0].value:null})},isClearable:!1,fullWidth:!0,placeholder:u.i18n.translate("xpack.maps.styles.vector.selectFieldPlaceholder",{defaultMessage:"Select a field"}),"data-test-subj":`styleFieldSelect_${i}`,singleSelection:m.xb,truncationProps:m.lb,inputPopoverProps:{panelMinWidth:l}},n))}const w=Object(h.euiPaletteColorBlind)({rotations:3}),S=w[0];function C(e,t){const r=e[t].stop;let i=1;return t===e.length-1?0!==t&&(i=r-e[t-1].stop):i=(e[t+1].stop-r)/2,E(e,t,r+i)}function M(e,t){return E(e,t,"")}function E(e,t,r){const i=e.length<w.length?e.length:e.length%w.length,n={stop:r,color:w[i]};return[...e.slice(0,t+1),n,...e.slice(t+1)]}function T(e){return!Object(h.isValidHex)(e)||""===e}function A(e){return""===e||isNaN(e)}function P(e){const t=e.slice(1).map((e=>e.stop)),r=c.a.uniq(t);return t.length!==r.length}function O(e){return e.some(((t,r)=>{let i=!1;return 0!==r&&(i=e[r-1].stop>=t.stop),T(t.color)||A(t.stop)||i}))}var I=r(147);const k=({onChange:e,colorStops:t,isStopsInvalid:r,getStopError:i,renderStopInput:n,addNewRow:o,swatches:a})=>{const l=t.map(((l,p)=>{const{stopError:d,stopInput:f}=function(o,a){return{stopError:i(o,a),stopInput:n(o,(i=>{const n=c.a.cloneDeep(t);n[a].stop=i,e({colorStops:n,isInvalid:r(n)})}),a)}}(l.stop,p),m=l.color,y=T(m)?u.i18n.translate("xpack.maps.styles.colorStops.hexWarningLabel",{defaultMessage:"Color must provide a valid hex value"}):void 0,v=[];let _;if(d&&v.push(d),y&&v.push(y),t.length>1){const i=()=>{const i=function(e,t){return 1===e.length?e:[...e.slice(0,t),...e.slice(t+1)]}(t,p);e({colorStops:i,isInvalid:r(i)})};_=Object(g.jsx)(h.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":u.i18n.translate("xpack.maps.styles.colorStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:u.i18n.translate("xpack.maps.styles.colorStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:i})}const b=Object(g.jsx)("div",null,_,Object(g.jsx)(h.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:()=>{const i=o(t,p);e({colorStops:i,isInvalid:r(i)})}}));return Object(g.jsx)(h.EuiFormRow,{key:p,className:"mapColorStop",isInvalid:0!==v.length,error:v,display:"rowCompressed"},Object(g.jsx)(h.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(g.jsx)(h.EuiFlexItem,{grow:!0,className:"mapStyleSettings__fixedBox"},f),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(I.a,{key:m,onChange:i=>{const n=c.a.cloneDeep(t);n[p].color=i,e({colorStops:n,isInvalid:r(n)})},color:m,swatches:a,append:b}))))}));return Object(g.jsx)("div",null,l,Object(g.jsx)(h.EuiSpacer,{size:"s"}))},F=({colorStops:e=[{stop:0,color:S}],onChange:t,swatches:r})=>Object(g.jsx)(k,{onChange:t,colorStops:e,isStopsInvalid:O,getStopError:(t,r)=>{let i;return A(t)?i=u.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.numberWarningLabel",{defaultMessage:"Stop must be a number"}):0!==r&&e[r-1].stop>=t&&(i=u.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.numberOrderingWarningLabel",{defaultMessage:"Stop must be greater than previous stop value"})),i},renderStopInput:(e,t,r)=>Object(g.jsx)(h.EuiFieldNumber,{"aria-label":u.i18n.translate("xpack.maps.styles.colorStops.ordinalStop.stopLabel",{defaultMessage:"Stop"}),value:0===r?"":e,onChange:function(e){const r=parseFloat(e.target.value),i=isNaN(r)?"":r;t(i)},compressed:!0,disabled:0===r}),addNewRow:C,swatches:r});class stop_input_StopInput extends o.Component{constructor(e){super(e),n()(this,"_isMounted",!1),n()(this,"_onFocus",(()=>{this.state.hasPrevFocus||(this.setState({hasPrevFocus:!0}),this._onSearchChange(""))})),n()(this,"_onChange",(e=>{this.props.onChange(c.a.get(e,"[0].label",""))})),n()(this,"_onCreateOption",(e=>{this.props.onChange(e)})),n()(this,"_onSearchChange",(async e=>{this.setState({isLoadingSuggestions:!0,searchValue:e},(()=>{this._loadSuggestions(e)}))})),n()(this,"_loadSuggestions",c.a.debounce((async e=>{let t=[];try{t=await this.props.getValueSuggestions(e)}catch(e){}this._isMounted&&e===this.state.searchValue&&this.setState({isLoadingSuggestions:!1,suggestions:t})}),300)),n()(this,"_onFieldTextChange",(e=>{this.setState({localFieldTextValue:e.target.value}),this._debouncedOnFieldTextChange()})),n()(this,"_debouncedOnFieldTextChange",c.a.debounce((()=>{this.props.onChange(this.state.localFieldTextValue)}),500)),this.state={suggestions:[],isLoadingSuggestions:!1,hasPrevFocus:!1,fieldDataType:null,localFieldTextValue:e.value}}componentDidMount(){this._isMounted=!0,this._loadFieldDataType()}componentWillUnmount(){this._isMounted=!1,this._loadSuggestions.cancel()}async _loadFieldDataType(){const e=await this.props.field.getDataType();this._isMounted&&this.setState({fieldDataType:e})}_renderSuggestionInput(){const e=this.state.suggestions.map((e=>({label:`${e}`}))),t=[];if(this.props.value){let r=e.find((({label:e})=>e===this.props.value));r||(r={label:this.props.value},e.unshift(r)),t.push(r)}return Object(g.jsx)(h.EuiComboBox,{options:e,selectedOptions:t,singleSelection:m.xb,onChange:this._onChange,onSearchChange:this._onSearchChange,onCreateOption:this._onCreateOption,isClearable:!1,isLoading:this.state.isLoadingSuggestions,onFocus:this._onFocus,"data-test-subj":this.props.dataTestSubj,compressed:!0})}_renderTextInput(){return Object(g.jsx)(h.EuiFieldText,{value:this.state.localFieldTextValue,onChange:this._onFieldTextChange,compressed:!0})}render(){return this.state.fieldDataType?"string"===this.state.fieldDataType||"boolean"===this.state.fieldDataType?this._renderSuggestionInput():this._renderTextInput():null}}const D=({colorStops:e=[{stop:"",color:S}],field:t,onChange:r,getValueSuggestions:i,swatches:n})=>Object(g.jsx)(k,{onChange:r,colorStops:e,isStopsInvalid:P,getStopError:(t,r)=>{let i=0;for(let n=1;n<e.length;n++)e[n].stop===t&&n!==r&&i++;return i?u.i18n.translate("xpack.maps.styles.colorStops.categoricalStop.noDupesWarningLabel",{defaultMessage:"Stop values must be unique"}):null},renderStopInput:(e,r,n)=>{const o="string"==typeof e?e:"";return Object(g.jsx)(stop_input_StopInput,{key:t.getName(),field:t,getValueSuggestions:i,value:o,onChange:r,dataTestSubj:`colorStopInput${n}`})},addNewRow:M,swatches:n});var j=r(84);const z="CUSTOM_COLOR_MAP";class color_map_select_ColorMapSelect extends o.Component{constructor(...e){super(...e),n()(this,"state",{}),n()(this,"_onColorPaletteSelect",(e=>{const t=e===z;this.props.onChange({color:t?null:e,useCustomColorMap:t,type:this.props.colorMapType})})),n()(this,"_onCustomColorMapChange",(({colorStops:e,isInvalid:t})=>{t?this.setState({customColorMap:e}):this.props.onChange({useCustomColorMap:!0,customColorMap:e,type:this.props.colorMapType})}))}static getDerivedStateFromProps(e,t){return e.customColorMap===t.prevPropsCustomColorMap?null:{prevPropsCustomColorMap:e.customColorMap,customColorMap:e.customColorMap}}_renderColorMapToggle(){const e=[{value:m.j.ORDINAL,text:u.i18n.translate("xpack.maps.styles.dynamicColorSelect.quantitativeLabel",{defaultMessage:"As number"})},{value:m.j.CATEGORICAL,text:u.i18n.translate("xpack.maps.styles.dynamicColorSelect.qualitativeLabel",{defaultMessage:"As category"})}],t=this.props.styleProperty.isOrdinal()?m.j.ORDINAL:m.j.CATEGORICAL;return Object(g.jsx)(h.EuiSelect,{options:e,value:t,onChange:this.props.onColorMapTypeChange,"aria-label":u.i18n.translate("xpack.maps.styles.dynamicColorSelect.qualitativeOrQuantitativeAriaLabel",{defaultMessage:"Choose `As number` to map by number in a color range, or `As category`to categorize by color palette."}),compressed:!0})}_renderColorStopsInput(){if(!this.props.isCustomOnly&&!this.props.useCustomColorMap)return null;let e;return e=this.props.colorMapType===m.j.ORDINAL?Object(g.jsx)(F,{colorStops:this.state.customColorMap,onChange:this._onCustomColorMapChange,swatches:this.props.swatches}):Object(g.jsx)(D,{colorStops:this.state.customColorMap,field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,onChange:this._onCustomColorMapChange,swatches:this.props.swatches}),Object(g.jsx)(h.EuiFlexGroup,null,Object(g.jsx)(h.EuiFlexItem,null,e))}_getColorPalettes(){return this.props.colorMapType===m.j.CATEGORICAL?j.a:this.props.invert?j.e.map((e=>({...e,palette:[...e.palette].reverse()}))):j.e}_renderColorMapSelections(){if(this.props.isCustomOnly)return null;const e=[{value:z,title:this.props.colorMapType===m.j.ORDINAL?u.i18n.translate("xpack.maps.style.customColorRampLabel",{defaultMessage:"Custom color ramp"}):u.i18n.translate("xpack.maps.style.customColorPaletteLabel",{defaultMessage:"Custom color palette"}),type:"text","data-test-subj":`colorMapSelectOption_${z}`},...this._getColorPalettes()],t=this.props.showColorMapTypeToggle?Object(g.jsx)(h.EuiFlexItem,{grow:!1},this._renderColorMapToggle()):null;return Object(g.jsx)(o.Fragment,null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs"},t,Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiColorPalettePicker,{palettes:e,onChange:this._onColorPaletteSelect,valueOfSelected:this.props.useCustomColorMap?z:this.props.colorPaletteId,compressed:!0,"data-test-subj":`colorMapSelect_${this.props.styleProperty.getStyleName()}`}))),Object(g.jsx)(h.EuiSpacer,{size:"s"}))}render(){return Object(g.jsx)(o.Fragment,null,this._renderColorMapSelections(),this._renderColorStopsInput())}}var N=r(49),B=r(95);const V=[N.euiThemeVars.euiColorLightestShade,N.euiThemeVars.euiColorLightShade,N.euiThemeVars.euiColorMediumShade,N.euiThemeVars.euiColorDarkShade,N.euiThemeVars.euiColorDarkestShade];function U(e){return Object(g.jsx)(h.EuiFormRow,null,Object(g.jsx)(h.EuiToolTip,{position:"top",content:u.i18n.translate("xpack.maps.colorStops.otherCategoryColorPickerTooltip",{defaultMessage:'When the selected field has more terms than colors in the palette, the rest of the terms are grouped under "Other" category. Select a palette with more colors to increase the number of terms colored in your map'})},Object(g.jsx)(I.a,{swatches:V,prepend:B.b,onChange:e.onChange,color:e.color?e.color:B.a})))}function H({fields:e,onDynamicStyleChange:t,staticDynamicSelect:r,styleProperty:i,swatches:n}){const o=i.getOptions(),l=({color:e,customColorMap:r,type:n,useCustomColorMap:a})=>{const l={...o,type:n};n===m.j.ORDINAL?(l.useCustomColorRamp=a,r&&(l.customColorRamp=r),e&&(l.color=e)):(l.useCustomColorPalette=a,r&&(l.customColorPalette=r),e&&(l.colorCategory=e)),t(i.getStyleName(),l)},p=e=>{const r=e.target.value;t(i.getStyleName(),{...o,type:r})},d=e=>{t(i.getStyleName(),{...o,otherCategoryColor:e})},f=e=>{t(i.getStyleName(),{...o,invert:e.target.checked})};return Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},r||null),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(x,{styleName:i.getStyleName(),fields:e,selectedFieldName:i.getFieldName(),onChange:({field:e})=>{if(!e)return;const{name:r,origin:n,type:a}=e,l=m.h.includes(a)?m.j.CATEGORICAL:m.j.ORDINAL;t(i.getStyleName(),{...o,field:{name:r,origin:n},type:l})},compressed:!0}))),Object(g.jsx)(h.EuiSpacer,{size:"s"}),(()=>{const t=(()=>{const t=i.getFieldName();return t?e.find((e=>e.name===t)):null})();if(!t)return null;const r=void 0!==o.invert&&o.invert,y=!m.h.includes(t.type);return i.isOrdinal()?Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(color_map_select_ColorMapSelect,{isCustomOnly:!t.supportsAutoDomain,onChange:l,onColorMapTypeChange:p,colorMapType:m.j.ORDINAL,colorPaletteId:o.color,customColorMap:o.customColorRamp,useCustomColorMap:c.a.get(o,"useCustomColorRamp",!1),styleProperty:i,showColorMapTypeToggle:y,swatches:n,invert:r}),o.useCustomColorRamp?null:Object(g.jsx)(h.EuiFormRow,{display:"columnCompressedSwitch"},Object(g.jsx)(h.EuiSwitch,{label:u.i18n.translate("xpack.maps.style.revereseColorsLabel",{defaultMessage:"Reverse colors"}),checked:r,onChange:f,compressed:!0}))):Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(color_map_select_ColorMapSelect,{isCustomOnly:!t.supportsAutoDomain,onColorMapTypeChange:p,onChange:l,colorMapType:m.j.CATEGORICAL,colorPaletteId:o.colorCategory,customColorMap:o.customColorPalette,useCustomColorMap:c.a.get(o,"useCustomColorPalette",!1),styleProperty:i,showColorMapTypeToggle:y,swatches:n,invert:!1}),Object(g.jsx)(U,{onChange:d,color:o.otherCategoryColor}))})())}function G({onStaticStyleChange:e,staticDynamicSelect:t,styleProperty:r,swatches:i}){return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},t||null),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(I.a,{onChange:t=>{e(r.getStyleName(),{color:t})},color:r.getOptions().color,swatches:i})))}function q(e){const t=e.styleProperty.isDynamic()?Object(g.jsx)(H,d()({},e,{styleProperty:e.styleProperty})):Object(g.jsx)(G,d()({},e,{styleProperty:e.styleProperty}));return Object(g.jsx)(style_prop_editor_StylePropEditor,d()({},e,{customStaticOptionLabel:u.i18n.translate("xpack.maps.styles.color.staticDynamicSelect.staticLabel",{defaultMessage:"Solid"})}),t)}var Z=r(45),$=r(83);function W({minSize:e,maxSize:t,onChange:r,...i}){return Object(g.jsx)(Z.ValidatedDualRange,d()({min:$.g,max:$.f,step:1,value:[e,t],showInput:"inputWithPopover",showRange:!0,onChange:([e,t])=>{r({minSize:Math.max($.g,parseInt(e,10)),maxSize:Math.min($.f,parseInt(t,10))})},allowEmptyRange:!1,append:u.i18n.translate("xpack.maps.vector.dualSize.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})},i))}function X({fields:e,onDynamicStyleChange:t,staticDynamicSelect:r,styleProperty:i}){const n=i.getOptions();let o;return n.field&&n.field.name&&(o=Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(W,{onChange:({minSize:e,maxSize:r})=>{t(i.getStyleName(),{...n,minSize:e,maxSize:r})},minSize:n.minSize,maxSize:n.maxSize,showLabels:!0,compressed:!0}),Object(g.jsx)(h.EuiFormRow,{display:"columnCompressedSwitch"},Object(g.jsx)(h.EuiSwitch,{label:u.i18n.translate("xpack.maps.style.revereseSizeLabel",{defaultMessage:"Reverse size"}),checked:!!n.invert,onChange:e=>{t(i.getStyleName(),{...n,invert:e.target.checked})},compressed:!0})))),Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},r),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(x,{styleName:i.getStyleName(),fields:e,selectedFieldName:i.getFieldName(),onChange:({field:e})=>{e&&t(i.getStyleName(),{...n,field:{name:e.name,origin:e.origin}})},compressed:!0}))),Object(g.jsx)(h.EuiSpacer,{size:"s"}),o)}var Y=r(129);function K({onStaticStyleChange:e,staticDynamicSelect:t,styleProperty:r}){return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},t),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(Y.a,{min:0,max:100,value:r.getOptions().size,onChange:t=>{e(r.getStyleName(),{size:t})},showInput:"inputWithPopover",showLabels:!0,compressed:!0,append:u.i18n.translate("xpack.maps.vector.size.unitLabel",{defaultMessage:"px",description:"Shorthand for pixel"})})))}function J(e){const t=e.styleProperty.isDynamic()?Object(g.jsx)(X,d()({},e,{styleProperty:e.styleProperty})):Object(g.jsx)(K,d()({},e,{styleProperty:e.styleProperty}));return Object(g.jsx)(style_prop_editor_StylePropEditor,e,t)}const ee=[{id:m.Fb.CIRCLE,label:u.i18n.translate("xpack.maps.vector.symbolAs.circleLabel",{defaultMessage:"marker"})},{id:m.Fb.ICON,label:u.i18n.translate("xpack.maps.vector.symbolAs.IconLabel",{defaultMessage:"icon"})}];function te({disabled:e,disabledBy:t,styleProperty:r,handlePropertyChange:i}){const n=r.getOptions(),o=ee.find((({id:e})=>e===n.value)),a=u.i18n.translate("xpack.maps.vector.symbolLabel",{defaultMessage:"Symbol type"}),l=Object(g.jsx)(h.EuiFormRow,{label:a,display:"columnCompressed"},Object(g.jsx)(h.EuiButtonGroup,{isDisabled:e,buttonSize:"compressed",options:ee,idSelected:o?o.id:void 0,onChange:e=>{const t={options:{value:e}};i(m.Ib.SYMBOLIZE_AS,t)},isFullWidth:!0,legend:a}));return e?Object(g.jsx)(h.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:Object(f.a)(t)},l):l}var re=r(41),ie=r(159),ne=r(96),se=r(5),ae=r(321);class icon_select_IconSelect extends o.Component{constructor(...e){super(...e),n()(this,"state",{isPopoverOpen:!1,isModalVisible:!1}),n()(this,"_handleSave",(({symbolId:e,svg:t,cutoff:r,radius:i,label:n})=>{const o=[...this.props.customIcons.filter((t=>t.symbolId!==e)),{symbolId:e,svg:t,label:n,cutoff:r,radius:i}];this.props.onCustomIconsChange(o),this._hideModal()})),n()(this,"_closePopover",(()=>{this.setState({isPopoverOpen:!1})})),n()(this,"_hideModal",(()=>{this.setState({isModalVisible:!1})})),n()(this,"_openPopover",(()=>{this.setState({isPopoverOpen:!0})})),n()(this,"_showModal",(()=>{this.setState({isModalVisible:!0})})),n()(this,"_toggleModal",(()=>{this.setState((e=>({isModalVisible:!e.isModalVisible})))})),n()(this,"_togglePopover",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),n()(this,"_handleKeyboardActivity",(e=>{var t;"object"==typeof(t=e)&&"keyCode"in t&&(e.key===h.keys.ENTER?(e.preventDefault(),this._togglePopover()):e.key===h.keys.ARROW_DOWN&&this._openPopover())})),n()(this,"_onIconSelect",(e=>{const t=e.find((e=>"on"===e.checked));if(t){const{key:e}=t;this.props.onChange({selectedIconId:e})}this._closePopover()}))}_renderPopoverButton(){const{value:e,svg:t,label:r}=this.props.icon;return Object(g.jsx)(h.EuiFormControlLayout,{icon:{type:"arrowDown",side:"right"},readOnly:!0,fullWidth:!0,compressed:!0,onKeyDown:this._handleKeyboardActivity,append:this.props.append},Object(g.jsx)(h.EuiFieldText,{onClick:this._togglePopover,onKeyDown:this._handleKeyboardActivity,value:r||e,compressed:!0,readOnly:!0,fullWidth:!0,prepend:Object(g.jsx)(ie.a,{key:e,className:"mapIconSelectSymbol__inputButton",symbolId:e,svg:t,fill:Object(se.y)()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})}))}_renderIconSelectable(){const e=[{label:u.i18n.translate("xpack.maps.styles.vector.iconSelect.kibanaIconsGroupLabel",{defaultMessage:"Kibana icons"}),isGroupLabel:!0},...ne.c.map((({value:e,label:t,svg:r})=>({key:e,label:t,prepend:Object(g.jsx)(ie.a,{key:e,symbolId:e,fill:Object(se.y)()?"rgb(223, 229, 239)":"rgb(52, 55, 65)",svg:r})})))],t=this.props.customIcons.map((({symbolId:e,label:t,svg:r})=>({key:e,label:t,prepend:Object(g.jsx)(ie.a,{key:e,symbolId:e,svg:r,fill:Object(se.y)()?"rgb(223, 229, 239)":"rgb(52, 55, 65)"})})));t.length&&t.splice(0,0,{label:u.i18n.translate("xpack.maps.styles.vector.iconSelect.customIconsGroupLabel",{defaultMessage:"Custom icons"}),isGroupLabel:!0});const r=[...t,...e];return Object(g.jsx)(h.EuiSelectable,{searchable:!0,options:r,onChange:this._onIconSelect,compressed:!0},((e,t)=>Object(g.jsx)("div",{style:{width:"300px"}},Object(g.jsx)(h.EuiPopoverTitle,null,t),e,Object(g.jsx)(h.EuiPopoverFooter,null," ",Object(g.jsx)(h.EuiButton,{fullWidth:!0,size:"s",onClick:this._toggleModal},Object(g.jsx)(re.FormattedMessage,{id:"xpack.maps.styles.vector.iconSelect.addCustomIconButtonLabel",defaultMessage:"Add custom icon"}))))))}render(){return Object(g.jsx)(o.Fragment,null,Object(g.jsx)(h.EuiPopover,{ownFocus:!0,button:this._renderPopoverButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,anchorPosition:"downLeft",panelPaddingSize:"s",display:"block"},Object(g.jsx)(h.EuiFocusTrap,{clickOutsideDisables:!0},this._renderIconSelectable())),this.state.isModalVisible?Object(g.jsx)(ae.a,{title:"Add custom Icon",cutoff:m.p,radius:m.q,onSave:this._handleSave,onCancel:this._hideModal}):null)}}function de(e,t){return t.filter((({stop:t})=>e===t)).length>1}function fe(e){const t=ne.b.find((t=>!e.some((({icon:e})=>e===t))));if(t)return t;const r=ne.c.find((({value:t})=>!e.some((({icon:e})=>e===t))));return r?r.value:m.r}function me({field:e,getValueSuggestions:t,iconStops:r,onChange:i,onCustomIconsChange:n,customIcons:o}){return r.map((({stop:a,icon:l,iconSource:c},p)=>{const d=c===m.N.CUSTOM?o.find((({symbolId:e})=>e===l)):Object(ne.i)(l);if(void 0===d)return;const{svg:f,label:y}=d;let v;r.length>2&&0!==p&&(v=Object(g.jsx)(h.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":u.i18n.translate("xpack.maps.styles.iconStops.deleteButtonAriaLabel",{defaultMessage:"Delete"}),title:u.i18n.translate("xpack.maps.styles.iconStops.deleteButtonLabel",{defaultMessage:"Delete"}),onClick:()=>{i({customStops:[...r.slice(0,p),...r.slice(p+1)]})}}));const _=Object(g.jsx)("div",null,v,Object(g.jsx)(h.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":"Add",title:"Add",onClick:()=>{i({customStops:[...r.slice(0,p+1),{stop:"",icon:fe(r)},...r.slice(p+1)]})}})),b=[],x=0===p?Object(g.jsx)(h.EuiFieldText,{"aria-label":B.b,placeholder:B.b,disabled:!0,compressed:!0}):Object(g.jsx)(stop_input_StopInput,{key:e.getName(),field:e,getValueSuggestions:t,value:a,onChange:e=>{const t=[...r];t[p]={...r[p],stop:e},i({customStops:t,isInvalid:de(e,r)})}});return Object(g.jsx)(h.EuiFormRow,{key:p,className:"mapColorStop",isInvalid:0!==b.length,error:b,display:"rowCompressed"},Object(g.jsx)(h.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},x),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(icon_select_IconSelect,{onCustomIconsChange:n,customIcons:o,onChange:({selectedIconId:e})=>{const t=[...r];t[p]={...r[p],icon:e},i({customStops:t})},icon:{value:l,svg:f,label:y},append:_}))))})).filter((e=>void 0!==e))}const _e="CUSTOM_MAP_ID",be=[{stop:null,icon:ne.b[0],iconSource:m.N.MAKI},{stop:"",icon:ne.b[1],iconSource:m.N.MAKI}];class icon_map_select_IconMapSelect extends o.Component{constructor(...e){super(...e),n()(this,"state",{customIconStops:this.props.customIconStops?this.props.customIconStops:be}),n()(this,"_onMapSelect",(e=>{const t=e===_e,r={iconPaletteId:t?null:e,useCustomIconMap:t};this.props.customIconStops||(r.customIconStops=be),this.props.onChange(r)})),n()(this,"_onCustomMapChange",(({customStops:e,isInvalid:t})=>{this.setState({customIconStops:e}),t||this.props.onChange({useCustomIconMap:!0,customIconStops:e})}))}_renderCustomStopsInput(){return this.props.isCustomOnly||this.props.useCustomIconMap?Object(g.jsx)(me,{field:this.props.styleProperty.getField(),getValueSuggestions:this.props.styleProperty.getValueSuggestions,iconStops:this.state.customIconStops,onChange:this._onCustomMapChange,onCustomIconsChange:this.props.onCustomIconsChange,customIcons:this.props.customIcons}):null}_renderMapSelect(){if(this.props.isCustomOnly)return null;const e=[{value:_e,inputDisplay:u.i18n.translate("xpack.maps.styles.icon.customMapLabel",{defaultMessage:"Custom icon palette"})},...Object(ne.h)()];let t="";return this.props.useCustomIconMap?t=_e:this.props.iconPaletteId&&(t=this.props.iconPaletteId),Object(g.jsx)(o.Fragment,null,Object(g.jsx)(h.EuiSuperSelect,{options:e,onChange:this._onMapSelect,valueOfSelected:t,hasDividers:!0,compressed:!0}),Object(g.jsx)(h.EuiSpacer,{size:"s"}))}render(){return Object(g.jsx)(o.Fragment,null,this._renderMapSelect(),this._renderCustomStopsInput())}}function xe({fields:e,onDynamicStyleChange:t,onCustomIconsChange:r,customIcons:i,staticDynamicSelect:n,styleProperty:a}){const l=a.getOptions(),u=e=>{t(a.getStyleName(),{...l,...e})};return Object(g.jsx)(o.Fragment,null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},n),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(x,{styleName:a.getStyleName(),fields:e,selectedFieldName:c.a.get(l,"field.name"),onChange:({field:e})=>{if(!e)return;const{name:r,origin:i}=e;t(a.getStyleName(),{...l,field:{name:r,origin:i}})},compressed:!0}))),Object(g.jsx)(h.EuiSpacer,{size:"s"}),function(){const e=a.getField();return e?Object(g.jsx)(icon_map_select_IconMapSelect,d()({},l,{styleProperty:a,customIcons:i,onChange:u,onCustomIconsChange:r,isCustomOnly:!e.supportsFieldMetaFromLocalData()&&!e.supportsFieldMetaFromEs()})):null}())}function Ce({onStaticStyleChange:e,onCustomIconsChange:t,customIcons:r,staticDynamicSelect:i,styleProperty:n}){return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},i),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(icon_select_IconSelect,{customIcons:r,onChange:({selectedIconId:t})=>{e(n.getStyleName(),{value:t})},onCustomIconsChange:t,icon:n.getOptions()})))}function Me(e){const t=e.styleProperty.isDynamic()?Object(g.jsx)(xe,d()({},e,{styleProperty:e.styleProperty})):Object(g.jsx)(Ce,d()({},e,{styleProperty:e.styleProperty}));return Object(g.jsx)(style_prop_editor_StylePropEditor,e,t)}function Ee({fields:e,onDynamicStyleChange:t,staticDynamicSelect:r,styleProperty:i}){const n=i.getOptions();return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},r),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(x,{styleName:i.getStyleName(),fields:e,selectedFieldName:i.getFieldName(),onChange:({field:e})=>{e&&t(i.getStyleName(),{...n,field:e})},compressed:!0})))}function Te({onStaticStyleChange:e,staticDynamicSelect:t,styleProperty:r}){return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},t),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiFieldText,{placeholder:u.i18n.translate("xpack.maps.styles.staticLabel.valuePlaceholder",{defaultMessage:"symbol label"}),value:r.getOptions().value,onChange:t=>{e(r.getStyleName(),{value:t.target.value})},"aria-label":u.i18n.translate("xpack.maps.styles.staticLabel.valueAriaLabel",{defaultMessage:"symbol label"}),compressed:!0})))}function Pe(e){const t=e.styleProperty.isDynamic()?Object(g.jsx)(Ee,d()({},e,{styleProperty:e.styleProperty})):Object(g.jsx)(Te,d()({},e,{styleProperty:e.styleProperty}));return Object(g.jsx)(style_prop_editor_StylePropEditor,e,t)}function Oe(e){const t=e.styleProperty.getLayerZoomRange(),r=e.styleProperty.getLabelZoomRange(),{useLayerZoomRange:i}=e.styleProperty.getOptions(),n=i?null:Object(g.jsx)(h.EuiFormRow,{hasEmptyLabelSpace:!0},Object(g.jsx)(Z.ValidatedDualRange,{formRowDisplay:"columnCompressed",min:t.minZoom,max:t.maxZoom,value:[r.minZoom,r.maxZoom],showInput:"inputWithPopover",showRange:!0,showLabels:!0,onChange:r=>{e.handlePropertyChange(e.styleProperty.getStyleName(),{options:{...e.styleProperty.getOptions(),minZoom:Math.max(t.minZoom,parseInt(r[0],10)),maxZoom:Math.min(t.maxZoom,parseInt(r[1],10))}})},allowEmptyRange:!1,compressed:!0,prepend:u.i18n.translate("xpack.maps.styles.labelZoomRange.visibleZoom",{defaultMessage:"Zoom levels"})})),o=Object(g.jsx)(h.EuiForm,null,Object(g.jsx)(h.EuiFormRow,{label:Object(f.b)(e.styleProperty.getStyleName())},Object(g.jsx)(h.EuiSwitch,{label:u.i18n.translate("xpack.maps.styles.labelZoomRange.useLayerZoomLabel",{defaultMessage:"Use layer visibility"}),checked:i,onChange:t=>{e.handlePropertyChange(e.styleProperty.getStyleName(),{options:{...e.styleProperty.getOptions(),useLayerZoomRange:t.target.checked}})},compressed:!0})),n);return e.disabled?Object(g.jsx)(h.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:Object(f.a)(e.disabledBy)},o):o}const Le=[{value:m.W.TOP,text:u.i18n.translate("xpack.maps.styles.labelPosition.top",{defaultMessage:"Top"})},{value:m.W.CENTER,text:u.i18n.translate("xpack.maps.styles.labelPosition.center",{defaultMessage:"Center"})},{value:m.W.BOTTOM,text:u.i18n.translate("xpack.maps.styles.labelBorderSize.bottom",{defaultMessage:"Bottom"})}];function ke({hasLabel:e,handlePropertyChange:t,styleProperty:r}){const i=!e||r.isDisabled(),n=Object(g.jsx)(h.EuiFormRow,{label:Object(f.b)(m.Ib.LABEL_POSITION)},Object(g.jsx)(h.EuiSelect,{disabled:i,options:Le,value:i?m.W.CENTER:r.getOptions().position,onChange:function(e){t(r.getStyleName(),{options:{position:e.target.value}})},"aria-label":u.i18n.translate("xpack.maps.styles.labelPositionSelect.ariaLabel",{defaultMessage:"Select label position"}),compressed:!0}));return i?Object(g.jsx)(h.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:e?r.getDisabledReason():Object(f.a)(m.Ib.LABEL_TEXT)},n):n}const Fe=[{value:m.V.NONE,text:u.i18n.translate("xpack.maps.styles.labelBorderSize.noneLabel",{defaultMessage:"None"})},{value:m.V.SMALL,text:u.i18n.translate("xpack.maps.styles.labelBorderSize.smallLabel",{defaultMessage:"Small"})},{value:m.V.MEDIUM,text:u.i18n.translate("xpack.maps.styles.labelBorderSize.mediumLabel",{defaultMessage:"Medium"})},{value:m.V.LARGE,text:u.i18n.translate("xpack.maps.styles.labelBorderSize.largeLabel",{defaultMessage:"Large"})}];function De({disabled:e,disabledBy:t,handlePropertyChange:r,styleProperty:i}){const n=Object(g.jsx)(h.EuiFormRow,{label:Object(f.b)(m.Ib.LABEL_BORDER_SIZE)},Object(g.jsx)(h.EuiSelect,{disabled:e,options:Fe,value:i.getOptions().size,onChange:function(e){const t={options:{size:e.target.value}};r(i.getStyleName(),t)},"aria-label":u.i18n.translate("xpack.maps.styles.labelBorderSizeSelect.ariaLabel",{defaultMessage:"Select label border size"}),compressed:!0}));return e?Object(g.jsx)(h.EuiToolTip,{anchorClassName:"mapStyleFormDisabledTooltip",content:Object(f.a)(t)},n):n}function ze({fields:e,onDynamicStyleChange:t,staticDynamicSelect:r,styleProperty:i}){const n=i.getOptions();return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},r),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(x,{styleName:i.getStyleName(),fields:e,selectedFieldName:i.getFieldName(),onChange:({field:e})=>{t(i.getStyleName(),{...n,field:e})},compressed:!0})))}function Re({onStaticStyleChange:e,staticDynamicSelect:t,styleProperty:r}){return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"flexEnd"},Object(g.jsx)(h.EuiFlexItem,{grow:!1,className:"mapStyleSettings__fixedBox"},t),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(Y.a,{min:0,max:360,value:r.getOptions().orientation,onChange:t=>{e(r.getStyleName(),{orientation:t})},showInput:"inputWithPopover",showLabels:!0,compressed:!0,append:"°"})))}function Ne(e){const t=e.styleProperty.isDynamic()?Object(g.jsx)(ze,e):Object(g.jsx)(Re,e);return Object(g.jsx)(style_prop_editor_StylePropEditor,e,t)}async function Be(e){const t=e.map((async e=>({label:await e.getLabel(),name:e.getName(),origin:e.getOrigin(),type:await e.getDataType(),supportsAutoDomain:e.supportsFieldMetaFromLocalData()||e.supportsFieldMetaFromEs(),isUnsupported:!1}))),r=await Promise.all(t);return new style_fields_helper_StyleFieldsHelper(r)}class style_fields_helper_StyleFieldsHelper{constructor(e){n()(this,"_styleFields",void 0),n()(this,"_ordinalAndCategoricalFields",void 0),n()(this,"_numberFields",void 0),n()(this,"_ordinalFields",void 0);const t=[],r=[],i=[];e.forEach((e=>{(m.h.includes(e.type)||m.sb.includes(e.type))&&t.push(e),"date"!==e.type&&"number"!==e.type||("number"===e.type&&r.push(e),e.supportsAutoDomain&&i.push(e))})),this._styleFields=e,this._ordinalAndCategoricalFields=t,this._numberFields=r,this._ordinalFields=i}hasFieldForStyle(e,t){return this._getFieldsForStyle(t).some((t=>e.getName()===t.name))}_getFieldsForStyle(e){switch(e){case m.Ib.ICON_ORIENTATION:return this._numberFields;case m.Ib.FILL_COLOR:case m.Ib.LINE_COLOR:case m.Ib.LABEL_COLOR:case m.Ib.LABEL_BORDER_COLOR:case m.Ib.ICON:return this._ordinalAndCategoricalFields;case m.Ib.LINE_WIDTH:case m.Ib.LABEL_SIZE:case m.Ib.ICON_SIZE:return this._ordinalFields;case m.Ib.LABEL_TEXT:return this._styleFields;default:return[]}}getFieldsForStyle(e,t){const r=this._getFieldsForStyle(e.getStyleName());return e.isDynamic()&&!e.supportsFeatureState()?r.map((r=>t&&r.origin===m.D.JOIN?{...r,isUnsupported:!0,unsupportedMsg:u.i18n.translate("xpack.maps.style.field.unsupportedWithVectorTileMsg",{defaultMessage:"'{styleLabel}' does not support this field with vector tiles. To style '{styleLabel}' with this field, select 'Limit results' in 'Scaling'.",values:{styleLabel:Object(f.b)(e.getStyleName())}})}:r)):r}getStyleFields(){return this._styleFields}}class vector_style_editor_VectorStyleEditor extends o.Component{constructor(e){super(e),n()(this,"_isMounted",!1),n()(this,"_handleSelectedFeatureChange",(e=>{this.setState({selectedFeature:e})})),n()(this,"_onIsTimeAwareChange",(e=>{this.props.onIsTimeAwareChange(e.target.checked)})),n()(this,"_onStaticStyleChange",((e,t)=>{const r={type:m.Eb.STATIC,options:t};this.props.handlePropertyChange(e,r)})),n()(this,"_onDynamicStyleChange",((e,t)=>{const r={type:m.Eb.DYNAMIC,options:t};this.props.handlePropertyChange(e,r)}));let t=m.Hb.POLYGON;e.isPointsOnly?t=m.Hb.POINT:e.isLinesOnly&&(t=m.Hb.LINE),this.state={styleFields:[],defaultDynamicProperties:Object($.i)(),defaultStaticProperties:Object($.j)(),supportedFeatures:[],selectedFeature:t}}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadFields(),this._loadSupportedFeatures()}componentDidUpdate(){this._loadFields(),this._loadSupportedFeatures()}async _loadFields(){const e=await Be(await this.props.layer.getStyleEditorFields()),t=e.getStyleFields();!this._isMounted||c.a.isEqual(t,this.state.styleFields)&&void 0!==this.state.styleFieldsHelper||this.setState({styleFields:t,styleFieldsHelper:e})}async _loadSupportedFeatures(){const e=await this.props.layer.getSource().getSupportedShapeTypes();this._isMounted&&!c.a.isEqual(e,this.state.supportedFeatures)&&this.setState({supportedFeatures:e})}_hasMarkerOrIcon(){const e=this.props.styleProperties[m.Ib.ICON_SIZE];return e.isDynamic()||e.getOptions().size>0}_hasLabelBorder(){return this.props.styleProperties[m.Ib.LABEL_BORDER_SIZE].getOptions().size!==m.V.NONE}_isLayerSourceMvt(){return this.props.layer.getSource().isMvt()}_renderFillColor(e=!1){const t=this.props.styleProperties[m.Ib.FILL_COLOR];return Object(g.jsx)(q,{disabled:e&&!this._hasMarkerOrIcon(),disabledBy:m.Ib.ICON_SIZE,swatches:j.b,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:t,fields:this.state.styleFieldsHelper.getFieldsForStyle(t,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.FILL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.FILL_COLOR].options})}_renderLineColor(e=!1){const t=e&&!this._hasMarkerOrIcon(),r=this.props.styleProperties[m.Ib.LINE_COLOR];return Object(g.jsx)(q,{disabled:t||!this.props.hasBorder,disabledBy:t?m.Ib.ICON_SIZE:m.Ib.LINE_WIDTH,swatches:j.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:r,fields:this.state.styleFieldsHelper.getFieldsForStyle(r,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LINE_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LINE_COLOR].options})}_renderLineWidth(e=!1){const t=this.props.styleProperties[m.Ib.LINE_WIDTH];return Object(g.jsx)(J,{disabled:e&&!this._hasMarkerOrIcon(),disabledBy:m.Ib.ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:t,fields:this.state.styleFieldsHelper.getFieldsForStyle(t,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LINE_WIDTH].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LINE_WIDTH].options})}_renderLabelProperties(e){const t=Object(B.g)(this.props.styleProperties[m.Ib.LABEL_TEXT]),r=this._hasLabelBorder(),i=this.props.styleProperties[m.Ib.LABEL_TEXT],n=this.props.styleProperties[m.Ib.LABEL_COLOR],l=this.props.styleProperties[m.Ib.LABEL_SIZE],c=this.props.styleProperties[m.Ib.LABEL_BORDER_COLOR];return Object(g.jsx)(o.Fragment,null,Object(g.jsx)(Pe,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:i,fields:this.state.styleFieldsHelper.getFieldsForStyle(i,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LABEL_TEXT].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LABEL_TEXT].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),e?Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(ke,{hasLabel:t,handlePropertyChange:this.props.handlePropertyChange,styleProperty:this.props.styleProperties[m.Ib.LABEL_POSITION]}),Object(g.jsx)(h.EuiSpacer,{size:"m"})):null,Object(g.jsx)(Oe,{disabled:!t,disabledBy:m.Ib.LABEL_TEXT,handlePropertyChange:this.props.handlePropertyChange,styleProperty:this.props.styleProperties[m.Ib.LABEL_ZOOM_RANGE]}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),Object(g.jsx)(q,{disabled:!t,disabledBy:m.Ib.LABEL_TEXT,swatches:j.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:n,fields:this.state.styleFieldsHelper.getFieldsForStyle(n,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LABEL_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LABEL_COLOR].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),Object(g.jsx)(J,{disabled:!t,disabledBy:m.Ib.LABEL_TEXT,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:l,fields:this.state.styleFieldsHelper.getFieldsForStyle(l,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LABEL_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LABEL_SIZE].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),Object(g.jsx)(q,{disabled:!t||!r,disabledBy:t?m.Ib.LABEL_BORDER_SIZE:m.Ib.LABEL_TEXT,swatches:j.d,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:c,fields:this.state.styleFieldsHelper.getFieldsForStyle(c,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.LABEL_BORDER_COLOR].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.LABEL_BORDER_COLOR].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),Object(g.jsx)(De,{disabled:!t,disabledBy:m.Ib.LABEL_TEXT,handlePropertyChange:this.props.handlePropertyChange,styleProperty:this.props.styleProperties[m.Ib.LABEL_BORDER_SIZE]}),Object(g.jsx)(h.EuiSpacer,{size:"m"}))}_renderPointProperties(){const e=this._hasMarkerOrIcon();let t,r;if(this.props.styleProperties[m.Ib.SYMBOLIZE_AS].isSymbolizedAsIcon()){const i=this.props.styleProperties[m.Ib.ICON_ORIENTATION],n=this.props.styleProperties[m.Ib.ICON];t=Object(g.jsx)(o.Fragment,null,Object(g.jsx)(Ne,{disabled:!e,disabledBy:m.Ib.ICON_SIZE,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:i,fields:this.state.styleFieldsHelper.getFieldsForStyle(i,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.ICON_ORIENTATION].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.ICON_ORIENTATION].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"})),r=Object(g.jsx)(o.Fragment,null,Object(g.jsx)(Me,{disabled:!e,disabledBy:m.Ib.ICON_SIZE,customIcons:this.props.customIcons,onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,onCustomIconsChange:this.props.onCustomIconsChange,styleProperty:n,fields:this.state.styleFieldsHelper.getFieldsForStyle(n,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.ICON].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.ICON].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}))}const i=this.props.styleProperties[m.Ib.ICON_SIZE];return Object(g.jsx)(o.Fragment,null,Object(g.jsx)(te,{disabled:!e,disabledBy:m.Ib.ICON_SIZE,styleProperty:this.props.styleProperties[m.Ib.SYMBOLIZE_AS],handlePropertyChange:this.props.handlePropertyChange}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),r,this._renderFillColor(!0),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLineColor(!0),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLineWidth(!0),Object(g.jsx)(h.EuiSpacer,{size:"m"}),t,Object(g.jsx)(J,{onStaticStyleChange:this._onStaticStyleChange,onDynamicStyleChange:this._onDynamicStyleChange,styleProperty:i,fields:this.state.styleFieldsHelper.getFieldsForStyle(i,this._isLayerSourceMvt()),defaultStaticStyleOptions:this.state.defaultStaticProperties[m.Ib.ICON_SIZE].options,defaultDynamicStyleOptions:this.state.defaultDynamicProperties[m.Ib.ICON_SIZE].options}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLabelProperties(!0))}_renderLineProperties(){return Object(g.jsx)(o.Fragment,null,this._renderLineColor(),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLineWidth(),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLabelProperties(!1))}_renderPolygonProperties(){return Object(g.jsx)(o.Fragment,null,this._renderFillColor(),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLineColor(),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLineWidth(),Object(g.jsx)(h.EuiSpacer,{size:"m"}),this._renderLabelProperties(!1))}_renderProperties(){const{supportedFeatures:e,selectedFeature:t,styleFieldsHelper:r}=this.state;if(0===e.length||!r)return null;if(1===e.length)switch(e[0]){case m.Hb.POINT:return this._renderPointProperties();case m.Hb.LINE:return this._renderLineProperties();case m.Hb.POLYGON:return this._renderPolygonProperties()}const i=[{id:m.Hb.POINT,label:u.i18n.translate("xpack.maps.vectorStyleEditor.pointLabel",{defaultMessage:"Points"})},{id:m.Hb.LINE,label:u.i18n.translate("xpack.maps.vectorStyleEditor.lineLabel",{defaultMessage:"Lines"})},{id:m.Hb.POLYGON,label:u.i18n.translate("xpack.maps.vectorStyleEditor.polygonLabel",{defaultMessage:"Polygons"})}];let n=this._renderPolygonProperties();return t===m.Hb.LINE?n=this._renderLineProperties():t===m.Hb.POINT&&(n=this._renderPointProperties()),Object(g.jsx)(o.Fragment,null,Object(g.jsx)(h.EuiButtonGroup,{legend:u.i18n.translate("xpack.maps.vectorStyleEditor.featureTypeButtonGroupLegend",{defaultMessage:"vector feature button group"}),options:i,idSelected:t,onChange:this._handleSelectedFeatureChange}),Object(g.jsx)(h.EuiSpacer,{size:"m"}),n)}_renderIsTimeAwareSwitch(){return this.props.showIsTimeAware?Object(g.jsx)(h.EuiFormRow,{display:"columnCompressedSwitch"},Object(g.jsx)(h.EuiSwitch,{label:u.i18n.translate("xpack.maps.vectorStyleEditor.isTimeAwareLabel",{defaultMessage:"Apply global time to style metadata requests"}),checked:this.props.isTimeAware,onChange:this._onIsTimeAwareChange,compressed:!0})):null}render(){return Object(g.jsx)(o.Fragment,null,this._renderProperties(),this._renderIsTimeAwareSwitch())}}class style_meta_StyleMeta{constructor(e){n()(this,"_descriptor",void 0),this._descriptor=e||{fieldMeta:{}}}getRangeFieldMetaDescriptor(e){return this._descriptor.fieldMeta[e]&&this._descriptor.fieldMeta[e].range?this._descriptor.fieldMeta[e].range:null}getCategoryFieldMetaDescriptor(e){return this._descriptor.fieldMeta[e]?this._descriptor.fieldMeta[e].categories:[]}isPointsOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isPointsOnly}isLinesOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isLinesOnly}isPolygonsOnly(){return!!this._descriptor.geometryTypes&&!!this._descriptor.geometryTypes.isPolygonsOnly}}const Ve=({style:e})=>Object(g.jsx)("svg",{className:"euiIcon euiIcon--medium mapFillableCircle",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",style:e,viewBox:"0 0 16 16"},Object(g.jsx)("defs",null,Object(g.jsx)("path",{id:"fillableCircle",d:"M8,15 C11.8659932,15 15,11.8659932 15,8 C15,4.13400675 11.8659932,        1 8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,        15 Z M8,16 C3.581722,16 0,12.418278 0,8 C0,3.581722 3.581722,0 8,        0 C12.418278,0 16,3.581722 16,8 C16,12.418278 12.418278,16 8,16 Z M8,        12 C10.209139,12 12,10.209139 12,8 C12,5.790861 10.209139,4 8,        4 C5.790861,4 4,5.790861 4,8 C4,10.209139 5.790861,12 8,12 Z M8,        11 C6.34314575,11 5,9.65685425 5,8 C5,6.34314575 6.34314575,5 8,        5 C9.65685425,5 11,6.34314575 11,8 C11,9.65685425 9.65685425,11 8,        11 Z M8,9 C8.55228475,9 9,8.55228475 9,8 C9,7.44771525 8.55228475,7 8,        7 C7.44771525,7 7,7.44771525 7,8 C7,8.55228475 7.44771525,9 8,9 Z"})),Object(g.jsx)("g",null,Object(g.jsx)("ellipse",{id:"path3353",cx:"8.0350437",cy:"7.9660664",rx:"7.3820276",ry:"7.3809776",transform:"matrix(0.99985753,0.01687955,0,1,0,0)"}))),Ue=({style:e})=>Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:e},Object(g.jsx)("line",{x1:"0",y1:"6",x2:"16",y2:"6"})),He=({style:e})=>Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",style:e},Object(g.jsx)("rect",{width:"15",height:"15",x:".5",y:".5",rx:"4"}));function Ge({borderStyle:e={},fillColor:t,isPointsOnly:r,isLinesOnly:i,strokeColor:n,symbolId:o,svg:a}){if(i){const t={stroke:n,strokeWidth:"4px",...e};return Object(g.jsx)(Ue,{style:t})}const l={stroke:n,strokeWidth:"1px",fill:t,...e};return r?o?a?Object(g.jsx)(ie.a,{key:`${o}${t}${n}`,symbolId:o,fill:t,stroke:n,style:e,svg:a}):null:Object(g.jsx)(Ve,{style:l}):Object(g.jsx)(He,{style:l})}var $e=r(206);function We({isLinesOnly:e,isPointsOnly:t,masks:r,styles:i,symbolId:n,svg:o}){const l=[];for(let r=0;r<i.length;r++){const a=i[r].renderLegendDetailRow({isLinesOnly:e,isPointsOnly:t,symbolId:n,svg:o});l.push(Object(g.jsx)("div",{key:r,className:"vectorStyleLegendSpacer"},a))}function c(e){const t=r.filter((t=>t.getEsAggField().getOrigin()===e));if(0===t.length)return null;if(1===t.length){const e=t[0];return Object(g.jsx)($e.a,{key:e.getEsAggField().getMbFieldName(),esAggField:e.getEsAggField(),operator:e.getOperator(),value:e.getValue()})}return Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(h.EuiText,{size:"xs",textAlign:"left",color:"subdued"},Object(g.jsx)("small",null,t[0].getFieldOriginListLabel())),Object(g.jsx)("ul",null,t.map((e=>Object(g.jsx)("li",{key:e.getEsAggField().getMbFieldName(),style:{marginLeft:N.euiThemeVars.euiSizeS}},Object(g.jsx)($e.a,{esAggField:e.getEsAggField(),onlyShowLabelAndValue:!0,operator:e.getOperator(),value:e.getValue()}))))))}return Object(g.jsx)(a.a.Fragment,null,c(m.D.SOURCE),c(m.D.JOIN),l)}var Xe=r(131);class static_style_property_StaticStyleProperty extends Xe.a{}n()(static_style_property_StaticStyleProperty,"type",m.Eb.STATIC);var Ke=r(124);class right_aligned_text_RightAlignedText extends o.Component{constructor(...e){super(...e),n()(this,"_textRef",a.a.createRef())}componentDidMount(){this._setWidth()}componentDidUpdate(){this._setWidth()}_setWidth(){this._textRef.current&&this.props.setWidth(this._textRef.current.getBBox().width)}render(){return Object(g.jsx)("text",{ref:this._textRef,style:this.props.style,textAnchor:"end",x:this.props.x,y:this.props.y},this.props.value)}}function Je(e,t,r){return e&&t?`> ${r}`:r}function Qe(e,t,r){return e&&t?`< ${r}`:r}class marker_list_MarkerList{constructor(e,t){n()(this,"_minFontDistance",void 0),n()(this,"_maxMarker",void 0),n()(this,"_markers",[]),this._minFontDistance=.85*e,this._maxMarker=t}push(e){e.textY-this._maxMarker.textY<this._minFontDistance||(0!==this._markers.length?this._markers[this._markers.length-1].textY-e.textY>this._minFontDistance&&this._markers.push(e):this._markers.push(e))}getMarkers(){return[...this._markers.map((e=>e.svg)),this._maxMarker.svg]}}class marker_size_legend_MarkerSizeLegend extends o.Component{static getDerivedStateFromProps(e,t){const r=e.style.getRangeFieldMeta();return c.a.isEqual(r,t.fieldMeta)?null:{maxLabelWidth:0,fieldMeta:r}}constructor(e){super(e),n()(this,"_isMounted",!1),n()(this,"_onRightAlignedWidthChange",(e=>{e>this.state.maxLabelWidth&&this.setState({maxLabelWidth:e})})),this.state={label:"",maxLabelWidth:0,fieldMeta:this.props.style.getRangeFieldMeta()}}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const e=this.props.style.getField();if(!e)return;const t=await e.getLabel();this._isMounted&&this.state.label!==t&&this.setState({label:t})}_formatValue(e){return""===e?e:this.props.style.formatField(e)}_renderMarkers(){const e=this.state.fieldMeta,t=this.props.style.getOptions();if(!e||!t)return null;const r=void 0!==t.invert&&t.invert,i={fillOpacity:0,stroke:N.euiThemeVars.euiTextColor,strokeWidth:1},n=2*t.maxSize+5+2*i.strokeWidth,o=t.maxSize+i.strokeWidth,a=n-i.strokeWidth,l=(e,t)=>{const r=a-e,l=r-e,c=this.state.maxLabelWidth+5,u=l+5,h=u>n?n:u;return{svg:Object(g.jsx)("g",{key:e},Object(g.jsx)("line",{style:{stroke:N.euiThemeVars.euiBorderColor},x1:o,y1:l,x2:2.25*o,y2:l}),Object(g.jsx)(right_aligned_text_RightAlignedText,{setWidth:this._onRightAlignedWidthChange,style:{fontSize:10,fill:N.euiThemeVars.euiTextColor},x:2.25*o+c,y:h,value:t}),Object(g.jsx)("circle",{style:i,cx:o,cy:r,r:e})),textY:h}};function c(e){return e*(t.maxSize-t.minSize)+t.minSize}function u(t){const i=Math.pow(t*Math.sqrt(e.delta),2),n=r?e.max-i:i+e.min;return e.delta>3?Math.round(n):n}const h=Je(this.props.style.isFieldMetaEnabled(),Boolean(e.isMaxOutsideStdRange),this._formatValue(e.max)),p=Qe(this.props.style.isFieldMetaEnabled(),Boolean(e.isMinOutsideStdRange),this._formatValue(e.min)),d=new marker_list_MarkerList(10,l(t.maxSize,r?p:h));return e.delta>0&&(d.push(l(t.minSize,r?h:p)),d.push(l(c(.25),this._formatValue(u(.25)))),d.push(l(c(.5),this._formatValue(u(.5)))),d.push(l(c(.75),this._formatValue(u(.75))))),Object(g.jsx)("svg",{height:n,xmlns:"http://www.w3.org/2000/svg"},d.getMarkers())}render(){return Object(g.jsx)("div",null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(g.jsx)(h.EuiFlexItem,{grow:!1},Object(g.jsx)(h.EuiToolTip,{position:"top",title:this.props.style.getDisplayStyleName(),content:this.state.label},Object(g.jsx)(h.EuiText,{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},Object(g.jsx)("small",null,Object(g.jsx)("strong",null,this.state.label)))))),this._renderMarkers())}}var et=r(207);const tt="";class ordinal_legend_OrdinalLegend extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{label:tt})}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const e=this.props.style.getField();if(!e)return;const t=await e.getLabel();this._isMounted&&!c.a.isEqual(this.state.label,t)&&this.setState({label:t})}_formatValue(e){return e===tt?e:this.props.style.formatField(e)}_renderRangeLegendHeader(){let e;if(this.props.style.getStyleName()===m.Ib.LINE_WIDTH)e=function(){const e={stroke:"grey",fill:"none",width:"12px"};return[Object(g.jsx)(Ve,{style:{...e,strokeWidth:"1px"}}),Object(g.jsx)(Ve,{style:{...e,strokeWidth:"2px"}}),Object(g.jsx)(Ve,{style:{...e,strokeWidth:"3px"}})]}();else{if(this.props.style.getStyleName()!==m.Ib.ICON_SIZE)return null;e=function(){const e={stroke:"grey",fill:"grey"};return[Object(g.jsx)(Ve,{style:{...e,width:"4px"}}),Object(g.jsx)(Ve,{style:{...e,width:"8px"}}),Object(g.jsx)(Ve,{style:{...e,width:"12px"}})]}()}return Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},e.map(((t,r)=>{let i;return r===e.length-1||(i=Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiHorizontalRule,{margin:"xs"}))),Object(g.jsx)(o.Fragment,{key:r},Object(g.jsx)(h.EuiFlexItem,{grow:!1},t),i)})))}render(){const e=this._renderRangeLegendHeader();if(!e)return null;const t=this.props.style.getRangeFieldMeta();let r=tt,i=tt;if(t){const e=this._formatValue(c.a.get(t,"min",tt));r=Qe(this.props.style.isFieldMetaEnabled(),Boolean(t.isMinOutsideStdRange),e);const n=this._formatValue(c.a.get(t,"max",tt));i=Je(this.props.style.isFieldMetaEnabled(),Boolean(t.isMaxOutsideStdRange),n)}const n=this.props.style.getOptions(),o=void 0!==n.invert&&n.invert;return Object(g.jsx)(et.a,{header:e,minLabel:r,maxLabel:i,propertyLabel:this.props.style.getDisplayStyleName(),fieldLabel:this.state.label,invert:o})}}class dynamic_size_property_DynamicSizeProperty extends Ke.a{constructor(e,t,r,i,o,a){super(e,t,r,i,o),n()(this,"_isSymbolizedAsIcon",void 0),this._isSymbolizedAsIcon=a}supportsFeatureState(){return(this.getStyleName()!==m.Ib.ICON_SIZE||!this._isSymbolizedAsIcon)&&this.getStyleName()!==m.Ib.LABEL_SIZE}syncHaloWidthWithMb(e,t){t.setPaintProperty(e,"icon-halo-width",this.getMbSizeExpression())}syncIconSizeWithMb(e,t){t.setLayoutProperty(e,"icon-size",this.getMbSizeExpression())}syncCircleStrokeWidthWithMb(e,t){t.setPaintProperty(e,"circle-stroke-width",this.getMbSizeExpression())}syncCircleRadiusWithMb(e,t){t.setPaintProperty(e,"circle-radius",this.getMbSizeExpression())}syncLineWidthWithMb(e,t){t.setPaintProperty(e,"line-width",this.getMbSizeExpression())}syncLabelSizeWithMb(e,t){t.setLayoutProperty(e,"text-size",this.getMbSizeExpression())}getMbSizeExpression(e){const t=this.getRangeFieldMeta();if(!this.isSizeDynamicConfigComplete()||!t)return this._options.minSize>=0?this._options.minSize:null;const r=this.getStyleName()===m.Ib.ICON_SIZE,i=t.min<1?Math.abs(t.min)+1:0,n=r?Math.sqrt(t.max+i):t.max,o=r?Math.sqrt(t.min+i):t.min,a=null!=e&&e.maxStopOutput?e.maxStopOutput:this.getMaxStopOutput(),l=null!=e&&e.minStopOutput?e.minStopOutput:this.getMinStopOutput(),c=void 0!==this._options.invert&&this._options.invert,u=t.min===t.max?c?[n,l]:[n,a]:c?[o,a,n,l]:[o,l,n,a],h=Object(B.h)({lookupFunction:null!=e&&e.forceFeatureProperties?m.ib.GET:this.getMbLookupFunction(),maxValue:t.max,minValue:t.min,fieldName:this.getMbFieldName(),fallback:c?t.max:t.min}),p=t.min<1?["+",h,i]:h;return["interpolate",["linear"],r?["sqrt",p]:h,...u]}getMaxStopOutput(){return this.getStyleName()===m.Ib.ICON_SIZE&&this._isSymbolizedAsIcon?this._options.maxSize/m.M:this._options.maxSize}getMinStopOutput(){return this.getStyleName()===m.Ib.ICON_SIZE&&this._isSymbolizedAsIcon?this._options.minSize/m.M:this._options.minSize}isSizeDynamicConfigComplete(){return this._field&&this._field.isValid()&&this._options.minSize>=0&&this._options.maxSize>=0}renderLegendDetailRow(){return this.getStyleName()!==m.Ib.ICON_SIZE||this._isSymbolizedAsIcon?Object(g.jsx)(ordinal_legend_OrdinalLegend,{style:this}):Object(g.jsx)(marker_size_legend_MarkerSizeLegend,{style:this})}}class static_size_property_StaticSizeProperty extends static_style_property_StaticStyleProperty{constructor(e,t){"number"!=typeof e.size?super({size:1},t):super(e,t)}syncHaloWidthWithMb(e,t){t.setPaintProperty(e,"icon-halo-width",this._options.size)}syncIconSizeWithMb(e,t){t.setLayoutProperty(e,"icon-size",this._options.size/m.M)}syncCircleStrokeWidthWithMb(e,t,r){r?t.setPaintProperty(e,"circle-stroke-width",0):t.setPaintProperty(e,"circle-stroke-width",this._options.size)}syncCircleRadiusWithMb(e,t){t.setPaintProperty(e,"circle-radius",this._options.size)}syncLineWidthWithMb(e,t){t.setPaintProperty(e,"line-width",this._options.size)}syncLabelSizeWithMb(e,t){t.setLayoutProperty(e,"text-size",this._options.size)}}class static_color_property_StaticColorProperty extends static_style_property_StaticStyleProperty{syncCircleColorWithMb(e,t,r){t.setPaintProperty(e,"circle-color",this._options.color),t.setPaintProperty(e,"circle-opacity",r)}syncFillColorWithMb(e,t,r){t.setPaintProperty(e,"fill-color",this._options.color),t.setPaintProperty(e,"fill-opacity",r)}syncIconColorWithMb(e,t){t.setPaintProperty(e,"icon-color",this._options.color)}syncHaloBorderColorWithMb(e,t){t.setPaintProperty(e,"icon-halo-color",this._options.color)}syncLineColorWithMb(e,t,r){t.setPaintProperty(e,"line-color",this._options.color),t.setPaintProperty(e,"line-opacity",r)}syncCircleStrokeWithMb(e,t,r){t.setPaintProperty(e,"circle-stroke-color",this._options.color),t.setPaintProperty(e,"circle-stroke-opacity",r)}syncLabelColorWithMb(e,t,r){t.setPaintProperty(e,"text-color",this._options.color),t.setPaintProperty(e,"text-opacity",r)}syncLabelBorderColorWithMb(e,t){t.setPaintProperty(e,"text-halo-color",this._options.color)}}function it({styleName:e,label:t,color:r,isLinesOnly:i,isPointsOnly:n,symbolId:o,svg:a}){return Object(g.jsx)(h.EuiFlexGroup,{direction:"row",gutterSize:"none"},Object(g.jsx)(h.EuiFlexItem,{className:"mapLegendIconPreview",grow:!1},e===m.Ib.LABEL_COLOR?Object(g.jsx)(h.EuiText,{size:"xs",style:{color:r}},"Tx"):Object(g.jsx)(Ge,{fillColor:e===m.Ib.FILL_COLOR?r:"none",isPointsOnly:n,isLinesOnly:i,strokeColor:r,symbolId:o,svg:a})),Object(g.jsx)(h.EuiFlexItem,null,Object(g.jsx)(h.EuiText,{size:"xs"},t)))}class breaked_legend_BreakedLegend extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{label:""})}componentDidMount(){this._isMounted=!0,this._loadLabel()}componentDidUpdate(){this._loadLabel()}componentWillUnmount(){this._isMounted=!1}async _loadLabel(){const e=this.props.style.getField();if(!e)return;const t=await e.getLabel();this._isMounted&&!c.a.isEqual(this.state.label,t)&&this.setState({label:t})}render(){if(""===this.state.label)return null;const e=this.props.breaks.map((({symbolId:e,svg:t,label:r,color:i},n)=>Object(g.jsx)(h.EuiFlexItem,{key:n},Object(g.jsx)(it,{styleName:this.props.style.getStyleName(),label:r,color:i,isLinesOnly:this.props.isLinesOnly,isPointsOnly:this.props.isPointsOnly,symbolId:e,svg:t}))));return Object(g.jsx)("div",null,Object(g.jsx)(h.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(g.jsx)(h.EuiFlexItem,{grow:!1},Object(g.jsx)(h.EuiToolTip,{position:"top",title:this.props.style.getDisplayStyleName(),content:this.state.label},Object(g.jsx)(h.EuiText,{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},Object(g.jsx)("small",null,Object(g.jsx)("strong",null,this.state.label)))))),Object(g.jsx)(h.EuiFlexGroup,{direction:"column",gutterSize:"none"},e))}}var ot=r(264);const at=u.i18n.translate("xpack.maps.legend.upto",{defaultMessage:"up to"}),lt="rgba(0,0,0,0)";class dynamic_color_property_DynamicColorProperty extends Ke.a{constructor(e,t,r,i,o,a){super(e,t,r,i,o),n()(this,"_chartsPaletteServiceGetColor",void 0),this._chartsPaletteServiceGetColor=a}syncCircleColorWithMb(e,t,r){const i=this._getMbColor();t.setPaintProperty(e,"circle-color",i),t.setPaintProperty(e,"circle-opacity",r)}syncIconColorWithMb(e,t){const r=this._getMbColor();t.setPaintProperty(e,"icon-color",r)}syncHaloBorderColorWithMb(e,t){const r=this._getMbColor();t.setPaintProperty(e,"icon-halo-color",r)}syncCircleStrokeWithMb(e,t,r){const i=this._getMbColor();t.setPaintProperty(e,"circle-stroke-color",i),t.setPaintProperty(e,"circle-stroke-opacity",r)}syncFillColorWithMb(e,t,r){const i=this._getMbColor();t.setPaintProperty(e,"fill-color",i),t.setPaintProperty(e,"fill-opacity",r)}syncLineColorWithMb(e,t,r){const i=this._getMbColor();t.setPaintProperty(e,"line-color",i),t.setPaintProperty(e,"line-opacity",r)}syncLabelColorWithMb(e,t,r){const i=this._getMbColor();t.setPaintProperty(e,"text-color",i),t.setPaintProperty(e,"text-opacity",r)}syncLabelBorderColorWithMb(e,t){const r=this._getMbColor();t.setPaintProperty(e,"text-halo-color",r)}supportsFieldMeta(){return!!(this.isComplete()&&this._field&&this._field.supportsFieldMetaFromEs())&&(this.isCategorical()&&!this._options.useCustomColorPalette||this.isOrdinal()&&!this._options.useCustomColorRamp)}isOrdinal(){return void 0===this._options.type||this._options.type===m.j.ORDINAL}isCategorical(){return this._options.type===m.j.CATEGORICAL}getNumberOfCategories(){if(!this._options.colorCategory)return 0;const e=Object(j.f)(this._options.colorCategory);return e?e.length:0}_getSupportedDataMappingFunctions(){return[m.n.INTERPOLATE,m.n.PERCENTILES]}_getMbColor(){return this.getMbFieldName()?this.isCategorical()?this._getCategoricalColorMbExpression():this._getOrdinalColorMbExpression():null}_getOrdinalColorMbExpression(){const e=void 0!==this._options.invert&&this._options.invert,t=this.getMbFieldName();if(this._options.useCustomColorRamp){if(!this._options.customColorRamp||!this._options.customColorRamp.length)return null;const e=this._options.customColorRamp.reduce(((e,t)=>[...e,t.stop,t.color]),[]);return["step",Object(B.h)({minValue:e[0],maxValue:e[e.length-2],lookupFunction:this.getMbLookupFunction(),fallback:e[0]-1,fieldName:t}),lt,...e]}if(this.getDataMappingFunction()===m.n.PERCENTILES){const r=this.getPercentilesFieldMeta();if(!r||!r.length)return null;const i=Object(j.j)(this._options.color?this._options.color:null,r,e);return i?["step",Object(B.h)({minValue:i[0],maxValue:i[i.length-2],lookupFunction:this.getMbLookupFunction(),fallback:i[0]-1,fieldName:t}),lt,...i]:null}const r=this.getRangeFieldMeta();if(!r)return null;const i=Object(j.i)(this._options.color?this._options.color:null,r.min,r.max,e);if(!i)return null;const n=r.min-1;return["interpolate",["linear"],Object(B.h)({minValue:r.min,maxValue:r.max,lookupFunction:this.getMbLookupFunction(),fallback:n,fieldName:t}),n,lt,...i]}_getCustomRampColorStops(){return this._options.customColorRamp?this._options.customColorRamp.reduce(((e,t)=>[...e,t.stop,t.color]),[]):[]}_getOtherCategoryColor(){return this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor("__other__"):this._options.otherCategoryColor?this._options.otherCategoryColor:B.a}_getColorPaletteStops(){if(this._options.useCustomColorPalette&&this._options.customColorPalette){if(P(this._options.customColorPalette))return[];const e=[];for(let t=0;t<this._options.customColorPalette.length;t++){const r=this._options.customColorPalette[t];e.push({stop:r.stop,color:r.color,isOtherCategory:!1})}return[...e,{stop:Ke.b,color:this._getOtherCategoryColor(),isOtherCategory:!0}]}const e=this.getCategoryFieldMeta(),t=this._options.colorCategory?Object(j.f)(this._options.colorCategory):null;if(0===e.length||!t)return[];const r=e.findIndex((e=>e.key===Ke.b)),i=r>0?[...e.slice(0,r),...e.slice(r+1)]:[...e],n=Math.min(t.length,i.length),o=[];for(let e=0;e<n;e++)o.push({stop:i[e].key,color:this._chartsPaletteServiceGetColor?this._chartsPaletteServiceGetColor(i[e].key):t[e],isOtherCategory:!1});return r>0?[...o,{stop:Ke.b,color:this._getOtherCategoryColor(),isOtherCategory:!0}]:o}_getCategoricalColorMbExpression(){const e=this._getOtherCategoryColor();if(this._options.useCustomColorPalette&&(!this._options.customColorPalette||!this._options.customColorPalette.length))return e;const t=this._getColorPaletteStops();if(t.length<1)return e;const r=[];for(let e=0;e<t.length;e++){const i=t[e];i.isOtherCategory||(r.push(`${i.stop}`),r.push(i.color))}return r.push(e),["match",["to-string",["get",this.getMbFieldName()]],...r]}_getOrdinalBreaks(e,t){const r=void 0!==this._options.invert&&this._options.invert;let i=null,n=null;if(this._options.useCustomColorRamp){if(!this._options.customColorRamp)return[];i=this._getCustomRampColorStops()}else if(this.getDataMappingFunction()===m.n.PERCENTILES){const e=this.getPercentilesFieldMeta();if(!e)return[];i=Object(j.j)(this._options.color?this._options.color:null,e,r),n=function(t,r){const i=r?parseFloat(e[t/2+1].percentile):parseFloat(e[t/2].percentile);return`${i}${Object(ot.a)(i)}: `}}else{const n=this.getRangeFieldMeta();if(!n||!this._options.color)return[];if(0===n.delta){const i=r?Object(j.f)(this._options.color).reverse():Object(j.f)(this._options.color);return[{color:i[i.length-1],label:this.formatField(Object(B.d)(n.max)),symbolId:e,svg:t}]}i=Object(j.i)(this._options.color?this._options.color:null,n.min,n.max,r)}if(!i||i.length<=2)return[];const o=[],a=i.length-2;for(let r=0;r<i.length;r+=2){const l=r<a,c=i[r],u=this.formatField(Object(B.d)(c)),h=i[r+1],p=n?n(r,!1):"";let d="";if(l){const e=i[r+2],t=this.formatField(Object(B.d)(e)),o=n?n(r,!0):"";d=0===r?`< ${o}${t}`:`${p}${u} ${at} ${o}${t}`}else d=`>= ${p}${u}`;o.push({color:h,label:d,symbolId:e,svg:t})}return o}_getCategoricalBreaks(e,t){const r=[];return this._getColorPaletteStops().forEach((({stop:i,color:n,isOtherCategory:o})=>{null!==i&&null!=n&&r.push({color:n,svg:t,symbolId:e,label:o?Object(g.jsx)(h.EuiTextColor,{color:"subdued"},B.b):this.formatField(i)})})),r}renderLegendDetailRow({isPointsOnly:e,isLinesOnly:t,symbolId:r,svg:i}){let n=[];return this.isOrdinal()?n=this._getOrdinalBreaks(r,i):this.isCategorical()&&(n=this._getCategoricalBreaks(r,i)),Object(g.jsx)(breaked_legend_BreakedLegend,{style:this,breaks:n,isPointsOnly:e,isLinesOnly:t})}}class static_orientation_property_StaticOrientationProperty extends static_style_property_StaticStyleProperty{constructor(e,t){"number"!=typeof e.orientation?super({orientation:0},t):super(e,t)}syncIconRotationWithMb(e,t){t.setLayoutProperty(e,"icon-rotate",this._options.orientation)}}class dynamic_orientation_property_DynamicOrientationProperty extends Ke.a{syncIconRotationWithMb(e,t){if(this._field&&this._field.isValid()){const r=this.getMbPropertyName();t.setLayoutProperty(e,"icon-rotate",["coalesce",[this.getMbLookupFunction(),r],0])}else t.setLayoutProperty(e,"icon-rotate",0)}supportsFieldMeta(){return!1}supportsFeatureState(){return!1}}class static_text_property_StaticTextProperty extends static_style_property_StaticStyleProperty{isComplete(){return this.getOptions().value.length>0}syncTextFieldWithMb(e,t){this.getOptions().value.length?t.setLayoutProperty(e,"text-field",this.getOptions().value):void 0!==t.getLayoutProperty(e,"text-field")&&t.setLayoutProperty(e,"text-field",void 0)}}class dynamic_text_property_DynamicTextProperty extends Ke.a{syncTextFieldWithMb(e,t){if(this._field&&this._field.isValid()){const r=this.getMbPropertyName();this._field.isCount()?t.setLayoutProperty(e,"text-field",["number-format",[this.getMbLookupFunction(),r],{locale:u.i18n.getLocale()}]):t.setLayoutProperty(e,"text-field",["coalesce",[this.getMbLookupFunction(),r],""])}else void 0!==t.getLayoutProperty(e,"text-field")&&t.setLayoutProperty(e,"text-field",void 0)}isOrdinal(){return!1}supportsFieldMeta(){return!1}supportsFeatureState(){return!1}getMbPropertyValue(e){return this.formatField(e)}}class label_zoom_range_property_LabelZoomRangeProperty extends Xe.a{constructor(e,t,r,i){super(e,t),n()(this,"_layerMinZoom",void 0),n()(this,"_layerMaxZoom",void 0),this._layerMinZoom=r,this._layerMaxZoom=i}syncLabelZoomRange(e,t){const{maxZoom:r,minZoom:i}=this.getLabelZoomRange();t.setLayerZoomRange(e,i,r)}getLayerZoomRange(){return{maxZoom:this._layerMaxZoom,minZoom:this._layerMinZoom}}getLabelZoomRange(){const{useLayerZoomRange:e,maxZoom:t,minZoom:r}=this.getOptions();return e?this.getLayerZoomRange():{maxZoom:Math.min(this._layerMaxZoom,t),minZoom:Math.max(this._layerMinZoom,r)}}}class label_border_size_property_LabelBorderSizeProperty extends Xe.a{constructor(e,t,r){super(e,t),n()(this,"_labelSizeProperty",void 0),this._labelSizeProperty=r}syncLabelBorderSizeWithMb(e,t){if(this.getOptions().size===m.V.NONE)return void t.setPaintProperty(e,"text-halo-width",0);const r=function(e){switch(e){case m.V.LARGE:return.2;case m.V.MEDIUM:return.125;default:return.0625}}(this.getOptions().size);if(this._labelSizeProperty.isDynamic()&&this._labelSizeProperty.isComplete()){const i=this._labelSizeProperty.getMbSizeExpression();if(i)return void t.setPaintProperty(e,"text-halo-width",["max",["*",i,r],1])}const i=c.a.get(this._labelSizeProperty.getOptions(),"size",$.b),n=Math.max(i*r,1);t.setPaintProperty(e,"text-halo-width",n)}}class label_position_property_LabelPositionProperty extends Xe.a{constructor(e,t,r,i,o,a){super(e,t),n()(this,"_iconProperty",void 0),n()(this,"_iconSizeProperty",void 0),n()(this,"_labelSizeProperty",void 0),n()(this,"_isSymbolizedAsIcon",void 0),this._iconProperty=r,this._iconSizeProperty=i,this._labelSizeProperty=o,this._isSymbolizedAsIcon=a}isDisabled(){return!!this._labelSizeProperty.isDynamic()||!(!this._iconSizeProperty.isDynamic()||!this._iconSizeProperty.isComplete())&&this._isIconSizeFromJoin()}getDisabledReason(){return this._labelSizeProperty.isDynamic()?u.i18n.translate("xpack.maps.labelPosition.dynamicLabelSizeNotSupported",{defaultMessage:"{labelPositionPropertyLabel} is not supported with '{byValueLabel}' {labelSizePropertyLabel}. Set {labelSizePropertyLabel} to '{fixedLabel}' to enable.",values:{byValueLabel:v.toLowerCase(),fixedLabel:y.toLowerCase(),labelSizePropertyLabel:Object(f.b)(m.Ib.LABEL_SIZE).toLowerCase(),labelPositionPropertyLabel:Object(f.b)(m.Ib.LABEL_POSITION)}}):this._isIconSizeFromJoin()?u.i18n.translate("xpack.maps.labelPosition.iconSizeJoinFieldNotSupportMsg",{defaultMessage:"{labelPositionPropertyLabel} is not supported with {iconSizePropertyLabel} join field {iconSizeFieldName}. Set {iconSizePropertyLabel} to source field to enable.",values:{iconSizePropertyLabel:Object(f.b)(m.Ib.ICON_SIZE),iconSizeFieldName:this._iconSizeProperty.getFieldName(),labelPositionPropertyLabel:Object(f.b)(m.Ib.LABEL_POSITION)}}):""}syncLabelPositionWithMb(e,t){if(this._options.position===m.W.CENTER||this.isDisabled())return t.setLayoutProperty(e,"text-offset",[0,0]),void t.setLayoutProperty(e,"text-anchor","center");t.setLayoutProperty(e,"text-anchor",this._options.position===m.W.BOTTOM?"top":"bottom");const r=this._getLabelSize();if(this._iconSizeProperty.isDynamic()&&this._iconSizeProperty.isComplete()&&this._iconSizeProperty.isSizeDynamicConfigComplete()){const i=this._iconSizeProperty.getOptions(),n=this._iconSizeProperty.getMbSizeExpression({forceFeatureProperties:!0,maxStopOutput:["literal",this._getTextOffset(i.maxSize,r)],minStopOutput:["literal",this._getTextOffset(i.minSize,r)]});return void t.setLayoutProperty(e,"text-offset",n)}const i=this._iconSizeProperty.isDynamic()?$.a:this._iconSizeProperty.getOptions().size;t.setLayoutProperty(e,"text-offset",this._getTextOffset(i,r))}_getTextOffset(e,t){const r=e/t;return[0,(this._options.position===m.W.BOTTOM?r:-1*r)*this._getIconScale()]}_getIconScale(){return this._isSymbolizedAsIcon?"center"===(this._iconProperty.isDynamic()?"center":this._iconProperty.getSymbolAnchor())?1:this._options.position===m.W.TOP?1.75:0:1}_getLabelSize(){return this._labelSizeProperty.isDynamic()?$.b:this._labelSizeProperty.getOptions().size}_isIconSizeFromJoin(){return this._iconSizeProperty.isDynamic()&&this._iconSizeProperty.getFieldOrigin()===m.D.JOIN}}function ct(e,t){if(!e)return t;if(e.type===m.Eb.STATIC)return e.options.color;const r=e.options;if(!r.field||!r.field.name)return t;if(r.type===m.j.CATEGORICAL){if(r.useCustomColorPalette)return r.customColorPalette&&r.customColorPalette.length?r.customColorPalette[0].color:t;if(!r.colorCategory)return t;const e=Object(j.f)(r.colorCategory);return e?e[0]:t}if(r.useCustomColorRamp){if(!r.customColorRamp||!r.customColorRamp.length)return t;const e=Math.floor((r.customColorRamp.length-1)/2);return r.customColorRamp[e].color}if(!r.color)return t;return Object(j.g)(r.color)||t}class symbolize_as_property_SymbolizeAsProperty extends Xe.a{constructor(...e){super(...e),n()(this,"isSymbolizedAsIcon",(()=>this.getOptions().value===m.Fb.ICON))}}class static_icon_property_StaticIconProperty extends static_style_property_StaticStyleProperty{syncIconWithMb(e,t){t.setLayoutProperty(e,"icon-anchor",this.getSymbolAnchor()),t.setLayoutProperty(e,"icon-image",this._options.value)}getSymbolAnchor(){return Object(ne.j)(this._options.value)}}class dynamic_icon_property_DynamicIconProperty extends Ke.a{isOrdinal(){return!1}isCategorical(){return!0}getNumberOfCategories(){return Object(ne.g)(this._options.iconPaletteId).length}syncIconWithMb(e,t){this._isIconDynamicConfigComplete()?(t.setLayoutProperty(e,"icon-image",this._getMbIconImageExpression()),t.setLayoutProperty(e,"icon-anchor",this._getMbIconAnchorExpression())):(t.setLayoutProperty(e,"icon-image",null),t.setLayoutProperty(e,"icon-anchor",null))}_getPaletteStops(){if(this._options.useCustomIconMap&&this._options.customIconStops){const e=[];for(let t=1;t<this._options.customIconStops.length;t++){const{stop:r,icon:i,iconSource:n}=this._options.customIconStops[t];e.push({stop:r,style:i,iconSource:n})}return{fallbackSymbolId:this._options.customIconStops.length>0?this._options.customIconStops[0].icon:null,stops:e}}return Object(B.c)({categories:this.getCategoryFieldMeta(),paletteValues:Object(ne.g)(this._options.iconPaletteId)})}_getMbIconImageExpression(){const{stops:e,fallbackSymbolId:t}=this._getPaletteStops();if(e.length<1||!t)return null;const r=[];return e.forEach((({stop:e,style:t})=>{r.push(`${e}`),r.push(t)})),t&&r.push(t),["match",["to-string",["get",this.getMbFieldName()]],...r]}_getMbIconAnchorExpression(){const{stops:e,fallbackSymbolId:t}=this._getPaletteStops();if(e.length<1||!t)return null;const r=[];return e.forEach((({stop:e,style:t})=>{r.push(`${e}`),r.push(Object(ne.j)(t))})),t&&r.push(Object(ne.j)(t)),["match",["to-string",["get",this.getMbFieldName()]],...r]}_isIconDynamicConfigComplete(){return this._field&&this._field.isValid()}renderLegendDetailRow({isPointsOnly:e,isLinesOnly:t}){const{stops:r,fallbackSymbolId:i}=this._getPaletteStops(),n=[],o=this._layer.getCurrentStyle();if(r.forEach((({stop:e,style:t})=>{if(e){const r=o.getIconSvg(t);n.push({color:"grey",label:this.formatField(e),symbolId:t,svg:r})}})),i){const e=o.getIconSvg(i);n.push({color:"grey",label:Object(g.jsx)(h.EuiTextColor,{color:"success"},B.b),symbolId:i,svg:e})}return Object(g.jsx)(breaked_legend_BreakedLegend,{style:this,breaks:n,isPointsOnly:e,isLinesOnly:t})}}class vector_style_VectorStyle{static createDescriptor(e={},t=!0){return{type:m.Y.VECTOR,properties:{...Object($.j)(),...e},isTimeAware:t}}static createDefaultStyleProperties(e){return Object($.j)(e)}constructor(e,t,r,i,o){n()(this,"_descriptor",void 0),n()(this,"_layer",void 0),n()(this,"_customIcons",void 0),n()(this,"_source",void 0),n()(this,"_styleMeta",void 0),n()(this,"_symbolizeAs",void 0),n()(this,"_lineColor",void 0),n()(this,"_fillColor",void 0),n()(this,"_lineWidth",void 0),n()(this,"_icon",void 0),n()(this,"_iconSize",void 0),n()(this,"_iconOrientation",void 0),n()(this,"_label",void 0),n()(this,"_labelZoomRange",void 0),n()(this,"_labelSize",void 0),n()(this,"_labelColor",void 0),n()(this,"_labelBorderColor",void 0),n()(this,"_labelBorderSize",void 0),n()(this,"_labelPosition",void 0),n()(this,"getIsPointsOnly",(()=>this._styleMeta.isPointsOnly())),n()(this,"_getIsLinesOnly",(()=>this._styleMeta.isLinesOnly())),n()(this,"_getIsPolygonsOnly",(()=>this._styleMeta.isPolygonsOnly())),n()(this,"_getFieldFormatter",(e=>{const t=this._getDynamicPropertyByFieldName(e);if(!t)return null;let r;if(t.getFieldOrigin()===m.D.SOURCE)r=m.Ab;else{const t=this._layer.getValidJoins().find((t=>!!t.getRightJoinSource().getFieldByName(e)));t&&(r=t.getSourceFormattersDataRequestId())}if(!r)return null;const i=this._layer.getDataRequest(r);if(!i||!i.hasData())return null;const n=i.getData();return n?n[e]:null})),n()(this,"_getLegendDetailStyleProperties",(()=>{const e=this.hasLabels();return this.getDynamicPropertiesArray().filter((t=>{const r=t.getStyleName();return![m.Ib.ICON_ORIENTATION,m.Ib.LABEL_TEXT].includes(r)&&!(!e&&$.d.includes(r))&&(this._getIsLinesOnly()?$.e.includes(r):!this._getIsPolygonsOnly()||$.h.includes(r))}))})),this._source=t,this._layer=r,this._customIcons=i,this._descriptor=e?{...e,...vector_style_VectorStyle.createDescriptor(e.properties,e.isTimeAware)}:vector_style_VectorStyle.createDescriptor(),this._styleMeta=new style_meta_StyleMeta(this._descriptor.__styleMeta),this._symbolizeAs=new symbolize_as_property_SymbolizeAsProperty(this._descriptor.properties[m.Ib.SYMBOLIZE_AS].options,m.Ib.SYMBOLIZE_AS),this._lineColor=this._makeColorProperty(this._descriptor.properties[m.Ib.LINE_COLOR],m.Ib.LINE_COLOR,o),this._fillColor=this._makeColorProperty(this._descriptor.properties[m.Ib.FILL_COLOR],m.Ib.FILL_COLOR,o),this._lineWidth=this._makeSizeProperty(this._descriptor.properties[m.Ib.LINE_WIDTH],m.Ib.LINE_WIDTH,this._symbolizeAs.isSymbolizedAsIcon()),this._icon=this._makeIconProperty(this._descriptor.properties[m.Ib.ICON]),this._iconSize=this._makeSizeProperty(this._descriptor.properties[m.Ib.ICON_SIZE],m.Ib.ICON_SIZE,this._symbolizeAs.isSymbolizedAsIcon()),this._iconOrientation=this._makeOrientationProperty(this._descriptor.properties[m.Ib.ICON_ORIENTATION],m.Ib.ICON_ORIENTATION),this._label=this._makeLabelProperty(this._descriptor.properties[m.Ib.LABEL_TEXT]),this._labelZoomRange=new label_zoom_range_property_LabelZoomRangeProperty(this._descriptor.properties[m.Ib.LABEL_ZOOM_RANGE].options,m.Ib.LABEL_ZOOM_RANGE,r.getMinZoom(),r.getMaxZoom()),this._labelSize=this._makeSizeProperty(this._descriptor.properties[m.Ib.LABEL_SIZE],m.Ib.LABEL_SIZE,this._symbolizeAs.isSymbolizedAsIcon()),this._labelColor=this._makeColorProperty(this._descriptor.properties[m.Ib.LABEL_COLOR],m.Ib.LABEL_COLOR,o),this._labelBorderColor=this._makeColorProperty(this._descriptor.properties[m.Ib.LABEL_BORDER_COLOR],m.Ib.LABEL_BORDER_COLOR,o),this._labelBorderSize=new label_border_size_property_LabelBorderSizeProperty(this._descriptor.properties[m.Ib.LABEL_BORDER_SIZE].options,m.Ib.LABEL_BORDER_SIZE,this._labelSize),this._labelPosition=new label_position_property_LabelPositionProperty(this._descriptor.properties[m.Ib.LABEL_POSITION].options,m.Ib.LABEL_POSITION,this._icon,this._iconSize,this._labelSize,this._symbolizeAs.isSymbolizedAsIcon())}async _updateFieldsInDescriptor(e,t,r,i){const n=this.getPropertiesDescriptor(),o=Object.keys(n).filter((t=>{const r=ut(n,t);return!!(r&&r.field&&r.field.name)&&!e.some((e=>r&&r.field&&r.field.name===e.getName()))}));let a=!1;const l={...n};return o.forEach((i=>{for(let u=0;u<r.length;u++){const h=r[u],p=e[u];if(!h.isEqual(p)){if(!t.hasFieldForStyle(p,i))return;a=!0,l[i]={type:m.Eb.DYNAMIC,options:{...n[i].options,field:(o=p,c={origin:h.getOrigin(),name:h.getName()},{origin:c.origin,name:o.getName()})}}}}var o,c})),this._deleteFieldsFromDescriptorAndUpdateStyling(l,a,t,i)}async _deleteFieldsFromDescriptorAndUpdateStyling(e,t,r,i){const n={};return Object.keys(e).filter((t=>{const r=ut(e,t);return r&&r.field&&r.field.name})).forEach((t=>{var o;const a=this.getAllStyleProperties().find((e=>e.getStyleName()===t));if(!a)return;const l=r.getFieldsForStyle(a,this._layer.getSource().isMvt()).filter((e=>!e.isUnsupported));if(0===l.length){const e=Object($.j)(i);return void(n[t]=e[t])}const c=e[t];if(!c||!c.options)return;const u=null===(o=c.options.field)||void 0===o?void 0:o.name;u&&(l.some((e=>u===e.name))||(n[t]={type:Ke.a.type,options:{...e[t].options}},"field"in n[t].options&&delete n[t].options.field))})),0!==Object.keys(n).length?{hasChanges:!0,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...e,...n},this.isTimeAware())}:{hasChanges:t,nextStyleDescriptor:vector_style_VectorStyle.createDescriptor({...e},this.isTimeAware())}}async getDescriptorWithUpdatedStyleProps(e,t,r){const i=await Be(e);return r&&r.length===e.length?await this._updateFieldsInDescriptor(e,i,r,t):await this._deleteFieldsFromDescriptorAndUpdateStyling(this.getPropertiesDescriptor(),!1,i,t)}getType(){return m.Y.VECTOR}getAllStyleProperties(){return[this._symbolizeAs,this._icon,this._lineColor,this._fillColor,this._lineWidth,this._iconSize,this._iconOrientation,this._label,this._labelZoomRange,this._labelSize,this._labelColor,this._labelBorderColor,this._labelBorderSize,this._labelPosition]}_hasBorder(){return this._lineWidth.isDynamic()?this._lineWidth.isComplete():0!==this._lineWidth.getOptions().size}renderEditor(e,t){const r=this.getPropertiesDescriptor(),i=this.getDynamicPropertiesArray().filter((e=>e.isFieldMetaEnabled())),n={};return this.getAllStyleProperties().forEach((e=>{n[e.getStyleName()]=e})),Object(g.jsx)(vector_style_editor_VectorStyleEditor,{handlePropertyChange:(t,i)=>{r[t]=i;const n=vector_style_VectorStyle.createDescriptor(r,this.isTimeAware());e(n)},styleProperties:n,layer:this._layer,isPointsOnly:this.getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),onIsTimeAwareChange:t=>{const i=vector_style_VectorStyle.createDescriptor(r,t);e(i)},onCustomIconsChange:t,isTimeAware:this.isTimeAware(),showIsTimeAware:i.length>0,customIcons:this._customIcons,hasBorder:this._hasBorder()})}getSourceFieldNames(){const e=[];return this.getDynamicPropertiesArray().forEach((t=>{t.getFieldOrigin()===m.D.SOURCE&&e.push(t.getFieldName())})),e}isTimeAware(){return this._descriptor.isTimeAware}getPropertiesDescriptor(){return this._descriptor.properties||{}}getDynamicPropertiesArray(){return this.getAllStyleProperties().filter((e=>e.isDynamic()&&e.isComplete()))}_getDynamicPropertyByFieldName(e){return this.getDynamicPropertiesArray().find((t=>e===t.getFieldName()))}getStyleMeta(){return this._styleMeta}getIconSvg(e){const t=this._getIconMeta(e);return t?t.svg:void 0}_getSymbolId(){return this.arePointsSymbolizedAsCircles()||this._icon.isDynamic()?void 0:this._icon.getOptions().value}_getIconMeta(e){const t=this._customIcons.find((({symbolId:t})=>t===e));if(t)return{...t,iconSource:m.N.CUSTOM};const r=Object(ne.i)(e);return r?{...r,iconSource:m.N.MAKI}:void 0}getPrimaryColor(){const e=this._getIsLinesOnly()?m.Ib.LINE_COLOR:m.Ib.FILL_COLOR;return ct(this._descriptor.properties[e],"grey")}getIcon(e){const t=this._getIsLinesOnly(),r=this.getIsPointsOnly();let i;t?i=ct(this._descriptor.properties[m.Ib.LINE_COLOR],"grey"):this._hasBorder()&&(i=ct(this._descriptor.properties[m.Ib.LINE_COLOR],"none"));const n=t?void 0:ct(this._descriptor.properties[m.Ib.FILL_COLOR],"grey"),o=e?{borderColor:this.getPrimaryColor(),borderStyle:"dashed",borderWidth:"1px"}:{},a=this._getSymbolId(),l=a?this.getIconSvg(a):void 0;return Object(g.jsx)(Ge,{borderStyle:o,isPointsOnly:r,isLinesOnly:t,strokeColor:i,fillColor:n,symbolId:a,svg:l})}isUsingCustomIcon(e){if(this._icon.isDynamic()){const{customIconStops:t}=this._icon.getOptions();return!!t&&t.some((({icon:t})=>t===e))}const{value:t}=this._icon.getOptions();return t===e}async hasLegendDetails(){return this._getLegendDetailStyleProperties().length>0}renderLegendDetails(){const e=this._getSymbolId(),t=e?this.getIconSvg(e):void 0;return Object(g.jsx)(We,{masks:this._layer.getMasks(),styles:this._getLegendDetailStyleProperties(),isPointsOnly:this.getIsPointsOnly(),isLinesOnly:this._getIsLinesOnly(),symbolId:e,svg:t})}clearFeatureState(e,t,r){const i={source:"",id:void 0};for(let n=0;n<e.features.length;n++){const o=e.features[n];i.source=r,i.id=o.id,t.removeFeatureState(i)}}setFeatureStateAndStyleProps(e,t,r){if(!e)return!1;const i=this.getDynamicPropertiesArray();if(0===i.length)return!1;let n=!1;for(let o=0;o<i.length;o++)i[o].enrichGeoJsonAndMbFeatureState(e,t,r)||(n=!0);return n}arePointsSymbolizedAsCircles(){return!this._symbolizeAs.isSymbolizedAsIcon()}hasLabels(){return Object(B.g)(this._label)}setMBPaintProperties({alpha:e,mbMap:t,fillLayerId:r,lineLayerId:i}){this._fillColor.syncFillColorWithMb(r,t,e),this._lineColor.syncLineColorWithMb(i,t,e),this._lineWidth.syncLineWidthWithMb(i,t)}setMBPaintPropertiesForPoints({alpha:e,mbMap:t,pointLayerId:r}){this._fillColor.syncCircleColorWithMb(r,t,e),this._lineColor.syncCircleStrokeWithMb(r,t,e);const i=!this._iconSize.isDynamic()&&0===this._iconSize.getOptions().size;this._lineWidth.syncCircleStrokeWidthWithMb(r,t,i),this._iconSize.syncCircleRadiusWithMb(r,t)}setMBPropertiesForLabelText({alpha:e,mbMap:t,textLayerId:r}){this._label.syncTextFieldWithMb(r,t),this._labelZoomRange.syncLabelZoomRange(r,t),this._labelColor.syncLabelColorWithMb(r,t,e),this._labelSize.syncLabelSizeWithMb(r,t),this._labelBorderSize.syncLabelBorderSizeWithMb(r,t),this._labelPosition.syncLabelPositionWithMb(r,t),this._labelBorderColor.syncLabelBorderColorWithMb(r,t)}setMBSymbolPropertiesForPoints({mbMap:e,symbolLayerId:t,alpha:r}){e.setLayoutProperty(t,"icon-ignore-placement",!0),e.setPaintProperty(t,"icon-opacity",r),e.setLayoutProperty(t,"icon-allow-overlap",!0),this._icon.syncIconWithMb(t,e),this._fillColor.syncIconColorWithMb(t,e),this._lineColor.syncHaloBorderColorWithMb(t,e),this._lineWidth.syncHaloWidthWithMb(t,e),this._iconSize.syncIconSizeWithMb(t,e),this._iconOrientation.syncIconRotationWithMb(t,e)}_makeField(e){if(!e||!e.name)return null;if(e.origin===m.D.SOURCE)return this._source.getFieldByName(e.name);if(e.origin===m.D.JOIN){const t=this._layer.getValidJoins().find((t=>!!t.getRightJoinSource().getFieldByName(e.name)));return t?t.getRightJoinSource().getFieldByName(e.name):null}throw new Error(`Unknown origin-type ${e.origin}`)}_makeSizeProperty(e,t,r){if(e&&e.options){if(e.type===static_style_property_StaticStyleProperty.type)return new static_size_property_StaticSizeProperty(e.options,t);if(e.type===Ke.a.type){const i=e.options,n=this._makeField(i.field);return new dynamic_size_property_DynamicSizeProperty(i,t,n,this._layer,this._getFieldFormatter,r)}throw new Error(`${e} not implemented`)}return new static_size_property_StaticSizeProperty({size:0},t)}_makeColorProperty(e,t,r){if(e&&e.options){if(e.type===static_style_property_StaticStyleProperty.type)return new static_color_property_StaticColorProperty(e.options,t);if(e.type===Ke.a.type){const i=e.options,n=this._makeField(i.field);return new dynamic_color_property_DynamicColorProperty(i,t,n,this._layer,this._getFieldFormatter,r)}throw new Error(`${e} not implemented`)}return new static_color_property_StaticColorProperty({color:""},t)}_makeOrientationProperty(e,t){if(e&&e.options){if(e.type===static_style_property_StaticStyleProperty.type)return new static_orientation_property_StaticOrientationProperty(e.options,t);if(e.type===Ke.a.type){const r=e.options,i=this._makeField(r.field);return new dynamic_orientation_property_DynamicOrientationProperty(r,t,i,this._layer,this._getFieldFormatter)}throw new Error(`${e} not implemented`)}return new static_orientation_property_StaticOrientationProperty({orientation:0},t)}_makeLabelProperty(e){if(e&&e.options){if(e.type===static_style_property_StaticStyleProperty.type)return new static_text_property_StaticTextProperty(e.options,m.Ib.LABEL_TEXT);if(e.type===Ke.a.type){const t=e.options,r=this._makeField(t.field);return new dynamic_text_property_DynamicTextProperty(t,m.Ib.LABEL_TEXT,r,this._layer,this._getFieldFormatter)}throw new Error(`${e} not implemented`)}return new static_text_property_StaticTextProperty({value:""},m.Ib.LABEL_TEXT)}_makeIconProperty(e){if(e&&e.options){if(e.type===static_style_property_StaticStyleProperty.type){const{value:t}={...e.options},r=this._getIconMeta(t);let i,n,o;return r&&({svg:i,label:n,iconSource:o}=r),new static_icon_property_StaticIconProperty({value:t,svg:i,label:n,iconSource:o},m.Ib.ICON)}if(e.type===Ke.a.type){const t={...e.options};t.customIconStops&&t.customIconStops.forEach((e=>{const t=this._getIconMeta(e.icon);t&&(e.iconSource=t.iconSource)}));const r=this._makeField(t.field);return new dynamic_icon_property_DynamicIconProperty(t,m.Ib.ICON,r,this._layer,this._getFieldFormatter)}throw new Error(`${e} not implemented`)}return new static_icon_property_StaticIconProperty({value:m.r},m.Ib.ICON)}}function ut(e,t){if(!e[t])return null;const r=e[t];return r&&"type"in r&&r.type===m.Eb.DYNAMIC&&r.options?r.options:null}},function(e,t,r){"use strict";var i,n=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function a(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},i=[],n=0;n<e.length;n++){var l=e[n],c=t.base?l[0]+t.base:l[0],u=r[c]||0,h="".concat(c," ").concat(u);r[c]=u+1;var p=a(h),d={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(o[p].references++,o[p].updater(d)):o.push({identifier:h,updater:g(d,t),references:1}),i.push(h)}return i}function c(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var o=r.nc;o&&(i.nonce=o)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var a=n(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,n);else{var o=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,r){var i=r.css,n=r.media,o=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var f=null,m=0;function g(e,t){var r,i,n;if(t.singleton){var o=m++;r=f||(f=c(t)),i=p.bind(null,r,o,!1),n=p.bind(null,r,o,!0)}else r=c(t),i=d.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<r.length;i++){var n=a(r[i]);o[n].references--}for(var c=l(e,t),u=0;u<r.length;u++){var h=a(r[u]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}r=c}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,i,n,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var l=(r=a,i=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(n," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([l]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=6371008.8,n={meters:i,metres:i,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:i/1852,inches:39.37*i,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274},o={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/i,degrees:1/111325},a={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:386e-9,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function l(e,t,r){if(!b(r=r||{}))throw new Error("options is invalid");var i=r.bbox,n=r.id;if(void 0===e)throw new Error("geometry is required");if(t&&t.constructor!==Object)throw new Error("properties must be an Object");i&&x(i),0!==n&&n&&w(n);var o={type:"Feature"};return(0===n||n)&&(o.id=n),i&&(o.bbox=i),o.properties=t||{},o.geometry=e,o}function c(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_(e[0])||!_(e[1]))throw new Error("coordinates must contain numbers");return l({type:"Point",coordinates:e},t,r)}function u(e,t,r){if(!e)throw new Error("coordinates is required");for(var i=0;i<e.length;i++){var n=e[i];if(n.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<n[n.length-1].length;o++){if(0===i&&0===o&&!_(n[0][0])||!_(n[0][1]))throw new Error("coordinates must contain numbers");if(n[n.length-1][o]!==n[0][o])throw new Error("First and last Position are not equivalent.")}}return l({type:"Polygon",coordinates:e},t,r)}function h(e,t,r){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!_(e[0][1])||!_(e[0][1]))throw new Error("coordinates must contain numbers");return l({type:"LineString",coordinates:e},t,r)}function p(e,t){if(!b(t=t||{}))throw new Error("options is invalid");var r=t.bbox,i=t.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");r&&x(r),i&&w(i);var n={type:"FeatureCollection"};return i&&(n.id=i),r&&(n.bbox=r),n.features=e,n}function d(e,t,r){if(!e)throw new Error("coordinates is required");return l({type:"MultiLineString",coordinates:e},t,r)}function f(e,t,r){if(!e)throw new Error("coordinates is required");return l({type:"MultiPoint",coordinates:e},t,r)}function m(e,t,r){if(!e)throw new Error("coordinates is required");return l({type:"MultiPolygon",coordinates:e},t,r)}function g(e,t){if(null==e)throw new Error("radians is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e*r}function y(e,t){if(null==e)throw new Error("distance is required");if(t&&"string"!=typeof t)throw new Error("units must be a string");var r=n[t||"kilometers"];if(!r)throw new Error(t+" units is invalid");return e/r}function v(e){if(null==e)throw new Error("radians is required");return e%(2*Math.PI)*180/Math.PI}function _(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function b(e){return!!e&&e.constructor===Object}function x(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!_(e))throw new Error("bbox must only contain numbers")}))}function w(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}t.earthRadius=i,t.factors=n,t.unitsFactors=o,t.areaFactors=a,t.feature=l,t.geometry=function(e,t,r){if(!b(r=r||{}))throw new Error("options is invalid");var i,n=r.bbox;if(!e)throw new Error("type is required");if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");switch(n&&x(n),e){case"Point":i=c(t).geometry;break;case"LineString":i=h(t).geometry;break;case"Polygon":i=u(t).geometry;break;case"MultiPoint":i=f(t).geometry;break;case"MultiLineString":i=d(t).geometry;break;case"MultiPolygon":i=m(t).geometry;break;default:throw new Error(e+" is invalid")}return n&&(i.bbox=n),i},t.point=c,t.points=function(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return p(e.map((function(e){return c(e,t)})),r)},t.polygon=u,t.polygons=function(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return p(e.map((function(e){return u(e,t)})),r)},t.lineString=h,t.lineStrings=function(e,t,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");return p(e.map((function(e){return h(e,t)})),r)},t.featureCollection=p,t.multiLineString=d,t.multiPoint=f,t.multiPolygon=m,t.geometryCollection=function(e,t,r){if(!e)throw new Error("geometries is required");if(!Array.isArray(e))throw new Error("geometries must be an Array");return l({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(null==e||isNaN(e))throw new Error("num is required");if(t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=g,t.lengthToRadians=y,t.lengthToDegrees=function(e,t){return v(y(e,t))},t.bearingToAzimuth=function(e){if(null==e)throw new Error("bearing is required");var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=v,t.degreesToRadians=function(e){if(null==e)throw new Error("degrees is required");return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(null==e)throw new Error("length is required");if(!(e>=0))throw new Error("length must be a positive number");return g(y(e,t),r||"kilometers")},t.convertArea=function(e,t,r){if(null==e)throw new Error("area is required");if(!(e>=0))throw new Error("area must be a positive number");var i=a[t||"meters"];if(!i)throw new Error("invalid original units");var n=a[r||"kilometers"];if(!n)throw new Error("invalid final units");return e/i*n},t.isNumber=_,t.isObject=b,t.validateBBox=x,t.validateId=w,t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},,function(e,t,r){(function(){var t,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v,_,b={}.hasOwnProperty;_=r(102),v=_.isObject,y=_.isFunction,g=_.isEmpty,m=_.getValue,u=null,n=null,o=null,a=null,l=null,d=null,f=null,p=null,c=null,i=null,h=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=r(188),n=r(190),o=r(191),a=r(192),l=r(193),d=r(198),f=r(199),p=r(200),c=r(252),i=r(82),h=r(386),r(189),t=r(387))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new h(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,r,n,o;if(this.nodeType===i.Element||this.nodeType===i.DocumentFragment){for(o="",t=0,r=(n=this.children).length;t<r;t++)(e=n[t]).textContent&&(o+=e.textContent);return o}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,r,i,n,o;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),o=[],r=0,i=(n=this.children).length;r<i;r++)t=n[r],o.push(t.setParent(this));return o},e.prototype.element=function(e,t,r){var i,n,o,a,l,c,u,h,p,d,f;if(c=null,null===t&&null==r&&(t=(p=[{},null])[0],r=p[1]),null==t&&(t={}),t=m(t),v(t)||(r=(d=[t,r])[0],t=d[1]),null!=e&&(e=m(e)),Array.isArray(e))for(o=0,u=e.length;o<u;o++)n=e[o],c=this.element(n);else if(y(e))c=this.element(e.apply());else if(v(e)){for(l in e)if(b.call(e,l))if(f=e[l],y(f)&&(f=f.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===l.indexOf(this.stringify.convertAttKey))c=this.attribute(l.substr(this.stringify.convertAttKey.length),f);else if(!this.options.separateArrayItems&&Array.isArray(f)&&g(f))c=this.dummy();else if(v(f)&&g(f))c=this.element(l);else if(this.options.keepNullNodes||null!=f)if(!this.options.separateArrayItems&&Array.isArray(f))for(a=0,h=f.length;a<h;a++)n=f[a],(i={})[l]=n,c=this.element(i);else v(f)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===l.indexOf(this.stringify.convertTextKey)?c=this.element(f):(c=this.element(l)).element(f):c=this.element(l,f);else c=this.dummy()}else c=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},e.prototype.insertBefore=function(e,t,r){var i,n,o,a,l;if(null!=e?e.type:void 0)return a=t,(o=e).setParent(this),a?(n=children.indexOf(a),l=children.splice(n),children.push(o),Array.prototype.push.apply(children,l)):children.push(o),o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),l=this.parent.children.splice(n),i=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,l),i},e.prototype.insertAfter=function(e,t,r){var i,n,o;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),o=this.parent.children.splice(n+1),i=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,o),i},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,r){var i,n;return null!=e&&(e=m(e)),t||(t={}),t=m(t),v(t)||(r=(n=[t,r])[0],t=n[1]),i=new u(this,e,t),null!=r&&i.text(r),this.children.push(i),i},e.prototype.text=function(e){var t;return v(e)&&this.element(e),t=new f(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new o(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.commentAfter=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.raw=function(e){var t;return t=new d(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new c(this)},e.prototype.instruction=function(e,t){var r,i,n,o,a;if(null!=e&&(e=m(e)),null!=t&&(t=m(t)),Array.isArray(e))for(o=0,a=e.length;o<a;o++)r=e[o],this.instruction(r);else if(v(e))for(r in e)b.call(e,r)&&(i=e[r],this.instruction(r,i));else y(t)&&(t=t.apply()),n=new p(this,e,t),this.children.push(n);return this},e.prototype.instructionBefore=function(e,t){var r,i;return r=this.parent.children.indexOf(this),i=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.instructionAfter=function(e,t){var r,i;return r=this.parent.children.indexOf(this),i=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this},e.prototype.declaration=function(e,t,r){var n,o;return n=this.document(),o=new a(n,e,t,r),0===n.children.length?n.children.unshift(o):n.children[0].type===i.Declaration?n.children[0]=o:n.children.unshift(o),n.root()||n},e.prototype.dtd=function(e,t){var r,n,o,a,c,u,h,p,d;for(r=this.document(),n=new l(r,e,t),o=a=0,u=(p=r.children).length;a<u;o=++a)if(p[o].type===i.DocType)return r.children[o]=n,n;for(o=c=0,h=(d=r.children).length;c<h;o=++c)if(d[o].isRoot)return r.children.splice(o,0,n),n;return r.children.push(n),n},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===i.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===i.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,r){return this.element(e,t,r)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var r,i;return(r=this)===e?0:this.document()!==e.document()?(i=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?i|=t.Preceding:i|=t.Following,i):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,r,i;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,i=this.children.length-1;0<=i?r<=i:r>=i;t=0<=i?++r:--r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,r,i,n;for(r=0,i=(n=this.children).length;r<i;r++){if(e===(t=n[r]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t<r},e.prototype.isFollowing=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r},e.prototype.treePosition=function(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(i){if(r++,!t&&i===e)return t=!0})),t?r:-1},e.prototype.foreachTreeNode=function(e,t){var r,i,n,o,a;for(e||(e=this.document()),i=0,n=(o=e.children).length;i<n;i++){if(a=t(r=o[i]))return a;if(a=this.foreachTreeNode(r,t))return a}},e}()}).call(this)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var i=r(0);function n({aggType:e,aggFieldName:t,rightSourceId:r}){const n=e!==i.b.COUNT?`${e}${i.a}${t}`:e;return`${i.T}${n}__${r}`}function o({aggType:e,aggFieldName:t}){return e!==i.b.COUNT?`${e}${i.a}${t}`:i.k}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var i=r(23),n=r.n(i),o=r(40),a=r.n(o),l=r(4),c=r.n(l),u=r(3),h=r(15),p=r(153),d=r(619),f=r(0),m={name:"1t9g6or",styles:"position:absolute;width:100%;top:0;bottom:0;left:0;right:0"};function g({fields:e,getFieldDisabledReason:t,isFieldDisabled:r,onChange:i,value:o,...l}){const g=[];if(o&&e){const t=e.find((e=>e.name===o));t&&g.push({value:t,label:t.displayName?t.displayName:t.name})}const y=function(e,t,r){return e?e.map((e=>{const i=e.type?Object(u.jsx)(p.a,{type:e.type,fill:"none",className:"eui-alignMiddle"}):null,n={value:e,label:e.displayName?e.displayName:e.name,prepend:i};if(t&&t(e)){n.disabled=!0;const e=n.disabled&&r?r(n.value):null;e&&(n.prepend=Object(u.jsx)(c.a.Fragment,null,i,Object(u.jsx)(h.EuiToolTip,{position:"left",content:e,anchorProps:{css:m}},Object(u.jsx)("div",null))))}return n})).sort(((e,t)=>e.label.toLowerCase().localeCompare(t.label.toLowerCase()))):[]}(e,r,t),v=Object(d.a)(y,["label"]);return Object(u.jsx)(h.EuiComboBox,n()({singleSelection:!0,options:y,selectedOptions:g,onChange:e=>{i(a.a.get(e,"0.value.name"))},isDisabled:!e||0===e.length,truncationProps:f.lb,inputPopoverProps:{panelMinWidth:v}},l))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return u})),r.d(t,"d",(function(){return h})),r.d(t,"c",(function(){return p})),r.d(t,"h",(function(){return d})),r.d(t,"g",(function(){return f}));var i=r(49),n=r(1),o=r(0);const a=n.i18n.translate("xpack.maps.styles.categorical.otherCategoryLabel",{defaultMessage:"Other"}),l=i.euiThemeVars.euiColorLightShade;function c(e,t){return`${u(t)}__${e}`}function u(e){return`__kbn__dynamic__${e}`}function h(e){if("number"!=typeof e)return e;let t=0,r=10;for(;e<r&&t<8;)t++,r/=10;return 0===t?Math.round(e):parseFloat(e.toFixed(t+1))}function p({categories:e,paletteValues:t}){const r=[];let i=null;if(e.length&&t.length){const n=Math.min(t.length,e.length+1);i=t[n-1];for(let i=0;i<n-1;i++)r.push({stop:e[i].key,style:t[i],iconSource:o.N.MAKI})}return{stops:r,fallbackSymbolId:i}}function d({lookupFunction:e,fieldName:t,minValue:r,maxValue:i,fallback:n}){return["coalesce",["case",["==",[e,t],null],n,["max",["min",["to-number",[e,t]],i],r]],n]}function f(e){return e.isDynamic()?e.isComplete():null!=e.getOptions().value&&e.getOptions().value.length>0}},function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"c",(function(){return y})),r.d(t,"e",(function(){return v})),r.d(t,"i",(function(){return _})),r.d(t,"j",(function(){return b})),r.d(t,"f",(function(){return x})),r.d(t,"d",(function(){return w})),r.d(t,"k",(function(){return S})),r.d(t,"b",(function(){return M})),r.d(t,"h",(function(){return E})),r.d(t,"g",(function(){return T})),r(4);var i=r(248),n=r.n(i),o=r(43),a=r(408),l=r(406),c=r.n(l),u=r(0),h=r(261),p=r(159),d=r(5),f=r(262),m=r(3);const g=Math.floor(window.devicePixelRatio*(u.m/u.cb)*.75),y=Object.entries(f.a).map((([e,{svg:t,label:r}])=>({value:e,label:r,svg:t})));async function v({svg:e,renderSize:t=64,cutoff:r=.25,radius:i=.25}){const n=t+12,o=document.createElement("canvas");o.width=n,o.height=n;const l=o.getContext("2d"),u=a.Canvg.fromString(l,e,{ignoreDimensions:!0,offsetX:1.5,offsetY:1.5});u.resize(n-3,n-3),await u.render();const h=c()(l,{channel:3,cutoff:r,radius:i*n}),p=document.createElement("canvas");p.width=n,p.height=n;const d=p.getContext("2d");if(!d)return null;const f=d.createImageData(n,n);for(let e=0;e<n;e++)for(let t=0;t<n;t++)f.data[t*n*4+4*e+0]=0,f.data[t*n*4+4*e+1]=0,f.data[t*n*4+4*e+2]=0,f.data[t*n*4+4*e+3]=255*h[t*n+e];return f}function _(e){return null===f.a||void 0===f.a?void 0:f.a[e]}function b(e){switch(e){case"embassy":case"marker":case"marker-stroked":return"bottom";default:return"center"}}function x(){return`${u.l}${Object(o.v4)()}`}function w(e){const t=window.URL||window.webkitURL||window,r=new Blob([e],{type:"image/svg+xml"});return t.createObjectURL(r)}async function S(e,t,r){const i=await Object(h.a)(e);return i.svg.style=`\n    svg * {\n      ${t?`fill: ${t}`:"#000"} !important;\n      ${r?`stroke: ${r}`:"#000"} !important;\n      stroke-width: 1 !important;\n      vector-effect: non-scaling-stroke !important;\n    }\n  `,(new n.a.Builder).buildObject(i)}const C=[{id:"filledShapes",icons:["circle","marker","square","star","triangle","hospital"]},{id:"hollowShapes",icons:["circle-stroked","marker-stroked","square-stroked","star-stroked","triangle-stroked"]}],M=[];function E(){const e=Object(d.y)();return C.map((({id:t,icons:r})=>{const i=r.map((t=>Object(m.jsx)("div",{style:{width:"10%",position:"relative",height:"100%",display:"inline-block",paddingTop:"4px"},key:t},Object(m.jsx)(p.a,{className:"mapIcon",symbolId:t,fill:e?"rgb(223, 229, 239)":"rgb(52, 55, 65)",svg:_(t).svg}))));return{value:t,inputDisplay:Object(m.jsx)("div",null,i)}}))}function T(e){const t=C.find((({id:t})=>t===e));return t?[...t.icons]:[]}C.forEach((e=>{e.icons.forEach((e=>{M.includes(e)||M.push(e)}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildTheme=t.DEFAULT_COLOR_MODE=t.Computed=void 0,t.computed=function(e,t){return new y(e,t)},t.setOn=t.mergeDeep=t.isInverseColorMode=t.getOn=t.getComputed=t.getColorMode=void 0;var i=r(274);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function u(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var p=i.COLOR_MODES_STANDARD.light;t.DEFAULT_COLOR_MODE=p;var d=function(e){return e&&"object"===h(e)},f=function(e){return e===i.COLOR_MODES_INVERSE};t.isInverseColorMode=f,t.getColorMode=function(e,t){if(null==e)return t||p;var r=e.toUpperCase();return f(r)?t===i.COLOR_MODES_STANDARD.dark||void 0===t?i.COLOR_MODES_STANDARD.light:i.COLOR_MODES_STANDARD.dark:r};var m=function(e,t,r){for(var i=t.split("."),n=e;i.length;){var o=i.shift();if(!1===n.hasOwnProperty(o)){if(!r||!0!==n.hasOwnProperty(r)||!0!==n[r].hasOwnProperty(o))return;n=n[r][o]instanceof y?n[r][o].getValue(null,null,n,r):n[r][o]}else n=n[o]instanceof y?n[o].getValue(null,null,n,r):n[o]}return n};t.getOn=m;var g=function(e,t,r){for(var i=t.split("."),n=i.pop(),o=e;i.length;){var a=i.shift();!1===o.hasOwnProperty(a)&&(o[a]={}),o=o[a]}return o[n]=r,!0};t.setOn=g;var y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.computer=t,this.dependencies=r}var t,r;return t=e,r=[{key:"getValue",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return this.dependencies.length?Array.isArray(this.dependencies)?this.computer(this.dependencies.map((function(t){var r,a;return null!==(r=null!==(a=m(n,t))&&void 0!==a?a:m(i,t,o))&&void 0!==r?r:m(e,t,o)}))):this.computer(null!==(t=null!==(r=m(n,this.dependencies))&&void 0!==r?r:m(i,this.dependencies,o))&&void 0!==t?t:m(e,this.dependencies,o)):this.computer(n)}}],r&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Computed=y,t.getComputed=function(e,t,r){var n={themeName:e.key};function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3?arguments[3]:void 0;Object.keys(e).forEach((function(u){var h,p=c?"".concat(c,".").concat(u):"".concat(u);if([].concat((h=Object.values(i.COLOR_MODES_STANDARD),function(e){if(Array.isArray(e))return l(e)}(h)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(h)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r]).includes(u)){if(u!==r)return;var f=new RegExp("(\\.".concat(r,"\\b)|(\\b").concat(r,"\\.)"));p=p.replace(f,"")}var v=a&&m(n,p);if(!v||d(v)){var _=e[u]instanceof y?e[u].getValue(e.root,t.root,n,r):e[u],b=t[u]instanceof y?t[u].getValue(e.root,t.root,n,r):t[u];d(_)&&!Array.isArray(_)?o(_,null!=b?b:{},a,p):g(n,p,null!=b?b:_)}}))}return o(e,t),o(t,{},!0),n},t.buildTheme=function(e,t){var r={getPrototypeOf:function(e){return Reflect.getPrototypeOf(e.model)},setPrototypeOf:function(e,t){return Reflect.setPrototypeOf(e.model,t)},isExtensible:function(e){return Reflect.isExtensible(e)},preventExtensions:function(e){return Reflect.preventExtensions(e.model)},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e.model,t)},defineProperty:function(e,t,r){return Reflect.defineProperty(e.model,t,r)},has:function(e,t){return Reflect.has(e.model,t)},get:function(e,t){if("key"===t)return e[t];if("__proto__"===t)return{};var i=("root"===t?e:e.model||e)[t];return d(i)&&!Array.isArray(i)?new Proxy({model:i,root:e.root,key:"_".concat(e.key)},r):i},set:function(e){return e},deleteProperty:function(e){return e},ownKeys:function(e){return Reflect.ownKeys(e.model)},apply:function(e){return e},construct:function(e){return e}};return new Proxy({model:e,root:e,key:t},r)},t.mergeDeep=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o({},t);return d(i)&&d(r)?(Object.keys(r).forEach((function(t){var n=i[t],a=r[t];d(n)&&d(a)?i[t]=e(o({},n),o({},a)):i[t]=a})),i):r}},,,,,function(e,t){(function(){var t,r,i,n,o,a,l,c=[].slice,u={}.hasOwnProperty;t=function(){var e,t,r,i,n,a;if(a=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],o(Object.assign))Object.assign.apply(null,arguments);else for(e=0,r=n.length;e<r;e++)if(null!=(i=n[e]))for(t in i)u.call(i,t)&&(a[t]=i[t]);return a},o=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},a=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},i=function(e){return o(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){var t;if(i(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},l=function(e){var t,r;return a(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return o(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=o,e.exports.isObject=a,e.exports.isArray=i,e.exports.isEmpty=n,e.exports.isPlainObject=l,e.exports.getValue=r}).call(this)},function(e,t,r){"use strict";r.d(t,"b",(function(){return H})),r.d(t,"c",(function(){return G})),r.d(t,"a",(function(){return es_geo_grid_source_ESGeoGridSource}));var i=r(2),n=r.n(i),o=r(4),a=r.n(o),l=r(40),c=r.n(l),u=r(1),h=r(51),p=r(320),d=r(46),f=r(79),m=r(0),g=r(149);const y=["key",m.G];function v(e,t){return _(e,t,(e=>c.a.get(e,"aggregations.compositeSplit.buckets",[])),(e=>e.key[m.I]))}function _(e,t,r,i){const n=[],o=r(e);for(let e=0;e<o.length;e++){const r=o[e],a=i(r);n.push({type:"Feature",geometry:b({gridKey:a,[m.G]:r[m.G],renderAs:t}),id:a,properties:Object(f.j)(r,y)})}return n}function b({gridKey:e,gridCentroid:t,renderAs:r}){const{top:i,bottom:n,right:o,left:a}=Object(g.b)(e);return r===m.ub.GRID?{type:"Polygon",coordinates:[[[o,i],[a,i],[a,n],[o,n],[o,i]]]}:{type:"Point",coordinates:[Object(f.d)(t.location.lon,a,o),Object(f.d)(t.location.lat,n,i)]}}var x=r(43),w=r(41),S=r(15),C=r(24),M=r(78),E=r(172),T=r(5);function A(e,t){return e===m.ub.HEATMAP||e===m.ub.HEX||t===m.L.SUPER_FINE}var P=r(3);function O(e){return e.type===m.b.TERMS}class resolution_editor_ResolutionEditor extends o.Component{constructor(...e){super(...e),n()(this,"state",{showModal:!1}),n()(this,"_onResolutionChange",(e=>{const t=this._sliderValueToResolution(parseInt(e.currentTarget.value,10));A(this.props.renderAs,t)&&this.props.metrics.find(O)?this.setState({showModal:!0}):this.props.onChange(t,this.props.metrics)})),n()(this,"_closeModal",(()=>{this.setState({showModal:!1})})),n()(this,"_acceptModal",(()=>{this._closeModal();const e=this.props.metrics.filter((e=>!O(e)));this.props.onChange(m.L.SUPER_FINE,e.length?e:[{type:m.b.COUNT}])}))}_getScale(){return this.props.renderAs===m.ub.HEX?{[m.L.SUPER_FINE]:3,[m.L.MOST_FINE]:2,[m.L.FINE]:2,[m.L.COARSE]:1}:{[m.L.SUPER_FINE]:4,[m.L.MOST_FINE]:3,[m.L.FINE]:2,[m.L.COARSE]:1}}_getTicks(){const e=this._getScale(),t=[{label:Object(P.jsx)("span",null," "),value:e[m.L.FINE]}];return e[m.L.FINE]!==e[m.L.MOST_FINE]&&t.push({label:Object(P.jsx)("span",null," "),value:e[m.L.MOST_FINE]}),[{label:u.i18n.translate("xpack.maps.source.esGrid.lowLabel",{defaultMessage:"low"}),value:e[m.L.COARSE]},...t,{label:u.i18n.translate("xpack.maps.source.esGrid.highLabel",{defaultMessage:"high"}),value:e[m.L.SUPER_FINE]}]}_resolutionToSliderValue(e){return this._getScale()[e]}_sliderValueToResolution(e){const t=this._getScale();return Object.keys(t).find((r=>t[r]===e))||m.L.COARSE}_renderModal(){return this.state.showModal?Object(P.jsx)(S.EuiConfirmModal,{title:u.i18n.translate("xpack.maps.source.esGrid.vectorTileModal.title",{defaultMessage:"'Top terms' metrics not supported"}),onCancel:this._closeModal,onConfirm:this._acceptModal,cancelButtonText:u.i18n.translate("xpack.maps.source.esGrid.vectorTileModal.cancelBtnLabel",{defaultMessage:"Cancel"}),confirmButtonText:u.i18n.translate("xpack.maps.source.esGrid.vectorTileModal.confirmBtnLabel",{defaultMessage:"Accept"}),buttonColor:"danger",defaultFocusedButton:"cancel"},Object(P.jsx)("p",null,Object(P.jsx)(w.FormattedMessage,{id:"xpack.maps.source.esGrid.vectorTileModal.message",defaultMessage:"High resolution uses vector tiles from the Elasticsearch vector tile API. Elasticsearch vector tile API does not support 'Top terms' metric. Switching to super fine grid resolution will remove all 'Top terms' metrics from your layer configuration."}))):null}render(){const e=this.props.renderAs!==m.ub.POINT&&this.props.renderAs!==m.ub.GRID||this.props.resolution!==m.L.SUPER_FINE?void 0:u.i18n.translate("xpack.maps.source.esGrid.superFineHelpText",{defaultMessage:"High resolution uses vector tiles."}),t=this._getTicks();return Object(P.jsx)(a.a.Fragment,null,this._renderModal(),Object(P.jsx)(S.EuiFormRow,{label:u.i18n.translate("xpack.maps.geoGrid.resolutionLabel",{defaultMessage:"Resolution"}),helpText:e,display:"columnCompressed"},Object(P.jsx)(S.EuiRange,{value:this._resolutionToSliderValue(this.props.resolution),onChange:this._onResolutionChange,min:1,max:t.length,showTicks:!0,tickInterval:1,ticks:t,compressed:!0})))}}var I=r(166),k=r(231);class update_source_editor_UpdateSourceEditor extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",void 0),n()(this,"state",{fields:[],metricsEditorKey:Object(x.v4)()}),n()(this,"_onMetricsChange",(e=>{this.props.onChange({propName:"metrics",value:e})})),n()(this,"_onResolutionChange",(async(e,t)=>{await this.props.onChange({propName:"metrics",value:t},{propName:"resolution",value:e,newLayerType:this._getNewLayerType(this.props.renderAs,e)}),this.setState({metricsEditorKey:Object(x.v4)()})})),n()(this,"_onRequestTypeSelect",(e=>{this.props.onChange({propName:"requestType",value:e,newLayerType:this._getNewLayerType(e,this.props.resolution)})}))}componentDidMount(){this._isMounted=!0,this._loadFields()}componentWillUnmount(){this._isMounted=!1}async _loadFields(){let e;try{e=await Object(T.u)().get(this.props.indexPatternId)}catch(e){return void(this._isMounted&&this.setState({loadError:Object(M.c)(this.props.indexPatternId)}))}this._isMounted&&this.setState({fields:e.fields.filter((e=>!C.indexPatterns.isNestedField(e)))})}_getNewLayerType(e,t){let r;return r=e===m.ub.HEATMAP?m.Z.HEATMAP:A(e,t)?m.Z.MVT_VECTOR:m.Z.GEOJSON_VECTOR,void 0!==r&&r!==this.props.currentLayerType?r:void 0}_getMetricsFilter(){return this.props.currentLayerType===m.Z.HEATMAP?e=>!!e.value&&Object(I.a)(e.value):e=>e.value!==m.b.TERMS}_renderMetricsPanel(){return Object(P.jsx)(S.EuiPanel,null,Object(P.jsx)(S.EuiTitle,{size:"xs"},Object(P.jsx)("h6",null,Object(P.jsx)(w.FormattedMessage,{id:"xpack.maps.source.esGrid.metricsLabel",defaultMessage:"Metrics"}))),Object(P.jsx)(S.EuiSpacer,{size:"m"}),Object(P.jsx)(E.a,{key:this.state.metricsEditorKey,allowMultipleMetrics:this.props.currentLayerType!==m.Z.HEATMAP,bucketsName:this.props.bucketsName,isJoin:!1,metricsFilter:this._getMetricsFilter(),fields:this.state.fields,metrics:this.props.metrics,onChange:this._onMetricsChange}))}render(){return Object(P.jsx)(o.Fragment,null,this._renderMetricsPanel(),Object(P.jsx)(S.EuiSpacer,{size:"s"}),Object(P.jsx)(S.EuiPanel,null,Object(P.jsx)(S.EuiTitle,{size:"xs"},Object(P.jsx)("h6",null,this.props.currentLayerType===m.Z.HEATMAP?G:H)),Object(P.jsx)(S.EuiSpacer,{size:"m"}),Object(P.jsx)(resolution_editor_ResolutionEditor,{renderAs:this.props.renderAs,resolution:this.props.resolution,onChange:this._onResolutionChange,metrics:this.props.metrics}),Object(P.jsx)(k.a,{isColumnCompressed:!0,renderAs:this.props.renderAs,onChange:this._onRequestTypeSelect})),Object(P.jsx)(S.EuiSpacer,{size:"s"}))}}var F=r(112),D=r(100),j=r(20),z=r(104),N=r(119),B=r(120),V=r(86),U=r(220);const H=u.i18n.translate("xpack.maps.source.esGridClustersTitle",{defaultMessage:"Clusters"}),G=u.i18n.translate("xpack.maps.source.esGridHeatmapTitle",{defaultMessage:"Heat map"});class es_geo_grid_source_ESGeoGridSource extends F.a{static createDescriptor(e){const t=F.a.createDescriptor(e);if(!Object(N.a)(t.geoField))throw new Error("Cannot create an ESGeoGridSourceDescriptor without a geoField");return{...t,type:m.Cb.ES_GEO_GRID,geoField:t.geoField,requestType:e.requestType||m.ub.POINT,resolution:e.resolution?e.resolution:m.L.COARSE}}constructor(e){const t=es_geo_grid_source_ESGeoGridSource.createDescriptor(e);super(t),n()(this,"_descriptor",void 0),this._descriptor=t}getBucketsName(){return this._descriptor.requestType===m.ub.HEX?u.i18n.translate("xpack.maps.source.esGeoGrid.hex.bucketsName",{defaultMessage:"hexagons"}):this._descriptor.requestType===m.ub.GRID?u.i18n.translate("xpack.maps.source.esGeoGrid.grid.bucketsName",{defaultMessage:"grid"}):u.i18n.translate("xpack.maps.source.esGeoGrid.cluster.bucketsName",{defaultMessage:"clusters"})}renderSourceSettingsEditor(e){return Object(P.jsx)(update_source_editor_UpdateSourceEditor,{bucketsName:this.getBucketsName(),currentLayerType:e.currentLayerType,geoFieldName:this.getGeoFieldName(),indexPatternId:this.getIndexPatternId(),onChange:async function(...t){e.onChange(...t);const r=t.find((e=>"resolution"===e.propName));if(r&&"getPropertiesDescriptor"in e.style){const t=e.style.getPropertiesDescriptor();if(t[m.Ib.ICON_SIZE].type===m.Eb.DYNAMIC){t[m.Ib.ICON_SIZE]={...t[m.Ib.ICON_SIZE],options:{...t[m.Ib.ICON_SIZE].options,...Object(U.a)(r.value)}};const i=V.a.createDescriptor(t,e.style.isTimeAware());e.onStyleDescriptorChange(i)}}},metrics:this._descriptor.metrics,renderAs:this._descriptor.requestType,resolution:this._descriptor.resolution})}getSyncMeta(e){return{...super.getSyncMeta(e),geogridPrecision:this.getGeoGridPrecision(e.zoom),requestType:this._descriptor.requestType,resolution:this._descriptor.resolution}}async getImmutableProperties(){return[{label:Object(M.a)(),value:this._descriptor.requestType===m.ub.HEATMAP?G:H},{label:Object(M.b)(),value:await this.getDisplayName()},{label:u.i18n.translate("xpack.maps.source.esGrid.geospatialFieldLabel",{defaultMessage:"Cluster field"}),value:this._descriptor.geoField}]}isMvt(){return A(this._descriptor.requestType,this._descriptor.resolution)}isGeoGridPrecisionAware(){return!this.isMvt()}supportsJoins(){return!1}getGridResolution(){return this._descriptor.resolution}getGeoGridPrecision(e){if(this.isMvt())return 0;const t=Math.ceil(e)+this._getGeoGridPrecisionResolutionDelta();return Math.min(t,29)}_getGeoGridPrecisionResolutionDelta(){if(this._descriptor.requestType===m.ub.HEX){if(this._descriptor.resolution===m.L.COARSE)return 2;if(this._descriptor.resolution===m.L.FINE||this._descriptor.resolution===m.L.MOST_FINE)return 5;if(this._descriptor.resolution===m.L.SUPER_FINE)return 8}if(this._descriptor.resolution===m.L.COARSE)return 2;if(this._descriptor.resolution===m.L.FINE)return 3;if(this._descriptor.resolution===m.L.MOST_FINE)return 4;if(this._descriptor.resolution===m.L.SUPER_FINE)return 8;throw new Error(u.i18n.translate("xpack.maps.source.esGrid.resolutionParamErrorMessage",{defaultMessage:"Grid resolution param not recognized: {resolution}",values:{resolution:this._descriptor.resolution}}))}async _compositeAggRequest({searchSource:e,searchSessionId:t,indexPattern:r,precision:i,layerName:n,registerCancelCallback:o,bucketsPerGrid:a,isRequestStillActive:l,bufferedExtent:c,inspectorAdapters:h,executionContext:p,onWarning:d}){const g=Math.floor(m.s/a),y={compositeSplit:{composite:{size:g,sources:[{[m.I]:{geotile_grid:{bounds:Object(f.o)(c),field:this._descriptor.geoField,precision:i}}}]},aggs:{[m.G]:{geo_centroid:{field:this._descriptor.geoField}},...this.getValueAggsDsl(r)}}},_=[];let b=0,x=null;for(;;){var w;if(!l())throw new D.b;if(b++,b>5)throw new Error(u.i18n.translate("xpack.maps.source.esGrid.compositePaginationErrorMessage",{defaultMessage:'{layerName} is causing too many requests. Reduce "Grid resolution" and/or reduce the number of top term "Metrics".',values:{layerName:n}}));x&&(y.compositeSplit.composite.after=x),e.setField("aggs",y);const r=x?`${this.getId()} afterKey ${x.geoSplit}`:this.getId(),i=await this._runEsQuery({requestId:r,requestName:Object(z.b)(`${n} (${b})`),searchSource:e,registerCancelCallback:o,searchSessionId:t,executionContext:Object(B.b)({description:"es_geo_grid_source:cluster_composite"},p),requestsAdapter:h.requests,onWarning:d});_.push(...v(i,this._descriptor.requestType));const a=null===(w=i.aggregations)||void 0===w?void 0:w.compositeSplit;if(x=a.after_key,a.buckets.length<g)break}return _}async _nonCompositeAggRequest({searchSource:e,searchSessionId:t,indexPattern:r,precision:i,layerName:n,registerCancelCallback:o,bufferedExtent:a,tooManyBuckets:l,inspectorAdapters:u,executionContext:h,onWarning:p}){const d=l?this.getValueAggsDsl(r,(e=>0===e.getBucketCount())):this.getValueAggsDsl(r);return e.setField("aggs",{[m.I]:{geotile_grid:{bounds:Object(f.o)(a),field:this._descriptor.geoField,precision:i,size:m.s,shard_size:m.s},aggs:{[m.G]:{geo_centroid:{field:this._descriptor.geoField}},...d}}}),g=await this._runEsQuery({requestId:this.getId(),requestName:Object(z.b)(n),searchSource:e,registerCancelCallback:o,searchSessionId:t,executionContext:Object(B.b)({description:"es_geo_grid_source:cluster"},h),requestsAdapter:u.requests,onWarning:p}),y=this._descriptor.requestType,_(g,y,(e=>c.a.get(e,`aggregations.${m.I}.buckets`,[])),(e=>e.key));var g,y}async _isGeoShape(){try{return(await this._getGeoField()).type===m.A.GEO_SHAPE}catch(e){return!1}}async getGeoJsonWithMeta(e,t,r,i,n){if(!t.buffer)throw new Error("Cannot get GeoJson without searchFilter.buffer");const o=await this.getIndexPattern(),a=await this.makeSearchSource(t,0);a.setField("trackTotalHits",!1);let l=1;this.getMetricFields().forEach((e=>{l+=e.getBucketCount()}));const c=this._descriptor.resolution!==m.L.COARSE&&l>1,u=!await this._isGeoShape(),h=this.getGeoGridPrecision(t.zoom),p=[],d=e=>{p.push(e)};return{data:{type:"FeatureCollection",features:u&&c?await this._compositeAggRequest({searchSource:a,searchSessionId:t.searchSessionId,indexPattern:o,precision:h,layerName:e,registerCancelCallback:r,bucketsPerGrid:l,isRequestStillActive:i,bufferedExtent:t.buffer,inspectorAdapters:n,executionContext:t.executionContext,onWarning:d}):await this._nonCompositeAggRequest({searchSource:a,searchSessionId:t.searchSessionId,indexPattern:o,precision:h,layerName:e,registerCancelCallback:r,bufferedExtent:t.buffer,tooManyBuckets:c,inspectorAdapters:n,executionContext:t.executionContext,onWarning:d})},meta:{areResultsTrimmed:!1,warnings:p}}}getTileSourceLayer(){return"aggs"}async getTileUrl(e,t,r,i){const n=await this.getIndexPattern(),o=await this.makeSearchSource(e,0);return o.setField("aggs",this.getValueAggsDsl(n)),o.setField("filter",[...o.getField("filter"),Object(d.buildExistsFilter)({name:this._descriptor.geoField,type:"geo_point"},n)]),`${Object(T.r)().basePath.prepend(`${m.ob}/{z}/{x}/{y}.pbf`)}?${Object(p.a)({geometryFieldName:this._descriptor.geoField,index:n.getIndexPattern(),gridPrecision:this._getGeoGridPrecisionResolutionDelta(),hasLabels:r,buffer:i,requestBody:c.a.pick(o.getSearchRequestBody(),["aggs","fields","query","runtime_mappings"]),renderAs:this._descriptor.requestType,token:t,executionContextId:Object(B.a)(e.executionContext)})}`}isFilterByMapBounds(){return!this.isMvt()}hasTooltipProperties(){return!0}async getSupportedShapeTypes(){return this._descriptor.requestType===m.ub.GRID||this._descriptor.requestType===m.ub.HEX?[m.Hb.POLYGON]:[m.Hb.POINT]}async getLicensedFeatures(){return await this._isGeoShape()?[j.a.GEO_SHAPE_AGGS_GEO_TILE]:[]}getFeatureActions({addFilters:e,featureId:t,geoFieldNames:r,onClose:i}){return 0===r.length||null===e?[]:[{label:u.i18n.translate("xpack.maps.tooltip.action.filterByClusterLabel",{defaultMessage:"Filter by cluster"}),id:"FILTER_BY_CLUSTER_ACTION",onClick:()=>{const n=Object(f.b)({geoFieldNames:r,gridId:t,isHex:this._descriptor.requestType===m.ub.HEX});e([n],h.ACTION_GLOBAL_APPLY_FILTER),i()}}]}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return vector_source_AbstractVectorSource})),r.d(t,"b",(function(){return u})),r(4);var i=r(1),n=r(0),o=r(109),a=r(133),l=r(230),c=r(3);class vector_source_AbstractVectorSource extends a.a{isMvt(){return!1}isFilterByMapBounds(){return!1}isBoundsAware(){return!1}async supportsFitToBounds(){return!0}async getBoundsForFilters(e,t){return null}async getFields(){return[]}getFieldByName(e){throw new Error("Must implement VectorSource#getFieldByName")}async getLeftJoinFields(){return[]}async getGeoJsonWithMeta(e,t,r,i,n){throw new Error("Should implement VectorSource#getGeoJson")}hasTooltipProperties(){return!1}async getTooltipProperties(e,t){const r=[];for(const t in e)t.startsWith("__kbn")||r.push(new o.a(t,t,e[t]));return r}async isTimeAware(){return!1}supportsJoins(){return!0}async getSupportedShapeTypes(){return[n.Hb.POINT,n.Hb.LINE,n.Hb.POLYGON]}getSourceStatus(e){return{tooltipContent:null,areResultsTrimmed:!1}}getSyncMeta(e){return null}async getTimesliceMaskFieldName(){return null}async addFeature(e){throw new Error("Should implement VectorSource#addFeature")}async deleteFeature(e){throw new Error("Should implement VectorSource#deleteFeature")}async supportsFeatureEditing(){return!1}getFeatureActions({addFilters:e,geoFieldNames:t,getActionContext:r,getFilterActions:o,getGeojsonGeometry:a,mbFeature:u,onClose:h}){if(0===t.length||null===e)return[];if(u.geometry.type!==n.J.POLYGON&&u.geometry.type!==n.J.MULTI_POLYGON)return[];if(this.isMvt())return[];const p=a();return p?[{label:i.i18n.translate("xpack.maps.tooltip.action.filterByGeometryLabel",{defaultMessage:"Filter by geometry"}),id:"FILTER_BY_GEOMETRY_ACTION",form:Object(c.jsx)(l.a,{onClose:h,geoFieldNames:t,addFilters:e,getFilterActions:o,getActionContext:r,geometry:p})}]:[]}}const u=e=>i.i18n.translate("xpack.maps.vectorSource.featuresRequestName",{defaultMessage:"load layer features ({layerName})",values:{layerName:e}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(89);t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&i.isNumber(t[0])&&i.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,r){if(!e)throw new Error("No feature passed");if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,r){if(!e)throw new Error("No featureCollection passed");if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var i=0,n=e.features;i<n.length;i++){var o=n[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a}));var i=r(1),n=r(0);function o(e){return i.i18n.translate("xpack.maps.styles.vector.disabledByMessage",{defaultMessage:"Set '{styleLabel}' to enable",values:{styleLabel:a(e)}})}function a(e){switch(e){case n.Ib.FILL_COLOR:return i.i18n.translate("xpack.maps.styles.vector.fillColorLabel",{defaultMessage:"Fill color"});case n.Ib.LINE_COLOR:return i.i18n.translate("xpack.maps.styles.vector.borderColorLabel",{defaultMessage:"Border color"});case n.Ib.LINE_WIDTH:return i.i18n.translate("xpack.maps.styles.vector.borderWidthLabel",{defaultMessage:"Border width"});case n.Ib.ICON:return i.i18n.translate("xpack.maps.styles.vector.iconLabel",{defaultMessage:"Icon"});case n.Ib.ICON_SIZE:return i.i18n.translate("xpack.maps.styles.vector.symbolSizeLabel",{defaultMessage:"Symbol size"});case n.Ib.ICON_ORIENTATION:return i.i18n.translate("xpack.maps.styles.vector.orientationLabel",{defaultMessage:"Symbol orientation"});case n.Ib.LABEL_TEXT:return i.i18n.translate("xpack.maps.styles.vector.labelLabel",{defaultMessage:"Label"});case n.Ib.LABEL_ZOOM_RANGE:return i.i18n.translate("xpack.maps.styles.vector.labelZoomRangeLabel",{defaultMessage:"Label visibility"});case n.Ib.LABEL_COLOR:return i.i18n.translate("xpack.maps.styles.vector.labelColorLabel",{defaultMessage:"Label color"});case n.Ib.LABEL_SIZE:return i.i18n.translate("xpack.maps.styles.vector.labelSizeLabel",{defaultMessage:"Label size"});case n.Ib.LABEL_BORDER_COLOR:return i.i18n.translate("xpack.maps.styles.vector.labelBorderColorLabel",{defaultMessage:"Label border color"});case n.Ib.LABEL_BORDER_SIZE:return i.i18n.translate("xpack.maps.styles.vector.labelBorderWidthLabel",{defaultMessage:"Label border width"});case n.Ib.LABEL_POSITION:return i.i18n.translate("xpack.maps.styles.vector.labelPositionLabel",{defaultMessage:"Label position"});default:return e}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"g",(function(){return m})),r.d(t,"f",(function(){return g})),r.d(t,"e",(function(){return y})),r.d(t,"d",(function(){return Mask}));var i=r(2),n=r.n(i),o=r(1),a=r(0);const l=o.i18n.translate("xpack.maps.mask.belowLabel",{defaultMessage:"below"}),c=o.i18n.translate("xpack.maps.mask.aboveLabel",{defaultMessage:"above"}),u=o.i18n.translate("xpack.maps.mask.genericBucketsName",{defaultMessage:"buckets"}),h=o.i18n.translate("xpack.maps.mask.genericFeaturesName",{defaultMessage:"features"}),p=o.i18n.translate("xpack.maps.mask.genericAggLabel",{defaultMessage:"value"}),d=o.i18n.translate("xpack.maps.mask.when",{defaultMessage:"when"}),f=o.i18n.translate("xpack.maps.mask.whenJoinMetric",{defaultMessage:"{whenLabel} join metric",values:{whenLabel:d}});function m(e,t){return`${function(e){return e===a.gb.BELOW?l:e===a.gb.ABOVE?c:e}(e)} ${t}`}function g({bucketsName:e,isJoin:t}){return o.i18n.translate("xpack.maps.mask.maskLabel",{defaultMessage:"Hide {hideNoun}",values:{hideNoun:t?h:e||u}})}function y({aggLabel:e,bucketsName:t,isJoin:r}){return o.i18n.translate("xpack.maps.mask.maskDescription",{defaultMessage:"{maskAdverb} {aggLabel} is ",values:{aggLabel:e||p,maskAdverb:r?f:d}})}class Mask{constructor({esAggField:e,isGeometrySourceMvt:t,operator:r,value:i}){n()(this,"_esAggField",void 0),n()(this,"_isGeometrySourceMvt",void 0),n()(this,"_operator",void 0),n()(this,"_value",void 0),this._esAggField=e,this._isGeometrySourceMvt=t,this._operator=r,this._value=i}_isFeatureState(){return this._esAggField.getOrigin()!==a.D.SOURCE&&!!this._isGeometrySourceMvt}getMatchMaskedExpression(){return[this._operator===a.gb.BELOW?"<":">",[this._isFeatureState()?a.ib.FEATURE_STATE:a.ib.GET,this._esAggField.getMbFieldName()],this._value]}getMatchUnmaskedExpression(){return[this._operator===a.gb.BELOW?">=":"<=",[this._isFeatureState()?a.ib.FEATURE_STATE:a.ib.GET,this._esAggField.getMbFieldName()],this._value]}getEsAggField(){return this._esAggField}getFieldOriginListLabel(){const e=this._esAggField.getSource(),t=this._esAggField.getOrigin()===a.D.JOIN;return`${g({bucketsName:"getBucketsName"in e?e.getBucketsName():void 0,isJoin:t})} ${t?f:d}`}getOperator(){return this._operator}getValue(){return this._value}isFeatureMasked(e){const t=this._isFeatureState()?null==e?void 0:e.state[this._esAggField.getMbFieldName()]:null==e?void 0:e.properties[this._esAggField.getMbFieldName()];return"number"==typeof t&&(this._operator===a.gb.BELOW?t<this._value:t>this._value)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return TooltipProperty}));var i=r(2),n=r.n(i),o=r(40),a=r.n(o);class TooltipProperty{constructor(e,t,r){n()(this,"_propertyKey",void 0),n()(this,"_rawValue",void 0),n()(this,"_propertyName",void 0),this._propertyKey=e,this._propertyName=t,this._rawValue=r}getPropertyKey(){return this._propertyKey}getPropertyName(){return this._propertyName}getHtmlDisplayValue(){return a.a.escape(Array.isArray(this._rawValue)?this._rawValue.join():this._rawValue)}getRawValue(){return this._rawValue}isFilterable(){return!1}async getESFilters(){return[]}}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return es_agg_source_AbstractESAggSource})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return v}));var i=r(2),n=r.n(i),o=r(1),a=r(266),l=r(0),c=r(135),u=r(109);class top_term_percentage_field_TopTermPercentageField{constructor(e){n()(this,"_topTermAggField",void 0),this._topTermAggField=e}supportsFieldMetaFromEs(){return!1}supportsFieldMetaFromLocalData(){return!this.getSource().isMvt()}getSource(){return this._topTermAggField.getSource()}getMbFieldName(){return this.getName()}getOrigin(){return this._topTermAggField.getOrigin()}getName(){return`${this._topTermAggField.getName()}${l.Gb}`}getRootName(){return""}async getLabel(){return`${await this._topTermAggField.getLabel()}%`}isValid(){return this._topTermAggField.isValid()}async getDataType(){return"number"}async createTooltipProperty(e){return new u.a(this.getName(),await this.getLabel(),e)}getValueAggDsl(){return null}getBucketCount(){return 0}isCount(){return!1}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(e){return null}async getCategoricalFieldMetaRequest(){return null}canValueBeFormatted(){return!1}isEqual(e){return e.getName()===this.getName()}pluckRangeFromTileMetaFeature(e){return null}getMask(){}}var h=r(298);class es_agg_tooltip_property_ESAggTooltipProperty extends h.a{constructor(e,t,r,i,o){super(e,t,r,o),n()(this,"_aggType",void 0),n()(this,"_aggField",void 0),this._aggType=i,this._aggField=r}getHtmlDisplayValue(){const e=this.getRawValue();return void 0!==e&&this._aggField.isCount()?parseInt(e,10).toLocaleString():super.getHtmlDisplayValue()}isFilterable(){return this._aggType===l.b.TERMS&&super.isFilterable()}}var p=r(114);class count_agg_field_CountAggField{constructor({label:e,source:t,origin:r,mask:i}){n()(this,"_source",void 0),n()(this,"_origin",void 0),n()(this,"_label",void 0),n()(this,"_mask",void 0),this._source=t,this._origin=r,this._label=e,this._mask=i}supportsFieldMetaFromEs(){return!1}supportsFieldMetaFromLocalData(){return!0}_getAggType(){return l.b.COUNT}getSource(){return this._source}getOrigin(){return this._origin}getName(){return this._source.getAggKey(this._getAggType(),this.getRootName())}getMbFieldName(){return this._source.isMvt()?"_count":this.getName()}getRootName(){return""}async getLabel(){return this._label?this._label:await this._source.getAggLabel(l.b.COUNT,"")}isValid(){return!0}async getDataType(){return"number"}async createTooltipProperty(e){const t=await this._source.getIndexPattern(),r=new u.a(this.getName(),await this.getLabel(),e);return new es_agg_tooltip_property_ESAggTooltipProperty(r,t,this,this._getAggType(),this._source.getApplyGlobalQuery())}getValueAggDsl(e){return null}getBucketCount(){return 0}isCount(){return!0}canValueBeFormatted(){return!1}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(e){return null}async getCategoricalFieldMetaRequest(e){return null}isEqual(e){return e.getName()===this.getName()}pluckRangeFromTileMetaFeature(e){return Object(p.d)(e,"_count")}getMask(){return this._mask}}var d=r(166),f=r(79);class agg_field_AggField extends count_agg_field_CountAggField{constructor(e){super(e),n()(this,"_esDocField",void 0),n()(this,"_aggType",void 0),this._esDocField=e.esDocField,this._aggType=e.aggType}supportsFieldMetaFromEs(){return!Object(d.a)(this._getAggType())}supportsFieldMetaFromLocalData(){return!this._source.isMvt()||"number"===this._getDataTypeSynchronous()}isValid(){return!!this._esDocField}getMbFieldName(){return this._source.isMvt()?this.getName()+".value":this.getName()}canValueBeFormatted(){return this._getAggType()!==l.b.UNIQUE_COUNT}isCount(){return this._getAggType()===l.b.UNIQUE_COUNT}_getAggType(){return this._aggType}getValueAggDsl(e){const t=Object(f.l)(e,this.getRootName()),r=this._getAggType(),i=r===l.b.TERMS?{size:1,shard_size:5}:{};return{[r]:Object(f.a)(i,t)}}getRootName(){return this._esDocField?this._esDocField.getName():""}async getLabel(){return this._label?this._label:await this._source.getAggLabel(this._aggType,this._esDocField?await this._esDocField.getLabel():"")}_getDataTypeSynchronous(){return this._getAggType()===l.b.TERMS?"string":"number"}async getDataType(){return this._getDataTypeSynchronous()}getBucketCount(){return this._getAggType()===l.b.TERMS?5:0}async getExtendedStatsFieldMetaRequest(){return this._esDocField?await this._esDocField.getExtendedStatsFieldMetaRequest():null}async getPercentilesFieldMetaRequest(e){return this._esDocField?await this._esDocField.getPercentilesFieldMetaRequest(e):null}async getCategoricalFieldMetaRequest(e){return this._esDocField?await this._esDocField.getCategoricalFieldMetaRequest(e):null}pluckRangeFromTileMetaFeature(e){return Object(p.d)(e,this.getName())}}var m=r(264);class percentile_agg_field_PercentileAggField extends agg_field_AggField{constructor(e){super({...e,aggType:l.b.PERCENTILE}),n()(this,"_percentile",void 0),this._percentile=e.percentile}supportsFieldMetaFromEs(){return!0}supportsFieldMetaFromLocalData(){return!0}getMbFieldName(){return this._source.isMvt()?this.getName()+`.values.${this._percentile}${Number.isInteger(this._percentile)?".0":""}`:this.getName()}canValueBeFormatted(){return!0}async getLabel(){if(this._label)return this._label;if(50===this._percentile)return`${o.i18n.translate("xpack.maps.fields.percentileMedianLabek",{defaultMessage:"median"})} ${this.getRootName()}`;const e=Object(m.a)(this._percentile);return`${this._percentile}${e} ${await this._source.getAggLabel(this._getAggType(),this.getRootName())}`}getName(){return`${super.getName()}_${this._percentile}`}getValueAggDsl(e){const t=Object(f.l)(e,this.getRootName()),r=Object(f.a)({},t);return r.percents=[this._percentile],{percentiles:r}}}function g(e,t,r){let i;i=e.type===l.b.COUNT?new count_agg_field_CountAggField({label:e.label,source:t,origin:r,mask:e.mask}):e.type===l.b.PERCENTILE?new percentile_agg_field_PercentileAggField({label:e.label,esDocField:"field"in e&&e.field?new c.a({fieldName:e.field,source:t,origin:r}):void 0,percentile:"percentile"in e&&"number"==typeof e.percentile?e.percentile:l.v,source:t,origin:r,mask:e.mask}):new agg_field_AggField({label:e.label,esDocField:"field"in e&&e.field?new c.a({fieldName:e.field,source:t,origin:r}):void 0,aggType:e.type,source:t,origin:r,mask:e.mask});const n=[i];return"field"in e&&e.type===l.b.TERMS&&n.push(new top_term_percentage_field_TopTermPercentageField(i)),n}var y=r(93);function v(e){switch(e){case l.b.AVG:return o.i18n.translate("xpack.maps.aggType.averageLabel",{defaultMessage:"average"});case l.b.COUNT:return o.i18n.translate("xpack.maps.aggType.countLabel",{defaultMessage:"count"});case l.b.MAX:return o.i18n.translate("xpack.maps.aggType.maximumLabel",{defaultMessage:"max"});case l.b.MIN:return o.i18n.translate("xpack.maps.aggType.minimumLabel",{defaultMessage:"min"});case l.b.PERCENTILE:return o.i18n.translate("xpack.maps.aggType.percentileLabel",{defaultMessage:"percentile"});case l.b.SUM:return o.i18n.translate("xpack.maps.aggType.sumLabel",{defaultMessage:"sum"});case l.b.TERMS:return o.i18n.translate("xpack.maps.aggType.topTermLabel",{defaultMessage:"top term"});case l.b.UNIQUE_COUNT:return o.i18n.translate("xpack.maps.aggType.cardinalityTermLabel",{defaultMessage:"unique count"});default:return e}}var _=r(108);const b={type:l.b.COUNT};class es_agg_source_AbstractESAggSource extends a.a{static createDescriptor(e){return{...a.a.createDescriptor(e),type:e.type?e.type:"",metrics:e.metrics&&e.metrics.length>0?e.metrics:[b]}}constructor(e){super(e),n()(this,"_metricFields",void 0),this._metricFields=[],e.metrics&&e.metrics.forEach((e=>{this._metricFields.push(...g(e,this,this.getOriginForField()))}))}getBucketsName(){return _.c}getFieldByName(e){return this.getMetricFieldForName(e)}createField({fieldName:e}){throw new Error("Cannot create a new field from just a fieldname for an es_agg_source.")}getMetricFieldForName(e){return this.getMetricFields().find((t=>t.getName()===e))||null}getOriginForField(){return l.D.SOURCE}getMetricFields(){const e=this._metricFields.filter((e=>e.isValid()));return 0===e.length?g({type:l.b.COUNT},this,this.getOriginForField()):e}getAggKey(e,t){return Object(y.b)({aggType:e,aggFieldName:t})}async getAggLabel(e,t){switch(e){case l.b.COUNT:return v(e);case l.b.TERMS:return o.i18n.translate("xpack.maps.source.esAggSource.topTermLabel",{defaultMessage:"top {fieldLabel}",values:{fieldLabel:t}});default:return`${v(e)} ${t}`}}async getFields(){return this.getMetricFields()}getValueAggsDsl(e,t){const r={};return this.getMetricFields().filter((e=>!t||t(e))).forEach((t=>{t.getValueAggDsl(e)&&(r[t.getName()]=t.getValueAggDsl(e))})),r}async getTooltipProperties(e){const t=await this.getFields(),r=[];return t.forEach((t=>{let i;for(const r in e)if(e.hasOwnProperty(r)&&t.getMbFieldName()===r){i=e[r];break}const n=t.createTooltipProperty(i);r.push(n)})),await Promise.all(r)}isGeoGridPrecisionAware(){return!1}isFieldAware(){return!1}getSyncMeta(e){return{metrics:this.getMetricFields().map((e=>e.getName()))}}getGeoGridPrecision(e){return 0}}},,,,function(e,t,r){"use strict";var i=r(162),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=p;var o=Object.create(r(148));o.inherits=r(130);var a=r(255),l=r(204);o.inherits(p,a);for(var c=n(l.prototype),u=0;u<c.length;u++){var h=c[u];p.prototype[h]||(p.prototype[h]=l.prototype[h])}function p(e){if(!(this instanceof p))return new p(e);a.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(283);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(483);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(484);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(285);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=r(286);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(507);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(508);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},function(e,t,r){"use strict";function i(e){return"string"==typeof e&&""!==e}r.d(t,"a",(function(){return i}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var i=r(0);function n(e,t={}){return a(t)?{...t,...e}:void 0!==t.child?{...t,child:{...n(e,t.child)}}:t}function o(e={}){return a(e)?e.id:void 0!==e.child?o(e.child):void 0}function a(e){return e.name===i.e}},,,,function(e,t,r){"use strict";r.d(t,"b",(function(){return T})),r.d(t,"a",(function(){return dynamic_style_property_DynamicStyleProperty}));var i=r(2),n=r.n(i),o=r(40),a=r.n(o),l=r(4),c=r.n(l),u=r(131),h=r(83),p=r(0),d=r(15),f=r(1),m=r(41),g=r(3);class data_mapping_popover_DataMappingPopover extends l.Component{constructor(...e){super(...e),n()(this,"state",{isPopoverOpen:!1}),n()(this,"_togglePopover",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),n()(this,"_closePopover",(()=>{this.setState({isPopoverOpen:!1})}))}_renderButton(){return Object(g.jsx)(d.EuiButtonEmpty,{onClick:this._togglePopover,size:"xs",iconType:"controlsHorizontal",iconSide:"left"},Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.fieldMetaOptions.popoverToggle",defaultMessage:"Data mapping"}))}render(){return Object(g.jsx)(d.EuiPopover,{id:"dataMappingPopover",anchorPosition:"leftCenter",button:this._renderButton(),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,ownFocus:!0},this.props.children)}}function y(e){return Object(g.jsx)(data_mapping_popover_DataMappingPopover,null,Object(g.jsx)(d.EuiFormRow,{display:"columnCompressedSwitch"},Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(d.EuiSwitch,{label:f.i18n.translate("xpack.maps.styles.fieldMetaOptions.isEnabled.categoricalLabel",{defaultMessage:"Get categories from data set"}),checked:e.fieldMetaOptions.isEnabled,onChange:t=>{e.onChange({fieldMetaOptions:{...e.fieldMetaOptions,isEnabled:t.target.checked}})},disabled:!e.supportsFieldMetaFromLocalData,compressed:!0})," ",Object(g.jsx)(d.EuiToolTip,{content:Object(g.jsx)(d.EuiText,null,Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.server",defaultMessage:"Calculate categories from the entire data set. Styling is consistent when users pan, zoom, and filter."})),Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.categoricalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate categories from local data and recalculate categories when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},Object(g.jsx)(d.EuiIcon,{type:"questionInCircle",color:"subdued"})))))}const v=f.i18n.translate("xpack.maps.addBtnTitle",{defaultMessage:"Add"}),_=f.i18n.translate("xpack.maps.deleteBtnTitle",{defaultMessage:"Delete"}),b=({onAdd:e,onRemove:t,showDeleteButton:r})=>Object(g.jsx)("div",null,r?Object(g.jsx)(d.EuiButtonIcon,{iconType:"trash",color:"danger","aria-label":_,title:_,onClick:t}):null,Object(g.jsx)(d.EuiButtonIcon,{iconType:"plusInCircle",color:"primary","aria-label":v,title:v,onClick:e}));function x(e){return"number"!=typeof e||e<=0||e>=100}class percentiles_form_PercentilesForm extends l.Component{constructor(e){super(e),n()(this,"_onSubmit",(()=>{this.state.percentiles.some(x)||this.props.onChange(this.state.percentiles)})),this.state={percentiles:e.initialPercentiles}}render(){const e=this.state.percentiles.map(((e,t)=>{const r=x(e),i=r?f.i18n.translate("xpack.maps.styles.invalidPercentileMsg",{defaultMessage:"Percentile must be a number between 0 and 100, exclusive"}):null;return Object(g.jsx)(d.EuiFormRow,{key:t,display:"rowCompressed",isInvalid:r,error:i},Object(g.jsx)(d.EuiFieldNumber,{isInvalid:r,value:e,onChange:e=>{const r=parseFloat(e.target.value),i=[...this.state.percentiles];i[t]=isNaN(r)?"":r,this.setState({percentiles:i},this._onSubmit)},append:Object(g.jsx)(b,{onAdd:()=>{let r="";if("number"==typeof e){let i=1;if(t===this.state.percentiles.length-1){if(0!==t){const r=this.state.percentiles[t-1];"number"==typeof r&&(i=e-r)}}else{const r=this.state.percentiles[t+1];"number"==typeof r&&(i=(r-e)/2)}r=e+i,r>=100&&(r=99)}const i=[...this.state.percentiles.slice(0,t+1),r,...this.state.percentiles.slice(t+1)];this.setState({percentiles:i},this._onSubmit)},onRemove:()=>{const e=1===this.state.percentiles.length?this.state.percentiles:[...this.state.percentiles.slice(0,t),...this.state.percentiles.slice(t+1)];this.setState({percentiles:e},this._onSubmit)},showDeleteButton:this.state.percentiles.length>1}),compressed:!0}))}));return Object(g.jsx)("div",null,e)}}const w=f.i18n.translate("xpack.maps.styles.ordinalDataMapping.interpolateTitle",{defaultMessage:"Interpolate between min and max"}),S=f.i18n.translate("xpack.maps.styles.ordinalDataMapping.percentilesTitle",{defaultMessage:"Use percentiles"}),C=[{value:p.n.INTERPOLATE,inputDisplay:w,dropdownDisplay:Object(g.jsx)(l.Fragment,null,Object(g.jsx)("strong",null,w),Object(g.jsx)(d.EuiText,{size:"s",color:"subdued"},Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.interpolateDescription",defaultMessage:"Interpolate values from the data domain to the style on a linear scale"}))))},{value:p.n.PERCENTILES,inputDisplay:S,dropdownDisplay:Object(g.jsx)(l.Fragment,null,Object(g.jsx)("strong",null,S),Object(g.jsx)(d.EuiText,{size:"s",color:"subdued"},Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.percentilesDescription",defaultMessage:"Divide style into bands that map to values"}))))}];function M(e){function t(t){e.onChange({fieldMetaOptions:{...e.fieldMetaOptions,isEnabled:t.target.checked}})}function r(t){e.onChange({fieldMetaOptions:{...e.fieldMetaOptions,sigma:parseInt(t.currentTarget.value,10)}})}const i=C.filter((t=>e.supportedDataMappingFunctions.includes(t.value)));return Object(g.jsx)(data_mapping_popover_DataMappingPopover,null,Object(g.jsx)(l.Fragment,null,Object(g.jsx)(d.EuiFormRow,{label:f.i18n.translate("xpack.maps.styles.ordinalDataMapping.dataMappingLabel",{defaultMessage:"Fitting"}),helpText:f.i18n.translate("xpack.maps.styles.ordinalDataMapping.dataMappingTooltipContent",{defaultMessage:"Fit values from the data domain to the style"})},Object(g.jsx)(d.EuiSuperSelect,{options:i,valueOfSelected:e.dataMappingFunction,onChange:function(t){const r=t===p.n.PERCENTILES?{dataMappingFunction:t,fieldMetaOptions:{...e.fieldMetaOptions,isEnabled:!0,percentiles:e.fieldMetaOptions.percentiles?e.fieldMetaOptions.percentiles:p.w}}:{dataMappingFunction:t};e.onChange(r)},itemLayoutAlign:"top",hasDividers:!0})),Object(g.jsx)(d.EuiHorizontalRule,null),e.dataMappingFunction===p.n.PERCENTILES?Object(g.jsx)(percentiles_form_PercentilesForm,{initialPercentiles:e.fieldMetaOptions.percentiles?e.fieldMetaOptions.percentiles:p.w,onChange:function(t){e.onChange({fieldMetaOptions:{...e.fieldMetaOptions,percentiles:a.a.uniq(t.sort())}})}}):function(){const i=e.fieldMetaOptions.isEnabled?Object(g.jsx)(d.EuiFormRow,{label:Object(g.jsx)(d.EuiToolTip,{anchorClassName:"eui-alignMiddle",content:f.i18n.translate("xpack.maps.styles.ordinalDataMapping.sigmaTooltipContent",{defaultMessage:"To de-emphasize outliers, set sigma to a smaller value. Smaller sigmas move the min and max closer to the median."})},Object(g.jsx)("span",null,f.i18n.translate("xpack.maps.styles.ordinalDataMapping.sigmaLabel",{defaultMessage:"Sigma"})," ",Object(g.jsx)(d.EuiIcon,{type:"questionInCircle",color:"subdued"}))),display:"columnCompressed"},Object(g.jsx)(d.EuiRange,{min:1,max:5,step:.25,value:a.a.get(e.fieldMetaOptions,"sigma",h.c),onChange:r,showTicks:!0,tickInterval:1,compressed:!0})):null;return Object(g.jsx)(l.Fragment,null,Object(g.jsx)(d.EuiFormRow,{display:"columnCompressedSwitch"},Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(d.EuiSwitch,{label:f.i18n.translate("xpack.maps.styles.ordinalDataMapping.isEnabledSwitchLabel",{defaultMessage:"Get min and max from data set"}),checked:e.fieldMetaOptions.isEnabled,onChange:t,disabled:!e.supportsFieldMetaFromLocalData,compressed:!0})," ",Object(g.jsx)(d.EuiToolTip,{content:Object(g.jsx)(d.EuiText,null,Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.server",defaultMessage:"Calculate min and max from the entire data set. Styling is consistent when users pan, zoom, and filter. To minimize outliers, min and max are clamped to the standard deviation (sigma) from the medium."})),Object(g.jsx)("p",null,Object(g.jsx)(m.FormattedMessage,{id:"xpack.maps.styles.ordinalDataMapping.isEnabled.local",defaultMessage:"When disabled, calculate min and max from local data and recalculate min and max when the data changes. Styling may be inconsistent when users pan, zoom, and filter."})))},Object(g.jsx)(d.EuiIcon,{type:"questionInCircle",color:"subdued"})))),i)}()))}var E=r(95);const T="__other_bucket__";class dynamic_style_property_DynamicStyleProperty extends u.a{constructor(e,t,r,i,o){super(e,t),n()(this,"_field",void 0),n()(this,"_layer",void 0),n()(this,"_getFieldFormatter",void 0),n()(this,"getValueSuggestions",(async e=>null===this._field?[]:await this._field.getSource().getValueSuggestions(this._field,e))),this._field=r,this._layer=i,this._getFieldFormatter=o}_getStyleMetaDataRequestId(e){if(this.getFieldOrigin()===p.D.SOURCE)return p.Bb;const t=this._layer.getValidJoins().find((t=>!!t.getRightJoinSource().getFieldByName(e)));return t?t.getSourceMetaDataRequestId():null}_getRangeFieldMetaFromLocalFeatures(){const e=this._layer.getStyle().getStyleMeta(),t=this.getFieldName();return e.getRangeFieldMetaDescriptor(t)}_getRangeFieldMetaFromStyleMetaRequest(){const e=this._getStyleMetaDataRequestId(this.getFieldName());if(!e)return null;const t=this._layer.getDataRequest(e);if(!t||!t.hasData())return null;const r=t.getData();return this._pluckOrdinalStyleMetaFromFieldMetaData(r)||null}getRangeFieldMeta(){const e=this._getRangeFieldMetaFromLocalFeatures();if(!this.isFieldMetaEnabled())return e;return this._getRangeFieldMetaFromStyleMetaRequest()||e}getPercentilesFieldMeta(){if(!this._field)return null;const e=this._getStyleMetaDataRequestId(this.getFieldName());if(!e)return null;const t=this._layer.getDataRequest(e);return t&&t.hasData()?function(e){if(void 0===e||void 0===e.values)return null;const t=Object.keys(e.values).map((t=>({percentile:t,value:e.values[t]})));return a.a.uniqBy(t,"value")}(t.getData()[`${this._field.getRootName()}_percentiles`]):null}_getCategoryFieldMetaFromLocalFeatures(){const e=this._layer.getStyle().getStyleMeta(),t=this.getFieldName();return e.getCategoryFieldMetaDescriptor(t)}_getCategoryFieldMetaFromStyleMetaRequest(){const e=this._getStyleMetaDataRequestId(this.getFieldName());if(!e)return[];const t=this._layer.getDataRequest(e);if(!t||!t.hasData())return[];const r=t.getData();return this._pluckCategoricalStyleMetaFromFieldMetaData(r)}getCategoryFieldMeta(){const e=this._getCategoryFieldMetaFromLocalFeatures();if(!this.isFieldMetaEnabled())return e;const t=this._getCategoryFieldMetaFromStyleMetaRequest();return t.length?t:e}getField(){return this._field}getFieldName(){return this._field?this._field.getName():""}getMbFieldName(){return this._field?this._field.getMbFieldName():""}isDynamic(){return!0}isOrdinal(){return!0}isCategorical(){return!1}getNumberOfCategories(){return 0}getStyleMetaHash(){const e=this.getFieldMetaOptions(),t=[e.isEnabled.toString()];if(this.isOrdinal()){const r=this.getDataMappingFunction();t.push(r),r===p.n.PERCENTILES&&e.percentiles&&t.push(e.percentiles.join(""))}else this.isCategorical()&&t.push(this.getNumberOfCategories().toString());return t.join("")}isComplete(){return!!this._field}getFieldOrigin(){return this._field?this._field.getOrigin():null}isFieldMetaEnabled(){const e=this.getFieldMetaOptions();return this.supportsFieldMeta()&&a.a.get(e,"isEnabled",!0)}supportsFieldMeta(){return this.isComplete()&&!!this._field&&this._field.supportsFieldMetaFromEs()}async getFieldMetaRequest(){if(!this._field)return null;if(this.isOrdinal())return this.getDataMappingFunction()===p.n.INTERPOLATE?this._field.getExtendedStatsFieldMetaRequest():this._field.getPercentilesFieldMetaRequest(void 0!==this.getFieldMetaOptions().percentiles?this.getFieldMetaOptions().percentiles:p.w);if(this.isCategorical()){const e=this.getNumberOfCategories();return this._field.getCategoricalFieldMetaRequest(e)}return null}supportsFeatureState(){return!0}usesFeatureState(){return!!this._field&&!this._field.getSource().isMvt()&&this.supportsFeatureState()}getMbLookupFunction(){return this.usesFeatureState()?p.ib.FEATURE_STATE:p.ib.GET}getFieldMetaOptions(){const e=a.a.get(this.getOptions(),"fieldMetaOptions",{isEnabled:!0});return this._field&&!this._field.supportsFieldMetaFromLocalData()?{...e,isEnabled:!0}:e}getDataMappingFunction(){return"dataMappingFunction"in this._options?this._options.dataMappingFunction:p.n.INTERPOLATE}_pluckOrdinalStyleMetaFromFieldMetaData(e){if(!this.isOrdinal()||!this._field)return null;const t=e[`${this._field.getRootName()}_range`];if(!t||!("avg"in t))return null;const r=a.a.get(this.getFieldMetaOptions(),"sigma",h.c),i=t.avg-t.std_deviation*r,n=t.avg+t.std_deviation*r,o=Math.max(t.min,i),l=Math.min(t.max,n);return{min:o,max:l,delta:l-o,isMinOutsideStdRange:t.min<i,isMaxOutsideStdRange:t.max>n}}_pluckCategoricalStyleMetaFromFieldMetaData(e){if(!this.isCategorical()||!this._field)return[];const t=e[`${this._field.getRootName()}_terms`];if(!t||!("buckets"in t))return[];const r=t.buckets.map((e=>({key:e.key,count:e.doc_count})));return t.sum_other_doc_count>0&&r.push({key:T,count:t.sum_other_doc_count}),r}formatField(e){if(this.getField()){const t=this.getFieldName(),r=this._getFieldFormatter(t);return r?r(e):super.formatField(e)}return super.formatField(e)}_getSupportedDataMappingFunctions(){return[p.n.INTERPOLATE]}renderDataMappingPopover(e){return this._field&&this.supportsFieldMeta()?this.isCategorical()?Object(g.jsx)(y,{fieldMetaOptions:this.getFieldMetaOptions(),onChange:e,supportsFieldMetaFromLocalData:this._field.supportsFieldMetaFromLocalData()}):Object(g.jsx)(M,{fieldMetaOptions:this.getFieldMetaOptions(),styleName:this.getStyleName(),onChange:e,dataMappingFunction:this.getDataMappingFunction(),supportedDataMappingFunctions:this._getSupportedDataMappingFunctions(),supportsFieldMetaFromLocalData:this._field.supportsFieldMetaFromLocalData()}):null}getMbPropertyName(){if(!this._field)return"";let e;return e=this.usesFeatureState()?this._field.getName():!this._field.getSource().isMvt()&&this._field.supportsFieldMetaFromLocalData()?Object(E.e)(this.getStyleName(),this._field.getName()):this._field.getMbFieldName(),e}getMbPropertyValue(e){return this.isOrdinal()?function(e){if("string"!=typeof e)return e;const t=parseFloat(e);return isNaN(t)?null:t}(e):e}enrichGeoJsonAndMbFeatureState(e,t,r){const i=this.usesFeatureState(),n={source:r,id:void 0},o={},a=this.getMbPropertyName();for(let r=0;r<e.features.length;r++){const l=e.features[r],c=l.properties?l.properties[this.getFieldName()]:void 0,u=this.getMbPropertyValue(c);i?(o[a]=u,n.id=l.id,t.setFeatureState(n,o)):l.properties&&(l.properties[a]=u)}return i}}n()(dynamic_style_property_DynamicStyleProperty,"type",p.Eb.DYNAMIC)},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(89);function n(e,t,r){if(null!==e)for(var i,o,a,l,c,u,h,p,d=0,f=0,m=e.type,g="FeatureCollection"===m,y="Feature"===m,v=g?e.features.length:1,_=0;_<v;_++){c=(p=!!(h=g?e.features[_].geometry:y?e.geometry:e)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var b=0;b<c;b++){var x=0,w=0;if(null!==(l=p?h.geometries[b]:h)){u=l.coordinates;var S=l.type;switch(d=!r||"Polygon"!==S&&"MultiPolygon"!==S?0:1,S){case null:break;case"Point":if(!1===t(u,f,_,x,w))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===t(u[i],f,_,x,w))return!1;f++,"MultiPoint"===S&&x++}"LineString"===S&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(o=0;o<u[i].length-d;o++){if(!1===t(u[i][o],f,_,x,w))return!1;f++}"MultiLineString"===S&&x++,"Polygon"===S&&w++}"Polygon"===S&&x++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for(w=0,o=0;o<u[i].length;o++){for(a=0;a<u[i][o].length-d;a++){if(!1===t(u[i][o][a],f,_,x,w))return!1;f++}w++}x++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===n(l.geometries[i],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function l(e,t){var r,i,n,o,a,l,c,u,h,p,d=0,f="FeatureCollection"===e.type,m="Feature"===e.type,g=f?e.features.length:1;for(r=0;r<g;r++){for(l=f?e.features[r].geometry:m?e.geometry:e,u=f?e.features[r].properties:m?e.properties:{},h=f?e.features[r].bbox:m?e.bbox:void 0,p=f?e.features[r].id:m?e.id:void 0,a=(c=!!l&&"GeometryCollection"===l.type)?l.geometries.length:1,n=0;n<a;n++)if(null!==(o=c?l.geometries[n]:l))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,d,u,h,p))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===t(o.geometries[i],d,u,h,p))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,d,u,h,p))return!1;d++}}function c(e,t){l(e,(function(e,r,n,o,a){var l,c=null===e?null:e.type;switch(c){case null:case"Point":case"LineString":case"Polygon":return!1!==t(i.feature(e,n,{bbox:o,id:a}),r,0)&&void 0}switch(c){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}for(var u=0;u<e.coordinates.length;u++){var h={type:l,coordinates:e.coordinates[u]};if(!1===t(i.feature(h,n),r,u))return!1}}))}function u(e,t){c(e,(function(e,r,o){var a=0;if(e.geometry){var l=e.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var c,u=0,h=0,p=0;return!1!==n(e,(function(n,l,d,f,m){if(void 0===c||r>u||f>h||m>p)return c=n,u=r,h=f,p=m,void(a=0);var g=i.lineString([c,n],e.properties);if(!1===t(g,r,o,m,a))return!1;a++,c=n}))&&void 0}}}))}function h(e,t){if(!e)throw new Error("geojson is required");c(e,(function(e,r,n){if(null!==e.geometry){var o=e.geometry.type,a=e.geometry.coordinates;switch(o){case"LineString":if(!1===t(e,r,n,0,0))return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(!1===t(i.lineString(a[l],e.properties),r,n,l))return!1}}}))}t.coordEach=n,t.coordReduce=function(e,t,r,i){var o=r;return n(e,(function(e,i,n,a,l){o=0===i&&void 0===r?e:t(o,e,i,n,a,l)}),i),o},t.propEach=o,t.propReduce=function(e,t,r){var i=r;return o(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.featureEach=a,t.featureReduce=function(e,t,r){var i=r;return a(e,(function(e,n){i=0===n&&void 0===r?e:t(i,e,n)})),i},t.coordAll=function(e){var t=[];return n(e,(function(e){t.push(e)})),t},t.geomEach=l,t.geomReduce=function(e,t,r){var i=r;return l(e,(function(e,n,o,a,l){i=0===n&&void 0===r?e:t(i,e,n,o,a,l)})),i},t.flattenEach=c,t.flattenReduce=function(e,t,r){var i=r;return c(e,(function(e,n,o){i=0===n&&0===o&&void 0===r?e:t(i,e,n,o)})),i},t.segmentEach=u,t.segmentReduce=function(e,t,r){var i=r,n=!1;return u(e,(function(e,o,a,l,c){i=!1===n&&void 0===r?e:t(i,e,o,a,l,c),n=!0})),i},t.lineEach=h,t.lineReduce=function(e,t,r){var i=r;return h(e,(function(e,n,o,a){i=0===n&&void 0===r?e:t(i,e,n,o,a)})),i},t.findSegment=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,l=t.segmentIndex||0,c=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),c=c||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":c=c||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=u.length+l-1),i.lineString([u[l],u[l+1]],c,t);case"Polygon":return a<0&&(a=u.length+a),l<0&&(l=u[a].length+l-1),i.lineString([u[a][l],u[a][l+1]],c,t);case"MultiLineString":return o<0&&(o=u.length+o),l<0&&(l=u[o].length+l-1),i.lineString([u[o][l],u[o][l+1]],c,t);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),l<0&&(l=u[o][a].length-l-1),i.lineString([u[o][a][l],u[o][a][l+1]],c,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!i.isObject(t))throw new Error("options is invalid");var r,n=t.featureIndex||0,o=t.multiFeatureIndex||0,a=t.geometryIndex||0,l=t.coordIndex||0,c=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),c=c||e.features[n].properties,r=e.features[n].geometry;break;case"Feature":c=c||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var u=r.coordinates;switch(r.type){case"Point":return i.point(u,c,t);case"MultiPoint":return o<0&&(o=u.length+o),i.point(u[o],c,t);case"LineString":return l<0&&(l=u.length+l),i.point(u[l],c,t);case"Polygon":return a<0&&(a=u.length+a),l<0&&(l=u[a].length+l),i.point(u[a][l],c,t);case"MultiLineString":return o<0&&(o=u.length+o),l<0&&(l=u[o].length+l),i.point(u[o][l],c,t);case"MultiPolygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),l<0&&(l=u[o][a].length-l),i.point(u[o][a][l],c,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";var i,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&v(e,"error",t,{once:!0})}(e,n)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function h(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function p(e,t,r,i){var n,o,a,l;if(u(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(n=h(e))>0&&a.length>n&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,l=c,console&&console.warn&&console.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=d.bind(i);return n.listener=r,i.wrapFn=n,n}function m(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):y(n,n.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function v(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(o){i.once&&e.removeEventListener(t,n),r(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,h=y(c,u);for(r=0;r<u;++r)o(h[r],this,t)}return!0},l.prototype.addListener=function(e,t){return p(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return p(this,e,t,!0)},l.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},l.prototype.removeListener=function(e,t){var r,i,n,o,a;if(u(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},l.prototype.listeners=function(e){return m(this,e,!0)},l.prototype.rawListeners=function(e){return m(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return ValidatedRange}));var i=r(23),n=r.n(i),o=r(2),a=r.n(o),l=r(4),c=r.n(l),u=r(15),h=r(41),p=r(3);function d(e,t,r){return r>=e&&r<=t}class ValidatedRange extends c.a.Component{constructor(...e){super(...e),a()(this,"state",{}),a()(this,"_onRangeChange",(e=>{const t=parseFloat(e.target.value,10);let r=isNaN(t)?"":t;r=Number(r);const i=!!d(this.props.min,this.props.max,r);this.setState({value:r,isValid:i}),i&&this.props.onChange(r)}))}static getDerivedStateFromProps(e,t){return e.value!==t.prevValue?{value:e.value,prevValue:e.value,isValid:d(e.min,e.max,e.value)}:null}render(){const{max:e,min:t,value:r,onChange:i,...o}=this.props,a=Object(p.jsx)(u.EuiRange,n()({min:t,max:e,value:this.state.value.toString(),onChange:this._onRangeChange},o));return this.state.isValid?a:Object(p.jsx)("div",null,a,Object(p.jsx)(u.EuiFormErrorText,null,Object(p.jsx)(h.FormattedMessage,{id:"xpack.maps.validatedRange.rangeErrorMessage",defaultMessage:"Must be between {min} and {max}",values:{min:t,max:e}})))}}},function(e,t,r){e.exports=r(22)(3715)},function(e,t,r){"use strict";r.d(t,"a",(function(){return AbstractStyleProperty}));var i=r(2),n=r.n(i),o=r(107);class AbstractStyleProperty{constructor(e,t){n()(this,"_options",void 0),n()(this,"_styleName",void 0),this._options=e,this._styleName=t}isDynamic(){return!1}isComplete(){return!0}formatField(e){return null==e?"":"boolean"==typeof e?e.toString():Array.isArray(e)?e.join(", "):e}getStyleName(){return this._styleName}getOptions(){return this._options}renderLegendDetailRow({isPointsOnly:e,isLinesOnly:t}){return null}renderDataMappingPopover(e){return null}getDisplayStyleName(){return Object(o.b)(this.getStyleName())}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return f}));var i=r(40),n=r.n(i),o=r(242),a=r.n(o),l=r(243),c=r.n(l);const u=!0,h=!1;async function p({source:e,prevDataRequest:t,nextRequestMeta:r,extentAware:i,getUpdateDueToTimeslice:o}){if(r.isForceRefresh&&r.applyForceRefresh)return!1;const l=await e.isTimeAware(),p=e.isFieldAware(),d=e.isQueryAware();if(!(l||i||p||d))return!!t&&t.hasDataOrRequestInProgress();if(!t)return!1;const f=t.getMeta();if(!f)return!1;if(f.isFeatureEditorOpenForLayer!==r.isFeatureEditorOpenForLayer)return!1;let m=!1,g=!1,y=!1;l&&(m=f.applyGlobalTime!==r.applyGlobalTime,r.applyGlobalTime&&(g=!n.a.isEqual(f.timeFilters,r.timeFilters),n.a.isEqual(f.timeslice,r.timeslice)||(y=o(r.timeslice))));let v=!1;p&&(v=!n.a.isEqual(f.fieldNames,r.fieldNames));let _=!1,b=!1,x=!1,w=!1;d&&(w=f.applyGlobalQuery!==r.applyGlobalQuery,x=!n.a.isEqual(f.sourceQuery,r.sourceQuery),r.applyGlobalQuery&&(_=!n.a.isEqual(f.query,r.query),b=!n.a.isEqual(f.filters,r.filters)));let S=!1;(l||d)&&r.applyForceRefresh&&(S=f.searchSessionId!==r.searchSessionId);let C=!1;i&&(C=function(e={},t={}){const{buffer:r}=e,{buffer:i}=t;if(!r||!r||!i)return u;if(n.a.isEqual(r,i))return h;const o=a()([r.minLon,r.minLat,r.maxLon,r.maxLat]),l=a()([i.minLon,i.minLat,i.maxLon,i.maxLat]),p=c()(o,l),d=n.a.get(e,"areResultsTrimmed",!1);return p&&!d?h:u}(f,r));const M=!n.a.isEqual(f.sourceMeta,r.sourceMeta);return!(m||g||y||C||v||_||b||x||w||M||S)}function d({prevDataRequest:e,nextMeta:t}){if(!e)return!1;const r=e.getMeta();if(!r)return!1;const i=!n.a.isEqual(r.dynamicStyleFields,t.dynamicStyleFields),o=!n.a.isEqual(r.sourceQuery,t.sourceQuery),a=t.isTimeAware!==r.isTimeAware,l=!!t.isTimeAware&&!n.a.isEqual(r.timeFilters,t.timeFilters),c=r.searchSessionId!==t.searchSessionId;return!(i||o||a||l||c)}function f({prevDataRequest:e,nextMeta:t}){if(!e)return!1;const r=e.getMeta();return!!r&&n.a.isEqual(r.fieldNames,t.fieldNames)}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"COLOR_MODES_STANDARD",{enumerable:!0,get:function(){return c.COLOR_MODES_STANDARD}}),Object.defineProperty(t,"Computed",{enumerable:!0,get:function(){return l.Computed}}),Object.defineProperty(t,"EuiColorModeContext",{enumerable:!0,get:function(){return i.EuiColorModeContext}}),Object.defineProperty(t,"EuiModificationsContext",{enumerable:!0,get:function(){return i.EuiModificationsContext}}),Object.defineProperty(t,"EuiNestedThemeContext",{enumerable:!0,get:function(){return i.EuiNestedThemeContext}}),Object.defineProperty(t,"EuiSystemContext",{enumerable:!0,get:function(){return i.EuiSystemContext}}),Object.defineProperty(t,"EuiThemeContext",{enumerable:!0,get:function(){return i.EuiThemeContext}}),Object.defineProperty(t,"EuiThemeProvider",{enumerable:!0,get:function(){return o.EuiThemeProvider}}),Object.defineProperty(t,"RenderWithEuiTheme",{enumerable:!0,get:function(){return n.RenderWithEuiTheme}}),Object.defineProperty(t,"buildTheme",{enumerable:!0,get:function(){return l.buildTheme}}),Object.defineProperty(t,"computed",{enumerable:!0,get:function(){return l.computed}}),Object.defineProperty(t,"getColorMode",{enumerable:!0,get:function(){return l.getColorMode}}),Object.defineProperty(t,"getComputed",{enumerable:!0,get:function(){return l.getComputed}}),Object.defineProperty(t,"getEuiDevProviderWarning",{enumerable:!0,get:function(){return a.getEuiDevProviderWarning}}),Object.defineProperty(t,"getOn",{enumerable:!0,get:function(){return l.getOn}}),Object.defineProperty(t,"isInverseColorMode",{enumerable:!0,get:function(){return l.isInverseColorMode}}),Object.defineProperty(t,"mergeDeep",{enumerable:!0,get:function(){return l.mergeDeep}}),Object.defineProperty(t,"setEuiDevProviderWarning",{enumerable:!0,get:function(){return a.setEuiDevProviderWarning}}),Object.defineProperty(t,"setOn",{enumerable:!0,get:function(){return l.setOn}}),Object.defineProperty(t,"useEuiTheme",{enumerable:!0,get:function(){return n.useEuiTheme}}),Object.defineProperty(t,"useEuiThemeCSSVariables",{enumerable:!0,get:function(){return n.useEuiThemeCSSVariables}}),Object.defineProperty(t,"withEuiTheme",{enumerable:!0,get:function(){return n.withEuiTheme}});var i=r(212),n=r(165),o=r(489),a=r(287),l=r(97),c=r(274)},function(e,t,r){"use strict";r.d(t,"a",(function(){return ESDocField}));var i=r(2),n=r.n(i),o=r(24),a=r(298),l=r(109),c=r(150);class ESDocField extends c.a{constructor({fieldName:e,source:t,origin:r}){super({fieldName:e,origin:r}),n()(this,"_source",void 0),this._source=t}supportsFieldMetaFromEs(){return!0}supportsFieldMetaFromLocalData(){return!this.getSource().isMvt()}canValueBeFormatted(){return!0}getSource(){return this._source}async _getIndexPatternField(){const e=(await this._source.getIndexPattern()).fields.getByName(this.getName());return e&&o.indexPatterns.isNestedField(e)?void 0:e}async createTooltipProperty(e){const t=await this._source.getIndexPattern(),r=new l.a(this.getName(),await this.getLabel(),e);return new a.a(r,t,this,this._source.getApplyGlobalQuery())}async getDataType(){const e=await this._getIndexPatternField();return e?e.type:""}async getLabel(){const e=await this._getIndexPatternField();return e&&e.displayName?e.displayName:super.getLabel()}async getExtendedStatsFieldMetaRequest(){const e=await this._getIndexPatternField();if(!e||"number"!==e.type&&"date"!==e.type)return null;const t={};return e.scripted&&e.script?t.script={source:e.script,lang:e.lang}:t.field=this.getName(),{[`${this.getName()}_range`]:{extended_stats:t}}}async getPercentilesFieldMetaRequest(e){const t=await this._getIndexPatternField();if(!t||"number"!==t.type)return null;const r={percents:[0,...e]};return t.scripted&&t.script?r.script={source:t.script,lang:t.lang}:r.field=this.getName(),{[`${this.getName()}_percentiles`]:{percentiles:r}}}async getCategoricalFieldMetaRequest(e){const t=await this._getIndexPatternField();if(!t||e<=0)return null;const r={size:e};return t.scripted&&t.script?r.script={source:t.script,lang:t.lang}:r.field=this.getName(),{[`${this.getName()}_terms`]:{terms:r}}}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(1);const n={apply:i.i18n.translate("xpack.maps.panel.applyLabel",{defaultMessage:"Apply"}),clear:i.i18n.translate("xpack.maps.panel.clearLabel",{defaultMessage:"Clear"}),close:i.i18n.translate("xpack.maps.panel.closeLabel",{defaultMessage:"Close"}),discardChanges:i.i18n.translate("xpack.maps.panel.discardChangesLabel",{defaultMessage:"Discard changes"}),edit:i.i18n.translate("xpack.maps.panel.editLabel",{defaultMessage:"Edit"}),keepChanges:i.i18n.translate("xpack.maps.panel.keepChangesLabel",{defaultMessage:"Keep changes"})}},,,,function(e,t,r){"use strict";function i(e){return"getTermField"in e}function n(e){return void 0!==e.indexPatternId&&void 0!==e.geoField}r.d(t,"f",(function(){return i})),r.d(t,"e",(function(){return n})),r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return es_distance_source_ESDistanceSource})),r.d(t,"c",(function(){return es_term_source_ESTermSource})),r.d(t,"g",(function(){return b})),r.d(t,"d",(function(){return table_source_TableSource}));var o=r(2),a=r.n(o),l=r(1),c=r(0),u=r(93),h=r(112),p=r(119),d=r(120),f=r(79);const m=[c.k];function g(e,t){var r,i,n;const o=new Map,a=null!==(r=null==e||null===(i=e.aggregations)||void 0===i||null===(n=i.distance)||void 0===n?void 0:n.buckets)&&void 0!==r?r:{};for(const e in a)if(a.hasOwnProperty(e)){const r=a[e];if(0===r[c.k])continue;const i=Object(f.j)(r,m);i[t]=r[c.k],o.set(e,i)}return o}const y=e=>l.i18n.translate("xpack.maps.joinSource.joinMetricsRequestName",{defaultMessage:"load join metrics ({layerName})",values:{layerName:e}}),v=5;class es_distance_source_ESDistanceSource extends h.a{static createDescriptor(e){const t=h.a.createDescriptor(e);if(!Object(p.a)(e.geoField))throw new Error("Cannot create an ESDistanceSource without a geoField property");return{...t,geoField:e.geoField,distance:"number"==typeof e.distance?e.distance:v,type:c.Cb.ES_DISTANCE_SOURCE}}constructor(e){const t=es_distance_source_ESDistanceSource.createDescriptor(e);super(t),a()(this,"_descriptor",void 0),this._descriptor=t}hasCompleteConfig(){return n(this._descriptor)}getOriginForField(){return c.D.JOIN}getWhereQuery(){return this._descriptor.whereQuery}getAggKey(e,t){return Object(u.a)({aggType:e,aggFieldName:t,rightSourceId:this._descriptor.id})}async getJoinMetrics(e,t,r,i,n){if(void 0===n)throw new Error(l.i18n.translate("xpack.maps.esDistanceSource.noFeatureCollectionMsg",{defaultMessage:"Unable to perform distance join, features not provided. To enable distance join, select 'Limit results' in 'Scaling'"}));if(!this.hasCompleteConfig())return{joinMetrics:new Map,warnings:[]};const o=`${this._descriptor.distance}km`;let a=!1;const u={};for(let e=0;e<n.features.length;e++){var h;const t=n.features[e];"Point"===t.geometry.type&&null!=t&&null!==(h=t.properties)&&void 0!==h&&h._id&&(u[t.properties._id]={geo_distance:{distance:o,[this._descriptor.geoField]:t.geometry.coordinates}},a||(a=!0))}if(!a)return{joinMetrics:new Map,warnings:[]};const p=await this.getIndexPattern(),f=await this.makeSearchSource(e,0);f.setField("trackTotalHits",!1),f.setField("aggs",{distance:{filters:{filters:u},aggs:this.getValueAggsDsl(p)}});const m=[];return{joinMetrics:g(await this._runEsQuery({requestId:this.getId(),requestName:y(t),searchSource:f,registerCancelCallback:r,searchSessionId:e.searchSessionId,executionContext:Object(d.b)({description:"es_distance_source:distance_join_request"},e.executionContext),requestsAdapter:i.requests,onWarning:e=>{m.push(e)}}),this.getAggKey(c.b.COUNT)),warnings:m}}isFilterByMapBounds(){return!1}getSyncMeta(e){return{...super.getSyncMeta(e),distance:this._descriptor.distance,geoField:this._descriptor.geoField}}getRightFields(){return this.getMetricFields()}}a()(es_distance_source_ESDistanceSource,"type",c.Cb.ES_DISTANCE_SOURCE);var _=r(135);function b(e){return void 0!==e.indexPatternId&&void 0!==e.term}const x="join",w=["key","doc_count"];function S(e,t){var r,i,n;const o=new Map;return(null!==(r=null==e||null===(i=e.aggregations)||void 0===i||null===(n=i[x])||void 0===n?void 0:n.buckets)&&void 0!==r?r:[]).forEach((e=>{const r=Object(f.j)(e,w);t&&(r[t]=e.doc_count),o.set(e.key.toString(),r)})),o}class es_term_source_ESTermSource extends h.a{static createDescriptor(e){const t=h.a.createDescriptor(e);if(!Object(p.a)(e.term))throw new Error("Cannot create an ESTermSource without a term");return{...t,term:e.term,type:c.Cb.ES_TERM_SOURCE}}constructor(e){const t=es_term_source_ESTermSource.createDescriptor(e);super(t),a()(this,"_termField",void 0),a()(this,"_descriptor",void 0),this._descriptor=t,this._termField=new _.a({fieldName:this._descriptor.term,source:this,origin:this.getOriginForField()})}hasCompleteConfig(){return b(this._descriptor)}getTermField(){return this._termField}getOriginForField(){return c.D.JOIN}getWhereQuery(){return this._descriptor.whereQuery}getAggKey(e,t){return Object(u.a)({aggType:e,aggFieldName:t,rightSourceId:this._descriptor.id})}async getAggLabel(e,t){let r;try{r=(await this.getIndexPattern()).getName()}catch(e){r=this._descriptor.indexPatternId}return e===c.b.COUNT?l.i18n.translate("xpack.maps.source.esJoin.countLabel",{defaultMessage:"count of {indexPatternLabel}",values:{indexPatternLabel:r}}):super.getAggLabel(e,t)}async getJoinMetrics(e,t,r,i){if(!this.hasCompleteConfig())return{joinMetrics:new Map,warnings:[]};const n=await this.getIndexPattern(),o=await this.makeSearchSource(e,0);o.setField("trackTotalHits",!1);const a=Object(f.l)(n,this._termField.getName()),l={size:void 0!==this._descriptor.size?this._descriptor.size:c.s};o.setField("aggs",{[x]:{terms:Object(f.a)(l,a),aggs:{...this.getValueAggsDsl(n)}}});const u=[];return{joinMetrics:S(await this._runEsQuery({requestId:this.getId(),requestName:y(t),searchSource:o,registerCancelCallback:r,searchSessionId:e.searchSessionId,executionContext:Object(d.b)({description:"es_term_source:terms"},e.executionContext),requestsAdapter:i.requests,onWarning:e=>{u.push(e)}}),this.getAggKey(c.b.COUNT)),warnings:u}}isFilterByMapBounds(){return!1}async getDisplayName(){return`es_table ${this.getIndexPatternId()}`}getSyncMeta(e){return{...super.getSyncMeta(e),indexPatternId:this._descriptor.indexPatternId,size:this._descriptor.size,term:this._descriptor.term}}getRightFields(){return this.getMetricFields()}}a()(es_term_source_ESTermSource,"type",c.Cb.ES_TERM_SOURCE);var C=r(43),M=r(104),E=r(217),T=r(109);class table_source_TableSource extends M.a{static createDescriptor(e){return{type:c.Cb.TABLE_SOURCE,__rows:e.__rows||[],__columns:e.__columns||[],term:e.term||"",id:e.id||Object(C.v4)()}}constructor(e){const t=table_source_TableSource.createDescriptor(e);super(t),a()(this,"_descriptor",void 0),this._descriptor=t}async getDisplayName(){return`table source ${Object(C.v4)()}`}async getJoinMetrics(e,t,r){const i=new Map,n=this._descriptor.__columns.map((e=>e.name));for(let e=0;e<this._descriptor.__rows.length;e++){const t=this._descriptor.__rows[e];let r;const o={};for(const e in t)t.hasOwnProperty(e)&&(e===this._descriptor.term&&t[e]&&(r=t[e]),n.indexOf(e)>=0&&e!==this._descriptor.term&&(o[e]=t[e]));r&&!i.has(r.toString())&&i.set(r.toString(),o)}return{joinMetrics:i,warnings:[]}}getTermField(){const e=this._descriptor.__columns.find((e=>e.name===this._descriptor.term));if(!e)throw new Error(`Cannot find column for ${this._descriptor.term} in ${JSON.stringify(this._descriptor.__columns)}`);return new E.a({fieldName:e.name,label:e.label,source:this,origin:c.D.JOIN,dataType:e.type})}getWhereQuery(){}hasCompleteConfig(){return!0}getId(){return this._descriptor.id}getRightFields(){return this._descriptor.__columns.map((e=>new E.a({fieldName:e.name,label:e.label,source:this,origin:c.D.JOIN,dataType:e.type})))}hasTooltipProperties(){return!1}async getBoundsForFilters(e,t){return null}getFieldByName(e){const t=this._descriptor.__columns.find((t=>t.name===e));return t?new E.a({fieldName:t.name,label:t.label,source:this,origin:c.D.JOIN,dataType:t.type}):null}getFields(){throw new Error("must implement")}async getGeoJsonWithMeta(e,t,r,i){throw new Error("TableSource cannot return GeoJson")}async getLeftJoinFields(){throw new Error("TableSource cannot be used as a left-layer in a term join")}getSourceStatus(e){throw new Error("must add tooltip content")}async getSupportedShapeTypes(){return[]}isBoundsAware(){return!1}async getTooltipProperties(e){const t=[];for(const r in e)if(e.hasOwnProperty(r)){const i=this.getFieldByName(r);i&&t.push(new T.a(r,await i.getLabel(),e[r]))}return t}}a()(table_source_TableSource,"type",c.Cb.TABLE_SOURCE)},,,function(e,t,r){"use strict";e.exports=r(177)},function(e,t,r){"use strict";e.exports=r(184)},function(e,t,r){e.exports=r(22)(2967)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return MbValidatedColorPicker}));var i=r(2),n=r.n(i),o=r(4),a=r(15),l=r(3);const c="rgba(0,0,0,0)";class MbValidatedColorPicker extends o.Component{constructor(...e){super(...e),n()(this,"state",{colorInputValue:this.props.color===c?"":this.props.color}),n()(this,"_onColorChange",(e=>{this.setState({colorInputValue:e}),this.props.onChange(Object(a.isValidHex)(e)?e:c)}))}render(){return Object(l.jsx)(a.EuiColorPicker,{onChange:this._onColorChange,color:this.state.colorInputValue,swatches:this.props.swatches,append:this.props.append,prepend:this.props.prepend,compressed:!0})}}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,r(145).Buffer)},function(e,t,r){"use strict";r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return b}));var i=r(40),n=r.n(i),o=r(0),a=r(79);const l=0,c=1,u=2;function h(e){return Math.pow(2,e)}function p(e,t){const r=h(Math.floor(e)),i=_(t.minLon,r),n=_(t.maxLon,r),o=v(t.maxLat,r),a=v(t.minLat,r),l=[];for(let t=0;t<r&&i+t<=n;t++){const n=i+t;for(let t=0;t<r&&o+t<=a;t++){const i=o+t;l.push({x:n<0?r-Math.abs(n):n,y:i<0?r-Math.abs(i):i,z:Math.floor(e)})}}return l}function d(e,t,r){const i=h(r);return`${r}/${_(t,i)}/${v(e,i)}`}function f(e,t,r){let i=Math.ceil(Math.abs(Math.log10(r)))+1;return i=Math.max(i,t),n.a.round(e,i)}function m(e,t){const r=Math.atan((i=Math.PI-2*Math.PI*e/t,(Math.exp(i)-Math.exp(-i))/2));var i;return f(180/Math.PI*r,o.o,180/t)}function g(e,t){return f(e/t*360-180,o.o,360/t)}function y(e){const{x:t,y:r,tileCount:i}=function(e){const t=e.split("/");if(3!==t.length)throw new Error(`Invalid tile key, expecting "zoom/x/y" format but got ${e}`);const r=parseInt(t[l],10),i=parseInt(t[c],10),n=parseInt(t[u],10),o=h(r);if(i>=o)throw new Error(`Tile key is malformed, expected x to be less than ${o}, you provided ${i}`);if(n>=o)throw new Error(`Tile key is malformed, expected y to be less than ${o}, you provided ${n}`);return{x:i,y:n,zoom:r,tileCount:o}}(e);return{top:m(r,i),bottom:m(r+1,i),left:g(t,i),right:g(t+1,i)}}function v(e,t){const r=Object(a.e)(e)*Math.PI/180,i=(1-Math.log(Math.tan(r)+(n=r,1/Math.cos(n)))/Math.PI)/2*t;var n;return Math.floor(i)}function _(e,t){const r=(e+180)/360*t;return Math.floor(r)}function b(e,t){const r=h(t),i=_(e.minLon,r),n=v(Math.min(e.maxLat,90),r),o=_(e.maxLon,r),a=v(Math.max(e.minLat,-90),r);return{minLon:g(i,r),minLat:m(a+1,r),maxLon:g(o+1,r),maxLat:m(n,r)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return AbstractField}));var i=r(2),n=r.n(i),o=r(0),a=r(109);class AbstractField{constructor({fieldName:e,origin:t}){n()(this,"_fieldName",void 0),n()(this,"_origin",void 0),this._fieldName=e,this._origin=t||o.D.SOURCE}supportsFieldMetaFromEs(){throw new Error("must implement AbstractField#supportsFieldMetaFromEs")}supportsFieldMetaFromLocalData(){throw new Error("must implement AbstractField#supportsFieldMetaFromLocalData")}getName(){return this._fieldName}getMbFieldName(){return this.getName()}getRootName(){return this.getName()}canValueBeFormatted(){return!1}getSource(){throw new Error("must implement AbstractField#getSource")}isValid(){return!!this._fieldName}async getDataType(){return"string"}async getLabel(){return this._fieldName}async createTooltipProperty(e){const t=await this.getLabel();return new a.a(this.getName(),t,e)}getOrigin(){return this._origin}async getExtendedStatsFieldMetaRequest(){return null}async getPercentilesFieldMetaRequest(e){return null}async getCategoricalFieldMetaRequest(e){return null}isEqual(e){return this._origin===e.getOrigin()&&this._fieldName===e.getName()}pluckRangeFromTileMetaFeature(e){return null}isCount(){return!1}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(1);const n={fieldSelectPlaceholder:i.i18n.translate("xpack.maps.input.fieldSelectPlaceholder",{defaultMessage:"Select field"}),relationshipLabel:i.i18n.translate("xpack.maps.input.relationshipLabel",{defaultMessage:"Relationship"})}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var i=r(23),n=r.n(i),o=(r(4),r(44)),a=r.n(o),l=r(15),c=r(3);const u={iconType:"questionInCircle",color:"gray"},h={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function p({type:e,label:t,size:r="s",scripted:i,className:o,...p}){const d=h[e]||u;return Object(c.jsx)(l.EuiToken,n()({},d,{className:a()("kbnFieldIcon",o),"aria-label":t||e,title:t||e,size:r,fill:i?"dark":void 0},p))}r(375);Object.keys({xs:"kbnFieldButton--xs",s:"kbnFieldButton--s"})},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(52),n=r(143),o=r(144);function a(e){return e&&e.__esModule?e:{default:e}}var l=a(i);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function u(e,t,r){var i=[],n=o.getRegisteredStyles(e,i,r);return i.length<2?r:n+t(i)}var h=function e(t){for(var r="",i=0;i<t.length;i++){var n=t[i];if(null!=n){var o=void 0;switch(typeof n){case"boolean":break;case"object":if(Array.isArray(n))o=e(n);else for(var a in o="",n)n[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=n}o&&(r&&(r+=" "),r+=o)}}return r};t.default=function(e){var t=l.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var r=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=n.serializeStyles(r,t.registered,void 0);return o.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:r,cx:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return u(t.registered,r,h(i))},injectGlobal:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=n.serializeStyles(r,t.registered);c(t,o)},keyframes:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=n.serializeStyles(r,t.registered),a="animation-"+o.name;return c(t,{name:o.name,styles:"@keyframes "+a+"{"+o.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.getRegisteredStyles.bind(null,t.registered),merge:u.bind(null,t.registered,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(126);t.default=function(e){var t=[1/0,1/0,-1/0,-1/0];return i.coordEach(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return SymbolIcon}));var i=r(23),n=r.n(i),o=r(2),a=r.n(o),l=r(4),c=r(96),u=r(3);class SymbolIcon extends l.Component{constructor(...e){super(...e),a()(this,"_isMounted",!1),a()(this,"state",{imgDataUrl:null})}componentDidMount(){this._isMounted=!0,this._loadSymbol()}componentWillUnmount(){this._isMounted=!1}async _loadSymbol(){let e;try{const t=await Object(c.k)(this.props.svg,this.props.fill,this.props.stroke);e=Object(c.d)(t)}catch(e){return}this._isMounted&&this.setState({imgDataUrl:e})}render(){if(!this.state.imgDataUrl)return null;const{symbolId:e,fill:t,stroke:r,...i}=this.props;return Object(u.jsx)("img",n()({width:"16px",height:"18px",src:this.state.imgDataUrl,alt:this.props.symbolId},i))}}},function(e,t,r){(function(){var t,i={}.hasOwnProperty;t=r(91),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},function(e,t){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,i,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,l=arguments.length;switch(l){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,i)}));case 4:return t.nextTick((function(){e.call(null,r,i,n)}));default:for(o=new Array(l-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,r(106))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(0);function n(e){var t;return(null==e||null===(t=e.right)||void 0===t?void 0:t.type)===i.Cb.ES_DISTANCE_SOURCE}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={isColorDark:!0,isValidHex:!0,hexToHsv:!0,hexToRgb:!0,hsvToHex:!0,hsvToRgb:!0,rgbToHex:!0,rgbToHsv:!0,calculateContrast:!0,calculateLuminance:!0,VISUALIZATION_COLORS:!0,DEFAULT_VISUALIZATION_COLOR:!0,colorPalette:!0,euiPaletteForLightBackground:!0,euiPaletteForDarkBackground:!0,euiPaletteColorBlind:!0,euiPaletteColorBlindBehindText:!0,euiPaletteForStatus:!0,euiPaletteForTemperature:!0,euiPaletteComplimentary:!0,euiPaletteComplementary:!0,euiPaletteNegative:!0,euiPalettePositive:!0,euiPaletteCool:!0,euiPaletteWarm:!0,euiPaletteGray:!0,getSteppedGradient:!0};Object.defineProperty(t,"DEFAULT_VISUALIZATION_COLOR",{enumerable:!0,get:function(){return f.DEFAULT_VISUALIZATION_COLOR}}),Object.defineProperty(t,"VISUALIZATION_COLORS",{enumerable:!0,get:function(){return f.VISUALIZATION_COLORS}}),Object.defineProperty(t,"calculateContrast",{enumerable:!0,get:function(){return d.calculateContrast}}),Object.defineProperty(t,"calculateLuminance",{enumerable:!0,get:function(){return d.calculateLuminance}}),Object.defineProperty(t,"colorPalette",{enumerable:!0,get:function(){return m.colorPalette}}),Object.defineProperty(t,"euiPaletteColorBlind",{enumerable:!0,get:function(){return g.euiPaletteColorBlind}}),Object.defineProperty(t,"euiPaletteColorBlindBehindText",{enumerable:!0,get:function(){return g.euiPaletteColorBlindBehindText}}),Object.defineProperty(t,"euiPaletteComplementary",{enumerable:!0,get:function(){return g.euiPaletteComplementary}}),Object.defineProperty(t,"euiPaletteComplimentary",{enumerable:!0,get:function(){return g.euiPaletteComplimentary}}),Object.defineProperty(t,"euiPaletteCool",{enumerable:!0,get:function(){return g.euiPaletteCool}}),Object.defineProperty(t,"euiPaletteForDarkBackground",{enumerable:!0,get:function(){return g.euiPaletteForDarkBackground}}),Object.defineProperty(t,"euiPaletteForLightBackground",{enumerable:!0,get:function(){return g.euiPaletteForLightBackground}}),Object.defineProperty(t,"euiPaletteForStatus",{enumerable:!0,get:function(){return g.euiPaletteForStatus}}),Object.defineProperty(t,"euiPaletteForTemperature",{enumerable:!0,get:function(){return g.euiPaletteForTemperature}}),Object.defineProperty(t,"euiPaletteGray",{enumerable:!0,get:function(){return g.euiPaletteGray}}),Object.defineProperty(t,"euiPaletteNegative",{enumerable:!0,get:function(){return g.euiPaletteNegative}}),Object.defineProperty(t,"euiPalettePositive",{enumerable:!0,get:function(){return g.euiPalettePositive}}),Object.defineProperty(t,"euiPaletteWarm",{enumerable:!0,get:function(){return g.euiPaletteWarm}}),Object.defineProperty(t,"getSteppedGradient",{enumerable:!0,get:function(){return y.getSteppedGradient}}),Object.defineProperty(t,"hexToHsv",{enumerable:!0,get:function(){return a.hexToHsv}}),Object.defineProperty(t,"hexToRgb",{enumerable:!0,get:function(){return l.hexToRgb}}),Object.defineProperty(t,"hsvToHex",{enumerable:!0,get:function(){return c.hsvToHex}}),Object.defineProperty(t,"hsvToRgb",{enumerable:!0,get:function(){return u.hsvToRgb}}),Object.defineProperty(t,"isColorDark",{enumerable:!0,get:function(){return n.isColorDark}}),Object.defineProperty(t,"isValidHex",{enumerable:!0,get:function(){return o.isValidHex}}),Object.defineProperty(t,"rgbToHex",{enumerable:!0,get:function(){return h.rgbToHex}}),Object.defineProperty(t,"rgbToHsv",{enumerable:!0,get:function(){return p.rgbToHsv}});var n=r(474),o=r(275),a=r(475),l=r(276),c=r(476),u=r(278),h=r(279),p=r(277),d=r(477),f=r(478),m=r(281),g=r(280),y=r(479),v=r(213);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var _=r(282);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))}))},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withEuiTheme=t.useEuiThemeCSSVariables=t.useEuiTheme=t.RenderWithEuiTheme=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4)),o=r(212),a=r(287),l=r(3);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u.apply(this,arguments)}var h=function(){var e=(0,n.useContext)(o.EuiThemeContext),t=(0,n.useContext)(o.EuiColorModeContext),r=(0,n.useContext)(o.EuiModificationsContext);return e===o.defaultComputedTheme&&(0,a.emitEuiProviderWarning)("`EuiProvider` is missing which can result in negative effects.\nWrap your component in `EuiProvider`: https://ela.st/euiprovider."),(0,n.useMemo)((function(){return{euiTheme:e,colorMode:t,modifications:r}}),[e,t,r])};t.useEuiTheme=h,t.withEuiTheme=function(e){var t=e.displayName||e.name||"ComponentWithTheme",r=function(t,r){var i=h();return(0,l.jsx)(e,u({theme:i,ref:r},t))},i=(0,n.forwardRef)(r);return i.displayName=t,i},t.RenderWithEuiTheme=function(e){return(0,e.children)(h())},t.useEuiThemeCSSVariables=function(){var e=(0,n.useContext)(o.EuiNestedThemeContext);return{setGlobalCSSVariables:e.setGlobalCSSVariables,globalCSSVariables:e.globalCSSVariables,setNearestThemeCSSVariables:e.setNearestThemeCSSVariables,themeCSSVariables:e.themeCSSVariables}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(0);function n(e){return[i.b.COUNT,i.b.SUM,i.b.UNIQUE_COUNT].includes(e)}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return metrics_editor_MetricsEditor}));var i=r(2),n=r.n(i),o=r(4),a=r.n(o),l=r(41),c=r(15),u=r(1),h=r(23),p=r.n(h),d=r(0),f=r(112),m=r(3);const g=[{label:Object(f.c)(d.b.AVG),value:d.b.AVG},{label:Object(f.c)(d.b.COUNT),value:d.b.COUNT},{label:Object(f.c)(d.b.MAX),value:d.b.MAX},{label:Object(f.c)(d.b.MIN),value:d.b.MIN},{label:Object(f.c)(d.b.PERCENTILE),value:d.b.PERCENTILE},{label:Object(f.c)(d.b.SUM),value:d.b.SUM},{label:Object(f.c)(d.b.TERMS),value:d.b.TERMS},{label:Object(f.c)(d.b.UNIQUE_COUNT),value:d.b.UNIQUE_COUNT}];function y({value:e,onChange:t,metricsFilter:r,...i}){const n=r?g.filter(r):g;return Object(m.jsx)(c.EuiComboBox,p()({placeholder:u.i18n.translate("xpack.maps.metricSelect.selectAggregationPlaceholder",{defaultMessage:"Select aggregation"}),singleSelection:!0,isClearable:!1,options:n,selectedOptions:g.filter((t=>e===t.value)),onChange:function(e){if(0===e.length)return;const r=e[0].value;t(r)}},i))}var v=r(94),_=r(85),b=r(300),x=r(108),w=r(136);const S=[{value:d.gb.BELOW,text:x.b},{value:d.gb.ABOVE,text:x.a}];class mask_editor_MaskEditor extends o.Component{constructor(e){super(e),n()(this,"_onSet",(()=>{this._isValueInValid()||(this.props.onChange({...this.props.metric,mask:{operator:this.state.operator,value:this.state.value}}),this.props.onClose())})),n()(this,"_onClear",(()=>{const e={...this.props.metric};delete e.mask,this.props.onChange(e),this.props.onClose()})),n()(this,"_onOperatorChange",(e=>{this.setState({operator:e.target.value})})),n()(this,"_onValueChange",(e=>{const t=parseFloat(e.target.value);this.setState({value:isNaN(t)?e.target.value:t})})),this.state={operator:void 0!==this.props.metric.mask?this.props.metric.mask.operator:d.gb.BELOW,value:void 0!==this.props.metric.mask?this.props.metric.mask.value:""}}_hasChanges(){return void 0===this.props.metric.mask||this.props.metric.mask.operator!==this.state.operator||this.props.metric.mask.value!==this.state.value}_isValueInValid(){return"string"==typeof this.state.value}_renderForm(){return Object(m.jsx)(c.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(c.EuiFlexItem,null,Object(m.jsx)(c.EuiFormRow,null,Object(m.jsx)(c.EuiSelect,{id:"maskOperatorSelect",options:S,value:this.state.operator,onChange:this._onOperatorChange,"aria-label":u.i18n.translate("xpack.maps.maskEditor.operatorSelectLabel",{defaultMessage:"Mask operator select"})}))),Object(m.jsx)(c.EuiFlexItem,null,Object(m.jsx)(c.EuiFormRow,null,Object(m.jsx)(c.EuiFieldNumber,{value:this.state.value,onChange:this._onValueChange,"aria-label":u.i18n.translate("xpack.maps.maskEditor.valueInputLabel",{defaultMessage:"Mask value input"})}))))}_renderFooter(){return Object(m.jsx)(c.EuiPopoverFooter,{paddingSize:"s"},Object(m.jsx)(c.EuiFlexGroup,null,Object(m.jsx)(c.EuiFlexItem,null,Object(m.jsx)(c.EuiButtonEmpty,{onClick:this.props.onClose,size:"s"},w.a.close)),Object(m.jsx)(c.EuiFlexItem,null,Object(m.jsx)(c.EuiButtonEmpty,{color:"danger",isDisabled:void 0===this.props.metric.mask,onClick:this._onClear,size:"s"},w.a.clear)),Object(m.jsx)(c.EuiFlexItem,null,Object(m.jsx)(c.EuiButton,{fill:!0,isDisabled:this._isValueInValid()||!this._hasChanges(),onClick:this._onSet,size:"s"},w.a.apply))))}render(){return Object(m.jsx)(a.a.Fragment,null,this._renderForm(),Object(m.jsx)(c.EuiSpacer,{size:"xs"}),this._renderFooter())}}class mask_expression_MaskExpression extends o.Component{constructor(...e){super(...e),n()(this,"state",{isPopoverOpen:!1}),n()(this,"_togglePopover",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),n()(this,"_closePopover",(()=>{this.setState({isPopoverOpen:!1})}))}_getMaskExpressionValue(){return void 0===this.props.metric.mask?"...":Object(x.g)(this.props.metric.mask.operator,this.props.metric.mask.value)}_getAggLabel(){const e=Object(f.c)(this.props.metric.type);if(this.props.metric.type===d.b.COUNT||void 0===this.props.metric.field)return e;const t=this.props.fields.find((e=>e.name===this.props.metric.field));return`${e} ${null!=t&&t.displayName?null==t?void 0:t.displayName:this.props.metric.field}`}render(){return this.props.metric.type===d.b.TERMS?null:Object(m.jsx)(c.EuiPopover,{id:"mask",button:Object(m.jsx)(c.EuiExpression,{color:"subdued",description:Object(x.e)({aggLabel:this._getAggLabel(),isJoin:this.props.isJoin}),value:this._getMaskExpressionValue(),onClick:this._togglePopover,uppercase:!1}),isOpen:this.state.isPopoverOpen,closePopover:this._closePopover,panelPaddingSize:"s",anchorPosition:"downCenter",repositionOnScroll:!0},Object(m.jsx)(mask_editor_MaskEditor,{metric:this.props.metric,onChange:this.props.onChange,onClose:this._closePopover}))}}var C=r(151);function M(e,t){if(!e)return[];if(t===d.b.UNIQUE_COUNT||t===d.b.TERMS)return Object(_.i)(e);const r=["number"];return t!==d.b.SUM&&r.push("date"),e.filter((e=>e.aggregatable&&r.includes(e.type)&&("counter"!==e.timeSeriesMetric||["min","max"].includes(t))))}function E({bucketsName:e,fields:t,isJoin:r,metricsFilter:i,metric:n,onChange:a,showRemoveButton:h,onRemove:p}){const f=e=>{e&&n.type!==d.b.COUNT&&a({label:n.label,type:n.type,field:e})},g=e=>{n.type===d.b.PERCENTILE&&a({...n,percentile:e})};let _,w,S,E;if(n.type&&n.type!==d.b.COUNT){const e=void 0===n.field;_=Object(m.jsx)(c.EuiFormRow,{label:u.i18n.translate("xpack.maps.metricsEditor.selectFieldLabel",{defaultMessage:"Field"}),display:"columnCompressed",isInvalid:e,error:u.i18n.translate("xpack.maps.metricsEditor.selectFieldError",{defaultMessage:"Field required for aggregation"})},Object(m.jsx)(v.a,{placeholder:C.a.fieldSelectPlaceholder,value:n.field?n.field:null,onChange:f,fields:M(t,n.type),isClearable:!1,isInvalid:e,compressed:!0}))}if(n.type===d.b.PERCENTILE){const e=u.i18n.translate("xpack.maps.metricsEditor.selectPercentileLabel",{defaultMessage:"Percentile"});w=Object(m.jsx)(b.a,{min:0,max:100,onChange:g,label:e,initialValue:"number"==typeof n.percentile?n.percentile:d.v,display:"columnCompressed"})}return n.type&&(S=Object(m.jsx)(c.EuiFormRow,{label:u.i18n.translate("xpack.maps.metricsEditor.customLabel",{defaultMessage:"Custom label"}),display:"columnCompressed"},Object(m.jsx)(c.EuiFieldText,{onChange:e=>{a({...n,label:e.target.value})},value:n.label?n.label:"",compressed:!0}))),h&&(E=Object(m.jsx)("div",{className:"mapMetricEditorPanel__metricRemoveButton"},Object(m.jsx)(c.EuiButtonEmpty,{iconType:"trash",size:"xs",color:"danger",onClick:p,"aria-label":u.i18n.translate("xpack.maps.metricsEditor.deleteMetricAriaLabel",{defaultMessage:"Delete metric"})},Object(m.jsx)(l.FormattedMessage,{id:"xpack.maps.metricsEditor.deleteMetricButtonLabel",defaultMessage:"Delete metric"})))),Object(m.jsx)(o.Fragment,null,Object(m.jsx)(c.EuiFormRow,{label:u.i18n.translate("xpack.maps.metricsEditor.aggregationLabel",{defaultMessage:"Aggregation"}),display:"columnCompressed"},Object(m.jsx)(y,{onChange:e=>{if(!e)return;const r={type:e,label:n.label};if(e===d.b.COUNT||!("field"in n)||!n.field)return void a(r);const i=M(t,e).find((e=>e.name===n.field)),o={...r,field:i?n.field:void 0};e===d.b.PERCENTILE?a({...o,percentile:"percentile"in n?n.percentile:d.v}):a(o)},value:n.type,metricsFilter:i,compressed:!0})),_,w,S,Object(m.jsx)(c.EuiFormRow,{label:Object(x.f)({bucketsName:e,isJoin:r}),display:"columnCompressed"},Object(m.jsx)(mask_expression_MaskExpression,{fields:t,isJoin:r,metric:n,onChange:a})),E)}class metrics_editor_MetricsEditor extends o.Component{constructor(e){super(e),n()(this,"_addMetric",(()=>{this.setState({metrics:[...this.state.metrics,{type:d.b.COUNT}]},this._onSubmit)})),this.state={metrics:0===this.props.metrics.length?[f.b]:this.props.metrics}}_onSubmit(){this.state.metrics.some((e=>{return!((t=e).type===d.b.COUNT||void 0!==t.field);var t}))||this.props.onChange(this.state.metrics)}_renderMetrics(){return this.state.metrics.map(((e,t)=>Object(m.jsx)("div",{key:t,className:"mapMetricEditorPanel__metricEditor"},Object(m.jsx)(E,{bucketsName:this.props.bucketsName,isJoin:this.props.isJoin,onChange:e=>{this.setState({metrics:[...this.state.metrics.slice(0,t),e,...this.state.metrics.slice(t+1)]},this._onSubmit)},metric:e,fields:this.props.fields,metricsFilter:this.props.metricsFilter,showRemoveButton:t>0,onRemove:()=>{this.setState({metrics:[...this.state.metrics.slice(0,t),...this.state.metrics.slice(t+1)]},this._onSubmit)}}))))}_renderAddMetricButton(){return this.props.allowMultipleMetrics?Object(m.jsx)(o.Fragment,null,Object(m.jsx)(c.EuiSpacer,{size:"xs"}),Object(m.jsx)(c.EuiTextAlign,{textAlign:"center"},Object(m.jsx)(c.EuiButtonEmpty,{onClick:this._addMetric,size:"xs",iconType:"plusInCircleFilled"},Object(m.jsx)(l.FormattedMessage,{id:"xpack.maps.metricsEditor.addMetricButtonLabel",defaultMessage:"Add metric"})))):null}render(){return Object(m.jsx)(o.Fragment,null,Object(m.jsx)("div",{className:"mapMapLayerPanel__metrics"},this._renderMetrics()),this._renderAddMetricButton())}}},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(178),n=r(180),o=r(182);function a(e){return e&&e.__esModule?e:{default:e}}var l=a(i),c=a(n),u=/[A-Z]|^ms/g,h=/_EMO_([^_]+?)_([^]*?)_EMO_/g,p=function(e){return 45===e.charCodeAt(1)},d=function(e){return null!=e&&"boolean"!=typeof e},f=a(o).default((function(e){return p(e)?e:e.replace(u,"-$&").toLowerCase()})),m=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(h,(function(e,t,r){return y={name:t,styles:r,next:y},t}))}return 1===c.default[e]||p(e)||"number"!=typeof t||0===t?t:t+"px"};function g(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return y={name:r.name,styles:r.styles,next:y},r.name;if(void 0!==r.styles){var i=r.next;if(void 0!==i)for(;void 0!==i;)y={name:i.name,styles:i.styles,next:y},i=i.next;return r.styles+";"}return function(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=g(e,t,r[n])+";";else for(var o in r){var a=r[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?i+=o+"{"+t[a]+"}":d(a)&&(i+=f(o)+":"+m(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=g(e,t,a);switch(o){case"animation":case"animationName":i+=f(o)+":"+l+";";break;default:i+=o+"{"+l+"}"}}else for(var c=0;c<a.length;c++)d(a[c])&&(i+=f(o)+":"+m(o,a[c])+";")}return i}(e,t,r);case"function":if(void 0!==e){var n=y,o=r(e);return y=n,g(e,t,o)}}if(null==t)return r;var a=t[r];return void 0!==a?a:r}var y,v=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,n="";y=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,n+=g(r,t,o)):n+=o[0];for(var a=1;a<e.length;a++)n+=g(r,t,e[a]),i&&(n+=o[a]);v.lastIndex=0;for(var c,u="";null!==(c=v.exec(n));)u+="-"+c[1];return{name:l.default(n)+u,styles:n,next:y}}},function(e,t,r){"use strict";e.exports=r(179)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,r=0,i=0,n=e.length;n>=4;++i,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}},function(e,t,r){"use strict";e.exports=r(181)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";e.exports=r(183)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof document,n=function(e,t,r){var n=e.key+"-"+t.name;(!1===r||!1===i&&void 0!==e.compat)&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};t.getRegisteredStyles=function(e,t,r){var i="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):i+=r+" "})),i},t.insertStyles=function(e,t,r){n(e,t,r);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",l=t;do{var c=e.insert(t===l?"."+o:"",l,e.sheet,!0);i||void 0===c||(a+=c),l=l.next}while(void 0!==l);if(!i&&0!==a.length)return a}},t.registerStyles=n},,,function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},function(e,t,r){(function(){var t,i,n,o,a,l,c,u,h={}.hasOwnProperty;u=r(102),c=u.isObject,l=u.isFunction,a=u.getValue,o=r(91),t=r(82),i=r(251),n=r(189),e.exports=function(e){function r(e,i,n){var o,a,l,c;if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(i),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(a=0,l=(c=e.children).length;a<l;a++)if((o=c[a]).type===t.DocType){o.name=this.name;break}}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),r.prototype.clone=function(){var e,t,r,i;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},i=this.attribs)h.call(i,t)&&(e=i[t],r.attribs[t]=e.clone());return r.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)})),r},r.prototype.attribute=function(e,t){var r,n;if(null!=e&&(e=a(e)),c(e))for(r in e)h.call(e,r)&&(n=e[r],this.attribute(r,n));else l(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new i(this,e,""):null!=t&&(this.attribs[e]=new i(this,e,t));return this},r.prototype.removeAttribute=function(e){var t,r,i;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=a(e),Array.isArray(e))for(r=0,i=e.length;r<i;r++)t=e[r],delete this.attribs[t];else delete this.attribs[e];return this},r.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},r.prototype.att=function(e,t){return this.attribute(e,t)},r.prototype.a=function(e,t){return this.attribute(e,t)},r.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},r.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},r.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNS=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},r.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},r.prototype.setIdAttributeNS=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(e){var t,i,n;if(!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=i=0,n=this.attribs.length-1;0<=n?i<=n:i>=n;t=0<=n?++i:--i)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},r}(o)}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;t=r(82),i=r(160),e.exports=function(e){function r(e,i){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(i)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;t=r(82),i=r(160),e.exports=function(e){function r(e,i){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(i)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n,o={}.hasOwnProperty;n=r(102).isObject,i=r(91),t=r(82),e.exports=function(e){function r(e,i,o,a){var l;r.__super__.constructor.call(this,e),n(i)&&(i=(l=i).version,o=l.encoding,a=l.standalone),i||(i="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(i),null!=o&&(this.encoding=this.stringify.xmlEncoding(o)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n,o,a,l,c,u,h={}.hasOwnProperty;u=r(102).isObject,c=r(91),t=r(82),i=r(194),o=r(195),n=r(196),a=r(197),l=r(189),e.exports=function(e){function r(e,i,n){var o,a,l,c,h,p;if(r.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(a=0,l=(c=e.children).length;a<l;a++)if((o=c[a]).type===t.Element){this.name=o.name;break}this.documentObject=e,u(i)&&(i=(h=i).pubID,n=h.sysID),null==n&&(n=(p=[i,n])[0],i=p[1]),null!=i&&(this.pubID=this.stringify.dtdPubID(i)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"entities",{get:function(){var e,r,i,n,o;for(n={},r=0,i=(o=this.children).length;r<i;r++)(e=o[r]).type!==t.EntityDeclaration||e.pe||(n[e.name]=e);return new l(n)}}),Object.defineProperty(r.prototype,"notations",{get:function(){var e,r,i,n,o;for(n={},r=0,i=(o=this.children).length;r<i;r++)(e=o[r]).type===t.NotationDeclaration&&(n[e.name]=e);return new l(n)}}),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),r.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},r.prototype.attList=function(e,t,r,n,o){var a;return a=new i(this,e,t,r,n,o),this.children.push(a),this},r.prototype.entity=function(e,t){var r;return r=new o(this,!1,e,t),this.children.push(r),this},r.prototype.pEntity=function(e,t){var r;return r=new o(this,!0,e,t),this.children.push(r),this},r.prototype.notation=function(e,t){var r;return r=new a(this,e,t),this.children.push(r),this},r.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},r.prototype.ele=function(e,t){return this.element(e,t)},r.prototype.att=function(e,t,r,i,n){return this.attList(e,t,r,i,n)},r.prototype.ent=function(e,t){return this.entity(e,t)},r.prototype.pent=function(e,t){return this.pEntity(e,t)},r.prototype.not=function(e,t){return this.notation(e,t)},r.prototype.up=function(){return this.root()||this.documentObject},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},r}(c)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;i=r(91),t=r(82),e.exports=function(e){function r(e,i,n,o,a,l){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(l&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(o),l&&(this.defaultValue=this.stringify.dtdAttDefault(l)),this.defaultValueType=a}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n,o={}.hasOwnProperty;n=r(102).isObject,i=r(91),t=r(82),e.exports=function(e){function r(e,i,o,a){if(r.__super__.constructor.call(this,e),null==o)throw new Error("Missing DTD entity name. "+this.debugInfo(o));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(o));if(this.pe=!!i,this.name=this.stringify.name(o),this.type=t.EntityDeclaration,n(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(o));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(o));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(o))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;i=r(91),t=r(82),e.exports=function(e){function r(e,i,n){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(i),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;i=r(91),t=r(82),e.exports=function(e){function r(e,i,n){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),r.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;t=r(82),i=r(91),e.exports=function(e){function r(e,i){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(i)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;t=r(82),i=r(160),e.exports=function(e){function r(e,i){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(i)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},r.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(i)}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;t=r(82),i=r(160),e.exports=function(e){function r(e,i,n){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},r}(i)}).call(this)},function(e,t,r){(function(){var t,i={}.hasOwnProperty;t=r(254),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var r,i,n,o,a;for(t=this.filterOptions(t),o="",i=0,n=(a=e.children).length;i<n;i++)r=a[i],o+=this.writeChildNode(r,t,0);return t.pretty&&o.slice(-t.newline.length)===t.newline&&(o=o.slice(0,-t.newline.length)),o},t}(t)}).call(this)},function(e,t,r){(t=e.exports=r(255)).Stream=t,t.Readable=t,t.Writable=r(204),t.Duplex=r(116),t.Transform=r(259),t.PassThrough=r(400)},function(e,t,r){var i=r(145),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,i,n){var o=r(162);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(undefined),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=_;var l,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:o.nextTick;_.WritableState=v;var u=Object.create(r(148));u.inherits=r(130);var h,p={deprecate:r(398)},d=r(256),f=r(203).Buffer,m=n.Uint8Array||function(){},g=r(257);function y(){}function v(e,t){l=l||r(116),e=e||{};var i=t instanceof l;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(u||0===u)?u:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===e.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(o.nextTick(n,i),o.nextTick(M,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),M(e,t))}(e,r,i,t,n);else{var a=S(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),i?c(x,e,r,a,n):x(e,r,a,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function _(e){if(l=l||r(116),!(h.call(_,this)||this instanceof l))return new _(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function b(e,t,r,i,n,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function x(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),M(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var l=0,c=!0;r;)n[l]=r,r.isBuf||(c=!1),r=r.next,l+=1;n.allBuffers=c,b(e,t,!0,t.length,n,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,h=r.encoding,p=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,h,p),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function C(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var r=S(t);return r&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(C,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(_,d),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:p.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===_&&e&&e._writableState instanceof v}})):h=function(e){return e instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(e,t,r){var i,n=this._writableState,a=!1,l=!n.objectMode&&(i=e,f.isBuffer(i)||i instanceof m);return l&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=y),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(l||function(e,t,r,i){var n=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(i,a),n=!1),n}(this,n,e,r))&&(n.pendingcb++,a=function(e,t,r,i,n,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,r)),t}(t,i,n);i!==a&&(r=!0,n="buffer",i=a)}var l=t.objectMode?1:i.length;t.length+=l;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,l,i,n,o);return c}(this,n,l,e,t,r)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},_.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,M(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(106),r(258).setImmediate,r(101))},function(e,t,r){"use strict";var i=r(399).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=h,this.end=p,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=a(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=a(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=a(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";r.d(t,"a",(function(){return MaskLegend}));var i=r(2),n=r.n(i),o=r(4),a=r(1),l=r(15),c=r(0),u=r(108),h=r(3);class MaskLegend extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{}),n()(this,"_loadAggLabel",(async()=>{const e=await this.props.esAggField.getLabel();this._isMounted&&e!==this.state.aggLabel&&this.setState({aggLabel:e})}))}componentDidMount(){this._isMounted=!0,this._loadAggLabel()}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){this._loadAggLabel()}_getBucketsName(){const e=this.props.esAggField.getSource();return"getBucketsName"in e?e.getBucketsName():void 0}_getPrefix(){if(this.props.onlyShowLabelAndValue)return a.i18n.translate("xpack.maps.maskLegend.is",{defaultMessage:"{aggLabel} is",values:{aggLabel:this.state.aggLabel}});const e=this.props.esAggField.getOrigin()===c.D.JOIN;return`${Object(u.f)({bucketsName:this._getBucketsName(),isJoin:e})} ${Object(u.e)({aggLabel:this.state.aggLabel,isJoin:e})}`}render(){return Object(h.jsx)(l.EuiText,{size:"xs",textAlign:"left",color:"subdued"},Object(h.jsx)("small",null,`${this._getPrefix()} `,Object(h.jsx)("strong",null,Object(u.g)(this.props.operator,this.props.value))))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r(4);var i=r(15),n=r(3);function o({header:e,minLabel:t,maxLabel:r,propertyLabel:o,fieldLabel:a,invert:l}){return Object(n.jsx)("div",null,Object(n.jsx)(i.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(n.jsx)(i.EuiFlexItem,{grow:!1},Object(n.jsx)(i.EuiToolTip,{position:"top",title:o,content:a},Object(n.jsx)(i.EuiText,{className:"eui-textTruncate",size:"xs",style:{maxWidth:"180px"}},Object(n.jsx)("small",null,Object(n.jsx)("strong",null,a)))))),e,Object(n.jsx)(i.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(n.jsx)(i.EuiFlexItem,{grow:!0},Object(n.jsx)(i.EuiText,{size:"xs"},Object(n.jsx)("small",null,l?r:t))),Object(n.jsx)(i.EuiFlexItem,{grow:!0},Object(n.jsx)(i.EuiText,{textAlign:"right",size:"xs"},Object(n.jsx)("small",null,l?t:r)))))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return _})),r.d(t,"a",(function(){return AbstractESSource}));var i=r(2),n=r.n(i),o=r(1),a=r(43),l=r(50),c=r(311),u=r(104),h=r(5),p=r(78),d=r(79),f=r(115),m=r(100),g=r(149),y=r(119),v=r(120);function _(e){return"AbortError"===e.name}class AbstractESSource extends u.a{static createDescriptor(e){if(!Object(y.a)(e.indexPatternId))throw new Error("Cannot create AbstractESSourceDescriptor when indexPatternId is not provided");return{...e,id:Object(y.a)(e.id)?e.id:Object(a.v4)(),type:Object(y.a)(e.type)?e.type:"",indexPatternId:e.indexPatternId,applyGlobalQuery:void 0===e.applyGlobalQuery||e.applyGlobalQuery,applyGlobalTime:void 0===e.applyGlobalTime||e.applyGlobalTime,applyForceRefresh:void 0===e.applyForceRefresh||e.applyForceRefresh}}constructor(e){super(AbstractESSource.createDescriptor(e)),n()(this,"indexPattern",void 0),n()(this,"_descriptor",void 0),n()(this,"getValueSuggestions",(async(e,t)=>{try{const r=await this.getIndexPattern(),i=r.fields.getByName(e.getRootName());return await Object(h.b)().getValueSuggestions({indexPattern:r,field:i,query:t})}catch(r){return console.warn(`Unable to fetch suggestions for field: ${e.getRootName()}, query: ${t}, error: ${r.message}`),[]}})),this._descriptor=e}getId(){return this._descriptor.id}getApplyGlobalQuery(){return this._descriptor.applyGlobalQuery}getApplyGlobalTime(){return this._descriptor.applyGlobalTime}getApplyForceRefresh(){return this._descriptor.applyForceRefresh}isQueryAware(){return!0}getIndexPatternIds(){return[this.getIndexPatternId()]}getQueryableIndexPatternIds(){return this.getApplyGlobalQuery()?[this.getIndexPatternId()]:[]}isESSource(){return!0}cloneDescriptor(){const e=Object(f.b)(this._descriptor);return e.id=Object(a.v4)(),e}async _runEsQuery({registerCancelCallback:e,requestId:t,requestName:r,searchSessionId:i,searchSource:n,executionContext:o,requestsAdapter:a,onWarning:u}){const p=new AbortController;e((()=>p.abort()));const d=void 0!==u&&void 0!==a;try{const{rawResponse:e}=await Object(l.lastValueFrom)(n.fetch$({abortSignal:p.signal,sessionId:i,legacyHitsTotal:!1,inspector:{adapter:a,id:t,title:r},executionContext:o,disableWarningToasts:d}));return d&&Object(c.b)(e,Object(h.v)(),a,r,t).forEach(u),e}catch(e){if(_(e))throw new m.b;throw e}}async makeSearchSource(e,t,r){const i=await this.getIndexPattern(),n=[...e.applyGlobalQuery?e.filters:[]];if(e.joinKeyFilter&&n.push(e.joinKeyFilter),this.isFilterByMapBounds()&&"buffer"in e&&e.buffer){const t=await this._getGeoField(),r="isGeoGridPrecisionAware"in this&&"getGeoGridPrecision"in this&&this.isGeoGridPrecisionAware()?Object(g.a)(e.buffer,this.getGeoGridPrecision(e.zoom)):e.buffer,i=Object(d.h)(r,[t.name]);n.push(i)}let o=!1;if("isFeatureEditorOpenForLayer"in e&&(o=e.isFeatureEditorOpenForLayer),e.applyGlobalTime&&await this.isTimeAware()&&!o){const t=e.timeslice?{from:new Date(e.timeslice.from).toISOString(),to:new Date(e.timeslice.to).toISOString(),mode:"absolute"}:e.timeFilters,r=Object(h.P)().createFilter(i,t);r&&n.push(r)}const a=Object(h.I)(),l=await a.searchSource.create(r);l.setField("index",i),l.setField("size",t),l.setField("filter",n),e.applyGlobalQuery&&!o&&l.setField("query",e.query);const c=[];if(e.sourceQuery&&!o){const t=a.searchSource.createEmpty();t.setField("index",i),t.setField("query",e.sourceQuery),c.push(t)}if(e.embeddableSearchContext&&!o){const t=a.searchSource.createEmpty();t.setField("index",i),t.setField("query",e.embeddableSearchContext.query),t.setField("filter",e.embeddableSearchContext.filters),c.push(t)}return 1===c.length?l.setParent(c[0]):2===c.length&&(c[1].setParent(c[0]),l.setParent(c[1])),l}async getBoundsForFilters(e,t){const r=await this.makeSearchSource(e,0);let i;r.setField("trackTotalHits",!1),r.setField("aggs",{fitToBounds:{geo_bounds:{field:this.getGeoFieldName()}}});try{const n=new AbortController;t((()=>n.abort()));const{rawResponse:o}=await Object(l.lastValueFrom)(r.fetch$({abortSignal:n.signal,legacyHitsTotal:!1,executionContext:Object(v.b)({description:"es_source:bounds"},e.executionContext)}));if(!o.aggregations)return null;const a=o.aggregations.fitToBounds;if(!a.bounds)return null;i=a.bounds}catch(e){if("AbortError"===e.name)throw new m.b;return null}const n=i.top_left.lon,o=i.bottom_right.lon;return{minLon:n>o?n-360:n,maxLon:o,minLat:i.bottom_right.lat,maxLat:i.top_left.lat}}async isTimeAware(){try{return!!(await this.getIndexPattern()).timeFieldName}catch(e){return!1}}getIndexPatternId(){return this._descriptor.indexPatternId}getGeoFieldName(){if(!this._descriptor.geoField)throw new Error("Required field 'geoField' not provided in '_descriptor'");return this._descriptor.geoField}async getIndexPattern(){if(this.indexPattern)return this.indexPattern;try{return this.indexPattern=await Object(h.u)().get(this.getIndexPatternId()),this.indexPattern}catch(e){throw new Error(Object(p.c)(this.getIndexPatternId()))}}async supportsFitToBounds(){try{return!!(await this._getGeoField()).aggregatable}catch(e){return!1}}async _getGeoField(){const e=await this.getIndexPattern(),t=e.fields.getByName(this.getGeoFieldName());if(!t)throw new Error(o.i18n.translate("xpack.maps.source.esSource.noGeoFieldErrorMessage",{defaultMessage:'Data view "{indexPatternLabel}" no longer contains the geo field "{geoField}"',values:{indexPatternLabel:e.getName(),geoField:this.getGeoFieldName()}}));return t}async getDisplayName(){try{return(await this.getIndexPattern()).getName()}catch(e){return this.getIndexPatternId()}}isBoundsAware(){return!0}async createFieldFormatter(e){let t;try{t=await this.getIndexPattern()}catch(e){return null}const r=t.fields.getByName(e.getRootName());return r?t.getFormatterForField(r).getConverterFor("text"):null}async loadStylePropsMeta({layerName:e,style:t,dynamicStyleProps:r,registerCancelCallback:i,sourceQuery:n,timeFilters:a,searchSessionId:l,inspectorAdapters:c,executionContext:u}){const p=r.map((e=>e.getFieldMetaRequest())),d=(await Promise.all(p)).reduce(((e,t)=>(t&&Object.assign(e,t),e)),{}),f=await this.getIndexPattern(),m=Object(h.I)().searchSource.createEmpty();if(m.setField("index",f),m.setField("size",0),m.setField("aggs",d),n&&m.setField("query",n),t.isTimeAware()&&await this.isTimeAware()){const e=Object(h.P)().createFilter(f,a);e&&m.setField("filter",[e])}const g=[];return{styleMeta:(await this._runEsQuery({requestId:`${this.getId()}_styleMeta`,requestName:o.i18n.translate("xpack.maps.source.esSource.stylePropsMetaRequestName",{defaultMessage:"load symbolization ranges ({layerName})",values:{layerName:e}}),searchSource:m,registerCancelCallback:i,searchSessionId:l,executionContext:Object(v.b)({description:"es_source:style_meta"},u),requestsAdapter:c.requests,onWarning:e=>{g.push(e)}})).aggregations,warnings:g}}}},function(e,t,r){"use strict";function i(e){return"URL_DRILLDOWN"===e.type}function n(e,t){return[{table:{columns:[{id:e,meta:{type:"unknown",field:e},name:e}],rows:[{[e]:t}]},column:0,row:0,value:t}]}r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(465);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(117);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(555);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(271);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=r(565);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}))},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0});var n={keys:!0,htmlIdGenerator:!0,useGeneratedHtmlId:!0,CENTER_ALIGNMENT:!0,LEFT_ALIGNMENT:!0,RIGHT_ALIGNMENT:!0,CurrentEuiBreakpointContext:!0,CurrentEuiBreakpointProvider:!0,useCurrentEuiBreakpoint:!0,useIsWithinBreakpoints:!0,useIsWithinMaxBreakpoint:!0,useIsWithinMinBreakpoint:!0,CanvasTextUtils:!0,brighten:!0,calculateContrast:!0,calculateLuminance:!0,colorPalette:!0,darken:!0,DEFAULT_VISUALIZATION_COLOR:!0,desaturate:!0,euiPaletteColorBlind:!0,euiPaletteColorBlindBehindText:!0,euiPaletteComplimentary:!0,euiPaletteComplementary:!0,euiPaletteCool:!0,euiPaletteForDarkBackground:!0,euiPaletteForLightBackground:!0,euiPaletteForStatus:!0,euiPaletteForTemperature:!0,euiPaletteGray:!0,euiPaletteNegative:!0,euiPalettePositive:!0,euiPaletteWarm:!0,getSteppedGradient:!0,hexToHsv:!0,hexToRgb:!0,hsvToHex:!0,hsvToRgb:!0,isColorDark:!0,isValidHex:!0,lightness:!0,makeDisabledContrastColor:!0,makeHighContrastColor:!0,rgbToHex:!0,rgbToHsv:!0,saturate:!0,shade:!0,shadeOrTint:!0,tint:!0,tintOrShade:!0,transparentize:!0,VISUALIZATION_COLORS:!0,wcagContrastMin:!0,useColorPickerState:!0,useColorStopsState:!0,copyToClipboard:!0,dateFormatAliases:!0,formatAuto:!0,formatBoolean:!0,formatDate:!0,formatNumber:!0,formatText:!0,isEvenlyDivisibleBy:!0,isWithinRange:!0,Pager:!0,calculatePopoverPosition:!0,findPopoverPosition:!0,Random:!0,getSecureRelForTarget:!0,Comparators:!0,PropertySortType:!0,SortableProperties:!0,SortDirection:!0,SortDirectionType:!0,slugify:!0,toInitials:!0,toSentenceCase:!0,throttle:!0,getDurationAndPerformOnFrame:!0,getTransitionTimings:!0,getWaitDuration:!0,performOnFrame:!0,EuiWindowEvent:!0};Object.defineProperty(t,"CENTER_ALIGNMENT",{enumerable:!0,get:function(){return l.CENTER_ALIGNMENT}}),Object.defineProperty(t,"CanvasTextUtils",{enumerable:!0,get:function(){return u.CanvasTextUtils}}),Object.defineProperty(t,"Comparators",{enumerable:!0,get:function(){return C.Comparators}}),Object.defineProperty(t,"CurrentEuiBreakpointContext",{enumerable:!0,get:function(){return c.CurrentEuiBreakpointContext}}),Object.defineProperty(t,"CurrentEuiBreakpointProvider",{enumerable:!0,get:function(){return c.CurrentEuiBreakpointProvider}}),Object.defineProperty(t,"DEFAULT_VISUALIZATION_COLOR",{enumerable:!0,get:function(){return h.DEFAULT_VISUALIZATION_COLOR}}),Object.defineProperty(t,"EuiWindowEvent",{enumerable:!0,get:function(){return P.EuiWindowEvent}}),Object.defineProperty(t,"LEFT_ALIGNMENT",{enumerable:!0,get:function(){return l.LEFT_ALIGNMENT}}),Object.defineProperty(t,"Pager",{enumerable:!0,get:function(){return b.Pager}}),Object.defineProperty(t,"PropertySortType",{enumerable:!0,get:function(){return C.PropertySortType}}),Object.defineProperty(t,"RIGHT_ALIGNMENT",{enumerable:!0,get:function(){return l.RIGHT_ALIGNMENT}}),Object.defineProperty(t,"Random",{enumerable:!0,get:function(){return w.Random}}),Object.defineProperty(t,"SortDirection",{enumerable:!0,get:function(){return C.SortDirection}}),Object.defineProperty(t,"SortDirectionType",{enumerable:!0,get:function(){return C.SortDirectionType}}),Object.defineProperty(t,"SortableProperties",{enumerable:!0,get:function(){return C.SortableProperties}}),Object.defineProperty(t,"VISUALIZATION_COLORS",{enumerable:!0,get:function(){return h.VISUALIZATION_COLORS}}),Object.defineProperty(t,"brighten",{enumerable:!0,get:function(){return h.brighten}}),Object.defineProperty(t,"calculateContrast",{enumerable:!0,get:function(){return h.calculateContrast}}),Object.defineProperty(t,"calculateLuminance",{enumerable:!0,get:function(){return h.calculateLuminance}}),Object.defineProperty(t,"calculatePopoverPosition",{enumerable:!0,get:function(){return x.calculatePopoverPosition}}),Object.defineProperty(t,"colorPalette",{enumerable:!0,get:function(){return h.colorPalette}}),Object.defineProperty(t,"copyToClipboard",{enumerable:!0,get:function(){return f.copyToClipboard}}),Object.defineProperty(t,"darken",{enumerable:!0,get:function(){return h.darken}}),Object.defineProperty(t,"dateFormatAliases",{enumerable:!0,get:function(){return y.dateFormatAliases}}),Object.defineProperty(t,"desaturate",{enumerable:!0,get:function(){return h.desaturate}}),Object.defineProperty(t,"euiPaletteColorBlind",{enumerable:!0,get:function(){return h.euiPaletteColorBlind}}),Object.defineProperty(t,"euiPaletteColorBlindBehindText",{enumerable:!0,get:function(){return h.euiPaletteColorBlindBehindText}}),Object.defineProperty(t,"euiPaletteComplementary",{enumerable:!0,get:function(){return h.euiPaletteComplementary}}),Object.defineProperty(t,"euiPaletteComplimentary",{enumerable:!0,get:function(){return h.euiPaletteComplimentary}}),Object.defineProperty(t,"euiPaletteCool",{enumerable:!0,get:function(){return h.euiPaletteCool}}),Object.defineProperty(t,"euiPaletteForDarkBackground",{enumerable:!0,get:function(){return h.euiPaletteForDarkBackground}}),Object.defineProperty(t,"euiPaletteForLightBackground",{enumerable:!0,get:function(){return h.euiPaletteForLightBackground}}),Object.defineProperty(t,"euiPaletteForStatus",{enumerable:!0,get:function(){return h.euiPaletteForStatus}}),Object.defineProperty(t,"euiPaletteForTemperature",{enumerable:!0,get:function(){return h.euiPaletteForTemperature}}),Object.defineProperty(t,"euiPaletteGray",{enumerable:!0,get:function(){return h.euiPaletteGray}}),Object.defineProperty(t,"euiPaletteNegative",{enumerable:!0,get:function(){return h.euiPaletteNegative}}),Object.defineProperty(t,"euiPalettePositive",{enumerable:!0,get:function(){return h.euiPalettePositive}}),Object.defineProperty(t,"euiPaletteWarm",{enumerable:!0,get:function(){return h.euiPaletteWarm}}),Object.defineProperty(t,"findPopoverPosition",{enumerable:!0,get:function(){return x.findPopoverPosition}}),Object.defineProperty(t,"formatAuto",{enumerable:!0,get:function(){return y.formatAuto}}),Object.defineProperty(t,"formatBoolean",{enumerable:!0,get:function(){return y.formatBoolean}}),Object.defineProperty(t,"formatDate",{enumerable:!0,get:function(){return y.formatDate}}),Object.defineProperty(t,"formatNumber",{enumerable:!0,get:function(){return y.formatNumber}}),Object.defineProperty(t,"formatText",{enumerable:!0,get:function(){return y.formatText}}),Object.defineProperty(t,"getDurationAndPerformOnFrame",{enumerable:!0,get:function(){return A.getDurationAndPerformOnFrame}}),Object.defineProperty(t,"getSecureRelForTarget",{enumerable:!0,get:function(){return S.getSecureRelForTarget}}),Object.defineProperty(t,"getSteppedGradient",{enumerable:!0,get:function(){return h.getSteppedGradient}}),Object.defineProperty(t,"getTransitionTimings",{enumerable:!0,get:function(){return A.getTransitionTimings}}),Object.defineProperty(t,"getWaitDuration",{enumerable:!0,get:function(){return A.getWaitDuration}}),Object.defineProperty(t,"hexToHsv",{enumerable:!0,get:function(){return h.hexToHsv}}),Object.defineProperty(t,"hexToRgb",{enumerable:!0,get:function(){return h.hexToRgb}}),Object.defineProperty(t,"hsvToHex",{enumerable:!0,get:function(){return h.hsvToHex}}),Object.defineProperty(t,"hsvToRgb",{enumerable:!0,get:function(){return h.hsvToRgb}}),Object.defineProperty(t,"htmlIdGenerator",{enumerable:!0,get:function(){return a.htmlIdGenerator}}),Object.defineProperty(t,"isColorDark",{enumerable:!0,get:function(){return h.isColorDark}}),Object.defineProperty(t,"isEvenlyDivisibleBy",{enumerable:!0,get:function(){return _.isEvenlyDivisibleBy}}),Object.defineProperty(t,"isValidHex",{enumerable:!0,get:function(){return h.isValidHex}}),Object.defineProperty(t,"isWithinRange",{enumerable:!0,get:function(){return _.isWithinRange}}),t.keys=void 0,Object.defineProperty(t,"lightness",{enumerable:!0,get:function(){return h.lightness}}),Object.defineProperty(t,"makeDisabledContrastColor",{enumerable:!0,get:function(){return h.makeDisabledContrastColor}}),Object.defineProperty(t,"makeHighContrastColor",{enumerable:!0,get:function(){return h.makeHighContrastColor}}),Object.defineProperty(t,"performOnFrame",{enumerable:!0,get:function(){return A.performOnFrame}}),Object.defineProperty(t,"rgbToHex",{enumerable:!0,get:function(){return h.rgbToHex}}),Object.defineProperty(t,"rgbToHsv",{enumerable:!0,get:function(){return h.rgbToHsv}}),Object.defineProperty(t,"saturate",{enumerable:!0,get:function(){return h.saturate}}),Object.defineProperty(t,"shade",{enumerable:!0,get:function(){return h.shade}}),Object.defineProperty(t,"shadeOrTint",{enumerable:!0,get:function(){return h.shadeOrTint}}),Object.defineProperty(t,"slugify",{enumerable:!0,get:function(){return M.slugify}}),Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return T.throttle}}),Object.defineProperty(t,"tint",{enumerable:!0,get:function(){return h.tint}}),Object.defineProperty(t,"tintOrShade",{enumerable:!0,get:function(){return h.tintOrShade}}),Object.defineProperty(t,"toInitials",{enumerable:!0,get:function(){return M.toInitials}}),Object.defineProperty(t,"toSentenceCase",{enumerable:!0,get:function(){return M.toSentenceCase}}),Object.defineProperty(t,"transparentize",{enumerable:!0,get:function(){return h.transparentize}}),Object.defineProperty(t,"useColorPickerState",{enumerable:!0,get:function(){return p.useColorPickerState}}),Object.defineProperty(t,"useColorStopsState",{enumerable:!0,get:function(){return p.useColorStopsState}}),Object.defineProperty(t,"useCurrentEuiBreakpoint",{enumerable:!0,get:function(){return c.useCurrentEuiBreakpoint}}),Object.defineProperty(t,"useGeneratedHtmlId",{enumerable:!0,get:function(){return a.useGeneratedHtmlId}}),Object.defineProperty(t,"useIsWithinBreakpoints",{enumerable:!0,get:function(){return c.useIsWithinBreakpoints}}),Object.defineProperty(t,"useIsWithinMaxBreakpoint",{enumerable:!0,get:function(){return c.useIsWithinMaxBreakpoint}}),Object.defineProperty(t,"useIsWithinMinBreakpoint",{enumerable:!0,get:function(){return c.useIsWithinMinBreakpoint}}),Object.defineProperty(t,"wcagContrastMin",{enumerable:!0,get:function(){return h.wcagContrastMin}});var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(467));t.keys=o;var a=r(468),l=r(470),c=r(471),u=r(497),h=r(164),p=r(499),d=r(501);Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var f=r(503),m=r(288);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===m[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}}))}));var g=r(504);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}));var y=r(505),v=r(516);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===v[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}}))}));var _=r(522),b=r(524),x=r(526),w=r(529),S=r(533),C=r(535),M=r(541),E=r(134);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var T=r(214),A=r(545),P=r(547);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultComputedTheme=t.EuiThemeContext=t.EuiSystemContext=t.EuiNestedThemeContext=t.EuiModificationsContext=t.EuiColorModeContext=void 0;var i=r(4),n=r(472),o=r(97),a=(0,i.createContext)(n.EuiThemeAmsterdam);t.EuiSystemContext=a;var l=(0,i.createContext)({});t.EuiModificationsContext=l;var c=(0,i.createContext)(o.DEFAULT_COLOR_MODE);t.EuiColorModeContext=c;var u=(0,o.getComputed)(n.EuiThemeAmsterdam,{},o.DEFAULT_COLOR_MODE);t.defaultComputedTheme=u;var h=(0,i.createContext)(u);t.EuiThemeContext=h;var p=(0,i.createContext)({isGlobalTheme:!0,hasDifferentColorFromGlobalTheme:!1,bodyColor:"",colorClassName:"",setGlobalCSSVariables:function(){},setNearestThemeCSSVariables:function(){}});t.EuiNestedThemeContext=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transparentize=t.tintOrShade=t.tint=t.shadeOrTint=t.shade=t.saturate=t.lightness=t.desaturate=t.darken=t.brighten=void 0;var i,n=(i=r(128))&&i.__esModule?i:{default:i},o=r(275),a=function(e,t){return(0,o.isValidHex)(e)?t.hex():t.css()};t.transparentize=function(e,t){return(0,n.default)(e).alpha(t).css()};var l=function(e,t){var r=n.default.mix(e,"#fff",t,"rgb");return a(e,r)};t.tint=l;var c=function(e,t){var r=n.default.mix(e,"#000",t,"rgb");return a(e,r)};t.shade=c,t.tintOrShade=function(e,t,r){return"DARK"===r?c(e,t):l(e,t)},t.shadeOrTint=function(e,t,r){return"DARK"===r?l(e,t):c(e,t)},t.saturate=function(e,t){var r=(0,n.default)(e).set("hsl.s","+".concat(t));return a(e,r)},t.desaturate=function(e,t){var r=(0,n.default)(e).set("hsl.s","-".concat(t));return a(e,r)},t.lightness=function(e){return 100*(0,n.default)(e).get("hsl.l")},t.darken=function(e,t){return(0,n.default)(e).darken(t).hex()},t.brighten=function(e,t){return(0,n.default)(e).brighten(t).hex()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=void 0,t.throttle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=Date.now();return function(){r+t-Date.now()<0&&(e.apply(void 0,arguments),r=Date.now())}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortDirectionType=t.SortDirection=void 0;var i,n=(i=r(216))&&i.__esModule?i:{default:i},o="asc",a="desc",l=Object.freeze({ASC:o,DESC:a,isAsc:function(e){return e===o},reverse:function(e){return this.isAsc(e)?a:o}});t.SortDirection=l;var c=n.default.oneOf([o,a]);t.SortDirectionType=c},function(e,t,r){e.exports=r(22)(8)},function(e,t,r){"use strict";r.d(t,"a",(function(){return InlineField}));var i=r(2),n=r.n(i),o=r(150);class InlineField extends o.a{constructor({fieldName:e,label:t,source:r,origin:i,dataType:o}){super({fieldName:e,origin:i}),n()(this,"_label",void 0),n()(this,"_source",void 0),n()(this,"_dataType",void 0),this._label=t,this._source=r,this._dataType=o}supportsFieldMetaFromEs(){return!1}supportsFieldMetaFromLocalData(){return!0}getSource(){return this._source}async getLabel(){return this._label?this._label:this.getName()}async getDataType(){return this._dataType}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(40),n=r.n(i);function o(e,t,r,i,o,a){return{...r,fieldNames:n.a.uniq(t).sort(),sourceQuery:i||void 0,applyGlobalQuery:e.getApplyGlobalQuery(),applyGlobalTime:e.getApplyGlobalTime(),sourceMeta:e.getSyncMeta(r),applyForceRefresh:!!e.isESSource()&&e.getApplyForceRefresh(),isForceRefresh:o,isFeatureEditorOpenForLayer:a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(105),n=r(89);t.default=function(e,t,r){void 0===r&&(r={});var o=i.getCoord(e),a=i.getCoord(t),l=n.degreesToRadians(a[1]-o[1]),c=n.degreesToRadians(a[0]-o[0]),u=n.degreesToRadians(o[1]),h=n.degreesToRadians(a[1]),p=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(u)*Math.cos(h);return n.radiansToLength(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(0);function n(e){return e===i.L.COARSE?{minSize:16,maxSize:48}:e===i.L.FINE?{minSize:8,maxSize:24}:e===i.L.MOST_FINE?{minSize:4,maxSize:12}:{minSize:2,maxSize:6}}},,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return feature_geometry_filter_form_FeatureGeometryFilterForm})),r.d(t,"b",(function(){return features_tooltip_FeaturesTooltip}));var i=r(2),n=r.n(i),o=r(4),a=r.n(o),l=r(1),c=r(53),u=r.n(c),h=r(31),p=r(51),d=r(79),f=r(269),m=r(3);class feature_geometry_filter_form_FeatureGeometryFilterForm extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{isLoading:!1,errorMsg:void 0}),n()(this,"_loadPreIndexedShape",(async()=>{if(!this.props.loadPreIndexedShape)return null;let e;this.setState({isLoading:!0});try{e=await this.props.loadPreIndexedShape()}catch(e){}return this._isMounted&&this.setState({isLoading:!1}),e})),n()(this,"_createFilter",(async({geometryLabel:e,relation:t})=>{this.setState({errorMsg:void 0});const r=await this._loadPreIndexedShape();if(!this._isMounted)return;const i=Object(d.c)({preIndexedShape:r,geometry:this.props.geometry,geometryLabel:e,geoFieldNames:this.props.geoFieldNames,relation:t});window.location.href.length+u.a.encode(i).length+100>h.URL_MAX_LENGTH?this.setState({errorMsg:l.i18n.translate("xpack.maps.tooltip.geometryFilterForm.filterTooLargeMessage",{defaultMessage:"Cannot create filter. Filters are added to the URL, and this shape has too many vertices to fit in the URL."})}):(this.props.addFilters([i],p.ACTION_GLOBAL_APPLY_FILTER),this.props.onClose())}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){return Object(m.jsx)(f.a,{buttonLabel:l.i18n.translate("xpack.maps.tooltip.geometryFilterForm.createFilterButtonLabel",{defaultMessage:"Create filter"}),getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,intitialGeometryLabel:l.i18n.translate("xpack.maps.tooltip.geometryFilterForm.initialGeometryLabel",{defaultMessage:"feature"}),onSubmit:this._createFilter,isLoading:this.state.isLoading,errorMsg:this.state.errorMsg})}}var g=r(15),y=r(464),v=r(40),_=r.n(v),b=r(209);class feature_properties_FeatureProperties extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"_prevLayerId",""),n()(this,"_prevFeatureId",""),n()(this,"_prevMbProperties",void 0),n()(this,"_tableRef",a.a.createRef()),n()(this,"state",{properties:null,actions:[],loadPropertiesErrorMsg:null,prevWidth:null,prevHeight:null}),n()(this,"_loadProperties",(async()=>{this._fetchProperties({nextFeatureId:this.props.featureId,nextLayerId:this.props.layerId,mbProperties:this.props.mbProperties})})),n()(this,"_showFilterActions",((e,t,r)=>{this.props.showFilterActions(this._renderFilterActions(e,t,r))})),n()(this,"_fetchProperties",(async({nextLayerId:e,nextFeatureId:t,mbProperties:r})=>{if(this._prevLayerId===e&&this._prevFeatureId===t&&_.a.isEqual(this._prevMbProperties,r))return;let i;this._prevLayerId=e,this._prevFeatureId=t,this._prevMbProperties=r,this.setState({properties:null,loadPropertiesErrorMsg:null}),this.state.properties&&this._tableRef.current&&this.setState({prevWidth:this._tableRef.current.clientWidth,prevHeight:this._tableRef.current.clientHeight});try{i=await this.props.loadFeatureProperties({layerId:e,properties:r})}catch(e){return void(this._isMounted&&this.setState({properties:[],loadPropertiesErrorMsg:e.message}))}this._prevLayerId!==e&&this._prevFeatureId!==t||this._isMounted&&this.setState({properties:i})}))}componentDidMount(){this._isMounted=!0,this._loadProperties(),this._loadActions()}componentDidUpdate(){this._loadProperties()}componentWillUnmount(){this._isMounted=!1}async _loadActions(){if(!this.props.getFilterActions)return;const e=await this.props.getFilterActions();this._isMounted&&this.setState({actions:e})}_renderFilterActions(e,t,r){const i={id:0,items:this.state.actions.filter((e=>!Object(b.a)(e)||!!this.props.onSingleValueTrigger)).map((i=>{const n=t(),o=i.getIconType(n),a=i.getDisplayName(n);return{name:a||i.id,icon:o?Object(m.jsx)(g.EuiIcon,{type:o}):void 0,onClick:async()=>{if(this.props.onCloseTooltip(),Object(b.a)(i))this.props.onSingleValueTrigger(i.id,e.getPropertyKey(),e.getRawValue());else{const t=await e.getESFilters();r(t,i.id)}},"data-test-subj":`mapFilterActionButton__${a}`}}))};return Object(m.jsx)("div",null,Object(m.jsx)("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:this._tableRef},Object(m.jsx)("tbody",null,Object(m.jsx)("tr",null,Object(m.jsx)("td",{className:"eui-textBreakWord mapFeatureTooltip__propertyLabel"},e.getPropertyName()),Object(m.jsx)("td",{className:"eui-textBreakWord"},e.getHtmlDisplayValue())))),Object(m.jsx)(g.EuiContextMenu,{initialPanelId:0,panels:[i]}))}_renderFilterCell(e){if(!this.props.showFilterButtons||!e.isFilterable()||void 0===this.props.addFilters)return Object(m.jsx)("td",null);const t=Object(m.jsx)(g.EuiButtonEmpty,{size:"xs",title:l.i18n.translate("xpack.maps.tooltip.filterOnPropertyTitle",{defaultMessage:"Filter on property"}),onClick:async()=>{this.props.onCloseTooltip();const t=await e.getESFilters();this.props.addFilters(t,p.ACTION_GLOBAL_APPLY_FILTER)},"aria-label":l.i18n.translate("xpack.maps.tooltip.filterOnPropertyAriaLabel",{defaultMessage:"Filter on property"}),"data-test-subj":"mapTooltipCreateFilterButton"},Object(m.jsx)(g.EuiIcon,{type:"filter"}));return void 0===this.props.getActionContext||0===this.state.actions.length||1===this.state.actions.length&&this.state.actions[0].id===p.ACTION_GLOBAL_APPLY_FILTER?Object(m.jsx)("td",null,t):Object(m.jsx)("td",{className:"mapFeatureTooltip_actionsRow"},Object(m.jsx)("span",null,t,Object(m.jsx)(g.EuiButtonEmpty,{size:"xs",title:l.i18n.translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),onClick:()=>{this._showFilterActions(e,this.props.getActionContext,this.props.addFilters)},"aria-label":l.i18n.translate("xpack.maps.tooltip.viewActionsTitle",{defaultMessage:"View filter actions"}),"data-test-subj":"mapTooltipMoreActionsButton"},Object(m.jsx)(g.EuiIcon,{type:"arrowRight"}))))}render(){if(this.state.loadPropertiesErrorMsg)return Object(m.jsx)(g.EuiCallOut,{title:l.i18n.translate("xpack.maps.tooltip.unableToLoadContentTitle",{defaultMessage:"Unable to load tooltip content"}),color:"danger",iconType:"warning",size:"s"},Object(m.jsx)("p",null,this.state.loadPropertiesErrorMsg));if(!this.state.properties){const e=l.i18n.translate("xpack.maps.tooltip.loadingMsg",{defaultMessage:"Loading"}),t={};return this.state.prevWidth&&this.state.prevHeight&&(t.width=this.state.prevWidth,t.height=this.state.prevHeight),Object(m.jsx)(g.EuiTextAlign,{textAlign:"center",style:t},Object(m.jsx)(g.EuiLoadingSpinner,{size:"m"}),e)}const e=this.state.properties.map((e=>Object(m.jsx)("tr",{key:e.getPropertyKey(),className:"mapFeatureTooltip_row"},Object(m.jsx)("td",{className:"eui-textBreakWord mapFeatureTooltip__propertyLabel"},e.getPropertyName()),Object(m.jsx)("td",{className:"eui-textBreakWord"},e.getHtmlDisplayValue()),this._renderFilterCell(e))));return Object(m.jsx)("div",{className:"mapFeatureTooltip_tableWrapper"},Object(m.jsx)("table",{className:"eui-yScrollWithShadows mapFeatureTooltip_table",ref:this._tableRef},Object(m.jsx)("tbody",null,e)))}}var x=r(41);const w="_ALL_LAYERS_";class footer_Footer extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"_prevFeatures",null),n()(this,"state",{filteredFeatures:this.props.features,pageNumber:0,selectedLayerId:w,layerOptions:[]}),n()(this,"_loadUniqueLayers",(async()=>{if(this._prevFeatures===this.props.features)return;this._prevFeatures=this.props.features;const e=new Map;for(let t=0;t<this.props.features.length;t++){let r=e.get(this.props.features[t].layerId);r||(r=0),r++,e.set(this.props.features[t].layerId,r)}const t=[];e.forEach(((e,r)=>{const i=this.props.findLayerById(r);i&&t.push(i)}));const r=t.map((e=>e.getDisplayName())),i=await Promise.all(r);this._isMounted&&this.setState({filteredFeatures:this.props.features,selectedLayerId:w,layerOptions:t.map(((t,r)=>{const n=i[r],o=e.get(t.getId());return{value:t.getId(),text:`(${o}) ${n}`}}))},(()=>this._onPageChange(0)))})),n()(this,"_onPageChange",(e=>{this.setState({pageNumber:e}),this.props.setCurrentFeature(this.state.filteredFeatures[e])})),n()(this,"_onLayerChange",(e=>{const t=e.target.value;if(this.state.selectedLayerId===t)return;const r=t===w?this.props.features:this.props.features.filter((e=>e.layerId===t));this.setState({filteredFeatures:r,selectedLayerId:t},(()=>this._onPageChange(0)))}))}componentDidMount(){this._isMounted=!0,this._loadUniqueLayers()}componentDidUpdate(){this._loadUniqueLayers()}componentWillUnmount(){this._isMounted=!1}render(){const{isLocked:e}=this.props,{filteredFeatures:t,pageNumber:r,selectedLayerId:i,layerOptions:n}=this.state,a=e&&n.length>1,c=[];return e&&t.length>1&&c.push(Object(m.jsx)(g.EuiFlexItem,{grow:!1,key:"pagination"},Object(m.jsx)(g.EuiPagination,{pageCount:t.length,activePage:r,onPageClick:this._onPageChange,compressed:!0}))),!e&&t.length>1&&c.push(Object(m.jsx)(g.EuiFlexItem,{grow:!a,key:"pageNumber"},Object(m.jsx)(g.EuiTextColor,{color:"subdued"},Object(m.jsx)(x.FormattedMessage,{id:"xpack.maps.tooltip.pageNumerText",defaultMessage:"{pageNumber} of {total}",values:{pageNumber:r+1,total:t.length}})))),a&&c.push(Object(m.jsx)(g.EuiFlexItem,{key:"layerSelect"},Object(m.jsx)(g.EuiFormRow,{display:"rowCompressed"},Object(m.jsx)(g.EuiSelect,{options:[{value:w,text:l.i18n.translate("xpack.maps.tooltip.allLayersLabel",{defaultMessage:"All layers"})},...n],onChange:this._onLayerChange,value:i,compressed:!0,fullWidth:!0,"aria-label":l.i18n.translate("xpack.maps.tooltip.layerFilterLabel",{defaultMessage:"Filter results by layer"})})))),c.length?Object(m.jsx)(o.Fragment,null,Object(m.jsx)(g.EuiHorizontalRule,{margin:"xs"}),Object(m.jsx)(g.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},c)):null}}class header_Header extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{layerIcon:null,layerName:null})}componentDidMount(){this._isMounted=!0,this._loadLayerState()}componentWillUnmount(){this._isMounted=!1}async _loadLayerState(){const e=this.props.findLayerById(this.props.layerId);if(!e)return;const t=await e.getDisplayName(),{icon:r}=e.getLayerIcon(!1);this._isMounted&&this.setState({layerIcon:r,layerName:t})}render(){const e=[];return this.state.layerIcon&&e.push(Object(m.jsx)(g.EuiFlexItem,{grow:!1,key:"layerIcon",className:"mapFeatureTooltip_layerIcon"},this.state.layerIcon)),this.state.layerName&&e.push(Object(m.jsx)(g.EuiFlexItem,{grow:!0,key:"layerName",className:"eui-textTruncate"},Object(m.jsx)(g.EuiTextColor,null,Object(m.jsx)("h4",{className:"eui-textTruncate",title:this.state.layerName},this.state.layerName)))),this.props.isLocked&&(0===e.length&&e.push(Object(m.jsx)(g.EuiFlexItem,{key:"spacer"})),e.push(Object(m.jsx)(g.EuiFlexItem,{grow:!1,key:"closeButton"},Object(m.jsx)(g.EuiButtonIcon,{onClick:this.props.onClose,iconType:"cross","aria-label":l.i18n.translate("xpack.maps.tooltip.closeAriaLabel",{defaultMessage:"Close tooltip"}),"data-test-subj":"mapTooltipCloseButton"})))),e.length?Object(m.jsx)(o.Fragment,null,Object(m.jsx)(g.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},e),Object(m.jsx)(g.EuiHorizontalRule,{margin:"xs"})):null}}const S="PROPERTIES_VIEW",C="FILTER_ACTIONS_VIEW";class features_tooltip_FeaturesTooltip extends o.Component{constructor(...e){super(...e),n()(this,"state",{currentFeature:null,filterView:null,prevFeatures:[],view:S}),n()(this,"_setCurrentFeature",(e=>{this.setState({currentFeature:e})})),n()(this,"_showPropertiesView",(()=>{this.setState({view:S,filterView:null})})),n()(this,"_showFilterActionsView",(e=>{this.setState({view:C,filterView:e})}))}static getDerivedStateFromProps(e,t){if(e.features!==t.prevFeatures){let r=e.features?e.features[0]:null;if(t.currentFeature){const i=e.features.find((e=>e.id===t.currentFeature.id&&e.layerId===t.currentFeature.layerId));i&&(r=i)}return{currentFeature:r,view:S,prevFeatures:e.features}}return null}_renderActions(){return this.props.isLocked&&this.state.currentFeature&&0!==this.state.currentFeature.actions.length?this.state.currentFeature.actions.map((e=>Object(m.jsx)(g.EuiLink,{className:"mapFeatureTooltip_actionLinks",onClick:()=>{e.onClick?e.onClick():e.form&&this.setState({view:e.id})},key:e.id},e.label))):null}_renderBackButton(e){return Object(m.jsx)(g.EuiContextMenuItem,{className:"mapFeatureTooltip_backButton",css:e=>Object(y.euiContextMenuPanelStyles)(e).euiContextMenuPanel__title,onClick:this._showPropertiesView,icon:"arrowLeft"},e)}render(){if(!this.state.currentFeature)return null;const e=this.state.currentFeature.actions.find((({id:e})=>e===this.state.view));return e&&e.form?Object(m.jsx)(o.Fragment,null,this._renderBackButton(e.label),e.form):this.state.view===C?Object(m.jsx)(o.Fragment,null,this._renderBackButton(l.i18n.translate("xpack.maps.tooltip.showAddFilterActionsViewLabel",{defaultMessage:"Filter actions"})),this.state.filterView):Object(m.jsx)(o.Fragment,null,Object(m.jsx)(header_Header,{key:this.state.currentFeature.layerId,layerId:this.state.currentFeature.layerId,findLayerById:this.props.findLayerById,isLocked:this.props.isLocked,onClose:this.props.closeTooltip}),Object(m.jsx)(feature_properties_FeatureProperties,{featureId:this.state.currentFeature.id,layerId:this.state.currentFeature.layerId,mbProperties:this.state.currentFeature.mbProperties,loadFeatureProperties:this.props.loadFeatureProperties,showFilterButtons:!!this.props.addFilters&&this.props.isLocked,onCloseTooltip:this.props.closeTooltip,addFilters:this.props.addFilters,getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,onSingleValueTrigger:this.props.onSingleValueTrigger,showFilterActions:this._showFilterActionsView}),this._renderActions(),Object(m.jsx)(footer_Footer,{features:this.props.features,isLocked:this.props.isLocked,findLayerById:this.props.findLayerById,setCurrentFeature:this._setCurrentFeature}))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return m})),r(4);var i=r(15),n=r(1),o=r(0),a=r(5),l=r(20);const c=n.i18n.translate("xpack.maps.source.esGeoGrid.pointsDropdownOption",{defaultMessage:"Clusters"}),u=n.i18n.translate("xpack.maps.source.esGeoGrid.gridRectangleDropdownOption",{defaultMessage:"Grids"}),h=n.i18n.translate("xpack.maps.source.esGeoGrid.hexDropdownOption",{defaultMessage:"Hexagons"});var p=r(41),d=r(3);function f(e){return Object(d.jsx)(i.EuiToolTip,{content:Object(d.jsx)(i.EuiText,{size:"s"},Object(d.jsx)("dl",null,Object(d.jsx)("dt",null,c),Object(d.jsx)("dd",null,Object(d.jsx)("p",null,Object(d.jsx)(p.FormattedMessage,{id:"xpack.maps.source.esGeoGrid.clusterDescription",defaultMessage:"Group documents into grids with a weighted center for each grid cell."}))),Object(d.jsx)("dt",null,u),Object(d.jsx)("dd",null,Object(d.jsx)("p",null,Object(d.jsx)(p.FormattedMessage,{id:"xpack.maps.source.esGeoGrid.gridDescription",defaultMessage:"Group documents into grids."}))),Object(d.jsx)("dt",null,h),Object(d.jsx)("dd",null,Object(d.jsx)("p",null,Object(d.jsx)(p.FormattedMessage,{id:"xpack.maps.source.esGeoGrid.hexDescription",defaultMessage:"Group documents into hexagons."})),e.isHexDisabled?Object(d.jsx)("em",null,e.hexDisabledReason):null)))},Object(d.jsx)("span",null,Object(d.jsx)(p.FormattedMessage,{id:"xpack.maps.source.esGeoGrid.showAsLabel",defaultMessage:"Show as"})," ",Object(d.jsx)(i.EuiIcon,{type:"questionInCircle",color:"subdued"})))}function m(e){if(e.renderAs===o.ub.HEATMAP)return null;let t=!1,r="";Object(a.x)()||Object(l.b)()||(t=!0,r=n.i18n.translate("xpack.maps.hexbin.license.disabledReason",{defaultMessage:"{hexLabel} is a subscription feature.",values:{hexLabel:h}}));const p=[{id:o.ub.POINT,label:c,value:o.ub.POINT},{id:o.ub.GRID,label:u,value:o.ub.GRID},{id:o.ub.HEX,label:h,value:o.ub.HEX,isDisabled:t}],m=p.find((t=>t.value===e.renderAs))||p[0],g=Object(d.jsx)(f,{isHexDisabled:t,hexDisabledReason:r});return Object(d.jsx)(i.EuiFormRow,{label:g,display:e.isColumnCompressed?"columnCompressed":"row"},Object(d.jsx)(i.EuiButtonGroup,{type:"single",legend:n.i18n.translate("xpack.maps.source.esGeoGrid.showAsSelector",{defaultMessage:"Choose the display method"}),options:p,idSelected:m.id,onChange:function(t){const r=p.find((e=>e.id===t));r&&e.onChange(r.value)},isFullWidth:!0,buttonSize:"compressed"}))}},,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(89);t.default=function(e,t){void 0===t&&(t={});var r=Number(e[0]),n=Number(e[1]),o=Number(e[2]),a=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var l=[r,n],c=[r,a],u=[o,a],h=[o,n];return i.polygon([[l,h,u,c,l]],t.properties,{bbox:e,id:t.id})}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(157)),o=i(r(355)),a=i(r(356)),l=r(105);function c(e,t){var r,i=!1;for(r=0;r<e.coordinates.length;r++)if(y(e.coordinates[r],t.coordinates)){i=!0;break}return i}function u(e,t){for(var r=0,i=t.coordinates;r<i.length;r++){for(var n=i[r],o=!1,a=0,l=e.coordinates;a<l.length;a++)if(y(n,l[a])){o=!0;break}if(!o)return!1}return!0}function h(e,t){for(var r=!1,i=0,n=t.coordinates;i<n.length;i++){var o=n[i];if(a.default(o,e,{ignoreEndVertices:!0})&&(r=!0),!a.default(o,e))return!1}return!!r}function p(e,t){for(var r=0,i=t.coordinates;r<i.length;r++){var n=i[r];if(!o.default(n,e,{ignoreBoundary:!0}))return!1}return!0}function d(e,t){for(var r=!1,i=0,n=t.coordinates;i<n.length;i++){var o=n[i];if(a.default({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!a.default({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}return r}function f(e,t){var r=!1,i=0;if(!g(n.default(e),n.default(t)))return!1;for(;i<t.coordinates.length-1;i++){var a=v(t.coordinates[i],t.coordinates[i+1]);if(o.default({type:"Point",coordinates:a},e,{ignoreBoundary:!0})){r=!0;break}}return r}function m(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;if(!g(n.default(e),n.default(t)))return!1;for(var r=0,i=l.getGeom(t).coordinates;r<i.length;r++)for(var a=0,c=i[r];a<c.length;a++){var u=c[a];if(!o.default(u,e))return!1}return!0}function g(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function y(e,t){return e[0]===t[0]&&e[1]===t[1]}function v(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}t.default=function(e,t){var r=l.getGeom(e),i=l.getGeom(t),n=l.getType(e),g=l.getType(t),v=l.getCoords(e),_=l.getCoords(t);switch(n){case"Point":if("Point"===g)return y(v,_);throw new Error("feature2 "+g+" geometry not supported");case"MultiPoint":switch(g){case"Point":return c(r,i);case"MultiPoint":return u(r,i);default:throw new Error("feature2 "+g+" geometry not supported")}case"LineString":switch(g){case"Point":return a.default(i,r,{ignoreEndVertices:!0});case"LineString":return d(r,i);case"MultiPoint":return h(r,i);default:throw new Error("feature2 "+g+" geometry not supported")}case"Polygon":switch(g){case"Point":return o.default(i,r,{ignoreBoundary:!0});case"LineString":return f(r,i);case"Polygon":return m(r,i);case"MultiPoint":return p(r,i);default:throw new Error("feature2 "+g+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},t.isPointInMultiPoint=c,t.isMultiPointInMultiPoint=u,t.isMultiPointOnLine=h,t.isMultiPointInPoly=p,t.isLineOnLine=d,t.isLineInPoly=f,t.isPolyInPoly=m,t.doBBoxOverlap=g,t.compareCoords=y,t.getMidpoint=v},,,,,function(e,t,r){(function(){"use strict";var e,i,n,o,a={}.hasOwnProperty;i=r(187),e=r(381),n=r(390),o=r(260),t.defaults=i.defaults,t.processors=o,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=n.Parser,t.parseString=n.parseString,t.parseStringPromise=n.parseStringPromise}).call(this)},function(e,t){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,r){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,r){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},function(e,t,r){(function(){var t,i,n,o,a,l,c,u={}.hasOwnProperty;c=r(102).isPlainObject,n=r(249),i=r(383),o=r(91),t=r(82),l=r(253),a=r(201),e.exports=function(e){function r(e){r.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new i,e||(e={}),e.writer||(e.writer=new a),this.options=e,this.stringify=new l(e)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"implementation",{value:new n}),Object.defineProperty(r.prototype,"doctype",{get:function(){var e,r,i,n;for(r=0,i=(n=this.children).length;r<i;r++)if((e=n[r]).type===t.DocType)return e;return null}}),Object.defineProperty(r.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(r.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(r.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(r.prototype,"origin",{get:function(){return null}}),Object.defineProperty(r.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(r.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(r.prototype,"contentType",{get:function(){return null}}),r.prototype.end=function(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},r.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},r.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.renameNode=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createNodeIterator=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTreeWalker=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(o)}).call(this)},function(e,t,r){(function(){var t;t=r(82),r(91),e.exports=function(){function e(e,r,i){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(i),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},function(e,t,r){(function(){var t,i,n={}.hasOwnProperty;i=r(91),t=r(82),e.exports=function(e){function r(e){r.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return""},r}(i)}).call(this)},function(e,t){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;e.exports=function(){function e(e){var i,n,o;for(i in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})r.call(n,i)&&(o=n[i],this[i]=o)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,r;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+r.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+r.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},function(e,t,r){(function(){var t,i,n,o={}.hasOwnProperty;n=r(102).assign,t=r(82),r(192),r(193),r(190),r(191),r(188),r(198),r(199),r(200),r(252),r(194),r(196),r(195),r(197),i=r(161),e.exports=function(){function e(e){var t,r,i;for(t in e||(e={}),this.options=e,r=e.writer||{})o.call(r,t)&&(i=r[t],this["_"+t]=this[t],this[t]=i)}return e.prototype.filterOptions=function(e){var t,r,o,a,l,c,u,h;return e||(e={}),e=n({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(r=e.indent)?r:"  ",t.newline=null!=(o=e.newline)?o:"\n",t.offset=null!=(a=e.offset)?a:0,t.dontPrettyTextNodes=null!=(l=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?l:0,t.spaceBeforeSlash=null!=(u=null!=(h=e.spaceBeforeSlash)?h:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=i.None,t},e.prototype.indent=function(e,t,r){var i;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(i=(r||0)+t.offset+1)>0?new Array(i).join(t.indent):""},e.prototype.endline=function(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,r){var i;return this.openAttribute(e,t,r),i=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),i},e.prototype.cdata=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<![CDATA[",t.state=i.InsideTag,n+=e.value,t.state=i.CloseTag,n+="]]>"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.comment=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"\x3c!-- ",t.state=i.InsideTag,n+=e.value,t.state=i.CloseTag,n+=" --\x3e"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.declaration=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<?xml",t.state=i.InsideTag,n+=' version="'+e.version+'"',null!=e.encoding&&(n+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(n+=' standalone="'+e.standalone+'"'),t.state=i.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.docType=function(e,t,r){var n,o,a,l,c;if(r||(r=0),this.openNode(e,t,r),t.state=i.OpenTag,l=this.indent(e,t,r),l+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?l+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(l+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(l+=" [",l+=this.endline(e,t,r),t.state=i.InsideTag,o=0,a=(c=e.children).length;o<a;o++)n=c[o],l+=this.writeChildNode(n,t,r+1);t.state=i.CloseTag,l+="]"}return t.state=i.CloseTag,l+=t.spaceBeforeSlash+">",l+=this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),l},e.prototype.element=function(e,r,n){var a,l,c,u,h,p,d,f,m,g,y,v,_,b;for(m in n||(n=0),g=!1,y="",this.openNode(e,r,n),r.state=i.OpenTag,y+=this.indent(e,r,n)+"<"+e.name,v=e.attribs)o.call(v,m)&&(a=v[m],y+=this.attribute(a,r,n));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(y+=">",r.state=i.CloseTag,y+="</"+e.name+">"+this.endline(e,r,n)):(r.state=i.CloseTag,y+=r.spaceBeforeSlash+"/>"+this.endline(e,r,n));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(r.dontPrettyTextNodes)for(h=0,d=(_=e.children).length;h<d;h++)if(((l=_[h]).type===t.Text||l.type===t.Raw)&&null!=l.value){r.suppressPrettyCount++,g=!0;break}for(y+=">"+this.endline(e,r,n),r.state=i.InsideTag,p=0,f=(b=e.children).length;p<f;p++)l=b[p],y+=this.writeChildNode(l,r,n+1);r.state=i.CloseTag,y+=this.indent(e,r,n)+"</"+e.name+">",g&&r.suppressPrettyCount--,y+=this.endline(e,r,n),r.state=i.None}else y+=">",r.state=i.InsideTag,r.suppressPrettyCount++,g=!0,y+=this.writeChildNode(u,r,n+1),r.suppressPrettyCount--,g=!1,r.state=i.CloseTag,y+="</"+e.name+">"+this.endline(e,r,n);return this.closeNode(e,r,n),y},e.prototype.writeChildNode=function(e,r,i){switch(e.type){case t.CData:return this.cdata(e,r,i);case t.Comment:return this.comment(e,r,i);case t.Element:return this.element(e,r,i);case t.Raw:return this.raw(e,r,i);case t.Text:return this.text(e,r,i);case t.ProcessingInstruction:return this.processingInstruction(e,r,i);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,i);case t.DocType:return this.docType(e,r,i);case t.AttributeDeclaration:return this.dtdAttList(e,r,i);case t.ElementDeclaration:return this.dtdElement(e,r,i);case t.EntityDeclaration:return this.dtdEntity(e,r,i);case t.NotationDeclaration:return this.dtdNotation(e,r,i);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<?",t.state=i.InsideTag,n+=e.target,e.value&&(n+=" "+e.value),t.state=i.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.raw=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r),t.state=i.InsideTag,n+=e.value,t.state=i.CloseTag,n+=this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.text=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r),t.state=i.InsideTag,n+=e.value,t.state=i.CloseTag,n+=this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.dtdAttList=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<!ATTLIST",t.state=i.InsideTag,n+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(n+=" "+e.defaultValueType),e.defaultValue&&(n+=' "'+e.defaultValue+'"'),t.state=i.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.dtdElement=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<!ELEMENT",t.state=i.InsideTag,n+=" "+e.name+" "+e.value,t.state=i.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.dtdEntity=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<!ENTITY",t.state=i.InsideTag,e.pe&&(n+=" %"),n+=" "+e.name,e.value?n+=' "'+e.value+'"':(e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.nData&&(n+=" NDATA "+e.nData)),t.state=i.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.dtdNotation=function(e,t,r){var n;return this.openNode(e,t,r),t.state=i.OpenTag,n=this.indent(e,t,r)+"<!NOTATION",t.state=i.InsideTag,n+=" "+e.name,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?n+=' PUBLIC "'+e.pubID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),t.state=i.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=i.None,this.closeNode(e,t,r),n},e.prototype.openNode=function(e,t,r){},e.prototype.closeNode=function(e,t,r){},e.prototype.openAttribute=function(e,t,r){},e.prototype.closeAttribute=function(e,t,r){},e}()}).call(this)},function(e,t,r){"use strict";(function(t,i){var n=r(162);e.exports=b;var o,a=r(393);b.ReadableState=_,r(127).EventEmitter;var l=function(e,t){return e.listeners(t).length},c=r(256),u=r(203).Buffer,h=t.Uint8Array||function(){},p=Object.create(r(148));p.inherits=r(130);var d=r(394),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var m,g=r(395),y=r(257);p.inherits(b,c);var v=["error","close","destroy","pause","resume"];function _(e,t){e=e||{};var i=t instanceof(o=o||r(116));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(a||0===a)?a:l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=r(205).StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||r(116),!(this instanceof b))return new b(e);this._readableState=new _(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function x(e,t,r,i,n){var o,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,M(e)}}(e,a)):(n||(o=function(e,t){var r,i;return i=t,u.isBuffer(i)||i instanceof h||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?w(e,a,t,!1):T(e,a)):w(e,a,t,!1))):i||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function w(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&M(e)),T(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=y.destroy,b.prototype._undestroy=y.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),r=!0),x(this,e,t,!1,r)},b.prototype.unshift=function(e){return x(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return m||(m=r(205).StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var S=8388608;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=S?e=S:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(E,e):E(e))}function E(e){f("emit readable"),e.emit("readable"),I(e)}function T(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(A,e,t))}function A(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function P(e){f("readable nexttick read 0"),e.read(0)}function O(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;for(e-=n.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?n+=o:n+=o.slice(0,e),0==(e-=a)){a===o.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=u.allocUnsafe(e),i=t.head,n=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0==(e-=a)){a===o.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++n}return t.length-=n,r}(e,t),i}(e,t.buffer,t.decoder),r);var r}function F(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function j(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):M(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&F(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(i=e>0?k(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,t);var c=t&&!1===t.end||e===i.stdout||e===i.stderr?_:u;function u(){f("onend"),e.end()}o.endEmitted?n.nextTick(c):r.once("end",c),e.on("unpipe",(function t(i,n){f("onunpipe"),i===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",g),e.removeListener("unpipe",t),r.removeListener("end",u),r.removeListener("end",_),r.removeListener("data",m),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}));var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,I(e))}}(r);e.on("drain",h);var p=!1,d=!1;function m(t){f("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==j(o.pipes,e))&&!p&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function g(t){f("onerror",t),_(),e.removeListener("error",g),0===l(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),_()}function v(){f("onfinish"),e.removeListener("close",y),_()}function _(){f("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",r),o.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<n;o++)i[o].emit("unpipe",this,r);return this}var a=j(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&M(this):n.nextTick(P,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(O,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),r.objectMode&&null==n||(r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var o=0;o<v.length;o++)e.on(v[o],this.emit.bind(this,v[o]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=k}).call(this,r(101),r(106))},function(e,t,r){e.exports=r(127).EventEmitter},function(e,t,r){"use strict";var i=r(162);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){(function(e){var i=Function.prototype.apply;function n(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(397),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(101))},function(e,t,r){"use strict";e.exports=a;var i=r(116),n=Object.create(r(148));function o(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(130),n.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(248);async function n(e){const t=new Promise(((t,r)=>{Object(i.parseString)(e,((e,i)=>{e?r(e):t(i)}))}));return await t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i={aerialway:{label:"Aerialway",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="aerialway-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13,5H8V2.6c0.1854-0.1047,0.3325-0.2659,0.42-0.46L13.5,1.5C13.7761,1.5,14,1.2761,14,1s-0.2239-0.5-0.5-0.5L8.28,1.15&#xA;&#x9;C8.0954,0.9037,7.8077,0.7562,7.5,0.75C7.0963,0.752,6.7334,0.9966,6.58,1.37L1.5,2C1.2239,2,1,2.2239,1,2.5S1.2239,3,1.5,3&#xA;&#x9;l5.22-0.65C6.7967,2.4503,6.8917,2.5351,7,2.6V5H2C1.4477,5,1,5.4477,1,6v7c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V6&#xA;&#x9;C14,5.4477,13.5523,5,13,5z M7,11H3V7h4V11z M12,11H8V7h4V11z"/>\n</svg>'},airfield:{label:"Airfield",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="airfield-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5" d="M6.8182,0.6818H4.7727&#xA;&#x9;C4.0909,0.6818,4.0909,0,4.7727,0h5.4545c0.6818,0,0.6818,0.6818,0,0.6818H8.1818c0,0,0.8182,0.5909,0.8182,1.9545V4h6v2L9,8l-0.5,5&#xA;&#x9;l2.5,1.3182V15H4v-0.6818L6.5,13L6,8L0,6V4h6V2.6364C6,1.2727,6.8182,0.6818,6.8182,0.6818z"/>\n</svg>'},airport:{label:"Airport",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="airport-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path7712-0" d="M15,6.8182L15,8.5l-6.5-1&#xA;&#x9;l-0.3182,4.7727L11,14v1l-3.5-0.6818L4,15v-1l2.8182-1.7273L6.5,7.5L0,8.5V6.8182L6.5,4.5v-3c0,0,0-1.5,1-1.5s1,1.5,1,1.5v2.8182&#xA;&#x9;L15,6.8182z"/>\n</svg>'},"alcohol-shop":{label:"Alcohol shop",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="alcohol-shop-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,4h-4v3.44l0,0c0,0,0,0,0,0.06c0.003,0.9096,0.6193,1.7026,1.5,1.93V13H11c-0.2761,0-0.5,0.2239-0.5,0.5&#xA;&#x9;S10.7239,14,11,14h2c0.2761,0,0.5-0.2239,0.5-0.5S13.2761,13,13,13h-0.5V9.43c0.8807-0.2274,1.497-1.0204,1.5-1.93c0,0,0,0,0-0.06&#xA;&#x9;l0,0V4z M13,7.5c0,0.5523-0.4477,1-1,1s-1-0.4477-1-1V5h2V7.5z M5.5,2.5V2C5.7761,2,6,1.7761,6,1.5S5.7761,1,5.5,1V0.5&#xA;&#x9;C5.5,0.2239,5.2761,0,5,0H4C3.7239,0,3.5,0.2239,3.5,0.5V1C3.2239,1,3,1.2239,3,1.5S3.2239,2,3.5,2v0.5C3.5,3.93,1,5.57,1,7v6&#xA;&#x9;c0,0.5523,0.4477,1,1,1h5c0.5318-0.0465,0.9535-0.4682,1-1V7C8,5.65,5.5,3.85,5.5,2.5z M4.5,12C3.1193,12,2,10.8807,2,9.5&#xA;&#x9;S3.1193,7,4.5,7S7,8.1193,7,9.5S5.8807,12,4.5,12z"/>\n</svg>'},"american-football":{label:"American football",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="american-football-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7.53,3C3.09,3,1,7.5,1,7.5S3.09,12,7.53,12S14,7.5,14,7.5S12,3,7.53,3z M11,7v1.5C11,8.7761,10.7761,9,10.5,9&#xA;&#x9;S10,8.7761,10,8.5V8H8v0.5C8,8.7761,7.7761,9,7.5,9S7,8.7761,7,8.5V8H5v0.5C5,8.7761,4.7761,9,4.5,9S4,8.7761,4,8.5v-2&#xA;&#x9;C4,6.2239,4.2239,6,4.5,6S5,6.2239,5,6.5V7h2V6.5C7,6.2239,7.2239,6,7.5,6S8,6.2239,8,6.5V7h2V6.5C10,6.2239,10.2239,6,10.5,6&#xA;&#x9;S11,6.2239,11,6.5V7z"/>\n</svg>'},"amusement-park":{label:"Amusement park",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="amusement-park-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5082" d="M7.5,0C3.919,0,1,2.919,1,6.5c0,2.3161,1.2251,4.3484,3.0566,5.5H4l-1,2h9l-1-2h-0.0566&#xA;&#x9;C12.7749,10.8484,14,8.8161,14,6.5C14,2.919,11.081,0,7.5,0z M7.375,1.5059v3.5c-0.3108,0.026-0.6057,0.1482-0.8438,0.3496&#xA;&#x9;L4.0566,2.8809C4.9243,2.0555,6.0851,1.5376,7.375,1.5059z M7.625,1.5059c1.2899,0.0317,2.4507,0.5496,3.3184,1.375L8.4688,5.3555&#xA;&#x9;c-0.0007-0.0007-0.0013-0.0013-0.002-0.002C8.229,5.1532,7.9348,5.0317,7.625,5.0059V1.5059z M3.8809,3.0566l2.4746,2.4746&#xA;&#x9;c-0.0007,0.0007-0.0013,0.0013-0.002,0.002C6.1532,5.771,6.0317,6.0652,6.0059,6.375h-3.5&#xA;&#x9;C2.5376,5.0851,3.0555,3.9243,3.8809,3.0566z M11.1191,3.0566c0.8254,0.8676,1.3433,2.0285,1.375,3.3184h-3.5&#xA;&#x9;c-0.026-0.3108-0.1482-0.6057-0.3496-0.8438L11.1191,3.0566z M2.5059,6.625h3.5c0.026,0.3108,0.1482,0.6057,0.3496,0.8438&#xA;&#x9;L3.8809,9.9434C3.0555,9.0757,2.5376,7.9149,2.5059,6.625z M8.9941,6.625h3.5c-0.0317,1.2899-0.5496,2.4507-1.375,3.3184&#xA;&#x9;L8.6445,7.4688c0.0007-0.0007,0.0013-0.0013,0.002-0.002C8.8468,7.229,8.9683,6.9348,8.9941,6.625z M6.5312,7.6445&#xA;&#x9;c0.0007,0.0007,0.0013,0.0013,0.002,0.002C6.6716,7.7624,6.8297,7.8524,7,7.9121v3.5625c-1.1403-0.1124-2.1606-0.6108-2.9434-1.3555&#xA;&#x9;L6.5312,7.6445z M8.4688,7.6445l2.4746,2.4746c-0.7828,0.7447-1.803,1.243-2.9434,1.3555V7.9121&#xA;&#x9;C8.1711,7.852,8.33,7.7613,8.4688,7.6445z"/>\n</svg>'},aquarium:{label:"Aquarium",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="aquarium-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M10.9,11.6c-0.3-0.6-0.3-2.3,0-2.8c0.4-0.6,3.4,1.4,3.4,1.4c0.9,0.4,0.9-6.1,0-5.7&#xA;&#x9;c0,0-3.1,2.1-3.4,1.4c-0.3-0.7-0.3-2.1,0-2.8C11.2,2.5,15,2.4,15,2.4C15,1.7,12.1,1,10.9,1S8.4,1.1,6.8,1.8C5.2,2.4,3.9,3.4,2.7,4.6&#xA;&#x9;S0,8.2,0,8.9s1.5,2.8,3.7,3.7s3.3,1.1,4.5,1.3c1.1,0.1,2.6,0,3.9-0.3c1-0.2,2.9-0.7,2.9-1.1C15,12.3,11.2,12.2,10.9,11.6z M4.5,9.3&#xA;&#x9;C3.7,9.3,3,8.6,3,7.8s0.7-1.5,1.5-1.5S6,7,6,7.8S5.3,9.3,4.5,9.3z"/>\n</svg>'},"arrow-es":{label:"Arrow",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="arrow-es-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M10.2605799,13.3863593 C10.1395968,13.4287864 10.0527368,13.45 10,13.45 C9.86888463,13.45 9.7495566,13.3995324 9.66038175,13.3169629 C9.62336122,13.2826846 7.87888372,11.1717162 7.85312988,11.1460236 C7.76268134,11.05579 7.6378559,11 7.5,11 C7.36106093,11 7.23535789,11.0566702 7.14474446,11.1481569 C7.11712067,11.176047 5.38316951,13.2743383 5.3512134,13.3058781 C5.26092214,13.3949932 5.13688483,13.45 5,13.45 C4.94846592,13.45 4.86607927,13.4308817 4.75284004,13.3926451 C3.95322232,13.0192244 3.32116699,12.5002136 3.1295929,12.3130188 C3.04943242,12.222975 2.999749,12.1044865 2.999749,11.9743938 C2.999749,11.8971872 3.01724809,11.8240676 3.04849642,11.7587851 L7.04,1.29 L7.04612499,1.289958 C7.12548958,1.1187486 7.29887718,1 7.5,1 C7.6986843,1 7.87030186,1.11588651 7.9509469,1.28375376 L7.95635553,1.28371668 L11.962677,11.7834625 C11.993942,11.8487592 12.0005287,11.9135014 12.0005287,11.99073 C12.0005287,12.1135282 11.962677,12.2262726 11.8828125,12.3130188 C11.7159576,12.47 10.804184,13.1774445 10.2605799,13.3863593 Z"/>\n</svg>'},"art-gallery":{label:"Art gallery",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="art-gallery-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M10.71,4L7.85,1.15C7.6555,0.9539,7.339,0.9526,7.1429,1.1471C7.1419,1.1481,7.141,1.149,7.14,1.15L4.29,4H1.5&#xA;&#x9;C1.2239,4,1,4.2239,1,4.5v9C1,13.7761,1.2239,14,1.5,14h12c0.2761,0,0.5-0.2239,0.5-0.5v-9C14,4.2239,13.7761,4,13.5,4H10.71z&#xA;&#x9; M7.5,2.21L9.29,4H5.71L7.5,2.21z M13,13H2V5h11V13z M5,8C4.4477,8,4,7.5523,4,7s0.4477-1,1-1s1,0.4477,1,1S5.5523,8,5,8z M12,12&#xA;&#x9;H4.5L6,9l1.25,2.5L9.5,7L12,12z"/>\n</svg>'},attraction:{label:"Attraction",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="attraction-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect7143" d="M6,2C5.446,2,5.2478,2.5045,5,3L4.5,4h-2C1.669,4,1,4.669,1,5.5v5C1,11.331,1.669,12,2.5,12h10&#xA;&#x9;c0.831,0,1.5-0.669,1.5-1.5v-5C14,4.669,13.331,4,12.5,4h-2L10,3C9.75,2.5,9.554,2,9,2H6z M2.5,5C2.7761,5,3,5.2239,3,5.5&#xA;&#x9;S2.7761,6,2.5,6S2,5.7761,2,5.5S2.2239,5,2.5,5z M7.5,5c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,5,7.5,5z&#xA;&#x9; M7.5,6.5C6.6716,6.5,6,7.1716,6,8l0,0c0,0.8284,0.6716,1.5,1.5,1.5l0,0C8.3284,9.5,9,8.8284,9,8l0,0C9,7.1716,8.3284,6.5,7.5,6.5&#xA;&#x9;L7.5,6.5z"/>\n</svg>'},bakery:{label:"Bakery",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bakery-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5230" d="M5.2941,4.3824L6,9.5&#xA;&#x9;c0,0,0,1,1,1h1c1,0,1-1,1-1l0.7059-5.1176C9.7059,3,7.5,3,7.5,3S5.291,3,5.2941,4.3824z M3.5,5C2,5,2,6,2,6l1,4h1.5&#xA;&#x9;c0.755,0,0.7941-0.7647,0.7941-0.7647L4.5,5H3.5z M1.5,7.5c0,0-0.6176-0.0294-1.0588,0.4118C0,8.3529,0,8.7941,0,8.7941V11h0.8824&#xA;&#x9;C2,11,2,10,2,10L1.5,7.5z"/>\n  <path id="path5230-2" d="M11.5,5C13,5,13,6,13,6l-1,4h-1.5&#xA;&#x9;c-0.755,0-0.7941-0.7647-0.7941-0.7647L10.5,5H11.5z M13.5,7.5c0,0,0.6176-0.0294,1.0588,0.4118C15,8.3529,15,8.7941,15,8.7941V11&#xA;&#x9;h-0.8824C13,11,13,10,13,10L13.5,7.5z"/>\n</svg>'},bank:{label:"Bank",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bank-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect5668" d="M1,3C0.446,3,0,3.446,0,4v7c0,0.554,0.446,1,1,1h13c0.554,0,1-0.446,1-1V4c0-0.554-0.446-1-1-1H1z M1,4h1.5&#xA;&#x9;C2.7761,4,3,4.2239,3,4.5S2.7761,5,2.5,5S2,4.7761,2,4.5L1.5,5C1.7761,5,2,5.2239,2,5.5S1.7761,6,1.5,6S1,5.7761,1,5.5V4z M7.5,4&#xA;&#x9;C8.8807,4,10,5.567,10,7.5l0,0C10,9.433,8.8807,11,7.5,11S5,9.433,5,7.5S6.1193,4,7.5,4z M12.5,4H14v1.5C14,5.7761,13.7761,6,13.5,6&#xA;&#x9;S13,5.7761,13,5.5S13.2239,5,13.5,5L13,4.5C13,4.7761,12.7761,5,12.5,5S12,4.7761,12,4.5S12.2239,4,12.5,4z M7.5,5.5&#xA;&#x9;c-0.323,0-0.5336,0.1088-0.6816,0.25h1.3633C8.0336,5.6088,7.823,5.5,7.5,5.5z M6.625,6C6.5795,6.091,6.5633,6.1711,6.5449,6.25&#xA;&#x9;h1.9102C8.4367,6.1711,8.4205,6.091,8.375,6H6.625z M6.5,6.5v0.25h2V6.5H6.5z M6.5,7v0.25h2V7H6.5z M6.5,7.5v0.25h2V7.5H6.5z M6.5,8&#xA;&#x9;L6.25,8.25h2L8.5,8H6.5z M6,8.5c0,0,0.0353,0.1024,0.1016,0.25H8.375L8,8.5H6z M1.5,9C1.7761,9,2,9.2239,2,9.5S1.7761,10,1.5,10&#xA;&#x9;L2,10.5C2,10.2239,2.2239,10,2.5,10S3,10.2239,3,10.5S2.7761,11,2.5,11H1V9.5C1,9.2239,1.2239,9,1.5,9z M6.2383,9&#xA;&#x9;C6.2842,9.0856,6.3144,9.159,6.375,9.25h2.2676C8.7092,9.1121,8.75,9,8.75,9H6.2383z M13.5,9C13.7761,9,14,9.2239,14,9.5V11h-1.5&#xA;&#x9;c-0.2761,0-0.5-0.2239-0.5-0.5s0.2239-0.5,0.5-0.5s0.5,0.2239,0.5,0.5l0.5-0.5C13.2239,10,13,9.7761,13,9.5S13.2239,9,13.5,9z&#xA;&#x9; M6.5664,9.5c0.0786,0.0912,0.1647,0.1763,0.2598,0.25h1.4199C8.3462,9.6727,8.4338,9.5883,8.5,9.5H6.5664z"/>\n</svg>'},bar:{label:"Bar",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bar-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4" d="M7.5,1c-2,0-7,0.25-6.5,0.75L7,8v4&#xA;&#x9;c0,1-3,0.5-3,2h7c0-1.5-3-1-3-2V8l6-6.25C14.5,1.25,9.5,1,7.5,1z M7.5,2c2.5,0,4.75,0.25,4.75,0.25L11.5,3h-8L2.75,2.25&#xA;&#x9;C2.75,2.25,5,2,7.5,2z"/>\n</svg>'},barrier:{label:"Barrier",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="barrier-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M13,3H2A1,1,0,0,0,1,4v6a1,1,0,0,0,1,1H3v2.5a.5.5,0,0,0,1,0V13h7v.5a.5.5,0,0,0,1,0V11h1a1,1,0,0,0,1-1V4A1,1,0,0,0,13,3Zm0,1V6L11,4ZM9.5,4,13,7.5V10L7,4Zm-4,6L2,6.5V4l6,6ZM2,10V8l2,2Zm9,2H4V11h7Zm-.207-2H9.5l-6-6h2l6,6Z"/>\n</svg>'},baseball:{label:"Baseball",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="baseball-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M10,3.5C10,4.3284,9.3284,5,8.5,5S7,4.3284,7,3.5S7.6716,2,8.5,2S10,2.6716,10,3.5z M7,0.28C7,0.1254,6.8746,0,6.72,0&#xA;&#x9;c0,0,0,0,0,0C6.6221,0.0262,6.5348,0.0821,6.47,0.16L4,4.59C3.9941,4.6331,3.9941,4.6769,4,4.72C4,4.8746,4.1254,5,4.28,5&#xA;&#x9;c0.1015-0.0243,0.1926-0.0803,0.26-0.16L7,0.41C7.006,0.3669,7.006,0.3231,7,0.28z M12.9,14.2L12.9,14.2L10,6.39l0,0&#xA;&#x9;C9.9526,6.1627,9.7522,5.9999,9.52,6h-5c-0.2761,0-0.5,0.2239-0.5,0.5S4.2439,7,4.52,7H7l1.45,2.51l-4.27,4.61l0,0&#xA;&#x9;C4.0659,14.2132,3.9998,14.3527,4,14.5C4,14.7761,4.2239,15,4.5,15c0.1224-0.0006,0.2401-0.047,0.33-0.13l0,0l4.45-4.15l2.76,4l0,0&#xA;&#x9;c0.0895,0.1592,0.2574,0.2584,0.44,0.26c0.2796,0.0002,0.5092-0.2207,0.52-0.5C12.9958,14.3787,12.961,14.281,12.9,14.2z"/>\n</svg>'},basketball:{label:"Basketball",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="basketball-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="icon_concepts:_sports_leisure" d="M3.66,7.0016H2.03a5.3231,5.3231,0,0,1,1.01-2.71A8.7122,8.7122,0,0,1,3.66,7.0016Zm1.075,0h2.34v-4.97a5.4585,5.4585,0,0,0-3.24,1.44A9.2947,9.2947,0,0,1,4.735,7.0016Zm3.19-4.97v4.97h2.34a9.2947,9.2947,0,0,1,.9-3.53A5.4585,5.4585,0,0,0,7.925,2.0316Zm4.035,2.26a8.7122,8.7122,0,0,0-.62,2.71h1.63A5.3231,5.3231,0,0,0,11.96,4.2916ZM14,8.7516a.7555.7555,0,0,1-.75.75H11.72l-.76,1.52v2.38a.392.392,0,0,1-.24.35.5863.5863,0,0,1-.14.02.3274.3274,0,0,1-.26-.11l-1.02-1.01-1.59,1.06a.3975.3975,0,0,1-.42,0l-1.59-1.06-1.02,1.01a.3709.3709,0,0,1-.4.09.392.392,0,0,1-.24-.35v-2.38l-.76-1.52H1.75a.75.75,0,0,1,0-1.5h11.5A.749.749,0,0,1,14,8.75Zm-7.14.75H4.12l.63,1.27a.3175.3175,0,0,1,.04.16v1.56l.56-.55Zm1.98,2.55L7.5,9.8916l-1.34,2.16,1.34.9Zm2.05-2.55H8.14l1.51,2.44.56.55v-1.56a.3175.3175,0,0,1,.04-.16Z"/>\n</svg>'},bbq:{label:"BBQ",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="bbq-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M9.32,7.655C10.8782,7.108,11.9471,5.6506,12,4H3c0.053,1.6299,1.0978,3.0728,2.63,3.631L4.923,9.044&#xA;&#x9;c-1.3571-0.2355-2.6482,0.6737-2.8837,2.0308s0.6737,2.6482,2.0308,2.8837C4.9927,14.1187,5.9273,13.7485,6.49,13h4.223l0.335,0.717&#xA;&#x9;c0.0836,0.1735,0.2594,0.2836,0.452,0.283c0.0733,0.0003,0.1457-0.0158,0.212-0.047c0.2497-0.117,0.3575-0.4141,0.241-0.664&#xA;&#x9;L9.32,7.655z M4.5,12.75c-0.6904,0-1.25-0.5596-1.25-1.25s0.5596-1.25,1.25-1.25s1.25,0.5596,1.25,1.25&#xA;&#x9;C5.7484,12.1897,5.1897,12.7484,4.5,12.75z M6.95,12c0.2066-1.007-0.2268-2.0374-1.091-2.594L6.6,7.923&#xA;&#x9;c0.577,0.1042,1.168,0.1042,1.745,0l1.9,4.07L6.95,12z M4.75,1C4.6119,1,4.5,1.1119,4.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1&#xA;&#x9;C3,2.8881,3.1119,3,3.25,3S3.5,2.8881,3.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C5,1.1119,4.8881,1,4.75,1z M6.75,1&#xA;&#x9;C6.6119,1,6.5,1.1119,6.5,1.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C5,2.8881,5.1119,3,5.25,3S5.5,2.8881,5.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C7,1.1119,6.8881,1,6.75,1z M8.75,1C8.6119,1,8.5,1.1119,8.5,1.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C7,2.8881,7.1119,3,7.25,3S7.5,2.8881,7.5,2.75c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C9,1.1119,8.8881,1,8.75,1z M10.75,1&#xA;&#x9;c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5c-1,0-1,1-1,1C9,2.8881,9.1119,3,9.25,3S9.5,2.8881,9.5,2.75&#xA;&#x9;c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C11,1.1119,10.8881,1,10.75,1z M12.75,1c-0.1381,0-0.25,0.1119-0.25,0.25c0,0.5-0.5,0.5-0.5,0.5&#xA;&#x9;c-1,0-1,1-1,1C11,2.8881,11.1119,3,11.25,3s0.25-0.1119,0.25-0.25c0-0.5,0.5-0.5,0.5-0.5c1,0,1-1,1-1C13,1.1119,12.8881,1,12.75,1z"/>\n</svg>'},beach:{label:"Beach",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="beach-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M5.3608,1.67l-.01,4.02a4.4523,4.4523,0,0,0-1.1-.11c-.37.1-.74.63-1.1.76A4.2019,4.2019,0,0,1,5.3608,1.67Zm2.41-.64,2.03,3.45a3.1832,3.1832,0,0,1,.84-.61c.36-.1.94.17,1.34.11A4.2018,4.2018,0,0,0,7.7708,1.03ZM1.0008,13h13c-.66-.66-2.64-1.11-4.34-1.33l-1.87-7c.52-.05,1.15.03,1.53,0l-2.11-3.6h-.01a6.1743,6.1743,0,0,0-.7.14,4.3792,4.3792,0,0,0-.64.22l-.01,4.15c.35-.17.84-.54,1.3-.74l1.8,6.74c-.58-.05-1.09-.08-1.45-.08C6.0308,11.5,2.0008,12,1.0008,13Z"/>\n</svg>'},beer:{label:"Beer",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="beer-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12,5V2c0,0-1-1-4.5-1S3,2,3,2v3c0.0288,1.3915,0.3706,2.7586,1,4c0.6255,1.4348,0.6255,3.0652,0,4.5c0,0,0,1,3.5,1&#xA;&#x9;s3.5-1,3.5-1c-0.6255-1.4348-0.6255-3.0652,0-4.5C11.6294,7.7586,11.9712,6.3915,12,5z M7.5,13.5&#xA;&#x9;c-0.7966,0.035-1.5937-0.0596-2.36-0.28c0.203-0.7224,0.304-1.4696,0.3-2.22h4.12c-0.004,0.7504,0.097,1.4976,0.3,2.22&#xA;&#x9;C9.0937,13.4404,8.2966,13.535,7.5,13.5z M7.5,5C6.3136,5.0299,5.1306,4.8609,4,4.5v-2C5.131,2.1411,6.3137,1.9722,7.5,2&#xA;&#x9;C8.6863,1.9722,9.869,2.1411,11,2.5v2C9.8694,4.8609,8.6864,5.0299,7.5,5z"/>\n</svg>'},bicycle:{label:"Bicycle",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bicycle-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4668" d="&#xA;&#x9;M7.5,2c-0.6761-0.01-0.6761,1.0096,0,1H9v1.2656l-2.8027,2.334L5.2226,4H5.5c0.6761,0.01,0.6761-1.0096,0-1h-2&#xA;&#x9;c-0.6761-0.01-0.6761,1.0096,0,1h0.6523L5.043,6.375C4.5752,6.1424,4.0559,6,3.5,6C1.5729,6,0,7.5729,0,9.5S1.5729,13,3.5,13&#xA;&#x9;S7,11.4271,7,9.5c0-0.6699-0.2003-1.2911-0.5293-1.8242L9.291,5.3262l0.4629,1.1602C8.7114,7.0937,8,8.2112,8,9.5&#xA;&#x9;c0,1.9271,1.5729,3.5,3.5,3.5S15,11.4271,15,9.5S13.4271,6,11.5,6c-0.2831,0-0.5544,0.0434-0.8184,0.1074L10,4.4023V2.5&#xA;&#x9;c0-0.2761-0.2239-0.5-0.5-0.5H7.5z M3.5,7c0.5923,0,1.1276,0.2119,1.5547,0.5527l-1.875,1.5625&#xA;&#x9;c-0.5109,0.4273,0.1278,1.1945,0.6406,0.7695l1.875-1.5625C5.8835,8.674,6,9.0711,6,9.5C6,10.8866,4.8866,12,3.5,12S1,10.8866,1,9.5&#xA;&#x9;S2.1133,7,3.5,7L3.5,7z M11.5,7C12.8866,7,14,8.1134,14,9.5S12.8866,12,11.5,12S9,10.8866,9,9.5c0-0.877,0.4468-1.6421,1.125-2.0879&#xA;&#x9;l0.9102,2.2734c0.246,0.6231,1.1804,0.2501,0.9297-0.3711l-0.9082-2.2695C11.2009,7.0193,11.3481,7,11.5,7L11.5,7z"/>\n</svg>'},"bicycle-share":{label:"Bicycle share",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bicycle-share-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="circle4604" d="&#xA;&#x9;M10,1C9.4477,1,9,1.4477,9,2c0,0.5523,0.4477,1,1,1s1-0.4477,1-1C11,1.4477,10.5523,1,10,1z M8.1445,2.9941&#xA;&#x9;c-0.13,0.0005-0.2547,0.0517-0.3477,0.1426l-2.6406,2.5c-0.2256,0.2128-0.2051,0.5775,0.043,0.7637L7,7.75v2.75&#xA;&#x9;c-0.01,0.6762,1.0096,0.6762,1,0v-3c0.0003-0.1574-0.0735-0.3057-0.1992-0.4004L7.0332,6.5234l1.818-1.7212l0.7484,0.9985&#xA;&#x9;C9.6943,5.9265,9.8426,6.0003,10,6h1.5c0.6761,0.01,0.6761-1.0096,0-1h-1.25L9.5,4L8.9004,3.1992&#xA;&#x9;C8.8103,3.0756,8.6685,3,8.5156,2.9941H8.1445z M3,7c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S4.6569,7,3,7z M12,7&#xA;&#x9;c-1.6569,0-3,1.3432-3,3s1.3431,3,3,3s3-1.3432,3-3S13.6569,7,12,7z M3,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2&#xA;&#x9;S1.8954,8,3,8z M12,8c1.1046,0,2,0.8954,2,2s-0.8954,2-2,2s-2-0.8954-2-2S10.8954,8,12,8z"/>\n</svg>'},"blood-bank":{label:"Blood bank",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="blood-bank-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11.2,7.1L11.2,7.1L7.5,2L3.8,7.1h0C3.3,7.8,3,8.7,3,9.6C3,12,5,14,7.5,14c0,0,0,0,0,0C10,14,12,12,12,9.6c0,0,0,0,0,0&#xA;&#x9;C12,8.7,11.7,7.8,11.2,7.1z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z"/>\n</svg>'},"boat-es":{label:"Boat",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="boat-es-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7.5,1 C8,1 9.87566518,2.18104212 10.5,4.5 C10.9049265,6.00401254 11.0940068,8.88591087 11,13.1405515 C10.9938023,13.421051 10.753592,13.5685436 10.630388,13.6000274 C9.58692536,13.8666758 8.54346268,14 7.5,14 C6.45774448,14 5.41548895,13.8669841 4.37323343,13.6009523 C4.24882229,13.5691968 4,13.4234619 4,13.1482845 C4,8.89280475 4.09292918,6.01197734 4.5,4.5 C5.1272892,2.1700687 7,1 7.5,1 Z M5,6.5 L5,7 C5.23163517,6.54355194 6.28428417,6 7.49376313,6 C8.70324208,6 9.76836483,6.54355194 10,7 L10,6.5 C10,5.67157288 8.874475,5 7.49376313,5 C6.11305125,5 5,5.67157288 5,6.5 Z M6,8 C5.44771525,8 5,8.44771525 5,9 L5,11 C5,11.5522847 5.44771525,12 6,12 L9,12 C9.55228475,12 10,11.5522847 10,11 L10,9 C10,8.44771525 9.55228475,8 9,8 L6,8 Z"/>\n</svg>'},"bowling-alley":{label:"Bowling alley",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="bowling-alley-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="icon_concepts:_sports_leisure" d="M8.83,5.39a11.0127,11.0127,0,0,0-.96,4.28,11.4686,11.4686,0,0,0,.58,3.69A4.9424,4.9424,0,0,1,6,14,5,5,0,1,1,8.98,4.99C8.94,5.12,8.88,5.25,8.83,5.39ZM4.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C4.12,8.5128,4.12,8.5064,4.12,8.5ZM4.5,7.12a.62.62,0,1,0-.62-.62h0a.6106.6106,0,0,0,.6011.62ZM6.12,8.5a.62.62,0,1,0-.62.62h0a.6105.6105,0,0,0,.62-.6009C6.12,8.5128,6.12,8.5064,6.12,8.5Zm4.8022-5.3341c0-.7222-.1444-.7222-.1444-1.4444a.7222.7222,0,0,1,1.4444-.0007v.0007c0,.7222-.1444.7222-.1444,1.4444,0,2.1667,1.5528,3.6168,1.5528,6.5,0,2.1667-.6861,4.3333-1.4083,4.3333H10.7778c-.7222,0-1.4083-2.1667-1.4083-4.3333C9.3694,6.7826,10.9222,5.3325,10.9222,3.1659Z"/>\n</svg>'},bridge:{label:"Bridge",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="bridge-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M0,8.842V13h2v-1c0.036-1.089,0.911-1.964,2-2c1.089,0.036,1.964,0.911,2,2v1h3v-1c0.036-1.089,0.911-1.964,2-2&#xA;&#x9;c1.089,0.036,1.964,0.911,2,2v1h2V8.842C10.6,3.082,3.071,4.4,0,8.842z M9.5,5.734c0.514,0.121,1.016,0.289,1.5,0.5V9H9.5V5.734z&#xA;&#x9; M9,5.634V9H7.5V5.506C8.003,5.506,8.505,5.549,9,5.634z M3.5,6.477C3.98,6.229,4.482,6.026,5,5.871V9H3.5V6.477z M5.5,9V5.73&#xA;&#x9;C5.993,5.615,6.495,5.543,7,5.515V9H5.5z M3,6.744V9H0.5C1.176,8.094,2.032,7.328,3,6.744z M11.5,9V6.5l-0.053-0.053&#xA;&#x9;C12.649,7.05,13.694,7.924,14.5,9H11.5z"/>\n</svg>'},building:{label:"Building",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="building-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M3,2v11h5v-3h3v3h1V2H3z M7,12H4v-2h3V12z M7,9H4V7h3V9z M7,6H4V4h3V6z M11,9H8V7h3V9z M11,6H8V4h3V6z"/>\n</svg>'},"building-alt1":{label:"Building 2",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="building-alt1-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,13.5v-9C11,4.2,10.8,4,10.5,4H9V1L5,2.1v11.4H2V14h11v-0.5H11z M7,13.5V3h1v10.5H7z"/>\n</svg>'},bus:{label:"Bus",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="bus-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path8043" d="M4,0C2.6364,0,1,0.7433,1,2.7461v5.4531V12c0,0,0,1,1,1v1c0,0,0,1,1,1s1-1,1-1v-1h7v1c0,0,0,1,1,1s1-1,1-1v-1&#xA;&#x9;c0,0,1,0,1-1V2.7461C14,0.7006,12.764,0,11.4004,0H4z M4.25,1.5h6.5C10.8885,1.5,11,1.6115,11,1.75S10.8885,2,10.75,2h-6.5&#xA;&#x9;C4.1115,2,4,1.8885,4,1.75S4.1115,1.5,4.25,1.5z M3,3h9c1,0,1,0.9668,1,0.9668V7c0,0,0,1-1,1H3C2,8,2,7,2,7V4C2,4,2,3,3,3z M3,10&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S2.4477,10,3,10z M12,10c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;S11.4477,10,12,10z"/>\n</svg>'},cafe:{label:"Cafe",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="cafe-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12,5h-2V3H2v4c0.0133,2.2091,1.8149,3.9891,4.024,3.9758C7.4345,10.9673,8.7362,10.2166,9.45,9H12c1.1046,0,2-0.8954,2-2&#xA;&#x9;S13.1046,5,12,5z M12,8H9.86C9.9487,7.6739,9.9958,7.3379,10,7V6h2c0.5523,0,1,0.4477,1,1S12.5523,8,12,8z M10,12.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-7C2.2239,13,2,12.7761,2,12.5S2.2239,12,2.5,12h7C9.7761,12,10,12.2239,10,12.5z"/>\n</svg>'},campsite:{label:"Campsite",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="campsite-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect3335" d="M7,1.5&#xA;&#x9;l-5.5,9H1c-1,0-1,1-1,1v1c0,0,0,1,1,1h13c1,0,1-1,1-1v-1c0,0,0-1-1-1h-0.5L8,1.5C7.8,1.1,7.2,1.1,7,1.5z M7.5,5l3.2,5.5H4.2L7.5,5z"/>\n</svg>'},car:{label:"Car",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="car-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,7c-0.004-0.6904-0.4787-1.2889-1.15-1.45l-1.39-3.24l0,0l0,0l0,0C11.3833,2.1233,11.2019,2.001,11,2H4&#xA;&#x9;C3.8124,2.0034,3.6425,2.1115,3.56,2.28l0,0l0,0l0,0L2.15,5.54C1.475,5.702,0.9994,6.3059,1,7v3.5h1v1c0,0.5523,0.4477,1,1,1&#xA;&#x9;s1-0.4477,1-1v-1h7v1c0,0.5523,0.4477,1,1,1s1-0.4477,1-1v-1h1V7z M4.3,3h6.4l1.05,2.5h-8.5L4.3,3z M3,9C2.4477,9,2,8.5523,2,8&#xA;&#x9;s0.4477-1,1-1s1,0.4477,1,1S3.5523,9,3,9z M12,9c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.5523,9,12,9z"/>\n</svg>'},"car-top-es":{label:"Car 2",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="car-top-es-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,7 L11,12 C11,13.1045695 10.1045695,14 9,14 L6,14 C4.8954305,14 4,13.1045695 4,12 L4,7 L3,7 C3,6.44771525 3.44771525,6 4,6 L4,4 C4,2.34314575 5.34314575,1 7,1 L8,1 C9.65685425,1 11,2.34314575 11,4 L11,6 C11.5522847,6 12,6.44771525 12,7 L11,7 Z M5.5,10 L5,11 C5.83333333,11.3333333 6.66666667,11.5 7.5,11.5 C8.33333333,11.5 9.16666667,11.3333333 10,11 L9.5,10 L7.5,10 L5.5,10 Z M5,6 L5.5,7 C6.16666667,6.66666667 6.83333333,6.5 7.5,6.5 C8.16666667,6.5 8.83333333,6.66666667 9.5,7 L10,6 C9.16666667,5.33333333 8.33333333,5 7.5,5 C6.66666667,5 5.83333333,5.33333333 5,6 Z M4.89290929,3.32453333 C5.05156229,3.45765901 5.39601532,3.30835135 5.66226667,2.99104535 C5.92851801,2.67373936 6.01574371,2.30859234 5.85709071,2.17546667 C5.69843771,2.04234099 5.35398468,2.19164865 5.08773333,2.50895465 C4.82148199,2.82626064 4.73425629,3.19140766 4.89290929,3.32453333 Z M10.1114481,3.32453333 C10.2701011,3.19140766 10.1828754,2.82626064 9.91662404,2.50895465 C9.65037269,2.19164865 9.30591967,2.04234099 9.14726667,2.17546667 C8.98861367,2.30859234 9.07583936,2.67373936 9.34209071,2.99104535 C9.60834205,3.30835135 9.95279508,3.45765901 10.1114481,3.32453333 Z"/>\n</svg>'},"car-rental":{label:"Car rental",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="car-rental-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <g>\n    <path d="M11.5039,1H10C9.2616,1,8.6238,1.4047,8.2774,2H3.5l-1,1l1,1l1-1l1,1l1-1l1,1h0.7774C8.6238,4.5953,9.2616,5,10,5h1.4982&#xA;&#x9;&#x9;C11.7753,5,12,4.7753,12,4.4982V1.4961C12,1.2221,11.7779,1,11.5039,1z M11,3.5C11,3.7761,10.7761,4,10.5,4S10,3.7761,10,3.5v-1&#xA;&#x9;&#x9;C10,2.2238,10.2239,2,10.5,2S11,2.2238,11,2.5V3.5z"/>\n    <path d="M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z"/>\n  </g>\n</svg>'},"car-repair":{label:"Car repair",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="car-repair-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <g>\n    <path d="M10.9252,9.0103l-0.3636-2.1802C10.4824,6.3491,10.0713,6,9.583,6H5.417C4.9302,6,4.5186,6.3486,4.4385,6.8291&#xA;&#x9;&#x9;L4.0746,9.0117C3.4776,9.0436,3,9.5277,3,10.1327V13h1c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h3c0,0.5522,0.4477,1,1,1s1-0.4478,1-1h1&#xA;&#x9;&#x9;v-2.8744C12,9.522,11.5219,9.0383,10.9252,9.0103z M4.75,12C4.3358,12,4,11.6642,4,11.25c0-0.4142,0.3358-0.75,0.75-0.75&#xA;&#x9;&#x9;s0.75,0.3358,0.75,0.75C5.5,11.6642,5.1642,12,4.75,12z M5.0887,9L5.417,7l4.1582-0.0068L9.9098,9H5.0887z M10.25,12&#xA;&#x9;&#x9;c-0.4142,0-0.75-0.3358-0.75-0.75c0-0.4142,0.3358-0.75,0.75-0.75S11,10.8358,11,11.25C11,11.6642,10.6642,12,10.25,12z"/>\n    <path d="M12,2H5.7889C5.4029,1.1177,4.5247,0.5,3.5,0.5S1.5971,1.1177,1.2111,2H3.5L4,3L3.5,4H1.2111&#xA;&#x9;&#x9;C1.5972,4.8821,2.4754,5.5,3.5,5.5S5.4028,4.8821,5.7889,4H12c0.5527,0,1-0.4478,1-1S12.5527,2,12,2z"/>\n  </g>\n</svg>'},casino:{label:"Casino",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="casino-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M8.5,10c0.4561,0.6072,1.1821,1,2,1c1.3807,0,2.5-1.1193,2.5-2.5c0-0.5642-0.1938-1.0789-0.509-1.4973L12.5,7l-5-6l-5,6&#xA;&#x9;l0.009,0.0027C2.1938,7.4211,2,7.9358,2,8.5C2,9.8807,3.1193,11,4.5,11c0.8179,0,1.5439-0.3928,2-1&#xA;&#x9;C6.5997,9.8672,6.7902,9.6135,7,9.3337V11.5C7,13,4.5,13,4.5,13C4.2239,13,4,13.2238,4,13.5C4,13.7761,4.2239,14,4.5,14H7h1h2.5&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5c0-0.2762-0.2239-0.5-0.5-0.5c0,0-2.5,0-2.5-1.5V9.3337C8.2098,9.6135,8.4003,9.8672,8.5,10z"/>\n</svg>'},castle:{label:"Castle",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="castle-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,4H4C3.4477,4,3,3.5523,3,3V0.5C3,0.2239,3.2239,0,3.5,0S4,0.2239,4,0.5V2h1V1c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V1&#xA;&#x9;c0-0.5523,0.4477-1,1-1s1,0.4477,1,1v1h1V0.5C11,0.2239,11.2239,0,11.5,0S12,0.2239,12,0.5V3C12,3.5523,11.5523,4,11,4z M14,14.5&#xA;&#x9;c0,0.2761-0.2239,0.5-0.5,0.5h-12C1.2239,15,1,14.7761,1,14.5S1.2239,14,1.5,14H2c0.5523,0,1-0.4477,1-1c0,0,1-6,1-7&#xA;&#x9;c0-0.5523,0.4477-1,1-1h5c0.5523,0,1,0.4477,1,1c0,1,1,7,1,7c0,0.5523,0.4477,1,1,1h0.5c0.2723-0.0001,0.4946,0.2178,0.5,0.49V14.5z&#xA;&#x9; M9,10.5C9,9.6716,8.3284,9,7.5,9S6,9.6716,6,10.5V14h3V10.5z"/>\n</svg>'},cemetery:{label:"Cemetery",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="cemetery-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11.46,12h-0.68L12,3.55c0.0175-0.2867-0.2008-0.5332-0.4874-0.5507C11.4884,2.9979,11.4641,2.9981,11.44,3h-1.18&#xA;&#x9;c0-0.92-1.23-2-2.75-2S4.77,2.08,4.77,3H3.54C3.253,2.9885,3.0111,3.2117,2.9995,3.4987C2.9988,3.5158,2.999,3.5329,3,3.55L4.2,12&#xA;&#x9;H3.55C3.2609,11.9886,3.0162,12.2112,3,12.5V14h9v-1.51C11.9839,12.2067,11.7435,11.9886,11.46,12z M4.5,5h6v1h-6V5z"/>\n</svg>'},"charging-station":{label:"Charging station",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="charging-station-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13,4V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184&#xA;&#x9;C11.9987,2.5289,11.9992,2.5395,12,2.55V5c0,0.5523,0.4477,1,1,1v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2&#xA;&#x9;C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1&#xA;&#x9;V9h1.5C10.7761,9,11,9.2239,11,9.5v2c0,0.8284,0.6716,1.5,1.5,1.5c0.8284,0,1.5-0.6716,1.5-1.5V5C14,4.4477,13.5523,4,13,4z&#xA;&#x9; M7.2004,7.3995l-2.6006,3.4674l-0.0164-0.0072C4.5369,10.9384,4.4667,11,4.3688,11c-0.1476,0-0.2672-0.1196-0.2672-0.2672&#xA;&#x9;c0-0.028,0.0217-0.0463,0.0297-0.0717l-0.0177-0.0078l0.7766-2.3245C4.9442,8.1671,4.8238,8,4.6533,8H2.9994&#xA;&#x9;C2.7936,8,2.6762,7.7651,2.7996,7.6005l2.6006-3.4674l0.0164,0.0072C5.4631,4.0616,5.5333,4,5.6312,4&#xA;&#x9;c0.1476,0,0.2672,0.1196,0.2672,0.2672c0,0.028-0.0217,0.0463-0.0297,0.0717l0.0176,0.0078L5.1099,6.6711&#xA;&#x9;C5.0558,6.8329,5.1762,7,5.3467,7h1.6539C7.2064,7,7.3238,7.2349,7.2004,7.3995z"/>\n</svg>'},cinema:{label:"Cinema",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="cinema-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,7.5v2c0,0.2761-0.2239,0.5-0.5,0.5S13,9.7761,13,9.5c0,0,0.06-0.5-1-0.5h-1v2.5c0,0.2761-0.2239,0.5-0.5,0.5h-8&#xA;&#x9;C2.2239,12,2,11.7761,2,11.5v-4C2,7.2239,2.2239,7,2.5,7h8C10.7761,7,11,7.2239,11,7.5V8h1c1.06,0,1-0.5,1-0.5&#xA;&#x9;C13,7.2239,13.2239,7,13.5,7S14,7.2239,14,7.5z M4,3C2.8954,3,2,3.8954,2,5s0.8954,2,2,2s2-0.8954,2-2S5.1046,3,4,3z M4,6&#xA;&#x9;C3.4477,6,3,5.5523,3,5s0.4477-1,1-1s1,0.4477,1,1S4.5523,6,4,6z M8.5,2C7.1193,2,6,3.1193,6,4.5S7.1193,7,8.5,7S11,5.8807,11,4.5&#xA;&#x9;S9.8807,2,8.5,2z M8.5,6C7.6716,6,7,5.3284,7,4.5S7.6716,3,8.5,3S10,3.6716,10,4.5S9.3284,6,8.5,6z"/>\n</svg>'},circle:{label:"Circle",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="circle-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,7.5c0,3.5899-2.9101,6.5-6.5,6.5S1,11.0899,1,7.5S3.9101,1,7.5,1S14,3.9101,14,7.5z"/>\n</svg>'},"circle-stroked":{label:"Circle stroked",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="circle-stroked-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path8564-5-6-4" d="M7.5,0C11.6422,0,15,3.3578,15,7.5S11.6422,15,7.5,15&#xA;&#x9;S0,11.6422,0,7.5S3.3578,0,7.5,0z M7.5,1.6666c-3.2217,0-5.8333,2.6117-5.8333,5.8334S4.2783,13.3334,7.5,13.3334&#xA;&#x9;s5.8333-2.6117,5.8333-5.8334S10.7217,1.6666,7.5,1.6666z"/>\n</svg>'},city:{label:"City",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15" id="city-15">\n  <path d="M13.6368,3.9994h-1.6387V1.3608C11.99804,1.16148,11.83642,0.99994,11.6371,1l0,0h-0.278&#xA;&#x9;c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0v2.6385H9.36c-0.19932,0-0.3609,0.16158-0.3609,0.3609l0,0l0,0v5.6381h-3.637&#xA;&#x9;c-0.20042,0-0.3629,0.16248-0.3629,0.3629v3.2745c0.00055,0.20003,0.16287,0.3619,0.3629,0.3619h8.2747&#xA;&#x9;c0.19932,0,0.3609-0.16158,0.3609-0.3609l0,0V4.36c0-0.19932-0.16158-0.3609-0.3609-0.3609l0,0L13.6368,3.9994z M6.9989,11.9981h-1&#xA;&#x9;v-1h1V11.9981z M8.9989,11.9981h-1v-1h1V11.9981z M10.9989,11.9981h-1v-1h1V11.9981z M10.9989,9.9981h-1v-1h1V9.9981z&#xA;&#x9; M10.9989,7.9981h-1v-1h1V7.9981z M10.9989,5.9981h-1v-1h1V5.9981z M12.9989,11.9971h-1v-1h1V11.9971z M12.9989,9.9971h-1v-1h1&#xA;&#x9;V9.9971z M12.9989,7.9971h-1v-1h1V7.9971z M12.9989,5.9971h-1v-1h1V5.9971z M7.9987,1.3608C7.99864,1.16152,7.83708,1,7.6378,1H5.36&#xA;&#x9;C5.16068,1,4.9991,1.16158,4.9991,1.3609l0,0V3H3.36C3.16138,3.00049,3.00049,3.16138,3,3.36l0,0v0.6394H1.3608&#xA;&#x9;C1.16164,3.99945,1.00017,4.16084,1,4.36l0,0v9.2765c0,0.19932,0.16158,0.3609,0.3609,0.3609h2.6385V8.9986h3.9993V1.3608z&#xA;&#x9; M3,11.9981H2v-1h1V11.9981z M3,9.9981H2v-1h1V9.9981z M3,7.9981H2v-1h1V7.9981z M3,5.9981H2v-1h1V5.9981z M5,7.9981H4v-1h1V7.9981z&#xA;&#x9; M5,5.9981H4v-1h1V5.9981z M7,7.9981H6v-1h1V7.9981z M7,5.9981H6v-1h1V5.9981z M7,3.9981H6V3h1v1V3.9981z"/>\n</svg>'},"clothing-store":{label:"Clothing store",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="clothing-store-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect4181-0-0" d="&#xA;&#x9;M3.5,1L0,4v3h2.9L3,14h9V7h3V4l-3.5-3H10L7.5,5L5,1H3.5z"/>\n</svg>'},college:{label:"College",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="college-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7.5,1L0,4.5l2,0.9v1.7C1.4,7.3,1,7.9,1,8.5s0.4,1.2,1,1.4V10l-0.9,2.1&#xA; C0.8,13,1,14,2.5,14s1.7-1,1.4-1.9L3,10c0.6-0.3,1-0.8,1-1.5S3.6,7.3,3,7.1V5.9L7.5,8L15,4.5L7.5,1z M11.9,7.5l-4.5,2L5,8.4v0.1&#xA; c0,0.7-0.3,1.3-0.8,1.8l0.6,1.4v0.1C4.9,12.2,5,12.6,4.9,13c0.7,0.3,1.5,0.5,2.5,0.5c3.3,0,4.5-2,4.5-3L11.9,7.5L11.9,7.5z"/>\n</svg>'},commercial:{label:"Commercial",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="commercial-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,7H1c0.0881-1.3829,0.427-2.7383,1-4h11C13.5731,4.2617,13.9119,5.6171,14,7z M3,8h9v6h-1V9H8v5H3V8z M4,11h3V9H4V11z"/>\n</svg>'},"communications-tower":{label:"Communications tower",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="communications-tower-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="communications-tower-15">\n    <path d="M11.8545,6.4336l-.4131-.2813a4.7623,4.7623,0,0,0,.2813-4.8779l-.0835-.1533L12.0747.875l.0908.167a5.2619,5.2619,0,0,1-.311,5.3916Zm1.1521,7.1316V14h-11v-.4348H4.4952L6.0439,6.4a.5.5,0,0,1,.4888-.3945h.7255V4.6014A1.14,1.14,0,0,1,6.3756,3.5a1.1568,1.1568,0,1,1,2.3136,0,1.14,1.14,0,0,1-.931,1.1112V6.0059h.7223A.5.5,0,0,1,8.9692,6.4l1.5478,7.1648ZM8.4543,8.751H6.5588L6.236,10.2441H8.777ZM6.1279,10.7441l-.3233,1.4952H9.2082l-.3231-1.4952ZM6.936,7.0059,6.6669,8.251H8.3463L8.0771,7.0059ZM5.5179,13.5652H9.4948l-.1786-.8259h-3.62ZM5.21,5.0137a2.7523,2.7523,0,0,1,.0161-3.0518L4.812,1.6826a3.25,3.25,0,0,0-.019,3.6065ZM10.7568,3.5a3.2433,3.2433,0,0,0-.5341-1.7861l-.418.2754a2.7517,2.7517,0,0,1-.0176,3.0488l.4141.2793A3.2341,3.2341,0,0,0,10.7568,3.5ZM3.5342,6.1182A4.7637,4.7637,0,0,1,3.3813,1.13L2.9478.88a5.2643,5.2643,0,0,0,.1694,5.5137Z"/>\n  </g>\n</svg>'},confectionery:{label:"Confectionery",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="confectionery-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="confectionary-15">\n    <path d="M13,4a1,1,0,0,0-1-1,1,1,0,0,0-2,0V5.0673A3.4808,3.4808,0,0,0,4.3583,9H2a1,1,0,0,0,0,2,1,1,0,0,0,1,1,1,1,0,0,0,2,0V9.9326A3.4807,3.4807,0,0,0,10.6417,6H13a1,1,0,0,0,0-2ZM7.5,9.9925A2.484,2.484,0,0,1,6.3184,5.319a1.0809,1.0809,0,0,1,.5459.307A2.1243,2.1243,0,0,1,7.25,7.0117l.001.9561A2.5821,2.5821,0,0,0,7.76,9.7031a1.5462,1.5462,0,0,0,.2591.2333A2.4861,2.4861,0,0,1,7.5,9.9925ZM8.6815,9.681a1.0813,1.0813,0,0,1-.5458-.307A2.1243,2.1243,0,0,1,7.75,7.9883l-.001-.9561A2.5821,2.5821,0,0,0,7.24,5.2969a1.5557,1.5557,0,0,0-.2592-.2334A2.4843,2.4843,0,0,1,8.6815,9.681Z"/>\n  </g>\n</svg>'},convenience:{label:"Convenience",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="convenience-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="convenience-store-15">\n    <path d="M2.9982,3.0687s.1875-1.062,1-1.062H5.0043V1.7276a.5.5,0,0,1,.5-.5H9.4882a.5.5,0,0,1,.5.5v.2791h1.01a.8324.8324,0,0,1,.6373.2937,1.7589,1.7589,0,0,1,.3627.7683s.3108,1.5719.5921,2.9181h-.938L11,3,3.982,2.9956,3.3336,5.9868H2.382Zm11,4.9144a1,1,0,0,1-.9992,1l-1.0008,3.973s-.1875,1.0417-1,1.0417h-7c-.8125,0-1-1.0417-1-1.0417L1.9822,8.98a.9985.9985,0,0,1,.016-1.9968h11A1,1,0,0,1,13.9982,7.9831ZM5.0327,12.13,5.03,11.0051,4.6392,9.4686a.5373.5373,0,1,0-1.0649.1445L3.78,11.0075l.1874,1.2672A.5373.5373,0,1,0,5.0327,12.13Zm2-2.5967A.5332.5332,0,0,0,6.4994,9l-.0039.0008L6.4886,9a.4992.4992,0,0,0-.3575.1509.529.529,0,0,0-.1648.3828v2.68a.5332.5332,0,1,0,1.0663,0Zm1.998,0A.5314.5314,0,0,0,8.694,9.04a.4992.4992,0,0,0-.393,0,.5312.5312,0,0,0-.3366.4934v2.68a.5331.5331,0,1,0,1.0662,0Zm2.3857.08a.5373.5373,0,1,0-1.0649-.1445L9.96,10.9938,9.9579,12.13a.5373.5373,0,1,0,1.0649.1446Z"/>\n  </g>\n</svg>'},cricket:{label:"Cricket",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="cricket-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M8,1.5C8,2.3284,7.3284,3,6.5,3S5,2.3284,5,1.5S5.6716,0,6.5,0S8,0.6716,8,1.5z M10.88,7.18L10.88,7.18l-2-2l0,0l0,0&#xA;&#x9;C8.7815,5.0616,8.6339,4.9952,8.48,5H3.75C3.3736,4.9915,3.0508,5.2669,3,5.64l0,0l-1,7.7l0,0c-0.0068,0.0464-0.0068,0.0936,0,0.14&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5c0.2251,0.0153,0.4315-0.1251,0.5-0.34l0,0l1.2-3.89l0,0l0.26-0.83l0.4,0.44l0,0L6,10.6v2.9&#xA;&#x9;C6,13.7761,6.2239,14,6.5,14S7,13.7761,7,13.5v-3l0,0l0,0c-0.0081-0.0788-0.0356-0.1544-0.08-0.22l0,0L5.48,8.5l1-2.5h1.71l2,1.84&#xA;&#x9;l0,0c0.0928,0.1077,0.2278,0.1697,0.37,0.17C10.8163,7.9791,11.007,7.7581,11,7.5C10.9997,7.3824,10.9571,7.2688,10.88,7.18z&#xA;&#x9; M14,11.27c-0.4142,0-0.75,0.3358-0.75,0.75s0.3358,0.75,0.75,0.75s0.75-0.3358,0.75-0.75S14.4142,11.27,14,11.27z M10.76,9.74V9&#xA;&#x9;c0-0.1381-0.1119-0.25-0.25-0.25S10.26,8.8619,10.26,9v0.74c-0.1522,0.0855-0.2474,0.2455-0.25,0.42v3.34&#xA;&#x9;c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-3.34C11.0074,9.9855,10.9122,9.8255,10.76,9.74z"/>\n</svg>'},cross:{label:"Cross",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="cross-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M2.64,1.27L7.5,6.13l4.84-4.84C12.5114,1.1076,12.7497,1.0029,13,1c0.5523,0,1,0.4477,1,1&#xA;&#x9;c0.0047,0.2478-0.093,0.4866-0.27,0.66L8.84,7.5l4.89,4.89c0.1648,0.1612,0.2615,0.3796,0.27,0.61c0,0.5523-0.4477,1-1,1&#xA;&#x9;c-0.2577,0.0107-0.508-0.0873-0.69-0.27L7.5,8.87l-4.85,4.85C2.4793,13.8963,2.2453,13.9971,2,14c-0.5523,0-1-0.4477-1-1&#xA;&#x9;c-0.0047-0.2478,0.093-0.4866,0.27-0.66L6.16,7.5L1.27,2.61C1.1052,2.4488,1.0085,2.2304,1,2c0-0.5523,0.4477-1,1-1&#xA;&#x9;C2.2404,1.0029,2.4701,1.0998,2.64,1.27z"/>\n</svg>'},dam:{label:"Dam",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="dam-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.94,9.5c0,0.2761-0.2239,0.5-0.5,0.5l0,0c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6&#xA;&#x9;c-0.6115,0.1816-1.2734,0.0424-1.76-0.37l-0.39-0.35c-0.2976-0.3038-0.7851-0.3087-1.0889-0.0111&#xA;&#x9;C8.5274,10.2126,8.5237,10.2163,8.52,10.22c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7278,0.5784-1.7663,0.5489-2.46-0.07L5.3,10.19&#xA;&#x9;l-0.1-0.06l0.3,1.22l0.49,2c0.0829,0.2634-0.0634,0.5441-0.3267,0.6271C5.6105,13.9937,5.5553,14.0014,5.5,14h-4&#xA;&#x9;C1.2239,14,1,13.7761,1,13.5v-12C1,1.2239,1.2239,1,1.5,1h1.1c0.2346-0.0011,0.4384,0.1611,0.49,0.39L4,5.06V5.2&#xA;&#x9;c0.6569-0.314,1.4361-0.2205,2,0.24c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3163-0.2672,0.7159-0.4157,1.13-0.42l0,0c0.2761,0,0.5,0.2239,0.5,0.5S13.7061,6,13.43,6l0,0&#xA;&#x9;c-0.259,0.0219-0.4994,0.1439-0.67,0.34c-0.2714,0.2887-0.6175,0.4964-1,0.6C11.1485,7.1216,10.4866,6.9824,10,6.57L9.67,6.23&#xA;&#x9;C9.3724,5.9262,8.8849,5.9213,8.5811,6.2189C8.5774,6.2226,8.5737,6.2263,8.57,6.23C8.43,6.35,8.3,6.48,8.15,6.6&#xA;&#x9;C7.4222,7.1784,6.3837,7.1489,5.69,6.53L5.3,6.19c-0.2847-0.2546-0.7153-0.2546-1,0L4.24,6.24L4.93,9&#xA;&#x9;C5.3226,9.029,5.6965,9.1793,6,9.43c0.16,0.13,0.31,0.28,0.47,0.41c0.2847,0.2546,0.7153,0.2546,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7076-0.5968,1.7424-0.5968,2.45,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2847,0.2546,0.7153,0.2546,1,0l0.47-0.41&#xA;&#x9;c0.3177-0.2636,0.7172-0.4085,1.13-0.41l0,0c0.2761-0.0055,0.5044,0.2138,0.5099,0.4899C13.94,9.4933,13.94,9.4966,13.94,9.5z"/>\n</svg>'},danger:{label:"Danger",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="danger-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.94,14.68c-0.0749,0.194-0.262,0.3215-0.47,0.32c-0.0595,0.0107-0.1205,0.0107-0.18,0L7.5,12.56L1.7,15&#xA;&#x9;c-0.2572,0.1005-0.5472-0.0266-0.6476-0.2838C1.0516,14.7141,1.0508,14.7121,1.05,14.71c-0.1291-0.2441-0.0358-0.5467,0.2084-0.6757&#xA;&#x9;C1.2845,14.0205,1.3118,14.009,1.34,14l4.85-2l-4.85-2C1.0758,9.9197,0.9267,9.6404,1.007,9.3762s0.3596-0.4133,0.6238-0.333&#xA;&#x9;C1.6545,9.0504,1.6776,9.0594,1.7,9.07l5.8,2.41l5.8-2.41c0.2494-0.1185,0.5477-0.0124,0.6662,0.237&#xA;&#x9;c0.1185,0.2494,0.0124,0.5477-0.237,0.6662C13.7068,9.9839,13.6837,9.9928,13.66,10L8.8,12l4.85,2&#xA;&#x9;c0.2607,0.091,0.3983,0.3761,0.3074,0.6368C13.9523,14.6515,13.9465,14.6659,13.94,14.68z M12,4.23v0.45&#xA;&#x9;c-0.0021,0.2129-0.0722,0.4196-0.2,0.59C11.2414,5.8883,10.6399,6.4664,10,7v1.16c0.0015,0.208-0.126,0.3951-0.32,0.47L7.52,9.5&#xA;&#x9;H7.45L5.28,8.63C5.1016,8.5428,4.9917,8.3584,5,8.16V7C4.3528,6.4675,3.7446,5.8893,3.18,5.27C3.0593,5.0972,2.9963,4.8907,3,4.68&#xA;&#x9;V4.23C3.1669,2.0117,4.8974,0.2307,7.11,0h0.36l0,0h0.39C10.0862,0.2131,11.8348,1.9997,12,4.23z M6,4c0-0.5523-0.4477-1-1-1&#xA;&#x9;S4,3.4477,4,4s0.4477,1,1,1S6,4.5523,6,4z M7,7c0-0.2761-0.2239-0.5-0.5-0.5S6,6.7239,6,7v0.5C6,7.7761,6.2239,8,6.5,8&#xA;&#x9;S7,7.7761,7,7.5V7z M9,7c0-0.2761-0.2239-0.5-0.5-0.5S8,6.7239,8,7v0.5C8,7.7761,8.2239,8,8.5,8S9,7.7761,9,7.5V7z M11,4&#xA;&#x9;c0-0.5523-0.4477-1-1-1S9,3.4477,9,4s0.4477,1,1,1S11,4.5523,11,4z"/>\n</svg>'},defibrillator:{label:"Defibrillator",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" id="defibrillator-15">\n  <path d="M1.55,6.3381C-0.8368,1.7416,5.18-1.3228,7.502,3.2737c2.3215-4.5965,8.3387-1.5322,5.9523,3.0644-0.0869.1671-.2028,0.3456-0.3114,0.5212H11.335L9.5205,4.1377A0.6252,0.6252,0,0,0,8.42,4.2524l-1.6484,4.12-1.33-1.33A0.6254,0.6254,0,0,0,5,6.8594H1.8611C1.7525,6.6837,1.6366,6.5052,1.55,6.3381ZM11,8.1094a0.6263,0.6263,0,0,1-.5205-0.2783L9.1387,5.82,7.58,9.7168a0.6245,0.6245,0,0,1-.4546.38A0.6047,0.6047,0,0,1,7,10.1094a0.6251,0.6251,0,0,1-.4419-0.1826L4.7412,8.1094H2.7358a42.67,42.67,0,0,0,4.46,4.6732,0.4642,0.4642,0,0,0,.6222,0,43.26,43.26,0,0,0,4.4505-4.6732H11Z"/>\n</svg>'},dentist:{label:"Dentist",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="dentist-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M4.36,14c-1,0-0.56-2.67-0.86-5c-0.1-0.76-1-1.49-1.12-2.06C2,5,1.39,1.44,3.66,1S6,3,7.54,3s1.57-2.36,3.85-2&#xA;&#x9;s1.59,3.9,1.29,5.9c-0.1,0.45-1.1,1.48-1.18,2.06c-0.33,2.4,0.32,5-0.8,5c-0.93,0-1.32-2.72-2-4.5C8.43,8.63,8.06,8,7.54,8&#xA;&#x9;C6,8,5.75,14,4.36,14z"/>\n</svg>'},doctor:{label:"Doctor",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="doctor-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M5.5,7C4.1193,7,3,5.8807,3,4.5l0,0v-2C3,2.2239,3.2239,2,3.5,2H4c0.2761,0,0.5-0.2239,0.5-0.5S4.2761,1,4,1H3.5&#xA;&#x9;C2.6716,1,2,1.6716,2,2.5v2c0.0013,1.1466,0.5658,2.2195,1.51,2.87l0,0C4.4131,8.1662,4.9514,9.297,5,10.5C5,12.433,6.567,14,8.5,14&#xA;&#x9;s3.5-1.567,3.5-3.5V9.93c1.0695-0.2761,1.7126-1.367,1.4365-2.4365C13.1603,6.424,12.0695,5.7809,11,6.057&#xA;&#x9;C9.9305,6.3332,9.2874,7.424,9.5635,8.4935C9.7454,9.198,10.2955,9.7481,11,9.93v0.57c0,1.3807-1.1193,2.5-2.5,2.5S6,11.8807,6,10.5&#xA;&#x9;c0.0511-1.2045,0.5932-2.3356,1.5-3.13l0,0C8.4404,6.7172,9.001,5.6448,9,4.5v-2C9,1.6716,8.3284,1,7.5,1H7&#xA;&#x9;C6.7239,1,6.5,1.2239,6.5,1.5S6.7239,2,7,2h0.5C7.7761,2,8,2.2239,8,2.5v2l0,0C8,5.8807,6.8807,7,5.5,7 M11.5,9&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S12.0523,9,11.5,9z"/>\n</svg>'},"dog-park":{label:"Dog park",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="dog-park-15" width="15px" height="15px" viewBox="0 0 15 15">\n  <g id="g3">\n    <path d="M 10.300781 1.2207031 C 9.9144812 1.2207031 9.6 1.2 9.5 2 L 9.0996094 4.5214844 L 11.5 6.5 L 13.5 6.5 C 14.9 6.5 15 5.5410156 15 5.5410156 L 13.099609 3.3222656 C 12.399609 2.6222656 11.7 2.5 11 2.5 L 11 2 C 11 2 11.067481 1.2206031 10.300781 1.2207031 z M 4.75 1.5 C 4.75 1.5 3.7992187 1.5206031 3.1992188 1.7207031 C 2.5992187 1.9207031 2 2.6210938 2 3.6210938 L 2 7.5214844 C 2 9.2214844 1.3 9.5 1 9.5 C 1 9.5 0 9.5214844 0 10.521484 L 0 12.720703 C 0 12.720703 0.00078125 13.521484 0.80078125 13.521484 L 1 13.521484 L 1.5 13.521484 L 2 13.521484 L 2 13.021484 L 2 12.822266 C 2 12.422266 1.8 12.221094 1.5 12.121094 L 1.5 11.021484 C 2.5 11.021484 2.6 10.820703 3 10.720703 L 3.5507812 12.917969 C 3.6507813 13.217969 3.7507813 13.417578 4.0507812 13.517578 L 5.0507812 13.517578 L 6 13.5 L 6 12.699219 C 6 12.022819 5 12 5 12 L 5 9.5 L 8.5 9.5 L 9.1992188 12.121094 C 9.5992188 13.521094 10.5 13.5 10.5 13.5 L 11 13.5 L 12 13.5 L 12 12.699219 C 12 11.987419 11 12 11 12 L 11.099609 7.921875 L 8 5.5 L 3.5 5.5 L 3.5 3.5 C 3.5 3.1 3.7765 3.0053 4 3 C 4.4941 2.9882 4.75 3 4.75 3 C 5.1642 3 5.5 2.6642 5.5 2.25 C 5.5 1.8358 5.1642 1.5 4.75 1.5 z M 11.75 4 C 11.8881 4 12 4.1119 12 4.25 C 12 4.3881 11.8881 4.5 11.75 4.5 C 11.6119 4.5 11.5 4.3881 11.5 4.25 C 11.5 4.1119 11.6119 4 11.75 4 z " id="path5"/>\n  </g>\n</svg>'},"drinking-water":{label:"Drinking water",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" id="drinking-water-15">\n  <path d="M6,1A2,2,0,0,0,4,3V6.5a0.5,0.5,0,0,0,.5.5h2A0.5,0.5,0,0,0,7,6.5v-2A0.5,0.5,0,0,1,7.5,4H14V1H6Z"/>\n  <path d="M7,15H4a0.5,0.5,0,0,1-.48-0.38L2,8.62A0.5,0.5,0,0,1,2.5,8h6A0.5,0.5,0,0,1,9,8.62l-1.5,6A0.5,0.5,0,0,1,7,15ZM3.65,11l3.71,0L7.86,9H3.14Z"/>\n</svg>'},embassy:{label:"Embassy",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="embassy-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M6.65,2C5.43,2,4.48,3.38,4.11,3.82C4.0365,3.9102,3.9975,4.0237,4,4.14v4.4C3.9884,8.7827,4.1758,8.9889,4.4185,9.0005&#xA;&#x9;C4.528,9.0057,4.6355,8.9699,4.72,8.9c0.4665-0.6264,1.1589-1.0461,1.93-1.17C8.06,7.73,8.6,9,10.07,9&#xA;&#x9;c0.9948-0.0976,1.9415-0.4756,2.73-1.09c0.1272-0.0934,0.2016-0.2422,0.2-0.4V2.45c0.0275-0.2414-0.1459-0.4595-0.3874-0.487&#xA;&#x9;C12.5332,1.954,12.4527,1.9668,12.38,2c-0.6813,0.5212-1.4706,0.8834-2.31,1.06C8.6,3.08,8.12,2,6.65,2z M2.5,3&#xA;&#x9;c-0.5523,0-1-0.4477-1-1s0.4477-1,1-1s1,0.4477,1,1S3.0523,3,2.5,3z M3,4v9.48c0,0.2761-0.2239,0.5-0.5,0.5S2,13.7561,2,13.48V4&#xA;&#x9;c0-0.2761,0.2239-0.5,0.5-0.5S3,3.7239,3,4z"/>\n</svg>'},"emergency-phone":{label:"Emergency phone",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="emergency-phone-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M7.875,11.49a.51.51,0,0,0,.72,0l.72-.72,2.18,2.16-.37.37a2.24,2.24,0,0,1-1.44.7H8.24a2.24,2.24,0,0,1-1.45-.7L1.72,8.23A2.24,2.24,0,0,1,1,6.78V5.33a2.24,2.24,0,0,1,.72-1.45l.36-.36L4.26,5.69l-.73.73a.51.51,0,0,0,0,.72Zm4.72.38a1,1,0,0,0,.036-1.414h0l-.036-.036-.72-.72a1,1,0,0,0-1.414-.036h0l-.036.036ZM5.315,4.62a1,1,0,0,0,.036-1.414h0L4.595,2.45a1,1,0,0,0-1.414-.036h0L3.14,2.45ZM10,2V4H8V5h2V7h1V5h2V4H11V2Z"/>\n</svg>'},entrance:{label:"Entrance",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="entrance-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7,6.5v-1c0-0.5523-0.4477-1-1-1s-1,0.4477-1,1v3L7,6.5z M4.65,10.56L5,3c0-0.5523,0.4477-1,1-1s1,0.4477,1,1S6.5523,4,6,4&#xA;&#x9;S5,3.5523,5,3L4.65,10.56z"/>\n  <path d="M14,6L14,6c0,0.5523-0.4477,1-1,1h-1.58c-0.2658-0.0015-0.5213,0.1028-0.71,0.29l-5.42,5.42&#xA;&#x9;c-0.1863,0.1847-0.4377,0.2889-0.7,0.29H2c-0.5523,0-1-0.4477-1-1l0,0c0-0.5523,0.4477-1,1-1h1.59&#xA;&#x9;c0.2623-0.0011,0.5137-0.1053,0.7-0.29l5.42-5.42C9.8987,5.1028,10.1542,4.9985,10.42,5H13C13.5523,5,14,5.4477,14,6z"/>\n</svg>'},"entrance-alt1":{label:"Entrance 2",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="entrance-alt1-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M6.554,9.639a.5.5,0,0,0,.707.707L9.928,7.669a.25.25,0,0,0,0-.354h0L7.261,4.639a.5.5,0,0,0-.707.707L8.2,7H1.5a.5.5,0,0,0,0,1H8.2ZM12,1H5.5a.5.5,0,0,0,0,1h6a.5.5,0,0,1,.5.5v10a.5.5,0,0,1-.5.5H5.25a.5.5,0,0,0,0,1H12a1,1,0,0,0,1-1V2A1,1,0,0,0,12,1Z"/>\n</svg>'},farm:{label:"Farm",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="farm-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M8,7L5,5,2,7,1,9v4H3V11H7v2H9V9ZM6,9H4V7H6V9Zm8,4H11V3.5a1.5,1.5,0,0,1,3,0V13Z"/>\n</svg>'},"fast-food":{label:"Fast food",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="fast-food-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,8c0,0.5523-0.4477,1-1,1H2C1.4477,9,1,8.5523,1,8s0.4477-1,1-1h11C13.5523,7,14,7.4477,14,8z M3.5,10H2&#xA;&#x9;c0,1.6569,1.3431,3,3,3h5c1.6569,0,3-1.3431,3-3H3.5z M3,6H2V4c0-1.1046,0.8954-2,2-2h7c1.1046,0,2,0.8954,2,2v2H3z M11,4.5&#xA;&#x9;C11,4.7761,11.2239,5,11.5,5S12,4.7761,12,4.5S11.7761,4,11.5,4S11,4.2239,11,4.5z M9,3.5C9,3.7761,9.2239,4,9.5,4S10,3.7761,10,3.5&#xA;&#x9;S9.7761,3,9.5,3S9,3.2239,9,3.5z M7,4.5C7,4.7761,7.2239,5,7.5,5S8,4.7761,8,4.5S7.7761,4,7.5,4S7,4.2239,7,4.5z M5,3.5&#xA;&#x9;C5,3.7761,5.2239,4,5.5,4S6,3.7761,6,3.5S5.7761,3,5.5,3S5,3.2239,5,3.5z M3,4.5C3,4.7761,3.2239,5,3.5,5S4,4.7761,4,4.5&#xA;&#x9;S3.7761,4,3.5,4S3,4.2239,3,4.5z"/>\n</svg>'},fence:{label:"Fence",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="fence-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M13.5,10H13V7h.5a.5.5,0,0,0,0-1H13V4l-.286-.573a.249.249,0,0,0-.424-.006L12,4V6H11V4l-.286-.573a.249.249,0,0,0-.424-.006L10,4V6H9V4l-.286-.573a.249.249,0,0,0-.424-.006L8,4V6H7V4l-.286-.573a.249.249,0,0,0-.424-.006L6,4V6H5V4l-.286-.573a.249.249,0,0,0-.424-.006L4,4V6H3V4l-.286-.573a.249.249,0,0,0-.424-.006L2,4V6H1.5a.5.5,0,0,0,0,1H2v3H1.5a.5.5,0,0,0,0,1H2v1.5a.5.5,0,0,0,1,0V11H4v1.5a.5.5,0,0,0,1,0V11H6v1.5a.5.5,0,0,0,1,0V11H8v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h1v1.5a.5.5,0,0,0,1,0V11h.5a.5.5,0,0,0,0-1ZM3,10V7H4v3Zm2,0V7H6v3Zm2,0V7H8v3Zm2,0V7h1v3Zm2,0V7h1v3Z"/>\n</svg>'},ferry:{label:"Ferry",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="ferry-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M5.33,11c0.6745,0.009,1.3262,0.245,1.85,0.67l0.26,0.23h0.05l0.31-0.28c0.9817-0.8115,2.379-0.8846,3.44-0.18L13.5,7L12,6&#xA;&#x9;V2.45c-0.0466-0.8-0.6989-1.4305-1.5-1.45H10c0.0343-0.518-0.3579-0.9657-0.8759-1C9.0828-0.0027,9.0413-0.0027,9,0H6&#xA;&#x9;C5.482-0.0343,5.0343,0.3579,5,0.8759C4.9973,0.9172,4.9973,0.9587,5,1H4.5C3.6989,1.0195,3.0466,1.65,3,2.45V6L1.5,7l2.25,4.53&#xA;&#x9;C4.2143,11.2041,4.7631,11.02,5.33,11z M4,2.45c0.0105-0.2594,0.2293-0.4611,0.4886-0.4506C4.4924,1.9996,4.4962,1.9998,4.5,2h6&#xA;&#x9;c0.259-0.0171,0.4829,0.1789,0.5,0.4379c0.0014,0.0207,0.0014,0.0414,0,0.0621v3l-3.5-2L4,5.45C4,5.45,4,2.45,4,2.45z M14,13v1&#xA;&#x9;c-0.2626,0.0194-0.5069,0.1416-0.68,0.34c-0.2717,0.2883-0.6178,0.4959-1,0.6c-0.6147,0.1815-1.2795,0.0425-1.77-0.37l-0.39-0.35&#xA;&#x9;c-0.3043-0.3026-0.7957-0.3026-1.1,0c-0.14,0.12-0.27,0.25-0.42,0.37c-0.7328,0.5856-1.7814,0.556-2.48-0.07l-0.39-0.35&#xA;&#x9;c-0.2864-0.2502-0.7136-0.2502-1,0c-0.19,0.15-0.36,0.32-0.55,0.47c-0.7043,0.5215-1.6732,0.4968-2.35-0.06l-0.31-0.27&#xA;&#x9;C1.4153,14.1443,1.2172,14.0346,1,14v-1c0.2585-0.032,0.5205,0.0169,0.75,0.14c0.2782,0.1722,0.5424,0.3661,0.79,0.58&#xA;&#x9;c0.2051,0.2235,0.5147,0.319,0.81,0.25c0.1125-0.0333,0.2177-0.0876,0.31-0.16c0.16-0.12,0.29-0.26,0.45-0.39&#xA;&#x9;c0.7106-0.5888,1.7394-0.5888,2.45,0c0.16,0.13,0.31,0.28,0.47,0.41c0.2864,0.2502,0.7136,0.2502,1,0c0.16-0.13,0.31-0.28,0.47-0.41&#xA;&#x9;c0.7123-0.5943,1.7477-0.5943,2.46,0c0.15,0.13,0.29,0.27,0.44,0.39c0.2864,0.2502,0.7136,0.2502,1,0l0.47-0.41&#xA;&#x9;C13.1895,13.1408,13.5886,12.9995,14,13z"/>\n</svg>'},"fire-station":{label:"Fire station",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="fire-station-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path10041-3-3" d="M7.5,0.5L5,4.5l-1.5-2&#xA;&#x9;C2.9452,3.4753,0.8036,5.7924,0.8036,8.3036C0.8036,12.002,3.8017,15,7.5,15s6.6964-2.998,6.6964-6.6964&#xA;&#x9;c0-2.5112-2.1416-4.8283-2.6964-5.8036l-1.5,2L7.5,0.5z M7.5,7c0,0,2.5,2.5618,2.5,4.5c0,0.8371-0.8259,2-2.5,2S5,12.3371,5,11.5&#xA;&#x9;C5,9.6283,7.5,7,7.5,7z"/>\n</svg>'},"fitness-centre":{label:"Fitness centre",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="fitness-centre-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="daec40ff-71f5-4432-9d75-dcba7b9c1b89" d="M14.5,7V8h-1v2h-1v1H11V8H4v3H2.5V10h-1V8H.5V7h1V5h1V4H4V7h7V4h1.5V5h1V7Z"/>\n</svg>'},florist:{label:"Florist",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="florist-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M1.5,1A2.7,2.7,0,0,1,4,3l.5-3L5,3A2.7,2.7,0,0,1,7.5,1c-.2.03-1,.26-1,2v.083A1.959,1.959,0,0,1,4.5,5H4.417A1.959,1.959,0,0,1,2.5,3C2.5,1.261,1.7,1.03,1.5,1ZM12.012,11l3-.5-3-.5A2.686,2.686,0,0,0,14,7.5c-.03.2-.248,1-1.988,1a2,2,0,0,0,0,4c1.739,0,1.958.8,1.988,1A2.686,2.686,0,0,0,12.012,11ZM9.688,5.548a1,1,0,0,1,0-2,1,1,0,0,1,0-2,.986.986,0,0,1,.852.507l.023-.012a.978.978,0,0,1-.116-.444,1,1,0,1,1,2,0,.978.978,0,0,1-.116.444l.019.01a.986.986,0,0,1,.85-.5,1,1,0,0,1,.025,2,1,1,0,0,1-.025,2,.986.986,0,0,1-.85-.5l-.016.009a.978.978,0,0,1,.113.44,1,1,0,0,1-2,0,.978.978,0,0,1,.113-.44l-.02-.011a.986.986,0,0,1-.852.507Zm.71-1.995A1.051,1.051,0,1,0,11.449,2.5,1.051,1.051,0,0,0,10.4,3.553v0ZM4.946,11.444l-.516-.515L8.892,6.475A1.746,1.746,0,0,1,8.44,6.22L4.076,10.575l-.519-.518A16.051,16.051,0,0,0,4.912,6a3.373,3.373,0,0,1-.412.035c-.041,0-.073-.008-.112-.01A16.953,16.953,0,0,1,3.131,9.631L2.76,9.26a.246.246,0,0,0-.4.079L.231,14.445a.287.287,0,0,0-.016.089.25.25,0,0,0,.25.25.289.289,0,0,0,.1-.019l5.1-2.124a.246.246,0,0,0,.079-.4l-.372-.372a16.874,16.874,0,0,1,3.612-1.256c0-.059-.015-.106-.015-.166A3.349,3.349,0,0,1,9,10.089,16.076,16.076,0,0,0,4.946,11.444Z"/>\n</svg>'},fuel:{label:"Fuel",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="fuel-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13,6L13,6v5.5c0,0.2761-0.2239,0.5-0.5,0.5S12,11.7761,12,11.5v-2C12,8.6716,11.3284,8,10.5,8H9V2c0-0.5523-0.4477-1-1-1H2&#xA;&#x9;C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h6c0.5523,0,1-0.4477,1-1V9h1.5C10.7761,9,11,9.2239,11,9.5v2&#xA;&#x9;c0,0.8284,0.6716,1.5,1.5,1.5s1.5-0.6716,1.5-1.5V5c0-0.5523-0.4477-1-1-1l0,0V2.49C12.9946,2.2178,12.7723,1.9999,12.5,2&#xA;&#x9;c-0.2816,0.0047-0.5062,0.2367-0.5015,0.5184C11.9987,2.5289,11.9992,2.5395,12,2.55V5C12,5.5523,12.4477,6,13,6s1-0.4477,1-1&#xA;&#x9;s-0.4477-1-1-1 M8,6.5C8,6.7761,7.7761,7,7.5,7h-5C2.2239,7,2,6.7761,2,6.5v-3C2,3.2239,2.2239,3,2.5,3h5C7.7761,3,8,3.2239,8,3.5&#xA;&#x9;V6.5z"/>\n</svg>'},furniture:{label:"Furniture",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="furniture-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <g>\n    <path d="M9,10.1419V8.5013C9,8.2244,8.7756,8,8.4987,8H7.5013C7.2244,8,7,8.2244,7,8.5013v1.6406&#xA;&#x9;&#x9;c-1.538,0.3984-2.7227,1.6744-2.9573,3.2719C3.9976,13.7202,4.2291,14,4.5389,14h6.9222c0.3098,0,0.5413-0.2798,0.4962-0.5862&#xA;&#x9;&#x9;C11.7227,11.8163,10.538,10.5403,9,10.1419z"/>\n    <path d="M13.6394,6.2788l-2.5016-5.0034C11.0533,1.1066,10.8808,1,10.692,1H5.308C5.1192,1,4.9467,1.1066,4.8622,1.2755&#xA;&#x9;&#x9;L2.3606,6.2788C2.1949,6.6102,2.4359,7,2.8063,7H11v1.5C11,8.7761,11.2239,9,11.5,9S12,8.7761,12,8.5V7h1.1937&#xA;&#x9;&#x9;C13.5641,7,13.8051,6.6102,13.6394,6.2788z"/>\n  </g>\n</svg>'},gaming:{label:"Gaming",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="gaming-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.1,12.5c-0.6,0.3-1.4,0.1-1.8-0.5l-1.1-1.4H4.8L3.7,12l0,0c-0.5,0.7-1.4,0.8-2.1,0.3c-0.5-0.4-0.7-1-0.6-1.5l0.7-3.7l0,0&#xA;&#x9;C1.9,5.9,3,5,4.2,5v0H7V3.5C7,2.7,7.6,2,8.4,2h3.1C11.8,2,12,2.2,12,2.5S11.8,3,11.5,3h-3C8.2,3,8,3.2,8,3.4c0,0,0,0.1,0,0.1V5h2.8&#xA;&#x9;v0c1.2,0,2.3,0.9,2.5,2.1l0,0l0.7,3.7l0,0C14.1,11.5,13.8,12.2,13.1,12.5z M6,7.5C6,6.7,5.3,6,4.5,6S3,6.7,3,7.5S3.7,9,4.5,9&#xA;&#x9;S6,8.3,6,7.5z M12,7.5C12,7.2,11.8,7,11.5,7H11V6.5C11,6.2,10.8,6,10.5,6S10,6.2,10,6.5V7H9.5C9.2,7,9,7.2,9,7.5S9.2,8,9.5,8H10v0.5&#xA;&#x9;C10,8.8,10.2,9,10.5,9S11,8.8,11,8.5V8h0.5C11.8,8,12,7.8,12,7.5z"/>\n</svg>'},garden:{label:"Garden",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="garden-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13,8c0,3.31-2.19,6-5.5,6S2,11.31,2,8c2.2643,0.0191,4.2694,1.4667,5,3.61V7H4.5C3.6716,7,3,6.3284,3,5.5v-3&#xA;&#x9;C3,2.2239,3.2239,2,3.5,2c0.1574,0,0.3056,0.0741,0.4,0.2l1.53,2l1.65-3c0.1498-0.232,0.4593-0.2985,0.6913-0.1487&#xA;&#x9;C7.8308,1.0898,7.8815,1.1404,7.92,1.2l1.65,3l1.53-2c0.1657-0.2209,0.4791-0.2657,0.7-0.1C11.9259,2.1944,12,2.3426,12,2.5v3&#xA;&#x9;C12,6.3284,11.3284,7,10.5,7H8v4.61C8.7306,9.4667,10.7357,8.0191,13,8z"/>\n</svg>'},"garden-centre":{label:"Garden centre",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" id="garden-centre-15">\n  <path d="M4,5L4,4.5C4,3.12 5.12,2 6.5,2C7.88,2 9,3.12 9,4.5L9,10.293L11.365,7.928L11.018,6.633C11.018,6.631 11.017,6.629 11.017,6.627L11.016,6.627L11.016,6.627C10.973,6.461 11.016,6.276 11.147,6.146C11.342,5.951 11.659,5.951 11.854,6.146L13.854,8.146C14.049,8.341 14.049,8.658 13.854,8.853C13.724,8.983 13.541,9.027 13.375,8.984C13.375,8.984 13.375,8.984 13.375,8.984C13.372,8.983 13.369,8.982 13.365,8.981L12.072,8.635L9,11.707L9,12C9,12.552 8.552,13 8,13L5,13C4.448,13 4,12.552 4,12L4,11.536L1.732,9.268C0.757,8.292 0.757,6.708 1.732,5.732C2.22,5.244 2.86,5 3.5,5L3.5,5L4,5ZM4,6L3.5,6L3.5,6C3.116,6 2.732,6.147 2.439,6.439C1.854,7.025 1.854,7.975 2.439,8.561L4,10.121L4,6ZM8,5L8,4.5C8,3.672 7.328,3 6.5,3C5.672,3 5,3.672 5,4.5L5,5L8,5Z"/>\n</svg>'},gift:{label:"Gift",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="gift-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M6.5,5v2H0V5H6.5z M8.5,5v2H15V5H8.5z M1,8v4.5C1,13.3284,1.6716,14,2.5,14h4V8H1z M8.5,8v6h4c0.8284,0,1.5-0.6716,1.5-1.5&#xA;&#x9;V8H8.5z M10.5,0c-1.4033-0.0444-2.6497,0.8904-3,2.25C7.1497,0.8904,5.9033-0.0444,4.5,0c-1.0709-0.0337-1.9663,0.8072-2,1.8781&#xA;&#x9;C2.4987,1.9187,2.4987,1.9594,2.5,2C2.3443,2.9427,2.9822,3.8331,3.9249,3.9888C4.0853,4.0153,4.2486,4.0191,4.41,4h6.13&#xA;&#x9;c0.9548,0.1497,1.8503-0.5029,2-1.4577c0.0282-0.1797,0.0282-0.3626,0-0.5423c0.0002-1.1046-0.895-2.0002-1.9996-2.0004&#xA;&#x9;C10.5269-0.0004,10.5135-0.0003,10.5,0z M4.5,3c-0.506,0.0463-0.9537-0.3264-1-0.8323C3.4949,2.1119,3.4949,2.0558,3.5,2&#xA;&#x9;C3.4537,1.494,3.8264,1.0463,4.3323,1C4.3881,0.9949,4.4442,0.9949,4.5,1c1.1046,0,2,0.8954,2,2H4.5z M10.5,3h-2&#xA;&#x9;c0-1.1046,0.8954-2,2-2c0.5523,0,1,0.4477,1,1c0.0463,0.506-0.3264,0.9537-0.8323,1C10.6119,3.0051,10.5558,3.0051,10.5,3z"/>\n</svg>'},globe:{label:"Globe",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="globe-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <g>\n    <g>\n      <path d="M11.9807,9.4807l-0.7208-0.7208C10.3425,9.8168,9.006,10.5,7.5,10.5c-2.757,0-5-2.243-5-5&#xA;&#x9;&#x9;&#x9;c0-1.506,0.6832-2.8425,1.7401-3.7599L3.5193,1.0193C2.2831,2.1183,1.5,3.7158,1.5,5.5c0,3.1449,2.4208,5.72,5.5,5.9747V13H6.5&#xA;&#x9;&#x9;&#x9;C6.2239,13,6,13.2238,6,13.5C6,13.7761,6.2239,14,6.5,14h2C8.7761,14,9,13.7761,9,13.5C9,13.2238,8.7761,13,8.5,13H8v-1.5273&#xA;&#x9;&#x9;&#x9;C9.5806,11.341,10.9858,10.5997,11.9807,9.4807z"/>\n    </g>\n    <g>\n      <path d="M7.5,9C9.433,9,11,7.433,11,5.5S9.433,2,7.5,2S4,3.567,4,5.5S5.567,9,7.5,9z M8.5,4l0.3638-0.5915&#xA;&#x9;&#x9;&#x9;c0.3463,0.2263,0.6249,0.5394,0.8235,0.9042L9.5,5h-1V4z M6.6563,3.1563L7.5,4v1L8,6h1.5h0.4396&#xA;&#x9;&#x9;&#x9;C9.7708,6.826,9.2026,7.5041,8.4381,7.8144L8,7H6.5L5.0504,5C5.2251,4.1396,5.8452,3.4486,6.6563,3.1563z"/>\n    </g>\n  </g>\n</svg>'},golf:{label:"Golf",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="golf-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path11758" d="&#xA;&#x9;M3.3999,1.1c0,0.1,0,0.2,0,0.2c0,0.4,0.3,0.7,0.7,0.7c0.3,0,0.5-0.2,0.6-0.5l0,0L4.9,1l5.6,2.3L6.6,6C6.2,6.3,6.2,6.7,6.3,7.1&#xA;&#x9;l0.9,2.1l-1.3,3.9C5.7,13.6,6.1,14,6.5,14c0.3,0,0.5-0.1,0.6-0.5l1.4-4l0.1,0.3v3.5c0,0,0,0.7,0.7,0.7s0.7-0.7,0.7-0.7V10&#xA;&#x9;c0-0.2,0-0.3-0.1-0.5L8.5,6.1l2.7-1.9c0.2-0.2,0.4-0.3,0.4-0.6s-0.2-0.5-0.4-0.6L4,0.1c-0.0878,0-0.118,0.0179-0.2001,0.1&#xA;&#x9;L3.3999,1.1z M5.5,3C4.7,3,4,3.7,4,4.5S4.7,6,5.5,6S7,5.3,7,4.5S6.2999,3,5.5,3z"/>\n</svg>'},grocery:{label:"Grocery",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="grocery-15" width="15px" height="15px" viewBox="0 0 15 15">\n  <g id="g3">\n    <path d="M 13.199219 1.5 C 13.199219 1.5 11.808806 1.4588 11.253906 2 C 10.720406 2.5202 10.5 2.9177 10.5 4 L 1.1992188 4 L 2.59375 8.8144531 C 2.59725 8.8217531 2.6036219 8.8287375 2.6074219 8.8359375 C 2.8418219 9.4932375 3.4545469 9.9666406 4.1855469 9.9941406 C 4.1885469 9.9954406 4.1992187 10 4.1992188 10 L 10.699219 10 L 10.699219 10.199219 C 10.699219 10.199219 10.7 10.500391 10.5 10.900391 C 10.3 11.300391 10.200391 11.5 9.4003906 11.5 L 2.9003906 11.5 C 1.9003906 11.5 1.9003906 13 2.9003906 13 L 4.0996094 13 L 4.1992188 13 L 9.0996094 13 L 9.1992188 13 L 9.3007812 13 C 10.500781 13 11.399219 12.299609 11.699219 11.599609 C 11.999219 10.899609 12 10.300781 12 10.300781 L 12 10 L 12 4 C 12 3.4764 12.228619 3 12.699219 3 L 13.25 3 C 13.6642 3 14 2.6642 14 2.25 C 14 1.8358 13.6642 1.5 13.25 1.5 L 13.199219 1.5 z M 9.1992188 13 C 8.5992188 13 8.1992188 13.4 8.1992188 14 C 8.1992188 14.6 8.5992187 15 9.1992188 15 C 9.7992187 15 10.199219 14.6 10.199219 14 C 10.199219 13.4 9.7992188 13 9.1992188 13 z M 4.1992188 13 C 3.5992188 13 3.1992188 13.4 3.1992188 14 C 3.1992188 14.6 3.5992187 15 4.1992188 15 C 4.7992188 15 5.1992188 14.6 5.1992188 14 C 5.1992188 13.4 4.7992187 13 4.1992188 13 z " id="path5"/>\n  </g>\n</svg>'},hairdresser:{label:"Hairdresser",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="hairdresser-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M15,3c0,0-2-0.6-3.5,0.5l-4.3,3C6.4,5.9,5.2,5.2,4,4.8V4c0-1.1-0.9-2-2-2C0.9,2,0,2.9,0,4v1.5&#xA;&#x9;C0,6,0.5,6,0.5,6H2h0.5C4.5,6,6,7.5,6,7.5S4.5,9,2.5,9H2H0.5C0.5,9,0,9,0,9.5V11c0,1.1,0.9,2,2,2c1.1,0,2-0.9,2-2v-0.8&#xA;&#x9;c1.2-0.4,2.4-1.1,3.2-1.7l4.3,3C13,12.6,15,12,15,12L8.5,7.5L15,3z M3,5H2H1V4c0-0.6,0.4-1,1-1c0.6,0,1,0.4,1,1V5z M3,11&#xA;&#x9;c0,0.6-0.4,1-1,1c-0.6,0-1-0.4-1-1v-1h1h1V11z M7.25,8c-0.2761,0-0.5-0.2239-0.5-0.5S6.9739,7,7.25,7s0.5,0.2239,0.5,0.5&#xA;&#x9;S7.5261,8,7.25,8z"/>\n</svg>'},harbor:{label:"Harbor",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="harbor-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5263" d="M7.5,0C5.5,0,4,1.567,4,3.5c0.0024,1.5629,1.0397,2.902,2.5,3.3379v6.0391&#xA;&#x9;c-0.9305-0.1647-1.8755-0.5496-2.6484-1.2695C2.7992,10.6273,2.002,9.0676,2.002,6.498c0.0077-0.5646-0.4531-1.0236-1.0176-1.0137&#xA;&#x9;C0.4329,5.493-0.0076,5.9465,0,6.498c0,3.0029,1.0119,5.1955,2.4902,6.5723C3.9685,14.4471,5.8379,15,7.5,15&#xA;&#x9;c1.6656,0,3.535-0.5596,5.0117-1.9395S14.998,9.4868,14.998,6.498c0.0648-1.3953-2.0628-1.3953-1.998,0&#xA;&#x9;c0,2.553-0.7997,4.1149-1.8535,5.0996C10.3731,12.3203,9.4288,12.7084,8.5,12.875V6.8418C9.9607,6.4058,10.9986,5.0642,11,3.5&#xA;&#x9;C11,1.567,9.5,0,7.5,0z M7.5,2C8.3284,2,9,2.6716,9,3.5S8.3284,5,7.5,5S6,4.3284,6,3.5S6.6716,2,7.5,2z"/>\n</svg>'},hardware:{label:"Hardware",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="hardware-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.7919,3.2619c0,0-1.676,1.675-2.1163,2.1208c-0.085,0.0861-0.1688,0.1135-0.282,0.0961&#xA;&#x9;c-0.1481-0.0226-0.2974-0.038-0.4462-0.0558c-0.4072-0.0485-0.8145-0.0966-1.2292-0.1458C9.649,4.6852,9.5787,4.1049,9.5177,3.5236&#xA;&#x9;C9.512,3.4689,9.5509,3.3943,9.5925,3.3522c0.5071-0.5134,1.9261-1.9287,2.134-2.136c-0.4508-0.2129-1.2243-0.2968-1.8007-0.2031&#xA;&#x9;c-2.1801,0.3543-3.5112,2.534-2.8206,4.625C7.1432,5.753,7.1194,5.8201,7.0374,5.902C5.1891,7.7454,3.3436,9.5914,1.498,11.4374&#xA;&#x9;c-0.0616,0.0616-0.1231,0.124-0.1779,0.1913c-0.5264,0.6473-0.3873,1.6264,0.2974,2.102c0.6044,0.4197,1.3658,0.3442,1.9053-0.1948&#xA;&#x9;c1.8534-1.8519,3.7059-3.7047,5.556-5.5598C9.1707,7.884,9.2437,7.8526,9.3779,7.8983c0.6189,0.2109,1.2524,0.2354,1.8884,0.0884&#xA;&#x9;c1.9386-0.4478,3.1251-2.3732,2.6549-4.3034C13.8895,3.5532,13.843,3.4244,13.7919,3.2619z"/>\n</svg>'},heart:{label:"Heart",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>\n</svg>'},heliport:{label:"Heliport",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="heliport-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path10415" d="M4,2C3,2,3,3,4,3h4v1C7.723,4,7.5,4.223,7.5,4.5V5H5H3.9707H3.9316&#xA;&#x9;C3.7041,4.1201,2.9122,3.5011,2,3.5c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2c0.3722-0.001,0.7368-0.1058,1.0527-0.3027L5.5,10.5&#xA;&#x9;C6.5074,11.9505,8.3182,12,9,12h5c0,0,1,0,1-1v-0.9941C15,9.2734,14.874,8.874,14.5,8.5l-3-3c0,0-0.5916-0.5-1.2734-0.5H9.5V4.5&#xA;&#x9;C9.5,4.223,9.277,4,9,4V3h4c1,0,1-1,0-1C13,2,4,2,4,2z M2,4.5c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1&#xA;&#x9;C1,4.9477,1.4477,4.5,2,4.5z M10,6c0.5,0,0.7896,0.3231,1,0.5L13.5,9H10c0,0-1,0-1-1V7C9,7,9,6,10,6z"/>\n</svg>'},home:{label:"Home",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15" id="home-15">\n  <path d="M2,13.7478c0,0.13807,0.11193,0.25,0.25,0.25h3.749v-3h3v3h3.749c0.13807,0,0.25-0.11193,0.25-0.25V7.9987H2&#xA;&#x9;C2,7.9987,2,13.7478,2,13.7478z M13.93,6.5778l-0.9319-0.8189V2c0-0.55228-0.44771-1-1-1s-1,0.44772-1,1v2L7.6808,1.09&#xA;&#x9;C7.5863,0.9897,7.42846,0.98478,7.3279,1.079L7.3169,1.09L1.0678,6.553C0.9734,6.65376,0.97856,6.81197,1.07932,6.90637&#xA;&#x9;C1.12478,6.94896,1.18451,6.97304,1.2468,6.9739L3,6.9989h10.7468c0.13807,0.00046,0.25037-0.1111,0.25083-0.24917&#xA;&#x9;C13.99784,6.68592,13.97365,6.62445,13.93,6.5779V6.5778z"/>\n</svg>'},"horse-riding":{label:"Horse riding",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="horse-riding-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M6,1A1,1,0,1,1,7,2,1,1,0,0,1,6,1ZM8,3.5a.484.484,0,0,0,0-.058A.472.472,0,0,0,7.5,3h-1a.484.484,0,0,0-.058,0A.472.472,0,0,0,6,3.5V7H8Zm6.85,3.644L12.8,4.8l.085-.509a.478.478,0,0,0,.008-.063.25.25,0,0,0-.25-.25.346.346,0,0,0-.158.056L9,7H8L9,8V9.5a.5.5,0,0,1-1,0v-1L6,7H4a1.5,1.5,0,0,0-1.243.661A1.466,1.466,0,0,0,1.563,7H1.5A1.449,1.449,0,0,0,0,8.4v.086A3.781,3.781,0,0,0,.559,10.4a.278.278,0,0,0,.191.1A.25.25,0,0,0,1,10.25V9s-.02-.924.753-1c.5-.048.747.253.747.5V11L2,13v1.75a.25.25,0,0,0,.25.25.254.254,0,0,0,.25-.234V13L4,11v1l.5,2.8a.255.255,0,0,0,.246.2A.25.25,0,0,0,5,14.754H5L4.855,12.3,5.5,11H8v1l.508,2.813A.257.257,0,0,0,8.75,15,.25.25,0,0,0,9,14.75V12l.367-1a1.155,1.155,0,0,0,.543-.6l2.161-3.767a.863.863,0,0,0,1.023.4l1.066.818a.591.591,0,0,0,.35.135.487.487,0,0,0,.475-.4A.552.552,0,0,0,14.85,7.144Z"/>\n</svg>'},hospital:{label:"Hospital",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="hospital-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect4194" d="M7,1C6.4,1,6,1.4,6,2v4H2C1.4,6,1,6.4,1,7v1&#xA;&#x9;c0,0.6,0.4,1,1,1h4v4c0,0.6,0.4,1,1,1h1c0.6,0,1-0.4,1-1V9h4c0.6,0,1-0.4,1-1V7c0-0.6-0.4-1-1-1H9V2c0-0.6-0.4-1-1-1H7z"/>\n</svg>'},"ice-cream":{label:"Ice cream",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="ice-cream-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M5.44,8.17c0.7156,0.0006,1.414-0.2194,2-0.63C7.9037,7.8634,8.4391,8.0693,9,8.14h0.44L8,13.7&#xA;&#x9;c-0.1082,0.2541-0.4019,0.3723-0.656,0.264C7.2252,13.9134,7.1306,13.8188,7.08,13.7L5.44,8.17z"/>\n  <path d="M11.44,4.67c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2l0,0l0,0l0,0c0,1.1046-0.8954,2-2,2s-2-0.8954-2-2s0.8954-2,2-2h0.12&#xA;&#x9;C5.1756,1.6345,5.7035,0.4834,6.739,0.099s2.1866,0.1435,2.571,1.179c0.1667,0.449,0.1667,0.9429,0,1.3919h0.13&#xA;&#x9;C10.5446,2.67,11.44,3.5654,11.44,4.67z"/>\n</svg>'},industry:{label:"Industry",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="industry-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,1v12H1V8.72c0.0016-0.1419,0.0634-0.2764,0.17-0.37l3-3.22c0.2074-0.1823,0.5234-0.1618,0.7056,0.0456&#xA;&#x9;C4.9568,5.268,5.0011,5.387,5,5.51v3l3.16-3.37c0.2025-0.1878,0.5188-0.1759,0.7066,0.0266C8.9532,5.2599,9.0009,5.3827,9,5.51V11h3&#xA;&#x9;V1H14z"/>\n</svg>'},information:{label:"Information",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="information-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect8399" d="M7.5,1&#xA;&#x9;C6.7,1,6,1.7,6,2.5S6.7,4,7.5,4S9,3.3,9,2.5S8.3,1,7.5,1z M4,5v1c0,0,2,0,2,2v2c0,2-2,2-2,2v1h7v-1c0,0-2,0-2-2V6c0-0.5-0.5-1-1-1H4&#xA;&#x9;z"/>\n</svg>'},"jewelry-store":{label:"Jewelry store",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="jewelry-store-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12,8.5c0,2.4853-2.0147,4.5-4.5,4.5S3,10.9853,3,8.5c0-1.8483,1.1164-3.4329,2.7099-4.1255l0.1761,0.137l0.7739,0.6019&#xA;&#x9;C5.1366,5.4922,4,6.8611,4,8.5C4,10.4299,5.5701,12,7.5,12S11,10.4299,11,8.5c0-1.6389-1.1366-3.0078-2.6599-3.3866l0.95-0.7388&#xA;&#x9;C10.8836,5.0672,12,6.6517,12,8.5z M7.5,4.5L10,2.5555L9,1H6L5,2.5555l1.5,1.1667L7.5,4.5z"/>\n</svg>'},karaoke:{label:"Karaoke",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" id="karaoke-15">\n  <g>\n    <path d="M12.1,2.952A2.988,2.988,0,0,0,6.99,4.917l3.142,3.142A2.988,2.988,0,0,0,12.1,2.952Z"/>\n    <path d="M4.672,8.255,2.55,10.377a1,1,0,0,0,0,1.414l.707.707a1,1,0,0,0,1.414,0l2.121-2.121L8.914,8.255,6.793,6.134Zm.741,2.087-.707-.707L6.793,7.548l.707.707Z"/>\n  </g>\n</svg>'},landmark:{label:"Landmark",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="landmark-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12.5,12H12v-0.5c0-0.3-0.2-0.5-0.5-0.5H11V6h1l1-2c-1,0.1-2,0.1-3,0C9.2,3.4,8.6,2.8,8,2V1.5C8,1.2,7.8,1,7.5,1&#xA;&#x9;S7,1.2,7,1.5V2C6.4,2.8,5.8,3.4,5,4C4,4.1,3,4.1,2,4l1,2h1v5c0,0-0.5,0-0.5,0C3.2,11,3,11.2,3,11.5V12H2.5C2.2,12,2,12.2,2,12.5V13&#xA;&#x9;h11v-0.5C13,12.2,12.8,12,12.5,12z M7,11H5V6h2V11z M10,11H8V6h2V11z"/>\n</svg>'},landuse:{label:"Landuse",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="landuse-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M8.911,3.854A.248.248,0,0,1,9,4.044V7.75A.25.25,0,0,1,8.75,8H6.25A.25.25,0,0,1,6,7.75V6H5V7.75A.25.25,0,0,1,4.75,8H2.25A.25.25,0,0,1,2,7.75v-3.7a.248.248,0,0,1,.089-.19L5.343,1.132a.245.245,0,0,1,.315,0ZM7.752,9.5a.248.248,0,0,0-.138.042L5,11.5H4v-2a.5.5,0,0,0-1,0v2H2v-2a.5.5,0,0,0-1,0v4.25a.25.25,0,0,0,.25.25h6.5A.25.25,0,0,0,8,13.75v-4A.248.248,0,0,0,7.752,9.5ZM14,6.245v6.5a.253.253,0,0,1-.253.253H10.253A.253.253,0,0,1,10,12.747V6.25A.249.249,0,0,1,10.25,6H11V5.249A.249.249,0,0,1,11.249,5h1.5A.253.253,0,0,1,13,5.253V6h.755A.245.245,0,0,1,14,6.245ZM13,11H11v1h2Zm0-2H11v1h2Zm0-2H11V8h2Z"/>\n</svg>'},laundry:{label:"Laundry",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="laundry-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path3291-2" d="M8,1L6,3H3c0,0-1,0-1,1v9c0,1,1,1,1,1h9c0,0,1,0,1-1V2c0-1-1-1-1-1&#xA;&#x9;S8,1,8,1z M8.5,2h2C10.777,2,11,2.223,11,2.5S10.777,3,10.5,3h-2C8.223,3,8,2.777,8,2.5S8.223,2,8.5,2z M7.5,6&#xA;&#x9;c1.6569,0,3,1.3431,3,3s-1.3431,3-3,3s-3-1.3431-3-3S5.8431,6,7.5,6z"/>\n</svg>'},library:{label:"Library",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="library-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7.47,4.92C7.47,4.92,5.7,3,1,3v8c4.7,0,6.47,2,6.47,2S9.3,11,14,11V3C9.3,3,7.47,4.92,7.47,4.92z M13,10&#xA;&#x9;c-1.9614,0.0492-3.8727,0.6299-5.53,1.68C5.836,10.6273,3.9432,10.0459,2,10V4c3.4,0.26,4.73,1.6,4.75,1.61l0.73,0.74L8.2,5.6&#xA;&#x9;c0,0,1.4-1.34,4.8-1.6V10z M8,10.24l-0.1-0.17c1.3011-0.5931,2.6827-0.9907,4.1-1.18v0.2c-1.3839,0.1953-2.7316,0.5929-4,1.18V10.24&#xA;&#x9;z M8,9.24L7.9,9.07C9.2016,8.4802,10.5832,8.086,12,7.9v0.2c-1.3844,0.1988-2.7321,0.5997-4,1.19V9.24z M8,8.24L7.9,8.07&#xA;&#x9;C9.2015,7.48,10.5831,7.0857,12,6.9v0.2c-1.3845,0.1981-2.7323,0.599-4,1.19V8.24z M8,7.24L7.9,7.07&#xA;&#x9;C9.2013,6.4794,10.583,6.0851,12,5.9v0.2c-1.3844,0.1986-2.7321,0.5996-4,1.19V7.24z M6.9,10.24C5.6639,9.6641,4.3499,9.2733,3,9.08&#xA;&#x9;v-0.2c1.3872,0.2028,2.7358,0.6141,4,1.22L6.9,10.24z M6.9,9.24C5.6629,8.671,4.3488,8.2869,3,8.1V7.9&#xA;&#x9;c1.386,0.2027,2.7341,0.6105,4,1.21L6.9,9.24z M6.9,8.24C5.6631,7.6705,4.3489,7.2863,3,7.1V6.9c1.3868,0.199,2.7354,0.607,4,1.21&#xA;&#x9;L6.9,8.24z M6.9,7.24C5.6629,6.671,4.3488,6.2869,3,6.1V5.9c1.386,0.2024,2.7342,0.6102,4,1.21L6.9,7.24z"/>\n</svg>'},lighthouse:{label:"Lighthouse",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="lighthouse-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M4.5,6L0,7V6.5l4.5-1V6z M4.5,3.5L0,2.5V3l4.5,1V3.5z M10.5,3.5V4L15,3V2.5L10.5,3.5z M10.5,6L15,7V6.5l-4.5-1V6z M8,7V2&#xA;&#x9;h2.5c0.2761,0.0552,0.5448-0.1239,0.6-0.4c0.0552-0.2761-0.1239-0.5448-0.4-0.6l-3-1C7.5696-0.0586,7.4204-0.0586,7.29,0l-3,1&#xA;&#x9;c-0.2761,0.0552-0.4552,0.3239-0.4,0.6S4.2139,2.0552,4.49,2H7v5H5l-2,7h9l-2-7H8z"/>\n</svg>'},lodging:{label:"Lodging",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="lodging-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect6507" d="M0.5,2.5C0.2,2.5,0,2.7,0,3v7.5v2C0,12.8,0.2,13,0.5,13S1,12.8,1,12.5V11h13v1.5&#xA;&#x9;c0,0.3,0.2,0.5,0.5,0.5s0.5-0.2,0.5-0.5v-2c0-0.3-0.2-0.5-0.5-0.5H1V3C1,2.7,0.8,2.5,0.5,2.5z M3.5,3C2.7,3,2,3.7,2,4.5l0,0&#xA;&#x9;C2,5.3,2.7,6,3.5,6l0,0C4.3,6,5,5.3,5,4.5l0,0C5,3.7,4.3,3,3.5,3L3.5,3z M7,4C5.5,4,5.5,5.5,5.5,5.5V7h-3C2.2,7,2,7.2,2,7.5v1&#xA;&#x9;C2,8.8,2.2,9,2.5,9H6h9V6.5C15,4,12.5,4,12.5,4H7z"/>\n</svg>'},logging:{label:"Logging",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="logging-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M13.91,3.41,13.5,3l.2-.28c.02-.03.04-.05.06-.08A.969.969,0,0,0,14,1.99a1,1,0,0,0-1.62-.77c-.03.02-.06.05-.09.07L12,1.5l-.386-.386a.354.354,0,0,0-.525.475l.417.417-.5.5-.392-.392a.354.354,0,0,0-.525.475L10.5,3l-.5.5-.381-.381a.354.354,0,1,0-.528.472h0l.028.028L9.5,4,9,4.5l-.395-.395a.354.354,0,0,0-.517.483L8.5,5,8,5.5l-.365-.365a.354.354,0,0,0-.556.439h0C7.1,5.6,7.508,6,7.508,6L7,6.5l-.394-.392a.392.392,0,0,0-.5-.028.384.384,0,0,0-.028.5L6.1,6.6l.4.4L6,7.5l-.4-.4a.37.37,0,0,0-.5,0L6.248,8.244,12.09,2.41,12.5,2H13v.5l-.41.41L6.751,8.749,7.9,9.9a.355.355,0,0,0,0-.5l-.008-.009L7.5,9,8,8.5l.384.384a.354.354,0,0,0,.528-.472L8.5,8,9,7.5l.38.38a.354.354,0,0,0,.528-.472l-.02-.02L9.5,7l.5-.5.377.377A.35.35,0,0,0,10.64,7a.347.347,0,0,0,.252-.6L10.5,6l.5-.5.38.38a.354.354,0,0,0,.528-.472L11.88,5.38,11.5,5l.5-.5.381.381a.354.354,0,0,0,.528-.472l-.025-.025L12.5,4l.5-.5.382.382a.354.354,0,0,0,.528-.472ZM4.39,7.916C3.893,7.419,3.641,7,3,7H1.5a.5.5,0,0,0-.5.5v3A2.19,2.19,0,0,0,1.5,12l.815.811A2.251,2.251,0,0,0,5.493,13h0L7.5,11ZM3.5,10,2.262,11.238A1.3,1.3,0,0,1,2,10.5V8H3a.545.545,0,0,1,.335.194.455.455,0,0,1,.165.418Z"/>\n</svg>'},marker:{label:"Marker",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="marker-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4133" d="M7.5,0C5.0676,0,2.2297,1.4865,2.2297,5.2703&#xA;&#x9;C2.2297,7.8378,6.2838,13.5135,7.5,15c1.0811-1.4865,5.2703-7.027,5.2703-9.7297C12.7703,1.4865,9.9324,0,7.5,0z"/>\n</svg>'},"marker-stroked":{label:"Marker stroked",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="marker-stroked-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="Layer_7" d="M7.5,14.941l-.4-.495c-.973-1.189-4.9-6.556-4.9-9.16A5.066,5.066,0,0,1,7.036,0q.222-.01.445,0a5.066,5.066,0,0,1,5.286,4.836q.01.225,0,.45c0,2.213-2.669,6.111-4.678,8.851ZM7.481.986a4.077,4.077,0,0,0-4.3,4.3c0,1.832,2.759,6.038,4.286,8.034,1.25-1.71,4.315-5.989,4.315-8.034a4.077,4.077,0,0,0-4.3-4.3Z"/>\n</svg>'},"mobile-phone":{label:"Mobile phone",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="mobile-phone-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M10,2h0V1.5a.5.5,0,0,0-1,0V2H5A1,1,0,0,0,4,3V13a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V3A1,1,0,0,0,10,2ZM6,13H5V12H6Zm0-2H5V10H6ZM6,9H5V8H6Zm2,4H7V12H8Zm0-2H7V10H8ZM8,9H7V8H8Zm2,4H9V12h1Zm0-2H9V10h1Zm0-2H9V8h1Zm0-2.5a.5.5,0,0,1-.5.5h-4A.5.5,0,0,1,5,6.5v-3A.5.5,0,0,1,5.5,3h4a.5.5,0,0,1,.5.5Z"/>\n</svg>'},monument:{label:"Monument",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="monument-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path11719-7" d="M7.5,0L6,2.5v7h3v-7L7.5,0z M3,11.5&#xA;&#x9;L3,15h9v-3.5L10.5,10h-6L3,11.5z"/>\n</svg>'},mountain:{label:"Mountain",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="mountain-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5571" d="M7.5,2C7.2,2,7.1,2.2,6.9,2.4&#xA;&#x9;l-5.8,9.5C1,12,1,12.2,1,12.3C1,12.8,1.4,13,1.7,13h11.6c0.4,0,0.7-0.2,0.7-0.7c0-0.2,0-0.2-0.1-0.4L8.2,2.4C8,2.2,7.8,2,7.5,2z&#xA;&#x9; M7.5,3.5L10.8,9H10L8.5,7.5L7.5,9l-1-1.5L5,9H4.1L7.5,3.5z"/>\n</svg>'},museum:{label:"Museum",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="museum-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path7509" d="M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10&#xA;&#x9;V5H2z M4.6152,6c0.169-0.0023,0.3318,0.0639,0.4512,0.1836L7.5,8.6172l2.4336-2.4336c0.2445-0.2437,0.6402-0.2432,0.884,0.0013&#xA;&#x9;C10.9341,6.3017,10.9997,6.46,11,6.625v4.2422c0.0049,0.3452-0.271,0.629-0.6162,0.6338c-0.3452,0.0049-0.629-0.271-0.6338-0.6162&#xA;&#x9;c-0.0001-0.0059-0.0001-0.0118,0-0.0177V8.1328L7.9414,9.9414c-0.244,0.2433-0.6388,0.2433-0.8828,0L5.25,8.1328v2.7344&#xA;&#x9;c0.0049,0.3452-0.271,0.629-0.6162,0.6338C4.2887,11.5059,4.0049,11.2301,4,10.8849c-0.0001-0.0059-0.0001-0.0118,0-0.0177V6.625&#xA;&#x9;C4,6.2836,4.2739,6.0054,4.6152,6z"/>\n</svg>'},music:{label:"Music",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="music-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.5,1c-0.0804,0.0008-0.1594,0.0214-0.23,0.06L4.5,3.5C4.2239,3.5,4,3.7239,4,4v6.28C3.6971,10.1002,3.3522,10.0037,3,10&#xA;&#x9;c-1.1046,0-2,0.8954-2,2s0.8954,2,2,2s2-0.8954,2-2V7.36l8-2.22v3.64c-0.3029-0.1798-0.6478-0.2763-1-0.28c-1.1046,0-2,0.8954-2,2&#xA;&#x9;s0.8954,2,2,2s2-0.8954,2-2v-9C14,1.2239,13.7761,1,13.5,1z M13,4.14L5,6.36v-2l8-2.22C13,2.14,13,4.14,13,4.14z"/>\n</svg>'},natural:{label:"Natural",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="natural-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M8.753,6.278a.5.5,0,0,1-.51,0A4.109,4.109,0,0,1,6.5,3.5a2.779,2.779,0,0,0-.59-1.506l-.019-.027a.257.257,0,0,1-.056-.144.237.237,0,0,1,.25-.25.264.264,0,0,1,.057.011A3.523,3.523,0,0,1,7.5,2.5L8.28.94a.246.246,0,0,1,.44,0L9.5,2.5a3.4,3.4,0,0,1,1.339-.907.283.283,0,0,1,.1-.021c.175.009.212.119.221.249a.35.35,0,0,1-.043.141A5.2,5.2,0,0,0,10.5,3.5,4.113,4.113,0,0,1,8.753,6.278ZM5,8H6.289a.25.25,0,0,0,.25-.25.241.241,0,0,0-.061-.15L4.7,5.235a.255.255,0,0,0-.391,0L2.518,7.589a.274.274,0,0,0-.062.161.25.25,0,0,0,.25.25H4L1.335,10.6a.273.273,0,0,0-.058.152A.25.25,0,0,0,1.529,11H3L1.435,12.565a.255.255,0,0,0,.18.435H4v1H5V13H7.385a.255.255,0,0,0,.18-.435L6,11H7.471a.25.25,0,0,0,.25-.25.233.233,0,0,0-.058-.149Zm9.345,3.748a.252.252,0,0,1-.252.252H8.908a.252.252,0,0,1-.226-.365L11.27,6.451a.252.252,0,0,1,.451,0l2.6,5.184h0A.251.251,0,0,1,14.345,11.748ZM12.75,10,11.5,7.5,10.25,10Z"/>\n</svg>'},"oil-rig-es":{label:"Oil rig",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="oil-rig-es-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M14,13H12L10,2H9V1H8V0H7V1H6V2H5L3,13H1L0,15H15ZM5.82,3H9.18l.55,3H5.27ZM9,7,7.5,9.25,6,7ZM4,13,5.07,7.11,7,10,5,13Zm2,0,1.5-2.25L9,13Zm4,0L8,10,9.93,7.11,11,13Z"/>\n</svg>'},optician:{label:"Optician",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="optician-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14.5,6h-0.6766c-0.2828-0.5892-0.8801-1-1.5763-1H9.752C8.9344,5,8.2513,5.5656,8.059,6.3246&#xA;&#x9;C7.8854,6.2835,7.6991,6.25,7.5,6.25S7.1146,6.2834,6.941,6.3245C6.7487,5.5656,6.0654,5,5.2476,5H2.7529&#xA;&#x9;C2.0566,5,1.4592,5.4108,1.1765,6H0.4992C0.2235,6,0,6.2234,0,6.4991v0.0016C0,6.7765,0.2235,7,0.4992,7H1v0.5&#xA;&#x9;C1,9.0889,2.0024,10,3.75,10h0.5C5.9976,10,7,9.0889,7,7.5V7.3413C7.1503,7.2933,7.3307,7.25,7.5,7.25&#xA;&#x9;c0.1693,0,0.3499,0.0433,0.5,0.0913V7.5C8,9.0889,9.002,10,10.75,10h0.5C12.998,10,14,9.0889,14,7.5V7h0.5&#xA;&#x9;C14.7761,7,15,6.7761,15,6.5C15,6.2238,14.7761,6,14.5,6z M6,7.5C6,8.1982,5.8013,9,4.25,9h-0.5C2.1987,9,2,8.1982,2,7.5V6.7524&#xA;&#x9;C2,6.3374,2.3379,6,2.7529,6h2.4946C5.6626,6,6,6.3374,6,6.7524V7.5z M13,7.5C13,8.1982,12.8008,9,11.25,9h-0.5&#xA;&#x9;C9.1992,9,9,8.1982,9,7.5V6.7524C9,6.3374,9.3369,6,9.752,6h2.4951C12.6621,6,13,6.3379,13,6.7529V7.5z"/>\n</svg>'},paint:{label:"Paint",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="paint-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.5,2.5h-1V1.5027C12.5,1.225,12.2749,1,11.9973,1H1.5027C1.2251,1,1,1.225,1,1.5027v2.9946C1,4.7749,1.2251,5,1.5027,5&#xA;&#x9;h10.4946C12.2749,5,12.5,4.7749,12.5,4.4973V3.5H13v3.1021L6.8877,8.0127C6.6606,8.0654,6.5,8.2676,6.5,8.5v1.5074&#xA;&#x9;c-0.2783,0.02-0.5,0.246-0.5,0.5295v2.9261C6,13.7596,6.2404,14,6.5369,14h0.9261C7.7596,14,8,13.7596,8,13.4631v-2.9261&#xA;&#x9;c0-0.2834-0.2217-0.5095-0.5-0.5295v-1.11l6.1123-1.4102C13.8389,7.4351,14,7.2329,14,7V3C14,2.7236,13.7764,2.5,13.5,2.5z"/>\n</svg>'},park:{label:"Park",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="park-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,5.75c0.0113-0.6863-0.3798-1.3159-1-1.61C12.9475,3.4906,12.4014,2.9926,11.75,3&#xA;&#x9;c-0.0988,0.0079-0.1962,0.0281-0.29,0.06c-0.0607-0.66-0.6449-1.1458-1.3048-1.0851C9.8965,1.9987,9.6526,2.1058,9.46,2.28l0,0&#xA;&#x9;c0-0.6904-0.5596-1.25-1.25-1.25S6.96,1.5896,6.96,2.28C6.96,2.28,7,2.3,7,2.33C6.4886,1.8913,5.7184,1.9503,5.2797,2.4618&#xA;&#x9;C5.1316,2.6345,5.0347,2.8451,5,3.07C4.8417,3.0195,4.6761,2.9959,4.51,3C3.6816,2.9931,3.0044,3.659,2.9975,4.4874&#xA;&#x9;C2.9958,4.6872,3.0341,4.8852,3.11,5.07C2.3175,5.2915,1.8546,6.1136,2.0761,6.9061C2.2163,7.4078,2.6083,7.7998,3.11,7.94&#xA;&#x9;c0.2533,0.7829,1.0934,1.2123,1.8763,0.959C5.5216,8.7258,5.9137,8.2659,6,7.71C6.183,7.8691,6.4093,7.9701,6.65,8v5L5,14h5l-1.6-1&#xA;&#x9;v-2c0.7381-0.8915,1.6915-1.5799,2.77-2c0.8012,0.1879,1.603-0.3092,1.7909-1.1103C12.9893,7.7686,13.0025,7.6444,13,7.52&#xA;&#x9;c0.0029-0.0533,0.0029-0.1067,0-0.16C13.6202,7.0659,14.0113,6.4363,14,5.75z M8.4,10.26V6.82C8.6703,7.3007,9.1785,7.5987,9.73,7.6&#xA;&#x9;h0.28c0.0156,0.4391,0.2242,0.849,0.57,1.12C9.7643,9.094,9.0251,9.6162,8.4,10.26z"/>\n</svg>'},"park-alt1":{label:"Park 2",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="park-alt1-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M9.428,10.429a.269.269,0,0,1-.074-.18A.25.25,0,0,1,9.6,10h1.447a.25.25,0,0,0,.25-.25.258.258,0,0,0-.079-.179L9.07,7.419a.3.3,0,0,1-.063-.17A.249.249,0,0,1,9.257,7H10.4a.251.251,0,0,0,.25-.251.247.247,0,0,0-.077-.178L8.432,4.434,8.418,4.42a.262.262,0,0,1-.066-.17A.25.25,0,0,1,8.6,4h.866a.25.25,0,0,0,.25-.25.246.246,0,0,0-.068-.164h.006L7.7,1.238a.253.253,0,0,0-.042-.044A.249.249,0,0,0,7.5,1.139h0a.249.249,0,0,0-.158.055.253.253,0,0,0-.042.044L5.352,3.586a.246.246,0,0,0-.068.164.25.25,0,0,0,.25.25H6.4a.241.241,0,0,1,.184.42l-.014.014L4.431,6.571a.247.247,0,0,0-.077.178A.251.251,0,0,0,4.6,7H5.745a.249.249,0,0,1,.25.249.3.3,0,0,1-.063.17L3.782,9.571A.258.258,0,0,0,3.7,9.75a.25.25,0,0,0,.25.25H5.4a.25.25,0,0,1,.248.249.269.269,0,0,1-.074.18l-2.14,2.132-.009.009a.248.248,0,0,0,0,.351A.256.256,0,0,0,3.605,13H7v1l1-.008V13h3.391a.263.263,0,0,0,.26-.254.248.248,0,0,0-.071-.177Z"/>\n</svg>'},parking:{label:"Parking",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="parking-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11.85,8.37c-0.9532,0.7086-2.1239,1.0623-3.31,1H5.79V14H3V1h5.72c1.1305-0.0605,2.244,0.2952,3.13,1&#xA;&#x9;c0.8321,0.8147,1.2543,1.9601,1.15,3.12C13.1271,6.3214,12.7045,7.5159,11.85,8.37z M9.75,3.7C9.3254,3.3892,8.8052,3.237,8.28,3.27&#xA;&#x9;H5.79v3.82h2.49c0.5315,0.0326,1.056-0.1351,1.47-0.47c0.3795-0.3947,0.5693-0.9346,0.52-1.48C10.324,4.606,10.1327,4.0763,9.75,3.7&#xA;&#x9;z"/>\n</svg>'},"parking-garage":{label:"Parking garage",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="parking-garage-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M10.5,10.14c-0.6637,0.4788-1.4732,0.7121-2.29,0.66h-1.9V14h-1.9V5h3.92&#xA;&#x9;c0.7801-0.0414,1.5484,0.2041,2.16,0.69c0.5779,0.5595,0.875,1.3483,0.81,2.15C11.4042,8.6892,11.1088,9.5388,10.5,10.14z M9,6.9&#xA;&#x9;C8.711,6.6881,8.3579,6.5822,8,6.6H6.31v2.65H8c0.3612,0.0191,0.717-0.0947,1-0.32c0.2559-0.2675,0.3867-0.6308,0.36-1&#xA;&#x9;C9.4072,7.5493,9.274,7.1684,9,6.9z M14.41,4.21c0.114-0.2486,0.007-0.5427-0.24-0.66L7.5,0.45l-6.71,3.1&#xA;&#x9;C0.5387,3.666,0.429,3.9637,0.545,4.215C0.661,4.4663,0.9587,4.576,1.21,4.46l0,0L7.5,1.55l6.29,2.9&#xA;&#x9;c0.2486,0.114,0.5427,0.007,0.66-0.24H14.41z"/>\n</svg>'},pharmacy:{label:"Pharmacy",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="pharmacy-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M9.5,4l1.07-1.54c0.0599,0.0046,0.1201,0.0046,0.18,0c0.6904-0.0004,1.2497-0.5603,1.2494-1.2506&#xA;&#x9;C11.999,0.519,11.4391-0.0404,10.7487-0.04C10.0584-0.0396,9.499,0.5203,9.4994,1.2106c0,0.0131,0.0002,0.0262,0.0006,0.0394&#xA;&#x9;c0,0,0,0.07,0,0.1L7,4H9.5z M12,6V5H3v1l1.5,3.5L3,13v1h9v-1l-1-3.5L12,6z M10,10H8v2H7v-2H5V9h2V7h1v2h2V10z"/>\n</svg>'},"picnic-site":{label:"Picnic site",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="picnic-site-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect4760" d="M4,3C3.446,3,3,3.446,3,4s0.446,1,1,1h1.2969&#xA;&#x9;L4.6523,7H2.5c-0.554,0-1,0.446-1,1s0.446,1,1,1h1.5098L3.041,12.0098c-0.1284,0.3939,0.0868,0.8173,0.4807,0.9457&#xA;&#x9;s0.8173-0.0868,0.9457-0.4807c0.0005-0.0013,0.0009-0.0027,0.0013-0.004L5.5859,9h3.8281l1.1172,3.4707&#xA;&#x9;c0.1273,0.3943,0.5501,0.6107,0.9443,0.4834s0.6107-0.5501,0.4834-0.9443l0,0L10.9902,9H12.5c0.554,0,1-0.446,1-1s-0.446-1-1-1&#xA;&#x9;h-2.1523L9.7031,5H11c0.554,0,1-0.446,1-1s-0.446-1-1-1H4z M6.873,5H8.127l0.6445,2h-2.543L6.873,5z"/>\n</svg>'},pitch:{label:"Pitch",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="pitch-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M5,3C4.4477,3,4,2.5523,4,2s0.4477-1,1-1s1,0.4477,1,1S5.5523,3,5,3z M12.5,10H10L9,7L8,5.25L9,5l2.3,1l0,0&#xA;&#x9;c0.2761,0.1105,0.5895-0.0239,0.7-0.3S11.9761,5.1105,11.7,5l0,0L9,4H7L5,5L4,6H2.5C2.2239,6,2,6.2239,2,6.5S2.2239,7,2.5,7H5l1-1&#xA;&#x9;l1,2l-2,2v3.5C5,13.7761,5.2239,14,5.5,14S6,13.7761,6,13.5v-3.11L8,9l1,2h3.5c0.2761,0,0.5-0.2239,0.5-0.5S12.7761,10,12.5,10z"/>\n</svg>'},"place-of-worship":{label:"Place of worship",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="place-of-worship-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path9064" d="M7.5,0l-2,2v2h4V2&#xA;&#x9;L7.5,0z M5.5,4.5L4,6h7L9.5,4.5H5.5z M2,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C3,6.9477,2.5523,6.5,2,6.5z M4,6.5V13h7V6.5H4z&#xA;&#x9; M13,6.5c-0.5523,0-1,0.4477-1,1V13h2V7.5C14,6.9477,13.5523,6.5,13,6.5z"/>\n</svg>'},playground:{label:"Playground",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="playground-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M2,1.15c0.2091-0.8016,1.0284-1.2819,1.83-1.0729s1.2819,1.0284,1.0729,1.83C4.7026,2.6752,3.9386,3.1542,3.16,3&#xA;&#x9;C2.3474,2.839,1.8191,2.0498,1.98,1.2371C1.9858,1.2079,1.9925,1.1788,2,1.15z M13,12.32c0.1032,0.5426-0.2531,1.066-0.7956,1.1692&#xA;&#x9;c-0.0015,0.0003-0.0029,0.0006-0.0044,0.0008c-0.4252,0.086-0.8574-0.1119-1.07-0.49l0,0L9.45,9.63L8,9.92L7.78,10H7.72v2.15&#xA;&#x9;L8.34,12h0.14c0.2871,0.0054,0.5155,0.2425,0.5101,0.5297C8.9862,12.7361,8.8606,12.9207,8.67,13l-5,1l0,0&#xA;&#x9;c-0.0563,0.0095-0.1137,0.0095-0.17,0c-0.2872,0-0.52-0.2328-0.52-0.52c0-0.2099,0.1262-0.3993,0.32-0.48l0,0l4.15-0.83V10&#xA;&#x9;l-3.22,0.58l0,0c-0.164,0.0423-0.336,0.0423-0.5,0c-0.3394-0.0867-0.6088-0.3446-0.71-0.68H3L2,5.83l0,0&#xA;&#x9;C1.9688,5.6884,1.9688,5.5416,2,5.4c0.0936-0.387,0.4078-0.6815,0.8-0.75l0,0l4.7-0.52V0h0.22v4.1h0.06L8,4.08L8.4,4h0.21&#xA;&#x9;c0.2673,0.0643,0.4326,0.3323,0.37,0.6C8.9361,4.835,8.729,5.0041,8.49,5L8,5.08H7.78H7.72v2.86h0.06L8,7.88l1.81-0.36l0,0l0,0&#xA;&#x9;c0.4275-0.0352,0.8299,0.2062,1,0.6l0,0l2,3.94l0,0C12.887,12.1358,12.9511,12.2236,13,12.32z M7.5,5.13L5,5.4l0.74,2.94L7.5,8V5.13&#xA;&#x9;z"/>\n</svg>'},police:{label:"Police",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="police-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect4718" d="M5.5,1L6,2h5l0.5-1H5.5z M6,2.5v1.25c0,0,0,2.75,2.5,2.75S11,3.75,11,3.75V2.5H6z M1.9844,3.9863&#xA;&#x9;C1.4329,3.9949,0.9924,4.4485,1,5v4c-0.0001,0.6398,0.5922,1.1152,1.2168,0.9766L5,9.3574V14l5.8789-6.9297&#xA;&#x9;C10.7391,7.0294,10.5947,7,10.4414,7H6.5L3,7.7539V5C3.0077,4.4362,2.5481,3.9775,1.9844,3.9863z M11.748,7.7109L6.4121,14H12&#xA;&#x9;V8.5586C12,8.2451,11.9061,7.9548,11.748,7.7109z"/>\n</svg>'},post:{label:"Post",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="post-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M14,6.5V12c0,0.5523-0.4477,1-1,1H2c-0.5523,0-1-0.4477-1-1V6.5C1,6.2239,1.2239,6,1.5,6&#xA;&#x9;c0.0692-0.0152,0.1408-0.0152,0.21,0l0,0l5.79,4l5.8-4l0,0c0.066-0.0138,0.134-0.0138,0.2,0C13.7761,6,14,6.2239,14,6.5z M1.25,3.92&#xA;&#x9;L1.25,3.92L1.33,4L7.5,8l6.19-4l0,0h0.06l0,0c0.1796-0.0981,0.2792-0.2975,0.25-0.5C14,3.2239,13.7761,3,13.5,3h-12&#xA;&#x9;C1.2239,3,1,3.2239,1,3.5C1.0026,3.6745,1.0978,3.8345,1.25,3.92z"/>\n</svg>'},prison:{label:"Prison",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="prison-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect3607" d="M3.5,1v13H12V1H3.5z M9.5,2H11v3.5H9.5V2z M4.5,2.0547H6V7H4.5V2.0547z M7,2.0547h1.5V7H7V2.0547z M10.25,6.5&#xA;&#x9;C10.6642,6.5,11,6.8358,11,7.25S10.6642,8,10.25,8l0,0C9.8358,8,9.5,7.6642,9.5,7.25l0,0C9.5,6.8358,9.8358,6.5,10.25,6.5z M7,8&#xA;&#x9;h1.4727L8.5,13H7.0273L7,8z M4.5,8.166H6V13H4.5V8.166z M9.5,9H11v4H9.5V9z"/>\n</svg>'},rail:{label:"Rail",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="rail-15" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M 3 1 C 2.4477 1 2 1.4477 2 2 L 2 10 C 2 10.5523 2.4477 11 3 11 L 12 11 C 12.5523 11 13 10.5523 13 10 L 13 2 C 13 1.4477 12.5523 1 12 1 L 3 1 z M 5.75 1.5 L 5.7597656 1.5 L 9.2597656 1.5 C 9.3978656 1.5 9.5097656 1.6119 9.5097656 1.75 C 9.5097656 1.8881 9.3978656 2 9.2597656 2 L 5.75 2 C 5.6119 2 5.5 1.8881 5.5 1.75 C 5.5 1.6119 5.6119 1.5 5.75 1.5 z M 3.5 3 L 7 3 L 7 7 L 3.5 7 C 3.2239 7 3 6.7761 3 6.5 L 3 3.5 C 3 3.2239 3.2239 3 3.5 3 z M 8 3 L 11.5 3 C 11.7761 3 12 3.2239 12 3.5 L 12 6.5 C 12 6.7761 11.7761 7 11.5 7 L 8 7 L 8 3 z M 5 8 C 5.5523 8 6 8.4477 6 9 C 6 9.5523 5.5523 10 5 10 C 4.4477 10 4 9.5523 4 9 C 4 8.4477 4.4477 8 5 8 z M 10 8 C 10.5523 8 11 8.4477 11 9 C 11 9.5523 10.5523 10 10 10 C 9.4477 10 9 9.5523 9 9 C 9 8.4477 9.4477 8 10 8 z M 10.445312 11.994141 C 10.380597 11.999652 10.314981 12.018581 10.253906 12.050781 C 10.030606 12.168381 9.9302313 12.433922 10.019531 12.669922 L 10.189453 13 L 4.8105469 13 L 4.9394531 12.730469 C 5.0371531 12.472169 4.9067375 12.183637 4.6484375 12.085938 C 4.4124375 11.996738 4.1468969 12.097113 4.0292969 12.320312 L 3.0292969 14.320312 C 3.0080969 14.377912 2.9986 14.4387 3 14.5 C 3 14.7761 3.2239 15 3.5 15 C 3.6802 14.999 3.8450875 14.899434 3.9296875 14.740234 L 3.9296875 14.689453 L 4 14.689453 L 4.3105469 14 L 10.689453 14 L 11 14.689453 L 11 14.740234 C 11.0846 14.899434 11.249488 14.999 11.429688 15 C 11.705787 15 11.929688 14.7761 11.929688 14.5 C 11.949587 14.4212 11.949587 14.338566 11.929688 14.259766 L 10.929688 12.259766 C 10.833163 12.076541 10.639459 11.977608 10.445312 11.994141 z " id="path3"/>\n</svg>'},"rail-light":{label:"Rail light",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="rail-light-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path14245" d="M5.5,0C5,0,5,0.5,5,0.5v1C5,1.777,5.223,2,5.5,2S6,1.777,6,1.5V1h1v2H6c0,0-2,0-2,2v3c0,3,3,3,3,3h1&#xA;&#x9;c0,0,3,0,3-3V5c0-2-2-2-2-2H8V1h1v0.5C9,1.777,9.223,2,9.5,2S10,1.777,10,1.5v-1C10,0,9.5,0,9.5,0H5.5z M7.5,4l2.0449,0.7734L10,6.5&#xA;&#x9;C10.1316,7,9.5,7,9.5,7h-4c0,0-0.6316,0-0.5-0.5l0.4551-1.7266L7.5,4z M7.5,8C7.7761,8,8,8.2239,8,8.5S7.7761,9,7.5,9&#xA;&#x9;S7,8.7761,7,8.5S7.2239,8,7.5,8z M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z"/>\n</svg>'},"rail-metro":{label:"Rail metro",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="rail-metro-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path5258" d="M5.5,0c0,0-0.75,0-1,1L3,6.5V10c0,1,1,1,1,1h7c0,0,1,0,1-1V6.5L10.5,1c-0.2727-1-1-1-1-1H5.5z M6.5,1.5h2&#xA;&#x9;c0,0,0.5357,0,0.75,1L10,6c0.2146,1.0017-1,1-1,1H6c0,0-1.2146,0.0017-1-1l0.75-3.5C5.9643,1.5,6.5,1.5,6.5,1.5z M5,8&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S4,9.5523,4,9S4.4477,8,5,8z M6.75,8h1.5C8.3885,8,8.5,8.1115,8.5,8.25S8.3885,8.5,8.25,8.5&#xA;&#x9;h-1.5C6.6115,8.5,6.5,8.3885,6.5,8.25S6.6115,8,6.75,8z M10,8c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1S9,9.5523,9,9S9.4477,8,10,8z&#xA;&#x9; M4.125,12L3,15h1.5l0.375-1h5.25l0.375,1H12l-1.125-3h-1.5l0.375,1h-4.5l0.375-1H4.125z"/>\n</svg>'},"ranger-station":{label:"Ranger station",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="ranger-station-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect4911" d="M9,0.5l-2,1v3.7734L2,8v6h4v-4h3&#xA;&#x9;v4h4V8L8,5.2734V4l1-0.5l2,1l2-1v-3l-2,1L9,0.5z"/>\n</svg>'},recycling:{label:"Recycling",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="recycling-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M2.4556,8.6134C2.118,9.2112,1.501,10.3021,2.593,11.0312c0.3432,0.2268,0.7275,0.3836,1.131,0.4614&#xA;&#x9;C4.0314,11.5382,4.0466,12.0111,3.6855,12c-0.3849-0.0193-2.2596-0.1934-2.5606-1.5995c-0.1556-0.8213,0.0204-1.5571,0.504-2.3556&#xA;&#x9;L2.3263,6.812L1.0196,6.0688L4.5,4v4L3.1941,7.3057L2.4556,8.6134z M6.7,2.034c1.155-0.628,1.823,0.43,2.191,1.007l0.8059,1.2631&#xA;&#x9;L8.431,5.112L12,6.986L11.803,2.96l-1.2639,0.8066L9.779,2.578C9.2572,1.8321,8.875,1.2812,7.944,1.033&#xA;&#x9;C6.307,0.7203,5.3007,2.6194,5.311,2.607c-0.1639,0.2871,0.2156,0.5399,0.451,0.21C6.0202,2.4969,6.339,2.2309,6.7,2.034z&#xA;&#x9; M13.294,8.221c-0.0877-0.1897-0.5487-0.1413-0.419,0.267c0.1312,0.3892,0.1845,0.8003,0.157,1.21C12.939,11.01,11.684,11,11,11H9.5&#xA;&#x9;V9.5l-3.5,2l3.488,2.025L9.4926,12H11c0.8906,0.0153,1.5999-0.1759,2.2-0.713C14.4,10.226,13.294,8.221,13.294,8.221z"/>\n</svg>'},"religious-buddhist":{label:"Religious buddhist",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15" id="religious-buddhist-15">\n  <path d="M13.4978,6.9989h-0.5329c-0.09997-1.10708-0.53528-2.15731-1.2478-3.0105l0.378-0.3784&#xA;&#x9;c0.19605-0.19447,0.19733-0.51105,0.00286-0.7071C11.90698,2.71037,11.59733,2.70518,11.4,2.8912l0,0l-0.0123,0.0123L11.01,3.2815&#xA;&#x9;c-0.85331-0.71298-1.90385-1.14864-3.0113-1.2488V1.5c0-0.27614-0.22386-0.5-0.5-0.5s-0.5,0.22386-0.5,0.5v0.5327&#xA;&#x9;C5.8916,2.13306,4.84144,2.56871,3.9884,3.2815L3.61,2.9C3.41007,2.70952,3.09358,2.71717,2.9031,2.9171&#xA;&#x9;c-0.184,0.19312-0.184,0.49668,0,0.6898l0.3784,0.3775C2.56787,4.83856,2.13216,5.89031,2.0327,6.9989H1.5&#xA;&#x9;c-0.27614,0-0.5,0.22386-0.5,0.5s0.22386,0.5,0.5,0.5h0.5327c0.09987,1.10695,0.535,2.15711,1.2473,3.0103l-0.3779,0.3779&#xA;&#x9;c-0.19538,0.19514-0.19557,0.51173-0.00043,0.70711c0.19053,0.19076,0.49798,0.19611,0.69503,0.01209L3.609,12.094l0.3779-0.3779&#xA;&#x9;c0.8533,0.71312,1.90395,1.1488,3.0115,1.2488v0.5329c0,0.27614,0.22386,0.5,0.5,0.5s0.5-0.22386,0.5-0.5v-0.5329&#xA;&#x9;c1.10719-0.10026,2.15744-0.53592,3.0105-1.2488l0.3779,0.3779c0.19514,0.19538,0.51173,0.19557,0.70711,0.00043&#xA;&#x9;c0.19076-0.19053,0.19611-0.49798,0.01209-0.69503l-0.0123-0.0123l0,0l-0.3779-0.3779c0.71283-0.8531,1.14848-1.90333,1.2488-3.0105&#xA;&#x9;h0.5329c0.27609-0.00544,0.49549-0.23366,0.49006-0.50975C13.98227,7.22064,13.76611,7.00435,13.4978,6.9989z M7.9987,3.0505&#xA;&#x9;c0.83871,0.09248,1.63383,0.42154,2.2926,0.9488l-2.15,2.15c-0.04663-0.0218-0.09436-0.04116-0.143-0.058V3.0505H7.9987z&#xA;&#x9; M6.9987,3.0505V6.091c-0.04864,0.01684-0.09637,0.0362-0.143,0.058l-2.15-2.15c0.65897-0.52726,1.45431-0.85622,2.2932-0.9485&#xA;&#x9;H6.9987z M3.9987,4.7062l2.15,2.15c-0.0218,0.04663-0.04116,0.09436-0.058,0.143H3.0505&#xA;&#x9;c0.09243-0.83886,0.42154-1.63413,0.9489-2.293L3.9987,4.7062z M3.0505,7.9987H6.091c0.01687,0.04863,0.03623,0.09636,0.058,0.143&#xA;&#x9;l-2.15,2.15C3.47173,9.63281,3.14276,8.83753,3.0505,7.9987z M6.9989,11.9471c-0.83871-0.09248-1.63383-0.42154-2.2926-0.9488&#xA;&#x9;l2.15-2.15c0.04663,0.0218,0.09436,0.04116,0.143,0.058v3.0405L6.9989,11.9471z M7.9989,11.9471V8.9066&#xA;&#x9;c0.04864-0.01683,0.09638-0.03619,0.143-0.058l2.15,2.15c-0.65895,0.5273-1.4543,0.85627-2.2932,0.9485H7.9989z M10.9989,10.2914&#xA;&#x9;l-2.15-2.15c0.02177-0.04664,0.04113-0.09437,0.058-0.143h3.0415c-0.09276,0.83901-0.42232,1.6343-0.9502,2.293H10.9989z&#xA;&#x9; M8.9066,6.9989c-0.01684-0.04864-0.0362-0.09637-0.058-0.143l2.15-2.15c0.52726,0.65877,0.85632,1.45389,0.9488,2.2926H8.9066&#xA;&#x9;V6.9989z"/>\n</svg>'},"religious-christian":{label:"Religious christian",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="religious-christian-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect3338" d="M6,0.9552V4H3v3h3v8h3V7h3V4H9V1&#xA;&#x9;c0-1-0.9776-1-0.9776-1H6.9887C6.9887,0,6,0,6,0.9552z"/>\n</svg>'},"religious-jewish":{label:"Religious jewish",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="religious-jewish-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M15,12H9.78L7.5,15l-2.26-3H0l2.7-4L0,4h5.3l2.2-4l2.34,4H15l-2.56,4L15,12z"/>\n</svg>'},"religious-muslim":{label:"Religious muslim",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="religious-muslim-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path7552-2-1" d="M6.7941,0C3,0,0,3,0,6.7941&#xA;&#x9;s3,6.7941,6.7941,6.7941c2.1176,0,4.4118-0.7059,5.6471-2.2941C11.6471,11.8235,10.1471,12.4412,9,12.4412&#xA;&#x9;c-2.9118,0-5.1176-2.9118-5.1176-5.8235S6.0882,1.1471,9,1.1471c1.0588,0,2.5588,0.6176,3.4412,1.1471&#xA;&#x9;C11.2059,0.7059,8.9118,0,6.7941,0z M11,3l-1,2.5H7L9.5,7l-1,3L11,8.5l2.5,1.5l-1-3L15,5.5h-3L11,3z"/>\n</svg>'},"residential-community":{label:"Residential community",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="residential-community-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11.8,13.5V11c0.7-0.1,1.2-0.7,1.2-1.5S12.3,8,11.5,8S10,8.7,10,9.5c0,0.7,0.5,1.4,1.2,1.5v2.5H7V2H2v11.5H1V14h13v-0.5&#xA;&#x9;H11.8z M6,11H3v-1h3V11z M6,9H3V8h3V9z M6,7H3V6h3V7z M6,5H3V4h3V5z"/>\n</svg>'},restaurant:{label:"Restaurant",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="restaurant-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path11774" d="M3.5,0l-1,5.5c-0.1464,0.805,1.7815,1.181,1.75,2L4,14c-0.0384,0.9993,1,1,1,1s1.0384-0.0007,1-1L5.75,7.5&#xA;&#x9;c-0.0314-0.8176,1.7334-1.1808,1.75-2L6.5,0H6l0.25,4L5.5,4.5L5.25,0h-0.5L4.5,4.5L3.75,4L4,0H3.5z M12,0&#xA;&#x9;c-0.7364,0-1.9642,0.6549-2.4551,1.6367C9.1358,2.3731,9,4.0182,9,5v2.5c0,0.8182,1.0909,1,1.5,1L10,14c-0.0905,0.9959,1,1,1,1&#xA;&#x9;s1,0,1-1V0z"/>\n</svg>'},"restaurant-noodle":{label:"Restaurant noodle",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="restaurant-noodle-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="restaurant-noodle-15">\n    <path d="M4.457,11.9892,1,8V7H14V8l-3.4961,3.9891ZM3.9882,2.5a.5.5,0,0,0-1,0v.5671l-1.7969.3675a.25.25,0,1,0,.094.4911l1.7029-.2776v.5662l-1.75.0357a.25.25,0,0,0,0,.5l1.75.0357V5.998h1Zm9.5,1.5-7.5.2625V2.9951l7.594-1.0737a.5.5,0,0,0-.1881-.9822L5.9792,2.4555a.4963.4963,0,0,0-.991.0445v.2276l-.493.1009V3.18l.493-.08V4.2974l-.493.01v.4608L13.4882,5a.5.5,0,0,0,0-1ZM10,13H5v.5757h5Z"/>\n  </g>\n</svg>'},"restaurant-pizza":{label:"Restaurant pizza",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="restaurant-pizza-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="restaurant-pizza-15">\n    <path d="M2.3926,8.9315,1.0245,8.3148A14.0478,14.0478,0,0,1,8.7637.9994l.027.07L9.3022,2.4l-.0037.0013a12.6131,12.6131,0,0,0-6.9057,6.53Zm10.9631,4.96L3.42,9.413a11.6038,11.6038,0,0,1,6.354-6.0088l.0033-.0013.8163,2.1222c-.0281-.0022-.0521-.0162-.0808-.0162a1.062,1.062,0,1,0,.7642,1.7932L13.69,13.575A.2487.2487,0,0,1,13.3557,13.891Zm-4.93-5.3727a.9245.9245,0,1,0-.9245.9244A.9245.9245,0,0,0,8.4255,8.5183Zm3.0169,2.03a.9252.9252,0,1,0-.9252.9252A.9252.9252,0,0,0,11.4424,10.5478Z"/>\n  </g>\n</svg>'},"restaurant-seafood":{label:"Restaurant seafood",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="restaurant-seafood-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="restaurant-seafood-15">\n    <path d="M11.433,10.0889h2.49v.75H11.8525A4.81,4.81,0,0,1,13.4751,13.14l-.71.2422a4.01,4.01,0,0,0-1.74-2.1971,1.7775,1.7775,0,0,1-1.0352.4538L8.4374,12.9852H6.5188L4.9839,11.623a2.0222,2.0222,0,0,1-1.0929-.44,4.0093,4.0093,0,0,0-1.7426,2.1988l-.71-.2422a4.8146,4.8146,0,0,1,1.622-2.3007H.99v-.75H3.4839l.8633-.6764L3.3329,7.7567a2.2738,2.2738,0,0,1-.269.0293,2.0192,2.0192,0,0,1-2.0532-2.08c0-2.08,1.979-4.16,1.979-4.16L2.2531,5.9931l1.7255-.0012L4.9913,2.9852l0,2.9956a2.0936,2.0936,0,0,1-.6993,1.4121l.8536,1.3936L5.23,8.7208a3.8669,3.8669,0,0,1,4.4784,0l.0605.0474.869-1.4152a2.1177,2.1177,0,0,1-.6433-1.3722l0-2.9956.9836,3.0067,1.7547.0012-.7367-4.4466s1.982,2.08,1.982,4.16a2.0211,2.0211,0,0,1-2.0562,2.08,2.3125,2.3125,0,0,1-.3441-.0376L10.5676,9.3945l.8407.6593C11.4212,10.0638,11.4218,10.0782,11.433,10.0889Z"/>\n  </g>\n</svg>'},roadblock:{label:"Roadblock",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="roadblock-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="roadblock-24" d="M7.5,0C3.3579,0,0,3.3579,0,7.5S3.3579,15,7.5,15S15,11.6421,15,7.5S11.6421,0,7.5,0z M3,6h9v3H3V6z"/>\n</svg>'},rocket:{label:"Rocket",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="rocket-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path7143" d="M12.5547,1c-2.1441,0-5.0211,1.471-6.9531,4H4&#xA;&#x9;C2.8427,5,2.1794,5.8638,1.7227,6.7773L1.1113,8h1.4434H4l1.5,1.5L7,11v1.4453v1.4434l1.2227-0.6113&#xA;&#x9;C9.1362,12.8206,10,12.1573,10,11V9.3984c2.529-1.932,4-4.809,4-6.9531V1H12.5547z M10,4c0.5523,0,1,0.4477,1,1l0,0&#xA;&#x9;c0,0.5523-0.4477,1-1,1l0,0C9.4477,6,9,5.5523,9,5v0C9,4.4477,9.4477,4,10,4L10,4z M3.5,10L3,10.5C2.2778,11.2222,2,13,2,13&#xA;&#x9;s1.698-0.198,2.5-1L5,11.5L3.5,10z"/>\n</svg>'},school:{label:"School",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="school-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,13v-1h2v-1H9.5v-1H13V9h-2V8h2V7h-2V6h2V5H9.5V4H13V3h-2V2h2V1H8v13h5v-1H11z M6,11H2V1h4V11z M6,12l-2,2l-2-2H6z"/>\n</svg>'},scooter:{label:"Scooter",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="scooter-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M4.908,12a1.5,1.5,0,1,1-2.816,0Zm8.65-6C13.539,6,13,6,13,6V3h.351a.282.282,0,0,0,.223-.148l.268-.536a.334.334,0,0,0,.009-.066A.25.25,0,0,0,13.6,2H13V1.7a.215.215,0,0,0-.2-.2H9.25a.25.25,0,0,0,0,.5H12V6.6L7.6,10H6V7.5A.5.5,0,0,0,5.5,7H5V5H6.75a.25.25,0,0,0,0-.5L2.266,4.034c-.006,0-.01-.007-.016-.007a.25.25,0,0,0-.25.25V4.75A.25.25,0,0,0,2.25,5H3V7H2.5A1.538,1.538,0,0,0,1,8.5v2a.472.472,0,0,0,.442.5C1.461,11,7.5,11,7.5,11L10,10h3.5a.472.472,0,0,0,.5-.442C14,9.539,14,6.5,14,6.5A.472.472,0,0,0,13.558,6ZM12.5,11A1.5,1.5,0,1,0,14,12.5,1.538,1.538,0,0,0,12.5,11Z"/>\n</svg>'},shelter:{label:"Shelter",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="shelter-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M4,7v5h9.5v2H2l0,0l0,0V7.78L1,8.16V6l13-5v2.14L4,7z"/>\n</svg>'},shoe:{label:"Shoe",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="shoe-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <g>\n    <path d="M9.5,7C9.086,6.7652,8.6109,6.4041,8.1848,6.0524l-2.1743-2.831C5.8204,2.9729,5.4644,2.927,5.2227,3.1172&#xA;&#x9;&#x9;C5.0977,3.214,5.0262,3.3536,5.0097,3.5H5V5H3.2087C3.0751,5,2.9469,4.9469,2.8524,4.8524C2.8524,4.8524,2.5,4,2,4&#xA;&#x9;&#x9;S1.4997,4,1.4997,4C1.2238,4,1,4.2237,1,4.4997V6.25v0.634V9h5.5c1.5,0,2,1,3.5,1s4,0,4,0V9.5C14,8,10.5469,7.5938,9.5,7z"/>\n    <path d="M9.5,11c-0.6318,0-1.0469-0.207-1.5264-0.4473C7.4556,10.2939,6.8682,10,6,10H1.5004H1v1.4996&#xA;&#x9;&#x9;C1,11.7759,1.224,12,1.5004,12h3.9993C5.776,12,6,11.7759,6,11.4996V11c0.6318,0,1.0464,0.207,1.5264,0.4473&#xA;&#x9;&#x9;C8.0449,11.7061,8.6318,12,9.5,12h4c0.2764,0,0.5-0.2236,0.5-0.5V11H9.5z"/>\n  </g>\n</svg>'},shop:{label:"Shop",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="shop-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.33,6H11.5l-0.39-2.33c-0.1601-0.7182-0.7017-1.2905-1.41-1.49C9.3507,2.0676,8.9869,2.007,8.62,2H6.38&#xA;&#x9;C6.0131,2.007,5.6493,2.0676,5.3,2.18C4.5917,2.3795,4.0501,2.9518,3.89,3.67L3.5,6H1.67C1.3939,5.9983,1.1687,6.2208,1.167,6.497&#xA;&#x9;C1.1667,6.5489,1.1744,6.6005,1.19,6.65l1.88,6.3l0,0C3.2664,13.5746,3.8453,13.9996,4.5,14h6c0.651-0.0047,1.2247-0.4289,1.42-1.05&#xA;&#x9;l0,0l1.88-6.3c0.0829-0.2634-0.0635-0.5441-0.3269-0.627C13.4268,6.0084,13.3786,6.0007,13.33,6z M4.52,6l0.36-2.17&#xA;&#x9;c0.0807-0.3625,0.3736-0.6395,0.74-0.7C5.8663,3.0524,6.1219,3.0087,6.38,3h2.24c0.2614,0.0078,0.5205,0.0515,0.77,0.13&#xA;&#x9;c0.3664,0.0605,0.6593,0.3375,0.74,0.7L10.48,6h-6H4.52z"/>\n</svg>'},skateboard:{label:"Skateboard",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="skateboard-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="icon_concepts:_sports_leisure" d="M11,8H4A2.0024,2.0024,0,0,1,2,6H3A1.001,1.001,0,0,0,4,7h7a1.001,1.001,0,0,0,1-1h1A2.0024,2.0024,0,0,1,11,8Zm0,1a1,1,0,1,0,1,1A1,1,0,0,0,11,9ZM4,9a1,1,0,1,0,1,1A1,1,0,0,0,4,9Z"/>\n</svg>'},skiing:{label:"Skiing",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="skiing-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M15,4.5C15,5.3284,14.3284,6,13.5,6S12,5.3284,12,4.5S12.6716,3,13.5,3S15,3.6716,15,4.5z M13.72,11.89&#xA;&#x9;c-0.0623-0.1197-0.2083-0.1684-0.33-0.11c-0.6846,0.4194-1.5208,0.5111-2.28,0.25L4.78,8.86L7.5,7.5v-3L9,5.25v3L10.5,9L12,8.25&#xA;&#x9;L10.5,7.5V3l-3-1.5L6,2.25v4.5L3.28,8.11L0.61,6.78C0.4857,6.7192,0.3358,6.7707,0.275,6.895C0.2142,7.0193,0.2657,7.1692,0.39,7.23&#xA;&#x9;l10.5,5.25c0.3156,0.135,0.6568,0.1998,1,0.19c0.5998-0.0103,1.1889-0.161,1.72-0.44c0.1236-0.0615,0.174-0.2116,0.1125-0.3352&#xA;&#x9;C13.7217,11.8932,13.7208,11.8916,13.72,11.89z"/>\n</svg>'},slaughterhouse:{label:"Slaughterhouse",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="slaughterhouse-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M15,8.1c0,1.376-1.363.694-1.363.694L12.5,9H11a5.309,5.309,0,0,1-1.5,2,3.272,3.272,0,0,1-.523,1.125c-.077.091-.061.2-.068.33L9,14.755a.264.264,0,0,1-.266.25A.242.242,0,0,1,8.5,14.8L8,11.5H4v3.253A.247.247,0,0,1,3.753,15h0a.25.25,0,0,1-.241-.2L3,12v-.5a8.2,8.2,0,0,1-1.426-.1A1.886,1.886,0,0,1,.9,12.826c-.128.083-.148.211-.133.386,0,0,.19,1.532.19,1.538a.25.25,0,0,1-.25.25.238.238,0,0,1-.23-.174l-.427-1.7a.35.35,0,0,1,.055-.3c.437-.68-.049-2.55-.049-2.55A1.354,1.354,0,0,1,0,9.922V7.5A2.027,2.027,0,0,1,2.736,5.586s.1.03.142.049a15.15,15.15,0,0,0,3.814.038l.179-.062a1.842,1.842,0,0,1,1.26,0,.972.972,0,0,1,.227.089,1.994,1.994,0,0,1,.287.171A1.8,1.8,0,0,0,9.5,6h1V5l.5.5c.5-1.5,2.5-1,2.5-1a1.687,1.687,0,0,0-1.5,1l2.5,2a.613.613,0,0,1,.186-.069A.318.318,0,0,1,15,7.752V8.1Z"/>\n</svg>'},slipway:{label:"Slipway",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="slipway-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <g id="slipway-final">\n    <path d="M1.0417,11l12,1.495V13h-12Zm12-4-1,1v.5833L4.2381,5.3318l.0624-.1248L5.652,3.8447h.8311a.35.35,0,0,0,0-.6992H5.5065a.3518.3518,0,0,0-.248.1025L3.7643,4.7529a.3714.3714,0,0,0-.0654.0909l-.109.218L1.0417,4c0,2-.0293,3.9578,2.8595,4.4994C5.321,8.7656,12.0417,10,12.0417,10l2-2Z"/>\n  </g>\n</svg>'},snowmobile:{label:"Snowmobile",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" id="snowmobile-15">\n  <path d="M15,11a1,1,0,0,1-1,1l0,0v0H9.4142a1,1,0,0,1-.7071-.2929L7.146,10.146A.4984.4984,0,0,0,6.7935,10H3.3343a1.0023,1.0023,0,0,1-.6015-.2006L1.3857,8.7888A1.0134,1.0134,0,0,1,1,8a.9953.9953,0,0,1,.4719-.8444L5,5,6.0385,3.3076h0A.5.5,0,0,1,7,3.5V7L8,8H9l5.4115-.9922a.5.5,0,0,1,.3555.915L13,9l1.6313,1.2243A.99.99,0,0,1,15,11ZM5.5,11H3.2247a3.0035,3.0035,0,0,1-1.44-.3679L.74,10.0612a.5.5,0,0,0-.48.8775l1.2687.6934A3.0032,3.0032,0,0,0,2.969,12H5.5a.5.5,0,0,0,0-1Z"/>\n</svg>'},soccer:{label:"Soccer",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="soccer-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,1.5C11,2.3284,10.3284,3,9.5,3S8,2.3284,8,1.5S8.6716,0,9.5,0S11,0.6716,11,1.5z M11,11c-0.5523,0-1,0.4477-1,1&#xA;&#x9;s0.4477,1,1,1s1-0.4477,1-1S11.5523,11,11,11z M12.84,6.09l-1.91-1.91l0,0C10.8399,4.0675,10.7041,4.0014,10.56,4H3.5&#xA;&#x9;C3.2239,4,3,4.2239,3,4.5S3.2239,5,3.5,5h2.7L3,11.3l0,0c-0.0138,0.066-0.0138,0.134,0,0.2c-0.058,0.2761,0.1189,0.547,0.395,0.605&#xA;&#x9;C3.6711,12.163,3.942,11.9861,4,11.71l0,0L5,10h2l-1.93,4.24l0,0C5.0228,14.3184,4.9986,14.4085,5,14.5&#xA;&#x9;c-0.0552,0.2761,0.1239,0.5448,0.4,0.6c0.2761,0.0552,0.5448-0.1239,0.6-0.4l0,0l4.7-9.38l1.44,1.48&#xA;&#x9;c0.211,0.1782,0.5264,0.1516,0.7046-0.0593C13.0037,6.5523,13.0018,6.2761,12.84,6.09z"/>\n</svg>'},square:{label:"Square",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="square-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13,14H2c-0.5523,0-1-0.4477-1-1V2c0-0.5523,0.4477-1,1-1h11c0.5523,0,1,0.4477,1,1v11C14,13.5523,13.5523,14,13,14z"/>\n</svg>'},"square-stroked":{label:"Square stroked",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="square-stroked-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12.7,2.3v10.4H2.3V2.3H12.7 M13,1H2C1.4477,1,1,1.4477,1,2v11c0,0.5523,0.4477,1,1,1h11c0.5523,0,1-0.4477,1-1V2&#xA;&#x9;C14,1.4477,13.5523,1,13,1L13,1z"/>\n</svg>'},stadium:{label:"Stadium",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="stadium-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4177" d="M7,1v2v1.5v0.5098C4.1695,5.1037,2.0021,5.9665,2,7v4.5c0,1.1046,2.4624,2,5.5,2s5.5-0.8954,5.5-2V7&#xA;&#x9;c-0.0021-1.0335-2.1695-1.8963-5-1.9902V4.0625L11,2.75L7,1z M3,8.1465c0.5148,0.2671,1.2014,0.4843,2,0.6328v2.9668&#xA;&#x9;C3.7948,11.477,3,11.0199,3,10.5V8.1465z M12,8.1484V10.5c0,0.5199-0.7948,0.977-2,1.2461V8.7812&#xA;&#x9;C10.7986,8.6328,11.4852,8.4155,12,8.1484z M6,8.9219C6.4877,8.973,6.9925,8.9992,7.5,9C8.0073,8.9999,8.5121,8.9743,9,8.9238&#xA;&#x9;v2.9844C8.5287,11.964,8.0288,12,7.5,12S6.4713,11.964,6,11.9082V8.9219z"/>\n</svg>'},star:{label:"Star",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="star-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4749-2-8-2" d="M7.5,0l-2,5h-5l4,3.5l-2,6l5-3.5&#xA;&#x9;l5,3.5l-2-6l4-3.5h-5L7.5,0z"/>\n</svg>'},"star-stroked":{label:"Star stroked",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="star-stroked-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4749-2-8-2" d="M7.5,3.19l1.07,2.68L8.82,6.5h3l-2,1.75l-0.5,0.44l0.23,0.63l1,3.13l-2.48-1.77&#xA;&#x9;l-0.57-0.4l-0.57,0.4l-2.52,1.77l1-3.13l0.21-0.63l-0.5-0.44l-2-1.75h3l0.25-0.63L7.5,3.19 M7.5,0.5l-2,5h-5l4,3.5l-2,6l5-3.5l5,3.5&#xA;&#x9;l-2-6l4-3.5h-5L7.5,0.5L7.5,0.5z"/>\n</svg>'},suitcase:{label:"Suitcase",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="suitcase-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path17" d="M11,4V2c0-1-1-1-1-1H5.0497&#xA;&#x9;c0,0-1.1039,0.0015-1.0497,1v2H2c0,0-1,0-1,1v7c0,1,1,1,1,1h11c0,0,1,0,1-1V5c0-1-1-1-1-1H11z M5.5,2.5h4V4h-4V2.5z"/>\n</svg>'},sushi:{label:"Sushi",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="sushi-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path4999" d="M5.5,3C5.2239,3,5,3.2239,5,3.5H2.75C1.2265,3.5,0,4.7265,0,6.25c0,0.8274,0.3687,1.5592,0.9434,2.0625&#xA;&#x9;C0.3803,8.6675,0,9.2893,0,10c0,1.0994,0.9006,2,2,2h3.5h2H10c1.0994,0,2-0.9006,2-2c0-0.4883-0.1863-0.9294-0.4805-1.2773&#xA;&#x9;l2.1777,0.9629c0.3716,0.1831,0.8213,0.0303,1.0044-0.3413c0.1831-0.3716,0.0303-0.8213-0.3413-1.0044&#xA;&#x9;c-0.0188-0.0093-0.038-0.0178-0.0576-0.0254l-1.8105-0.8027l1.6309-0.2715c0.4099-0.0599,0.6936-0.4408,0.6337-0.8507&#xA;&#x9;c-0.0544-0.3724-0.3765-0.6469-0.7528-0.6415c-0.0426,0.0003-0.085,0.0042-0.127,0.0117l-2.1309,0.3555&#xA;&#x9;C11.2595,4.9521,10.0387,3.7837,8,3.5488V3.5C8,3.2239,7.7761,3,7.5,3H5.5z M6,4h1v5v2H6V9V4z M9.5,8&#xA;&#x9;c0.259,0,0.4638,0.1974,0.4902,0.4492l0.0762-0.1328c0.1385-0.2399,0.4437-0.3201,0.6836-0.1816s0.3201,0.4418,0.1816,0.6816&#xA;&#x9;l-0.2578,0.4473C10.8727,9.445,11,9.7021,11,10c0,0.5626-0.4374,1-1,1H8V9h1V8.5C9,8.223,9.223,8,9.5,8z M2.4395,8.0703&#xA;&#x9;c0.1934-0.0242,0.3903,0.0662,0.4941,0.2461l0.2012,0.3477C3.226,8.5647,3.3538,8.5,3.5,8.5C3.777,8.5,4,8.723,4,9h1v2H2&#xA;&#x9;c-0.5626,0-1-0.4374-1-1s0.4374-1,1-1h0.1738L2.0684,8.8164C1.9299,8.5765,2.0101,8.2733,2.25,8.1348&#xA;&#x9;C2.31,8.1001,2.375,8.0784,2.4395,8.0703z"/>\n</svg>'},swimming:{label:"Swimming",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="swimming-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path16388" d="M10.1113,2C9.9989,2,9.6758,2.1465,9.6758,2.1465L6.3535,3.8262&#xA;&#x9;C5.9111,4.0024,5.7358,4.7081,6.002,5.0605l0.9707,1.4082L3.002,8.498L5,9.998l2.502-1.5l2.5,1.5l1.002-1.002l-3-4l2.5566-1.5293&#xA;&#x9;c0.5286-0.2662,0.4434-0.7045,0.4434-0.9707C10.9999,2.2861,10.6437,2,10.1113,2z M12.252,5C11.2847,5,10.5,5.7827,10.5,6.75&#xA;&#x9;s0.7847,1.752,1.752,1.752s1.75-0.7847,1.75-1.752S13.2192,5,12.252,5z M2.5,10L0,11.5V13l2.5-1.5L5,13l2.502-1.5l2.5,1.5L12,11.5&#xA;&#x9;l3,1.5v-1.5L12,10l-1.998,1.5l-2.5-1.5L5,11.5L2.5,10z"/>\n</svg>'},"table-tennis":{label:"Table tennis",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="table-tennis-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="icon_concepts:_sports_leisure" d="M11.9676,10.2275a3.8116,3.8116,0,0,1-1.9122.9831L3.7678,4.9338A4.0283,4.0283,0,0,1,4.7725,3.0324C7.03.7745,9.98.2235,12.3781,2.6219S14.2255,7.97,11.9676,10.2275Zm-6.987,1.6093A3.8422,3.8422,0,0,1,6.149,11.278,4.5328,4.5328,0,0,1,8,11.4452L3.5456,7a4.4126,4.4126,0,0,1,.1572,1.9223,3.6639,3.6639,0,0,1-.5208,1.1159c-1.072,1.263-2.132,1.727-2.132,2.1879A1.8378,1.8378,0,0,0,2.7739,13.95C3.2348,13.95,3.6917,12.9368,4.9806,11.8368Z"/>\n</svg>'},teahouse:{label:"Teahouse",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="teahouse-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M11,7c-0.2,1.4-0.5,2.7-1,4c-0.3,0.4-0.6,0.7-1,1v2H6v-2c-0.4-0.3-0.7-0.6-1-1C4.5,9.7,4.2,8.4,4,7H11z M8.1,5.7&#xA;&#x9;c1.2-0.3,1.7-0.3,1.8-1.5c0-0.6-0.4-0.8-1.5-1.4C7.5,2.4,7.1,1.8,7.2,1C6.8,1.9,7,3,8,3.5C10,4.5,8.1,5.7,8.1,5.7z M5.8,6&#xA;&#x9;c0.7-0.2,1.1-0.2,1.1-0.9c0-0.4-0.3-0.5-0.9-0.9C5.4,4,5.1,3.5,5.2,3C4.9,3.6,5.1,4.3,5.7,4.6C6.9,5.2,5.8,6,5.8,6z"/>\n</svg>'},telephone:{label:"Telephone",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" id="telephone-15">\n  <path d="M4.51,8.88a0.51,0.51,0,0,0,0,.72l0.72,0.72L3.07,12.5,2.7,12.13A2.24,2.24,0,0,1,2,10.69V9.24a2.24,2.24,0,0,1,.7-1.45L7.77,2.72A2.24,2.24,0,0,1,9.22,2h1.45a2.24,2.24,0,0,1,1.45.72l0.36,0.36L10.31,5.26,9.58,4.53a0.51,0.51,0,0,0-.72,0ZM4.13,13.6a1,1,0,0,0,1.4137.0363Q5.5623,13.6186,5.58,13.6l0.72-.72a1,1,0,0,0,.0363-1.4137Q6.3186,11.4477,6.3,11.43Zm7.25-7.28a1,1,0,0,0,1.4137.0363C12.8061,6.3445,13.55,5.6,13.55,5.6a1,1,0,0,0,.0363-1.4137Q13.5686,4.1677,13.55,4.15Z"/>\n</svg>'},tennis:{label:"Tennis",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="tennis-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.1284,1.87c-1.5418-1.5406-4.5535-.7759-6.28,1.05a6.8282,6.8282,0,0,0-1.88,4.4,5.7275,5.7275,0,0,1-.57,2.72.6814.6814,0,0,0-.67.17l-2.49,2.5a.6941.6941,0,0,0,0,.98l.07.07a.7051.7051,0,0,0,.98,0l2.5-2.49a.683.683,0,0,0,.18-.66,8.5694,8.5694,0,0,1,3.12-.58,6.5487,6.5487,0,0,0,3.99-1.87C14.1084,6.13,14.579,3.3194,13.1284,1.87Zm-2.2-.04a2.3071,2.3071,0,0,1,1.64.61,2.548,2.548,0,0,1,.5,2.44l-2.95-2.96A3.8648,3.8648,0,0,1,10.9284,1.83Zm-4.57,6.81a2.6485,2.6485,0,0,1-.48-2.55l3.04,3.04A2.8522,2.8522,0,0,1,6.3584,8.64Zm2.88.39-3.26-3.27a5.1623,5.1623,0,0,1,.49-1.08l3.85,3.85A5.5093,5.5093,0,0,1,9.2384,9.03Zm1.34-.66-3.94-3.95a5.2032,5.2032,0,0,1,.74-.9l4.1,4.1A5.6869,5.6869,0,0,1,10.5784,8.37Zm1.11-.96-4.1-4.1a5.5714,5.5714,0,0,1,.84-.65l3.92,3.92A5.7187,5.7187,0,0,1,11.6884,7.41Zm.82-1.09L8.6984,2.5a4.1707,4.1707,0,0,1,1.09-.48l3.2,3.2A5.5656,5.5656,0,0,1,12.5084,6.32Z"/>\n</svg>'},theatre:{label:"Theatre",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="theatre-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path6342-3" d="M2,1c0,0-1,0-1,1v5.1582C1,8.8885,1.354,11,4.5,11H5V8L2.5,9c0,0,0-2.5,2.5-2.5V5&#xA;&#x9;c0-0.7078,0.0868-1.3209,0.5-1.7754C5.8815,2.805,6.5046,1.9674,8.1562,2.7539L9,3.3027V2c0,0,0-1-1-1C7.2922,1,6.0224,2,5,2&#xA;&#x9;S2.7865,1,2,1z M3,3c0.5523,0,1,0.4477,1,1S3.5523,5,3,5S2,4.5523,2,4S2.4477,3,3,3z M7,4c0,0-1,0-1,1v5c0,2,1,4,4,4s4-2,4-4V5&#xA;&#x9;c0-1-1-1-1-1c-0.7078,0-1.9776,1-3,1S7.7865,4,7,4z M8,6c0.5523,0,1,0.4477,1,1S8.5523,8,8,8S7,7.5523,7,7S7.4477,6,8,6z M12,6&#xA;&#x9;c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1s-1-0.4477-1-1S11.4477,6,12,6z M7.5,10H10h2.5c0,0,0,2.5-2.5,2.5S7.5,10,7.5,10z"/>\n</svg>'},toilet:{label:"Toilet",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="toilet-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M4.5,3C3.6716,3,3,2.3284,3,1.5S3.6716,0,4.5,0S6,0.6716,6,1.5S5.3284,3,4.5,3z M14,1.5C14,0.6716,13.3284,0,12.5,0&#xA;&#x9;S11,0.6716,11,1.5S11.6716,3,12.5,3S14,2.3284,14,1.5z M8.86,6.64L8.86,6.64L6.38,4.15l0,0C6.2798,4.0492,6.142,3.9949,6,4H3&#xA;&#x9;C2.8697,4.0003,2.7445,4.0503,2.65,4.14l0,0L0.14,6.63c-0.2261,0.177-0.2659,0.5039-0.0889,0.73s0.5039,0.2659,0.73,0.0889&#xA;&#x9;C0.8142,7.423,0.8441,7.3931,0.87,7.36L3,5.2L1,11h2v3.33c-0.0075,0.0497-0.0075,0.1003,0,0.15&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C3.802,14.839,3.9595,14.6815,4,14.48l0,0V11h1v3.5l0,0&#xA;&#x9;c0.0555,0.2761,0.3244,0.455,0.6005,0.3995C5.802,14.859,5.9595,14.7015,6,14.5c0.0075-0.0497,0.0075-0.1003,0-0.15V11h2L6,5.2&#xA;&#x9;l2.14,2.16l0,0c0.0967,0.1081,0.2349,0.17,0.38,0.17C8.7954,7.5088,9.0061,7.2761,9,7C9.0023,6.8663,8.9521,6.737,8.86,6.64z&#xA;&#x9; M14.5,4h-4C10.2239,4,10,4.2239,10,4.5v5c0,0.2761,0.2239,0.5,0.5,0.5S11,9.7761,11,9.5v5c0,0.2761,0.2239,0.5,0.5,0.5&#xA;&#x9;s0.5-0.2239,0.5-0.5v-5h1v5c0,0.2761,0.2239,0.5,0.5,0.5s0.5-0.2239,0.5-0.5v-5c0,0.2761,0.2239,0.5,0.5,0.5S15,9.7761,15,9.5v-5&#xA;&#x9;C15,4.2239,14.7761,4,14.5,4z"/>\n</svg>'},town:{label:"Town",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="town-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M10.651,7.121a.251.251,0,0,0-.314,0L8.092,8.929A.247.247,0,0,0,8,9.122v4.625A.253.253,0,0,0,8.253,14H9.747A.253.253,0,0,0,10,13.747h0V12h1v1.747a.253.253,0,0,0,.253.253h1.494A.253.253,0,0,0,13,13.747h0V9.12a.25.25,0,0,0-.094-.2ZM10,11H9V10h1Zm2,0H11V10h1ZM5.71,1.815a.252.252,0,0,0-.42,0L2.042,5.936A.252.252,0,0,0,2,6.076v7.671A.252.252,0,0,0,2.251,14h2.5A.252.252,0,0,0,5,13.748V12H6v1.748A.252.252,0,0,0,6.252,14H7V8a.5.5,0,0,1,.188-.391L9,6C9,5.95,5.71,1.815,5.71,1.815ZM4,10H3V9H4ZM4,7H3V6H4Zm2,3H5V9H6ZM6,7H5V6H6Z"/>\n</svg>'},"town-hall":{label:"Town hall",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="town-hall-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path7509" d="M7.5,0L1,3.4453V4h13V3.4453L7.5,0z M2,5v5l-1,1.5547V13h13v-1.4453L13,10V5H2z M4,6h1v5.5H4V6z M7,6h1v5.5H7&#xA;&#x9;V6z M10,6h1v5.5h-1V6z"/>\n</svg>'},triangle:{label:"Triangle",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="triangle-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path21090-9" d="M7.5385,2&#xA;&#x9;C7.2437,2,7.0502,2.1772,6.9231,2.3846l-5.8462,9.5385C1,12,1,12.1538,1,12.3077C1,12.8462,1.3846,13,1.6923,13h11.6154&#xA;&#x9;C13.6923,13,14,12.8462,14,12.3077c0-0.1538,0-0.2308-0.0769-0.3846L8.1538,2.3846C8.028,2.1765,7.7882,2,7.5385,2z"/>\n</svg>'},"triangle-stroked":{label:"Triangle stroked",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="triangle-stroked-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="rect3338" d="M7.5243,1.5004&#xA;&#x9;C7.2429,1.4913,6.9787,1.6423,6.8336,1.8952l-5.5,9.8692C1.0218,12.3078,1.395,12.9999,2,13h11&#xA;&#x9;c0.605-0.0001,0.9782-0.6922,0.6664-1.2355l-5.5-9.8692C8.0302,1.6579,7.7884,1.5092,7.5243,1.5004z M7.5,3.8993l4.1267,7.4704&#xA;&#x9;H3.3733L7.5,3.8993z"/>\n</svg>'},veterinary:{label:"Veterinary",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="veterinary-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path3340" d="M7.5,6c-2.5,0-3,2.28-3,3.47l0,0c-0.6097,0.2059-1.1834,0.5062-1.7,0.89&#xA;&#x9;c-0.871,0.6614-1.0492,1.8998-0.4,2.78c0.6799,0.8542,1.9081,1.0297,2.8,0.4c0.6779-0.4601,1.4808-0.701,2.3-0.69&#xA;&#x9;c0.8192-0.011,1.6221,0.2299,2.3,0.69c0.8575,0.6854,2.1072,0.5515,2.8-0.3c0.6888-0.8134,0.5878-2.0313-0.2256-2.7201&#xA;&#x9;c-0.0243-0.0206-0.0491-0.0406-0.0744-0.0599l-0.1-0.1c-0.5333-0.3564-1.1032-0.6548-1.7-0.89l0,0C10.5,8.29,10,6,7.5,6z"/>\n  <path id="ellipse4153" d="M2.08,4.3c-0.7348,0.3676-1.0652,1.2371-0.76,2c0.064,0.8282,0.7809,1.4517,1.61,1.4&#xA;&#x9;c0.7348-0.3676,1.0652-1.2371,0.76-2C3.626,4.8718,2.9091,4.2483,2.08,4.3z"/>\n  <path id="ellipse4163" d="M12.93,4.3c0.7348,0.3676,1.0653,1.2371,0.76,2c-0.064,0.8282-0.7809,1.4517-1.61,1.4&#xA;&#x9;c-0.7348-0.3676-1.0653-1.2371-0.76-2C11.384,4.8718,12.1009,4.2483,12.93,4.3z"/>\n  <path id="ellipse4165" d="M5.08,1.3c-0.68,0.09-1,0.94-0.76,1.87C4.4301,3.9951,5.1003,4.6321,5.93,4.7c0.68-0.09,1-0.94,0.76-1.87&#xA;&#x9;C6.5799,2.0049,5.9097,1.3679,5.08,1.3z"/>\n  <path id="ellipse4167" d="M9.93,1.3c0.68,0.09,1,0.94,0.76,1.87C10.5791,3.9986,9.9036,4.6365,9.07,4.7c-0.68-0.08-1-0.94-0.76-1.87&#xA;&#x9;C8.4209,2.0014,9.0964,1.3634,9.93,1.3z"/>\n</svg>'},viewpoint:{label:"Viewpoint",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="viewpoint-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="cf3b542b-d2af-4732-9b92-9e3dc05e460f" d="M6.02,8.425a2.3859,2.3859,0,0,0-.46.44l-4.55-3.5a7.9976,7.9976,0,0,1,1.51-1.51Zm6.46-4.56-3.5,4.55a2.3971,2.3971,0,0,1,.45.45l4.56-3.5A7.945,7.945,0,0,0,12.48,3.865ZM7.3042,10.0129a1.5,1.5,0,1,0,1.6829,1.2914h0A1.5,1.5,0,0,0,7.3042,10.0129ZM6.43,2.235a7.9329,7.9329,0,0,0-2.06.55l2.2,5.32a2.0438,2.0438,0,0,1,.61-.17Zm2.14.01-.75,5.69a2.49,2.49,0,0,1,.61.16l2.2-5.3A7.2129,7.2129,0,0,0,8.57,2.245Z"/>\n</svg>'},village:{label:"Village",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="village-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M6.176,4.176a.249.249,0,0,0-.352,0l-4.4,4.4A.25.25,0,0,0,1.6,9H3v4.751A.249.249,0,0,0,3.249,14h3.5A.249.249,0,0,0,7,13.753H7V8.323a.249.249,0,0,1,.073-.176L8.5,6.5ZM6,12H5V11H6Zm0-2H5V9H6Zm6.75-4h-.5a.25.25,0,0,0-.25.25V8L10.676,6.176a.249.249,0,0,0-.352,0L8.056,8.932A.246.246,0,0,0,8,9.088v4.66A.249.249,0,0,0,8.246,14h1.5A.253.253,0,0,0,10,13.748h0V12h1v1.747a.253.253,0,0,0,.253.253h1.5A.25.25,0,0,0,13,13.751V6.25A.25.25,0,0,0,12.75,6ZM10,11H9V10h1Zm2,0H11V10h1Z"/>\n</svg>'},volcano:{label:"Volcano",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="volcano-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path6447" d="M8.4844,1.0002&#xA;&#x9;c-0.1464,0.005-0.2835,0.0731-0.375,0.1875L6.4492,3.2619L4.8438,1.7385C4.4079,1.3374,3.7599,1.893,4.0899,2.385l1.666,2.4004&#xA;&#x9;C5.9472,5.061,6.3503,5.0737,6.5586,4.8108C6.7249,4.6009,7,4.133,7.5,4.133s0.7929,0.4907,0.9414,0.6777&#xA;&#x9;c0.175,0.2204,0.4973,0.2531,0.7129,0.0723l1.668-1.4004c0.4408-0.3741,0.0006-1.0735-0.5273-0.8379L9,3.2268V1.5002&#xA;&#x9;C9.0002,1.2179,8.7666,0.9915,8.4844,1.0002L8.4844,1.0002z M5,6.0002L2.0762,11.924C1.9993,12.0009,2,12.155,2,12.3088&#xA;&#x9;c0,0.5385,0.3837,0.6914,0.6914,0.6914h9.6172c0.3846,0,0.6914-0.153,0.6914-0.6914c0-0.1538,0.0008-0.2309-0.0762-0.3848L10,6.0002&#xA;&#x9;c-0.5,0-1,0.5-1,1v0.5c0,0.277-0.223,0.5-0.5,0.5S8,7.7772,8,7.5002v-0.5c0-0.2761-0.2238-0.5-0.5-0.5S7,6.7241,7,7.0002v2&#xA;&#x9;c0,0.277-0.223,0.5-0.5,0.5S6,9.2772,6,9.0002v-2C6,6.5002,5.5,6.0002,5,6.0002z"/>\n</svg>'},volleyball:{label:"Volleyball",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="volleyball-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path id="e086ca83-8703-4df5-a97c-5939eb32113a" d="M13.91,7.94a5.9086,5.9086,0,0,1-.13.94,8.8218,8.8218,0,0,0-2.17-1.49,8.89,8.89,0,0,0-1.4-.56,8.6142,8.6142,0,0,0-1.82-.35.221.221,0,0,0-.08-.01A7.32,7.32,0,0,1,7.5,4.59c-.01-.01-.01-.01,0-.02a7.7573,7.7573,0,0,1,1.52.15,7.0987,7.0987,0,0,1,1.56.5,6.8585,6.8585,0,0,1,1.4.78A7.4165,7.4165,0,0,1,13.91,7.94Zm-1.87-5a6.2232,6.2232,0,0,0-1.85-1.27,4.2725,4.2725,0,0,0-.98-.36,5.6412,5.6412,0,0,0-1.55-.23,1.2882,1.2882,0,0,0-.32,0A7.4263,7.4263,0,0,0,7.21,2.5c0,.2.01.39.02.58a2.28,2.28,0,0,1,.26-.01,2.6438,2.6438,0,0,1,.28.01,8.2865,8.2865,0,0,1,1.49.16,8.9879,8.9879,0,0,1,1.35.37,8.7922,8.7922,0,0,1,1.53.7,10.18,10.18,0,0,1,1.39.97A6.4588,6.4588,0,0,0,12.04,2.94ZM4.01,8.76a9.4084,9.4084,0,0,1-.62-1.37,9.1038,9.1038,0,0,1-.37-1.41,9.1748,9.1748,0,0,1-.16-1.67V4.28a8.455,8.455,0,0,1,.1-1.34A6.28,6.28,0,0,0,1.47,5.3a6.2222,6.2222,0,0,0-.4,2.2c0,.15.01.3.02.44a5.9086,5.9086,0,0,0,.13.94,5.7343,5.7343,0,0,0,.41,1.23c.22-.05.44-.11.65-.17a8.0188,8.0188,0,0,0,1.9-.88C4.12,8.96,4.06,8.86,4.01,8.76Zm2.6-2.28a9,9,0,0,1-.63-1.76,9.135,9.135,0,0,1-.24-1.48c-.02-.25-.03-.49-.03-.74a9.3777,9.3777,0,0,1,.08-1.19,4.2725,4.2725,0,0,0-.98.36,7.7038,7.7038,0,0,0-.42,1.94c-.02.22-.03.44-.03.67a7.2659,7.2659,0,0,0,.06.93,7.4258,7.4258,0,0,0,.37,1.63,6.4705,6.4705,0,0,0,.59,1.28A8.0174,8.0174,0,0,0,6.65,6.55.2522.2522,0,0,1,6.61,6.48ZM12.7,9.93s0-.01-.01,0a7.0128,7.0128,0,0,0-1.7-1.16c-.06.1-.11.19-.17.29a8.783,8.783,0,0,1-.88,1.22,8.9125,8.9125,0,0,1-1.06,1.07,10.4181,10.4181,0,0,1-1.38.98,8.9933,8.9933,0,0,1-2.64,1.02,6.2985,6.2985,0,0,0,5.28,0,5.9674,5.9674,0,0,0,2.42-1.89,4.8258,4.8258,0,0,0,.65-1.03A6.0315,6.0315,0,0,0,12.7,9.93Zm-5.17-2c-.01.01-.02.03-.03.04a9.26,9.26,0,0,1-1.25,1.4,9.5925,9.5925,0,0,1-1.19.91,9.2683,9.2683,0,0,1-2.62,1.18,6.0989,6.0989,0,0,0,.53.61,7.7353,7.7353,0,0,0,3.15-.72,7.3839,7.3839,0,0,0,1.38-.82A7.6429,7.6429,0,0,0,8.75,9.37a7.7441,7.7441,0,0,0,.82-1.15A7.3414,7.3414,0,0,0,7.53,7.93Z"/>\n</svg>'},warehouse:{label:"Warehouse",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="warehouse-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M13.5,5c-0.0762,0.0003-0.1514-0.0168-0.22-0.05L7.5,2L1.72,4.93C1.4632,5.0515,1.1565,4.9418,1.035,4.685&#xA;&#x9;S1.0232,4.1215,1.28,4L7.5,0.92L13.72,4c0.2761,0.0608,0.4508,0.3339,0.39,0.61C14.0492,4.8861,13.7761,5.0608,13.5,5z M5,10H2v3h3&#xA;&#x9;V10z M9,10H6v3h3V10z M13,10h-3v3h3V10z M11,6H8v3h3V6z M7,6H4v3h3V6z"/>\n</svg>'},"waste-basket":{label:"Waste basket",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="waste-basket-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12.41,5.58l-1.34,8c-0.0433,0.2368-0.2493,0.4091-0.49,0.41H4.42c-0.2407-0.0009-0.4467-0.1732-0.49-0.41l-1.34-8&#xA;&#x9;C2.5458,5.3074,2.731,5.0506,3.0035,5.0064C3.0288,5.0023,3.0544,5.0002,3.08,5h8.83c0.2761-0.0036,0.5028,0.2174,0.5064,0.4935&#xA;&#x9;C12.4168,5.5225,12.4146,5.5514,12.41,5.58z M13,3.5C13,3.7761,12.7761,4,12.5,4h-10C2.2239,4,2,3.7761,2,3.5S2.2239,3,2.5,3H5V1.5&#xA;&#x9;C5,1.2239,5.2239,1,5.5,1h4C9.7761,1,10,1.2239,10,1.5V3h2.5C12.7761,3,13,3.2239,13,3.5z M9,3V2H6v1H9z"/>\n</svg>'},watch:{label:"Watch",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="watch-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12.5,7H12c-0.0175,0-0.0323,0.0082-0.0494,0.0099C11.8021,5.6575,11.0757,4.4804,10,3.7599V1.4977&#xA;&#x9;&#x9;C10,1.2228,9.7772,1,9.5023,1H5.4977C5.2228,1,5,1.2228,5,1.4977v2.2621C3.7946,4.5673,3,5.9402,3,7.5s0.7946,2.9327,2,3.7401&#xA;&#x9;&#x9;v2.2621C5,13.7771,5.2228,14,5.4977,14h4.0045C9.7772,14,10,13.7771,10,13.5022v-2.2621c1.0757-0.7205,1.8021-1.8976,1.9506-3.2501&#xA;&#x9;&#x9;C11.9677,7.9918,11.9825,8,12,8h0.5C12.7761,8,13,7.7761,13,7.5C13,7.2238,12.7761,7,12.5,7z M7.5,11C5.567,11,4,9.433,4,7.5&#xA;&#x9;&#x9;S5.567,4,7.5,4S11,5.567,11,7.5S9.433,11,7.5,11z"/>\n  <path d="M9,7H8V5.5C8,5.2238,7.7761,5,7.5,5S7,5.2238,7,5.5v2C7,7.7761,7.2239,8,7.5,8H9c0.2761,0,0.5-0.2239,0.5-0.5&#xA;&#x9;&#x9;C9.5,7.2238,9.2761,7,9,7z"/>\n</svg>'},water:{label:"Water",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="water-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M7.49,15C4.5288,14.827,2.1676,12.4615,2,9.5C2,6.6,6.25,1.66,7.49,0c1.24,1.66,5,6.59,5,9.49S10.17,15,7.49,15z"/>\n</svg>'},waterfall:{label:"Waterfall",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="waterfall-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15">\n  <path d="M12.9,3H15V1H5c0,0-4,0-4,4v5.5h0c-1.1,0.8-1.3,2.4-0.5,3.5s2.4,1.3,3.5,0.5c1,0.8,2.5,0.6,3.4-0.4C8,14.7,8.9,15,9.8,15&#xA;&#x9;c2.1,0,3.7-1.6,3.8-3.7c0-1.6-1-3-2.5-3.5V5C11,3.9,11.8,3,12.9,3z M10,8v0.5c1.5,0.1,2.6,1.5,2.5,3c-0.1,1.4-1.3,2.5-2.7,2.5&#xA;&#x9;c-1.1,0.1-1.8-0.6-2.1-1H6.9c-0.1,0.2-0.4,1-1.4,1s-1.3-0.6-1.4-1H3.9c-0.2,0.4-0.5,0.8-0.9,0.9c-0.9,0.3-1.7-0.2-1.9-1&#xA;&#x9;c-0.2-0.8,0.2-1.6,0.9-1.8V6c0-0.5,0.4-1,1-1c0,0,0,0,0,0h0c0.5,0,1,0.4,1,1c0,0,0,0,0,0c0,0,0,0,0,0v4.5C4,10.8,4.2,11,4.5,11&#xA;&#x9;S5,10.8,5,10.5V7c0-0.6,0.4-1,1-1s1,0.4,1,1v3.5C7,10.8,7.2,11,7.5,11S8,10.8,8,10.5V6c0-0.6,0.4-1,1-1s1,0.4,1,1V8z"/>\n</svg>'},watermill:{label:"Watermill",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="watermill-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M2,10.2L4,9l2.5,1.5l1.4659-0.8788C7.6592,9.4698,7.3716,9.285,7.1231,9.0536l1.4131-1.4131&#xA;&#x9;C8.7672,7.836,9.0557,7.9606,9.375,7.9874V9.224l0.25,0.1501V7.9874c0.3193-0.0268,0.6078-0.1514,0.8388-0.3469l1.4131,1.4131&#xA;&#x9;c-0.4059,0.3781-0.9044,0.6492-1.4528,0.8003L11.5,10.5l0.6984-0.4191C13.2863,9.2595,14,7.9682,14,6.5C14,4.0147,11.9853,2,9.5,2&#xA;&#x9;C8.1917,2,7.0241,2.5674,6.2018,3.4587L4.5,2L1,5h1V10.2z M12.0536,8.8769l-1.4131-1.4131c0.1954-0.231,0.3201-0.5196,0.3469-0.8388&#xA;&#x9;h1.9999C12.956,7.4946,12.6089,8.2806,12.0536,8.8769z M12.9874,6.375h-1.9999c-0.0268-0.3193-0.1514-0.6078-0.3469-0.8388&#xA;&#x9;l1.4131-1.4131C12.6089,4.7193,12.956,5.5054,12.9874,6.375z M9.625,3.0126c0.8696,0.0314,1.6557,0.3784,2.2519,0.9337&#xA;&#x9;l-1.4131,1.4131c-0.231-0.1954-0.5196-0.32-0.8388-0.3468C9.625,5.0126,9.625,3.0126,9.625,3.0126z M9.375,3.0126v1.9999&#xA;&#x9;C9.0558,5.0394,8.7672,5.164,8.5362,5.3594L7.1231,3.9463C7.7193,3.3911,8.5054,3.044,9.375,3.0126z M6.9464,4.1231l1.4131,1.4131&#xA;&#x9;C8.164,5.7672,8.0394,6.0557,8.0126,6.375h-2C6.044,5.5054,6.3911,4.7193,6.9464,4.1231z M8.0126,6.625&#xA;&#x9;c0.0268,0.3192,0.1515,0.6078,0.3469,0.8388L6.9464,8.8769C6.3911,8.2807,6.044,7.4946,6.0126,6.625H8.0126z M9.002,10L6.5,11.5&#xA;&#x9;L4,10l-2.5,1.5V13L4,11.5L6.5,13l2.502-1.5L11.5,13l2.5-1.5V10l-2.5,1.5L9.002,10z"/>\n</svg>'},wetland:{label:"Wetland",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="wetland-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M1.48,4.5C1.905,4.1467,2.4483,3.968,3,4c1.2273-0.0869,2.3154,0.7836,2.5,2l0.78,4.68c-0.6394-0.2893-1.3759-0.2709-2,0.05&#xA;&#x9;L3.48,6C3.1874,5.1347,2.3926,4.5387,1.48,4.5z M7.48,11.24c0.3816-0.3076,0.825-0.5293,1.3-0.65L10,3&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5C9.2727,0.9131,8.1846,1.7836,8,3l-1.3,7.79&#xA;&#x9;C6.9786,10.9052,7.2408,11.0565,7.48,11.24z M11.8,10.74L11.8,10.74c0.1565-0.1277,0.3238-0.2414,0.5-0.34L13,6&#xA;&#x9;c0.2926-0.8653,1.0874-1.4613,2-1.5c-0.4198-0.3485-0.955-0.5269-1.5-0.5c-1.2273-0.0869-2.3154,0.7836-2.5,2l-0.67,4&#xA;&#x9;C10.8731,10.123,11.3778,10.377,11.8,10.74z M14,12L14,12c-0.4346-0.01-0.8579,0.1394-1.19,0.42l-0.47,0.41&#xA;&#x9;c-0.2847,0.2546-0.7153,0.2546-1,0c-0.15-0.12-0.29-0.26-0.44-0.39c-0.7076-0.5968-1.7424-0.5968-2.45,0&#xA;&#x9;c-0.16,0.13-0.31,0.28-0.47,0.41c-0.2847,0.2546-0.7153,0.2546-1,0c-0.16-0.13-0.31-0.28-0.47-0.41&#xA;&#x9;c-0.7059-0.5912-1.7341-0.5912-2.44,0c-0.15,0.13-0.29,0.27-0.44,0.39c-0.0892,0.0715-0.1909,0.1258-0.3,0.16&#xA;&#x9;c-0.2922,0.0652-0.5969-0.0301-0.8-0.25c-0.2475-0.214-0.5117-0.4079-0.79-0.58C1.5336,12.0421,1.2974,11.9865,1.06,12H1&#xA;&#x9;c-0.2761,0-0.5,0.2239-0.5,0.5S0.7239,13,1,13l0,0c0.246,0.0145,0.4762,0.126,0.64,0.31L2,13.57&#xA;&#x9;c0.6717,0.55,1.6308,0.5747,2.33,0.06c0.19-0.14,0.36-0.32,0.55-0.47c0.2847-0.2546,0.7153-0.2546,1,0l0.39,0.35&#xA;&#x9;c0.6937,0.6189,1.7322,0.6484,2.46,0.07c0.15-0.11,0.27-0.25,0.42-0.37c0.2976-0.3038,0.7851-0.3087,1.0889-0.0111&#xA;&#x9;c0.0037,0.0037,0.0074,0.0074,0.0111,0.0111l0.39,0.35c0.4866,0.4124,1.1485,0.5516,1.76,0.37c0.3825-0.1036,0.7286-0.3113,1-0.6&#xA;&#x9;c0.1549-0.1772,0.3674-0.294,0.6-0.33l0,0c0.2761,0,0.5-0.2239,0.5-0.5S14.2761,12,14,12z"/>\n</svg>'},wheelchair:{label:"Wheelchair",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="wheelchair-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M12,1.5C12,2.3284,11.3284,3,10.5,3S9,2.3284,9,1.5S9.6716,0,10.5,0S12,0.6716,12,1.5z M2.82,4.87l1.74-1.71l1.85,1.29&#xA;&#x9;L5.67,5.7c1.0747,0.3341,2.0207,0.9904,2.71,1.88l0.88-1.5c0.2295-0.4158,0.0785-0.939-0.3373-1.1685&#xA;&#x9;C8.9218,4.911,8.9209,4.9105,8.92,4.91L8.3,4.54L4.79,2.1C4.5927,1.9594,4.3231,1.9805,4.15,2.15l-2,2&#xA;&#x9;C1.9852,4.3716,2.0312,4.6848,2.2528,4.8496C2.4193,4.9735,2.645,4.9816,2.82,4.87z M8.13,10.94&#xA;&#x9;c-0.0143,1.2308-0.5794,2.3904-1.54,3.16c-0.7118,0.5804-1.6016,0.8982-2.52,0.9C1.8261,15,0.0055,13.1839,0,10.94&#xA;&#x9;c0.0023-0.9231,0.3238-1.8169,0.91-2.53c0.1868-0.232,0.398-0.4432,0.63-0.63c0.7131-0.5862,1.6069-0.9077,2.53-0.91&#xA;&#x9;C6.3139,6.8755,8.13,8.6961,8.13,10.94z M6,12.21C6.7679,11.2051,6.5758,9.7679,5.5709,9C4.7501,8.3727,3.6109,8.3727,2.79,9&#xA;&#x9;C2.5283,9.151,2.311,9.3683,2.16,9.63c-0.6923,1.0584-0.3956,2.4777,0.6628,3.17c0.7615,0.4981,1.7457,0.4981,2.5072,0&#xA;&#x9;C5.5805,12.6365,5.8061,12.4378,6,12.21z M14.2,13.21l-2.49-5C11.5906,7.9251,11.3088,7.7425,11,7.75H8.51&#xA;&#x9;c0.3293,0.4578,0.5856,0.9638,0.76,1.5h1.26l2.29,4.58c0.185,0.3728,0.6372,0.525,1.01,0.34c0.3728-0.185,0.525-0.6372,0.34-1.01&#xA;&#x9;L14.2,13.21z"/>\n</svg>'},windmill:{label:"Windmill",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="windmill-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path d="M6,5L3.5,7.5l1,1L7,6V5.5L7.5,5L8,5.5V6l2.5,2.5l1-1L9,5H8.5L8,4.5L8.5,4H9l2.5-2.5l-1-1L8,3v0.5L7.5,4L7,3.5V3L4.5,0.5&#xA;&#x9;l-1,1L6,4h0.5L7,4.5L6.5,5H6z M11.5,13h-1l-1-4l-2-2l-2,2l-1,4h-1C3.2239,13,3,13.2238,3,13.5C3,13.7761,3.2239,14,3.5,14h8&#xA;&#x9;c0.2761,0,0.5-0.2239,0.5-0.5C12,13.2238,11.7761,13,11.5,13z M8,13H7v-1.5024C7,11.2228,7.2228,11,7.4976,11&#xA;&#x9;C7.7751,11,8,11.2249,8,11.5024V13z"/>\n</svg>'},zoo:{label:"Zoo",svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" id="zoo-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">\n  <path id="path17499" d="&#xA;&#x9;M8.3879,3.8928C8.3879,3.8928,7.6818,5,7,5H4.5C3.8182,5,3.2016,5.4086,2.7273,5.8636L0.5,8C0.231,8.258,0.0072,8.7681,0,9&#xA;&#x9;c-0.0156,0.5,0,1,0,1s1,0,1-1V8.5l1-1h0.5l0.158,0.2892c0,0-0.9535,1.8244-0.9535,3.5289C1.7046,12,2.3864,12,2.3864,12h0.6818&#xA;&#x9;c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C2.7273,10.6364,3.5002,9.6667,4,9c0,0,0.0168,1.1579,0,2c-0.008,0.4096,0.2721,1,0.6818,1&#xA;&#x9;h0.6818c0,0,0.3409,0,0-0.3409l-0.3409-0.3409C4.7105,10.7495,5.5,8.5,5.5,8.5C6.7716,8.5,7,9,8.5,9l0.3636,2.3182&#xA;&#x9;C8.975,12.0282,9.5,12,9.5,12H11c0.3409,0,0.9611-0.3115,0.3409-0.7736L11,11V9c1.2142-0.1722,2-1,2-2h1c0.3214,0,1,0,1-0.5v-1&#xA;&#x9;l-1.7045-1.6818C12.5444,3.0772,12,2.5,11,2.5C9.5469,2.5,8.8636,3.0688,8.3879,3.8928z"/>\n</svg>'}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i=r(459),n=r.n(i),o=r(460),a=r.n(o),l=r(461),c=r.n(l);r(462);const u=n.a;u.workerUrl=c.a,u.setRTLTextPlugin(a.a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(1);function n(e){const t=e%10;return 1===t&&11!==e?i.i18n.translate("xpack.maps.styles.firstOrdinalSuffix",{defaultMessage:"st"}):2===t&&12!==e?i.i18n.translate("xpack.maps.styles.secondOrdinalSuffix",{defaultMessage:"nd"}):3===t&&13!==e?i.i18n.translate("xpack.maps.styles.thirdOrdinalSuffix",{defaultMessage:"rd"}):i.i18n.translate("xpack.maps.styles.ordinalSuffix",{defaultMessage:"th"})}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return h}));var i=r(0);const n=["!=",["get",i.U],!0];function o(e,t,r){const i=[...e];return t&&i.push(t),r&&(i.push(["has",r.timesliceMaskField]),i.push([">=",["get",r.timesliceMaskField],r.timeslice.from]),i.push(["<",["get",r.timesliceMaskField],r.timeslice.to])),["all",...i]}function a(e,t){return o([["any",["==",["geometry-type"],i.J.POLYGON],["==",["geometry-type"],i.J.MULTI_POLYGON]]],e,t)}function l(e,t){return o([["any",["==",["geometry-type"],i.J.POLYGON],["==",["geometry-type"],i.J.MULTI_POLYGON],["==",["geometry-type"],i.J.LINE_STRING],["==",["geometry-type"],i.J.MULTI_LINE_STRING]]],e,t)}const c=["any",["==",["geometry-type"],i.J.POINT],["==",["geometry-type"],i.J.MULTI_POINT]];function u(e,t,r,i){const a=[];return e?a.push(n):!e&&t&&a.push(["!=",["get","_mvt_label_position"],!0]),a.push(c),o(a,r,i)}function h(e,t,r,i){const n=[];return e?n.push(c):!e&&t&&n.push(["==",["get","_mvt_label_position"],!0]),o(n,r,i)}},function(e,t,r){"use strict";var i=r(208);r.d(t,"a",(function(){return i.a}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(268),n=r(89);t.default=function(e,t,r){void 0===r&&(r={});for(var o=r.steps||64,a=r.properties?r.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},l=[],c=0;c<o;c++)l.push(i.default(e,t,-360*c/o,r).geometry.coordinates);return l.push(l[0]),n.polygon([l],a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(89),n=r(105);t.default=function(e,t,r,o){void 0===o&&(o={});var a=n.getCoord(e),l=i.degreesToRadians(a[0]),c=i.degreesToRadians(a[1]),u=i.degreesToRadians(r),h=i.lengthToRadians(t,o.units),p=Math.asin(Math.sin(c)*Math.cos(h)+Math.cos(c)*Math.sin(h)*Math.cos(u)),d=l+Math.atan2(Math.sin(u)*Math.sin(h)*Math.cos(c),Math.cos(h)-Math.sin(c)*Math.sin(p)),f=i.radiansToDegrees(d),m=i.radiansToDegrees(p);return i.point([f,m],o.properties)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return GeometryFilterForm}));var i=r(2),n=r.n(i),o=r(4),a=r(15),l=r(1),c=r(51),u=r(78),h=r(270),p=r(3);const d=[{value:"intersects",text:Object(u.e)("intersects")},{value:"disjoint",text:Object(u.e)("disjoint")},{value:"within",text:Object(u.e)("within")}];class GeometryFilterForm extends o.Component{constructor(...e){super(...e),n()(this,"state",{actionId:c.ACTION_GLOBAL_APPLY_FILTER,geometryLabel:this.props.intitialGeometryLabel,relation:"intersects"}),n()(this,"_onGeometryLabelChange",(e=>{this.setState({geometryLabel:e.target.value})})),n()(this,"_onRelationChange",(e=>{this.setState({relation:e.target.value})})),n()(this,"_onActionIdChange",(e=>{this.setState({actionId:e})})),n()(this,"_onSubmit",(()=>{this.props.onSubmit({actionId:this.state.actionId,geometryLabel:this.state.geometryLabel,relation:this.state.relation})}))}_renderRelationInput(){return Object(p.jsx)(a.EuiFormRow,{label:l.i18n.translate("xpack.maps.geometryFilterForm.relationLabel",{defaultMessage:"Spatial relation"}),display:"rowCompressed"},Object(p.jsx)(a.EuiSelect,{compressed:!0,options:d,value:this.state.relation,onChange:this._onRelationChange}))}render(){let e;return this.props.errorMsg&&(e=Object(p.jsx)(a.EuiFormErrorText,null,this.props.errorMsg)),Object(p.jsx)(a.EuiForm,{className:this.props.className},Object(p.jsx)(a.EuiFormRow,{label:l.i18n.translate("xpack.maps.geometryFilterForm.geometryLabelLabel",{defaultMessage:"Geometry label"}),display:"rowCompressed"},Object(p.jsx)(a.EuiFieldText,{compressed:!0,value:this.state.geometryLabel,onChange:this._onGeometryLabelChange})),this._renderRelationInput(),Object(p.jsx)(h.a,{getFilterActions:this.props.getFilterActions,getActionContext:this.props.getActionContext,value:this.state.actionId,onChange:this._onActionIdChange}),Object(p.jsx)(a.EuiSpacer,{size:"m"}),e,Object(p.jsx)(a.EuiTextAlign,{textAlign:"right"},Object(p.jsx)(a.EuiButton,{size:"s",fill:!0,onClick:this._onSubmit,isDisabled:!this.state.geometryLabel,isLoading:this.props.isLoading},this.props.buttonLabel)))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return ActionSelect}));var i=r(2),n=r.n(i),o=r(4),a=r(15),l=r(1),c=r(209),u=r(3);class ActionSelect extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{actions:[]})}componentDidMount(){this._isMounted=!0,this._loadActions()}componentWillUnmount(){this._isMounted=!1}async _loadActions(){if(!this.props.getFilterActions||!this.props.getActionContext)return;const e=await this.props.getFilterActions();this._isMounted&&this.setState({actions:e.filter((e=>!Object(c.a)(e)))})}render(){if(0===this.state.actions.length||!this.props.getActionContext)return null;if(1===this.state.actions.length&&this.props.value===this.state.actions[0].id)return null;const e=this.props.getActionContext(),t=this.state.actions.map((t=>{const r=t.getIconType(e);return{value:t.id,inputDisplay:Object(u.jsx)("div",null,r?Object(u.jsx)(a.EuiIcon,{className:"mapActionSelectIcon",type:r}):null,t.getDisplayName(e))}}));return Object(u.jsx)(a.EuiFormRow,{label:l.i18n.translate("xpack.maps.actionSelect.label",{defaultMessage:"Action"}),display:"rowCompressed"},Object(u.jsx)(a.EuiSuperSelect,{compressed:!0,options:t,valueOfSelected:this.props.value?this.props.value:"",onChange:this.props.onChange}))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(466);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(549);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(550);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(551);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=r(552);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r(553);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentEuiBreakpointProvider=t.CurrentEuiBreakpointContext=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4)),o=r(273),a=r(134),l=r(214),c=r(290),u=r(3);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var d=(0,n.createContext)(void 0);t.CurrentEuiBreakpointContext=d,t.CurrentEuiBreakpointProvider=function(e){var t,r,i=e.children,h=(0,a.useEuiTheme)().euiTheme.breakpoint,f=(0,n.useMemo)((function(){return(0,c.sortMapByLargeToSmallValues)(h)}),[h]),m=(0,n.useCallback)((function(e){return(0,o.keysOf)(f).find((function(t){return f[t]<=e}))}),[f]),g=(t=(0,n.useState)("undefined"!=typeof window?m(window.innerWidth):void 0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=g[0],v=g[1];return(0,n.useEffect)((function(){var e=(0,l.throttle)((function(){v(m(window.innerWidth))}),50);return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[m]),(0,u.jsx)(d.Provider,{value:y},i)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNever=void 0,t.keysOf=function(e){return Object.keys(e)},t.assertNever=function(e){throw new Error("Unexpected value ".concat(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLOR_MODES_STANDARD=t.COLOR_MODES_INVERSE=void 0,t.COLOR_MODES_STANDARD={light:"LIGHT",dark:"DARK"},t.COLOR_MODES_INVERSE="INVERSE"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidHex=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,i){return t+t+r+r+i+i}));var t,r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(r){var n=(4,function(e){if(Array.isArray(e))return e}(t=r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{for(o=(r=r.call(e)).next,0;!(c=(i=o.call(r)).done)&&(l.push(i.value),4!==l.length);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,4);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,4):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[1],a=n[2],l=n[3];return[parseInt(o,16),parseInt(a,16),parseInt(l,16)]}return[0,0,0]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbToHsv=function(e){var t=e.r,r=e.g,i=e.b;t/=255,r/=255,i/=255;var n,o=Math.max(t,r,i),a=Math.min(t,r,i),l=o-a,c=o,u=0===o?0:l/o;switch(o){case a:default:n=0;break;case t:n=(r-i)/l+(r<i?6:0);break;case r:n=(i-t)/l+2;break;case i:n=(t-r)/l+4}return{h:60*n,s:u,v:c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsvToRgb=function(e){var t=e.h,r=e.s,i=e.v;t/=60;var n=function(e){var n=(e+t)%6;return i-i*r*Math.max(Math.min(n,4-n,1),0)},o=n(5),a=n(3),l=n(1);return{r:Math.round(255*o),g:Math.round(255*a),b:Math.round(255*l)}}},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function n(e){var t=parseInt(e,10).toString(16);return 1===t.length?"0".concat(t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.rgbToHex=function(e){var t=e.replace(/\s+/g,"").match(/^rgba?\((\d+),(\d+),(\d+)(?:,(?:1(?:\.0*)?|0(?:\.\d+)?))?\)$/i);if(!t)return"";var r,o=(4,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{for(o=(r=r.call(e)).next,0;!(c=(i=o.call(r)).done)&&(l.push(i.value),4!==l.length);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(r)||function(e,t){if(e){if("string"==typeof e)return i(e,4);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,4):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[1],l=o[2],c=o[3];return"#".concat(n(a)).concat(n(l)).concat(n(c))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiPaletteWarm=t.euiPalettePositive=t.euiPaletteNegative=t.euiPaletteGray=t.euiPaletteForTemperature=t.euiPaletteForStatus=t.euiPaletteForLightBackground=t.euiPaletteForDarkBackground=t.euiPaletteCool=t.euiPaletteComplimentary=t.euiPaletteComplementary=t.euiPaletteColorBlindBehindText=t.euiPaletteColorBlind=void 0;var i,n=(i=r(128))&&i.__esModule?i:{default:i},o=r(281);function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var c=function(e){var t;return(t=[]).concat.apply(t,a(e))},u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!r&&t>1){var n=(0,o.colorPalette)(e,t+1);return n.shift(),n}return(0,o.colorPalette)(e,t,r,i)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.rotations,r=void 0===t?1:t,i=e.order,l=void 0===i?"append":i,u=e.direction,h=void 0===u?"lighter":u,p=e.sortBy,d=void 0===p?"default":p,f=e.sortShift,m=void 0===f?"-100":f,g=[],y=["#54B399","#6092C0","#D36086","#9170B8","#CA8EAE","#D6BF57","#B9A888","#DA8B45","#AA6556","#E7664C"];if("natural"===d&&(y=a(y).sort((function(e,t){return(0,n.default)(e).set("hsl.h",m).hsl()[0]-(0,n.default)(t).set("hsl.h",m).hsl()[0]}))),r>1){var v=y.map((function(e){var t=(0,o.colorPalette)(["black",e,"white"],5,!1,!0);switch(t.pop(),t.shift(),h){case"lighter":return(0,o.colorPalette)([t[1],t[2]],r,!1,!0);case"darker":return(0,o.colorPalette)([t[1],t[0]],r,!1,!0);case"both":return(0,o.colorPalette)(t,r,!1,!0)}}));if("group"===l)g=c(v);else for(var _=function(e){var t,r=v.map((function(t){return t[e]}));(t=g).push.apply(t,a(r))},b=0;b<r;b++)_(b)}else g=y;return g};t.euiPaletteColorBlind=h,t.euiPaletteColorBlindBehindText=function(){return h(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map((function(e){return(0,n.default)(e).brighten(.5).hex()}))},t.euiPaletteForLightBackground=function(){return["#006BB4","#017D73","#F5A700","#BD271E","#DD0A73"]},t.euiPaletteForDarkBackground=function(){return["#1BA9F5","#7DE2D1","#F990C0","#F66","#FFCE7A"]};var p="#209280",d="#CC5642",f=h()[9],m=[h()[1],"#6092C0"],g=[h()[7],h()[9]];t.euiPaletteForStatus=function(e){return 1===e?[p]:u(e<=3?[p,h()[5],d]:[p,h()[0],h()[5],f,d],e,!0)},t.euiPaletteForTemperature=function(e){var t=(0,o.colorPalette)([].concat(a(m.slice().reverse()),["#EBEFF5"]),3),r=(0,o.colorPalette)(["#F4F3DB"].concat(g),3);return 1===e?[t[0]]:u(e<=3?[t[0],f]:[].concat(a(t),a(r)),e,!0)};var y=function(e){return 1===e?[h()[1]]:u([h()[1],h()[7]],e,!0)};t.euiPaletteComplementary=y;var v=y;t.euiPaletteComplimentary=v,t.euiPaletteNegative=function(e){return 1===e?[f]:u(["white",d],e)},t.euiPalettePositive=function(e){return 1===e?[h()[0]]:u(["white",p],e)},t.euiPaletteCool=function(e){return 1===e?[m[1]]:u(["white"].concat(m),e)},t.euiPaletteWarm=function(e){return 1===e?[f]:u(["#FBFBDC"].concat(g),e)},t.euiPaletteGray=function(e){return 1===e?["#98a2b3"]:u(["white","#d3dae6","#98a2b3","#69707d","#343741"],e,!1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MID_COLOR_STOP=void 0,t.colorPalette=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.slice(),l=[],c=t%2==0,u=r?Math.ceil(t/2)+(c?1:0):t,h=r?Math.ceil(t/2)+(c?1:0):0;if(1===a.length&&a.unshift(o),r){a.length<3&&(a[2]=a[1],a[1]=o);var p=Math.ceil(a.length/2),d=a.filter((function(e,t){if(t<p)return!0})),f=a.reverse().filter((function(e,t){if(t<p)return!0})).reverse();a=d,l=f}function m(e,t){return e.length?i?n.default.scale(e).colors(t):n.default.bezier(e).scale().correctLightness().colors(t):e}var g=m(a,u),y=m(l,h);return(c&&r?g.slice(0,g.length-1):g).concat(y.slice(1))};var i,n=(i=r(128))&&i.__esModule?i:{default:i},o="#EBEFF5";t.MID_COLOR_STOP=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wcagContrastMin=t.makeHighContrastColor=t.makeDisabledContrastColor=void 0;var i,n=(i=r(128))&&i.__esModule?i:{default:i},o=r(213),a=r(97);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}t.wcagContrastMin=4.5;var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4.85;return function(r){var i,c="object"===l(r)&&null!==(i=(0,a.getOn)(r,e))&&void 0!==i?i:e,u="object"===l(r)?r.colors.body:r;((0,n.default)(c).alpha()<1||(0,n.default)(u).alpha()<1)&&console.warn("Contrast cannot be accurately calculated when colors have alpha channel opacity. Make sure the provided foreground and background colors have no transparency:\n\nForeground: ".concat(c,"\nBackground: ").concat(u));for(var h=n.default.contrast(c,u),p=(0,o.lightness)(u),d=c;h<t;){d=p>50?(0,o.shade)(d,.05):(0,o.tint)(d,.05),h=n.default.contrast(d,u);var f=(0,o.lightness)(d);if(f<5)return console.warn("High enough contrast could not be determined. Most likely your background color does not adjust for light mode."),d;if(f>95)return console.warn("High enough contrast could not be determined. Most likely your background color does not adjust for dark mode."),d}return(0,n.default)(d).hex()}};t.makeHighContrastColor=c,t.makeDisabledContrastColor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return function(r){return c(e,t)(r)}}},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.logicals=t.logicalTextAlignStyle=t.logicalTextAlignCSS=t.logicalText=t.logicalStyles=t.logicalStyle=t.logicalSizeStyle=t.logicalSizeCSS=t.logicalSide=t.logicalCSSWithFallback=t.logicalCSS=t.LOGICAL_TEXT_ALIGNMENT=t.LOGICAL_SIDES=t.LOGICAL_PROPERTIES=void 0;var n,o=r(273),a=(n=r(284))&&n.__esModule?n:{default:n};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p={left:"inline-start",right:"inline-end",top:"block-start",bottom:"block-end",horizontal:"inline",vertical:"block"};t.logicalSide=p;var d=(0,o.keysOf)(p);t.LOGICAL_SIDES=d;var f=a.default;t.logicals=f,a.default._shorthands;var m=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(a.default,["_shorthands"]),g=(0,o.keysOf)(m);t.LOGICAL_PROPERTIES=g;var y=function(e,t){return"".concat(f[e],": ").concat(t,";")};t.logicalCSS=y,t.logicalCSSWithFallback=function(e,t){return"\n  ".concat(e,": ").concat(t,";\n  ").concat(y(e,t),"\n")};var v=function(e){return e.replace(/-\w/g,(function(e){return e.charAt(1).toUpperCase()}))},_=function(e,t){return h({},v(f[e]),t)};t.logicalStyle=_,t.logicalStyles=function(e){var t={};return Object.entries(e).forEach((function(e){var r,i,n=(i=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(r,i)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],l=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(f.hasOwnProperty(l)){var c=v(f[l]);t[c]=a}else t[o]=a})),t},t.logicalSizeCSS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return"\n    ".concat(f.width,": ").concat(e,";\n    ").concat(f.height,": ").concat(t,";\n  ")},t.logicalSizeStyle=function(e,t){return c(c({},_("width",e)),_("height",t))};var b={"text-align":{left:"start",center:"center",right:"end"}};t.logicalText=b;var x=(0,o.keysOf)(b["text-align"]);t.LOGICAL_TEXT_ALIGNMENT=x,t.logicalTextAlignCSS=function(e){return"text-align: ".concat(b["text-align"][e],";")},t.logicalTextAlignStyle=function(e){return{textAlign:b["text-align"][e]}}},function(e){e.exports=JSON.parse('{"height":"block-size","width":"inline-size","max-height":"max-block-size","max-width":"max-inline-size","min-height":"min-block-size","min-width":"min-inline-size","top":"inset-block-start","right":"inset-inline-end","bottom":"inset-block-end","left":"inset-inline-start","horizontal":"inset-inline","vertical":"inset-block","margin-left":"margin-inline-start","margin-right":"margin-inline-end","margin-top":"margin-block-start","margin-bottom":"margin-block-end","margin-horizontal":"margin-inline","margin-vertical":"margin-block","padding-left":"padding-inline-start","padding-right":"padding-inline-end","padding-top":"padding-block-start","padding-bottom":"padding-block-end","padding-horizontal":"padding-inline","padding-vertical":"padding-block","overflow-x":"overflow-inline","overflow-y":"overflow-block","border-horizontal":"border-inline","border-horizontal-color":"border-inline-color","border-horizontal-width":"border-inline-width","border-horizontal-style":"border-inline-style","border-vertical":"border-block","border-vertical-color":"border-block-color","border-vertical-width":"border-block-width","border-vertical-style":"border-block-style","border-bottom":"border-block-end","border-bottom-color":"border-block-end-color","border-bottom-style":"border-block-end-style","border-bottom-width":"border-block-end-width","border-top":"border-block-start","border-top-color":"border-block-start-color","border-top-style":"border-block-start-style","border-top-width":"border-block-start-width","border-right":"border-inline-end","border-right-color":"border-inline-end-color","border-right-style":"border-inline-end-style","border-right-width":"border-inline-end-width","border-left":"border-inline-start","border-left-color":"border-inline-start-color","border-left-style":"border-inline-start-style","border-left-width":"border-inline-start-width","border-top-left-radius":"border-start-start-radius","border-top-right-radius":"border-start-end-radius","border-bottom-left-radius":"border-end-start-radius","border-bottom-right-radius":"border-end-end-radius","_shorthands":["margin","scroll-margin","padding","scroll-padding","inset","border-color","border-width","border-style","border-radius"]}')},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.sizeToPixel=void 0,t.sizeToPixel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t){var r="object"===i(t)?t.base:t;return"".concat(r*e,"px")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiFontSizeFromScale=function(e,t){var r=t.base,i=t.font,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.unit,a=void 0===o?i.defaultUnits:o,l=n.customScale;if("em"===a)return"".concat(i.scale[e],"em");var c=r*i.scale[e];l&&(c*=i.scale[l]);var u=r*i.scale[i.body.scale];return"px"===a?"".concat(c,"px"):"".concat((c/u).toFixed(4),"rem")},t.euiLineHeightFromBaseline=function(e,t){var r=t.base,i=t.font,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.unit,a=void 0===o?i.defaultUnits:o,l=n.customScale,c=i.baseline,u=i.lineHeightMultiplier,h=r*i.scale[e];l&&(h*=i.scale[l]);var p=r*i.scale[i.body.scale],d=h<=r?u:.833*u;if("em"===a)return d.toFixed(4).toString();var f=Math.floor(Math.round(h*d)/c)*c;return"px"===a?"".concat(f,"px"):"".concat((f/p).toFixed(4),"rem")},t.euiTextShift=void 0;var i=r(283);t.euiTextShift=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bold",t=arguments.length>2?arguments[2]:void 0;return"\n  &::after {\n    display: block;\n    content: attr(".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-text",");\n    font-weight: ").concat(t.font.weight[e],";\n    ").concat((0,i.logicalCSS)("height",0),"\n    overflow: hidden;\n    visibility: hidden;\n  }")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(491);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(289);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiStylisPrefixer=void 0;var i=r(492);t.euiStylisPrefixer=function(e){e.length>-1&&!e.return&&e.type===i.DECLARATION&&(e.return=n(e.value,e.length))};var n=function e(t,r){switch((0,i.hash)(t,r)){case 4246:case 5572:case 2756:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 2282:return i.WEBKIT+t+t;case 4215:if(~(0,i.indexof)(t,"text"))return i.WEBKIT+t+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if((0,i.strlen)(t)-1-r>6)switch((0,i.charat)(t,r+1)){case 102:if(~(0,i.indexof)(t,"fill-available"))return(0,i.replace)(t,/(.+:)(.+)-([^]+)/,"$1"+i.WEBKIT+"$2-$3$1"+i.MOZ+(108===(0,i.charat)(t,r+3)?"$3":"$2-$3"));case 115:if(~(0,i.indexof)(t,"stretch"))return e((0,i.replace)(t,"stretch","fill-available"),r)+t}}return t}},function(e,t,r){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.sortMapBySmallToLargeValues=t.sortMapByLargeToSmallValues=void 0,t.sortMapByLargeToSmallValues=function(e){return Object.fromEntries(Object.entries(e).sort((function(e,t){var r=i(e,2)[1];return i(t,2)[1]-r})))},t.sortMapBySmallToLargeValues=function(e){return Object.fromEntries(Object.entries(e).sort((function(e,t){return i(e,2)[1]-i(t,2)[1]})))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCurrentEuiBreakpoint=void 0;var i=r(4),n=r(272);t.useCurrentEuiBreakpoint=function(){return(0,i.useContext)(n.CurrentEuiBreakpointContext)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBoolean=void 0;var i=r(118);t.formatBoolean=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.yes,n=void 0===r?"Yes":r,o=t.no,a=void 0===o?"No":o,l=t.nil,c=void 0===l?"":l;return(0,i.isNil)(e)?c:e?n:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=t.dateFormatAliases=void 0;var i,n=r(118),o=(i=r(55))&&i.__esModule?i:{default:i};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.refTime;return(0,o.default)(e).calendar(r,t)},p={date:"D MMM YYYY",longDate:"DD MMMM YYYY",shortDate:"D MMM YY",dateTime:"D MMM YYYY HH:mm",longDateTime:"DD MMMM YYYY HH:mm:ss",shortDateTime:"D MMM YY HH:mm",dobShort:"Do MMM YY",dobLong:"Do MMMM YYYY",iso8601:"YYYY-MM-DDTHH:mm:ss.SSSZ",calendar:h,calendarDateTime:function(e,t){return h(e,c({sameDay:"[Today at] H:mmA",nextDay:"[Tomorrow at] H:mmA",nextWeek:"dddd [at] H:mmA",lastDay:"[Yesterday at] H:mmA",lastWeek:"[Last] dddd [at] H:mmA",sameElse:"Do MMM YYYY [at] H:mmA"},t))},calendarDate:function(e,t){return h(e,c({sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"Do MMM YYYY"},t))}};t.dateFormatAliases=p,t.formatDate=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dateTime";if((0,n.isString)(r)){if((0,n.isNil)(e))return"";var i=(t=r,p.hasOwnProperty(t)?p[r]:r);if((0,n.isFunction)(i))return i(e,{});if((0,n.isString)(i))return(0,o.default)(e).format(i)}if(function(e){return"object"===a(e)&&(e.hasOwnProperty("format")||e.hasOwnProperty("nil")||e.hasOwnProperty("options"))}(r)){var l=r.format,c=void 0===l?"dateTime":l,u=r.nil,h=void 0===u?"":u,d=r.options,f=p[c]||c;if((0,n.isNil)(e))return h;if((0,n.isFunction)(f))return f(e,d);if((0,n.isString)(f))return(0,o.default)(e).format(f)}throw new Error("Failed to format value using dateFormatKeyOrConfig: ".concat(r))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=void 0;var i,n=(i=r(62))&&i.__esModule?i:{default:i},o=r(118),a={decimal1:"0,0.0",decimal2:"0,0.00",decimal3:"0,0.000",ordinal:"0o",integer:"0,0"};t.formatNumber=function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l="";if((0,o.isString)(i)?t=i:(t=i.format,l=i.nil||"",r=i.round),!t)return(0,o.isNil)(e)?l:e.toString();var c=r?Math.round:Math.floor,u=a[t]||t;return(0,o.isNil)(e)?l:(0,n.default)(e).format(u,c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatText=void 0;var i=r(118);t.formatText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{nil:""};return(0,i.isNil)(e)?t.nil:e.toString()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useUpdateEffect=void 0;var i=r(4);t.useUpdateEffect=function(e,t){var r=(0,i.useRef)(!1);(0,i.useEffect)((function(){if(!0===r.current)return e();r.current=!0}),t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comparators=void 0;var i=r(215),n=r(537),o=Object.freeze({default:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.SortDirection.ASC;return function(t,r){var n=null!=t,o=null!=r;if(n&&!o)return-1;if(!n&&o)return 1;if(!n&&!o)return 0;if(t===r)return 0;var a=t>r?1:-1;return i.SortDirection.isAsc(e)?a:-1*a}},reverse:function(e){return function(t,r){return e(r,t)}},value:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return t||(t=this.default(i.SortDirection.ASC)),function(r,i){return t(e(r),e(i))}})),property:function(e,t){return this.value((function(t){return(0,n.get)(t,e)}),t)}});t.Comparators=o},function(e,t,r){"use strict";r.d(t,"a",(function(){return ESTooltipProperty}));var i=r(2),n=r.n(i),o=(r(4),r(40)),a=r.n(o),l=r(46),c=r(3);class ESTooltipProperty{constructor(e,t,r,i){n()(this,"_tooltipProperty",void 0),n()(this,"_indexPattern",void 0),n()(this,"_field",void 0),n()(this,"_applyGlobalQuery",void 0),this._tooltipProperty=e,this._indexPattern=t,this._field=r,this._applyGlobalQuery=i}getPropertyKey(){return this._tooltipProperty.getPropertyKey()}getPropertyName(){return this._tooltipProperty.getPropertyName()}getRawValue(){return this._tooltipProperty.getRawValue()}_getIndexPatternField(){return this._indexPattern.fields.getByName(this._field.getRootName())}getHtmlDisplayValue(){if(void 0===this.getRawValue())return"-";const e=this._getIndexPatternField();if(!e||!this._field.canValueBeFormatted()){const e=this.getRawValue();return Array.isArray(e)?a.a.escape(e.join()):a.a.escape(e)}const t=this._indexPattern.getFormatterForField(e),r=t.getConverterFor("html");return r?Object(c.jsx)("span",{dangerouslySetInnerHTML:{__html:r(this.getRawValue())}}):t.convert(this.getRawValue())}isFilterable(){if(!this._applyGlobalQuery)return!1;const e=this._getIndexPatternField();return!!e&&("string"===e.type||"date"===e.type||"ip"===e.type||"number"===e.type)}async getESFilters(){if(!this._applyGlobalQuery)return[];const e=this._getIndexPatternField();if(!e)return[];const t=this.getRawValue();if(null==t){const t=Object(l.buildExistsFilter)(e,this._indexPattern);return t.meta.negate=!0,[t]}return(Array.isArray(t)?t:[t]).map((t=>Object(l.buildPhraseFilter)(e,t,this._indexPattern)))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(157),n=r.n(i),o=r(0);function a(e,t){if(!e)return null;const r=t?e.features.filter((e=>e.properties&&e.properties[o.C])):e.features;if(0===r.length)return null;const i=n()({type:"FeatureCollection",features:r});return{minLon:i[0],minLat:i[1],maxLon:i[2],maxLat:i[3]}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return ValidatedNumberInput}));var i=r(2),n=r.n(i),o=r(4),a=r(15),l=r(1),c=r(40),u=r.n(c),h=r(3);function p(e,t){return l.i18n.translate("xpack.maps.validatedNumberInput.invalidClampErrorMessage",{defaultMessage:"Must be between {min} and {max}",values:{min:e,max:t}})}function d(e,t,r){const i=parseFloat(e.toString());if(isNaN(i))return{isValid:!1,errorMessage:p(t,r)};const n=i>=t&&i<=r;return{parsedValue:i,isValid:n,errorMessage:n?"":p(t,r)}}class ValidatedNumberInput extends o.Component{constructor(e){super(e),n()(this,"_submit",u.a.debounce((e=>{this.props.onChange(e)}),250)),n()(this,"_onChange",(e=>{const t=e.target.value,{isValid:r,errorMessage:i,parsedValue:n}=d(t,this.props.min,this.props.max);this.setState({value:t,errorMessage:i,isValid:r}),r&&this._submit(n)}));const{isValid:t,errorMessage:r}=d(e.initialValue,this.props.min,this.props.max);this.state={value:e.initialValue,errorMessage:r,isValid:t}}render(){return Object(h.jsx)(a.EuiFormRow,{label:this.props.label,isInvalid:!this.state.isValid,error:this.state.errorMessage?[this.state.errorMessage]:[],display:this.props.display,helpText:this.props.helpText},Object(h.jsx)(a.EuiFieldNumber,{isInvalid:!this.state.isValid,min:this.props.min,max:this.props.max,value:this.state.value,onChange:this._onChange,"aria-label":`${this.props.label} number input`}))}}},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r(53),n=r.n(i);function o(e){const t=new URLSearchParams;return Object.keys(e).forEach((r=>{const i=e[r];null!=i&&("object"!=typeof i?("number"!=typeof i&&"boolean"!=typeof i||t.set(r,i.toString()),t.set(r,i)):t.set(r,n.a.encode(i)))})),t.toString()}},function(e,t,r){"use strict";r.d(t,"a",(function(){return custom_icon_modal_CustomIconModal}));var i=r(2),n=r.n(i),o=r(4),a=r.n(o),l=r(15),c=r(16),u=r(1),h=r(263),p=r(96),d=r(3);class icon_preview_IconPreview extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"_containerRef",null),n()(this,"state",{map:null,iconColor:"#E7664C"}),n()(this,"_setIconColor",(e=>{this.setState({iconColor:e},(()=>{this._syncPaintPropertiesToMap()}))})),n()(this,"_setContainerRef",(e=>{this._containerRef=e}))}componentDidMount(){this._isMounted=!0,this._initializeMap()}componentDidUpdate(e){this.props.svg===e.svg&&this.props.cutoff===e.cutoff&&this.props.radius===e.radius||this._syncImageToMap()}componentWillUnmount(){this._isMounted=!1,this.state.map&&(this.state.map.remove(),this.state.map=null)}async _syncImageToMap(){if(this._isMounted&&this.state.map){const e=this.state.map,{svg:t,cutoff:r,radius:i,isSvgInvalid:n}=this.props;if(!t||n)return void e.setLayoutProperty("icon-layer","visibility","none");const o=await Object(p.e)({svg:t,cutoff:r,radius:i});o&&(e.hasImage(icon_preview_IconPreview.iconId)?e.updateImage(icon_preview_IconPreview.iconId,o):e.addImage(icon_preview_IconPreview.iconId,o,{sdf:!0,pixelRatio:p.a})),e.setLayoutProperty("icon-layer","icon-image",icon_preview_IconPreview.iconId),e.setLayoutProperty("icon-layer","icon-size",6),e.setLayoutProperty("icon-layer","visibility","visible"),this._syncPaintPropertiesToMap()}}_syncPaintPropertiesToMap(){const{map:e,iconColor:t}=this.state;e&&(e.setPaintProperty("icon-layer","icon-halo-color","#000000"),e.setPaintProperty("icon-layer","icon-halo-width",1),e.setPaintProperty("icon-layer","icon-color",t),e.setLayoutProperty("icon-layer","icon-size",12))}_createMapInstance(){const e=new h.a.Map({container:this._containerRef,interactive:!1,center:[0,0],zoom:2,style:{version:8,name:"Empty",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}});return e.on("load",(()=>{e.addLayer({id:"icon-layer",type:"symbol",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[0,0]},properties:{}}}}),this._syncImageToMap()})),e}_initializeMap(){const e=this._createMapInstance();this.setState({map:e})}render(){const e=this.state.iconColor;return Object(d.jsx)("div",null,Object(d.jsx)(l.EuiFlexItem,null,Object(d.jsx)(l.EuiPanel,{color:"subdued",hasBorder:!0,hasShadow:!1,grow:!0},Object(d.jsx)(l.EuiTitle,{size:"xxxs"},Object(d.jsx)("h4",null,Object(d.jsx)(l.EuiToolTip,{content:u.i18n.translate("xpack.maps.customIconModal.elementPreviewTooltip",{defaultMessage:"Dynamic styling requires rendering SVG icons using a signed distance function. As a result, sharp corners and intricate details may not render correctly. You may be able to tweak the Alpha threshold and Radius for better results."})},Object(d.jsx)(a.a.Fragment,null,u.i18n.translate("xpack.maps.customIconModal.elementPreviewTitle",{defaultMessage:"Render preview"})," ",Object(d.jsx)(l.EuiIcon,{color:"subdued",type:"questionInCircle"}))))),Object(d.jsx)(l.EuiSpacer,{size:"s"}),Object(d.jsx)(l.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(d.jsx)("div",{id:"mapsCustomIconPreview__mapContainer",ref:this._setContainerRef,"data-test-subj":"mapsCustomIconPreview",className:"mapsCustomIconPreview__mapContainer"})),Object(d.jsx)(l.EuiSpacer,{size:"m"}),Object(d.jsx)(l.EuiFormRow,{label:"Preview color"},Object(d.jsx)(l.EuiColorPicker,{onChange:this._setIconColor,color:e})))))}}n()(icon_preview_IconPreview,"iconId","iconPreview");var f=r(129),m=r(36),g=r(5);class custom_icon_modal_CustomIconModal extends o.Component{constructor(...e){super(...e),n()(this,"_isMounted",!1),n()(this,"state",{label:this.props.label||"",svg:this.props.svg||"",cutoff:this.props.cutoff,radius:this.props.radius,isFileInvalid:!this.props.svg}),n()(this,"_handleLabelChange",(e=>{this.setState({label:e})})),n()(this,"_handleCutoffChange",(e=>{this.setState({cutoff:e})})),n()(this,"_handleRadiusChange",(e=>{this.setState({radius:e})})),n()(this,"_resetAdvancedOptions",(()=>{this.setState({radius:this.props.radius,cutoff:this.props.cutoff})})),n()(this,"_onFileSelect",(async e=>{if(this.setState({label:"",svg:"",isFileInvalid:!1}),e&&e.length){const r=e[0],{type:i}=r;if("image/svg+xml"===i){var t;const e=null!==(t=this.props.label)&&void 0!==t?t:function(e){const t=e.split(".");return t.length>1&&t.pop(),t.join(".")}(r.name);try{const t=await r.text();if(!this._isMounted)return;this.setState({isFileInvalid:!1,label:e,svg:t})}catch(e){if(!this._isMounted)return;this.setState({isFileInvalid:!0})}}else this.setState({isFileInvalid:!0})}}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_renderAdvancedOptions(){const{cutoff:e,radius:t}=this.state;return Object(d.jsx)(l.EuiAccordion,{id:"advancedOptionsAccordion",buttonContent:u.i18n.translate("xpack.maps.customIconModal.advancedOptionsLabel",{defaultMessage:"Advanced options"}),paddingSize:"xs"},Object(d.jsx)(l.EuiPanel,{color:"subdued",paddingSize:"s"},Object(d.jsx)(l.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiButtonEmpty,{size:"xs",onClick:this._resetAdvancedOptions},u.i18n.translate("xpack.maps.customIconModal.resetButtonLabel",{defaultMessage:"Reset"})))),Object(d.jsx)(l.EuiFormRow,{className:"mapsCustomIconForm__cutoff",label:Object(d.jsx)(l.EuiToolTip,{content:u.i18n.translate("xpack.maps.customIconModal.cutoffRangeTooltip",{defaultMessage:"Adjusts the balance of the signed distance function between the inside (approaching 1) and outside (approaching 0) of the icon."})},Object(d.jsx)(a.a.Fragment,null,u.i18n.translate("xpack.maps.customIconModal.cutoffRangeLabel",{defaultMessage:"Alpha threshold"})," ",Object(d.jsx)(l.EuiIcon,{color:"subdued",type:"questionInCircle"}))),display:"rowCompressed"},Object(d.jsx)(f.a,{min:0,max:1,value:e,step:.01,showInput:!0,showLabels:!0,compressed:!0,className:"mapsCutoffRange",onChange:this._handleCutoffChange})),Object(d.jsx)(l.EuiFormRow,{className:"mapsCustomIconForm__radius",label:Object(d.jsx)(l.EuiToolTip,{content:u.i18n.translate("xpack.maps.customIconModal.raduisRangeTooltip",{defaultMessage:"Adjusts the size of the signed distance function around the Alpha threshold as a percent of icon size."})},Object(d.jsx)(a.a.Fragment,null,u.i18n.translate("xpack.maps.customIconModal.radiusRangeLabel",{defaultMessage:"Radius"})," ",Object(d.jsx)(l.EuiIcon,{color:"subdued",type:"questionInCircle"}))),display:"rowCompressed"},Object(d.jsx)(f.a,{min:0,max:1,value:t,step:.01,showInput:!0,showLabels:!0,compressed:!0,className:"mapsRadiusRange",onChange:this._handleRadiusChange}))))}_renderIconForm(){const{label:e,svg:t}=this.state;return""!==t?Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(l.EuiFormRow,{label:u.i18n.translate("xpack.maps.customIconModal.nameInputLabel",{defaultMessage:"Name"}),display:"rowCompressed"},Object(d.jsx)(l.EuiFieldText,{value:e,className:"mapsCustomIconForm__label",onChange:e=>this._handleLabelChange(e.target.value),required:!0,"data-test-subj":"mapsCustomIconForm-label"})),Object(d.jsx)(l.EuiSpacer,null),this._renderAdvancedOptions()):null}_renderIconPreview(){const{svg:e,isFileInvalid:t,cutoff:r,radius:i}=this.state;return""!==e?Object(d.jsx)(l.EuiFlexItem,{className:"mapsIconPreview__wrapper mapsCustomIconForm__preview",grow:!1},Object(d.jsx)(icon_preview_IconPreview,{svg:e,isSvgInvalid:t,cutoff:r,radius:i})):null}render(){const e=Object(g.T)(),{symbolId:t,onSave:r,onCancel:i,onDelete:n,title:o}=this.props,{label:a,svg:h,cutoff:f,radius:y,isFileInvalid:v}=this.state,_=0!==a.length&&0!==h.length&&!v,b=h&&v?u.i18n.translate("xpack.maps.customIconModal.invalidFileError",{defaultMessage:"Icon must be in SVG format. Other image types are not supported."}):"";return Object(d.jsx)(l.EuiModal,{className:"mapsCustomIconModal",maxWidth:700,onClose:i,initialFocus:".mapsCustomIconForm__image"},Object(d.jsx)(l.EuiModalHeader,null,Object(d.jsx)(l.EuiModalHeaderTitle,{component:"h3"},o)),Object(d.jsx)(l.EuiModalBody,null,Object(d.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart",gutterSize:"m"},Object(d.jsx)(l.EuiFlexItem,{className:"mapsCustomIconForm",grow:2},Object(d.jsx)(l.EuiFormRow,{className:"mapsCustomIconForm__image",display:"rowCompressed",isInvalid:!!b,error:b,helpText:u.i18n.translate("xpack.maps.customIconModal.imageInputDescription",{defaultMessage:"SVGs without sharp corners and intricate details work best. Modifying the settings under Advanced options may improve rendering."})},Object(d.jsx)(l.EuiFilePicker,{initialPromptText:u.i18n.translate("xpack.maps.customIconModal.imageFilePickerPlaceholder",{defaultMessage:"Select or drag and drop an SVG icon"}),onChange:this._onFileSelect,className:"mapsImageUpload",accept:".svg",isInvalid:!!b,required:!0})),Object(d.jsx)(l.EuiSpacer,null),this._renderIconForm()),this._renderIconPreview())),Object(d.jsx)(l.EuiModalFooter,null,Object(d.jsx)(l.EuiFlexGroup,{justifyContent:"flexEnd"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiButtonEmpty,{onClick:i},u.i18n.translate("xpack.maps.customIconModal.cancelButtonLabel",{defaultMessage:"Cancel"}))),n&&t?Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiButton,{color:"danger",onClick:()=>{null==e||e.reportUiCounter(m.APP_ID,c.METRIC_TYPE.CLICK,"settings_custom_icons_delete"),n(t)},"data-test-subj":"mapsCustomIconForm-submit"},u.i18n.translate("xpack.maps.customIconModal.deleteButtonLabel",{defaultMessage:"Delete"}))):null,Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiButton,{fill:!0,onClick:()=>{n||null==e||e.reportUiCounter(m.APP_ID,c.METRIC_TYPE.CLICK,"settings_custom_icons_add"),r({symbolId:null!=t?t:Object(p.f)(),label:a,svg:h,cutoff:f,radius:y})},"data-test-subj":"mapsCustomIconForm-submit",isDisabled:!_},u.i18n.translate("xpack.maps.customIconModal.saveButtonLabel",{defaultMessage:"Save"}))))))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(105);function n(e,t,r){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var n=0,o=t.length-1;n<t.length;o=n++){var a=t[n][0],l=t[n][1],c=t[o][0],u=t[o][1];if(e[1]*(a-c)+l*(c-e[0])+u*(e[0]-a)==0&&(a-e[0])*(c-e[0])<=0&&(l-e[1])*(u-e[1])<=0)return!r;l>e[1]!=u>e[1]&&e[0]<(c-a)*(e[1]-l)/(u-l)+a&&(i=!i)}return i}t.default=function(e,t,r){if(void 0===r&&(r={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var o=i.getCoord(e),a=i.getGeom(t),l=a.type,c=t.bbox,u=a.coordinates;if(c&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(o,c))return!1;"Polygon"===l&&(u=[u]);for(var h=!1,p=0;p<u.length&&!h;p++)if(n(o,u[p][0],r.ignoreBoundary)){for(var d=!1,f=1;f<u[p].length&&!d;)n(o,u[p][f],!r.ignoreBoundary)&&(d=!0),f++;d||(h=!0)}return h}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(105);function n(e,t,r,i){var n=r[0],o=r[1],a=e[0],l=e[1],c=t[0],u=t[1],h=c-a,p=u-l;return 0==(r[0]-a)*p-(r[1]-l)*h&&(i?"start"===i?Math.abs(h)>=Math.abs(p)?h>0?a<n&&n<=c:c<=n&&n<a:p>0?l<o&&o<=u:u<=o&&o<l:"end"===i?Math.abs(h)>=Math.abs(p)?h>0?a<=n&&n<c:c<n&&n<=a:p>0?l<=o&&o<u:u<o&&o<=l:"both"===i&&(Math.abs(h)>=Math.abs(p)?h>0?a<n&&n<c:c<n&&n<a:p>0?l<o&&o<u:u<o&&o<l):Math.abs(h)>=Math.abs(p)?h>0?a<=n&&n<=c:c<=n&&n<=a:p>0?l<=o&&o<=u:u<=o&&o<=l)}t.default=function(e,t,r){void 0===r&&(r={});for(var o=i.getCoord(e),a=i.getCoords(t),l=0;l<a.length-1;l++){var c=!1;if(r.ignoreEndVertices&&(0===l&&(c="start"),l===a.length-2&&(c="end"),0===l&&l+1===a.length-1&&(c="both")),n(a[l],a[l+1],o,c))return!0}return!1}},,,,,,,,,,,,,,,,,,,function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(376);case"v8light":return r(378)}},function(e,t,r){var i=r(87),n=r(377);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(88)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},function(e,t,r){var i=r(87),n=r(379);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(88)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},function(e,t,r){var i;!function(n){var o=/^\s+/,a=/\s+$/,l=0,c=n.round,u=n.min,h=n.max,p=n.random;function d(e,t){if(t=t||{},(e=e||"")instanceof d)return e;if(!(this instanceof d))return new d(e,t);var r=function(e){var t,r,i,l={r:0,g:0,b:0},c=1,p=null,d=null,f=null,m=!1,g=!1;return"string"==typeof e&&(e=function(e){e=e.replace(o,"").replace(a,"").toLowerCase();var t,r=!1;if(I[e])e=I[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Z.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Z.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Z.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Z.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Z.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Z.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Z.hex8.exec(e))?{r:z(t[1]),g:z(t[2]),b:z(t[3]),a:U(t[4]),format:r?"name":"hex8"}:(t=Z.hex6.exec(e))?{r:z(t[1]),g:z(t[2]),b:z(t[3]),format:r?"name":"hex"}:(t=Z.hex4.exec(e))?{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),a:U(t[4]+""+t[4]),format:r?"name":"hex8"}:!!(t=Z.hex3.exec(e))&&{r:z(t[1]+""+t[1]),g:z(t[2]+""+t[2]),b:z(t[3]+""+t[3]),format:r?"name":"hex"}}(e)),"object"==typeof e&&($(e.r)&&$(e.g)&&$(e.b)?(t=e.r,r=e.g,i=e.b,l={r:255*D(t,255),g:255*D(r,255),b:255*D(i,255)},m=!0,g="%"===String(e.r).substr(-1)?"prgb":"rgb"):$(e.h)&&$(e.s)&&$(e.v)?(p=B(e.s),d=B(e.v),l=function(e,t,r){e=6*D(e,360),t=D(t,100),r=D(r,100);var i=n.floor(e),o=e-i,a=r*(1-t),l=r*(1-o*t),c=r*(1-(1-o)*t),u=i%6;return{r:255*[r,l,a,a,c,r][u],g:255*[c,r,r,l,a,a][u],b:255*[a,a,c,r,r,l][u]}}(e.h,p,d),m=!0,g="hsv"):$(e.h)&&$(e.s)&&$(e.l)&&(p=B(e.s),f=B(e.l),l=function(e,t,r){var i,n,o;function a(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=D(e,360),t=D(t,100),r=D(r,100),0===t)i=n=o=r;else{var l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;i=a(c,l,e+1/3),n=a(c,l,e),o=a(c,l,e-1/3)}return{r:255*i,g:255*n,b:255*o}}(e.h,p,f),m=!0,g="hsl"),e.hasOwnProperty("a")&&(c=e.a)),c=F(c),{ok:m,format:e.format||g,r:u(255,h(l.r,0)),g:u(255,h(l.g,0)),b:u(255,h(l.b,0)),a:c}}(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=c(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=r.ok,this._tc_id=l++}function f(e,t,r){e=D(e,255),t=D(t,255),r=D(r,255);var i,n,o=h(e,t,r),a=u(e,t,r),l=(o+a)/2;if(o==a)i=n=0;else{var c=o-a;switch(n=l>.5?c/(2-o-a):c/(o+a),o){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4}i/=6}return{h:i,s:n,l:l}}function m(e,t,r){e=D(e,255),t=D(t,255),r=D(r,255);var i,n,o=h(e,t,r),a=u(e,t,r),l=o,c=o-a;if(n=0===o?0:c/o,o==a)i=0;else{switch(o){case e:i=(t-r)/c+(t<r?6:0);break;case t:i=(r-e)/c+2;break;case r:i=(e-t)/c+4}i/=6}return{h:i,s:n,v:l}}function g(e,t,r,i){var n=[N(c(e).toString(16)),N(c(t).toString(16)),N(c(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function y(e,t,r,i){return[N(V(i)),N(c(e).toString(16)),N(c(t).toString(16)),N(c(r).toString(16))].join("")}function v(e,t){t=0===t?0:t||10;var r=d(e).toHsl();return r.s-=t/100,r.s=j(r.s),d(r)}function _(e,t){t=0===t?0:t||10;var r=d(e).toHsl();return r.s+=t/100,r.s=j(r.s),d(r)}function b(e){return d(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var r=d(e).toHsl();return r.l+=t/100,r.l=j(r.l),d(r)}function w(e,t){t=0===t?0:t||10;var r=d(e).toRgb();return r.r=h(0,u(255,r.r-c(-t/100*255))),r.g=h(0,u(255,r.g-c(-t/100*255))),r.b=h(0,u(255,r.b-c(-t/100*255))),d(r)}function S(e,t){t=0===t?0:t||10;var r=d(e).toHsl();return r.l-=t/100,r.l=j(r.l),d(r)}function C(e,t){var r=d(e).toHsl(),i=(r.h+t)%360;return r.h=i<0?360+i:i,d(r)}function M(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function E(e){var t=d(e).toHsl(),r=t.h;return[d(e),d({h:(r+120)%360,s:t.s,l:t.l}),d({h:(r+240)%360,s:t.s,l:t.l})]}function T(e){var t=d(e).toHsl(),r=t.h;return[d(e),d({h:(r+90)%360,s:t.s,l:t.l}),d({h:(r+180)%360,s:t.s,l:t.l}),d({h:(r+270)%360,s:t.s,l:t.l})]}function A(e){var t=d(e).toHsl(),r=t.h;return[d(e),d({h:(r+72)%360,s:t.s,l:t.l}),d({h:(r+216)%360,s:t.s,l:t.l})]}function P(e,t,r){t=t||6,r=r||30;var i=d(e).toHsl(),n=360/r,o=[d(e)];for(i.h=(i.h-(n*t>>1)+720)%360;--t;)i.h=(i.h+n)%360,o.push(d(i));return o}function O(e,t){t=t||6;for(var r=d(e).toHsv(),i=r.h,n=r.s,o=r.v,a=[],l=1/t;t--;)a.push(d({h:i,s:n,v:o})),o=(o+l)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,i=this.toRgb();return e=i.r/255,t=i.g/255,r=i.b/255,.2126*(e<=.03928?e/12.92:n.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:n.pow((t+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:n.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=F(e),this._roundA=c(100*this._a)/100,this},toHsv:function(){var e=m(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=m(this._r,this._g,this._b),t=c(360*e.h),r=c(100*e.s),i=c(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=f(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=f(this._r,this._g,this._b),t=c(360*e.h),r=c(100*e.s),i=c(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return g(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,r,i,n){var o=[N(c(e).toString(16)),N(c(t).toString(16)),N(c(r).toString(16)),N(V(i))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*D(this._r,255))+"%",g:c(100*D(this._g,255))+"%",b:c(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%)":"rgba("+c(100*D(this._r,255))+"%, "+c(100*D(this._g,255))+"%, "+c(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+y(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var n=d(e);r="#"+y(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(_,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]="a"===i?e[i]:B(e[i]));e=r}return d(e,t)},d.equals=function(e,t){return!(!e||!t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:p(),g:p(),b:p()})},d.mix=function(e,t,r){r=0===r?0:r||50;var i=d(e).toRgb(),n=d(t).toRgb(),o=r/100;return d({r:(n.r-i.r)*o+i.r,g:(n.g-i.g)*o+i.g,b:(n.b-i.b)*o+i.b,a:(n.a-i.a)*o+i.a})},d.readability=function(e,t){var r=d(e),i=d(t);return(n.max(r.getLuminance(),i.getLuminance())+.05)/(n.min(r.getLuminance(),i.getLuminance())+.05)},d.isReadable=function(e,t,r){var i,n,o,a,l,c=d.readability(e,t);switch(n=!1,(o=r,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(l=(o.size||"small").toLowerCase())&&"large"!==l&&(l="small"),i={level:a,size:l}).level+i.size){case"AAsmall":case"AAAlarge":n=c>=4.5;break;case"AAlarge":n=c>=3;break;case"AAAsmall":n=c>=7}return n},d.mostReadable=function(e,t,r){var i,n,o,a,l=null,c=0;n=(r=r||{}).includeFallbackColors,o=r.level,a=r.size;for(var u=0;u<t.length;u++)(i=d.readability(e,t[u]))>c&&(c=i,l=d(t[u]));return d.isReadable(e,l,{level:o,size:a})||!n?l:(r.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],r))};var I=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=d.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(I);function F(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function D(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=u(t,h(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function j(e){return u(1,h(0,e))}function z(e){return parseInt(e,16)}function N(e){return 1==e.length?"0"+e:""+e}function B(e){return e<=1&&(e=100*e+"%"),e}function V(e){return n.round(255*parseFloat(e)).toString(16)}function U(e){return z(e)/255}var H,G,q,Z=(G="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",q="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+G),rgba:new RegExp("rgba"+q),hsl:new RegExp("hsl"+G),hsla:new RegExp("hsla"+q),hsv:new RegExp("hsv"+G),hsva:new RegExp("hsva"+q),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function $(e){return!!Z.CSS_UNIT.exec(e)}e.exports?e.exports=d:void 0===(i=function(){return d}.call(t,r,t,e))||(e.exports=i)}(Math)},function(e,t,r){(function(){"use strict";var e,i,n,o,a,l={}.hasOwnProperty;e=r(382),i=r(187).defaults,o=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},a=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,r,n;for(t in this.options={},r=i[.2])l.call(r,t)&&(n=r[t],this.options[t]=n);for(t in e)l.call(e,t)&&(n=e[t],this.options[t]=n)}return t.prototype.buildObject=function(t){var r,n,c,u,h,p;return r=this.options.attrkey,n=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===i[.2].rootName?t=t[h=Object.keys(t)[0]]:h=this.options.rootName,p=this,c=function(e,t){var i,u,h,d,f,m;if("object"!=typeof t)p.options.cdata&&o(t)?e.raw(a(t)):e.txt(t);else if(Array.isArray(t)){for(d in t)if(l.call(t,d))for(f in u=t[d])h=u[f],e=c(e.ele(f),h).up()}else for(f in t)if(l.call(t,f))if(u=t[f],f===r){if("object"==typeof u)for(i in u)m=u[i],e=e.att(i,m)}else if(f===n)e=p.options.cdata&&o(u)?e.raw(a(u)):e.txt(u);else if(Array.isArray(u))for(d in u)l.call(u,d)&&(e="string"==typeof(h=u[d])?p.options.cdata&&o(h)?e.ele(f).raw(a(h)).up():e.ele(f,h).up():c(e.ele(f),h).up());else"object"==typeof u?e=c(e.ele(f),u).up():"string"==typeof u&&p.options.cdata&&o(u)?e=e.ele(f).raw(a(u)).up():(null==u&&(u=""),e=e.ele(f,u.toString()).up());return e},u=e.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,t).end(this.options.renderOpts)},t}()}).call(this)},function(e,t,r){(function(){var t,i,n,o,a,l,c,u,h,p;p=r(102),u=p.assign,h=p.isFunction,n=r(249),o=r(250),a=r(388),c=r(201),l=r(389),t=r(82),i=r(161),e.exports.create=function(e,t,r,i){var n,a;if(null==e)throw new Error("Root element needs a name.");return i=u({},t,r,i),a=(n=new o(i)).element(e),i.headless||(n.declaration(i),null==i.pubID&&null==i.sysID||n.dtd(i)),a},e.exports.begin=function(e,t,r){var i;return h(e)&&(t=(i=[e,t])[0],r=i[1],e={}),t?new a(e,t,r):new o(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new l(e,t)},e.exports.implementation=new n,e.exports.nodeType=t,e.exports.writerState=i}).call(this)},function(e,t,r){(function(){var t,i;t=r(384),i=r(385),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new i(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},function(e,t){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},function(e,t){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},function(e,t,r){(function(){var t,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v,_,b,x,w,S,C,M,E={}.hasOwnProperty;M=r(102),S=M.isObject,w=M.isFunction,C=M.isPlainObject,x=M.getValue,t=r(82),f=r(250),m=r(188),o=r(190),a=r(191),y=r(198),b=r(199),g=r(200),p=r(192),d=r(193),l=r(194),u=r(195),c=r(196),h=r(197),n=r(251),_=r(253),v=r(201),i=r(161),e.exports=function(){function e(e,r,i){var n;this.name="?xml",this.type=t.Document,e||(e={}),n={},e.writer?C(e.writer)&&(n=e.writer,e.writer=new v):e.writer=new v,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(n),this.stringify=new _(e),this.onDataCallback=r||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var r,i,n,o,a,l,c,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(i in n={},c=e.attribs)E.call(c,i)&&(r=c[i],n[i]=r.value);this.node(e.name,n);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(a=0,l=(u=e.children).length;a<l;a++)o=u[a],this.createChildNode(o),o.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,r){var i;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=x(e),null==t&&(t={}),t=x(t),S(t)||(r=(i=[t,r])[0],t=i[1]),this.currentNode=new m(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},e.prototype.element=function(e,r,i){var n,o,a,l,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||S(e)||w(e))for(l=this.options.noValidation,this.options.noValidation=!0,(u=new f(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=l,o=0,a=(c=u.children).length;o<a;o++)n=c[o],this.createChildNode(n),n.type===t.Element&&this.up();else this.node(e,r,i);return this},e.prototype.attribute=function(e,t){var r,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=x(e)),S(e))for(r in e)E.call(e,r)&&(i=e[r],this.attribute(r,i));else w(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new b(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new y(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var r,i,n,o,a;if(this.openCurrent(),null!=e&&(e=x(e)),null!=t&&(t=x(t)),Array.isArray(e))for(r=0,o=e.length;r<o;r++)i=e[r],this.instruction(i);else if(S(e))for(i in e)E.call(e,i)&&(n=e[i],this.instruction(i,n));else w(t)&&(t=t.apply()),a=new g(this,e,t),this.onData(this.writer.processingInstruction(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,r){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new p(this,e,t,r),this.onData(this.writer.declaration(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,r,i,n){var o;return this.openCurrent(),o=new l(this,e,t,r,i,n),this.onData(this.writer.dtdAttList(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var r;return this.openCurrent(),r=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var r;return this.openCurrent(),r=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var r;return this.openCurrent(),r=new h(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var r,n,o,a;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),n="",e.type===t.Element){for(o in this.writerOptions.state=i.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,a=e.attribs)E.call(a,o)&&(r=a[o],n+=this.writer.attribute(r,this.writerOptions,this.currentLevel));n+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.InsideTag}else this.writerOptions.state=i.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.children?(n+=" [",this.writerOptions.state=i.InsideTag):(this.writerOptions.state=i.CloseTag,n+=">"),n+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(n,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var r;if(!e.isClosed)return"",this.writerOptions.state=i.CloseTag,r=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.None,this.onData(r,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.dtd=function(e,t,r){return this.doctype(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},function(e,t,r){(function(){var t,i,n,o={}.hasOwnProperty;t=r(82),n=r(254),i=r(161),e.exports=function(e){function r(e,t){this.stream=e,r.__super__.constructor.call(this,t)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype.endline=function(e,t,n){return e.isLastRootNode&&t.state===i.CloseTag?"":r.__super__.endline.call(this,e,t,n)},r.prototype.document=function(e,t){var r,i,n,o,a,l,c,u,h;for(i=n=0,a=(c=e.children).length;n<a;i=++n)(r=c[i]).isLastRootNode=i===e.children.length-1;for(t=this.filterOptions(t),h=[],o=0,l=(u=e.children).length;o<l;o++)r=u[o],h.push(this.writeChildNode(r,t,0));return h},r.prototype.attribute=function(e,t,i){return this.stream.write(r.__super__.attribute.call(this,e,t,i))},r.prototype.cdata=function(e,t,i){return this.stream.write(r.__super__.cdata.call(this,e,t,i))},r.prototype.comment=function(e,t,i){return this.stream.write(r.__super__.comment.call(this,e,t,i))},r.prototype.declaration=function(e,t,i){return this.stream.write(r.__super__.declaration.call(this,e,t,i))},r.prototype.docType=function(e,t,r){var n,o,a,l;if(r||(r=0),this.openNode(e,t,r),t.state=i.OpenTag,this.stream.write(this.indent(e,t,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,r)),t.state=i.InsideTag,o=0,a=(l=e.children).length;o<a;o++)n=l[o],this.writeChildNode(n,t,r+1);t.state=i.CloseTag,this.stream.write("]")}return t.state=i.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,r)),t.state=i.None,this.closeNode(e,t,r)},r.prototype.element=function(e,r,n){var a,l,c,u,h,p,d,f,m;for(d in n||(n=0),this.openNode(e,r,n),r.state=i.OpenTag,this.stream.write(this.indent(e,r,n)+"<"+e.name),f=e.attribs)o.call(f,d)&&(a=f[d],this.attribute(a,r,n));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(this.stream.write(">"),r.state=i.CloseTag,this.stream.write("</"+e.name+">")):(r.state=i.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,r,n)),r.state=i.InsideTag,h=0,p=(m=e.children).length;h<p;h++)l=m[h],this.writeChildNode(l,r,n+1);r.state=i.CloseTag,this.stream.write(this.indent(e,r,n)+"</"+e.name+">")}else this.stream.write(">"),r.state=i.InsideTag,r.suppressPrettyCount++,this.writeChildNode(u,r,n+1),r.suppressPrettyCount--,r.state=i.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,r,n)),r.state=i.None,this.closeNode(e,r,n)},r.prototype.processingInstruction=function(e,t,i){return this.stream.write(r.__super__.processingInstruction.call(this,e,t,i))},r.prototype.raw=function(e,t,i){return this.stream.write(r.__super__.raw.call(this,e,t,i))},r.prototype.text=function(e,t,i){return this.stream.write(r.__super__.text.call(this,e,t,i))},r.prototype.dtdAttList=function(e,t,i){return this.stream.write(r.__super__.dtdAttList.call(this,e,t,i))},r.prototype.dtdElement=function(e,t,i){return this.stream.write(r.__super__.dtdElement.call(this,e,t,i))},r.prototype.dtdEntity=function(e,t,i){return this.stream.write(r.__super__.dtdEntity.call(this,e,t,i))},r.prototype.dtdNotation=function(e,t,i){return this.stream.write(r.__super__.dtdNotation.call(this,e,t,i))},r}(n)}).call(this)},function(e,t,r){(function(){"use strict";var e,i,n,o,a,l,c,u,h=function(e,t){return function(){return e.apply(t,arguments)}},p={}.hasOwnProperty;c=r(391),n=r(127),e=r(405),l=r(260),u=r(258).setImmediate,i=r(187).defaults,o=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},a=function(e,t,r){var i,n;for(i=0,n=e.length;i<n;i++)t=(0,e[i])(t,r);return t},t.Parser=function(r){function n(e){var r,n,o;if(this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(r in this.options={},n=i[.2])p.call(n,r)&&(o=n[r],this.options[r]=o);for(r in e)p.call(e,r)&&(o=e[r],this.options[r]=o);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(l.normalize)),this.reset()}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(n,r),n.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},n.prototype.assignOrPush=function(e,t,r){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(r)):this.options.explicitArray?e[t]=[r]:e[t]=r},n.prototype.reset=function(){var e,t,r,i,n;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(n=this,function(e){if(n.saxParser.resume(),!n.saxParser.errThrown)return n.saxParser.errThrown=!0,n.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,i=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){return function(n){var o,l,c,u,h;if((c=Object.create(null))[t]="",!r.options.ignoreAttrs)for(o in h=n.attributes)p.call(h,o)&&(e in c||r.options.mergeAttrs||(c[e]=Object.create(null)),l=r.options.attrValueProcessors?a(r.options.attrValueProcessors,n.attributes[o],o):n.attributes[o],u=r.options.attrNameProcessors?a(r.options.attrNameProcessors,o):o,r.options.mergeAttrs?r.assignOrPush(c,u,l):c[e][u]=l);return c["#name"]=r.options.tagNameProcessors?a(r.options.tagNameProcessors,n.name):n.name,r.options.xmlns&&(c[r.options.xmlnskey]={uri:n.uri,local:n.local}),i.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var r,n,l,c,u,h,d,f,m,g;if(h=i.pop(),u=h["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete h["#name"],!0===h.cdata&&(r=h.cdata,delete h.cdata),m=i[i.length-1],h[t].match(/^\s*$/)&&!r?(n=h[t],delete h[t]):(e.options.trim&&(h[t]=h[t].trim()),e.options.normalize&&(h[t]=h[t].replace(/\s{2,}/g," ").trim()),h[t]=e.options.valueProcessors?a(e.options.valueProcessors,h[t],u):h[t],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])),o(h)&&(h="function"==typeof e.options.emptyTag?e.options.emptyTag():""!==e.options.emptyTag?e.options.emptyTag:n),null!=e.options.validator&&(g="/"+function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)c=i[e],r.push(c["#name"]);return r}().concat(u).join("/"),function(){var t;try{return h=e.options.validator(g,m&&m[u],h)}catch(r){return t=r,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof h)if(e.options.preserveChildrenOrder){if(m){for(l in m[e.options.childkey]=m[e.options.childkey]||[],d=Object.create(null),h)p.call(h,l)&&(d[l]=h[l]);m[e.options.childkey].push(d),delete h["#name"],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])}}else c=Object.create(null),e.options.attrkey in h&&(c[e.options.attrkey]=h[e.options.attrkey],delete h[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in h&&(c[e.options.charkey]=h[e.options.charkey],delete h[e.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(c[e.options.childkey]=h),h=c;return i.length>0?e.assignOrPush(m,u,h):(e.options.explicitRoot&&(f=h,(h=Object.create(null))[u]=f),e.resultObject=h,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),r=function(e){return function(r){var n,o;if(o=i[i.length-1])return o[t]+=r,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(o[e.options.childkey]=o[e.options.childkey]||[],(n={"#name":"__text__"})[t]=r,e.options.normalize&&(n[t]=n[t].replace(/\s{2,}/g," ").trim()),o[e.options.childkey].push(n)),o}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(e){var t;if(t=r(e))return t.cdata=!0}},n.prototype.parseString=function(t,r){var i;null!=r&&"function"==typeof r&&(this.on("end",(function(e){return this.reset(),r(null,e)})),this.on("error",(function(e){return this.reset(),r(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(i=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",i),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw i}},n.prototype.parseStringPromise=function(e){return new Promise((t=this,function(r,i){return t.parseString(e,(function(e,t){return e?i(e):r(t)}))}));var t},n}(n),t.parseString=function(e,r,i){var n,o;return null!=i?("function"==typeof i&&(n=i),"object"==typeof r&&(o=r)):("function"==typeof r&&(n=r),o={}),new t.Parser(o).parseString(e,n)},t.parseStringPromise=function(e,r){var i;return"object"==typeof r&&(i=r),new t.Parser(i).parseStringPromise(e)}}).call(this)},function(e,t,r){(function(e){!function(t){t.parser=function(e,t){return new o(e,t)},t.SAXParser=o,t.SAXStream=l,t.createStream=function(e,t){return new l(e,t)},t.MAX_BUFFER_LENGTH=65536;var i,n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(e,r){if(!(this instanceof o))return new o(e,r);var i=this;!function(e){for(var t=0,r=n.length;t<r;t++)e[n[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=t.MAX_BUFFER_LENGTH,i.opt=r||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=E.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(d)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),A(i,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),o.prototype={end:function(){F(this)},write:function(e){var r=this;if(this.error)throw this.error;if(r.closed)return k(r,"Cannot write after close. Assign an onready handler.");if(null===e)return F(r);"object"==typeof e&&(e=e.toString());for(var i=0,o="";o=G(e,i++),r.c=o,o;)switch(r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++),r.state){case E.BEGIN:if(r.state=E.BEGIN_WHITESPACE,"\ufeff"===o)continue;H(r,o);continue;case E.BEGIN_WHITESPACE:H(r,o);continue;case E.TEXT:if(r.sawRoot&&!r.closedRoot){for(var a=i-1;o&&"<"!==o&&"&"!==o;)(o=G(e,i++))&&r.trackPosition&&(r.position++,"\n"===o?(r.line++,r.column=0):r.column++);r.textNode+=e.substring(a,i-1)}"<"!==o||r.sawRoot&&r.closedRoot&&!r.strict?(v(o)||r.sawRoot&&!r.closedRoot||D(r,"Text data outside of root node."),"&"===o?r.state=E.TEXT_ENTITY:r.textNode+=o):(r.state=E.OPEN_WAKA,r.startTagPosition=r.position);continue;case E.SCRIPT:"<"===o?r.state=E.SCRIPT_ENDING:r.script+=o;continue;case E.SCRIPT_ENDING:"/"===o?r.state=E.CLOSE_TAG:(r.script+="<"+o,r.state=E.SCRIPT);continue;case E.OPEN_WAKA:if("!"===o)r.state=E.SGML_DECL,r.sgmlDecl="";else if(v(o));else if(x(f,o))r.state=E.OPEN_TAG,r.tagName=o;else if("/"===o)r.state=E.CLOSE_TAG,r.tagName="";else if("?"===o)r.state=E.PROC_INST,r.procInstName=r.procInstBody="";else{if(D(r,"Unencoded <"),r.startTagPosition+1<r.position){var l=r.position-r.startTagPosition;o=new Array(l).join(" ")+o}r.textNode+="<"+o,r.state=E.TEXT}continue;case E.SGML_DECL:(r.sgmlDecl+o).toUpperCase()===c?(P(r,"onopencdata"),r.state=E.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+o==="--"?(r.state=E.COMMENT,r.comment="",r.sgmlDecl=""):(r.sgmlDecl+o).toUpperCase()===u?(r.state=E.DOCTYPE,(r.doctype||r.sawRoot)&&D(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===o?(P(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=E.TEXT):_(o)?(r.state=E.SGML_DECL_QUOTED,r.sgmlDecl+=o):r.sgmlDecl+=o;continue;case E.SGML_DECL_QUOTED:o===r.q&&(r.state=E.SGML_DECL,r.q=""),r.sgmlDecl+=o;continue;case E.DOCTYPE:">"===o?(r.state=E.TEXT,P(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=o,"["===o?r.state=E.DOCTYPE_DTD:_(o)&&(r.state=E.DOCTYPE_QUOTED,r.q=o));continue;case E.DOCTYPE_QUOTED:r.doctype+=o,o===r.q&&(r.q="",r.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:r.doctype+=o,"]"===o?r.state=E.DOCTYPE:_(o)&&(r.state=E.DOCTYPE_DTD_QUOTED,r.q=o);continue;case E.DOCTYPE_DTD_QUOTED:r.doctype+=o,o===r.q&&(r.state=E.DOCTYPE_DTD,r.q="");continue;case E.COMMENT:"-"===o?r.state=E.COMMENT_ENDING:r.comment+=o;continue;case E.COMMENT_ENDING:"-"===o?(r.state=E.COMMENT_ENDED,r.comment=I(r.opt,r.comment),r.comment&&P(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+o,r.state=E.COMMENT);continue;case E.COMMENT_ENDED:">"!==o?(D(r,"Malformed comment"),r.comment+="--"+o,r.state=E.COMMENT):r.state=E.TEXT;continue;case E.CDATA:"]"===o?r.state=E.CDATA_ENDING:r.cdata+=o;continue;case E.CDATA_ENDING:"]"===o?r.state=E.CDATA_ENDING_2:(r.cdata+="]"+o,r.state=E.CDATA);continue;case E.CDATA_ENDING_2:">"===o?(r.cdata&&P(r,"oncdata",r.cdata),P(r,"onclosecdata"),r.cdata="",r.state=E.TEXT):"]"===o?r.cdata+="]":(r.cdata+="]]"+o,r.state=E.CDATA);continue;case E.PROC_INST:"?"===o?r.state=E.PROC_INST_ENDING:v(o)?r.state=E.PROC_INST_BODY:r.procInstName+=o;continue;case E.PROC_INST_BODY:if(!r.procInstBody&&v(o))continue;"?"===o?r.state=E.PROC_INST_ENDING:r.procInstBody+=o;continue;case E.PROC_INST_ENDING:">"===o?(P(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=E.TEXT):(r.procInstBody+="?"+o,r.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:x(m,o)?r.tagName+=o:(j(r),">"===o?B(r):"/"===o?r.state=E.OPEN_TAG_SLASH:(v(o)||D(r,"Invalid character in tag name"),r.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:">"===o?(B(r,!0),V(r)):(D(r,"Forward-slash in opening tag not followed by >"),r.state=E.ATTRIB);continue;case E.ATTRIB:if(v(o))continue;">"===o?B(r):"/"===o?r.state=E.OPEN_TAG_SLASH:x(f,o)?(r.attribName=o,r.attribValue="",r.state=E.ATTRIB_NAME):D(r,"Invalid attribute name");continue;case E.ATTRIB_NAME:"="===o?r.state=E.ATTRIB_VALUE:">"===o?(D(r,"Attribute without value"),r.attribValue=r.attribName,N(r),B(r)):v(o)?r.state=E.ATTRIB_NAME_SAW_WHITE:x(m,o)?r.attribName+=o:D(r,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if("="===o)r.state=E.ATTRIB_VALUE;else{if(v(o))continue;D(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",P(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===o?B(r):x(f,o)?(r.attribName=o,r.state=E.ATTRIB_NAME):(D(r,"Invalid attribute name"),r.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(v(o))continue;_(o)?(r.q=o,r.state=E.ATTRIB_VALUE_QUOTED):(D(r,"Unquoted attribute value"),r.state=E.ATTRIB_VALUE_UNQUOTED,r.attribValue=o);continue;case E.ATTRIB_VALUE_QUOTED:if(o!==r.q){"&"===o?r.state=E.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=o;continue}N(r),r.q="",r.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:v(o)?r.state=E.ATTRIB:">"===o?B(r):"/"===o?r.state=E.OPEN_TAG_SLASH:x(f,o)?(D(r,"No whitespace between attributes"),r.attribName=o,r.attribValue="",r.state=E.ATTRIB_NAME):D(r,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!b(o)){"&"===o?r.state=E.ATTRIB_VALUE_ENTITY_U:r.attribValue+=o;continue}N(r),">"===o?B(r):r.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(r.tagName)">"===o?V(r):x(m,o)?r.tagName+=o:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=E.SCRIPT):(v(o)||D(r,"Invalid tagname in closing tag"),r.state=E.CLOSE_TAG_SAW_WHITE);else{if(v(o))continue;w(f,o)?r.script?(r.script+="</"+o,r.state=E.SCRIPT):D(r,"Invalid tagname in closing tag."):r.tagName=o}continue;case E.CLOSE_TAG_SAW_WHITE:if(v(o))continue;">"===o?V(r):D(r,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var h,p;switch(r.state){case E.TEXT_ENTITY:h=E.TEXT,p="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:h=E.ATTRIB_VALUE_QUOTED,p="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:h=E.ATTRIB_VALUE_UNQUOTED,p="attribValue"}";"===o?(r[p]+=U(r),r.entity="",r.state=h):x(r.entity.length?y:g,o)?r.entity+=o:(D(r,"Invalid character in entity name"),r[p]+="&"+r.entity+o,r.entity="",r.state=h);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(e){for(var r=Math.max(t.MAX_BUFFER_LENGTH,10),i=0,o=0,a=n.length;o<a;o++){var l=e[n[o]].length;if(l>r)switch(n[o]){case"textNode":O(e);break;case"cdata":P(e,"oncdata",e.cdata),e.cdata="";break;case"script":P(e,"onscript",e.script),e.script="";break;default:k(e,"Max buffer length exceeded: "+n[o])}i=Math.max(i,l)}var c=t.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=c+e.position}(r),r}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;O(e=this),""!==e.cdata&&(P(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(P(e,"onscript",e.script),e.script="")}};try{i=r(392).Stream}catch(e){i=function(){}}var a=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function l(e,t){if(!(this instanceof l))return new l(e,t);i.apply(this),this._parser=new o(e,t),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})}))}l.prototype=Object.create(i.prototype,{constructor:{value:l}}),l.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var i=r(205).StringDecoder;this._decoder=new i("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},l.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},l.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),i.prototype.on.call(r,e,t)};var c="[CDATA[",u="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",d={xml:h,xmlns:p},f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function v(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function _(e){return'"'===e||"'"===e}function b(e){return">"===e||v(e)}function x(e,t){return e.test(t)}function w(e,t){return!x(e,t)}var S,C,M,E=0;for(var T in t.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var r=t.ENTITIES[e],i="number"==typeof r?String.fromCharCode(r):r;t.ENTITIES[e]=i})),t.STATE)t.STATE[t.STATE[T]]=T;function A(e,t,r){e[t]&&e[t](r)}function P(e,t,r){e.textNode&&O(e),A(e,t,r)}function O(e){e.textNode=I(e.opt,e.textNode),e.textNode&&A(e,"ontext",e.textNode),e.textNode=""}function I(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function k(e,t){return O(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,A(e,"onerror",t),e}function F(e){return e.sawRoot&&!e.closedRoot&&D(e,"Unclosed root tag"),e.state!==E.BEGIN&&e.state!==E.BEGIN_WHITESPACE&&e.state!==E.TEXT&&k(e,"Unexpected end"),O(e),e.c="",e.closed=!0,A(e,"onend"),o.call(e,e.strict,e.opt),e}function D(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&k(e,t)}function j(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,P(e,"onopentagstart",r)}function z(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),i=r[0],n=r[1];return t&&"xmlns"===e&&(i="xmlns",n=""),{prefix:i,local:n}}function N(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=z(e.attribName,!0),r=t.prefix,i=t.local;if("xmlns"===r)if("xml"===i&&e.attribValue!==h)D(e,"xml: prefix must be bound to "+h+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==p)D(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue);else{var n=e.tag,o=e.tags[e.tags.length-1]||e;n.ns===o.ns&&(n.ns=Object.create(o.ns)),n.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var r=e.tag,i=z(e.tagName);r.prefix=i.prefix,r.local=i.local,r.uri=r.ns[i.prefix]||"",r.prefix&&!r.uri&&(D(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=i.prefix);var n=e.tags[e.tags.length-1]||e;r.ns&&n.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){P(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var o=0,a=e.attribList.length;o<a;o++){var l=e.attribList[o],c=l[0],u=l[1],h=z(c,!0),p=h.prefix,d=h.local,f=""===p?"":r.ns[p]||"",m={name:c,value:u,prefix:p,local:d,uri:f};p&&"xmlns"!==p&&!f&&(D(e,"Unbound namespace prefix: "+JSON.stringify(p)),m.uri=p),e.tag.attributes[c]=m,P(e,"onattribute",m)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=E.TEXT:e.state=E.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function V(e){if(!e.tagName)return D(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=E.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=E.SCRIPT);P(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var i=r;t--&&e.tags[t].name!==i;)D(e,"Unexpected close tag");if(t<0)return D(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=E.TEXT);e.tagName=r;for(var n=e.tags.length;n-- >t;){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,P(e,"onclosetag",e.tagName);var a={};for(var l in o.ns)a[l]=o.ns[l];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach((function(t){var r=o.ns[t];P(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=E.TEXT}function U(e){var t,r=e.entity,i=r.toLowerCase(),n="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(r=i).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),n=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),n=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||n.toLowerCase()!==r?(D(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function H(e,t){"<"===t?(e.state=E.OPEN_WAKA,e.startTagPosition=e.position):v(t)||(D(e,"Non-whitespace before first tag."),e.textNode=t,e.state=E.TEXT)}function G(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}E=t.STATE,String.fromCodePoint||(S=String.fromCharCode,C=Math.floor,M=function(){var e,t,r=[],i=-1,n=arguments.length;if(!n)return"";for(var o="";++i<n;){var a=Number(arguments[i]);if(!isFinite(a)||a<0||a>1114111||C(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?r.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,r.push(e,t)),(i+1===n||r.length>16384)&&(o+=S.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M)}(t)}).call(this,r(145).Buffer)},function(e,t,r){e.exports=n;var i=r(127).EventEmitter;function n(){i.call(this)}r(130)(n,i),n.Readable=r(202),n.Writable=r(401),n.Duplex=r(402),n.Transform=r(403),n.PassThrough=r(404),n.Stream=n,n.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",c));var a=!1;function l(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(h(),0===i.listenerCount(this,"error"))throw e}function h(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",l),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return r.on("error",u),e.on("error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e}},function(e,t,r){e.exports=r(22)(2970)},function(e,t){},function(e,t,r){"use strict";var i=r(203).Buffer,n=r(396);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n=i.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=n,r=a,o.data.copy(t,r),a+=o.data.length,o=o.next;return n},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n,o,a,l,c=1,u={},h=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){m(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&m(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),i=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){m(e.data)},i=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(n=p.documentElement,i=function(e){var t=p.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(m,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[c]=n,i(c),c++},d.clearImmediate=f}function f(e){delete u[e]}function m(e){if(h)setTimeout(m,0,e);else{var t=u[e];if(t){h=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(r,i)}}(t)}finally{f(e),h=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(101),r(106))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,r(101))},function(e,t,r){var i=r(145),n=i.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(o(i,t),t.Buffer=a),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=o;var i=r(259),n=Object.create(r(148));function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n.inherits=r(130),n.inherits(o,i),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(204)},function(e,t,r){e.exports=r(116)},function(e,t,r){e.exports=r(202).Transform},function(e,t,r){e.exports=r(202).PassThrough},function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},function(e,t,r){"use strict";var i=r(407);e.exports=function(e,t){t||(t={});var r,a,l,c,u,h,p,d,f,m,g,y=null==t.cutoff?.25:t.cutoff,v=null==t.radius?8:t.radius,_=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");r=t.width,a=t.height,c=e,h=t.stride?t.stride:Math.floor(e.length/r/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(p=(d=e).getContext("2d"),r=d.width,a=d.height,c=(f=p.getImageData(0,0,r,a)).data,h=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(p=e,r=(d=e.canvas).width,a=d.height,c=(f=p.getImageData(0,0,r,a)).data,h=4):window.ImageData&&e instanceof window.ImageData&&(f=e,r=e.width,a=e.height,c=f.data,h=4);if(l=Math.max(r,a),window.Uint8ClampedArray&&c instanceof window.Uint8ClampedArray||window.Uint8Array&&c instanceof window.Uint8Array)for(u=c,c=Array(r*a),m=0,g=u.length;m<g;m++)c[m]=u[m*h+_]/255;else if(1!==h)throw Error("Raw data can have only 1 value per pixel");var b=Array(r*a),x=Array(r*a),w=Array(l),S=Array(l),C=Array(l+1),M=Array(l);for(m=0,g=r*a;m<g;m++){var E=c[m];b[m]=1===E?0:0===E?n:Math.pow(Math.max(0,.5-E),2),x[m]=1===E?n:0===E?0:Math.pow(Math.max(0,E-.5),2)}o(b,r,a,w,S,M,C),o(x,r,a,w,S,M,C);var T=window.Float32Array?new Float32Array(r*a):new Array(r*a);for(m=0,g=r*a;m<g;m++)T[m]=i(1-((b[m]-x[m])/v+y),0,1);return T};var n=1e20;function o(e,t,r,i,n,o,l){for(var c=0;c<t;c++){for(var u=0;u<r;u++)i[u]=e[u*t+c];for(a(i,n,o,l,r),u=0;u<r;u++)e[u*t+c]=n[u]}for(u=0;u<r;u++){for(c=0;c<t;c++)i[c]=e[u*t+c];for(a(i,n,o,l,t),c=0;c<t;c++)e[u*t+c]=Math.sqrt(n[c])}}function a(e,t,r,i,o){r[0]=0,i[0]=-n,i[1]=+n;for(var a=1,l=0;a<o;a++){for(var c=(e[a]+a*a-(e[r[l]]+r[l]*r[l]))/(2*a-2*r[l]);c<=i[l];)l--,c=(e[a]+a*a-(e[r[l]]+r[l]*r[l]))/(2*a-2*r[l]);r[++l]=a,i[l]=c,i[l+1]=+n}for(a=0,l=0;a<o;a++){for(;i[l+1]<a;)l++;t[a]=(a-r[l])*(a-r[l])+e[r[l]]}}},function(e,t){e.exports=function(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),r(409),r(410),r(411);var i=r(412),n=r(413);r(414),r(415),r(416),r(417),r(418),r(419),r(420);var o=r(421),a=r(2),l=r(422),c=r(423);r(424),r(425),r(426),r(427),r(428);var u=r(429);r(431),r(432);var h=r(433);r(434),r(435);var p=r(436),d=r(437),f=r(438);r(439),r(440),r(441),r(442),r(443);var m=r(444);r(445),r(446);var g=r(447);r(448),r(449);var y=r(450);r(451);var v=r(452);r(453),r(454),r(455),r(456),r(457);var _=r(458);function b(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var x=b(i),w=b(n),S=b(o),C=b(a),M=b(l),E=b(c),T=b(u),A=b(h),P=b(p),O=b(d),I=b(f),k=b(m),F=b(g),D=b(v),j=Object.freeze({__proto__:null,offscreen:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).DOMParser,t={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,createCanvas:function(e,t){return new OffscreenCanvas(e,t)},createImage:function(e){return w.default(x.default.mark((function t(){var r,i,n;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.blob();case 5:return i=t.sent,t.next=8,createImageBitmap(i);case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})))()}};return"undefined"==typeof DOMParser&&void 0!==e||Reflect.deleteProperty(t,"DOMParser"),t},node:function(e){var t=e.DOMParser,r=e.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,fetch:e.fetch,createCanvas:r.createCanvas,createImage:r.loadImage}}});function z(e){return e.replace(/(?!\u3000)\s+/gm," ")}function N(e){return e.replace(/^[\n \t]+/,"")}function B(e){return e.replace(/[\n \t]+$/,"")}function V(e){return((e||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var U=/^[A-Z-]+$/;function H(e){return U.test(e)?e.toLowerCase():e}function G(e){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(e)||[];return t[2]||t[3]||t[4]}function q(e){if(!e.startsWith("rgb"))return e;var t=3;return e.replace(/\d+(\.\d+)?/g,(function(e,r){return t--&&r?String(Math.round(parseFloat(e))):e}))}var Z=/(\[[^\]]+\])/g,$=/(#[^\s+>~.[:]+)/g,W=/(\.[^\s+>~.[:]+)/g,X=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Y=/(:[\w-]+\([^)]*\))/gi,K=/(:[^\s+>~.[:]+)/g,J=/([^\s+>~.[:]+)/g;function ee(e,t){var r=t.exec(e);return r?[e.replace(t," "),r.length]:[e,0]}function te(e){var t=[0,0,0],r=e.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0,n=ee(r,Z),o=S.default(n,2);r=o[0],i=o[1],t[1]+=i;var a=ee(r,$),l=S.default(a,2);r=l[0],i=l[1],t[0]+=i;var c=ee(r,W),u=S.default(c,2);r=u[0],i=u[1],t[1]+=i;var h=ee(r,X),p=S.default(h,2);r=p[0],i=p[1],t[2]+=i;var d=ee(r,Y),f=S.default(d,2);r=f[0],i=f[1],t[1]+=i;var m=ee(r,K),g=S.default(m,2);r=g[0],i=g[1],t[1]+=i;var y=ee(r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),J),v=S.default(y,2);return r=v[0],i=v[1],t[2]+=i,t.join("")}var re=1e-8;function ie(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function ne(e,t){return(e[0]*t[0]+e[1]*t[1])/(ie(e)*ie(t))}function se(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ne(e,t))}function ae(e){return e*e*e}function de(e){return 3*e*e*(1-e)}function fe(e){return 3*e*(1-e)*(1-e)}function me(e){return(1-e)*(1-e)*(1-e)}function _e(e){return e*e}function be(e){return 2*e*(1-e)}function xe(e){return(1-e)*(1-e)}var Ce=function(){function e(t,r,i){M.default(this,e),this.document=t,this.name=r,this.value=i,this.isNormalizedColor=!1}return E.default(e,[{key:"split",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",r=this.document,i=this.name;return z(this.getString()).trim().split(t).map((function(t){return new e(r,i,t)}))}},{key:"hasValue",value:function(e){var t=this.value;return null!==t&&""!==t&&(e||0!==t)&&void 0!==t}},{key:"isString",value:function(e){var t=this.value,r="string"==typeof t;return r&&e?e.test(t):r}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}},{key:"setValue",value:function(e){return this.value=e,this}},{key:"getValue",value:function(e){return void 0===e||this.hasValue()?this.value:e}},{key:"getNumber",value:function(e){if(!this.hasValue())return void 0===e?0:parseFloat(e);var t=this.value,r=parseFloat(t);return this.isString(/%$/)&&(r/=100),r}},{key:"getString",value:function(e){return void 0===e||this.hasValue()?void 0===this.value?"":String(this.value):String(e)}},{key:"getColor",value:function(e){var t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=q(t),this.value=t),t}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9.-]/g,"")}},{key:"getPixels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var r="boolean"==typeof e?[void 0,e]:[e],i=S.default(r,2),n=i[0],o=i[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&o:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(n);default:var l=this.getNumber();return t&&l<1?l*a.computeSize(n):l}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var e=this.getString(),t=/#([^)'"]+)/.exec(e);return t&&(t=t[1]),t||(t=e),this.document.definitions[t]}},{key:"getFillStyleDefinition",value:function(e,t){var r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient)return r.createGradient(this.document.ctx,e,t);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){var i=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),i.hasValue()&&r.getAttribute("patternTransform",!0).setValue(i.value)}return r.createPattern(this.document.ctx,e,t)}return null}},{key:"getTextBaseline",value:function(){return this.hasValue()?e.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var r=this.getColor(),i=r.length,n=0,o=0;o<i&&(","===r[o]&&n++,3!==n);o++);if(t.hasValue()&&this.isString()&&3!==n){var a=new A.default(r);a.ok&&(a.alpha=t.getNumber(),r=a.toRGBA())}return new e(this.document,this.name,r)}}],[{key:"empty",value:function(t){return new e(t,"EMPTY","")}}]),e}();Ce.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Me=function(){function e(){M.default(this,e),this.viewPorts=[]}return E.default(e,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(e,t){this.viewPorts.push({width:e,height:t})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var e=this.viewPorts;return e[e.length-1]}},{key:"computeSize",value:function(e){return"number"==typeof e?e:"x"===e?this.width:"y"===e?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),e}(),Ee=function(){function e(t,r){M.default(this,e),this.x=t,this.y=r}return E.default(e,[{key:"angleTo",value:function(e){return Math.atan2(e.y-this.y,e.x-this.x)}},{key:"applyTransform",value:function(e){var t=this.x,r=this.y,i=t*e[0]+r*e[2]+e[4],n=t*e[1]+r*e[3]+e[5];this.x=i,this.y=n}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=V(t),n=S.default(i,2),o=n[0],a=void 0===o?r:o,l=n[1];return new e(a,void 0===l?r:l)}},{key:"parseScale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=V(t),n=S.default(i,2),o=n[0],a=void 0===o?r:o,l=n[1];return new e(a,void 0===l?a:l)}},{key:"parsePath",value:function(t){for(var r=V(t),i=r.length,n=[],o=0;o<i;o+=2)n.push(new e(r[o],r[o+1]));return n}}]),e}(),Te=function(){function e(t){M.default(this,e),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}return E.default(e,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var e=this.screen,t=this.onClick,r=this.onMouseMove,i=e.ctx.canvas;i.onclick=t,i.onmousemove=r,this.working=!0}}},{key:"stop",value:function(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var e=this.screen,t=this.events,r=this.eventElements,i=e.ctx.canvas.style;i&&(i.cursor=""),t.forEach((function(e,t){for(var i=e.run,n=r[t];n;)i(n),n=n.parent})),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(e,t){if(this.working&&t){var r=this.events,i=this.eventElements;r.forEach((function(r,n){var o=r.x,a=r.y;!i[n]&&t.isPointInPath&&t.isPointInPath(o,a)&&(i[n]=e)}))}}},{key:"checkBoundingBox",value:function(e,t){if(this.working&&t){var r=this.events,i=this.eventElements;r.forEach((function(r,n){var o=r.x,a=r.y;!i[n]&&t.isPointInBox(o,a)&&(i[n]=e)}))}}},{key:"mapXY",value:function(e,t){for(var r=this.screen,i=r.window,n=r.ctx,o=new Ee(e,t),a=n.canvas;a;)o.x-=a.offsetLeft,o.y-=a.offsetTop,a=a.offsetParent;return i.scrollX&&(o.x+=i.scrollX),i.scrollY&&(o.y+=i.scrollY),o}},{key:"onClick",value:function(e){var t=this.mapXY(e.clientX,e.clientY),r=t.x,i=t.y;this.events.push({type:"onclick",x:r,y:i,run:function(e){e.onClick&&e.onClick()}})}},{key:"onMouseMove",value:function(e){var t=this.mapXY(e.clientX,e.clientY),r=t.x,i=t.y;this.events.push({type:"onmousemove",x:r,y:i,run:function(e){e.onMouseMove&&e.onMouseMove()}})}}]),e}(),Pe="undefined"!=typeof window?window:null,Oe="undefined"!=typeof fetch?fetch.bind(void 0):null,Le=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.fetch,n=void 0===i?Oe:i,o=r.window,a=void 0===o?Pe:o;M.default(this,e),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new Me,this.mouse=new Te(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=n}return E.default(e,[{key:"wait",value:function(e){this.waits.push(e)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var e=this.waits.every((function(e){return e()}));return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}},{key:"setDefaults",value:function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}},{key:"setViewBox",value:function(e){var t=e.document,r=e.ctx,i=e.aspectRatio,n=e.width,o=e.desiredWidth,a=e.height,l=e.desiredHeight,c=e.minX,u=void 0===c?0:c,h=e.minY,p=void 0===h?0:h,d=e.refX,f=e.refY,m=e.clip,g=void 0!==m&&m,y=e.clipX,v=void 0===y?0:y,_=e.clipY,b=void 0===_?0:_,x=z(i).replace(/^defer\s/,"").split(" "),w=S.default(x,2),C=w[0]||"xMidYMid",M=w[1]||"meet",E=n/o,T=a/l,A=Math.min(E,T),P=Math.max(E,T),O=o,I=l;"meet"===M&&(O*=A,I*=A),"slice"===M&&(O*=P,I*=P);var k=new Ce(t,"refX",d),F=new Ce(t,"refY",f),D=k.hasValue()&&F.hasValue();if(D&&r.translate(-A*k.getPixels("x"),-A*F.getPixels("y")),g){var j=A*v,N=A*b;r.beginPath(),r.moveTo(j,N),r.lineTo(n,N),r.lineTo(n,a),r.lineTo(j,a),r.closePath(),r.clip()}if(!D){var B="meet"===M&&A===T,V="slice"===M&&P===T,U="meet"===M&&A===E,H="slice"===M&&P===E;C.startsWith("xMid")&&(B||V)&&r.translate(n/2-O/2,0),C.endsWith("YMid")&&(U||H)&&r.translate(0,a/2-I/2),C.startsWith("xMax")&&(B||V)&&r.translate(n-O,0),C.endsWith("YMax")&&(U||H)&&r.translate(0,a-I)}switch(!0){case"none"===C:r.scale(E,T);break;case"meet"===M:r.scale(A,A);break;case"slice"===M:r.scale(P,P)}r.translate(-u,-p)}},{key:"start",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.enableRedraw,n=void 0!==i&&i,o=r.ignoreMouse,a=void 0!==o&&o,l=r.ignoreAnimation,c=void 0!==l&&l,u=r.ignoreDimensions,h=void 0!==u&&u,p=r.ignoreClear,d=void 0!==p&&p,f=r.forceRedraw,m=r.scaleWidth,g=r.scaleHeight,y=r.offsetX,v=r.offsetY,_=this.FRAMERATE,b=this.mouse,x=1e3/_;if(this.frameDuration=x,this.readyPromise=new Promise((function(e){t.resolveReady=e})),this.isReady()&&this.render(e,h,d,m,g,y,v),n){var w=Date.now(),S=w,C=0;a||b.start(),this.intervalId=T.default((function r(){w=Date.now(),(C=w-S)>=x&&(S=w-C%x,t.shouldUpdate(c,f)&&(t.render(e,h,d,m,g,y,v),b.runEvents())),t.intervalId=T.default(r)}))}}},{key:"stop",value:function(){this.intervalId&&(T.default.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(e,t){if(!e){var r=this.frameDuration;if(this.animations.reduce((function(e,t){return t.update(r)||e}),!1))return!0}return!("function"!=typeof t||!t())||!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents()}},{key:"render",value:function(e,t,r,i,n,o,a){var l=this.CLIENT_WIDTH,c=this.CLIENT_HEIGHT,u=this.viewPort,h=this.ctx,p=this.isFirstRender,d=h.canvas;u.clear(),d.width&&d.height?u.setCurrent(d.width,d.height):u.setCurrent(l,c);var f=e.getStyle("width"),m=e.getStyle("height");!t&&(p||"number"!=typeof i&&"number"!=typeof n)&&(f.hasValue()&&(d.width=f.getPixels("x"),d.style&&(d.style.width="".concat(d.width,"px"))),m.hasValue()&&(d.height=m.getPixels("y"),d.style&&(d.style.height="".concat(d.height,"px"))));var g=d.clientWidth||d.width,y=d.clientHeight||d.height;if(t&&f.hasValue()&&m.hasValue()&&(g=f.getPixels("x"),y=m.getPixels("y")),u.setCurrent(g,y),"number"==typeof o&&e.getAttribute("x",!0).setValue(o),"number"==typeof a&&e.getAttribute("y",!0).setValue(a),"number"==typeof i||"number"==typeof n){var v=V(e.getAttribute("viewBox").getString()),_=0,b=0;if("number"==typeof i){var x=e.getStyle("width");x.hasValue()?_=x.getPixels("x")/i:isNaN(v[2])||(_=v[2]/i)}if("number"==typeof n){var w=e.getStyle("height");w.hasValue()?b=w.getPixels("y")/n:isNaN(v[3])||(b=v[3]/n)}_||(_=b),b||(b=_),e.getAttribute("width",!0).setValue(i),e.getAttribute("height",!0).setValue(n);var S=e.getStyle("transform",!0,!0);S.setValue("".concat(S.getString()," scale(").concat(1/_,", ").concat(1/b,")"))}r||h.clearRect(0,0,g,y),e.render(h),p&&(this.isFirstRender=!1)}}]),e}();Le.defaultWindow=Pe,Le.defaultFetch=Oe;var ke=Le.defaultFetch,Fe="undefined"!=typeof DOMParser?DOMParser:null,De=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fetch,i=void 0===r?ke:r,n=t.DOMParser,o=void 0===n?Fe:n;M.default(this,e),this.fetch=i,this.DOMParser=o}var t,r;return E.default(e,[{key:"parse",value:(r=w.default(x.default.mark((function e(t){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.startsWith("<")){e.next=2;break}return e.abrupt("return",this.parseFromString(t));case 2:return e.abrupt("return",this.load(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"parseFromString",value:function(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch(r){return this.checkDocument(t.parseFromString(e,"text/xml"))}}},{key:"checkDocument",value:function(e){var t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent);return e}},{key:"load",value:(t=w.default(x.default.mark((function e(t){var r,i;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(t);case 2:return r=e.sent,e.next=5,r.text();case 5:return i=e.sent,e.abrupt("return",this.parseFromString(i));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ze=function(){function e(t,r){M.default(this,e),this.type="translate",this.point=null,this.point=Ee.parse(r)}return E.default(e,[{key:"apply",value:function(e){var t=this.point,r=t.x,i=t.y;e.translate(r||0,i||0)}},{key:"unapply",value:function(e){var t=this.point,r=t.x,i=t.y;e.translate(-1*r||0,-1*i||0)}},{key:"applyToPoint",value:function(e){var t=this.point,r=t.x,i=t.y;e.applyTransform([1,0,0,1,r||0,i||0])}}]),e}(),Re=function(){function e(t,r,i){M.default(this,e),this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var n=V(r);this.angle=new Ce(t,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}return E.default(e,[{key:"apply",value:function(e){var t=this.cx,r=this.cy,i=this.originX,n=this.originY,o=this.angle,a=t+i.getPixels("x"),l=r+n.getPixels("y");e.translate(a,l),e.rotate(o.getRadians()),e.translate(-a,-l)}},{key:"unapply",value:function(e){var t=this.cx,r=this.cy,i=this.originX,n=this.originY,o=this.angle,a=t+i.getPixels("x"),l=r+n.getPixels("y");e.translate(a,l),e.rotate(-1*o.getRadians()),e.translate(-a,-l)}},{key:"applyToPoint",value:function(e){var t=this.cx,r=this.cy,i=this.angle.getRadians();e.applyTransform([1,0,0,1,t||0,r||0]),e.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),e.applyTransform([1,0,0,1,-t||0,-r||0])}}]),e}(),Ne=function(){function e(t,r,i){M.default(this,e),this.type="scale",this.scale=null,this.originX=null,this.originY=null;var n=Ee.parseScale(r);0!==n.x&&0!==n.y||(n.x=re,n.y=re),this.scale=n,this.originX=i[0],this.originY=i[1]}return E.default(e,[{key:"apply",value:function(e){var t=this.scale,r=t.x,i=t.y,n=this.originX,o=this.originY,a=n.getPixels("x"),l=o.getPixels("y");e.translate(a,l),e.scale(r,i||r),e.translate(-a,-l)}},{key:"unapply",value:function(e){var t=this.scale,r=t.x,i=t.y,n=this.originX,o=this.originY,a=n.getPixels("x"),l=o.getPixels("y");e.translate(a,l),e.scale(1/r,1/i||r),e.translate(-a,-l)}},{key:"applyToPoint",value:function(e){var t=this.scale,r=t.x,i=t.y;e.applyTransform([r||0,0,0,i||0,0,0])}}]),e}(),Be=function(){function e(t,r,i){M.default(this,e),this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=V(r),this.originX=i[0],this.originY=i[1]}return E.default(e,[{key:"apply",value:function(e){var t=this.originX,r=this.originY,i=this.matrix,n=t.getPixels("x"),o=r.getPixels("y");e.translate(n,o),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.translate(-n,-o)}},{key:"unapply",value:function(e){var t=this.originX,r=this.originY,i=this.matrix,n=i[0],o=i[2],a=i[4],l=i[1],c=i[3],u=i[5],h=1/(n*(1*c-0*u)-o*(1*l-0*u)+a*(0*l-0*c)),p=t.getPixels("x"),d=r.getPixels("y");e.translate(p,d),e.transform(h*(1*c-0*u),h*(0*u-1*l),h*(0*a-1*o),h*(1*n-0*a),h*(o*u-a*c),h*(a*l-n*u)),e.translate(-p,-d)}},{key:"applyToPoint",value:function(e){e.applyTransform(this.matrix)}}]),e}();var Ve=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="skew",o.angle=null,o.angle=new Ce(e,"angle",t),o}return n}(Be);var Ue=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="skewX",o.matrix=[1,0,Math.tan(o.angle.getRadians()),1,0,0],o}return n}(Ve);var He=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="skewY",o.matrix=[1,Math.tan(o.angle.getRadians()),0,1,0,0],o}return n}(Ve),Ge=function(){function e(t,r,i){var n=this;M.default(this,e),this.document=t,this.transforms=[];var o=function(e){return z(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}(r);o.forEach((function(t){if("none"!==t){var r=function(e){var t=e.split("("),r=S.default(t,2),i=r[0],n=r[1];return[i.trim(),n.trim().replace(")","")]}(t),o=S.default(r,2),a=o[0],l=o[1],c=e.transformTypes[a];void 0!==c&&n.transforms.push(new c(n.document,l,i))}}))}return E.default(e,[{key:"apply",value:function(e){for(var t=this.transforms,r=t.length,i=0;i<r;i++)t[i].apply(e)}},{key:"unapply",value:function(e){for(var t=this.transforms,r=t.length-1;r>=0;r--)t[r].unapply(e)}},{key:"applyToPoint",value:function(e){for(var t=this.transforms,r=t.length,i=0;i<r;i++)t[i].applyToPoint(e)}}],[{key:"fromElement",value:function(t,r){var i=r.getStyle("transform",!1,!0),n=r.getStyle("transform-origin",!1,!0).split(),o=S.default(n,2),a=o[0],l=o[1],c=[a,void 0===l?a:l];return i.hasValue()?new e(t,i.getString(),c):null}}]),e}();Ge.transformTypes={translate:ze,rotate:Re,scale:Ne,matrix:Be,skewX:Ue,skewY:He};var $e=function(){function e(t,r){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(M.default(this,e),this.document=t,this.node=r,this.captureTextNodes=n,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],r&&1===r.nodeType){Array.from(r.attributes).forEach((function(e){var r=H(e.nodeName);i.attributes[r]=new Ce(t,r,e.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map((function(e){return e.trim()})).forEach((function(e){if(e){var r=e.split(":").map((function(e){return e.trim()})),n=S.default(r,2),o=n[0],a=n[1];i.styles[o]=new Ce(t,o,a)}}));var o=t.definitions,a=this.getAttribute("id");a.hasValue()&&(o[a.getString()]||(o[a.getString()]=this)),Array.from(r.childNodes).forEach((function(e){if(1===e.nodeType)i.addChild(e);else if(n&&(3===e.nodeType||4===e.nodeType)){var r=t.createTextNode(e);r.getText().length>0&&i.addChild(r)}}))}}return E.default(e,[{key:"getAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes[e];if(!r&&t){var i=new Ce(this.document,e,"");return this.attributes[e]=i,i}return r||Ce.empty(this.document)}},{key:"getHrefAttribute",value:function(){for(var e in this.attributes)if("href"===e||e.endsWith(":href"))return this.attributes[e];return Ce.empty(this.document)}},{key:"getStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.styles[e];if(i)return i;var n=this.getAttribute(e);if(null!=n&&n.hasValue())return this.styles[e]=n,n;if(!r){var o=this.parent;if(o){var a=o.getStyle(e);if(null!=a&&a.hasValue())return a}}if(t){var l=new Ce(this.document,e,"");return this.styles[e]=l,l}return i||Ce.empty(this.document)}},{key:"render",value:function(e){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(e.save(),this.getStyle("mask").hasValue()){var t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if("none"!==this.getStyle("filter").getValue("none")){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}},{key:"setContext",value:function(e){}},{key:"applyEffects",value:function(e){var t=Ge.fromElement(this.document,this);t&&t.apply(e);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var i=r.getDefinition();i&&i.apply(e)}}},{key:"clearContext",value:function(e){}},{key:"renderChildren",value:function(e){this.children.forEach((function(t){t.render(e)}))}},{key:"addChild",value:function(t){var r=t instanceof e?t:this.document.createElement(t);r.parent=this,e.ignoreChildTypes.includes(r.type)||this.children.push(r)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);var r=t.getAttribute("class");return!(!r||""===r)&&r.split(" ").some((function(t){return".".concat(t)===e}))}},{key:"addStylesFromStyleDefinition",value:function(){var e=this.document,t=e.styles,r=e.stylesSpecificity;for(var i in t)if(!i.startsWith("@")&&this.matchesSelector(i)){var n=t[i],o=r[i];if(n)for(var a in n){var l=this.stylesSpecificity[a];void 0===l&&(l="000"),o>=l&&(this.styles[a]=n[a],this.stylesSpecificity[a]=o)}}}},{key:"removeStyles",value:function(e,t){return t.reduce((function(t,r){var i=e.getStyle(r);if(!i.hasValue())return t;var n=i.getString();return i.setValue(""),[].concat(k.default(t),[[r,n]])}),[])}},{key:"restoreStyles",value:function(e,t){t.forEach((function(t){var r=S.default(t,2),i=r[0],n=r[1];e.getStyle(i,!0).setValue(n)}))}}]),e}();$e.ignoreChildTypes=["title"];var We=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){return M.default(this,n),i.call(this,e,t,r)}return n}($e);function Xe(e){var t=e.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Ke(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Je(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}var Qe=function(){function t(e,r,i,n,o,a){M.default(this,t);var l=a?"string"==typeof a?t.parse(a):a:{};this.fontFamily=o||l.fontFamily,this.fontSize=n||l.fontSize,this.fontStyle=e||l.fontStyle,this.fontWeight=i||l.fontWeight,this.fontVariant=r||l.fontVariant}return E.default(t,[{key:"toString",value:function(){return[Ke(this.fontStyle),this.fontVariant,Je(this.fontWeight),this.fontSize,(t=this.fontFamily,void 0===e?t:t.trim().split(",").map(Xe).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var e=arguments.length>1?arguments[1]:void 0,r="",i="",n="",o="",a="",l=z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),c={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach((function(e){switch(!0){case!c.fontStyle&&t.styles.includes(e):"inherit"!==e&&(r=e),c.fontStyle=!0;break;case!c.fontVariant&&t.variants.includes(e):"inherit"!==e&&(i=e),c.fontStyle=!0,c.fontVariant=!0;break;case!c.fontWeight&&t.weights.includes(e):"inherit"!==e&&(n=e),c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0;break;case!c.fontSize:if("inherit"!==e){var l=e.split("/"),u=S.default(l,1);o=u[0]}c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0,c.fontSize=!0;break;default:"inherit"!==e&&(a+=e)}})),new t(r,i,n,o,a,e)}}]),t}();Qe.styles="normal|italic|oblique|inherit",Qe.variants="normal|small-caps|inherit",Qe.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var et=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;M.default(this,e),this.x1=t,this.y1=r,this.x2=i,this.y2=n,this.addPoint(t,r),this.addPoint(i,n)}return E.default(e,[{key:"addPoint",value:function(e,t){void 0!==e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),void 0!==t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}},{key:"addX",value:function(e){this.addPoint(e,null)}},{key:"addY",value:function(e){this.addPoint(null,e)}},{key:"addBoundingBox",value:function(e){if(e){var t=e.x1,r=e.y1,i=e.x2,n=e.y2;this.addPoint(t,r),this.addPoint(i,n)}}},{key:"sumCubic",value:function(e,t,r,i,n){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*i+Math.pow(e,3)*n}},{key:"bezierCurveAdd",value:function(e,t,r,i,n){var o=6*t-12*r+6*i,a=-3*t+9*r-9*i+3*n,l=3*r-3*t;if(0!==a){var c=Math.pow(o,2)-4*l*a;if(!(c<0)){var u=(-o+Math.sqrt(c))/(2*a);0<u&&u<1&&(e?this.addX(this.sumCubic(u,t,r,i,n)):this.addY(this.sumCubic(u,t,r,i,n)));var h=(-o-Math.sqrt(c))/(2*a);0<h&&h<1&&(e?this.addX(this.sumCubic(h,t,r,i,n)):this.addY(this.sumCubic(h,t,r,i,n)))}}else{if(0===o)return;var p=-l/o;0<p&&p<1&&(e?this.addX(this.sumCubic(p,t,r,i,n)):this.addY(this.sumCubic(p,t,r,i,n)))}}},{key:"addBezierCurve",value:function(e,t,r,i,n,o,a,l){this.addPoint(e,t),this.addPoint(a,l),this.bezierCurveAdd(!0,e,r,n,a),this.bezierCurveAdd(!1,t,i,o,l)}},{key:"addQuadraticCurve",value:function(e,t,r,i,n,o){var a=e+2/3*(r-e),l=t+2/3*(i-t),c=a+1/3*(n-e),u=l+1/3*(o-t);this.addBezierCurve(e,t,a,c,l,u,n,o)}},{key:"isPointInBox",value:function(e,t){var r=this.x1,i=this.y1,n=this.x2,o=this.y2;return r<=e&&e<=n&&i<=t&&t<=o}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),e}();var tt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e){var t;return M.default(this,n),(t=i.call(this,e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,""))).control=null,t.start=null,t.current=null,t.command=null,t.commands=t.commands,t.i=-1,t.previousCommand=null,t.points=[],t.angles=[],t}return E.default(n,[{key:"reset",value:function(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Ee(0,0),this.control=new Ee(0,0),this.current=new Ee(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.commands.length-1}},{key:"next",value:function(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}},{key:"getPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new Ee(this.command[e],this.command[t]);return this.makeAbsolute(r)}},{key:"getAsControlPoint",value:function(e,t){var r=this.getPoint(e,t);return this.control=r,r}},{key:"getAsCurrentPoint",value:function(e,t){var r=this.getPoint(e,t);return this.current=r,r}},{key:"getReflectedControlPoint",value:function(){var e=this.previousCommand.type;if(e!==y.SVGPathData.CURVE_TO&&e!==y.SVGPathData.SMOOTH_CURVE_TO&&e!==y.SVGPathData.QUAD_TO&&e!==y.SVGPathData.SMOOTH_QUAD_TO)return this.current;var t=this.current,r=t.x,i=t.y,n=this.control,o=n.x,a=n.y;return new Ee(2*r-o,2*i-a)}},{key:"makeAbsolute",value:function(e){if(this.command.relative){var t=this.current,r=t.x,i=t.y;e.x+=r,e.y+=i}return e}},{key:"addMarker",value:function(e,t,r){var i=this.points,n=this.angles;r&&n.length>0&&!n[n.length-1]&&(n[n.length-1]=i[i.length-1].angleTo(r)),this.addMarkerAngle(e,t?t.angleTo(e):null)}},{key:"addMarkerAngle",value:function(e,t){this.points.push(e),this.angles.push(t)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var e=this.angles,t=e.length,r=0;r<t;r++)if(!e[r])for(var i=r+1;i<t;i++)if(e[i]){e[r]=e[i];break}return e}}]),n}(y.SVGPathData);var it=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).modifiedEmSizeStack=!1,e}return E.default(n,[{key:"calculateOpacity",value:function(){for(var e=1,t=this;t;){var r=t.getStyle("opacity",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),t=t.parent}return e}},{key:"setContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var r=this.getStyle("fill"),i=this.getStyle("fill-opacity"),n=this.getStyle("stroke"),o=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var a=r.getFillStyleDefinition(this,i);a&&(e.fillStyle=a)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var l=r.getColor();"inherit"!==l&&(e.fillStyle="none"===l?"rgba(0,0,0,0)":l)}if(i.hasValue()){var c=new Ce(this.document,"fill",e.fillStyle).addOpacity(i).getColor();e.fillStyle=c}if(n.isUrlDefinition()){var u=n.getFillStyleDefinition(this,o);u&&(e.strokeStyle=u)}else if(n.hasValue()){"currentColor"===n.getString()&&n.setValue(this.getStyle("color").getColor());var h=n.getString();"inherit"!==h&&(e.strokeStyle="none"===h?"rgba(0,0,0,0)":h)}if(o.hasValue()){var p=new Ce(this.document,"stroke",e.strokeStyle).addOpacity(o).getString();e.strokeStyle=p}var d=this.getStyle("stroke-width");if(d.hasValue()){var f=d.getPixels();e.lineWidth=f||re}var m=this.getStyle("stroke-linecap"),g=this.getStyle("stroke-linejoin"),y=this.getStyle("stroke-miterlimit"),v=this.getStyle("stroke-dasharray"),_=this.getStyle("stroke-dashoffset");if(m.hasValue()&&(e.lineCap=m.getString()),g.hasValue()&&(e.lineJoin=g.getString()),y.hasValue()&&(e.miterLimit=y.getNumber()),v.hasValue()&&"none"!==v.getString()){var b=V(v.getString());void 0!==e.setLineDash?e.setLineDash(b):void 0!==e.webkitLineDash?e.webkitLineDash=b:void 0===e.mozDash||1===b.length&&0===b[0]||(e.mozDash=b);var x=_.getPixels();void 0!==e.lineDashOffset?e.lineDashOffset=x:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=x:void 0!==e.mozDashOffset&&(e.mozDashOffset=x)}}if(this.modifiedEmSizeStack=!1,void 0!==e.font){var w=this.getStyle("font"),S=this.getStyle("font-style"),C=this.getStyle("font-variant"),M=this.getStyle("font-weight"),E=this.getStyle("font-size"),T=this.getStyle("font-family"),A=new Qe(S.getString(),C.getString(),M.getString(),E.hasValue()?"".concat(E.getPixels(!0),"px"):"",T.getString(),Qe.parse(w.getString(),e.font));S.setValue(A.fontStyle),C.setValue(A.fontVariant),M.setValue(A.fontWeight),E.setValue(A.fontSize),T.setValue(A.fontFamily),e.font=A.toString(),E.isPixels()&&(this.document.emSize=E.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(e){F.default(I.default(n.prototype),"clearContext",this).call(this,e),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),n}($e);var ot=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="path",o.pathParser=null,o.pathParser=new tt(o.getAttribute("d").getString()),o}return E.default(n,[{key:"path",value:function(e){var t=this.pathParser,r=new et;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case tt.MOVE_TO:this.pathM(e,r);break;case tt.LINE_TO:this.pathL(e,r);break;case tt.HORIZ_LINE_TO:this.pathH(e,r);break;case tt.VERT_LINE_TO:this.pathV(e,r);break;case tt.CURVE_TO:this.pathC(e,r);break;case tt.SMOOTH_CURVE_TO:this.pathS(e,r);break;case tt.QUAD_TO:this.pathQ(e,r);break;case tt.SMOOTH_QUAD_TO:this.pathT(e,r);break;case tt.ARC:this.pathA(e,r);break;case tt.CLOSE_PATH:this.pathZ(e,r)}return r}},{key:"getBoundingBox",value:function(e){return this.path()}},{key:"getMarkers",value:function(){var e=this.pathParser,t=e.getMarkerPoints(),r=e.getMarkerAngles();return t.map((function(e,t){return[e,r[t]]}))}},{key:"renderChildren",value:function(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle("fill-rule");""!==e.fillStyle&&("inherit"!==t.getString("inherit")?e.fill(t.getString()):e.fill()),""!==e.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var r=this.getMarkers();if(r){var i=r.length-1,n=this.getStyle("marker-start"),o=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(n.isUrlDefinition()){var l=n.getDefinition(),c=S.default(r[0],2),u=c[0],h=c[1];l.render(e,u,h)}if(o.isUrlDefinition())for(var p=o.getDefinition(),d=1;d<i;d++){var f=S.default(r[d],2),m=f[0],g=f[1];p.render(e,m,g)}if(a.isUrlDefinition()){var y=a.getDefinition(),v=S.default(r[i],2),_=v[0],b=v[1];y.render(e,_,b)}}}},{key:"pathM",value:function(e,t){var r=this.pathParser,i=n.pathM(r).point,o=i.x,a=i.y;r.addMarker(i),t.addPoint(o,a),e&&e.moveTo(o,a)}},{key:"pathL",value:function(e,t){var r=this.pathParser,i=n.pathL(r),o=i.current,a=i.point,l=a.x,c=a.y;r.addMarker(a,o),t.addPoint(l,c),e&&e.lineTo(l,c)}},{key:"pathH",value:function(e,t){var r=this.pathParser,i=n.pathH(r),o=i.current,a=i.point,l=a.x,c=a.y;r.addMarker(a,o),t.addPoint(l,c),e&&e.lineTo(l,c)}},{key:"pathV",value:function(e,t){var r=this.pathParser,i=n.pathV(r),o=i.current,a=i.point,l=a.x,c=a.y;r.addMarker(a,o),t.addPoint(l,c),e&&e.lineTo(l,c)}},{key:"pathC",value:function(e,t){var r=this.pathParser,i=n.pathC(r),o=i.current,a=i.point,l=i.controlPoint,c=i.currentPoint;r.addMarker(c,l,a),t.addBezierCurve(o.x,o.y,a.x,a.y,l.x,l.y,c.x,c.y),e&&e.bezierCurveTo(a.x,a.y,l.x,l.y,c.x,c.y)}},{key:"pathS",value:function(e,t){var r=this.pathParser,i=n.pathS(r),o=i.current,a=i.point,l=i.controlPoint,c=i.currentPoint;r.addMarker(c,l,a),t.addBezierCurve(o.x,o.y,a.x,a.y,l.x,l.y,c.x,c.y),e&&e.bezierCurveTo(a.x,a.y,l.x,l.y,c.x,c.y)}},{key:"pathQ",value:function(e,t){var r=this.pathParser,i=n.pathQ(r),o=i.current,a=i.controlPoint,l=i.currentPoint;r.addMarker(l,a,a),t.addQuadraticCurve(o.x,o.y,a.x,a.y,l.x,l.y),e&&e.quadraticCurveTo(a.x,a.y,l.x,l.y)}},{key:"pathT",value:function(e,t){var r=this.pathParser,i=n.pathT(r),o=i.current,a=i.controlPoint,l=i.currentPoint;r.addMarker(l,a,a),t.addQuadraticCurve(o.x,o.y,a.x,a.y,l.x,l.y),e&&e.quadraticCurveTo(a.x,a.y,l.x,l.y)}},{key:"pathA",value:function(e,t){var r=this.pathParser,i=n.pathA(r),o=i.currentPoint,a=i.rX,l=i.rY,c=i.sweepFlag,u=i.xAxisRotation,h=i.centp,p=i.a1,d=i.ad,f=1-c?1:-1,m=p+f*(d/2),g=new Ee(h.x+a*Math.cos(m),h.y+l*Math.sin(m));if(r.addMarkerAngle(g,m-f*Math.PI/2),r.addMarkerAngle(o,m-f*Math.PI),t.addPoint(o.x,o.y),e&&!isNaN(p)&&!isNaN(d)){var y=a>l?a:l,v=a>l?1:a/l,_=a>l?l/a:1;e.translate(h.x,h.y),e.rotate(u),e.scale(v,_),e.arc(0,0,y,p,p+d,Boolean(1-c)),e.scale(1/v,1/_),e.rotate(-u),e.translate(-h.x,-h.y)}}},{key:"pathZ",value:function(e,t){n.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}}],[{key:"pathM",value:function(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}},{key:"pathL",value:function(e){return{current:e.current,point:e.getAsCurrentPoint()}}},{key:"pathH",value:function(e){var t=e.current,r=e.command,i=new Ee((r.relative?t.x:0)+r.x,t.y);return e.current=i,{current:t,point:i}}},{key:"pathV",value:function(e){var t=e.current,r=e.command,i=new Ee(t.x,(r.relative?t.y:0)+r.y);return e.current=i,{current:t,point:i}}},{key:"pathC",value:function(e){return{current:e.current,point:e.getPoint("x1","y1"),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathS",value:function(e){return{current:e.current,point:e.getReflectedControlPoint(),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathQ",value:function(e){return{current:e.current,controlPoint:e.getAsControlPoint("x1","y1"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathT",value:function(e){var t=e.current,r=e.getReflectedControlPoint();return e.control=r,{current:t,controlPoint:r,currentPoint:e.getAsCurrentPoint()}}},{key:"pathA",value:function(e){var t=e.current,r=e.command,i=r.rX,n=r.rY,o=r.xRot,a=r.lArcFlag,l=r.sweepFlag,c=o*(Math.PI/180),u=e.getAsCurrentPoint(),h=new Ee(Math.cos(c)*(t.x-u.x)/2+Math.sin(c)*(t.y-u.y)/2,-Math.sin(c)*(t.x-u.x)/2+Math.cos(c)*(t.y-u.y)/2),p=Math.pow(h.x,2)/Math.pow(i,2)+Math.pow(h.y,2)/Math.pow(n,2);p>1&&(i*=Math.sqrt(p),n*=Math.sqrt(p));var d=(a===l?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(n,2)-Math.pow(i,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2))/(Math.pow(i,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2)));isNaN(d)&&(d=0);var f=new Ee(d*i*h.y/n,d*-n*h.x/i),m=new Ee((t.x+u.x)/2+Math.cos(c)*f.x-Math.sin(c)*f.y,(t.y+u.y)/2+Math.sin(c)*f.x+Math.cos(c)*f.y),g=se([1,0],[(h.x-f.x)/i,(h.y-f.y)/n]),y=[(h.x-f.x)/i,(h.y-f.y)/n],v=[(-h.x-f.x)/i,(-h.y-f.y)/n],_=se(y,v);return ne(y,v)<=-1&&(_=Math.PI),ne(y,v)>=1&&(_=0),{currentPoint:u,rX:i,rY:n,sweepFlag:l,xAxisRotation:c,centp:m,a1:g,ad:_}}},{key:"pathZ",value:function(e){e.current=e.start}}]),n}(it);var at=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="glyph",o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber(),o.unicode=o.getAttribute("unicode").getString(),o.arabicForm=o.getAttribute("arabic-form").getString(),o}return n}(ot);var lt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,(this instanceof n?this.constructor:void 0)===n||r)).type="text",o.x=0,o.y=0,o.measureCache=-1,o}return E.default(n,[{key:"setContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];F.default(I.default(n.prototype),"setContext",this).call(this,e,t);var r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(e.textBaseline=r)}},{key:"initializeCoordinates",value:function(e){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var t=this.getAttribute("dx"),r=this.getAttribute("dy");t.hasValue()&&(this.x+=t.getPixels("x")),r.hasValue()&&(this.y+=r.getPixels("y")),this.x+=this.getAnchorDelta(e,this,0)}},{key:"getBoundingBox",value:function(e){var t=this;if("text"!==this.type)return this.getTElementBoundingBox(e);this.initializeCoordinates(e);var r=null;return this.children.forEach((function(i,n){var o=t.getChildBoundingBox(e,t,t,n);r?r.addBoundingBox(o):r=o})),r}},{key:"getFontSize",value:function(){var e=this.document,t=this.parent,r=Qe.parse(e.ctx.font).fontSize;return t.getStyle("font-size").getNumber(r)}},{key:"getTElementBoundingBox",value:function(e){var t=this.getFontSize();return new et(this.x,this.y-t,this.x+this.measureText(e),this.y)}},{key:"getGlyph",value:function(e,t,r){var i=t[r],n=null;if(e.isArabic){var o=t.length,a=t[r-1],l=t[r+1],c="isolated";if((0===r||" "===a)&&r<o-2&&" "!==l&&(c="terminal"),r>0&&" "!==a&&r<o-2&&" "!==l&&(c="medial"),r>0&&" "!==a&&(r===o-1||" "===l)&&(c="initial"),void 0!==e.glyphs[i]){var u=e.glyphs[i];n=u instanceof at?u:u[c]}}else n=e.glyphs[i];return n||(n=e.missingGlyph),n}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(e){var t=e||this.node,r=Array.from(t.parentNode.childNodes),i=r.indexOf(t),n=r.length-1,o=z(t.textContent||"");return 0===i&&(o=N(o)),i===n&&(o=B(o)),o}},{key:"renderChildren",value:function(e){var t=this;if("text"===this.type){this.initializeCoordinates(e),this.children.forEach((function(r,i){t.renderChild(e,t,t,i)}));var r=this.document.screen.mouse;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(e))}else this.renderTElementChildren(e)}},{key:"renderTElementChildren",value:function(e){var t=this.document,r=this.parent,i=this.getText(),n=r.getStyle("font-family").getDefinition();if(n)for(var o=n.fontFace.unitsPerEm,a=Qe.parse(t.ctx.font),l=r.getStyle("font-size").getNumber(a.fontSize),c=r.getStyle("font-style").getString(a.fontStyle),u=l/o,h=n.isRTL?i.split("").reverse().join(""):i,p=V(r.getAttribute("dx").getString()),d=h.length,f=0;f<d;f++){var m=this.getGlyph(n,h,f);e.translate(this.x,this.y),e.scale(u,-u);var g=e.lineWidth;e.lineWidth=e.lineWidth*o/l,"italic"===c&&e.transform(1,0,.4,1,0,0),m.render(e),"italic"===c&&e.transform(1,0,-.4,1,0,0),e.lineWidth=g,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=l*(m.horizAdvX||n.horizAdvX)/o,void 0===p[f]||isNaN(p[f])||(this.x+=p[f])}else{var y=this.x,v=this.y;e.fillStyle&&e.fillText(i,y,v),e.strokeStyle&&e.strokeText(i,y,v)}}},{key:"getAnchorDelta",value:function(e,t,r){var i=this.getStyle("text-anchor").getString("start");if("start"!==i){for(var n=t.children,o=n.length,a=null,l=0,c=r;c<o&&(a=n[c],!(c>r&&a.getAttribute("x").hasValue()||a.getAttribute("text-anchor").hasValue()));c++)l+=a.measureTextRecursive(e);return-1*("end"===i?l:l/2)}return 0}},{key:"adjustChildCoordinates",value:function(e,t,r,i){var n=r.children[i];if("function"!=typeof n.measureText)return n;e.save(),n.setContext(e,!0);var o=n.getAttribute("x"),a=n.getAttribute("y"),l=n.getAttribute("dx"),c=n.getAttribute("dy"),u=n.getAttribute("text-anchor").getString("start");if(0===i&&"textNode"!==n.type&&(o.hasValue()||o.setValue(t.getAttribute("x").getValue("0")),a.hasValue()||a.setValue(t.getAttribute("y").getValue("0")),l.hasValue()||l.setValue(t.getAttribute("dx").getValue("0")),c.hasValue()||c.setValue(t.getAttribute("dy").getValue("0"))),o.hasValue()){if(n.x=o.getPixels("x")+t.getAnchorDelta(e,r,i),"start"!==u){var h=n.measureTextRecursive(e);n.x+=-1*("end"===u?h:h/2)}l.hasValue()&&(n.x+=l.getPixels("x"))}else{if("start"!==u){var p=n.measureTextRecursive(e);t.x+=-1*("end"===u?p:p/2)}l.hasValue()&&(t.x+=l.getPixels("x")),n.x=t.x}return t.x=n.x+n.measureText(e),a.hasValue()?(n.y=a.getPixels("y"),c.hasValue()&&(n.y+=c.getPixels("y"))):(c.hasValue()&&(t.y+=c.getPixels("y")),n.y=t.y),t.y=n.y,n.clearContext(e),e.restore(),n}},{key:"getChildBoundingBox",value:function(e,t,r,i){var n=this.adjustChildCoordinates(e,t,r,i);if("function"!=typeof n.getBoundingBox)return null;var o=n.getBoundingBox(e);return o?(n.children.forEach((function(r,i){var a=t.getChildBoundingBox(e,t,n,i);o.addBoundingBox(a)})),o):null}},{key:"renderChild",value:function(e,t,r,i){var n=this.adjustChildCoordinates(e,t,r,i);n.render(e),n.children.forEach((function(r,i){t.renderChild(e,t,n,i)}))}},{key:"measureTextRecursive",value:function(e){return this.children.reduce((function(t,r){return t+r.measureTextRecursive(e)}),this.measureText(e))}},{key:"measureText",value:function(e){var t=this.measureCache;if(~t)return t;var r=this.getText(),i=this.measureTargetText(e,r);return this.measureCache=i,i}},{key:"measureTargetText",value:function(e,t){if(!t.length)return 0;var r=this.parent,i=r.getStyle("font-family").getDefinition();if(i){for(var n=this.getFontSize(),o=i.isRTL?t.split("").reverse().join(""):t,a=V(r.getAttribute("dx").getString()),l=o.length,c=0,u=0;u<l;u++)c+=(this.getGlyph(i,o,u).horizAdvX||i.horizAdvX)*n/i.fontFace.unitsPerEm,void 0===a[u]||isNaN(a[u])||(c+=a[u]);return c}if(!e.measureText)return 10*t.length;e.save(),this.setContext(e,!0);var h=e.measureText(t).width;return this.clearContext(e),e.restore(),h}}]),n}(it);var ct=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,(this instanceof n?this.constructor:void 0)===n||r)).type="tspan",o.text=o.children.length>0?"":o.getTextFromNode(),o}return E.default(n,[{key:"getText",value:function(){return this.text}}]),n}(lt);var ut=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="textNode",e}return n}(ct);var ht=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="svg",e.root=!1,e}return E.default(n,[{key:"setContext",value:function(e){var t,r=this.document,i=r.screen,o=r.window,a=e.canvas;if(i.setDefaults(e),a.style&&void 0!==e.font&&o&&void 0!==o.getComputedStyle){e.font=o.getComputedStyle(a).getPropertyValue("font");var l=new Ce(r,"fontSize",Qe.parse(e.font).fontSize);l.hasValue()&&(r.rootEmSize=l.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var c=i.viewPort,u=c.width,h=c.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var p=this.getAttribute("refX"),d=this.getAttribute("refY"),f=this.getAttribute("viewBox"),m=f.hasValue()?V(f.getString()):null,g=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),y=0,v=0,_=0,b=0;m&&(y=m[0],v=m[1]),this.root||(u=this.getStyle("width").getPixels("x"),h=this.getStyle("height").getPixels("y"),"marker"===this.type&&(_=y,b=v,y=0,v=0)),i.viewPort.setCurrent(u,h),!this.node||this.parent&&"foreignObject"!==(null===(t=this.node.parentNode)||void 0===t?void 0:t.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),F.default(I.default(n.prototype),"setContext",this).call(this,e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),m&&(u=m[2],h=m[3]),r.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:u,height:i.viewPort.height,desiredHeight:h,minX:y,minY:v,refX:p.getValue(),refY:d.getValue(),clip:g,clipX:_,clipY:b}),m&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(u,h))}},{key:"clearContext",value:function(e){F.default(I.default(n.prototype),"clearContext",this).call(this,e),this.document.screen.viewPort.removeCurrent()}},{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getAttribute("width",!0),n=this.getAttribute("height",!0),o=this.getAttribute("viewBox"),a=this.getAttribute("style"),l=i.getNumber(0),c=n.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(i.setValue(e),n.setValue(t),o.hasValue()||o.setValue("0 0 ".concat(l||e," ").concat(c||t)),a.hasValue()){var h=this.getStyle("width"),p=this.getStyle("height");h.hasValue()&&h.setValue("".concat(e,"px")),p.hasValue()&&p.setValue("".concat(t,"px"))}}}]),n}(it);var pt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="rect",e}return E.default(n,[{key:"path",value:function(e){var t=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getStyle("width",!1,!0).getPixels("x"),n=this.getStyle("height",!1,!0).getPixels("y"),o=this.getAttribute("rx"),a=this.getAttribute("ry"),l=o.getPixels("x"),c=a.getPixels("y");if(o.hasValue()&&!a.hasValue()&&(c=l),a.hasValue()&&!o.hasValue()&&(l=c),l=Math.min(l,i/2),c=Math.min(c,n/2),e){var u=(Math.sqrt(2)-1)/3*4;e.beginPath(),n>0&&i>0&&(e.moveTo(t+l,r),e.lineTo(t+i-l,r),e.bezierCurveTo(t+i-l+u*l,r,t+i,r+c-u*c,t+i,r+c),e.lineTo(t+i,r+n-c),e.bezierCurveTo(t+i,r+n-c+u*c,t+i-l+u*l,r+n,t+i-l,r+n),e.lineTo(t+l,r+n),e.bezierCurveTo(t+l-u*l,r+n,t,r+n-c+u*c,t,r+n-c),e.lineTo(t,r+c),e.bezierCurveTo(t,r+c-u*c,t+l-u*l,r,t+l,r),e.closePath())}return new et(t,r,t+i,r+n)}},{key:"getMarkers",value:function(){return null}}]),n}(ot);var dt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="circle",e}return E.default(n,[{key:"path",value:function(e){var t=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),i=this.getAttribute("r").getPixels();return e&&i>0&&(e.beginPath(),e.arc(t,r,i,0,2*Math.PI,!1),e.closePath()),new et(t-i,r-i,t+i,r+i)}},{key:"getMarkers",value:function(){return null}}]),n}(ot);var ft=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="ellipse",e}return E.default(n,[{key:"path",value:function(e){var t=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),i=this.getAttribute("ry").getPixels("y"),n=this.getAttribute("cx").getPixels("x"),o=this.getAttribute("cy").getPixels("y");return e&&r>0&&i>0&&(e.beginPath(),e.moveTo(n+r,o),e.bezierCurveTo(n+r,o+t*i,n+t*r,o+i,n,o+i),e.bezierCurveTo(n-t*r,o+i,n-r,o+t*i,n-r,o),e.bezierCurveTo(n-r,o-t*i,n-t*r,o-i,n,o-i),e.bezierCurveTo(n+t*r,o-i,n+r,o-t*i,n+r,o),e.closePath()),new et(n-r,o-i,n+r,o+i)}},{key:"getMarkers",value:function(){return null}}]),n}(ot);var mt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="line",e}return E.default(n,[{key:"getPoints",value:function(){return[new Ee(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Ee(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(e){var t=this.getPoints(),r=S.default(t,2),i=r[0],n=i.x,o=i.y,a=r[1],l=a.x,c=a.y;return e&&(e.beginPath(),e.moveTo(n,o),e.lineTo(l,c)),new et(n,o,l,c)}},{key:"getMarkers",value:function(){var e=this.getPoints(),t=S.default(e,2),r=t[0],i=t[1],n=r.angleTo(i);return[[r,n],[i,n]]}}]),n}(ot);var gt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="polyline",o.points=[],o.points=Ee.parsePath(o.getAttribute("points").getString()),o}return E.default(n,[{key:"path",value:function(e){var t=this.points,r=S.default(t,1)[0],i=r.x,n=r.y,o=new et(i,n);return e&&(e.beginPath(),e.moveTo(i,n)),t.forEach((function(t){var r=t.x,i=t.y;o.addPoint(r,i),e&&e.lineTo(r,i)})),o}},{key:"getMarkers",value:function(){var e=this.points,t=e.length-1,r=[];return e.forEach((function(i,n){n!==t&&r.push([i,i.angleTo(e[n+1])])})),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}}]),n}(ot);var yt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="polygon",e}return E.default(n,[{key:"path",value:function(e){var t=F.default(I.default(n.prototype),"path",this).call(this,e),r=S.default(this.points,1)[0],i=r.x,o=r.y;return e&&(e.lineTo(i,o),e.closePath()),t}}]),n}(gt);var vt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="pattern",e}return E.default(n,[{key:"createPattern",value:function(e,t,r){var i=this.getStyle("width").getPixels("x",!0),n=this.getStyle("height").getPixels("y",!0),o=new ht(this.document,null);o.attributes.viewBox=new Ce(this.document,"viewBox",this.getAttribute("viewBox").getValue()),o.attributes.width=new Ce(this.document,"width","".concat(i,"px")),o.attributes.height=new Ce(this.document,"height","".concat(n,"px")),o.attributes.transform=new Ce(this.document,"transform",this.getAttribute("patternTransform").getValue()),o.children=this.children;var a=this.document.createCanvas(i,n),l=a.getContext("2d"),c=this.getAttribute("x"),u=this.getAttribute("y");c.hasValue()&&u.hasValue()&&l.translate(c.getPixels("x",!0),u.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var h=-1;h<=1;h++)for(var p=-1;p<=1;p++)l.save(),o.attributes.x=new Ce(this.document,"x",h*a.width),o.attributes.y=new Ce(this.document,"y",p*a.height),o.render(l),l.restore();return e.createPattern(a,"repeat")}}]),n}($e);var _t=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="marker",e}return E.default(n,[{key:"render",value:function(e,t,r){if(t){var i=t.x,n=t.y,o=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(i,n),"auto"===o&&e.rotate(r),"strokeWidth"===a&&e.scale(e.lineWidth,e.lineWidth),e.save();var l=new ht(this.document,null);l.type=this.type,l.attributes.viewBox=new Ce(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new Ce(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new Ce(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new Ce(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new Ce(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new Ce(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new Ce(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new Ce(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(e),e.restore(),"strokeWidth"===a&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"===o&&e.rotate(-r),e.translate(-i,-n)}}}]),n}($e);var St=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="defs",e}return E.default(n,[{key:"render",value:function(){}}]),n}($e);var Ct=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="g",e}return E.default(n,[{key:"getBoundingBox",value:function(e){var t=new et;return this.children.forEach((function(r){t.addBoundingBox(r.getBoundingBox(e))})),t}}]),n}(it);var Mt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).attributesToInherit=["gradientUnits"],o.stops=[];var a=D.default(o),l=a.stops;return a.children.forEach((function(e){"stop"===e.type&&l.push(e)})),o}return E.default(n,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(e,t,r){var i=this,n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));var o=n.stops,a=this.getGradient(e,t);if(!a)return this.addParentOpacity(r,o[o.length-1].color);if(o.forEach((function(e){a.addColorStop(e.offset,i.addParentOpacity(r,e.color))})),this.getAttribute("gradientTransform").hasValue()){var l=this.document,c=l.screen,u=c.MAX_VIRTUAL_PIXELS,h=c.viewPort,p=S.default(h.viewPorts,1)[0],d=new pt(l,null);d.attributes.x=new Ce(l,"x",-u/3),d.attributes.y=new Ce(l,"y",-u/3),d.attributes.width=new Ce(l,"width",u),d.attributes.height=new Ce(l,"height",u);var f=new Ct(l,null);f.attributes.transform=new Ce(l,"transform",this.getAttribute("gradientTransform").getValue()),f.children=[d];var m=new ht(l,null);m.attributes.x=new Ce(l,"x",0),m.attributes.y=new Ce(l,"y",0),m.attributes.width=new Ce(l,"width",p.width),m.attributes.height=new Ce(l,"height",p.height),m.children=[f];var g=l.createCanvas(p.width,p.height),y=g.getContext("2d");return y.fillStyle=a,m.render(y),y.createPattern(g,"no-repeat")}return a}},{key:"inheritStopContainer",value:function(e){var t=this;this.attributesToInherit.forEach((function(r){!t.getAttribute(r).hasValue()&&e.getAttribute(r).hasValue()&&t.getAttribute(r,!0).setValue(e.getAttribute(r).getValue())}))}},{key:"addParentOpacity",value:function(e,t){return e.hasValue()?new Ce(this.document,"color",t).addOpacity(e).getColor():t}}]),n}($e);var Et=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="linearGradient",o.attributesToInherit.push("x1","y1","x2","y2"),o}return E.default(n,[{key:"getGradient",value:function(e,t){var r="objectBoundingBox"===this.getGradientUnits(),i=r?t.getBoundingBox(e):null;if(r&&!i)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var n=r?i.x+i.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),o=r?i.y+i.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=r?i.x+i.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=r?i.y+i.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return n===a&&o===l?null:e.createLinearGradient(n,o,a,l)}}]),n}(Mt);var Tt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="radialGradient",o.attributesToInherit.push("cx","cy","r","fx","fy","fr"),o}return E.default(n,[{key:"getGradient",value:function(e,t){var r="objectBoundingBox"===this.getGradientUnits(),i=t.getBoundingBox(e);if(r&&!i)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var n=r?i.x+i.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),o=r?i.y+i.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=n,l=o;this.getAttribute("fx").hasValue()&&(a=r?i.x+i.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=r?i.y+i.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var c=r?(i.width+i.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return e.createRadialGradient(a,l,u,n,o,c)}}]),n}(Mt);var At=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="stop";var a=Math.max(0,Math.min(1,o.getAttribute("offset").getNumber())),l=o.getStyle("stop-opacity"),c=o.getStyle("stop-color",!0);return""===c.getString()&&c.setValue("#000"),l.hasValue()&&(c=c.addOpacity(l)),o.offset=a,o.color=c.getColor(),o}return n}($e);var Pt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="animate",o.duration=0,o.initialValue=null,o.initialUnits="",o.removed=!1,o.frozen=!1,e.screen.animations.push(D.default(o)),o.begin=o.getAttribute("begin").getMilliseconds(),o.maxDuration=o.begin+o.getAttribute("dur").getMilliseconds(),o.from=o.getAttribute("from"),o.to=o.getAttribute("to"),o.values=new Ce(e,"values",null);var a=o.getAttribute("values");return a.hasValue()&&o.values.setValue(a.getString().split(";")),o}return E.default(n,[{key:"getProperty",value:function(){var e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return"CSS"===e?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}},{key:"calcValue",value:function(){var e=this.initialUnits,t=this.getProgress(),r=t.progress,i=t.from,n=t.to,o=i.getNumber()+(n.getNumber()-i.getNumber())*r;return"%"===e&&(o*=100),"".concat(o).concat(e)}},{key:"update",value:function(e){var t=this.parent,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var i=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==i||this.frozen){if("remove"===i&&!this.removed)return this.removed=!0,r.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,t.animationFrozen=!0,t.animationFrozenValue=r.getString();return!1}this.duration+=e;var n=!1;if(this.begin<this.duration){var o=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var l=a.getString();o="".concat(l,"(").concat(o,")")}r.setValue(o),n=!0}return n}},{key:"getProgress",value:function(){var e=this.document,t=this.values,r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(t.hasValue()){var i=r.progress*(t.getValue().length-1),n=Math.floor(i),o=Math.ceil(i);r.from=new Ce(e,"from",parseFloat(t.getValue()[n])),r.to=new Ce(e,"to",parseFloat(t.getValue()[o])),r.progress=(i-n)/(o-n)}else r.from=this.from,r.to=this.to;return r}}]),n}($e);var Ot=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="animateColor",e}return E.default(n,[{key:"calcValue",value:function(){var e=this.getProgress(),t=e.progress,r=e.from,i=e.to,n=new A.default(r.getColor()),o=new A.default(i.getColor());if(n.ok&&o.ok){var a=n.r+(o.r-n.r)*t,l=n.g+(o.g-n.g)*t,c=n.b+(o.b-n.b)*t;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(l),", ").concat(Math.floor(c),")")}return this.getAttribute("from").getColor()}}]),n}(Pt);var It=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="animateTransform",e}return E.default(n,[{key:"calcValue",value:function(){var e=this.getProgress(),t=e.progress,r=e.from,i=e.to,n=V(r.getString()),o=V(i.getString()),a=n.map((function(e,r){return e+(o[r]-e)*t})).join(" ");return a}}]),n}(Pt);function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var kt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="font",o.glyphs={},o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber();var a,l=e.definitions,c=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(D.default(o).children);try{for(c.s();!(a=c.n()).done;){var u=a.value;switch(u.type){case"font-face":o.fontFace=u;var h=u.getStyle("font-family");h.hasValue()&&(l[h.getString()]=D.default(o));break;case"missing-glyph":o.missingGlyph=u;break;case"glyph":var p=u;p.arabicForm?(o.isRTL=!0,o.isArabic=!0,void 0===o.glyphs[p.unicode]&&(o.glyphs[p.unicode]={}),o.glyphs[p.unicode][p.arabicForm]=p):o.glyphs[p.unicode]=p}}}catch(e){c.e(e)}finally{c.f()}return o}return E.default(n,[{key:"render",value:function(){}}]),n}($e);var Ft=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="font-face",o.ascent=o.getAttribute("ascent").getNumber(),o.descent=o.getAttribute("descent").getNumber(),o.unitsPerEm=o.getAttribute("units-per-em").getNumber(),o}return n}($e);var Dt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="missing-glyph",e.horizAdvX=0,e}return n}(ot);var jt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="tref",e}return E.default(n,[{key:"getText",value:function(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return""}}]),n}(lt);var zt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="a";var a=t.childNodes,l=a[0],c=a.length>0&&Array.from(a).every((function(e){return 3===e.nodeType}));return o.hasText=c,o.text=c?o.getTextFromNode(l):"",o}return E.default(n,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(e){if(this.hasText){F.default(I.default(n.prototype),"renderChildren",this).call(this,e);var t=this.document,r=this.x,i=this.y,o=t.screen.mouse,a=new Ce(t,"fontSize",Qe.parse(t.ctx.font).fontSize);o.isWorking()&&o.checkBoundingBox(this,new et(r,i-a.getPixels("y"),r+this.measureText(e),i))}else if(this.children.length>0){var l=new Ct(this.document,null);l.children=this.children,l.parent=this,l.render(e)}}},{key:"onClick",value:function(){var e=this.document.window;e&&e.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),n}(lt);function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){C.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Vt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="textPath",o.textWidth=0,o.textHeight=0,o.pathLength=-1,o.glyphInfo=null,o.letterSpacingCache=[],o.measuresCache=new Map([["",0]]);var a=o.getHrefAttribute().getDefinition();return o.text=o.getTextFromNode(),o.dataArray=o.parsePathData(a),o}return E.default(n,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(e){var t=this.dataArray;e&&e.beginPath(),t.forEach((function(t){var r=t.type,i=t.points;switch(r){case tt.LINE_TO:e&&e.lineTo(i[0],i[1]);break;case tt.MOVE_TO:e&&e.moveTo(i[0],i[1]);break;case tt.CURVE_TO:e&&e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case tt.QUAD_TO:e&&e.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case tt.ARC:var n=S.default(i,8),o=n[0],a=n[1],l=n[2],c=n[3],u=n[4],h=n[5],p=n[6],d=n[7],f=l>c?l:c,m=l>c?1:l/c,g=l>c?c/l:1;e&&(e.translate(o,a),e.rotate(p),e.scale(m,g),e.arc(0,0,f,u,u+h,Boolean(1-d)),e.scale(1/m,1/g),e.rotate(-p),e.translate(-o,-a));break;case tt.CLOSE_PATH:e&&e.closePath()}}))}},{key:"renderChildren",value:function(e){this.setTextData(e),e.save();var t=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),i=this.glyphInfo,n=e.fillStyle;"underline"===t&&e.beginPath(),i.forEach((function(i,n){var o=i.p0,a=i.p1,l=i.rotation,c=i.text;e.save(),e.translate(o.x,o.y),e.rotate(l),e.fillStyle&&e.fillText(c,0,0),e.strokeStyle&&e.strokeText(c,0,0),e.restore(),"underline"===t&&(0===n&&e.moveTo(o.x,o.y+r/8),e.lineTo(a.x,a.y+r/5))})),"underline"===t&&(e.lineWidth=r/20,e.strokeStyle=n,e.stroke(),e.closePath()),e.restore()}},{key:"getLetterSpacingAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[e]||0}},{key:"findSegmentToFitChar",value:function(e,t,r,i,n,o,a,l,c){var u=o,h=this.measureText(e,l);" "===l&&"justify"===t&&r<i&&(h+=(i-r)/n),c>-1&&(u+=this.getLetterSpacingAt(c));var p=this.textHeight/20,d=this.getEquidistantPointOnPath(u,p,0),f=this.getEquidistantPointOnPath(u+h,p,0),m={p0:d,p1:f},g=d&&f?Math.atan2(f.y-d.y,f.x-d.x):0;if(a){var y=Math.cos(Math.PI/2+g)*a,v=Math.cos(-g)*a;m.p0=Bt(Bt({},d),{},{x:d.x+y,y:d.y+v}),m.p1=Bt(Bt({},f),{},{x:f.x+y,y:f.y+v})}return{offset:u+=h,segment:m,rotation:g}}},{key:"measureText",value:function(e,t){var r=this.measuresCache,i=t||this.getText();if(r.has(i))return r.get(i);var n=this.measureTargetText(e,i);return r.set(i,n),n}},{key:"setTextData",value:function(e){var t=this;if(!this.glyphInfo){var r=this.getText(),i=r.split(""),n=r.split(" ").length-1,o=this.parent.getAttribute("dx").split().map((function(e){return e.getPixels("x")})),a=this.parent.getAttribute("dy").getPixels("y"),l=this.parent.getStyle("text-anchor").getString("start"),c=this.getStyle("letter-spacing"),u=this.parent.getStyle("letter-spacing"),h=0;c.hasValue()&&"inherit"!==c.getValue()?c.hasValue()&&"initial"!==c.getValue()&&"unset"!==c.getValue()&&(h=c.getPixels()):h=u.getPixels();var p=[],d=r.length;this.letterSpacingCache=p;for(var f=0;f<d;f++)p.push(void 0!==o[f]?o[f]:h);var m=p.reduce((function(e,t,r){return 0===r?0:e+t||0}),0),g=this.measureText(e),y=Math.max(g+m,0);this.textWidth=g,this.textHeight=this.getFontSize(),this.glyphInfo=[];var v=this.getPathLength(),_=this.getStyle("startOffset").getNumber(0)*v,b=0;"middle"!==l&&"center"!==l||(b=-y/2),"end"!==l&&"right"!==l||(b=-y),b+=_,i.forEach((function(r,o){var c=t.findSegmentToFitChar(e,l,y,v,n,b,a,r,o),u=c.offset,h=c.segment,p=c.rotation;b=u,h.p0&&h.p1&&t.glyphInfo.push({text:i[o],p0:h.p0,p1:h.p1,rotation:p})}))}}},{key:"parsePathData",value:function(e){if(this.pathLength=-1,!e)return[];var t=[],r=e.pathParser;for(r.reset();!r.isEnd();){var i=r.current,n=i?i.x:0,o=i?i.y:0,a=r.next(),l=a.type,c=[];switch(a.type){case tt.MOVE_TO:this.pathM(r,c);break;case tt.LINE_TO:l=this.pathL(r,c);break;case tt.HORIZ_LINE_TO:l=this.pathH(r,c);break;case tt.VERT_LINE_TO:l=this.pathV(r,c);break;case tt.CURVE_TO:this.pathC(r,c);break;case tt.SMOOTH_CURVE_TO:l=this.pathS(r,c);break;case tt.QUAD_TO:this.pathQ(r,c);break;case tt.SMOOTH_QUAD_TO:l=this.pathT(r,c);break;case tt.ARC:c=this.pathA(r);break;case tt.CLOSE_PATH:ot.pathZ(r)}a.type!==tt.CLOSE_PATH?t.push({type:l,points:c,start:{x:n,y:o},pathLength:this.calcLength(n,o,l,c)}):t.push({type:tt.CLOSE_PATH,points:[],pathLength:0})}return t}},{key:"pathM",value:function(e,t){var r=ot.pathM(e).point,i=r.x,n=r.y;t.push(i,n)}},{key:"pathL",value:function(e,t){var r=ot.pathL(e).point,i=r.x,n=r.y;return t.push(i,n),tt.LINE_TO}},{key:"pathH",value:function(e,t){var r=ot.pathH(e).point,i=r.x,n=r.y;return t.push(i,n),tt.LINE_TO}},{key:"pathV",value:function(e,t){var r=ot.pathV(e).point,i=r.x,n=r.y;return t.push(i,n),tt.LINE_TO}},{key:"pathC",value:function(e,t){var r=ot.pathC(e),i=r.point,n=r.controlPoint,o=r.currentPoint;t.push(i.x,i.y,n.x,n.y,o.x,o.y)}},{key:"pathS",value:function(e,t){var r=ot.pathS(e),i=r.point,n=r.controlPoint,o=r.currentPoint;return t.push(i.x,i.y,n.x,n.y,o.x,o.y),tt.CURVE_TO}},{key:"pathQ",value:function(e,t){var r=ot.pathQ(e),i=r.controlPoint,n=r.currentPoint;t.push(i.x,i.y,n.x,n.y)}},{key:"pathT",value:function(e,t){var r=ot.pathT(e),i=r.controlPoint,n=r.currentPoint;return t.push(i.x,i.y,n.x,n.y),tt.QUAD_TO}},{key:"pathA",value:function(e){var t=ot.pathA(e),r=t.rX,i=t.rY,n=t.sweepFlag,o=t.xAxisRotation,a=t.centp,l=t.a1,c=t.ad;return 0===n&&c>0&&(c-=2*Math.PI),1===n&&c<0&&(c+=2*Math.PI),[a.x,a.y,r,i,l,c,o,n]}},{key:"calcLength",value:function(e,t,r,i){var n=0,o=null,a=null,l=0;switch(r){case tt.LINE_TO:return this.getLineLength(e,t,i[0],i[1]);case tt.CURVE_TO:for(n=0,o=this.getPointOnCubicBezier(0,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=this.getPointOnCubicBezier(l,e,t,i[0],i[1],i[2],i[3],i[4],i[5]),n+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return n;case tt.QUAD_TO:for(n=0,o=this.getPointOnQuadraticBezier(0,e,t,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=this.getPointOnQuadraticBezier(l,e,t,i[0],i[1],i[2],i[3]),n+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return n;case tt.ARC:n=0;var c=i[4],u=i[5],h=i[4]+u,p=Math.PI/180;if(Math.abs(c-h)<p&&(p=Math.abs(c-h)),o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),u<0)for(l=c-p;l>h;l-=p)a=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),n+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+p;l<h;l+=p)a=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),n+=this.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),n+this.getLineLength(o.x,o.y,a.x,a.y)}return 0}},{key:"getPointOnLine",value:function(e,t,r,i,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,l=(n-r)/(i-t+re),c=Math.sqrt(e*e/(1+l*l));i<t&&(c*=-1);var u=l*c,h=null;if(i===t)h={x:o,y:a+u};else if((a-r)/(o-t+re)===l)h={x:o+c,y:a+u};else{var p,d,f=this.getLineLength(t,r,i,n);if(f<re)return null;var m=(o-t)*(i-t)+(a-r)*(n-r);p=t+(m/=f*f)*(i-t),d=r+m*(n-r);var g=this.getLineLength(o,a,p,d),y=Math.sqrt(e*e-g*g);c=Math.sqrt(y*y/(1+l*l)),i<t&&(c*=-1),h={x:p+c,y:d+(u=l*c)}}return h}},{key:"getPointOnPath",value:function(e){var t=this.getPathLength(),r=0,i=null;if(e<-5e-5||e-5e-5>t)return null;var n,o=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(this.dataArray);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(!a||!(a.pathLength<5e-5||r+a.pathLength+5e-5<e)){var l=e-r,c=0;switch(a.type){case tt.LINE_TO:i=this.getPointOnLine(l,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case tt.ARC:var u=a.points[4],h=a.points[5],p=a.points[4]+h;if(c=u+l/a.pathLength*h,h<0&&c<p||h>=0&&c>p)break;i=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],c,a.points[6]);break;case tt.CURVE_TO:(c=l/a.pathLength)>1&&(c=1),i=this.getPointOnCubicBezier(c,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case tt.QUAD_TO:(c=l/a.pathLength)>1&&(c=1),i=this.getPointOnQuadraticBezier(c,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3])}if(i)return i;break}r+=a.pathLength}}catch(e){o.e(e)}finally{o.f()}return null}},{key:"getLineLength",value:function(e,t,r,i){return Math.sqrt((r-e)*(r-e)+(i-t)*(i-t))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce((function(e,t){return t.pathLength>0?e+t.pathLength:e}),0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(e,t,r,i,n,o,a,l,c){return{x:l*ae(e)+o*de(e)+i*fe(e)+t*me(e),y:c*ae(e)+a*de(e)+n*fe(e)+r*me(e)}}},{key:"getPointOnQuadraticBezier",value:function(e,t,r,i,n,o,a){return{x:o*_e(e)+i*be(e)+t*xe(e),y:a*_e(e)+n*be(e)+r*xe(e)}}},{key:"getPointOnEllipticalArc",value:function(e,t,r,i,n,o){var a=Math.cos(o),l=Math.sin(o),c=r*Math.cos(n),u=i*Math.sin(n);return{x:e+(c*a-u*l),y:t+(c*l+u*a)}}},{key:"buildEquidistantCache",value:function(e,t){var r=this.getPathLength(),i=t||.25,n=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==n||this.equidistantCache.precision!==i){this.equidistantCache={step:n,precision:i,points:[]};for(var o=0,a=0;a<=r;a+=i){var l=this.getPointOnPath(a),c=this.getPointOnPath(a+i);l&&c&&(o+=this.getLineLength(l.x,l.y,c.x,c.y))>=n&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:a}),o-=n)}}}},{key:"getEquidistantPointOnPath",value:function(e,t,r){if(this.buildEquidistantCache(t,r),e<0||e-this.getPathLength()>5e-5)return null;var i=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[i]||null}}]),n}(lt);var Ut=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Ht=function(e){P.default(a,e);var t,r,i,n,o=(i=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I.default(i);if(n){var r=I.default(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return O.default(this,e)});function a(e,t,r){var i;M.default(this,a),(i=o.call(this,e,t,r)).type="image",i.loaded=!1;var n=i.getHrefAttribute().getString();if(!n)return O.default(i);var l=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);return e.images.push(D.default(i)),l?i.loadSvg(n):i.loadImage(n),i.isSvg=l,i}return E.default(a,[{key:"loadImage",value:(r=w.default(x.default.mark((function e(t){var r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.document.createImage(t);case 3:r=e.sent,this.image=r,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error('Error while loading image "'.concat(t,'":'),e.t0);case 10:this.loaded=!0;case 11:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return r.apply(this,arguments)})},{key:"loadSvg",value:(t=w.default(x.default.mark((function e(t){var r,i,n,o;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=Ut.exec(t))){e.next=6;break}i=r[5],"base64"===r[4]?this.image=atob(i):this.image=decodeURIComponent(i),e.next=19;break;case 6:return e.prev=6,e.next=9,this.document.fetch(t);case 9:return n=e.sent,e.next=12,n.text();case 12:o=e.sent,this.image=o,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),console.error('Error while loading image "'.concat(t,'":'),e.t0);case 19:this.loaded=!0;case 20:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(e){return t.apply(this,arguments)})},{key:"renderChildren",value:function(e){var t=this.document,r=this.image,i=this.loaded,n=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(i&&r&&a&&l){if(e.save(),e.translate(n,o),this.isSvg){var c=t.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:l});c.document.documentElement.parent=this,c.render()}else{var u=this.image;t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:u.width,height:l,desiredHeight:u.height}),this.loaded&&(void 0===u.complete||u.complete)&&e.drawImage(u,0,0)}e.restore()}}},{key:"getBoundingBox",value:function(){var e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");return new et(e,t,e+r,t+i)}}]),a}(it);var Gt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="symbol",e}return E.default(n,[{key:"render",value:function(e){}}]),n}(it),qt=function(){function e(t){M.default(this,e),this.document=t,this.loaded=!1,t.fonts.push(this)}var t;return E.default(e,[{key:"load",value:(t=w.default(x.default.mark((function e(t,r){var i,n,o;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=this.document,e.next=4,i.canvg.parser.load(r);case 4:n=e.sent,o=n.getElementsByTagName("font"),Array.from(o).forEach((function(e){var r=i.createElement(e);i.definitions[t]=r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error('Error while loading font "'.concat(r,'":'),e.t0);case 12:this.loaded=!0;case 13:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e,r){return t.apply(this,arguments)})}]),e}();var Zt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="style",z(Array.from(t.childNodes).map((function(e){return e.textContent})).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach((function(t){var r=t.trim();if(r){var i=r.split("{"),n=i[0].split(","),o=i[1].split(";");n.forEach((function(t){var r=t.trim();if(r){var i=e.styles[r]||{};if(o.forEach((function(t){var r=t.indexOf(":"),n=t.substr(0,r).trim(),o=t.substr(r+1,t.length-r).trim();n&&o&&(i[n]=new Ce(e,n,o))})),e.styles[r]=i,e.stylesSpecificity[r]=te(r),"@font-face"===r){var n=i["font-family"].getString().replace(/"|'/g,"");i.src.getString().split(",").forEach((function(t){if(t.indexOf('format("svg")')>0){var r=G(t);r&&new qt(e).load(n,r)}}))}}}))}})),o}return n}($e);Zt.parseExternalUrl=G;var $t=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="use",e}return E.default(n,[{key:"setContext",value:function(e){F.default(I.default(n.prototype),"setContext",this).call(this,e);var t=this.getAttribute("x"),r=this.getAttribute("y");t.hasValue()&&e.translate(t.getPixels("x"),0),r.hasValue()&&e.translate(0,r.getPixels("y"))}},{key:"path",value:function(e){var t=this.element;t&&t.path(e)}},{key:"renderChildren",value:function(e){var t=this.document,r=this.element;if(r){var i=r;if("symbol"===r.type&&((i=new ht(t,null)).attributes.viewBox=new Ce(t,"viewBox",r.getAttribute("viewBox").getString()),i.attributes.preserveAspectRatio=new Ce(t,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),i.attributes.overflow=new Ce(t,"overflow",r.getAttribute("overflow").getString()),i.children=r.children,r.styles.opacity=new Ce(t,"opacity",this.calculateOpacity())),"svg"===i.type){var n=this.getStyle("width",!1,!0),o=this.getStyle("height",!1,!0);n.hasValue()&&(i.attributes.width=new Ce(t,"width",n.getString())),o.hasValue()&&(i.attributes.height=new Ce(t,"height",o.getString()))}var a=i.parent;i.parent=this,i.render(e),i.parent=a}}},{key:"getBoundingBox",value:function(e){var t=this.element;return t?t.getBoundingBox(e):null}},{key:"elementTransform",value:function(){var e=this.document,t=this.element;return Ge.fromElement(e,t)}},{key:"element",get:function(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}]),n}(it);function Wt(e,t,r,i,n,o){return e[r*i*4+4*t+o]}function Xt(e,t,r,i,n,o,a){e[r*i*4+4*t+o]=a}function Yt(e,t,r){return e[t]*r}function Kt(e,t,r,i){return t+Math.cos(e)*r+Math.sin(e)*i}var Jt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;M.default(this,n),(o=i.call(this,e,t,r)).type="feColorMatrix";var a=V(o.getAttribute("values").getString());switch(o.getAttribute("type").getString("matrix")){case"saturate":var l=a[0];a=[.213+.787*l,.715-.715*l,.072-.072*l,0,0,.213-.213*l,.715+.285*l,.072-.072*l,0,0,.213-.213*l,.715-.715*l,.072+.928*l,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var c=a[0]*Math.PI/180;a=[Kt(c,.213,.787,-.213),Kt(c,.715,-.715,-.715),Kt(c,.072,-.072,.928),0,0,Kt(c,.213,-.213,.143),Kt(c,.715,.285,.14),Kt(c,.072,-.072,-.283),0,0,Kt(c,.213,-.213,-.787),Kt(c,.715,-.715,.715),Kt(c,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return o.matrix=a,o.includeOpacity=o.getAttribute("includeOpacity").hasValue(),o}return E.default(n,[{key:"apply",value:function(e,t,r,i,n){for(var o=this.includeOpacity,a=this.matrix,l=e.getImageData(0,0,i,n),c=0;c<n;c++)for(var u=0;u<i;u++){var h=Wt(l.data,u,c,i,0,0),p=Wt(l.data,u,c,i,0,1),d=Wt(l.data,u,c,i,0,2),f=Wt(l.data,u,c,i,0,3),m=Yt(a,0,h)+Yt(a,1,p)+Yt(a,2,d)+Yt(a,3,f)+Yt(a,4,1),g=Yt(a,5,h)+Yt(a,6,p)+Yt(a,7,d)+Yt(a,8,f)+Yt(a,9,1),y=Yt(a,10,h)+Yt(a,11,p)+Yt(a,12,d)+Yt(a,13,f)+Yt(a,14,1),v=Yt(a,15,h)+Yt(a,16,p)+Yt(a,17,d)+Yt(a,18,f)+Yt(a,19,1);o&&(m=0,g=0,y=0,v*=f/255),Xt(l.data,u,c,i,0,0,m),Xt(l.data,u,c,i,0,1,g),Xt(l.data,u,c,i,0,2,y),Xt(l.data,u,c,i,0,3,v)}e.clearRect(0,0,i,n),e.putImageData(l,0,0)}}]),n}($e);var Qt=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="mask",e}return E.default(n,[{key:"apply",value:function(e,t){var r=this.document,i=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!a&&!l){var c=new et;this.children.forEach((function(t){c.addBoundingBox(t.getBoundingBox(e))})),i=Math.floor(c.x1),o=Math.floor(c.y1),a=Math.floor(c.width),l=Math.floor(c.height)}var u=this.removeStyles(t,n.ignoreStyles),h=r.createCanvas(i+a,o+l),p=h.getContext("2d");r.screen.setDefaults(p),this.renderChildren(p),new Jt(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(p,0,0,i+a,o+l);var d=r.createCanvas(i+a,o+l),f=d.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=p.createPattern(h,"no-repeat"),f.fillRect(0,0,i+a,o+l),e.fillStyle=f.createPattern(d,"no-repeat"),e.fillRect(0,0,i+a,o+l),this.restoreStyles(t,u)}},{key:"render",value:function(e){}}]),n}($e);Qt.ignoreStyles=["mask","transform","clip-path"];var er=function(){},tr=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="clipPath",e}return E.default(n,[{key:"apply",value:function(e){var t=this.document,r=Reflect.getPrototypeOf(e),i=e.beginPath,n=e.closePath;r&&(r.beginPath=er,r.closePath=er),Reflect.apply(i,e,[]),this.children.forEach((function(i){if(void 0!==i.path){var o=void 0!==i.elementTransform?i.elementTransform():null;o||(o=Ge.fromElement(t,i)),o&&o.apply(e),i.path(e),r&&(r.closePath=n),o&&o.unapply(e)}})),Reflect.apply(n,e,[]),e.clip(),r&&(r.beginPath=i,r.closePath=n)}},{key:"render",value:function(e){}}]),n}($e);var rr=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="filter",e}return E.default(n,[{key:"apply",value:function(e,t){var r=this.document,i=this.children,o=t.getBoundingBox(e);if(o){var a=0,l=0;i.forEach((function(e){var t=e.extraFilterDistance||0;a=Math.max(a,t),l=Math.max(l,t)}));var c=Math.floor(o.width),u=Math.floor(o.height),h=c+2*a,p=u+2*l;if(!(h<1||p<1)){var d=Math.floor(o.x),f=Math.floor(o.y),m=this.removeStyles(t,n.ignoreStyles),g=r.createCanvas(h,p),y=g.getContext("2d");r.screen.setDefaults(y),y.translate(-d+a,-f+l),t.render(y),i.forEach((function(e){"function"==typeof e.apply&&e.apply(y,0,0,h,p)})),e.drawImage(g,0,0,h,p,d-a,f-l,h,p),this.restoreStyles(t,m)}}}},{key:"render",value:function(e){}}]),n}($e);rr.ignoreStyles=["filter","transform","clip-path"];var ir=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="feDropShadow",o.addStylesFromStyleDefinition(),o}return E.default(n,[{key:"apply",value:function(e,t,r,i,n){}}]),n}($e);var nr=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="feMorphology",e}return E.default(n,[{key:"apply",value:function(e,t,r,i,n){}}]),n}($e);var or=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="feComposite",e}return E.default(n,[{key:"apply",value:function(e,t,r,i,n){}}]),n}($e);var sr=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(e,t,r){var o;return M.default(this,n),(o=i.call(this,e,t,r)).type="feGaussianBlur",o.blurRadius=Math.floor(o.getAttribute("stdDeviation").getNumber()),o.extraFilterDistance=o.blurRadius,o}return E.default(n,[{key:"apply",value:function(e,t,r,i,n){var o=this.document,a=this.blurRadius,l=o.window?o.window.document.body:null,c=e.canvas;c.id=o.getUniqueId(),l&&(c.style.display="none",l.appendChild(c)),_.canvasRGBA(c,t,r,i,n,a),l&&l.removeChild(c)}}]),n}($e);var ar=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="title",e}return n}($e);var lr=function(e){P.default(n,e);var t,r,i=(t=n,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=I.default(t);if(r){var n=I.default(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return O.default(this,e)});function n(){var e;return M.default(this,n),(e=i.apply(this,arguments)).type="desc",e}return n}($e),cr={svg:ht,rect:pt,circle:dt,ellipse:ft,line:mt,polyline:gt,polygon:yt,path:ot,pattern:vt,marker:_t,defs:St,linearGradient:Et,radialGradient:Tt,stop:At,animate:Pt,animateColor:Ot,animateTransform:It,font:kt,"font-face":Ft,"missing-glyph":Dt,glyph:at,text:lt,tspan:ct,tref:jt,a:zt,textPath:Vt,image:Ht,g:Ct,symbol:Gt,style:Zt,use:$t,mask:Qt,clipPath:tr,filter:rr,feDropShadow:ir,feMorphology:nr,feComposite:or,feColorMatrix:Jt,feGaussianBlur:sr,title:ar,desc:lr};function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function hr(){return hr=w.default(x.default.mark((function e(t){var r,i,n=arguments;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]&&n[1],i=document.createElement("img"),r&&(i.crossOrigin="Anonymous"),e.abrupt("return",new Promise((function(e,r){i.onload=function(){e(i)},i.onerror=function(e,t,i,n,o){r(o)},i.src=t})));case 4:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}var pr=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.rootEmSize,n=void 0===i?12:i,o=r.emSize,a=void 0===o?12:o,l=r.createCanvas,c=void 0===l?e.createCanvas:l,u=r.createImage,h=void 0===u?e.createImage:u,p=r.anonymousCrossOrigin;M.default(this,e),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=n,this.emSize=a,this.createCanvas=c,this.createImage=this.bindCreateImage(h,p),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}return E.default(e,[{key:"bindCreateImage",value:function(e,t){return"boolean"==typeof t?function(r,i){return e(r,"boolean"==typeof i?i:t)}:e}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every((function(e){return e.loaded}))}},{key:"isFontsLoaded",value:function(){return this.fonts.every((function(e){return e.loaded}))}},{key:"createDocumentElement",value:function(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}},{key:"createElement",value:function(t){var r=t.nodeName.replace(/^[^:]+:/,""),i=e.elementTypes[r];return void 0!==i?new i(this,t):new We(this,t)}},{key:"createTextNode",value:function(e){return new ut(this,e)}},{key:"setViewBox",value:function(e){this.screen.setViewBox(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){C.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({document:this},e))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var e=this.emSizeStack;return e[e.length-1]},set:function(e){this.emSizeStack.push(e)}}]),e}();function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){C.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}pr.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},pr.createImage=function(e){return hr.apply(this,arguments)},pr.elementTypes=cr;var mr=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};M.default(this,e),this.parser=new De(i),this.screen=new Le(t,i),this.options=i;var n=new pr(this,i),o=n.createDocumentElement(r);this.document=n,this.documentElement=o}var t,r;return E.default(e,[{key:"fork",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.from(t,r,fr(fr({},this.options),i))}},{key:"forkString",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.fromString(t,r,fr(fr({},this.options),i))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(r=w.default(x.default.mark((function e(){var t,r=arguments;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},this.start(fr({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},t)),e.next=4,this.ready();case 4:this.stop();case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.documentElement,r=this.screen,i=this.options;r.start(t,fr(fr({enableRedraw:!0},i),e))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(e,t,r)}}],[{key:"from",value:(t=w.default(x.default.mark((function t(r,i){var n,o,a,l=arguments;return x.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new De(n=l.length>2&&void 0!==l[2]?l[2]:{}),t.next=4,o.parse(i);case 4:return a=t.sent,t.abrupt("return",new e(r,a,n));case 6:case"end":return t.stop()}}),t)}))),function(e,r){return t.apply(this,arguments)})},{key:"fromString",value:function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new e(t,new De(i).parseFromString(r),i)}}]),e}();t.AElement=zt,t.AnimateColorElement=Ot,t.AnimateElement=Pt,t.AnimateTransformElement=It,t.BoundingBox=et,t.CB1=ae,t.CB2=de,t.CB3=fe,t.CB4=me,t.Canvg=mr,t.CircleElement=dt,t.ClipPathElement=tr,t.DefsElement=St,t.DescElement=lr,t.Document=pr,t.Element=$e,t.EllipseElement=ft,t.FeColorMatrixElement=Jt,t.FeCompositeElement=or,t.FeDropShadowElement=ir,t.FeGaussianBlurElement=sr,t.FeMorphologyElement=nr,t.FilterElement=rr,t.Font=Qe,t.FontElement=kt,t.FontFaceElement=Ft,t.GElement=Ct,t.GlyphElement=at,t.GradientElement=Mt,t.ImageElement=Ht,t.LineElement=mt,t.LinearGradientElement=Et,t.MarkerElement=_t,t.MaskElement=Qt,t.Matrix=Be,t.MissingGlyphElement=Dt,t.Mouse=Te,t.PSEUDO_ZERO=re,t.Parser=De,t.PathElement=ot,t.PathParser=tt,t.PatternElement=vt,t.Point=Ee,t.PolygonElement=yt,t.PolylineElement=gt,t.Property=Ce,t.QB1=_e,t.QB2=be,t.QB3=xe,t.RadialGradientElement=Tt,t.RectElement=pt,t.RenderedElement=it,t.Rotate=Re,t.SVGElement=ht,t.SVGFontLoader=qt,t.Scale=Ne,t.Screen=Le,t.Skew=Ve,t.SkewX=Ue,t.SkewY=He,t.StopElement=At,t.StyleElement=Zt,t.SymbolElement=Gt,t.TRefElement=jt,t.TSpanElement=ct,t.TextElement=lt,t.TextPathElement=Vt,t.TitleElement=ar,t.Transform=Ge,t.Translate=ze,t.UnknownElement=We,t.UseElement=$t,t.ViewPort=Me,t.compressSpaces=z,t.default=mr,t.getSelectorSpecificity=te,t.normalizeAttributeName=H,t.normalizeColor=q,t.parseExternalUrl=G,t.presets=j,t.toNumbers=V,t.trimLeft=N,t.trimRight=B,t.vectorMagnitude=ie,t.vectorsAngle=se,t.vectorsRatio=ne}).call(this,r(106))},function(e,t,r){e.exports=r(22)(2810)},function(e,t,r){e.exports=r(22)(2815)},function(e,t,r){e.exports=r(22)(2831)},function(e,t,r){e.exports=r(22)(330)},function(e,t,r){e.exports=r(22)(468)},function(e,t,r){e.exports=r(22)(2709)},function(e,t,r){e.exports=r(22)(2813)},function(e,t,r){e.exports=r(22)(1159)},function(e,t,r){e.exports=r(22)(2856)},function(e,t,r){e.exports=r(22)(2862)},function(e,t,r){e.exports=r(22)(2866)},function(e,t,r){e.exports=r(22)(2707)},function(e,t,r){e.exports=r(22)(11)},function(e,t,r){e.exports=r(22)(17)},function(e,t,r){e.exports=r(22)(18)},function(e,t,r){e.exports=r(22)(2690)},function(e,t,r){e.exports=r(22)(2692)},function(e,t,r){e.exports=r(22)(2712)},function(e,t,r){e.exports=r(22)(2852)},function(e,t,r){e.exports=r(22)(2865)},function(e,t,r){(function(t){for(var i=r(430),n="undefined"==typeof window?t:window,o=["moz","webkit"],a="AnimationFrame",l=n["request"+a],c=n["cancel"+a]||n["cancelRequest"+a],u=0;!l&&u<o.length;u++)l=n[o[u]+"Request"+a],c=n[o[u]+"Cancel"+a]||n[o[u]+"CancelRequest"+a];if(!l||!c){var h=0,p=0,d=[];l=function(e){if(0===d.length){var t=i(),r=Math.max(0,16.666666666666668-(t-h));h=r+t,setTimeout((function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(h)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(r))}return d.push({handle:++p,callback:e,cancelled:!1}),p},c=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return l.call(n,e)},e.exports.cancel=function(){c.apply(n,arguments)},e.exports.polyfill=function(e){e||(e=n),e.requestAnimationFrame=l,e.cancelAnimationFrame=c}}).call(this,r(101))},function(e,t,r){(function(t){(function(){var r,i,n,o,a,l;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=t&&t.hrtime?(e.exports=function(){return(r()-a)/1e6},i=t.hrtime,o=(r=function(){var e;return 1e9*(e=i())[0]+e[1]})(),l=1e9*t.uptime(),a=o-l):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,r(106))},function(e,t,r){e.exports=r(22)(2747)},function(e,t,r){e.exports=r(22)(2869)},function(e,t){e.exports=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=t[e]||e;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],i=0;i<r.length;i++){var n=r[i].re,o=r[i].process,a=n.exec(e);if(a){var l=o(a);this.r=l[0],this.g=l[1],this.b=l[2],l.length>3&&(this.alpha=l[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r},this.getHelpXML=function(){for(var e=new Array,i=0;i<r.length;i++)for(var n=r[i].example,o=0;o<n.length;o++)e[e.length]=n[o];for(var a in t)e[e.length]=a;var l=document.createElement("ul");for(l.setAttribute("id","rgbcolor-examples"),i=0;i<e.length;i++)try{var c=document.createElement("li"),u=new RGBColor(e[i]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),h.appendChild(document.createTextNode("test"));var p=document.createTextNode(" "+e[i]+" -> "+u.toRGB()+" -> "+u.toHex());c.appendChild(h),c.appendChild(p),l.appendChild(c)}catch(e){}return l}}},function(e,t,r){e.exports=r(22)(2701)},function(e,t,r){e.exports=r(22)(2936)},function(e,t,r){e.exports=r(22)(20)},function(e,t,r){e.exports=r(22)(21)},function(e,t,r){e.exports=r(22)(12)},function(e,t,r){e.exports=r(22)(2702)},function(e,t,r){e.exports=r(22)(2704)},function(e,t,r){e.exports=r(22)(2716)},function(e,t,r){e.exports=r(22)(2854)},function(e,t,r){e.exports=r(22)(1461)},function(e,t,r){e.exports=r(22)(27)},function(e,t,r){e.exports=r(22)(2705)},function(e,t,r){e.exports=r(22)(2714)},function(e,t,r){e.exports=r(22)(722)},function(e,t,r){e.exports=r(22)(2771)},function(e,t,r){e.exports=r(22)(2693)},function(e,t,r){!function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var i=" ";function n(e){var t="";Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var n=e[r];if(n.type===x.CLOSE_PATH)t+="z";else if(n.type===x.HORIZ_LINE_TO)t+=(n.relative?"h":"H")+n.x;else if(n.type===x.VERT_LINE_TO)t+=(n.relative?"v":"V")+n.y;else if(n.type===x.MOVE_TO)t+=(n.relative?"m":"M")+n.x+i+n.y;else if(n.type===x.LINE_TO)t+=(n.relative?"l":"L")+n.x+i+n.y;else if(n.type===x.CURVE_TO)t+=(n.relative?"c":"C")+n.x1+i+n.y1+i+n.x2+i+n.y2+i+n.x+i+n.y;else if(n.type===x.SMOOTH_CURVE_TO)t+=(n.relative?"s":"S")+n.x2+i+n.y2+i+n.x+i+n.y;else if(n.type===x.QUAD_TO)t+=(n.relative?"q":"Q")+n.x1+i+n.y1+i+n.x+i+n.y;else if(n.type===x.SMOOTH_QUAD_TO)t+=(n.relative?"t":"T")+n.x+i+n.y;else{if(n.type!==x.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+r+".");t+=(n.relative?"a":"A")+n.rX+i+n.rY+i+n.xRot+i+ +n.lArcFlag+i+ +n.sweepFlag+i+n.x+i+n.y}}return t}function o(e,t){var r=e[0],i=e[1];return[r*Math.cos(t)-i*Math.sin(t),r*Math.sin(t)+i*Math.cos(t)]}function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof e[r]+" == typeof "+e[r]);return!0}var l=Math.PI;function c(e,t,r){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var i=e.rX,n=e.rY,a=e.x,c=e.y;i=Math.abs(e.rX),n=Math.abs(e.rY);var u=o([(t-a)/2,(r-c)/2],-e.xRot/180*l),h=u[0],p=u[1],d=Math.pow(h,2)/Math.pow(i,2)+Math.pow(p,2)/Math.pow(n,2);1<d&&(i*=Math.sqrt(d),n*=Math.sqrt(d)),e.rX=i,e.rY=n;var f=Math.pow(i,2)*Math.pow(p,2)+Math.pow(n,2)*Math.pow(h,2),m=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-f)/f)),g=i*p/n*m,y=-n*h/i*m,v=o([g,y],e.xRot/180*l);e.cX=v[0]+(t+a)/2,e.cY=v[1]+(r+c)/2,e.phi1=Math.atan2((p-y)/n,(h-g)/i),e.phi2=Math.atan2((-p-y)/n,(-h-g)/i),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*l),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*l),e.phi1*=180/l,e.phi2*=180/l}function u(e,t,r){a(e,t,r);var i=e*e+t*t-r*r;if(0>i)return[];if(0===i)return[[e*r/(e*e+t*t),t*r/(e*e+t*t)]];var n=Math.sqrt(i);return[[(e*r+t*n)/(e*e+t*t),(t*r-e*n)/(e*e+t*t)],[(e*r-t*n)/(e*e+t*t),(t*r+e*n)/(e*e+t*t)]]}var h=Math.PI/180;function p(e,t,r){return(1-r)*e+r*t}function d(e,t,r,i){return e+Math.cos(i/180*l)*t+Math.sin(i/180*l)*r}function f(e,t,r,i){var n=1e-6,o=t-e,a=r-t,l=3*o+3*(i-r)-6*a,c=6*(a-o),u=3*o;return Math.abs(l)<n?[-u/c]:function(e,t,r){void 0===r&&(r=1e-6);var i=e*e/4-t;if(i<-r)return[];if(i<=r)return[-e/2];var n=Math.sqrt(i);return[-e/2-n,-e/2+n]}(c/l,u/l,n)}function m(e,t,r,i,n){var o=1-n;return e*(o*o*o)+t*(3*o*o*n)+r*(3*o*n*n)+i*(n*n*n)}e.SVGPathDataTransformer=void 0,function(e){function t(){return n((function(e,t,r){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=r),e.relative=!1),e}))}function r(){var e=NaN,t=NaN,r=NaN,i=NaN;return n((function(n,o,a){return n.type&x.SMOOTH_CURVE_TO&&(n.type=x.CURVE_TO,e=isNaN(e)?o:e,t=isNaN(t)?a:t,n.x1=n.relative?o-e:2*o-e,n.y1=n.relative?a-t:2*a-t),n.type&x.CURVE_TO?(e=n.relative?o+n.x2:n.x2,t=n.relative?a+n.y2:n.y2):(e=NaN,t=NaN),n.type&x.SMOOTH_QUAD_TO&&(n.type=x.QUAD_TO,r=isNaN(r)?o:r,i=isNaN(i)?a:i,n.x1=n.relative?o-r:2*o-r,n.y1=n.relative?a-i:2*a-i),n.type&x.QUAD_TO?(r=n.relative?o+n.x1:n.x1,i=n.relative?a+n.y1:n.y1):(r=NaN,i=NaN),n}))}function i(){var e=NaN,t=NaN;return n((function(r,i,n){if(r.type&x.SMOOTH_QUAD_TO&&(r.type=x.QUAD_TO,e=isNaN(e)?i:e,t=isNaN(t)?n:t,r.x1=r.relative?i-e:2*i-e,r.y1=r.relative?n-t:2*n-t),r.type&x.QUAD_TO){e=r.relative?i+r.x1:r.x1,t=r.relative?n+r.y1:r.y1;var o=r.x1,a=r.y1;r.type=x.CURVE_TO,r.x1=((r.relative?0:i)+2*o)/3,r.y1=((r.relative?0:n)+2*a)/3,r.x2=(r.x+2*o)/3,r.y2=(r.y+2*a)/3}else e=NaN,t=NaN;return r}))}function n(e){var t=0,r=0,i=NaN,n=NaN;return function(o){if(isNaN(i)&&!(o.type&x.MOVE_TO))throw new Error("path must start with moveto");var a=e(o,t,r,i,n);return o.type&x.CLOSE_PATH&&(t=i,r=n),void 0!==o.x&&(t=o.relative?t+o.x:o.x),void 0!==o.y&&(r=o.relative?r+o.y:o.y),o.type&x.MOVE_TO&&(i=t,n=r),a}}function l(e,t,r,i,o,l){return a(e,t,r,i,o,l),n((function(n,a,c,u){var h=n.x1,p=n.x2,d=n.relative&&!isNaN(u),f=void 0!==n.x?n.x:d?0:a,m=void 0!==n.y?n.y:d?0:c;function g(e){return e*e}n.type&x.HORIZ_LINE_TO&&0!==t&&(n.type=x.LINE_TO,n.y=n.relative?0:c),n.type&x.VERT_LINE_TO&&0!==r&&(n.type=x.LINE_TO,n.x=n.relative?0:a),void 0!==n.x&&(n.x=n.x*e+m*r+(d?0:o)),void 0!==n.y&&(n.y=f*t+n.y*i+(d?0:l)),void 0!==n.x1&&(n.x1=n.x1*e+n.y1*r+(d?0:o)),void 0!==n.y1&&(n.y1=h*t+n.y1*i+(d?0:l)),void 0!==n.x2&&(n.x2=n.x2*e+n.y2*r+(d?0:o)),void 0!==n.y2&&(n.y2=p*t+n.y2*i+(d?0:l));var y=e*i-t*r;if(void 0!==n.xRot&&(1!==e||0!==t||0!==r||1!==i))if(0===y)delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag,n.type=x.LINE_TO;else{var v=n.xRot*Math.PI/180,_=Math.sin(v),b=Math.cos(v),w=1/g(n.rX),S=1/g(n.rY),C=g(b)*w+g(_)*S,M=2*_*b*(w-S),E=g(_)*w+g(b)*S,T=C*i*i-M*t*i+E*t*t,A=M*(e*i+t*r)-2*(C*r*i+E*e*t),P=C*r*r-M*e*r+E*e*e,O=(Math.atan2(A,T-P)+Math.PI)%Math.PI/2,I=Math.sin(O),k=Math.cos(O);n.rX=Math.abs(y)/Math.sqrt(T*g(k)+A*I*k+P*g(I)),n.rY=Math.abs(y)/Math.sqrt(T*g(I)-A*I*k+P*g(k)),n.xRot=180*O/Math.PI}return void 0!==n.sweepFlag&&0>y&&(n.sweepFlag=+!n.sweepFlag),n}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),a(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return n((function(e,t,r){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=r),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),n((function(i,n,o,a,l){if(isNaN(a)&&!(i.type&x.MOVE_TO))throw new Error("path must start with moveto");return t&&i.type&x.HORIZ_LINE_TO&&(i.type=x.LINE_TO,i.y=i.relative?0:o),r&&i.type&x.VERT_LINE_TO&&(i.type=x.LINE_TO,i.x=i.relative?0:n),e&&i.type&x.CLOSE_PATH&&(i.type=x.LINE_TO,i.x=i.relative?a-n:a,i.y=i.relative?l-o:l),i.type&x.ARC&&(0===i.rX||0===i.rY)&&(i.type=x.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},e.NORMALIZE_ST=r,e.QT_TO_C=i,e.INFO=n,e.SANITIZE=function(e){void 0===e&&(e=0),a(e);var t=NaN,r=NaN,i=NaN,o=NaN;return n((function(n,a,l,c,u){var h=Math.abs,p=!1,d=0,f=0;if(n.type&x.SMOOTH_CURVE_TO&&(d=isNaN(t)?0:a-t,f=isNaN(r)?0:l-r),n.type&(x.CURVE_TO|x.SMOOTH_CURVE_TO)?(t=n.relative?a+n.x2:n.x2,r=n.relative?l+n.y2:n.y2):(t=NaN,r=NaN),n.type&x.SMOOTH_QUAD_TO?(i=isNaN(i)?a:2*a-i,o=isNaN(o)?l:2*l-o):n.type&x.QUAD_TO?(i=n.relative?a+n.x1:n.x1,o=n.relative?l+n.y1:n.y2):(i=NaN,o=NaN),n.type&x.LINE_COMMANDS||n.type&x.ARC&&(0===n.rX||0===n.rY||!n.lArcFlag)||n.type&x.CURVE_TO||n.type&x.SMOOTH_CURVE_TO||n.type&x.QUAD_TO||n.type&x.SMOOTH_QUAD_TO){var m=void 0===n.x?0:n.relative?n.x:n.x-a,g=void 0===n.y?0:n.relative?n.y:n.y-l;d=isNaN(i)?void 0===n.x1?d:n.relative?n.x:n.x1-a:i-a,f=isNaN(o)?void 0===n.y1?f:n.relative?n.y:n.y1-l:o-l;var y=void 0===n.x2?0:n.relative?n.x:n.x2-a,v=void 0===n.y2?0:n.relative?n.y:n.y2-l;h(m)<=e&&h(g)<=e&&h(d)<=e&&h(f)<=e&&h(y)<=e&&h(v)<=e&&(p=!0)}return n.type&x.CLOSE_PATH&&h(a-c)<=e&&h(l-u)<=e&&(p=!0),p?[]:n}))},e.MATRIX=l,e.ROTATE=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),a(e,t,r);var i=Math.sin(e),n=Math.cos(e);return l(n,i,-i,n,t-t*n+r*i,r-t*i-r*n)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),a(e,t),l(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),a(e,t),l(e,0,0,t,0,0)},e.SKEW_X=function(e){return a(e),l(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return a(e),l(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),a(e),l(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),a(e),l(1,0,0,-1,0,e)},e.A_TO_C=function(){return n((function(e,t,r){return x.ARC===e.type?function(e,t,r){var i,n,a,l;e.cX||c(e,t,r);for(var u=Math.min(e.phi1,e.phi2),d=Math.max(e.phi1,e.phi2)-u,f=Math.ceil(d/90),m=new Array(f),g=t,y=r,v=0;v<f;v++){var _=p(e.phi1,e.phi2,v/f),b=p(e.phi1,e.phi2,(v+1)/f),w=b-_,S=4/3*Math.tan(w*h/4),C=[Math.cos(_*h)-S*Math.sin(_*h),Math.sin(_*h)+S*Math.cos(_*h)],M=C[0],E=C[1],T=[Math.cos(b*h),Math.sin(b*h)],A=T[0],P=T[1],O=[A+S*Math.sin(b*h),P-S*Math.cos(b*h)],I=O[0],k=O[1];m[v]={relative:e.relative,type:x.CURVE_TO};var F=function(t,r){var i=o([t*e.rX,r*e.rY],e.xRot),n=i[0],a=i[1];return[e.cX+n,e.cY+a]};i=F(M,E),m[v].x1=i[0],m[v].y1=i[1],n=F(I,k),m[v].x2=n[0],m[v].y2=n[1],a=F(A,P),m[v].x=a[0],m[v].y=a[1],e.relative&&(m[v].x1-=g,m[v].y1-=y,m[v].x2-=g,m[v].y2-=y,m[v].x-=g,m[v].y-=y),g=(l=[m[v].x,m[v].y])[0],y=l[1]}return m}(e,e.relative?0:t,e.relative?0:r):e}))},e.ANNOTATE_ARCS=function(){return n((function(e,t,r){return e.relative&&(t=0,r=0),x.ARC===e.type&&c(e,t,r),e}))},e.CLONE=function(){return function(e){var t={};for(var r in e)t[r]=e[r];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),o=i(),a=r(),l=n((function(t,r,i){var n=a(o(e(function(e){var t={};for(var r in e)t[r]=e[r];return t}(t))));function h(e){e>l.maxX&&(l.maxX=e),e<l.minX&&(l.minX=e)}function p(e){e>l.maxY&&(l.maxY=e),e<l.minY&&(l.minY=e)}if(n.type&x.DRAWING_COMMANDS&&(h(r),p(i)),n.type&x.HORIZ_LINE_TO&&h(n.x),n.type&x.VERT_LINE_TO&&p(n.y),n.type&x.LINE_TO&&(h(n.x),p(n.y)),n.type&x.CURVE_TO){h(n.x),p(n.y);for(var g=0,y=f(r,n.x1,n.x2,n.x);g<y.length;g++)0<(D=y[g])&&1>D&&h(m(r,n.x1,n.x2,n.x,D));for(var v=0,_=f(i,n.y1,n.y2,n.y);v<_.length;v++)0<(D=_[v])&&1>D&&p(m(i,n.y1,n.y2,n.y,D))}if(n.type&x.ARC){h(n.x),p(n.y),c(n,r,i);for(var b=n.xRot/180*Math.PI,w=Math.cos(b)*n.rX,S=Math.sin(b)*n.rX,C=-Math.sin(b)*n.rY,M=Math.cos(b)*n.rY,E=n.phi1<n.phi2?[n.phi1,n.phi2]:-180>n.phi2?[n.phi2+360,n.phi1+360]:[n.phi2,n.phi1],T=E[0],A=E[1],P=function(e){var t=e[0],r=e[1],i=180*Math.atan2(r,t)/Math.PI;return i<T?i+360:i},O=0,I=u(C,-w,0).map(P);O<I.length;O++)(D=I[O])>T&&D<A&&h(d(n.cX,w,C,D));for(var k=0,F=u(M,-S,0).map(P);k<F.length;k++){var D;(D=F[k])>T&&D<A&&p(d(n.cY,S,M,D))}}return t}));return l.minX=1/0,l.maxX=-1/0,l.minY=1/0,l.maxY=-1/0,l}}(e.SVGPathDataTransformer||(e.SVGPathDataTransformer={}));var g,y=function(){function t(){}return t.prototype.round=function(t){return this.transform(e.SVGPathDataTransformer.ROUND(t))},t.prototype.toAbs=function(){return this.transform(e.SVGPathDataTransformer.TO_ABS())},t.prototype.toRel=function(){return this.transform(e.SVGPathDataTransformer.TO_REL())},t.prototype.normalizeHVZ=function(t,r,i){return this.transform(e.SVGPathDataTransformer.NORMALIZE_HVZ(t,r,i))},t.prototype.normalizeST=function(){return this.transform(e.SVGPathDataTransformer.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(e.SVGPathDataTransformer.QT_TO_C())},t.prototype.aToC=function(){return this.transform(e.SVGPathDataTransformer.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(e.SVGPathDataTransformer.SANITIZE(t))},t.prototype.translate=function(t,r){return this.transform(e.SVGPathDataTransformer.TRANSLATE(t,r))},t.prototype.scale=function(t,r){return this.transform(e.SVGPathDataTransformer.SCALE(t,r))},t.prototype.rotate=function(t,r,i){return this.transform(e.SVGPathDataTransformer.ROTATE(t,r,i))},t.prototype.matrix=function(t,r,i,n,o,a){return this.transform(e.SVGPathDataTransformer.MATRIX(t,r,i,n,o,a))},t.prototype.skewX=function(t){return this.transform(e.SVGPathDataTransformer.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(e.SVGPathDataTransformer.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(e.SVGPathDataTransformer.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(e.SVGPathDataTransformer.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(e.SVGPathDataTransformer.ANNOTATE_ARCS())},t}(),v=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},_=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},b=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return r(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var r=this;void 0===t&&(t=[]);for(var i=function(e){t.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},n=0;n<e.length;n++){var o=e[n],a=!(this.curCommandType!==x.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),l=_(o)&&("0"===this.curNumber&&"0"===o||a);if(!_(o)||l)if("e"!==o&&"E"!==o)if("-"!==o&&"+"!==o||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==o||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var c=Number(this.curNumber);if(isNaN(c))throw new SyntaxError("Invalid number ending at "+n);if(this.curCommandType===x.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>c)throw new SyntaxError('Expected positive number, got "'+c+'" at index "'+n+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+n+'"');this.curArgs.push(c),this.curArgs.length===w[this.curCommandType]&&(x.HORIZ_LINE_TO===this.curCommandType?i({type:x.HORIZ_LINE_TO,relative:this.curCommandRelative,x:c}):x.VERT_LINE_TO===this.curCommandType?i({type:x.VERT_LINE_TO,relative:this.curCommandRelative,y:c}):this.curCommandType===x.MOVE_TO||this.curCommandType===x.LINE_TO||this.curCommandType===x.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),x.MOVE_TO===this.curCommandType&&(this.curCommandType=x.LINE_TO)):this.curCommandType===x.CURVE_TO?i({type:x.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===x.SMOOTH_CURVE_TO?i({type:x.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===x.QUAD_TO?i({type:x.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===x.ARC&&i({type:x.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!v(o))if(","===o&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==o&&"-"!==o&&"."!==o)if(l)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+n+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+n+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==o&&"Z"!==o)if("h"===o||"H"===o)this.curCommandType=x.HORIZ_LINE_TO,this.curCommandRelative="h"===o;else if("v"===o||"V"===o)this.curCommandType=x.VERT_LINE_TO,this.curCommandRelative="v"===o;else if("m"===o||"M"===o)this.curCommandType=x.MOVE_TO,this.curCommandRelative="m"===o;else if("l"===o||"L"===o)this.curCommandType=x.LINE_TO,this.curCommandRelative="l"===o;else if("c"===o||"C"===o)this.curCommandType=x.CURVE_TO,this.curCommandRelative="c"===o;else if("s"===o||"S"===o)this.curCommandType=x.SMOOTH_CURVE_TO,this.curCommandRelative="s"===o;else if("q"===o||"Q"===o)this.curCommandType=x.QUAD_TO,this.curCommandRelative="q"===o;else if("t"===o||"T"===o)this.curCommandType=x.SMOOTH_QUAD_TO,this.curCommandRelative="t"===o;else{if("a"!==o&&"A"!==o)throw new SyntaxError('Unexpected character "'+o+'" at index '+n+".");this.curCommandType=x.ARC,this.curCommandRelative="a"===o}else t.push({type:x.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal="."===o}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,r){void 0===r&&(r=[]);for(var i=0,n=Object.getPrototypeOf(this).parse.call(this,t);i<n.length;i++){var o=n[i],a=e(o);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return r}}})},t}(y),x=function(t){function i(e){var r=t.call(this)||this;return r.commands="string"==typeof e?i.parse(e):e,r}return r(i,t),i.prototype.encode=function(){return i.encode(this.commands)},i.prototype.getBounds=function(){var t=e.SVGPathDataTransformer.CALCULATE_BOUNDS();return this.transform(t),t},i.prototype.transform=function(e){for(var t=[],r=0,i=this.commands;r<i.length;r++){var n=e(i[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return this.commands=t,this},i.encode=function(e){return n(e)},i.parse=function(e){var t=new b,r=[];return t.parse(e,r),t.finish(r),r},i.CLOSE_PATH=1,i.MOVE_TO=2,i.HORIZ_LINE_TO=4,i.VERT_LINE_TO=8,i.LINE_TO=16,i.CURVE_TO=32,i.SMOOTH_CURVE_TO=64,i.QUAD_TO=128,i.SMOOTH_QUAD_TO=256,i.ARC=512,i.LINE_COMMANDS=i.LINE_TO|i.HORIZ_LINE_TO|i.VERT_LINE_TO,i.DRAWING_COMMANDS=i.HORIZ_LINE_TO|i.VERT_LINE_TO|i.LINE_TO|i.CURVE_TO|i.SMOOTH_CURVE_TO|i.QUAD_TO|i.SMOOTH_QUAD_TO|i.ARC,i}(y),w=((g={})[x.MOVE_TO]=2,g[x.LINE_TO]=2,g[x.HORIZ_LINE_TO]=1,g[x.VERT_LINE_TO]=1,g[x.CLOSE_PATH]=0,g[x.QUAD_TO]=4,g[x.SMOOTH_QUAD_TO]=2,g[x.CURVE_TO]=6,g[x.SMOOTH_CURVE_TO]=4,g[x.ARC]=7,g);e.COMMAND_ARG_COUNTS=w,e.SVGPathData=x,e.SVGPathDataParser=b,e.encodeSVGPath=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){e.exports=r(22)(2847)},function(e,t,r){e.exports=r(22)(5)},function(e,t,r){e.exports=r(22)(758)},function(e,t,r){e.exports=r(22)(2937)},function(e,t,r){e.exports=r(22)(2750)},function(e,t,r){e.exports=r(22)(2828)},function(e,t,r){e.exports=r(22)(2834)},function(e,t,r){!function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function n(e,r,i,n,o){if("string"==typeof e&&(e=document.getElementById(e)),!e||"object"!==t(e)||!("getContext"in e))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=e.getContext("2d");try{return a.getImageData(r,i,n,o)}catch(e){throw new Error("unable to access image data: "+e)}}function o(e,t,r,i,o,l){if(!(isNaN(l)||l<1)){l|=0;var c=n(e,t,r,i,o);c=a(c,0,0,i,o,l),e.getContext("2d").putImageData(c,t,r)}}function a(e,t,n,o,a,l){for(var c,h=e.data,p=2*l+1,d=o-1,f=a-1,m=l+1,g=m*(m+1)/2,y=new u,v=y,_=1;_<p;_++)v=v.next=new u,_===m&&(c=v);v.next=y;for(var b=null,x=null,w=0,S=0,C=r[l],M=i[l],E=0;E<a;E++){v=y;for(var T=h[S],A=h[S+1],P=h[S+2],O=h[S+3],I=0;I<m;I++)v.r=T,v.g=A,v.b=P,v.a=O,v=v.next;for(var k=0,F=0,D=0,j=0,z=m*T,N=m*A,B=m*P,V=m*O,U=g*T,H=g*A,G=g*P,q=g*O,Z=1;Z<m;Z++){var $=S+((d<Z?d:Z)<<2),W=h[$],X=h[$+1],Y=h[$+2],K=h[$+3],J=m-Z;U+=(v.r=W)*J,H+=(v.g=X)*J,G+=(v.b=Y)*J,q+=(v.a=K)*J,k+=W,F+=X,D+=Y,j+=K,v=v.next}b=y,x=c;for(var ee=0;ee<o;ee++){var te=q*C>>M;if(h[S+3]=te,0!==te){var re=255/te;h[S]=(U*C>>M)*re,h[S+1]=(H*C>>M)*re,h[S+2]=(G*C>>M)*re}else h[S]=h[S+1]=h[S+2]=0;U-=z,H-=N,G-=B,q-=V,z-=b.r,N-=b.g,B-=b.b,V-=b.a;var ie=ee+l+1;ie=w+(ie<d?ie:d)<<2,U+=k+=b.r=h[ie],H+=F+=b.g=h[ie+1],G+=D+=b.b=h[ie+2],q+=j+=b.a=h[ie+3],b=b.next;var ne=x,se=ne.r,ae=ne.g,de=ne.b,fe=ne.a;z+=se,N+=ae,B+=de,V+=fe,k-=se,F-=ae,D-=de,j-=fe,x=x.next,S+=4}w+=o}for(var me=0;me<o;me++){var _e=h[S=me<<2],be=h[S+1],xe=h[S+2],Ce=h[S+3],Me=m*_e,Ee=m*be,Te=m*xe,Pe=m*Ce,Oe=g*_e,Le=g*be,ke=g*xe,Fe=g*Ce;v=y;for(var De=0;De<m;De++)v.r=_e,v.g=be,v.b=xe,v.a=Ce,v=v.next;for(var ze=o,Re=0,Ne=0,Be=0,Ve=0,Ue=1;Ue<=l;Ue++){S=ze+me<<2;var He=m-Ue;Oe+=(v.r=_e=h[S])*He,Le+=(v.g=be=h[S+1])*He,ke+=(v.b=xe=h[S+2])*He,Fe+=(v.a=Ce=h[S+3])*He,Ve+=_e,Re+=be,Ne+=xe,Be+=Ce,v=v.next,Ue<f&&(ze+=o)}S=me,b=y,x=c;for(var Ge=0;Ge<a;Ge++){var $e=S<<2;h[$e+3]=Ce=Fe*C>>M,Ce>0?(Ce=255/Ce,h[$e]=(Oe*C>>M)*Ce,h[$e+1]=(Le*C>>M)*Ce,h[$e+2]=(ke*C>>M)*Ce):h[$e]=h[$e+1]=h[$e+2]=0,Oe-=Me,Le-=Ee,ke-=Te,Fe-=Pe,Me-=b.r,Ee-=b.g,Te-=b.b,Pe-=b.a,$e=me+(($e=Ge+m)<f?$e:f)*o<<2,Oe+=Ve+=b.r=h[$e],Le+=Re+=b.g=h[$e+1],ke+=Ne+=b.b=h[$e+2],Fe+=Be+=b.a=h[$e+3],b=b.next,Me+=_e=x.r,Ee+=be=x.g,Te+=xe=x.b,Pe+=Ce=x.a,Ve-=_e,Re-=be,Ne-=xe,Be-=Ce,x=x.next,S+=o}}return e}function l(e,t,r,i,o,a){if(!(isNaN(a)||a<1)){a|=0;var l=n(e,t,r,i,o);l=c(l,0,0,i,o,a),e.getContext("2d").putImageData(l,t,r)}}function c(e,t,n,o,a,l){for(var c,h=e.data,p=2*l+1,d=o-1,f=a-1,m=l+1,g=m*(m+1)/2,y=new u,v=y,_=1;_<p;_++)v=v.next=new u,_===m&&(c=v);v.next=y;for(var b,x,w=null,S=null,C=r[l],M=i[l],E=0,T=0,A=0;A<a;A++){var P=h[T],O=h[T+1],I=h[T+2],k=m*P,F=m*O,D=m*I,j=g*P,z=g*O,N=g*I;v=y;for(var B=0;B<m;B++)v.r=P,v.g=O,v.b=I,v=v.next;for(var V=0,U=0,H=0,G=1;G<m;G++)b=T+((d<G?d:G)<<2),j+=(v.r=P=h[b])*(x=m-G),z+=(v.g=O=h[b+1])*x,N+=(v.b=I=h[b+2])*x,V+=P,U+=O,H+=I,v=v.next;w=y,S=c;for(var q=0;q<o;q++)h[T]=j*C>>M,h[T+1]=z*C>>M,h[T+2]=N*C>>M,j-=k,z-=F,N-=D,k-=w.r,F-=w.g,D-=w.b,b=E+((b=q+l+1)<d?b:d)<<2,j+=V+=w.r=h[b],z+=U+=w.g=h[b+1],N+=H+=w.b=h[b+2],w=w.next,k+=P=S.r,F+=O=S.g,D+=I=S.b,V-=P,U-=O,H-=I,S=S.next,T+=4;E+=o}for(var Z=0;Z<o;Z++){var $=h[T=Z<<2],W=h[T+1],X=h[T+2],Y=m*$,K=m*W,J=m*X,ee=g*$,te=g*W,re=g*X;v=y;for(var ie=0;ie<m;ie++)v.r=$,v.g=W,v.b=X,v=v.next;for(var ne=0,se=0,ae=0,de=1,fe=o;de<=l;de++)T=fe+Z<<2,ee+=(v.r=$=h[T])*(x=m-de),te+=(v.g=W=h[T+1])*x,re+=(v.b=X=h[T+2])*x,ne+=$,se+=W,ae+=X,v=v.next,de<f&&(fe+=o);T=Z,w=y,S=c;for(var me=0;me<a;me++)h[b=T<<2]=ee*C>>M,h[b+1]=te*C>>M,h[b+2]=re*C>>M,ee-=Y,te-=K,re-=J,Y-=w.r,K-=w.g,J-=w.b,b=Z+((b=me+m)<f?b:f)*o<<2,ee+=ne+=w.r=h[b],te+=se+=w.g=h[b+1],re+=ae+=w.b=h[b+2],w=w.next,Y+=$=S.r,K+=W=S.g,J+=X=S.b,ne-=$,se-=W,ae-=X,S=S.next,T+=o}return e}var u=function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};e.BlurStack=u,e.canvasRGB=l,e.canvasRGBA=o,e.image=function(e,t,r,i,n,a){if("string"==typeof e&&(e=document.getElementById(e)),e&&"naturalWidth"in e){var c=n?"offset":"natural",u=e[c+"Width"],h=e[c+"Height"];if("string"==typeof t&&(t=document.getElementById(t)),t&&"getContext"in t){a||(t.style.width=u+"px",t.style.height=h+"px"),t.width=u,t.height=h;var p=t.getContext("2d");p.clearRect(0,0,u,h),p.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,u,h),isNaN(r)||r<1||(i?o(t,0,0,u,h,r):l(t,0,0,u,h,r))}}},e.imageDataRGB=c,e.imageDataRGBA=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){e.exports=function(){"use strict";var e="3.1.0";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r=i;function i(e,t){this.x=e,this.y=t}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),i=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),i=Math.sin(e),n=t.y+i*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-i*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var n=t(r),o=a;function a(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var n=this.sampleCurveX(r)-e;if(Math.abs(n)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=n/o}var a=0,l=1;for(r=e,i=0;i<20&&(n=this.sampleCurveX(r),!(Math.abs(n-e)<t));i++)e>n?a=r:l=r,r=.5*(l-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var l=t(o);function c(e,t,r,i){const n=new l(e,t,r,i);return function(e){return n.solve(e)}}const u=c(.25,.1,.25,1);function h(e,t,r){return Math.min(r,Math.max(t,e))}function p(e,t,r){const i=r-t,n=((e-t)%i+i)%i+t;return n===t?r:n}function d(e,t,r){if(!e.length)return r(null,[]);let i=e.length;const n=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),n[a]=t,0==--i&&r(o,n)}))}))}function f(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}function m(e,t){const r={};for(let i=0;i<t.length;i++){const n=t[i];n in e&&(r[n]=e[n])}return r}let g=1;function y(){return g++}function v(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function _(e,t,r){const i={};for(const n in e)i[n]=t.call(r||this,e[n],n,e);return i}function b(e,t,r){const i={};for(const n in e)t.call(r||this,e[n],n,e)&&(i[n]=e[n]);return i}function x(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!x(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!x(e[r],t[r]))return!1;return!0}return e===t}function w(e){return Array.isArray(e)?e.map(w):"object"==typeof e&&e?_(e,w):e}const S={};function C(e){S[e]||("undefined"!=typeof console&&console.warn(e),S[e]=!0)}function M(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function E(e){let t=0;for(let r,i,n=0,o=e.length,a=o-1;n<o;a=n++)r=e[n],i=e[a],t+=(i.x-r.x)*(r.y+i.y);return t}function T(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}let A=null;function P(e){if(null==A){const t=e.navigator?e.navigator.userAgent:null;A=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return A}function O(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let k,F;const D={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(e){const t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e,t=0){return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r},resolveURL:e=>(k||(k=document.createElement("a")),k.href=e,k.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==F&&(F=matchMedia("(prefers-reduced-motion: reduce)")),F.matches)}};class L{static testProp(e){if(!L.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in L.docStyle)return e[t];return e[0]}static create(e,t,r){const i=window.document.createElement(e);return void 0!==t&&(i.className=t),r&&r.appendChild(i),i}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(e,t){e.style[L.transformProp]=t}static addEventListener(e,t,r,i={}){e.addEventListener(t,r,"passive"in i?i:i.capture)}static removeEventListener(e,t,r,i={}){e.removeEventListener(t,r,"passive"in i?i:i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",L.suppressClickInternal,!0)}),0)}static mousePos(e,t){const r=e.getBoundingClientRect();return new n(t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop)}static touchPos(e,t){const r=e.getBoundingClientRect(),i=[];for(let o=0;o<t.length;o++)i.push(new n(t[o].clientX-r.left-e.clientLeft,t[o].clientY-r.top-e.clientTop));return i}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}L.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);const j={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class R extends Error{constructor(e,t,r,i){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=i}}const z=T()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href,N=e=>j.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))];function B(e,t){const r=new AbortController,i=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:z(),signal:r.signal});let n=!1,o=!1;return"json"===e.type&&i.headers.set("Accept","application/json"),o||fetch(i).then((r=>r.ok?(r=>{("arrayBuffer"===e.type||"image"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{o||(n=!0,t(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{o||t(new Error(e.message))}))})(r):r.blob().then((i=>t(new R(r.status,r.statusText,e.url,i)))))).catch((e=>{20!==e.code&&t(new Error(e.message))})),{cancel:()=>{o=!0,n||r.abort()}}}const V=function(e,t){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t);if(!T())return(N(e.url)||B)(e,t)}if(!(/^file:/.test(r=e.url)||/^file:/.test(z())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return B(e,t);if(T()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var r;return function(e,t){const r=new XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{t(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let i=r.response;if("json"===e.type)try{i=JSON.parse(r.response)}catch(e){return t(e)}t(null,i,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else{const i=new Blob([r.response],{type:r.getResponseHeader("Content-Type")});t(new R(r.status,r.statusText,e.url,i))}},r.send(e.body),{cancel:()=>r.abort()}}(e,t)},U=function(e,t){return V(f(e,{type:"json"}),t)},H=function(e,t){return V(f(e,{type:"arrayBuffer"}),t)};function G(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),r=window.location;return t.protocol===r.protocol&&t.host===r.host}const q={supported:!1,testSupport:function(e){!W&&$&&(X?Y(e):Z=e)}};let Z,$,W=!1,X=!1;function Y(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,$),e.isContextLost())return;q.supported=!0}catch(e){}e.deleteTexture(t),W=!0}var K;"undefined"!=typeof document&&($=document.createElement("img"),$.onload=function(){Z&&Y(Z),Z=null,X=!0},$.onerror=function(){W=!0,Z=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let t,r,i,n;e.resetRequestQueue=()=>{t=[],r=0,i=0,n={}},e.addThrottleControl=e=>{const t=i++;return n[t]=e,t},e.removeThrottleControl=e=>{delete n[e],l()},e.getImage=(e,i,n=!0)=>{q.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*");const o={requestParameters:e,supportImageRefresh:n,callback:i,cancelled:!1,completed:!1,cancel:()=>{o.completed||o.cancelled||(o.cancelled=!0,o.innerRequest&&(o.innerRequest.cancel(),r--),l())}};return t.push(o),l(),o};const o=e=>{const{requestParameters:t,supportImageRefresh:r,callback:i}=e;return f(t,{type:"image"}),(!1!==r||T()||N(t.url)||t.headers&&!Object.keys(t.headers).reduce(((e,t)=>e&&"accept"===t),!0)?V:c)(t,((t,r,n,o)=>{a(e,i,t,r,n,o)}))},a=(e,t,i,n,o,a)=>{i?t(i):n instanceof HTMLImageElement||n instanceof ImageBitmap?t(null,n):n&&((e,t)=>{"function"==typeof createImageBitmap?function(e,t){const r=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(r).then((e=>{t(null,e)})).catch((e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(e,t):function(e,t){const r=new Image;r.onload=()=>{t(null,r),URL.revokeObjectURL(r.src),r.onload=null,window.requestAnimationFrame((()=>{r.src=I}))},r.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?URL.createObjectURL(i):I}(e,t)})(n,((e,r)=>{null!=e?t(e):null!=r&&t(null,r,{cacheControl:o,expires:a})})),e.cancelled||(e.completed=!0,r--,l())},l=()=>{const e=(()=>{const e=Object.keys(n);let t=!1;if(e.length>0)for(const r of e)if(t=n[r](),t)break;return t})()?j.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:j.MAX_PARALLEL_IMAGE_REQUESTS;for(let i=r;i<e&&t.length>0;i++){const e=t.shift();if(e.cancelled){i--;continue}const n=o(e);r++,e.innerRequest=n}},c=(e,t)=>{const r=new Image,i=e.url;let n=!1;const o=e.credentials;return o&&"include"===o?r.crossOrigin="use-credentials":(o&&"same-origin"===o||!G(i))&&(r.crossOrigin="anonymous"),r.fetchPriority="high",r.onload=()=>{t(null,r),r.onerror=r.onload=null},r.onerror=()=>{n||t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),r.onerror=r.onload=null},r.src=i,{cancel:()=>{n=!0,r.src=""}}}}(K||(K={})),K.resetRequestQueue();var J,ee=K;!function(e){e.Glyphs="Glyphs",e.Image="Image",e.Source="Source",e.SpriteImage="SpriteImage",e.SpriteJSON="SpriteJSON",e.Style="Style",e.Tile="Tile",e.Unknown="Unknown"}(J||(J={}));class Q{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeSpriteURL(e,t,r){const i=function(e){const t=e.match(te);if(!t)throw new Error(`Unable to parse URL "${e}"`);return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}(e);return i.path+=`${t}${r}`,function(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}(i)}setTransformRequest(e){this._transformRequestFn=e}}const te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function ie(e,t,r){if(r&&r[e]){const i=r[e].indexOf(t);-1!==i&&r[e].splice(i,1)}}class rt{constructor(e,t={}){f(this,t),this.type=e}}class st extends rt{constructor(e,t={}){super("error",f({error:e},t))}}class nt{on(e,t){return this._listeners=this._listeners||{},re(e,t,this._listeners),this}off(e,t){return ie(e,t,this._listeners),ie(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},re(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new rt(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const t of i)ie(r,t,this._oneTimeListeners),t.call(this,e);const n=this._eventedParent;n&&(f(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(e))}else e instanceof st&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const se=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ae(e,t){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return se.forEach((e=>{e in t&&(r[e]=t[e])})),r}function de(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=ae(e[r],t[e[r].ref]));return e}function fe(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!fe(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!fe(e[r],t[r]))return!1;return!0}return e===t}const me={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function _e(e,t,r){r.push({command:me.addSource,args:[e,t[e]]})}function be(e,t,r){t.push({command:me.removeSource,args:[e]}),r[e]=!0}function xe(e,t,r,i){be(e,r,i),_e(e,t,r)}function Ce(e,t,r){let i;for(i in e[r])if(Object.prototype.hasOwnProperty.call(e[r],i)&&"data"!==i&&!fe(e[r][i],t[r][i]))return!1;for(i in t[r])if(Object.prototype.hasOwnProperty.call(t[r],i)&&"data"!==i&&!fe(e[r][i],t[r][i]))return!1;return!0}function Me(e,t,r,i,n,o){let a;for(a in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,a)&&(fe(e[a],t[a])||r.push({command:o,args:[i,a,t[a],n]}));for(a in t)Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(fe(e[a],t[a])||r.push({command:o,args:[i,a,t[a],n]}))}function Ee(e){return e.id}function Te(e,t){return e[t.id]=t,e}class xt{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function Pe(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}class bt extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class wt{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,r]of t)this.bindings[e]=r}concat(e){return new wt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Oe={kind:"null"},Le={kind:"number"},ke={kind:"string"},Fe={kind:"boolean"},De={kind:"color"},ze={kind:"object"},Re={kind:"value"},Ne={kind:"collator"},Be={kind:"formatted"},Ve={kind:"padding"},Ue={kind:"resolvedImage"};function He(e,t){return{kind:"array",itemType:e,N:t}}function Ge(e){if("array"===e.kind){const t=Ge(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const $e=[Oe,Le,ke,Fe,De,Be,ze,He(Re),Ve,Ue];function We(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!We(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of $e)if(!We(e,t))return null}return`Expected ${Ge(e)} but found ${Ge(t)} instead.`}function Xe(e,t){return t.some((t=>t.kind===e.kind))}function Ke(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function Je(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Qe=.96422,et=.82521,tt=4/29,it=6/29,ot=3*it*it,at=it*it*it,lt=Math.PI/180,ct=180/Math.PI;function ut(e){return(e%=360)<0&&(e+=360),e}function ht([e,t,r,i]){let n,o;const a=dt((.2225045*(e=pt(e))+.7168786*(t=pt(t))+.0606169*(r=pt(r)))/1);e===t&&t===r?n=o=a:(n=dt((.4360747*e+.3850649*t+.1430804*r)/Qe),o=dt((.0139322*e+.0971045*t+.7141733*r)/et));const l=116*a-16;return[l<0?0:l,500*(n-a),200*(a-o),i]}function pt(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dt(e){return e>at?Math.pow(e,1/3):e/ot+tt}function ft([e,t,r,i]){let n=(e+16)/116,o=isNaN(t)?n:n+t/500,a=isNaN(r)?n:n-r/200;return n=1*gt(n),o=Qe*gt(o),a=et*gt(a),[mt(3.1338561*o-1.6168667*n-.4906146*a),mt(-.9787684*o+1.9161415*n+.033454*a),mt(.0719453*o-.2289914*n+1.4052427*a),i]}function mt(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function gt(e){return e>it?e*e*e:ot*(e-tt)}function yt(e){return parseInt(e.padEnd(2,e),16)/255}function vt(e,t){return _t(t?e/100:e,0,1)}function _t(e,t,r){return Math.min(Math.max(t,e),r)}function St(e){return!e.some(Number.isNaN)}const Ct={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class oe{constructor(e,t,r,i=1,n=!0){this.r=e,this.g=t,this.b=r,this.a=i,n||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof oe)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase()))return[0,0,0,0];const t=Ct[e];if(t){const[e,r,i]=t;return[e/255,r/255,i/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let r=1;return[yt(e.slice(r,r+=t)),yt(e.slice(r,r+=t)),yt(e.slice(r,r+=t)),yt(e.slice(r,r+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,r,i,n,o,a,l,c,u,h,p,d]=t,f=[n||" ",l||" ",h].join("");if("  "===f||"  /"===f||",,"===f||",,,"===f){const e=[i,a,u].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[_t(+r/t,0,1),_t(+o/t,0,1),_t(+c/t,0,1),p?vt(+p,d):1];if(St(e))return e}}return}}const r=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){const[e,t,i,n,o,a,l,c,u]=r,h=[i||" ",o||" ",l].join("");if("  "===h||"  /"===h||",,"===h||",,,"===h){const e=[+t,_t(+n,0,100),_t(+a,0,100),c?vt(+c,u):1];if(St(e))return function([e,t,r,i]){function n(i){const n=(i+e/30)%12,o=t*Math.min(r,1-r);return r-o*Math.max(-1,Math.min(n-3,9-n,1))}return e=ut(e),t/=100,r/=100,[n(0),n(8),n(4),i]}(e)}}}(e);return t?new oe(...t,!1):void 0}get rgb(){const{r:e,g:t,b:r,a:i}=this,n=i||1/0;return this.overwriteGetter("rgb",[e/n,t/n,r/n,i])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,r,i,n]=ht(e),o=Math.sqrt(r*r+i*i);return[Math.round(1e4*o)?ut(Math.atan2(i,r)*ct):NaN,o,t,n]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ht(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map((e=>Math.round(255*e))).join(",")},${i})`}}oe.black=new oe(0,0,0,1),oe.white=new oe(1,1,1,1),oe.transparent=new oe(0,0,0,0),oe.red=new oe(1,0,0,1);class le{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ce{constructor(e,t,r,i,n){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=n}}class he{constructor(e){this.sections=e}static fromString(e){return new he([new ce(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof he?e:he.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class ue{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ue)return e;if("number"==typeof e)return new ue([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new ue(e)}}toString(){return JSON.stringify(this.values)}}class pe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new pe({name:e,available:!1}):null}}function Mt(e,t,r,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,r,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[e,t,r,i]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Et(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof oe)return!0;if(e instanceof le)return!0;if(e instanceof he)return!0;if(e instanceof ue)return!0;if(e instanceof pe)return!0;if(Array.isArray(e)){for(const t of e)if(!Et(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Et(e[t]))return!1;return!0}return!1}function Tt(e){if(null===e)return Oe;if("string"==typeof e)return ke;if("boolean"==typeof e)return Fe;if("number"==typeof e)return Le;if(e instanceof oe)return De;if(e instanceof le)return Ne;if(e instanceof he)return Be;if(e instanceof ue)return Ve;if(e instanceof pe)return Ue;if(Array.isArray(e)){const t=e.length;let r;for(const t of e){const e=Tt(t);if(r){if(r===e)continue;r=Re;break}r=e}return He(r||Re,t)}return ze}function At(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof oe||e instanceof he||e instanceof ue||e instanceof pe?e.toString():JSON.stringify(e)}class ge{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Et(e[1]))return t.error("invalid value");const r=e[1];let i=Tt(r);const n=t.expectedType;return"array"!==i.kind||0!==i.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(i=n),new ge(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ye{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Pt={string:ke,number:Le,boolean:Fe,object:ze};class ve{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,i=1;const n=e[0];if("array"===n){let n,o;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in Pt)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=Pt[r],i++}else n=Re;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}r=He(n,o)}else{if(!Pt[n])throw new Error(`Types doesn't contain name = ${n}`);r=Pt[n]}const o=[];for(;i<e.length;i++){const r=t.parse(e[i],i,Re);if(!r)return null;o.push(r)}return new ve(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!We(this.type,Tt(r)))return r;if(t===this.args.length-1)throw new ye(`Expected value to be of type ${Ge(this.type)}, but found ${Ge(Tt(r))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Ot={"to-boolean":Fe,"to-color":De,"to-number":Le,"to-string":ke};class we{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!Ot[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const i=Ot[r],n=[];for(let r=1;r<e.length;r++){const i=t.parse(e[r],r,Re);if(!i)return null;n.push(i)}return new we(i,n)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof oe)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Mt(t[0],t[1],t[2],t[3]),!r))return new oe(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ye(r||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("padding"===this.type.kind){let t;for(const r of this.args){t=r.evaluate(e);const i=ue.parse(t);if(i)return i}throw new ye(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}if("number"===this.type.kind){let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new ye(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?he.fromString(At(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?pe.fromString(At(this.args[0].evaluate(e))):At(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const It=["Unknown","Point","LineString","Polygon"];class Se{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?It[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=oe.parse(e)),t}}class Ie{constructor(e,t,r=[],i,n=new wt,o=[]){this.registry=e,this.path=r,this.key=r.map((e=>`[${e}]`)).join(""),this.scope=n,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,r,i,n={}){return t?this.concat(t,r,i)._parse(e,n):this._parse(e,n)}_parse(e,t){function r(e,t,r){return"assert"===r?new ve(t,[e]):"coerce"===r?new we(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[i];if(n){let i=n.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,n=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==n.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==n.kind&&"string"!==n.kind)if("padding"!==e.kind||"value"!==n.kind&&"number"!==n.kind&&"array"!==n.kind){if(this.checkSubtype(e,n))return null}else i=r(i,e,t.typeAnnotation||"coerce");else i=r(i,e,t.typeAnnotation||"coerce");else i=r(i,e,t.typeAnnotation||"assert")}if(!(i instanceof ge)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new Se;try{i=new ge(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i="number"==typeof e?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new Ie(this.registry,this._isConstant,i,t||null,n,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new bt(r,e))}checkSubtype(e,t){const r=We(e,t);return r&&this.error(r),r}}class Ae{constructor(e,t,r){this.type=Ne,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Fe);if(!i)return null;const n=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Fe);if(!n)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,ke),!o)?null:new Ae(i,n,o)}evaluate(e){return new le(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Lt=8192;function kt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Ft(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Dt(e,t){const r=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(r*n*Lt),Math.round(i*n*Lt)]}function jt(e,t,r){const i=e[0]-t[0],n=e[1]-t[1],o=e[0]-r[0],a=e[1]-r[1];return i*a-o*n==0&&i*o<=0&&n*a<=0}function zt(e,t){let r=!1;for(let a=0,l=t.length;a<l;a++){const l=t[a];for(let t=0,a=l.length;t<a-1;t++){if(jt(e,l[t],l[t+1]))return!1;(n=l[t])[1]>(i=e)[1]!=(o=l[t+1])[1]>i[1]&&i[0]<(o[0]-n[0])*(i[1]-n[1])/(o[1]-n[1])+n[0]&&(r=!r)}}var i,n,o;return r}function Rt(e,t){for(let r=0;r<t.length;r++)if(zt(e,t[r]))return!0;return!1}function Nt(e,t,r,i){const n=i[0]-r[0],o=i[1]-r[1],a=(e[0]-r[0])*o-n*(e[1]-r[1]),l=(t[0]-r[0])*o-n*(t[1]-r[1]);return a>0&&l<0||a<0&&l>0}function Bt(e,t,r){for(const u of r)for(let r=0;r<u.length-1;++r)if(0!=(l=[(a=u[r+1])[0]-(o=u[r])[0],a[1]-o[1]])[0]*(c=[(n=t)[0]-(i=e)[0],n[1]-i[1]])[1]-l[1]*c[0]&&Nt(i,n,o,a)&&Nt(o,a,i,n))return!0;var i,n,o,a,l,c;return!1}function Vt(e,t){for(let r=0;r<e.length;++r)if(!zt(e[r],t))return!1;for(let r=0;r<e.length-1;++r)if(Bt(e[r],e[r+1],t))return!1;return!0}function Ut(e,t){for(let r=0;r<t.length;r++)if(Vt(e,t[r]))return!0;return!1}function Ht(e,t,r){const i=[];for(let n=0;n<e.length;n++){const o=[];for(let i=0;i<e[n].length;i++){const a=Dt(e[n][i],r);kt(t,a),o.push(a)}i.push(o)}return i}function Gt(e,t,r){const i=[];for(let n=0;n<e.length;n++){const o=Ht(e[n],t,r);i.push(o)}return i}function qt(e,t,r,i){if(e[0]<r[0]||e[0]>r[2]){const t=.5*i;let n=e[0]-r[0]>t?-i:r[0]-e[0]>t?i:0;0===n&&(n=e[0]-r[2]>t?-i:r[2]-e[0]>t?i:0),e[0]+=n}kt(t,e)}function Zt(e,t,r,i){const n=Math.pow(2,i.z)*Lt,o=[i.x*Lt,i.y*Lt],a=[];for(const i of e)for(const e of i){const i=[e.x+o[0],e.y+o[1]];qt(i,t,r,n),a.push(i)}return a}function $t(e,t,r,i){const n=Math.pow(2,i.z)*Lt,o=[i.x*Lt,i.y*Lt],a=[];for(const r of e){const e=[];for(const i of r){const r=[i.x+o[0],i.y+o[1]];kt(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=n/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;for(const e of a)for(const i of e)qt(i,t,r,n)}var l;return a}class qe{constructor(e,t){this.type=Fe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Et(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new qe(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new qe(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new qe(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=Ht(t.coordinates,i,n),a=Zt(e.geometry(),r,i,n);if(!Ft(r,i))return!1;for(const e of a)if(!zt(e,o))return!1}if("MultiPolygon"===t.type){const o=Gt(t.coordinates,i,n),a=Zt(e.geometry(),r,i,n);if(!Ft(r,i))return!1;for(const e of a)if(!Rt(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=Ht(t.coordinates,i,n),a=$t(e.geometry(),r,i,n);if(!Ft(r,i))return!1;for(const e of a)if(!Vt(e,o))return!1}if("MultiPolygon"===t.type){const o=Gt(t.coordinates,i,n),a=$t(e.geometry(),r,i,n);if(!Ft(r,i))return!1;for(const e of a)if(!Ut(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class je{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new je(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Ze{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Ze.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let l=null;for(const[i,o]of a){l=new Ie(t.registry,Wt,t.path,null,t.scope);const a=[];let c=!1;for(let t=1;t<e.length;t++){const r=e[t],n=Array.isArray(i)?i[t-1]:i.type,o=l.parse(r,1+a.length,n);if(!o){c=!0;break}a.push(o)}if(!c)if(Array.isArray(i)&&i.length!==a.length)l.error(`Expected ${i.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(i)?i[e]:i.type,r=a[e];l.concat(e+1).checkSubtype(t,r.type)}if(0===l.errors.length)return new Ze(r,n,o,a)}}if(1===a.length)t.errors.push(...l.errors);else{const r=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(Ge).join(", ")})`:`(${Ge(t.type)}...)`;var t})).join(" | "),i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],1+i.length);if(!n)return null;i.push(Ge(n.type))}t.error(`Expected arguments of type ${r}, but found (${i.join(", ")}) instead.`)}return null}static register(e,t){Ze.definitions=t;for(const r in t)e[r]=Ze}}function Wt(e){if(e instanceof je)return Wt(e.boundExpression);if(e instanceof Ze&&"error"===e.name)return!1;if(e instanceof Ae)return!1;if(e instanceof qe)return!1;const t=e instanceof we||e instanceof ve;let r=!0;return e.eachChild((e=>{r=t?r&&Wt(e):r&&e instanceof ge})),!!r&&Xt(e)&&Kt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Xt(e){if(e instanceof Ze){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof qe)return!1;let t=!0;return e.eachChild((e=>{t&&!Xt(e)&&(t=!1)})),t}function Yt(e){if(e instanceof Ze&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!Yt(e)&&(t=!1)})),t}function Kt(e,t){if(e instanceof Ze&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!Kt(e,t)&&(r=!1)})),r}function Jt(e,t){const r=e.length-1;let i,n,o=0,a=r,l=0;for(;o<=a;)if(l=Math.floor((o+a)/2),i=e[l],n=e[l+1],i<=t){if(l===r||t<n)return l;o=l+1}else{if(!(i>t))throw new ye("Input is not a number.");a=l-1}return 0}class Ye{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,Le);if(!r)return null;const i=[];let n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let r=1;r<e.length;r+=2){const o=1===r?-1/0:e[r],a=e[r+1],l=r,c=r+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);const u=t.parse(a,c,n);if(!u)return null;n=n||u.type,i.push([o,u])}return new Ye(n,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const n=t.length;return i>=t[n-1]?r[n-1].evaluate(e):r[Jt(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Qt(e,t,r){return e+r*(t-e)}function er(e,t,r){return e.map(((e,i)=>Qt(e,t[i],r)))}const tr={number:Qt,color:function(e,t,r,i="rgb"){switch(i){case"rgb":{const[i,n,o,a]=er(e.rgb,t.rgb,r);return new oe(i,n,o,a,!1)}case"hcl":{const[i,n,o,a]=e.hcl,[l,c,u,h]=t.hcl;let p,d;if(isNaN(i)||isNaN(l))isNaN(i)?isNaN(l)?p=NaN:(p=l,1!==o&&0!==o||(d=c)):(p=i,1!==u&&0!==u||(d=n));else{let e=l-i;l>i&&e>180?e-=360:l<i&&i-l>180&&(e+=360),p=i+r*e}const[f,m,g,y]=function([e,t,r,i]){return e=isNaN(e)?0:e*lt,ft([r,Math.cos(e)*t,Math.sin(e)*t,i])}([p,null!=d?d:Qt(n,c,r),Qt(o,u,r),Qt(a,h,r)]);return new oe(f,m,g,y,!1)}case"lab":{const[i,n,o,a]=ft(er(e.lab,t.lab,r));return new oe(i,n,o,a,!1)}}},array:er,padding:function(e,t,r){return new ue(er(e.values,t.values,r))}};class ei{constructor(e,t,r,i,n){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,i){let n=0;if("exponential"===e.name)n=rr(t,e.base,r,i);else if("linear"===e.name)n=rr(t,1,r,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;n=new l(o[0],o[1],o[2],o[3]).solve(rr(t,1,r,i))}return n}static parse(e,t){let[r,i,n,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const e=i.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(n=t.parse(n,2,Le),!n)return null;const a=[];let l=null;"interpolate-hcl"===r||"interpolate-lab"===r?l=De:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(let e=0;e<o.length;e+=2){const r=o[e],i=o[e+1],n=e+3,c=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',n);const u=t.parse(i,c,l);if(!u)return null;l=l||u.type,a.push([r,u])}return Je(l,Le)||Je(l,De)||Je(l,Ve)||Je(l,He(Le))?new ei(l,r,i,n,a):t.error(`Type ${Ge(l)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const n=t.length;if(i>=t[n-1])return r[n-1].evaluate(e);const o=Jt(t,i),a=ei.interpolationFactor(this.interpolation,i,t[o],t[o+1]),l=r[o].evaluate(e),c=r[o+1].evaluate(e);switch(this.operator){case"interpolate":return tr[this.type.kind](l,c,a);case"interpolate-hcl":return tr.color(l,c,a,"hcl");case"interpolate-lab":return tr.color(l,c,a,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function rr(e,t,r,i){const n=i-r,o=e-r;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class ri{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&"value"!==i.kind&&(r=i);const n=[];for(const i of e.slice(1)){const e=t.parse(i,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,n.push(e)}if(!r)throw new Error("No output type");const o=i&&n.some((e=>We(i,e.type)));return new ri(o?Re:r,n)}evaluate(e){let t,r=null,i=0;for(const n of this.args)if(i++,r=n.evaluate(e),r&&r instanceof pe&&!r.available&&(t||(t=r.name),r=null,i===this.args.length&&(r=t)),null!==r)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}class si{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let i=1;i<e.length-1;i+=2){const n=e[i];if("string"!=typeof n)return t.error(`Expected string, but found ${typeof n} instead.`,i);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;r.push([n,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new si(r,i):null}outputDefined(){return this.result.outputDefined()}}class ni{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Le),i=t.parse(e[2],2,He(t.expectedType||Re));return r&&i?new ni(i.type.itemType,r,i):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new ye(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new ye(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new ye(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class ai{constructor(e,t){this.type=Fe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Re),i=t.parse(e[2],2,Re);return r&&i?Xe(r.type,[Fe,ke,Le,Oe,Re])?new ai(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ge(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Ke(t,["boolean","string","number","null"]))throw new ye(`Expected first argument to be of type boolean, string, number or null, but found ${Ge(Tt(t))} instead.`);if(!Ke(r,["string","array"]))throw new ye(`Expected second argument to be of type array or string, but found ${Ge(Tt(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class oi{constructor(e,t,r){this.type=Le,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Re),i=t.parse(e[2],2,Re);if(!r||!i)return null;if(!Xe(r.type,[Fe,ke,Le,Oe,Re]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ge(r.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,Le);return n?new oi(r,i,n):null}return new oi(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Ke(t,["boolean","string","number","null"]))throw new ye(`Expected first argument to be of type boolean, string, number or null, but found ${Ge(Tt(t))} instead.`);if(!Ke(r,["string","array"]))throw new ye(`Expected second argument to be of type array or string, but found ${Ge(Tt(r))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return r.indexOf(t,i)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class li{constructor(e,t,r,i,n,o){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=n,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const n={},o=[];for(let a=2;a<e.length-1;a+=2){let l=e[a];const c=e[a+1];Array.isArray(l)||(l=[l]);const u=t.concat(a);if(0===l.length)return u.error("Expected at least one branch label.");for(const e of l){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,Tt(e)))return null}else r=Tt(e);if(void 0!==n[String(e)])return u.error("Branch labels must be unique.");n[String(e)]=o.length}const h=t.parse(c,a,i);if(!h)return null;i=i||h.type,o.push(h)}const a=t.parse(e[1],1,Re);if(!a)return null;const l=t.parse(e[e.length-1],e.length-1,i);return l?"value"!==a.type.kind&&t.concat(1).checkSubtype(r,a.type)?null:new li(r,i,a,n,o,l):null}evaluate(e){const t=this.input.evaluate(e);return(Tt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class ci{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i=[];for(let n=1;n<e.length-1;n+=2){const o=t.parse(e[n],n,Fe);if(!o)return null;const a=t.parse(e[n+1],n+1,r);if(!a)return null;i.push([o,a]),r=r||a.type}const n=t.parse(e[e.length-1],e.length-1,r);if(!n)return null;if(!r)throw new Error("Can't infer output type");return new ci(r,i,n)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}}class hi{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,Re),i=t.parse(e[2],2,Le);if(!r||!i)return null;if(!Xe(r.type,[He(Re),ke,Re]))return t.error(`Expected first argument to be of type array or string, but found ${Ge(r.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,Le);return n?new hi(r.type,r,i,n):null}return new hi(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!Ke(t,["string","array"]))throw new ye(`Expected first argument to be of type array or string, but found ${Ge(Tt(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(r,i)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function ir(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function nr(e,t,r,i){return 0===i.compare(t,r)}function or(e,t,r){const i="=="!==e&&"!="!==e;return class s{constructor(e,t,r){this.type=Fe,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let n=t.parse(e[1],1,Re);if(!n)return null;if(!ir(r,n.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${Ge(n.type)}'.`);let o=t.parse(e[2],2,Re);if(!o)return null;if(!ir(r,o.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${Ge(o.type)}'.`);if(n.type.kind!==o.type.kind&&"value"!==n.type.kind&&"value"!==o.type.kind)return t.error(`Cannot compare types '${Ge(n.type)}' and '${Ge(o.type)}'.`);i&&("value"===n.type.kind&&"value"!==o.type.kind?n=new ve(o.type,[n]):"value"!==n.type.kind&&"value"===o.type.kind&&(o=new ve(n.type,[o])));let a=null;if(4===e.length){if("string"!==n.type.kind&&"string"!==o.type.kind&&"value"!==n.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(a=t.parse(e[3],3,Ne),!a)return null}return new s(n,o,a)}evaluate(n){const o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(i&&this.hasUntypedArgument){const t=Tt(o),r=Tt(a);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new ye(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const e=Tt(o),r=Tt(a);if("string"!==e.kind||"string"!==r.kind)return t(n,o,a)}return this.collator?r(n,o,a,this.collator.evaluate(n)):t(n,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const sr=or("==",(function(e,t,r){return t===r}),nr),ar=or("!=",(function(e,t,r){return t!==r}),(function(e,t,r,i){return!nr(0,t,r,i)})),lr=or("<",(function(e,t,r){return t<r}),(function(e,t,r,i){return i.compare(t,r)<0})),cr=or(">",(function(e,t,r){return t>r}),(function(e,t,r,i){return i.compare(t,r)>0})),ur=or("<=",(function(e,t,r){return t<=r}),(function(e,t,r,i){return i.compare(t,r)<=0})),hr=or(">=",(function(e,t,r){return t>=r}),(function(e,t,r,i){return i.compare(t,r)>=0}));class vi{constructor(e,t,r,i,n){this.type=ke,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=n}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,Le);if(!r)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let n=null;if(i.locale&&(n=t.parse(i.locale,1,ke),!n))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,ke),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,Le),!a))return null;let l=null;return i["max-fraction-digits"]&&(l=t.parse(i["max-fraction-digits"],1,Le),!l)?null:new vi(r,n,o,a,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class bi{constructor(e){this.type=Be,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const i=[];let n=!1;for(let r=1;r<=e.length-1;++r){const o=e[r];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,Le),!e))return null;let r=null;if(o["text-font"]&&(r=t.parse(o["text-font"],1,He(ke)),!r))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,De),!a))return null;const l=i[i.length-1];l.scale=e,l.font=r,l.textColor=a}else{const o=t.parse(e[r],1,Re);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new bi(i)}evaluate(e){return new he(this.sections.map((t=>{const r=t.content.evaluate(e);return Tt(r)===Ue?new ce("",r,null,null,null):new ce(At(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class wi{constructor(e){this.type=Ue,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ke);return r?new wi(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=pe.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class Ti{constructor(e){this.type=Le,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${Ge(r.type)} instead.`):new Ti(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ye(`Expected value to be of type string or array, but found ${Ge(Tt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const pr={"==":sr,"!=":ar,">":cr,"<":lr,">=":hr,"<=":ur,array:ve,at:ni,boolean:ve,case:ci,coalesce:ri,collator:Ae,format:bi,image:wi,in:ai,"index-of":oi,interpolate:ei,"interpolate-hcl":ei,"interpolate-lab":ei,length:Ti,let:si,literal:ge,match:li,number:ve,"number-format":vi,object:ve,slice:hi,step:Ye,string:ve,"to-boolean":we,"to-color":we,"to-number":we,"to-string":we,var:je,within:qe};function dr(e,[t,r,i,n]){t=t.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);const o=n?n.evaluate(e):1,a=Mt(t,r,i,o);if(a)throw new ye(a);return new oe(t/255,r/255,i/255,o,!1)}function fr(e,t){return e in t}function mr(e,t){const r=t[e];return void 0===r?null:r}function gr(e){return{type:e}}function yr(e){return{result:"success",value:e}}function vr(e){return{result:"error",value:e}}function _r(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function br(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function xr(e){return!!e.expression&&e.expression.interpolated}function wr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Sr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Cr(e){return e}function Mr(e,t){const r="color"===t.type,i=e.stops&&"object"==typeof e.stops[0][0],n=i||!(i||void 0!==e.property),o=e.type||(xr(t)?"exponential":"interval");if(r||"padding"===t.type){const i=r?oe.parse:ue.parse;(e=Pe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],i(e[1])]))),e.default=i(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(a=e.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error(`Unknown color space: "${e.colorSpace}"`);var a;let l,c,u;if("exponential"===o)l=Pr;else if("interval"===o)l=Ar;else if("categorical"===o){l=Tr,c=Object.create(null);for(const t of e.stops)c[t[0]]=t[1];u=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);l=Or}if(i){const r={},i=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],o=n[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),r[o].stops.push([n[0].value,n[1]])}const n=[];for(const e of i)n.push([r[e].zoom,Mr(r[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:ei.interpolationFactor.bind(void 0,o),zoomStops:n.map((e=>e[0])),evaluate:({zoom:r},i)=>Pr({stops:n,base:e.base},t,r).evaluate(r,i)}}if(n){const r="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:ei.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>l(e,t,r,c,u)}}return{kind:"source",evaluate(r,i){const n=i&&i.properties?i.properties[e.property]:void 0;return void 0===n?Er(e.default,t.default):l(e,t,n,c,u)}}}function Er(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function Tr(e,t,r,i,n){return Er(typeof r===n?i[r]:void 0,e.default,t.default)}function Ar(e,t,r){if("number"!==wr(r))return Er(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const n=Jt(e.stops.map((e=>e[0])),r);return e.stops[n][1]}function Pr(e,t,r){const i=void 0!==e.base?e.base:1;if("number"!==wr(r))return Er(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const o=Jt(e.stops.map((e=>e[0])),r),a=function(e,t,r,i){const n=i-r,o=e-r;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}(r,i,e.stops[o][0],e.stops[o+1][0]),l=e.stops[o][1],c=e.stops[o+1][1],u=tr[t.type]||Cr;return"function"==typeof l.evaluate?{evaluate(...t){const r=l.evaluate.apply(void 0,t),i=c.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return u(r,i,a,e.colorSpace)}}:u(l,c,a,e.colorSpace)}function Or(e,t,r){switch(t.type){case"color":r=oe.parse(r);break;case"formatted":r=he.fromString(r.toString());break;case"resolvedImage":r=pe.fromString(r.toString());break;case"padding":r=ue.parse(r);break;default:wr(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0)}return Er(r,e.default,t.default)}Ze.register(pr,{error:[{kind:"error"},[ke],(e,[t])=>{throw new ye(t.evaluate(e))}],typeof:[ke,[Re],(e,[t])=>Ge(Tt(t.evaluate(e)))],"to-rgba":[He(Le,4),[De],(e,[t])=>{const[r,i,n,o]=t.evaluate(e).rgb;return[255*r,255*i,255*n,o]}],rgb:[De,[Le,Le,Le],dr],rgba:[De,[Le,Le,Le,Le],dr],has:{type:Fe,overloads:[[[ke],(e,[t])=>fr(t.evaluate(e),e.properties())],[[ke,ze],(e,[t,r])=>fr(t.evaluate(e),r.evaluate(e))]]},get:{type:Re,overloads:[[[ke],(e,[t])=>mr(t.evaluate(e),e.properties())],[[ke,ze],(e,[t,r])=>mr(t.evaluate(e),r.evaluate(e))]]},"feature-state":[Re,[ke],(e,[t])=>mr(t.evaluate(e),e.featureState||{})],properties:[ze,[],e=>e.properties()],"geometry-type":[ke,[],e=>e.geometryType()],id:[Re,[],e=>e.id()],zoom:[Le,[],e=>e.globals.zoom],"heatmap-density":[Le,[],e=>e.globals.heatmapDensity||0],"line-progress":[Le,[],e=>e.globals.lineProgress||0],accumulated:[Re,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[Le,gr(Le),(e,t)=>{let r=0;for(const i of t)r+=i.evaluate(e);return r}],"*":[Le,gr(Le),(e,t)=>{let r=1;for(const i of t)r*=i.evaluate(e);return r}],"-":{type:Le,overloads:[[[Le,Le],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[Le],(e,[t])=>-t.evaluate(e)]]},"/":[Le,[Le,Le],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[Le,[Le,Le],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[Le,[],()=>Math.LN2],pi:[Le,[],()=>Math.PI],e:[Le,[],()=>Math.E],"^":[Le,[Le,Le],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[Le,[Le],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))],log2:[Le,[Le],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[Le,[Le],(e,[t])=>Math.sin(t.evaluate(e))],cos:[Le,[Le],(e,[t])=>Math.cos(t.evaluate(e))],tan:[Le,[Le],(e,[t])=>Math.tan(t.evaluate(e))],asin:[Le,[Le],(e,[t])=>Math.asin(t.evaluate(e))],acos:[Le,[Le],(e,[t])=>Math.acos(t.evaluate(e))],atan:[Le,[Le],(e,[t])=>Math.atan(t.evaluate(e))],min:[Le,gr(Le),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[Le,gr(Le),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[Le,[Le],(e,[t])=>Math.abs(t.evaluate(e))],round:[Le,[Le],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[Le,[Le],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[Le,[Le],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Fe,[ke,Re],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[Fe,[Re],(e,[t])=>e.id()===t.value],"filter-type-==":[Fe,[ke],(e,[t])=>e.geometryType()===t.value],"filter-<":[Fe,[ke,Re],(e,[t,r])=>{const i=e.properties()[t.value],n=r.value;return typeof i==typeof n&&i<n}],"filter-id-<":[Fe,[Re],(e,[t])=>{const r=e.id(),i=t.value;return typeof r==typeof i&&r<i}],"filter->":[Fe,[ke,Re],(e,[t,r])=>{const i=e.properties()[t.value],n=r.value;return typeof i==typeof n&&i>n}],"filter-id->":[Fe,[Re],(e,[t])=>{const r=e.id(),i=t.value;return typeof r==typeof i&&r>i}],"filter-<=":[Fe,[ke,Re],(e,[t,r])=>{const i=e.properties()[t.value],n=r.value;return typeof i==typeof n&&i<=n}],"filter-id-<=":[Fe,[Re],(e,[t])=>{const r=e.id(),i=t.value;return typeof r==typeof i&&r<=i}],"filter->=":[Fe,[ke,Re],(e,[t,r])=>{const i=e.properties()[t.value],n=r.value;return typeof i==typeof n&&i>=n}],"filter-id->=":[Fe,[Re],(e,[t])=>{const r=e.id(),i=t.value;return typeof r==typeof i&&r>=i}],"filter-has":[Fe,[Re],(e,[t])=>t.value in e.properties()],"filter-has-id":[Fe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Fe,[He(ke)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Fe,[He(Re)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Fe,[ke,He(Re)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Fe,[ke,He(Re)],(e,[t,r])=>function(e,t,r,i){for(;r<=i;){const n=r+i>>1;if(t[n]===e)return!0;t[n]>e?i=n-1:r=n+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Fe,overloads:[[[Fe,Fe],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[gr(Fe),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:Fe,overloads:[[[Fe,Fe],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[gr(Fe),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[Fe,[Fe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Fe,[ke],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ke,[ke],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ke,[ke],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ke,gr(Re),(e,t)=>t.map((t=>At(t.evaluate(e)))).join("")],"resolved-locale":[ke,[Ne],(e,[t])=>t.evaluate(e).resolvedLocale()]});class qi{constructor(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new Se,this._defaultValue=t?"color"===(r=t).type&&Sr(r.default)?new oe(0,0,0,0):"color"===r.type?oe.parse(r.default)||null:"padding"===r.type?ue.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,n,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new ye(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Ir(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in pr}function Lr(e,t){const r=new Ie(pr,Wt,[],t?function(e){const t={color:De,string:ke,number:Le,enum:ke,boolean:Fe,formatted:Be,padding:Ve,resolvedImage:Ue};return"array"===e.type?He(t[e.value]||Re,e.length):t[e.type]}(t):void 0),i=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?yr(new qi(i,t)):vr(r.errors)}class Gi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Yt(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,n,o)}evaluate(e,t,r,i,n,o){return this._styleExpression.evaluate(e,t,r,i,n,o)}}class Hi{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Yt(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,n,o)}evaluate(e,t,r,i,n,o){return this._styleExpression.evaluate(e,t,r,i,n,o)}interpolationFactor(e,t,r){return this.interpolationType?ei.interpolationFactor(this.interpolationType,e,t,r):0}}function kr(e,t){const r=Lr(e,t);if("error"===r.result)return r;const i=r.value.expression,n=Xt(i);if(!n&&!_r(t))return vr([new bt("","data expressions not supported")]);const o=Kt(i,["zoom"]);if(!o&&!br(t))return vr([new bt("","zoom expressions not supported")]);const a=Fr(i);return a||o?a instanceof bt?vr([a]):a instanceof ei&&!xr(t)?vr([new bt("",'"interpolate" expressions cannot be used with this property')]):yr(a?new Hi(n?"camera":"composite",r.value,a.labels,a instanceof ei?a.interpolation:void 0):new Gi(n?"constant":"source",r.value)):vr([new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xi{constructor(e,t){this._parameters=e,this._specification=t,Pe(this,Mr(this._parameters,this._specification))}static deserialize(e){return new Xi(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Fr(e){let t=null;if(e instanceof si)t=Fr(e.result);else if(e instanceof ri){for(const r of e.args)if(t=Fr(r),t)break}else(e instanceof Ye||e instanceof ei)&&e.input instanceof Ze&&"zoom"===e.input.name&&(t=e);return t instanceof bt||e.eachChild((e=>{const r=Fr(e);r instanceof bt?t=r:!t&&r?t=new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Dr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Dr(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const jr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zr(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Dr(e)||(e=Br(e));const t=Lr(e,jr);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,r,i)=>t.value.evaluate(e,r,{},i),needGeometry:Nr(e)}}function Rr(e,t){return e<t?-1:e>t?1:0}function Nr(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(Nr(e[t]))return!0;return!1}function Br(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Vr(e[1],e[2],"=="):"!="===t?Zr(Vr(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Vr(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(Br))):"all"===t?["all"].concat(e.slice(1).map(Br)):"none"===t?["all"].concat(e.slice(1).map(Br).map(Zr)):"in"===t?Hr(e[1],e.slice(2)):"!in"===t?Zr(Hr(e[1],e.slice(2))):"has"===t?qr(e[1]):"!has"===t?Zr(qr(e[1])):"within"!==t||e;var r}function Vr(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function Hr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Rr)]]:["filter-in-small",e,["literal",t]]}}function qr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Zr(e){return["!",e]}function $r(e){const t=e.value;return t?[new xt(e.key,t,"constants have been deprecated as of v8")]:[]}function Wr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Xr(e){if(Array.isArray(e))return e.map(Xr);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Xr(e[r]);return t}return Wr(e)}function Yr(e){const t=e.key,r=e.value,i=e.valueSpec||{},n=e.objectElementValidators||{},o=e.style,a=e.styleSpec,l=e.validateSpec;let c=[];const u=wr(r);if("object"!==u)return[new xt(t,r,`object expected, ${u} found`)];for(const e in r){const u=e.split(".")[0],h=i[u]||i["*"];let p;if(n[u])p=n[u];else if(i[u])p=l;else if(n["*"])p=n["*"];else{if(!i["*"]){c.push(new xt(t,r[e],`unknown property "${e}"`));continue}p=l}c=c.concat(p({key:(t?`${t}.`:t)+e,value:r[e],valueSpec:h,style:o,styleSpec:a,object:r,objectKey:e,validateSpec:l},r))}for(const e in i)n[e]||i[e].required&&void 0===i[e].default&&void 0===r[e]&&c.push(new xt(t,r,`missing required property "${e}"`));return c}function Kr(e){const t=e.value,r=e.valueSpec,i=e.style,n=e.styleSpec,o=e.key,a=e.arrayElementValidator||e.validateSpec;if("array"!==wr(t))return[new xt(o,t,`array expected, ${wr(t)} found`)];if(r.length&&t.length!==r.length)return[new xt(o,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new xt(o,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let l={type:r.value,values:r.values};n.$version<7&&(l.function=r.function),"object"===wr(r.value)&&(l=r.value);let c=[];for(let r=0;r<t.length;r++)c=c.concat(a({array:t,arrayIndex:r,value:t[r],valueSpec:l,validateSpec:e.validateSpec,style:i,styleSpec:n,key:`${o}[${r}]`}));return c}function Jr(e){const t=e.key,r=e.value,i=e.valueSpec;let n=wr(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new xt(t,r,`number expected, ${n} found`)]:"minimum"in i&&r<i.minimum?[new xt(t,r,`${r} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&r>i.maximum?[new xt(t,r,`${r} is greater than the maximum value ${i.maximum}`)]:[]}function Qr(e){const t=e.valueSpec,r=Wr(e.value.type);let i,n,o,a={};const l="categorical"!==r&&void 0===e.value.property,c=!l,u="array"===wr(e.value.stops)&&"array"===wr(e.value.stops[0])&&"object"===wr(e.value.stops[0][0]),h=Yr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new xt(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat(Kr({key:e.key,value:i,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===wr(i)&&0===i.length&&t.push(new xt(e.key,i,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&l&&h.push(new xt(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||h.push(new xt(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!xr(e.valueSpec)&&h.push(new xt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(c&&!_r(e.valueSpec)?h.push(new xt(e.key,e.value,"property functions not supported")):l&&!br(e.valueSpec)&&h.push(new xt(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==e.value.property||h.push(new xt(e.key,e.value,'"property" property is required')),h;function p(e){let r=[];const i=e.value,l=e.key;if("array"!==wr(i))return[new xt(l,i,`array expected, ${wr(i)} found`)];if(2!==i.length)return[new xt(l,i,`array length 2 expected, length ${i.length} found`)];if(u){if("object"!==wr(i[0]))return[new xt(l,i,`object expected, ${wr(i[0])} found`)];if(void 0===i[0].zoom)return[new xt(l,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new xt(l,i,"object stop key must have value")];if(o&&o>Wr(i[0].zoom))return[new xt(l,i[0].zoom,"stop zoom values must appear in ascending order")];Wr(i[0].zoom)!==o&&(o=Wr(i[0].zoom),n=void 0,a={}),r=r.concat(Yr({key:`${l}[0]`,value:i[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Jr,value:d}}))}else r=r.concat(d({key:`${l}[0]`,value:i[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},i));return Ir(Xr(i[1]))?r.concat([new xt(`${l}[1]`,i[1],"expressions are not allowed in function stops.")]):r.concat(e.validateSpec({key:`${l}[1]`,value:i[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function d(e,o){const l=wr(e.value),c=Wr(e.value),u=null!==e.value?e.value:o;if(i){if(l!==i)return[new xt(e.key,u,`${l} stop domain type must match previous stop domain type ${i}`)]}else i=l;if("number"!==l&&"string"!==l&&"boolean"!==l)return[new xt(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==l&&"categorical"!==r){let i=`number expected, ${l} found`;return _r(t)&&void 0===r&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(e.key,u,i)]}return"categorical"!==r||"number"!==l||isFinite(c)&&Math.floor(c)===c?"categorical"!==r&&"number"===l&&void 0!==n&&c<n?[new xt(e.key,u,"stop domain values must appear in ascending order")]:(n=c,"categorical"===r&&c in a?[new xt(e.key,u,"stop domain values must be unique")]:(a[c]=!0,[])):[new xt(e.key,u,`integer expected, found ${c}`)]}}function ti(e){const t=("property"===e.expressionContext?kr:Lr)(Xr(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new xt(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new xt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Yt(r))return[new xt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Yt(r))return[new xt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Kt(r,["zoom","feature-state"]))return[new xt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Xt(r))return[new xt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ii(e){const t=e.key,r=e.value,i=e.valueSpec,n=[];return Array.isArray(i.values)?-1===i.values.indexOf(Wr(r))&&n.push(new xt(t,r,`expected one of [${i.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(i.values).indexOf(Wr(r))&&n.push(new xt(t,r,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(r)} found`)),n}function ui(e){return Dr(Xr(e.value))?ti(Pe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pi(e)}function pi(e){const t=e.value,r=e.key;if("array"!==wr(t))return[new xt(r,t,`array expected, ${wr(t)} found`)];const i=e.styleSpec;let n,o=[];if(t.length<1)return[new xt(r,t,"filter array must have at least 1 element")];switch(o=o.concat(ii({key:`${r}[0]`,value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Wr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Wr(t[1])&&o.push(new xt(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new xt(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(n=wr(t[1]),"string"!==n&&o.push(new xt(`${r}[1]`,t[1],`string expected, ${n} found`)));for(let a=2;a<t.length;a++)n=wr(t[a]),"$type"===Wr(t[1])?o=o.concat(ii({key:`${r}[${a}]`,value:t[a],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new xt(`${r}[${a}]`,t[a],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let i=1;i<t.length;i++)o=o.concat(pi({key:`${r}[${i}]`,value:t[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=wr(t[1]),2!==t.length?o.push(new xt(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==n&&o.push(new xt(`${r}[1]`,t[1],`string expected, ${n} found`));break;case"within":n=wr(t[1]),2!==t.length?o.push(new xt(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==n&&o.push(new xt(`${r}[1]`,t[1],`object expected, ${n} found`))}return o}function di(e,t){const r=e.key,i=e.validateSpec,n=e.style,o=e.styleSpec,a=e.value,l=e.objectKey,c=o[`${t}_${e.layerType}`];if(!c)return[];const u=l.match(/^(.*)-transition$/);if("paint"===t&&u&&c[u[1]]&&c[u[1]].transition)return i({key:r,value:a,valueSpec:o.transition,style:n,styleSpec:o});const h=e.valueSpec||c[l];if(!h)return[new xt(r,a,`unknown property "${l}"`)];let p;if("string"===wr(a)&&_r(h)&&!h.tokens&&(p=/^{([^}]+)}$/.exec(a)))return[new xt(r,a,`"${l}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(p[1])} }\`.`)];const d=[];return"symbol"===e.layerType&&("text-field"===l&&n&&!n.glyphs&&d.push(new xt(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&Sr(Xr(a))&&"identity"===Wr(a.type)&&d.push(new xt(r,a,'"text-font" does not support identity functions'))),d.concat(i({key:e.key,value:a,valueSpec:h,style:n,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:l}))}function fi(e){return di(e,"paint")}function mi(e){return di(e,"layout")}function gi(e){let t=[];const r=e.value,i=e.key,n=e.style,o=e.styleSpec;r.type||r.ref||t.push(new xt(i,r,'either "type" or "ref" is required'));let a=Wr(r.type);const l=Wr(r.ref);if(r.id){const o=Wr(r.id);for(let a=0;a<e.arrayIndex;a++){const e=n.layers[a];Wr(e.id)===o&&t.push(new xt(i,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new xt(i,r[e],`"${e}" is prohibited for ref layers`))})),n.layers.forEach((t=>{Wr(t.id)===l&&(e=t)})),e?e.ref?t.push(new xt(i,r.ref,"ref cannot reference another ref layer")):a=Wr(e.type):t.push(new xt(i,r.ref,`ref layer "${l}" not found`))}else if("background"!==a)if(r.source){const e=n.sources&&n.sources[r.source],o=e&&Wr(e.type);e?"vector"===o&&"raster"===a?t.push(new xt(i,r.source,`layer "${r.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new xt(i,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new xt(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new xt(i,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new xt(i,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new xt(i,r.source,`source "${r.source}" not found`))}else t.push(new xt(i,r,'missing required property "source"'));return t=t.concat(Yr({key:i,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${i}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"}),filter:ui,layout:e=>Yr({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>mi(Pe({layerType:a},e))}}),paint:e=>Yr({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>fi(Pe({layerType:a},e))}})}})),t}function yi(e){const t=e.value,r=e.key,i=wr(t);return"string"!==i?[new xt(r,t,`string expected, ${i} found`)]:[]}const _i={promoteId:function({key:e,value:t}){if("string"===wr(t))return yi({key:e,value:t});{const r=[];for(const i in t)r.push(...yi({key:`${e}.${i}`,value:t[i]}));return r}}};function xi(e){const t=e.value,r=e.key,i=e.styleSpec,n=e.style,o=e.validateSpec;if(!t.type)return[new xt(r,t,'"type" is required')];const a=Wr(t.type);let l;switch(a){case"vector":case"raster":case"raster-dem":return l=Yr({key:r,value:t,valueSpec:i[`source_${a.replace("-","_")}`],style:e.style,styleSpec:i,objectElementValidators:_i,validateSpec:o}),l;case"geojson":if(l=Yr({key:r,value:t,valueSpec:i.source_geojson,style:n,styleSpec:i,validateSpec:o,objectElementValidators:_i}),t.cluster)for(const e in t.clusterProperties){const[i,n]=t.clusterProperties[e],a="string"==typeof i?[i,["accumulated"],["get",e]]:i;l.push(...ti({key:`${r}.${e}.map`,value:n,validateSpec:o,expressionContext:"cluster-map"})),l.push(...ti({key:`${r}.${e}.reduce`,value:a,validateSpec:o,expressionContext:"cluster-reduce"}))}return l;case"video":return Yr({key:r,value:t,valueSpec:i.source_video,style:n,validateSpec:o,styleSpec:i});case"image":return Yr({key:r,value:t,valueSpec:i.source_image,style:n,validateSpec:o,styleSpec:i});case"canvas":return[new xt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ii({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,validateSpec:o,styleSpec:i})}}function Si(e){const t=e.value,r=e.styleSpec,i=r.light,n=e.style;let o=[];const a=wr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new xt("light",t,`object expected, ${a} found`)]),o;for(const a in t){const l=a.match(/^(.*)-transition$/);o=o.concat(l&&i[l[1]]&&i[l[1]].transition?e.validateSpec({key:a,value:t[a],valueSpec:r.transition,validateSpec:e.validateSpec,style:n,styleSpec:r}):i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],validateSpec:e.validateSpec,style:n,styleSpec:r}):[new xt(a,t[a],`unknown property "${a}"`)])}return o}function Ci(e){const t=e.value,r=e.styleSpec,i=r.terrain,n=e.style;let o=[];const a=wr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new xt("terrain",t,`object expected, ${a} found`)]),o;for(const a in t)o=o.concat(i[a]?e.validateSpec({key:a,value:t[a],valueSpec:i[a],validateSpec:e.validateSpec,style:n,styleSpec:r}):[new xt(a,t[a],`unknown property "${a}"`)]);return o}function Mi(e){let t=[];const r=e.value,i=e.key;if(Array.isArray(r)){const n=[],o=[];for(const a in r)r[a].id&&n.includes(r[a].id)&&t.push(new xt(i,r,`all the sprites' ids must be unique, but ${r[a].id} is duplicated`)),n.push(r[a].id),r[a].url&&o.includes(r[a].url)&&t.push(new xt(i,r,`all the sprites' URLs must be unique, but ${r[a].url} is duplicated`)),o.push(r[a].url),t=t.concat(Yr({key:`${i}[${a}]`,value:r[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return yi({key:i,value:r})}const Ei={"*":()=>[],array:Kr,boolean:function(e){const t=e.value,r=e.key,i=wr(t);return"boolean"!==i?[new xt(r,t,`boolean expected, ${i} found`)]:[]},number:Jr,color:function(e){const t=e.key,r=e.value,i=wr(r);return"string"!==i?[new xt(t,r,`color expected, ${i} found`)]:oe.parse(String(r))?[]:[new xt(t,r,`color expected, "${r}" found`)]},constants:$r,enum:ii,filter:ui,function:Qr,layer:gi,object:Yr,source:xi,light:Si,terrain:Ci,string:yi,formatted:function(e){return 0===yi(e).length?[]:ti(e)},resolvedImage:function(e){return 0===yi(e).length?[]:ti(e)},padding:function(e){const t=e.key,r=e.value;if("array"===wr(r)){if(r.length<1||r.length>4)return[new xt(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const i={type:"number"};let n=[];for(let o=0;o<r.length;o++)n=n.concat(e.validateSpec({key:`${t}[${o}]`,value:r[o],validateSpec:e.validateSpec,valueSpec:i}));return n}return Jr({key:t,value:r,valueSpec:{}})},sprite:Mi};function Ai(e){const t=e.value,r=e.valueSpec,i=e.styleSpec;return e.validateSpec=Ai,r.expression&&Sr(Wr(t))?Qr(e):r.expression&&Ir(Xr(t))?ti(e):r.type&&Ei[r.type]?Ei[r.type](e):Yr(Pe({},e,{valueSpec:r.type?i[r.type]:r}))}function Pi(e){const t=e.value,r=e.key,i=yi(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new xt(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new xt(r,t,'"glyphs" url must include a "{range}" token'))),i}function Oi(e,t=ne){let r=[];return r=r.concat(Ai({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Ai,objectElementValidators:{glyphs:Pi,"*":()=>[]}})),e.constants&&(r=r.concat($r({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:Ai}))),Li(r)}function Ii(e){return function(t){return e({...t,validateSpec:Ai})}}function Li(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function ki(e){return function(...t){return Li(e.apply(this,t))}}Oi.source=ki(Ii(xi)),Oi.sprite=ki(Ii(Mi)),Oi.glyphs=ki(Ii(Pi)),Oi.light=ki(Ii(Si)),Oi.terrain=ki(Ii(Ci)),Oi.layer=ki(Ii(gi)),Oi.filter=ki(Ii(ui)),Oi.paintProperty=ki(Ii(fi)),Oi.layoutProperty=ki(Ii(mi));const Fi=Oi,Di=Fi.light,ji=Fi.paintProperty,zi=Fi.layoutProperty;function Ri(e,t){let r=!1;if(t&&t.length)for(const i of t)e.fire(new st(new Error(i.message))),r=!0;return r}class Ur{constructor(e,t,r){const i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const n=new Int32Array(this.arrayBuffer);e=n[0],this.d=(t=n[1])+2*(r=n[2]);for(let e=0;e<this.d*this.d;e++){const t=n[3+e],r=n[3+e+1];i.push(t===r?null:n.subarray(t,r))}const o=n[3+i.length+1];this.keys=n.subarray(n[3+i.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*r;for(let e=0;e<this.d*this.d;e++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;const n=r/t*e;this.min=-n,this.max=e+n}insert(e,t,r,i,n){this._forEachCell(t,r,i,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,r,i,n,o){this.cells[n].push(o)}query(e,t,r,i,n){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=r&&a<=i&&!n)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,r,i,this._queryCell,o,{},n),o}}_queryCell(e,t,r,i,n,o,a,l){const c=this.cells[n];if(null!==c){const n=this.keys,u=this.bboxes;for(let h=0;h<c.length;h++){const p=c[h];if(void 0===a[p]){const c=4*p;(l?l(u[c+0],u[c+1],u[c+2],u[c+3]):e<=u[c+2]&&t<=u[c+3]&&r>=u[c+0]&&i>=u[c+1])?(a[p]=!0,o.push(n[p])):a[p]=!1}}}}_forEachCell(e,t,r,i,n,o,a,l){const c=this._convertToCellCoord(e),u=this._convertToCellCoord(t),h=this._convertToCellCoord(r),p=this._convertToCellCoord(i);for(let d=c;d<=h;d++)for(let c=u;c<=p;c++){const u=this.d*c+d;if((!l||l(this._convertFromCellCoord(d),this._convertFromCellCoord(c),this._convertFromCellCoord(d+1),this._convertFromCellCoord(c+1)))&&n.call(this,e,t,r,i,u,o,a,l))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let r=0;for(let e=0;e<this.cells.length;e++)r+=this.cells[e].length;const i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let n=t;for(let t=0;t<e.length;t++){const r=e[t];i[3+t]=n,i.set(r,n),n+=r.length}return i[3+e.length]=n,i.set(this.keys,n),n+=this.keys.length,i[3+e.length+1]=n,i.set(this.bboxes,n),n+=this.bboxes.length,i.buffer}static serialize(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}}static deserialize(e){return new Ur(e.buffer)}}const Ni={};function Bi(e,t,r={}){if(Ni[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Ni[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}Bi("Object",Object),Bi("TransferableGridIndex",Ur),Bi("Color",oe),Bi("Error",Error),Bi("AJAXError",R),Bi("ResolvedImage",pe),Bi("StylePropertyFunction",Xi),Bi("StyleExpression",qi,{omit:["_evaluator"]}),Bi("ZoomDependentExpression",Hi),Bi("ZoomConstantExpression",Gi),Bi("CompoundExpression",Ze,{omit:["_evaluate"]});for(const e in pr)pr[e]._classRegistryKey||Bi(`Expression_${e}`,pr[e]);function Vi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ui(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob)return e;if(Vi(e))return t&&t.push(e),e;if(O(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const r=e;return t&&t.push(r.buffer),r}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const r=[];for(const i of e)r.push(Ui(i,t));return r}if("object"==typeof e){const r=e.constructor,i=r._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");if(!Ni[i])throw new Error(`${i} is not registered.`);const n=r.serialize?r.serialize(e,t):{};if(r.serialize){if(t&&n===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const r in e){if(!e.hasOwnProperty(r))continue;if(Ni[i].omit.indexOf(r)>=0)continue;const o=e[r];n[r]=Ni[i].shallow.indexOf(r)>=0?o:Ui(o,t)}e instanceof Error&&(n.message=e.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(n.$name=i),n}throw new Error("can't serialize object of type "+typeof e)}function Zi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||Vi(e)||O(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(Zi);if("object"==typeof e){const t=e.$name||"Object";if(!Ni[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Ni[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const i=Object.create(r.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const n=e[r];i[r]=Ni[t].shallow.indexOf(r)>=0?n:Zi(n)}return i}throw new Error("can't deserialize object of type "+typeof e)}class Gr{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const $i={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Wi(e){for(const t of e)if(Yi(t.charCodeAt(0)))return!0;return!1}function Yi(e){return!(746!==e&&747!==e&&(e<4352||!($i["Bopomofo Extended"](e)||$i.Bopomofo(e)||$i["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||$i["CJK Compatibility Ideographs"](e)||$i["CJK Compatibility"](e)||$i["CJK Radicals Supplement"](e)||$i["CJK Strokes"](e)||!(!$i["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||$i["CJK Unified Ideographs Extension A"](e)||$i["CJK Unified Ideographs"](e)||$i["Enclosed CJK Letters and Months"](e)||$i["Hangul Compatibility Jamo"](e)||$i["Hangul Jamo Extended-A"](e)||$i["Hangul Jamo Extended-B"](e)||$i["Hangul Jamo"](e)||$i["Hangul Syllables"](e)||$i.Hiragana(e)||$i["Ideographic Description Characters"](e)||$i.Kanbun(e)||$i["Kangxi Radicals"](e)||$i["Katakana Phonetic Extensions"](e)||$i.Katakana(e)&&12540!==e||!(!$i["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!$i["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||$i["Unified Canadian Aboriginal Syllabics"](e)||$i["Unified Canadian Aboriginal Syllabics Extended"](e)||$i["Vertical Forms"](e)||$i["Yijing Hexagram Symbols"](e)||$i["Yi Syllables"](e)||$i["Yi Radicals"](e))))}function Ki(e){return e>=1424&&e<=2303||$i["Arabic Presentation Forms-A"](e)||$i["Arabic Presentation Forms-B"](e)}function Ji(e,t){return!(!t&&Ki(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||$i.Khmer(e))}function Qi(e){for(const t of e)if(Ki(t.charCodeAt(0)))return!0;return!1}const Pn="deferred",On="loading",Ln="loaded";let kn=null,Fn="unavailable",jn=null;const Rn=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Fn="error"),kn&&kn(e)};function Nn(){Bn.fire(new rt("pluginStateChange",{pluginStatus:Fn,pluginURL:jn}))}const Bn=new nt,Vn=function(){return Fn},Un=function(){if(Fn!==Pn||!jn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fn=On,Nn(),jn&&H({url:jn},(e=>{e?Rn(e):(Fn=Ln,Nn())}))},Gn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fn===Ln||null!=Gn.applyArabicShaping,isLoading:()=>Fn===On,setState(e){if(!T())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Fn=e.pluginStatus,jn=e.pluginURL},isParsed(){if(!T())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Gn.applyArabicShaping},getPluginURL(){if(!T())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return jn}};class us{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gr,this.transition={})}isSupportedScript(e){return function(e,t){for(const r of e)if(!Ji(r.charCodeAt(0),t))return!1;return!0}(e,Gn.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class ps{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Sr(e))return new Xi(e,t);if(Ir(e)){const r=kr(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"color"===t.type&&"string"==typeof e?r=oe.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)||(r=ue.parse(e)),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class ds{constructor(e){this.property=e,this.value=new ps(e,void 0)}transitioned(e,t){return new fs(this.property,this.value,t,f({},e.transition,this.transition),e.now)}untransitioned(){return new fs(this.property,this.value,null,{},0)}}class ms{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return w(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ds(this._values[e].property)),this._values[e].value=new ps(this._values[e].property,null===t?void 0:w(t))}getTransition(e){return w(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ds(this._values[e].property)),this._values[e].transition=w(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const i=this.getTransition(t);void 0!==i&&(e[`${t}-transition`]=i)}return e}transitioned(e,t){const r=new _s(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].transitioned(e,t._values[i]);return r}untransitioned(){const e=new _s(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class fs{constructor(e,t,r,i,n){this.property=e,this.value=t,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const i=e.now||0,n=this.value.possiblyEvaluate(e,t,r),o=this.prior;if(o){if(i>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(i<this.begin)return o.possiblyEvaluate(e,t,r);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,r),n,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}(a))}}return n}}class _s{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const i=new xs(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].possiblyEvaluate(e,t,r);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class gs{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return w(this._values[e].value)}setValue(e,t){this._values[e]=new ps(this._values[e].property,null===t?void 0:w(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const i=new xs(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].possiblyEvaluate(e,t,r);return i}}class ys{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,i){return this.property.evaluate(this.value,this.parameters,e,t,r,i)}}class xs{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class vs{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,r){const i=tr[this.specification.type];return i?i(e,t,r):e}}class bs{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,i){return new ys(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,i)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ys(this,{kind:"constant",value:void 0},e.parameters);const i=tr[this.specification.type];if(i){const n=i(e.value.value,t.value.value,r);return new ys(this,{kind:"constant",value:n},e.parameters)}return e}evaluate(e,t,r,i,n,o){return"constant"===e.kind?e.value:e.evaluate(t,r,i,n,o)}}class ws extends bs{possiblyEvaluate(e,t,r,i){if(void 0===e.value)return new ys(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},r,i),o="resolvedImage"===e.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,t);return new ys(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ys(this,{kind:"constant",value:r},t)}return new ys(this,e.expression,t)}evaluate(e,t,r,i,n,o){if("source"===e.kind){const a=e.evaluate(t,r,i,n,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,i),e.evaluate({zoom:Math.floor(t.zoom)},r,i),e.evaluate({zoom:Math.floor(t.zoom)+1},r,i),t):e.value}_calculate(e,t,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Ts{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,i){if(void 0!==e.value){if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},r,i);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new us(Math.floor(t.zoom-1),t)),e.expression.evaluate(new us(Math.floor(t.zoom),t)),e.expression.evaluate(new us(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Ss{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,i){return!!e.expression.evaluate(t,null,{},r,i)}interpolate(){return!1}}class Is{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const r=e[t];r.specification.overridable&&this.overridableProperties.push(t);const i=this.defaultPropertyValues[t]=new ps(r,void 0),n=this.defaultTransitionablePropertyValues[t]=new ds(r);this.defaultTransitioningPropertyValues[t]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=i.possiblyEvaluate({})}}}Bi("DataDrivenProperty",bs),Bi("DataConstantProperty",vs),Bi("CrossFadedDataDrivenProperty",ws),Bi("CrossFadedProperty",Ts),Bi("ColorRampProperty",Ss);const Zn="-transition";class Es extends nt{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new gs(t.layout)),t.paint)){this._transitionablePaint=new ms(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xs(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(zi,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(Zn)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(ji,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(e.endsWith(Zn))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],n=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||n||i||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),b(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,i,n={}){return(!n||!1!==n.validate)&&Ri(this,e.call(Fi,{key:t,layerType:this.type,objectKey:r,value:i,styleSpec:ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof ys&&_r(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const $n={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Cs{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ms{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function eo(e,t=1){let r=0,i=0;return{members:e.map((e=>{const n=$n[e.type].BYTES_PER_ELEMENT,o=r=to(r,Math.max(t,n)),a=e.components||1;return i=Math.max(i,n),r+=n*a,{name:e.name,type:e.type,components:a,offset:o}})),size:to(r,Math.max(i,t)),alignment:t}}function to(e,t){return Math.ceil(e/t)*t}class Ds extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=r,e}}Ds.prototype.bytesPerElement=4,Bi("StructArrayLayout2i4",Ds);class Ls extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.int16[n+0]=t,this.int16[n+1]=r,this.int16[n+2]=i,e}}Ls.prototype.bytesPerElement=6,Bi("StructArrayLayout3i6",Ls);class Bs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,i)}emplace(e,t,r,i,n){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=i,this.int16[o+3]=n,e}}Bs.prototype.bytesPerElement=8,Bi("StructArrayLayout4i8",Bs);class Rs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const l=6*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=i,this.int16[l+3]=n,this.int16[l+4]=o,this.int16[l+5]=a,e}}Rs.prototype.bytesPerElement=12,Bi("StructArrayLayout2i4i12",Rs);class Fs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const l=4*e,c=8*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.uint8[c+4]=i,this.uint8[c+5]=n,this.uint8[c+6]=o,this.uint8[c+7]=a,e}}Fs.prototype.bytesPerElement=8,Bi("StructArrayLayout2i4ub8",Fs);class Os extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=r,e}}Os.prototype.bytesPerElement=8,Bi("StructArrayLayout2f8",Os);class Vs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,l,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,i,n,o,a,l,c,u)}emplace(e,t,r,i,n,o,a,l,c,u,h){const p=10*e;return this.uint16[p+0]=t,this.uint16[p+1]=r,this.uint16[p+2]=i,this.uint16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=l,this.uint16[p+7]=c,this.uint16[p+8]=u,this.uint16[p+9]=h,e}}Vs.prototype.bytesPerElement=20,Bi("StructArrayLayout10ui20",Vs);class Us extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,l,c,u,h,p){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,r,i,n,o,a,l,c,u,h,p)}emplace(e,t,r,i,n,o,a,l,c,u,h,p,d){const f=12*e;return this.int16[f+0]=t,this.int16[f+1]=r,this.int16[f+2]=i,this.int16[f+3]=n,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=l,this.uint16[f+7]=c,this.int16[f+8]=u,this.int16[f+9]=h,this.int16[f+10]=p,this.int16[f+11]=d,e}}Us.prototype.bytesPerElement=24,Bi("StructArrayLayout4i4ui4i24",Us);class Ns extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.float32[n+0]=t,this.float32[n+1]=r,this.float32[n+2]=i,e}}Ns.prototype.bytesPerElement=12,Bi("StructArrayLayout3f12",Ns);class $s extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}$s.prototype.bytesPerElement=4,Bi("StructArrayLayout1ul4",$s);class qs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,i,n,o,a,l,c)}emplace(e,t,r,i,n,o,a,l,c,u){const h=10*e,p=5*e;return this.int16[h+0]=t,this.int16[h+1]=r,this.int16[h+2]=i,this.int16[h+3]=n,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[p+3]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}qs.prototype.bytesPerElement=20,Bi("StructArrayLayout6i1ul2ui20",qs);class js extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const l=6*e;return this.int16[l+0]=t,this.int16[l+1]=r,this.int16[l+2]=i,this.int16[l+3]=n,this.int16[l+4]=o,this.int16[l+5]=a,e}}js.prototype.bytesPerElement=12,Bi("StructArrayLayout2i2i2i12",js);class Zs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,i,n)}emplace(e,t,r,i,n,o){const a=4*e,l=8*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=i,this.int16[l+6]=n,this.int16[l+7]=o,e}}Zs.prototype.bytesPerElement=16,Bi("StructArrayLayout2f1f2i16",Zs);class Gs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,i)}emplace(e,t,r,i,n){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=r,this.float32[a+1]=i,this.float32[a+2]=n,e}}Gs.prototype.bytesPerElement=12,Bi("StructArrayLayout2ub2f12",Gs);class Hs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,this.uint16[n+2]=i,e}}Hs.prototype.bytesPerElement=6,Bi("StructArrayLayout3ui6",Hs);class Ws extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y){const v=this.length;return this.resize(v+1),this.emplace(v,e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y)}emplace(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v){const _=24*e,b=12*e,x=48*e;return this.int16[_+0]=t,this.int16[_+1]=r,this.uint16[_+2]=i,this.uint16[_+3]=n,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=l,this.uint16[_+10]=c,this.uint16[_+11]=u,this.uint16[_+12]=h,this.float32[b+7]=p,this.float32[b+8]=d,this.uint8[x+36]=f,this.uint8[x+37]=m,this.uint8[x+38]=g,this.uint32[b+10]=y,this.int16[_+22]=v,e}}Ws.prototype.bytesPerElement=48,Bi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ws);class Xs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v,_,b,x,w,S,C,M,E,T,A){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v,_,b,x,w,S,C,M,E,T,A)}emplace(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v,_,b,x,w,S,C,M,E,T,A,P){const O=34*e,I=17*e;return this.int16[O+0]=t,this.int16[O+1]=r,this.int16[O+2]=i,this.int16[O+3]=n,this.int16[O+4]=o,this.int16[O+5]=a,this.int16[O+6]=l,this.int16[O+7]=c,this.uint16[O+8]=u,this.uint16[O+9]=h,this.uint16[O+10]=p,this.uint16[O+11]=d,this.uint16[O+12]=f,this.uint16[O+13]=m,this.uint16[O+14]=g,this.uint16[O+15]=y,this.uint16[O+16]=v,this.uint16[O+17]=_,this.uint16[O+18]=b,this.uint16[O+19]=x,this.uint16[O+20]=w,this.uint16[O+21]=S,this.uint16[O+22]=C,this.uint32[I+12]=M,this.float32[I+13]=E,this.float32[I+14]=T,this.float32[I+15]=A,this.float32[I+16]=P,e}}Xs.prototype.bytesPerElement=68,Bi("StructArrayLayout8i15ui1ul4f68",Xs);class Ks extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ks.prototype.bytesPerElement=4,Bi("StructArrayLayout1f4",Ks);class Ys extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=4*e;return this.uint32[2*e+0]=t,this.uint16[n+2]=r,this.uint16[n+3]=i,e}}Ys.prototype.bytesPerElement=8,Bi("StructArrayLayout1ul2ui8",Ys);class Js extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,e}}Js.prototype.bytesPerElement=4,Bi("StructArrayLayout2ui4",Js);class Qs extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Qs.prototype.bytesPerElement=2,Bi("StructArrayLayout1ui2",Qs);class tn extends Ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,i)}emplace(e,t,r,i,n){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=i,this.float32[o+3]=n,e}}tn.prototype.bytesPerElement=16,Bi("StructArrayLayout4f16",tn);class en extends Cs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new n(this.anchorPointX,this.anchorPointY)}}en.prototype.size=20;class rn extends qs{get(e){return new en(this,e)}}Bi("CollisionBoxArray",rn);class sn extends Cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}sn.prototype.size=48;class nn extends Ws{get(e){return new sn(this,e)}}Bi("PlacedSymbolArray",nn);class an extends Cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}an.prototype.size=68;class on extends Xs{get(e){return new an(this,e)}}Bi("SymbolInstanceArray",on);class ln extends Ks{getoffsetX(e){return this.float32[1*e+0]}}Bi("GlyphOffsetArray",ln);class cn extends Ls{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Bi("SymbolLineVertexArray",cn);class hn extends Cs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}hn.prototype.size=8;class un extends Ys{get(e){return new hn(this,e)}}Bi("FeatureIndexArray",un);class pn extends Ds{}class dn extends Ls{}class mn extends Bs{}class fn extends Ds{}class _n extends Ds{}class gn extends Rs{}class yn extends Fs{}class xn extends Os{}class vn extends Vs{}class bn extends Us{}class wn extends Ns{}class Tn extends $s{}class Sn extends js{}class In extends Zs{}class An extends Gs{}class En extends Hs{}class zn extends Hs{}class Cn extends Js{}class Mn extends Qs{}const ro=eo([{name:"a_pos",components:2,type:"Int16"}],4),{members:io}=ro;class Dn{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,i){let n=this.segments[this.segments.length-1];return e>Dn.MAX_VERTEX_ARRAY_LENGTH&&C(`Max vertices per segment is ${Dn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!n||n.vertexLength+e>Dn.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==i)&&(n={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(n.sortKey=i),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,i){return new Dn([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}function oo(e,t){return 256*(e=h(Math.floor(e),0,255))+h(Math.floor(t),0,255)}Dn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bi("SegmentVector",Dn);const so=eo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var lo={exports:{}},co={exports:{}};!function(e){e.exports=function(e,t){var r,i,n,o,a,l,c,u;for(i=e.length-(r=3&e.length),n=t,a=3432918353,l=461845907,u=0;u<i;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,n=27492+(65535&(o=5*(65535&(n=(n^=c=(65535&(c=(c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*l+(((c>>>16)*l&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,r){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:n^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(u)))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<15|c>>>17))*l+(((c>>>16)*l&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}}(co);var uo=co.exports,ho={exports:{}};!function(e){e.exports=function(e,t){for(var r,i=e.length,n=t^i,o=0;i>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}}(ho);var po=uo,fo=ho.exports;lo.exports=po,lo.exports.murmur3=po,lo.exports.murmur2=fo;var mo=t(lo.exports);class qn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,i){this.ids.push(go(e)),this.positions.push(t,r,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=go(e);let r=0,i=this.ids.length-1;for(;r<i;){const e=r+i>>1;this.ids[e]>=t?i=e:r=e+1}const n=[];for(;this.ids[r]===t;)n.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return n}static serialize(e,t){const r=new Float64Array(e.ids),i=new Uint32Array(e.positions);return yo(r,i,0,r.length-1),t&&t.push(r.buffer,i.buffer),{ids:r,positions:i}}static deserialize(e){const t=new qn;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function go(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:mo(String(e))}function yo(e,t,r,i){for(;r<i;){const n=e[r+i>>1];let o=r-1,a=i+1;for(;;){do{o++}while(e[o]<n);do{a--}while(e[a]>n);if(o>=a)break;vo(e,o,a),vo(t,3*o,3*a),vo(t,3*o+1,3*a+1),vo(t,3*o+2,3*a+2)}a-r<i-a?(yo(e,t,r,a),r=a+1):(yo(e,t,a+1,i),i=a)}}function vo(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}Bi("FeaturePositionMap",qn);class Hn{constructor(e,t){this.gl=e.gl,this.location=t}}class Wn extends Hn{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}class Xn extends Hn{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Kn extends Hn{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}class Yn extends Hn{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}class Jn extends Hn{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Qn extends Hn{constructor(e,t){super(e,t),this.current=oe.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const _o=new Float32Array(16);class ea extends Hn{constructor(e,t){super(e,t),this.current=_o}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}function bo(e){return[oo(255*e.r,255*e.g),oo(255*e.b,255*e.a)]}class ra{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r){e.set(r.constantOr(this.value))}getBinding(e,t,r){return"color"===this.type?new Qn(e,t):new Xn(e,t)}}class sa{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,r,i){const n="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;n&&e.set(n)}getBinding(e,t,r){return"u_pattern"===r.substr(0,9)?new Jn(e,t):new Xn(e,t)}}class na{constructor(e,t,r,i){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(e,t,r,i,n){const o=this.paintVertexArray.length,a=this.expression.evaluate(new us(0),t,{},i,[],n);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,r,i){const n=this.expression.evaluate({zoom:0},r,i);this._setPaintValue(e,t,n)}_setPaintValue(e,t,r){if("color"===this.type){const i=bo(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class aa{constructor(e,t,r,i,n,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=i,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,r,i,n){const o=this.expression.evaluate(new us(this.zoom),t,{},i,[],n),a=this.expression.evaluate(new us(this.zoom+1),t,{},i,[],n),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,a)}updatePaintArray(e,t,r,i){const n=this.expression.evaluate({zoom:this.zoom},r,i),o=this.expression.evaluate({zoom:this.zoom+1},r,i);this._setPaintValue(e,t,n,o)}_setPaintValue(e,t,r,i){if("color"===this.type){const n=bo(r),o=bo(i);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1],o[0],o[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r,i);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const r=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=h(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,t,r){return new Xn(e,t)}}class oa{constructor(e,t,r,i,n,o){this.expression=e,this.type=t,this.useIntegerZoom=r,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(e,t,r){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,i,n){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],n)}_setPaintValues(e,t,r,i){if(!i||!r)return;const{min:n,mid:o,max:a}=r,l=i[n],c=i[o],u=i[a];if(l&&c&&u)for(let r=e;r<t;r++)this.zoomInPaintVertexArray.emplace(r,c.tl[0],c.tl[1],c.br[0],c.br[1],l.tl[0],l.tl[1],l.br[0],l.br[1],c.pixelRatio,l.pixelRatio),this.zoomOutPaintVertexArray.emplace(r,c.tl[0],c.tl[1],c.br[0],c.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],c.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,so.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,so.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class la{constructor(e,t,r){this.binders={},this._buffers=[];const i=[];for(const n in e.paint._values){if(!r(n))continue;const o=e.paint.get(n);if(!(o instanceof ys&&_r(o.property.specification)))continue;const a=xo(n,e.type),l=o.value,c=o.property.specification.type,u=o.property.useIntegerZoom,h=o.property.specification["property-type"],p="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===l.kind)this.binders[n]=p?new sa(l.value,a):new ra(l.value,a,c),i.push(`/u_${n}`);else if("source"===l.kind||p){const r=wo(n,c,"source");this.binders[n]=p?new oa(l,c,u,t,r,e.id):new na(l,a,c,r),i.push(`/a_${n}`)}else{const e=wo(n,c,"composite");this.binders[n]=new aa(l,a,c,u,t,e),i.push(`/z_${n}`)}}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof na||t instanceof aa?t.maxValue:0}populatePaintArrays(e,t,r,i,n){for(const o in this.binders){const a=this.binders[o];(a instanceof na||a instanceof aa||a instanceof oa)&&a.populatePaintArray(e,t,r,i,n)}}setConstantPatternPositions(e,t){for(const r in this.binders){const i=this.binders[r];i instanceof sa&&i.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,i,n){let o=!1;for(const a in e){const l=t.getPositions(a);for(const t of l){const l=r.feature(t.index);for(const r in this.binders){const c=this.binders[r];if((c instanceof na||c instanceof aa||c instanceof oa)&&!0===c.expression.isStateDependent){const u=i.paint.get(r);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[a],n),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof ra||r instanceof sa)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof na||r instanceof aa)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name);else if(r instanceof oa)for(let t=0;t<so.members.length;t++)e.push(so.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof ra||r instanceof sa||r instanceof aa)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const r=[];for(const i in this.binders){const n=this.binders[i];if(n instanceof ra||n instanceof sa||n instanceof aa)for(const o of n.uniformNames)if(t[o]){const a=n.getBinding(e,t[o],o);r.push({name:o,property:i,binding:a})}}return r}setUniforms(e,t,r,i){for(const{name:e,property:n,binding:o}of t)this.binders[n].setUniform(o,i,r.get(n),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof oa){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof na||r instanceof aa)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof na||r instanceof aa||r instanceof oa)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof na||t instanceof aa||t instanceof oa)&&t.destroy()}}}class ca{constructor(e,t,r=(()=>!0)){this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new la(i,t,r);this.needsUpload=!1,this._featureMap=new qn,this._bufferOffset=0}populatePaintArrays(e,t,r,i,n,o){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,i,n,o);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,i){for(const n of r)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(e,this._featureMap,t,n,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function xo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function wo(e,t,r){const i={color:{source:Os,composite:tn},number:{source:Ks,composite:Os}},n=function(e){return{"line-pattern":{source:vn,composite:vn},"fill-pattern":{source:vn,composite:vn},"fill-extrusion-pattern":{source:vn,composite:vn}}[e]}(e);return n&&n[r]||i[t][r]}Bi("ConstantBinder",ra),Bi("CrossFadedConstantBinder",sa),Bi("SourceExpressionBinder",na),Bi("CrossFadedCompositeBinder",oa),Bi("CompositeExpressionBinder",aa),Bi("ProgramConfiguration",la,{omit:["_buffers"]}),Bi("ProgramConfigurationSet",ca);var So=8192;const Co=Math.pow(2,14)-1,Mo=-Co-1;function Eo(e){const t=So/e.extent,r=e.loadGeometry();for(let e=0;e<r.length;e++){const i=r[e];for(let e=0;e<i.length;e++){const r=i[e],n=Math.round(r.x*t),o=Math.round(r.y*t);r.x=h(n,Mo,Co),r.y=h(o,Mo,Co),(n<r.x||n>r.x+1||o<r.y||o>r.y+1)&&C("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function To(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Eo(e):[]}}function Ao(e,t,r,i,n){e.emplaceBack(2*t+(i+1)/2,2*r+(n+1)/2)}class ya{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new fn,this.indexArray=new zn,this.segments=new Dn,this.programConfigurations=new ca(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){const i=this.layers[0],n=[];let o=null,a=!1;"circle"===i.type&&(o=i.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:t,id:i,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=To(t,e);if(!this.layers[0]._featureFilter.filter(new us(this.zoom),u,r))continue;const h=a?o.evaluate(u,{},r):void 0,p={id:i,properties:t.properties,type:t.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Eo(t),patterns:{},sortKey:h};n.push(p)}a&&n.sort(((e,t)=>e.sortKey-t.sortKey));for(const i of n){const{geometry:n,index:o,sourceLayerIndex:a}=i,l=e[o].feature;this.addFeature(i,n,o,r),t.featureIndex.insert(l,n,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,io),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,i){for(const r of t)for(const t of r){const r=t.x,i=t.y;if(r<0||r>=So||i<0||i>=So)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=n.vertexLength;Ao(this.layoutVertexArray,r,i,-1,-1),Ao(this.layoutVertexArray,r,i,1,-1),Ao(this.layoutVertexArray,r,i,1,1),Ao(this.layoutVertexArray,r,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},i)}}function Po(e,t){for(let r=0;r<e.length;r++)if(Ro(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Ro(e,t[r]))return!0;return!!ko(e,t)}function Oo(e,t,r){return!!Ro(e,t)||!!Do(t,e,r)}function Io(e,t){if(1===e.length)return zo(t,e[0]);for(let r=0;r<t.length;r++){const i=t[r];for(let t=0;t<i.length;t++)if(Ro(e,i[t]))return!0}for(let r=0;r<e.length;r++)if(zo(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(ko(e,t[r]))return!0;return!1}function Lo(e,t,r){if(e.length>1){if(ko(e,t))return!0;for(let i=0;i<t.length;i++)if(Do(t[i],e,r))return!0}for(let i=0;i<e.length;i++)if(Do(e[i],t,r))return!0;return!1}function ko(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const i=e[r],n=e[r+1];for(let e=0;e<t.length-1;e++)if(Fo(i,n,t[e],t[e+1]))return!0}return!1}function Fo(e,t,r,i){return M(e,r,i)!==M(t,r,i)&&M(e,t,r)!==M(e,t,i)}function Do(e,t,r){const i=r*r;if(1===t.length)return e.distSqr(t[0])<i;for(let r=1;r<t.length;r++)if(jo(e,t[r-1],t[r])<i)return!0;return!1}function jo(e,t,r){const i=t.distSqr(r);if(0===i)return e.distSqr(t);const n=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/i;return e.distSqr(n<0?t:n>1?r:r.sub(t)._mult(n)._add(t))}function zo(e,t){let r,i,n,o=!1;for(let a=0;a<e.length;a++){r=e[a];for(let e=0,a=r.length-1;e<r.length;a=e++)i=r[e],n=r[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(o=!o)}return o}function Ro(e,t){let r=!1;for(let i=0,n=e.length-1;i<e.length;n=i++){const o=e[i],a=e[n];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function No(e,t,r){const i=r[0],n=r[2];if(e.x<i.x&&t.x<i.x||e.x>n.x&&t.x>n.x||e.y<i.y&&t.y<i.y||e.y>n.y&&t.y>n.y)return!1;const o=M(e,t,r[0]);return o!==M(e,t,r[1])||o!==M(e,t,r[2])||o!==M(e,t,r[3])}function Bo(e,t,r){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Vo(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Uo(e,t,r,i,o){if(!t[0]&&!t[1])return e;const a=n.convert(t)._mult(o);"viewport"===r&&a._rotate(-i);const l=[];for(let t=0;t<e.length;t++)l.push(e[t].sub(a));return l}let Ho,Go;Bi("CircleBucket",ya,{omit:["layers"]});var qo={get paint(){return Go=Go||new Is({"circle-radius":new bs(ne.paint_circle["circle-radius"]),"circle-color":new bs(ne.paint_circle["circle-color"]),"circle-blur":new bs(ne.paint_circle["circle-blur"]),"circle-opacity":new bs(ne.paint_circle["circle-opacity"]),"circle-translate":new vs(ne.paint_circle["circle-translate"]),"circle-translate-anchor":new vs(ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vs(ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vs(ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new bs(ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new bs(ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new bs(ne.paint_circle["circle-stroke-opacity"])})},get layout(){return Ho=Ho||new Is({"circle-sort-key":new bs(ne.layout_circle["circle-sort-key"])})}},Zo=1e-6,$o="undefined"!=typeof Float32Array?Float32Array:Array;function Wo(){var e=new $o(16);return $o!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Yo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ko(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],d=t[10],f=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=r*l-i*a,b=r*c-n*a,x=r*u-o*a,w=i*c-n*l,S=i*u-o*l,C=n*u-o*c,M=h*g-p*m,E=h*y-d*m,T=h*v-f*m,A=p*y-d*g,P=p*v-f*g,O=d*v-f*y,I=_*O-b*P+x*A+w*T-S*E+C*M;return I?(e[0]=(l*O-c*P+u*A)*(I=1/I),e[1]=(n*P-i*O-o*A)*I,e[2]=(g*C-y*S+v*w)*I,e[3]=(d*S-p*C-f*w)*I,e[4]=(c*T-a*O-u*E)*I,e[5]=(r*O-n*T+o*E)*I,e[6]=(y*x-m*C-v*b)*I,e[7]=(h*C-d*x+f*b)*I,e[8]=(a*P-l*T+u*M)*I,e[9]=(i*T-r*P-o*M)*I,e[10]=(m*S-g*x+v*_)*I,e[11]=(p*x-h*S-f*_)*I,e[12]=(l*E-a*A-c*M)*I,e[13]=(r*A-i*E+n*M)*I,e[14]=(g*b-m*w-y*_)*I,e[15]=(h*w-p*b+d*_)*I,e):null}function Jo(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=t[6],h=t[7],p=t[8],d=t[9],f=t[10],m=t[11],g=t[12],y=t[13],v=t[14],_=t[15],b=r[0],x=r[1],w=r[2],S=r[3];return e[0]=b*i+x*l+w*p+S*g,e[1]=b*n+x*c+w*d+S*y,e[2]=b*o+x*u+w*f+S*v,e[3]=b*a+x*h+w*m+S*_,e[4]=(b=r[4])*i+(x=r[5])*l+(w=r[6])*p+(S=r[7])*g,e[5]=b*n+x*c+w*d+S*y,e[6]=b*o+x*u+w*f+S*v,e[7]=b*a+x*h+w*m+S*_,e[8]=(b=r[8])*i+(x=r[9])*l+(w=r[10])*p+(S=r[11])*g,e[9]=b*n+x*c+w*d+S*y,e[10]=b*o+x*u+w*f+S*v,e[11]=b*a+x*h+w*m+S*_,e[12]=(b=r[12])*i+(x=r[13])*l+(w=r[14])*p+(S=r[15])*g,e[13]=b*n+x*c+w*d+S*y,e[14]=b*o+x*u+w*f+S*v,e[15]=b*a+x*h+w*m+S*_,e}function Qo(e,t,r){var i,n,o,a,l,c,u,h,p,d,f,m,g=r[0],y=r[1],v=r[2];return t===e?(e[12]=t[0]*g+t[4]*y+t[8]*v+t[12],e[13]=t[1]*g+t[5]*y+t[9]*v+t[13],e[14]=t[2]*g+t[6]*y+t[10]*v+t[14],e[15]=t[3]*g+t[7]*y+t[11]*v+t[15]):(n=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=t[6],h=t[7],p=t[8],d=t[9],f=t[10],m=t[11],e[0]=i=t[0],e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=c,e[6]=u,e[7]=h,e[8]=p,e[9]=d,e[10]=f,e[11]=m,e[12]=i*g+l*y+p*v+t[12],e[13]=n*g+c*y+d*v+t[13],e[14]=o*g+u*y+f*v+t[14],e[15]=a*g+h*y+m*v+t[15]),e}function es(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ts(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],l=t[2],c=t[3],u=t[4],h=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*i,e[1]=a*n+h*i,e[2]=l*n+p*i,e[3]=c*n+d*i,e[4]=u*n-o*i,e[5]=h*n-a*i,e[6]=p*n-l*i,e[7]=d*n-c*i,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var rs=function(e,t,r,i,n,o,a){var l=1/(t-r),c=1/(i-n),u=1/(o-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*l,e[13]=(n+i)*c,e[14]=(a+o)*u,e[15]=1,e},is=Jo;function ns(e){var t=new $o(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}var os,ss=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e};function as(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,e[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,e[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,e[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,e}os=new $o(3),$o!=Float32Array&&(os[0]=0,os[1]=0,os[2]=0),function(){var e=new $o(4);$o!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var ls=function(e){var t=e[0],r=e[1];return t*t+r*r};function cs(e,t){const r=as([],[e.x,e.y,0,1],t);return new n(r[0]/r[3],r[1]/r[3])}!function(){var e=new $o(2);$o!=Float32Array&&(e[0]=0,e[1]=0)}();class Qa extends ya{}let hs;Bi("HeatmapBucket",Qa,{omit:["layers"]});var As={get paint(){return hs=hs||new Is({"heatmap-radius":new bs(ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new bs(ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vs(ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ss(ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vs(ne.paint_heatmap["heatmap-opacity"])})}};function Ps(e,{width:t,height:r},i,n){if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==t*r*i)throw new RangeError(`mismatched image size. expected: ${n.length} but got: ${t*r*i}`)}else n=new Uint8Array(t*r*i);return e.width=t,e.height=r,e.data=n,e}function ks(e,{width:t,height:r},i){if(t===e.width&&r===e.height)return;const n=Ps({},{width:t,height:r},i);zs(e,n,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},i),e.width=t,e.height=r,e.data=n.data}function zs(e,t,r,i,n,o){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,l=t.data;if(a===l)throw new Error("srcData equals dstData, so image is already copied");for(let c=0;c<n.height;c++){const u=((r.y+c)*e.width+r.x)*o,h=((i.y+c)*t.width+i.x)*o;for(let e=0;e<n.width*o;e++)l[h+e]=a[u+e]}return t}class no{constructor(e,t){Ps(this,e,1,t)}resize(e){ks(this,e,1)}clone(){return new no({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,i,n){zs(e,t,r,i,n,1)}}class ao{constructor(e,t){Ps(this,e,4,t)}resize(e){ks(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,i,n){zs(e,t,r,i,n,4)}}function ta(e){const t={},r=e.resolution||256,i=e.clips?e.clips.length:1,n=e.image||new ao({width:r,height:i});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const o=(r,i,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);n.data[r+i+0]=Math.floor(255*a.r/a.a),n.data[r+i+1]=Math.floor(255*a.g/a.a),n.data[r+i+2]=Math.floor(255*a.b/a.a),n.data[r+i+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,n=0;t<i;++t,n+=4*r)for(let i=0,a=0;i<r;i++,a+=4){const l=i/(r-1),{start:c,end:u}=e.clips[t];o(n,a,c*(1-l)+u*l)}else for(let e=0,t=0;e<r;e++,t+=4)o(0,t,e/(r-1));return n}let ia;Bi("AlphaImage",no),Bi("RGBAImage",ao);var ua={get paint(){return ia=ia||new Is({"hillshade-illumination-direction":new vs(ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vs(ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vs(ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vs(ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vs(ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vs(ne.paint_hillshade["hillshade-accent-color"])})}};const ha=eo([{name:"a_pos",components:2,type:"Int16"}],4),{members:pa}=ha;var da={exports:{}};function fa(e,t,r){r=r||2;var i,n,o,a,l,c,u,h=t&&t.length,p=h?t[0]*r:e.length,d=ma(e,0,p,r,!0),f=[];if(!d||d.next===d.prev)return f;if(h&&(d=function(e,t,r,i){var n,o,a,l=[];for(n=0,o=t.length;n<o;n++)(a=ma(e,t[n]*i,n<o-1?t[n+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),l.push(Ta(a));for(l.sort(Sa),n=0;n<l.length;n++)r=Ca(l[n],r);return r}(e,t,d,r)),e.length>80*r){i=o=e[0],n=a=e[1];for(var m=r;m<p;m+=r)(l=e[m])<i&&(i=l),(c=e[m+1])<n&&(n=c),l>o&&(o=l),c>a&&(a=c);u=0!==(u=Math.max(o-i,a-n))?32767/u:0}return va(d,f,r,i,n,u,0),f}function ma(e,t,r,i,n){var o,a;if(n===Ba(e,t,r,i)>0)for(o=t;o<r;o+=i)a=za(o,e[o],e[o+1],a);else for(o=r-i;o>=t;o-=i)a=za(o,e[o],e[o+1],a);return a&&Ia(a,a.next)&&(Ra(a),a=a.next),a}function ga(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!Ia(i,i.next)&&0!==Oa(i.prev,i,i.next))i=i.next;else{if(Ra(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function va(e,t,r,i,n,o,a){if(e){!a&&o&&function(e,t,r,i){var n=e;do{0===n.z&&(n.z=Ea(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,r,i,n,o,a,l,c,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,i=r,l=0,t=0;t<u&&(l++,i=i.nextZ);t++);for(c=u;l>0||c>0&&i;)0!==l&&(0===c||!i||r.z<=i.z)?(n=r,r=r.nextZ,l--):(n=i,i=i.nextZ,c--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(a>1)}(n)}(e,i,n,o);for(var l,c,u=e;e.prev!==e.next;)if(l=e.prev,c=e.next,o?ba(e,i,n,o):_a(e))t.push(l.i/r|0),t.push(e.i/r|0),t.push(c.i/r|0),Ra(e),e=c.next,u=c.next;else if((e=c)===u){a?1===a?va(e=xa(ga(e),t,r),t,r,i,n,o,2):2===a&&wa(e,t,r,i,n,o):va(ga(e),t,r,i,n,o,1);break}}}function _a(e){var t=e.prev,r=e,i=e.next;if(Oa(t,r,i)>=0)return!1;for(var n=t.x,o=r.x,a=i.x,l=t.y,c=r.y,u=i.y,h=n<o?n<a?n:a:o<a?o:a,p=l<c?l<u?l:u:c<u?c:u,d=n>o?n>a?n:a:o>a?o:a,f=l>c?l>u?l:u:c>u?c:u,m=i.next;m!==t;){if(m.x>=h&&m.x<=d&&m.y>=p&&m.y<=f&&Aa(n,l,o,c,a,u,m.x,m.y)&&Oa(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function ba(e,t,r,i){var n=e.prev,o=e,a=e.next;if(Oa(n,o,a)>=0)return!1;for(var l=n.x,c=o.x,u=a.x,h=n.y,p=o.y,d=a.y,f=l<c?l<u?l:u:c<u?c:u,m=h<p?h<d?h:d:p<d?p:d,g=l>c?l>u?l:u:c>u?c:u,y=h>p?h>d?h:d:p>d?p:d,v=Ea(f,m,t,r,i),_=Ea(g,y,t,r,i),b=e.prevZ,x=e.nextZ;b&&b.z>=v&&x&&x.z<=_;){if(b.x>=f&&b.x<=g&&b.y>=m&&b.y<=y&&b!==n&&b!==a&&Aa(l,h,c,p,u,d,b.x,b.y)&&Oa(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=f&&x.x<=g&&x.y>=m&&x.y<=y&&x!==n&&x!==a&&Aa(l,h,c,p,u,d,x.x,x.y)&&Oa(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=g&&b.y>=m&&b.y<=y&&b!==n&&b!==a&&Aa(l,h,c,p,u,d,b.x,b.y)&&Oa(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=_;){if(x.x>=f&&x.x<=g&&x.y>=m&&x.y<=y&&x!==n&&x!==a&&Aa(l,h,c,p,u,d,x.x,x.y)&&Oa(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function xa(e,t,r){var i=e;do{var n=i.prev,o=i.next.next;!Ia(n,o)&&La(n,i,i.next,o)&&Da(n,o)&&Da(o,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(o.i/r|0),Ra(i),Ra(i.next),i=e=o),i=i.next}while(i!==e);return ga(i)}function wa(e,t,r,i,n,o){var a=e;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&Pa(a,l)){var c=ja(a,l);return a=ga(a,a.next),c=ga(c,c.next),va(a,t,r,i,n,o,0),void va(c,t,r,i,n,o,0)}l=l.next}a=a.next}while(a!==e)}function Sa(e,t){return e.x-t.x}function Ca(e,t){var r=function(e,t){var r,i=t,n=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var l=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=n&&l>a&&(a=l,r=i.x<i.next.x?i:i.next,l===n))return r}i=i.next}while(i!==t);if(!r)return null;var c,u=r,h=r.x,p=r.y,d=1/0;i=r;do{n>=i.x&&i.x>=h&&n!==i.x&&Aa(o<p?n:a,o,h,p,o<p?a:n,o,i.x,i.y)&&(c=Math.abs(o-i.y)/(n-i.x),Da(i,e)&&(c<d||c===d&&(i.x>r.x||i.x===r.x&&Ma(r,i)))&&(r=i,d=c)),i=i.next}while(i!==u);return r}(e,t);if(!r)return t;var i=ja(r,e);return ga(i,i.next),ga(r,r.next)}function Ma(e,t){return Oa(e.prev,e,t.prev)<0&&Oa(t.next,e,e.next)<0}function Ea(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ta(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Aa(e,t,r,i,n,o,a,l){return(n-a)*(t-l)>=(e-a)*(o-l)&&(e-a)*(i-l)>=(r-a)*(t-l)&&(r-a)*(o-l)>=(n-a)*(i-l)}function Pa(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&La(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Da(e,t)&&Da(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(Oa(e.prev,e,t.prev)||Oa(e,t.prev,t))||Ia(e,t)&&Oa(e.prev,e,e.next)>0&&Oa(t.prev,t,t.next)>0)}function Oa(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Ia(e,t){return e.x===t.x&&e.y===t.y}function La(e,t,r,i){var n=Fa(Oa(e,t,r)),o=Fa(Oa(e,t,i)),a=Fa(Oa(r,i,e)),l=Fa(Oa(r,i,t));return n!==o&&a!==l||!(0!==n||!ka(e,r,t))||!(0!==o||!ka(e,i,t))||!(0!==a||!ka(r,e,i))||!(0!==l||!ka(r,t,i))}function ka(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Fa(e){return e>0?1:e<0?-1:0}function Da(e,t){return Oa(e.prev,e,e.next)<0?Oa(e,t,e.next)>=0&&Oa(e,e.prev,t)>=0:Oa(e,t,e.prev)<0||Oa(e,e.next,t)<0}function ja(e,t){var r=new Na(e.i,e.x,e.y),i=new Na(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function za(e,t,r,i){var n=new Na(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Ra(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Na(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ba(e,t,r,i){for(var n=0,o=t,a=r-i;o<r;o+=i)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}da.exports=fa,da.exports.default=fa,fa.deviation=function(e,t,r,i){var n=t&&t.length,o=Math.abs(Ba(e,0,n?t[0]*r:e.length,r));if(n)for(var a=0,l=t.length;a<l;a++)o-=Math.abs(Ba(e,t[a]*r,a<l-1?t[a+1]*r:e.length,r));var c=0;for(a=0;a<i.length;a+=3){var u=i[a]*r,h=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((e[u]-e[p])*(e[h+1]-e[u+1])-(e[u]-e[h])*(e[p+1]-e[u+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},fa.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[n][o][a]);n>0&&r.holes.push(i+=e[n-1].length)}return r};var Va=t(da.exports);function Ua(e,t,r,i,n){Ha(e,t,r||0,i||e.length-1,n||qa)}function Ha(e,t,r,i,n){for(;i>r;){if(i-r>600){var o=i-r+1,a=t-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(a-o/2<0?-1:1);Ha(e,t,Math.max(r,Math.floor(t-a*c/o+u)),Math.min(i,Math.floor(t+(o-a)*c/o+u)),n)}var h=e[t],p=r,d=i;for(Ga(e,r,t),n(e[i],h)>0&&Ga(e,r,i);p<d;){for(Ga(e,p,d),p++,d--;n(e[p],h)<0;)p++;for(;n(e[d],h)>0;)d--}0===n(e[r],h)?Ga(e,r,d):Ga(e,++d,i),d<=t&&(r=d+1),t<=d&&(i=d-1)}}function Ga(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function qa(e,t){return e<t?-1:e>t?1:0}function Za(e,t){const r=e.length;if(r<=1)return[e];const i=[];let n,o;for(let t=0;t<r;t++){const r=E(e[t]);0!==r&&(e[t].area=Math.abs(r),void 0===o&&(o=r<0),o===r<0?(n&&i.push(n),n=[e[t]]):n.push(e[t]))}if(n&&i.push(n),t>1)for(let e=0;e<i.length;e++)i[e].length<=t||(Ua(i[e],t,1,i[e].length-1,$a),i[e]=i[e].slice(0,t));return i}function $a(e,t){return t.area-e.area}function Wa(e,t,r){const i=r.patternDependencies;let n=!1;for(const r of t){const t=r.paint.get(`${e}-pattern`);t.isConstant()||(n=!0);const o=t.constantOr(null);o&&(n=!0,i[o.to]=!0,i[o.from]=!0)}return n}function Xa(e,t,r,i,n){const o=n.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:i-1},r,{},n.availableImages),l=t.evaluate({zoom:i},r,{},n.availableImages),c=t.evaluate({zoom:i+1},r,{},n.availableImages);e=e&&e.name?e.name:e,l=l&&l.name?l.name:l,c=c&&c.name?c.name:c,o[e]=!0,o[l]=!0,o[c]=!0,r.patterns[a.id]={min:e,mid:l,max:c}}}return r}class Xo{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new _n,this.indexArray=new zn,this.indexArray2=new Cn,this.programConfigurations=new ca(e.layers,e.zoom),this.segments=new Dn,this.segments2=new Dn,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Wa("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),n=!i.isConstant(),o=[];for(const{feature:a,id:l,index:c,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,h=To(a,e);if(!this.layers[0]._featureFilter.filter(new us(this.zoom),h,r))continue;const p=n?i.evaluate(h,{},r,t.availableImages):void 0,d={id:l,properties:a.properties,type:a.type,sourceLayerIndex:u,index:c,geometry:e?h.geometry:Eo(a),patterns:{},sortKey:p};o.push(d)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const i of o){const{geometry:n,index:o,sourceLayerIndex:a}=i;if(this.hasPattern){const e=Xa("fill",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,n,o,r,{});t.featureIndex.insert(e[o].feature,n,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pa),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,i,n){for(const e of Za(t,500)){let t=0;for(const r of e)t+=r.length;const r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=r.vertexLength,n=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(n.length/2);const r=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),i=r.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(i+t.length-1,i),n.push(t[0].x),n.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(i+e-1,i+e),n.push(t[e].x),n.push(t[e].y);r.vertexLength+=t.length,r.primitiveLength+=t.length}const a=Va(n,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(i+a[e],i+a[e+1],i+a[e+2]);r.vertexLength+=t,r.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}}let Ya,Ka;Bi("FillBucket",Xo,{omit:["layers","patternFeatures"]});var Ja={get paint(){return Ka=Ka||new Is({"fill-antialias":new vs(ne.paint_fill["fill-antialias"]),"fill-opacity":new bs(ne.paint_fill["fill-opacity"]),"fill-color":new bs(ne.paint_fill["fill-color"]),"fill-outline-color":new bs(ne.paint_fill["fill-outline-color"]),"fill-translate":new vs(ne.paint_fill["fill-translate"]),"fill-translate-anchor":new vs(ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new ws(ne.paint_fill["fill-pattern"])})},get layout(){return Ya=Ya||new Is({"fill-sort-key":new bs(ne.layout_fill["fill-sort-key"])})}};const el=eo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tl=eo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rl}=el;var il={},nl=r,ol=sl;function sl(e,t,r,i,n){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=n,e.readFields(al,this,t)}function al(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var i=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[i]=n}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function ll(e){for(var t,r,i=0,n=0,o=e.length,a=o-1;n<o;a=n++)i+=((r=e[a]).x-(t=e[n]).x)*(t.y+r.y);return i}sl.types=["Unknown","Point","LineString","Polygon"],sl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,i=1,n=0,o=0,a=0,l=[];e.pos<r;){if(n<=0){var c=e.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)o+=e.readSVarint(),a+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new nl(o,a));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&l.push(t),l},sl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,i=0,n=0,o=0,a=1/0,l=-1/0,c=1/0,u=-1/0;e.pos<t;){if(i<=0){var h=e.readVarint();r=7&h,i=h>>3}if(i--,1===r||2===r)(n+=e.readSVarint())<a&&(a=n),n>l&&(l=n),(o+=e.readSVarint())<c&&(c=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,c,l,u]},sl.prototype.toGeoJSON=function(e,t,r){var i,n,o=this.extent*Math.pow(2,r),a=this.extent*e,l=this.extent*t,c=this.loadGeometry(),u=sl.types[this.type];function h(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+l)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(i=0;i<c.length;i++)p[i]=c[i][0];h(c=p);break;case 2:for(i=0;i<c.length;i++)h(c[i]);break;case 3:for(c=function(e){var t=e.length;if(t<=1)return[e];for(var r,i,n=[],o=0;o<t;o++){var a=ll(e[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(r&&n.push(r),r=[e[o]]):r.push(e[o]))}return r&&n.push(r),n}(c),i=0;i<c.length;i++)for(n=0;n<c[i].length;n++)h(c[i][n])}1===c.length?c=c[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:c},properties:this.properties};return"id"in this&&(d.id=this.id),d};var cl=ol,ul=hl;function hl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(pl,this,t),this.length=this._features.length}function pl(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(r))}hl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new cl(this._pbf,t,this.extent,this._keys,this._values)};var dl=ul;function fl(e,t,r){if(3===e){var i=new dl(r,r.readVarint()+r.pos);i.length&&(t[i.name]=i)}}il.VectorTile=function(e,t){this.layers=e.readFields(fl,{},t)},il.VectorTileFeature=ol,il.VectorTileLayer=ul;const ml=il.VectorTileFeature.types,yl=Math.pow(2,13);function vl(e,t,r,i,n,o,a,l){e.emplaceBack(t,r,2*Math.floor(i*yl)+a,n*yl*2,o*yl*2,Math.round(l))}class gl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new gn,this.centroidVertexArray=new pn,this.indexArray=new zn,this.programConfigurations=new ca(e.layers,e.zoom),this.segments=new Dn,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.features=[],this.hasPattern=Wa("fill-extrusion",this.layers,t);for(const{feature:i,id:n,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,l=To(i,e);if(!this.layers[0]._featureFilter.filter(new us(this.zoom),l,r))continue;const c={id:n,sourceLayerIndex:a,index:o,geometry:e?l.geometry:Eo(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(Xa("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,o,r,{}),t.featureIndex.insert(i,c.geometry,o,a,this.index,!0)}}addFeatures(e,t,r){for(const e of this.features){const{geometry:i}=e;this.addFeature(e,i,e.index,t,r)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rl),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,tl.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,r,i,n){const o={x:0,y:0,vertexCount:0};for(const r of Za(t,500)){let t=0;for(const e of r)t+=e.length;let i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of r){if(0===e.length)continue;if(bl(e))continue;let t=0;for(let r=0;r<e.length;r++){const n=e[r];if(r>=1){const a=e[r-1];if(!_l(n,a)){i.vertexLength+4>Dn.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=n.sub(a)._perp()._unit(),r=a.dist(n);t+r>32768&&(t=0),vl(this.layoutVertexArray,n.x,n.y,e.x,e.y,0,0,t),vl(this.layoutVertexArray,n.x,n.y,e.x,e.y,0,1,t),o.x+=2*n.x,o.y+=2*n.y,o.vertexCount+=2,t+=r,vl(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,t),vl(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,t),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const l=i.vertexLength;this.indexArray.emplaceBack(l,l+2,l+1),this.indexArray.emplaceBack(l+1,l+2,l+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+t>Dn.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==ml[e.type])continue;const n=[],a=[],l=i.vertexLength;for(const e of r)if(0!==e.length){e!==r[0]&&a.push(n.length/2);for(let t=0;t<e.length;t++){const r=e[t];vl(this.layoutVertexArray,r.x,r.y,0,0,1,1,0),o.x+=r.x,o.y+=r.y,o.vertexCount+=1,n.push(r.x),n.push(r.y)}}const c=Va(n,a);for(let e=0;e<c.length;e+=3)this.indexArray.emplaceBack(l+c[e],l+c[e+2],l+c[e+1]);i.primitiveLength+=c.length/3,i.vertexLength+=t}for(let e=0;e<o.vertexCount;e++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}}function _l(e,t){return e.x===t.x&&(e.x<0||e.x>So)||e.y===t.y&&(e.y<0||e.y>So)}function bl(e){return e.every((e=>e.x<0))||e.every((e=>e.x>So))||e.every((e=>e.y<0))||e.every((e=>e.y>So))}let xl;Bi("FillExtrusionBucket",gl,{omit:["layers","features"]});var wl={get paint(){return xl=xl||new Is({"fill-extrusion-opacity":new vs(ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new bs(ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vs(ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vs(ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ws(ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new bs(ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new bs(ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vs(ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};function Sl(e,t){return e.x*t.x+e.y*t.y}function Cl(e,t){if(1===e.length){let r=0;const i=t[r++];let n;for(;!n||i.equals(n);)if(n=t[r++],!n)return 1/0;for(;r<t.length;r++){const o=t[r],a=e[0],l=n.sub(i),c=o.sub(i),u=a.sub(i),h=Sl(l,l),p=Sl(l,c),d=Sl(c,c),f=Sl(u,l),m=Sl(u,c),g=h*d-p*p,y=(d*f-p*m)/g,v=(h*m-p*f)/g,_=i.z*(1-y-v)+n.z*y+o.z*v;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}const Ml=eo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:El}=Ml,Tl=eo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Al}=Tl,Pl=il.VectorTileFeature.types,Ol=Math.cos(Math.PI/180*37.5),Il=Math.pow(2,14)/.5;class kl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new yn,this.layoutVertexArray2=new xn,this.indexArray=new zn,this.programConfigurations=new ca(e.layers,e.zoom),this.segments=new Dn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Wa("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),n=!i.isConstant(),o=[];for(const{feature:t,id:a,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=To(t,e);if(!this.layers[0]._featureFilter.filter(new us(this.zoom),u,r))continue;const h=n?i.evaluate(u,{},r):void 0,p={id:a,properties:t.properties,type:t.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Eo(t),patterns:{},sortKey:h};o.push(p)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const i of o){const{geometry:n,index:o,sourceLayerIndex:a}=i;if(this.hasPattern){const e=Xa("line",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,n,o,r,{});t.featureIndex.insert(e[o].feature,n,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Al)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,El),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,i,n){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),l=o.get("line-cap"),c=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const r of t)this.addLine(r,e,a,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}addLine(e,t,r,i,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Pl[t.type];let l=e.length;for(;l>=2&&e[l-1].equals(e[l-2]);)l--;let c=0;for(;c<l-1&&e[c].equals(e[c+1]);)c++;if(l<(a?3:2))return;"bevel"===r&&(n=1.05);const u=this.overscaling<=16?15*So/(512*this.overscaling):0,h=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);let p,d,f,m,g;this.e1=this.e2=-1,a&&(p=e[l-2],g=e[c].sub(p)._unit()._perp());for(let t=c;t<l;t++){if(f=t===l-1?a?e[c+1]:void 0:e[t+1],f&&e[t].equals(f))continue;g&&(m=g),p&&(d=p),p=e[t],g=f?f.sub(p)._unit()._perp():m,m=m||g;let y=m.add(g);0===y.x&&0===y.y||y._unit();const v=m.x*g.x+m.y*g.y,_=y.x*g.x+y.y*g.y,b=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),w=_<Ol&&d&&f,S=m.x*g.y-m.y*g.x>0;if(w&&t>c){const e=p.dist(d);if(e>2*u){const t=p.sub(p.sub(d)._mult(u/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,h),d=t}}const C=d&&f;let M=C?r:a?"butt":i;if(C&&"round"===M&&(b<o?M="miter":b<=2&&(M="fakeround")),"miter"===M&&b>n&&(M="bevel"),"bevel"===M&&(b>2&&(M="flipbevel"),b<n&&(M="miter")),d&&this.updateDistance(d,p),"miter"===M)y._mult(b),this.addCurrentVertex(p,y,0,0,h);else if("flipbevel"===M){if(b>100)y=g.mult(-1);else{const e=b*m.add(g).mag()/m.sub(g).mag();y._perp()._mult(e*(S?-1:1))}this.addCurrentVertex(p,y,0,0,h),this.addCurrentVertex(p,y.mult(-1),0,0,h)}else if("bevel"===M||"fakeround"===M){const e=-Math.sqrt(b*b-1),t=S?e:0,r=S?0:e;if(d&&this.addCurrentVertex(p,m,t,r,h),"fakeround"===M){const e=Math.round(180*x/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*e*e+(.848013+v*(.215638*v-1.06021)))}const i=g.sub(m)._mult(r)._add(m)._unit()._mult(S?-1:1);this.addHalfVertex(p,i.x,i.y,!1,S,0,h)}}f&&this.addCurrentVertex(p,g,-t,-r,h)}else if("butt"===M)this.addCurrentVertex(p,y,0,0,h);else if("square"===M){const e=d?1:-1;this.addCurrentVertex(p,y,e,e,h)}else"round"===M&&(d&&(this.addCurrentVertex(p,m,0,0,h),this.addCurrentVertex(p,m,1,1,h,!0)),f&&(this.addCurrentVertex(p,g,-1,-1,h,!0),this.addCurrentVertex(p,g,0,0,h)));if(w&&t<l-1){const e=p.dist(f);if(e>2*u){const t=p.add(f.sub(p)._mult(u/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,g,0,0,h),p=t}}}}addCurrentVertex(e,t,r,i,n,o=!1){const a=t.y*i-t.x,l=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,o,!1,r,n),this.addHalfVertex(e,a,l,o,!0,-i,n),this.distance>Il/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,r,i,n,o))}addHalfVertex({x:e,y:t},r,i,n,o,a,l){const c=.5*(this.lineClips?this.scaledDistance*(Il-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(n?1:0),(t<<1)+(o?1:0),Math.round(63*r)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=l.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),l.primitiveLength++),o?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Ll,Fl;Bi("LineBucket",kl,{omit:["layers","patternFeatures"]});var Dl={get paint(){return Fl=Fl||new Is({"line-opacity":new bs(ne.paint_line["line-opacity"]),"line-color":new bs(ne.paint_line["line-color"]),"line-translate":new vs(ne.paint_line["line-translate"]),"line-translate-anchor":new vs(ne.paint_line["line-translate-anchor"]),"line-width":new bs(ne.paint_line["line-width"]),"line-gap-width":new bs(ne.paint_line["line-gap-width"]),"line-offset":new bs(ne.paint_line["line-offset"]),"line-blur":new bs(ne.paint_line["line-blur"]),"line-dasharray":new Ts(ne.paint_line["line-dasharray"]),"line-pattern":new ws(ne.paint_line["line-pattern"]),"line-gradient":new Ss(ne.paint_line["line-gradient"])})},get layout(){return Ll=Ll||new Is({"line-cap":new vs(ne.layout_line["line-cap"]),"line-join":new bs(ne.layout_line["line-join"]),"line-miter-limit":new vs(ne.layout_line["line-miter-limit"]),"line-round-limit":new vs(ne.layout_line["line-round-limit"]),"line-sort-key":new bs(ne.layout_line["line-sort-key"])})}};class Bl extends bs{possiblyEvaluate(e,t){return t=new us(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,i){return t=f({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,i)}}let jl;function zl(e,t){return t>0?t+2*e:e}const Rl=eo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nl=eo([{name:"a_projected_pos",components:3,type:"Float32"}],4);eo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Vl=eo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);eo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ul=eo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Hl=eo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gl(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const i=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),e}(e.text,t,r)})),e}eo([{name:"triangle",components:3,type:"Uint16"}]),eo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),eo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),eo([{type:"Float32",name:"offsetX"}]),eo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const ql={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Zl=Xl,$l=function(e,t,r,i,n){var o,a,l=8*n-i-1,c=(1<<l)-1,u=c>>1,h=-7,p=r?n-1:0,d=r?-1:1,f=e[t+p];for(p+=d,o=f&(1<<-h)-1,f>>=-h,h+=l;h>0;o=256*o+e[t+p],p+=d,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=i;h>0;a=256*a+e[t+p],p+=d,h-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},Wl=function(e,t,r,i,n,o){var a,l,c,u=8*o-n-1,h=(1<<u)-1,p=h>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,m=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+p>=1?d/c:d*Math.pow(2,1-p))*c>=2&&(a++,c/=2),a+p>=h?(l=0,a=h):a+p>=1?(l=(t*c-1)*Math.pow(2,n),a+=p):(l=t*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&l,f+=m,l/=256,n-=8);for(a=a<<n|l,u+=n;u>0;e[r+f]=255&a,f+=m,a/=256,u-=8);e[r+f-m]|=128*g};function Xl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xl.Varint=0,Xl.Fixed64=1,Xl.Bytes=2,Xl.Fixed32=5;var Yl=4294967296,Kl=1/Yl,Jl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ql(e){return e.type===Xl.Bytes?e.readVarint()+e.pos:e.pos+1}function ec(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function tc(e,t,r){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=e;n--)r.buf[n+i]=r.buf[n]}function rc(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function ic(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function nc(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function oc(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function sc(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function ac(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function lc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function cc(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function uc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function hc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function pc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function dc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Xl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=hc(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=dc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=hc(this.buf,this.pos)+hc(this.buf,this.pos+4)*Yl;return this.pos+=8,e},readSFixed64:function(){var e=hc(this.buf,this.pos)+dc(this.buf,this.pos+4)*Yl;return this.pos+=8,e},readFloat:function(){var e=$l(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=$l(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,i=this.buf;return t=127&(r=i[this.pos++]),r<128?t:(t|=(127&(r=i[this.pos++]))<<7,r<128?t:(t|=(127&(r=i[this.pos++]))<<14,r<128?t:(t|=(127&(r=i[this.pos++]))<<21,r<128?t:function(e,t,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return ec(e,i,t);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return ec(e,i,t);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return ec(e,i,t);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return ec(e,i,t);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return ec(e,i,t);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return ec(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Jl?function(e,t,r){return Jl.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var i="",n=t;n<r;){var o,a,l,c=e[n],u=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h>r)break;1===h?c<128&&(u=c):2===h?128==(192&(o=e[n+1]))&&(u=(31&c)<<6|63&o)<=127&&(u=null):3===h?(a=e[n+2],128==(192&(o=e[n+1]))&&128==(192&a)&&((u=(15&c)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===h&&(a=e[n+2],l=e[n+3],128==(192&(o=e[n+1]))&&128==(192&a)&&128==(192&l)&&((u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&l)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,h=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),n+=h}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xl.Bytes)return e.push(this.readVarint(t));var r=Ql(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xl.Bytes)return e.push(this.readSVarint());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xl.Bytes)return e.push(this.readBoolean());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xl.Bytes)return e.push(this.readFloat());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xl.Bytes)return e.push(this.readDouble());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xl.Bytes)return e.push(this.readFixed32());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xl.Bytes)return e.push(this.readSFixed32());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xl.Bytes)return e.push(this.readFixed64());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xl.Bytes)return e.push(this.readSFixed64());var t=Ql(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Xl.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xl.Fixed32)this.pos+=4;else{if(t!==Xl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),pc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*Kl),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),pc(this.buf,-1&e,this.pos),pc(this.buf,Math.floor(e*Kl),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,i;if(e>=0?(r=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var i,n,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):n=i;continue}if(i<56320){e[r++]=239,e[r++]=191,e[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(e[r++]=239,e[r++]=191,e[r++]=189,n=null);i<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(i<65536?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=63&i|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&tc(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),Wl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Wl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var i=this.pos-r;i>=128&&tc(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,r){this.writeTag(e,Xl.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,rc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ic,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,sc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,nc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,oc,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ac,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,lc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,cc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,uc,t)},writeBytesField:function(e,t){this.writeTag(e,Xl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var fc=t(Zl);const mc=3;function gc(e,t,r){1===e&&r.readMessage(yc,t)}function yc(e,t,r){if(3===e){const{id:e,bitmap:i,width:n,height:o,left:a,top:l,advance:c}=r.readMessage(vc,{});t.push({id:e,bitmap:new no({width:n+2*mc,height:o+2*mc},i),metrics:{width:n,height:o,left:a,top:l,advance:c}})}}function vc(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}function _c(e){let t=0,r=0;for(const i of e)t+=i.w*i.h,r=Math.max(r,i.w);e.sort(((e,t)=>t.h-e.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let n=0,o=0;for(const t of e)for(let e=i.length-1;e>=0;e--){const r=i[e];if(!(t.w>r.w||t.h>r.h)){if(t.x=r.x,t.y=r.y,o=Math.max(o,t.y+t.h),n=Math.max(n,t.x+t.w),t.w===r.w&&t.h===r.h){const t=i.pop();e<i.length&&(i[e]=t)}else t.h===r.h?(r.x+=t.w,r.w-=t.w):t.w===r.w?(r.y+=t.h,r.h-=t.h):(i.push({x:r.x+t.w,y:r.y,w:r.w-t.w,h:t.h}),r.y+=t.h,r.h-=t.h);break}}return{w:n,h:o,fill:t/(n*o)||0}}class xc{constructor(e,{pixelRatio:t,version:r,stretchX:i,stretchY:n,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=i,this.stretchY=n,this.content=o,this.version=r}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}var bc;function wc(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}Bi("ImagePosition",xc),Bi("ImageAtlas",class{constructor(e,t){const r={},i={};this.haveRenderCallbacks=[];const n=[];this.addImages(e,r,n),this.addImages(t,i,n);const{w:o,h:a}=_c(n),l=new ao({width:o||1,height:a||1});for(const t in e){const i=e[t],n=r[t].paddedRect;ao.copy(i.data,l,{x:0,y:0},{x:n.x+1,y:n.y+1},i.data)}for(const e in t){const r=t[e],n=i[e].paddedRect,o=n.x+1,a=n.y+1,c=r.data.width,u=r.data.height;ao.copy(r.data,l,{x:0,y:0},{x:o,y:a},r.data),ao.copy(r.data,l,{x:0,y:u-1},{x:o,y:a-1},{width:c,height:1}),ao.copy(r.data,l,{x:0,y:0},{x:o,y:a+u},{width:c,height:1}),ao.copy(r.data,l,{x:c-1,y:0},{x:o-1,y:a},{width:1,height:u}),ao.copy(r.data,l,{x:0,y:0},{x:o+c,y:a},{width:1,height:u})}this.image=l,this.iconPositions=r,this.patternPositions=i}addImages(e,t,r){for(const i in e){const n=e[i],o={x:0,y:0,w:n.data.width+2,h:n.data.height+2};r.push(o),t[i]=new xc(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,n]=e.tl;r.update(t.data,void 0,{x:i,y:n})}}),function(e){e[e.none=0]="none",e[e.horizontal=1]="horizontal",e[e.vertical=2]="vertical",e[e.horizontalOnly=3]="horizontalOnly"}(bc||(bc={}));const Sc=128,Cc=255*Sc;function Mc(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new us(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=r;let n=0;for(;n<t.length&&t[n]<=e;)n++;n=Math.max(0,n-1);let o=n;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[n],l=t[o];return"composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:l,minSize:r.evaluate(new us(a)),maxSize:r.evaluate(new us(l)),interpolationType:i}}}function Ec(e,{uSize:t,uSizeT:r},{lowerSize:i,upperSize:n}){return"source"===e.kind?i/Sc:"composite"===e.kind?tr.number(i/Sc,n/Sc,r):t}function Tc(e,t){let r=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:n,minZoom:o,maxZoom:a}=e,l=n?h(ei.interpolationFactor(n,t,o,a),0,1):0;"camera"===e.kind?i=tr.number(e.minSize,e.maxSize,l):r=l}return{uSizeT:r,uSize:i}}function Ac(e,t,r){let i="never";const n=e.get(t);return n?i=n:e.get(r)&&(i="always"),i}const Pc=il.VectorTileFeature.types,Oc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ic(e,t,r,i,n,o,a,l,c,u,h,p,d){const f=l?Math.min(Cc,Math.round(l[0])):0,m=l?Math.min(Cc,Math.round(l[1])):0;e.emplaceBack(t,r,Math.round(32*i),Math.round(32*n),o,a,(f<<1)+(c?1:0),m,16*u,16*h,256*p,256*d)}function kc(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function Fc(e){for(const t of e.sections)if(Qi(t.text))return!0;return!1}class Dc{constructor(e){this.layoutVertexArray=new bn,this.indexArray=new zn,this.programConfigurations=e,this.segments=new Dn,this.dynamicLayoutVertexArray=new wn,this.opacityVertexArray=new Tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new nn}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,i){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Nl.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Oc,!0),this.opacityVertexBuffer.itemSize=1),(r||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bi("SymbolBuffers",Dc);class Lc{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new Dn,this.collisionVertexArray=new An}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Vl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bi("CollisionBuffers",Lc);class Bc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yo([]),this.placementViewportMatrix=Yo([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mc(this.zoom,t["text-size"]),this.iconSizeData=Mc(this.zoom,t["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),n=r.get("symbol-z-order");this.canOverlap="never"!==Ac(r,"text-overlap","text-allow-overlap")||"never"!==Ac(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==n&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>bc[e]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Dc(new ca(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new Dc(new ca(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new ln,this.lineVertexArray=new cn,this.symbolInstances=new on}calculateGlyphDependencies(e,t,r,i,n){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(r||i)&&n){const r=ql[e.charAt(o)];r&&(t[r.charCodeAt(0)]=!0)}}populate(e,t,r){const i=this.layers[0],n=i.layout,o=n.get("text-font"),a=n.get("text-field"),l=n.get("icon-image"),c=("constant"!==a.value.kind||a.value.value instanceof he&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=n.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const p=t.iconDependencies,d=t.glyphDependencies,f=t.availableImages,m=new us(this.zoom);for(const{feature:t,id:a,index:l,sourceLayerIndex:g}of e){const e=i._featureFilter.needGeometry,y=To(t,e);if(!i._featureFilter.filter(m,y,r))continue;let v,_;if(e||(y.geometry=Eo(t)),c){const e=i.getValueAndResolveTokens("text-field",y,r,f),t=he.factory(e);Fc(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Vn()||this.hasRTLText&&Gn.isParsed())&&(v=Gl(t,i,y))}if(u){const e=i.getValueAndResolveTokens("icon-image",y,r,f);_=e instanceof pe?e:pe.fromString(e)}if(!v&&!_)continue;const b=this.sortFeaturesByKey?h.evaluate(y,{},r):void 0;if(this.features.push({id:a,text:v,icon:_,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:t.properties,type:Pc[t.type],sortKey:b}),_&&(p[_.name]=!0),v){const e=o.evaluate(y,{},r).join(","),t="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(bc.vertical)>=0;for(const r of v.sections)if(r.image)p[r.image.name]=!0;else{const i=Wi(v.toString()),n=r.fontStack||e,o=d[n]=d[n]||{};this.calculateGlyphDependencies(r.text,o,t,this.allowVerticalPlacement,i)}}}"line"===n.get("symbol-placement")&&(this.features=function(e){const t={},r={},i=[];let n=0;function o(t){i.push(e[t]),n++}function a(e,t,n){const o=r[e];return delete r[e],r[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(n[0]),o}function l(e,r,n){const o=t[r];return delete t[r],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=n[0].concat(i[o].geometry[0]),o}function c(e,t,r){const i=r?t[0][t[0].length-1]:t[0][0];return`${e}:${i.x}:${i.y}`}for(let u=0;u<e.length;u++){const h=e[u],p=h.geometry,d=h.text?h.text.toString():null;if(!d){o(u);continue}const f=c(d,p),m=c(d,p,!0);if(f in r&&m in t&&r[f]!==t[m]){const e=l(f,m,p),n=a(f,m,i[e].geometry);delete t[f],delete r[m],r[c(d,i[n].geometry,!0)]=n,i[e].geometry=null}else f in r?a(f,m,p):m in t?l(f,m,p):(o(u),t[f]=n-1,r[m]=n-1)}return i.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment){let r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]);const n={};for(let i=e.segment+1;i<t.length;i++)n[i]={x:t[i].x,y:t[i].y,tileUnitDistanceFromAnchor:r},i<t.length-1&&(r+=t[i+1].dist(t[i]));for(let r=e.segment||0;r>=0;r--)n[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:i},r>0&&(i+=t[r-1].dist(t[r]));for(let e=0;e<t.length;e++){const t=n[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,t,r,i,n,o,a,l,c,u,h,p){const d=e.indexArray,f=e.layoutVertexArray,m=e.segments.prepareSegment(4*t.length,f,d,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&a===bc.vertical?Math.PI/2:0,_=o.text&&o.text.sections;for(let i=0;i<t.length;i++){const{tl:n,tr:a,bl:c,br:u,tex:h,pixelOffsetTL:g,pixelOffsetBR:y,minFontScaleX:b,minFontScaleY:x,glyphOffset:w,isSDF:S,sectionIndex:C}=t[i],M=m.vertexLength,E=w[1];Ic(f,l.x,l.y,n.x,E+n.y,h.x,h.y,r,S,g.x,g.y,b,x),Ic(f,l.x,l.y,a.x,E+a.y,h.x+h.w,h.y,r,S,y.x,g.y,b,x),Ic(f,l.x,l.y,c.x,E+c.y,h.x,h.y+h.h,r,S,g.x,y.y,b,x),Ic(f,l.x,l.y,u.x,E+u.y,h.x+h.w,h.y+h.h,r,S,y.x,y.y,b,x),kc(e.dynamicLayoutVertexArray,l,v),d.emplaceBack(M,M+1,M+2),d.emplaceBack(M+1,M+2,M+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),i!==t.length-1&&C===t[i+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,o,o.index,{},p,_&&_[C])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],a,0,!1,0,h)}_addCollisionDebugVertex(e,t,r,i,n,o){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,i,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,r,i,o,a,l){const c=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),u=c.vertexLength,h=o.layoutVertexArray,p=o.collisionVertexArray,d=l.anchorX,f=l.anchorY;this._addCollisionDebugVertex(h,p,a,d,f,new n(e,t)),this._addCollisionDebugVertex(h,p,a,d,f,new n(r,t)),this._addCollisionDebugVertex(h,p,a,d,f,new n(r,i)),this._addCollisionDebugVertex(h,p,a,d,f,new n(e,i)),c.vertexLength+=4;const m=o.indexArray;m.emplaceBack(u,u+1),m.emplaceBack(u+1,u+2),m.emplaceBack(u+2,u+3),m.emplaceBack(u+3,u),c.primitiveLength+=4}addDebugCollisionBoxes(e,t,r,i){for(let n=e;n<t;n++){const e=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,i?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,r)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Lc(Sn,Ul.members,Cn),this.iconCollisionBox=new Lc(Sn,Ul.members,Cn);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,r,i,n,o,a,l,c){const u={};for(let i=t;i<r;i++){const t=e.get(i);u.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},u.textFeatureIndex=t.featureIndex;break}for(let t=i;t<n;t++){const r=e.get(t);u.verticalTextBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalTextFeatureIndex=r.featureIndex;break}for(let t=o;t<a;t++){const r=e.get(t);u.iconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.iconFeatureIndex=r.featureIndex;break}for(let t=l;t<c;t++){const r=e.get(t);u.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalIconFeatureIndex=r.featureIndex;break}return u}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),i=r.vertexStartIndex+4*r.numGlyphs;for(let t=r.vertexStartIndex;t<i;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),i=[],n=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);i.push(0|Math.round(t*a.anchorX+r*a.anchorY)),n.push(a.featureIndex)}return o.sort(((e,t)=>i[e]-i[t]||n[t]-n[e])),o}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let jc,zc;Bi("SymbolBucket",Bc,{omit:["layers","collisionBoxArray","features","compareText"]}),Bc.MAX_GLYPHS=65535,Bc.addDynamicAttributes=kc;var Rc={get paint(){return zc=zc||new Is({"icon-opacity":new bs(ne.paint_symbol["icon-opacity"]),"icon-color":new bs(ne.paint_symbol["icon-color"]),"icon-halo-color":new bs(ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new bs(ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new bs(ne.paint_symbol["icon-halo-blur"]),"icon-translate":new vs(ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new vs(ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new bs(ne.paint_symbol["text-opacity"]),"text-color":new bs(ne.paint_symbol["text-color"],{runtimeType:De,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new bs(ne.paint_symbol["text-halo-color"]),"text-halo-width":new bs(ne.paint_symbol["text-halo-width"]),"text-halo-blur":new bs(ne.paint_symbol["text-halo-blur"]),"text-translate":new vs(ne.paint_symbol["text-translate"]),"text-translate-anchor":new vs(ne.paint_symbol["text-translate-anchor"])})},get layout(){return jc=jc||new Is({"symbol-placement":new vs(ne.layout_symbol["symbol-placement"]),"symbol-spacing":new vs(ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vs(ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new bs(ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vs(ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vs(ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vs(ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vs(ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new vs(ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vs(ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new bs(ne.layout_symbol["icon-size"]),"icon-text-fit":new vs(ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vs(ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new bs(ne.layout_symbol["icon-image"]),"icon-rotate":new bs(ne.layout_symbol["icon-rotate"]),"icon-padding":new bs(ne.layout_symbol["icon-padding"]),"icon-keep-upright":new vs(ne.layout_symbol["icon-keep-upright"]),"icon-offset":new bs(ne.layout_symbol["icon-offset"]),"icon-anchor":new bs(ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vs(ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vs(ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vs(ne.layout_symbol["text-rotation-alignment"]),"text-field":new bs(ne.layout_symbol["text-field"]),"text-font":new bs(ne.layout_symbol["text-font"]),"text-size":new bs(ne.layout_symbol["text-size"]),"text-max-width":new bs(ne.layout_symbol["text-max-width"]),"text-line-height":new vs(ne.layout_symbol["text-line-height"]),"text-letter-spacing":new bs(ne.layout_symbol["text-letter-spacing"]),"text-justify":new bs(ne.layout_symbol["text-justify"]),"text-radial-offset":new bs(ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vs(ne.layout_symbol["text-variable-anchor"]),"text-anchor":new bs(ne.layout_symbol["text-anchor"]),"text-max-angle":new vs(ne.layout_symbol["text-max-angle"]),"text-writing-mode":new vs(ne.layout_symbol["text-writing-mode"]),"text-rotate":new bs(ne.layout_symbol["text-rotate"]),"text-padding":new vs(ne.layout_symbol["text-padding"]),"text-keep-upright":new vs(ne.layout_symbol["text-keep-upright"]),"text-transform":new bs(ne.layout_symbol["text-transform"]),"text-offset":new bs(ne.layout_symbol["text-offset"]),"text-allow-overlap":new vs(ne.layout_symbol["text-allow-overlap"]),"text-overlap":new vs(ne.layout_symbol["text-overlap"]),"text-ignore-placement":new vs(ne.layout_symbol["text-ignore-placement"]),"text-optional":new vs(ne.layout_symbol["text-optional"])})}};class Vc{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Oe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bi("FormatSectionOverride",Vc,{omit:["defaultValue"]});class Uc extends Es{constructor(e){super(e,Rc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const r of e)t.indexOf(r)<0&&t.push(r);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,i){const n=this.layout.get(e).evaluate(t,{},r,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Ir(o.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>r in e?String(e[r]):""))}(t.properties,n)}createBucket(e){return new Bc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Rc.paint.overridableProperties){if(!Uc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new Vc(t),i=new qi(r,t.property.specification);let n=null;n="constant"===t.value.kind||"source"===t.value.kind?new Gi("source",i):new Hi("composite",i,t.value.zoomStops),this.paint._values[e]=new ys(t.property,n,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&Uc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),i=Rc.paint.properties[t];let n=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(n=!0)};if("constant"===r.value.kind&&r.value.value instanceof he)o(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{n||(t instanceof ge&&Tt(t.value)===Be?o(t.value.sections):t instanceof bi?o(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return n}}let Nc;var Hc={get paint(){return Nc=Nc||new Is({"background-color":new vs(ne.paint_background["background-color"]),"background-pattern":new Ts(ne.paint_background["background-pattern"]),"background-opacity":new vs(ne.paint_background["background-opacity"])})}};let Gc;var qc={get paint(){return Gc=Gc||new Is({"raster-opacity":new vs(ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new vs(ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vs(ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vs(ne.paint_raster["raster-brightness-max"]),"raster-saturation":new vs(ne.paint_raster["raster-saturation"]),"raster-contrast":new vs(ne.paint_raster["raster-contrast"]),"raster-resampling":new vs(ne.paint_raster["raster-resampling"]),"raster-fade-duration":new vs(ne.paint_raster["raster-fade-duration"])})}};class Zc extends Es{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const $c={circle:class extends Es{constructor(e){super(e,qo)}createBucket(e){return new ya(e)}queryRadius(e){const t=e;return Bo("circle-radius",this,t)+Bo("circle-stroke-width",this,t)+Vo(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,i,n,o,a,l){const c=Uo(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),h="map"===this.paint.get("circle-pitch-alignment"),p=h?c:function(e,t){return e.map((e=>cs(e,t)))}(c,l),d=h?u*a:u;for(const e of i)for(const t of e){const e=h?t:cs(t,l);let r=d;const i=as([],[t.x,t.y,0,1],l);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?r*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(r*=o.cameraToCenterDistance/i[3]),Oo(p,e,r))return!0}return!1}},heatmap:class extends Es{createBucket(e){return new Qa(e)}constructor(e){super(e,As),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ta({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends Es{constructor(e){super(e,ua)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends Es{constructor(e){super(e,Ja)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Xo(e)}queryRadius(){return Vo(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,i,n,o,a){return Io(Uo(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Es{constructor(e){super(e,wl)}createBucket(e){return new gl(e)}queryRadius(){return Vo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,r,i,o,a,l,c){const u=Uo(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,l),h=this.paint.get("fill-extrusion-height").evaluate(t,r),p=this.paint.get("fill-extrusion-base").evaluate(t,r),d=function(e,t,r,i){const o=[];for(const r of e){const e=[r.x,r.y,0,1];as(e,e,t),o.push(new n(e[0]/e[3],e[1]/e[3]))}return o}(u,c),f=function(e,t,r,i){const o=[],a=[],l=i[8]*t,c=i[9]*t,u=i[10]*t,h=i[11]*t,p=i[8]*r,d=i[9]*r,f=i[10]*r,m=i[11]*r;for(const t of e){const e=[],r=[];for(const o of t){const t=o.x,a=o.y,g=i[0]*t+i[4]*a+i[12],y=i[1]*t+i[5]*a+i[13],v=i[2]*t+i[6]*a+i[14],_=i[3]*t+i[7]*a+i[15],b=v+u,x=_+h,w=g+p,S=y+d,C=v+f,M=_+m,E=new n((g+l)/x,(y+c)/x);E.z=b/x,e.push(E);const T=new n(w/M,S/M);T.z=C/M,r.push(T)}o.push(e),a.push(r)}return[o,a]}(i,p,h,c);return function(e,t,r){let i=1/0;Io(r,t)&&(i=Cl(r,t[0]));for(let n=0;n<t.length;n++){const o=t[n],a=e[n];for(let e=0;e<o.length-1;e++){const t=o[e],n=[t,o[e+1],a[e+1],a[e],t];Po(r,n)&&(i=Math.min(i,Cl(r,n)))}}return i!==1/0&&i}(f[0],f[1],d)}},line:class extends Es{constructor(e){super(e,Dl),this.gradientVersion=0,jl||(jl=new Bl(Dl.paint.properties["line-width"].specification),jl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ye,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=jl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new kl(e)}queryRadius(e){const t=e,r=zl(Bo("line-width",this,t),Bo("line-gap-width",this,t)),i=Bo("line-offset",this,t);return r/2+Math.abs(i)+Vo(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,i,o,a,l){const c=Uo(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,l),u=l/2*zl(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),h=this.paint.get("line-offset").evaluate(t,r);return h&&(i=function(e,t){const r=[];for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const r=o[e-1],i=o[e],l=o[e+1],c=0===e?new n(0,0):i.sub(r)._unit()._perp(),u=e===o.length-1?new n(0,0):l.sub(i)._unit()._perp(),h=c._add(u)._unit(),p=h.x*u.x+h.y*u.y;0!==p&&h._mult(1/p),a.push(h._mult(t)._add(i))}r.push(a)}return r}(i,h*l)),function(e,t,r){for(let i=0;i<t.length;i++){const n=t[i];if(e.length>=3)for(let t=0;t<n.length;t++)if(Ro(e,n[t]))return!0;if(Lo(e,n,r))return!0}return!1}(c,i,u)}isTileClipped(){return!0}},symbol:Uc,background:class extends Es{constructor(e){super(e,Hc)}},raster:class extends Es{constructor(e){super(e,qc)}}};function Wc(e){return"custom"===e.type?new Zc(e):new $c[e.type](e)}function Xc(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const r=[];for(const{id:i,url:n}of e){const e=`${i}${n}`;-1===r.indexOf(e)&&(r.push(e),t.push({id:i,url:n}))}}return t}function Yc(e,t,r,i,n){if(i)return void e(i);if(n!==Object.values(t).length||n!==Object.values(r).length)return;const o={};for(const e in t){o[e]={};const i=D.getImageCanvasContext(r[e]),n=t[e];for(const t in n){const{width:r,height:a,x:l,y:c,sdf:u,pixelRatio:h,stretchX:p,stretchY:d,content:f}=n[t];o[e][t]={data:null,pixelRatio:h,sdf:u,stretchX:p,stretchY:d,content:f,spriteData:{width:r,height:a,x:l,y:c,context:i}}}}e(null,o)}class Kc{constructor(e,t,r,i){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,t,r){const{width:i,height:n}=e,o=!(this.size&&this.size[0]===i&&this.size[1]===n||r),{context:a}=this,{gl:l}=a;if(this.useMipmap=Boolean(t&&t.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[i,n],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||O(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,n,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:t,y:o}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||O(e)?l.texSubImage2D(l.TEXTURE_2D,0,t,o,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,t,o,i,n,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,r){const{context:i}=this,{gl:n}=i;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Qc(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class Jc extends nt{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new ao({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){const t=this.images[e];if(t&&!t.data&&t.spriteData){const e=t.spriteData;t.data=new ao({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),t.spriteData=null}return t}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,t){let r=!0;const i=t.data||t.spriteData;return this._validateStretch(t.stretchX,i&&i.width)||(this.fire(new st(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(t.stretchY,i&&i.height)||(this.fire(new st(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(t.content,t)||(this.fire(new st(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let r=0;for(const i of e){if(i[0]<r||i[1]<i[0]||t<i[1])return!1;r=i[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const r=t.spriteData,i=r&&r.width||t.data.width,n=r&&r.height||t.data.height;return!(e[0]<0||i<e[0]||e[1]<0||n<e[1]||e[2]<0||i<e[2]||e[3]<0||n<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t,r=!0){const i=this.getImage(e);if(r&&(i.data.width!==t.data.width||i.data.height!==t.data.height))throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let r=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(r=!1);this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(e,t){const r={};for(const t of e){let e=this.getImage(t);e||(this.fire(new rt("styleimagemissing",{id:t})),e=this.getImage(t)),e?r[t]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:C(`Image "${t}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}t(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const t=this.patterns[e],r=this.getImage(e);if(!r)return null;if(t&&t.position.version===r.version)return t.position;if(t)t.position.version=r.version;else{const t={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new xc(t,r);this.patterns[e]={bin:t,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Kc(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:t,h:r}=_c(e),i=this.atlasImage;i.resize({width:t||1,height:r||1});for(const e in this.patterns){const{bin:t}=this.patterns[e],r=t.x+1,n=t.y+1,o=this.getImage(e).data,a=o.width,l=o.height;ao.copy(o,i,{x:0,y:0},{x:r,y:n},{width:a,height:l}),ao.copy(o,i,{x:0,y:l-1},{x:r,y:n-1},{width:a,height:1}),ao.copy(o,i,{x:0,y:0},{x:r,y:n+l},{width:a,height:1}),ao.copy(o,i,{x:a-1,y:0},{x:r-1,y:n},{width:1,height:l}),ao.copy(o,i,{x:0,y:0},{x:r+a,y:n},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.getImage(t);e||C(`Image with ID: "${t}" was not found`),Qc(e)&&this.updateImage(t,e)}}}const tu=1e20;function iu(e,t,r,i,n,o,a,l,c){for(let u=t;u<t+i;u++)nu(e,r*o+u,o,n,a,l,c);for(let u=r;u<r+n;u++)nu(e,u*o+t,1,i,a,l,c)}function nu(e,t,r,i,n,o,a){o[0]=0,a[0]=-tu,a[1]=tu,n[0]=e[t];for(let l=1,c=0,u=0;l<i;l++){n[l]=e[t+l*r];const i=l*l;do{const e=o[c];u=(n[l]-n[e]+i-e*e)/(l-e)/2}while(u<=a[c]&&--c>-1);c++,o[c]=l,a[c]=u,a[c+1]=tu}for(let l=0,c=0;l<i;l++){for(;a[c+1]<l;)c++;const i=o[c],u=l-i;e[t+l*r]=n[i]+u*u}}class ih{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e,t){const r=[];for(const t in e)for(const i of e[t])r.push({stack:t,id:i});d(r,(({stack:e,id:t},r)=>{let i=this.entries[e];i||(i=this.entries[e]={glyphs:{},requests:{},ranges:{}});let n=i.glyphs[t];if(void 0!==n)return void r(null,{stack:e,id:t,glyph:n});if(n=this._tinySDF(i,e,t),n)return i.glyphs[t]=n,void r(null,{stack:e,id:t,glyph:n});const o=Math.floor(t/256);if(256*o>65535)return void r(new Error("glyphs > 65535 not supported"));if(i.ranges[o])return void r(null,{stack:e,id:t,glyph:n});if(!this.url)return void r(new Error("glyphsUrl is not set"));let a=i.requests[o];a||(a=i.requests[o]=[],ih.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(i.glyphs[+e]=t[+e]);i.ranges[o]=!0}for(const r of a)r(e,t);delete i.requests[o]}))),a.push(((i,n)=>{i?r(i):n&&r(null,{stack:e,id:t,glyph:n[t]||null})}))}),((e,r)=>{if(e)t(e);else if(r){const e={};for(const{stack:t,id:i,glyph:n}of r)(e[t]||(e[t]={}))[i]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics};t(null,e)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&($i["CJK Unified Ideographs"](e)||$i["Hangul Syllables"](e)||$i.Hiragana(e)||$i.Katakana(e))}_tinySDF(e,t,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let n=e.tinySDF;if(!n){let r="400";/bold/i.test(t)?r="900":/medium/i.test(t)?r="500":/light/i.test(t)&&(r="200"),n=e.tinySDF=new ih.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:i,fontWeight:r})}const o=n.draw(String.fromCharCode(r));return{id:r,bitmap:new no({width:o.width||30,height:o.height||30},o.data),metrics:{width:o.glyphWidth||24,height:o.glyphHeight||24,left:o.glyphLeft||0,top:o.glyphTop-27||-8,advance:o.glyphAdvance||24}}}}ih.loadGlyphRange=function(e,t,r,i,n){const o=256*t,a=o+255,l=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${o}-${a}`),J.Glyphs);H(l,((e,t)=>{if(e)n(e);else if(t){const e={};for(const r of function(e){return new fc(e).readFields(gc,[])}(t))e[r.id]=r;n(null,e)}}))},ih.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:i=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=i,this.radius=r;const l=this.size=e+4*t,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${n}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-n))),c=Math.min(this.size-this.buffer,a+Math.ceil(i)),u=l+2*this.buffer,h=c+2*this.buffer,p=Math.max(u*h,0),d=new Uint8ClampedArray(p),f={data:d,width:u,height:h,glyphWidth:l,glyphHeight:c,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===l||0===c)return f;const{ctx:m,buffer:g,gridInner:y,gridOuter:v}=this;m.clearRect(g,g,l,c),m.fillText(e,g,g+a);const _=m.getImageData(g,g,l,c);v.fill(tu,0,p),y.fill(0,0,p);for(let e=0;e<c;e++)for(let t=0;t<l;t++){const r=_.data[4*(e*l+t)+3]/255;if(0===r)continue;const i=(e+g)*u+t+g;if(1===r)v[i]=0,y[i]=tu;else{const e=.5-r;v[i]=e>0?e*e:0,y[i]=e<0?e*e:0}}iu(v,0,0,u,h,u,this.f,this.v,this.z),iu(y,g,g,l,c,u,this.f,this.v,this.z);for(let e=0;e<p;e++){const t=Math.sqrt(v[e])-Math.sqrt(y[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}};class rh{constructor(){this.specification=ne.light.position}possiblyEvaluate(e,t){return function([e,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(r),y:e*Math.sin(t)*Math.sin(r),z:e*Math.cos(r)}}(e.expression.evaluate(t))}interpolate(e,t,r){return{x:tr.number(e.x,t.x,r),y:tr.number(e.y,t.y,r),z:tr.number(e.z,t.z,r)}}}let ou;class nh extends nt{constructor(e){super(),ou=ou||new Is({anchor:new vs(ne.light.anchor),position:new rh,color:new vs(ne.light.color),intensity:new vs(ne.light.intensity)}),this._transitionable=new ms(ou),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,t={}){if(!this._validate(Di,e,t))for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,t,r){return(!r||!1!==r.validate)&&Ri(this,e.call(Fi,f({value:t,style:{glyphs:!0,sprite:!0},styleSpec:ne})))}}class ah{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const r=e.join(",")+String(t);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(e,t)),this.dashEntry[r]}getDashRanges(e,t,r){const i=[];let n=e.length%2==1?-e[e.length-1]*r:0,o=e[0]*r,a=!0;i.push({left:n,right:o,isDash:a,zeroLength:0===e[0]});let l=e[0];for(let t=1;t<e.length;t++){a=!a;const c=e[t];n=l*r,l+=c,o=l*r,i.push({left:n,right:o,isDash:a,zeroLength:0===c})}return i}addRoundDash(e,t,r){const i=t/2;for(let t=-r;t<=r;t++){const n=this.width*(this.nextRow+r+t);let o=0,a=e[o];for(let l=0;l<this.width;l++){l/a.right>1&&(a=e[++o]);const c=Math.abs(l-a.left),u=Math.abs(l-a.right),h=Math.min(c,u);let p;const d=t/r*(i+1);if(a.isDash){const e=i-Math.abs(d);p=Math.sqrt(h*h+e*e)}else p=i-Math.sqrt(h*h+d*d);this.data[n+l]=Math.max(0,Math.min(255,p+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const r=e[t],i=e[t+1];r.zeroLength?e.splice(t,1):i&&i.isDash===r.isDash&&(i.left=r.left,e.splice(t,1))}const t=e[0],r=e[e.length-1];t.isDash===r.isDash&&(t.left=r.left-this.width,r.right=t.right+this.width);const i=this.width*this.nextRow;let n=0,o=e[n];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++n]);const r=Math.abs(t-o.left),a=Math.abs(t-o.right),l=Math.min(r,a);this.data[i+t]=Math.max(0,Math.min(255,(o.isDash?l:-l)+128))}}addDash(e,t){const r=t?7:0,i=2*r+1;if(this.nextRow+i>this.height)return C("LineAtlas out of space"),null;let n=0;for(let t=0;t<e.length;t++)n+=e[t];if(0!==n){const i=this.width/n,o=this.getDashRanges(e,this.width,i);t?this.addRoundDash(o,i,r):this.addRegularDash(o)}const o={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:n};return this.nextRow+=i,this.dirty=!0,o}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class oh{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}class lh{constructor(e,t,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const i=this.workerPool.acquire(r);for(let e=0;e<i.length;e++){const n=new lh.Actor(i[e],t,r);n.name=`Worker ${e}`,this.actors.push(n)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t,r){d(this.actors,((r,i)=>{r.send(e,t,i)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}}function su(e,t,r){const i=function(t,i){if(t)return r(t);if(i){const t=m(f(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(t.vectorLayers=i.vector_layers,t.vectorLayerIds=t.vectorLayers.map((e=>e.id))),r(null,t)}};return e.url?U(t.transformRequest(e.url,J.Source),i):D.frame((()=>i(null,e)))}lh.Actor=class{constructor(e,t,r){this.target=e,this.parent=t,this.mapId=r,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},v(["receive","process"],this),this.invoker=new oh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=T()?e:window}send(e,t,r,i,n=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(this.callbacks[o]=r);const a=P(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!r,targetMapId:i,mustQueue:n,sourceMapId:this.mapId,data:Ui(t,a)},a),{cancel:()=>{r&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(e){const t=e.data,r=t.id;if(r&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[r];const e=this.cancelCallbacks[r];delete this.cancelCallbacks[r],e&&e()}else T()||t.mustQueue?(this.tasks[r]=t,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,t)}process(){if(!this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,t){if("<response>"===t.type){const r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Zi(t.error)):r(null,Zi(t.data)))}else{let r=!1;const i=P(this.globalScope)?void 0:[],n=t.hasCallback?(t,n)=>{r=!0,delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ui(t):null,data:Ui(n,i)},i)}:e=>{r=!0};let o=null;const a=Zi(t.data);if(this.parent[t.type])o=this.parent[t.type](t.sourceMapId,a,n);else if(this.parent.getWorkerSource){const e=t.type.split(".");o=this.parent.getWorkerSource(t.sourceMapId,e[0],a.source)[e[1]](a,n)}else n(new Error(`Could not find function ${t.type}`));!r&&o&&o.cancel&&(this.cancelCallbacks[e]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}};const au=6371008.8;class uh{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new uh(p(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,i=e.lat*t,n=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return au*Math.acos(Math.min(n,1))}static convert(e){if(e instanceof uh)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new uh(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new uh(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ph{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof uh?new uh(e.lng,e.lat):uh.convert(e),this}setSouthWest(e){return this._sw=e instanceof uh?new uh(e.lng,e.lat):uh.convert(e),this}extend(e){const t=this._sw,r=this._ne;let i,n;if(e instanceof uh)i=e,n=e;else{if(!(e instanceof ph))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ph.convert(e)):this.extend(uh.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(uh.convert(e)):this;if(i=e._sw,n=e._ne,!i||!n)return this}return t||r?(t.lng=Math.min(i.lng,t.lng),t.lat=Math.min(i.lat,t.lat),r.lng=Math.max(n.lng,r.lng),r.lat=Math.max(n.lat,r.lat)):(this._sw=new uh(i.lng,i.lat),this._ne=new uh(n.lng,n.lat)),this}getCenter(){return new uh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new uh(this.getWest(),this.getNorth())}getSouthEast(){return new uh(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:r}=uh.convert(e);let i=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}static convert(e){return e instanceof ph?e:e?new ph(e):e}static fromLngLat(e,t=0){const r=360*t/40075017,i=r/Math.cos(Math.PI/180*e.lat);return new ph(new uh(e.lng-i,e.lat-r),new uh(e.lng+i,e.lat+r))}}const lu=2*Math.PI*au;function cu(e){return lu*Math.cos(e*Math.PI/180)}function uu(e){return(180+e)/360}function hu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function pu(e,t){return e/cu(t)}function du(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class xh{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=uh.convert(e);return new xh(uu(r.lng),hu(r.lat),pu(t,r.lat))}toLngLat(){return new uh(360*this.x-180,du(this.y))}toAltitude(){return this.z*cu(du(this.y))}meterInMercatorCoordinateUnits(){return 1/lu*(e=du(this.y),1/Math.cos(e*Math.PI/180));var e}}class vh{constructor(e,t,r){this.bounds=ph.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const t=Math.pow(2,e.z),r=Math.floor(uu(this.bounds.getWest())*t),i=Math.floor(hu(this.bounds.getNorth())*t),n=Math.ceil(uu(this.bounds.getEast())*t),o=Math.ceil(hu(this.bounds.getSouth())*t);return e.x>=r&&e.x<n&&e.y>=i&&e.y<o}}class bh extends nt{constructor(e,t,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f(this,m(t,["url","scheme","tileSize","promoteId"])),this._options=f({type:"vector"},t),this._collectResourceTiming=t.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){this._loaded=!1,this.fire(new rt("dataloading",{dataType:"source"})),this._tileJSONRequest=su(this._options,this.map._requestManager,((e,t)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new st(e)):t&&(f(this,t),t.bounds&&(this.tileBounds=new vh(t.bounds,this.minzoom,this.maxzoom)),this.fire(new rt("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new rt("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return f({},this._options)}loadTile(e,t){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,J.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function n(r,i){return delete e.request,e.aborted?t(null):r&&404!==r.status?t(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=t:e.request=e.actor.send("reloadTile",i,n.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,n.bind(this)))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class wh extends nt{constructor(e,t,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f({type:"raster"},t),f(this,m(t,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new rt("dataloading",{dataType:"source"})),this._tileJSONRequest=su(this._options,this.map._requestManager,((e,t)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new st(e)):t&&(f(this,t),t.bounds&&(this.tileBounds=new vh(t.bounds,this.minzoom,this.maxzoom)),this.fire(new rt("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new rt("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return f({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e,t){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=ee.getImage(this.map._requestManager.transformRequest(r,J.Tile),((r,i,n)=>{if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){this.map._refreshExpiredTiles&&n&&e.setExpiryData(n);const r=this.map.painter.context,o=r.gl;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new Kc(r,i,o.RGBA,{useMipmap:!0}),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t(null)}}),this.map._refreshExpiredTiles)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}let fu;function mu(e,t,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Ih{constructor(e,t,r){if(e<0||e>25||r<0||r>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${r}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=r,this.key=gu(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,r){const i=(o=this.y,a=this.z,l=mu(256*(n=this.x),256*(o=Math.pow(2,a)-o-1),a),c=mu(256*(n+1),256*(o+1),a),l[0]+","+l[1]+","+c[0]+","+c[1]);var n,o,a,l,c;const u=function(e,t,r){let i,n="";for(let o=e;o>0;o--)i=1<<o-1,n+=(t&i?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new n((e.x*t-this.x)*So,(e.y*t-this.y)*So)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ah{constructor(e,t){this.wrap=e,this.canonical=t,this.key=gu(e,t.z,t.z,t.x,t.y)}}class Eh{constructor(e,t,r,i,n){if(e<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${r}`);this.overscaledZ=e,this.wrap=t,this.canonical=new Ih(r,+i,+n),this.key=gu(t,e,r,i,n)}clone(){return new Eh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new Eh(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Eh(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?gu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):gu(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Eh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new Eh(t,this.wrap,t,r,i),new Eh(t,this.wrap,t,r+1,i),new Eh(t,this.wrap,t,r,i+1),new Eh(t,this.wrap,t,r+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Eh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Eh(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ah(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new xh(e.x-this.wrap,e.y))}}function gu(e,t,r,i,n){(e*=2)<0&&(e=-1*e-1);const o=1<<r;return(o*o*e+o*n+i).toString(36)+r.toString(36)+t.toString(36)}Bi("CanonicalTileID",Ih),Bi("OverscaledTileID",Eh,{omit:["posMatrix"]}),Bi("DEMData",class{constructor(e,t,r){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return void C(`"${r}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const i=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=r||"mapbox";for(let e=0;e<i;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(i,e)]=this.data[this._idx(i-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,i)]=this.data[this._idx(e,i-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(i,-1)]=this.data[this._idx(i-1,0)],this.data[this._idx(-1,i)]=this.data[this._idx(0,i-1)],this.data[this._idx(i,i)]=this.data[this._idx(i-1,i-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let e=0;e<i;e++)for(let t=0;t<i;t++){const r=this.get(e,t);r>this.max&&(this.max=r),r<this.min&&(this.min=r)}}get(e,t){const r=new Uint8Array(this.data.buffer),i=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,r){return(256*e*256+256*t+r)/10-1e4}_unpackTerrarium(e,t,r){return 256*e+t+r/256-32768}getPixels(){return new ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,n=t*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:i=n-1;break;case 1:n=i+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}const l=-t*this.dim,c=-r*this.dim;for(let t=o;t<a;t++)for(let r=i;r<n;r++)this.data[this._idx(r,t)]=e.data[this._idx(r+l,t+c)]}});class Ch extends wh{constructor(e,t,r,i){super(e,t,r,i),this.type="raster-dem",this.maxzoom=22,this._options=f({type:"raster-dem"},t),this.encoding=t.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,t){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(r,i){r&&(e.state="errored",t(r)),i&&(e.dem=i,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",t(null))}e.request=ee.getImage(this.map._requestManager.transformRequest(r,J.Tile),function(r,n){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(n){this.map._refreshExpiredTiles&&e.setExpiryData(n),delete n.cacheControl,delete n.expires;const t=O(n)&&(null==fu&&(fu="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),fu)?n:D.getImageData(n,1),r={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:t,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",r,i.bind(this)))}}.bind(this),this.map._refreshExpiredTiles),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const t=e.canonical,r=Math.pow(2,t.z),i=(t.x-1+r)%r,n=0===t.x?e.wrap-1:e.wrap,o=(t.x+1+r)%r,a=t.x+1===r?e.wrap+1:e.wrap,l={};return l[new Eh(e.overscaledZ,n,t.z,i,t.y).key]={backfilled:!1},l[new Eh(e.overscaledZ,a,t.z,o,t.y).key]={backfilled:!1},t.y>0&&(l[new Eh(e.overscaledZ,n,t.z,i,t.y-1).key]={backfilled:!1},l[new Eh(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},l[new Eh(e.overscaledZ,a,t.z,o,t.y-1).key]={backfilled:!1}),t.y+1<r&&(l[new Eh(e.overscaledZ,n,t.z,i,t.y+1).key]={backfilled:!1},l[new Eh(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},l[new Eh(e.overscaledZ,a,t.z,o,t.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})}}class Mh extends nt{constructor(e,t,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=t.data,this._options=f({},t),this._collectResourceTiming=t.collectResourceTiming,void 0!==t.maxzoom&&(this.maxzoom=t.maxzoom),t.type&&(this.type=t.type),t.attribution&&(this.attribution=t.attribution),this.promoteId=t.promoteId;const n=So/this.tileSize;this.workerOptions=f({source:this.id,cluster:t.cluster||!1,geojsonVtOptions:{buffer:(void 0!==t.buffer?t.buffer:128)*n,tolerance:(void 0!==t.tolerance?t.tolerance:.375)*n,extent:So,maxZoom:this.maxzoom,lineMetrics:t.lineMetrics||!1,generateId:t.generateId||!1},superclusterOptions:{maxZoom:void 0!==t.clusterMaxZoom?t.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,t.clusterMinPoints||2),extent:So,radius:(t.clusterRadius||50)*n,log:!1,generateId:t.generateId||!1},clusterProperties:t.clusterProperties,filter:t.filter},t.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){this._updateWorkerData()}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,r,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:r},i),this}_updateWorkerData(e){const t=f({},this.workerOptions);e?t.dataDiff=e:"string"==typeof this._data?(t.request=this.map._requestManager.transformRequest(D.resolveURL(this._data),J.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new rt("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,t,((e,t)=>{if(this._pendingLoads--,this._removed||t&&t.abandoned)return void this.fire(new rt("dataabort",{dataType:"source"}));let r=null;if(t&&t.resourceTiming&&t.resourceTiming[this.id]&&(r=t.resourceTiming[this.id].slice(0)),e)return void this.fire(new st(e));const i={dataType:"source"};this._collectResourceTiming&&r&&r.length>0&&f(i,{resourceTiming:r}),this.fire(new rt("data",{...i,sourceDataType:"metadata"})),this.fire(new rt("data",{...i,sourceDataType:"content"}))}))}loaded(){return 0===this._pendingLoads}loadTile(e,t){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(r,i,((i,n)=>(delete e.request,e.unloadVectorData(),e.aborted?t(null):i?t(i):(e.loadVectorData(n,this.map.painter,"reloadTile"===r),t(null)))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return f({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var yu=eo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ph extends nt{constructor(e,t,r,i){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t}load(e,t){this._loaded=!1,this.fire(new rt("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=ee.getImage(this.map._requestManager.transformRequest(this.url,J.Image),((r,i)=>{this._request=null,this._loaded=!0,r?this.fire(new st(r)):i&&(this.image=i,e&&(this.coordinates=e),t&&t(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=e.url,this.load(e.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new rt("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(e){this.coordinates=e;const t=e.map(xh.fromLngLat);this.tileID=function(e){let t=1/0,r=1/0,i=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),n=Math.max(n,o.y);const o=Math.max(i-t,n-r),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,a);return new Ih(a,Math.floor((t+i)/2*l),Math.floor((r+n)/2*l))}(t),this.minzoom=this.maxzoom=this.tileID.z;const r=t.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new mn,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,So,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,So),this._boundsArray.emplaceBack(r[2].x,r[2].y,So,So),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new rt("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,t=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,yu.members)),this.boundsSegments||(this.boundsSegments=Dn.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Kc(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE));let r=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,r=!0)}r&&this.fire(new rt("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Dh extends Ph{constructor(e,t,r,i){super(e,t,r,i),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,J.Source).url);!function(e,t){const r=window.document.createElement("video");r.muted=!0,r.onloadstart=function(){t(null,r)};for(let t=0;t<e.length;t++){const i=window.document.createElement("source");G(e[t])||(r.crossOrigin="Anonymous"),i.src=e[t],r.appendChild(i)}}(this.urls,((e,t)=>{this._loaded=!0,e?this.fire(new st(e)):t&&(this.video=t,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const t=this.video.seekable;e<t.start(0)||e>t.end(0)?this.fire(new st(new xt(`sources.${this.id}`,null,`Playback for this video can be set only between the ${t.start(0)} and ${t.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,t=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,yu.members)),this.boundsSegments||(this.boundsSegments=Dn.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new Kc(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE));let r=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,r=!0)}r&&this.fire(new rt("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Lh extends Ph{constructor(e,t,r,i){super(e,t,r,i),t.coordinates?Array.isArray(t.coordinates)&&4===t.coordinates.length&&!t.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new st(new xt(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new st(new xt(`sources.${e}`,null,'missing required property "coordinates"'))),t.animate&&"boolean"!=typeof t.animate&&this.fire(new st(new xt(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),t.canvas?"string"==typeof t.canvas||t.canvas instanceof HTMLCanvasElement||this.fire(new st(new xt(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new st(new xt(`sources.${e}`,null,'missing required property "canvas"'))),this.options=t,this.animate=void 0===t.animate||t.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new st(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const t=this.map.painter.context,r=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,yu.members)),this.boundsSegments||(this.boundsSegments=Dn.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Kc(t,this.canvas,r.RGBA,{premultiply:!0});let i=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,i=!0)}i&&this.fire(new rt("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const vu={vector:bh,raster:wh,"raster-dem":Ch,geojson:Mh,video:Dh,image:Ph,canvas:Lh};function _u(e,t){const r=Wo();return Qo(r,r,[1,1,0]),es(r,r,[.5*e.width,.5*e.height,1]),Jo(r,r,e.calculatePosMatrix(t.toUnwrapped()))}function bu(e,t,r,i,n,o){const a=function(e,t,r){if(e)for(const i of e){const e=t[i];if(e&&e.source===r&&"fill-extrusion"===e.type)return!0}else for(const e in t){const i=t[e];if(i.source===r&&"fill-extrusion"===i.type)return!0}return!1}(n&&n.layers,t,e.id),l=o.maxPitchScaleFactor(),c=e.tilesIn(i,l,a);c.sort(xu);const u=[];for(const i of c)u.push({wrappedTileID:i.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(t,r,e._state,i.queryGeometry,i.cameraQueryGeometry,i.scale,n,o,l,_u(e.transform,i.tileID))});const h=function(e){const t={},r={};for(const i of e){const e=i.queryResults,n=i.wrappedTileID,o=r[n]=r[n]||{};for(const r in e){const i=e[r],n=o[r]=o[r]||{},a=t[r]=t[r]||[];for(const e of i)n[e.featureIndex]||(n[e.featureIndex]=!0,a.push(e))}}return t}(u);for(const t in h)h[t].forEach((t=>{const r=t.feature,i=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return h}function xu(e,t){const r=e.tileID,i=t.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}class Vh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Uh{constructor(e,t,r,i,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=i,this.properties=e.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}function Su(e,t,r,i,n){return _(e,((e,o)=>{const a=t instanceof xs?t.get(o):null;return a&&a.evaluate?a.evaluate(r,i,n):a}))}function Eu(e){let t=1/0,r=1/0,i=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),n=Math.max(n,o.y);return{minX:t,minY:r,maxX:i,maxY:n}}function Au(e,t){return t-e}Bi("FeatureIndex",class{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ur(So,16,0),this.grid3D=new Ur(So,16,0),this.featureIndexArray=new un,this.promoteId=t}insert(e,t,r,i,n,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);const l=o?this.grid3D:this.grid;for(let e=0;e<t.length;e++){const r=t[e],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){const t=r[e];i[0]=Math.min(i[0],t.x),i[1]=Math.min(i[1],t.y),i[2]=Math.max(i[2],t.x),i[3]=Math.max(i[3],t.y)}i[0]<So&&i[1]<So&&i[2]>=0&&i[3]>=0&&l.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new fc(this.rawTileData)).layers,this.sourceLayerCoder=new Vh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,i){this.loadVTLayers();const o=e.params||{},a=So/e.tileSize/e.scale,l=zr(o.filter),c=e.queryGeometry,u=e.queryPadding*a,h=Eu(c),p=this.grid.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u),d=Eu(e.cameraQueryGeometry),f=this.grid3D.query(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u,((t,r,i,o)=>function(e,t,r,i,o){for(const n of e)if(t<=n.x&&r<=n.y&&i>=n.x&&o>=n.y)return!0;const a=[new n(t,r),new n(t,o),new n(i,o),new n(i,r)];if(e.length>2)for(const t of a)if(Ro(e,t))return!0;for(let t=0;t<e.length-1;t++)if(No(e[t],e[t+1],a))return!0;return!1}(e.cameraQueryGeometry,t-u,r-u,i+u,o+u)));for(const e of f)p.push(e);p.sort(Au);const m={};let g;for(let n=0;n<p.length;n++){const u=p[n];if(u===g)continue;g=u;const h=this.featureIndexArray.get(u);let d=null;this.loadMatchingFeature(m,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,l,o.layers,o.availableImages,t,r,i,((t,r,i)=>(d||(d=Eo(t)),r.queryIntersectsFeature(c,t,i,d,this.z,e.transform,a,e.pixelPosMatrix))))}return m}loadMatchingFeature(e,t,r,i,n,o,a,l,c,u,h){const p=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(o,p))return;const d=this.sourceLayerCoder.decode(r),m=this.vtLayers[d].feature(i);if(n.needGeometry){const e=To(m,!0);if(!n.filter(new us(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new us(this.tileID.overscaledZ),m))return;const g=this.getId(m,d);for(let t=0;t<p.length;t++){const r=p[t];if(o&&o.indexOf(r)<0)continue;const n=l[r];if(!n)continue;let d={};g&&u&&(d=u.getState(n.sourceLayer||"_geojsonTileLayer",g));const y=f({},c[r]);y.paint=Su(y.paint,n.paint,m,d,a),y.layout=Su(y.layout,n.layout,m,d,a);const v=!h||h(m,n,d);if(!v)continue;const _=new Uh(m,this.z,this.x,this.y,g);_.layer=y;let b=e[r];void 0===b&&(b=e[r]=[]),b.push({featureIndex:i,feature:_,intersectionZ:v})}}lookupSymbolFeatures(e,t,r,i,n,o,a,l){const c={};this.loadVTLayers();const u=zr(n);for(const n of e)this.loadMatchingFeature(c,r,i,n,u,o,a,l,t);return c}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;return this.promoteId&&(r=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof r&&(r=Number(r))),r}},{omit:["rawTileData","sourceLayerCoder"]});class jh{constructor(e,t){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=y(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,t,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const i of e){const e=i.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=i}}return r}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Bc){if(this.hasSymbolBuckets=!0,!r)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Bc&&t.hasRTLText){this.hasRTLText=!0,Gn.isLoading()||Gn.isLoaded()||"deferred"!==Vn()||Un();break}}this.queryPadding=0;for(const e in this.buckets){const r=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(r))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new rn}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kc(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kc(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,i,n,o,a,l,c,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:l,params:a,queryPadding:this.queryPadding*c},e,t,r):{}}querySourceFeatures(e,t){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),n=t&&t.sourceLayer?t.sourceLayer:"",o=i._geojsonTileLayer||i[n];if(!o)return;const a=zr(t&&t.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let t=0;t<o.length;t++){const i=o.feature(t);if(a.needGeometry){const e=To(i,!0);if(!a.filter(new us(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new us(this.tileID.overscaledZ),i))continue;const p=r.getId(i,n),d=new Uh(i,l,c,u,p);d.tile=h,e.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,i,n)=>{const o=i||n;return t[r]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let r=!1;if(this.expirationTime>e)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{const i=this.expirationTime-t;i?this.expirationTime=e+Math.max(i,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const r=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const n=this.buckets[i],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],l=e[o];if(!a||!l||0===Object.keys(l).length)continue;n.update(l,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=D.now()+e}setDependencies(e,t){const r={};for(const e of t)r[e]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}}class Zh{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const n={value:t,timeout:void 0};if(void 0!==r&&(n.timeout=setTimeout((()=>{this.remove(e,n)}),r)),this.data[i].push(n),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,i=void 0===t?0:this.data[r].indexOf(t),n=this.data[r][i];return this.data[r].splice(i,1),n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(n.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const i of this.data[r])e(i.value)||t.push(i);for(const e of t)this.remove(e.value.tileID,e)}}class Gh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,r){const i=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},f(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(r in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][r]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,t){const r=String(t),i=f({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const r=this.deletedStates[e][t];if(null===r)return{};for(const e in r)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const r={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const r in this.stateChanges[e])this.state[e][r]||(this.state[e][r]={}),f(this.state[e][r],this.stateChanges[e][r]),t[r]=this.state[e][r];r[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const r in this.state[e])t[r]={},this.state[e][r]={};else for(const r in this.deletedStates[e]){if(null===this.deletedStates[e][r])this.state[e][r]={};else for(const t of Object.keys(this.deletedStates[e][r]))delete this.state[e][r][t];t[r]=this.state[e][r]}r[e]=r[e]||{},f(r[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const i in e)e[i].setFeatureState(r,t)}}class Hh extends nt{constructor(e,t,r){super(),this.id=e,this.dispatcher=r,this.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,t,r,i){const n=new vu[t.type](e,t,r,i);if(n.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${n.id}`);return v(["load","abort","unload","serialize","prepare"],n),n}(e,t,r,this),this._tiles={},this._cache=new Zh(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Gh,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,t){return this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new rt("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(Ou).map((e=>e.key))}getRenderableIds(e){const t=[];for(const r in this._tiles)this._isIdRenderable(r,e)&&t.push(this._tiles[r]);return e?t.sort(((e,t)=>{const r=e.tileID,i=t.tileID,o=new n(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new n(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(Ou).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,t){const r=this._tiles[e];r&&("loading"!==r.state&&(r.state=t),this._loadTile(r,this._tileLoaded.bind(this,r,e,t)))}_tileLoaded(e,t,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new st(i,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=D.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new rt("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const n=t[i];if(e.neighboringTiles&&e.neighboringTiles[n]){const t=this.getTileByID(n);r(e,t),r(t,e)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,i),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,i){for(const n in this._tiles){let o=this._tiles[n];if(i[n]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>r)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let l=a;for(;l.overscaledZ>t;)if(l=l.scaledTo(l.overscaledZ-1),e[l.key]){i[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),i=this._getLoadedTile(t);if(i)return i}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const t=Math.ceil(e.width/this._source.tileSize)+1,r=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(t*r*(null===this._maxTileCacheZoomLevels?j.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(n)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(e,t){if(this.transform=e,this.terrain=t,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Eh(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:t}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=e.coveringZoomLevel(this._source),n=Math.max(i-Hh.maxOverzooming,this._source.minzoom),o=Math.max(i+Hh.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of r)if(t.canonical.z>this._source.minzoom){const r=t.scaledTo(t.canonical.z-1);e[r.key]=r;const i=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[i.key]=i}r=r.concat(Object.values(e))}const a=0===r.length&&!this._updated&&this._didEmitContent;this._updated=!0,a&&this.fire(new rt("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(r,i);if(Iu(this._source.type)){const e={},a={},c=Object.keys(l),u=D.now();for(const t of c){const r=l[t],i=this._tiles[t];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=u)continue;const o=this.findLoadedParent(r,n);o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),a[t]=r}this._retainLoadedChildren(a,i,o,l);for(const t in e)l[t]||(this._coveredTiles[t]=!0,l[t]=e[t]);if(t){const e={},t={};for(const i of r)this._tiles[i.key].hasData()?e[i.key]=i:t[i.key]=i;for(const r in t){const i=t[r].children(this._source.maxzoom);this._tiles[i[0].key]&&this._tiles[i[1].key]&&this._tiles[i[2].key]&&this._tiles[i[3].key]&&(e[i[0].key]=l[i[0].key]=i[0],e[i[1].key]=l[i[1].key]=i[1],e[i[2].key]=l[i[2].key]=i[2],e[i[3].key]=l[i[3].key]=i[3],delete t[r])}for(const r in t){const i=this.findLoadedParent(t[r],this._source.minzoom);if(i){e[i.tileID.key]=l[i.tileID.key]=i.tileID;for(const t in e)e[t].isChildOf(i.tileID)&&delete e[t]}}for(const t in this._tiles)e[t]||(this._coveredTiles[t]=!0)}}for(const e in l)this._tiles[e].clearFadeHold();const c=function(e,t){const r=[];for(const i in e)i in t||r.push(i);return r}(this._tiles,l);for(const e of c){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(e)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){const r={},i={},n=Math.max(t-Hh.maxOverzooming,this._source.minzoom),o=Math.max(t+Hh.maxUnderzooming,this._source.minzoom),a={};for(const i of e){const e=this._addTile(i);r[i.key]=i,e.hasData()||t<this._source.maxzoom&&(a[i.key]=i)}this._retainLoadedChildren(a,t,o,r);for(const o of e){let e=this._tiles[o.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=o.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){r[e.key]=e;continue}}else{const e=o.children(this._source.maxzoom);if(r[e[0].key]&&r[e[1].key]&&r[e[2].key]&&r[e[3].key])continue}let a=e.wasRequested();for(let t=o.overscaledZ-1;t>=n;--t){const n=o.scaledTo(t);if(i[n.key])break;if(i[n.key]=!0,e=this.getTile(n),!e&&a&&(e=this._addTile(n)),e){const t=e.hasData();if((a||t)&&(r[n.key]=n),a=e.wasRequested(),t)break}}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){r=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;i=e}for(const e of t)this._loadedParentTiles[e]=r}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const r=t;return t||(t=new jh(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t.uses++,this._tiles[e.key]=t,r||this._source.fire(new rt("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,t,r){const i=[],n=this.transform;if(!n)return i;const o=r?n.getCameraQueryGeometry(e):e,a=e.map((e=>n.pointCoordinate(e,this.terrain))),l=o.map((e=>n.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,h=1/0,p=-1/0,d=-1/0;for(const e of l)u=Math.min(u,e.x),h=Math.min(h,e.y),p=Math.max(p,e.x),d=Math.max(d,e.y);for(let e=0;e<c.length;e++){const r=this._tiles[c[e]];if(r.holdingForFade())continue;const o=r.tileID,f=Math.pow(2,n.zoom-r.tileID.overscaledZ),m=t*r.queryPadding*So/r.tileSize/f,g=[o.getTilePoint(new xh(u,h)),o.getTilePoint(new xh(p,d))];if(g[0].x-m<So&&g[0].y-m<So&&g[1].x+m>=0&&g[1].y+m>=0){const e=a.map((e=>o.getTilePoint(e))),t=l.map((e=>o.getTilePoint(e)));i.push({tile:r,tileID:o,queryGeometry:e,cameraQueryGeometry:t,scale:f})}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Iu(this._source.type)){const e=D.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const i=this._tiles[e];i&&i.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}}function Ou(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Iu(e){return"raster"===e||"image"===e||"video"===e}Hh.maxOverzooming=10,Hh.maxUnderzooming=3;const Lu="mapboxgl_preloaded_worker_pool";class Yh{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Yh.workerCount;)this.workers.push(new Worker(j.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Lu]}numActive(){return Object.keys(this.active).length}}const Fu=Math.floor(D.hardwareConcurrency/2);let ju;function Nu(){return ju||(ju=new Yh),ju}Yh.workerCount=P(globalThis)?Math.max(Math.min(Fu,3),1):1;class eu{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=h(e,0,1);let t=1,r=this._distances[t];const i=e*this.paddedLength+this.padding;for(;r<i&&t<this._distances.length;)r=this._distances[++t];const n=t-1,o=this._distances[n],a=r-o,l=a>0?(i-o)/a:0;return this.points[n].mult(1-l).add(this.points[t].mult(l))}}function Bu(e,t){let r=!0;return"always"===e||"never"!==e&&"never"!==t||(r=!1),r}class ru{constructor(e,t,r){const i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,i,n){this._forEachCell(t,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)}insertCircle(e,t,r,i){this._forEachCell(t-i,r-i,t+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(i)}_insertBoxCell(e,t,r,i,n,o){this.boxCells[n].push(o)}_insertCircleCell(e,t,r,i,n,o){this.circleCells[n].push(o)}_query(e,t,r,i,n,o,a){if(r<0||e>this.width||i<0||t>this.height)return[];const l=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=i){if(n)return[{key:null,x1:e,y1:t,x2:r,y2:i}];for(let e=0;e<this.boxKeys.length;e++)l.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],i=this.circles[3*e+2];l.push({key:this.circleKeys[e],x1:t-i,y1:r-i,x2:t+i,y2:r+i})}}else this._forEachCell(e,t,r,i,this._queryCell,l,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},a);return l}query(e,t,r,i){return this._query(e,t,r,i,!1,null)}hitTest(e,t,r,i,n,o){return this._query(e,t,r,i,!0,n,o).length>0}hitTestCircle(e,t,r,i,n){const o=e-r,a=e+r,l=t-r,c=t+r;if(a<0||o>this.width||c<0||l>this.height)return!1;const u=[];return this._forEachCell(o,l,a,c,this._queryCellCircle,u,{hitTest:!0,overlapMode:i,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},n),u.length>0}_queryCell(e,t,r,i,n,o,a,l){const{seenUids:c,hitTest:u,overlapMode:h}=a,p=this.boxCells[n];if(null!==p){const n=this.bboxes;for(const a of p)if(!c.box[a]){c.box[a]=!0;const p=4*a,d=this.boxKeys[a];if(e<=n[p+2]&&t<=n[p+3]&&r>=n[p+0]&&i>=n[p+1]&&(!l||l(d))&&(!u||!Bu(h,d.overlapMode))&&(o.push({key:d,x1:n[p],y1:n[p+1],x2:n[p+2],y2:n[p+3]}),u))return!0}}const d=this.circleCells[n];if(null!==d){const n=this.circles;for(const a of d)if(!c.circle[a]){c.circle[a]=!0;const p=3*a,d=this.circleKeys[a];if(this._circleAndRectCollide(n[p],n[p+1],n[p+2],e,t,r,i)&&(!l||l(d))&&(!u||!Bu(h,d.overlapMode))){const e=n[p],t=n[p+1],r=n[p+2];if(o.push({key:d,x1:e-r,y1:t-r,x2:e+r,y2:t+r}),u)return!0}}}return!1}_queryCellCircle(e,t,r,i,n,o,a,l){const{circle:c,seenUids:u,overlapMode:h}=a,p=this.boxCells[n];if(null!==p){const e=this.bboxes;for(const t of p)if(!u.box[t]){u.box[t]=!0;const r=4*t,i=this.boxKeys[t];if(this._circleAndRectCollide(c.x,c.y,c.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!l||l(i))&&!Bu(h,i.overlapMode))return o.push(!0),!0}}const d=this.circleCells[n];if(null!==d){const e=this.circles;for(const t of d)if(!u.circle[t]){u.circle[t]=!0;const r=3*t,i=this.circleKeys[t];if(this._circlesCollide(e[r],e[r+1],e[r+2],c.x,c.y,c.radius)&&(!l||l(i))&&!Bu(h,i.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,r,i,n,o,a,l){const c=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),h=this._convertToXCellCoord(r),p=this._convertToYCellCoord(i);for(let d=c;d<=h;d++)for(let c=u;c<=p;c++)if(n.call(this,e,t,r,i,this.xCellCount*c+d,o,a,l))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,i,n,o){const a=i-e,l=n-t,c=r+o;return c*c>a*a+l*l}_circleAndRectCollide(e,t,r,i,n,o,a){const l=(o-i)/2,c=Math.abs(e-(i+l));if(c>l+r)return!1;const u=(a-n)/2,h=Math.abs(t-(n+u));if(h>u+r)return!1;if(c<=l||h<=u)return!0;const p=c-l,d=h-u;return p*p+d*d<=r*r}}function Vu(e,t,r,i,n){const o=Wo();return t?(es(o,o,[1/n,1/n,1]),r||ts(o,o,i.angle)):Jo(o,i.labelPlaneMatrix,e),o}function Uu(e,t,r,i,n){if(t){const t=function(e){var t=new $o(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}(e);return es(t,t,[n,n,1]),r||ts(t,t,-i.angle),t}return i.glCoordMatrix}function Gu(e,t,r){let i;r?(i=[e.x,e.y,r(e.x,e.y),1],as(i,i,t)):(i=[e.x,e.y,0,1],fh(i,i,t));const o=i[3];return{point:new n(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function qu(e,t){return.5+e/t*.5}function Zu(e,t){const r=e[0]/e[3],i=e[1]/e[3];return r>=-t[0]&&r<=t[0]&&i>=-t[1]&&i<=t[1]}function $u(e,t,r,i,o,a,l,c,u,h){const p=i?e.textSizeData:e.iconSizeData,d=Tc(p,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],m=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();const g=e.lineVertexArray,y=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height;let _=!1;for(let i=0;i<y.length;i++){const b=y.get(i);if(b.hidden||b.writingMode===bc.vertical&&!_){dh(b.numGlyphs,m);continue}let x;if(_=!1,h?(x=[b.anchorX,b.anchorY,h(b.anchorX,b.anchorY),1],as(x,x,t)):(x=[b.anchorX,b.anchorY,0,1],fh(x,x,t)),!Zu(x,f)){dh(b.numGlyphs,m);continue}const w=qu(r.transform.cameraToCenterDistance,x[3]),S=Ec(p,d,b),C=l?S/w:S*w,M=new n(b.anchorX,b.anchorY),E=Gu(M,o,h).point,T={projections:{},offsets:{}},A=Ju(b,C,!1,c,t,o,a,e.glyphOffsetArray,g,m,E,M,T,v,u,h);_=A.useVertical,(A.notEnoughRoom||_||A.needsFlipping&&Ju(b,C,!0,c,t,o,a,e.glyphOffsetArray,g,m,E,M,T,v,u,h).notEnoughRoom)&&dh(b.numGlyphs,m)}i?e.text.dynamicLayoutVertexBuffer.updateData(m):e.icon.dynamicLayoutVertexBuffer.updateData(m)}function Xu(e,t,r,i,n,o,a,l,c,u,h,p,d){const f=l.glyphStartIndex+l.numGlyphs,m=l.lineStartIndex,g=l.lineStartIndex+l.lineLength,y=t.getoffsetX(l.glyphStartIndex),v=t.getoffsetX(f-1),_=ch(e*y,r,i,n,o,a,l.segment,m,g,c,u,h,p,d);if(!_)return null;const b=ch(e*v,r,i,n,o,a,l.segment,m,g,c,u,h,p,d);return b?{first:_,last:b}:null}function Yu(e,t,r,i){return e===bc.horizontal&&Math.abs(r.y-t.y)>Math.abs(r.x-t.x)*i?{useVertical:!0}:(e===bc.vertical?t.y<r.y:t.x>r.x)?{needsFlipping:!0}:null}function Ju(e,t,r,i,o,a,l,c,u,h,p,d,f,m,g,y){const v=t/24,_=e.lineOffsetX*v,b=e.lineOffsetY*v;let x;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,h=Xu(v,c,_,b,r,p,d,e,u,a,f,g,y);if(!h)return{notEnoughRoom:!0};const w=Gu(h.first.point,l,y).point,S=Gu(h.last.point,l,y).point;if(i&&!r){const t=Yu(e.writingMode,w,S,m);if(t)return t}x=[h.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)x.push(ch(v*c.getoffsetX(i),_,b,r,p,d,e.segment,n,o,u,a,f,g,y));x.push(h.last)}else{if(i&&!r){const t=Gu(d,o,y).point,r=e.lineStartIndex+e.segment+1,i=new n(u.getx(r),u.gety(r)),a=Gu(i,o,y),l=a.signedDistanceFromCamera>0?a.point:Qu(d,i,t,1,o,y),c=Yu(e.writingMode,t,l,m);if(c)return c}const t=ch(v*c.getoffsetX(e.glyphStartIndex),_,b,r,p,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,g,y);if(!t)return{notEnoughRoom:!0};x=[t]}for(const e of x)kc(h,e.point,e.angle);return{}}function Qu(e,t,r,i,n,o){const a=Gu(e.add(e.sub(t)._unit()),n,o).point,l=r.sub(a);return r.add(l._mult(i/l.mag()))}function eh(e,t){const{projectionCache:r,lineVertexArray:i,labelPlaneMatrix:o,tileAnchorPoint:a,distanceFromAnchor:l,getElevation:c,previousVertex:u,direction:h,absOffsetX:p}=t;if(r.projections[e])return r.projections[e];const d=new n(i.getx(e),i.gety(e)),f=Gu(d,o,c);if(f.signedDistanceFromCamera>0)return r.projections[e]=f.point,f.point;const m=e-h;return Qu(0===l?a:new n(i.getx(m),i.gety(m)),d,u,p-l+1,o,c)}function th(e,t,r){return e._unit()._perp()._mult(t*r)}function sh(e,t,r,i,o,a,l,c){const{projectionCache:u,direction:h}=c;if(u.offsets[e])return u.offsets[e];const p=r.add(t);if(e+h<i||e+h>=o)return u.offsets[e]=p,p;const d=eh(e+h,c),f=th(d.sub(r),l,h),m=r.add(f),g=d.add(f);return u.offsets[e]=function(e,t,r,i){const o=t.y-e.y,a=t.x-e.x,l=i.y-r.y,c=i.x-r.x,u=l*a-c*o;if(0===u)return null;const h=(c*(e.y-r.y)-l*(e.x-r.x))/u;return new n(e.x+h*a,e.y+h*o)}(a,p,m,g)||p,u.offsets[e]}function ch(e,t,r,i,n,o,a,l,c,u,h,p,d,f){const m=i?e-t:e+t;let g=m>0?1:-1,y=0;i&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let v,_,b=g>0?l+a:l+a+1,x=n,w=n,S=0,C=0;const M=Math.abs(m),E=[];let T;for(;S+C<=M;){if(b+=g,b<l||b>=c)return null;S+=C,w=x,_=v;const e={projectionCache:p,lineVertexArray:u,labelPlaneMatrix:h,tileAnchorPoint:o,distanceFromAnchor:S,getElevation:f,previousVertex:w,direction:g,absOffsetX:M};if(x=eh(b,e),0===r)E.push(w),T=x.sub(w);else{let t;const i=x.sub(w);t=0===i.mag()?th(eh(b+g,e).sub(x),r,g):th(i,r,g),_||(_=w.add(t)),v=sh(b,t,x,l,c,_,r,e),E.push(_),T=v.sub(_)}C=T.mag()}const A=T._mult((M-S)/C)._add(_||w),P=y+Math.atan2(x.y-w.y,x.x-w.x);return E.push(A),{point:A,angle:d?P:0,path:E}}const hh=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dh(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(hh,3*e)}}function fh(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e[3]=r[3]*i+r[7]*n+r[15],e}const mh=100;class wu{constructor(e,t=new ru(e.width+200,e.height+200,25),r=new ru(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+mh,this.screenBottomBoundary=e.height+mh,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,r,i,n,o){const a=this.projectAndGetPerspectiveRatio(i,e.anchorPointX,e.anchorPointY,o),l=r*a.perspectiveRatio,c=e.x1*l+a.point.x,u=e.y1*l+a.point.y,h=e.x2*l+a.point.x,p=e.y2*l+a.point.y;return!this.isInsideGrid(c,u,h,p)||"always"!==t&&this.grid.hitTest(c,u,h,p,t,n)||a.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[c,u,h,p],offscreen:this.isOffscreen(c,u,h,p)}}placeCollisionCircles(e,t,r,i,o,a,l,c,u,h,p,d,f,m){const g=[],y=new n(t.anchorX,t.anchorY),v=Gu(y,a,m),_=qu(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),b=(h?o/_:o*_)/24,x=Gu(y,l,m).point,w=Xu(b,i,t.lineOffsetX*b,t.lineOffsetY*b,!1,x,y,t,r,l,{projections:{},offsets:{}},!1,m);let S=!1,C=!1,M=!0;if(w){const t=.5*d*_+f,r=new n(-100,-100),i=new n(this.screenRightBoundary,this.screenBottomBoundary),o=new eu,a=w.first,l=w.last;let h=[];for(let e=a.path.length-1;e>=1;e--)h.push(a.path[e]);for(let e=1;e<l.path.length;e++)h.push(l.path[e]);const y=2.5*t;if(c){const e=h.map((e=>Gu(e,c,m)));h=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let v=[];if(h.length>0){const e=h[0].clone(),t=h[0].clone();for(let r=1;r<h.length;r++)e.x=Math.min(e.x,h[r].x),e.y=Math.min(e.y,h[r].y),t.x=Math.max(t.x,h[r].x),t.y=Math.max(t.y,h[r].y);v=e.x>=r.x&&t.x<=i.x&&e.y>=r.y&&t.y<=i.y?[h]:t.x<r.x||e.x>i.x||t.y<r.y||e.y>i.y?[]:function(e,t,r,i,o){const a=[];for(let l=0;l<e.length;l++){const c=e[l];let u;for(let e=0;e<c.length-1;e++){let l=c[e],h=c[e+1];l.x<t&&h.x<t||(l.x<t?l=new n(t,l.y+(t-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x<t&&(h=new n(t,l.y+(t-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y<r&&h.y<r||(l.y<r?l=new n(l.x+(r-l.y)/(h.y-l.y)*(h.x-l.x),r)._round():h.y<r&&(h=new n(l.x+(r-l.y)/(h.y-l.y)*(h.x-l.x),r)._round()),l.x>=i&&h.x>=i||(l.x>=i?l=new n(i,l.y+(i-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x>=i&&(h=new n(i,l.y+(i-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y>=o&&h.y>=o||(l.y>=o?l=new n(l.x+(o-l.y)/(h.y-l.y)*(h.x-l.x),o)._round():h.y>=o&&(h=new n(l.x+(o-l.y)/(h.y-l.y)*(h.x-l.x),o)._round()),u&&l.equals(u[u.length-1])||(u=[l],a.push(u)),u.push(h)))))}}return a}([h],r.x,r.y,i.x,i.y)}for(const r of v){o.reset(r,.25*t);let i=0;i=o.length<=.5*t?1:Math.ceil(o.paddedLength/y)+1;for(let r=0;r<i;r++){const n=r/Math.max(i-1,1),a=o.lerp(n),l=a.x+mh,c=a.y+mh;g.push(l,c,t,0);const h=l-t,d=c-t,f=l+t,m=c+t;if(M=M&&this.isOffscreen(h,d,f,m),C=C||this.isInsideGrid(h,d,f,m),"always"!==e&&this.grid.hitTestCircle(l,c,t,e,p)&&(S=!0,!u))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!u&&S||!C||_<this.perspectiveRatioCutoff?[]:g,offscreen:M,collisionDetected:S}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const t=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const l of e){const e=new n(l.x+mh,l.y+mh);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),t.push(e)}const l=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),c={},u={};for(const e of l){const r=e.key;void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]={}),c[r.bucketInstanceId][r.featureIndex]||Po(t,[new n(e.x1,e.y1),new n(e.x2,e.y1),new n(e.x2,e.y2),new n(e.x1,e.y2)])&&(c[r.bucketInstanceId][r.featureIndex]=!0,void 0===u[r.bucketInstanceId]&&(u[r.bucketInstanceId]=[]),u[r.bucketInstanceId].push(r.featureIndex))}return u}insertCollisionBox(e,t,r,i,n,o){(r?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,i,n,o){const a=r?this.ignoredGrid:this.grid,l={bucketInstanceId:i,featureIndex:n,collisionGroupID:o,overlapMode:t};for(let t=0;t<e.length;t+=4)a.insertCircle(l,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(e,t,r,i){let o;return i?(o=[t,r,i(t,r),1],as(o,o,e)):(o=[t,r,0,1],fh(o,o,e)),{point:new n((o[0]/o[3]+1)/2*this.transform.width+mh,(-o[1]/o[3]+1)/2*this.transform.height+mh),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}}isOffscreen(e,t,r,i){return r<mh||e>=this.screenRightBoundary||i<mh||t>this.screenBottomBoundary}isInsideGrid(e,t,r,i){return r>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=Yo([]);return Qo(e,e,[-100,-100,0]),e}}class Tu extends n{constructor(e,t,r,i){super(e,t),this.angle=r,void 0!==i&&(this.segment=i)}clone(){return new Tu(this.x,this.y,this.angle,this.segment)}}Bi("Anchor",Tu);const gh=7,yh=Number.POSITIVE_INFINITY;function _h(e,t){return t[1]!==yh?function(e,t,r){let i=0,n=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":n=r-gh;break;case"bottom-right":case"bottom-left":case"bottom":n=-r+gh}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,n]}(e,t[0],t[1]):function(e,t){let r=0,i=0;t<0&&(t=0);const n=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":i=n-gh;break;case"bottom-right":case"bottom-left":i=-n+gh;break;case"bottom":i=-t+gh;break;case"top":i=t-gh}switch(e){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=t;break;case"right":r=-t}return[r,i]}(e,t[0])}function Sh(e,t,r){return t*(So/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class zu{constructor(e,t,r,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Cu{constructor(e,t,r,i,n){this.text=new zu(e?e.text:null,t,r,n),this.icon=new zu(e?e.icon:null,t,i,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mu{constructor(e,t,r){this.text=e,this.icon=t,this.skipFade=r}}class ku{constructor(){this.invProjMatrix=Wo(),this.viewportMatrix=Wo(),this.circles=[]}}class Pu{constructor(e,t,r,i,n){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=n}}class Du{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Th(e,t,r,i,o){const{horizontalAlign:a,verticalAlign:l}=wc(e),c=-(a-.5)*t,u=-(l-.5)*r,h=_h(e,i);return new n(c+h[0]*o,u+h[1]*o)}function Oh(e,t,r,i,o,a){const{x1:l,x2:c,y1:u,y2:h,anchorPointX:p,anchorPointY:d}=e,f=new n(t,r);return i&&f._rotate(o?a:-a),{x1:l+f.x,y1:u+f.y,x2:c+f.x,y2:h+f.y,anchorPointX:p,anchorPointY:d}}class Ru{constructor(e,t,r,i,n){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new wu(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=r,this.retainedQueryData={},this.collisionGroups=new Du(i),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,t,r,i){const n=r.getBucket(t),o=r.latestFeatureIndex;if(!n||!o||t.id!==n.layerIds[0])return;const a=r.collisionBoxArray,l=n.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/So,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=Sh(r,1,this.transform.zoom),m=Vu(h,p,d,this.transform,f);let g=null;if(p){const e=Uu(h,p,d,this.transform,f);g=Jo([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[n.bucketInstanceId]=new Pu(n.bucketInstanceId,o,n.sourceLayerIndex,n.index,r.tileID);const y={bucket:n,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:a,partiallyEvaluatedTextSize:Tc(n.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(i)for(const t of n.sortKeyRanges){const{sortKey:r,symbolInstanceStart:i,symbolInstanceEnd:n}=t;e.push({sortKey:r,symbolInstanceStart:i,symbolInstanceEnd:n,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g){const y=[p.textOffset0,p.textOffset1],v=Th(e,r,i,y,n),_=this.collisionIndex.placeCollisionBox(Oh(t,v.x,v.y,o,a,this.transform.angle),h,l,c,u.predicate,g);if((!m||0!==this.collisionIndex.placeCollisionBox(Oh(m,v.x,v.y,o,a,this.transform.angle),h,l,c,u.predicate,g).box.length)&&_.box.length>0){let t;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(t=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:y,width:r,height:i,anchor:e,textBoxScale:n,prevAnchor:t},this.markUsedJustification(d,e,p,f),d.allowVerticalPlacement&&(this.markUsedOrientation(d,f,p),this.placedOrientations[p.crossTileID]=f),{shift:v,placedGlyphBoxes:_}}}placeLayerBucketPart(e,t,r){const{bucket:i,layout:n,posMatrix:o,textLabelPlaneMatrix:a,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:p,collisionGroup:d}=e.parameters,f=n.get("text-optional"),m=n.get("icon-optional"),g=Ac(n,"text-overlap","text-allow-overlap"),y="always"===g,v=Ac(n,"icon-overlap","icon-allow-overlap"),_="always"===v,b="map"===n.get("text-rotation-alignment"),x="map"===n.get("text-pitch-alignment"),w="none"!==n.get("icon-text-fit"),S="viewport-y"===n.get("symbol-z-order"),M=y&&(_||!i.hasIconData()||m),E=_&&(y||!i.hasTextData()||f);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const T=this.retainedQueryData[i.bucketInstanceId].tileID,A=this.terrain?(e,t)=>this.terrain.getElevation(T,e,t):null,P=(e,h)=>{if(t[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new Mu(!1,!1,!1));let _=!1,S=!1,T=!0,P=null,O={box:null,offscreen:null},I={box:null,offscreen:null},k=null,F=null,D=null,j=0,z=0,N=0;h.textFeatureIndex?j=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(j=e.featureIndex),h.verticalTextFeatureIndex&&(z=h.verticalTextFeatureIndex);const B=h.textBox;if(B){const t=t=>{let r=bc.horizontal;if(i.allowVerticalPlacement&&!t&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},r=(t,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===bc.vertical?(O=r(),I=O):O=t(),O&&O.box&&O.box.length)break}else O=t()};if(n.get("text-variable-anchor")){let a=n.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];a.indexOf(t.anchor)>0&&(a=a.filter((e=>e!==t.anchor)),a.unshift(t.anchor))}const l=(t,r,n)=>{const l=t.x2-t.x1,u=t.y2-t.y1,h=e.textBoxScale,p=w&&"never"===v?r:null;let f={box:[],offscreen:!1};const m="never"!==g?2*a.length:a.length;for(let r=0;r<m;++r){const m=this.attemptAnchorPlacement(a[r%a.length],t,l,u,h,b,x,c,o,d,r>=a.length?g:"never",e,i,n,p,A);if(m&&(f=m.placedGlyphBoxes,f&&f.box&&f.box.length)){_=!0,P=m.shift;break}}return f};r((()=>l(B,h.iconBox,bc.horizontal)),(()=>{const t=h.verticalTextBox;return i.allowVerticalPlacement&&!(O&&O.box&&O.box.length)&&e.numVerticalGlyphVertices>0&&t?l(t,h.verticalIconBox,bc.vertical):{box:null,offscreen:null}})),O&&(_=O.box,T=O.offscreen);const u=t(O&&O.box);if(!_&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,u))}}else{const n=(t,r)=>{const n=this.collisionIndex.placeCollisionBox(t,g,c,o,d.predicate,A);return n&&n.box&&n.box.length&&(this.markUsedOrientation(i,r,e),this.placedOrientations[e.crossTileID]=r),n};r((()=>n(B,bc.horizontal)),(()=>{const t=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&t?n(t,bc.vertical):{box:null,offscreen:null}})),t(O&&O.box&&O.box.length)}}if(k=O,_=k&&k.box&&k.box.length>0,T=k&&k.offscreen,e.useRuntimeCollisionCircles){const t=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=Ec(i.textSizeData,p,t),u=n.get("text-padding");F=this.collisionIndex.placeCollisionCircles(g,t,i.lineVertexArray,i.glyphOffsetArray,c,o,a,l,r,x,d.predicate,e.collisionCircleDiameter,u,A),F.circles.length&&F.collisionDetected&&!r&&C("Collisions detected, but collision boxes are not shown"),_=y||F.circles.length>0&&!F.collisionDetected,T=T&&F.offscreen}if(h.iconFeatureIndex&&(N=h.iconFeatureIndex),h.iconBox){const e=e=>{const t=w&&P?Oh(e,P.x,P.y,b,x,this.transform.angle):e;return this.collisionIndex.placeCollisionBox(t,v,c,o,d.predicate,A)};I&&I.box&&I.box.length&&h.verticalIconBox?(D=e(h.verticalIconBox),S=D.box.length>0):(D=e(h.iconBox),S=D.box.length>0),T=T&&D.offscreen}const V=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,U=m||0===e.numIconVertices;if(V||U?U?V||(S=S&&_):_=S&&_:S=_=S&&_,_&&k&&k.box&&this.collisionIndex.insertCollisionBox(k.box,g,n.get("text-ignore-placement"),i.bucketInstanceId,I&&I.box&&z?z:j,d.ID),S&&D&&this.collisionIndex.insertCollisionBox(D.box,v,n.get("icon-ignore-placement"),i.bucketInstanceId,N,d.ID),F&&(_&&this.collisionIndex.insertCollisionCircles(F.circles,g,n.get("text-ignore-placement"),i.bucketInstanceId,j,d.ID),r)){const e=i.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new ku);for(let e=0;e<F.circles.length;e+=4)t.circles.push(F.circles[e+0]),t.circles.push(F.circles[e+1]),t.circles.push(F.circles[e+2]),t.circles.push(F.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Mu(_||M,S||E,T||i.justReloaded),t[e.crossTileID]=!0};if(S){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const r=t[e];P(i.symbolInstances.get(r),i.collisionArrays[r])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)P(i.symbolInstances.get(t),i.collisionArrays[t]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];Ko(e.invProjMatrix,o),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(e,t,r,i){let n;n=i===bc.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[function(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(t)];const o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of o)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=n>=0&&t!==n?0:r.crossTileID)}markUsedOrientation(e,t,r){const i=t===bc.horizontal||t===bc.horizontalOnly?t:0,n=t===bc.vertical?t:0,o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of o)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=n)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=n[e];o?(this.opacities[e]=new Cu(o,i,t.text,t.icon),r=r||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new Cu(null,i,t.text,t.icon,t.skipFade),r=r||t.text||t.icon)}for(const e in n){const t=n[e];if(!this.opacities[e]){const n=new Cu(t,i,!1,!1);n.isHidden()||(this.opacities[e]=n,r=r||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,r,i.collisionBoxArray)}}updateBucketOpacities(e,t,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=new Cu(null,0,!1,!1,!0),a=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),p="none"!==i.get("icon-text-fit"),d=new Cu(null,0,a&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(a||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const f=(e,t,r)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(r);e.hasVisibleVertices=e.hasVisibleVertices||r!==Xh};for(let r=0;r<e.symbolInstances.length;r++){const i=e.symbolInstances.get(r),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:l,crossTileID:m}=i;let g=this.opacities[m];t[m]?g=o:g||(g=d,this.opacities[m]=g),t[m]=!0;const y=i.numIconVertices>0,v=this.placedOrientations[i.crossTileID],_=v===bc.vertical,b=v===bc.horizontal||v===bc.horizontalOnly;if(a>0||l>0){const t=Wh(g.text);f(e.text,a,_?Xh:t),f(e.text,l,b?Xh:t);const r=g.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=r||_?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=r||b?1:0);const n=this.variableOffsets[i.crossTileID];n&&this.markUsedJustification(e,n.anchor,i,v);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(e,"left",i,o),this.markUsedOrientation(e,o,i))}if(y){const t=Wh(g.icon),r=!(p&&i.verticalPlacedIconSymbolIndex&&_);i.placedIconSymbolIndex>=0&&(f(e.icon,i.numIconVertices,r?t:Xh),e.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=g.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,i.numVerticalIconVertices,r?Xh:t),e.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const t=e.collisionArrays[r];if(t){let r=new n(0,0);if(t.textBox||t.verticalTextBox){let i=!0;if(c){const e=this.variableOffsets[m];e?(r=Th(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}t.textBox&&kh(e.textCollisionBox.collisionVertexArray,g.text.placed,!i||_,r.x,r.y),t.verticalTextBox&&kh(e.textCollisionBox.collisionVertexArray,g.text.placed,!i||b,r.x,r.y)}const i=Boolean(!b&&t.verticalIconBox);t.iconBox&&kh(e.iconCollisionBox.collisionVertexArray,g.icon.placed,i,p?r.x:0,p?r.y:0),t.verticalIconBox&&kh(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!i,p?r.x:0,p?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function kh(e,t,r,i,n){e.emplaceBack(t?1:0,r?1:0,i||0,n||0),e.emplaceBack(t?1:0,r?1:0,i||0,n||0),e.emplaceBack(t?1:0,r?1:0,i||0,n||0),e.emplaceBack(t?1:0,r?1:0,i||0,n||0)}const Fh=Math.pow(2,25),zh=Math.pow(2,24),Rh=Math.pow(2,17),Nh=Math.pow(2,16),Bh=Math.pow(2,9),qh=Math.pow(2,8),$h=Math.pow(2,1);function Wh(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*Fh+t*zh+r*Rh+t*Nh+r*Bh+t*qh+r*$h+t}const Xh=0;class Hu{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,i,n){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,n())return!0;return!1}}class Wu{constructor(e,t,r,i,n,o,a,l){this.placement=new Ru(e,t,o,a,l),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(e,t,r){const i=D.now(),n=()=>!this._forceFullPlacement&&D.now()-i>2;for(;this._currentPlacementIndex>=0;){const i=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new Hu(i)),this._inProgressLayer.continuePlacement(r[i.source],this.placement,this._showCollisionBoxes,i,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Kh=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ku{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const n=Kh[15&r];if(!n)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new Ku(a,o,n,e)}constructor(e,t=64,r=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const n=Kh.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(n<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+l,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+l),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+l,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Jh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:a}=this,l=[0,n.length-1,0],c=[];for(;l.length;){const u=l.pop()||0,h=l.pop()||0,p=l.pop()||0;if(h-p<=a){for(let a=p;a<=h;a++){const l=o[2*a],u=o[2*a+1];l>=e&&l<=r&&u>=t&&u<=i&&c.push(n[a])}continue}const d=p+h>>1,f=o[2*d],m=o[2*d+1];f>=e&&f<=r&&m>=t&&m<=i&&c.push(n[d]),(0===u?e<=f:t<=m)&&(l.push(p),l.push(d-1),l.push(1-u)),(0===u?r>=f:i>=m)&&(l.push(d+1),l.push(h),l.push(1-u))}return c}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:n,nodeSize:o}=this,a=[0,i.length-1,0],l=[],c=r*r;for(;a.length;){const u=a.pop()||0,h=a.pop()||0,p=a.pop()||0;if(h-p<=o){for(let r=p;r<=h;r++)ip(n[2*r],n[2*r+1],e,t)<=c&&l.push(i[r]);continue}const d=p+h>>1,f=n[2*d],m=n[2*d+1];ip(f,m,e,t)<=c&&l.push(i[d]),(0===u?e-r<=f:t-r<=m)&&(a.push(p),a.push(d-1),a.push(1-u)),(0===u?e+r>=f:t+r>=m)&&(a.push(d+1),a.push(h),a.push(1-u))}return l}}function Jh(e,t,r,i,n,o){if(n-i<=r)return;const a=i+n>>1;Qh(e,t,a,i,n,o),Jh(e,t,r,i,a-1,1-o),Jh(e,t,r,a+1,n,1-o)}function Qh(e,t,r,i,n,o){for(;n>i;){if(n-i>600){const a=n-i+1,l=r-i+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);Qh(e,t,r,Math.max(i,Math.floor(r-l*u/a+h)),Math.min(n,Math.floor(r+(a-l)*u/a+h)),o)}const a=t[2*r+o];let l=i,c=n;for(ep(e,t,i,r),t[2*n+o]>a&&ep(e,t,i,n);l<c;){for(ep(e,t,l,c),l++,c--;t[2*l+o]<a;)l++;for(;t[2*c+o]>a;)c--}t[2*i+o]===a?ep(e,t,i,c):(c++,ep(e,t,c,n)),c<=r&&(i=c+1),r<=c&&(n=c-1)}}function ep(e,t,r,i){tp(e,r,i),tp(t,2*r,2*i),tp(t,2*r+1,2*i+1)}function tp(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function ip(e,t,r,i){const n=e-r,o=t-i;return n*n+o*o}const op=512/So/2;class rp{constructor(e,t,r){this.tileID=e,this.bucketInstanceId=r,this._symbolsByKey={};const i=new Map;for(let e=0;e<t.length;e++){const r=t.get(e),n=r.key,o=i.get(n);o?o.push(r):i.set(n,[r])}for(const[e,t]of i){const r={positions:t.map((e=>({x:Math.floor(e.anchorX*op),y:Math.floor(e.anchorY*op)}))),crossTileIDs:t.map((e=>e.crossTileID))};if(r.positions.length>128){const e=new Ku(r.positions.length,16,Uint16Array);for(const{x:t,y:i}of r.positions)e.add(t,i);e.finish(),delete r.positions,r.index=e}this._symbolsByKey[e]=r}}getScaledCoordinates(e,t){const{x:r,y:i,z:n}=this.tileID.canonical,{x:o,y:a,z:l}=t.canonical,c=op/Math.pow(2,l-n),u=(a*So+e.anchorY)*c,h=i*So*op;return{x:Math.floor((o*So+e.anchorX)*c-r*So*op),y:Math.floor(u-h)}}findMatches(e,t,r){const i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let n=0;n<e.length;n++){const o=e.get(n);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const l=this.getScaledCoordinates(o,t);if(a.index){const e=a.index.range(l.x-i,l.y-i,l.x+i,l.y+i).sort();for(const t of e){const e=a.crossTileIDs[t];if(!r[e]){r[e]=!0,o.crossTileID=e;break}}}else if(a.positions)for(let e=0;e<a.positions.length;e++){const t=a.positions[e],n=a.crossTileIDs[e];if(Math.abs(t.x-l.x)<=i&&Math.abs(t.y-l.y)<=i&&!r[n]){r[n]=!0,o.crossTileID=n;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class sp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class np{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const r=this.indexes[e],i={};for(const e in r){const n=r[e];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),i[n.tileID.key]=n}this.indexes[e]=i}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const i=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const n=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in n){const o=n[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=n[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let e=0;e<t.symbolInstances.length;e++){const n=t.symbolInstances.get(e);n.crossTileID||(n.crossTileID=r.generate(),i[n.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new rp(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.getCrossTileIDsLists())for(const t of r)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const i=this.indexes[r];for(const n in i)e[i[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,i[n]),delete i[n],t=!0)}return t}}class ap{constructor(){this.layerIndexes={},this.crossTileIDs=new sp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new np);let n=!1;const o={};i.handleWrapJump(r);for(const r of t){const t=r.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(r.tileID,t,this.crossTileIDs)&&(n=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const lp=(e,t)=>Ri(e,t&&t.filter((e=>"source.canvas"!==e.identifier))),cp=m(me,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),hp=m(me,["setCenter","setZoom","setBearing","setPitch"]),pp=function(){const e={},t=ne.$version;for(const r in ne.$root){const i=ne.$root[r];if(i.required){let n=null;n="version"===r?t:"array"===i.type?[]:{},null!=n&&(e[r]=n)}}return e}();class up extends nt{constructor(e,t={}){super(),this.map=e,this.dispatcher=new lh(Nu(),this,e._getMapId()),this.imageManager=new Jc,this.imageManager.setEventedParent(this),this.glyphManager=new ih(e._requestManager,t.localIdeographFontFamily),this.lineAtlas=new ah(256,512),this.crossTileSymbolIndex=new ap,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new Gr,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",z());const r=this;this._rtlTextPluginCallback=up.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,t)=>{if(Rn(e),t&&t.every((e=>e)))for(const e in r.sourceCaches){const t=r.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||r.sourceCaches[e].reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const r=t.getSource();if(r&&r.vectorLayerIds)for(const e in this._layers){const t=this._layers[e];t.source===r.id&&this._validateLayer(t)}}))}loadURL(e,t={},r){this.fire(new rt("dataloading",{dataType:"style"})),t.validate="boolean"!=typeof t.validate||t.validate;const i=this.map._requestManager.transformRequest(e,J.Style);this._request=U(i,((e,i)=>{this._request=null,e?this.fire(new st(e)):i&&this._load(i,t,r)}))}loadJSON(e,t={},r){this.fire(new rt("dataloading",{dataType:"style"})),this._request=D.frame((()=>{this._request=null,t.validate=!1!==t.validate,this._load(e,t,r)}))}loadEmpty(){this.fire(new rt("dataloading",{dataType:"style"})),this._load(pp,{validate:!1})}_load(e,t,r){const i=t.transformStyle?t.transformStyle(r,e):e;if(!t.validate||!lp(this,Fi(i))){this._loaded=!0,this.stylesheet=i;for(const e in i.sources)this.addSource(e,i.sources[e],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs),this._createLayers(),this.light=new nh(this.stylesheet.light),this.map.setTerrain(this.stylesheet.terrain),this.fire(new rt("data",{dataType:"style"})),this.fire(new rt("style.load"))}}_createLayers(){const e=de(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const t of e){const e=Wc(t);e.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=e}}_loadSprite(e,t=!1,r=undefined){this.imageManager.setLoaded(!1),this._spriteRequest=function(e,t,r,i){const n=Xc(e),o=n.length,a=r>1?"@2x":"",l={},c={},u={};for(const{id:e,url:r}of n){const n=t.transformRequest(t.normalizeSpriteURL(r,a,".json"),J.SpriteJSON),h=`${e}_${n.url}`;l[h]=U(n,((t,r)=>{delete l[h],c[e]=r,Yc(i,c,u,t,o)}));const p=t.transformRequest(t.normalizeSpriteURL(r,a,".png"),J.SpriteImage),d=`${e}_${p.url}`;l[d]=ee.getImage(p,((t,r)=>{delete l[d],u[e]=r,Yc(i,c,u,t,o)}))}return{cancel(){for(const e of Object.values(l))e.cancel()}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,i)=>{if(this._spriteRequest=null,e)this.fire(new st(e));else if(i)for(const e in i){this._spritesImagesIds[e]=[];const r=this._spritesImagesIds[e]?this._spritesImagesIds[e].filter((e=>!(e in i))):[];for(const e of r)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const r in i[e]){const n="default"===e?r:`${e}:${r}`;this._spritesImagesIds[e].push(n),n in this.imageManager.images?this.imageManager.updateImage(n,i[e][r],!1):this.imageManager.addImage(n,i[e][r]),t&&(this._changedImages[n]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),t&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new rt("data",{dataType:"style"})),r&&r(e)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new rt("data",{dataType:"style"}))}_validateLayer(e){const t=this.sourceCaches[e.source];if(!t)return;const r=e.sourceLayer;if(!r)return;const i=t.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new st(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){const t=this._serializedAllLayers();if(!e||0===e.length)return Object.values(t);const r=[];for(const i of e)t[i]&&r.push(t[i]);return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const r of t){const t=this._layers[r];"custom"!==t.type&&(e[r]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const t=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(t.length||r.length)&&this._updateWorkerLayers(t,r);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const e in this.sourceCaches){const t=this.sourceCaches[e];r[e]=t.used,t.used=!1}for(const t of this._order){const r=this._layers[t];r.recalculate(e,this._availableImages),!r.isHidden(e.zoom)&&r.source&&(this.sourceCaches[r.source].used=!0)}for(const e in r){const t=this.sourceCaches[e];r[e]!==t.used&&t.fire(new rt("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}))}this.light.recalculate(e),this.z=e.zoom,t&&this.fire(new rt("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,t={}){this._checkLoaded();const r=this.serialize();if(e=t.transformStyle?t.transformStyle(r,e):e,lp(this,Fi(e)))return!1;(e=w(e)).layers=de(e.layers);const i=function(e,t){if(!e)return[{command:me.setStyle,args:[t]}];let r=[];try{if(!fe(e.version,t.version))return[{command:me.setStyle,args:[t]}];fe(e.center,t.center)||r.push({command:me.setCenter,args:[t.center]}),fe(e.zoom,t.zoom)||r.push({command:me.setZoom,args:[t.zoom]}),fe(e.bearing,t.bearing)||r.push({command:me.setBearing,args:[t.bearing]}),fe(e.pitch,t.pitch)||r.push({command:me.setPitch,args:[t.pitch]}),fe(e.sprite,t.sprite)||r.push({command:me.setSprite,args:[t.sprite]}),fe(e.glyphs,t.glyphs)||r.push({command:me.setGlyphs,args:[t.glyphs]}),fe(e.transition,t.transition)||r.push({command:me.setTransition,args:[t.transition]}),fe(e.light,t.light)||r.push({command:me.setLight,args:[t.light]});const i={},n=[];!function(e,t,r,i){let n;for(n in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,n)&&(Object.prototype.hasOwnProperty.call(t,n)||be(n,r,i));for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?fe(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&Ce(e,t,n)?r.push({command:me.setGeoJSONSourceData,args:[n,t[n].data]}):xe(n,t,r,i)):_e(n,t,r))}(e.sources,t.sources,n,i);const o=[];e.layers&&e.layers.forEach((e=>{i[e.source]?r.push({command:me.removeLayer,args:[e.id]}):o.push(e)})),r=r.concat(n),function(e,t,r){t=t||[];const i=(e=e||[]).map(Ee),n=t.map(Ee),o=e.reduce(Te,{}),a=t.reduce(Te,{}),l=i.slice(),c=Object.create(null);let u,h,p,d,f,m,g;for(u=0,h=0;u<i.length;u++)p=i[u],Object.prototype.hasOwnProperty.call(a,p)?h++:(r.push({command:me.removeLayer,args:[p]}),l.splice(l.indexOf(p,h),1));for(u=0,h=0;u<n.length;u++)p=n[n.length-1-u],l[l.length-1-u]!==p&&(Object.prototype.hasOwnProperty.call(o,p)?(r.push({command:me.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-h),1)):h++,m=l[l.length-u],r.push({command:me.addLayer,args:[a[p],m]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<n.length;u++)if(p=n[u],d=o[p],f=a[p],!c[p]&&!fe(d,f))if(fe(d.source,f.source)&&fe(d["source-layer"],f["source-layer"])&&fe(d.type,f.type)){for(g in Me(d.layout,f.layout,r,p,null,me.setLayoutProperty),Me(d.paint,f.paint,r,p,null,me.setPaintProperty),fe(d.filter,f.filter)||r.push({command:me.setFilter,args:[p,f.filter]}),fe(d.minzoom,f.minzoom)&&fe(d.maxzoom,f.maxzoom)||r.push({command:me.setLayerZoomRange,args:[p,f.minzoom,f.maxzoom]}),d)Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Me(d[g],f[g],r,p,g.slice(6),me.setPaintProperty):fe(d[g],f[g])||r.push({command:me.setLayerProperty,args:[p,g,f[g]]}));for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&!Object.prototype.hasOwnProperty.call(d,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Me(d[g],f[g],r,p,g.slice(6),me.setPaintProperty):fe(d[g],f[g])||r.push({command:me.setLayerProperty,args:[p,g,f[g]]}))}else r.push({command:me.removeLayer,args:[p]}),m=l[l.lastIndexOf(p)+1],r.push({command:me.addLayer,args:[f,m]})}(o,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:me.setStyle,args:[t]}]}return r}(r,e).filter((e=>!(e.command in hp)));if(0===i.length)return!1;const n=i.filter((e=>!(e.command in cp)));if(n.length>0)throw new Error(`Unimplemented: ${n.map((e=>e.command)).join(", ")}.`);for(const e of i)"setTransition"!==e.command&&this[e.command].apply(this,e.args);return this.stylesheet=e,!0}addImage(e,t){if(this.getImage(e))return this.fire(new st(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,t),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new st(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new rt("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,t,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!t.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(t).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(t.type)>=0&&this._validate(Fi.source,`sources.${e}`,t,null,r))return;this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);const i=this.sourceCaches[e]=new Hh(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const t in this._layers)if(this._layers[t].source===e)return this.fire(new st(new Error(`Source "${e}" cannot be removed while layer "${t}" is using it.`)));const t=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],t.fire(new rt("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),t.setEventedParent(null),t.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const r=this.sourceCaches[e].getSource();if("geojson"!==r.type)throw new Error(`geojsonSource.type is ${r.type}, which is !== 'geojson`);r.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,t,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new st(new Error(`Layer "${i}" already exists on this map.`)));let n;if("custom"===e.type){if(lp(this,function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t}(e)))return;n=Wc(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=f(e=w(e),{source:i})),this._validate(Fi.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;n=Wc(e),this._validateLayer(n),n.setEventedParent(this,{layer:{id:i}})}const o=t?this._order.indexOf(t):this._order.length;if(t&&-1===o)this.fire(new st(new Error(`Cannot add layer "${i}" before non-existing layer "${t}".`)));else{if(this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=n,this._removedLayers[i]&&n.source&&"custom"!==n.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n),n.onAdd&&n.onAdd(this.map)}}moveLayer(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new st(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===t)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=t?this._order.indexOf(t):this._order.length;t&&-1===i?this.fire(new st(new Error(`Cannot move layer "${e}" before non-existing layer "${t}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const t=this._layers[e];if(!t)return void this.fire(new st(new Error(`Cannot remove non-existing layer "${e}".`)));t.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],t.onRemove&&t.onRemove(this.map)}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,t,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===t&&i.maxzoom===r||(null!=t&&(i.minzoom=t),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new st(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,t,r={}){this._checkLoaded();const i=this.getLayer(e);if(i){if(!x(i.filter,t))return null==t?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(Fi.filter,`layers.${i.id}.filter`,t,null,r)||(i.filter=w(t),this._updateLayer(i)))}else this.fire(new st(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return w(this.getLayer(e).filter)}setLayoutProperty(e,t,r,i={}){this._checkLoaded();const n=this.getLayer(e);n?x(n.getLayoutProperty(t),r)||(n.setLayoutProperty(t,r,i),this._updateLayer(n)):this.fire(new st(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,t){const r=this.getLayer(e);if(r)return r.getLayoutProperty(t);this.fire(new st(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,t,r,i={}){this._checkLoaded();const n=this.getLayer(e);n?x(n.getPaintProperty(t),r)||(n.setPaintProperty(t,r,i)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new st(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,t){this._checkLoaded();const r=e.source,i=e.sourceLayer,n=this.sourceCaches[r];if(void 0===n)return void this.fire(new st(new Error(`The source '${r}' does not exist in the map's style.`)));const o=n.getSource().type;"geojson"===o&&i?this.fire(new st(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||i?(void 0===e.id&&this.fire(new st(new Error("The feature id parameter must be provided."))),n.setFeatureState(i,e.id,t)):this.fire(new st(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,t){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new st(new Error(`The source '${r}' does not exist in the map's style.`)));const n=i.getSource().type,o="vector"===n?e.sourceLayer:void 0;"vector"!==n||o?t&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new st(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(o,e.id,t):this.fire(new st(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const t=e.source,r=e.sourceLayer,i=this.sourceCaches[t];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new st(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new st(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new st(new Error(`The source '${t}' does not exist in the map's style.`)))}getTransition(){return f({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e=_(this.sourceCaches,(e=>e.serialize())),t=this._serializeByIds(this._order),r=this.stylesheet;return b({version:r.version,name:r.name,metadata:r.metadata,light:r.light,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,sources:e,layers:t},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},i=[];for(let n=this._order.length-1;n>=0;n--){const o=this._order[n];if(t(o)){r[o]=n;for(const t of e){const e=t[o];if(e)for(const t of e)i.push(t)}}}i.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const n=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(r[t.layer.id]<o)break;n.push(t),i.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)n.push(t.feature)}}return n}queryRenderedFeatures(e,t,r){t&&t.filter&&this._validate(Fi.filter,"queryRenderedFeatures.filter",t.filter,null,t);const i={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new st(new Error("parameters.layers must be an Array."))),[];for(const e of t.layers){const t=this._layers[e];if(!t)return this.fire(new st(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[t.source]=!0}}const n=[];t.availableImages=this._availableImages;const o=this._serializedAllLayers();for(const a in this.sourceCaches)t.layers&&!i[a]||n.push(bu(this.sourceCaches[a],this._layers,o,e,t,r));return this.placement&&n.push(function(e,t,r,i,n,o,a){const l={},c=o.queryRenderedSymbols(i),u=[];for(const e of Object.keys(c).map(Number))u.push(a[e]);u.sort(xu);for(const r of u){const i=r.featureIndex.lookupSymbolFeatures(c[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,n.filter,n.layers,n.availableImages,e);for(const e in i){const t=l[e]=l[e]||[],n=i[e];n.sort(((e,t)=>{const i=r.featureSortOrder;if(i){const r=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of n)t.push(e)}}for(const t in l)l[t].forEach((i=>{const n=i.feature,o=r[e[t].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=o}));return l}(this._layers,o,this.sourceCaches,e,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(n)}querySourceFeatures(e,t){t&&t.filter&&this._validate(Fi.filter,"querySourceFeatures.filter",t.filter,null,t);const r=this.sourceCaches[e];return r?function(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),i=[],n={};for(let e=0;e<r.length;e++){const o=r[e],a=o.tileID.canonical.key;n[a]||(n[a]=!0,o.querySourceFeatures(i,t))}return i}(r,t):[]}addSourceType(e,t,r){return up.getSourceType(e)?r(new Error(`A source type called "${e}" already exists.`)):(up.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}getLight(){return this.light.getLight()}setLight(e,t={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const t in e)if(!x(e[t],r[t])){i=!0;break}if(!i)return;const n={now:D.now(),transition:f({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,t),this.light.updateTransitions(n)}_validate(e,t,r,i,n={}){return(!n||!1!==n.validate)&&lp(this,e.call(Fi,f({key:t,style:this.serialize(),value:r,styleSpec:ne},i)))}_remove(e=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),Bn.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.sourceCaches){const t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,r,i,n=!1){let o=!1,a=!1;const l={};for(const t of this._order){const r=this._layers[t];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this.sourceCaches[r.source];l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(r,l[r.source],e.center.lng);o=o||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),e.zoom))&&(this.pauseablePlacement=new Wu(e,this.map.terrain,this._order,n,t,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),a=!0),o&&this.pauseablePlacement.placement.setStale()),a||o)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,r){this.imageManager.getImages(t.icons,r),this._updateTilesForChangedImages();const i=this.sourceCaches[t.source];i&&i.setDependencies(t.tileID.key,t.type,t.icons)}getGlyphs(e,t,r){this.glyphManager.getGlyphs(t.stacks,r);const i=this.sourceCaches[t.source];i&&i.setDependencies(t.tileID.key,t.type,[""])}getResource(e,t,r){return V(t,r)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,t={}){this._checkLoaded(),e&&this._validate(Fi.glyphs,"glyphs",e,null,t)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,t,r={},i){this._checkLoaded();const n=[{id:e,url:t}],o=[...Xc(this.stylesheet.sprite),...n];this._validate(Fi.sprite,"sprite",o,null,r)||(this.stylesheet.sprite=o,this._loadSprite(n,!0,i))}removeSprite(e){this._checkLoaded();const t=Xc(this.stylesheet.sprite);if(t.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;t.splice(t.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=t.length>0?t:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new rt("data",{dataType:"style"}))}else this.fire(new st(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Xc(this.stylesheet.sprite)}setSprite(e,t={},r){this._checkLoaded(),e&&this._validate(Fi.sprite,"sprite",e,null,t)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,r):(this._unloadSprite(),r&&r(null)))}}up.getSourceType=function(e){return vu[e]},up.setSourceType=function(e,t){vu[e]=t},up.registerForPluginStateChange=function(e){return e({pluginStatus:Fn,pluginURL:jn}),Bn.on("pluginStateChange",e),e};var dp=eo([{name:"a_pos",type:"Int16",components:2}]),fp="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mp={prelude:gp("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:gp("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:gp("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:gp("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:gp("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:gp("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:gp("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:gp("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:gp("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:gp("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:gp("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:gp("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:gp("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:gp("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:gp("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:gp("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:gp("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:gp("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:gp("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:gp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:gp("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:gp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:gp("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:gp("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:gp("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:gp("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:gp("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",fp),terrainDepth:gp("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",fp),terrainCoords:gp("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",fp)};function gp(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute ([\w]+) ([\w]+)/g),n=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,l={};return{fragmentSource:e=e.replace(r,((e,t,r,i,n)=>(l[n]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${r} ${i} ${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = u_${n};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,i,n)=>{const o="float"===i?"vec2":"vec4",a=n.match(/color/)?"color":o;return l[n]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${r} ${o} a_${n};\nvarying ${r} ${i} ${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${r} ${o} a_${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = a_${n};\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`})),staticAttributes:i,staticUniforms:a}}class _p{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,r,i,n,o,a,l,c){this.context=e;let u=this.boundPaintVertexBuffers.length!==i.length;for(let e=0;!u&&e<i.length;e++)this.boundPaintVertexBuffers[e]!==i[e]&&(u=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||u||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==l||this.boundDynamicVertexBuffer3!==c?this.freshBind(t,r,i,n,o,a,l,c):(e.bindVertexArray.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),l&&l.bind(),c&&c.bind())}freshBind(e,t,r,i,n,o,a,l){const c=e.numAttributes,u=this.context,h=u.gl;this.vao&&this.destroy(),this.vao=u.createVertexArray(),u.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=l,t.enableAttributes(h,e);for(const t of r)t.enableAttributes(h,e);o&&o.enableAttributes(h,e),a&&a.enableAttributes(h,e),l&&l.enableAttributes(h,e),t.bind(),t.setVertexAttribPointers(h,e,n);for(const t of r)t.bind(),t.setVertexAttribPointers(h,e,n);o&&(o.bind(),o.setVertexAttribPointers(h,e,n)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(h,e,n)),l&&(l.bind(),l.setVertexAttribPointers(h,e,n)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function vp(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const i=e[r].split(" ");t.push(i.pop())}return t}class yp{constructor(e,t,r,i,n,o,a){const l=e.gl;this.program=l.createProgram();const c=vp(r.staticAttributes),u=i?i.getBinderAttributes():[],h=c.concat(u),p=mp.prelude.staticUniforms?vp(mp.prelude.staticUniforms):[],d=r.staticUniforms?vp(r.staticUniforms):[],f=i?i.getBinderUniforms():[],m=p.concat(d).concat(f),g=[];for(const e of m)g.indexOf(e)<0&&g.push(e);const y=i?i.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;"),a&&y.push("#define TERRAIN3D;");const v=y.concat(mp.prelude.fragmentSource,r.fragmentSource).join("\n"),_=y.concat(mp.prelude.vertexSource,r.vertexSource).join("\n"),b=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(b,v),l.compileShader(b),l.attachShader(this.program,b);const x=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(x,_),l.compileShader(x),l.attachShader(this.program,x),this.attributes={};const w={};this.numAttributes=h.length;for(let e=0;e<this.numAttributes;e++)h[e]&&(l.bindAttribLocation(this.program,e,h[e]),this.attributes[h[e]]=e);l.linkProgram(this.program),l.deleteShader(x),l.deleteShader(b);for(let e=0;e<g.length;e++){const t=g[e];if(t&&!w[t]){const e=l.getUniformLocation(this.program,t);e&&(w[t]=e)}}this.fixedUniforms=n(e,w),this.terrainUniforms=((e,t)=>({u_depth:new Wn(e,t.u_depth),u_terrain:new Wn(e,t.u_terrain),u_terrain_dim:new Xn(e,t.u_terrain_dim),u_terrain_matrix:new ea(e,t.u_terrain_matrix),u_terrain_unpack:new Jn(e,t.u_terrain_unpack),u_terrain_exaggeration:new Xn(e,t.u_terrain_exaggeration)}))(e,w),this.binderUniforms=i?i.getUniforms(e,w):[]}draw(e,t,r,i,n,o,a,l,c,u,h,p,d,f,m,g,y,v){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(i),e.setColorMode(n),e.setCullFace(o),l){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,l.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,l.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(l[e])}for(const e in this.fixedUniforms)this.fixedUniforms[e].set(a[e]);m&&m.setUniforms(e,this.binderUniforms,d,{zoom:f});let b=0;switch(t){case _.LINES:b=2;break;case _.TRIANGLES:b=3;break;case _.LINE_STRIP:b=1}for(const r of p.get()){const i=r.vaos||(r.vaos={});(i[c]||(i[c]=new _p)).bind(e,this,u,m?m.getPaintVertexBuffers():[],h,r.vertexOffset,g,y,v),_.drawElements(t,r.primitiveLength*b,_.UNSIGNED_SHORT,r.primitiveOffset*b*2)}}}function bp(e,t,r){const i=1/Sh(r,1,t.transform.tileZoom),n=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,t.transform.tileZoom)/n,a=o*(r.tileID.canonical.x+r.tileID.wrap*n),l=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,l>>16],u_pixel_coord_lower:[65535&a,65535&l]}}const xp=(e,t,r,i)=>{const n=t.style.light,o=n.properties.get("position"),a=[o.x,o.y,o.z],l=function(){var e=new $o(9);return $o!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===n.properties.get("anchor")&&function(e,t){var r=Math.sin(t),i=Math.cos(t);e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-t.transform.angle),function(e,t,r){var i=t[0],n=t[1],o=t[2];e[0]=i*r[0]+n*r[3]+o*r[6],e[1]=i*r[1]+n*r[4]+o*r[7],e[2]=i*r[2]+n*r[5]+o*r[8]}(a,a,l);const c=n.properties.get("color");return{u_matrix:e,u_lightpos:a,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},wp=(e,t,r,i,n,o,a)=>f(xp(e,t,r,i),bp(o,t,a),{u_height_factor:-Math.pow(2,n.overscaledZ)/a.tileSize/8}),Sp=e=>({u_matrix:e}),Cp=(e,t,r,i)=>f(Sp(e),bp(r,t,i)),Mp=(e,t)=>({u_matrix:e,u_world:t}),Ep=(e,t,r,i,n)=>f(Cp(e,t,r,i),{u_world:n}),Tp=(e,t,r,i)=>{const n=e.transform;let o,a;if("map"===i.paint.get("circle-pitch-alignment")){const e=Sh(r,1,n.zoom);o=!0,a=[e,e]}else o=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},Ap=(e,t,r)=>{const i=Sh(r,1,t.zoom),n=Math.pow(2,t.zoom-r.tileID.overscaledZ),o=r.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:i,u_extrude_scale:[t.pixelsToGLUnits[0]/(i*n),t.pixelsToGLUnits[1]/(i*n)],u_overscale_factor:o}},Pp=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),Op=e=>({u_matrix:e}),Ip=(e,t,r,i)=>({u_matrix:e,u_extrude_scale:Sh(t,1,r),u_intensity:i});function Lp(e,t){const r=Math.pow(2,t.canonical.z),i=t.canonical.y;return[new xh(0,i/r).toLngLat().lat,new xh(0,(i+1)/r).toLngLat().lat]}const kp=(e,t,r,i)=>{const n=e.transform;return{u_matrix:Rp(e,t,r,i),u_ratio:1/Sh(t,1,n.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Fp=(e,t,r,i,n)=>f(kp(e,t,r,n),{u_image:0,u_image_height:i}),Dp=(e,t,r,i,n)=>{const o=e.transform,a=zp(t,o);return{u_matrix:Rp(e,t,r,n),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Sh(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},jp=(e,t,r,i,n,o)=>{const a=e.lineAtlas,l=zp(t,e.transform),c="round"===r.layout.get("line-cap"),u=a.getDash(i.from,c),h=a.getDash(i.to,c),p=u.width*n.fromScale,d=h.width*n.toScale;return f(kp(e,t,r,o),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/d,-h.height/2],u_sdfgamma:a.width/(256*Math.min(p,d)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:n.t})};function zp(e,t){return 1/Sh(e,1,t.tileZoom)}function Rp(e,t,r,i){return e.translatePosMatrix(i?i.posMatrix:t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Np=(e,t,r,i,n)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Bp(n.paint.get("raster-hue-rotate"))};var o,a};function Bp(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Vp=(e,t,r,i,n,o,a,l,c,u)=>{const h=n.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:h.cameraToCenterDistance,u_pitch:h.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:h.width/h.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},Up=(e,t,r,i,n,o,a,l,c,u,h)=>{const p=n.transform;return f(Vp(e,t,r,i,n,o,a,l,c,u),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:n.pixelRatio,u_is_halo:+h})},Hp=(e,t,r,i,n,o,a,l,c,u)=>f(Up(e,t,r,i,n,o,a,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),qp=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),Zp=(e,t,r,i,n,o)=>f(function(e,t,r,i){const n=r.imageManager.getPattern(e.from.toString()),o=r.imageManager.getPattern(e.to.toString()),{width:a,height:l}=r.imageManager.getPixelSize(),c=Math.pow(2,i.tileID.overscaledZ),u=i.tileSize*Math.pow(2,r.transform.tileZoom)/c,h=u*(i.tileID.canonical.x+i.tileID.wrap*c),p=u*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,l],u_mix:t.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Sh(i,1,r.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(i,o,r,n),{u_matrix:e,u_opacity:t}),$p={fillExtrusion:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_lightpos:new Yn(e,t.u_lightpos),u_lightintensity:new Xn(e,t.u_lightintensity),u_lightcolor:new Yn(e,t.u_lightcolor),u_vertical_gradient:new Xn(e,t.u_vertical_gradient),u_opacity:new Xn(e,t.u_opacity)}),fillExtrusionPattern:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_lightpos:new Yn(e,t.u_lightpos),u_lightintensity:new Xn(e,t.u_lightintensity),u_lightcolor:new Yn(e,t.u_lightcolor),u_vertical_gradient:new Xn(e,t.u_vertical_gradient),u_height_factor:new Xn(e,t.u_height_factor),u_image:new Wn(e,t.u_image),u_texsize:new Kn(e,t.u_texsize),u_pixel_coord_upper:new Kn(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Kn(e,t.u_pixel_coord_lower),u_scale:new Yn(e,t.u_scale),u_fade:new Xn(e,t.u_fade),u_opacity:new Xn(e,t.u_opacity)}),fill:(e,t)=>({u_matrix:new ea(e,t.u_matrix)}),fillPattern:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_image:new Wn(e,t.u_image),u_texsize:new Kn(e,t.u_texsize),u_pixel_coord_upper:new Kn(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Kn(e,t.u_pixel_coord_lower),u_scale:new Yn(e,t.u_scale),u_fade:new Xn(e,t.u_fade)}),fillOutline:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_world:new Kn(e,t.u_world)}),fillOutlinePattern:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_world:new Kn(e,t.u_world),u_image:new Wn(e,t.u_image),u_texsize:new Kn(e,t.u_texsize),u_pixel_coord_upper:new Kn(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Kn(e,t.u_pixel_coord_lower),u_scale:new Yn(e,t.u_scale),u_fade:new Xn(e,t.u_fade)}),circle:(e,t)=>({u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_scale_with_map:new Wn(e,t.u_scale_with_map),u_pitch_with_map:new Wn(e,t.u_pitch_with_map),u_extrude_scale:new Kn(e,t.u_extrude_scale),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_matrix:new ea(e,t.u_matrix)}),collisionBox:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_pixels_to_tile_units:new Xn(e,t.u_pixels_to_tile_units),u_extrude_scale:new Kn(e,t.u_extrude_scale),u_overscale_factor:new Xn(e,t.u_overscale_factor)}),collisionCircle:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_inv_matrix:new ea(e,t.u_inv_matrix),u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_viewport_size:new Kn(e,t.u_viewport_size)}),debug:(e,t)=>({u_color:new Qn(e,t.u_color),u_matrix:new ea(e,t.u_matrix),u_overlay:new Wn(e,t.u_overlay),u_overlay_scale:new Xn(e,t.u_overlay_scale)}),clippingMask:(e,t)=>({u_matrix:new ea(e,t.u_matrix)}),heatmap:(e,t)=>({u_extrude_scale:new Xn(e,t.u_extrude_scale),u_intensity:new Xn(e,t.u_intensity),u_matrix:new ea(e,t.u_matrix)}),heatmapTexture:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_world:new Kn(e,t.u_world),u_image:new Wn(e,t.u_image),u_color_ramp:new Wn(e,t.u_color_ramp),u_opacity:new Xn(e,t.u_opacity)}),hillshade:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_image:new Wn(e,t.u_image),u_latrange:new Kn(e,t.u_latrange),u_light:new Kn(e,t.u_light),u_shadow:new Qn(e,t.u_shadow),u_highlight:new Qn(e,t.u_highlight),u_accent:new Qn(e,t.u_accent)}),hillshadePrepare:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_image:new Wn(e,t.u_image),u_dimension:new Kn(e,t.u_dimension),u_zoom:new Xn(e,t.u_zoom),u_unpack:new Jn(e,t.u_unpack)}),line:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_ratio:new Xn(e,t.u_ratio),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_units_to_pixels:new Kn(e,t.u_units_to_pixels)}),lineGradient:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_ratio:new Xn(e,t.u_ratio),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_units_to_pixels:new Kn(e,t.u_units_to_pixels),u_image:new Wn(e,t.u_image),u_image_height:new Xn(e,t.u_image_height)}),linePattern:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_texsize:new Kn(e,t.u_texsize),u_ratio:new Xn(e,t.u_ratio),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_image:new Wn(e,t.u_image),u_units_to_pixels:new Kn(e,t.u_units_to_pixels),u_scale:new Yn(e,t.u_scale),u_fade:new Xn(e,t.u_fade)}),lineSDF:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_ratio:new Xn(e,t.u_ratio),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_units_to_pixels:new Kn(e,t.u_units_to_pixels),u_patternscale_a:new Kn(e,t.u_patternscale_a),u_patternscale_b:new Kn(e,t.u_patternscale_b),u_sdfgamma:new Xn(e,t.u_sdfgamma),u_image:new Wn(e,t.u_image),u_tex_y_a:new Xn(e,t.u_tex_y_a),u_tex_y_b:new Xn(e,t.u_tex_y_b),u_mix:new Xn(e,t.u_mix)}),raster:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_tl_parent:new Kn(e,t.u_tl_parent),u_scale_parent:new Xn(e,t.u_scale_parent),u_buffer_scale:new Xn(e,t.u_buffer_scale),u_fade_t:new Xn(e,t.u_fade_t),u_opacity:new Xn(e,t.u_opacity),u_image0:new Wn(e,t.u_image0),u_image1:new Wn(e,t.u_image1),u_brightness_low:new Xn(e,t.u_brightness_low),u_brightness_high:new Xn(e,t.u_brightness_high),u_saturation_factor:new Xn(e,t.u_saturation_factor),u_contrast_factor:new Xn(e,t.u_contrast_factor),u_spin_weights:new Yn(e,t.u_spin_weights)}),symbolIcon:(e,t)=>({u_is_size_zoom_constant:new Wn(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new Wn(e,t.u_is_size_feature_constant),u_size_t:new Xn(e,t.u_size_t),u_size:new Xn(e,t.u_size),u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_pitch:new Xn(e,t.u_pitch),u_rotate_symbol:new Wn(e,t.u_rotate_symbol),u_aspect_ratio:new Xn(e,t.u_aspect_ratio),u_fade_change:new Xn(e,t.u_fade_change),u_matrix:new ea(e,t.u_matrix),u_label_plane_matrix:new ea(e,t.u_label_plane_matrix),u_coord_matrix:new ea(e,t.u_coord_matrix),u_is_text:new Wn(e,t.u_is_text),u_pitch_with_map:new Wn(e,t.u_pitch_with_map),u_texsize:new Kn(e,t.u_texsize),u_texture:new Wn(e,t.u_texture)}),symbolSDF:(e,t)=>({u_is_size_zoom_constant:new Wn(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new Wn(e,t.u_is_size_feature_constant),u_size_t:new Xn(e,t.u_size_t),u_size:new Xn(e,t.u_size),u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_pitch:new Xn(e,t.u_pitch),u_rotate_symbol:new Wn(e,t.u_rotate_symbol),u_aspect_ratio:new Xn(e,t.u_aspect_ratio),u_fade_change:new Xn(e,t.u_fade_change),u_matrix:new ea(e,t.u_matrix),u_label_plane_matrix:new ea(e,t.u_label_plane_matrix),u_coord_matrix:new ea(e,t.u_coord_matrix),u_is_text:new Wn(e,t.u_is_text),u_pitch_with_map:new Wn(e,t.u_pitch_with_map),u_texsize:new Kn(e,t.u_texsize),u_texture:new Wn(e,t.u_texture),u_gamma_scale:new Xn(e,t.u_gamma_scale),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_is_halo:new Wn(e,t.u_is_halo)}),symbolTextAndIcon:(e,t)=>({u_is_size_zoom_constant:new Wn(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new Wn(e,t.u_is_size_feature_constant),u_size_t:new Xn(e,t.u_size_t),u_size:new Xn(e,t.u_size),u_camera_to_center_distance:new Xn(e,t.u_camera_to_center_distance),u_pitch:new Xn(e,t.u_pitch),u_rotate_symbol:new Wn(e,t.u_rotate_symbol),u_aspect_ratio:new Xn(e,t.u_aspect_ratio),u_fade_change:new Xn(e,t.u_fade_change),u_matrix:new ea(e,t.u_matrix),u_label_plane_matrix:new ea(e,t.u_label_plane_matrix),u_coord_matrix:new ea(e,t.u_coord_matrix),u_is_text:new Wn(e,t.u_is_text),u_pitch_with_map:new Wn(e,t.u_pitch_with_map),u_texsize:new Kn(e,t.u_texsize),u_texsize_icon:new Kn(e,t.u_texsize_icon),u_texture:new Wn(e,t.u_texture),u_texture_icon:new Wn(e,t.u_texture_icon),u_gamma_scale:new Xn(e,t.u_gamma_scale),u_device_pixel_ratio:new Xn(e,t.u_device_pixel_ratio),u_is_halo:new Wn(e,t.u_is_halo)}),background:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_opacity:new Xn(e,t.u_opacity),u_color:new Qn(e,t.u_color)}),backgroundPattern:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_opacity:new Xn(e,t.u_opacity),u_image:new Wn(e,t.u_image),u_pattern_tl_a:new Kn(e,t.u_pattern_tl_a),u_pattern_br_a:new Kn(e,t.u_pattern_br_a),u_pattern_tl_b:new Kn(e,t.u_pattern_tl_b),u_pattern_br_b:new Kn(e,t.u_pattern_br_b),u_texsize:new Kn(e,t.u_texsize),u_mix:new Xn(e,t.u_mix),u_pattern_size_a:new Kn(e,t.u_pattern_size_a),u_pattern_size_b:new Kn(e,t.u_pattern_size_b),u_scale_a:new Xn(e,t.u_scale_a),u_scale_b:new Xn(e,t.u_scale_b),u_pixel_coord_upper:new Kn(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new Kn(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new Xn(e,t.u_tile_units_to_pixels)}),terrain:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_texture:new Wn(e,t.u_texture),u_ele_delta:new Xn(e,t.u_ele_delta)}),terrainDepth:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_ele_delta:new Xn(e,t.u_ele_delta)}),terrainCoords:(e,t)=>({u_matrix:new ea(e,t.u_matrix),u_texture:new Wn(e,t.u_texture),u_terrain_coords_id:new Xn(e,t.u_terrain_coords_id),u_ele_delta:new Xn(e,t.u_ele_delta)})};class Gp{constructor(e,t,r){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Wp{constructor(e,t,r,i){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const n=e.gl;this.buffer=n.createBuffer(),e.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const i=t.attributes[this.attributes[r].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,r){for(let i=0;i<this.attributes.length;i++){const n=this.attributes[i],o=t.attributes[n.name];void 0!==o&&e.vertexAttribPointer(o,n.components,e[Xp[n.type]],!1,this.itemSize,n.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kp=new WeakMap;function Fd(e){if(Kp.has(e))return Kp.get(e);{const t=e.getParameter(e.VERSION).startsWith("WebGL 2.0");return Kp.set(e,t),t}}class Yp{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jp extends Yp{getDefault(){return oe.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Qp extends Yp{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class td extends Yp{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class ed extends Yp{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class id extends Yp{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class rd extends Yp{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class sd extends Yp{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class nd extends Yp{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class ad extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class od extends Yp{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ld extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class cd extends Yp{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class hd extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ud extends Yp{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class pd extends Yp{getDefault(){return oe.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class dd extends Yp{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class md extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class fd extends Yp{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class _d extends Yp{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class gd extends Yp{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class yd extends Yp{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class xd extends Yp{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class vd extends Yp{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class bd extends Yp{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class wd extends Yp{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Td extends Yp{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Sd extends Yp{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Id extends Yp{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const r=this.gl;Fd(r)?r.bindVertexArray(e):null===(t=r.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ad extends Yp{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Ed extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class zd extends Yp{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Cd extends Yp{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Md extends Cd{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class kd extends Cd{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Pd extends Cd{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dd{constructor(e,t,r,i,n){this.context=e,this.width=t,this.height=r;const o=e.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Md(e,a),i)this.depthAttachment=n?new Pd(e,a):new kd(e,a);else if(n)throw new Error("Stencil cannot be setted without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ld{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}Ld.Replace=[1,0],Ld.disabled=new Ld(Ld.Replace,oe.transparent,[!1,!1,!1,!1]),Ld.unblended=new Ld(Ld.Replace,oe.transparent,[!0,!0,!0,!0]),Ld.alphaBlended=new Ld([1,771],oe.transparent,[!0,!0,!0,!0]);class Bd{constructor(e){var t,r;if(this.gl=e,this.clearColor=new Jp(this),this.clearDepth=new Qp(this),this.clearStencil=new td(this),this.colorMask=new ed(this),this.depthMask=new id(this),this.stencilMask=new rd(this),this.stencilFunc=new sd(this),this.stencilOp=new nd(this),this.stencilTest=new ad(this),this.depthRange=new od(this),this.depthTest=new ld(this),this.depthFunc=new cd(this),this.blend=new hd(this),this.blendFunc=new ud(this),this.blendColor=new pd(this),this.blendEquation=new dd(this),this.cullFace=new md(this),this.cullFaceSide=new fd(this),this.frontFace=new _d(this),this.program=new gd(this),this.activeTexture=new yd(this),this.viewport=new xd(this),this.bindFramebuffer=new vd(this),this.bindRenderbuffer=new bd(this),this.bindTexture=new wd(this),this.bindVertexBuffer=new Td(this),this.bindElementBuffer=new Sd(this),this.bindVertexArray=new Id(this),this.pixelStoreUnpack=new Ad(this),this.pixelStoreUnpackPremultiplyAlpha=new Ed(this),this.pixelStoreUnpackFlipY=new zd(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Fd(e)){this.HALF_FLOAT=e.HALF_FLOAT;const i=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(r=e.RGB16F)&&void 0!==r?r:null==i?void 0:i.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Gp(this,e,t)}createVertexBuffer(e,t,r){return new Wp(this,e,t,r)}createRenderbuffer(e,t,r){const i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),n}createFramebuffer(e,t,r,i){return new Dd(this,e,t,r,i)}clear({color:e,depth:t,stencil:r}){const i=this.gl;let n=0;e&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(n|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(n)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){x(e.blendFunction,Ld.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Fd(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Fd(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Rd{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Rd.ReadOnly=!1,Rd.ReadWrite=!0,Rd.disabled=new Rd(519,Rd.ReadOnly,[0,1]);const jd=7680;class Od{constructor(e,t,r,i,n,o){this.test=e,this.ref=t,this.mask=r,this.fail=i,this.depthFail=n,this.pass=o}}Od.disabled=new Od({func:519,mask:0},0,0,jd,jd,jd);class Vd{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}let Nd;function Ud(e,t,r,i,n,o,a){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let p=0,d=0;for(let f=0;f<i.length;f++){const m=i[f],g=t.getTile(m),y=g.getBucket(r);if(!y)continue;let v=m.posMatrix;0===n[0]&&0===n[1]||(v=e.translatePosMatrix(m.posMatrix,g,n,o));const _=a?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){const t=Wo(),r=v;is(t,y.placementInvProjMatrix,e.transform.glCoordMatrix),is(t,t,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:d,transform:r,invTransform:t,coord:m}),p+=b.length/4,d=p}_&&u.draw(l,c.LINES,Rd.disabled,Od.disabled,e.colorModeForRenderPass(),Vd.disabled,Ap(v,e.transform,g),e.style.map.terrain&&e.style.map.terrain.getTerrainData(m),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}if(!a||!h.length)return;const f=e.useProgram("collisionCircle"),m=new In;m.resize(4*p),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,i=e.circleArray[r+0],n=e.circleArray[r+1],o=e.circleArray[r+2],a=e.circleArray[r+3];m.emplace(g++,i,n,o,a,0),m.emplace(g++,i,n,o,a,1),m.emplace(g++,i,n,o,a,2),m.emplace(g++,i,n,o,a,3)}(!Nd||Nd.length<2*p)&&(Nd=function(e){const t=2*e,r=new En;r.resize(t),r._trim();for(let e=0;e<t;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(p));const y=l.createIndexBuffer(Nd,!0),v=l.createVertexBuffer(m,Hl.members,!0);for(const t of h){const i={u_matrix:t.transform,u_inv_matrix:t.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};f.draw(l,c.TRIANGLES,Rd.disabled,Od.disabled,e.colorModeForRenderPass(),Vd.disabled,i,e.style.map.terrain&&e.style.map.terrain.getTerrainData(t.coord),r.id,v,y,Dn.simpleSegment(0,2*t.circleOffset,t.circleArray.length,t.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;v.destroy(),y.destroy()}Vd.disabled=new Vd(!1,1029,2305),Vd.backCCW=new Vd(!0,1029,2305);const Hd=Yo(new Float32Array(16));function Gd(e,t,r,i,o,a){const{horizontalAlign:l,verticalAlign:c}=wc(e),u=-(l-.5)*t,h=-(c-.5)*r,p=_h(e,i);return new n((u/o+p[0])*a,(h/o+p[1])*a)}function qd(e,t,r,i,o,a,l,c,u,h,p){const d=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let m=0;m<d.length;m++){const y=d.get(m),v=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:i[y.crossTileID];if(v){const i=new n(y.anchorX,y.anchorY),d=Gu(i,r?l:a,p),m=qu(o.cameraToCenterDistance,d.signedDistanceFromCamera);let _=Ec(e.textSizeData,u,y)*m/24;r&&(_*=e.tilePixelRatio/c);const{width:b,height:x,anchor:w,textOffset:S,textBoxScale:C}=v,M=Gd(w,b,x,S,C,_),E=r?Gu(i.add(M),a,p).point:d.point.add(t?M.rotate(-o.angle):M),T=e.allowVerticalPlacement&&y.placedOrientation===bc.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)kc(f,E,T);h&&y.associatedIconIndex>=0&&(g[y.associatedIconIndex]={shiftedAnchor:E,angle:T})}else dh(y.numGlyphs,f)}if(h){m.clear();const t=e.icon.placedSymbolArray;for(let e=0;e<t.length;e++){const r=t.get(e);if(r.hidden)dh(r.numGlyphs,m);else{const t=g[e];if(t)for(let e=0;e<r.numGlyphs;e++)kc(m,t.shiftedAnchor,t.angle);else dh(r.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Zd(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function $d(e,t,r,i,n,o,a,l,c,u,h,p){const d=e.context,f=d.gl,m=e.transform,g="map"===l,y="map"===c,v="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=!r.layout.get("symbol-sort-key").isConstant();let x=!1;const w=e.depthModeForSublayer(0,Rd.ReadOnly),S=r.layout.get("text-variable-anchor"),C=[];for(const l of i){const i=t.getTile(l),c=i.getBucket(r);if(!c)continue;const h=n?c.text:c.icon;if(!h||!h.segments.get().length||!h.hasVisibleVertices)continue;const p=h.programConfigurations.get(r.id),d=n||c.sdfIcons,w=n?c.textSizeData:c.iconSizeData,M=y||0!==m.pitch,E=e.useProgram(Zd(d,n,c),p),T=Tc(w,m.zoom),A=e.style.map.terrain&&e.style.map.terrain.getTerrainData(l);let P,O,I,k,F=[0,0],D=null;if(n)O=i.glyphAtlasTexture,I=f.LINEAR,P=i.glyphAtlasTexture.size,c.iconsInText&&(F=i.imageAtlasTexture.size,D=i.imageAtlasTexture,k=M||e.options.rotating||e.options.zooming||"composite"===w.kind||"camera"===w.kind?f.LINEAR:f.NEAREST);else{const t=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;O=i.imageAtlasTexture,I=d||e.options.rotating||e.options.zooming||t||M?f.LINEAR:f.NEAREST,P=i.imageAtlasTexture.size}const j=Sh(i,1,e.transform.zoom),z=Vu(l.posMatrix,y,g,e.transform,j),N=Uu(l.posMatrix,y,g,e.transform,j),B=S&&c.hasTextData(),V="none"!==r.layout.get("icon-text-fit")&&B&&c.hasIconData();if(v){const t=e.style.map.terrain?(t,r)=>e.style.map.terrain.getElevation(l,t,r):null,i="map"===r.layout.get("text-rotation-alignment");$u(c,l.posMatrix,e,n,z,N,y,u,i,t)}const U=e.translatePosMatrix(l.posMatrix,i,o,a),H=v||n&&S||V?Hd:z,G=e.translatePosMatrix(N,i,o,a,!0),q=d&&0!==r.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=d?c.iconsInText?Hp(w.kind,T,_,y,e,U,H,G,P,F):Up(w.kind,T,_,y,e,U,H,G,n,P,!0):Vp(w.kind,T,_,y,e,U,H,G,n,P);const $={program:E,buffers:h,uniformValues:Z,atlasTexture:O,atlasTextureIcon:D,atlasInterpolation:I,atlasInterpolationIcon:k,isSDF:d,hasHalo:q};if(b&&c.canOverlap){x=!0;const e=h.segments.get();for(const t of e)C.push({segments:new Dn([t]),sortKey:t.sortKey,state:$,terrainData:A})}else C.push({segments:h.segments,sortKey:0,state:$,terrainData:A})}x&&C.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of C){const i=t.state;if(d.activeTexture.set(f.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,f.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,Wd(i.buffers,t.segments,r,e,i.program,w,h,p,n,t.terrainData)),n.u_is_halo=0}Wd(i.buffers,t.segments,r,e,i.program,w,h,p,i.uniformValues,t.terrainData)}}function Wd(e,t,r,i,n,o,a,l,c,u){const h=i.context;n.draw(h,h.gl.TRIANGLES,o,a,l,Vd.disabled,c,u,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Xd(e,t,r,i,n){if(!r||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let a=o[r.to.toString()],l=o[r.from.toString()];if(!a||!l){const e=n.getPaintProperty(t);a=o[e],l=o[e]}a&&l&&e.setConstantPatternPositions(a,l)}function Yd(e,t,r,i,n,o,a){const l=e.context.gl,c="fill-pattern",u=r.paint.get(c),h=u&&u.constantOr(1),p=r.getCrossfadeParameters();let d,f,m,g,y;a?(f=h&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(f=h?"fillPattern":"fill",d=l.TRIANGLES);const v=u.constantOr(null);for(const u of i){const i=t.getTile(u);if(h&&!i.patternsLoaded())continue;const _=i.getBucket(r);if(!_)continue;const b=_.programConfigurations.get(r.id),x=e.useProgram(f,b),w=e.style.map.terrain&&e.style.map.terrain.getTerrainData(u);h&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(p)),Xd(b,c,v,i,r);const S=w?u:null,C=e.translatePosMatrix(S?S.posMatrix:u.posMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){g=_.indexBuffer2,y=_.segments2;const t=[l.drawingBufferWidth,l.drawingBufferHeight];m="fillOutlinePattern"===f&&h?Ep(C,e,p,i,t):Mp(C,t)}else g=_.indexBuffer,y=_.segments,m=h?Cp(C,e,p,i):Sp(C);x.draw(e.context,d,n,e.stencilModeForClipping(u),o,Vd.disabled,m,w,r.id,_.layoutVertexBuffer,g,y,r.paint,e.transform.zoom,b)}}function Kd(e,t,r,i,n,o,a){const l=e.context,c=l.gl,u="fill-extrusion-pattern",h=r.paint.get(u),p=h.constantOr(1),d=r.getCrossfadeParameters(),f=r.paint.get("fill-extrusion-opacity"),m=h.constantOr(null);for(const h of i){const i=t.getTile(h),g=i.getBucket(r);if(!g)continue;const y=e.style.map.terrain&&e.style.map.terrain.getTerrainData(h),v=g.programConfigurations.get(r.id),_=e.useProgram(p?"fillExtrusionPattern":"fillExtrusion",v);p&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),v.updatePaintBuffers(d)),Xd(v,u,m,i,r);const b=e.translatePosMatrix(h.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),x=r.paint.get("fill-extrusion-vertical-gradient"),w=p?wp(b,e,x,f,h,d,i):xp(b,e,x,f);_.draw(l,l.gl.TRIANGLES,n,o,a,Vd.backCCW,w,y,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,e.transform.zoom,v,e.style.map.terrain&&g.centroidVertexBuffer)}}function Jd(e,t,r,i,n,o,a){const l=e.context,c=l.gl,u=r.fbo;if(!u)return;const h=e.useProgram("hillshade"),p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get()),h.draw(l,c.TRIANGLES,n,o,a,Vd.disabled,((e,t,r,i)=>{const n=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color");let l=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(l-=e.transform.angle);const c=!e.options.moving;return{u_matrix:i?i.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),c),u_image:0,u_latrange:Lp(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),l],u_shadow:n,u_highlight:o,u_accent:a}})(e,r,i,p?t:null),p,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Qd(e,t,r,i,n,o){const a=e.context,l=a.gl,c=t.dem;if(c&&c.data){const u=c.dim,h=c.stride,p=c.getPixels();if(a.activeTexture.set(l.TEXTURE1),a.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(h),t.demTexture){const e=t.demTexture;e.update(p,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else t.demTexture=new Kc(a,p,l.RGBA,{premultiply:!1}),t.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);a.activeTexture.set(l.TEXTURE0);let d=t.fbo;if(!d){const e=new Kc(a,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=t.fbo=a.createFramebuffer(u,u,!0,!1),d.colorAttachment.set(e.texture)}a.bindFramebuffer.set(d.framebuffer),a.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(a,l.TRIANGLES,i,n,o,Vd.disabled,((e,t)=>{const r=t.stride,i=Wo();return rs(i,0,So,-So,0,0,1),Qo(i,i,[0,-So,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:t.getUnpackVector()}})(t.tileID,c),null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function ef(e,t,r,i,n,o){const a=i.paint.get("raster-fade-duration");if(!o&&a>0){const i=D.now(),o=(i-e.timeAdded)/a,l=t?(i-t.timeAdded)/a:-1,c=r.getSource(),u=n.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!t||Math.abs(t.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=p&&e.refreshedUponExpiration?1:h(p?o:1-l,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}const tf=new oe(1,0,0,1),hf=new oe(0,1,0,1),pf=new oe(0,0,1,1),mf=new oe(1,0,1,1),vf=new oe(0,1,1,1);function bf(e,t,r,i){wf(e,0,t+r/2,e.transform.width,r,i)}function xf(e,t,r,i){wf(e,t-r/2,0,r,e.transform.height,i)}function wf(e,t,r,i,n,o){const a=e.context,l=a.gl;l.enable(l.SCISSOR_TEST),l.scissor(t*e.pixelRatio,r*e.pixelRatio,i*e.pixelRatio,n*e.pixelRatio),a.clear({color:o}),l.disable(l.SCISSOR_TEST)}function Sf(e,t,r){const i=e.context,n=i.gl,o=r.posMatrix,a=e.useProgram("debug"),l=Rd.disabled,c=Od.disabled,u=e.colorModeForRenderPass(),h="$debug",p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(r);i.activeTexture.set(n.TEXTURE0);const d=t.getTileByID(r.key).latestRawTileData,f=Math.floor((d&&d.byteLength||0)/1024),m=t.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/e.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,i=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,r.width,r.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,`${y} ${f}kB`),a.draw(i,n.TRIANGLES,l,c,Ld.alphaBlended,Vd.disabled,Pp(o,oe.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),a.draw(i,n.LINE_STRIP,l,c,u,Vd.disabled,Pp(o,oe.red),p,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Ef(e,t,r){const i=e.context,n=i.gl,o=e.colorModeForRenderPass(),a=new Rd(n.LEQUAL,Rd.ReadWrite,e.depthRangeFor3D),l=e.useProgram("terrain"),c=t.getTerrainMesh();i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]);for(const u of r){const r=e.renderToTexture.getTexture(u),h=t.getTerrainData(u.tileID);i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.texture);const p={u_matrix:e.transform.calculatePosMatrix(u.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(e.transform.zoom)};l.draw(i,n.TRIANGLES,a,Od.disabled,o,Vd.backCCW,p,h,"terrain",c.vertexBuffer,c.indexBuffer,c.segments)}}const Tf={symbol:function(e,t,r,i,n){if("translucent"!==e.renderPass)return;const o=Od.disabled,a=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,t,r,i,n,o,a){const l=t.transform,c="map"===n,u="map"===o;for(const n of e){const e=i.getTile(n),o=e.getBucket(r);if(!o||!o.text||!o.text.segments.get().length)continue;const h=Tc(o.textSizeData,l.zoom),p=Sh(e,1,t.transform.zoom),d=Vu(n.posMatrix,u,c,t.transform,p),f="none"!==r.layout.get("icon-text-fit")&&o.hasIconData();if(h){const r=Math.pow(2,l.zoom-e.tileID.overscaledZ);qd(o,c,u,a,l,d,n.posMatrix,r,h,f,t.style.map.terrain?(e,r)=>t.style.map.terrain.getElevation(n,e,r):null)}}}(i,e,r,t,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),n),0!==r.paint.get("icon-opacity").constantOr(1)&&$d(e,t,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,a),0!==r.paint.get("text-opacity").constantOr(1)&&$d(e,t,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,a),t.map.showCollisionBoxes&&(Ud(e,t,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ud(e,t,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,t,r,i){if("translucent"!==e.renderPass)return;const n=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),a=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===n.constantOr(1)&&(0===o.constantOr(1)||0===a.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Rd.ReadOnly),p=Od.disabled,d=e.colorModeForRenderPass(),f=[];for(let n=0;n<i.length;n++){const o=i[n],a=t.getTile(o),c=a.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=e.useProgram("circle",u),p=c.layoutVertexBuffer,d=c.indexBuffer,m=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),g={programConfiguration:u,program:h,layoutVertexBuffer:p,indexBuffer:d,uniformValues:Tp(e,o,a,r),terrainData:m};if(l){const e=c.segments.get();for(const t of e)f.push({segments:new Dn([t]),sortKey:t.sortKey,state:g})}else f.push({segments:c.segments,sortKey:0,state:g})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of f){const{programConfiguration:i,program:n,layoutVertexBuffer:o,indexBuffer:a,uniformValues:l,terrainData:f}=t.state;n.draw(c,u.TRIANGLES,h,p,d,Vd.disabled,l,f,r.id,o,a,t.segments,r.paint,e.transform.zoom,i)}},heatmap:function(e,t,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const n=e.context,o=n.gl,a=Od.disabled,l=new Ld([o.ONE,o.ONE],oe.transparent,[!0,!0,!0,!0]);!function(e,t,r){const i=e.gl;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let n=r.heatmapFbo;if(n)i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),e.bindFramebuffer.set(n.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),n=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1,!1),function(e,t,r,i){var n,o;const a=e.gl,l=null!==(n=e.HALF_FLOAT)&&void 0!==n?n:a.UNSIGNED_BYTE,c=null!==(o=e.RGBA16F)&&void 0!==o?o:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,c,t.width/4,t.height/4,0,a.RGBA,l,null),i.colorAttachment.set(r)}(e,t,o,n)}}(n,e,r),n.clear({color:oe.transparent});for(let c=0;c<i.length;c++){const u=i[c];if(t.hasRenderableParent(u))continue;const h=t.getTile(u),p=h.getBucket(r);if(!p)continue;const d=p.programConfigurations.get(r.id),f=e.useProgram("heatmap",d),{zoom:m}=e.transform;f.draw(n,o.TRIANGLES,Rd.disabled,a,l,Vd.disabled,Ip(u.posMatrix,h,m,r.paint.get("heatmap-intensity")),null,r.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,r.paint,e.transform.zoom,d)}n.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,t){const r=e.context,i=r.gl,n=t.heatmapFbo;if(!n)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let o=t.colorRampTexture;o||(o=t.colorRampTexture=new Kc(r,t.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Rd.disabled,Od.disabled,e.colorModeForRenderPass(),Vd.disabled,((e,t,r,i)=>{const n=Wo();rs(n,0,e.width,e.height,0,0,1);const o=e.context.gl;return{u_matrix:n,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}})(e,t),null,t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}(e,r))},line:function(e,t,r,i){if("translucent"!==e.renderPass)return;const n=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0===n.constantOr(1)||0===o.constantOr(1))return;const a=e.depthModeForSublayer(0,Rd.ReadOnly),l=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=r.paint.get("line-pattern"),p=u.constantOr(1),d=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),m=p?"linePattern":c?"lineSDF":d?"lineGradient":"line",g=e.context,y=g.gl;let v=!0;for(const n of i){const i=t.getTile(n);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;const b=o.programConfigurations.get(r.id),x=e.context.program.get(),w=e.useProgram(m,b),S=v||w.program!==x,C=e.style.map.terrain&&e.style.map.terrain.getTerrainData(n),M=u.constantOr(null);if(M&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[M.to.toString()],r=e.patternPositions[M.from.toString()];t&&r&&b.setConstantPatternPositions(t,r)}const E=C?n:null,T=p?Dp(e,i,r,f,E):c?jp(e,i,r,c,f,E):d?Fp(e,i,r,o.lineClipsArray.length,E):kp(e,i,r,E);if(p)g.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),b.updatePaintBuffers(f);else if(c&&(S||e.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g);else if(d){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let l=256;if(r.stepInterpolant){const r=t.getSource().maxzoom,i=n.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-n.canonical.z):1;l=h((_=o.maxLineLength/So*1024*i)<=1?1:Math.pow(2,Math.ceil(Math.log(_)/Math.LN2)),256,g.maxTextureSize)}i.gradient=ta({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new Kc(g,i.gradient,y.RGBA),i.version=r.gradientVersion,a=i.texture}g.activeTexture.set(y.TEXTURE0),a.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}w.draw(g,y.TRIANGLES,a,e.stencilModeForClipping(n),l,Vd.disabled,T,C,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,e.transform.zoom,b,o.layoutVertexBuffer2),v=!1}var _},fill:function(e,t,r,i){const n=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0===o.constantOr(1))return;const a=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===n.constantOr(oe.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const n=e.depthModeForSublayer(1,"opaque"===e.renderPass?Rd.ReadWrite:Rd.ReadOnly);Yd(e,t,r,i,n,a,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const n=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Rd.ReadOnly);Yd(e,t,r,i,n,a,!0)}},"fill-extrusion":function(e,t,r,i){const n=r.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===e.renderPass){const o=new Rd(e.context.gl.LEQUAL,Rd.ReadWrite,e.depthRangeFor3D);if(1!==n||r.paint.get("fill-extrusion-pattern").constantOr(1))Kd(e,t,r,i,o,Od.disabled,Ld.disabled),Kd(e,t,r,i,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const n=e.colorModeForRenderPass();Kd(e,t,r,i,o,Od.disabled,n)}}},hillshade:function(e,t,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const n=e.context,o=e.depthModeForSublayer(0,Rd.ReadOnly),a=e.colorModeForRenderPass(),[l,c]="translucent"===e.renderPass?e.stencilConfigForOverlap(i):[{},i];for(const i of c){const n=t.getTile(i);void 0!==n.needsHillshadePrepare&&n.needsHillshadePrepare&&"offscreen"===e.renderPass?Qd(e,n,r,o,Od.disabled,a):"translucent"===e.renderPass&&Jd(e,i,n,r,o,l[i.overscaledZ],a)}n.viewport.set([0,0,e.width,e.height])},raster:function(e,t,r,i){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const n=e.context,o=n.gl,a=t.getSource(),l=e.useProgram("raster"),c=e.colorModeForRenderPass(),[u,h]=a instanceof Ph?[{},i]:e.stencilConfigForOverlap(i),p=h[h.length-1].overscaledZ,d=!e.options.moving;for(const i of h){const h=e.depthModeForSublayer(i.overscaledZ-p,1===r.paint.get("raster-opacity")?Rd.ReadWrite:Rd.ReadOnly,o.LESS),f=t.getTile(i);f.registerFadeDuration(r.paint.get("raster-fade-duration"));const m=t.findLoadedParent(i,0),g=ef(f,m,t,r,e.transform,e.style.map.terrain);let y,v;const _="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),f.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),m?(m.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,m.tileID.overscaledZ-f.tileID.overscaledZ),v=[f.tileID.canonical.x*y%1,f.tileID.canonical.y*y%1]):f.texture.bind(_,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i),x=b?i:null,w=x?x.posMatrix:e.transform.calculatePosMatrix(i.toUnwrapped(),d),S=Np(w,v||[0,0],y||1,g,r);a instanceof Ph?l.draw(n,o.TRIANGLES,h,Od.disabled,c,Vd.disabled,S,b,r.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):l.draw(n,o.TRIANGLES,h,u[i.overscaledZ],c,Vd.disabled,S,b,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,r,i){const n=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0===o)return;const a=e.context,l=a.gl,c=e.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(e.isPatternMissing(h))return;const p=!h&&1===n.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const d=Od.disabled,f=e.depthModeForSublayer(0,"opaque"===p?Rd.ReadWrite:Rd.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background"),y=i||c.coveringTiles({tileSize:u,terrain:e.style.map.terrain});h&&(a.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const v=r.getCrossfadeParameters();for(const t of y){const c=i?t.posMatrix:e.transform.calculatePosMatrix(t.toUnwrapped()),p=h?Zp(c,o,e,h,{tileID:t,tileSize:u},v):qp(c,o,n),y=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);g.draw(a,l.TRIANGLES,f,d,m,Vd.disabled,p,y,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},debug:function(e,t,r){for(let i=0;i<r.length;i++)Sf(e,t,r[i])},custom:function(e,t,r){const i=e.context,n=r.implementation;if("offscreen"===e.renderPass){const t=n.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(n,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(Od.disabled);const t="3d"===n.renderingMode?new Rd(e.context.gl.LEQUAL,Rd.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Rd.ReadOnly);i.setDepthMode(t),n.render(i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}};class um{constructor(e,t){this.context=new Bd(e),this.transform=t,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:Wo(),renderTime:0},this.setup(),this.numSublayers=Hh.maxUnderzooming+Hh.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ap}resize(e,t,r){if(this.width=e*r,this.height=t*r,this.pixelRatio=r,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const e=this.context,t=new pn;t.emplaceBack(0,0),t.emplaceBack(So,0),t.emplaceBack(0,So),t.emplaceBack(So,So),this.tileExtentBuffer=e.createVertexBuffer(t,dp.members),this.tileExtentSegments=Dn.simpleSegment(0,0,4,2);const r=new pn;r.emplaceBack(0,0),r.emplaceBack(So,0),r.emplaceBack(0,So),r.emplaceBack(So,So),this.debugBuffer=e.createVertexBuffer(r,dp.members),this.debugSegments=Dn.simpleSegment(0,0,4,5);const i=new mn;i.emplaceBack(0,0,0,0),i.emplaceBack(So,0,So,0),i.emplaceBack(0,So,0,So),i.emplaceBack(So,So,So,So),this.rasterBoundsBuffer=e.createVertexBuffer(i,yu.members),this.rasterBoundsSegments=Dn.simpleSegment(0,0,4,2);const n=new pn;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(n,dp.members),this.viewportSegments=Dn.simpleSegment(0,0,4,2);const o=new Mn;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);const a=new zn;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);const l=this.context.gl;this.stencilClearMode=new Od({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,t=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=Wo();rs(r,0,this.width,this.height,0,0,1),es(r,r,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,Rd.disabled,this.stencilClearMode,Ld.disabled,Vd.disabled,Op(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const r=this.context,i=r.gl;this.nextStencilID+t.length>256&&this.clearStencil(),r.setColorMode(Ld.disabled),r.setDepthMode(Rd.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of t){const t=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(e);n.draw(r,i.TRIANGLES,Rd.disabled,new Od({func:i.ALWAYS,mask:0},t,255,i.KEEP,i.KEEP,i.REPLACE),Ld.disabled,Vd.disabled,Op(e.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Od({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Od({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,r=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,n=r[0].overscaledZ-i+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const e={};for(let r=0;r<n;r++)e[r+i]=new Od({func:t.GEQUAL,mask:255},r+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=n,[e,r]}return[{[i]:Od.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const t=1/8;return new Ld([e.CONSTANT_COLOR,e.ONE],new oe(t,t,t,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Ld.unblended:Ld.alphaBlended}depthModeForSublayer(e,t,r){if(!this.opaquePassEnabledForLayer())return Rd.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Rd(r||this.context.gl.LEQUAL,t,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,t){this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches,n={},o={},a={};for(const e in i){const t=i[e];t.used&&t.prepare(this.context),n[e]=t.getVisibleCoordinates(),o[e]=n[e].slice().reverse(),a[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const e=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);!this.terrainFacilitator.dirty&&(u=(l=this.terrainFacilitator.matrix)[0],h=l[1],p=l[2],d=l[3],f=l[4],m=l[5],g=l[6],y=l[7],v=l[8],_=l[9],b=l[10],x=l[11],w=l[12],S=l[13],C=l[14],M=l[15],E=(c=this.transform.projMatrix)[0],T=c[1],A=c[2],P=c[3],O=c[4],I=c[5],k=c[6],F=c[7],j=c[8],z=c[9],N=c[10],B=c[11],V=c[12],U=c[13],H=c[14],G=c[15],Math.abs(u-E)<=Zo*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-T)<=Zo*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-A)<=Zo*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-P)<=Zo*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(f-O)<=Zo*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-I)<=Zo*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-k)<=Zo*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(y-F)<=Zo*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(v-j)<=Zo*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(_-z)<=Zo*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(b-N)<=Zo*Math.max(1,Math.abs(b),Math.abs(N))&&Math.abs(x-B)<=Zo*Math.max(1,Math.abs(x),Math.abs(B))&&Math.abs(w-V)<=Zo*Math.max(1,Math.abs(w),Math.abs(V))&&Math.abs(S-U)<=Zo*Math.max(1,Math.abs(S),Math.abs(U))&&Math.abs(C-H)<=Zo*Math.max(1,Math.abs(C),Math.abs(H))&&Math.abs(M-G)<=Zo*Math.max(1,Math.abs(M),Math.abs(G)))&&!e.length||(function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]}(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,t){const r=e.context,i=r.gl,n=Ld.unblended,o=new Rd(i.LEQUAL,Rd.ReadWrite,[0,1]),a=t.getTerrainMesh(),l=t.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");r.bindFramebuffer.set(t.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:oe.transparent,depth:1});for(const u of l){const l=t.getTerrainData(u.tileID),h={u_matrix:e.transform.calculatePosMatrix(u.tileID.toUnwrapped()),u_ele_delta:t.getMeshFrameDelta(e.transform.zoom)};c.draw(r,i.TRIANGLES,o,Od.disabled,n,Vd.backCCW,h,l,"terrain",a.vertexBuffer,a.indexBuffer,a.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,t){const r=e.context,i=r.gl,n=Ld.unblended,o=new Rd(i.LEQUAL,Rd.ReadWrite,[0,1]),a=t.getTerrainMesh(),l=t.getCoordsTexture(),c=t.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");r.bindFramebuffer.set(t.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:oe.transparent,depth:1}),t.coordsIndex=[];for(const h of c){const c=t.getTerrainData(h.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const p={u_matrix:e.transform.calculatePosMatrix(h.tileID.toUnwrapped()),u_terrain_coords_id:(255-t.coordsIndex.length)/255,u_texture:0,u_ele_delta:t.getMeshFrameDelta(e.transform.zoom)};u.draw(r,i.TRIANGLES,o,Od.disabled,n,Vd.backCCW,p,c,"terrain",a.vertexBuffer,a.indexBuffer,a.segments),t.coordsIndex.push(h.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}var l,c,u,h,p,d,f,m,g,y,v,_,b,x,w,S,C,M,E,T,A,P,O,I,k,F,j,z,N,B,V,U,H,G;this.renderPass="offscreen";for(const e of r){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const r=o[t.source];("custom"===t.type||r.length)&&this.renderLayer(this,i[t.source],t,r)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?oe.black:oe.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],t=i[e.source],o=n[e.source];this._renderTileClippingMasks(e,o),this.renderLayer(this,t,e,o)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],t=i[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const l=("symbol"===e.type?a:o)[e.source];this._renderTileClippingMasks(e,n[e.source]),this.renderLayer(this,t,e,l)}if(this.options.showTileBoundaries){const e=function(e,t){let r=null;const i=Object.values(e._layers).flatMap((r=>r.source&&!r.isHidden(t)?[e.sourceCaches[r.source]]:[])),n=i.filter((e=>"vector"===e.getSource().type)),o=i.filter((e=>"vector"!==e.getSource().type)),a=e=>{(!r||r.getSource().maxzoom<e.getSource().maxzoom)&&(r=e)};return n.forEach((e=>a(e))),r||o.forEach((e=>a(e))),r}(this.style,this.transform.zoom);e&&Tf.debug(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;bf(e,e.transform.height-(t.top||0),3,tf),bf(e,t.bottom||0,3,hf),xf(e,t.left||0,3,pf),xf(e,e.transform.width-(t.right||0),3,mf);const r=e.transform.centerPoint;!function(e,t,r,i){wf(e,t-1,r-10,2,20,i),wf(e,t-10,r-1,20,2,i)}(e,r.x,e.transform.height-r.y,vf)}(this),this.context.setDefault()}renderLayer(e,t,r,i){r.isHidden(this.transform.zoom)||("background"===r.type||"custom"===r.type||(i||[]).length)&&(this.id=r.id,Tf[r.type](e,t,r,i,this.style.placement.variableOffsets))}translatePosMatrix(e,t,r,i,n){if(!r[0]&&!r[1])return e;const o=n?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const a=[n?r[0]:Sh(t,r[0],this.transform.zoom),n?r[1]:Sh(t,r[1],this.transform.zoom),0],l=new Float32Array(16);return Qo(l,e,a),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}useProgram(e,t){this.cache=this.cache||{};const r=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[r]||(this.cache[r]=new yp(this.context,e,mp[e],t,$p[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[r]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Kc(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class pm{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,r){const i=Math.pow(2,r),n=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const n=1/(r=as([],r,e))[3]/t*i;return function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}(r,r,[n,n,1/r[3],n])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=function(e,t){var r=t[0],i=t[1],n=t[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}([],function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],l=r[1],c=r[2];return e[0]=n*c-o*l,e[1]=o*a-i*c,e[2]=i*l-n*a,e}([],ss([],n[e[0]],n[e[1]]),ss([],n[e[2]],n[e[1]]))),r=-((i=t)[0]*(o=n[e[1]])[0]+i[1]*o[1]+i[2]*o[2]);var i,o;return t.concat(r)}));return new pm(n,o)}}class dm{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t,r){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],r=ns(this.min),i=ns(this.max);for(let e=0;e<t.length;e++)r[e]=t[e]?this.min[e]:this.center[e],i[e]=t[e]?this.center[e]:this.max[e];return i[2]=this.max[2],new dm(r,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const t=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let o=0;o<e.planes.length;o++){const a=e.planes[o];let l=0;for(let e=0;e<t.length;e++)(i=a)[0]*(n=t[e])[0]+i[1]*n[1]+i[2]*n[2]+i[3]*n[3]>=0&&l++;if(0===l)return 0;l!==t.length&&(r=!1)}var i,n;if(r)return 2;for(let t=0;t<3;t++){let r=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let n=0;n<e.points.length;n++){const o=e.points[n][t]-this.min[t];r=Math.min(r,o),i=Math.max(i,o)}if(i<0||r>this.max[t]-this.min[t])return 0}return 1}}class mm{constructor(e=0,t=0,r=0,i=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=i}interpolate(e,t,r){return null!=t.top&&null!=e.top&&(this.top=tr.number(e.top,t.top,r)),null!=t.bottom&&null!=e.bottom&&(this.bottom=tr.number(e.bottom,t.bottom,r)),null!=t.left&&null!=e.left&&(this.left=tr.number(e.left,t.left,r)),null!=t.right&&null!=e.right&&(this.right=tr.number(e.right,t.right,r)),this}getCenter(e,t){const r=h((this.left+e-this.right)/2,0,e),i=h((this.top+t-this.bottom)/2,0,t);return new n(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new mm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class fm{constructor(e,t,r,i,n){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===n||!!n,this._minZoom=e||0,this._maxZoom=t||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new uh(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mm,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const e=new fm(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const t=-p(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=function(){var e=new $o(4);return $o!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],l=Math.sin(r),c=Math.cos(r);e[0]=i*c+o*l,e[1]=n*c+a*l,e[2]=i*-l+o*c,e[3]=n*-l+a*c}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const t=h(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const t=[new Ah(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new n(0,0)),i=this.pointCoordinate(new n(this.width,0)),o=this.pointCoordinate(new n(this.width,this.height)),a=this.pointCoordinate(new n(0,this.height)),l=Math.floor(Math.min(r.x,i.x,o.x,a.x)),c=Math.floor(Math.max(r.x,i.x,o.x,a.x)),u=1;for(let r=l-u;r<=c+u;r++)0!==r&&t.push(new Ah(r,e))}return t}coveringTiles(e){var t,r;let i=this.coveringZoomLevel(e);const n=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const o=this.pointCoordinate(this.getCameraPoint()),a=xh.fromLngLat(this.center),l=Math.pow(2,i),c=[l*o.x,l*o.y,0],u=[l*a.x,l*a.y,0],h=pm.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let p=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(p=i);const d=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=e=>({aabb:new dm([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=i,v=e.reparseOverscaled?n:i;if(this._renderWorldCopies)for(let e=1;e<=3;e++)m.push(f(-e)),m.push(f(e));for(m.push(f(0));m.length>0;){const i=m.pop(),n=i.x,o=i.y;let a=i.fullyVisible;if(!a){const e=i.aabb.intersects(h);if(0===e)continue;a=2===e}const l=e.terrain?c:u,f=i.aabb.distanceX(l),_=i.aabb.distanceY(l),b=Math.max(Math.abs(f),Math.abs(_));if(i.zoom===y||b>d+(1<<y-i.zoom)-2&&i.zoom>=p){const e=y-i.zoom,t=c[0]-.5-(n<<e),r=c[1]-.5-(o<<e);g.push({tileID:new Eh(i.zoom===y?v:i.zoom,i.wrap,i.zoom,n,o),distanceSq:ls([u[0]-.5-n,u[1]-.5-o]),tileDistanceToCamera:Math.sqrt(t*t+r*r)})}else for(let l=0;l<4;l++){const c=(n<<1)+l%2,u=(o<<1)+(l>>1),h=i.zoom+1;let p=i.aabb.quadrant(l);if(e.terrain){const n=new Eh(h,i.wrap,h,c,u),o=e.terrain.getMinMaxElevation(n),a=null!==(t=o.minElevation)&&void 0!==t?t:this.elevation,l=null!==(r=o.maxElevation)&&void 0!==r?r:this.elevation;p=new dm([p.min[0],p.min[1],a],[p.max[0],p.max[1],l])}m.push({aabb:p,zoom:h,x:c,y:u,wrap:i.wrap,fullyVisible:a})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const t=h(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n(uu(e.lng)*this.worldSize,hu(t)*this.worldSize)}unproject(e){return new xh(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(e){this.freezeElevation||(this.elevation=e?this.getElevation(this._center,e):0)}getElevation(e,t){const r=xh.fromLngLat(e.wrap()),i=(1<<this.tileZoom)*So,n=r.x*i,o=r.y*i,a=Math.floor(n/So),l=Math.floor(o/So),c=new Eh(this.tileZoom,0,this.tileZoom,a,l);return t.getElevation(c,n%So,o%So,So)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const t=this.pointLocation(this.centerPoint,e),r=this.getElevation(t,e);if(!(this.elevation-r))return;const i=this.getCameraPosition(),n=xh.fromLngLat(i.lngLat,i.altitude),o=xh.fromLngLat(t,r),a=n.x-o.x,l=n.y-o.y,c=n.z-o.z,u=Math.sqrt(a*a+l*l+c*c),h=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=r,this._center=t,this.zoom=h}setLocationAtPoint(e,t){const r=this.pointCoordinate(t),i=this.pointCoordinate(this.centerPoint),n=this.locationCoordinate(e),o=new xh(n.x-(r.x-i.x),n.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),this.getElevation(e,t),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return xh.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,t){if(t){const r=t.pointCoordinate(e);if(null!=r)return r}const r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];as(r,r,this.pixelMatrixInverse),as(i,i,this.pixelMatrixInverse);const n=r[3],o=i[3],a=r[1]/n,l=i[1]/o,c=r[2]/n,u=i[2]/o,h=c===u?0:(0-c)/(u-c);return new xh(tr.number(r[0]/n,i[0]/o,h)/this.worldSize,tr.number(a,l,h)/this.worldSize)}coordinatePoint(e,t=0,r=this.pixelMatrix){const i=[e.x*this.worldSize,e.y*this.worldSize,t,1];return as(i,i,r),new n(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new ph).extend(this.pointLocation(new n(0,e))).extend(this.pointLocation(new n(this.width,e))).extend(this.pointLocation(new n(this.width,this.height))).extend(this.pointLocation(new n(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new ph([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,t=!1){const r=e.key,i=t?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const n=e.canonical,o=this.worldSize/this.zoomScale(n.z),a=n.x+Math.pow(2,n.z)*e.wrap,l=Yo(new Float64Array(16));return Qo(l,l,[a*o,n.y*o,0]),es(l,l,[o/So,o/So,1]),Jo(l,t?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,t,r,i,o=-90,a=90,l=-180,c=180;const u=this.size,h=this._unmodified;if(this.latRange){const t=this.latRange;o=hu(t[1])*this.worldSize,a=hu(t[0])*this.worldSize,e=a-o<u.y?u.y/(a-o):0}if(this.lngRange){const e=this.lngRange;l=p(uu(e[0])*this.worldSize,0,this.worldSize),c=p(uu(e[1])*this.worldSize,0,this.worldSize),c<l&&(c+=this.worldSize),t=c-l<u.x?u.x/(c-l):0}const d=this.point,f=Math.max(t||0,e||0);if(f)return this.center=this.unproject(new n(t?(c+l)/2:d.x,e?(a+o)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=h,void(this._constraining=!1);if(this.latRange){const e=d.y,t=u.y/2;e-t<o&&(i=o+t),e+t>a&&(i=a-t)}if(this.lngRange){const e=(l+c)/2,t=p(d.x,e-this.worldSize/2,e+this.worldSize/2),i=u.x/2;t-i<l&&(r=l+i),t+i>c&&(r=c-i)}void 0===r&&void 0===i||(this.center=this.unproject(new n(void 0!==r?r:d.x,void 0!==i?i:d.y)).wrap()),this._unmodified=h,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,t=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=pu(1,this.center.lat)*this.worldSize;let i=Yo(new Float64Array(16));es(i,i,[this.width/2,-this.height/2,1]),Qo(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=Yo(new Float64Array(16)),es(i,i,[1,-1,1]),Qo(i,i,[-1,-1,0]),es(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const n=this._elevation<0?this.cameraToCenterDistance:this.cameraToSeaLevelDistance,o=Math.PI/2+this._pitch,a=this._fov*(.5+e.y/this.height),l=Math.sin(a)*n/Math.sin(h(Math.PI-o-a,.01,Math.PI-.01)),c=this.getHorizon(),u=2*Math.atan(c/this.cameraToCenterDistance)*(.5+e.y/(2*c)),p=Math.sin(u)*n/Math.sin(h(Math.PI-o-u,.01,Math.PI-.01)),d=Math.min(l,p),f=1.01*(Math.cos(Math.PI/2-this._pitch)*d+n),m=this.height/50;i=new Float64Array(16),function(e,t,r,i,n){var o,a=1/Math.tan(t/2);e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+i)*(o=1/(i-n)),e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i)}(i,this._fov,this.width/this.height,m,f),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,es(i,i,[1,-1,1]),Qo(i,i,[0,0,-this.cameraToCenterDistance]),function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],p=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*i,e[5]=a*n+h*i,e[6]=l*n+p*i,e[7]=c*n+d*i,e[8]=u*n-o*i,e[9]=h*n-a*i,e[10]=p*n-l*i,e[11]=d*n-c*i}(i,i,this._pitch),ts(i,i,this.angle),Qo(i,i,[-t,-r,0]),this.mercatorMatrix=es([],i,[this.worldSize,this.worldSize,this.worldSize]),es(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=Jo(new Float64Array(16),this.labelPlaneMatrix,i),Qo(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=Ko([],i),this.pixelMatrix3D=Jo(new Float64Array(16),this.labelPlaneMatrix,i);const g=this.width%2/2,y=this.height%2/2,v=Math.cos(this.angle),_=Math.sin(this.angle),b=t-Math.round(t)+v*g+_*y,x=r-Math.round(r)+v*y+_*g,w=new Float64Array(i);if(Qo(w,w,[b>.5?b-1:b,x>.5?x-1:x,0]),this.alignedProjMatrix=w,i=Ko(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new n(0,0)),t=[e.x*this.worldSize,e.y*this.worldSize,0,1];return as(t,t,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n(0,e))}getCameraQueryGeometry(e){const t=this.getCameraPoint();if(1===e.length)return[e[0],t];{let r=t.x,i=t.y,o=t.x,a=t.y;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new n(r,i),new n(o,i),new n(o,a),new n(r,a),new n(r,i)]}}}class _m{constructor(e){this._hashName=e&&encodeURIComponent(e),v(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let r=!1,i=null;const n=()=>{i=null,r&&(e(),i=setTimeout(n,300),r=!1)};return()=>(r=!0,i||n(),i)}(this._updateHashUnthrottled.bind(this))}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,i),o=Math.round(t.lng*n)/n,a=Math.round(t.lat*n)/n,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=e?`/${o}/${a}/${r}`:`${r}/${a}/${o}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const e=this._hashName;let t=!1;const r=window.location.hash.slice(1).split("&").map((r=>{const i=r.split("=")[0];return i===e?(t=!0,`${i}=${u}`):r})).filter((e=>e));return t||r.push(`${e}=${u}`),`#${r.join("&")}`}return`#${u}`}_getCurrentHash(){const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}}}const Af={linearity:.3,easing:c(0,0,.3,1)},Of=f({deceleration:2500,maxSpeed:1400},Af),If=f({deceleration:20,maxSpeed:1400},Af),Lf=f({deceleration:1e3,maxSpeed:360},Af),kf=f({deceleration:1e3,maxSpeed:90},Af);class wm{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=D.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const t={zoom:0,bearing:0,pitch:0,pan:new n(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)t.zoom+=e.zoomDelta||0,t.bearing+=e.bearingDelta||0,t.pitch+=e.pitchDelta||0,e.panDelta&&t.pan._add(e.panDelta),e.around&&(t.around=e.around),e.pinchAround&&(t.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(t.pan.mag()){const n=jf(t.pan.mag(),r,f({},Of,e||{}));i.offset=t.pan.mult(n.amount/t.pan.mag()),i.center=this._map.transform.center,Df(i,n)}if(t.zoom){const e=jf(t.zoom,r,If);i.zoom=this._map.transform.zoom+e.amount,Df(i,e)}if(t.bearing){const e=jf(t.bearing,r,Lf);i.bearing=this._map.transform.bearing+h(e.amount,-179,179),Df(i,e)}if(t.pitch){const e=jf(t.pitch,r,kf);i.pitch=this._map.transform.pitch+e.amount,Df(i,e)}if(i.zoom||i.bearing){const e=void 0===t.pinchAround?t.around:t.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),f(i,{noMoveStart:!0})}}function Df(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function jf(e,t,r){const{maxSpeed:i,linearity:n,deceleration:o}=r,a=h(e*n/(t/1e3),-i,i),l=Math.abs(a)/(o*n);return{easing:r.easing,duration:1e3*l,amount:a*(l/2)}}class Im extends rt{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r,i={}){const n=L.mousePos(t.getCanvasContainer(),r);super(e,f({point:n,lngLat:t.unproject(n),originalEvent:r},i)),this._defaultPrevented=!1,this.target=t}}class Am extends rt{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){const i="touchend"===e?r.changedTouches:r.touches,o=L.touchPos(t.getCanvasContainer(),i),a=o.map((e=>t.unproject(e))),l=o.reduce(((e,t,r,i)=>e.add(t.div(i.length))),new n(0,0));super(e,{points:o,point:l,lngLats:a,lngLat:t.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Em extends rt{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class zm{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Em(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Im(e.type,this._map,e))}mouseup(e){this._map.fire(new Im(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Im(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Im(e.type,this._map,e))}mouseover(e){this._map.fire(new Im(e.type,this._map,e))}mouseout(e){this._map.fire(new Im(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Am(e.type,this._map,e))}touchmove(e){this._map.fire(new Am(e.type,this._map,e))}touchend(e){this._map.fire(new Am(e.type,this._map,e))}touchcancel(e){this._map.fire(new Am(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cm{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Im(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Im("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Im(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mm{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(n.convert(e),this._map.terrain)}}class km{constructor(e,t){this._map=e,this._tr=new Mm(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(L.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=r,this._box||(this._box=L.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const n=Math.min(i.x,r.x),o=Math.max(i.x,r.x),a=Math.min(i.y,r.y),l=Math.max(i.y,r.y);L.setTransform(this._box,`translate(${n}px,${a}px)`),this._box.style.width=o-n+"px",this._box.style.height=l-a+"px"}mouseupWindow(e,t){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=t;if(this.reset(),L.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new rt("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,t){return this._map.fire(new rt(e,{originalEvent:t}))}}function Rf(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const r={};for(let i=0;i<e.length;i++)r[e[i].identifier]=t[i];return r}class Dm{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,t,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const t=new n(0,0);for(const r of e)t._add(r);return t.div(e.length)}(t),this.touches=Rf(r,t)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const i=Rf(r,t);for(const e in this.touches){const t=i[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Lm{constructor(e){this.singleTap=new Dm(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const i=this.singleTap.touchend(e,t,r);if(i){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(i)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Bm{constructor(e){this._tr=new Mm(e),this._zoomIn=new Lm({numTouches:1,numTaps:2}),this._zoomOut=new Lm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const i=this._zoomIn.touchend(e,t,r),n=this._zoomOut.touchend(e,t,r),o=this._tr;return i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:e})}):n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(n)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rm{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const t=this._moveFunction(...e);if(t.bearingDelta||t.pitchDelta||t.around||t.panDelta)return this._active=!0,t}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const r=this._lastPoint;if(!r)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const i=t.length?t[0]:t;return!this._moved&&i.dist(r)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(r,i))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&L.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Nf={0:1,2:2};class Om{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=L.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const r=Nf[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton)}isValidEndEvent(e){return L.mouseButton(e)===this._eventButton}}class Vm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Bf=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=function(e){e.preventDefault()}},Vf=({enable:e,clickTolerance:t,bearingDegreesPerPixelMoved:r=.8})=>{const i=new Om({checkCorrectEvent:e=>0===L.mouseButton(e)&&e.ctrlKey||2===L.mouseButton(e)});return new Rm({clickTolerance:t,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:i,enable:e,assignEvents:Bf})},Uf=({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:r=-.5})=>{const i=new Om({checkCorrectEvent:e=>0===L.mouseButton(e)&&e.ctrlKey||2===L.mouseButton(e)});return new Rm({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:i,enable:e,assignEvents:Bf})};class qm{constructor(e,t){this._minTouches=e.cooperativeGestures?2:1,this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new n(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(e,t,r){if(this._map._cooperativeGestures&&(2===this._minTouches&&r.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(e,!1,r.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(r.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,r)}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,t,r){r.length>0&&(this._active=!0);const i=Rf(r,t),o=new n(0,0),a=new n(0,0);let l=0;for(const e in i){const t=i[e],r=this._touches[e];r&&(o._add(t),a._add(t.sub(r)),l++,i[e]=t)}if(this._touches=i,l<this._minTouches||!a.mag())return;const c=a.div(l);return this._sum._add(c),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(l),panDelta:c}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jm{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,r){return{}}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){if(!this._firstTwoTouches)return;e.preventDefault();const[i,n]=this._firstTwoTouches,o=Hf(r,t,i),a=Hf(r,t,n);if(!o||!a)return;const l=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],l,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[i,n]=this._firstTwoTouches,o=Hf(r,t,i),a=Hf(r,t,n);o&&a||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Hf(e,t,r){for(let i=0;i<e.length;i++)if(e[i].identifier===r)return t[i]}function Gf(e,t){return Math.log(e/t)/Math.LN2}class Hm extends jm{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Gf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Gf(this._distance,r),pinchAround:t}}}function qf(e,t){return 180*e.angleWith(t)/Math.PI}class Xm extends jm{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const r=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:qf(this._vector,r),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=qf(e,this._startVector);return Math.abs(r)<t}}function Zf(e){return Math.abs(e.y)>Math.abs(e.x)}class Ym extends jm{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,r){super.touchstart(e,t,r),this._currentTouchCount=r.length}_start(e){this._lastPoints=e,Zf(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,r){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),n=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,n,r.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+n.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,n=t.mag()>=2;if(!i&&!n)return;if(!i||!n)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Zf(e)&&Zf(t)&&o}}const Wf={panStep:100,bearingStep:15,pitchStep:10};class Qm{constructor(e){this._tr=new Mm(e);const t=Wf;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,i=0,n=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),n=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),n=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:a=>{const l=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:Xf,zoom:t?Math.round(l.zoom)+t*(e.shiftKey?2:1):l.zoom,bearing:l.bearing+r*this._bearingStep,pitch:l.pitch+i*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:l.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xf(e){return e*(2-e)}const Yf=4.000244140625;class rf{constructor(e,t){this._map=e,this._tr=new Mm(e),this._el=e.getCanvasContainer(),this._handler=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,v(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!e[this._map._metaKey])return;e.preventDefault()}let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=D.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==t&&t%Yf==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=L.mousePos(this._el,e),r=this._tr;this._around=uh.convert(this._aroundCenter?r.center:r.unproject(t)),this._aroundPoint=r.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Yf?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const t="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let n,o=!1;if("wheel"===this._type&&r&&i){const e=Math.min((D.now()-this._lastWheelEventTime)/200,1),a=i(e);n=tr.number(r,t,a),e<1?this._frameId||(this._frameId=!0):o=!0}else n=t,o=!0;return this._active=!0,o&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!o,zoomDelta:n-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let t=u;if(this._prevEase){const e=this._prevEase,r=(D.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),n=.27/Math.sqrt(i*i+1e-4)*.01;t=c(n,Math.sqrt(.0729-n*n),.25,1)}return this._prevEase={start:D.now(),duration:e,easing:t},t}reset(){this._active=!1}}class sf{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class nf{constructor(e){this._tr=new Mm(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class af{constructor(){this._tap=new Lm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,r){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?r.length>0&&(this._swipePoint=t[0],this._swipeTouch=r[0].identifier):this._tap.touchstart(e,t,r))}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const i=t[0],n=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){this._tapTime?this._swipePoint&&0===r.length&&this.reset():this._tap.touchend(e,t,r)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class of{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lf{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cf{constructor(e,t,r,i){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Kf=e=>e.zoom||e.drag||e.pitch||e.rotate;class uf extends rt{}function Jf(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class df{constructor(e,t){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wm(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t),v(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,t,r]of this._listeners)L.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[e,t,r]of this._listeners)L.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new zm(t,e));const i=t.boxZoom=new km(t,e);this._add("boxZoom",i);const n=new Bm(t),o=new nf(t);t.doubleClickZoom=new sf(o,n),this._add("tapZoom",n),this._add("clickZoom",o);const a=new af;this._add("tapDragZoom",a);const l=t.touchPitch=new Ym(t);this._add("touchPitch",l);const c=Vf(e),u=Uf(e);t.dragRotate=new lf(e,c,u),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const h=(({enable:e,clickTolerance:t})=>{const r=new Om({checkCorrectEvent:e=>0===L.mouseButton(e)&&!e.ctrlKey});return new Rm({clickTolerance:t,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:r,enable:e,assignEvents:Bf})})(e),p=new qm(e,t);t.dragPan=new of(r,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]);const d=new Xm,f=new Hm;t.touchZoomRotate=new cf(r,f,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]);const m=t.scrollZoom=new rf(t,this);this._add("scrollZoom",m,["mousePan"]);const g=t.keyboard=new Qm(t);this._add("keyboard",g),this._add("blockableMapEvent",new Cm(t));for(const r of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[r]&&t[r].enable(e[r])}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Kf(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,r){for(const i in e)if(i!==r&&(!t||t.indexOf(i)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const r="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},n={},o={},a=e.touches,l=a?this._getMapTouches(a):void 0,c=l?L.touchPos(this._el,l):L.mousePos(this._el,e);for(const{handlerName:a,handler:u,allowed:h}of this._handlers){if(!u.isEnabled())continue;let p;this._blockedByActive(o,h,a)?u.reset():u[t||e.type]&&(p=u[t||e.type](e,c,l),this.mergeHandlerResult(i,n,p,a,r),p&&p.needsRenderFrame&&this._triggerRenderFrame()),(p||u.isActive())&&(o[a]=u)}const u={};for(const e in this._previousActiveHandlers)o[e]||(u[e]=r);this._previousActiveHandlers=o,(Object.keys(u).length||Jf(i))&&(this._changes.push([i,n,u]),this._triggerRenderFrame()),(Object.keys(o).length||Jf(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=i;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,t,r,i,n){if(!r)return;f(e,r);const o={handlerName:i,originalEvent:r.originalEvent||n};void 0!==r.zoomDelta&&(t.zoom=o),void 0!==r.panDelta&&(t.drag=o),void 0!==r.pitchDelta&&(t.pitch=o),void 0!==r.bearingDelta&&(t.rotate=o)}_applyChanges(){const e={},t={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new n(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),f(t,o),f(r,a);this._updateMapTransform(e,t,r),this._changes=[]}_updateMapTransform(e,t,r){const i=this._map,n=i._getTransformForUpdate(),o=i.terrain;if(!(Jf(e)||o&&this._terrainMovement))return this._fireEvents(t,r,!0);let{panDelta:a,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,pinchAround:p}=e;void 0!==p&&(h=p),i._stop(!0),h=h||i.transform.centerPoint;const d=n.pointLocation(a?h.sub(a):h);c&&(n.bearing+=c),u&&(n.pitch+=u),l&&(n.zoom+=l),o?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?n.center=n.pointLocation(n.centerPoint.sub(a)):n.setLocationAtPoint(d,h):(this._terrainMovement=!0,n.freezeElevation=!0,n.setLocationAtPoint(d,h),this._map.once("moveend",(()=>{n.freezeElevation=!1,this._terrainMovement=!1,n.recalculateZoom(i.terrain)}))):n.setLocationAtPoint(d,h),i._applyUpdatedTransform(n),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,r,!0)}_fireEvents(e,t,r){const i=Kf(this._eventsInProgress),n=Kf(e),o={};for(const t in e){const{originalEvent:r}=e[t];this._eventsInProgress[t]||(o[`${t}start`]=r),this._eventsInProgress[t]=e[t]}!i&&n&&this._fireEvent("movestart",n.originalEvent);for(const e in o)this._fireEvent(e,o[e]);n&&this._fireEvent("move",n.originalEvent);for(const t in e){const{originalEvent:r}=e[t];this._fireEvent(t,r)}const a={};let l;for(const e in this._eventsInProgress){const{handlerName:r,originalEvent:i}=this._eventsInProgress[e];this._handlersById[r].isActive()||(delete this._eventsInProgress[e],l=t[r]||i,a[`${e}end`]=l)}for(const e in a)this._fireEvent(e,a[e]);const c=Kf(this._eventsInProgress);if(r&&(i||n)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),t=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;e?(t(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new rt("moveend",{originalEvent:l})),t(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,t){this._map.fire(new rt(e,t?{originalEvent:t}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new uf("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Qf={extend:(e,...t)=>f(e,...t),run(e){e()},logToElement(e,t=!1,r="log"){const i=window.document.getElementById(r);i&&(t&&(i.innerHTML=""),i.innerHTML+=`<br>${e}`)}};class ff extends nt{constructor(e,t){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,v(["_renderFrameCallback"],this),this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new uh(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,t,r){return e=n.convert(e).mult(-1),this.panTo(this.transform.center,f({offset:e},t),r)}panTo(e,t,r){return this.easeTo(f({center:e},t),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,t,r){return this.easeTo(f({zoom:e},t),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,t,r){return this.easeTo(f({bearing:e},t),r)}resetNorth(e,t){return this.rotateTo(0,f({duration:1e3},e),t),this}resetNorthPitch(e,t){return this.easeTo(f({bearing:0,pitch:0,duration:1e3},e),t),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=ph.convert(e);const r=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,t)}_cameraForBoxAndBearing(e,t,r,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=f({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}i.padding=f(o,i.padding);const a=this.transform,l=a.padding,c=a.project(uh.convert(e)),u=a.project(uh.convert(t)),h=c.rotate(-r*Math.PI/180),p=u.rotate(-r*Math.PI/180),d=new n(Math.max(h.x,p.x),Math.max(h.y,p.y)),m=new n(Math.min(h.x,p.x),Math.min(h.y,p.y)),g=d.sub(m),y=(a.width-(l.left+l.right+i.padding.left+i.padding.right))/g.x,v=(a.height-(l.top+l.bottom+i.padding.top+i.padding.bottom))/g.y;if(v<0||y<0)return void C("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const _=Math.min(a.scaleZoom(a.scale*Math.min(y,v)),i.maxZoom),b=n.convert(i.offset),x=new n((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),w=b.add(x).mult(a.scale/a.zoomScale(_));return{center:a.unproject(c.add(u).div(2).sub(w)),zoom:_,bearing:r}}fitBounds(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)}fitScreenCoordinates(e,t,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.convert(e)),this.transform.pointLocation(n.convert(t)),r,i),i,o)}_fitInternal(e,t,r){return e?(delete(t=f(e,t)).padding,t.linear?this.easeTo(t,r):this.flyTo(t,r)):this}jumpTo(e,t){this.stop();const r=this._getTransformForUpdate();let i=!1,n=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=uh.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(n=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this._applyUpdatedTransform(r),this.fire(new rt("movestart",t)).fire(new rt("move",t)),i&&this.fire(new rt("zoomstart",t)).fire(new rt("zoom",t)).fire(new rt("zoomend",t)),n&&this.fire(new rt("rotatestart",t)).fire(new rt("rotate",t)).fire(new rt("rotateend",t)),o&&this.fire(new rt("pitchstart",t)).fire(new rt("pitch",t)).fire(new rt("pitchend",t)),this.fire(new rt("moveend",t))}calculateCameraOptionsFromTo(e,t,r,i=0){const n=xh.fromLngLat(e,t),o=xh.fromLngLat(r,i),a=o.x-n.x,l=o.y-n.y,c=o.z-n.z,u=Math.hypot(a,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(a,l),p=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),d=180*Math.atan2(a,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:o.toLngLat(),zoom:p,pitch:f,bearing:d}}easeTo(e,t){this._stop(!1,e.easeId),(!1===(e=f({offset:[0,0],duration:500,easing:u},e)).animate||!e.essential&&D.prefersReducedMotion)&&(e.duration=0);const r=this._getTransformForUpdate(),i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),l=this.getPadding(),c="zoom"in e?+e.zoom:i,h="bearing"in e?this._normalizeBearing(e.bearing,o):o,p="pitch"in e?+e.pitch:a,d="padding"in e?e.padding:r.padding,m=n.convert(e.offset);let g=r.centerPoint.add(m);const y=r.pointLocation(g),v=uh.convert(e.center||y);this._normalizeCenter(v);const _=r.project(y),b=r.project(v).sub(_),x=r.zoomScale(c-i);let w,S;e.around&&(w=uh.convert(e.around),S=r.locationPoint(w));const C={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==i,this._rotating=this._rotating||o!==h,this._pitching=this._pitching||p!==a,this._padding=!r.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(t,e.noMoveStart,C),this.terrain&&this._prepareElevation(v),this._ease((n=>{if(this._zooming&&(r.zoom=tr.number(i,c,n)),this._rotating&&(r.bearing=tr.number(o,h,n)),this._pitching&&(r.pitch=tr.number(a,p,n)),this._padding&&(r.interpolatePadding(l,d,n),g=r.centerPoint.add(m)),this.terrain&&!e.freezeElevation&&this._updateElevation(n),w)r.setLocationAtPoint(w,S);else{const e=r.zoomScale(r.zoom-i),t=c>i?Math.min(2,x):Math.max(.5,x),o=Math.pow(t,1-n),a=r.unproject(_.add(b.mult(n*o)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,g)}this._applyUpdatedTransform(r),this._fireMoveEvents(t)}),(e=>{this.terrain&&this._finalizeElevation(),this._afterEase(t,e)}),e),this}_prepareEase(e,t,r={}){this._moving=!0,t||r.moving||this.fire(new rt("movestart",e)),this._zooming&&!r.zooming&&this.fire(new rt("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new rt("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new rt("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.transform.getElevation(e,this.terrain),this.transform.freezeElevation=!0}_updateElevation(e){const t=this.transform.getElevation(this._elevationCenter,this.terrain);if(e<1&&t!==this._elevationTarget){const r=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(r-(t-(r*e+this._elevationStart))/(1-e)),this._elevationTarget=t}this.transform.elevation=tr.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this.transform.freezeElevation=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(e){if(!this.transformCameraUpdate)return;const t=e.clone(),{center:r,zoom:i,pitch:n,bearing:o,elevation:a}=this.transformCameraUpdate(t);r&&(t.center=r),void 0!==i&&(t.zoom=i),void 0!==n&&(t.pitch=n),void 0!==o&&(t.bearing=o),void 0!==a&&(t.elevation=a),this.transform.apply(t)}_fireMoveEvents(e){this.fire(new rt("move",e)),this._zooming&&this.fire(new rt("zoom",e)),this._rotating&&this.fire(new rt("rotate",e)),this._pitching&&this.fire(new rt("pitch",e))}_afterEase(e,t){if(this._easeId&&t&&this._easeId===t)return;delete this._easeId;const r=this._zooming,i=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new rt("zoomend",e)),i&&this.fire(new rt("rotateend",e)),n&&this.fire(new rt("pitchend",e)),this.fire(new rt("moveend",e))}flyTo(e,t){if(!e.essential&&D.prefersReducedMotion){const r=m(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,t)}this.stop(),e=f({offset:[0,0],speed:1.2,curve:1.42,easing:u},e);const r=this._getTransformForUpdate(),i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),l=this.getPadding(),c="zoom"in e?h(+e.zoom,r.minZoom,r.maxZoom):i,p="bearing"in e?this._normalizeBearing(e.bearing,o):o,d="pitch"in e?+e.pitch:a,g="padding"in e?e.padding:r.padding,y=r.zoomScale(c-i),v=n.convert(e.offset);let _=r.centerPoint.add(v);const b=r.pointLocation(_),x=uh.convert(e.center||b);this._normalizeCenter(x);const w=r.project(b),S=r.project(x).sub(w);let C=e.curve;const M=Math.max(r.width,r.height),E=M/y,T=S.mag();if("minZoom"in e){const t=h(Math.min(e.minZoom,i,c),r.minZoom,r.maxZoom),n=M/r.zoomScale(t-i);C=Math.sqrt(n/T*2)}const A=C*C;function P(e){const t=(E*E-M*M+(e?-1:1)*A*A*T*T)/(2*(e?E:M)*A*T);return Math.log(Math.sqrt(t*t+1)-t)}function O(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}const k=P(0);let F=function(e){return I(k)/I(k+C*e)},j=function(e){return M*((I(k)*(O(t=k+C*e)/I(t))-O(k))/A)/T;var t},z=(P(1)-k)/C;if(Math.abs(T)<1e-6||!isFinite(z)){if(Math.abs(M-E)<1e-6)return this.easeTo(e,t);const r=E<M?-1:1;z=Math.abs(Math.log(E/M))/C,j=function(){return 0},F=function(e){return Math.exp(r*C*e)}}return e.duration="duration"in e?+e.duration:1e3*z/("screenSpeed"in e?+e.screenSpeed/C:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==p,this._pitching=d!==a,this._padding=!r.isPaddingEqual(g),this._prepareEase(t,!1),this.terrain&&this._prepareElevation(x),this._ease((n=>{const u=n*z,h=1/F(u);r.zoom=1===n?c:i+r.scaleZoom(h),this._rotating&&(r.bearing=tr.number(o,p,n)),this._pitching&&(r.pitch=tr.number(a,d,n)),this._padding&&(r.interpolatePadding(l,g,n),_=r.centerPoint.add(v)),this.terrain&&!e.freezeElevation&&this._updateElevation(n);const f=1===n?x:r.unproject(w.add(S.mult(j(u))).mult(h));r.setLocationAtPoint(r.renderWorldCopies?f.wrap():f,_),this._applyUpdatedTransform(r),this._fireMoveEvents(t)}),(()=>{this.terrain&&this._finalizeElevation(),this._afterEase(t)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(e,t,r){!1===r.animate||0===r.duration?(e(1),t()):(this._easeStart=D.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,t){e=p(e,-180,180);const r=Math.abs(e-t);return Math.abs(e-360-t)<r&&(e-=360),Math.abs(e+360-t)<r&&(e+=360),e}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}queryTerrainElevation(e){return this.terrain?this.transform.getElevation(uh.convert(e),this.terrain)-this.transform.elevation:null}}class _f{constructor(e={}){this.options=e,v(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options&&this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const r in t){const i=t[r];if(i.used||i.usedForTerrain){const t=i.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let i=r+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")}}class gf{constructor(e={}){this.options=e,v(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl");const t=L.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}}}class yf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const t of r)if(t.id===e)return void(t.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var em;!function(e){e.create="create",e.load="load",e.fullLoad="fullLoad"}(em||(em={}));let tm=null,rm=[];const im=1e3/60,nm="loadTime",om="fullLoadTime",sm={mark(e){performance.mark(e)},frame(e){const t=e;null!=tm&&rm.push(t-tm),tm=t},clearMetrics(){tm=null,rm=[],performance.clearMeasures(nm),performance.clearMeasures(om);for(const e in em)performance.clearMarks(em[e])},getPerformanceMetrics(){performance.measure(nm,em.create,em.load),performance.measure(om,em.create,em.fullLoad);const e=performance.getEntriesByName(nm)[0].duration,t=performance.getEntriesByName(om)[0].duration,r=rm.length,i=1/(rm.reduce(((e,t)=>e+t),0)/r/1e3),n=rm.filter((e=>e>im)).reduce(((e,t)=>e+(t-im)/im),0);return{loadTime:e,fullLoadTime:t,fps:i,percentDroppedFrames:n/(r+n)*100,totalFrames:r}}},am={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var lm=eo([{name:"a_pos3d",type:"Int16",components:3}]);class zf extends nt{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,t){this.sourceCache.update(e,t),this._renderableTilesKeys=[];const r={};for(const i of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:t}))r[i.key]=!0,this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.posMatrix=new Float64Array(16),rs(i.posMatrix,0,So,0,So,0,1),this._tiles[i.key]=new jh(i,this.tileSize));for(const e in this._tiles)r[e]||delete this._tiles[e]}freeRtt(e){for(const t in this._tiles){const r=this._tiles[t];(!e||r.tileID.equals(e)||r.tileID.isChildOf(e)||e.isChildOf(r.tileID))&&(r.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const t={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID;if(i.canonical.equals(e.canonical)){const i=e.clone();i.posMatrix=new Float64Array(16),rs(i.posMatrix,0,So,0,So,0,1),t[r]=i}else if(i.canonical.isChildOf(e.canonical)){const n=e.clone();n.posMatrix=new Float64Array(16);const o=i.canonical.z-e.canonical.z,a=i.canonical.x-(i.canonical.x>>o<<o),l=i.canonical.y-(i.canonical.y>>o<<o),c=So>>o;rs(n.posMatrix,0,c,0,c,0,1),Qo(n.posMatrix,n.posMatrix,[-a*c,-l*c,0]),t[r]=n}else if(e.canonical.isChildOf(i.canonical)){const n=e.clone();n.posMatrix=new Float64Array(16);const o=e.canonical.z-i.canonical.z,a=e.canonical.x-(e.canonical.x>>o<<o),l=e.canonical.y-(e.canonical.y>>o<<o),c=So>>o;rs(n.posMatrix,0,So,0,So,0,1),Qo(n.posMatrix,n.posMatrix,[a*c,l*c,0]),es(n.posMatrix,n.posMatrix,[1/2**o,1/2**o,0]),t[r]=n}}return t}getSourceTile(e,t){const r=this.sourceCache._source;let i=e.overscaledZ-this.deltaZoom;if(i>r.maxzoom&&(i=r.maxzoom),i<r.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(i).key);let n=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!n||!n.dem)&&t)for(;i>=r.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(e.scaledTo(i--).key);return n}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((t=>t.timeAdded>=e))}}class Cf{constructor(e,t,r){this.painter=e,this.sourceCache=new zf(t),this.options=r,this.exaggeration="number"==typeof r.exaggeration?r.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,t,r,i=So){if(!(t>=0&&t<i&&r>=0&&r<i))return 0;let n=0;const o=this.getTerrainData(e);if(o.tile&&o.tile.dem){const e=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}([],[t/i*So,r/i*So],o.u_terrain_matrix),a=[e[0]*o.tile.dem.dim,e[1]*o.tile.dem.dim],l=[Math.floor(a[0]),Math.floor(a[1])],c=o.tile.dem.get(l[0],l[1]),u=o.tile.dem.get(l[0],l[1]+1),h=o.tile.dem.get(l[0]+1,l[1]),p=o.tile.dem.get(l[0]+1,l[1]+1);n=tr.number(tr.number(c,u,a[0]-l[0]),tr.number(h,p,a[0]-l[0]),a[1]-l[1])}return n}getElevation(e,t,r,i=So){return this.getDEMElevation(e,t,r,i)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,t=new ao({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Kc(e,t,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Kc(e,new ao({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=Yo([])}const t=this.sourceCache.getSourceTile(e,!0);if(t&&t.dem&&(!t.demTexture||t.needsTerrainPrepare)){const e=this.painter.context;t.demTexture=this.painter.getTileTexture(t.dem.stride),t.demTexture?t.demTexture.update(t.dem.getPixels(),{premultiply:!1}):t.demTexture=new Kc(e,t.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),t.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),t.needsTerrainPrepare=!1}const r=t&&t+t.tileID.key+e.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-t.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=r?i=e.canonical.z-r:C("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const n=e.canonical.x-(e.canonical.x>>i<<i),o=e.canonical.y-(e.canonical.y>>i<<i),a=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(new Float64Array(16),[1/(So<<i),1/(So<<i),0]);Qo(a,a,[n*So,o*So,0]),this._demMatrixCache[e.key]={matrix:a,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:t&&t.dem&&t.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:t&&t.dem&&t.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(t&&t.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:t}}getFramebuffer(e){const t=this.painter,r=t.width/devicePixelRatio,i=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===r&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Kc(t.context,{width:r,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Kc(t.context,{width:r,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(r,i,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,r,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const t=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,r=0;e<this._coordsTextureSize;e++)for(let i=0;i<this._coordsTextureSize;i++,r+=4)t[r+0]=255&i,t[r+1]=255&e,t[r+2]=i>>8<<4|e>>8,t[r+3]=0;const r=new ao({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(t.buffer)),i=new Kc(e,r,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){const t=new Uint8Array(4),r=this.painter.context,i=r.gl;r.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,t),r.bindFramebuffer.set(null);const n=t[0]+(t[2]>>4<<8),o=t[1]+((15&t[2])<<8),a=this.coordsIndex[255-t[3]],l=a&&this.sourceCache.getTileByID(a);if(!l)return null;const c=this._coordsTextureSize,u=(1<<l.tileID.canonical.z)*c;return new xh((l.tileID.canonical.x*c+n)/u,(l.tileID.canonical.y*c+o)/u,this.getElevation(l.tileID,n,o,c))}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,t=new dn,r=new zn,i=this.meshSize,n=So/i,o=i*i;for(let e=0;e<=i;e++)for(let r=0;r<=i;r++)t.emplaceBack(r*n,e*n,0);for(let e=0;e<o;e+=i+1)for(let t=0;t<i;t++)r.emplaceBack(t+e,i+t+e+1,i+t+e+2),r.emplaceBack(t+e,i+t+e+2,t+e+1);const a=t.length,l=a+2*(i+1);for(const e of[0,1])for(let r=0;r<=i;r++)for(const i of[0,1])t.emplaceBack(r*n,e*So,i);for(let e=0;e<2*i;e+=2)r.emplaceBack(l+e,l+e+1,l+e+3),r.emplaceBack(l+e,l+e+3,l+e+2),r.emplaceBack(a+e,a+e+3,a+e+1),r.emplaceBack(a+e,a+e+2,a+e+3);const c=t.length,u=c+2*(i+1);for(const e of[0,1])for(let r=0;r<=i;r++)for(const i of[0,1])t.emplaceBack(e*So,r*n,i);for(let e=0;e<2*i;e+=2)r.emplaceBack(c+e,c+e+1,c+e+3),r.emplaceBack(c+e,c+e+3,c+e+2),r.emplaceBack(u+e,u+e+3,u+e+1),r.emplaceBack(u+e,u+e+2,u+e+3);return this._mesh={indexBuffer:e.createIndexBuffer(r),vertexBuffer:e.createVertexBuffer(t,lm.members),segments:Dn.simpleSegment(0,0,t.length,r.length)},this._mesh}getMeshFrameDelta(e){return 2*Math.PI*au/Math.pow(2,e)/5}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,r={minElevation:null,maxElevation:null};return t&&t.dem&&(r.minElevation=t.dem.min*this.exaggeration,r.maxElevation=t.dem.max*this.exaggeration),r}}class Mf{constructor(e,t,r){this._context=e,this._size=t,this._tileSize=r,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),r=new Kc(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return r.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(r.texture),{id:e,fbo:t,texture:r,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const e of this._recentlyUsed)if(!this._objects[e].inUse)return this._objects[e];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const cm={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pf{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Mf(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((r=>!e._layers[r].isHidden(t))),this._coordsDescendingInv={};for(const t in e.sourceCaches){this._coordsDescendingInv[t]={};const r=e.sourceCaches[t].getVisibleCoordinates();for(const e of r){const r=this.terrain.sourceCache.getTerrainCoords(e);for(const e in r)this._coordsDescendingInv[t][e]||(this._coordsDescendingInv[t][e]=[]),this._coordsDescendingInv[t][e].push(r[e])}}this._coordsDescendingInvStr={};for(const t of e._order){const r=e._layers[t],i=r.source;if(cm[r.type]&&!this._coordsDescendingInvStr[i]){this._coordsDescendingInvStr[i]={};for(const e in this._coordsDescendingInv[i])this._coordsDescendingInvStr[i][e]=this._coordsDescendingInv[i][e].map((e=>e.key)).sort().join()}}for(const e of this._renderableTiles)for(const t in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[t][e.tileID.key];r&&r!==e.rttCoords[t]&&(e.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const t=e.type,r=this.painter,i=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(cm[t]&&(this._prevType&&cm[this._prevType]||this._stacks.push([]),this._prevType=t,this._stacks[this._stacks.length-1].push(e.id),!i))return!0;if(cm[this._prevType]||cm[t]&&i){this._prevType=t;const e=this._stacks.length-1,i=this._stacks[e]||[];for(const t of this._renderableTiles){if(this.pool.isFull()&&(Ef(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(t),t.rtt[e]){const r=this.pool.getObjectForId(t.rtt[e].id);if(r.stamp===t.rtt[e].stamp){this.pool.useObject(r);continue}}const n=this.pool.getOrCreateFreeObject();this.pool.useObject(n),this.pool.stampObject(n),t.rtt[e]={id:n.id,stamp:n.stamp},r.context.bindFramebuffer.set(n.fbo.framebuffer),r.context.clear({color:oe.transparent,stencil:0}),r.currentStencilSource=void 0;for(let e=0;e<i.length;e++){const o=r.style._layers[i[e]],a=o.source?this._coordsDescendingInv[o.source][t.tileID.key]:[t.tileID];r.context.viewport.set([0,0,n.fbo.width,n.fbo.height]),r._renderTileClippingMasks(o,a),r.renderLayer(r,r.style.sourceCaches[o.source],o,a),o.source&&(t.rttCoords[o.source]=this._coordsDescendingInvStr[o.source][t.tileID.key])}}return Ef(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),cm[t]}return!1}}const hm=e,gm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:j.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0},ym=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},vm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ff{constructor(e,t,r=!1){this._clickTolerance=10;const i=e.dragRotate._mouseRotate.getClickTolerance(),n=e.dragRotate._mousePitch.getClickTolerance();this.element=t,this.mouseRotate=Vf({clickTolerance:i,enable:!0}),this.touchRotate=(({enable:e,clickTolerance:t,bearingDegreesPerPixelMoved:r=.8})=>{const i=new Vm;return new Rm({clickTolerance:t,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:i,enable:e,assignEvents:ym})})({clickTolerance:i,enable:!0}),this.map=e,r&&(this.mousePitch=Uf({clickTolerance:n,enable:!0}),this.touchPitch=(({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:r=-.5})=>{const i=new Vm;return new Rm({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:i,enable:e,assignEvents:ym})})({clickTolerance:n,enable:!0})),v(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),L.addEventListener(t,"mousedown",this.mousedown),L.addEventListener(t,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(t,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),L.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),L.disableDrag()}moveMouse(e,t){const r=this.map,{bearingDelta:i}=this.mouseRotate.dragMove(e,t)||{};if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const{pitchDelta:i}=this.mousePitch.dragMove(e,t)||{};i&&r.setPitch(r.getPitch()+i)}}moveTouch(e,t){const r=this.map,{bearingDelta:i}=this.touchRotate.dragMove(e,t)||{};if(i&&r.setBearing(r.getBearing()+i),this.touchPitch){const{pitchDelta:i}=this.touchPitch.dragMove(e,t)||{};i&&r.setPitch(r.getPitch()+i)}}off(){const e=this.element;L.removeEventListener(e,"mousedown",this.mousedown),L.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend),L.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend)}mousedown(e){this.startMouse(f({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),L.mousePos(this.element,e)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)}mousemove(e){this.moveMouse(e,L.mousePos(this.element,e))}mouseup(e){this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),L.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.addEventListener(window,"touchend",this.touchend))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=L.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}let bm;function xm(e,t,r){if(e=new uh(e.lng,e.lat),t){const i=new uh(e.lng-360,e.lat),n=new uh(e.lng+360,e.lat),o=r.locationPoint(e).distSqr(t);r.locationPoint(i).distSqr(t)<o?e=i:r.locationPoint(n).distSqr(t)<o&&(e=n)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const Sm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tm(e,t,r){const i=e.classList;for(const e in Sm)i.remove(`maplibregl-${r}-anchor-${e}`);i.add(`maplibregl-${r}-anchor-${t}`)}class $f extends nt{constructor(e,t){if(super(),(e instanceof HTMLElement||t)&&(e=f({element:e},t)),v(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=n.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div"),this._element.setAttribute("aria-label","Map marker");const t=L.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;t.setAttributeNS(null,"display","block"),t.setAttributeNS(null,"height",`${r}px`),t.setAttributeNS(null,"width",`${i}px`),t.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const o=L.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const a=L.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");const l=L.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=L.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=L.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=L.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const p=L.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");const d=L.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(d);const f=L.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=L.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=L.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=L.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),a.appendChild(l),a.appendChild(u),a.appendChild(p),a.appendChild(f),a.appendChild(m),t.appendChild(a),t.setAttributeNS(null,"height",r*this._scale+"px"),t.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(t),this._offset=n.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Tm(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=uh.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,i=Math.sqrt(Math.pow(r,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-r+i)],"bottom-right":[-i,-1*(t-r+i)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=xm(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),L.setTransform(this._element,`${Sm[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${r} ${t}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const e=this._map.unproject(this._pos),t=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=e.distanceTo(this._lngLat)>20*t?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(e){return this._offset=n.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new rt("dragstart"))),this.fire(new rt("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new rt("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Pm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fm=0,Nm=!1;const Um={maxWidth:100,unit:"metric"};function Gm(e,t,r){const i=r&&r.maxWidth||100,n=e._container.clientHeight/2,o=e.unproject([0,n]),a=e.unproject([i,n]),l=o.distanceTo(a);if(r&&"imperial"===r.unit){const r=3.2808*l;r>5280?Zm(t,i,r/5280,e._getUIString("ScaleControl.Miles")):Zm(t,i,r,e._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?Zm(t,i,l/1852,e._getUIString("ScaleControl.NauticalMiles")):l>=1e3?Zm(t,i,l/1e3,e._getUIString("ScaleControl.Kilometers")):Zm(t,i,l,e._getUIString("ScaleControl.Meters"))}function Zm(e,t,r,i){const n=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(r);e.style.width=t*(n/r)+"px",e.innerHTML=`${n}&nbsp;${i}`}const $m={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Wm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Km(e){if(e){if("number"==typeof e){const t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new n(0,0),top:new n(0,e),"top-left":new n(t,t),"top-right":new n(-t,t),bottom:new n(0,-e),"bottom-left":new n(t,-t),"bottom-right":new n(-t,-t),left:new n(e,0),right:new n(-e,0)}}if(e instanceof n||Array.isArray(e)){const t=n.convert(e);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:n.convert(e.center||[0,0]),top:n.convert(e.top||[0,0]),"top-left":n.convert(e["top-left"]||[0,0]),"top-right":n.convert(e["top-right"]||[0,0]),bottom:n.convert(e.bottom||[0,0]),"bottom-left":n.convert(e["bottom-left"]||[0,0]),"bottom-right":n.convert(e["bottom-right"]||[0,0]),left:n.convert(e.left||[0,0]),right:n.convert(e.right||[0,0])}}return Km(new n(0,0))}const Jm=e,eg={setRTLTextPlugin:function(e,t,r=!1){if(Fn===Pn||Fn===On||Fn===Ln)throw new Error("setRTLTextPlugin cannot be called multiple times.");jn=D.resolveURL(e),Fn=Pn,kn=t,Nn(),r||Un()},getRTLTextPluginStatus:Vn,Map:class extends ff{constructor(e){var t;if(sm.mark(em.create),null!=(e=f({},gm,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new fm(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._metaKey=0===navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new yf,this._controls=[],this._mapId=y(),this._locale=f({},am,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(t=e.pixelRatio)&&void 0!==t?t:devicePixelRatio,this.transformCameraUpdate=e.transformCameraUpdate,this._imageQueueHandle=ee.addThrottleControl((()=>this.isMoving())),this._requestManager=new Q(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),v(["_onWindowOnline","_onMapScroll","_cooperativeGesturesOnWheel","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;this._resizeObserver=new ResizeObserver((t=>{e?this._trackResize&&this.resize(t)._update():e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new df(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new _m("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,f({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new _f({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new gf,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new rt(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new rt(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new rt("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,t){if(void 0===t&&(t=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new st(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[t];return-1!==t.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new st(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(e);return t>-1&&this._controls.splice(t,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,r,i){return null==i&&this.terrain&&(i=this.transform.getElevation(r,this.terrain)),super.calculateCameraOptionsFromTo(e,t,r,i)}resize(e){var t;const r=this._containerDimensions(),i=r[0],n=r[1];this._resizeCanvas(i,n,this.getPixelRatio()),this.transform.resize(i,n),null===(t=this._requestedCameraState)||void 0===t||t.resize(i,n),this.painter.resize(i,n,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new rt("movestart",e)).fire(new rt("move",e))),this.fire(new rt("resize",e)),o&&this.fire(new rt("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(e){const[t,r]=this._containerDimensions();this._pixelRatio=e,this._resizeCanvas(t,r,e),this.painter.resize(t,r,e)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(ph.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(e){return this._cooperativeGestures=e,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(e){return this.transform.locationPoint(uh.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(n.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let i=!1;const n=n=>{const o=this.getLayer(t)?this.queryRenderedFeatures(n.point,{layers:[t]}):[];o.length?i||(i=!0,r.call(this,new Im(e,this,n.originalEvent,{features:o}))):i=!1};return{layer:t,listener:r,delegates:{mousemove:n,mouseout:()=>{i=!1}}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const n=n=>{(this.getLayer(t)?this.queryRenderedFeatures(n.point,{layers:[t]}):[]).length?i=!0:i&&(i=!1,r.call(this,new Im(e,this,n.originalEvent)))},o=t=>{i&&(i=!1,r.call(this,new Im(e,this,t.originalEvent)))};return{layer:t,listener:r,delegates:{mousemove:n,mouseout:o}}}{const i=e=>{const i=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];i.length&&(e.features=i,r.call(this,e),delete e.features)};return{layer:t,listener:r,delegates:{[e]:i}}}}on(e,t,r){if(void 0===r)return super.on(e,t);const i=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i);for(const e in i.delegates)this.on(e,i.delegates[e]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);const i=this._createDelegatedListener(e,t,r);for(const e in i.delegates)this.once(e,i.delegates[e]);return this}off(e,t,r){return void 0===r?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(i=>{const n=this._delegatedListeners[e];for(let e=0;e<n.length;e++){const i=n[e];if(i.layer===t&&i.listener===r){for(const e in i.delegates)this.off(e,i.delegates[e]);return n.splice(e,1),this}}})(),this)}queryRenderedFeatures(e,t){if(!this.style)return[];let r;const i=e instanceof n||Array.isArray(e),o=i?e:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(i?{}:e)||{},o instanceof n||"number"==typeof o[0])r=[n.convert(o)];else{const e=n.convert(o[0]),t=n.convert(o[1]);r=[e,new n(t.x,e.y),t,new n(e.x,t.y),e]}return this.style.queryRenderedFeatures(r,t,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,t){return!1!==(t=f({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(e,t))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new up(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,r):this.style.loadJSON(e,t,r),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new up(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,t){if("string"==typeof e){const r=this._requestManager.transformRequest(e,J.Style);U(r,((e,r)=>{e?this.fire(new st(e)):r&&this._updateDiff(r,t)}))}else"object"==typeof e&&this._updateDiff(e,t)}_updateDiff(e,t){try{this.style.setState(e,t)&&this._update(!0)}catch(r){C(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():C("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const t=this.style&&this.style.sourceCaches[e];if(void 0!==t)return t.loaded();this.fire(new st(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const t=this.style.sourceCaches[e.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);for(const t in this.style._layers){const r=this.style._layers[t];"hillshade"===r.type&&r.source===e.source&&C("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Cf(this.painter,t,e),this.painter.renderToTexture=new Pf(this.painter,this.terrain),this.transform.updateElevation(this.terrain),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId===e.source&&this.transform.updateElevation(this.terrain),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.updateElevation(this.terrain);return this.fire(new rt("terrain",{terrain:e})),this}getTerrain(){return this.terrain&&this.terrain.options}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,r){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,r)}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,t,{pixelRatio:r=1,sdf:i=!1,stretchX:n,stretchY:o,content:a}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||O(t)){const{width:l,height:c,data:u}=D.getImageData(t);this.style.addImage(e,{data:new ao({width:l,height:c},u),pixelRatio:r,stretchX:n,stretchY:o,content:a,sdf:i,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new st(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=t,h=t;this.style.addImage(e,{data:new ao({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:n,stretchY:o,content:a,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,t){const r=this.style.getImage(e);if(!r)return this.fire(new st(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=t instanceof HTMLImageElement||O(t)?D.getImageData(t):t,{width:n,height:o,data:a}=i;if(void 0===n||void 0===o)return this.fire(new st(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(n!==r.data.width||o!==r.data.height)return this.fire(new st(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(t instanceof HTMLImageElement||O(t));r.data.replace(a,l),this.style.updateImage(e,r)}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new st(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e,t){ee.getImage(this._requestManager.transformRequest(e,J.Image),t)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,i={}){return this.style.setPaintProperty(e,t,r,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,i={}){return this.style.setLayoutProperty(e,t,r,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,r,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=L.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const r=this._containerDimensions();this._resizeCanvas(r[0],r[1],this.getPixelRatio());const i=this._controlContainer=L.create("div","maplibregl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{n[e]=L.create("div",`maplibregl-ctrl-${e} `,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_cooperativeGesturesOnWheel(e){this._onCooperativeGesture(e,e[this._metaKey],1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=L.create("div","maplibregl-cooperative-gesture-screen",this._container);let e="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(e="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${e}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){L.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(e,t,r){this._canvas.width=r*e,this._canvas.height=r*t,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(r=>{t={requestedAttributes:e},r&&(t.statusMessage=r.statusMessage,t.type=r.type)}),{once:!0});const r=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!r){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new um(r,this.transform),q.testSupport(r)}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new rt("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new rt("webglcontextrestored",{originalEvent:e}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(e,t,r){return!t&&r<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=D.now();this.style.zoomHistory.update(e,i);const n=new us(e,{now:i,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=n.crossFadingFactor();1===o&&o===this._crossFadingFactor||(r=!0,this._crossFadingFactor=o),this.style.update(n)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain&&this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.updateElevation(this.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new rt("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,sm.mark(em.load),this.fire(new rt("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const i=this._sourcesDirty||this._styleDirty||this._placementDirty;return i||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new rt("idle")),!this._loaded||this._fullyLoaded||i||(this._fullyLoaded=!0,sm.mark(em.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),ee.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),sm.clearMetrics(),this._removed=!0,this.fire(new rt("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=D.frame((e=>{sm.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return hm}getCameraTargetElevation(){return this.transform.elevation}},NavigationControl:class{constructor(e){this.options=f({},vm,e),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(v(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),L.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),L.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(v(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=L.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),r=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ff(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const r=L.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}_setButtonTitle(e,t){const r=this._map._getUIString(`NavigationControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}},GeolocateControl:class extends nt{constructor(e){super(),this.options=f({},Pm,e),v(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){return this._map=e,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(e,t=!1){void 0===bm||t?void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{bm="denied"!==t.state,e(bm)})).catch((()=>{bm=!!window.navigator.geolocation,e(bm)})):(bm=!!window.navigator.geolocation,e(bm)):e(bm)}(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fm=0,Nm=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new rt("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new rt("geolocate",e)),this._finish()}}_updateCamera(e){const t=new uh(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=f({bearing:this._map.getBearing()},this.options.fitBoundsOptions),n=ph.fromLngLat(t,r);this._map.fitBounds(n,i,{geolocateSource:!0})}_updateMarker(e){if(e){const t=new uh(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),r=e.getNorthEast(),i=t.distanceTo(r),n=Math.ceil(this._accuracy/(i/this._map._container.clientHeight)*2);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Nm)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new rt("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){C("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new $f(this._dotElement),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $f({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new rt("trackuserlocationend")))}))}}trigger(){if(!this._setup)return C("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new rt("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fm--,Nm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new rt("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new rt("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fm++,Fm>1?(e={maximumAge:6e5,timeout:0},Nm=!0):(e=this.options.positionOptions,Nm=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_f,LogoControl:gf,ScaleControl:class{constructor(e){this.options=f({},Um,e),v(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Gm(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,Gm(this._map,this._container,this.options)}},FullscreenControl:class extends nt{constructor(e={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:C("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new rt("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new rt("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},TerrainControl:class{constructor(e){this.options=e,v(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(e){return this._map=e,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends nt{constructor(e){super(),this.options=f(Object.create($m),e),v(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new rt("open")),this}isOpen(){return!!this._map}remove(){return this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new rt("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=uh.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),r=document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)t.appendChild(i);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(e){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=L.create("div","maplibregl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((e=>this._container.classList.add(e))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xm(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!e)return;const t=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);let r=this.options.anchor;const i=Km(this.options.offset);if(!r){const e=this._container.offsetWidth,n=this._container.offsetHeight;let o;o=t.y+i.bottom.y<n?["top"]:t.y>this._map.transform.height-n?["bottom"]:[],t.x<e/2?o.push("left"):t.x>this._map.transform.width-e/2&&o.push("right"),r=0===o.length?"bottom":o.join("-")}const n=t.add(i[r]).round();L.setTransform(this._container,`${Sm[r]} translate(${n.x}px,${n.y}px)`),Tm(this._container,r,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Wm);e&&e.focus()}_onClose(){this.remove()}},Marker:$f,Style:up,LngLat:uh,LngLatBounds:ph,Point:n,MercatorCoordinate:xh,Evented:nt,AJAXError:R,config:j,CanvasSource:Lh,GeoJSONSource:Mh,ImageSource:Ph,RasterDEMTileSource:Ch,RasterTileSource:wh,VectorTileSource:bh,VideoSource:Dh,prewarm:function(){Nu().acquire(Lu)},clearPrewarmedResources:function(){const e=ju;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Lu),ju=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return Jm},get workerCount(){return Yh.workerCount},set workerCount(e){Yh.workerCount=e},get maxParallelImageRequests(){return j.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){j.MAX_PARALLEL_IMAGE_REQUESTS=e},get workerUrl(){return j.WORKER_URL},set workerUrl(e){j.WORKER_URL=e},addProtocol(e,t){j.REGISTERED_PROTOCOLS[e]=t},removeProtocol(e){delete j.REGISTERED_PROTOCOLS[e]}};return Qf.extend(eg,{isSafari:P,getPerformanceMetrics:sm.getPerformanceMetrics}),eg}()},function(e,t,r){e.exports=r.p+"e3b1bd3256c6e2785c1c7786bf60a1a7.js"},function(e,t,r){e.exports=r.p+"c86dfb7f678440f25f72f0dd4ba5dd0d.js"},function(e,t,r){var i=r(87),n=r(463);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(88)(!1)).push([e.i,".maplibregl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px #0000001a}@media (-ms-high-contrast:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:initial;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.maplibregl-ctrl-icon{background-color:initial}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.maplibregl-ctrl button:not(:disabled):hover{background-color:#0000000d}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8h-8z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath fill='%23999' d='m10.5 16 4 8 4-8h-8z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8h-8z'/%3E%3C/svg%3E\")}}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1 9-9z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (-ms-high-contrast:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1 9-9z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1 9-9z'/%3E%3C/svg%3E\")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath fill='%23000' fill-opacity='.4' d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z'/%3E%3Cpath fill='%23e1e3e9' d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z'/%3E%3Cpath fill='%23fff' d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (-ms-high-contrast:active){a.maplibregl-ctrl-logo{background-color:initial;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath fill='%23000' fill-opacity='.4' d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z'/%3E%3Cpath fill='%23e1e3e9' d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z'/%3E%3Cpath fill='%23fff' d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath fill='%23000' fill-opacity='.4' d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z'/%3E%3Cpath fill='%23e1e3e9' d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z'/%3E%3Cpath fill='%23fff' d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z'/%3E%3C/g%3E%3C/svg%3E\")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:#ffffff80;margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:initial;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:#ffffff80;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:#0000000d}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.maplibregl-ctrl-attrib a{color:#000000bf;text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:#ffffffbf;border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid #0000;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:initial;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:#0000000d}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px #0000001a;padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:\"\";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px #00000059;box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:#0006;color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(width <= 480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}",""]),e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiContextMenuPanelStyles=void 0;var i,n,o,a,l=r(3),c=r(210),u=r(566),h=r(567);function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.euiContextMenuPanelStyles=function(e){var t=e.euiTheme,r=(0,h.euiContextMenuVariables)(e).panelWidth,d={transitioning:(0,l.css)("pointer-events:none;animation-fill-mode:forwards;animation-duration:",t.animation.normal,";animation-timing-function:",t.animation.resistance,";",c.euiCantAnimate,"{animation-duration:0s;};label:transitioning;"),inLeft:(0,l.keyframes)(i||(i=p(["\n      0% { transform: translateX(","); }\n      100% { transform: translateX(0); }\n    "])),r),outLeft:(0,l.keyframes)(n||(n=p(["\n      0% { transform: translateX(0); }\n      100% { transform: translateX(-","); }\n    "])),r),inRight:(0,l.keyframes)(o||(o=p(["\n      0% { transform: translateX(-","); }\n      100% { transform: translateX(0); }\n    "])),r),outRight:(0,l.keyframes)(a||(a=p(["\n      0% { transform: translateX(0); }\n      100% { transform: translateX(","); }\n    "])),r)};return{euiContextMenuPanel:(0,l.css)((0,c.logicalCSS)("width","100%")," visibility:visible;outline-offset:-",t.focus.width,";&:focus{outline:none;};label:euiContextMenuPanel;"),next:{in:(0,l.css)(d.transitioning," animation-name:",d.inLeft,";;label:in;"),out:(0,l.css)(d.transitioning," animation-name:",d.outLeft,";;label:out;")},previous:{in:(0,l.css)(d.transitioning," animation-name:",d.inRight,";;label:in;"),out:(0,l.css)(d.transitioning," animation-name:",d.outRight,";;label:out;")},euiContextMenuPanel__title:(0,l.css)((0,u.euiTitle)(e,"xxs")," ",(0,c.logicalCSS)("border-bottom",t.border.thin)," &:enabled:focus{background-color:unset;};label:euiContextMenuPanel__title;")}}},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EuiGlobalStyles=void 0,(n=r(4))&&n.__esModule;var n,o=r(3),a=r(271),l=r(117),c=r(164),u=r(134),h=r(554);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.EuiGlobalStyles=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);var t=(0,u.useEuiTheme)(),r=t.euiTheme,i=t.colorMode,n=r.base,p=r.colors,f=r.font,m=(0,a.euiScrollBarStyles)(t,{trackColor:"LIGHT"===i?(0,c.shade)(p.body,.03):(0,c.tint)(p.body,.07),width:"auto"}),g=f.scale[f.body.scale],y={fontFamily:f.family,fontSize:"".concat("px"===f.defaultUnits?g*n:g).concat(f.defaultUnits),lineHeight:n/(g*n),fontWeight:f.weight[f.body.weight]},v=(0,o.css)(h.resetStyles," html{",m," ",y," text-size-adjust:100%;font-kerning:normal;",(0,l.logicalCSS)("height","100%")," background-color:",p.body,";color:",p.text,";}code,pre,kbd,samp{font-family:",f.familyCode,";}input,textarea,select{",d(d({},y),{},{fontSize:"1rem"}),";}select:disabled{opacity:1;}button{font-family:",f.family,";}em{font-style:italic;}strong{font-weight:",f.weight.bold,";}*:focus{",(0,a.euiFocusRing)(t),";}::selection{background:",(0,c.transparentize)(p.primary,"LIGHT"===i?.1:.2),";}a{color:",p.primaryText,";&,&:hover,&:focus{text-decoration:none;}}.euiBody-hasPortalContent{position:relative;};label:styles;");return(0,o.jsx)(o.Global,{styles:v})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiBackgroundColorCSS=t.useEuiBackgroundColor=t.euiBackgroundColor=t.BACKGROUND_COLORS=void 0;var i=r(3),n=r(211);t.BACKGROUND_COLORS=["transparent","plain","subdued","accent","primary","success","warning","danger"];var o=function(e,t){var r=e.euiTheme,i=e.colorMode,o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).method;if("transparent"===t)return"transparent";if("transparent"===o)return"plain"===t?(0,n.transparentize)(r.colors.ghost,.2):"subdued"===t?"DARK"===i?(0,n.transparentize)(r.colors.lightShade,.4):(0,n.transparentize)(r.colors.lightShade,.2):(0,n.transparentize)(r.colors[t],.1);switch(t){case"plain":return r.colors.emptyShade;case"subdued":return r.colors.body;default:return function(e){return"DARK"===i?(0,n.shade)(e,.8):(0,n.tint)(e,.9)}(r.colors[t])}};t.euiBackgroundColor=o;var a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).method,r=(0,n.useEuiTheme)();return o(r,e,{method:t})};t.useEuiBackgroundColor=a,t.useEuiBackgroundColorCSS=function(){return{transparent:(0,i.css)("background-color:",a("transparent"),";;label:transparent;"),plain:(0,i.css)("background-color:",a("plain"),";;label:plain;"),subdued:(0,i.css)("background-color:",a("subdued"),";;label:subdued;"),accent:(0,i.css)("background-color:",a("accent"),";;label:accent;"),primary:(0,i.css)("background-color:",a("primary"),";;label:primary;"),success:(0,i.css)("background-color:",a("success"),";;label:success;"),warning:(0,i.css)("background-color:",a("warning"),";;label:warning;"),danger:(0,i.css)("background-color:",a("danger"),";;label:danger;")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keys=t.TAB=t.SPACE=t.SHIFT=t.PAGE_UP=t.PAGE_DOWN=t.META=t.HOME=t.F2=t.ESCAPE=t.ENTER=t.END=t.CTRL=t.BACKSPACE=t.ARROW_UP=t.ARROW_RIGHT=t.ARROW_LEFT=t.ARROW_DOWN=t.ALT=void 0,t.ENTER="Enter",t.SPACE=" ",t.ESCAPE="Escape",t.TAB="Tab",t.BACKSPACE="Backspace",t.F2="F2",t.ALT="Alt",t.SHIFT="Shift",t.CTRL="Control",t.META="Meta",t.ARROW_DOWN="ArrowDown",t.ARROW_UP="ArrowUp",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight",t.PAGE_UP="PageUp",t.PAGE_DOWN="PageDown",t.END="End",t.HOME="Home";var i=function(e){return e.ENTER="Enter",e.SPACE=" ",e.ESCAPE="Escape",e.TAB="Tab",e.BACKSPACE="Backspace",e.F2="F2",e.ALT="Alt",e.SHIFT="Shift",e.CTRL="Control",e.META="Meta",e.ARROW_DOWN="ArrowDown",e.ARROW_UP="ArrowUp",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight",e.PAGE_UP="PageUp",e.PAGE_DOWN="PageDown",e.END="End",e.HOME="Home",e}({});t.keys=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"htmlIdGenerator",{enumerable:!0,get:function(){return i.htmlIdGenerator}}),Object.defineProperty(t,"useGeneratedHtmlId",{enumerable:!0,get:function(){return i.useGeneratedHtmlId}});var i=r(469)},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.htmlIdGenerator=l,t.useGeneratedHtmlId=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var c=o?Object.getOwnPropertyDescriptor(e,l):null;c&&(c.get||c.set)?Object.defineProperty(n,l,c):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}(r(4)),o=r(43);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,o.v1)();return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i="".concat(e).concat(""!==e?"_":"i"),n=r?"_".concat(r):"";return"".concat(i).concat(n?t:(0,o.v1)()).concat(n)}}var c="useId"in n.default?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prefix,r=void 0===t?"":t,i=e.suffix,o=void 0===i?"":i,a=e.conditionalId,l=n.default.useId();return(0,n.useMemo)((function(){return a||"".concat(r).concat(l).concat(o)}),[l,a,r,o])}:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prefix,r=e.suffix,i=e.conditionalId;return(0,n.useMemo)((function(){return i||l(t)(r)}),[i,t,r])};t.useGeneratedHtmlId=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RIGHT_ALIGNMENT=t.LEFT_ALIGNMENT=t.CENTER_ALIGNMENT=void 0,t.LEFT_ALIGNMENT="left",t.RIGHT_ALIGNMENT="right",t.CENTER_ALIGNMENT="center"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(272);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(291);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(496);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiThemeAmsterdam=t.EuiThemeAmsterdam=t.AMSTERDAM_NAME_KEY=void 0;var i=r(97),n=r(473),o=r(480),a=r(481),l=r(482),c=r(485),u=r(486),h=r(487),p=r(488),d="EUI_THEME_AMSTERDAM";t.AMSTERDAM_NAME_KEY=d;var f={colors:n.colors,base:l.base,size:l.size,border:c.border,font:h.font,animation:o.animation,breakpoint:a.breakpoint,levels:u.levels,focus:p.focus};t.euiThemeAmsterdam=f;var m=(0,i.buildTheme)(f,d);t.EuiThemeAmsterdam=m},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.text_colors=t.special_colors=t.shade_colors=t.light_colors=t.dark_shades=t.dark_colors_ams=t.colors=t.brand_text_colors=t.brand_colors=void 0;var n=r(164),o=r(97),a=r(282);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var d={primary:"#07C",accent:"#F04E98",success:"#00BFB3",warning:"#FEC514",danger:"#BD271E"};t.brand_colors=d;var f={primaryText:(0,o.computed)((0,a.makeHighContrastColor)("colors.primary")),accentText:(0,o.computed)((0,a.makeHighContrastColor)("colors.accent")),successText:(0,o.computed)((0,a.makeHighContrastColor)("colors.success")),warningText:(0,o.computed)((0,a.makeHighContrastColor)("colors.warning")),dangerText:(0,o.computed)((0,a.makeHighContrastColor)("colors.danger"))};t.brand_text_colors=f;var m={emptyShade:"#FFF",lightestShade:"#F1F4FA",lightShade:"#D3DAE6",mediumShade:"#98A2B3",darkShade:"#69707D",darkestShade:"#343741",fullShade:"#000"};t.shade_colors=m;var g={body:(0,o.computed)((function(e){var t=h(e,1)[0];return(0,n.tint)(t,.4)}),["colors.lightestShade"]),highlight:(0,o.computed)((function(e){var t=h(e,1)[0];return(0,n.tint)(t,.9)}),["colors.warning"]),disabled:"#ABB4C4",disabledText:(0,o.computed)((0,a.makeDisabledContrastColor)("colors.disabled")),shadow:(0,o.computed)((function(e){return e.colors.ink}))};t.special_colors=g;var y={text:(0,o.computed)((function(e){return h(e,1)[0]}),["colors.darkestShade"]),title:(0,o.computed)((function(e){var t=h(e,1)[0];return(0,n.shade)(t,.5)}),["colors.text"]),subduedText:(0,o.computed)((0,a.makeHighContrastColor)("colors.darkShade")),link:(0,o.computed)((function(e){return h(e,1)[0]}),["colors.primaryText"])};t.text_colors=y;var v=c(c(c(c(c({},d),m),g),f),y);t.light_colors=v;var _={emptyShade:"#1D1E24",lightestShade:"#25262E",lightShade:"#343741",mediumShade:"#535966",darkShade:"#98A2B3",darkestShade:"#D4DAE5",fullShade:"#FFF"};t.dark_shades=_;var b=c(c(c({primary:"#36A2EF",accent:"#F68FBE",success:"#7DDED8",warning:"#F3D371",danger:"#F86B63"},_),{},{body:(0,o.computed)((function(e){var t=h(e,1)[0];return(0,n.shade)(t,.45)}),["colors.lightestShade"]),highlight:"#2E2D25",disabled:"#515761",disabledText:(0,o.computed)((0,a.makeDisabledContrastColor)("colors.disabled")),shadow:(0,o.computed)((function(e){return e.colors.ink}))},f),{},{text:"#DFE5EF",title:(0,o.computed)((function(e){return h(e,1)[0]}),["colors.text"]),subduedText:(0,o.computed)((0,a.makeHighContrastColor)("colors.mediumShade")),link:(0,o.computed)((function(e){return h(e,1)[0]}),["colors.primaryText"])});t.dark_colors_ams=b;var x={ghost:"#FFF",ink:"#000",LIGHT:v,DARK:b};t.colors=x},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.isColorDark=function(e,t,r){var n,o=(3,function(e){if(Array.isArray(e))return e}(n=[e,t,r].map((function(e){return e/255})).map((function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{for(o=(r=r.call(e)).next,0;!(c=(i=o.call(r)).done)&&(l.push(i.value),3!==l.length);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(n)||function(e,t){if(e){if("string"==typeof e)return i(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,3):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return.2126*o[0]+.7152*o[1]+.0722*o[2]<=.179}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToHsv=function(e){var t,r=(3,function(e){if(Array.isArray(e))return e}(t=(0,i.hexToRgb)(e))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{for(o=(r=r.call(e)).next,0;!(c=(i=o.call(r)).done)&&(l.push(i.value),3!==l.length);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,3);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,3):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],l=r[1],c=r[2];return(0,n.rgbToHsv)({r:a,g:l,b:c})};var i=r(276),n=r(277);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsvToHex=function(e){var t=e.h,r=e.s,o=e.v,a=(0,i.hsvToRgb)({h:t,s:r,v:o}),l=a.r,c=a.g,u=a.b;return(0,n.rgbToHex)("rgb(".concat(l,", ").concat(c,", ").concat(u,")"))};var i=r(278),n=r(279)},function(e,t,r){"use strict";function i(e,t,r){var i=[e,t,r].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*i[0]+.7152*i[1]+.0722*i[2]}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateContrast=function(e,t){var r=(i(e[0],e[1],e[2])+.05)/(i(t[0],t[1],t[2])+.05);return r<1&&(r=1/r),r},t.calculateLuminance=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VISUALIZATION_COLORS=t.DEFAULT_VISUALIZATION_COLOR=void 0;var i=(0,r(280).euiPaletteColorBlind)();t.VISUALIZATION_COLORS=i;var n=i[1];t.DEFAULT_VISUALIZATION_COLOR=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSteppedGradient=void 0;var i,n=(i=r(128))&&i.__esModule?i:{default:i};function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}t.getSteppedGradient=function(e,t){var r=e[e.length-1].stop-e[0].stop,i=e[0].stop,a=o(e.map((function(e){return(e.stop-i)/r}))),l=o(e.map((function(e){return e.color})));return n.default.scale(l).domain(a).colors(t)}},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.animation_speed=t.animation_ease=t.animation=void 0;var l={extraFast:"90ms",fast:"150ms",normal:"250ms",slow:"350ms",extraSlow:"500ms"};t.animation_speed=l;var c={bounce:"cubic-bezier(.34, 1.61, .7, 1)",resistance:"cubic-bezier(.694, .0482, .335, 1)"};t.animation_ease=c;var u=o(o({},l),c);t.animation=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breakpoint=void 0,t.breakpoint={xl:1200,l:992,m:768,s:575,xs:0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.size=t.base=void 0;var i=r(117),n=r(97);t.base=16;var o={xxs:(0,n.computed)((0,i.sizeToPixel)(.125)),xs:(0,n.computed)((0,i.sizeToPixel)(.25)),s:(0,n.computed)((0,i.sizeToPixel)(.5)),m:(0,n.computed)((0,i.sizeToPixel)(.75)),base:(0,n.computed)((0,i.sizeToPixel)()),l:(0,n.computed)((0,i.sizeToPixel)(1.5)),xl:(0,n.computed)((0,i.sizeToPixel)(2)),xxl:(0,n.computed)((0,i.sizeToPixel)(2.5)),xxxl:(0,n.computed)((0,i.sizeToPixel)(3)),xxxxl:(0,n.computed)((0,i.sizeToPixel)(4))};t.size=o},function(e,t,r){"use strict";var i;function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.logicalShorthandCSS=t.logicalBorderRadiusCSS=t.LOGICAL_SHORTHANDS=void 0;var o=((i=r(284))&&i.__esModule?i:{default:i}).default._shorthands;t.LOGICAL_SHORTHANDS=o,t.logicalShorthandCSS=function(e,t){if(!o.includes(e))throw new Error("".concat(e," is not a shorthand property that needs logical CSS"));if("border-radius"===e)return a(String(t));var r,i,n=String(t).split(/\s+/);switch(n.length){case 1:return"".concat(e,": ").concat(t,";");case 2:r=n[0],i=n[1];break;case 3:r="".concat(n[0]," ").concat(n[2]),i=n[1];break;default:r="".concat(n[0]," ").concat(n[2]),i="".concat(n[3]," ").concat(n[1])}if(e.includes("border-")){var l=e.split("-")[1];return"\n    border-block-".concat(l,": ").concat(r,";\n    border-inline-").concat(l,": ").concat(i,";\n    ")}return"\n    ".concat(e,"-block: ").concat(r,";\n    ").concat(e,"-inline: ").concat(i,";\n    ")};var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={"border-start-start-radius":"","border-start-end-radius":"","border-end-end-radius":"","border-end-start-radius":""},i=[];switch(e.includes("/")?(i=["","","",""],e.split("/").forEach((function(e){var t=e.trim().split(/\s+/);i.forEach((function(e,r){var n=i[r]?"".concat(i[r]," "):i[r];switch(t.length){case 1:n+=t[0];break;case 2:n+=r%2?t[1]:t[0];break;case 3:n+=3===r?t[1]:t[r];break;default:n+=t[r]}i[r]=n}))}))):i=e.split(/\s+/),i.length){case 1:return"border-radius: ".concat(e,";");case 2:r["border-start-start-radius"]=i[0],r["border-start-end-radius"]=i[1],r["border-end-end-radius"]=i[0],r["border-end-start-radius"]=i[1];break;case 3:r["border-start-start-radius"]=i[0],r["border-start-end-radius"]=i[1],r["border-end-end-radius"]=i[2],r["border-end-start-radius"]=i[1];break;default:r["border-start-start-radius"]=i[0],r["border-start-end-radius"]=i[1],r["border-end-end-radius"]=i[2],r["border-end-start-radius"]=i[3]}var o=[];return Object.entries(r).forEach((function(e){var r,i,a=(i=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(r,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1];c&&(t&&"0"!==c&&"0px"!==c||!t)&&o.push("".concat(l,": ").concat(c,";"))})),o.join("\n")};t.logicalBorderRadiusCSS=a},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,i,n){var a=new RegExp(e,i);return t.set(a,n||t.get(e)),o(a,r.prototype)}function a(e,r){var i=t.get(r);return Object.keys(i).reduce((function(t,r){var n=i[r];if("number"==typeof n)t[r]=e[n];else{for(var o=0;void 0===e[n[o]]&&o+1<n.length;)o++;t[r]=e[n[o]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=a(r,this);var i=r.indices;i&&(i.groups=a(i,this))}return r},r.prototype[Symbol.replace]=function(r,n){if("string"==typeof n){var o=t.get(this);return e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)>/g,(function(e,t){var r=o[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof n){var l=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=i(e[e.length-1])&&(e=[].slice.call(e)).push(a(e,l)),n.apply(this,e)}))}return e[Symbol.replace].call(this,r,n)},n.apply(this,arguments)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.mathWithUnits=void 0,t.mathWithUnits=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Array.isArray(e)||(e=[e]);var i=[],o="";return e.forEach((function(e){if("string"==typeof e){var t,a,l=n(/(\x2D?[\d.]+)(%|[a-zA-Z]*)/,{value:1,unit:2}).exec(e),c=Number(null==l||null===(t=l.groups)||void 0===t?void 0:t.value);if(isNaN(c))throw new Error("No valid numeric value found");if(i.push(c),!r&&null!=l&&null!==(a=l.groups)&&void 0!==a&&a.unit)if(o){if(o!==l.groups.unit)throw new Error("Multiple units found. Use `calc()` to mix and math multiple unit types (e.g. `%` & `px`) instead")}else o=l.groups.unit}else{if("number"!=typeof e)throw new Error("Invalid value type - pass a string or number");i.push(e)}})),"".concat(t.apply(void 0,i)).concat(r||o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.border=void 0;var i=r(117),n=r(97);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var l={color:(0,n.computed)((function(e){return o(e,1)[0]}),["colors.lightShade"]),width:{thin:"1px",thick:"2px"},radius:{medium:(0,n.computed)((0,i.sizeToPixel)(.375)),small:(0,n.computed)((0,i.sizeToPixel)(.25))},thin:(0,n.computed)((function(e){var t=o(e,2),r=t[0],i=t[1];return"".concat(r.thin," solid ").concat(i)}),["border.width","border.color"]),thick:(0,n.computed)((function(e){var t=o(e,2),r=t[0],i=t[1];return"".concat(r.thick," solid ").concat(i)}),["border.width","border.color"]),editable:(0,n.computed)((function(e){var t=o(e,2),r=t[0],i=t[1];return"".concat(r.thick," dotted ").concat(i)}),["border.width","border.color"])};t.border=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0,t.levels={toast:9e3,modal:8e3,mask:6e3,navigation:6e3,menu:2e3,header:1e3,flyout:1e3,maskBelowHeader:1e3,content:0}},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.fontWeight=t.fontScale=t.fontBase=t.font=void 0;var n=r(97);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var u={xxxs:.5625,xxs:.6875,xs:.75,s:.875,m:1,l:1.375,xl:1.6875,xxl:2.125};t.fontScale=u;var h={family:"'Inter', BlinkMacSystemFont, Helvetica, Arial, sans-serif",familyCode:"'Roboto Mono', Menlo, Courier, monospace",familySerif:"Georgia, Times, Times New Roman, serif",featureSettings:"'calt' 1, 'kern' 1, 'liga' 1",defaultUnits:"rem",baseline:(0,n.computed)((function(e){return(t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]/4;var t,r}),["base"]),lineHeightMultiplier:1.5};t.fontBase=h;var p={light:300,regular:400,medium:500,semiBold:600,bold:700};t.fontWeight=p;var d=a(a({},h),{},{scale:u,weight:p,body:{scale:"s",weight:"regular"},title:{weight:"bold"}});t.font=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focus=void 0;var i=r(97),n=r(213),o=r(285),a={color:"currentColor",width:(0,i.computed)((0,o.sizeToPixel)(.125)),transparency:{LIGHT:.1,DARK:.2},backgroundColor:(0,i.computed)((function(e){var t=e.colors,r=e.focus;return(0,n.transparentize)(t.primary,r.transparency)}))};t.focus=a},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EuiThemeProvider=void 0;var n,o,a=r(3),l=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(4)),c=(n=r(490))&&n.__esModule?n:{default:n},u=r(288),h=r(493),p=r(212),d=r(495),f=r(97),m=["cloneElement","className"];function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},y.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}t.EuiThemeProvider=function(e){var t=e.theme,r=e.colorMode,i=e.modify,n=e.children,g=e.wrapperProps,v=(0,l.useContext)(p.EuiNestedThemeContext),b=v.isGlobalTheme,w=v.bodyColor,S=v.globalCSSVariables,C=v.setGlobalCSSVariables,M=(0,l.useContext)(p.EuiSystemContext),E=(0,l.useContext)(p.EuiModificationsContext),T=(0,l.useContext)(p.EuiColorModeContext),A=(0,l.useContext)(p.EuiThemeContext),P=x((0,l.useState)(t||M),2),O=P[0],I=P[1],k=(0,l.useRef)(O.key),F=x((0,l.useState)((0,f.mergeDeep)(E,i)),2),D=F[0],j=F[1],z=(0,l.useRef)(D),N=x((0,l.useState)((0,f.getColorMode)(r,T)),2),B=N[0],V=N[1],U=(0,l.useRef)(B),H=(0,l.useRef)(k.current===M.key&&B===T&&(0,c.default)(E,D)),G=x((0,l.useState)(H.current&&Object.keys(A).length?_({},A):(0,f.getComputed)(O,(0,f.buildTheme)(D,"_".concat(O.key)),B)),2),q=G[0],Z=G[1];(0,l.useEffect)((function(){var e=t||M;k.current!==e.key&&(I(e),k.current=e.key,H.current=!1)}),[t,M]),(0,l.useEffect)((function(){var e=(0,f.mergeDeep)(E,i);(0,c.default)(z.current,e)||(j(e),z.current=e,H.current=!1)}),[i,E]),(0,l.useEffect)((function(){var e=(0,f.getColorMode)(r,T);(0,c.default)(e,U.current)||(V(e),U.current=e,H.current=!1)}),[r,T]),(0,l.useEffect)((function(){H.current||Z((0,f.getComputed)(O,(0,f.buildTheme)(D,"_".concat(O.key)),B))}),[B,O,D]);var $=x((0,l.useState)(),2),W=$[0],X=$[1],Y=(0,l.useCallback)((function(e){return X((function(t){return _(_({},t),e)}))}),[]),K=(0,l.useMemo)((function(){return{isGlobalTheme:!1,bodyColor:b?q.colors.text:w,hasDifferentColorFromGlobalTheme:!b&&w!==q.colors.text,colorClassName:(0,h.css)(o||(e=["\n        label: euiColorMode-",";\n        color: ",";\n      "],t||(t=e.slice(0)),o=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))),r||B,q.colors.text),setGlobalCSSVariables:b?Y:C,globalCSSVariables:b?W:S,setNearestThemeCSSVariables:Y,themeCSSVariables:W};var e,t}),[q,b,w,r,B,C,S,Y,W]),J=(0,l.useMemo)((function(){if(b)return n;var e=g||{},t=e.cloneElement,r=e.className,i=_(_({},function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,m)),{},{className:(0,h.cx)(r,K.colorClassName)});return W&&(i.css=_({label:"euiCSSVariables"},W)),t?(0,u.cloneElementWithCss)(n,_(_({},i),{},{className:(0,h.cx)(n.props.className,i.className)})):(0,a.jsx)("span",y({},i,{className:(0,h.cx)("euiThemeProvider",i.className)}),n)}),[b,W,K,g,n]);return(0,a.jsx)(l.default.Fragment,null,b&&W&&(0,a.jsx)(a.Global,{styles:(0,a.css)({":root":W},";label:EuiThemeProvider;")}),(0,a.jsx)(p.EuiColorModeContext.Provider,{value:B},(0,a.jsx)(p.EuiSystemContext.Provider,{value:O},(0,a.jsx)(p.EuiModificationsContext.Provider,{value:D},(0,a.jsx)(p.EuiThemeContext.Provider,{value:q},(0,a.jsx)(p.EuiNestedThemeContext.Provider,{value:K},(0,a.jsx)(d.EuiEmotionThemeProvider,null,J)))))))}},function(e,t,r){e.exports=r(22)(1102)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneElementWithCss=void 0;var i=r(3);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.cloneElementWithCss=function(e,t){var r=e.props.__EMOTION_TYPE_PLEASE_DO_NOT_USE__||e.type,n=a(a({key:e.key,ref:e.ref},e.props),t);return(t.css||e.props.css)&&(n.css=[e.props.css,t.css]),(0,i.jsx)(r,n)}},function(e,t,r){!function(e){"use strict";var t="-ms-",r="-moz-",i="-webkit-",n="comm",o="rule",a="decl",l="@import",c="@keyframes",u="@layer",h=Math.abs,p=String.fromCharCode,d=Object.assign;function f(e,t){return 45^_(e,0)?(((t<<2^_(e,0))<<2^_(e,1))<<2^_(e,2))<<2^_(e,3):0}function m(e){return e.trim()}function g(e,t){return(e=t.exec(e))?e[0]:e}function y(e,t,r){return e.replace(t,r)}function v(e,t){return e.indexOf(t)}function _(e,t){return 0|e.charCodeAt(t)}function b(e,t,r){return e.slice(t,r)}function x(e){return e.length}function w(e){return e.length}function S(e,t){return t.push(e),e}function C(e,t){return e.map(t).join("")}function M(t,r,i,n,o,a,l){return{value:t,root:r,parent:i,type:n,props:o,children:a,line:e.line,column:e.column,length:l,return:""}}function E(e,t){return d(M("",null,null,"",null,null,0),e,{length:-e.length},t)}function T(){return e.character}function A(){return e.character=e.position>0?_(e.characters,--e.position):0,e.column--,10===e.character&&(e.column=1,e.line--),e.character}function P(){return e.character=e.position<e.length?_(e.characters,e.position++):0,e.column++,10===e.character&&(e.column=1,e.line++),e.character}function O(){return _(e.characters,e.position)}function I(){return e.position}function k(t,r){return b(e.characters,t,r)}function F(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D(t){return e.line=e.column=1,e.length=x(e.characters=t),e.position=0,[]}function j(t){return e.characters="",t}function z(t){return m(k(e.position-1,H(91===t?t+2:40===t?t+1:t)))}function N(e){return j(V(D(e)))}function B(t){for(;(e.character=O())&&e.character<33;)P();return F(t)>2||F(e.character)>3?"":" "}function V(t){for(;P();)switch(F(e.character)){case 0:S(q(e.position-1),t);break;case 2:S(z(e.character),t);break;default:S(p(e.character),t)}return t}function U(t,r){for(;--r&&P()&&!(e.character<48||e.character>102||e.character>57&&e.character<65||e.character>70&&e.character<97););return k(t,I()+(r<6&&32==O()&&32==P()))}function H(t){for(;P();)switch(e.character){case t:return e.position;case 34:case 39:34!==t&&39!==t&&H(e.character);break;case 40:41===t&&H(t);break;case 92:P()}return e.position}function G(t,r){for(;P()&&t+e.character!==57&&(t+e.character!==84||47!==O()););return"/*"+k(r,e.position-1)+"*"+p(47===t?t:P())}function q(t){for(;!F(O());)P();return k(t,e.position)}function Z(e,t,r,i,n,o,a,l,c){for(var u=0,h=0,d=a,f=0,m=0,g=0,b=1,w=1,C=1,M=0,E="",T=n,k=o,F=i,D=E;w;)switch(g=M,M=P()){case 40:if(108!=g&&58==_(D,d-1)){-1!=v(D+=y(z(M),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:D+=z(M);break;case 9:case 10:case 13:case 32:D+=B(g);break;case 92:D+=U(I()-1,7);continue;case 47:switch(O()){case 42:case 47:S(W(G(P(),I()),t,r),c);break;default:D+="/"}break;case 123*b:l[u++]=x(D)*C;case 125*b:case 59:case 0:switch(M){case 0:case 125:w=0;case 59+h:-1==C&&(D=y(D,/\f/g,"")),m>0&&x(D)-d&&S(m>32?X(D+";",i,r,d-1):X(y(D," ","")+";",i,r,d-2),c);break;case 59:D+=";";default:if(S(F=$(D,t,r,u,h,n,l,E,T=[],k=[],d),o),123===M)if(0===h)Z(D,t,F,F,T,o,d,l,k);else switch(99===f&&110===_(D,3)?100:f){case 100:case 108:case 109:case 115:Z(e,F,F,i&&S($(e,F,F,0,0,n,l,E,n,T=[],d),k),n,k,d,l,i?T:k);break;default:Z(D,F,F,F,[""],k,0,l,k)}}u=h=m=0,b=C=1,E=D="",d=a;break;case 58:d=1+x(D),m=g;default:if(b<1)if(123==M)--b;else if(125==M&&0==b++&&125==A())continue;switch(D+=p(M),M*b){case 38:C=h>0?1:(D+="\f",-1);break;case 44:l[u++]=(x(D)-1)*C,C=1;break;case 64:45===O()&&(D+=z(P())),f=O(),h=d=x(E=D+=q(I())),M++;break;case 45:45===g&&2==x(D)&&(b=0)}}return o}function $(e,t,r,i,n,a,l,c,u,p,d){for(var f=n-1,g=0===n?a:[""],v=w(g),_=0,x=0,S=0;_<i;++_)for(var C=0,E=b(e,f+1,f=h(x=l[_])),T=e;C<v;++C)(T=m(x>0?g[C]+" "+E:y(E,/&\f/g,g[C])))&&(u[S++]=T);return M(e,t,r,0===n?o:c,u,p,d)}function W(e,t,r){return M(e,t,r,n,p(T()),b(e,2,-2),0)}function X(e,t,r,i){return M(e,t,r,a,b(e,0,i),b(e,i+1,-1),i)}function Y(e,n,o){switch(f(e,n)){case 5103:return i+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return i+e+e;case 4789:return r+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return i+e+r+e+t+e+e;case 5936:switch(_(e,n+11)){case 114:return i+e+t+y(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return i+e+t+y(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return i+e+t+y(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return i+e+t+e+e;case 6165:return i+e+t+"flex-"+e+e;case 5187:return i+e+y(e,/(\w+).+(:[^]+)/,i+"box-$1$2"+t+"flex-$1$2")+e;case 5443:return i+e+t+"flex-item-"+y(e,/flex-|-self/g,"")+(g(e,/flex-|baseline/)?"":t+"grid-row-"+y(e,/flex-|-self/g,""))+e;case 4675:return i+e+t+"flex-line-pack"+y(e,/align-content|flex-|-self/g,"")+e;case 5548:return i+e+t+y(e,"shrink","negative")+e;case 5292:return i+e+t+y(e,"basis","preferred-size")+e;case 6060:return i+"box-"+y(e,"-grow","")+i+e+t+y(e,"grow","positive")+e;case 4554:return i+y(e,/([^-])(transform)/g,"$1"+i+"$2")+e;case 6187:return y(y(y(e,/(zoom-|grab)/,i+"$1"),/(image-set)/,i+"$1"),e,"")+e;case 5495:case 3959:return y(e,/(image-set\([^]*)/,i+"$1$`$1");case 4968:return y(y(e,/(.+:)(flex-)?(.*)/,i+"box-pack:$3"+t+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+i+e+e;case 4200:if(!g(e,/flex-|baseline/))return t+"grid-column-align"+b(e,n)+e;break;case 2592:case 3360:return t+y(e,"template-","")+e;case 4384:case 3616:return o&&o.some((function(e,t){return n=t,g(e.props,/grid-\w+-end/)}))?~v(e+(o=o[n].value),"span")?e:t+y(e,"-start","")+e+t+"grid-row-span:"+(~v(o,"span")?g(o,/\d+/):+g(o,/\d+/)-+g(e,/\d+/))+";":t+y(e,"-start","")+e;case 4896:case 4128:return o&&o.some((function(e){return g(e.props,/grid-\w+-start/)}))?e:t+y(y(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return y(e,/(.+)-inline(.+)/,i+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-n>6)switch(_(e,n+1)){case 109:if(45!==_(e,n+4))break;case 102:return y(e,/(.+:)(.+)-([^]+)/,"$1"+i+"$2-$3$1"+r+(108==_(e,n+3)?"$3":"$2-$3"))+e;case 115:return~v(e,"stretch")?Y(y(e,"stretch","fill-available"),n,o)+e:e}break;case 5152:case 5920:return y(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(r,i,n,o,a,l,c){return t+i+":"+n+c+(o?t+i+"-span:"+(a?l:+l-+n)+c:"")+e}));case 4949:if(121===_(e,n+6))return y(e,":",":"+i)+e;break;case 6444:switch(_(e,45===_(e,14)?18:11)){case 120:return y(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+i+(45===_(e,14)?"inline-":"")+"box$3$1"+i+"$2$3$1"+t+"$2box$3")+e;case 100:return y(e,":",":"+t)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return y(e,"scroll-","scroll-snap-")+e}return e}function K(e,t){for(var r="",i=w(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}e.line=1,e.column=1,e.length=0,e.position=0,e.character=0,e.characters="",e.CHARSET="@charset",e.COMMENT=n,e.COUNTER_STYLE="@counter-style",e.DECLARATION=a,e.DOCUMENT="@document",e.FONT_FACE="@font-face",e.FONT_FEATURE_VALUES="@font-feature-values",e.IMPORT=l,e.KEYFRAMES=c,e.LAYER=u,e.MEDIA="@media",e.MOZ=r,e.MS=t,e.NAMESPACE="@namespace",e.PAGE="@page",e.RULESET=o,e.SUPPORTS="@supports",e.VIEWPORT="@viewport",e.WEBKIT=i,e.abs=h,e.alloc=D,e.append=S,e.assign=d,e.caret=I,e.char=T,e.charat=_,e.combine=C,e.comment=W,e.commenter=G,e.compile=function(e){return j(Z("",null,null,null,[""],e=D(e),0,[0],e))},e.copy=E,e.dealloc=j,e.declaration=X,e.delimit=z,e.delimiter=H,e.escaping=U,e.from=p,e.hash=f,e.identifier=q,e.indexof=v,e.match=g,e.middleware=function(e){var t=w(e);return function(r,i,n,o){for(var a="",l=0;l<t;l++)a+=e[l](r,i,n,o)||"";return a}},e.namespace=function(e){e.type===o&&(e.props=e.props.map((function(t){return C(N(t),(function(t,r,i){switch(_(t,0)){case 12:return b(t,1,x(t));case 0:case 40:case 43:case 62:case 126:return t;case 58:"global"===i[++r]&&(i[r]="",i[++r]="\f"+b(i[r],r=1,-1));case 32:return 1===r?"":t;default:switch(r){case 0:return e=t,w(i)>1?"":t;case r=w(i)-1:case 2:return 2===r?t+e+e:t+e;default:return t}}}))})))},e.next=P,e.node=M,e.parse=Z,e.peek=O,e.prefix=Y,e.prefixer=function(e,n,l,u){if(e.length>-1&&!e.return)switch(e.type){case a:return void(e.return=Y(e.value,e.length,l));case c:return K([E(e,{value:y(e.value,"@","@"+i)})],u);case o:if(e.length)return C(e.props,(function(n){switch(g(n,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return K([E(e,{props:[y(n,/:(read-\w+)/,":"+r+"$1")]})],u);case"::placeholder":return K([E(e,{props:[y(n,/:(plac\w+)/,":"+i+"input-$1")]}),E(e,{props:[y(n,/:(plac\w+)/,":"+r+"$1")]}),E(e,{props:[y(n,/:(plac\w+)/,t+"input-$1")]})],u)}return""}))}},e.prev=A,e.replace=y,e.ruleset=$,e.rulesheet=function(e){return function(t){t.root||(t=t.return)&&e(t)}},e.serialize=K,e.sizeof=w,e.slice=k,e.stringify=function(e,t,r,i){switch(e.type){case u:if(e.children.length)break;case l:case a:return e.return=e.return||e.value;case n:return"";case c:return e.return=e.value+"{"+K(e.children,i)+"}";case o:e.value=e.props.join(",")}return x(r=K(e.children,i))?e.return=e.value+"{"+r+"}":""},e.strlen=x,e.substr=b,e.token=F,e.tokenize=N,e.tokenizer=V,e.trim=m,e.whitespace=B,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cx=t.css=t.cache=void 0;var i,n=(i=r(494))&&i.__esModule?i:{default:i},o=r(289),a=(0,n.default)({key:"css",stylisPlugins:[o.euiStylisPrefixer],speedy:!1}),l=a.css,c=a.cx,u=a.cache;t.cache=u,t.cx=c,t.css=l},function(e,t,r){"use strict";e.exports=r(156)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EuiEmotionThemeProvider=void 0,(i=r(4))&&i.__esModule;var i,n=r(3),o=r(165);t.EuiEmotionThemeProvider=function(e){var t=e.children,r=(0,o.useEuiTheme)();return(0,n.jsx)(n.ThemeProvider,{theme:r},t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsWithinBreakpoints=void 0,t.useIsWithinMaxBreakpoint=function(e){var t=(0,i.useEuiTheme)().euiTheme.breakpoint,r=(0,n.useCurrentEuiBreakpoint)();return null!=r&&null!=t[e]&&t[r]<=t[e]},t.useIsWithinMinBreakpoint=function(e){var t=(0,i.useEuiTheme)().euiTheme.breakpoint,r=(0,n.useCurrentEuiBreakpoint)();return null!=r&&null!=t[e]&&t[r]>=t[e]};var i=r(134),n=r(291);t.useIsWithinBreakpoints=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=(0,n.useCurrentEuiBreakpoint)();return!(!r||!t)&&e.includes(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"CanvasTextUtils",{enumerable:!0,get:function(){return i.CanvasTextUtils}});var i=r(498)},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasTextUtils=void 0;var l=function(){function e(t){var r=this,i=t.font,n=t.container;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"context",void 0),o(this,"currentText",""),o(this,"computeFontFromElement",(function(e){var t=window.getComputedStyle(e);return["font-style","font-variant","font-weight","font-size","font-family"].map((function(e){return t.getPropertyValue(e)})).join(" ").trim()})),o(this,"setTextToCheck",(function(e){r.currentText=e})),this.context=document.createElement("canvas").getContext("2d"),i?this.context.font=i:n&&(this.context.font=this.computeFontFromElement(n))}var t,r;return t=e,(r=[{key:"textWidth",get:function(){return this.context.measureText(this.currentText).width}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.CanvasTextUtils=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useColorPickerState",{enumerable:!0,get:function(){return i.useColorPickerState}}),Object.defineProperty(t,"useColorStopsState",{enumerable:!0,get:function(){return i.useColorStopsState}});var i=r(500)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useColorStopsState=t.useColorPickerState=void 0;var i=r(4);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var a=function(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))};t.useColorStopsState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[{stop:20,color:"#54B399"},{stop:50,color:"#D36086"},{stop:65,color:"#9170B8"}],r=n((0,i.useState)(a()),2),o=r[0],l=r[1],c=n((0,i.useState)(t),2),u=c[0],h=c[1];return[u,function(t){h(t),e&&l(a())},o]},t.useColorPickerState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=n((0,i.useState)(e),2),r=t[0],o=t[1],a=n((0,i.useState)(!0),2),l=a[0],c=a[1];return[r,function(e,t){var r=t.isValid;o(e),c(r)},(0,i.useMemo)((function(){return l?null:["Provide a valid color value"]}),[l])]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(502);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=void 0;var i={};t.warnOnce=function(e,t){!i[e]&&console&&console.warn&&(i[e]=!0,console.warn(t))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyToClipboard=function(e){var t=!0,r=document.createRange(),i=window.getSelection(),n=function(e){var t=document.createElement("span");return t.textContent=e,t.style.all="unset",t.style.position="fixed",t.style.top="0",t.style.clip="rect(0, 0, 0, 0)",t.style.whiteSpace="pre",t.style.webkitUserSelect="text",t.style.MozUserSelect="text",t.style.msUserSelect="text",t.style.userSelect="text",t}(e);return document.body.appendChild(n),r.selectNode(n),i&&(i.removeAllRanges(),i.addRange(r)),document.execCommand("copy")||(t=!1,console.warn("Unable to copy to clipboard.")),i&&("function"==typeof i.removeRange?i.removeRange(r):i.removeAllRanges()),document.body.removeChild(n),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findElementBySelectorOrRef=void 0,t.findElementBySelectorOrRef=function(e){var t=e instanceof HTMLElement?e:null;return"string"==typeof e?t=document.querySelector(e):"function"==typeof e&&(t=e()),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"dateFormatAliases",{enumerable:!0,get:function(){return o.dateFormatAliases}}),Object.defineProperty(t,"formatAuto",{enumerable:!0,get:function(){return i.formatAuto}}),Object.defineProperty(t,"formatBoolean",{enumerable:!0,get:function(){return n.formatBoolean}}),Object.defineProperty(t,"formatDate",{enumerable:!0,get:function(){return o.formatDate}}),Object.defineProperty(t,"formatNumber",{enumerable:!0,get:function(){return a.formatNumber}}),Object.defineProperty(t,"formatText",{enumerable:!0,get:function(){return l.formatText}});var i=r(506),n=r(292),o=r(293),a=r(294),l=r(295)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatAuto=void 0;var i=r(118),n=r(292),o=r(293),a=r(294),l=r(295);t.formatAuto=function e(t){return(0,i.isNil)(t)||(0,i.isNaN)(t)?"":(0,i.isString)(t)?(0,l.formatText)(t):(0,i.isDate)(t)?(0,o.formatDate)(t):(0,i.isBoolean)(t)?(0,n.formatBoolean)(t):(0,i.isNumber)(t)?(0,a.formatNumber)(t):(0,i.isArray)(t)?Array.isArray(t)?t.map((function(t){return e(t)})).join(", "):e(t):JSON.stringify(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.never=t.isUndefined=t.isNull=t.isNil=t.isMoment=t.isDateLike=t.isDate=t.always=void 0;var i,n=(i=r(55))&&i.__esModule?i:{default:i};t.always=function(e){return!0},t.never=function(e){return!1};var o=function(e){return void 0===e};t.isUndefined=o;var a=function(e){return null===e};t.isNull=a,t.isNil=function(e){return o(e)||a(e)};var l=function(e){return n.default.isMoment(e)};t.isMoment=l;var c=function(e){return n.default.isDate(e)};t.isDate=c,t.isDateLike=function(e){return l(e)||c(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isString=t.isObject=t.isNumber=t.isNaN=t.isFunction=t.isBoolean=t.isArray=void 0;var i=h(r(509)),n=h(r(510)),o=h(r(511)),a=h(r(512)),l=h(r(513)),c=h(r(514)),u=h(r(515));function h(e){return e&&e.__esModule?e:{default:e}}t.isFunction=function(e){return(0,i.default)(e)},t.isArray=function(e){return(0,n.default)(e)},t.isString=function(e){return(0,o.default)(e)},t.isBoolean=function(e){return(0,a.default)(e)},t.isNumber=function(e){return(0,l.default)(e)},t.isNaN=function(e){return(0,c.default)(e)},t.isObject=function(e){return(0,u.default)(e)}},function(e,t,r){e.exports=r(22)(940)},function(e,t,r){e.exports=r(22)(288)},function(e,t,r){e.exports=r(22)(1886)},function(e,t,r){e.exports=r(22)(1887)},function(e,t,r){e.exports=r(22)(1281)},function(e,t,r){e.exports=r(22)(1888)},function(e,t,r){e.exports=r(22)(363)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(517);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(518);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(519);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(520);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=r(521);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r(296);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useDependentState=function(e,t){var r,a=(2,function(e){if(Array.isArray(e))return e}(r=(0,i.useState)(e))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{for(o=(r=r.call(e)).next,0;!(c=(i=o.call(r)).done)&&(l.push(i.value),2!==l.length);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(r)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,2):void 0}}(r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],c=a[1];return(0,n.useUpdateEffect)((function(){c(e)}),t),[l,c]};var i=r(4),n=r(296);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCombinedRefs=void 0;var i=r(4);t.useCombinedRefs=function(e){return(0,i.useCallback)((function(t){return e.forEach((function(e){e&&("function"==typeof e?e(t):e.current=t)}))}),[e])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useForceRender=void 0;var i=r(4);function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}t.useForceRender=function(){var e,t,r=(e=(0,i.useState)(0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];return(0,i.useCallback)((function(){r((function(e){return e+1}))}),[])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLatest=function(e){var t=(0,i.useRef)(e);return t.current=e,t};var i=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMouseEvent=a,t.useMouseMove=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,i.useEffect)((function(){return l}),[]);var r=function(r,i){if(r&&t){var n=a(r)?r.pageX:r.touches[0].pageX,o=a(r)?r.pageY:r.touches[0].pageY;e({x:n,y:o},i)}},o=(0,n.throttle)((function(t){e({x:t.pageX,y:t.pageY},!1)})),l=function e(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e)};return[function(e){r(e,!0),document.addEventListener("mousemove",o),document.addEventListener("mouseup",l)},r]};var i=r(4),n=r(214);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){return"object"===o(e)&&"pageX"in e&&"pageY"in e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(523);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEvenlyDivisibleBy=function(e,t){var r=e%t;return Math.min(r,Math.abs(t-r))<i},t.isWithinRange=void 0,t.isWithinRange=function(e,t,r){if(""===e||""===t||""===r)return!1;var i=Number(r);return Number(e)<=i&&i<=Number(t)};var i=1e-6},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Pager",{enumerable:!0,get:function(){return i.Pager}});var i=r(525)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pager=void 0;var i=r(118);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var u=a((function e(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"currentPageIndex",void 0),l(this,"firstItemIndex",void 0),l(this,"itemsPerPage",void 0),l(this,"lastItemIndex",void 0),l(this,"totalItems",void 0),l(this,"totalPages",void 0),l(this,"setTotalItems",(function(e){n.totalItems=e,n.update()})),l(this,"setItemsPerPage",(function(e){n.itemsPerPage=e,n.update()})),l(this,"isPageable",(function(){return-1!==n.firstItemIndex})),l(this,"getTotalPages",(function(){return n.totalPages})),l(this,"getCurrentPageIndex",(function(){return n.currentPageIndex})),l(this,"getFirstItemIndex",(function(){return n.firstItemIndex})),l(this,"getLastItemIndex",(function(){return n.lastItemIndex})),l(this,"hasNextPage",(function(){return n.currentPageIndex<n.totalPages-1})),l(this,"hasPreviousPage",(function(){return n.currentPageIndex>0})),l(this,"goToNextPage",(function(){n.goToPageIndex(n.currentPageIndex+1)})),l(this,"goToPreviousPage",(function(){n.goToPageIndex(n.currentPageIndex-1)})),l(this,"goToPageIndex",(function(e){n.currentPageIndex=e,n.update()})),l(this,"update",(function(){if(n.totalItems<=0)return n.totalPages=0,n.currentPageIndex=0,n.firstItemIndex=-1,void(n.lastItemIndex=-1);n.totalPages=Math.ceil(n.totalItems/n.itemsPerPage),n.currentPageIndex=Math.min(Math.max(0,n.currentPageIndex),n.totalPages-1),n.firstItemIndex=n.currentPageIndex*n.itemsPerPage,n.lastItemIndex=Math.min(n.firstItemIndex+n.itemsPerPage,n.totalItems)-1})),!(0,i.isNumber)(t)||isNaN(t))throw new Error("Please provide a number of totalItems");if(!(0,i.isNumber)(r)||isNaN(r))throw new Error("Please provide a number of itemsPerPage");if(!(0,i.isNumber)(o)||isNaN(o))throw new Error("Please provide a number of initialPageIndex");this.currentPageIndex=o,this.firstItemIndex=-1,this.itemsPerPage=r,this.lastItemIndex=-1,this.totalItems=t,this.totalPages=0,this.update()}));t.Pager=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"calculatePopoverPosition",{enumerable:!0,get:function(){return i.calculatePopoverPosition}}),Object.defineProperty(t,"findPopoverPosition",{enumerable:!0,get:function(){return n.findPopoverPosition}}),Object.defineProperty(t,"getElementZIndex",{enumerable:!0,get:function(){return n.getElementZIndex}});var i=r(527),n=r(528)},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePopoverPosition=function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:["top","right","bottom","left"];if("number"!=typeof i)throw new Error("calculatePopoverPosition received a buffer argument of ".concat(i,"' but expected a number"));var u=window.innerWidth,h=window.innerHeight,p=t.width,d=t.height,f={},m={};c.forEach((function(t){var r=l[t](e,p,d,i);f[t]=r,m[t]=a(r,u,h)}));var g=c.reduce((function(e,t){return m[t]>m[e]?t:e}),r);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({position:g},f[g])};var a=function(e,t,r){var i=e.left,n=e.top,o=e.width,a=e.height;return(Math.min(i+o,t)-Math.max(i,0))*(Math.min(n+a,r)-Math.max(n,0))},l={top:function(e,t,r,i){var n=t-e.width;return{left:e.left-.5*n,top:e.top-r-i,width:t,height:r}},right:function(e,t,r,i){var n=e.right+i,o=r-e.height;return{left:n,top:e.top-.5*o,width:t,height:r}},bottom:function(e,t,r,i){var n=t-e.width;return{left:e.left-.5*n,top:e.bottom+i,width:t,height:r}},left:function(e,t,r,i){var n=e.left-t-i,o=r-e.height;return{left:n,top:e.top-.5*o,width:t,height:r}}}},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,l=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.POSITIONS=void 0,t.findPopoverPosition=function(e){var t=e.anchor,r=e.popover,i=e.align,n=e.position,o=e.forcePosition,a=e.buffer,l=void 0===a?16:a,c=e.offset,p=void 0===c?0:c,m=e.allowCrossAxis,g=void 0===m||m,y=e.container,v=e.arrowConfig,_=e.returnBoundingBox,b=f(t),x=f(r),w=document.documentElement.clientWidth||window.innerWidth,S=document.documentElement.clientHeight||window.innerHeight,C={top:0,right:w,bottom:S,left:0,height:S,width:w},M=y?f(y):C,E=[n],T=[i];!0!==o?(E.push(u[n]),T.push(i),g&&(E.push(h[n],u[h[n]]),T.push(void 0,void 0))):(n===i||void 0!==i&&n===u[i])&&(T[0]=void 0);for(var A=void 0,P=null,O=0;O<E.length;O++){var I=E[O],k=d({position:I,align:T[O],anchorBoundingBox:b,popoverBoundingBox:x,windowBoundingBox:C,containerBoundingBox:M,offset:p,buffer:l,arrowConfig:v});if((void 0===A||k.fit>A)&&(A=k.fit,P={fit:k.fit,position:I,top:k.top+window.pageYOffset,left:k.left+window.pageXOffset,arrow:k.arrow},1===A))break}if(null==P)throw new Error("Failed to calculate bestPosition");return _&&(P.anchorBoundingBox=b),P},t.getAvailableSpace=m,t.getElementBoundingBox=f,t.getElementZIndex=function(e,t){for(var r=[];r.push(e),null!=(e=e.offsetParent)&&!e.contains(t););r.reverse();for(var i=0,n=r;i<n.length;i++){var o=n[i],a=window.document.defaultView.getComputedStyle(o).getPropertyValue("z-index"),l=parseInt(a,10);if(!isNaN(l))return l}return 0},t.getPopoverScreenCoordinates=d,t.getVisibleFit=g,t.intersectBoundingBoxes=y,t.POSITIONS=["top","right","bottom","left"];var l={top:"height",right:"width",bottom:"height",left:"width"},c={height:"top",width:"left"},u={top:"bottom",right:"left",bottom:"top",left:"right"},h={top:"left",right:"top",bottom:"left",left:"top"},p=function(e){if(Array.isArray(e)){var t=o(e,4);return[t[0],t[1],t[2],t[3]]}return[e,e,e,e]};function d(e){var t,r,i=e.position,a=e.align,d=e.anchorBoundingBox,f=e.popoverBoundingBox,v=e.windowBoundingBox,_=e.containerBoundingBox,b=e.arrowConfig,x=e.offset,w=void 0===x?0:x,S=e.buffer,C=void 0===S?0:S,M=h[i],E=u[M],T=l[M],A=o(p(C),4),P=A[0],O=A[1],I=A[2],k=A[3],F=function(e){var t=e.crossAxisFirstSide,r=e.crossAxisSecondSide,i=e.crossAxisDimension,n=e.position,o=e.align,a=e.buffer,l=e.offset,c=e.windowBoundingBox,h=e.containerBoundingBox,p=e.anchorBoundingBox,d=e.arrowConfig,f=e.popoverBoundingBox[i],g=p[i],v=g/2,_=p[t]+v-f/2,b=m(p,y(c,h),a,l,n),x=d?d.arrowBuffer:0,w=(f-g)/2,S=0,C=1,M=0,E=1;if(null!=o){C="top"===o||"left"===o?1:-1;var T=w+(S=w);M=T>b[u[o]]?T-b[u[o]]:0,E=-1*C}else{var A=b[t],P=b[r];E=A>P?-1:1;var O=Math.min(A,P);M=w>O?w-O:0}var I,k=_+M*E+S*C;if(d){var F=d.arrowWidth;(I=p[t]+v-F/2)<k+x?k-=k+x-I:I+x+F>k+f&&(k+=I-(k+f-x-F))}return{crossAxisPosition:k,crossAxisArrowPosition:I}}({crossAxisFirstSide:M,crossAxisSecondSide:E,crossAxisDimension:T,position:i,align:a,buffer:C,offset:w,windowBoundingBox:v,containerBoundingBox:_,popoverBoundingBox:f,anchorBoundingBox:d,arrowConfig:b}),D=F.crossAxisPosition,j=F.crossAxisArrowPosition,z=l[i],N=c[z],B=function(e){var t,r=e.position,i=e.offset,n=e.popoverBoundingBox,o=e.anchorBoundingBox,a=e.arrowConfig,u="top"===r||"left"===r,h=l[r],p=n[h],d=o[c[h]],f=o[h];return a&&(t=u?p:0),{primaryAxisPosition:d+(i+(u?p:f))*(u?-1:1),primaryAxisArrowPosition:t}}({position:i,offset:w,popoverBoundingBox:f,anchorBoundingBox:d,arrowConfig:b}),V=B.primaryAxisPosition,U=B.primaryAxisArrowPosition,H=(n(t={},M,D),n(t,N,V),t),G=y(v,_);G.top+=P,G.right-=O,G.bottom-=I,G.left+=k;var q=g({top:H.top,right:H.left+f.width,bottom:H.top+f.height,left:H.left,width:f.width,height:f.height},G),Z=b?(n(r={},M,j-H[M]),n(r,N,U),r):void 0;return{fit:q,top:H.top,left:H.left,arrow:Z?{left:Z.left,top:Z.top}:void 0}}function f(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,height:t.height,width:t.width}}function m(e,t,r,i,n){var a=o(p(r),4),l=a[0],c=a[1],u=a[2],h=a[3];return{top:e.top-t.top-l-("top"===n?i:0),right:t.right-e.right-c-("right"===n?i:0),bottom:t.bottom-e.bottom-u-("bottom"===n?i:0),left:e.left-t.left-h-("left"===n?i:0)}}function g(e,t){var r=y(e,t);return r.left>r.right||r.top>r.top?0:(r.right-r.left)*(r.bottom-r.top)/((e.right-e.left)*(e.bottom-e.top))}function y(e,t){var r=Math.max(e.top,t.top),i=Math.min(e.right,t.right),n=Math.min(e.bottom,t.bottom),o=Math.max(e.left,t.left);return{top:r,right:i,bottom:n,left:o,height:Math.max(n-r,0),width:Math.max(i-o,0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0;var i,n=(i=r(55))&&i.__esModule?i:{default:i},o=r(118),a=r(530);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var m=Math.random,g=p((function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"rand",void 0),d(this,"boolean",(function(){return t.rand()>.5})),d(this,"number",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,o.isNil)(e.min)?Number.MIN_VALUE:e.min,i=(0,o.isNil)(e.max)?Number.MAX_VALUE:e.max;return r+t.rand()*(i-r)})),d(this,"integer",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Math.ceil((0,o.isNil)(e.min)?Number.MIN_VALUE:e.min),i=Math.floor((0,o.isNil)(e.max)?Number.MAX_VALUE:e.max);return r+Math.floor(t.rand()*(i-r+1))})),d(this,"oneOf",(function(e){return e[Math.floor(t.rand()*e.length)]})),d(this,"oneToOne",(function(e,t){return e[t]})),d(this,"setOf",(function(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.integer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({min:0,max:e.length},i)),o=function(e){if(Array.isArray(e))return c(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return(0,a.times)(n,(function(){var e=t.oneOf(o);return o.splice(o.indexOf(e),1),e}))})),d(this,"date",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,o.isNil)(e.min)?new Date(0):e.min,i=(0,o.isNil)(e.max)?new Date(Date.now()):e.max,n=r.getTime(),a=i.getTime(),l=t.integer({min:n,max:a});return new Date(l)})),d(this,"moment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=+((0,o.isNil)(e.min)?(0,n.default)(0):e.min),i=+((0,o.isNil)(e.max)?(0,n.default)():e.max),a=t.integer({min:r,max:i});return(0,n.default)(a)})),this.rand=r}));t.Random=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserTick=void 0,t.memoize=function(e,t){return(0,n.default)(e,t)},t.times=function(e,t){return void 0===t?(0,i.default)(e):(0,i.default)(e,t)};var i=o(r(531)),n=o(r(532));function o(e){return e&&e.__esModule?e:{default:e}}t.browserTick=function(e){requestAnimationFrame(e)}},function(e,t,r){e.exports=r(22)(1352)},function(e,t,r){e.exports=r(22)(1291)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSecureRelForTarget",{enumerable:!0,get:function(){return i.getSecureRelForTarget}});var i=r(534)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSecureRelForTarget=void 0,t.getSecureRelForTarget=function(e){var t=e.target,r=void 0===t?"":t,i=e.rel,n=i?i.split(" ").filter((function(e){return!!e.length&&"noreferrer"!==e})):[];return n.push("noreferrer"),r.includes("_blank")&&-1===n.indexOf("noopener")&&n.push("noopener"),n.sort().join(" ").trim()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Comparators",{enumerable:!0,get:function(){return a.Comparators}}),Object.defineProperty(t,"PropertySortType",{enumerable:!0,get:function(){return o.PropertySortType}}),Object.defineProperty(t,"SortDirection",{enumerable:!0,get:function(){return n.SortDirection}}),Object.defineProperty(t,"SortDirectionType",{enumerable:!0,get:function(){return n.SortDirectionType}}),Object.defineProperty(t,"SortableProperties",{enumerable:!0,get:function(){return i.SortableProperties}});var i=r(536),n=r(215),o=r(540),a=r(297)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortableProperties=void 0;var i=r(297);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"sortableProperties",void 0),l(this,"currentSortedProperty",void 0),this.sortableProperties=t;var i=this.getSortablePropertyByName(r);if(!i)throw new Error("No property with the name ".concat(r));this.currentSortedProperty=i}var t,r;return t=e,(r=[{key:"getSortedProperty",value:function(){return this.currentSortedProperty}},{key:"sortItems",value:function(e){var t,r=function(e){if(Array.isArray(e))return o(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=i.Comparators.value(this.getSortedProperty().getValue);return this.isCurrentSortAscending()||(n=i.Comparators.reverse(n)),r.sort(n),r}},{key:"getSortablePropertyByName",value:function(e){return this.sortableProperties.find((function(t){return t.name===e}))}},{key:"sortOn",value:function(e){var t=this.getSortablePropertyByName(e);if(!t)throw new Error("No property with the name ".concat(e));this.getSortedProperty().name===t.name?this.flipCurrentSortOrder():this.currentSortedProperty=t}},{key:"isCurrentSortAscending",value:function(){var e=this.getSortedProperty();return!!e&&this.isAscendingByName(e.name)}},{key:"isAscendingByName",value:function(e){var t=this.getSortablePropertyByName(e);return!!t&&t.isAscending}},{key:"flipCurrentSortOrder",value:function(){this.currentSortedProperty.isAscending=!this.currentSortedProperty.isAscending}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SortableProperties=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.omit=t.get=void 0;var i=o(r(538)),n=o(r(539));function o(e){return e&&e.__esModule?e:{default:e}}t.get=function(e,t,r){return(0,i.default)(e,t,r)},t.omit=function(e,t){return(0,n.default)(e,t)}},function(e,t,r){e.exports=r(22)(1918)},function(e,t,r){e.exports=r(22)(1919)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertySortType=void 0;var i,n=(i=r(216))&&i.__esModule?i:{default:i},o=r(215),a=n.default.shape({field:n.default.string.isRequired,direction:o.SortDirectionType.isRequired});t.PropertySortType=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"slugify",{enumerable:!0,get:function(){return o.slugify}}),Object.defineProperty(t,"toInitials",{enumerable:!0,get:function(){return i.toInitials}}),Object.defineProperty(t,"toSentenceCase",{enumerable:!0,get:function(){return n.toSentenceCase}});var i=r(542),n=r(543),o=r(544)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_INITIALS=void 0,t.toInitials=function(e,t,r){var n,o=r?r.split("").length:e.split(" ").length;return o=o>i?i:o,t&&(o=t<=i?t:i),n=r?r.substring(0,o):e.trim()&&e.split(" ").length>1?(n=e.match(/\b(\w)/g))&&n.join("").substring(0,o):e.substring(0,o)};var i=2;t.MAX_INITIALS=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSentenceCase=function(e){var t=e.toLowerCase();return e.charAt(0).toUpperCase()+t.slice(1)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.slugify=function(e){return e.toLowerCase().replace(/[-]+/g," ").replace(/[^\w^\s]+/g,"").replace(/ +/g," ").split(" ").join("-")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDurationAndPerformOnFrame",{enumerable:!0,get:function(){return i.getDurationAndPerformOnFrame}}),Object.defineProperty(t,"getTransitionTimings",{enumerable:!0,get:function(){return i.getTransitionTimings}}),Object.defineProperty(t,"getWaitDuration",{enumerable:!0,get:function(){return i.getWaitDuration}}),Object.defineProperty(t,"performOnFrame",{enumerable:!0,get:function(){return i.performOnFrame}});var i=r(546)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performOnFrame=t.getWaitDuration=t.getTransitionTimings=t.getDurationAndPerformOnFrame=void 0;var i=/^([\d.]+)(s|ms)/;function n(e,t){var r="s"===t?1e3:1;return parseFloat(e)*r}var o=function(e){var t=window.getComputedStyle(e),r=t.getPropertyValue("transition-duration").match(i),o=r?n(r[1],r[2]):0,a=t.getPropertyValue("transition-delay").match(i);return{durationMatch:o,delayMatch:a?n(a[1],a[2]):0}};t.getTransitionTimings=o;var a=function(e){return e.reduce((function(e,t){if(t.target.nodeType===document.ELEMENT_NODE){var r=o(t.target),i=r.durationMatch,n=r.delayMatch;e=Math.max(e,i+n)}return e}),0)};t.getWaitDuration=a;var l=function(e,t){if(e>0){var r=Date.now()+e;requestAnimationFrame((function e(){t(),r>Date.now()&&requestAnimationFrame(e)}))}};t.performOnFrame=l,t.getDurationAndPerformOnFrame=function(e,t){l(a(e),t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EuiWindowEvent",{enumerable:!0,get:function(){return i.EuiWindowEvent}});var i=r(548)},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.EuiWindowEvent=void 0;var n,o=r(4),a=(n=r(216))&&n.__esModule?n:{default:n};function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===i(o)?o:String(o)),n)}var o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,n,o,a=(n=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(o){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),a.apply(this,arguments)}return t=h,(r=[{key:"componentDidMount",value:function(){this.addEvent(this.props)}},{key:"componentDidUpdate",value:function(e){e.event===this.props.event&&e.handler===this.props.handler||(this.removeEvent(e),this.addEvent(this.props))}},{key:"componentWillUnmount",value:function(){this.removeEvent(this.props)}},{key:"addEvent",value:function(e){var t=e.event,r=e.handler;window.addEventListener(t,r)}},{key:"removeEvent",value:function(e){var t=e.event,r=e.handler;window.removeEventListener(t,r)}},{key:"render",value:function(){return null}}])&&l(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Component);t.EuiWindowEvent=h,h.propTypes={event:a.default.any.isRequired,handler:a.default.func.isRequired}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiYScrollWithShadows=t.useEuiYScroll=t.useEuiXScrollWithShadows=t.useEuiXScroll=t.useEuiScrollBar=t.useEuiOverflowScroll=t.euiYScrollWithShadows=t.euiYScroll=t.euiXScrollWithShadows=t.euiXScroll=t.euiSupportsHas=t.euiScrollBarStyles=t.euiOverflowScroll=t.euiFullHeight=void 0;var i=r(134),n=r(164),o=r(117),a=function(e){var t=e.euiTheme,r=t.colors,i=t.size,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=a.thumbColor,c=a.trackColor,u=void 0===c?"transparent":c,h=a.width,p=void 0===h?"thin":h,d=a.size,f=a.corner,m=l||(0,n.transparentize)(r.darkShade,.5),g=d||i.base,y=f||"thin"===p?"calc(".concat(i.s," * 0.75)"):i.xs,v="scrollbar-color: ".concat(m," ").concat(u,";");return"scrollbar-width: ".concat(p,";\n\n    &::-webkit-scrollbar {\n      ").concat((0,o.logicalCSS)("width",g),"\n      ").concat((0,o.logicalCSS)("height",g),"\n    }\n\n    &::-webkit-scrollbar-thumb {\n      background-color: ").concat(m,";\n      background-clip: content-box;\n      border-radius: ").concat(g,";\n      border: ").concat(y," solid ").concat(u,";\n    }\n\n    &::-webkit-scrollbar-corner,\n    &::-webkit-scrollbar-track {\n      background-color: ").concat(u,";\n    }\n\n    ").concat(v,"\n  ")};t.euiScrollBarStyles=a,t.useEuiScrollBar=function(e){var t=(0,i.useEuiTheme)();return a(t,e)};var l=function(e){var t=e.euiTheme.size,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.direction||"y",o=r.side||"both",a=t.s,l="\n  ".concat((0,n.transparentize)("red",.1)," 0%,\n  ").concat((0,n.transparentize)("red",1)," ").concat(a,"\n  "),c="\n  ".concat((0,n.transparentize)("red",1)," calc(100% - ").concat(a,"),\n  ").concat((0,n.transparentize)("red",.1)," 100%\n  "),u="";return o&&(u="both"===o?"".concat(l,", ").concat(c):"".concat("start"===o?l:c)),"y"===i?"mask-image: linear-gradient(to bottom, ".concat(u,");"):"mask-image: linear-gradient(to right, ".concat(u,");")},c=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).height;return"\n  ".concat(a(e),"\n  ").concat((0,o.logicalCSS)("height",t||"100%"),"\n  ").concat((0,o.logicalCSSWithFallback)("overflow-y","auto"),"\n  ").concat((0,o.logicalCSSWithFallback)("overflow-x","hidden"),"\n  &:focus {\n    outline: none; /* 1 */\n  }\n")};t.euiYScroll=c,t.useEuiYScroll=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).height,t=(0,i.useEuiTheme)();return c(t,{height:e})};var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.height,i=t.side,n=void 0===i?"both":i;return"\n  ".concat(c(e,{height:r}),"\n  ").concat(l(e,{direction:"y",side:n}),"\n")};t.euiYScrollWithShadows=u,t.useEuiYScrollWithShadows=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).height,t=(0,i.useEuiTheme)();return u(t,{height:e})};var h=function(e){return"\n  ".concat(a(e),"\n  ").concat((0,o.logicalCSSWithFallback)("overflow-x","auto"),"\n  &:focus {\n    outline: none; /* 1 */\n  }\n")};t.euiXScroll=h,t.useEuiXScroll=function(){var e=(0,i.useEuiTheme)();return h(e)};var p=function(e){return"\n  ".concat(h(e),"\n  ").concat(l(e,{direction:"x"}),"\n")};t.euiXScrollWithShadows=p,t.useEuiXScrollWithShadows=function(){var e=(0,i.useEuiTheme)();return p(e)};var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.direction,i=t.mask,n=void 0!==i&&i;switch(r){case"y":return n?u(e):c(e);case"x":return n?p(e):h(e);default:return console.warn("Please provide a valid direction option to useEuiOverflowScroll"),""}};t.euiOverflowScroll=d,t.useEuiOverflowScroll=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,i.useEuiTheme)();return d(r,{direction:e,mask:t})},t.euiFullHeight=function(){return"\n  ".concat((0,o.logicalCSS)("height","100%"),"\n  flex: 1 1 auto;\n  overflow: hidden;\n")},t.euiSupportsHas="@supports(selector(:has(p)))"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiPaddingSize=t.useEuiPaddingCSS=t.euiPaddingSizeCSS=t.euiPaddingSize=t.PADDING_SIZES=void 0;var i=r(3),n=r(134),o=r(117);t.PADDING_SIZES=["none","xs","s","m","l","xl"];var a=function(e,t){var r=e.euiTheme;switch(t){case"none":return null;case"m":return r.size.base;default:return r.size[t]}};t.euiPaddingSize=a;var l=function(e,t){var r=t?"padding-".concat(o.logicalSide[t]):"padding";return{none:null,xs:(0,i.css)(r,":",a(e,"xs"),";;label:xs;"),s:(0,i.css)(r,":",a(e,"s"),";;label:s;"),m:(0,i.css)(r,":",a(e,"m"),";;label:m;"),l:(0,i.css)(r,":",a(e,"l"),";;label:l;"),xl:(0,i.css)(r,":",a(e,"xl"),";;label:xl;")}};t.euiPaddingSizeCSS=l,t.useEuiPaddingSize=function(e){var t=(0,n.useEuiTheme)();return a(t,e)},t.useEuiPaddingCSS=function(e){var t=(0,n.useEuiTheme)();return l(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiFocusRing=t.euiOutline=t.euiFocusRing=void 0;var i=r(211),n=function(e){var t=e.euiTheme,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",i=arguments.length>2?arguments[2]:void 0,n=t.focus.width,o=i||t.focus.color,a=r;return"inset"===r?a="-".concat(n):"outset"===r?a="".concat(n):"center"===r&&(a="calc(".concat(n," / -2);")),"\n    outline: ".concat(n," solid ").concat(o,";\n    outline-offset: ").concat(a,";\n  ")};t.euiOutline=n;var o=function(e){var t=arguments.length>2?arguments[2]:void 0;return"\n    ".concat(n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",null==t?void 0:t.color).trim(),"\n\n    // 👀 Chrome respects :focus-visible and allows coloring the `auto` style\n    &:focus-visible {\n      outline-style: auto;\n    }\n\n    // 🙅‍♀️ But Chrome also needs to have the outline forcefully removed from regular `:focus` state\n    &:not(:focus-visible) {\n      outline: none;\n    }\n  ")};t.euiFocusRing=o,t.useEuiFocusRing=function(e,t){var r=(0,i.useEuiTheme)();return o(r,e,{color:t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiNumberFormat=t.useEuiFontSize=t.euiTextTruncate=t.euiTextBreakWord=t.euiNumberFormat=t.euiFontSize=void 0;var i=r(286),n=r(165),o=r(117),a=function(e,t,r){var n=e.euiTheme;return{fontSize:(0,i.euiFontSizeFromScale)(t,n,r),lineHeight:(0,i.euiLineHeightFromBaseline)(t,n,r)}};t.euiFontSize=a,t.useEuiFontSize=function(e,t){var r=(0,n.useEuiTheme)();return a(r,e,t)},t.euiTextBreakWord=function(){return"\n  overflow-wrap: break-word !important; // makes sure the long string will wrap and not bust out of the container\n  word-break: break-word;\n"},t.euiTextTruncate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"100%";return"\n  ".concat((0,o.logicalCSS)("max-width",e),"\n  overflow: hidden !important;\n  text-overflow: ellipsis !important;\n  white-space: nowrap !important;\n")};var l=function(e){var t=e.euiTheme;return"\n  font-feature-settings: ".concat(t.font.featureSettings,", 'tnum' 1;\n")};t.euiNumberFormat=l,t.useEuiNumberFormat=function(){var e=(0,n.useEuiTheme)();return l(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiMinBreakpoint=t.useEuiMaxBreakpoint=t.useEuiBreakpoint=t.euiMinBreakpoint=t.euiMaxBreakpoint=t.euiBreakpoint=void 0;var i=r(290),n=r(165),o=function(e,t){var r,n=e.euiTheme,o=Object.keys((0,i.sortMapBySmallToLargeValues)(n.breakpoint)),a=t.sort((function(e,t){return o.indexOf(e)-o.indexOf(t)})),l=a[0],c=n.breakpoint[l],u=a[t.length-1];if(u!==o[o.length-1]){var h=o.indexOf(u)+1;r=n.breakpoint[o[h]]}return["@media only screen",!!c&&"(min-width: ".concat(c,"px)"),!!r&&"(max-width: ".concat(r-1,"px)")].filter(Boolean).join(" and ")};t.euiBreakpoint=o,t.useEuiBreakpoint=function(e){var t=(0,n.useEuiTheme)();return o(t,e)};var a=function(e,t){var r=e.euiTheme.breakpoint[t];return r?"@media only screen and (min-width: ".concat(r,"px)"):(console.warn("Invalid min breakpoint size: ".concat(t)),"@media only screen")};t.euiMinBreakpoint=a,t.useEuiMinBreakpoint=function(e){var t=(0,n.useEuiTheme)();return a(t,e)};var l=function(e,t){var r=e.euiTheme.breakpoint[t];return r?"@media only screen and (max-width: ".concat(r-1,"px)"):(console.warn("Invalid max breakpoint size: ".concat(t)),"@media only screen")};t.euiMaxBreakpoint=l,t.useEuiMaxBreakpoint=function(e){var t=(0,n.useEuiTheme)();return l(t,e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetStyles=void 0,t.resetStyles="\n/* // Adapted from Eric Meyer's reset (http://meyerweb.com/eric/tools/css/reset/, v2.0 | 20110126). */\n\n\n*, *:before, *:after {\n  box-sizing: border-box;\n}\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: none;\n  vertical-align: baseline;\n}\n\nh1, h2, h3, h4, h5, h6, p {\n  font-family: inherit;\n  font-weight: inherit;\n  font-size: inherit;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n  display: block;\n}\n\na[href],\nbutton,\n[role='button'] {\n  cursor: pointer;\n}\n\nbutton {\n  background: none;\n  border: none;\n  padding: 0;\n  margin: 0;\n  color: inherit;\n  border-radius: 0;\n  font-size: inherit;\n}\n\ninput {\n  margin: 0;\n  padding: 0;\n}\n\ninput:disabled {\n  opacity: 1; /* required on iOS */\n}\n\nol,\nul {\n  list-style: none;\n}\n\nblockquote,\nq {\n  quotes: none;\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n\nhr {\n  margin: 0;\n}\n\nfieldset {\n  min-inline-size: auto;\n}\n\n/* Chrome has an issue around RTL languages in SVGs when letter-spacing is negative\n * https://bugs.chromium.org/p/chromium/issues/detail?id=966480\n */\nsvg text {\n  letter-spacing: normal !important;\n}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(556);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var n=r(557);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var o=r(558);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var a=r(559);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var l=r(560);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r(561);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=r(562);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var h=r(563);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=r(564);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiCantAnimate=t.euiCanAnimate=t.EuiThemeAnimationSpeeds=t.EuiThemeAnimationEasings=void 0,t.euiCanAnimate="@media screen and (prefers-reduced-motion: no-preference)",t.euiCantAnimate="@media screen and (prefers-reduced-motion: reduce)",t.EuiThemeAnimationSpeeds=["extraFast","fast","normal","slow","extraSlow"],t.EuiThemeAnimationEasings=["bounce","resistance"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EuiThemeBreakpoints=void 0,t.EuiThemeBreakpoints=["xs","s","m","l","xl"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EuiThemeLevels=void 0,t.EuiThemeLevels=["toast","modal","mask","navigation","menu","header","flyout","maskBelowHeader","content"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EuiThemeSizes=void 0,t.EuiThemeSizes=["xxs","xs","s","m","base","l","xl","xxl","xxxl","xxxxl"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._EuiShadowSizesDescriptions=t.EuiThemeShadowSizes=void 0,t.EuiThemeShadowSizes=["xs","s","m","l","xl"],t._EuiShadowSizesDescriptions={xs:"Very subtle shadow used on small components.",s:"Adds subtle depth, usually used in conjunction with a border.",m:"Used on small sized portalled content like popovers.",l:"Primary shadow used in most cases to add visible depth.",xl:"Very large shadows used for large portalled style containers like modals and flyouts."}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EuiThemeFontWeights=t.EuiThemeFontUnits=t.EuiThemeFontScales=void 0,t.EuiThemeFontUnits=["rem","px","em"],t.EuiThemeFontScales=["xxxs","xxs","xs","s","m","l","xl","xxl"],t.EuiThemeFontWeights=["light","regular","medium","semiBold","bold"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiAnimSlideX=t.euiAnimSlideInUp=t.euiAnimScale=t.euiAnimFadeIn=void 0;var i,n,o,a,l=r(3);function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u=(0,l.keyframes)(i||(i=c(["\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])));t.euiAnimFadeIn=u,t.euiAnimSlideInUp=function(e){return(0,l.keyframes)(n||(n=c(["\n   0% {\n    opacity: 0;\n    transform: translateY(",");\n  }\n\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"])),e)},t.euiAnimSlideX=function(e){return(0,l.keyframes)(o||(o=c(["\n  0% {\n    transform: translateX(",");\n  }\n\n  100% {\n    transform: translateX(0);\n\n  }\n"])),e)};var h=(0,l.keyframes)(a||(a=c(["\n  0% {\n    opacity: 0;\n  }\n\n  1% {\n    opacity: 0;\n    transform: scale(0);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"])));t.euiAnimScale=h},function(e,t,r){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.useEuiTitle=t.euiTitleStyles=t.euiTitle=void 0;var n=r(3),o=r(211),a=r(210);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",r=arguments.length>2?arguments[2]:void 0,i=e.euiTheme;return c(c({},(0,a.euiFontSize)(e,{xxxs:"xs",xxs:"s",xs:"m",s:"l",m:"xl",l:"xxl"}[t],r)),{},{fontWeight:i.font.weight[i.font.title.weight],color:i.colors.title})};t.euiTitle=h,t.useEuiTitle=function(e,t){var r=(0,o.useEuiTheme)();return h(r,e,t)};var p={name:"1x2qsb1-uppercase",styles:"text-transform:uppercase;label:uppercase;"};t.euiTitleStyles=function(e){return{euiTitle:(0,n.css)((0,a.euiTextBreakWord)()," &+&{",(0,a.logicalCSS)("margin-top",e.euiTheme.size.l),";};label:euiTitle;"),uppercase:p,xxxs:(0,n.css)(h(e,"xxxs"),";;label:xxxs;"),xxs:(0,n.css)(h(e,"xxs"),";;label:xxs;"),xs:(0,n.css)(h(e,"xs"),";;label:xs;"),s:(0,n.css)(h(e,"s"),";;label:s;"),m:(0,n.css)(h(e,"m"),";;label:m;"),l:(0,n.css)(h(e,"l"),";;label:l;")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.euiContextMenuVariables=t.euiContextMenuStyles=void 0;var i=r(3),n=r(210),o=function(e){var t=e.euiTheme;return{panelWidth:(0,n.mathWithUnits)(t.size.base,(function(e){return 16*e}))}};t.euiContextMenuVariables=o,t.euiContextMenuStyles=function(e){var t=e.euiTheme,r=o(e).panelWidth;return{euiContextMenu:(0,i.css)((0,n.logicalCSS)("width",r)," ",(0,n.logicalCSS)("max-width","100%")," position:relative;overflow:hidden;border-radius:",t.border.radius.medium,";",n.euiCanAnimate,"{transition:height ",t.animation.fast," ",t.animation.resistance,";};label:euiContextMenu;")}}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(569)),o=i(r(268)),a=i(r(219)),l=r(89),c=r(105);t.default=function(e,t,r){void 0===r&&(r={});for(var i=c.getGeom(e).coordinates,u=0,h=0;h<i.length&&!(t>=u&&h===i.length-1);h++){if(u>=t){var p=t-u;if(p){var d=n.default(i[h],i[h-1])-180;return o.default(i[h],p,d,r)}return l.point(i[h])}u+=a.default(i[h],i[h+1],r)}return l.point(i[i.length-1])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(89),n=r(105);t.default=function e(t,r,o){if(void 0===o&&(o={}),!0===o.final)return function(t,r){var i=e(r,t);return(i+180)%360}(t,r);var a=n.getCoord(t),l=n.getCoord(r),c=i.degreesToRadians(a[0]),u=i.degreesToRadians(l[0]),h=i.degreesToRadians(a[1]),p=i.degreesToRadians(l[1]),d=Math.sin(u-c)*Math.cos(p),f=Math.cos(h)*Math.sin(p)-Math.sin(h)*Math.cos(p)*Math.cos(u-c);return i.radiansToDegrees(Math.atan2(d,f))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(126),n=6378137;function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(a(e[r]))}return t}function a(e){var t,r,i,o,a,c,u=0,h=e.length;if(h>2){for(c=0;c<h;c++)c===h-2?(i=h-2,o=h-1,a=0):c===h-1?(i=h-1,o=0,a=1):(i=c,o=c+1,a=c+2),t=e[i],r=e[o],u+=(l(e[a][0])-l(t[0]))*Math.sin(l(r[1]));u=u*n*n/2}return u}function l(e){return e*Math.PI/180}t.default=function(e){return i.geomReduce(e,(function(e,t){return e+function(e){var t,r=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)r+=o(e.coordinates[t]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)}),0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(572),n=r(578),o=r(89),a=r(105),l=r(126);t.default=function e(t,r){switch(void 0===r&&(r={}),a.getType(t)){case"Point":return t;case"Polygon":var c=[];l.coordEach(t,(function(e){c.push(e)}));var u,h,p,d,f,m,g,y,v=n.default(t,{properties:r.properties}),_=v.geometry.coordinates,b=0,x=0,w=0,S=c.map((function(e){return[e[0]-_[0],e[1]-_[1]]}));for(u=0;u<c.length-1;u++)d=(h=S[u])[0],m=h[1],f=(p=S[u+1])[0],w+=y=d*(g=p[1])-f*m,b+=(d+f)*y,x+=(m+g)*y;if(0===w)return v;var C=1/(.5*w*6);return o.point([_[0]+C*b,_[1]+C*x],r.properties);default:var M=i.default(t);return M?e(M,{properties:r.properties}):n.default(t,{properties:r.properties})}}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(89),o=r(126),a=i(r(573));t.default=function(e,t){void 0===t&&(t={}),t.concavity=t.concavity||1/0;var r=[];if(o.coordEach(e,(function(e){r.push([e[0],e[1]])})),!r.length)return null;var i=a.default(r,t.concavity);return i.length>3?n.polygon([i]):null}},function(e,t,r){"use strict";var i=r(574),n=r(575),o=r(576);const a=r(577).orient2d;function l(e,t,r){t=Math.max(0,void 0===t?2:t),r=r||0;var n=function(e){for(var t=e[0],r=e[0],i=e[0],n=e[0],a=0;a<e.length;a++){var l=e[a];l[0]<t[0]&&(t=l),l[0]>i[0]&&(i=l),l[1]<r[1]&&(r=l),l[1]>n[1]&&(n=l)}var c=[t,r,i,n],u=c.slice();for(a=0;a<e.length;a++)o(e[a],c)||u.push(e[a]);return function(e){e.sort(b);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&f(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var i=[],n=e.length-1;n>=0;n--){for(;i.length>=2&&f(i[i.length-2],i[i.length-1],e[n])<=0;)i.pop();i.push(e[n])}return i.pop(),t.pop(),t.concat(i)}(u)}(e),a=new i(16);a.toBBox=function(e){return{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}},a.compareMinX=function(e,t){return e[0]-t[0]},a.compareMinY=function(e,t){return e[1]-t[1]},a.load(e);for(var l,u=[],h=0;h<n.length;h++){var p=n[h];a.remove(p),l=g(p,l),u.push(l)}var d=new i(16);for(h=0;h<u.length;h++)d.insert(m(u[h]));for(var v=t*t,_=r*r;u.length;){var x=u.shift(),w=x.p,S=x.next.p,C=y(w,S);if(!(C<_)){var M=C/v;(p=c(a,x.prev.p,w,S,x.next.next.p,M,d))&&Math.min(y(p,w),y(p,S))<=M&&(u.push(x),u.push(g(p,x)),a.remove(p),d.remove(x),d.insert(m(x)),d.insert(m(x.next)))}}x=l;var E=[];do{E.push(x.p),x=x.next}while(x!==l);return E.push(x.p),E}function c(e,t,r,i,o,a,l){for(var c=new n([],u),p=e.data;p;){for(var f=0;f<p.children.length;f++){var m=p.children[f],g=p.leaf?v(m,r,i):h(r,i,m);g>a||c.push({node:m,dist:g})}for(;c.length&&!c.peek().node.children;){var y=c.pop(),_=y.node,b=v(_,t,r),x=v(_,i,o);if(y.dist<b&&y.dist<x&&d(r,_,l)&&d(i,_,l))return _}(p=c.pop())&&(p=p.node)}return null}function u(e,t){return e.dist-t.dist}function h(e,t,r){if(p(e,r)||p(t,r))return 0;var i=_(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(0===i)return 0;var n=_(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(0===n)return 0;var o=_(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(0===o)return 0;var a=_(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return 0===a?0:Math.min(i,n,o,a)}function p(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function d(e,t,r){for(var i,n,o,a,l=Math.min(e[0],t[0]),c=Math.min(e[1],t[1]),u=Math.max(e[0],t[0]),h=Math.max(e[1],t[1]),p=r.search({minX:l,minY:c,maxX:u,maxY:h}),d=0;d<p.length;d++)if(i=p[d].p,n=p[d].next.p,o=e,i!==(a=t)&&n!==o&&f(i,n,o)>0!=f(i,n,a)>0&&f(o,a,i)>0!=f(o,a,n)>0)return!1;return!0}function f(e,t,r){return a(e[0],e[1],t[0],t[1],r[0],r[1])}function m(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function g(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function y(e,t){var r=e[0]-t[0],i=e[1]-t[1];return r*r+i*i}function v(e,t,r){var i=t[0],n=t[1],o=r[0]-i,a=r[1]-n;if(0!==o||0!==a){var l=((e[0]-i)*o+(e[1]-n)*a)/(o*o+a*a);l>1?(i=r[0],n=r[1]):l>0&&(i+=o*l,n+=a*l)}return(o=e[0]-i)*o+(a=e[1]-n)*a}function _(e,t,r,i,n,o,a,l){var c,u,h,p,d=r-e,f=i-t,m=a-n,g=l-o,y=e-n,v=t-o,_=d*d+f*f,b=d*m+f*g,x=m*m+g*g,w=d*y+f*v,S=m*y+g*v,C=_*x-b*b,M=C,E=C;0===C?(u=0,M=1,p=S,E=x):(p=_*S-b*w,(u=b*S-x*w)<0?(u=0,p=S,E=x):u>M&&(u=M,p=S+b,E=x)),p<0?(p=0,-w<0?u=0:-w>_?u=M:(u=-w,M=_)):p>E&&(p=E,-w+b<0?u=0:-w+b>_?u=M:(u=-w+b,M=_));var T=(1-(h=0===p?0:p/E))*n+h*a-((1-(c=0===u?0:u/M))*e+c*r),A=(1-h)*o+h*l-((1-c)*t+c*i);return T*T+A*A}function b(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}e.exports=l,e.exports.default=l},function(e,t,r){e.exports=function(){"use strict";function e(e,i,n,o,a){!function e(r,i,n,o,a){for(;o>n;){if(o-n>600){var l=o-n+1,c=i-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1);e(r,i,Math.max(n,Math.floor(i-c*h/l+p)),Math.min(o,Math.floor(i+(l-c)*h/l+p)),a)}var d=r[i],f=n,m=o;for(t(r,n,i),a(r[o],d)>0&&t(r,n,o);f<m;){for(t(r,f,m),f++,m--;a(r[f],d)<0;)f++;for(;a(r[m],d)>0;)m--}0===a(r[n],d)?t(r,n,m):t(r,++m,o),m<=i&&(n=m+1),i<=m&&(o=m-1)}}(e,i,n||0,o||e.length-1,a||r)}function t(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function r(e,t){return e<t?-1:e>t?1:0}var i=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,r,i,n){n||(n=m(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=t;o<r;o++){var a=e.children[o];l(n,e.leaf?i(a):a)}return n}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function h(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,r,i,n,o){for(var a=[r,i];a.length;)if(!((i=a.pop())-(r=a.pop())<=n)){var l=r+Math.ceil((i-r)/n/2)*n;e(t,l,r,i,o),a.push(r,l,l,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(e){var t=this.data,r=[];if(!f(e,t))return r;for(var i=this.toBBox,n=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],l=t.leaf?i(a):a;f(e,l)&&(t.leaf?r.push(a):d(e,l)?this._all(a,r):n.push(a))}t=n.pop()}return r},i.prototype.collides=function(e){var t=this.data;if(!f(e,t))return!1;for(var r=[];t;){for(var i=0;i<t.children.length;i++){var n=t.children[i],o=t.leaf?this.toBBox(n):n;if(f(e,o)){if(t.leaf||d(e,o))return!0;r.push(n)}}t=r.pop()}return!1},i.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},i.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},i.prototype.clear=function(){return this.data=m([]),this},i.prototype.remove=function(e,t){if(!e)return this;for(var r,i,o,a=this.data,l=this.toBBox(e),c=[],u=[];a||c.length;){if(a||(a=c.pop(),i=c[c.length-1],r=u.pop(),o=!0),a.leaf){var h=n(e,a.children,t);if(-1!==h)return a.children.splice(h,1),c.push(a),this._condense(c),this}o||a.leaf||!d(a,l)?i?(r++,a=i.children[r],o=!1):a=null:(c.push(a),u.push(r),r=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(e){return e},i.prototype.compareMinX=function(e,t){return e.minX-t.minX},i.prototype.compareMinY=function(e,t){return e.minY-t.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(e){return this.data=e,this},i.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},i.prototype._build=function(e,t,r,i){var n,a=r-t+1,l=this._maxEntries;if(a<=l)return o(n=m(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,i-1))),(n=m([])).leaf=!1,n.height=i;var c=Math.ceil(a/l),u=c*Math.ceil(Math.sqrt(l));g(e,t,r,u,this.compareMinX);for(var h=t;h<=r;h+=u){var p=Math.min(h+u-1,r);g(e,h,p,c,this.compareMinY);for(var d=h;d<=p;d+=c){var f=Math.min(d+c-1,p);n.children.push(this._build(e,d,f,i-1))}}return o(n,this.toBBox),n},i.prototype._chooseSubtree=function(e,t,r,i){for(;i.push(t),!t.leaf&&i.length-1!==r;){for(var n=1/0,o=1/0,a=void 0,l=0;l<t.children.length;l++){var c=t.children[l],u=h(c),p=(d=e,f=c,(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-u);p<o?(o=p,n=u<n?u:n,a=c):p===o&&u<n&&(n=u,a=c)}t=a||t.children[0]}var d,f;return t},i.prototype._insert=function(e,t,r){var i=r?e:this.toBBox(e),n=[],o=this._chooseSubtree(i,this.data,t,n);for(o.children.push(e),l(o,i);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(i,n,t)},i.prototype._split=function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var a=this._chooseSplitIndex(r,n,i),l=m(r.children.splice(a,r.children.length-a));l.height=r.height,l.leaf=r.leaf,o(r,this.toBBox),o(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(r,l)},i.prototype._splitRoot=function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(e,t,r){for(var i,n,o,l,c,u,p,d=1/0,f=1/0,m=t;m<=r-t;m++){var g=a(e,0,m,this.toBBox),y=a(e,m,r,this.toBBox),v=(n=g,o=y,void 0,void 0,void 0,void 0,l=Math.max(n.minX,o.minX),c=Math.max(n.minY,o.minY),u=Math.min(n.maxX,o.maxX),p=Math.min(n.maxY,o.maxY),Math.max(0,u-l)*Math.max(0,p-c)),_=h(g)+h(y);v<d?(d=v,i=m,f=_<f?_:f):v===d&&_<f&&(f=_,i=m)}return i||r-t},i.prototype._chooseSplitAxis=function(e,t,r){var i=e.leaf?this.compareMinX:c,n=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},i.prototype._allDistMargin=function(e,t,r,i){e.children.sort(i);for(var n=this.toBBox,o=a(e,0,t,n),c=a(e,r-t,r,n),u=p(o)+p(c),h=t;h<r-t;h++){var d=e.children[h];l(o,e.leaf?n(d):d),u+=p(o)}for(var f=r-t-1;f>=t;f--){var m=e.children[f];l(c,e.leaf?n(m):m),u+=p(c)}return u},i.prototype._adjustParentBBoxes=function(e,t,r){for(var i=r;i>=0;i--)l(t[i],e)},i.prototype._condense=function(e){for(var t=e.length-1,r=void 0;t>=0;t--)0===e[t].children.length?t>0?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},i}()},function(e,t,r){e.exports=function(){"use strict";var e=function(e,r){if(void 0===e&&(e=[]),void 0===r&&(r=t),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function t(e,t){return e<t?-1:e>t?1:0}return e.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(e){for(var t=this.data,r=this.compare,i=t[e];e>0;){var n=e-1>>1,o=t[n];if(r(i,o)>=0)break;t[e]=o,e=n}t[e]=i},e.prototype._down=function(e){for(var t=this.data,r=this.compare,i=this.length>>1,n=t[e];e<i;){var o=1+(e<<1),a=t[o],l=o+1;if(l<this.length&&r(t[l],a)<0&&(o=l,a=t[l]),r(a,n)>=0)break;t[e]=a,e=o}t[e]=n},e}()},function(e,t){e.exports=function(e,t){for(var r=e[0],i=e[1],n=!1,o=0,a=t.length-1;o<t.length;a=o++){var l=t[o][0],c=t[o][1],u=t[a][0],h=t[a][1];c>i!=h>i&&r<(u-l)*(i-c)/(h-c)+l&&(n=!n)}return n}},function(e,t,r){!function(e){"use strict";const t=134217729;function r(e,t,r,i,n){let o,a,l,c,u=t[0],h=i[0],p=0,d=0;h>u==h>-u?(o=u,u=t[++p]):(o=h,h=i[++d]);let f=0;if(p<e&&d<r)for(h>u==h>-u?(l=o-((a=u+o)-u),u=t[++p]):(l=o-((a=h+o)-h),h=i[++d]),o=a,0!==l&&(n[f++]=l);p<e&&d<r;)h>u==h>-u?(l=o-((a=o+u)-(c=a-o))+(u-c),u=t[++p]):(l=o-((a=o+h)-(c=a-o))+(h-c),h=i[++d]),o=a,0!==l&&(n[f++]=l);for(;p<e;)l=o-((a=o+u)-(c=a-o))+(u-c),u=t[++p],o=a,0!==l&&(n[f++]=l);for(;d<r;)l=o-((a=o+h)-(c=a-o))+(h-c),h=i[++d],o=a,0!==l&&(n[f++]=l);return 0===o&&0!==f||(n[f++]=o),f}function i(e){return new Float64Array(e)}const n=i(4),o=i(8),a=i(12),l=i(16),c=i(4);e.orient2d=function(e,i,u,h,p,d){const f=(i-d)*(u-p),m=(e-p)*(h-d),g=f-m;if(0===f||0===m||f>0!=m>0)return g;const y=Math.abs(f+m);return Math.abs(g)>=33306690738754716e-32*y?g:-function(e,i,u,h,p,d,f){let m,g,y,v,_,b,x,w,S,C,M,E,T,A,P,O,I,k;const F=e-p,D=u-p,j=i-d,z=h-d;_=(P=(w=F-(x=(b=t*F)-(b-F)))*(C=z-(S=(b=t*z)-(b-z)))-((A=F*z)-x*S-w*S-x*C))-(M=P-(I=(w=j-(x=(b=t*j)-(b-j)))*(C=D-(S=(b=t*D)-(b-D)))-((O=j*D)-x*S-w*S-x*C))),n[0]=P-(M+_)+(_-I),_=(T=A-((E=A+M)-(_=E-A))+(M-_))-(M=T-O),n[1]=T-(M+_)+(_-O),_=(k=E+M)-E,n[2]=E-(k-_)+(M-_),n[3]=k;let N=function(e,t){let r=t[0];for(let e=1;e<4;e++)r+=t[e];return r}(0,n),B=22204460492503146e-32*f;if(N>=B||-N>=B)return N;if(m=e-(F+(_=e-F))+(_-p),y=u-(D+(_=u-D))+(_-p),g=i-(j+(_=i-j))+(_-d),v=h-(z+(_=h-z))+(_-d),0===m&&0===g&&0===y&&0===v)return N;if(B=11093356479670487e-47*f+33306690738754706e-32*Math.abs(N),(N+=F*v+z*m-(j*y+D*g))>=B||-N>=B)return N;_=(P=(w=m-(x=(b=t*m)-(b-m)))*(C=z-(S=(b=t*z)-(b-z)))-((A=m*z)-x*S-w*S-x*C))-(M=P-(I=(w=g-(x=(b=t*g)-(b-g)))*(C=D-(S=(b=t*D)-(b-D)))-((O=g*D)-x*S-w*S-x*C))),c[0]=P-(M+_)+(_-I),_=(T=A-((E=A+M)-(_=E-A))+(M-_))-(M=T-O),c[1]=T-(M+_)+(_-O),_=(k=E+M)-E,c[2]=E-(k-_)+(M-_),c[3]=k;const V=r(4,n,4,c,o);_=(P=(w=F-(x=(b=t*F)-(b-F)))*(C=v-(S=(b=t*v)-(b-v)))-((A=F*v)-x*S-w*S-x*C))-(M=P-(I=(w=j-(x=(b=t*j)-(b-j)))*(C=y-(S=(b=t*y)-(b-y)))-((O=j*y)-x*S-w*S-x*C))),c[0]=P-(M+_)+(_-I),_=(T=A-((E=A+M)-(_=E-A))+(M-_))-(M=T-O),c[1]=T-(M+_)+(_-O),_=(k=E+M)-E,c[2]=E-(k-_)+(M-_),c[3]=k;const U=r(V,o,4,c,a);_=(P=(w=m-(x=(b=t*m)-(b-m)))*(C=v-(S=(b=t*v)-(b-v)))-((A=m*v)-x*S-w*S-x*C))-(M=P-(I=(w=g-(x=(b=t*g)-(b-g)))*(C=y-(S=(b=t*y)-(b-y)))-((O=g*y)-x*S-w*S-x*C))),c[0]=P-(M+_)+(_-I),_=(T=A-((E=A+M)-(_=E-A))+(M-_))-(M=T-O),c[1]=T-(M+_)+(_-O),_=(k=E+M)-E,c[2]=E-(k-_)+(M-_),c[3]=k;const H=r(U,a,4,c,l);return l[H-1]}(e,i,u,h,p,d,y)},e.orient2dfast=function(e,t,r,i,n,o){return(t-o)*(r-n)-(e-n)*(i-o)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(126),n=r(89);t.default=function(e,t){void 0===t&&(t={});var r=0,o=0,a=0;return i.coordEach(e,(function(e){r+=e[0],o+=e[1],a++})),n.point([r/a,o/a],t.properties)}},function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(219)),o=r(126);t.default=function(e,t){return void 0===t&&(t={}),o.segmentReduce(e,(function(e,r){var i=r.geometry.coordinates;return e+n.default(i[0],i[1],t)}),0)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const i={maxWidth:550,avCharWidth:7,paddingsWidth:116},n=(e,t)=>e.reduce(((e,r)=>{const i=t.find((e=>r[e]));if(!i)return e;const n=r[i].length;return e>n?e:n}),0),o=e=>e.reduce(((e,t)=>e>t.length?e:t.length),0);function a(e,t,r){return function(e,t){const{maxWidth:r,avCharWidth:n,paddingsWidth:o,minWidth:a}={...i,...t},l=o+e*n;return a&&l<a?a:Math.min(l,r)}(t?n(e,t):o(e),r)}}])]);