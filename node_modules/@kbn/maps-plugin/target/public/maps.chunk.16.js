/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[16],{223:function(e,t,i){"use strict";i.d(t,"a",(function(){return MapComponent}));var r=i(2),n=i.n(r),o=i(4),s=i.n(o),a=i(25),p=i(43),l=i(319),d=i(170),b=i(3);class MapComponent extends o.Component{constructor(e){super(e),n()(this,"_mapEmbeddable",void 0),n()(this,"_embeddableRef",s.a.createRef()),this._mapEmbeddable=new l.MapEmbeddable({editable:!1},{id:Object(p.v4)(),attributes:{title:this.props.title,layerListJSON:JSON.stringify([Object(d.createBasemapLayerDescriptor)(),...this.props.getLayerDescriptors()])},mapCenter:this.props.mapCenter}),this.props.onInitialRenderComplete&&this._mapEmbeddable.getOnRenderComplete$().pipe(Object(a.first)()).subscribe((()=>{this.props.onInitialRenderComplete&&this.props.onInitialRenderComplete()})),void 0!==this.props.isSharable&&this._mapEmbeddable.setIsSharable(this.props.isSharable)}componentDidMount(){this._embeddableRef.current&&this._mapEmbeddable.render(this._embeddableRef.current)}componentWillUnmount(){this._mapEmbeddable.destroy()}componentDidUpdate(){this._mapEmbeddable.updateInput({filters:this.props.filters,query:this.props.query,timeRange:this.props.timeRange})}render(){return Object(b.jsx)("div",{className:"mapEmbeddableContainer",ref:this._embeddableRef})}}},224:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var r=i(0),n=i(86),o=i(141),s=i(76),a=i(123),p=i(83),l=i(84),d=i(93),b=i(166);const c=Object(p.i)();function m(e){return"heatmap"===e.toLowerCase()}function u(e){return m(e)?r.ub.HEATMAP:"shaded geohash grid"===e.toLowerCase()?r.ub.GRID:r.ub.POINT}function f({label:e,mapType:t,colorSchema:i,indexPatternId:p,geoFieldName:f,metricAgg:C,metricFieldName:I}){if(!p||!f)return null;const O=function(e,t,i){const n=Object.keys(r.b).find((e=>r.b[e]===t)),o=n?r.b[n]:void 0;return!o||o===r.b.COUNT||!i||m(e)&&!Object(b.a)(o)?{type:r.b.COUNT}:o===r.b.PERCENTILE?{type:o,field:i,percentile:r.v}:{type:o,field:i}}(t,C,I),h=o.a.createDescriptor({indexPatternId:p,geoField:f,metrics:[O],requestType:u(t),resolution:r.L.MOST_FINE});if(m(t))return a.a.createDescriptor({label:e,sourceDescriptor:h});const y={name:Object(d.b)({aggType:O.type,aggFieldName:"field"in O?O.field:""}),origin:r.D.SOURCE},g=l.e.find((e=>e.value.toLowerCase()===i.toLowerCase())),E={[r.Ib.FILL_COLOR]:{type:r.Eb.DYNAMIC,options:{...c[r.Ib.FILL_COLOR].options,field:y,color:g?g.value:"Yellow to Red",type:r.j.ORDINAL,fieldMetaOptions:{...c[r.Ib.FILL_COLOR].options.fieldMetaOptions,isEnabled:!1}}},[r.Ib.LINE_COLOR]:{type:r.Eb.STATIC,options:{color:"#3d3d3d"}}};return"scaled circle markers"===t.toLowerCase()&&(E[r.Ib.ICON_SIZE]={type:r.Eb.DYNAMIC,options:{...c[r.Ib.ICON_SIZE].options,maxSize:18,field:y,fieldMetaOptions:{...c[r.Ib.ICON_SIZE].options.fieldMetaOptions,isEnabled:!1}}}),s.b.createDescriptor({label:e,sourceDescriptor:h,style:n.a.createDescriptor(E)})}},605:function(e,t,i){"use strict";i.r(t),i(4);var r=i(223),n=i(224),o=i(3);t.default=function(e){const t={lat:e.visConfig.mapCenter[0],lon:e.visConfig.mapCenter[1],zoom:e.visConfig.mapZoom};return Object(o.jsx)(r.a,{title:e.visConfig.layerDescriptorParams.label,filters:e.filters,query:e.query,timeRange:e.timeRange,mapCenter:t,getLayerDescriptors:function(){const t=Object(n.a)(e.visConfig.layerDescriptorParams);return t?[t]:[]},onInitialRenderComplete:e.onInitialRenderComplete,isSharable:!1})}}}]);