/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[0],{100:function(e,t,r){"use strict";r.d(t,"a",(function(){return DataRequest})),r.d(t,"b",(function(){return DataRequestAbortError}));var s=r(2),n=r.n(s),i=r(4),o=r.n(i),a=r(24),u=r(5),l=r(3);class DataRequest{constructor(e){n()(this,"_descriptor",void 0),this._descriptor={...e}}getData(){return this._descriptor.data}isLoading(){return!!this._descriptor.dataRequestToken}getMeta(){return this._descriptor.dataRequestMetaAtStart?this._descriptor.dataRequestMetaAtStart:this._descriptor.dataRequestMeta?this._descriptor.dataRequestMeta:{}}hasData(){return!!this._descriptor.data}hasDataOrRequestInProgress(){return this.hasData()||this.isLoading()}getDataId(){return this._descriptor.dataId}getRequestToken(){return this._descriptor.dataRequestToken}renderError(){if(!this._descriptor.error)return null;const e=Object(a.getSearchErrorOverrideDisplay)({error:this._descriptor.error,application:Object(u.a)()}),t=null!=e&&e.body?e.body:Object(l.jsx)("p",null,this._descriptor.error.message);return null!=e&&e.actions?Object(l.jsx)(o.a.Fragment,null,t,e.actions):t}}class DataRequestAbortError extends Error{constructor(){super()}}},101:function(e,t,r){e.exports=r(22)(191)},106:function(e,t,r){e.exports=r(22)(652)},114:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"f",(function(){return a})),r.d(t,"d",(function(){return u})),r.d(t,"g",(function(){return l}));const s="meta",n="hits.total.relation",i="hits.total.value";function o(e){let t=0;return e.forEach((e=>{const r=e.properties?e.properties["aggregations._count.sum"]:0;r>0&&(t+=r)})),{docCount:t}}function a(e,t){let r=0,s=0,o=0;return e.forEach((e=>{var a,u;const l=e.properties?e.properties[i]:0;l>0&&(r+=l,s++),"gte"===(null==e||null===(a=e.properties)||void 0===a?void 0:a[n])&&(null==e||null===(u=e.properties)||void 0===u?void 0:u[i])>=t+1&&o++})),{totalFeaturesCount:r,tilesWithFeatures:s,tilesWithTrimmedResults:o}}function u(e,t){const r=`aggregations.${t}.min`,s=`aggregations.${t}.max`;return e.properties&&"number"==typeof e.properties[r]&&"number"==typeof e.properties[s]?{min:e.properties[r],max:e.properties[s]}:null}function l(e){var t,r,s,n;return!("boolean"!=typeof(null===(t=e.properties)||void 0===t?void 0:t.timed_out)||!e.properties.timed_out)||"number"==typeof(null===(r=e.properties)||void 0===r?void 0:r["_shards.failed"])&&e.properties["_shards.failed"]>0||"number"==typeof(null===(s=e.properties)||void 0===s?void 0:s["_clusters.skipped"])&&e.properties["_clusters.skipped"]>0||"number"==typeof(null===(n=e.properties)||void 0===n?void 0:n["_clusters.partial"])&&e.properties["_clusters.partial"]>0}},115:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return n}));const s="__trackedLayerDescriptor";function n(e){if("object"!=typeof e||null===e)return e;const t=Array.isArray(e)?[]:{};for(const r in e)r.startsWith("__")||(t[r]=n(e[r]));return t}},125:function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return layer_AbstractLayer}));var s=r(2),n=r.n(s),i=r(1),o=r(311),a=r(40),u=r.n(a),l=r(4),c=r.n(l),d=r(15),p=r(43),h=r(100),g=r(114),m=r(0),y=r(115),b=r(3);function _(e){const[t,r]=Object(l.useState)(void 0),[s,n]=Object(l.useState)(!1);if(Object(l.useEffect)((()=>{var s;t&&e.tileErrors.some((({tileKey:e})=>e===t.tileKey))||r(null===(s=e.tileErrors)||void 0===s?void 0:s[0])}),[e.tileErrors,t]),0===e.tileErrors.length||!t)return null;const i=[{id:0,items:e.tileErrors.map((t=>({name:f(t.tileKey),onClick:()=>{const s=e.tileErrors.find((({tileKey:e})=>e===t.tileKey));r(s),n(!1)}})))}];return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(d.EuiPopover,{id:"tileErrorsPopover",button:Object(b.jsx)(d.EuiButtonEmpty,{flush:"left",iconType:"arrowDown",iconSide:"right",onClick:()=>{n(!s)},size:"s"},f(t.tileKey)),isOpen:s,closePopover:()=>{n(!1)}},Object(b.jsx)(d.EuiContextMenu,{initialPanelId:0,panels:i,size:"s"})),Object(b.jsx)("p",null,null!==(a=(o=t).error)&&void 0!==a&&null!==(u=a.root_cause)&&void 0!==u&&null!==(p=u[0])&&void 0!==p&&p.reason?o.error.root_cause[0].reason:null!==(h=o.error)&&void 0!==h&&h.reason?o.error.reason:o.message));var o,a,u,p,h}function f(e){return i.i18n.translate("xpack.maps.tileError.title",{defaultMessage:"tile {tileKey}",values:{tileKey:e}})}const v=i.i18n.translate("xpack.maps.layer.incompleteResultsWarning",{defaultMessage:"Layer had issues returning data and results might be incomplete."});class layer_AbstractLayer{static createDescriptor(e){return{...e,sourceDescriptor:e.sourceDescriptor?e.sourceDescriptor:null,__dataRequests:u.a.get(e,"__dataRequests",[]),id:u.a.get(e,"id",Object(p.v4)()),label:e.label&&e.label.length>0?e.label:null,minZoom:u.a.get(e,"minZoom",m.mb),maxZoom:u.a.get(e,"maxZoom",m.hb),alpha:u.a.get(e,"alpha",.75),visible:u.a.get(e,"visible",!0),style:u.a.get(e,"style",null),includeInFitToBounds:"boolean"!=typeof e.includeInFitToBounds||e.includeInFitToBounds}}constructor({layerDescriptor:e,source:t}){n()(this,"_descriptor",void 0),n()(this,"_source",void 0),n()(this,"_dataRequests",void 0),this._descriptor=layer_AbstractLayer.createDescriptor(e),this._source=t,this._descriptor.__dataRequests?this._dataRequests=this._descriptor.__dataRequests.map((e=>new h.a(e))):this._dataRequests=[]}static getBoundDataForSource(e,t){return e.getStyle().sources[t].data}getDescriptor(){return this._descriptor}async cloneDescriptor(){const e=Object(y.b)(this._descriptor);e.id=Object(p.v4)();const t=await this.getDisplayName();return e.label=`Clone of ${t}`,e.sourceDescriptor=this.getSource().cloneDescriptor(),[e]}makeMbLayerId(e){return`${this.getId()}${m.jb}${e}`}isPreviewLayer(){return!!this._descriptor.__isPreviewLayer}supportsElasticsearchFilters(){return this.getSource().isESSource()}async supportsFitToBounds(){return await this.getSource().supportsFitToBounds()}async isFittable(){return await this.supportsFitToBounds()&&this.isVisible()&&this.isIncludeInFitToBounds()}isIncludeInFitToBounds(){return!!this._descriptor.includeInFitToBounds}async isFilteredByGlobalTime(){return!1}async getDisplayName(e){return this._descriptor.label?this._descriptor.label:(e?await e.getDisplayName():await this.getSource().getDisplayName())||`Layer ${this._descriptor.id}`}async getAttributions(){if(this.hasErrors()||!this.isVisible())return[];const e=this.getSource().getAttributionProvider();return e?e():void 0!==this._descriptor.attribution?[this._descriptor.attribution]:[]}getStyleForEditing(){throw new Error("Should implement AbstractLayer#getStyleForEditing")}getStyle(){throw new Error("Should implement AbstractLayer#getStyle")}getCurrentStyle(){throw new Error("Should implement AbstractLayer#getCurrentStyle")}getLabel(){return this._descriptor.label?this._descriptor.label:""}getLocale(){return null}getLayerIcon(e){return{icon:Object(b.jsx)(d.EuiIcon,{size:"m",type:this.getLayerTypeIconName()})}}async hasLegendDetails(){return!1}renderLegendDetails(){return null}getId(){return this._descriptor.id}getSource(){return this._source}getSourceForEditing(){return this._source}isVisible(){return!!this._descriptor.visible}showAtZoomLevel(e){return e>=this.getMinZoom()&&e<=this.getMaxZoom()}getMinZoom(){return"number"==typeof this._descriptor.minZoom?this._descriptor.minZoom:m.mb}getMaxZoom(){return"number"==typeof this._descriptor.maxZoom?this._descriptor.maxZoom:m.hb}getMinSourceZoom(){return this._source.getMinZoom()}getMbSourceId(){return this.getId()}_requiresPrevSourceCleanup(e){return!1}_removeStaleMbSourcesAndLayers(e){if(this._requiresPrevSourceCleanup(e)){const t=e.getStyle();t.layers.forEach((t=>{this.ownsMbLayerId(t.id)&&e.removeLayer(t.id)})),Object.keys(t.sources).some((t=>{this.ownsMbSourceId(t)&&e.removeSource(t)}))}}getAlpha(){return"number"==typeof this._descriptor.alpha?this._descriptor.alpha:1}getQuery(){return this._descriptor.query?this._descriptor.query:null}renderSourceSettingsEditor(e){return this.getSourceForEditing().renderSourceSettingsEditor(e)}getPrevRequestToken(e){const t=this.getDataRequest(e);if(t)return t.getRequestToken()}getInFlightRequestTokens(){if(!this._dataRequests)return[];const e=this._dataRequests.map((e=>e.getRequestToken()));return u.a.compact(e)}getSourceDataRequest(){return this.getDataRequest(m.zb)}getDataRequest(e){return this._dataRequests.find((t=>t.getDataId()===e))}isLayerLoading(e){if(!this.isVisible()||!this.showAtZoomLevel(e))return!1;const t=this._dataRequests.some((e=>e.isLoading()));return this._isTiled()?t||void 0===this._descriptor.__areTilesLoaded||!this._descriptor.__areTilesLoaded:!this.getSourceDataRequest()||t}hasErrors(){return this.getErrors().length>0}_getSourceErrorTitle(){return i.i18n.translate("xpack.maps.layer.sourceErrorTitle",{defaultMessage:"An error occurred when loading layer data"})}getErrors(){var e,t;const r=[],s=null===(e=this.getSourceDataRequest())||void 0===e?void 0:e.renderError();return s&&r.push({title:this._getSourceErrorTitle(),body:s}),null!==(t=this._descriptor.__tileErrors)&&void 0!==t&&t.length&&r.push({title:i.i18n.translate("xpack.maps.layer.tileErrorTitle",{defaultMessage:"An error occurred when loading layer tiles"}),body:Object(b.jsx)(_,{tileErrors:this._descriptor.__tileErrors})}),r}hasWarnings(){return!!this._dataRequests.some((e=>{var t;const r=e.getMeta();return null==r||null===(t=r.warnings)||void 0===t?void 0:t.length}))||!!this._isTiled()&&this._getTileMetaFeatures().some(g.g)}getWarnings(){const e=[],t=[];return this._dataRequests.forEach((e=>{var r;const s=e.getMeta();null!=s&&null!==(r=s.warnings)&&void 0!==r&&r.length&&t.push(...s.warnings)})),t.length&&e.push({title:Object(o.c)(t),body:Object(b.jsx)(c.a.Fragment,null,v," ",Object(b.jsx)(o.a,{displayAsLink:!0,warnings:t}))}),this._isTiled()&&this._getTileMetaFeatures().some(g.g)&&e.push({title:"",body:v}),e}async syncData(e){}getMbLayerIds(){throw new Error("Should implement AbstractLayer#getMbLayerIds")}ownsMbLayerId(e){throw new Error("Should implement AbstractLayer#ownsMbLayerId")}ownsMbSourceId(e){throw new Error("Should implement AbstractLayer#ownsMbSourceId")}syncLayerWithMB(e){throw new Error("Should implement AbstractLayer#syncLayerWithMB")}getLayerTypeIconName(){throw new Error("should implement Layer#getLayerTypeIconName")}async getBounds(e){return null}renderStyleEditor(e,t){const r=this.getStyleForEditing();return r?r.renderEditor(e,t):null}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}syncVisibilityWithMb(e,t){e.setLayoutProperty(t,"visibility",this.isVisible()?"visible":"none")}getType(){return this._descriptor.type}areLabelsOnTop(){return!1}supportsLabelsOnTop(){return!1}supportsLabelLocales(){return!1}async getLicensedFeatures(){return[]}getGeoFieldNames(){const e=this.getSource();return e.isESSource()?[e.getGeoFieldName()]:[]}async getStyleMetaDescriptorFromLocalFeatures(){return null}isBasemap(e){return!1}getParent(){return this._descriptor.parent}_getTileMetaFeatures(){var e;return null!==(e=this._descriptor.__tileMetaFeatures)&&void 0!==e?e:[]}_isTiled(){throw new Error("Must implement AbstractLayer#_isTiled")}}},128:function(e,t,r){e.exports=r(22)(70)},133:function(e,t,r){"use strict";r.d(t,"a",(function(){return AbstractSource}));var s=r(2),n=r.n(s),i=r(115),o=r(0);class AbstractSource{constructor(e){n()(this,"_descriptor",void 0),this._descriptor=e}cloneDescriptor(){return Object(i.b)(this._descriptor)}async supportsFitToBounds(){return!1}async getImmutableProperties(){return[]}getType(){return this._descriptor.type}async getDisplayName(){return""}getAttributionProvider(){return null}isFieldAware(){return!1}isQueryAware(){return!1}renderSourceSettingsEditor(e){return null}getApplyGlobalQuery(){return!1}getApplyGlobalTime(){return!1}getApplyForceRefresh(){return!1}getIndexPatternIds(){return[]}getQueryableIndexPatternIds(){return[]}isESSource(){return!1}async createFieldFormatter(e){return null}async getValueSuggestions(e,t){return[]}async isTimeAware(){return!1}isFilterByMapBounds(){return!1}getMinZoom(){return o.mb}getMaxZoom(){return o.hb}async getLicensedFeatures(){return[]}getUpdateDueToTimeslice(e,t){return!0}}},174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(54),n=r(4),i=s.__importDefault(r(333));t.default=function(e,t){var r=n.useState(t),s=r[0],o=r[1];return i.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),s}},311:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var s=r(1);const n=s.i18n.translate("searchResponseWarnings.viewDetailsButtonLabel",{defaultMessage:"View details",description:"View warning details button label"});function i(e){const t=function(e){const t=new Set;return e.forEach((e=>{Object.keys(e.clusters).forEach((r=>{"successful"!==e.clusters[r].status&&t.add(r)}))})),t}(e),r=s.i18n.translate("searchResponseWarnings.title.clustersClause",{defaultMessage:"Problem with {nonSuccessfulClustersCount} {nonSuccessfulClustersCount, plural, one {cluster} other {clusters}}",values:{nonSuccessfulClustersCount:t.size}});return e.length<=1?r:s.i18n.translate("searchResponseWarnings.title.clustersClauseAndRequestsClause",{defaultMessage:"{clustersClause} in {requestsCount} requests",values:{clustersClause:r,requestsCount:e.length}})}var o=r(4),a=r.n(o),u=r(3),l=r(15);const c=e=>{const[t,r]=Object(o.useState)(!1);if(!e.warnings.length)return null;if(1===e.warnings.length)return e.displayAsLink?Object(u.jsx)(l.EuiLink,{color:"primary",onClick:e.warnings[0].openInInspector},n):Object(u.jsx)(l.EuiButton,{color:"primary",onClick:e.warnings[0].openInInspector},n);const s=new Map,i=[{id:0,items:e.warnings.map((e=>{const t=s.has(e.requestName)?s.get(e.requestName)+1:1,n=t>1?`${e.requestName} (${t})`:e.requestName;return s.set(e.requestName,t),{name:n,onClick:()=>{r(!1),e.openInInspector()}}}))}];return Object(u.jsx)(l.EuiPopover,{id:"ViewDetailsPopover",button:e.displayAsLink?Object(u.jsx)(l.EuiLink,{color:"primary",onClick:()=>r(!t)},Object(u.jsx)(a.a.Fragment,null,n," ",Object(u.jsx)(l.EuiIcon,{type:"arrowRight",size:"s"}))):Object(u.jsx)(l.EuiButton,{color:"primary",onClick:()=>r(!t),iconSide:"right",iconType:"arrowRight"},n),isOpen:t,closePopover:()=>r(!1),panelPaddingSize:"none",anchorPosition:"downCenter"},Object(u.jsx)(l.EuiContextMenu,{initialPanelId:0,panels:i}))};function d(e,t,r,s,n){const i=[];return(e._clusters?Object.values(e._clusters.details).some((e=>"successful"!==e.status)):e.timed_out||e._shards.failed>0)&&i.push({type:"incomplete",requestName:s,clusters:e._clusters?e._clusters.details:{"(local)":{status:"partial",indices:"",took:e.took,timed_out:e.timed_out,_shards:e._shards,failures:e._shards.failures}},openInInspector:()=>{t.open({requests:r},{options:{initialRequestId:n,initialTabs:["clusters","response"]}})}}),i}r(8),r(23),r(174);var p=r(52),h=r.n(p);let g;!function(e){e.preboot="preboot",e.standard="standard"}(g||(g={}));const m="eui-global",y="eui-utilities",b=[l.euiStylisPrefixer],_=h()({key:"css",stylisPlugins:b,container:document.querySelector('meta[name="emotion"]')}),f=h()({key:m,stylisPlugins:b,container:document.querySelector(`meta[name="${m}"]`)}),v=h()({key:y,stylisPlugins:b,container:document.querySelector(`meta[name="${y}"]`)});_.compat=!0,f.compat=!0,v.compat=!0,r(58),r(2);class mount_point_portal_MountPointPortalErrorBoundary extends o.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(u.jsx)("p",null,s.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}},333:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),n="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;t.default=n},78:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return l}));var s=r(1);function n(){return s.i18n.translate("xpack.maps.source.dataSourceLabel",{defaultMessage:"Data source"})}function i(){return s.i18n.translate("xpack.maps.source.urlLabel",{defaultMessage:"Url"})}function o(e){switch(e){case"intersects":return s.i18n.translate("xpack.maps.common.esSpatialRelation.intersectsLabel",{defaultMessage:"intersects"});case"disjoint":return s.i18n.translate("xpack.maps.common.esSpatialRelation.disjointLabel",{defaultMessage:"disjoint"});case"within":return s.i18n.translate("xpack.maps.common.esSpatialRelation.withinLabel",{defaultMessage:"within"});case"contains":return s.i18n.translate("xpack.maps.common.esSpatialRelation.containsLabel",{defaultMessage:"contains"});default:return e}}function a(){return s.i18n.translate("xpack.maps.dataView.label",{defaultMessage:"Data view"})}function u(){return s.i18n.translate("xpack.maps.dataView.selectPlacholder",{defaultMessage:"Select data view"})}function l(e){return s.i18n.translate("xpack.maps.dataView.notFoundMessage",{defaultMessage:"Unable to find data view '{id}'",values:{id:e}})}}}]);