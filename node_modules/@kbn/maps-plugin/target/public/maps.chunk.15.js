/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[15],{223:function(e,t,i){"use strict";i.d(t,"a",(function(){return MapComponent}));var r=i(2),n=i.n(r),a=i(4),s=i.n(a),o=i(25),p=i(43),l=i(319),d=i(170),m=i(3);class MapComponent extends a.Component{constructor(e){super(e),n()(this,"_mapEmbeddable",void 0),n()(this,"_embeddableRef",s.a.createRef()),this._mapEmbeddable=new l.MapEmbeddable({editable:!1},{id:Object(p.v4)(),attributes:{title:this.props.title,layerListJSON:JSON.stringify([Object(d.createBasemapLayerDescriptor)(),...this.props.getLayerDescriptors()])},mapCenter:this.props.mapCenter}),this.props.onInitialRenderComplete&&this._mapEmbeddable.getOnRenderComplete$().pipe(Object(o.first)()).subscribe((()=>{this.props.onInitialRenderComplete&&this.props.onInitialRenderComplete()})),void 0!==this.props.isSharable&&this._mapEmbeddable.setIsSharable(this.props.isSharable)}componentDidMount(){this._embeddableRef.current&&this._mapEmbeddable.render(this._embeddableRef.current)}componentWillUnmount(){this._mapEmbeddable.destroy()}componentDidUpdate(){this._mapEmbeddable.updateInput({filters:this.props.filters,query:this.props.query,timeRange:this.props.timeRange})}render(){return Object(m.jsx)("div",{className:"mapEmbeddableContainer",ref:this._embeddableRef})}}},225:function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var r=i(43),n=i(0),a=i(86),s=i(122),o=i(76),p=i(83),l=i(84),d=i(93);const m=Object(p.i)();function b({label:e,emsLayerId:t,leftFieldName:i,termsFieldName:p,termsSize:b,colorSchema:c,indexPatternId:u,metricAgg:f,metricFieldName:h}){if(!(u&&t&&i&&p))return null;const C=function(e,t){const i=Object.keys(n.b).find((t=>n.b[t]===e)),r=i?n.b[i]:void 0;return r&&r!==n.b.COUNT&&t?r===n.b.PERCENTILE?{type:r,field:t,percentile:50}:{type:r,field:t}:{type:n.b.COUNT}}(f,h),y=Object(r.v4)(),O=Object(d.a)({aggType:C.type,aggFieldName:"field"in C?C.field:"",rightSourceId:y}),R=l.e.find((e=>e.value.toLowerCase()===c.toLowerCase())),g={type:n.Cb.ES_TERM_SOURCE,id:y,indexPatternId:u,term:p,metrics:[C],applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0};return void 0!==b&&(g.size=b),o.b.createDescriptor({label:e,joins:[{leftField:i,right:g}],sourceDescriptor:s.a.createDescriptor({id:t,tooltipProperties:["name",i]}),style:a.a.createDescriptor({[n.Ib.FILL_COLOR]:{type:n.Eb.DYNAMIC,options:{...m[n.Ib.FILL_COLOR].options,field:{name:O,origin:n.D.JOIN},color:R?R.value:"Yellow to Red",type:n.j.ORDINAL,fieldMetaOptions:{...m[n.Ib.FILL_COLOR].options.fieldMetaOptions,isEnabled:!1}}}})})}},607:function(e,t,i){"use strict";i.r(t),i(4);var r=i(223),n=i(225),a=i(3);t.default=function(e){const t={lat:e.visConfig.mapCenter[0],lon:e.visConfig.mapCenter[1],zoom:e.visConfig.mapZoom};return Object(a.jsx)(r.a,{title:e.visConfig.layerDescriptorParams.label,filters:e.filters,query:e.query,timeRange:e.timeRange,mapCenter:t,getLayerDescriptors:function(){const t=Object(n.a)(e.visConfig.layerDescriptorParams);return t?[t]:[]},onInitialRenderComplete:e.onInitialRenderComplete,isSharable:!1})}}}]);