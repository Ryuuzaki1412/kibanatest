/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[0],Array(105).concat([function(e,t,n){"use strict";n.d(t,"r",(function(){return a.s})),n.d(t,"j",(function(){return a.j})),n.d(t,"n",(function(){return a.m})),n.d(t,"t",(function(){return a.u})),n.d(t,"h",(function(){return a.h})),n.d(t,"q",(function(){return a.r})),n.d(t,"l",(function(){return a.l})),n.d(t,"s",(function(){return a.t})),n.d(t,"d",(function(){return a.c})),n.d(t,"e",(function(){return a.d})),n.d(t,"u",(function(){return a.v})),n.d(t,"a",(function(){return a.a})),n.d(t,"k",(function(){return a.k})),n.d(t,"f",(function(){return a.e})),n.d(t,"x",(function(){return a.x})),n.d(t,"c",(function(){return a.b})),n.d(t,"v",(function(){return a.w})),n.d(t,"i",(function(){return a.i})),n.d(t,"p",(function(){return a.q})),n.d(t,"y",(function(){return a.y})),n.d(t,"g",(function(){return a.f})),n.d(t,"o",(function(){return a.n})),n.d(t,"w",(function(){return i.a})),n.d(t,"m",(function(){return x})),n.d(t,"b",(function(){return v}));var a=n(123),i=n(169),r=n(54),s=n.n(r),o=n(1),l=n.n(o),c=n(6),u=n(10),d=n(15),p=n(251),m=n(250),h=n(197);const f=({onClose:e})=>{const{fleetServerHost:t,setFleetServerHost:n,fleetServerHosts:a,fleetServerPolicyId:i,serviceToken:r,status:s,error:o,submit:u,inputs:d}=Object(p.b)(),{isFleetServerReady:f}=Object(p.c)(),{hasRecentlyEnrolledFleetServers:g}=Object(h.a)(),E=[Object(m.d)({fleetServerHosts:a,fleetServerHost:t,setFleetServerHost:n,fleetServerPolicyId:i,serviceToken:r,status:s,error:o,submit:u,isFleetServerHostSubmitted:!1,inputs:d,onClose:e}),Object(m.e)({isFleetServerReady:f,fleetServerHost:null==t?void 0:t.host_urls[0],fleetServerPolicyId:i,serviceToken:r,deploymentMode:"quickstart",disabled:"success"!==s}),Object(m.b)({hasRecentlyEnrolledFleetServers:g,disabled:"success"!==s})];return l.a.createElement(c.EuiSteps,{steps:E,className:"eui-textLeft"})};var g=n(195);const E=s()(c.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1cg8svw-0"})(["height:100%;margin:0 auto;"]),y=({isFlyout:e=!1,currentTab:t,tabs:n,onTabClick:a})=>{const{docLinks:i}=Object(d.lc)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.EuiTitle,{size:"m"},l.a.createElement("h2",{"data-test-subj":"addFleetServerHeader"},l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.title",defaultMessage:"Add a Fleet Server"}))),l.a.createElement(c.EuiSpacer,{size:"m"}),l.a.createElement(c.EuiText,null,l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.instructions",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:l.a.createElement(c.EuiLink,{href:i.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})),l.a.createElement(c.EuiSpacer,{size:"xl"}),l.a.createElement(c.EuiButtonGroup,{legend:"Fleet Server instructions",isFullWidth:!0,options:n,idSelected:t,onChange:e=>a(e),style:{maxWidth:"500px"}}))},x=({onClose:e})=>{const{tabs:t,currentTab:n,setCurrentTab:a,currentTabContent:i}=(e=>{const[t,n]=Object(o.useState)("quickStart"),a={id:"quickStart",label:"Quick Start",content:l.a.createElement(f,{onClose:e}),"data-test-subj":"fleetServerFlyoutTab-quickStart"},i={id:"advanced",label:"Advanced",content:l.a.createElement(g.a,{onClose:e}),"data-test-subj":"fleetServerFlyoutTab-advanced"};return{tabs:[a,i],currentTab:t,setCurrentTab:n,currentTabContent:"quickStart"===t?a.content:i.content}})(e);return l.a.createElement(c.EuiFlyout,{"data-test-subj":"fleetServerFlyout",onClose:e,size:"m"},l.a.createElement(c.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"FleetAddFleetServerFlyoutTitle"},l.a.createElement(y,{tabs:t,currentTab:n,onTabClick:e=>a(e),isFlyout:!0})),l.a.createElement(c.EuiFlyoutBody,null,i))},v=()=>{const{docLinks:e}=Object(d.lc)(),t=Object(d.Hb)(),n=Object(o.useCallback)((()=>{t.openFleetServerFlyout()}),[t]);return l.a.createElement(E,{gutterSize:"none",justifyContent:"center",direction:"column"},l.a.createElement(c.EuiFlexGroup,{alignItems:"center",direction:"column"},l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiTitle,{size:"m"},l.a.createElement("h2",{"data-test-subj":"addFleetServerHeader"},l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.title",defaultMessage:"Add a Fleet Server"})))),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(k,null,l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.instructions",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:l.a.createElement(c.EuiLink,{href:e.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}))),l.a.createElement(c.EuiSpacer,{size:"s"}),l.a.createElement(c.EuiFlexItem,null,l.a.createElement(c.EuiToolTip,{content:l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.addFleetServerButton.tooltip",defaultMessage:"Fleet Server is a component of the Elastic Stack used to centrally manage Elastic Agents"})},l.a.createElement(c.EuiButton,{onClick:n,fill:!0,"data-test-subj":"fleetServerLanding.addFleetServerButton"},l.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.addFleetServerButton",defaultMessage:"Add Fleet Server"}))))))};var k=s()(c.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1cg8svw-1"})(["max-width:500px;text-align:center;"]);n(162)},function(e,t,n){"use strict";n.d(t,"l",(function(){return a.Fb})),n.d(t,"T",(function(){return a.Rc})),n.d(t,"M",(function(){return a.Ec})),n.d(t,"g",(function(){return a.i})),n.d(t,"P",(function(){return a.Gc})),n.d(t,"Z",(function(){return a.Yc})),n.d(t,"o",(function(){return a.Ib})),n.d(t,"r",(function(){return a.Tb})),n.d(t,"n",(function(){return a.Gb})),n.d(t,"C",(function(){return a.oc})),n.d(t,"B",(function(){return a.nc})),n.d(t,"y",(function(){return a.kc})),n.d(t,"x",(function(){return a.jc})),n.d(t,"Y",(function(){return a.Xc})),n.d(t,"X",(function(){return a.Wc})),n.d(t,"s",(function(){return a.Vb})),n.d(t,"t",(function(){return a.Wb})),n.d(t,"G",(function(){return a.uc})),n.d(t,"u",(function(){return a.Xb})),n.d(t,"F",(function(){return a.sc})),n.d(t,"z",(function(){return a.mc})),n.d(t,"D",(function(){return a.pc})),n.d(t,"E",(function(){return a.qc})),n.d(t,"v",(function(){return a.bc})),n.d(t,"j",(function(){return a.I})),n.d(t,"W",(function(){return a.Vc})),n.d(t,"i",(function(){return a.F})),n.d(t,"w",(function(){return a.ec})),n.d(t,"H",(function(){return a.wc})),n.d(t,"R",(function(){return a.Lc})),n.d(t,"Q",(function(){return a.Jc})),n.d(t,"f",(function(){return a.h})),n.d(t,"U",(function(){return a.Uc})),n.d(t,"b",(function(){return a.a})),n.d(t,"L",(function(){return a.Ac})),n.d(t,"c",(function(){return a.d})),n.d(t,"q",(function(){return a.Rb})),n.d(t,"K",(function(){return a.zc})),n.d(t,"m",(function(){return u})),n.d(t,"N",(function(){return d.a})),n.d(t,"h",(function(){return m})),n.d(t,"O",(function(){return f})),n.d(t,"e",(function(){return S})),n.d(t,"I",(function(){return F})),n.d(t,"S",(function(){return C})),n.d(t,"A",(function(){return D})),n.d(t,"V",(function(){return w})),n.d(t,"a",(function(){return M})),n.d(t,"k",(function(){return T})),n.d(t,"d",(function(){return I})),n.d(t,"J",(function(){return O})),n.d(t,"p",(function(){return L}));var a=n(11),i=n(1),r=n.n(i),s=n(4),o=n(122);const l={href:o.j.integrations()[1],text:s.i18n.translate("xpack.fleet.breadcrumbs.integrationsAppTitle",{defaultMessage:"Integrations"}),deepLinkId:"integrations"},c={integrations:()=>[l],integrations_all:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.allIntegrationsPageTitle",{defaultMessage:"Browse integrations"})}],integrations_installed:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.installedIntegrationsPageTitle",{defaultMessage:"Installed integrations"})}],integration_details_overview:({pkgTitle:e})=>[l,{text:e}],integration_policy_edit:({pkgTitle:e,pkgkey:t,policyName:n})=>[l,{href:o.j.integration_details_policies({pkgkey:t})[1],text:e},{text:n}],integration_policy_upgrade:({pkgTitle:e,pkgkey:t,policyName:n})=>[l,{href:o.j.integration_details_policies({pkgkey:t})[1],text:e},{text:n},{text:s.i18n.translate("xpack.fleet.breadcrumbs.upgradePackagePolicyPageTitle",{defaultMessage:"Upgrade integration "})}]};function u(e,t={}){var n;const{chrome:r,http:s,application:l}=Object(a.Rc)(),u=Object(i.useRef)();if(u.current===e)return;u.current=e;const d=(null===(n=c[e])||void 0===n?void 0:n.call(c,t).map((e=>{const t=e.href?s.basePath.prepend(`${o.b}${e.href}`):void 0;return{...e,href:t,onClick:t?e=>{e.preventDefault(),l.navigateToUrl(t)}:void 0}})))||[],p=[...d].reverse().map((e=>e.text));r.docTitle.change(p),r.setBreadcrumbs(d)}var d=n(66),p=n(281);const m="id",h=["name","title","description"];function f(e,t){const n=Object(i.useRef)(new p.Search(m));if(t)return n;const a=new p.Search(m);return a.indexStrategy=new p.PrefixIndexStrategy,h.forEach((e=>a.addIndex(e))),a.addDocuments(e),n.current=a,n}var g=n(294),E=n.n(g),y=n(20),x=n(10),v=n(37),k=n(32),b=n(124);const[S,F,C,D,w]=E()((function({notifications:e,theme$:t}){const n=Object(y.useHistory)(),{getPath:s}=Object(a.Ec)(),[o,l]=Object(i.useState)({}),c=L(),u=Object(i.useCallback)((({name:e,status:t,version:n})=>{const a={status:t,version:n};l((t=>({...t,[e]:a})))}),[]),d=Object(i.useCallback)((e=>o[e]),[o]),p=Object(i.useCallback)((async i=>{const{name:o,version:l,title:m,fromUpdate:h=!1,isReinstall:f=!1,force:g=!1}=i,E=d(o),y={...E,name:o,status:f?k.b.reinstalling:k.b.installing};u(y);const S=await Object(a.U)(o,l,f||g);if(S.error){if(Object(b.f)(S.error))return(async(e,t)=>{await c(e)?p({...e,force:!0}):u({...t,name:e.name})})(i,E);u(h?{...E,name:o}:{name:o,status:k.b.notInstalled,version:l}),e.toasts.addWarning({title:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorTitle",defaultMessage:"Failed to install {title} package",values:{title:m}}),{theme$:t}),text:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallErrorDescription",defaultMessage:"Something went wrong while trying to install this package. Please try again later."}),{theme$:t}),iconType:"error"})}else{if(u({name:o,status:k.b.installed,version:l}),h){const e=s("integration_details_settings",{pkgkey:`${o}-${l}`});n.push(e)}f?e.toasts.addSuccess({title:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageReinstallSuccessTitle",defaultMessage:"Reinstalled {title}",values:{title:m}}),{theme$:t}),text:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageReinstallSuccessDescription",defaultMessage:"Successfully reinstalled {title}",values:{title:m}}),{theme$:t})}):e.toasts.addSuccess({title:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessTitle",defaultMessage:"Installed {title}",values:{title:m}}),{theme$:t}),text:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessDescription",defaultMessage:"Successfully installed {title}",values:{title:m}}),{theme$:t})})}}),[d,u,e.toasts,t,s,n]),m=Object(i.useCallback)((async({name:i,version:o,title:l,redirectToVersion:c})=>{if(u({name:i,status:k.b.uninstalling,version:o}),(await Object(a.sb)(i,o)).error)u({name:i,status:k.b.installed,version:o}),e.toasts.addWarning({title:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorTitle",defaultMessage:"Failed to uninstall {title} package",values:{title:l}}),{theme$:t}),text:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorDescription",defaultMessage:"Something went wrong while trying to uninstall this package. Please try again later."}),{theme$:t}),iconType:"error"});else if(u({name:i,status:k.b.notInstalled,version:null}),e.toasts.addSuccess({title:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessTitle",defaultMessage:"Uninstalled {title}",values:{title:l}}),{theme$:t}),text:Object(v.toMountPoint)(r.a.createElement(x.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessDescription",defaultMessage:"Successfully uninstalled {title}",values:{title:l}}),{theme$:t})}),c!==o){const e=s("integration_details_settings",{pkgkey:`${i}-${c}`});n.push(e)}}),[e.toasts,u,s,n,t]);return{packages:o,installPackage:p,setPackageInstallStatus:u,getPackageInstallStatus:d,uninstallPackage:m}}),(e=>e.installPackage),(e=>e.setPackageInstallStatus),(e=>e.getPackageInstallStatus),(e=>e.uninstallPackage)),A=Object(i.createContext)({getId:()=>{}}),M=({children:e})=>{const t=Object(a.yc)(),n=Object(i.useRef)(null==t?void 0:t.forAgentPolicyId),s=Object(i.useCallback)((()=>n.current),[]);return r.a.createElement(A.Provider,{value:{getId:s}},e)},T=()=>{const e=Object(i.useContext)(A);if(!e)throw new Error("useAgentPolicyContext can only be used inside of AgentPolicyContextProvider");return e},P=Object(i.createContext)({getFromIntegrations:()=>{}}),I=({children:e})=>{const t=Object(a.yc)(),n=Object(i.useRef)(null==t?void 0:t.fromIntegrations),s=Object(i.useCallback)((()=>n.current),[]);return r.a.createElement(P.Provider,{value:{getFromIntegrations:s}},e)},O=()=>{const e=Object(i.useContext)(P);if(!e)throw new Error("useIntegrationsStateContext can only be used inside of IntegrationsStateContextProvider");return e};var j=n(15),B=n(121);const L=()=>{const{overlays:e,docLinks:t}=Object(j.lc)();return Object(i.useCallback)((n=>(({pkg:e,overlays:t,docLinks:n})=>new Promise((a=>{const i=t.openModal(Object(v.toMountPoint)(r.a.createElement(B.d,{pkg:e,onConfirm:()=>{i.close(),a(!0)},onCancel:()=>{i.close(),a(!1)},docLinks:n})))})))({pkg:n,overlays:e,docLinks:t})),[t,e])};n(70)},function(e,t,n){e.exports=n(36)(8)},,,,function(e,t,n){"use strict";e.exports=function(e){return e<-2}},function(e,t,n){"use strict";var a=n(126);e.exports=function(e,t,n,i){var r=i?i-1:1/0,s=0;return function(i){return a(i)?(e.enter(n),o(i)):t(i)};function o(i){return a(i)&&s++<r?(e.consume(i),o):(e.exit(n),t(i))}}},function(e,t,n){"use strict";var a=n(141),i=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],r=["scalar","sequence","mapping"];e.exports=function(e,t){var n,s;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===i.indexOf(t))throw new a('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(n=t.styleAliases||null,s={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){s[String(t)]=e}))})),s),-1===r.indexOf(this.kind))throw new a('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(20);const l={services:{}},c=Object(r.createContext)(l);var u=n(254),d=n.n(u),p=n(8);const m=({children:e,component:t,render:n,...a})=>{const l=Object(r.useMemo)((()=>{if(t)return e=>Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(h,null),Object(p.jsx)(t,e))}),[t]);if(l)return Object(p.jsx)(o.Route,i()({},a,{component:l}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(p.jsx)(o.Route,i()({},a,{render:e=>Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(h,null),t(e))}))}return Object(p.jsx)(o.Route,a,Object(p.jsx)(h,null),e)},h=()=>{const{executionContext:e}=Object(r.useContext)(c).services,t=Object(o.useRouteMatch)();return function(e,t){d()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var f=n(94);const g=({children:e,...t})=>Object(p.jsx)(o.Router,t,Object(p.jsx)(f.CompatRouter,null,e));var E=n(14);const y=({legacySwitch:e=!0,children:t})=>{const n=Object(o.useRouteMatch)();return e?Object(p.jsx)(o.Switch,null,t):Object(p.jsx)(f.Routes,null,r.Children.map(t,(e=>{if(s.a.isValidElement(e)&&e.type===m){var a;const i=Object(E.replace)(null==e?void 0:e.props.path,n.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(p.jsx)(f.Route,{path:i,element:Object(p.jsx)(s.a.Fragment,null,Object(p.jsx)(h,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(p.jsx)(e.props.component,null)||r&&r()||t)})}return e})))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a.a})),n.d(t,"d",(function(){return a.b})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var a=n(150),i=n(1),r=n.n(i),s=n(10),o=n(15),l=n(55),c=n(6);const u=()=>r.a.createElement(c.EuiFlexGroup,{direction:"column",gutterSize:"m"},r.a.createElement(c.EuiFlexItem,null,r.a.createElement(c.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},r.a.createElement(c.EuiFlexItem,{grow:!1},r.a.createElement(c.EuiTitle,{size:"l"},r.a.createElement("h1",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageTitle",defaultMessage:"Fleet"})))))),r.a.createElement(c.EuiFlexItem,null,r.a.createElement(c.EuiText,{color:"subdued"},r.a.createElement("p",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageSubtitle",defaultMessage:"Centralized management for Elastic Agents."}))))),d=({section:e,children:t,rightColumn:n})=>{const{getHref:i}=Object(o.cc)(),{agents:c}=Object(o.zb)(),{agentTamperProtectionEnabled:d}=l.b.get(),p=[{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.agentsLinkText",defaultMessage:"Agents"}),isSelected:"agents"===e,href:i("agent_list"),disabled:!(null!=c&&c.enabled),"data-test-subj":"fleet-agents-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.policiesLinkText",defaultMessage:"Agent policies"}),isSelected:"agent_policies"===e,href:i("policies_list"),"data-test-subj":"fleet-agent-policies-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.enrollmentTokensText",defaultMessage:"Enrollment tokens"}),isSelected:"enrollment_tokens"===e,href:i("enrollment_tokens"),"data-test-subj":"fleet-enrollment-tokens-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.uninstallTokensText",defaultMessage:"Uninstall tokens"}),isSelected:"uninstall_tokens"===e,href:i("uninstall_tokens"),"data-test-subj":"fleet-uninstall-tokens-tab",isHidden:!d},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.dataStreamsLinkText",defaultMessage:"Data streams"}),isSelected:"data_streams"===e,href:i("data_streams"),"data-test-subj":"fleet-datastreams-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.settingsLinkText",defaultMessage:"Settings"}),isSelected:"settings"===e,href:i("settings"),"data-test-subj":"fleet-settings-tab"}].filter((({isHidden:e})=>!e));return r.a.createElement(a.a,{leftColumn:r.a.createElement(u,null),rightColumn:n,tabs:p},t)}},function(e,t,n){"use strict";var a=n(257);e.exports=a},function(e,t,n){"use strict";var a=n(123);n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.e})),n.d(t,"d",(function(){return a.g})),n.d(t,"e",(function(){return a.j})),n.d(t,"f",(function(){return a.k})),n.d(t,"g",(function(){return a.l})),n.d(t,"h",(function(){return a.p})),n.d(t,"i",(function(){return a.q})),n.d(t,"j",(function(){return a.r})),n.d(t,"k",(function(){return a.s})),n.d(t,"l",(function(){return a.v})),n.d(t,"m",(function(){return a.z}))},function(e,t,n){"use strict";var a=n(9);n.d(t,"a",(function(){return a.d})),n.d(t,"b",(function(){return a.m})),n.d(t,"c",(function(){return a.n})),n.d(t,"d",(function(){return a.o})),n.d(t,"e",(function(){return a.p})),n.d(t,"f",(function(){return a.q})),n.d(t,"g",(function(){return a.s})),n.d(t,"h",(function(){return a.t})),n.d(t,"i",(function(){return a.u})),n.d(t,"j",(function(){return a.v}))},function(e,t,n){"use strict";n.d(t,"s",(function(){return a.a})),n.d(t,"j",(function(){return o})),n.d(t,"m",(function(){return c})),n.d(t,"u",(function(){return u.b})),n.d(t,"h",(function(){return h})),n.d(t,"r",(function(){return E})),n.d(t,"l",(function(){return y})),n.d(t,"o",(function(){return C})),n.d(t,"t",(function(){return w})),n.d(t,"c",(function(){return A.a})),n.d(t,"d",(function(){return M.a})),n.d(t,"v",(function(){return j})),n.d(t,"a",(function(){return B})),n.d(t,"k",(function(){return L})),n.d(t,"e",(function(){return z})),n.d(t,"x",(function(){return O.c})),n.d(t,"b",(function(){return O.a})),n.d(t,"w",(function(){return R.a})),n.d(t,"g",(function(){return U})),n.d(t,"i",(function(){return W})),n.d(t,"p",(function(){return X})),n.d(t,"q",(function(){return q})),n.d(t,"z",(function(){return V})),n.d(t,"y",(function(){return re})),n.d(t,"f",(function(){return se.a})),n.d(t,"n",(function(){return oe.a}));var a=n(140),i=n(1),r=n.n(i),s=n(6);const o=({title:e,error:t})=>r.a.createElement(s.EuiCallOut,{title:e,color:"danger",iconType:"warning"},r.a.createElement("p",null,"string"==typeof t?t:t.message));var l=n(10);const c=()=>r.a.createElement(s.EuiEmptyPrompt,{title:r.a.createElement("h2",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.setup.titleLabel",defaultMessage:"Loading Fleet..."})),titleSize:"m",body:r.a.createElement(s.EuiLoadingSpinner,{size:"xl"})});var u=n(58),d=n(18),p=n.n(d),m=n(4);const h=r.a.memo((({button:e,onChange:t,isOpen:n,...a})=>{const[o,l]=Object(i.useState)(!1),c=Object(i.useCallback)((()=>{t?t(!1):l(!1)}),[l,t]),u=Object(i.useCallback)((()=>{t?t(!n):l(!o)}),[o,t,n]),d=e?r.a.createElement(s.EuiButton,p()({},e.props,{onClick:u,isDisabled:a.isManaged}),e.children):r.a.createElement(s.EuiButtonIcon,{isDisabled:a.isManaged,iconType:"boxesHorizontal",onClick:u,"aria-label":m.i18n.translate("xpack.fleet.genericActionsMenuText",{defaultMessage:"Open"}),"data-test-subj":"agentActionsBtn"});return r.a.createElement(s.EuiPopover,{anchorPosition:"downRight",panelPaddingSize:"none",button:a.isManaged?r.a.createElement(s.EuiToolTip,{title:m.i18n.translate("xpack.fleet.externallyManagedLabel",{defaultMessage:"This is externally managed integration policy."})},d):d,isOpen:void 0===n?o:n,closePopover:c},"items"in a?r.a.createElement(s.EuiContextMenuPanel,{items:a.items}):r.a.createElement(s.EuiContextMenu,{panels:a.panels,initialPanelId:0}))}));var f=n(11),g=n(9);const E=Object(i.memo)((({count:e,agentPolicyId:t,showAgentText:n,...a})=>{const{getHref:i}=Object(f.Ec)(),o=n?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicy.linkedAgentCountText",defaultMessage:"{count, plural, one {# agent} other {# agents}}",values:{count:e}}):e;return e>0?r.a.createElement(s.EuiLink,p()({},a,{href:i("agent_list",{kuery:`${g.b}.policy_id : ${t}`})}),o):r.a.createElement("span",{"data-test-subj":a["data-test-subj"],className:a.className},o)})),y=Object(i.memo)((({children:e})=>r.a.createElement(s.EuiErrorBoundary,null,r.a.createElement(i.Suspense,{fallback:r.a.createElement(a.a,null)},e))));var x=n(54),v=n.n(x);const k=v.a.div.withConfig({displayName:"Container",componentId:"sc-qzdnog-0"})(["border-bottom:",";background-color:",";@media (max-width:767px){.euiFlexItem{margin-bottom:0 !important;}}"],(e=>e.theme.eui.euiBorderThin),(e=>e.theme.eui.euiPageBackgroundColor)),b=v.a.div.withConfig({displayName:"Wrapper",componentId:"sc-qzdnog-1"})(["max-width:","px;margin-left:auto;margin-right:auto;padding-top:",";padding-left:",";padding-right:",";"],(e=>e.maxWidth||1200),(e=>e.theme.eui.euiSizeXL),(e=>e.theme.eui.euiSizeM),(e=>e.theme.eui.euiSizeM)),S=v()(s.EuiTabs).withConfig({displayName:"Tabs",componentId:"sc-qzdnog-2"})(["top:1px;&:before{height:0px;}"]),F=Object(i.memo)((({leftColumn:e,rightColumn:t,rightColumnGrow:n})=>r.a.createElement(s.EuiFlexGroup,{alignItems:"center"},e?r.a.createElement(s.EuiFlexItem,null,e):null,t?r.a.createElement(s.EuiFlexItem,{grow:n},t):null))),C=({leftColumn:e,rightColumn:t,rightColumnGrow:n,topContent:a,tabs:i,maxWidth:o,tabsClassName:l,"data-test-subj":c})=>r.a.createElement(k,{"data-test-subj":c},r.a.createElement(b,{maxWidth:o},a,r.a.createElement(F,{leftColumn:e,rightColumn:t,rightColumnGrow:n}),r.a.createElement(s.EuiFlexGroup,null,i?r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(S,{className:l},i.map(((e,t)=>r.a.createElement(s.EuiTab,p()({},e,{key:`${e.id}-${t}`}),e.name))))):r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiSpacer,{size:"l"})))));function D(e){if(""===e)return[m.i18n.translate("xpack.fleet.newEnrollmentKeyForm.policyIdRequireErrorMessage",{defaultMessage:"Policy is required"})]}const w=({onClose:e,agentPolicies:t=[]})=>{const{notifications:n}=Object(f.Rc)(),a=Object(i.useMemo)((()=>t.filter((e=>!e.is_managed)).map((e=>({value:e.id,text:e.name})))),[t]),o=function(t,a,r){const[s,o]=Object(i.useState)(!1),l=Object(f.xc)(""),c=Object(f.xc)(t,D);return{isLoading:s,onSubmit:async t=>{if(t.preventDefault(),c.validate()&&l.validate()){o(!0);try{var a;const t=await Object(f.n)({name:l.value,policy_id:c.value});if(t.error)throw t.error;c.clear(),l.clear(),o(!1),null!==(a=t.data)&&void 0!==a&&a.item&&(i=t.data.item,e(i),n.toasts.addSuccess(m.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"})))}catch(e){o(!1),(e=>{n.toasts.addError(e,{title:"Error"})})(e)}}var i},policyIdInput:c,apiKeyNameInput:l}}(a.length>0?a[0].value:void 0),l=r.a.createElement(s.EuiForm,null,r.a.createElement("form",{onSubmit:o.onSubmit},r.a.createElement(s.EuiFormRow,{label:m.i18n.translate("xpack.fleet.newEnrollmentKey.nameLabel",{defaultMessage:"Token name"}),helpText:m.i18n.translate("xpack.fleet.newEnrollmentKey.helpText",{defaultMessage:"Token id will be used when this is left empty."})},r.a.createElement(s.EuiFieldText,p()({"data-test-subj":"createEnrollmentTokenNameField",name:"name",autoComplete:"off",placeholder:m.i18n.translate("xpack.fleet.newEnrollmentKey.placeholder",{defaultMessage:"Enter a token name"})},o.apiKeyNameInput.props))),r.a.createElement(s.EuiFormRow,p()({label:m.i18n.translate("xpack.fleet.newEnrollmentKey.policyLabel",{defaultMessage:"Policy"})},o.policyIdInput.formRowProps),r.a.createElement(s.EuiSelect,p()({"data-test-subj":"createEnrollmentTokenSelectField",required:!0},o.policyIdInput.props,{options:a})))));return r.a.createElement(s.EuiConfirmModal,{isLoading:o.isLoading,title:m.i18n.translate("xpack.fleet.newEnrollmentKey.modalTitle",{defaultMessage:"Create enrollment token"}),onCancel:()=>e(),cancelButtonText:m.i18n.translate("xpack.fleet.newEnrollmentKey.cancelButtonLabel",{defaultMessage:"Cancel"}),onConfirm:o.onSubmit,confirmButtonText:m.i18n.translate("xpack.fleet.newEnrollmentKey.submitButton",{defaultMessage:"Create enrollment token"}),confirmButtonDisabled:!o.policyIdInput.value},l)};var A=n(160),M=n(161);const T=v()(s.EuiContextMenuItem).withConfig({displayName:"DangerEuiContextMenuItem",componentId:"sc-14uwxwe-0"})(["color:",";"],(e=>e.theme.eui.euiColorDangerText));var P=n(0);const I=({agentPolicy:e,children:t})=>{const{notifications:n}=Object(f.Rc)(),{agents:{enabled:a}}=Object(f.Jb)(),[o,c]=Object(i.useState)([]),[u,d]=Object(i.useState)(!1),[p,h]=Object(i.useState)(!1),[g,E]=Object(i.useState)(0),[y,x]=Object(i.useState)(!1),v=Object(i.useRef)(null),k=Object(i.useMemo)((()=>async()=>{if(p||!a||!e)return;h(!0);const{data:t}=await Object(f.tb)({path:P.f.LIST_PATTERN,method:"get",query:{page:1,perPage:1,kuery:`${P.b}.policy_id : ${e.id}`},version:P.m.public.v1});E((null==t?void 0:t.total)||0),h(!1)}),[e,a,p]),b=Object(i.useMemo)((()=>(e,t=(()=>{}))=>{if(!Array.isArray(e)||0===e.length)throw new Error("No package policies specified for deletion");d(!0),c(e),k(),v.current=t}),[k]),S=Object(i.useMemo)((()=>()=>{c([]),x(!1),h(!1),d(!1)}),[]),F=Object(i.useMemo)((()=>async()=>{x(!0);try{const{data:e}=await Object(f.v)({packagePolicyIds:o}),t=(null==e?void 0:e.filter((e=>e.success)))||[],a=(null==e?void 0:e.filter((e=>!e.success)))||[];if(t.length){const e=t.length>1?m.i18n.translate("xpack.fleet.deletePackagePolicy.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} integrations",values:{count:t.length}}):m.i18n.translate("xpack.fleet.deletePackagePolicy.successSingleNotificationTitle",{defaultMessage:"Deleted integration '{id}'",values:{id:t[0].name||t[0].id}});n.toasts.addSuccess(e)}if(a.length){const e=a.length>1?m.i18n.translate("xpack.fleet.deletePackagePolicy.failureMultipleNotificationTitle",{defaultMessage:"Error deleting {count} integrations",values:{count:a.length}}):m.i18n.translate("xpack.fleet.deletePackagePolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting integration '{id}'",values:{id:a[0].id}});n.toasts.addDanger(e)}v.current&&v.current(t.map((e=>e.id)))}catch(e){n.toasts.addDanger(m.i18n.translate("xpack.fleet.deletePackagePolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting integration"}))}S()}),[S,o,n.toasts]);return r.a.createElement(i.Fragment,null,t(b),u?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.deleteMultipleTitle",defaultMessage:"Delete {count, plural, one {integration} other {# integrations}}?",values:{count:o.length}}),onCancel:S,onConfirm:F,cancelButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:y||p?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading…"}):r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete {agentPoliciesCount, plural, one {integration} other {integrations}}",values:{agentPoliciesCount:o.length}}),buttonColor:"danger",confirmButtonDisabled:y||p},p?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking affected agents…"}):g?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiCallOut,{color:"danger",title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsTitle",defaultMessage:"This action will affect {agentsCount} {agentsCount, plural, one {agent} other {agents}}.",values:{agentsCount:g}})},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsMessage",defaultMessage:"Fleet has detected that {agentPolicyName} is already in use by some of your agents.",values:{agentPolicyName:r.a.createElement("strong",null,null==e?void 0:e.name)}})),r.a.createElement(s.EuiSpacer,{size:"l"})):null,!p&&r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.generalMessage",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"})):null)};var O=n(157);const j=({agentPolicy:e,packagePolicy:t,showAddAgent:n,upgradePackagePolicyHref:a,defaultIsOpen:o=!1,from:c})=>{var u,d;const[p,m]=Object(i.useState)(!1),{getHref:g}=Object(f.Ec)(),E=Object(f.Fb)().integrations.writeIntegrationPolicies,y=Object(f.Db)(),[x,v]=Object(i.useState)(o),k=Boolean(t.is_managed),b=Boolean(null==e?void 0:e.is_managed),S=n&&e&&!b,F=Object(i.useMemo)((()=>()=>m(!1)),[]),C=[...S?[r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsAddAgentItem",icon:"plusInCircle",onClick:()=>{v(!1),m(!0)},key:"addAgent"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"}))]:[],r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsEditItem",disabled:!E||!e,icon:"pencil",href:`${g("integration_policy_edit",{packagePolicyId:t.id})}${c?`?from=${c}`:""}`,key:"packagePolicyEdit"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.editActionTitle",defaultMessage:"Edit integration"})),r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsUpgradeItem",disabled:!t.hasUpgrade||!E||!a,icon:"refresh",href:a,key:"packagePolicyUpgrade"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeActionTitle",defaultMessage:"Upgrade integration policy"}))];return e&&b||C.push(r.a.createElement(I,{agentPolicy:e,key:"packagePolicyDelete"},(e=>r.a.createElement(T,{"data-test-subj":"PackagePolicyActionsDeleteItem",disabled:!E,icon:"trash",onClick:()=>{e([t.id],(()=>{v(!1),y()}))}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.deleteActionTitle",defaultMessage:"Delete integration"}))))),r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(s.EuiPortal,null,r.a.createElement(O.a,{agentPolicy:e,onClose:F,isIntegrationFlow:!0,installedPackagePolicy:{name:(null==t||null===(u=t.package)||void 0===u?void 0:u.name)||"",version:(null==t||null===(d=t.package)||void 0===d?void 0:d.version)||""}})),r.a.createElement(h,{isManaged:k,isOpen:x,items:C,onChange:e=>v(e)}))},B=({button:e,isOpen:t,offset:n,closePopover:a})=>{const{docLinks:o,uiSettings:c}=Object(f.Rc)(),u=Object(x.useTheme)(),d={},m=Object(i.useMemo)((()=>c.get("hideAnnouncements")),[c]);return void 0!==n&&(d.offset=n),m?e:r.a.createElement(s.EuiTourStep,p()({},d,{content:r.a.createElement(s.EuiText,{size:"m",style:{width:302}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.popoverBody",defaultMessage:"For integrations to work successfully, add {elasticAgent} to your host to collect data and send it to Elastic Stack. {learnMoreLink}",values:{elasticAgent:r.a.createElement("strong",null,"Elastic Agent"),learnMoreLink:r.a.createElement(s.EuiLink,{target:"_blank",external:!0,href:o.links.fleet.elasticAgent},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.documentationLink",defaultMessage:"Learn more about Elastic Agent."}))}})),zIndex:u.eui.euiZLevel1-1,isStepOpen:t,minWidth:300,onFinish:()=>{},step:1,stepsTotal:1,title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.title",defaultMessage:"Don't forget to add the agent to your host"}),anchorPosition:"downCenter",subtitle:null,"data-test-subj":"addAgentHelpPopover",footerAction:r.a.createElement(s.EuiLink,{onClick:()=>{a()}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.footActionButton",defaultMessage:"Got it"}))}),e)},L=({tooltip:e,...t})=>e?r.a.createElement(s.EuiToolTip,e,r.a.createElement(s.EuiButton,t)):r.a.createElement(s.EuiButton,t),_={minWidth:0},N={whiteSpace:"nowrap"},z=Object(i.memo)((({policy:e,agent:t,direction:n="row"})=>{const{getHref:a}=Object(f.Ec)(),{name:i,id:o,is_managed:c}=e,u=t?t.policy_revision:e.revision;return r.a.createElement(s.EuiFlexGroup,{direction:n,gutterSize:"column"===n?"none":"s",alignItems:"baseline",style:_,responsive:!1,justifyContent:"flexStart"},r.a.createElement(s.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},r.a.createElement(s.EuiFlexGroup,{style:_,gutterSize:"s",alignItems:"baseline",responsive:!1},r.a.createElement(s.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},r.a.createElement(s.EuiLink,{className:"eui-textTruncate",href:a("policy_details",{policyId:o}),title:i||o,"data-test-subj":"agentPolicyNameLink"},i||o)),c&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiIconTip,{title:"Hosted agent policy",content:m.i18n.translate("xpack.fleet.agentPolicySummaryLine.hostedPolicyTooltip",{defaultMessage:"This policy is managed outside of Fleet. Most actions related to this policy are unavailable."}),type:"lock",size:"m",color:"subdued"})))),u&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{color:"subdued",size:"xs",style:N},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicySummaryLine.revisionNumber",defaultMessage:"rev. {revNumber}",values:{revNumber:u}}))))}));var R=n(191);const U=({onCancel:e,onConfirm:t,pkg:n,docLinks:a})=>{const i=n&&n.name&&n.version?m.i18n.translate("xpack.fleet.ConfirmForceInstallModal.calloutTitleWithPkg",{defaultMessage:"Integration {pkgName}-{pkgVersion} has failed verification",values:{pkgName:n.name,pkgVersion:n.version}}):m.i18n.translate("xpack.fleet.ConfirmForceInstallModal.calloutTitleNoPkg",{defaultMessage:"The integration has failed verification"});return r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement("span",{className:"eui-textBreakWord"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.title",defaultMessage:"Install unverified integration?"})),onCancel:e,onConfirm:t,cancelButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.confirmButtonLabel",defaultMessage:"Install anyway"}),buttonColor:"danger","data-test-subj":"confirmForceInstallModal"},r.a.createElement(s.EuiCallOut,{title:i,color:"warning",iconType:"warning",children:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.calloutBody",defaultMessage:"This integration contains an unsigned package of unknown authenticity and could contain malicious files. Learn more about {learnMoreLink}.",values:{learnMoreLink:r.a.createElement(s.EuiLink,{target:"_blank",external:!0,href:a.links.fleet.packageSignatures},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.learnMoreLink",defaultMessage:"package signatures"}))}})}))};var H=n(46),K=n(37);const W=({isDisabled:e,request:t,title:n,description:a,btnProps:o={}})=>{const c=Object(i.useRef)(),u=Object(f.Rc)(),d=Object(i.useCallback)((()=>{const e=u.overlays.openFlyout(Object(K.toMountPoint)(r.a.createElement(K.KibanaContextProvider,{services:u},r.a.createElement($,{closeFlyout:()=>e.close(),request:t,title:n,description:a})),{theme$:u.theme.theme$}));c.current=e}),[u,t,n,a]);return r.a.useEffect((()=>()=>{var e;null===(e=c.current)||void 0===e||e.close()}),[]),r.a.createElement(s.EuiButtonEmpty,p()({onClick:d,isDisabled:e},o),r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.openFlyoutButton",defaultMessage:"Preview API request"}))},$=({closeFlyout:e,title:t=m.i18n.translate("xpack.fleet.apiRequestFlyout.title",{defaultMessage:"Kibana API Request"}),request:n,description:a=m.i18n.translate("xpack.fleet.apiRequestFlyout.description",{defaultMessage:"Perform these request against Kibana"})})=>{const{docLinks:i,application:o,share:c}=Object(f.Rc)();return r.a.createElement(H.ViewApiRequestFlyout,{title:r.a.createElement(s.EuiFlexGroup,{alignItems:"baseline"},r.a.createElement(s.EuiFlexItem,{grow:!1},t),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"xs"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.devtoolsRequestDescription",defaultMessage:"{learnMore}",values:{learnMore:r.a.createElement(s.EuiLink,{href:i.links.fleet.api},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.learnMoreLink",defaultMessage:"Learn more about Fleet API"}))}})))),description:a,request:n,closeFlyout:e,application:o,urlService:c.url})},G={beta:m.i18n.translate("xpack.fleet.epm.releaseBadge.betaLabel",{defaultMessage:"Beta"}),preview:m.i18n.translate("xpack.fleet.epm.releaseBadge.technicalPreviewLabel",{defaultMessage:"Technical preview"}),rc:m.i18n.translate("xpack.fleet.epm.releaseBadge.releaseCandidateLabel",{defaultMessage:"Release Candidate"})},J={beta:m.i18n.translate("xpack.fleet.epm.releaseBadge.betaDescription",{defaultMessage:"This integration is not recommended for use in production environments."}),preview:m.i18n.translate("xpack.fleet.epm.releaseBadge.technicalPreviewDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."}),rc:m.i18n.translate("xpack.fleet.epm.releaseBadge.releaseCandidateDescription",{defaultMessage:"This integration is not recommended for use in production environments."})},X=({release:e})=>{if("ga"===e)return null;const t=G[e];return r.a.createElement(s.EuiToolTip,{position:"bottom",content:J[e],title:t},r.a.createElement(s.EuiBadge,null,t))},q=({release:e})=>{if("ga"===e)return null;const t=G[e];return r.a.createElement(s.EuiToolTip,{display:"inlineBlock",content:J[e],title:t},r.a.createElement(s.EuiBadge,{color:"hollow"},t))},V=({packageKey:e,isTourVisible:t,tourType:n,children:a,tourPosition:o,tourOffset:l})=>{const[c,u]=Object(i.useState)(t);Object(i.useEffect)((()=>{u(t)}),[t]);const d=((e,t)=>e.startsWith("endpoint")&&"addIntegrationButton"===t?{title:m.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointButton.title",{defaultMessage:"Add Elastic Defend"}),description:m.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointButton.description",{defaultMessage:"In this workflow, we'll be using Elastic Defend only to collect data for SIEM. Installing this will not conflict with existing endpoint security products."})}:e.startsWith("endpoint")&&"integrationCard"===t?{title:m.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointCard.title",{defaultMessage:"Select Elastic Defend"}),description:m.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointCard.description",{defaultMessage:"The best way to get data quickly into your SIEM."})}:e.startsWith("kubernetes")&&"addIntegrationButton"===t?{title:m.i18n.translate("xpack.fleet.guidedOnboardingTour.kubernetesButton.tourTitle",{defaultMessage:"Add Kubernetes"}),description:m.i18n.translate("xpack.fleet.guidedOnboardingTour.kubernetesButton.tourDescription",{defaultMessage:"In just a few steps, add your data with our recommended defaults. You can change this later."})}:e.startsWith("kubernetes")&&"agentModalButton"===t?{title:m.i18n.translate("xpack.fleet.guidedOnboardingTour.agentModalButton.tourTitle",{defaultMessage:"Add Elastic Agent"}),description:m.i18n.translate("xpack.fleet.guidedOnboardingTour.agentModalButton.tourDescription",{defaultMessage:"In order to proceed with your setup, add Elastic Agent to your hosts now."})}:null)(e,n);return d?r.a.createElement(s.EuiTourStep,{content:r.a.createElement(s.EuiText,{size:"s"},d.description),isStepOpen:c,maxWidth:350,onFinish:()=>u(!1),step:1,stepsTotal:1,offset:l,title:d.title,anchorPosition:o||"rightUp",footerAction:r.a.createElement(s.EuiButtonEmpty,{onClick:()=>u(!1),size:"xs",color:"text",flush:"right"},m.i18n.translate("xpack.fleet.guidedOnboardingTour.nextButtonLabel",{defaultMessage:"Continue"})),isOpen:c,closePopover:()=>u(!1)},a):r.a.createElement(r.a.Fragment,null,a)};var Y=n(204);const Q=[{id:"linuxOrMac",label:m.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformButtons.linuxOrMac",{defaultMessage:"Linux or Mac"})},{id:"windows",label:m.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformButtons.windows",{defaultMessage:"Windows"})}],Z=({token:e})=>{const[t,n]=Object(i.useState)("linuxOrMac"),a=Object(i.useMemo)((()=>(e=>({linuxOrMac:`sudo elastic-agent uninstall --uninstall-token ${e}`,windows:`C:\\"Program Files"\\Elastic\\Agent\\elastic-agent.exe uninstall --uninstall-token ${e}`}))(e)),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiButtonGroup,{options:Q,idSelected:t,onChange:e=>n(e),legend:m.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformSelectAriaLabel",{defaultMessage:"Platform"}),buttonSize:"m","data-test-subj":"uninstall-commands-flyout-platforms-btn-group"}),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(s.EuiCodeBlock,{fontSize:"m",isCopyable:!0,paddingSize:"m","data-test-subj":"uninstall-commands-flyout-code-block"},a[t]))},ee=()=>{const{docLinks:e}=Object(f.Rc)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.firstParagraph",defaultMessage:"Uninstall Elastic Agent and unenroll in Fleet to stop communicating with the host."})),r.a.createElement("h3",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.subtitle",defaultMessage:"Uninstall Elastic Agent on your host"})),r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.description",defaultMessage:"Select the appropriate platform and run the command to uninstall Elastic Agent. Reuse the command to uninstall agents on more than one host. {learnMoreLink}",values:{learnMoreLink:r.a.createElement(s.EuiLink,{href:e.links.fleet.uninstallAgent,target:"_blank"},m.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.learnMore",{defaultMessage:"Learn more"}))}})))},te=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.endpointUninstallCommandFlyout.subtitle",defaultMessage:"Uninstall Elastic Defend integration on your host"})),r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.endpointUninstallCommandFlyout.description",defaultMessage:"Use the below uninstall command to uninstall Endpoint integration... [TODO]"}))),ne=({error:e})=>r.a.createElement(o,{title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.errorFetchingToken",defaultMessage:"Unable to fetch uninstall token"}),error:null!=e?e:m.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.unknownError",{defaultMessage:"Unknown error"})}),ae=({uninstallTokenId:e})=>{const{isLoading:t,error:n,data:i}=Object(Y.b)(e),o=null==i?void 0:i.item.token,c=null==i?void 0:i.item.policy_id;return t?r.a.createElement(a.a,{size:"l"}):n||!o?r.a.createElement(ne,{error:n}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{token:o}),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(s.EuiText,{"data-test-subj":"uninstall-command-flyout-policy-id-hint"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.validForPolicyId",defaultMessage:"Valid for the following agent policy:"})," ",r.a.createElement(s.EuiCode,null,c)))},ie=({policyId:e})=>{var t,n;const{isLoading:i,error:s,data:o}=Object(Y.c)({policyId:e}),l=null==o||null===(t=o.items)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;return i?r.a.createElement(a.a,{size:"l"}):s||!l?r.a.createElement(ne,{error:s}):r.a.createElement(ae,{uninstallTokenId:l})},re=({policyId:e,uninstallTokenId:t,onClose:n,target:a})=>r.a.createElement(s.EuiFlyout,{onClose:n,"data-test-subj":"uninstall-command-flyout"},r.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(s.EuiTitle,{size:"m"},r.a.createElement("h2",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.title",defaultMessage:"Uninstall agent"})))),r.a.createElement(s.EuiFlyoutBody,null,r.a.createElement(s.EuiText,null,"agent"===a?r.a.createElement(ee,null):r.a.createElement(te,null)),r.a.createElement(s.EuiSpacer,{size:"l"}),t?r.a.createElement(ae,{uninstallTokenId:t}):e?r.a.createElement(ie,{policyId:e}):null));var se=n(167),oe=n(168)},function(e,t,n){"use strict";var a=n(3);n.d(t,"a",(function(){return a.b})),n.d(t,"b",(function(){return a.c})),n.d(t,"c",(function(){return a.i})),n.d(t,"d",(function(){return a.y})),n.d(t,"e",(function(){return a.z})),n.d(t,"f",(function(){return a.B})),n.d(t,"g",(function(){return a.F})),n.d(t,"h",(function(){return a.G}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(6),i=n(4),r=n(1),s=n.n(r);const o=s.a.createContext(null);function l(){const e=Object(r.useContext)(o);return{confirm:Object(r.useCallback)((async(t,n,a)=>{if(null===e)throw new Error("Context need to be provided to use useConfirmModal");return new Promise((i=>{e.showModal({title:t,description:n,onConfirm:()=>i(!0),onCancel:()=>i(!1),options:a})}))}),[e])}}function c(e){return t=>s.a.createElement(u,null,s.a.createElement(e,t))}const u=({children:e})=>{var t,n,l;const[c,u]=Object(r.useState)(!1),[d,p]=Object(r.useState)({onCancel:()=>{},onConfirm:()=>{}}),m=Object(r.useCallback)((({title:e,description:t,onConfirm:n,onCancel:a,options:i})=>{u(!0),p({title:e,description:t,onConfirm:()=>{u(!1),n()},onCancel:()=>{u(!1),a()},options:i})}),[]);return s.a.createElement(o.Provider,{value:{showModal:m}},c&&s.a.createElement(a.EuiPortal,null,s.a.createElement(a.EuiConfirmModal,{title:d.title,buttonColor:null===(t=d.options)||void 0===t?void 0:t.buttonColor,onCancel:d.onCancel,onConfirm:d.onConfirm,cancelButtonText:i.i18n.translate("xpack.fleet.settings.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:null!==(n=null===(l=d.options)||void 0===l?void 0:l.confirmButtonText)&&void 0!==n?n:i.i18n.translate("xpack.fleet.settings.confirmModal.confirmButtonText",{defaultMessage:"Save and deploy"}),defaultFocusedButton:"confirm"},d.description)),e)}},function(e,t,n){"use strict";e.exports=function(e){return-2===e||-1===e||32===e}},function(e,t,n){"use strict";var a=n(389);e.exports=function(e,t,n,i){var r,s=e.length,o=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,i.length<1e4)(r=Array.from(i)).unshift(t,n),a.apply(e,r);else for(n&&a.apply(e,[t,n]);o<i.length;)(r=i.slice(o,o+1e4)).unshift(t,0),a.apply(e,r),o+=1e4,t+=1e4}},function(e,t,n){"use strict";e.exports=function(e){return e<0||32===e}},function(e,t,n){"use strict";n.d(t,"g",(function(){return a.q})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return P})),n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return B})),n.d(t,"h",(function(){return L})),n.d(t,"b",(function(){return z}));var a=n(105),i=n(1),r=n.n(i),s=n(6),o=n(10),l=n(54),c=n.n(l),u=n(4),d=n(0),p=n(15),m=n(123),h=n(55),f=n(5);const g="@@##DEFAULT_SELECT##@@";function E(e,t){return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiText,{size:"s"},e),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(s.EuiText,{size:"s"},t)):e}function y(e,t,n){return{inputDisplay:E(u.i18n.translate("xpack.fleet.agentPolicy.outputOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultOutputName})",values:{defaultOutputName:e}}),n),value:g,disabled:t}}const x=({agentPolicy:e,updateAgentPolicy:t,validation:n,isEditing:l=!1})=>{var c,x,v,k,b;const{docLinks:S}=Object(p.lc)(),F=null!==(c=null===(x=Object(p.zb)().developer)||void 0===x?void 0:x.maxAgentPoliciesWithInactivityTimeout)&&void 0!==c?c:d.t,[C,D]=Object(i.useState)({}),{dataOutputOptions:w,monitoringOutputOptions:A,isLoading:M}=function(e){const t=Object(p.Rb)(),n=Object(p.bc)().hasAtLeast(d.fb)||Object(f.W)(e)||Object(f.X)(e),a=Object(i.useMemo)((()=>Object(f.v)(e)),[e]),s=Object(i.useMemo)((()=>{if(t.isLoading||!t.data)return[];if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default)),i=null==e?void 0:e.name,s=(null==e?void 0:e.type)&&!a.includes(e.type);return[y(i,s,s?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.outputOptionDisableOutputTypeText",defaultMessage:"{outputType} output for agent integration is not supported for Fleet Server, Synthetics or APM.",values:{outputType:e.type}}):void 0),...t.data.items.map((e=>{const t=!a.includes(e.type);return{value:e.id,inputDisplay:E(e.name,t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.outputOptionDisabledTypeNotSupportedText",defaultMessage:"{outputType} output for agent integration is not supported for Fleet Server, Synthetics or APM.",values:{outputType:e.type}}):void 0),disabled:!n||t}}))]}),[t,n,a]),l=Object(i.useMemo)((()=>{var e;return t.isLoading||!t.data?[]:[y(null===(e=t.data.items.find((e=>e.is_default_monitoring)))||void 0===e?void 0:e.name),...t.data.items.map((e=>({value:e.id,inputDisplay:e.name,disabled:!n})))]}),[t,n]);return Object(i.useMemo)((()=>({dataOutputOptions:s,monitoringOutputOptions:l,isLoading:t.isLoading})),[s,l,t.isLoading])}(e),{data:T}=Object(p.Ib)({page:1,perPage:0,kuery:`${d.k}.inactivity_timeout:*`}),P=null!==(v=null==T?void 0:T.total)&&void 0!==v?v:0,I=void 0!==F&&P>(null!=F?F:0),{dataDownloadSourceOptions:O,isLoading:j}=function(e){const t=Object(p.Kb)(),n=Object(i.useMemo)((()=>{if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default));return[(n=null==e?void 0:e.name,{inputDisplay:E(u.i18n.translate("xpack.fleet.agentPolicy.downloadSourcesOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultDownloadSourceName})",values:{defaultDownloadSourceName:n}}),i),value:g,disabled:a}),...t.data.items.filter((e=>!e.is_default)).map((e=>({value:e.id,inputDisplay:e.name})))];var n,a,i}),[t]);return Object(i.useMemo)((()=>({dataDownloadSourceOptions:n,isLoading:t.isLoading})),[n,t.isLoading])}(),{fleetServerHostsOptions:B,isLoading:L}=function(e){const t=Object(p.Nb)(),n=Object(i.useMemo)((()=>{if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default));return[(n=null==e?void 0:e.name,{inputDisplay:E(u.i18n.translate("xpack.fleet.agentPolicy.fleetServerHostsOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultFleetServerHostsName})",values:{defaultFleetServerHostsName:n}}),i),value:g,disabled:a}),...t.data.items.filter((e=>!e.is_default)).map((e=>({value:e.id,inputDisplay:e.name})))];var n,a,i}),[t]);return Object(i.useMemo)((()=>({fleetServerHostsOptions:n,isLoading:t.isLoading})),[n,t.isLoading])}(),_=Date.now(),{agentTamperProtectionEnabled:N}=h.b.get(),z=Object(p.bc)(),[R,U]=Object(i.useState)(!1),H=Object(i.useMemo)((()=>Object(f.V)(e)),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.descriptionFieldLabel",defaultMessage:"Description"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.descriptionDescription",defaultMessage:"Add a description of how this policy will be used."})},R&&e.id&&r.a.createElement(m.y,{target:"agent",policyId:e.id,onClose:()=>U(!1)}),r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"description",error:C.description&&n.description?n.description:null,isInvalid:Boolean(C.description&&n.description)},r.a.createElement(s.EuiFieldText,{disabled:!0===e.is_managed,fullWidth:!0,value:e.description,onChange:e=>t({description:e.target.value}),isInvalid:Boolean(C.description&&n.description),onBlur:()=>D({...C,description:!0}),placeholder:u.i18n.translate("xpack.fleet.agentPolicyForm.descriptionFieldPlaceholder",{defaultMessage:"Optional description"})}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",{"data-test-subj":"defaultNamespaceHeader"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldLabel",defaultMessage:"Default namespace"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldDescription",defaultMessage:"Namespaces are a user-configurable arbitrary grouping that makes it easier to search for data and manage user permissions. A policy namespace is used to name its integration's data streams. {fleetUserGuide}.",values:{fleetUserGuide:r.a.createElement(s.EuiLink,{href:S.links.fleet.datastreamsNamingScheme,target:"_blank"},u.i18n.translate("xpack.fleet.agentPolicyForm.nameSpaceFieldDescription.fleetUserGuideLabel",{defaultMessage:"Learn more"}))}})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.namespace&&n.namespace?n.namespace:null,isInvalid:Boolean(C.namespace&&n.namespace)},r.a.createElement(s.EuiComboBox,{fullWidth:!0,singleSelection:!0,noSuggestions:!0,selectedOptions:e.namespace?[{label:e.namespace}]:[],onCreateOption:e=>{t({namespace:e})},onChange:e=>{t({namespace:e.length?e[0]:""})},isInvalid:Boolean(C.namespace&&n.namespace),onBlur:()=>D({...C,namespace:!0})}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLabel",defaultMessage:"Agent monitoring"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringDescription",defaultMessage:"Collecting monitoring logs and metrics will also create an {agent} integration. Monitoring data will be written to the default namespace specified above.",values:{agent:r.a.createElement(a.d,{pkgName:"elastic_agent",pkgTitle:"Elastic Agent"})}})},r.a.createElement(s.EuiCheckboxGroup,{disabled:!0===e.is_managed,options:[{id:`${d.Cb.Logs}_${_}`,"data-test-subj":"collectLogsCheckbox",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLogsFieldLabel",defaultMessage:"Collect agent logs"})," ",r.a.createElement(s.EuiIconTip,{content:u.i18n.translate("xpack.fleet.agentPolicyForm.monitoringLogsTooltipText",{defaultMessage:"Collect logs from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))},{id:`${d.Cb.Metrics}_${_}`,"data-test-subj":"collectMetricsCheckbox",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringMetricsFieldLabel",defaultMessage:"Collect agent metrics"})," ",r.a.createElement(s.EuiIconTip,{content:u.i18n.translate("xpack.fleet.agentPolicyForm.monitoringMetricsTooltipText",{defaultMessage:"Collect metrics from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))}],idToSelectedMap:(e.monitoring_enabled||[]).reduce(((e,t)=>(e[`${t}_${_}`]=!0,e)),{logs:!1,metrics:!1}),onChange:n=>{const a=n.split("_")[0];if(a!==d.Cb.Logs&&a!==d.Cb.Metrics)return;const i=e.monitoring_enabled&&e.monitoring_enabled.indexOf(a)>=0,r=e.monitoring_enabled||[];t({monitoring_enabled:i?r.filter((e=>e!==a)):[...r,a]})}})),N&&z.isPlatinum()&&r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingLabel",defaultMessage:"Agent tamper protection"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingDescription",defaultMessage:"Prevent agents from being uninstalled locally. When enabled, agents can only be uninstalled using an authorization token in the uninstall command. Click { linkName } for the full command.",values:{linkName:r.a.createElement("strong",null,"Get uninstall command")}})},r.a.createElement(s.EuiSwitch,{label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingSwitchLabel",defaultMessage:"Prevent agent tampering"})," ",!H&&r.a.createElement("span",{"data-test-subj":"tamperMissingIntegrationTooltip"},r.a.createElement(s.EuiIconTip,{type:"iInCircle",color:"subdued",content:u.i18n.translate("xpack.fleet.agentPolicyForm.tamperingSwitchLabel.disabledWarning",{defaultMessage:"Elastic Defend integration is required to enable this feature"})}))),checked:null!==(k=e.is_protected)&&void 0!==k&&k,onChange:e=>{t({is_protected:e.target.checked})},disabled:!H,"data-test-subj":"tamperProtectionSwitch"}),e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(s.EuiLink,{onClick:()=>{U(!0)},disabled:!e.is_protected||!H,"data-test-subj":"uninstallCommandLink"},u.i18n.translate("xpack.fleet.agentPolicyForm.tamperingUninstallLink",{defaultMessage:"Get uninstall command"})))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutLabel",defaultMessage:"Inactivity timeout"}),I&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement(s.EuiToolTip,{content:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutTooltip",defaultMessage:"The maximum of 750 agent policies with an inactivity timeout has been exceeded. Remove inactivity timeouts or agent policies to allow agents to become inactive again."})},r.a.createElement(s.EuiBadge,{color:"warning"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutBadge",defaultMessage:"Warning"}))))),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutDescription",defaultMessage:"An optional timeout in seconds. If provided, an agent will automatically change to inactive status and be filtered out of the agents list. A maximum of 750 agent policies can have an inactivity timeout."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.inactivity_timeout&&n.inactivity_timeout?n.inactivity_timeout:null,isInvalid:Boolean(C.inactivity_timeout&&n.inactivity_timeout)},r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:!0===e.is_managed,value:e.inactivity_timeout||"",min:0,onChange:e=>{t({inactivity_timeout:e.target.value?Number(e.target.value):0})},isInvalid:Boolean(C.inactivity_timeout&&n.inactivity_timeout),onBlur:()=>D({...C,inactivity_timeout:!0})}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.fleetServerHostsLabel",defaultMessage:"Fleet Server"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.fleetServerHostsDescripton",defaultMessage:"Select to which Fleet Server the agents in this policy will communicate."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.fleet_server_host_id&&n.fleet_server_host_id?n.fleet_server_host_id:null,isInvalid:Boolean(C.fleet_server_host_id&&n.fleet_server_host_id)},r.a.createElement(s.EuiSuperSelect,{disabled:!0===e.is_managed,valueOfSelected:e.fleet_server_host_id||g,fullWidth:!0,isLoading:L,onChange:e=>{t({fleet_server_host_id:e!==g?e:null})},options:B}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.dataOutputLabel",defaultMessage:"Output for integrations"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.dataOutputDescription",defaultMessage:"Select which output to use for data from integrations."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.data_output_id&&n.data_output_id?n.data_output_id:null,isInvalid:Boolean(C.data_output_id&&n.data_output_id)},r.a.createElement(s.EuiSuperSelect,{disabled:!0===e.is_managed,valueOfSelected:e.data_output_id||g,fullWidth:!0,isLoading:M,onChange:e=>{t({data_output_id:e!==g?e:null})},options:w}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringOutputLabel",defaultMessage:"Output for agent monitoring"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringOutputDescription",defaultMessage:"Select which output to use for the agents own monitoring data."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.monitoring_output_id&&n.monitoring_output_id?n.monitoring_output_id:null,isInvalid:Boolean(C.monitoring_output_id&&n.monitoring_output_id)},r.a.createElement(s.EuiSuperSelect,{disabled:!0===e.is_managed,valueOfSelected:e.monitoring_output_id||g,fullWidth:!0,isLoading:M,onChange:e=>{t({monitoring_output_id:e!==g?e:null})},options:A}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.downloadSourceLabel",defaultMessage:"Agent Binary Download","data-test-subj":"agentPolicyForm.downloadSource.label"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.downloadSourceDescription",defaultMessage:"When an upgrade action is issued the agents will download the binary from this location."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.download_source_id&&n.download_source_id?n.download_source_id:null,isInvalid:Boolean(C.download_source_id&&n.download_source_id)},r.a.createElement(s.EuiSuperSelect,{valueOfSelected:e.download_source_id||g,fullWidth:!0,isLoading:j,onChange:e=>{t({download_source_id:e!==g?e:null})},options:O,"data-test-subj":"agentPolicyForm.downloadSource.select"}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutLabel",defaultMessage:"Unenrollment timeout"})," ",r.a.createElement(s.EuiToolTip,{content:u.i18n.translate("xpack.fleet.agentPolicyForm.unenrollmentTimeoutTooltip",{defaultMessage:"This setting is deprecated and will be removed in a future release. Consider using inactivity timeout instead"})},r.a.createElement(s.EuiBetaBadge,{label:u.i18n.translate("xpack.fleet.agentPolicyForm.unenrollmentTimeoutDeprecatedLabel",{defaultMessage:"Deprecated"}),size:"s"}))),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutDescription",defaultMessage:"An optional timeout in seconds. If provided, and fleet server is below version 8.7.0, an agent will automatically unenroll after being gone for this period of time."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:C.unenroll_timeout&&n.unenroll_timeout?n.unenroll_timeout:null,isInvalid:Boolean(C.unenroll_timeout&&n.unenroll_timeout)},r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:!0===e.is_managed,value:e.unenroll_timeout||"",min:0,onChange:e=>{t({unenroll_timeout:e.target.value?Number(e.target.value):0})},isInvalid:Boolean(C.unenroll_timeout&&n.unenroll_timeout),onBlur:()=>D({...C,unenroll_timeout:!0})}))),r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatLabel",defaultMessage:"Host name format"})," ",r.a.createElement(s.EuiBetaBadge,{label:"beta",size:"s",color:"accent"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatLabelDescription",defaultMessage:"Select how you would like agent domain names to be displayed."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0},r.a.createElement(s.EuiRadioGroup,{options:[{id:"hostname",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiFlexGroup,{gutterSize:"xs",direction:"column"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement("b",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionHostname",defaultMessage:"Hostname"})))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s",color:"subdued"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionHostnameExample",defaultMessage:"ex: My-Laptop"})))),r.a.createElement(s.EuiSpacer,{size:"s"}))},{id:"fqdn",label:r.a.createElement(s.EuiFlexGroup,{gutterSize:"xs",direction:"column"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement("b",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionFqdn",defaultMessage:"Fully Qualified Domain Name (FQDN)"})))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s",color:"subdued"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionFqdnExample",defaultMessage:"ex: My-Laptop.admin.acme.co"}))))}],idSelected:null!==(b=e.agent_features)&&void 0!==b&&b.length?"fqdn":"hostname",onChange:e=>{t({agent_features:"hostname"===e?[]:[{name:"fqdn",enabled:!0}]})},name:"radio group"}))),r.a.createElement(s.EuiSpacer,{size:"l"}))},v=({agentPolicy:e,updateAgentPolicy:t,validation:n,nameLabel:a})=>{const[l,c]=Object(i.useState)({});return r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"name",label:a||r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameFieldLabel",defaultMessage:"Name"}),error:l.name&&n.name?n.name:null,isInvalid:Boolean(l.name&&n.name)},r.a.createElement(s.EuiFieldText,{"data-test-subj":"createAgentPolicyNameField",disabled:!0===e.is_managed,fullWidth:!0,value:e.name,onChange:e=>t({name:e.target.value}),isInvalid:Boolean(l.name&&n.name),onBlur:()=>c({...l,name:!0}),placeholder:u.i18n.translate("xpack.fleet.agentPolicyForm.nameFieldPlaceholder",{defaultMessage:"Choose a name"})}))},k=({withSysMonitoring:e,updateSysMonitoring:t})=>r.a.createElement(s.EuiFormRow,null,r.a.createElement(s.EuiCheckbox,{id:"agentPolicyFormSystemMonitoringCheckbox",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringText",defaultMessage:"Collect system logs and metrics"})," ",r.a.createElement(s.EuiIconTip,{content:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringTooltipText",defaultMessage:"This will also add a {system} integration to collect system logs and metrics.",values:{system:r.a.createElement(a.d,{pkgName:"system",pkgTitle:"System"})}}),position:"right",type:"iInCircle",color:"subdued"})),checked:e,onChange:()=>{t(!e)},"data-test-subj":"agentPolicyFormSystemMonitoringCheckbox"})),b=c()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-1qxoog-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),S=({agentPolicy:e,updateAgentPolicy:t,withSysMonitoring:n,updateSysMonitoring:a,validation:i,isEditing:l=!1})=>{return r.a.createElement(s.EuiForm,null,l?(c=[r.a.createElement(v,{agentPolicy:e,updateAgentPolicy:t,validation:i})],r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupTitle",defaultMessage:"General settings"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupDescription",defaultMessage:"Choose a name and description for your agent policy."})},c)):r.a.createElement(v,{agentPolicy:e,updateAgentPolicy:t,validation:i}),l?null:r.a.createElement(k,{withSysMonitoring:n,updateSysMonitoring:a}),l?r.a.createElement(x,{agentPolicy:e,updateAgentPolicy:t,validation:i,isEditing:l}):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiHorizontalRule,null),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(b,{id:"advancedOptions",buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(x,{agentPolicy:e,updateAgentPolicy:t,validation:i,isEditing:l}))));var c},F=({children:e})=>{const{notifications:t}=Object(p.lc)(),[n,a]=Object(i.useState)(),[l,c]=Object(i.useState)(),[d,m]=Object(i.useState)(!1),[h,f]=Object(i.useState)(!1),g=Object(i.useRef)(null),E=()=>{a(void 0),c(void 0),f(!1),m(!1)};return r.a.createElement(i.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified to duplicate");m(!0),a(e),c({name:u.i18n.translate("xpack.fleet.copyAgentPolicy.confirmModal.defaultNewPolicyName",{defaultMessage:"{name} (copy)",values:{name:e.name}}),description:e.description}),g.current=t})),d&&n&&l?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement("span",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyTitle",defaultMessage:"Duplicate '{name}' agent policy",values:{name:n.name}})),onCancel:E,onConfirm:async()=>{f(!0);try{const{data:e,error:a}=await Object(p.i)(n.id,l);if(a)throw a;if(!e)throw new Error("Error duplicating agent policy: no data");t.toasts.addSuccess(u.i18n.translate("xpack.fleet.copyAgentPolicy.successNotificationTitle",{defaultMessage:"Agent policy duplicated"})),E(),g.current&&g.current(e.item)}catch(e){f(!1),t.toasts.addError(e,{title:u.i18n.translate("xpack.fleet.copyAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error duplicating agent policy"})})}},cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Duplicate policy"}),confirmButtonDisabled:h||!l.name.trim()},r.a.createElement("p",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyPrompt",defaultMessage:"Choose a name and description for your new agent policy."})),r.a.createElement(s.EuiFormRow,{label:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newNameLabel",defaultMessage:"New policy name"}),fullWidth:!0},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:l.name,onChange:e=>c({...l,name:e.target.value})})),r.a.createElement(s.EuiFormRow,{label:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newDescriptionLabel",defaultMessage:"Description"}),fullWidth:!0},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:l.description,onChange:e=>c({...l,description:e.target.value})}))):null)};var C=n(20),D=n(9);const w=({children:e,hasFleetServer:t})=>{const{notifications:n}=Object(p.lc)(),{agents:{enabled:a}}=Object(p.zb)(),[l,c]=Object(i.useState)(),[d,m]=Object(i.useState)(!1),[h,f]=Object(i.useState)(!1),[g,E]=Object(i.useState)(0),[y,x]=Object(i.useState)(!1),v=Object(i.useRef)(null),{getPath:k}=Object(p.cc)(),b=Object(C.useHistory)(),S=()=>{c(void 0),x(!1),f(!1),m(!1)};return r.a.createElement(i.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified for deletion");m(!0),c(e),(async e=>{var t,n;if(!a||h)return;f(!0);const i=await Object(p.z)({showInactive:!0,kuery:`policy_id:"${e}" and not status: unenrolled`,perPage:D.u});E(null!==(t=null===(n=i.data)||void 0===n?void 0:n.total)&&void 0!==t?t:0),f(!1)})(e),v.current=t})),d?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.deletePolicyTitle",defaultMessage:"Delete this agent policy?"}),onCancel:S,onConfirm:async()=>{x(!0);try{const{data:e}=await Object(p.m)({agentPolicyId:l});e?(n.toasts.addSuccess(u.i18n.translate("xpack.fleet.deleteAgentPolicy.successSingleNotificationTitle",{defaultMessage:"Deleted agent policy '{id}'",values:{id:e.name||e.id}})),v.current&&v.current(l)):n.toasts.addDanger(u.i18n.translate("xpack.fleet.deleteAgentPolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting agent policy '{id}'",values:{id:l}}))}catch(e){n.toasts.addDanger(u.i18n.translate("xpack.fleet.deleteAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting agent policy"}))}S(),b.push(k("policies_list"))},cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:y||h?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading…"}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete policy"}),buttonColor:"danger",confirmButtonDisabled:y||h||!!g},h?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking amount of affected agents…"}):g?r.a.createElement(s.EuiCallOut,{color:"danger",iconType:"warning",title:u.i18n.translate("xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsTitle",{defaultMessage:"Policy in use"})},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsMessage",defaultMessage:"{agentsCount, plural, one {# agent is} other {# agents are}} assigned to this agent policy. Unassign these agents before deleting this policy.",values:{agentsCount:g}})):t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.fleetServerMessage",defaultMessage:"NOTE: This policy has Fleet Server integration, it is required for using Fleet."}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.irreversibleMessage",defaultMessage:"This action cannot be undone."})):null)};var A=n(120);const M=c()(s.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-1iummeq-0"})([".euiFlyoutBody__overflowContent{padding:0;}"]),T=Object(i.memo)((({policyId:e,onClose:t})=>{var n,i;const l=Object(p.lc)(),{isLoading:c,data:u,error:m}=Object(p.Qb)(e),{data:f}=Object(p.Pb)(e),g=null==f||null===(n=f.item)||void 0===n||null===(i=n.package_policies)||void 0===i?void 0:i.some((e=>{var t;return null==e||null===(t=e.secret_references)||void 0===t?void 0:t.length})),E=c?r.a.createElement(a.r,null):m?r.a.createElement(s.EuiCallOut,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.ErrorGettingFullAgentPolicy",defaultMessage:"Error loading agent policy"}),color:"danger",iconType:"warning"},m.message):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiCodeBlock,{language:"yaml",isCopyable:!0,fontSize:"m",whiteSpace:"pre"},Object(h.i)(u.item,A.safeDump))),y=l.http.basePath.prepend(h.c.getInfoFullDownloadPath(e))+`?apiVersion=${d.m.public.v1}`;return r.a.createElement(s.EuiFlyout,{onClose:t,size:"l",maxWidth:640},r.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"IngestManagerAgentPolicyYamlFlyoutTitle"},r.a.createElement(s.EuiTitle,{size:"m"},r.a.createElement("h2",{id:"IngestManagerAgentPolicyYamlFlyoutTitle"},null!=f&&f.item?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithName",defaultMessage:"'{name}' agent policy",values:{name:f.item.name}}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithoutName",defaultMessage:"Agent policy"}))),g&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(s.EuiCallOut,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.secretsTitle",defaultMessage:"This policy contains secret values"}),size:"m",color:"primary",iconType:"iInCircle"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.secretsDescription",defaultMessage:"Kibana does not have access to secret values. You will need to set these values manually after deploying the agent policy. Look out for environment variables in the format {envVarPrefix} in the agent configuration.",values:{envVarPrefix:r.a.createElement("code",null,"${SECRET_0}")}})))),r.a.createElement(M,null,E),r.a.createElement(s.EuiFlyoutFooter,null,r.a.createElement(s.EuiFlexGroup,{justifyContent:"spaceBetween"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButtonEmpty,{onClick:t,flush:"left"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlFlyoutCloseButtonLabel",defaultMessage:"Close"}))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{href:y,iconType:"download",isDisabled:Boolean(c&&!u)},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlDownloadButtonLabel",defaultMessage:"Download policy"}))))))})),P=({onConfirm:e,onCancel:t,agentCount:n,agentPolicy:a})=>r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalTitle",defaultMessage:"Save and deploy changes"}),onCancel:t,onConfirm:e,cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalConfirmButtonLabel",defaultMessage:"Save and deploy changes"}),buttonColor:"primary"},r.a.createElement(s.EuiCallOut,{iconType:"iInCircle",title:u.i18n.translate("xpack.fleet.agentPolicy.confirmModalCalloutTitle",{defaultMessage:"This action will update {agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:n}})},r.a.createElement("div",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCalloutDescription",defaultMessage:"Fleet has detected that the selected agent policy, {policyName}, is already in use by some of your agents. As a result of this action, Fleet will deploy updates to all agents that use this policy.",values:{policyName:r.a.createElement("b",null,a.name)}}))),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalDescription",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"}));var I=n(13);const O=Object(i.memo)((({agentPolicy:e,onCopySuccess:t,fullButton:n=!1,enrollmentFlyoutOpenByDefault:l=!1,onCancelEnrollment:c})=>{var u;const d=Object(p.vb)().integrations.writeIntegrationPolicies,[m,f]=Object(i.useState)(!1),[g,E]=Object(i.useState)(l),[y,x]=Object(i.useState)(!1),{agentTamperProtectionEnabled:v}=h.b.get(),k=Object(i.useMemo)((()=>{var t;return null===(t=e.package_policies)||void 0===t?void 0:t.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===I.i}))}),[e]),b="package_policies"in e&&(null==e||null===(u=e.package_policies)||void 0===u?void 0:u.some((e=>e.is_managed))),[S,C]=Object(i.useState)(!1),D=Object(i.useCallback)((e=>{C(e)}),[C]),A=Object(i.useMemo)((()=>c||(()=>E(!1))),[c,E]);return r.a.createElement(F,null,(i=>{const l=r.a.createElement(s.EuiContextMenuItem,{icon:"inspect",onClick:()=>{C(!1),f(!m)},key:"viewPolicy"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.viewPolicyText",defaultMessage:"View policy"})),c=null!=e&&e.is_managed?[l]:[r.a.createElement(s.EuiContextMenuItem,{icon:"plusInCircle",onClick:()=>{C(!1),E(!0)},key:"enrollAgents"},k?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.addFleetServerActionText",defaultMessage:"Add Fleet Server"}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.enrollAgentActionText",defaultMessage:"Add agent"})),l,r.a.createElement(s.EuiContextMenuItem,{disabled:!d,icon:"copy",onClick:()=>{C(!1),i(e,t)},key:"copyPolicy"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.copyPolicyActionText",defaultMessage:"Duplicate policy"})),r.a.createElement(w,{hasFleetServer:Object(h.t)(e),key:"deletePolicy"},(t=>r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"agentPolicyActionMenuDeleteButton",disabled:b,toolTipContent:b?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.deletePolicyActionText.disabled",defaultMessage:"Agent policy with managed package policies cannot be deleted.","data-test-subj":"agentPolicyActionMenuDeleteButtonDisabledTooltip"}):void 0,icon:"trash",onClick:()=>{t(e.id)}},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.deletePolicyActionText",defaultMessage:"Delete policy"}))))];return!v||null!=e&&e.is_managed||c.push(r.a.createElement(s.EuiContextMenuItem,{icon:"minusInCircle",onClick:()=>{C(!1),x(!0)},key:"getUninstallCommand","data-test-subj":"uninstall-agents-command-menu-item"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.getUninstallCommand",defaultMessage:"Uninstall agents on this policy"}))),r.a.createElement(r.a.Fragment,null,m&&r.a.createElement(s.EuiPortal,null,r.a.createElement(T,{policyId:e.id,onClose:()=>f(!1)})),g&&r.a.createElement(s.EuiPortal,null,r.a.createElement(a.c,{agentPolicy:e,onClose:A})),y&&r.a.createElement(a.y,{target:"agent",policyId:e.id,onClose:()=>x(!1)}),r.a.createElement(a.h,{isOpen:S,onChange:D,button:n?{props:{iconType:"arrowDown",iconSide:"right"},children:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.buttonText",defaultMessage:"Actions"})}:void 0,items:c}))}))})),j=c()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-ii96zz-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),B=({agentPolicy:e,updateAgentPolicy:t,withSysMonitoring:n,updateSysMonitoring:a,validation:i,isEditing:l=!1,onDelete:c=(()=>{})})=>r.a.createElement(s.EuiForm,null,r.a.createElement(s.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyLabel",defaultMessage:"Create agent policy"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDescription",defaultMessage:"Add this integration to a new set of hosts by creating a new agent policy. You can add agent in the next step."})},r.a.createElement(v,{agentPolicy:e,updateAgentPolicy:t,validation:i,nameLabel:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.newAgentPolicyFieldLabel",defaultMessage:"New agent policy name"})}),r.a.createElement(k,{withSysMonitoring:n,updateSysMonitoring:a})),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiHorizontalRule,null),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(j,{id:"advancedOptions",buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(x,{agentPolicy:e,updateAgentPolicy:t,validation:i,isEditing:l})))),L=e=>{var t;const n={},a=Object(h.o)(e.namespace||"");return null!==(t=e.name)&&void 0!==t&&t.trim()||(n.name=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameRequiredErrorMessage",defaultMessage:"Agent policy name is required"})]),!a.valid&&a.error&&(n.namespace=[a.error]),e.unenroll_timeout&&e.unenroll_timeout<0&&(n.unenroll_timeout=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollTimeoutMinValueErrorMessage",defaultMessage:"Unenroll timeout must be greater than zero."})]),e.inactivity_timeout&&e.inactivity_timeout<0&&(n.inactivity_timeout=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutMinValueErrorMessage",defaultMessage:"Inactivity timeout must be greater than zero."})]),n};var _=n(30);const N=c()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-4hn2e7-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),z=({updateAgentPolicy:e,isFleetServerPolicy:t,agentPolicyName:n})=>{const{docLinks:a}=Object(p.lc)(),[l,c]=Object(i.useState)({}),[d,m]=Object(i.useState)(!0),[h,f]=Object(i.useState)(!1),[g,E]=Object(i.useState)(Object(_.b)({name:n,has_fleet_server:t})),y=Object(i.useCallback)((e=>{E({...g,...e})}),[E,g]),v=L(g),b=Object(i.useCallback)((async()=>{try{f(!0);const t=await Object(p.j)(g,{withSysMonitoring:d});if(t.error)throw t.error;t.data&&e(t.data.item)}catch(t){e(null,function(e){if(409===e.statusCode)return r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.errorMessage",defaultMessage:"An agent policy already exists with this name."})}(t))}finally{f(!1)}}),[g,d,e]);return r.a.createElement(s.EuiForm,null,r.a.createElement(s.EuiText,null,t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyFleetServer",defaultMessage:"Fleet Server runs on Elastic Agent, and agents are enrolled in agent policies which represent hosts. We'll need to create a dedicated agent policy for Fleet Server to run on dedicated hosts."}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyTypeOfHosts",defaultMessage:"Type of hosts are controlled by an {agentPolicy}. Create a new agent policy to get started.",values:{agentPolicy:r.a.createElement(s.EuiLink,{href:a.links.fleet.agentPolicy,target:"_blank"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDocLink",defaultMessage:"agent policy"}))}})),r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(s.EuiFlexGroup,null,r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"name",error:l.name&&v.name?v.name:null},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:g.name,disabled:h,onChange:e=>y({name:e.target.value}),isInvalid:Boolean(l.name&&v.name),onBlur:()=>c({...l,name:!0}),placeholder:u.i18n.translate("xpack.fleet.agentPolicyForm.nameFieldPlaceholder",{defaultMessage:"Choose a name"})}))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{color:"primary",disabled:!g.name,onClick:()=>b(),isLoading:h,"data-test-subj":t?"createFleetServerPolicyBtn":"createPolicyBtn"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyText",defaultMessage:"Create policy"})))),r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(k,{withSysMonitoring:d,updateSysMonitoring:e=>m(e)}),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(N,{id:"advancedOptionsJustChanged","data-test-subj":"advancedOptionsButton",buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(x,{agentPolicy:g,updateAgentPolicy:y,validation:v,isEditing:!1}))))}},function(e,t,n){"use strict";n.d(t,"j",(function(){return s})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return B})),n.d(t,"e",(function(){return T})),n.d(t,"g",(function(){return L.a})),n.d(t,"i",(function(){return L.d})),n.d(t,"h",(function(){return L.b})),n.d(t,"f",(function(){return _})),n.d(t,"b",(function(){return N})),n.d(t,"k",(function(){return z}));var a=n(1),i=n.n(a),r=n(6);const s=()=>i.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceAround"},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiLoadingSpinner,{size:"xl"})));var o=n(4),l=n(10),c=n(15),u=n(105),d=n(13);const p=({onClose:e,agents:t})=>{const{notifications:n}=Object(c.lc)(),s=Array.isArray(t)&&1===t.length,p=Object(c.Ib)({page:1,perPage:d.p}),m=Object(a.useMemo)((()=>p.data?p.data.items.filter((e=>e&&!e.is_managed)):[]),[p.data]),[h,f]=Object(a.useState)(s?t[0].policy_id:void 0);Object(a.useEffect)((()=>{var e;!h&&m.length&&f(null===(e=m[0])||void 0===e?void 0:e.id)}),[h,m]);const[g,E]=Object(a.useState)(!1);return i.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentReassignPolicyModal",title:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.flyoutTitle",defaultMessage:"Assign new agent policy"}),onCancel:e,onConfirm:async function(){try{if(E(!0),!h)throw new Error("No selected agent policy id");const a=s?await Object(c.O)(t[0].id,{policy_id:h}):await Object(c.R)({policy_id:h,agents:Array.isArray(t)?t.map((e=>e.id)):t});if(a.error)throw a.error;E(!1);const i=o.i18n.translate("xpack.fleet.agentReassignPolicy.successSingleNotificationTitle",{defaultMessage:"Reassigning agent policy"});n.toasts.addSuccess(i),e()}catch(e){E(!1),n.toasts.addError(e,{title:"Unable to reassign agent policy"})}},cancelButtonText:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:g||s&&h===t[0].policy_id,confirmButtonText:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.continueButtonLabel",defaultMessage:"Assign policy"}),buttonColor:"primary"},i.a.createElement("p",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.flyoutDescription",defaultMessage:"Choose a new agent policy to assign the selected {count, plural, one {agent} other {agents}} to.",values:{count:s?1:0}})),i.a.createElement(r.EuiFlexGroup,null,i.a.createElement(r.EuiFlexItem,null,i.a.createElement(r.EuiFormRow,{fullWidth:!0,label:o.i18n.translate("xpack.fleet.agentReassignPolicy.selectPolicyLabel",{defaultMessage:"Agent policy"})},i.a.createElement(r.EuiSelect,{fullWidth:!0,isLoading:p.isLoading,options:m.map((e=>({value:e.id,text:e.name}))),value:h,onChange:e=>f(e.target.value)})))),i.a.createElement(r.EuiSpacer,{size:"l"}),i.a.createElement(r.EuiFlexGroup,null,i.a.createElement(r.EuiFlexItem,null,h&&i.a.createElement(u.e,{agentPolicyId:h}))))};var m=n(54),h=n.n(m),f=n(95),g=n(56),E=n(192),y=n(39),x=n.n(y),v=n(23),k=n.n(v),b=n(5),S=n(50);const F="8.3.0",C=["8.4.0","8.3.2","8.3.1","8.3.0","8.2.3","8.2.2","8.2.1","8.2.0","8.1.3","8.1.2","8.1.1","8.1.0","8.0.1","8.0.0","7.17.5","7.17.4","7.17.3","7.17.2","7.17.1","7.17.0"],D=[0,1,2,4,8,12,24,48];var w=n(96),A=n.n(w);const M=e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.value},T=({onClose:e,agents:t,agentCount:n,isScheduled:s=!1,isUpdating:u=!1})=>{var d,p;const{notifications:m}=Object(c.lc)(),h=Object(c.ac)()||"",f=Object(c.zb)(),[E,y]=Object(a.useState)(!1),[v,w]=Object(a.useState)(),[T,P]=Object(a.useState)([]),I=Array.isArray(t)&&1===t.length,O=n<=10,j=""===t,[B,L]=Object(a.useState)(0),[_,N]=Object(a.useState)(""),z=`status:updating AND upgrade_started_at:* AND NOT upgraded_at:* AND upgrade_started_at < now-${g.AGENT_UPDATING_TIMEOUT_HOURS}h`;Object(a.useEffect)((()=>{u&&(async e=>{let t;if(Array.isArray(e)&&e.length>0){if(0===e.length)return;const t=e.filter((e=>Object(g.isStuckInUpdating)(e))),n=t.length;return L(n),void N(t)}t="string"==typeof e&&""!==e?[`(${e})`,z].join(" AND "):z,N(t);try{var n,a,i;const e=await Object(c.w)({kuery:t});L(null!==(n=null==e||null===(a=e.data)||void 0===a||null===(i=a.results)||void 0===i?void 0:i.updating)&&void 0!==n?n:0)}catch(e){return}})(t)}),[u,N,z,t]),Object(a.useEffect)((()=>{(async()=>{try{var e;const t=await Object(c.A)(),n=null!=t&&null!==(e=t.data)&&void 0!==e&&e.items?t.data.items:C;P(n)}catch(e){return}})()}),[h]);const R=Object(a.useMemo)((()=>{if(!Array.isArray(t)){if("string"==typeof t)return;return Object(S.a)(T)}const e=t.map((e=>{var t,n,a;return null===(t=e.local_metadata)||void 0===t||null===(n=t.elastic)||void 0===n||null===(a=n.agent)||void 0===a?void 0:a.version}));return Object(S.a)(e)}),[t,T]),U=Object(a.useMemo)((()=>{const e=(R?T.filter((e=>x()(e,R)||Object(b.l)(e,R,!1))):T).map((e=>({label:e,value:e})));return 0===e.length?[{label:"",value:""}]:e}),[T,R]),H=!T||""===(null===(d=U[0])||void 0===d?void 0:d.value),K=D.map((e=>({label:0===e?o.i18n.translate("xpack.fleet.upgradeAgents.noMaintenanceWindowOption",{defaultMessage:"Immediately"}):o.i18n.translate("xpack.fleet.upgradeAgents.hourLabel",{defaultMessage:"{option} {count, plural, one {hour} other {hours}}",values:{option:e,count:1===e}}),value:0===e?0:3600*e}))),W=[{label:h,value:h}],[$,G]=Object(a.useState)(W),J=Object(c.ub)();Object(a.useEffect)((()=>{J&&G([{label:J,value:J}])}),[J]);const[X,q]=Object(a.useState)([O?K[0]:K[1]]),{startDatetime:V,onChangeStartDateTime:Y,initialDatetime:Q,minTime:Z,maxTime:ee}=function(e){const t=Object(a.useMemo)((()=>A()(e)),[e]),[n,i]=Object(a.useState)(t),r=Object(a.useMemo)((()=>{if(n.isSame(t,"day"))return t.clone()}),[n,t]),s=Object(a.useMemo)((()=>{if(n.isSame(t,"day"))return t.clone().endOf("day")}),[n,t]),o=Object(a.useCallback)((e=>{e&&(e.isBefore(t)?i(t):i(e))}),[t]);return{startDatetime:n,initialDatetime:t,onChangeStartDateTime:o,minTime:r,maxTime:s}}();return i.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentUpgradeModal",title:i.a.createElement(i.a.Fragment,null,I?u?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartUpgradeSingleTitle",defaultMessage:"Restart upgrade"}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleTitle",defaultMessage:"Upgrade agent"}):s?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.scheduleUpgradeMultipleTitle",defaultMessage:"Schedule upgrade for {count, plural, one {agent} other {{count} agents} =true {all selected agents}}",values:{count:j||n}}):u?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartUpgradeMultipleTitle",defaultMessage:"Restart upgrade on {updating} out of {count, plural, one {agent} other {{count} agents} =true {all agents}} stuck in updating",values:{count:j||n,updating:B}}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeMultipleTitle",defaultMessage:"Upgrade {count, plural, one {agent} other {{count} agents} =true {all selected agents}}",values:{count:j||n}})),onCancel:e,onConfirm:async function(){var a;const i=M($),r={rollout_duration_seconds:X.length>0&&(null===(a=X[0])||void 0===a?void 0:a.value)>0?X[0].value:void 0,start_time:V.toISOString()};try{y(!0);const n=e=>Array.isArray(e)?e.map((e=>e.id)):e,{error:a}=I&&!s?await Object(c.Q)(t[0].id,{version:i,force:u}):await Object(c.U)({version:i,agents:n(u?_:t),force:u,...r});if(a)throw 400===(null==a?void 0:a.statusCode)&&w(null==a?void 0:a.message),a;y(!1),m.toasts.addSuccess(o.i18n.translate("xpack.fleet.upgradeAgents.successNotificationTitle",{defaultMessage:"Upgrading agent(s)"})),e()}catch(e){y(!1),m.toasts.addError(e,{title:o.i18n.translate("xpack.fleet.upgradeAgents.fatalErrorNotificationTitle",{defaultMessage:"Error upgrading {count, plural, one {agent} other {{count} agents} =true {all selected agents}}",values:{count:j||n}})})}},cancelButtonText:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:E||H||u&&0===B,confirmButtonText:I?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmSingleButtonLabel",defaultMessage:"Upgrade agent"}):s?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmScheduleMultipleButtonLabel",defaultMessage:"Schedule"}):u?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartConfirmMultipleButtonLabel",defaultMessage:"Restart upgrade {count, plural, one {agent} other {{count} agents} =true {all selected agents}}",values:{count:B}}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmMultipleButtonLabel",defaultMessage:"Upgrade {count, plural, one {agent} other {{count} agents} =true {all selected agents}}",values:{count:j||n}})},i.a.createElement("p",null,H?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.noVersionsText",defaultMessage:"No selected agents are eligible for an upgrade. Please select one or more eligible agents."}):I?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleDescription",defaultMessage:"This action will upgrade the agent running on '{hostName}' to version {version}. This action can not be undone. Are you sure you wish to continue?",values:{hostName:t[0].local_metadata.host.hostname,version:M($)}})),u&&i.a.createElement("p",null,i.a.createElement("em",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleTimeout",defaultMessage:"Note that you may only restart an upgrade every {minutes} minutes to ensure that the upgrade will not be rolled back.",values:{minutes:b.a}})))):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeMultipleDescription",defaultMessage:"This action will upgrade multiple agents to version {version}. This action can not be undone. Are you sure you wish to continue?",values:{version:M($)}})),i.a.createElement(r.EuiFormRow,{label:o.i18n.translate("xpack.fleet.upgradeAgents.chooseVersionLabel",{defaultMessage:"Upgrade version"}),fullWidth:!0},i.a.createElement(r.EuiComboBox,{"data-test-subj":"agentUpgradeModal.VersionCombobox",fullWidth:!0,singleSelection:{asPlainText:!0},options:U,isDisabled:H,isClearable:!1,selectedOptions:$,onChange:e=>{e.length&&G(e)},onCreateOption:null!=f&&null!==(p=f.internal)&&void 0!==p&&p.onlyAllowAgentUpgradeToKnownVersions?void 0:e=>{const t=e.trim();G([{label:t,value:t}])},customOptionText:"Use custom agent version {searchValue} (not recommended)"})),!I&&Array.isArray(t)&&t.some((e=>{var t,n,a,i;return!!(i=null===(t=e.local_metadata)||void 0===t||null===(n=t.elastic)||void 0===n||null===(a=n.agent)||void 0===a?void 0:a.version)&&k()(i,F)}))?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(r.EuiCallOut,{color:"warning",title:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.warningCallout",defaultMessage:"Rolling upgrades are only available for Elastic Agent versions {version} and higher",values:{version:i.a.createElement("strong",null,F)}})})):null,s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(r.EuiFormRow,{label:o.i18n.translate("xpack.fleet.upgradeAgents.startTimeLabel",{defaultMessage:"Scheduled date and time"}),fullWidth:!0},i.a.createElement(r.EuiDatePicker,{"data-test-subj":"agentUpgradeModal.startTimeDatePicker",fullWidth:!0,required:!0,showTimeSelect:!0,selected:V,minDate:Q,minTime:Z,maxTime:ee,onChange:Y}))),i.a.createElement(r.EuiSpacer,{size:"m"}),I?null:i.a.createElement(r.EuiFormRow,{label:i.a.createElement(r.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(r.EuiFlexItem,{grow:!1},o.i18n.translate("xpack.fleet.upgradeAgents.rolloutPeriodLabel",{defaultMessage:"Rollout period"})),i.a.createElement(r.EuiSpacer,{size:"xs"}),i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiToolTip,{position:"top",content:o.i18n.translate("xpack.fleet.upgradeAgents.rolloutPeriodTooltip",{defaultMessage:"Define the rollout period for upgrades to your Elastic Agents. Any agents that are offline during this period will be upgraded when they come back online."})},i.a.createElement(r.EuiIcon,{type:"iInCircle"})))),fullWidth:!0},i.a.createElement(r.EuiComboBox,{"data-test-subj":"agentUpgradeModal.MaintenanceCombobox",fullWidth:!0,isClearable:!1,singleSelection:{asPlainText:!0},options:K,selectedOptions:X,onChange:e=>{e.length&&q(e)}})),v?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"s"}),i.a.createElement(r.EuiCallOut,{color:"danger",title:o.i18n.translate("xpack.fleet.upgradeAgents.warningCalloutErrors",{defaultMessage:"Error upgrading the selected {count, plural, one {agent} other {{count} agents}}",values:{count:I}})})):null)},P={Healthy:i.a.createElement(r.EuiBadge,{color:"success"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.healthyStatusText",defaultMessage:"Healthy"})),Offline:i.a.createElement(r.EuiBadge,{color:"default"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.offlineStatusText",defaultMessage:"Offline"})),Inactive:i.a.createElement(r.EuiBadge,{color:f.euiLightVars.euiColorDarkShade},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.inactiveStatusText",defaultMessage:"Inactive"})),Unenrolled:i.a.createElement(r.EuiBadge,{color:f.euiLightVars.euiColorDisabled},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.unenrolledStatusText",defaultMessage:"Unenrolled"})),Unhealthy:i.a.createElement(r.EuiBadge,{color:"warning"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.unhealthyStatusText",defaultMessage:"Unhealthy"})),Updating:i.a.createElement(r.EuiBadge,{color:"primary"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.updatingStatusText",defaultMessage:"Updating"}))};function I(e){switch(e){case"error":case"degraded":return P.Unhealthy;case"inactive":return P.Inactive;case"offline":return P.Offline;case"unenrolling":case"enrolling":case"updating":return P.Updating;case"unenrolled":return P.Unenrolled;default:return P.Healthy}}const O=h()(r.EuiCallOut).withConfig({displayName:"WrappedEuiCallOut",componentId:"sc-kv833j-0"})(["white-space:wrap !important;"]),j=({agent:e,fromDetails:t})=>{const{last_checkin:n,last_checkin_message:s}=e,o=new Date(n||0).getTime(),u=s?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.checkinMessageText",defaultMessage:"Last checkin message: {lastCheckinMessage}",values:{lastCheckinMessage:s}}):null,d=o?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.checkInTooltipText",defaultMessage:"Last checked in {lastCheckIn}",values:{lastCheckIn:i.a.createElement(l.FormattedRelative,{value:o})}})):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.noCheckInTooltipText",defaultMessage:"Never checked in"}),p=Object(a.useMemo)((()=>{if(t&&"offline"===e.status)return Object(g.getPreviousAgentStatusForOfflineAgents)(e)}),[t,e]),[m,h]=Object(a.useState)(!1),f=Object(E.b)(),{docLinks:y}=Object(c.lc)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiToolTip,{position:"top",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,d),i.a.createElement("p",null,u),Object(g.isStuckInUpdating)(e)?Object(g.isAgentInFailedUpgradeState)(e)?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.failedUpgradeTooltipText",defaultMessage:"Agent upgrade failed. Consider restarting the upgrade."}):i.a.createElement("p",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.restartUpgradeTooltipText",defaultMessage:"Agent may be stuck updating. Consider restarting the upgrade."})):null)},Object(g.isStuckInUpdating)(e)&&!t?i.a.createElement("div",{className:"eui-textNoWrap"},I(e.status)," ",i.a.createElement(r.EuiIcon,{type:"warning",color:"warning"})):i.a.createElement(i.a.Fragment,null,I(e.status),p?I(p):null)),t&&Object(g.isStuckInUpdating)(e)?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(O,{iconType:"warning",size:"m",color:"warning",title:Object(g.isAgentInFailedUpgradeState)(e)?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.failedUpgradeTitle",defaultMessage:"Agent upgrade is stuck in failed state."}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.stuckUpdatingTitle",defaultMessage:"Agent may be stuck updating."})},i.a.createElement("p",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.stuckUpdatingText",defaultMessage:"{stuckMessage} Consider restarting the upgrade. {learnMore}",values:{stuckMessage:Object(g.isAgentInFailedUpgradeState)(e)?"Agent upgrade failed.":"Agent has been updating for a while, and may be stuck.",learnMore:i.a.createElement("div",null,i.a.createElement(r.EuiLink,{href:y.links.fleet.upgradeElasticAgent,target:"_blank"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.upgradeAgentsDocLink",defaultMessage:"Learn more"})))}})),i.a.createElement(r.EuiButton,{color:"warning",onClick:()=>{h(!0)},"data-test-subj":"restartUpgradeBtn"},i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.restartUpgradeBtn",defaultMessage:"Restart upgrade"})))):null,m&&i.a.createElement(r.EuiPortal,null,i.a.createElement(T,{agents:[e],agentCount:1,onClose:()=>{h(!1),f()},isUpdating:!0})))},B=({onClose:e,agents:t,agentCount:n,useForceUnenroll:s,hasFleetServer:u=!1})=>{const{notifications:d}=Object(c.lc)(),[p,m]=Object(a.useState)(s||!1),[h,f]=Object(a.useState)(!1),g=Array.isArray(t)&&1===t.length;return i.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentUnenrollModal",title:g?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteSingleTitle",defaultMessage:"Unenroll agent"}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceDeleteMultipleTitle",defaultMessage:"Unenroll {count} agents",values:{count:n}}),onCancel:e,onConfirm:async function(){try{f(!0);const{error:n}=g?await Object(c.P)(t[0].id,{revoke:p}):await Object(c.T)({agents:Array.isArray(t)?t.map((e=>e.id)):t,revoke:p,includeInactive:!0});if(n)throw n;if(f(!1),p){const e=g?o.i18n.translate("xpack.fleet.unenrollAgents.successForceSingleNotificationTitle",{defaultMessage:"Agent unenrolled"}):o.i18n.translate("xpack.fleet.unenrollAgents.successForceMultiNotificationTitle",{defaultMessage:"Agents unenrolled"});d.toasts.addSuccess(e)}else{const e=g?o.i18n.translate("xpack.fleet.unenrollAgents.successSingleNotificationTitle",{defaultMessage:"Unenrolling agent"}):o.i18n.translate("xpack.fleet.unenrollAgents.successMultiNotificationTitle",{defaultMessage:"Unenrolling agents"});d.toasts.addSuccess(e)}e()}catch(e){f(!1),d.toasts.addError(e,{title:o.i18n.translate("xpack.fleet.unenrollAgents.fatalErrorNotificationTitle",{defaultMessage:"Error unenrolling {count, plural, one {agent} other {agents}}",values:{count:n}})})}},cancelButtonText:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:h,confirmButtonText:g?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.confirmSingleButtonLabel",defaultMessage:"Unenroll agent"}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.confirmMultipleButtonLabel",defaultMessage:"Unenroll {count} agents",values:{count:n}}),buttonColor:"danger"},i.a.createElement("p",null,u&&g?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiCallOut,{title:o.i18n.translate("xpack.fleet.unenrollAgents.unenrollFleetServerTitle",{defaultMessage:"This agent is running Fleet Server"}),color:"warning",iconType:"warning"},i.a.createElement("p",null,i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.unenrollFleetServerDescription",defaultMessage:"Unenrolling this agent will disconnect a Fleet Server and prevent agents from sending data if no other Fleet Servers exist."}))),i.a.createElement(r.EuiSpacer,null)):null,g?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteSingleDescription",defaultMessage:'This action will remove the selected agent running on "{hostName}" from Fleet. Any data that was already sent by the agent will not be deleted. This action cannot be undone.',values:{hostName:t[0].local_metadata.host.hostname}}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteMultipleDescription",defaultMessage:"This action will remove multiple agents from Fleet and prevent new data from being ingested. Any data that was already sent by these agents will not be affected. This action cannot be undone."})),i.a.createElement(r.EuiFormFieldset,{legend:{children:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceUnenrollLegendText",defaultMessage:"Force unenroll {count, plural, one {agent} other {agents}}",values:{count:n}})}},i.a.createElement(r.EuiCheckbox,{id:"fleetForceUnenrollAgents",label:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceUnenrollCheckboxLabel",defaultMessage:"Remove {count, plural, one {agent} other {agents}} immediately. Do not wait for agent to send any last data.",values:{count:n}}),checked:p,onChange:e=>m(e.target.checked),disabled:s})))};var L=n(190);let _;!function(e){e.INITIAL="initial",e.CREATED="created",e.FAILED="failed"}(_||(_={}));const N=({createState:e})=>{var t;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),e.status===_.CREATED?i.a.createElement(r.EuiCallOut,{"data-test-subj":"agentPolicyCreateStatusCallOut",title:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.created",defaultMessage:"Agent policy created"}),color:"success",iconType:"check"}):i.a.createElement(r.EuiCallOut,{"data-test-subj":"agentPolicyCreateStatusCallOut",title:i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.failed",defaultMessage:"Agent policy creation failed"}),color:"danger",iconType:"cross"},null!==(t=e.errorMessage)&&void 0!==t?t:null))},z=({agentPolicy:e})=>{var t;const n=null==e||null===(t=e.monitoring_enabled)||void 0===t?void 0:t.includes("metrics");return i.a.createElement(r.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiText,{size:"s",color:"subdued"},"N/A")),i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiIconTip,{type:"iInCircle",content:n?i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentList.metricsNotAvailableOtherReason",defaultMessage:"That metric is not available, you may not have the correct permission to retrieve them."}):i.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agent.metricsNotAvailableMonitoringNotEnabled",defaultMessage:"Agent monitoring is not enabled for this agent policy. Visit agent policy settings to enable monitoring."}),color:"subdued"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(54),l=n.n(o),c=n(6),u=n(4),d=n(10);const p=l.a.div.withConfig({displayName:"DraggableDiv",componentId:"sc-1mhwh70-0"})(["margin:",";"],(e=>e.theme.eui.euiSizeS));function m(e){return null!=e&&e.length?e.map(((e,t)=>s.a.createElement(c.EuiFormErrorText,{key:t},e))):null}const h=s.a.memo((({id:e,index:t,multiline:n,value:a,onChange:l,onDelete:d,placeholder:h,autoFocus:f,errors:g,disabled:E})=>{var y;const x=Object(r.useCallback)((()=>{d(t)}),[d,t]),v=(null!==(y=null==g?void 0:g.length)&&void 0!==y?y:0)>0,k=Object(o.useTheme)();return s.a.createElement(c.EuiDraggable,{spacing:"m",index:t,draggableId:e,isDragDisabled:E,customDragHandle:!0,style:{paddingLeft:0,paddingRight:0}},((e,t)=>s.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1,style:t.isDragging?{background:k.eui.euiPanelBackgroundColorModifiers.plain}:{}},s.a.createElement(c.EuiFlexItem,{grow:!1},s.a.createElement(p,i()({},e.dragHandleProps,{"aria-label":u.i18n.translate("xpack.fleet.settings.sortHandle",{defaultMessage:"Sort host handle"})}),s.a.createElement(c.EuiIcon,{color:"text",type:"grab"}))),s.a.createElement(c.EuiFlexItem,null,n?s.a.createElement(c.EuiTextArea,{fullWidth:!0,value:a,onChange:l,autoFocus:f,isInvalid:v,disabled:E,placeholder:h}):s.a.createElement(c.EuiFieldText,{fullWidth:!0,value:a,onChange:l,autoFocus:f,isInvalid:v,disabled:E,placeholder:h}),m(g)),s.a.createElement(c.EuiFlexItem,{grow:!1},s.a.createElement(c.EuiButtonIcon,{color:"text",onClick:x,iconType:"cross",disabled:E,"aria-label":u.i18n.translate("xpack.fleet.multiRowInput.deleteButton",{defaultMessage:"Delete row"})})))))})),f=s.a.memo((({index:e,deletable:t,multiline:n,value:a,onChange:i,onDelete:o,placeholder:l,autoFocus:d,errors:p,disabled:h})=>{var f;const g=Object(r.useCallback)((()=>{o(e)}),[o,e]),E=(null!==(f=null==p?void 0:p.length)&&void 0!==f?f:0)>0;return s.a.createElement(s.a.Fragment,null,e>0&&s.a.createElement(c.EuiSpacer,{size:"s"}),s.a.createElement(c.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},s.a.createElement(c.EuiFlexItem,null,n?s.a.createElement(c.EuiTextArea,{fullWidth:!0,value:a,onChange:i,autoFocus:d,isInvalid:E,disabled:h,placeholder:l}):s.a.createElement(c.EuiFieldText,{fullWidth:!0,value:a,onChange:i,autoFocus:d,isInvalid:E,disabled:h,placeholder:l}),m(p)),t&&s.a.createElement(c.EuiFlexItem,{grow:!1},s.a.createElement(c.EuiButtonIcon,{color:"text",onClick:g,iconType:"cross",disabled:h,"aria-label":u.i18n.translate("xpack.fleet.multiRowInput.deleteButton",{defaultMessage:"Delete row"})}))))})),g=({id:e,value:t,onChange:n,helpText:a,label:i,isInvalid:o,errors:l,disabled:u,placeholder:p,multiline:g=!1,sortable:E=!0,isUrl:y})=>{const[x,v]=Object(r.useState)(!1),k=Object(r.useMemo)((()=>t.length?t:[""]),[t]),b=Object(r.useMemo)((()=>k.map(((e,t)=>({value:e,onChange:e=>{const a=[...k];a[t]=e.target.value,n(a)}})))),[k,n]),S=Object(r.useMemo)((()=>l?l.reduce(((e,t)=>(void 0===t.index||(e[t.index]||(e[t.index]=[]),e[t.index].push(t.message)),e)),[]):[]),[l]),F=Object(r.useCallback)((e=>{S.splice(e,1),n([...k.slice(0,e),...k.slice(e+1)])}),[k,n,S]),C=Object(r.useCallback)((()=>{v(!0),n([...k,""])}),[k,n]),D=Object(r.useCallback)((({source:e,destination:t})=>{if(e&&t){const a=Object(c.euiDragDropReorder)(k,e.index,t.index),i=S[e.index];S.splice(e.index,1),S.splice(t.index,0,i),n(a)}}),[k,n,S]),w=Object(r.useMemo)((()=>l&&l.filter((e=>void 0===e.index)).map((({message:e})=>e))),[l]),A=E&&b.length>1;return s.a.createElement(c.EuiFormRow,{fullWidth:!0,label:i,isInvalid:o},s.a.createElement(s.a.Fragment,null,s.a.createElement(c.EuiFormHelpText,null,a),a&&s.a.createElement(c.EuiSpacer,{size:"m"}),A?s.a.createElement(c.EuiDragDropContext,{onDragEnd:D},s.a.createElement(c.EuiDroppable,{droppableId:`${e}Droppable`,spacing:"none"},b.map(((t,n)=>s.a.createElement(s.a.Fragment,{key:n},s.a.createElement(h,{id:`${e}${n}Draggable`,index:n,onChange:t.onChange,onDelete:F,value:t.value,autoFocus:x,errors:S[n],disabled:u,placeholder:p})))))):b.map(((e,t)=>s.a.createElement(f,{key:t,multiline:g,index:t,onChange:e.onChange,onDelete:F,value:e.value,autoFocus:x,errors:S[t],disabled:u,placeholder:p,deletable:b.length>1}))),m(w),s.a.createElement(c.EuiSpacer,{size:"m"}),s.a.createElement(c.EuiButtonEmpty,{"data-test-subj":"fleetServerHosts.multiRowInput.addRowButton",disabled:u,size:"xs",flush:"left",iconType:"plusInCircle",onClick:C},y?s.a.createElement(d.FormattedMessage,{id:"xpack.fleet.multiRowInput.addAnotherUrl",defaultMessage:"Add another URL"}):s.a.createElement(d.FormattedMessage,{id:"xpack.fleet.multiRowInput.addRow",defaultMessage:"Add row"}))))}},,function(e,t,n){"use strict";var a=n(153);e.exports=function(e){return function(t){return e.test(a(t))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return W})),n.d(t,"d",(function(){return G})),n.d(t,"b",(function(){return Y})),n.d(t,"e",(function(){return Z}));var a=n(15);const i=({pkgTitle:e,pkgkey:t,integration:n})=>(Object(a.wb)("add_integration_to_policy",{pkgTitle:e,pkgkey:t,...n?{integration:n}:{}}),null);var r=n(1),s=n.n(r),o=n(6),l=n(10),c=n(5),u=n(105),d=n(55),p=n(54),m=n.n(p),h=n(4),f=n(136),g=n(178),E=n.n(g),y=n(37),x=n(11),v=n(0);const k=({index:e,value:t,onChange:n,onDelete:a,onBlur:i,autoFocus:l,isDisabled:c,showDeleteButton:u})=>{const d=Object(r.useCallback)((()=>{a(e)}),[a,e]),p=Object(r.useCallback)((t=>{n(e,t.target.value)}),[n,e]);return s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFieldText,{fullWidth:!0,value:t,onChange:p,autoFocus:l,disabled:c,onBlur:i,"data-test-subj":`multiTextInputRow-${e}`})),u&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{color:"text",onClick:d,iconType:"cross",disabled:c,"aria-label":h.i18n.translate("xpack.fleet.multiTextInput.deleteRowButton",{defaultMessage:"Delete row"})})))},b=({value:e,onChange:t,onBlur:n,isInvalid:a,isDisabled:i,errors:c,"data-test-subj":u})=>{const[d,p]=Object(r.useState)(!1),[m,h]=Object(r.useState)((()=>function(e){return e.length>0?e:[""]}(e))),[f,g]=Object(r.useState)(m);Object(r.useEffect)((()=>{f!==m&&(g(m),""===m[m.length-1]?t(m.slice(0,m.length-1)):t(m))}),[t,f,m]);const E=Object(r.useCallback)((e=>{h([...m.slice(0,e),...m.slice(e+1)])}),[m]),y=Object(r.useCallback)(((e,t)=>{const n=[...m];n[e]=t,h(n)}),[m]),x=Object(r.useCallback)((()=>{p(!0),h([...m,""])}),[m]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",direction:"column","data-test-subj":u},m.map(((e,t)=>s.a.createElement(o.EuiFlexItem,{key:t},s.a.createElement(k,{index:t,onChange:y,onDelete:E,onBlur:n,value:e,autoFocus:d,isDisabled:i,showDeleteButton:m.length>1}))))),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiButtonEmpty,{disabled:i,size:"xs",flush:"left",iconType:"plusInCircle",onClick:x},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.multiTextInput.addRow",defaultMessage:"Add row"})))},S="generic",F=({value:e,onChange:t,datastreams:n,isDisabled:a,pkgName:i=""})=>{var c;const u=null!==(c=n.map((e=>({label:e.dataset,value:e}))))&&void 0!==c?c:[],d=u.find((e=>e.label===S)),p=e?"string"==typeof e?{label:e,value:{dataset:e,package:i}}:{label:e.dataset,value:{dataset:e.dataset,package:e.package}}:void 0,m=p||d||{label:S,value:{dataset:S,package:i}},[f,g]=Object(r.useState)([m]);return Object(r.useEffect)((()=>{e&&"string"!=typeof e||t(m.value)}),[e,m.value,t,i]),s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiComboBox,{"aria-label":h.i18n.translate("xpack.fleet.datasetCombo.ariaLabel",{defaultMessage:"Dataset combo box"}),placeholder:h.i18n.translate("xpack.fleet.datasetCombo.placeholder",{defaultMessage:"Select a dataset"}),singleSelection:{asPlainText:!0},options:u,selectedOptions:f,onCreateOption:(e="")=>{e.trim().toLowerCase()&&(g([{label:e,value:{dataset:e,package:i}}]),t({dataset:e,package:i}))},onChange:e=>{g(e);const n=e[0].value;t({dataset:e[0].label,package:n&&"string"!=typeof n?n.package:i})},customOptionText:h.i18n.translate("xpack.fleet.datasetCombo.customOptionText",{defaultMessage:"Add {searchValue} as a custom option",values:{searchValue:"{searchValue}"}}),isClearable:!1,isDisabled:a,"data-test-subj":"datasetComboBox"}),p&&p.value.package!==i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"xs"}),s.a.createElement(o.EuiText,{size:"xs",color:"warning"},s.a.createElement(o.EuiIcon,{type:"warning"})," ",s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.datasetCombo.warning",defaultMessage:"This data stream is managed by the {package} integration, {learnMore}.",values:{package:p.value.package,learnMore:s.a.createElement(o.EuiToolTip,{position:"bottom",content:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.datasetCombo.warningTooltip",defaultMessage:"The destination data stream may not be designed to receive data from this integration, check that the mappings and ingest pipelines are compatible before sending data."})},s.a.createElement(o.EuiLink,{target:"_blank"},h.i18n.translate("xpack.fleet.datasetCombo.learnMoreLink",{defaultMessage:"learn more"})))}}))))},C=m.a.div.withConfig({displayName:"FixedHeightDiv",componentId:"sc-1xnkkrk-0"})(["height:300px;"]),D=m()(o.EuiFormRow).withConfig({displayName:"FormRow",componentId:"sc-1xnkkrk-1"})([".euiFormRow__label{flex:1;}.euiFormRow__fieldWrapper > .euiPanel{padding:",";}"],(e=>e.theme.eui.euiSizeXS)),w=Object(r.memo)((({varDef:e,value:t,onChange:n,errors:a,forceShowErrors:i,frozen:c,packageType:u,packageName:p,datastreams:m=[],isEditPage:h=!1})=>{const[f,g]=Object(r.useState)(!1),{required:y,type:x,title:v,name:k,description:b}=e,S=Boolean((f||i)&&!(null==a||!a.length)),F=S?a:null,C=v||k,w=C.replace(/\s/g,"-").toLowerCase(),I=Object(r.useMemo)((()=>"bool"!==x&&!y),[y,x]),{secretsStorage:O}=d.b.get();let j;j=O&&e.secret?s.a.createElement(P,{varDef:e,value:t,onChange:n,frozen:c,packageName:p,packageType:u,datastreams:m,isEditPage:h,isInvalid:S,fieldLabel:C,fieldTestSelector:w,isDirty:f,setIsDirty:g}):A({varDef:e,value:t,onChange:n,frozen:c,packageName:p,packageType:u,datastreams:m,isEditPage:h,isInvalid:S,fieldLabel:C,fieldTestSelector:w,isDirty:f,setIsDirty:g});const B=s.a.createElement(D,{isInvalid:S,error:F,label:e.secret?s.a.createElement(T,{fieldLabel:C}):C,labelAppend:I?s.a.createElement(o.EuiText,{size:"xs",color:"subdued"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})):void 0,helpText:b&&s.a.createElement(E.a,{children:b}),fullWidth:!0},j);return e.secret?s.a.createElement(M,null,B):B}));function A({varDef:e,value:t,onChange:n,frozen:a,packageName:i,packageType:r,datastreams:l=[],isEditPage:c,isInvalid:u,fieldLabel:d,fieldTestSelector:p,setIsDirty:m}){const{multi:f,type:g,name:E,options:x}=e;if(f)return s.a.createElement(b,{value:null!=t?t:[],onChange:n,onBlur:()=>m(!0),isDisabled:a,"data-test-subj":`multiTextInput-${p}`});if(E===v.r&&"input"===r)return s.a.createElement(F,{pkgName:i,datastreams:l,value:t,onChange:n,isDisabled:c});switch(g){case"textarea":return s.a.createElement(o.EuiTextArea,{isInvalid:u,value:void 0===t?"":t,onChange:e=>n(e.target.value),onBlur:()=>m(!0),disabled:a,resize:"vertical","data-test-subj":`textAreaInput-${p}`});case"yaml":return a?s.a.createElement(o.EuiCodeBlock,{language:"yaml",isCopyable:!1,paddingSize:"s"},s.a.createElement("pre",null,t)):s.a.createElement(C,null,s.a.createElement(y.CodeEditor,{languageId:"yaml",width:"100%",height:"300px",value:t,onChange:n,options:{minimap:{enabled:!1},ariaLabel:h.i18n.translate("xpack.fleet.packagePolicyField.yamlCodeEditor",{defaultMessage:"YAML Code Editor"}),scrollBeyondLastLine:!1,wordWrap:"off",wrappingIndent:"indent",tabSize:2,lineNumbers:"off",lineNumbersMinChars:0,glyphMargin:!1,folding:!1,lineDecorationsWidth:0,overviewRulerBorder:!1}}));case"bool":return s.a.createElement(o.EuiSwitch,{label:d,checked:t,showLabel:!1,onChange:e=>n(e.target.checked),onBlur:()=>m(!0),disabled:a,"data-test-subj":`switch-${p}`});case"password":return s.a.createElement(o.EuiFieldPassword,{type:"dual",isInvalid:u,value:void 0===t?"":t,onChange:e=>n(e.target.value),onBlur:()=>m(!0),disabled:a,"data-test-subj":`passwordInput-${p}`});case"select":const e=null==x?void 0:x.map((e=>({value:e.value,label:e.text}))),i=void 0===t?[]:null==e?void 0:e.filter((e=>e.value===t));return s.a.createElement(o.EuiComboBox,{placeholder:h.i18n.translate("xpack.fleet.packagePolicyField.selectPlaceholder",{defaultMessage:"Select an option"}),singleSelection:{asPlainText:!0},options:e,selectedOptions:i,isClearable:!0,onChange:e=>{const t=0===e.length?void 0:e[0].value;return n(t)},onBlur:()=>m(!0),"data-test-subj":`select-${p}`});default:return s.a.createElement(o.EuiFieldText,{isInvalid:u,value:void 0===t?"":t,onChange:e=>n(e.target.value),onBlur:()=>m(!0),disabled:a,"data-test-subj":`textInput-${p}`})}}const M=({children:e})=>{const{docLinks:t}=Object(x.Rc)();return s.a.createElement(o.EuiPanel,{hasShadow:!1,color:"subdued",paddingSize:"m"},e,s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(o.EuiText,{size:"xs"},s.a.createElement(o.EuiLink,{href:t.links.fleet.policySecrets,target:"_blank"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.secretLearnMoreText",defaultMessage:"Learn more about policy secrets."}))))},T=({fieldLabel:e})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"xs"},s.a.createElement(o.EuiFlexItem,{grow:!1,"aria-label":e},e),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiToolTip,{content:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.secretLearnMorePopoverContent",defaultMessage:"This value is a secret. After you save this integration policy, you won't be able to view the value again."})},s.a.createElement(o.EuiIcon,{"aria-label":"Secret value",type:"questionInCircle",color:"subdued"})))),s.a.createElement(o.EuiSpacer,{size:"s"}));function P({varDef:e,value:t,onChange:n,frozen:a,packageName:i,packageType:c,datastreams:u=[],isEditPage:d,isInvalid:p,fieldLabel:m,fieldTestSelector:h,setIsDirty:f,isDirty:g}){var E;const[y,x]=Object(r.useState)(d&&!t),v=Object(r.useRef)(t),k=!!v.current,b=null===(E=e.title)||void 0===E?void 0:E.toLowerCase(),S=d&&!y&&k,F=t&&(null==t?void 0:t.isSecretRef),C=A({varDef:e,value:y&&F?"":t,onChange:n,frozen:a,packageName:i,packageType:c,datastreams:u,isEditPage:d,isInvalid:p,fieldLabel:m,fieldTestSelector:h,isDirty:g,setIsDirty:f});if(!k)return C;if(S)return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,{size:"s",color:"subdued"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.stepConfigure.fieldSecretValueSet",defaultMessage:"The saved {varName} is hidden. You can only replace the {varName}.",values:{varName:b}})),s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiButtonEmpty,{onClick:()=>x(!0),color:"primary",iconType:"refresh",iconSide:"left",size:"xs"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.stepConfigure.fieldSecretValueSetEditButton",defaultMessage:"Replace {varName}",values:{varName:b}})));if(y){const e=s.a.createElement(o.EuiButtonEmpty,{onClick:()=>{x(!1),f(!1),n(v.current)},color:"primary",iconType:"refresh",iconSide:"left",size:"xs"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.stepConfigure.fieldSecretValueSetCancelButton",defaultMessage:"Cancel {varName} change",values:{varName:b}}));return s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",alignItems:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:!1,style:{width:"100%"}},C),s.a.createElement(o.EuiFlexItem,{grow:!1},e))}return C}const I=Object(r.memo)((({hasInputStreams:e,packageInputVars:t,packagePolicyInput:n,updatePackagePolicyInput:a,inputVarsValidationResults:i,forceShowErrors:c,isEditPage:u=!1})=>{const[d,p]=Object(r.useState)(!1),m=c&&Object(f.f)(i),h=[],g=[];t&&t.forEach((e=>{Object(f.c)(e)?g.push(e):h.push(e)}));const E=Object(r.useMemo)((()=>g.filter((({name:e})=>{var t,n;return null===(t=i.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[g,i.vars]);return s.a.createElement(o.EuiFlexGrid,{columns:2},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:1}),s.a.createElement(o.EuiFlexItem,{grow:5},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsTitle",defaultMessage:"Settings"}))),e?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiText,{color:"subdued",size:"s"},s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsDescription",defaultMessage:"The following settings are applicable to all inputs below."})))):null))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},h.map((e=>{var t;const{name:r,type:l}=e;if(!n.vars)return;const{value:d,frozen:p}=n.vars[r];return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(w,{varDef:e,value:d,frozen:p,onChange:e=>{a({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null===(t=i.vars)||void 0===t?void 0:t[r],forceShowErrors:c,isEditPage:u}))})),g.length?s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:d?"arrowDown":"arrowRight",onClick:()=>p(!d),flush:"left"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!d&&m&&E?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:E}}))):null)),d?g.map((e=>{var t,r,l;const{name:d,type:p}=e,m=null===(t=n.vars)||void 0===t||null===(r=t[d])||void 0===r?void 0:r.value;return s.a.createElement(o.EuiFlexItem,{key:d},s.a.createElement(w,{varDef:e,value:m,onChange:e=>{a({vars:{...n.vars,[d]:{type:p,value:e}}})},errors:null===(l=i.vars)||void 0===l?void 0:l[d],forceShowErrors:c,isEditPage:u}))})):null):null)))}));var O=n(14),j=n(20),B=n(7),L=n(59),_=n(60),N=n(45);function z(){const e=Object(j.useHistory)();return Object(r.useMemo)((()=>{var t;return null!==(t=new URLSearchParams(e.location.search).get("datastreamId"))&&void 0!==t?t:void 0}),[e.location.search])}const R=m.a.div.withConfig({displayName:"ScrollAnchor",componentId:"sc-1gjptyy-0"})(["display:none;scroll-margin-top:var(--euiFixedHeadersOffset,0);"]),U=Object(r.memo)((({packagePolicy:e,packageInputStream:t,packageInfo:n,packagePolicyInputStream:a,updatePackagePolicy:i,updatePackagePolicyInputStream:d,inputStreamValidationResults:p,forceShowErrors:m,isEditPage:h})=>{var g,y,k,b,S;const F=null!==(g=null===(y=Object(x.Jb)().enableExperimental)||void 0===y?void 0:y.includes("experimentalDataStreamSettings"))&&void 0!==g&&g,{params:{packagePolicyId:C}}=Object(j.useRouteMatch)(),D=z(),A=Object(r.useRef)(null),M=!!D&&!!a.id&&a.id===D,T=!!C,P=null===(k=a.vars)||void 0===k?void 0:k[v.r],I=(null==P||null===(b=P.value)||void 0===b?void 0:b.dataset)||(null==P?void 0:P.value),{exists:U,isLoading:H}=Object(N.a)(Object(c.F)({dataset:I||t.data_stream.dataset,type:t.data_stream.type}),T),K=!H&&U;Object(r.useEffect)((()=>{M&&A.current&&A.current.scrollIntoView()}),[M,A]);const W=m&&Object(f.f)(p),[$,G]=Object(r.useMemo)((()=>{const e=[],n=[];return t.vars&&t.vars.length&&t.vars.forEach((t=>{Object(f.c)(t)?n.push(t):e.push(t)})),[e,n]}),[t.vars]),J=Object(r.useMemo)((()=>G.filter((({name:e})=>{var t,n;return null==p||null===(t=p.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[G,null==p?void 0:p.vars]),{data:X}=Object(B.useQuery)(["datastreams"],(()=>Object(x.G)()),{enabled:"input"===n.type}),q=function(e,t){const[n,a]=Object(O.partition)(Object(O.sortBy)(e,"dataset"),(e=>e.dataset.startsWith(t)));return n.concat(a)}(null!==(S=Object(O.uniq)(null==X?void 0:X.data_streams))&&void 0!==S?S:[],n.name),[V,Y]=Object(r.useState)(M),Q=Object(r.useMemo)((()=>G.length>0||T&&K||F),[G.length,F,T,K]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGrid,{columns:2},s.a.createElement(R,{ref:A}),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:1}),s.a.createElement(o.EuiFlexItem,{grow:5},s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",justifyContent:"spaceBetween"},"input"!==n.type&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiSwitch,{label:t.title,disabled:a.keep_enabled,checked:a.enabled,onChange:e=>{const t=e.target.checked;d({enabled:t})}})),t.data_stream.release&&"ga"!==t.data_stream.release?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(u.p,{release:Object(c.R)(t.data_stream.release)})):null),"input"!==n.type&&t.description?s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiText,{size:"s",color:"subdued"},s.a.createElement(E.a,null,t.description))):null))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},$.map((e=>{var t,i;if(null==a||!a.vars)return null;const{name:r,type:l}=e,c=null===(t=a.vars)||void 0===t?void 0:t[r],u=null==c?void 0:c.value,f=null!==(i=null==c?void 0:c.frozen)&&void 0!==i&&i;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(w,{varDef:e,value:u,frozen:f,onChange:e=>{d({vars:{...a.vars,[r]:{type:l,value:e}}})},errors:null==p?void 0:p.vars[r],forceShowErrors:m,packageType:n.type,packageName:n.name,datastreams:q,isEditPage:h}))})),Q&&s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:V?"arrowDown":"arrowRight",onClick:()=>Y(!V),flush:"left","data-test-subj":`advancedStreamOptionsToggle-${a.id}`},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!V&&W&&J?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:J}}))):null)),V?s.a.createElement(s.a.Fragment,null,G.map((e=>{var t,i;if(!a.vars)return null;const{name:r,type:l}=e,c=null===(t=a.vars)||void 0===t||null===(i=t[r])||void 0===i?void 0:i.value;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(w,{varDef:e,value:c,onChange:e=>{d({vars:{...a.vars,[r]:{type:l,value:e}}})},errors:null==p?void 0:p.vars[r],forceShowErrors:m,packageType:n.type,packageName:n.name,datastreams:q,isEditPage:h}))})),T&&K&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(L.a,{packageInputStream:a,packageInfo:n,customDataset:I})),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(_.a,{packageInputStream:a,packageInfo:n,customDataset:I})))):null)))))})),H=m()(o.EuiHorizontalRule).withConfig({displayName:"ShortenedHorizontalRule",componentId:"sc-1p32kp-0"})(["&&&{width:","%;margin-left:auto;}"],11/12*100),K=Object(r.memo)((({packageInput:e,packageInfo:t,packageInputStreams:n,packagePolicyInput:a,packagePolicy:i,updatePackagePolicy:c,updatePackagePolicyInput:u,inputValidationResults:d,forceShowErrors:p,isEditPage:m=!1})=>{const g=z(),[E,y]=Object(r.useState)((()=>((e,t,n,a)=>!!n.enabled&&(Object(f.b)(e.vars,n.vars)||t.some((e=>{var t;return e.enabled&&Object(f.b)(e.vars,null===(t=n.streams.find((t=>e.data_stream.dataset===t.data_stream.dataset)))||void 0===t?void 0:t.vars)}))||n.streams.some((e=>a&&e.id&&e.id===a))))(e,n,a,g))),x=d&&Object(f.a)(d),v=p&&x,k=Object(r.useMemo)((()=>n.length>0),[n.length]),b=Object(r.useMemo)((()=>n.map((e=>({packageInputStream:e,packagePolicyInputStream:a.streams.find((t=>t.data_stream.dataset===e.data_stream.dataset))}))).filter((e=>Boolean(e.packagePolicyInputStream)))),[n,a.streams]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiSwitch,{label:s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,e.title||e.type)))),checked:a.enabled,disabled:a.keep_enabled,onChange:e=>{const t=e.target.checked;u({enabled:t,streams:a.streams.map((e=>({...e,enabled:t})))}),!t&&E&&y(!1)}})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},v?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:x}}))):null,s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{color:v?"danger":"primary",onClick:()=>y(!E),iconType:E?"arrowUp":"arrowDown",iconSide:"right","aria-label":E?h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.hideStreamsAriaLabel",{defaultMessage:"Hide {type} inputs",values:{type:e.type}}):h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.showStreamsAriaLabel",{defaultMessage:"Show {type} inputs",values:{type:e.type}})},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.expandLabel",defaultMessage:"Change defaults"})))))),E?s.a.createElement(o.EuiSpacer,{size:"l"}):null,E&&e.vars&&e.vars.length?s.a.createElement(r.Fragment,null,s.a.createElement(I,{hasInputStreams:k,packageInputVars:e.vars,packagePolicyInput:a,updatePackagePolicyInput:u,inputVarsValidationResults:{vars:null==d?void 0:d.vars},forceShowErrors:p,isEditPage:m}),k?s.a.createElement(H,{margin:"m"}):s.a.createElement(o.EuiSpacer,{size:"l"})):null,E?s.a.createElement(o.EuiFlexGroup,{direction:"column"},b.map((({packageInputStream:e,packagePolicyInputStream:n},r)=>s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(U,{packageInfo:t,packagePolicy:i,packageInputStream:e,packagePolicyInputStream:n,updatePackagePolicy:c,updatePackagePolicyInputStream:t=>{const n=a.streams.findIndex((t=>t.data_stream.dataset===e.data_stream.dataset)),i=[...a.streams];i[n]={...i[n],...t};const r={streams:i};!a.enabled&&t.enabled?r.enabled=!0:a.enabled&&!i.find((e=>e.enabled))&&(r.enabled=!1),u(r)},inputStreamValidationResults:null==d?void 0:d.streams[n.data_stream.dataset],forceShowErrors:p,isEditPage:m}),r!==b.length-1?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(H,{margin:"none"})):null)))):null)})),W=({packageInfo:e,showOnlyIntegration:t,packagePolicy:n,updatePackagePolicy:a,validationResults:i,submitAttempted:p,noTopRule:m=!1,isEditPage:h=!1})=>{const f=Object(r.useMemo)((()=>Object(d.g)(e)),[e]),g=Object(r.useMemo)((()=>t?(e.policy_templates||[]).filter((e=>e.name===t)):e.policy_templates||[]),[e.policy_templates,t]);return i?g.length?s.a.createElement(s.a.Fragment,null,!m&&s.a.createElement(o.EuiHorizontalRule,{margin:"m"}),s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},g.map((t=>Object(c.C)(t).map((r=>{var l,u;const d=n.inputs.find((e=>e.type===r.type&&(!f||e.policy_template===t.name))),m=Object(c.G)(r.type,e,f&&Object(c.M)(t)?t.data_streams:[]);return d?s.a.createElement(o.EuiFlexItem,{key:r.type},s.a.createElement(K,{packageInput:r,packageInfo:e,packagePolicy:n,packageInputStreams:m,packagePolicyInput:d,updatePackagePolicy:a,updatePackagePolicyInput:e=>{const i=n.inputs.findIndex((e=>e.type===r.type&&(!f||e.policy_template===t.name))),s=[...n.inputs];s[i]={...s[i],...e},a({inputs:s})},inputValidationResults:null!==(l=null==i||null===(u=i.inputs)||void 0===u?void 0:u[f?`${t.name}-${d.type}`:d.type])&&void 0!==l?l:{},forceShowErrors:p,isEditPage:h}),s.a.createElement(o.EuiHorizontalRule,{margin:"m"})):null})))))):s.a.createElement(o.EuiEmptyPrompt,{iconType:"checkInCircleFilled",iconColor:"success",body:s.a.createElement(o.EuiText,null,s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.noPolicyOptionsMessage",defaultMessage:"Nothing to configure"})))}):s.a.createElement(u.r,null)},$=m()(o.EuiDescribedFormGroup).withConfig({displayName:"FormGroupResponsiveFields",componentId:"sc-fu67xi-0"})(["@media (max-width:767px){[class*='euiFlexGroup-responsive']{align-items:flex-start;}}"]),G=Object(r.memo)((({agentPolicy:e,packageInfo:t,packagePolicy:n,updatePackagePolicy:i,validationResults:c,submitAttempted:d,noAdvancedToggle:p=!1,isEditPage:m=!1})=>{const{docLinks:g}=Object(a.lc)(),[E,y]=Object(r.useState)(p),x=[],v=[];t.vars&&t.vars.forEach((e=>{Object(f.c)(e)?v.push(e):x.push(e)}));const k=n.is_managed;return c?s.a.createElement(s.a.Fragment,null,k&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiCallOut,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.managedReadonly",defaultMessage:"This is a managed package policy. You cannot modify it here."}),iconType:"lock"}),s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement($,{title:s.a.createElement("h4",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionTitle",defaultMessage:"Integration settings"})),description:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionDescription",defaultMessage:"Choose a name and description to help identify how this integration will be used."})},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{isInvalid:!!c.name,error:c.name,label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNameInputLabel",defaultMessage:"Integration name"})},s.a.createElement(o.EuiFieldText,{readOnly:k,value:n.name,onChange:e=>i({name:e.target.value}),"data-test-subj":"packagePolicyNameInput"}))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDescriptionInputLabel",defaultMessage:"Description"}),labelAppend:s.a.createElement(o.EuiText,{size:"xs",color:"subdued"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})),isInvalid:!!c.description,error:c.description},s.a.createElement(o.EuiFieldText,{readOnly:k,value:n.description,onChange:e=>i({description:e.target.value}),"data-test-subj":"packagePolicyDescriptionInput"}))),x.map((e=>{var t,a;const{name:r,type:l}=e;if(!n.vars||!n.vars[r])return null;const u=n.vars[r].value;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(w,{varDef:e,value:u,onChange:e=>{i({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null!==(t=null==c||null===(a=c.vars)||void 0===a?void 0:a[r])&&void 0!==t?t:[],forceShowErrors:d,isEditPage:m}))})),!p&&!k&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:E?"arrowDown":"arrowRight",onClick:()=>y(!E),flush:"left"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.advancedOptionsToggleLinkText",defaultMessage:"Advanced options"}))),!E&&c.namespace?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:1}}))):null)),E?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{isInvalid:!!c.namespace,error:c.namespace,label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceInputLabel",defaultMessage:"Namespace"}),helpText:m&&"input"===t.type?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyInputOnlyEditNamespaceHelpLabel",defaultMessage:"The namespace cannot be changed for this integration. Create a new integration policy to use a different namespace."}):s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLabel",defaultMessage:"Change the default namespace inherited from the selected Agent policy. This setting changes the name of the integration's data stream. {learnMore}.",values:{learnMore:s.a.createElement(o.EuiLink,{href:g.links.fleet.datastreamsNamingScheme,target:"_blank"},h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLearnMoreLabel",{defaultMessage:"Learn more"}))}})},s.a.createElement(o.EuiComboBox,{noSuggestions:!0,isDisabled:m&&"input"===t.type,singleSelection:!0,selectedOptions:n.namespace?[{label:n.namespace}]:[],onCreateOption:e=>{i({namespace:e})},onChange:e=>{i({namespace:e.length?e[0].label:""})}}))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionLabel",defaultMessage:"Data retention settings"}),helpText:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionText",defaultMessage:"By default all logs and metrics data are stored on the hot tier. {learnMore} about changing the data retention policy for this integration.",values:{learnMore:s.a.createElement(o.EuiLink,{href:g.links.fleet.datastreamsILM,target:"_blank"},h.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionLearnMoreLink",{defaultMessage:"Learn more"}))}})},s.a.createElement("div",null))),v.map((e=>{var t,a;const{name:r,type:l}=e;if(!n.vars||!n.vars[r])return null;const u=n.vars[r].value;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(w,{varDef:e,value:u,onChange:e=>{i({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null!==(t=null==c||null===(a=c.vars)||void 0===a?void 0:a[r])&&void 0!==t?t:[],forceShowErrors:d,isEditPage:m}))})))):null))):s.a.createElement(u.r,null)})),J=m()(o.EuiFormRow).withConfig({displayName:"AgentPolicyFormRow",componentId:"sc-1lyeft6-0"})([".euiFormRow__label{width:100%;}"]),X=({packageInfo:e,agentPolicy:t,updateAgentPolicy:n,setHasAgentPolicyError:i,selectedAgentPolicyId:c})=>{var p,m;const{isReady:f}=Object(a.Gb)(),[g,E]=Object(r.useState)(),{isLoading:y,agentPoliciesError:x,agentPolicyOptions:k,agentPolicies:b}=function(e){const{data:t,error:n,isLoading:i}=Object(a.Ib)({page:1,perPage:v.xb,sortField:"name",sortOrder:"asc",noAgentCount:!0,full:!1}),c=Object(r.useMemo)((()=>(null==t?void 0:t.items.filter((e=>!e.is_managed)))||[]),[null==t?void 0:t.items]),{data:u,isLoading:p}=Object(a.Rb)(),{data:m,isLoading:h}=Object(a.Tb)({page:1,perPage:v.xb,kuery:`${v.qb}.package.name: ${null==e?void 0:e.name}`}),f=Object(r.useMemo)((()=>null==m?void 0:m.items.reduce(((e,t)=>(e[t.policy_id]=!0,e)),{})),[null==m?void 0:m.items]),{getDataOutputForPolicy:g}=Object(r.useMemo)((()=>{var e,t;const n=(null!==(e=null==u?void 0:u.items)&&void 0!==e?e:[]).find((e=>e.is_default)),a=(null!==(t=null==u?void 0:u.items)&&void 0!==t?t:[]).reduce(((e,t)=>(e[t.id]=t,e)),{});return{getDataOutputForPolicy:e=>e.data_output_id?a[e.data_output_id]:n}}),[u]);return{agentPoliciesError:n,isLoading:p||i||h,agentPolicyOptions:Object(r.useMemo)((()=>e?c.map((t=>{var n;const a=Object(d.n)(e)&&(null==f?void 0:f[t.id]),i=(null==e?void 0:e.name)===v.H&&(null===(n=g(t))||void 0===n?void 0:n.type)===v.Nb.Logstash;return{inputDisplay:s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,{size:"s"},t.name),i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"xs"}),s.a.createElement(o.EuiText,{size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyDisabledAPMLogstashOuputText",defaultMessage:"Logstash output for agent integration is not supported with APM"})))),value:t.id,disabled:a||i,"data-test-subj":"agentPolicyItem"}})):[]),[e,c,f,g]),agentPolicies:c}}(e),[S,F]=Object(r.useState)(null!==(p=null==t?void 0:t.id)&&void 0!==p?p:c||(1===b.length?b[0].id:void 0)),[C,D]=Object(r.useState)(!1),[w,A]=Object(r.useState)(t),M=Object(r.useCallback)((e=>{A(e),n(e)}),[n]);Object(r.useEffect)((()=>{t&&S===t.id||(async()=>{if(S){D(!0);const{data:e,error:t}=await Object(a.C)(S);t?(E(t),M(void 0)):e&&e.item&&(E(void 0),M(e.item)),D(!1)}else E(void 0),M(void 0)})()}),[S,t,M]),Object(r.useEffect)((()=>{if(!S&&b.length&&k.length){const e=k.filter((e=>!e.disabled));1===e.length&&F(e[0].value)}}),[b,k,S]),Object(r.useEffect)((()=>{i(!(S&&!g))}),[g,S,i]);const T=Object(r.useCallback)((e=>F(""===e?void 0:e)),[]);return x?s.a.createElement(u.j,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.errorLoadingAgentPoliciesTitle",defaultMessage:"Error loading agent policies"}),error:x}):s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiDescribedFormGroup,{title:s.a.createElement(o.EuiTitle,{size:"xs"},s.a.createElement("h3",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyFormGroupTitle",defaultMessage:"Agent policy"}))),description:s.a.createElement(o.EuiText,{color:"subdued",size:"s"},s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyFormGroupDescription",defaultMessage:"Agent policies are used to manage a group of integrations across a set of agents."})))},s.a.createElement(J,{fullWidth:!0,label:s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyLabel",defaultMessage:"Agent policy"}))),helpText:f&&S&&!C?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyAgentsDescriptionText",defaultMessage:"{count, plural, one {# agent is} other {# agents are}} enrolled with the selected agent policy.",values:{count:null!==(m=null==w?void 0:w.agents)&&void 0!==m?m:0}}):null,isInvalid:Boolean(!S||!e||w&&(P=w,I=e,!!P&&Object(d.n)(I)&&Object(d.f)(P,I.name))),error:S?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.cannotAddLimitedIntegrationError",defaultMessage:"This integration can only be added once per agent policy."}):s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.noPolicySelectedError",defaultMessage:"An agent policy is required."})},s.a.createElement(o.EuiSuperSelect,{placeholder:h.i18n.translate("xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyPlaceholderText",{defaultMessage:"Select an agent policy to add this integration to"}),fullWidth:!0,isLoading:y||!e||C,options:k,valueOfSelected:S,onChange:T,"data-test-subj":"agentPolicySelect","aria-label":"Select Agent Policy"})))),g?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(u.j,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.errorLoadingSelectedAgentPolicyTitle",defaultMessage:"Error loading selected agent policy"}),error:g})):null));var P,I};var q=n(129),V=n(13);let Y;!function(e){e.NEW="new",e.EXISTING="existing"}(Y||(Y={}));const Q=m()(o.EuiTabbedContent).withConfig({displayName:"StyledEuiTabbedContent",componentId:"sc-b5i55v-0"})(["[role='tabpanel']{padding-top:",";}"],(e=>e.theme.eui.euiSizeM)),Z=({agentPolicy:e,updateAgentPolicy:t,newAgentPolicy:n,updateNewAgentPolicy:i,withSysMonitoring:o,updateSysMonitoring:l,validation:c,packageInfo:u,setHasAgentPolicyError:p,updateSelectedTab:m,selectedAgentPolicyId:h})=>{let f=[];const{data:g,error:E}=Object(a.Ib)({page:1,perPage:V.p,sortField:"name",sortOrder:"asc",full:!1,noAgentCount:!0});E&&console.debug("Could not retrieve agent policies"),f=Object(r.useMemo)((()=>(null==g?void 0:g.items.filter((e=>!e.is_managed)))||[]),[null==g?void 0:g.items]),Object(r.useEffect)((()=>{f.length>0&&i({...n,name:Object(d.l)(f)})}),[f.length]);const y=[{id:Y.NEW,"data-test-subj":"newHostsTab",name:"New hosts",content:s.a.createElement(q.e,{agentPolicy:n,updateAgentPolicy:i,withSysMonitoring:o,updateSysMonitoring:l,validation:c})},{id:Y.EXISTING,"data-test-subj":"existingHostsTab",name:"Existing hosts",content:s.a.createElement(X,{packageInfo:u,agentPolicy:e,updateAgentPolicy:t,setHasAgentPolicyError:p,selectedAgentPolicyId:h})}];return f.length>0?s.a.createElement(Q,{initialSelectedTab:h?y[1]:y[0],tabs:y,onTabClick:e=>m(e.id)}):s.a.createElement(q.e,{agentPolicy:n,updateAgentPolicy:i,withSysMonitoring:o,updateSysMonitoring:l,validation:c})}},function(e,t,n){"use strict";var a=n(146);e.exports=function(e){return a({},e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return s.u})),n.d(t,"e",(function(){return s.v})),n.d(t,"f",(function(){return s.w})),n.d(t,"a",(function(){return s.e}));const a=e=>!(e.show_user||e.required&&void 0===e.default);var i=n(120);const r=(e,t)=>e&&!t||Boolean(e&&e.find((e=>{var n;return e.required&&(!t||!t[e.name]||(null===(n=Object(s.v)(t[e.name],e,e.name,i.safeLoad))||void 0===n?void 0:n.length))})));var s=n(55)},function(e,t,n){"use strict";function a(e){return null==e}e.exports.isNothing=a,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:a(e)?[]:[e]},e.exports.repeat=function(e,t){var n,a="";for(n=0;n<t;n+=1)a+=e;return a},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var n,a,i,r;if(t)for(n=0,a=(r=Object.keys(t)).length;n<a;n+=1)e[i=r[n]]=t[i];return e}},function(e,t,n){"use strict";var a=n(137),i=n(141),r=n(113);function s(e,t,n){var a=[];return e.include.forEach((function(e){n=s(e,t,n)})),e[t].forEach((function(e){n.forEach((function(t,n){t.tag===e.tag&&t.kind===e.kind&&a.push(n)})),n.push(e)})),n.filter((function(e,t){return-1===a.indexOf(t)}))}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new i("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{}};function a(e){n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(a);return n}(this.compiledImplicit,this.compiledExplicit)}o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new i("Wrong number of arguments for Schema.create function")}if(e=a.toArray(e),t=a.toArray(t),!e.every((function(e){return e instanceof o})))throw new i("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof r})))throw new i("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},e.exports=o},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),i=n.n(a),r=n(6);const s=({size:e})=>i.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceAround"},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiLoadingSpinner,{size:e||"xl","data-test-subj":"loadingSpinner"})))},function(e,t,n){"use strict";function a(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=a},function(e,t,n){"use strict";var a=n(138);e.exports=new a({include:[n(199)],implicit:[n(267),n(268)],explicit:[n(269),n(270),n(271),n(272)]})},,,,function(e,t,n){"use strict";var a=Object.assign;e.exports=a},function(e,t,n){"use strict";var a=n(233);e.exports=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?a(n[2].sliceStream(n[1])):0}},function(e,t,n){"use strict";var a=n(133)(/[\dA-Za-z]/);e.exports=a},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return z})),n.d(t,"j",(function(){return R})),n.d(t,"k",(function(){return U})),n.d(t,"m",(function(){return G})),n.d(t,"l",(function(){return J}));var a=n(1),i=n.n(a),r=n(4),s=n(10),o=n(6),l=n(163);const c=({troubleshootLink:e})=>i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.confirmIncomingDataWithPreview.prePollingInstructions",defaultMessage:"After the agent starts up, the Elastic Stack listens for the agent and confirms the enrollment in Fleet. If you're having trouble connecting, check out the {link}.",values:{link:i.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:e},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}})),u=({selectedPolicyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:a,showLoading:s,poll:o=!0,isLongEnrollment:u=!1})=>{const d=!!a;return{title:d?r.i18n.translate("xpack.fleet.agentEnrollment.stepAgentEnrollmentConfirmationComplete",{defaultMessage:"Agent enrollment confirmed"}):r.i18n.translate("xpack.fleet.agentEnrollment.stepAgentEnrollmentConfirmation",{defaultMessage:"Confirm agent enrollment"}),children:d||o?i.a.createElement(l.a,{policyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:a,showLoading:!d||s,isLongEnrollment:u}):i.a.createElement(c,{troubleshootLink:t}),status:d?"complete":"incomplete"}};var d=n(198);const p=({selectedPolicy:e,selectedApiKeyId:t,setSelectedAPIKeyId:n})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepConfigurePolicyAuthenticationTitle",{defaultMessage:"Select enrollment token"}),children:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentAuthenticationSettings",defaultMessage:"{agentPolicyName} has been selected. Select which enrollment token to use when enrolling agents.",values:{agentPolicyName:i.a.createElement("strong",null,null==e?void 0:e.name)}})),i.a.createElement(o.EuiSpacer,{size:"l"}),i.a.createElement(d.a,{agentPolicyId:null==e?void 0:e.id,selectedApiKeyId:t,initialAuthenticationSettingsOpen:!0,onKeyChange:n}))});var m=n(164);const h=({agentPolicies:e,selectedPolicy:t,setSelectedPolicyId:n,selectedApiKeyId:a,setSelectedAPIKeyId:s,excludeFleetServer:o,refreshAgentPolicies:l})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepChooseAgentPolicyTitle",{defaultMessage:"What type of host are you adding?"}),children:i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{agentPolicies:e,selectedPolicyId:null==t?void 0:t.id,setSelectedPolicyId:n,withKeySelection:!!s,selectedApiKeyId:a,onKeyChange:s,refreshAgentPolicies:l,excludeFleetServer:o}))}),f=({isK8s:e,selectedPolicyId:t,yaml:n,downloadLink:a,isComplete:l,onCopy:c})=>{const u="IS_KUBERNETES"===e?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescriptionk8s",defaultMessage:"Copy or download the Kubernetes manifest inside the Kubernetes cluster. Update {ESUsernameVariable} and {ESPasswordVariable} environment variables in the Daemonset to match your Elasticsearch credentials.",values:{ESUsernameVariable:i.a.createElement(o.EuiCode,null,"ES_USERNAME"),ESPasswordVariable:i.a.createElement(o.EuiCode,null,"ES_PASSWORD")}}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescription",defaultMessage:"Copy this policy to the {fileName} on the host where the Elastic Agent is installed. Modify {ESUsernameVariable} and {ESPasswordVariable} in the {outputSection} section of {fileName} to use your Elasticsearch credentials.",values:{fileName:i.a.createElement(o.EuiCode,null,"elastic-agent.yml"),ESUsernameVariable:i.a.createElement(o.EuiCode,null,"ES_USERNAME"),ESPasswordVariable:i.a.createElement(o.EuiCode,null,"ES_PASSWORD"),outputSection:i.a.createElement(o.EuiCode,null,"outputs")}}),d="IS_KUBERNETES"===e?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButtonk8s",defaultMessage:"Download Manifest"}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButton",defaultMessage:"Download Policy"});return{title:r.i18n.translate("xpack.fleet.agentEnrollment.stepConfigureAgentTitle",{defaultMessage:"Configure the agent"}),children:i.a.createElement(i.a.Fragment,null,n?i.a.createElement(o.EuiText,null,i.a.createElement(i.a.Fragment,null,u),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiFlexGroup,{gutterSize:"m"},i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiCopy,{textToCopy:n},(e=>i.a.createElement(o.EuiButton,{onClick:()=>{e(),c&&c()},iconType:"copyClipboard"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.copyPolicyButton",defaultMessage:"Copy to clipboard"}))))),i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiButton,{iconType:"download",href:a,onClick:()=>{c&&c()},isDisabled:!a},i.a.createElement(i.a.Fragment,null,d)))),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiCodeBlock,{language:"yaml",style:{maxHeight:300},fontSize:"m","data-test-subj":"agentPolicyCodeBlock"},n)):null),status:n?l?"complete":void 0:"loading"}};var g=n(11),E=n(201);const y=({agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:a,troubleshootLink:l})=>{const{incomingData:c,isLoading:u}=Object(E.b)(e),d=Object(g.zc)(null==t?void 0:t.name),{guidedOnboarding:p}=Object(g.Rc)(),{enrolledAgents:m,numAgentsWithData:h,linkButton:f,message:y}=Object(E.a)(c,t);var x;return!u&&m>0&&h>0&&(a(!0),null!=t&&t.name&&d&&(null==p||null===(x=p.guidedOnboardingApi)||void 0===x||x.completeGuidedOnboardingForIntegration(t.name))),n?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiCallOut,{"data-test-subj":"IncomingDataConfirmedCallOut",title:r.i18n.translate("xpack.fleet.confirmIncomingData.title",{defaultMessage:"Incoming data received from {numAgentsWithData} of {enrolledAgents} recently enrolled { enrolledAgents, plural, one {agent} other {agents}}.",values:{numAgentsWithData:h,enrolledAgents:m}}),color:"success",iconType:"check"}),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiText,{size:"s"},y),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiButton,{href:f.href,isDisabled:u,color:"primary",fill:!0,"data-test-subj":"IncomingDataConfirmedButton"},f.text))):i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.confirmIncomingData.loading",defaultMessage:"It may take a few minutes for data to arrive in Elasticsearch. If the system is not generating data, it may help to generate some to ensure data is being collected correctly. If you’re having trouble, see our {link}. You may close this dialog and check later by viewing your integration assets.",values:{link:i.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:l},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}}))},x=({agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:a,troubleshootLink:s})=>({title:n?r.i18n.translate("xpack.fleet.agentEnrollment.stepConfirmIncomingData.completed",{defaultMessage:"Incoming data confirmed"}):r.i18n.translate("xpack.fleet.agentEnrollment.stepConfirmIncomingData",{defaultMessage:"Confirm incoming data"}),children:e.length>0?i.a.createElement(y,{agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:a,troubleshootLink:s}):null,status:e.length>0?n?"complete":"loading":"disabled"});var v=n(202),k=n(203);const b=({enrollmentAPIKey:e,cloudSecurityIntegration:t,agentPolicy:n})=>{var a;const{isLoading:l,azureArmTemplateUrl:c,error:u,isError:d}=Object(k.a)({enrollmentAPIKey:e,azureArmTemplateProps:null==t?void 0:t.azureArmTemplateProps});return u&&d?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiCallOut,{title:u,color:"danger",iconType:"error"})):i.a.createElement(o.EuiSkeletonText,{lines:3,size:"m",isLoading:l||(null==t?void 0:t.isLoading),contentAriaLabel:r.i18n.translate("xpack.fleet.agentEnrollment.azureArmTemplate.loadingAriaLabel",{defaultMessage:"Loading ARM Template instructions"})},i.a.createElement(v.a,{azureAccountType:null==t||null===(a=t.azureArmTemplateProps)||void 0===a?void 0:a.azureAccountType,agentPolicy:n,enrollmentToken:e}),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiButton,{color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:c},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.azureArmTemplate.launchButton",defaultMessage:"Launch ARM Template"})))},S=({selectedApiKeyId:e,apiKeyData:t,enrollToken:n,isComplete:a,cloudSecurityIntegration:s,agentPolicy:o})=>({status:a?"complete":e?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.azureArmTemplate.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&s?i.a.createElement(b,{cloudSecurityIntegration:s,enrollmentAPIKey:n,agentPolicy:o}):i.a.createElement(i.a.Fragment,null)});var F=n(167);const C=({enrollmentAPIKey:e,cloudSecurityIntegration:t,fleetServerHost:n})=>{var a;const{cloudFormationUrl:l,error:c,isError:u}=Object(g.Kb)({enrollmentAPIKey:e,cloudFormationProps:null==t?void 0:t.cloudFormationProps,fleetServerHost:n});return c&&u?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiCallOut,{title:c,color:"danger",iconType:"error"})):i.a.createElement(o.EuiSkeletonText,{lines:3,size:"m",isLoading:null==t?void 0:t.isLoading,contentAriaLabel:r.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.loadingAriaLabel",{defaultMessage:"Loading CloudFormation instructions"})},i.a.createElement(F.a,{awsAccountType:null==t||null===(a=t.cloudFormationProps)||void 0===a?void 0:a.awsAccountType}),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiButton,{"data-test-subj":"launchCloudFormationButtonAgentFlyoutTestId",color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:l},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.cloudFormation.launchButton",defaultMessage:"Launch CloudFormation"})))},D=({selectedApiKeyId:e,apiKeyData:t,enrollToken:n,isComplete:a,cloudSecurityIntegration:s,fleetServerHost:o})=>({status:a?"complete":e?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&s?i.a.createElement(C,{cloudSecurityIntegration:s,enrollmentAPIKey:n,fleetServerHost:o}):i.a.createElement(i.a.Fragment,null)});var w=n(168);const A=({cloudShellUrl:e,cloudShellCommand:t,projectId:n})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(w.a,{commandText:t,hasProjectId:!!n}),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiButton,{"data-test-subj":"launchGoogleCloudShellButtonAgentFlyoutTestId",color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:e},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.googleCloudShell.launchButton",defaultMessage:"Launch Google Cloud Shell"}))),M=({selectedApiKeyId:e,apiKeyData:t,isComplete:n,cloudShellUrl:a,cloudShellCommand:s,projectId:o})=>({status:n?"complete":e?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.cloudShell.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&a?i.a.createElement(A,{cloudShellUrl:a||"",cloudShellCommand:s||"",projectId:o||""}):i.a.createElement(i.a.Fragment,null)});var T=n(278),P=n.n(T),I=n(279),O=n.n(I),j=n(280),B=n.n(j);const L=({isK8s:e,isManaged:t=!0})=>{const{docLinks:n}=Object(g.Rc)(),r=Object(g.Cc)(),l=Object(a.useMemo)((()=>`${P()(r)}-${O()(r)}-${B()(r)}`),[r]);return i.a.createElement(i.a.Fragment,null,"IS_KUBERNETES_MULTIPAGE"!==e&&i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage",defaultMessage:"Select the appropriate platform and run commands to install, enroll, and start Elastic Agent. Reuse commands to set up agents on more than one host. For aarch64, see our {downloadLink}. This guidance is for AMD but you can adapt it to your device architecture. For additional guidance, see our {installationLink}.",values:{downloadLink:i.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:`https://www.elastic.co/downloads/past-releases/elastic-agent-${l}`},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.downloadLink",defaultMessage:"downloads page"})),installationLink:i.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:t?n.links.fleet.installElasticAgent:n.links.fleet.installElasticAgentStandalone},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage.link",defaultMessage:"installation docs"}))}})),"IS_KUBERNETES_MULTIPAGE"===e&&i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.k8sInstallationMessage",defaultMessage:"The below manifest has been automatically generated and includes credentials for this instance of Elastic Agent to be centrally managed using Fleet once it gets running in your Kubernetes cluster."})),i.a.createElement(o.EuiSpacer,{size:"l"}))};var _=n(191);const N=({installCommand:e,isK8s:t,cloudSecurityIntegration:n,enrollToken:a,fleetServerHost:r,fullCopyButton:s=!1,isManaged:o=!0,onCopy:l})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(L,{isK8s:t,isManaged:o}),i.a.createElement(_.a,{fullCopyButton:s,onCopy:l,linuxCommand:e.linux,macCommand:e.mac,windowsCommand:e.windows,linuxDebCommand:e.deb,linuxRpmCommand:e.rpm,k8sCommand:e.kubernetes,hasK8sIntegration:"IS_KUBERNETES"===t||"IS_KUBERNETES_MULTIPAGE"===t,cloudSecurityIntegration:n,hasK8sIntegrationMultiPage:"IS_KUBERNETES_MULTIPAGE"===t,isManaged:o,enrollToken:a,fleetServerHost:r})),z=({installCommand:e,selectedApiKeyId:t,apiKeyData:n,isK8s:a,cloudSecurityIntegration:s,enrollToken:o,fleetServerHost:l,isComplete:c,fullCopyButton:u,onCopy:d})=>({status:c?"complete":t?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your host"}),children:t&&n?i.a.createElement(N,{installCommand:e,isK8s:a,cloudSecurityIntegration:s,enrollToken:o,onCopy:d,fullCopyButton:u,fleetServerHost:l}):i.a.createElement(i.a.Fragment,null)}),R=({installCommand:e,isK8s:t,cloudSecurityIntegration:n,isComplete:a,fullCopyButton:s,onCopy:o})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your host"}),children:i.a.createElement(N,{installCommand:e,isK8s:t,cloudSecurityIntegration:n,onCopy:o,fullCopyButton:s,isManaged:!1}),status:a?"complete":void 0}),U=({selectedPolicyId:e,mode:t,setMode:n})=>{const a="installation_mode_agent_selection";return{status:e?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.stepInstallType",{defaultMessage:"Enroll in Fleet?"}),children:e?i.a.createElement(o.EuiRadioGroup,{options:[{id:`managed_${a}`,label:i.a.createElement(s.FormattedMessage,{"data-test-subj":"agentFlyoutManagedRadioButtons",id:"xpack.fleet.agentFlyout.managedRadioOption",defaultMessage:"{managed} – Enroll in Elastic Agent in Fleet to automatically deploy updates and centrally manage the agent.",values:{managed:i.a.createElement("strong",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentFlyout.managedMessage",defaultMessage:"Enroll in Fleet (recommended)"}))}})},{id:`standalone_${a}`,label:i.a.createElement(s.FormattedMessage,{"data-test-subj":"agentFlyoutStandaloneRadioButtons",id:"xpack.fleet.agentFlyout.standaloneRadioOption",defaultMessage:"{standaloneMessage} – Run an Elastic Agent standalone to configure and update the agent manually on the host where the agent is installed.",values:{standaloneMessage:i.a.createElement("strong",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentFlyout.standaloneMessage",defaultMessage:"Run standalone"}))}})}],idSelected:`${t}_${a}`,onChange:e=>{const t=e.split("_")[0];"managed"!==t&&"standalone"!==t||n(t)},name:`radio group ${a}`}):i.a.createElement(i.a.Fragment,null)}};var H=n(120),K=n(0),W=n(3),$=n(159);const G=({agentPolicy:e,agentPolicies:t,selectedPolicy:n,setSelectedPolicyId:r,refreshAgentPolicies:s,mode:l,setMode:c,selectionType:u,selectedApiKeyId:d,setSelectedAPIKeyId:p,isK8s:m,cloudSecurityIntegration:E})=>{const y=Object(g.Rc)(),{notifications:x}=y,[v,k]=Object(a.useState)(),[b,S]=Object(a.useState)("");let F="";null!=n&&n.id&&(F="IS_KUBERNETES"===m?y.http.basePath.prepend(`${W.c.getInfoFullDownloadPath(null==n?void 0:n.id)}?kubernetes=true&standalone=true&apiVersion=${K.m.public.v1}`):y.http.basePath.prepend(`${W.c.getInfoFullDownloadPath(null==n?void 0:n.id)}?standalone=true&apiVersion=${K.m.public.v1}`)),Object(a.useEffect)((()=>{"IS_LOADING"!==m&&async function(){try{if(null==n||!n.id)return;let e={standalone:!0,kubernetes:!1};"IS_KUBERNETES"===m&&(e={standalone:!0,kubernetes:!0});const t=await Object(g.K)(null==n?void 0:n.id,e);if(t.error)throw t.error;if(!t.data)throw new Error("No data while fetching full agent policy");k(t.data.item)}catch(e){x.toasts.addError(e,{title:"Error"})}}()}),[n,x.toasts,m,y.http.basePath]),Object(a.useEffect)((()=>{if(v)if("IS_KUBERNETES"===m){if("object"==typeof v)return;S(v)}else{if("string"==typeof v)return;S(Object(W.n)(v,H.safeDump))}}),[v,m]);const C=Object(g.Eb)(),D=Object(a.useMemo)((()=>{const a=Object($.b)(C||""),i=e?[]:[h({selectedPolicy:n,agentPolicies:t,selectedApiKeyId:d,setSelectedAPIKeyId:p,setSelectedPolicyId:r,refreshAgentPolicies:s})];return"radio"===u&&i.push(U({selectedPolicyId:null==n?void 0:n.id,mode:l,setMode:c})),i.push(f({isK8s:m,selectedPolicyId:null==n?void 0:n.id,yaml:b,downloadLink:F})),i.push(R({installCommand:a,isK8s:m,cloudSecurityIntegration:E})),i}),[C,m,E,e,n,t,d,p,r,s,u,b,F,l,c]);return C?i.a.createElement(o.EuiSteps,{steps:D}):i.a.createElement(o.EuiLoadingSpinner,null)},J=({agentPolicy:e,agentPolicies:t,selectedPolicy:n,setSelectedPolicyId:r,selectedApiKeyId:s,setSelectedAPIKeyId:c,fleetServerHosts:d,fleetProxy:m,refreshAgentPolicies:f,mode:E,setMode:y,selectionType:v,onClickViewAgents:k,isK8s:b,cloudSecurityIntegration:F,installedPackagePolicy:C})=>{const w=Object(g.Rc)(),{docLinks:A}=w,T=A.links.fleet.troubleshooting,[P,I]=Object(a.useState)(!1),O=Object(g.ic)(s),j=null==O?void 0:O.data,B=O.data?O.data.item.api_key:"",L=Object(l.b)((null==n?void 0:n.id)||""),_=Object(g.Eb)(),{gcpProjectId:N,gcpOrganizationId:R,gcpAccountType:H}=Object(W.r)(n),K=null==d?void 0:d[0],G=Object($.a)({apiKey:B,fleetServerHosts:d,fleetProxy:m,agentVersion:_||"",gcpProjectId:N,gcpOrganizationId:R,gcpAccountType:H}),J=Object(a.useMemo)((()=>{const a=e?[p({selectedPolicy:n,selectedApiKeyId:s,setSelectedAPIKeyId:c})]:[h({selectedPolicy:n,agentPolicies:t,selectedApiKeyId:s,setSelectedAPIKeyId:c,setSelectedPolicyId:r,refreshAgentPolicies:f})];return"radio"===v&&a.push(U({selectedPolicyId:null==n?void 0:n.id,mode:E,setMode:y})),null!=F&&F.isCloudFormation?a.push(D({apiKeyData:j,selectedApiKeyId:s,enrollToken:B,cloudSecurityIntegration:F,fleetServerHost:K})):null!=F&&F.cloudShellUrl?a.push(M({apiKeyData:j,selectedApiKeyId:s,cloudShellUrl:F.cloudShellUrl,cloudShellCommand:G.googleCloudShell,projectId:N})):null!=F&&F.isAzureArmTemplate?a.push(S({selectedApiKeyId:s,apiKeyData:j,enrollToken:B,cloudSecurityIntegration:F,agentPolicy:e})):a.push(z({installCommand:G,apiKeyData:j,selectedApiKeyId:s,isK8s:b,cloudSecurityIntegration:F,fleetServerHost:K,enrollToken:B})),s&&j&&a.push(u({selectedPolicyId:null==n?void 0:n.id,onClickViewAgents:k,troubleshootLink:T,agentCount:L.length,isLongEnrollment:void 0!==F})),n&&a.push(x({agentIds:L,agentDataConfirmed:P,setAgentDataConfirmed:I,installedPolicy:C,troubleshootLink:T})),a}),[e,n,t,s,c,r,f,v,F,j,E,y,B,G,b,K,k,T,L,P,C,N]);return _?i.a.createElement(o.EuiSteps,{steps:J}):i.a.createElement(o.EuiLoadingSpinner,null)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(6),l=n(123),c=n(54),u=n.n(c);const d=u.a.div.withConfig({displayName:"Wrapper",componentId:"sc-9331ih-0"})(["background-color:",";min-height:calc(100vh - var(--euiFixedHeadersOffset,0));"],(e=>e.theme.eui.euiColorEmptyShade)),p=u()(o.EuiPage).withConfig({displayName:"Page",componentId:"sc-9331ih-1"})(["background:",";width:100%;align-self:center;margin:auto;flex:1;"],(e=>e.theme.eui.euiColorEmptyShade)),m=u.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-9331ih-2"})(["height:100%;padding-left:",";padding-right:",";"],(e=>e.theme.eui.euiSizeM),(e=>e.theme.eui.euiSizeM)),h=({restrictWidth:e,children:t})=>s.a.createElement(d,null,s.a.createElement(p,{restrictWidth:e||1200},s.a.createElement(o.EuiPageBody,null,s.a.createElement(m,null,s.a.createElement(o.EuiSpacer,{size:"m"}),t)))),f=({restrictWidth:e,restrictHeaderWidth:t,children:n,"data-test-subj":a,...r})=>s.a.createElement(d,null,s.a.createElement(l.o,i()({maxWidth:t,"data-test-subj":a?`${a}_header`:void 0},r)),s.a.createElement(p,{restrictWidth:e||1200,"data-test-subj":a?`${a}_page`:void 0},s.a.createElement(o.EuiPageBody,null,s.a.createElement(m,null,s.a.createElement(o.EuiSpacer,{size:"m"}),n))))},function(e,t,n){"use strict";var a=n(138);e.exports=a.DEFAULT=new a({include:[n(142)],explicit:[n(273),n(274),n(275)]})},,function(e,t,n){"use strict";var a=String.fromCharCode;e.exports=a},function(e,t,n){"use strict";var a=n(111),i=n(112),r={tokenize:function(e,t,n){return i(e,(function(e){return null===e||a(e)?t(e):n(e)}),"linePrefix")},partial:!0};e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t,n){for(var a,i=[],r=-1;++r<e.length;)(a=e[r].resolveAll)&&i.indexOf(a)<0&&(t=a(t,n),i.push(a));return t}},function(e,t,n){"use strict";var a=n(133)(/[A-Za-z]/);e.exports=a},function(e,t,n){"use strict";n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return w.a})),n.d(t,"a",(function(){return A}));var a=n(1),i=n.n(a),r=n(6),s=n(10),o=n(11),l=n(9),c=n(123),u=n(189),d=n(194),p=n(3),m=n(195),h=n(149);const f=()=>{const{getHref:e}=Object(o.Ec)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentsNotInitializedText",defaultMessage:"Before enrolling agents, {link}.",values:{link:i.a.createElement(r.EuiLink,{href:e("overview")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.setUpAgentsLink",defaultMessage:"set up central management for Elastic Agents"}))}}))},g=e=>{var t,n,g;const{agentPolicies:y,isFleetServerPolicySelected:x,fleetServerHosts:v,isLoadingAgentPolicies:k,selectionType:b,setSelectionType:S,mode:F,setMode:C,isIntegrationFlow:D,refreshAgentPolicies:w}=e,A=Object(o.Qb)(),{isUnhealthy:M,isLoading:T}=Object(d.a)(),{isFleetServerStandalone:P}=Object(o.Pb)();Object(a.useEffect)((()=>{w()}),[w]);const I=Object(a.useMemo)((()=>y.filter((e=>Object(p.G)(e))).map((e=>e.id))),[y]),{data:O,isLoading:j}=Object(o.Ub)({perPage:l.u,showInactive:!1,kuery:0===I.length?"":`${l.b}.policy_id:${I.map((e=>`"${e}"`)).join(" or ")}`}),B=(null==O?void 0:O.items)||[],L=A.isReady&&0===(null!==(t=null==v?void 0:v.length)&&void 0!==t?t:0),_=x||P||A.isReady&&!M&&B.length>0&&(null!==(n=null==v?void 0:v.length)&&void 0!==n?n:0)>0,N=!P&&!x&&(0===B.length||M||(null!==(g=A.missingRequirements)&&void 0!==g?g:[]).some((e=>e===l.k)));return Object(a.useEffect)((()=>{var t,n,a;null!==(t=e.cloudSecurityIntegration)&&void 0!==t&&t.isAzureArmTemplate||null!==(n=e.cloudSecurityIntegration)&&void 0!==n&&n.isCloudFormation||null!==(a=e.cloudSecurityIntegration)&&void 0!==a&&a.cloudShellUrl?S(void 0):S(!D&&_?"radio":"tabs")}),[D,_,S,e.cloudSecurityIntegration]),j||k||T?i.a.createElement(c.s,{size:"l"}):L?null:"managed"===F?N?i.a.createElement(u.a,{showStandaloneTab:()=>C("standalone")}):_?i.a.createElement(i.a.Fragment,null,"tabs"===b&&!(null!==(z=e.cloudSecurityIntegration)&&void 0!==z&&z.cloudShellUrl)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.managedDescription",defaultMessage:"Enroll an Elastic Agent in Fleet to automatically deploy updates and centrally manage the agent."})),i.a.createElement(r.EuiSpacer,{size:"l"})),x?i.a.createElement(m.a,{selectedPolicyId:null===(R=e.selectedPolicy)||void 0===R?void 0:R.id,onClose:()=>{}}):i.a.createElement(h.l,e)):i.a.createElement(f,null):i.a.createElement(E,e);var z,R},E=e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.standaloneDescription",defaultMessage:"Run an Elastic Agent standalone to configure and update the agent manually on the host where the agent is installed."})),i.a.createElement(r.EuiSpacer,{size:"l"}),i.a.createElement(h.m,e));var y=n(4);const x=()=>{const{docLinks:e}=Object(o.Rc)(),{getHref:t}=Object(o.Ec)();return i.a.createElement(r.EuiCallOut,{title:y.i18n.translate("xpack.fleet.agentEnrollment.missingFleetHostCalloutTitle",{defaultMessage:"Missing URL for Fleet Server host"})},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostCalloutText",defaultMessage:"A URL for your Fleet Server host is required to enroll agents with Fleet. You can add this information in Fleet Settings. For more information, see the {link}.",values:{link:i.a.createElement(r.EuiLink,{href:e.links.fleet.guide,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(r.EuiButton,{fill:!0,iconType:"gear",href:t("settings")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.fleetSettingsLink",defaultMessage:"Fleet Settings"})))};var v=n(166),k=n(54),b=n.n(k),S=n(161),F=n(198);const C=b()(r.EuiFormRow).withConfig({displayName:"AgentPolicyFormRow",componentId:"sc-1rykzod-0"})([".euiFormRow__label{width:100%;}"]),D=e=>{const{docLinks:t}=Object(o.Rc)(),{agentPolicies:n,selectedPolicyId:a,setSelectedPolicyId:l,excludeFleetServer:c,onClickCreatePolicy:u,isFleetServerPolicy:d}=e,p=Object(o.Fb)().fleet.all;return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiText,null,d?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.selectAgentPolicyFleetServerText",defaultMessage:"Fleet Server runs on Elastic Agent, and agents are enrolled in agent policies which represent hosts. You can select an existing agent policy configured for Fleet Server, or you may choose to create a new one."}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.createAgentPolicyText",defaultMessage:"Type of hosts are controlled by an {agentPolicy}. Choose an agent policy or create a new one.",values:{agentPolicy:i.a.createElement(r.EuiLink,{href:t.links.fleet.agentPolicy,target:"_blank"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDocLink",defaultMessage:"agent policy"}))}})),i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(C,{fullWidth:!0,label:i.a.createElement(r.EuiFlexGroup,{justifyContent:"flexEnd"},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement("div",null,i.a.createElement(r.EuiLink,{disabled:!p,onClick:u},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.addPolicyButton",defaultMessage:"Create new agent policy"})))))},i.a.createElement(r.EuiSelect,{fullWidth:!0,isLoading:!n,options:n.map((e=>({value:e.id,text:e.name}))),value:a,onChange:e=>{const{value:t}=e.target;l(t)},"aria-label":y.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.policySelectAriaLabel",{defaultMessage:"Agent policy"}),hasNoInitialSelection:!a,"data-test-subj":"agentPolicyDropdown",isInvalid:!a})),a&&!d&&i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(S.a,{agentPolicyId:a,excludeFleetServer:c})),e.withKeySelection&&e.onKeyChange&&a&&i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(F.a,{selectedApiKeyId:e.selectedApiKeyId,onKeyChange:e.onKeyChange,initialAuthenticationSettingsOpen:!e.selectedApiKeyId,agentPolicyId:a})))};var w=n(164);const A=({onClose:e,agentPolicy:t,defaultMode:n="managed",isIntegrationFlow:u,installedPackagePolicy:d})=>{const p=Object(o.Qb)(),{docLinks:m}=Object(o.Rc)(),[h,f]=Object(a.useState)(null==t?void 0:t.id),[E,y]=Object(a.useState)(!1),[k,b]=Object(a.useState)(),[S,F]=Object(a.useState)(n),[C,D]=Object(a.useState)(),{agentPolicies:w,isLoadingInitialAgentPolicies:A,isLoadingAgentPolicies:M,refreshAgentPolicies:T}=Object(o.Cb)(),{agentPolicyWithPackagePolicies:P}=Object(v.a)(h),{fleetServerHosts:I,fleetProxy:O,isLoadingInitialRequest:j}=Object(o.Ob)(P),B=P||((e,t)=>{if(t)return e.find((e=>e.id===t))})(w,h),L=p.isReady&&0===I.length;Object(a.useEffect)((()=>{B&&(B.package_policies.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===l.k}))?y(!0):y(!1))}),[B,E]);const{isK8s:_}=Object(v.c)(null!=B?B:void 0),{cloudSecurityIntegration:N}=Object(v.b)(null!=B?B:void 0);return i.a.createElement(r.EuiFlyout,{"data-test-subj":"agentEnrollmentFlyout",onClose:e,size:"m"},i.a.createElement(r.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"FleetAgentEnrollmentFlyoutTitle"},i.a.createElement(r.EuiTitle,{size:"m"},i.a.createElement("h2",{id:"FleetAgentEnrollmentFlyoutTitle"},E?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.flyoutFleetServerTitle",defaultMessage:"Add Fleet Server"}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.flyoutTitle",defaultMessage:"Add agent"}))),i.a.createElement(r.EuiSpacer,{size:"l"}),E?i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.instructionstFleetServer",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:i.a.createElement(r.EuiLink,{href:m.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})):i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentDescription",defaultMessage:"Add Elastic Agents to your hosts to collect data and send it to the Elastic Stack."})),"tabs"===C?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"l"}),i.a.createElement(r.EuiTabs,{style:{marginBottom:"-25px"}},i.a.createElement(r.EuiTab,{"data-test-subj":"managedTab",isSelected:"managed"===S,onClick:()=>F("managed")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollFleetTabLabel",defaultMessage:"Enroll in Fleet"})),i.a.createElement(r.EuiTab,{"data-test-subj":"standaloneTab",isSelected:"standalone"===S,onClick:()=>F("standalone")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollStandaloneTabLabel",defaultMessage:"Run standalone"})))):null),i.a.createElement(r.EuiFlyoutBody,{banner:L&&!j&&"managed"===S?i.a.createElement(x,null):void 0},A?i.a.createElement(c.s,{size:"l"}):i.a.createElement(g,{fleetServerHosts:I,fleetProxy:O,setSelectedPolicyId:f,agentPolicy:t,selectedPolicy:B,agentPolicies:w,isFleetServerPolicySelected:E,isK8s:_,cloudSecurityIntegration:N,refreshAgentPolicies:T,isLoadingAgentPolicies:M,mode:S,setMode:F,selectionType:C,setSelectionType:D,isIntegrationFlow:u,selectedApiKeyId:k,setSelectedAPIKeyId:b,onClickViewAgents:e,installedPackagePolicy:d})),i.a.createElement(r.EuiFlyoutFooter,null,i.a.createElement(r.EuiFlexGroup,{justifyContent:"flexStart"},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(r.EuiButtonEmpty,{onClick:e},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.closeFlyoutButtonLabel",defaultMessage:"Close"}))))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return p}));var a=n(14),i=n(55),r=n(0);n(16);class errors_FleetError extends Error{constructor(e,t){super(e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"attributes",void 0),this.meta=t,this.name=this.constructor.name}}function s(e){return e.reduce(((e,t)=>{var n;return e||(e={}),e[function(e){return`${e.policy_template?`${e.policy_template}-`:""}${e.type}`}(t)]={enabled:t.enabled,vars:o(t.vars),streams:(n=t.streams,n.reduce(((e,t)=>(e||(e={}),e[t.data_stream.dataset]={enabled:t.enabled,vars:o(t.vars)},e)),{}))},e}),{})}function o(e){if(e)return Object.entries(e).reduce(((e,[t,n])=>{var a;return t===r.r&&null!=n&&null!==(a=n.value)&&void 0!==a&&a.dataset?e[t]=null==n?void 0:n.value.dataset:e[t]=null==n?void 0:n.value,e}),{})}function l(e,t,n){return`${e} kbn:${t}\n${JSON.stringify(n,null,2)}\n`}function c(e,t){return l("POST",`${i.c.getCreatePath()}${t?"?sys_monitoring=true":""}`,e)}function u(e){return l("POST",i.q.getCreatePath(),{policy_id:e.policy_id?e.policy_id:"<agent_policy_id>",package:m(e.package),...Object(a.omit)(e,"policy_id","package","enabled"),inputs:s(e.inputs),vars:o(e.vars)})}function d(e,t){return l("PUT",i.q.getUpdatePath(e),{package:m(t.package),...Object(a.omit)(t,"version","package","enabled","secret_references"),inputs:s(t.inputs),vars:o(t.vars)})}function p(e,t){return l("PUT",i.c.getUpdatePath(e),Object(a.omit)(t,"version"))}function m(e){return Object(a.omit)(e,"title")}n(5)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));const a=({apiKey:e,fleetServerHosts:t,fleetProxy:n,agentVersion:a,gcpProjectId:i="<PROJECT_ID>",gcpOrganizationId:r="<ORGANIZATION_ID>",gcpAccountType:s})=>{var o,l;const c=function(e,t,n){const a=null!=n&&n.proxy_headers?Object.entries(n.proxy_headers).reduce(((e,[t,n])=>e+` --proxy-header ${t}=${n}`),""):"",i=n?` --proxy-url=${n.url}${a}`:"";return`--url=${t[0]} --enrollment-token=${e}${i}`}(e,t,n),u=null==c||null===(o=c.split("--url="))||void 0===o||null===(l=o.pop())||void 0===l?void 0:l.split("--enrollment")[0],d=null==c?void 0:c.split("--enrollment-token=")[1];return{linux:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${a}-linux-x86_64.tar.gz\ntar xzvf elastic-agent-${a}-linux-x86_64.tar.gz\ncd elastic-agent-${a}-linux-x86_64\nsudo ./elastic-agent install ${c}`,mac:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${a}-darwin-x86_64.tar.gz\ntar xzvf elastic-agent-${a}-darwin-x86_64.tar.gz\ncd elastic-agent-${a}-darwin-x86_64\nsudo ./elastic-agent install ${c}`,windows:`$ProgressPreference = 'SilentlyContinue'\nInvoke-WebRequest -Uri https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${a}-windows-x86_64.zip -OutFile elastic-agent-${a}-windows-x86_64.zip\nExpand-Archive .\\elastic-agent-${a}-windows-x86_64.zip -DestinationPath .\ncd elastic-agent-${a}-windows-x86_64\n.\\elastic-agent.exe install ${c}`,deb:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${a}-amd64.deb\nsudo dpkg -i elastic-agent-${a}-amd64.deb\nsudo elastic-agent enroll ${c} \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,rpm:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${a}-x86_64.rpm\nsudo rpm -vi elastic-agent-${a}-x86_64.rpm\nsudo elastic-agent enroll ${c} \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,kubernetes:"kubectl apply -f elastic-agent-managed-kubernetes.yml",cloudFormation:"",googleCloudShell:`gcloud config set project ${i} && ${"organization-account"===s?`ORG_ID=${r}`:""} FLEET_URL=${null==u?void 0:u.trim()} ENROLLMENT_TOKEN=${d} STACK_VERSION=${a} ./deploy.sh`}},i=e=>({linux:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-linux-x86_64.tar.gz\ntar xzvf elastic-agent-${e}-linux-x86_64.tar.gz\ncd elastic-agent-${e}-linux-x86_64\nsudo ./elastic-agent install`,mac:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-darwin-x86_64.tar.gz\ntar xzvf elastic-agent-${e}-darwin-x86_64.tar.gz\ncd elastic-agent-${e}-darwin-x86_64\nsudo ./elastic-agent install`,windows:`$ProgressPreference = 'SilentlyContinue'\nInvoke-WebRequest -Uri https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-windows-x86_64.zip -OutFile elastic-agent-${e}-windows-x86_64.zip\nExpand-Archive .elastic-agent-${e}-windows-x86_64.zip -DestinationPath .\ncd elastic-agent-${e}-windows-x86_64\n.\\elastic-agent.exe install`,deb:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-amd64.deb\nsudo dpkg -i elastic-agent-${e}-amd64.deb \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,rpm:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-x86_64.rpm\nsudo rpm -vi elastic-agent-${e}-x86_64.rpm \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,kubernetes:"kubectl apply -f elastic-agent-standalone-kubernetes.yml"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),i=n.n(a),r=n(6),s=n(0),o=n(123);const l=({excludeFleetServer:e,pkgName:t,pkgVersion:n,pkgTitle:a})=>i.a.createElement(r.EuiBadge,{color:"hollow",isDisabled:e&&t===s.V},i.a.createElement(r.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",responsive:!1},i.a.createElement(r.EuiFlexItem,{grow:!1},i.a.createElement(o.u,{packageName:t,version:n||"",tryApi:void 0!==n})),i.a.createElement(r.EuiFlexItem,{grow:!1},a)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(1),i=n.n(a),r=n(4),s=n(10),o=n(6),l=n(0),c=n(11),u=n(160);const d=({agentPolicyId:e,hideTitle:t,excludeFleetServer:n})=>{const d=Object(c.gc)(e),p=d.data?d.data.item:null,m=Object(a.useMemo)((()=>{if(!p)return;const e=new Map;return p.package_policies.forEach((({package:t})=>{t&&(!e.has(t.name)||e.get(t.name).version<t.version)&&e.set(t.name,t)})),[...e.values()]}),[p]),h=Object(a.useMemo)((()=>n&&(null==m?void 0:m.some((e=>e.name===l.V)))),[m,n]),f=Object(a.useMemo)((()=>m?m.filter((e=>!n||e.name!==l.V)).length:0),[m,n]);return p&&m?i.a.createElement(i.a.Fragment,null,!t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.policyDescription",defaultMessage:"The selected agent policy will collect data for {count, plural, one {{countValue} integration} other {{countValue} integrations}}:",values:{count:f,countValue:i.a.createElement("b",null,f)}})),i.a.createElement(o.EuiSpacer,{size:"s"})),i.a.createElement(o.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",wrap:!0},m.map(((e,t)=>i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(u.a,{key:t,excludeFleetServer:n,pkgName:e.name,pkgVersion:e.version,pkgTitle:e.title}))))),h&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiSpacer,{size:"s"}),i.a.createElement(o.EuiCallOut,{size:"s",color:"warning",iconType:"warning",title:r.i18n.translate("xpack.fleet.agentReassignPolicy.packageBadgeFleetServerWarning",{defaultMessage:"Fleet Server will not be enabled in standalone mode."})}))):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(1),i=n.n(a),r=n(54),s=n.n(r),o=n(6),l=n(4),c=n(10),u=n(11),d=n(15);const p=s()(o.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-zlzelr-0"})(["min-width:0px;max-width:100%;"]),m=s.a.div.attrs((()=>({className:"eui-textBreakAll"}))).withConfig({displayName:"CommandCode",componentId:"sc-zlzelr-1"})(["margin-right:",";"],(e=>e.theme.eui.euiSizeM)),h=({serviceToken:e,generateServiceToken:t,isLoadingServiceToken:n,isRemote:a=!1})=>{const{docLinks:r}=Object(u.Rc)(),{permissionsError:s,isPermissionsLoading:h}=Object(d.xb)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiText,null,a?i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.settings.remoteServiceToken.generateServiceTokenDescription",defaultMessage:"A service token grants Fleet Server permissions to write to Elasticsearch, and can be used to configure this Elasticsearch cluster for remote output. For more information, see the {fleetUserGuide}.",values:{fleetUserGuide:i.a.createElement(o.EuiLink,{href:r.links.fleet.guide,target:"_blank"},l.i18n.translate("xpack.fleet.settings.editOutputFlyout.fleetUserGuideLabel",{defaultMessage:"Fleet User Guide"}))}}):i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenDescription",defaultMessage:"A service token grants Fleet Server permissions to write to Elasticsearch."})),i.a.createElement(o.EuiSpacer,{size:"m"}),e?i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiCallOut,{iconType:"check",size:"s",color:"success",title:i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.saveServiceTokenDescription",defaultMessage:"Save your service token information. This will be shown only once."})}),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s"},i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement("strong",{"data-test-subject":"serviceTokenSaveReminderHeader"},i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.serviceTokenLabel",defaultMessage:"Service token"}))),i.a.createElement(p,null,i.a.createElement(o.EuiCodeBlock,{paddingSize:"m",isCopyable:!0},i.a.createElement(m,null,e))))):i.a.createElement(o.EuiFlexGroup,null,i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiToolTip,{content:a&&s?i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.settings.remoteServiceToken.noPermissionTooltip",defaultMessage:"To generate service token, you must have the minimum required privileges. Contact your administrator."}):null},i.a.createElement(o.EuiButton,{fill:!0,isLoading:n,isDisabled:n||h||!!s,onClick:()=>{t(a)},"data-test-subj":"fleetServerGenerateServiceTokenBtn"},i.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenButton",defaultMessage:"Generate service token"}))))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var a=n(1),i=n.n(a),r=n(6),s=n(10),o=n(4),l=n(11),c=n(9);const u=(e,t)=>{const[n,i]=Object(a.useState)([]),[r,s]=Object(a.useState)(!1),o=Object(a.useRef)(void 0),u=null!=t&&t.noLowerTimeLimit?"":`and ${c.b}.enrolled_at >= now-10m`,d=`${c.b}.policy_id:"${e}" and not (_exists_:"${c.b}.unenrolled_at") ${u}`,p=Object(a.useCallback)((async()=>{var e,t;const a=null!==(e=null===(t=(await Object(l.D)({kuery:d,showInactive:!1})).data)||void 0===t?void 0:t.items.map((e=>e.id)))&&void 0!==e?e:n;a.some((e=>!n.includes(e)))&&i(a)}),[n,d]);return!r&&null!=t&&t.pollImmediately&&(p(),s(!0)),Object(a.useEffect)((()=>{let e=!1;const t=()=>{o.current=window.setTimeout((async()=>{p(),e||t()}),5e3)};return t(),(e||n.length>0)&&clearTimeout(o.current),()=>{e=!0}}),[n,e,d,p]),n},d=({policyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:a,showLoading:c=!1,isLongEnrollment:u=!1})=>{const{getHref:d}=Object(l.Ec)(),{application:p}=Object(l.Rc)(),m=!!n,h=()=>i.a.createElement(r.EuiLink,{target:"_blank",external:!0,href:t},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}));return!e||0===a&&!c?i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{"data-test-subj":"ConfirmAgentEnrollmentCallOut.troubleshooting",id:"xpack.fleet.enrollmentInstructions.troubleshootingText",defaultMessage:"If you are having trouble connecting, see our {link}.",values:{link:i.a.createElement(h,null)}})):c&&!a?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiCallOut,{size:"m",color:"primary",iconType:r.EuiLoadingSpinner,title:u?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.listeninglongenrollemnt",defaultMessage:"Listening for agent... this can take several minutes"}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.listening",defaultMessage:"Listening for agent"})}),i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(r.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.instructions",defaultMessage:"After the agent starts up, the Elastic Stack listens for the agent and confirms the enrollment in Fleet. If you're having trouble connecting, check out the {link}.",values:{link:i.a.createElement(h,null)}}))):i.a.createElement(r.EuiCallOut,{"data-test-subj":"ConfirmAgentEnrollmentCallOut",title:o.i18n.translate("xpack.fleet.agentEnrollment.confirmation.title",{defaultMessage:"{agentCount} {agentCount, plural, one {agent has} other {agents have}} been enrolled.",values:{agentCount:a}}),color:"success",iconType:"check"},m&&i.a.createElement(r.EuiButton,{onClick:()=>{n&&n();const e=d("agent_list");p.navigateToUrl(e)},color:"success","data-test-subj":"ConfirmAgentEnrollmentButton"},o.i18n.translate("xpack.fleet.agentEnrollment.confirmation.button",{defaultMessage:"View enrolled agents"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),i=n.n(a),r=n(130),s=n(129),o=n(3),l=n(157);const c=({agentPolicies:e,excludeFleetServer:t,setSelectedPolicyId:n,selectedPolicyId:c,withKeySelection:u,selectedApiKeyId:d,onKeyChange:p,isFleetServerPolicy:m,refreshAgentPolicies:h})=>{const f=Object(a.useMemo)((()=>e.filter((e=>e&&!e.is_managed&&(!t||!e.is_default_fleet_server)))),[e,t]);Object(a.useEffect)((()=>{1!==f.length||c||!1===t||Object(o.G)(f[0])||n(f[0].id)}),[f,c,n,t]);const g=Object(a.useCallback)((async(e,t)=>{t&&h()}),[h]),[E,y]=Object(a.useState)(0===f.length),[x,v]=Object(a.useState)({status:r.f.INITIAL}),[k,b]=Object(a.useState)(Object(o.v)(f,m));Object(a.useEffect)((()=>{y(0===f.length&&!c),b(Object(o.v)(f,m))}),[f,m,c]);const S=Object(a.useCallback)((async(e,t)=>{e?(y(!1),v({status:r.f.CREATED}),g&&g(e.id,e),n(e.id)):v({status:r.f.FAILED,errorMessage:t})}),[n,g]);return i.a.createElement(i.a.Fragment,null,E?i.a.createElement(s.b,{updateAgentPolicy:S,isFleetServerPolicy:m,agentPolicyName:k}):i.a.createElement(l.b,{agentPolicies:f,withKeySelection:u,selectedApiKeyId:d,onKeyChange:p,excludeFleetServer:t,onClickCreatePolicy:()=>{v({status:r.f.INITIAL}),y(!0),u&&p&&p(void 0)},selectedPolicyId:c,setSelectedPolicyId:n,isFleetServerPolicy:m}),x.status!==r.f.INITIAL&&i.a.createElement(r.b,{createState:x}))}},function(e,t,n){"use strict";var a=n(138);e.exports=new a({explicit:[n(260),n(261),n(262)]})},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(1),i=n(4),r=n(68),s=n(67),o=n(11),l=n(17),c=n(3);const u=new Set([l.FLEET_KUBERNETES_PACKAGE,l.FLEET_CLOUD_DEFEND_PACKAGE]);function d(e){const[t,n]=Object(a.useState)(null),r=Object(o.Rc)(),{notifications:s}=r;return Object(a.useEffect)((()=>{!async function(e){if(e)try{const t=await Object(o.J)(e);n(t.data?t.data.item:null)}catch(e){s.toasts.addError(e,{title:i.i18n.translate("xpack.fleet.agentEnrollment.loadPolicyErrorMessage",{defaultMessage:"An error happened while loading the policy"})})}}(e)}),[e,s.toasts]),{agentPolicyWithPackagePolicies:t}}function p(e){const[t,n]=Object(a.useState)("IS_LOADING");return Object(a.useEffect)((()=>{!async function(){n(e?e.package_policies.some(h)?"IS_KUBERNETES":"IS_NOT_KUBERNETES":"IS_LOADING")}()}),[e]),{isK8s:t}}function m(e){var t;const n=Object(a.useMemo)((()=>f(e)),[e]),i=null==n||null===(t=n.package)||void 0===t?void 0:t.version,{data:u,isLoading:d}=Object(o.mc)(l.FLEET_CLOUD_SECURITY_POSTURE_PACKAGE,i,{full:!0},{enabled:Boolean(n)});return{cloudSecurityIntegration:Object(a.useMemo)((()=>{var t,a,i,o,l,p,m,h,f,g,E,y,x,v;if(!e||!n)return;const k=null===(t=n.inputs)||void 0===t||null===(a=t.find((e=>e.enabled)))||void 0===a?void 0:a.policy_template;if(!k)return;const b=Object(c.t)(s.a.CLOUD_FORMATION,e),S=Object(c.t)(s.a.ARM_TEMPLATE,e),F=null!=u&&u.item?Object(c.u)(u.item,k,r.a.CLOUD_FORMATION):b,C=null==n||null===(i=n.inputs)||void 0===i||null===(o=i.find((e=>e.enabled)))||void 0===o||null===(l=o.streams)||void 0===l||null===(p=l[0])||void 0===p||null===(m=p.vars)||void 0===m||null===(h=m["aws.account_type"])||void 0===h?void 0:h.value,D=null!=u&&u.item?Object(c.u)(u.item,k,r.a.ARM_TEMPLATE):S,w=null==n||null===(f=n.inputs)||void 0===f||null===(g=f.find((e=>e.enabled)))||void 0===g||null===(E=g.streams)||void 0===E||null===(y=E[0])||void 0===y||null===(x=y.vars)||void 0===x||null===(v=x["azure.account_type"])||void 0===v?void 0:v.value,A=Object(c.p)(e);return{isLoading:d,integrationType:k,isCloudFormation:Boolean(b),cloudFormationProps:{awsAccountType:C,templateUrl:F},isAzureArmTemplate:Boolean(S),azureArmTemplateProps:{azureAccountType:w,templateUrl:D},cloudShellUrl:A}}),[e,null==u?void 0:u.item,d,n])}}const h=e=>{var t;const n=null===(t=e.package)||void 0===t?void 0:t.name;return u.has(n)},f=e=>{var t;return null==e||null===(t=e.package_policies)||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===l.FLEET_CLOUD_SECURITY_POSTURE_PACKAGE}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),i=n.n(a),r=n(6),s=n(10);const o=({children:e,url:t})=>i.a.createElement(r.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"externalLink"},e),l=({awsAccountType:e})=>i.a.createElement(r.EuiText,null,i.a.createElement("p",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.description",defaultMessage:"CloudFormation will create all the necessary resources to evaluate the security posture of your AWS environment. {learnMore}.",values:{learnMore:i.a.createElement(o,{url:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.learnMoreLinkText",defaultMessage:"Learn more about CloudFormation"}))}})),i.a.createElement(r.EuiText,{size:"s",color:"subdued"},i.a.createElement("ol",null,"organization-account"===e?i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.organizationLogin",defaultMessage:"Log in as an admin in the management account of the AWS Organization you want to onboard"})):i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.login",defaultMessage:"Log in as an admin in the AWS account you want to onboard"})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.launch",defaultMessage:"Click the Launch CloudFormation button below."})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.region",defaultMessage:"(Optional) Change the Amazon region in the upper right corner to the region you want to deploy your stack to"})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.accept",defaultMessage:"Tick the checkbox under capabilities in the opened CloudFormation stack review form: {acknowledge}",values:{acknowledge:i.a.createElement("strong",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.accept.acknowledge",defaultMessage:"I acknowledge that AWS CloudFormation might create IAM resources."}))}})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.create",defaultMessage:"Click Create stack."})))))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),i=n.n(a),r=n(6),s=n(10);const o=({children:e,url:t})=>i.a.createElement(r.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"externalLink"},e),l=e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(r.EuiSpacer,{size:"xs"}),i.a.createElement(r.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.description",defaultMessage:"The Google Cloud Shell Command below will create all the necessary resources to evaluate the security posture of your GCP projects. Learn more about {learnMore}.",values:{learnMore:i.a.createElement(o,{url:"https://cloud.google.com/shell/docs"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.learnMoreLinkText",defaultMessage:"Google Cloud Shell"}))}})),i.a.createElement(r.EuiText,{size:"s",color:"subdued"},i.a.createElement("ol",null,i.a.createElement("li",null,i.a.createElement(i.a.Fragment,null,null!=e&&e.hasProjectId?i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.copyWithProjectId",defaultMessage:"Copy the command below"}):i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.copyWithoutProjectId",defaultMessage:"Replace <PROJECT_ID> in the following command with your project ID and copy the command"}),i.a.createElement(r.EuiSpacer,{size:"m"}),i.a.createElement(r.EuiCodeBlock,{language:"bash",isCopyable:!0,contentEditable:"true"},e.commandText))),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.launch",defaultMessage:"Click Launch Google Cloud Shell, then run the command"}))))))},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(54),l=n.n(o),c=n(97),u=n(98),d=n(4),p=n(15),m=n(13),h=n(0);const f=l()(u.QueryStringInput).withConfig({displayName:"NoWrapQueryStringInput",componentId:"sc-esihk1-0"})([".kbnQueryBar__textarea{white-space:nowrap;}"]),g=e=>{switch(e){case"keyword":case"text":case"version":return"string";case"integer":case"double":return"number";default:return e}},E=(e,t="")=>{let n=[];for(const a in e)"object"==typeof e[a]?n=n.concat(E(e[a],`${t}${a}.`)):n.push(`${t}${a}:${e[a]}`);return n},y=({value:e,fieldPrefix:t,onChange:n,placeholder:a,indexPattern:o=m.j,dataTestSubj:l})=>{const{data:u,dataViews:y,unifiedSearch:x,storage:v,notifications:k,http:b,docLinks:S,uiSettings:F,usageCollection:C}=Object(p.lc)(),[D,w]=Object(r.useState)(),A=Object(r.useMemo)((()=>{if(!e||""===e)return!0;try{return Object(c.fromKueryExpression)(e),!0}catch(e){return!1}}),[e]);return Object(r.useEffect)((()=>{(async()=>{try{const e=(e=>{const t=(e=>{switch(e){case`.${m.b}`:return h.g;case`.${m.c}`:return h.j;case`.${m.n}`:return h.nb;case`.${m.g}`:return h.z;default:return{}}})(e);return(E(null==t?void 0:t.properties)||[]).map((e=>e.replaceAll(/.properties/g,""))).map((e=>e.replace(/.type/g,""))).map((e=>e.split(":"))).map((e=>({name:e[0],type:g(e[1]),searchable:!0,aggregatable:!0,esTypes:[e[1]]})))})(o),t=u.dataViews.fieldArrayToMap(e),n=await u.dataViews.create({title:o,fields:t},!0);w(n)}catch(e){w(void 0)}})()}),[u.dataViews,t,o]),s.a.createElement(f,i()({iconType:"search",disableLanguageSwitcher:!0,indexPatterns:D?[D]:[],query:{query:e,language:"kuery"},isInvalid:!A,disableAutoFocus:!0,placeholder:a,onChange:e=>{n(e.query)},onSubmit:e=>{n(e.query,!0)},submitOnBlur:!0,isClearable:!0,autoSubmit:!0,appName:d.i18n.translate("xpack.fleet.appTitle",{defaultMessage:"Fleet"}),deps:{unifiedSearch:x,notifications:k,http:b,docLinks:S,uiSettings:F,data:u,dataViews:y,storage:v,usageCollection:C}},l&&{dataTestSubj:l}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(282);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return a.AllSubstringsIndexStrategy}});var i=n(283);Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return i.ExactWordIndexStrategy}});var r=n(284);Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return r.PrefixIndexStrategy}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(285);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return a.CaseSensitiveSanitizer}});var i=n(286);Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return i.LowerCaseSanitizer}})},,,,,,,function(e,t,n){"use strict";const a=n(1),i=n(377),r=n(378),s=n(379),o=n(422),l=n(107),c=n(423),u=n(424),d=n(426),p=n(427).hastChildrenToReact;e.exports=g;const m={}.hasOwnProperty,h="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",f={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function g(e){for(const t in f)if(m.call(f,t)&&m.call(e,t)){const e=f[t];console.warn(`[react-markdown] Warning: please ${e.to?`use \`${e.to}\` instead of`:"remove"} \`${t}\` (see <${h}#${e.id}> for more info)`),delete f[t]}const t=r().use(s).use(e.remarkPlugins||e.plugins||[]).use(o,{allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(u,e);let n;"string"==typeof e.children?n=i(e.children):(void 0!==e.children&&null!==e.children&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`),n=i());const l=t.runSync(t.parse(n),n);if("root"!==l.type)throw new TypeError("Expected a `root` node");let d=a.createElement(a.Fragment,{},p({options:e,schema:c,listDepth:0},l));return e.className&&(d=a.createElement("div",{className:e.className},d)),d}g.defaultProps={transformLinkUri:d},g.propTypes={children:l.string,className:l.string,allowElement:l.func,allowedElements:l.arrayOf(l.string),disallowedElements:l.arrayOf(l.string),unwrapDisallowed:l.bool,remarkPlugins:l.arrayOf(l.oneOfType([l.object,l.func,l.arrayOf(l.oneOfType([l.object,l.func]))])),rehypePlugins:l.arrayOf(l.oneOfType([l.object,l.func,l.arrayOf(l.oneOfType([l.object,l.func]))])),sourcePos:l.bool,rawSourcePos:l.bool,skipHtml:l.bool,includeElementIndex:l.bool,transformLinkUri:l.oneOfType([l.func,l.bool]),linkTarget:l.oneOfType([l.func,l.string]),transformImageUri:l.func,components:l.object},g.uriTransformer=d},function(e,t,n){"use strict";e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},function(e,t,n){"use strict";e.exports=function(e){return null==e?[]:"length"in e?e:[e]}},function(e,t,n){"use strict";var a=n(127);e.exports=function(e,t){return e.length?(a(e,e.length,0,t),e):t}},function(e,t,n){"use strict";var a=n(395),i=n(133)(a);e.exports=i},function(e,t,n){"use strict";var a=n(133)(/\s/);e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return e<32||127===e}},function(e,t,n){"use strict";var a=n(128),i=n(181),r=n(127),s=n(179),o=n(155),l=n(135),c=n(240),u=n(241),d=n(243),p=n(242),m={name:"labelEnd",tokenize:function(e,t,n){for(var a,i,r=this,o=r.events.length;o--;)if(("labelImage"===r.events[o][1].type||"labelLink"===r.events[o][1].type)&&!r.events[o][1]._balanced){a=r.events[o][1];break}return function(t){return a?a._inactive?c(t):(i=r.parser.defined.indexOf(s(r.sliceSerialize({start:a.end,end:r.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):n(t)};function l(n){return 40===n?e.attempt(h,t,i?t:c)(n):91===n?e.attempt(f,t,i?e.attempt(g,t,c):c)(n):i?t(n):c(n)}function c(e){return a._balanced=!0,n(e)}},resolveTo:function(e,t){for(var n,a,s,c,u,d,p,m=e.length,h=0;m--;)if(c=e[m][1],u){if("link"===c.type||"labelLink"===c.type&&c._inactive)break;"enter"===e[m][0]&&"labelLink"===c.type&&(c._inactive=!0)}else if(d){if("enter"===e[m][0]&&("labelImage"===c.type||"labelLink"===c.type)&&!c._balanced&&(u=m,"labelLink"!==c.type)){h=2;break}}else"labelEnd"===c.type&&(d=m);return n={type:"labelLink"===e[u][1].type?"link":"image",start:l(e[u][1].start),end:l(e[e.length-1][1].end)},a={type:"label",start:l(e[u][1].start),end:l(e[d][1].end)},s={type:"labelText",start:l(e[u+h+2][1].end),end:l(e[d-2][1].start)},p=i(p=[["enter",n,t],["enter",a,t]],e.slice(u+1,u+h+3)),p=i(p,[["enter",s,t]]),p=i(p,o(t.parser.constructs.insideSpan.null,e.slice(u+h+4,d-3),t)),p=i(p,[["exit",s,t],e[d-2],e[d-1],["exit",a,t]]),p=i(p,e.slice(d+1)),p=i(p,[["exit",n,t]]),r(e,u,e.length,p),e},resolveAll:function(e){for(var t,n=-1;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},h={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),p(e,i)};function i(t){return 41===t?o(t):c(e,r,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function r(t){return a(t)?p(e,s)(t):o(t)}function s(t){return 34===t||39===t||40===t?d(e,p(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):o(t)}function o(a){return 41===a?(e.enter("resourceMarker"),e.consume(a),e.exit("resourceMarker"),e.exit("resource"),t):n(a)}}},f={tokenize:function(e,t,n){var a=this;return function(t){return u.call(a,e,i,n,"reference","referenceMarker","referenceString")(t)};function i(e){return a.parser.defined.indexOf(s(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},g={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),a};function a(a){return 93===a?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}};e.exports=m},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0);function i(e){let t=!1;const{inputs:n}=e;if(!n||!n.length)return{policy:e,forceCreateNeeded:!1};const i=n.map((n=>{const{streams:i}=n;if(!i)return n;const r=i.map((n=>{var i,r,s,o;if(!n.vars||!n.vars[a.r]||null===(i=n.vars[a.r].value)||void 0===i||!i.package)return n;const l=n.vars[a.r];return t=(null===(r=l.value)||void 0===r?void 0:r.package)!==(null==e||null===(s=e.package)||void 0===s?void 0:s.name),n.vars[a.r]={...l,value:null===(o=l.value)||void 0===o?void 0:o.dataset},n}));return{...n,streams:r}}));return{policy:{...e,inputs:i},forceCreateNeeded:t}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return N}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(14),l=n(20),c=n(4),u=n(10),d=n(6),p=n(15),m=n(106),h=n(105),f=n(129),g=n(252),E=n(134),y=n(0),x=n(55),v=n(158),k=n(54);const b=n.n(k)()(d.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-20y62p-0"})([".euiFlyoutBody__overflowContent{padding:0;}"]),S=({newSecrets:e})=>{const{docLinks:t}=Object(p.lc)();return s.a.createElement(d.EuiCallOut,{title:c.i18n.translate("xpack.fleet.upgradePackagePolicy.statusCallOut.hasNewSecretsTitle",{defaultMessage:"New secrets added"}),color:"primary",iconType:"iInCircle"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.hasNewSecrets",defaultMessage:"Some of this integration's form fields have been converted to secrets in this version. Your existing values are autofilled in each secret input during this upgrade, but you won't be able to view them again after saving. {learnMoreLink}",values:{learnMoreLink:s.a.createElement(d.EuiLink,{href:t.links.fleet.policySecrets,target:"_blank"},"Learn more.")}}),s.a.createElement(d.EuiSpacer,{size:"s"}),s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.hasNewSecretsList",defaultMessage:"New secrets: {secrets}",values:{secrets:s.a.createElement("ul",null,e.map((e=>s.a.createElement("li",{key:e.title},e.title))))}}))},F=({currentPackagePolicy:e,proposedUpgradePackagePolicy:t,onPreviousConfigurationClick:n})=>{var a,i;return s.a.createElement(d.EuiCallOut,{title:c.i18n.translate("xpack.fleet.upgradePackagePolicy.statusCallOut.errorTitle",{defaultMessage:"Review field conflicts"}),color:"warning",iconType:"warning"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.errorContent",defaultMessage:"This integration has conflicting fields from version {currentVersion} to {upgradeVersion} Review the configuration and save to perform the upgrade. You may reference your {previousConfigurationLink} for comparison.",values:{currentVersion:null==e||null===(a=e.package)||void 0===a?void 0:a.version,upgradeVersion:null==t||null===(i=t.package)||void 0===i?void 0:i.version,previousConfigurationLink:s.a.createElement(d.EuiLink,{onClick:n},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.previousConfigurationLink",defaultMessage:"previous configuration"}))}}))},C=({currentPackagePolicy:e,proposedUpgradePackagePolicy:t})=>{var n,a;return s.a.createElement(d.EuiCallOut,{title:c.i18n.translate("xpack.fleet.upgradePackagePolicy.statusCallOut.successTitle",{defaultMessage:"Ready to upgrade"}),color:"success",iconType:"checkInCircleFilled"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.statusCallout.successContent",defaultMessage:"This integration is ready to be upgraded from version {currentVersion} to {upgradeVersion}. Review the changes below and save to upgrade.",values:{currentVersion:null==e||null===(n=e.package)||void 0===n?void 0:n.version,upgradeVersion:null==t||null===(a=t.package)||void 0===a?void 0:a.version}}))},D=({dryRunData:e,newSecrets:t})=>{var n;const[a,i]=Object(r.useState)(!1);if(!e)return null;const o=t.length>0,[l,c]=e[0].diff||[],p=l&&!e[0].hasErrors;return s.a.createElement(s.a.Fragment,null,a&&l&&s.a.createElement(d.EuiPortal,null,s.a.createElement(d.EuiFlyout,{onClose:()=>i(!1),size:"l",maxWidth:640},s.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},s.a.createElement(d.EuiTitle,{size:"m"},s.a.createElement("h2",{id:"FleetPackagePolicyPreviousVersionFlyoutTitle"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.previousVersionFlyout.title",defaultMessage:"'{name}' integration policy",values:{name:null==l?void 0:l.name}})))),s.a.createElement(b,null,s.a.createElement(d.EuiCodeBlock,{isCopyable:!0,fontSize:"m",whiteSpace:"pre"},JSON.stringify((null===(n=e[0].agent_diff)||void 0===n?void 0:n[0])||[],null,2))))),p?s.a.createElement(C,{currentPackagePolicy:l,proposedUpgradePackagePolicy:c}):s.a.createElement(F,{currentPackagePolicy:l,proposedUpgradePackagePolicy:c,onPreviousConfigurationClick:()=>i(!0)}),o&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.EuiSpacer,{size:"m"}),s.a.createElement(S,{newSecrets:t})))};var w=n(120),A=n(473),M=n.n(A),T=n(136),P=n(39),I=n.n(P),O=n(13),j=n(5),B=n(187);function L(e,t={}){return e?Object.entries(e).reduce(((e,[n,a])=>{var i,r;return e[n]={...a,value:null!==(i=null==t||null===(r=t[n])||void 0===r?void 0:r.value)&&void 0!==i?i:a.value},e}),{}):{}}const _=Object(r.memo)((()=>{var e,t,n,a;const{params:{packagePolicyId:i}}=Object(l.useRouteMatch)(),r=Object(m.x)(i),o=Object(p.oc)(null!==(e=null===(t=r.data)||void 0===t||null===(n=t.item)||void 0===n||null===(a=n.package)||void 0===a?void 0:a.name)&&void 0!==e?e:"","package-policy-edit");return s.a.createElement(N,{packagePolicyId:i,forceUpgrade:null==o?void 0:o.useLatestPackageVersion})})),N=Object(r.memo)((({packagePolicyId:e,forceUpgrade:t=!1,from:n="edit"})=>{var a,m,k,b,S,F,C,A;const{application:P,notifications:_}=Object(p.lc)(),{agents:{enabled:N}}=Object(p.zb)(),{getHref:R}=Object(p.cc)(),{agentPolicy:U,isLoadingData:H,loadingError:K,packagePolicy:W,originalPackagePolicy:$,packageInfo:G,upgradeDryRunData:J,formState:X,setFormState:q,isUpgrade:V,isEdited:Y,setIsEdited:Q,savePackagePolicy:Z,hasErrors:ee,updatePackagePolicy:te,validationResults:ne}=function(e,t){var n;const[a,i]=Object(r.useState)(),[s,l]=Object(r.useState)({name:"",description:"",namespace:"",policy_id:"",enabled:!0,inputs:[],version:""}),[c,u]=Object(r.useState)(),[d,m]=Object(r.useState)(),[h,f]=Object(r.useState)(!0),[g,E]=Object(r.useState)(),[y,x]=Object(r.useState)(),[v,k]=Object(r.useState)(null!==(n=t.forceUpgrade)&&void 0!==n&&n),[b,S]=Object(r.useState)(!1),[F,C]=Object(r.useState)("INVALID"),[D,A]=Object(r.useState)(),P=!!D&&Object(T.f)(D),j=Object(r.useCallback)((e=>{if(a){const t=Object(T.d)(e||s,a,w.safeLoad);return A(t),console.debug("Package policy validation results",t),t}}),[s,a]),_=Object(r.useCallback)((e=>{M()(JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(Object(o.pick)(s,Object.keys(e)))))||S(!0);const t={...s,...e};l(t),console.debug("Package policy updated",t);const n=j(t),a=!!n&&Object(T.f)(n);C(a?"INVALID":"VALID")}),[s,j]);return Object(r.useEffect)((()=>{(async()=>{f(!0),x(void 0);try{var n,a;const h=await async function(){const{data:e}=await Object(p.L)();return Boolean(null==e?void 0:e.item.prerelease_integrations_enabled)}(),{data:f,error:g}=await Object(p.E)(e);if(g)throw g;const{data:y,error:x}=await Object(p.C)(f.item.policy_id);if(x)throw x;null!=y&&y.item&&m(y.item);const{data:v,error:b}=await Object(p.sb)([e]);if(b)throw b;const S=!!v&&function(e){var t,n,a,i;return e&&e[0].diff&&I()(null!==(t=null===(n=e[0].diff[1].package)||void 0===n?void 0:n.version)&&void 0!==t?t:"",null!==(a=null===(i=e[0].diff[0].package)||void 0===i?void 0:i.version)&&void 0!==a?a:"")}(v),F=t.forceUpgrade&&S;S||k(!1),v&&S&&E(v);const D=null==f?void 0:f.item;let M=null==D?void 0:D.inputs,P=null==D?void 0:D.package,j=null==D?void 0:D.vars;const B=null==v||null===(n=v[0])||void 0===n||null===(a=n.diff)||void 0===a?void 0:a[1];if(F){if(!B)throw new Error("There was an error when trying to load upgrade diff for that package policy");M=B.inputs,P=B.package,j=B.vars}if(D){u(D);const{id:e,revision:t,inputs:n,vars:a,created_by:m,created_at:f,updated_by:g,updated_at:E,secret_references:y,...x}=D,k={...x,vars:L(j,a),inputs:M.map((e=>{var t;const{streams:n,compiled_input:a,vars:i,...r}=e;let s=F&&(null===(t=D.inputs.find((t=>t.type===e.type&&t.policy_template===e.policy_template)))||void 0===t?void 0:t.vars),o=i;return s&&i&&(s=Object.keys(i).reduce(((e,t)=>({...e,[t]:s[t]})),{}),o={...i,...s}),"apm"===P.name&&(o=function(e){const{IDLE_TIMEOUT:t,READ_TIMEOUT:n,SHUTDOWN_TIMEOUT:a,TAIL_SAMPLING_INTERVAL:i,WRITE_TIMEOUT:r}=O.d;return Object.fromEntries(Object.entries(e).map((e=>e[0]!==t&&e[0]!==n&&e[0]!==a&&e[0]!==i&&e[0]!==r||!/[0-9]+$/.test(e[1].value)?e:(e[1]={...e[1],value:e[1].value+"s"},[e[0],e[1]]))))}(o)),{...r,streams:n.map((e=>{const{compiled_stream:t,...n}=e;return n})),vars:o}})),package:P};if(l(k),D.package){var r,s,o;let e=D.package;var c,d;F&&null!=v&&null!==(r=v[0])&&void 0!==r&&null!==(s=r.diff)&&void 0!==s&&null!==(o=s[1])&&void 0!==o&&o.package&&(e=null===(c=v[0].diff)||void 0===c||null===(d=c[1])||void 0===d?void 0:d.package);const{data:t}=await Object(p.H)(e.name,e.version,{prerelease:h,full:!0});if(null!=t&&t.item){i(t.item);const e=Object(T.d)(k,t.item,w.safeLoad);A(e),Object(T.f)(e)?C("INVALID"):C("VALID")}}}}catch(e){x(e)}f(!1)})()}),[e,t.forceUpgrade]),{formState:F,validationResults:D,hasErrors:P,upgradeDryRunData:g,setFormState:C,updatePackagePolicy:_,isEdited:b,setIsEdited:S,packageInfo:a,isUpgrade:v,savePackagePolicy:async()=>{C("LOADING");const{policy:{elasticsearch:t,...n}}=await Object(B.a)(s),a=await Object(p.rb)(e,n);return C("SUBMITTED"),a},isLoadingData:h,agentPolicy:d,loadingError:y,packagePolicy:s,originalPackagePolicy:c}}(e,{forceUpgrade:t}),ae=Object(p.vb)().integrations.writeIntegrationPolicies,ie=Object(r.useMemo)((()=>G?(({packageInfo:e,packagePolicy:t})=>{const n=[];for(const o of null!==(a=e.vars)&&void 0!==a?a:[]){var a,i,r,s;const e=null===(i=t.vars)||void 0===i||null===(r=i[o.name])||void 0===r||null===(s=r.value)||void 0===s?void 0:s.isSecretRef;o.secret&&!e&&n.push(o)}for(const a of null!==(o=e.policy_templates)&&void 0!==o?o:[]){var o;if(Object(j.L)(a))for(const e of null!==(l=a.vars)&&void 0!==l?l:[]){var l,c,u,d,p,m;const a=null===(c=t.inputs)||void 0===c||null===(u=c[0])||void 0===u||null===(d=u.vars)||void 0===d||null===(p=d[e.name])||void 0===p||null===(m=p.value)||void 0===m?void 0:m.isSecretRef;e.secret&&!a&&n.push(e)}else for(const e of null!==(h=a.inputs)&&void 0!==h?h:[]){var h;for(const a of null!==(f=e.vars)&&void 0!==f?f:[]){var f,g,E,y,x,v;const e=null===(g=t.inputs)||void 0===g||null===(E=g[0])||void 0===E||null===(y=E.vars)||void 0===y||null===(x=y[a.name])||void 0===x||null===(v=x.value)||void 0===v?void 0:v.isSecretRef;a.secret&&!e&&n.push(a)}}}return n})({packageInfo:G,packagePolicy:W}):[]),[G,W]),re=null!==(a=null==U?void 0:U.id)&&void 0!==a?a:"",[se,oe]=Object(r.useState)(0);Object(r.useEffect)((()=>{N&&re&&(async()=>{const{data:e}=await Object(p.w)({policyId:re});null!=e&&e.results.total&&oe(e.results.total)})()}),[re,N]);const le=Object(r.useCallback)((({isValid:e,updatedPolicy:t})=>{te(t),q((t=>"VALID"!==t||e?t:"INVALID"))}),[te,q]),ce=Object(r.useMemo)((()=>G&&re?"package-edit"===n?R("integration_details_policies",{pkgkey:Object(x.s)(G)}):R("policy_details",{policyId:re}):"/"),[n,R,G,re]),ue=Object(r.useMemo)((()=>G&&re?"package-edit"===n||"upgrade-from-integrations-policy-list"===n?R("integration_details_policies",{pkgkey:Object(x.s)(G)}):R("policy_details",{policyId:re}):"/"),[n,R,G,re]);!function(e){const t=Object(l.useHistory)(),{overlays:n,application:a,http:i}=Object(p.lc)();Object(r.useEffect)((()=>{if(!e)return;const r=t.block((e=>(async function(){if(await n.openConfirm(c.i18n.translate("xpack.fleet.editPackagePolicy.historyBlockDescription",{defaultMessage:"Unsaved changes will be discarded. Are you sure you would like to continue?"}),{title:c.i18n.translate("xpack.fleet.editPackagePolicy.historyBlockTitle",{defaultMessage:"Discard Changes?"})})){const t=i.basePath.prepend(e.pathname)+e.hash+e.search;r(),a.navigateToUrl(t,{state:e.state})}}(),!1)));return r}),[t,e,n,a,i.basePath])}(Y);const de=async()=>{if("VALID"===X&&ee)return void q("INVALID");if(0!==se&&"CONFIRM"!==X)return void q("CONFIRM");const{error:e}=await Z();e?(409===e.statusCode?_.toasts.addError(e,{title:c.i18n.translate("xpack.fleet.editPackagePolicy.failedNotificationTitle",{defaultMessage:"Error updating '{packagePolicyName}'",values:{packagePolicyName:W.name}}),toastMessage:c.i18n.translate("xpack.fleet.editPackagePolicy.failedConflictNotificationMessage",{defaultMessage:"Data is out of date. Refresh the page to get the latest policy."})}):_.toasts.addError(e,{title:c.i18n.translate("xpack.fleet.editPackagePolicy.failedNotificationTitle",{defaultMessage:"Error updating '{packagePolicyName}'",values:{packagePolicyName:W.name}})}),q("VALID")):(Q(!1),P.navigateToUrl(ue),_.toasts.addSuccess({title:c.i18n.translate("xpack.fleet.editPackagePolicy.updatedNotificationTitle",{defaultMessage:"Successfully updated '{packagePolicyName}'",values:{packagePolicyName:W.name}}),"data-test-subj":"policyUpdateSuccessToast",text:se&&U?c.i18n.translate("xpack.fleet.editPackagePolicy.updatedNotificationMessage",{defaultMessage:"Fleet will deploy updates to all agents that use the '{agentPolicyName}' policy",values:{agentPolicyName:U.name}}):void 0}))},pe=Object(p.oc)(null!==(m=null===(k=W.package)||void 0===k?void 0:k.name)&&void 0!==m?m:"","package-policy-edit"),me=Object(p.oc)(null!==(b=null===(S=W.package)||void 0===S?void 0:S.name)&&void 0!==b?b:"","package-policy-replace-define-step"),he=Object(p.oc)(null!==(F=null===(C=W.package)||void 0===C?void 0:C.name)&&void 0!==F?F:"","package-policy-edit-tabs");if(me&&pe)throw new Error("'package-policy-create' and 'package-policy-replace-define-step' cannot both be registered as UI extensions");const fe=null==he?void 0:he.tabs,[ge,Ee]=Object(r.useState)(0),ye={from:null!=pe&&pe.useLatestPackageVersion&&V?"upgrade-from-extension":n,cancelUrl:ce,agentPolicy:U,packageInfo:G,tabs:null!=fe&&fe.length?[{title:c.i18n.translate("xpack.fleet.editPackagePolicy.settingsTabName",{defaultMessage:"Settings"}),isSelected:0===ge,onClick:()=>{Ee(0)}},...fe.map((({title:e},t)=>({title:e,isSelected:ge===t+1,onClick:()=>{Ee(t+1)}})))]:[]},xe=Object(r.useMemo)((()=>{var e;return U&&G?s.a.createElement(s.a.Fragment,null,0===ge&&s.a.createElement(E.d,{agentPolicy:U,packageInfo:G,packagePolicy:W,updatePackagePolicy:te,validationResults:ne,submitAttempted:"INVALID"===X,isEditPage:!0}),!pe&&0===ge&&s.a.createElement(E.c,{packageInfo:G,packagePolicy:W,updatePackagePolicy:te,validationResults:ne,submitAttempted:"INVALID"===X,isEditPage:!0}),pe&&W.policy_id&&(null===(e=W.package)||void 0===e?void 0:e.name)&&$&&s.a.createElement(h.l,null,ge>0&&fe?s.a.createElement(fe[ge-1].Component,{policy:$,newPolicy:W,onChange:le}):s.a.createElement(pe.Component,{policy:$,newPolicy:W,onChange:le}))):null}),[U,G,W,te,ne,X,$,pe,le,ge,fe]),ve=me&&$&&G&&s.a.createElement(h.l,null,s.a.createElement(me.Component,{agentPolicy:U,packageInfo:G,policy:$,newPolicy:W,onChange:le,validationResults:ne,isEditPage:!0})),{showDevtoolsRequest:ke}=x.b.get(),be=!y.ab.includes(null!==(A=null==G?void 0:G.name)&&void 0!==A?A:"")&&ke,Se=Object(r.useMemo)((()=>Object(v.d)(e,Object(o.omit)(W,"elasticsearch"))),[e,W]);return s.a.createElement(g.a,i()({},ye,{"data-test-subj":"editPackagePolicy"}),s.a.createElement(d.EuiErrorBoundary,null,H?s.a.createElement(h.r,null):!K&&U&&G?s.a.createElement(s.a.Fragment,null,s.a.createElement(z,{agentPolicyName:U.name,from:n,packagePolicyName:W.name,pkgkey:Object(x.s)(G),pkgTitle:G.title,policyId:re}),"CONFIRM"===X&&s.a.createElement(f.f,{agentCount:se,agentPolicy:U,onConfirm:de,onCancel:()=>q("VALID")}),V&&J&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D,{dryRunData:J,newSecrets:ie}),s.a.createElement(d.EuiSpacer,{size:"xxl"})),ve||xe,s.a.createElement(d.EuiSpacer,{size:"xxl"}),s.a.createElement(d.EuiSpacer,{size:"xxl"}),s.a.createElement(d.EuiBottomBar,null,s.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(d.EuiFlexItem,{grow:!1},U&&G&&"INVALID"===X?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.errorOnSaveText",defaultMessage:"Your integration policy has errors. Please fix them before saving."}):null),s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(d.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd"},s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(d.EuiButtonEmpty,{color:"text",href:ce},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.cancelButton",defaultMessage:"Cancel"}))),be?s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(h.i,{isDisabled:"VALID"!==X,btnProps:{color:"text"},description:c.i18n.translate("xpack.fleet.editPackagePolicy.devtoolsRequestDescription",{defaultMessage:"This Kibana request updates a package policy."}),request:Se})):null,s.a.createElement(d.EuiFlexItem,{grow:!1},s.a.createElement(h.k,{onClick:de,isLoading:"LOADING"===X,isDisabled:!ae||"VALID"!==X||!Y&&!V,tooltip:ae?void 0:{content:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.agentPolicy.saveIntegrationTooltip",defaultMessage:"To save the integration policy, you must have security enabled and have the All privilege for Integrations. Contact your administrator."})},iconType:"save",color:"primary",fill:!0,"data-test-subj":"saveIntegration"},V?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.upgradeButton",defaultMessage:"Upgrade integration"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.saveButton",defaultMessage:"Save integration"})))))))):s.a.createElement(h.j,{title:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.errorLoadingDataTitle",defaultMessage:"Error loading data"}),error:K||c.i18n.translate("xpack.fleet.editPackagePolicy.errorLoadingDataMessage",{defaultMessage:"There was an error loading this integration information"})})))})),z=Object(r.memo)((({agentPolicyName:e,from:t,packagePolicyName:n,pkgkey:a,pkgTitle:i,policyId:r})=>{let o=s.a.createElement(U,{policyName:e,policyId:r});return"package"===t||"package-edit"===t?o=s.a.createElement(R,{pkgkey:a,pkgTitle:i,policyName:n}):"upgrade-from-integrations-policy-list"===t?o=s.a.createElement(H,{pkgkey:a,pkgTitle:i,policyName:n}):"upgrade-from-fleet-policy-list"===t&&(o=s.a.createElement(K,{policyName:e,policyId:r})),o})),R=Object(r.memo)((({pkgTitle:e,policyName:t,pkgkey:n})=>(Object(m.m)("integration_policy_edit",{policyName:t,pkgTitle:e,pkgkey:n}),null))),U=({policyName:e,policyId:t})=>(Object(p.wb)("edit_integration",{policyName:e,policyId:t}),null),H=Object(r.memo)((({pkgTitle:e,policyName:t,pkgkey:n})=>(Object(m.m)("integration_policy_upgrade",{policyName:t,pkgTitle:e,pkgkey:n}),null))),K=({policyName:e,policyId:t})=>(Object(p.wb)("upgrade_package_policy",{policyName:e,policyId:t}),null)},function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b}));var a=n(1),i=n.n(a),r=n(4),s=n(10),o=n(6),l=n(54),c=n.n(l),u=n(119),d=n(15);const p=({isMissing:e,children:t})=>i.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiText,null,e?i.a.createElement(o.EuiIcon,{type:"error",color:"danger"}):i.a.createElement(o.EuiIcon,{type:"checkInCircleFilled",color:"success"}))),i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiText,null,t))),m=c()(o.EuiPageBody).withConfig({displayName:"StyledPageBody",componentId:"sc-h0h01m-0"})(["border:1px solid ",";border-radius:5px;"],"#d3dae6"),h=({missingRequirements:e})=>{const{docLinks:t}=Object(d.lc)();return i.a.createElement(u.d,null,i.a.createElement(m,{restrictWidth:820},i.a.createElement(o.EuiPageSection,{color:"transparent"},i.a.createElement(o.EuiCallOut,{title:r.i18n.translate("xpack.fleet.setupPage.missingRequirementsCalloutTitle",{defaultMessage:"Missing security requirements"}),color:"warning",iconType:"warning"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsCalloutDescription",defaultMessage:"To use central management for Elastic Agents, enable the following Elasticsearch security features."})),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsElasticsearchTitle",defaultMessage:"In your Elasticsearch configuration ({esConfigFile}), enable:",values:{esConfigFile:i.a.createElement(o.EuiCode,null,"elasticsearch.yml")}}),i.a.createElement(o.EuiSpacer,{size:"l"}),i.a.createElement(p,{isMissing:e.includes("security_required")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityFlagText",defaultMessage:"{esSecurityLink}. Set {securityFlag} to {true} .",values:{esSecurityLink:i.a.createElement(o.EuiLink,{href:t.links.security.elasticsearchEnableSecurity,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityLink",defaultMessage:"Elasticsearch security"})),securityFlag:i.a.createElement(o.EuiCode,null,"xpack.security.enabled"),true:i.a.createElement(o.EuiCode,null,"true")}})),i.a.createElement(o.EuiSpacer,{size:"s"}),i.a.createElement(p,{isMissing:e.includes("api_keys")},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchApiKeyFlagText",defaultMessage:"{apiKeyLink}. Set {apiKeyFlag} to {true} .",values:{apiKeyFlag:i.a.createElement(o.EuiCode,null,"xpack.security.authc.api_key.enabled"),true:i.a.createElement(o.EuiCode,null,"true"),apiKeyLink:i.a.createElement(o.EuiLink,{href:t.links.security.apiKeyServiceSettings,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.apiKeyServiceLink",defaultMessage:"API key service"}))}})),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiCodeBlock,{isCopyable:!0},"xpack.security.enabled: true\nxpack.security.authc.api_key.enabled: true"),i.a.createElement(o.EuiSpacer,{size:"l"}),i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedText",defaultMessage:"For more information, read our {link} guide.",values:{link:i.a.createElement(o.EuiLink,{href:t.links.fleet.guide,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedLink",defaultMessage:"Getting Started"}))}}))))};var f=n(190),g=n(130),E=n(105);const y=({deploymentUrl:e})=>{const{docLinks:t}=Object(d.lc)(),{refresh:n}=Object(d.Gb)();return Object(a.useEffect)((()=>{const e=setInterval((()=>{n()}),1e4);return()=>clearInterval(e)}),[n]),i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiEmptyPrompt,{title:i.a.createElement("h2",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupTitle",defaultMessage:"Enable Fleet Server"})),body:i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupText",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. The easiest way to get one is by adding an Integration Server, which runs the Fleet Server integration. You can add it to your deployment in the Cloud Console. For more information see the {link}",values:{link:i.a.createElement(o.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.userGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),actions:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiButton,{iconSide:"right",iconType:"popout",fill:!0,isLoading:!1,type:"submit",href:`${e}/edit`,target:"_blank"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudDeploymentLink",defaultMessage:"Edit deployment"})))}),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiFlexItem,null,i.a.createElement(o.EuiFlexGroup,{justifyContent:"center",gutterSize:"s"},i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiLoadingSpinner,{size:"m"})),i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiText,{size:"s",color:"subdued"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.waitingText",defaultMessage:"Waiting for a Fleet Server to connect..."}))))))},x=({showStandaloneTab:e})=>{const t=Object(d.Hb)(),{docLinks:n}=Object(d.lc)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiText,null,i.a.createElement("strong",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.fleetRecommendedTitle",defaultMessage:"Enrolling your agents in Fleet is recommended."})),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.centrallyManageListItem",defaultMessage:"Fleet provides an easy way to centrally manage your agents."})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.addIntegrationsListItem",defaultMessage:"Allows you to remotely add integrations, track their health, upgrade agents, and execute actions."})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.requiredForSomeIntegrationsListItem",defaultMessage:"Required for some integrations like Endpoint Security and OSQuery Manager."})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.learnMoreListItem",defaultMessage:"To learn more, see the {userGuideLink}.",values:{userGuideLink:i.a.createElement(o.EuiLink,{href:n.links.fleet.guide,target:"_blank",external:!0},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.fleetUserGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})))),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiFlexGroup,null,i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiButton,{onClick:null==t?void 0:t.openFleetServerFlyout},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.addFleetServerButton",defaultMessage:"Add Fleet Server"}))),i.a.createElement(o.EuiFlexItem,{grow:!1},i.a.createElement(o.EuiButtonEmpty,{onClick:e},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.runStandaloneButton",defaultMessage:"Run standalone"})))))},v=c()(o.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1ivqx24-0"})(["min-width:0px;max-width:100%;"]),k=c()(o.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1ivqx24-1"})(["height:100%;margin:0 auto;"]),b=({showStandaloneTab:e=(()=>{}),showEnrollmentRecommendation:t=!0})=>{var n;const a=null===(n=Object(d.lc)().cloud)||void 0===n?void 0:n.deploymentUrl,{permissionsError:r,isPermissionsLoading:s}=Object(d.xb)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(k,{gutterSize:"none",justifyContent:"center",direction:"column"},i.a.createElement(v,{grow:!1},a?i.a.createElement(y,{deploymentUrl:a}):s?i.a.createElement(g.j,null):r?i.a.createElement(f.c,null):t?i.a.createElement(x,{showStandaloneTab:e}):i.a.createElement(E.b,null))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return m}));var a=n(1),i=n.n(a),r=n(10),s=n(6),o=n(15);const l=({deploymentUrl:e})=>{const{docLinks:t}=Object(o.lc)();return i.a.createElement(s.EuiCallOut,{iconType:"warning",color:"warning",title:i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudUnhealthyCallout.calloutTitle",defaultMessage:"Fleet Server is not Healthy"})},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.calloutDescription",defaultMessage:"A healthy Fleet server is required to enroll agents with Fleet. Enable Fleet Server in your {cloudDeploymentLink}. For more information see the {guideLink}.",values:{cloudDeploymentLink:i.a.createElement(s.EuiLink,{href:e,target:"_blank",external:!0},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.cloudDeploymentLink",defaultMessage:"cloud deployment"})),guideLink:i.a.createElement(s.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),i.a.createElement(s.EuiSpacer,{size:"m"}),i.a.createElement(s.EuiButton,{href:e,target:"_blank",color:"warning",fill:!0},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.editDeploymentButtonLabel",defaultMessage:"Edit deployment"})))},c=({onClickAddFleetServer:e})=>{const{docLinks:t}=Object(o.lc)();return i.a.createElement(s.EuiCallOut,{iconType:"warning",color:"warning",title:i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.calloutTitle",defaultMessage:"Fleet Server is not Healthy"})},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.calloutDescription",defaultMessage:"A healthy Fleet server is required before you can enroll agents with Fleet.  For more information see the {guideLink}.",values:{guideLink:i.a.createElement(s.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),i.a.createElement(s.EuiSpacer,{size:"m"}),i.a.createElement(s.EuiButton,{onClick:e,color:"warning",fill:!0,"data-test-subj":"addFleetServerBtn"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.addFleetServerButtonLabel",defaultMessage:"Add Fleet Server"})))};var u=n(54);const d=n.n(u)()(s.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-6zta69-0"})(["max-width:500px;margin-right:auto;margin-left:auto;"]),p=()=>i.a.createElement(d,{"data-test-subj":"fleetServerMissingPrivilegesPrompt"},i.a.createElement(s.EuiEmptyPrompt,{iconType:"securityApp",title:i.a.createElement("h2",{"data-test-subj":"fleetServerMissingPrivilegesTitle"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupPermissionDeniedErrorTitle",defaultMessage:"Permission denied"})),body:i.a.createElement("p",{"data-test-subj":"fleetServerMissingPrivilegesMessage"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupPermissionDeniedErrorMessage",defaultMessage:"Fleet Server needs to be set up. This requires the {roleName} cluster privilege. Contact your administrator.",values:{roleName:i.a.createElement(s.EuiCode,null,'"manage_service_account"')}}))})),m=({onClickHandler:e})=>{const{docLinks:t}=Object(o.lc)();return i.a.createElement(s.EuiCallOut,{"data-test-subj":"missingEncryptionKeyCallout",iconType:"iInCircle",color:"warning",title:i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.title",defaultMessage:"Set up encryption key"})},i.a.createElement("p",{"data-test-subj":"missingEncryptionKeyBody"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.message",defaultMessage:"An encryption key will make your environment more secure. Click {link} to learn how to set up an encryption key.",values:{link:i.a.createElement(s.EuiLink,{href:t.links.kibana.secureSavedObject,target:"_blank"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.helpLink",defaultMessage:"here"}))}})),i.a.createElement(s.EuiButtonEmpty,{flush:"left",size:"s",color:"warning",onClick:e},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.dismiss",defaultMessage:"Dismiss"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(54),i=n.n(a),r=n(1),s=n.n(r),o=n(6),l=n(4),c=n(10),u=n(34),d=n(11),p=n(17),m=n(3),h=n(0),f=n(2);const g=({enrollmentAPIKey:e,onCopy:t,onDownload:n,fleetServerHost:a})=>{const i=Object(d.Rc)(),{notifications:u}=i,[g,E]=Object(r.useState)(""),[y,x]=Object(r.useState)(!1),[v,k]=Object(r.useState)(!1);Object(r.useEffect)((()=>{!async function(){try{const t={enrolToken:e,...a&&{fleetServer:a}},n=await((e={})=>Object(f.a)({path:m.c.getK8sInfoPath(),method:"get",version:h.m.public.v1,query:e}))(t);if(n.error)throw n.error;if(!n.data)throw new Error("No data while fetching agent manifest");E(n.data.item)}catch(e){u.toasts.addError(e,{title:l.i18n.translate("xpack.fleet.agentEnrollment.loadk8sManifestErrorTitle",{defaultMessage:"Error while fetching agent manifest"})})}}()}),[u.toasts,e,a]);const b=s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadDescriptionForK8s",defaultMessage:"Copy or download the Kubernetes manifest."}),S=s.a.createElement(o.EuiCopy,{textToCopy:g},(e=>s.a.createElement(o.EuiButton,{onClick:()=>(e=>{e(),x(!0),t&&t()})(e),iconType:"copyClipboard"},y?s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyPolicyButtonClicked",defaultMessage:"Copied"}):s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyPolicyButton",defaultMessage:"Copy to clipboard"})))),F=i.http.basePath.prepend(((e,t)=>{const n=new URLSearchParams({apiVersion:p.API_VERSIONS.public.v1,...e&&{fleetServer:e},...t&&{enrolToken:t}});return`${p.agentPolicyRouteService.getK8sFullDownloadPath()}?${n.toString()}`})(a,e)),C=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiButton,{target:"_blank",iconSide:"right",iconType:"popout",onClick:()=>(e=>{k(!0),n&&n(),window.location.href=e})(F)},v?s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadManifestButtonk8sClicked",defaultMessage:"Downloaded"}):s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.downloadManifestButtonk8s",defaultMessage:"Download Manifest"}))),D=s.a.createElement(o.EuiCodeBlock,{language:"yaml",style:{maxHeight:300},fontSize:"m"},g);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,b),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(s.a.Fragment,null,D),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiFlexGroup,{gutterSize:"m"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(s.a.Fragment,null,S)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(s.a.Fragment,null,C))))},E=i.a.pre.withConfig({displayName:"CommandCode",componentId:"sc-4falen-0"})({overflow:"auto"}),y=({linuxCommand:e,macCommand:t,windowsCommand:n,linuxDebCommand:a,linuxRpmCommand:i,k8sCommand:p,hasK8sIntegration:m,cloudSecurityIntegration:h,hasK8sIntegrationMultiPage:f,isManaged:y,enrollToken:v,hasFleetServer:k,fleetServerHost:b,fullCopyButton:S,onCopy:F})=>{const C=Object(r.useCallback)((()=>m||(null==h?void 0:h.integrationType)===u.g&&y?"kubernetes":"linux"),[m,null==h?void 0:h.integrationType,y]),{platform:D,setPlatform:w}=Object(d.Kc)(C()),A=k||!y&&!m,M=Object(r.useCallback)((()=>A?d.g:d.f),[A]),[T,P]=Object(r.useState)(!1),I=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.callout",{defaultMessage:"We recommend using the installers (TAR/ZIP) over system packages (RPM/DEB) because they provide the ability to upgrade your agent with Fleet."}),color:"warning",iconType:"warning"}),O=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.k8sCallout",{defaultMessage:"We recommend adding the Kubernetes integration to your agent policy in order to get useful metrics and logs from your Kubernetes clusters."}),color:"warning",iconType:"warning"}),j=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.placeHolderCallout",{defaultMessage:"We strongly advise against deploying CSPM within a Kubernetes cluster. Doing so may lead to redundant data fetching, which can cause increased consumption costs within your Elastic account and potentially trigger API rate limiting in your cloud account(s)."}),color:"warning",iconType:"warning"}),B=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.macCallout",{defaultMessage:"We recommend against deploying this integration within Mac as it is currently not being supported."}),color:"warning",iconType:"warning"}),L={linux:e,mac:t,windows:n,deb:a,rpm:i,kubernetes:p};return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,!f&&s.a.createElement(o.EuiButtonGroup,{options:M(),idSelected:D,onChange:e=>w(e),legend:l.i18n.translate("xpack.fleet.enrollmentInstructions.platformSelectAriaLabel",{defaultMessage:"Platform"})}),s.a.createElement(o.EuiSpacer,{size:"s"}),("deb"===D||"rpm"===D)&&s.a.createElement(s.a.Fragment,null,I,s.a.createElement(o.EuiSpacer,{size:"m"})),"mac"===D&&((null==h?void 0:h.integrationType)===u.f||(null==h?void 0:h.integrationType)===u.g)&&s.a.createElement(s.a.Fragment,null,B,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===D&&(null==h?void 0:h.integrationType)===u.f&&s.a.createElement(s.a.Fragment,null,j,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===D&&!m&&s.a.createElement(s.a.Fragment,null,O,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===D&&y&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{onCopy:F,onDownload:F,enrollmentAPIKey:v,fleetServerHost:b}),s.a.createElement(o.EuiSpacer,{size:"s"})),!f&&s.a.createElement(s.a.Fragment,null,"kubernetes"===D&&s.a.createElement(o.EuiText,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.agentEnrollment.kubernetesCommandInstructions",defaultMessage:"From the directory where the manifest is downloaded, run the apply command."}),s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement(x,{onClick:()=>{F&&F()},fontSize:"m",isCopyable:!S,paddingSize:"m"},s.a.createElement(E,null,L[D])),s.a.createElement(o.EuiSpacer,{size:"s"}),S&&s.a.createElement(o.EuiCopy,{textToCopy:L[D]},(e=>s.a.createElement(o.EuiButton,{color:"primary",iconType:"copyClipboard",size:"m",onClick:()=>(e=>{e(),P(!0),F&&F()})(e)},T?s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyButtonClicked",defaultMessage:"Copied"}):s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyButton",defaultMessage:"Copy to clipboard"})))))))};var x=i()(o.EuiCodeBlock).withConfig({displayName:"_StyledEuiCodeBlock",componentId:"sc-4falen-1"})(["max-width:1100px;"])},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var a=n(1),i=n.n(a);const r=i.a.createContext({refresh:()=>{}});function s(){return i.a.useContext(r).refresh}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=n(49).__importDefault(n(255));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),i=n(1),r=n(13),s=n(15);function o(){const{notifications:e}=Object(s.lc)(),[t,n]=Object(i.useState)(!0),[o,l]=Object(i.useState)(!1),c=Object(i.useCallback)((async()=>{try{var t,i;const e=await Object(s.I)({page:1,perPage:r.p,kuery:`${r.n}.package.name:${r.i}`});if(e.error)throw e.error;const a=[...new Set(null!==(t=null===(i=e.data)||void 0===i?void 0:i.items.map((e=>e.policy_id)))&&void 0!==t?t:[])];if(a.length>0){var o,c;const e=await Object(s.w)({kuery:a.map((e=>`policy_id:${e}`)).join(" or ")});if(e.error)throw e.error;0===(null===(o=e.data)||void 0===o?void 0:o.results.online)&&0===(null===(c=e.data)||void 0===c?void 0:c.results.updating)&&l(!0)}n(!1)}catch(t){e.toasts.addError(t,{title:a.i18n.translate("xpack.fleet.fleetServerUnhealthy.requestError",{defaultMessage:"An error happened while fetching fleet server status"})}),n(!1)}}),[e.toasts]);return Object(i.useEffect)((()=>{c()}),[c]),{isLoading:t,isUnhealthy:o}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),i=n.n(a),r=n(6),s=n(251),o=n(197),l=n(250);const c=({selectedPolicyId:e,onClose:t})=>{var n;const{isSelectFleetServerPolicyLoading:a,eligibleFleetServerPolicies:c,refreshEligibleFleetServerPolicies:u,fleetServerPolicyId:d,setFleetServerPolicyId:p,isFleetServerReady:m,serviceToken:h,isLoadingServiceToken:f,generateServiceToken:g,fleetServerHostForm:E,deploymentMode:y,setDeploymentMode:x}=Object(s.a)(),{hasRecentlyEnrolledFleetServers:v}=Object(o.a)(),k=[Object(l.f)({policyId:d||e,setPolicyId:p,eligibleFleetServerPolicies:c,refreshEligibleFleetServerPolicies:u}),Object(l.g)({deploymentMode:y,setDeploymentMode:x,disabled:!Boolean(d||e)}),Object(l.a)({fleetServerHostForm:E,disabled:!Boolean(d||e),onClose:t}),Object(l.c)({serviceToken:h,generateServiceToken:g,isLoadingServiceToken:f,disabled:Boolean(!E.fleetServerHost)}),Object(l.e)({isFleetServerReady:m,serviceToken:h,fleetServerHost:null===(n=E.fleetServerHost)||void 0===n?void 0:n.host_urls[0],fleetServerPolicyId:d||e,deploymentMode:y,disabled:!Boolean(h)}),Object(l.b)({hasRecentlyEnrolledFleetServers:v,disabled:!Boolean(h)})];return a?i.a.createElement(r.EuiSkeletonText,null):i.a.createElement(r.EuiSteps,{steps:k,className:"eui-textLeft"})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return f}));var a=n(1),i=n.n(a),r=n(4),s=n(10),o=n(15),l=n(5),c=n(125);const u=/^(https):\/\/[^\s$.?#].[^\s]*$/gm,d=()=>i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.confirmModalTitle",defaultMessage:"Save and deploy changes?"}),p=({})=>i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.confirmModalText",defaultMessage:"This action will update agent policies enrolled in this Fleet Server. This action can not be undone. Are you sure you wish to continue?"});function m(e){if(0===e.length)return[{message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsEmptyError",{defaultMessage:"At least one URL is required"})}];const t=[],n={};return e.forEach(((e,a)=>{e?e.match(u)||t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsError",{defaultMessage:"Invalid URL (must be an https URL)"}),index:a}):t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsRequiredError",{defaultMessage:"Host URL is required"}),index:a});const i=n[e]||[];n[e]=[...i,a]})),Object.values(n).filter((({length:e})=>e>1)).forEach((e=>{e.forEach((e=>t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsDuplicateError",{defaultMessage:"Duplicate URL"}),index:e})))})),t.length?t:e.length&&Object(l.K)(e)?[{message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsDifferentPathOrProtocolError",{defaultMessage:"Protocol and path must be the same for each URL"})}]:void 0}function h(e){if(!e||""===e)return[r.i18n.translate("xpack.fleet.settings.fleetServerHost.nameIsRequiredErrorMessage",{defaultMessage:"Name is required"})]}function f(e,t){var n,s,l,u;const[f,g]=Object(a.useState)(!1),{notifications:E}=Object(o.lc)(),{confirm:y}=Object(c.a)(),x=null!==(n=null==e?void 0:e.is_preconfigured)&&void 0!==n&&n,v=Object(o.Wb)(null!==(s=null==e?void 0:e.name)&&void 0!==s?s:"",h,x),k=Object(o.mc)(null!==(l=null==e?void 0:e.is_default)&&void 0!==l&&l,x||(null==e?void 0:e.is_default)),b=Object(o.yb)("hostUrls",(null==e?void 0:e.host_urls)||[],m,x),S=Object(o.Wb)(null!==(u=null==e?void 0:e.proxy_id)&&void 0!==u?u:"",(()=>{}),x),F=Object(a.useMemo)((()=>({nameInput:v,isDefaultInput:k,hostUrlsInput:b,proxyIdInput:S})),[v,k,b,S]),C=Object(a.useCallback)((()=>Object(o.qc)(F)),[F]),D=Object(a.useCallback)((async()=>{try{if(!C())return;if(!await y(i.a.createElement(d,null),i.a.createElement(p,null)))return;g(!0);const n={name:v.value,host_urls:b.value,is_default:k.value,proxy_id:""!==S.value?S.value:null};if(e){const t=await Object(o.ib)(e.id,n);if(t.error)throw t.error}else{const e=await Object(o.Z)(n);if(e.error)throw e.error}E.toasts.addSuccess(r.i18n.translate("xpack.fleet.settings.fleetServerHostsFlyout.successToastTitle",{defaultMessage:"Fleet Server host saved"})),g(!1),await t()}catch(e){g(!1),E.toasts.addError(e,{title:r.i18n.translate("xpack.fleet.settings.fleetServerHostsFlyout.errorToastTitle",{defaultMessage:"An error happened while saving Fleet Server host"})})}}),[e,v.value,b.value,k.value,S.value,C,E,y,t]);return{isLoading:f,isDisabled:f||!b.hasChanged&&!k.hasChanged&&!v.hasChanged&&!S.hasChanged||b.props.isInvalid||v.props.isInvalid,submit:D,inputs:F}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),i=n(13),r=n(15);const s=e=>{const[t,n]=Object(a.useState)([]),s=Object(a.useRef)(void 0),o=Object(a.useCallback)((async()=>{var e,a,s,o;const l=await Object(r.I)({page:1,perPage:i.p,kuery:`${i.n}.package.name:${i.i}`}),c=[...new Set(null!==(e=null==l||null===(a=l.data)||void 0===a?void 0:a.items.map((e=>e.policy_id)))&&void 0!==e?e:[])];if(0===c.length)return;const u=`(${c.map((e=>`${i.b}.policy_id:"${e}"`)).join(" or ")}) and not (_exists_:"${i.b}.unenrolled_at") and ${i.b}.enrolled_at >= now-10m`,d=null!==(s=null===(o=(await Object(r.z)({kuery:u,showInactive:!1})).data)||void 0===o?void 0:o.items.map((e=>e.id)))&&void 0!==s?s:t;d.some((e=>!t.includes(e)))&&n(d)}),[t]);return Object(a.useEffect)((()=>{let e=!1;const n=()=>{s.current=window.setTimeout((async()=>{o(),e||n()}),1e4)};return n(),(e||t.length>0)&&clearTimeout(s.current),()=>{e=!0}}),[t,o]),{hasRecentlyEnrolledFleetServers:t.length>0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),i=n.n(a),r=n(4),s=n(10),o=n(6),l=n(13),c=n(15),u=n(140);const d=({agentPolicyId:e,onCreateEnrollmentApiKey:t})=>{const{notifications:n}=Object(c.lc)(),[l,u]=Object(a.useState)(!1);return i.a.createElement(o.EuiCallOut,{color:"warning",title:r.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.noEnrollmentTokensForSelectedPolicyCallout",{defaultMessage:"There are no enrollment tokens for the selected agent policy"})},i.a.createElement("div",{className:"eui-textBreakWord"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrenrollmentStepAgentPolicyollment.noEnrollmentTokensForSelectedPolicyCalloutDescription",defaultMessage:"You must create and enrollment token in order to enroll agents with this policy"})),i.a.createElement(o.EuiSpacer,{size:"m"}),i.a.createElement(o.EuiButton,{iconType:"plusInCircle",isLoading:l,fill:!0,onClick:async()=>{if(u(!0),e)try{var a;const i=await Object(c.k)({policy_id:e});if(i.error)throw i.error;if(u(!1),null===(a=i.data)||void 0===a||!a.item)return;t(i.data.item),n.toasts.addSuccess(r.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"}))}catch(e){u(!1),n.toasts.addError(e,{title:"Error"})}}},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.setUpAgentsLink",defaultMessage:"Create enrollment token"})))},p=({agentPolicyId:e,selectedApiKeyId:t,initialAuthenticationSettingsOpen:n=!1,onKeyChange:r})=>{const{notifications:p}=Object(c.lc)(),[m,h]=Object(a.useState)([]),[f,g]=Object(a.useState)(n);Object(a.useEffect)((()=>{g(n)}),[n]);const[E,y]=Object(a.useState)(!1),x=Object(a.useCallback)((e=>{h([e]),r(e.id)}),[r]);return Object(a.useEffect)((function(){if(!e)return g(!0),void h([]);!async function(){try{var t;y(!0);const n=await Object(c.B)({page:1,perPage:l.p});if(n.error)throw n.error;if(!n.data)throw new Error("No data while fetching enrollment API keys");const a=n.data.items.filter((t=>t.policy_id===e&&!0===t.active));h(a),r(null===(t=a[0])||void 0===t?void 0:t.id)}catch(e){p.toasts.addError(e,{title:"Error"})}finally{y(!1)}}()}),[r,e,p.toasts]),Object(a.useEffect)((function(){if(!t&&m.length>0&&m[0].policy_id===e){const e=m[0].id;r(e)}}),[m,t,e,r]),i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiButtonEmpty,{iconSide:"left",iconType:f?"arrowDown":"arrowRight",onClick:()=>g(!f)},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.showAuthenticationSettingsButton",defaultMessage:"Authentication settings"})),f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.EuiSpacer,{size:"m"}),m.length&&t?i.a.createElement(o.EuiSelect,{fullWidth:!0,options:m.map((e=>({value:e.id,text:e.name}))),value:t||void 0,prepend:i.a.createElement(o.EuiText,null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.enrollmentTokenSelectLabel",defaultMessage:"Enrollment token"})),onChange:e=>{r(e.target.value)}}):E?i.a.createElement(u.a,null):e?i.a.createElement(d,{agentPolicyId:e,onCreateEnrollmentApiKey:x}):null))}},function(e,t,n){"use strict";var a=n(138);e.exports=new a({include:[n(200)]})},function(e,t,n){"use strict";var a=n(138);e.exports=new a({include:[n(165)],implicit:[n(263),n(264),n(265),n(266)]})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var a=n(1),i=n(4),r=n(11);const s=(e,t)=>{const n=Object(a.useMemo)((()=>e.length),[e.length]),s=Object(a.useMemo)((()=>e.reduce(((e,t)=>Object.values(t)[0].data?e+1:e),0)),[e]),{getAbsolutePath:o,getHref:l}=Object(r.Ec)();let c,u,d;return t||(c="",u="",d=""),"apm"===(null==t?void 0:t.name)?(c=o("/app/apm/tutorial"),u=i.i18n.translate("xpack.fleet.confirmIncomingData.installApmAgentButtonText",{defaultMessage:"Install APM Agent"}),d=i.i18n.translate("xpack.fleet.confirmIncomingData.APMsubtitle",{defaultMessage:"Next, install APM agents on your hosts to collect data from your applications and services."})):(c=l("integration_details_assets",{pkgkey:`${null==t?void 0:t.name}-${null==t?void 0:t.version}`}),u=i.i18n.translate("xpack.fleet.confirmIncomingData.viewDataAssetsButtonText",{defaultMessage:"View assets"}),d=i.i18n.translate("xpack.fleet.confirmIncomingData.subtitle",{defaultMessage:"Next, analyze your data using our integration assets such as curated views, dashboards and more."})),{enrolledAgents:n,numAgentsWithData:s,linkButton:{href:c,text:u},message:d}},o=(e,t,n=0)=>{const i=Object(a.useRef)(void 0),[s,o]=Object(a.useState)({incomingData:[],dataPreview:[]}),[l,c]=Object(a.useState)(!0),[u,d]=Object(a.useState)(!1),p=Object(a.useRef)();return Object(a.useEffect)((()=>{let a=!1;const l=()=>{i.current=window.setTimeout((async()=>{p.current||(p.current=Date.now()),Date.now()-p.current>3e5&&d(!0);const{data:n}=await Object(r.y)({agentsIds:e,previewData:t});if(null!=n&&n.items){const e=null==n?void 0:n.items.filter((e=>!0===e[Object.keys(e)[0]].data));e.length>0&&(o({incomingData:e,dataPreview:n.dataPreview||[]}),c(!1))}a||l()}),5e3)};l();const u=s.dataPreview.length>=n,m=s.incomingData.length>0;return(a||(t?u:m))&&clearTimeout(i.current),()=>{a=!0}}),[e,s,t,n,p]),{...s,isLoading:l,hasReachedTimeout:u}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),i=n.n(a),r=n(6),s=n(10),o=n(11),l=n(166);const c=({azureAccountType:e,agentPolicy:t,enrollmentToken:n=""})=>{const{agentPolicyWithPackagePolicies:a}=Object(l.a)(null==t?void 0:t.id),{fleetServerHosts:c}=Object(o.Ob)(a),u=c[0];return i.a.createElement(r.EuiText,null,i.a.createElement("p",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.description",defaultMessage:"An Azure Resource Manager (ARM) Template will create all the necessary resources to evaluate the security posture of your Azure organization. Follow the steps below to launch the ARM template. Learn more about {learnMore}.",values:{learnMore:i.a.createElement(r.EuiLink,{href:"https://azure.microsoft.com/en-us/get-started/azure-portal/resource-manager",target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"azure-resource-manager-link"},i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.learnMoreLinkText",defaultMessage:"Azure Resource Manager"}))}})),i.a.createElement(r.EuiText,{size:"s",color:"subdued"},i.a.createElement("ol",null,"organization-account"===e?i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.organizationLogin",defaultMessage:"Log into your Azure Portal"})):i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.login",defaultMessage:"Log into your Azure Portal"})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.launch",defaultMessage:"Click the Launch ARM Template button below."})),i.a.createElement("li",null,i.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.fillForm",defaultMessage:"Use the provided fields below to fill the instance details section of the ARM Template:"}),i.a.createElement(r.EuiSpacer,null),i.a.createElement(r.EuiDescriptionList,{listItems:[{title:"Fleet URL",description:i.a.createElement(r.EuiCodeBlock,{isCopyable:!0,paddingSize:"m"},u)},{title:"Enrollment Token",description:i.a.createElement(r.EuiCodeBlock,{isCopyable:!0,paddingSize:"m"},n)}]})))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(4),i=n(12);const r=({enrollmentAPIKey:e,azureArmTemplateProps:t})=>{var n,r;const{data:s,isLoading:o}=Object(i.ac)();let l,c=!1;(null==s||null===(n=s.item.fleet_server_hosts)||void 0===n?void 0:n[0])||o||(c=!0,l=a.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noFleetServerHost",{defaultMessage:"No Fleet Server host found"})),e||o||(c=!0,l=a.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noApiKey",{defaultMessage:"No enrollment token found"}));let u=null==t?void 0:t.templateUrl;return null!==(r=u)&&void 0!==r&&r.includes("ACCOUNT_TYPE")&&(u=u.replace("ACCOUNT_TYPE",(null==t?void 0:t.azureAccountType)||"single-account")),{isLoading:o,azureArmTemplateUrl:u,isError:c,error:l}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var a=n(7),i=n(5),r=n(0),s=n(2);const o=(e={})=>Object(a.useQuery)(["useGetUninstallTokens",e],(()=>Object(s.b)({method:"get",path:i.bb.getListPath(),version:r.m.public.v1,query:e}))),l=e=>Object(a.useQuery)(["useGetUninstallToken",e],(()=>Object(s.b)({method:"get",path:i.bb.getInfoPath(e),version:r.m.public.v1}))),c=e=>Object(s.a)({method:"get",path:i.bb.getInfoPath(e),version:r.m.public.v1})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(287);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return a.TfIdfSearchIndex}});var i=n(288);Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return i.UnorderedSearchIndex}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=t||[];for(var n=e=e||{},a=0;a<t.length;a++)if(null==(n=n[t[a]]))return null;return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(289);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return a.SimpleTokenizer}});var i=n(290);Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return i.StemmingTokenizer}});var r=n(291);Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return r.StopWordsTokenizer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.StopWordsMap={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};a.constructor=!1,a.hasOwnProperty=!1,a.isPrototypeOf=!1,a.propertyIsEnumerable=!1,a.toLocaleString=!1,a.toString=!1,a.valueOf=!1},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var a={}.hasOwnProperty;e.exports=a},function(e,t,n){"use strict";e.exports=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"==typeof e[t]?e[t].length:1;return n}},function(e,t,n){"use strict";var a=n(146),i=n(127),r=n(135);function s(e,t){for(var n,a,r,s,o,l,c=e[t][1],u=e[t][2],d=t-1,p=[],m=c._tokenizer||u.parser[c.contentType](c.start),h=m.events,f=[],g={};c;){for(;e[++d][1]!==c;);p.push(d),c._tokenizer||(n=u.sliceStream(c),c.next||n.push(null),a&&m.defineSkip(c.start),c.isInFirstContentOfListItem&&(m._gfmTasklistFirstContentOfListItem=!0),m.write(n),c.isInFirstContentOfListItem&&(m._gfmTasklistFirstContentOfListItem=void 0)),a=c,c=c.next}for(c=a,r=h.length;r--;)"enter"===h[r][0]?s=!0:s&&h[r][1].type===h[r-1][1].type&&h[r][1].start.line!==h[r][1].end.line&&(E(h.slice(r+1,o)),c._tokenizer=c.next=void 0,c=c.previous,o=r+1);for(m.events=c._tokenizer=c.next=void 0,E(h.slice(0,o)),r=-1,l=0;++r<f.length;)g[l+f[r][0]]=l+f[r][1],l+=f[r][1]-f[r][0]-1;return g;function E(t){var n=p.pop();f.unshift([n,n+t.length-1]),i(e,n,2,t)}}e.exports=function(e){for(var t,n,o,l,c,u,d,p={},m=-1;++m<e.length;){for(;m in p;)m=p[m];if(t=e[m],m&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[m-1][1].type&&((o=0)<(u=t[1]._tokenizer.events).length&&"lineEndingBlank"===u[o][1].type&&(o+=2),o<u.length&&"content"===u[o][1].type))for(;++o<u.length&&"content"!==u[o][1].type;)"chunkText"===u[o][1].type&&(u[o][1].isInFirstContentOfListItem=!0,o++);if("enter"===t[0])t[1].contentType&&(a(p,s(e,m)),m=p[m],d=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(o=m,n=void 0;o--&&("lineEnding"===(l=e[o])[1].type||"lineEndingBlank"===l[1].type);)"enter"===l[0]&&(n&&(e[n][1].type="lineEndingBlank"),l[1].type="lineEnding",n=o);n&&(t[1].end=r(e[n][1].start),(c=e.slice(n,m)).unshift(t),i(e,n,m-n+1,c))}}return!d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(146),i=n(135),r=l("text"),s=l("string"),o={resolveAll:c()};function l(e){return{tokenize:function(t){var n=this,a=this.parser.constructs[e],i=t.attempt(a,r,s);return r;function r(e){return l(e)?i(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),o)}function l(e){var t=a[e],i=-1;if(null===e)return!0;if(t)for(;++i<t.length;)if(!t[i].previous||t[i].previous.call(n,n.previous))return!0}},resolveAll:c("text"===e?u:void 0)}}function c(e){return function(t,n){for(var a,i=-1;++i<=t.length;)void 0===a?t[i]&&"data"===t[i][1].type&&(a=i,i++):t[i]&&"data"===t[i][1].type||(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(t,n):t}}function u(e,t){for(var n,r,s,o,l,c,u,d,p=-1;++p<=e.length;)if((p===e.length||"lineEnding"===e[p][1].type)&&"data"===e[p-1][1].type){for(r=e[p-1][1],o=(n=t.sliceStream(r)).length,l=-1,c=0,u=void 0;o--;)if("string"==typeof(s=n[o])){for(l=s.length;32===s.charCodeAt(l-1);)c++,l--;if(l)break;l=-1}else if(-2===s)u=!0,c++;else if(-1!==s){o++;break}c&&(d={type:p===e.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-c,offset:r.end.offset-c,_index:r.start._index+o,_bufferIndex:o?l:r.start._bufferIndex+l},end:i(r.end)},r.end=i(d.start),r.start.offset===r.end.offset?a(r,d):(e.splice(p,0,["enter",d,t],["exit",d,t]),p+=2)),p++}return e}t.resolver=o,t.string=s,t.text=r},function(e,t,n){"use strict";var a=n(232),i=n(127),r=n(180);function s(e,t){var n,i,s,l;for(n in t)for(l in i=a.call(e,n)?e[n]:e[n]={},s=t[n])i[l]=o(r(s[l]),a.call(i,l)?i[l]:[])}function o(e,t){for(var n=-1,a=[];++n<e.length;)("after"===e[n].add?t:a).push(e[n]);return i(t,0,0,a),t}e.exports=function(e){for(var t={},n=-1;++n<e.length;)s(t,e[n]);return t}},function(e,t,n){"use strict";var a=n(128),i=n(182),r=n(183);e.exports=function(e){return null===e||a(e)||r(e)?1:i(e)?2:void 0}},function(e,t,n){e.exports=n(36)(3428)},function(e,t,n){"use strict";var a=n(133)(/\d/);e.exports=a},function(e,t,n){"use strict";var a=n(184),i=n(128),r=n(111);e.exports=function(e,t,n,s,o,l,c,u,d){var p=d||1/0,m=0;return function(t){return 60===t?(e.enter(s),e.enter(o),e.enter(l),e.consume(t),e.exit(l),h):a(t)||41===t?n(t):(e.enter(s),e.enter(c),e.enter(u),e.enter("chunkString",{contentType:"string"}),E(t))};function h(n){return 62===n?(e.enter(l),e.consume(n),e.exit(l),e.exit(o),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),f(n))}function f(t){return 62===t?(e.exit("chunkString"),e.exit(u),h(t)):null===t||60===t||r(t)?n(t):(e.consume(t),92===t?g:f)}function g(t){return 60===t||62===t||92===t?(e.consume(t),f):f(t)}function E(r){return 40===r?++m>p?n(r):(e.consume(r),E):41===r?m--?(e.consume(r),E):(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(s),t(r)):null===r||i(r)?m?n(r):(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(s),t(r)):a(r)?n(r):(e.consume(r),92===r?y:E)}function y(t){return 40===t||41===t||92===t?(e.consume(t),E):E(t)}}},function(e,t,n){"use strict";var a=n(111),i=n(126);e.exports=function(e,t,n,r,s,o){var l,c=this,u=0;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),e.enter(o),d};function d(i){return null===i||91===i||93===i&&!l||94===i&&!u&&"_hiddenFootnoteSupport"in c.parser.constructs||u>999?n(i):93===i?(e.exit(o),e.enter(s),e.consume(i),e.exit(s),e.exit(r),t):a(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),p(i))}function p(t){return null===t||91===t||93===t||a(t)||u++>999?(e.exit("chunkString"),d(t)):(e.consume(t),l=l||!i(t),92===t?m:p)}function m(t){return 91===t||92===t||93===t?(e.consume(t),u++,p):p(t)}}},function(e,t,n){"use strict";var a=n(111),i=n(126),r=n(112);e.exports=function(e,t){var n;return function s(o){return a(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,s):i(o)?r(e,s,n?"linePrefix":"lineSuffix")(o):t(o)}}},function(e,t,n){"use strict";var a=n(111),i=n(112);e.exports=function(e,t,n,r,s,o){var l;return function(t){return e.enter(r),e.enter(s),e.consume(t),e.exit(s),l=40===t?41:t,c};function c(n){return n===l?(e.enter(s),e.consume(n),e.exit(s),e.exit(r),t):(e.enter(o),u(n))}function u(t){return t===l?(e.exit(o),c(l)):null===t?n(t):a(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return t===l||null===t||a(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?p:d)}function p(t){return t===l||92===t?(e.consume(t),d):d(t)}}},function(e,t,n){"use strict";var a=n(111),i=n(126),r=n(112),s={name:"thematicBreak",tokenize:function(e,t,n){var s,o=0;return function(t){return e.enter("thematicBreak"),s=t,l(t)};function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):i(u)?r(e,l,"whitespace")(u):o<3||null!==u&&!a(u)?n(u):(e.exit("thematicBreak"),t(u))}function c(t){return t===s?(e.consume(t),o++,c):(e.exit("thematicBreakSequence"),l(t))}}};e.exports=s},,function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var a=n(6),i=n(10),r=n(1),s=n.n(r),o=n(14);const l=e=>{var t,n,a,i;return e&&Array.isArray(null===(t=e.elasticsearch)||void 0===t?void 0:t.transform)&&(null===(n=e.elasticsearch)||void 0===n||null===(a=n.transform)||void 0===a?void 0:a.length)>0?Object(o.uniqBy)(null===(i=e.elasticsearch)||void 0===i?void 0:i.transform,"file").length:0},c=({count:e})=>s.a.createElement(a.EuiCallOut,{color:"primary",iconType:"iInCircle"},s.a.createElement(i.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.transformInstallWithCurrentUserPermissionCallout",defaultMessage:"This package has {count, plural, one {one transform asset} other {# transform assets}} which will be created and started with the same roles as the user installing the package.",values:{count:e}}))},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return E})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return A}));var a=n(18),i=n.n(a),r=n(1),s=n.n(r),o=n(6),l=n(4),c=n(10),u=n(15),d=n(131),p=n(54),m=n.n(p);const h=({selectedFleetServerHost:e,setFleetServerHost:t,fleetServerHosts:n})=>{const a=Object(p.useTheme)(),i=Object(r.useMemo)((()=>[...n.map((e=>({inputDisplay:`${e.name} (${e.host_urls[0]})`,value:e.id}))),{icon:s.a.createElement(o.EuiIcon,{type:"plus",size:"m",color:"primary"}),inputDisplay:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostBtn",defaultMessage:"Add new Fleet Server Hosts"}),dropdownDisplay:s.a.createElement(o.EuiText,{size:"relative",color:a.eui.euiColorPrimary},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostBtn",defaultMessage:"Add new Fleet Server Hosts"})),"data-test-subj":"fleetServerSetup.addNewHostBtn",value:"@@##ADD_FLEET_SERVER_HOST##@@"}]),[n,a.eui.euiColorPrimary]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"fleetServerSetup.fleetServerHostsSelect",prepend:s.a.createElement(o.EuiText,{size:"relative",color:""},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetServerHostsLabel",defaultMessage:"Fleet Server Hosts"})),onChange:e=>t(n.find((t=>t.id===e))),valueOfSelected:null==e?void 0:e.id,options:i}),s.a.createElement(o.EuiSpacer,{size:"m"}))},f=({fleetServerHostForm:e,disabled:t,onClose:n})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.addFleetServerHostStepTitle",{defaultMessage:"Add your Fleet Server host"}),status:t?"disabled":void 0,children:t?null:s.a.createElement(g,{fleetServerHostForm:e,onClose:n})}),g=({fleetServerHostForm:e,onClose:t})=>{const{setFleetServerHost:n,fleetServerHost:a,saveFleetServerHost:p,fleetServerHosts:m,error:f,validate:g,inputs:E}=e,[y,x]=Object(r.useState)(!1),[v,k]=Object(r.useState)(),{notifications:b}=Object(u.lc)(),{getHref:S}=Object(u.cc)(),F=Object(r.useCallback)((async()=>{try{k(void 0),x(!0);const e={name:E.nameInput.value,host_urls:E.hostUrlsInput.value,is_default:!0,id:"fleet-server-host",is_preconfigured:!1};g()&&(n(await p(e)),k(e))}catch(e){b.toasts.addError(e,{title:l.i18n.translate("xpack.fleet.fleetServerSetup.errorAddingFleetServerHostTitle",{defaultMessage:"Error adding Fleet Server host"})})}finally{x(!1)}}),[E.nameInput.value,E.hostUrlsInput.value,n,g,p,b.toasts]);return s.a.createElement(o.EuiForm,{onSubmit:F},s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostStepDescription",defaultMessage:"First, set the public IP or host name and port that agents will use to reach Fleet Server. It uses port {port} by default {toolTip}. We'll then generate a policy for you automatically. ",values:{port:s.a.createElement(o.EuiCode,null,"8220"),toolTip:s.a.createElement(o.EuiIconTip,{iconProps:{className:"eui-alignTop"},content:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructionsPortTooltips",defaultMessage:"This can only be set during Fleet Server installation."}),position:"right"})}})),s.a.createElement(o.EuiSpacer,{size:"m"}),a?s.a.createElement(h,{setFleetServerHost:n,selectedFleetServerHost:a,fleetServerHosts:m}):null,a?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFormRow,i()({fullWidth:!0,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.nameInputLabel",defaultMessage:"Name"})},E.nameInput.formRowProps),s.a.createElement(o.EuiFieldText,i()({"data-test-subj":"fleetServerSetup.nameInput",fullWidth:!0,placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.nameInputPlaceholder",{defaultMessage:"Specify name"})},E.nameInput.props))),s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.hostUrlLabel",defaultMessage:"URL"})},s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,i()({"data-test-subj":"fleetServerSetup.multiRowInput"},E.hostUrlsInput.props,{placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.fleetServerHostsInputPlaceholder",{defaultMessage:"Specify host URL"}),isUrl:!0})),f&&s.a.createElement(o.EuiFormErrorText,null,f))),m.length>0?s.a.createElement(o.EuiFormRow,i()({fullWidth:!0},E.isDefaultInput.formRowProps),s.a.createElement(o.EuiSwitch,i()({"data-test-subj":"fleetServerHostsFlyout.isDefaultSwitch"},E.isDefaultInput.props,{disabled:!1,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.defaultOutputSwitchLabel",defaultMessage:"Make this Fleet server the default one."})}))):null,s.a.createElement(o.EuiButton,{isLoading:y,onClick:F,"data-test-subj":"fleetServerAddHostBtn"},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostButton",defaultMessage:"Add host"}))),v&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiCallOut,{iconType:"check",size:"s",color:"success",title:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessTitle",defaultMessage:"Added Fleet Server host"})},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessText",defaultMessage:"Added {host}. You can edit your Fleet Server hosts in {fleetSettingsLink}.",values:{host:v.host_urls[0],fleetSettingsLink:s.a.createElement(o.EuiButtonEmpty,{href:S("settings"),onClick:t,flush:"left"},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetSettingsLink",defaultMessage:"Fleet Settings"}))}}))))};function E({disabled:e,hasRecentlyEnrolledFleetServers:t}){return{title:t?l.i18n.translate("xpack.fleet.fleetServerFlyout.confirmConnectionSuccessTitle",{defaultMessage:"Fleet Server connected"}):l.i18n.translate("xpack.fleet.fleetServerFlyout.confirmConnectionTitle",{defaultMessage:"Confirm connection"}),status:t?"complete":"disabled",children:!e&&s.a.createElement(y,{hasRecentlyEnrolledFleetServers:t})}}const y=({hasRecentlyEnrolledFleetServers:e})=>{const t=Object(u.Hb)(),n=Object(u.Gb)();return e?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.connectionSuccessful",defaultMessage:"You can now continue enrolling agents with Fleet."})),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiButton,{color:"primary",onClick:()=>{n.forceDisplayInstructions=!1,t.closeFleetServerFlyout(),t.openEnrollmentFlyout()},"data-test-subj":"fleetServerFlyoutContinueEnrollingButton"},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.continueEnrollingButton",defaultMessage:"Continue enrolling Elastic Agent"}))):s.a.createElement(o.EuiLoadingSpinner,{size:"m"})};var x=n(162);m()(o.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1uyozzx-0"})(["height:100%;margin:0 auto;max-width:800px;"]);const v=({disabled:e=!1,serviceToken:t,generateServiceToken:n,isLoadingServiceToken:a})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.stepGenerateServiceTokenTitle",{defaultMessage:"Generate a service token"}),status:e?"disabled":void 0,children:!e&&s.a.createElement(x.a,{serviceToken:t,generateServiceToken:n,isLoadingServiceToken:a})});function k(e){return{title:l.i18n.translate("xpack.fleet.fleetServerFlyout.getStartedTitle",{defaultMessage:"Get started with Fleet Server"}),status:"success"===e.status?"complete":"current",children:s.a.createElement(b,e)}}const b=({fleetServerHosts:e,fleetServerHost:t,setFleetServerHost:n,status:a,error:r,inputs:p,submit:m,onClose:f})=>{const{getHref:g}=Object(u.cc)();return"success"===a?s.a.createElement(o.EuiCallOut,{color:"success",iconType:"check",title:l.i18n.translate("xpack.fleet.fleetServerFlyout.generateFleetServerPolicySuccessTitle",{defaultMessage:"Fleet Server policy created."})},s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.generateFleetServerPolicySuccessInstructions",defaultMessage:"Fleet server policy and service token have been generated. Host configured at {hostUrl}. You can edit your Fleet Server hosts in {fleetSettingsLink}.",values:{hostUrl:s.a.createElement(o.EuiCode,null,null==t?void 0:t.host_urls[0]),fleetSettingsLink:s.a.createElement(o.EuiButtonEmpty,{href:g("settings"),onClick:f,flush:"left"},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetSettingsLink",defaultMessage:"Fleet Settings"}))}}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructions",defaultMessage:"First, set the public IP or host name and port that agents will use to reach Fleet Server. It uses port {port} by default {toolTip}. We'll then generate a policy for you automatically.",values:{port:s.a.createElement(o.EuiCode,null,"8220"),toolTip:s.a.createElement(o.EuiIconTip,{iconProps:{className:"eui-alignTop"},content:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructionsPortTooltips",defaultMessage:"This can only be set during Fleet Server installation."}),position:"right"})}})),s.a.createElement(o.EuiSpacer,{size:"m"}),t?s.a.createElement(h,{setFleetServerHost:n,selectedFleetServerHost:t,fleetServerHosts:e}):null,s.a.createElement(o.EuiForm,{onSubmit:m},t?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFormRow,i()({fullWidth:!0,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.nameInputLabel",defaultMessage:"Name"})},p.nameInput.formRowProps),s.a.createElement(o.EuiFieldText,i()({"data-test-subj":"fleetServerSetup.nameInput",fullWidth:!0,placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.nameInputPlaceholder",{defaultMessage:"Specify name"})},p.nameInput.props))),s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.hostUrlLabel",defaultMessage:"URL"})},s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,i()({"data-test-subj":"fleetServerSetup.multiRowInput"},p.hostUrlsInput.props,{placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.fleetServerHostsInputPlaceholder",{defaultMessage:"Specify host URL"}),isUrl:!0})),"error"===a&&s.a.createElement(o.EuiFormErrorText,null,r))),e.length>0?s.a.createElement(o.EuiFormRow,i()({fullWidth:!0},p.isDefaultInput.formRowProps),s.a.createElement(o.EuiSwitch,i()({"data-test-subj":"fleetServerHostsFlyout.isDefaultSwitch"},p.isDefaultInput.props,{disabled:!1,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.defaultOutputSwitchLabel",defaultMessage:"Make this Fleet server the default one."})}))):null,s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement(o.EuiButton,{isLoading:"loading"===a,onClick:m,"data-test-subj":"generateFleetServerPolicyButton"},e.length>0?s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.continueFleetServerPolicyButton",defaultMessage:"Continue"}):s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.generateFleetServerPolicyButton",defaultMessage:"Generate Fleet Server policy"}))))};var S=n(105);function F({isFleetServerReady:e,disabled:t,serviceToken:n,fleetServerHost:a,fleetServerPolicyId:i,deploymentMode:r}){return{title:l.i18n.translate("xpack.fleet.fleetServerFlyout.installFleetServerTitle",{defaultMessage:"Install Fleet Server to a centralized host"}),status:t?"disabled":e?"complete":"incomplete",children:!t&&s.a.createElement(C,{serviceToken:n,fleetServerHost:a,fleetServerPolicyId:i,deploymentMode:r})}}const C=({serviceToken:e,fleetServerHost:t,fleetServerPolicyId:n,deploymentMode:a})=>{const{docLinks:i}=Object(u.lc)(),r=Object(u.ac)(),{output:l}=Object(u.Db)(),d="elasticsearch"===(null==l?void 0:l.type)?l:void 0,p=["linux","mac","windows","deb","rpm"].reduce(((i,s)=>{var o,l,c;return i[s]=function(e,t,n,a,i,r,s,o){const l="windows"===e?"`\n":"\\\n",c=function(e,t){const n="https://artifacts.elastic.co/downloads/beats/elastic-agent";return{linux:{downloadCommand:[`curl -L -O ${n}/elastic-agent-${t}-linux-x86_64.tar.gz`,`tar xzvf elastic-agent-${t}-linux-x86_64.tar.gz`,`cd elastic-agent-${t}-linux-x86_64`].join("\n")},mac:{downloadCommand:[`curl -L -O ${n}/elastic-agent-${t}-darwin-x86_64.tar.gz`,`tar xzvf elastic-agent-${t}-darwin-x86_64.tar.gz`,`cd elastic-agent-${t}-darwin-x86_64`].join("\n")},windows:{downloadCommand:["$ProgressPreference = 'SilentlyContinue'",`Invoke-WebRequest -Uri https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${t}-windows-x86_64.zip -OutFile elastic-agent-${t}-windows-x86_64.zip`,`Expand-Archive .\\elastic-agent-${t}-windows-x86_64.zip`,`cd elastic-agent-${t}-windows-x86_64`].join("\n")},deb:{downloadCommand:[`curl -L -O ${n}/elastic-agent-${t}-amd64.deb`,`sudo dpkg -i elastic-agent-${t}-amd64.deb`].join("\n")},rpm:{downloadCommand:[`curl -L -O ${n}/elastic-agent-${t}-x86_64.rpm`,`sudo rpm -vi elastic-agent-${t}-x86_64.rpm`].join("\n")},kubernetes:{downloadCommand:""}}[e]}(e,null!=o?o:""),u=[];r&&i&&u.push(["url",i]),u.push(["fleet-server-es",t]),u.push(["fleet-server-service-token",n]),a&&u.push(["fleet-server-policy",a]),s&&u.push(["fleet-server-es-ca-trusted-fingerprint",s]),r&&(u.push(["certificate-authorities","<PATH_TO_CA>"]),s||u.push(["fleet-server-es-ca","<PATH_TO_ES_CERT>"]),u.push(["fleet-server-cert","<PATH_TO_FLEET_SERVER_CERT>"]),u.push(["fleet-server-cert-key","<PATH_TO_FLEET_SERVER_CERT_KEY>"])),u.push(["fleet-server-port","8220"]);const d=u.reduce(((e,[t,n])=>""===e&&"url"===t?`--${t}=${n}`:e+` ${l}  --${t}${n?`=${n}`:""}`),"").trim();return{linux:`${c.downloadCommand}\nsudo ./elastic-agent install ${d}`,mac:`${c.downloadCommand}\nsudo ./elastic-agent install ${d}`,windows:`${c.downloadCommand}\n.\\elastic-agent.exe install ${d}`,deb:`${c.downloadCommand}\nsudo elastic-agent enroll ${d}\nsudo systemctl enable elastic-agent\nsudo systemctl start elastic-agent`,rpm:`${c.downloadCommand}\nsudo elastic-agent enroll ${d}\nsudo systemctl enable elastic-agent\nsudo systemctl start elastic-agent`,kubernetes:"",cloudFormation:"",googleCloudShell:""}[e]}(s,null!==(o=null==d||null===(l=d.hosts)||void 0===l?void 0:l[0])&&void 0!==o?o:"<ELASTICSEARCH_HOST>",null!=e?e:"",n,t,"production"===a,null!==(c=null==d?void 0:d.ca_trusted_fingerprint)&&void 0!==c?c:void 0,r),i}),{});return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.installFleetServerInstructions",defaultMessage:"Install Fleet Server agent on a centralized host so that other hosts you wish to monitor can connect to it. In production, we recommend using one or more dedicated hosts. For additional guidance, see our {installationLink}.",values:{installationLink:s.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:i.links.fleet.installElasticAgent},s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage.link",defaultMessage:"installation docs"}))}})),s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(S.v,{linuxCommand:p.linux,macCommand:p.mac,windowsCommand:p.windows,linuxDebCommand:p.deb,linuxRpmCommand:p.rpm,k8sCommand:p.kubernetes,hasK8sIntegration:!1,hasK8sIntegrationMultiPage:!1,hasFleetServer:!0}))},D=({policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:a})=>({title:0!==n.length||e?l.i18n.translate("xpack.fleet.fleetServerSetup.stepSelectAgentPolicyTitle",{defaultMessage:"Select a policy for Fleet Server"}):l.i18n.translate("xpack.fleet.fleetServerSetup.stepCreateAgentPolicyTitle",{defaultMessage:"Create a policy for Fleet Server"}),status:e?"complete":void 0,children:s.a.createElement(w,{policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:a})}),w=({policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:a})=>(Object(r.useEffect)((()=>{1!==n.length||e||t(n[0].id)}),[n,e,t]),s.a.createElement(S.x,{agentPolicies:n,withKeySelection:!1,selectedPolicyId:e,setSelectedPolicyId:e=>{t(e)},refreshAgentPolicies:a,excludeFleetServer:!1,isFleetServerPolicy:!0})),A=({deploymentMode:e,setDeploymentMode:t,disabled:n})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.stepDeploymentModeTitle",{defaultMessage:"Choose a deployment mode for security"}),status:n?"disabled":void 0,children:n?null:s.a.createElement(M,{deploymentMode:e,setDeploymentMode:t})}),M=({deploymentMode:e,setDeploymentMode:t})=>{const n=Object(r.useCallback)((e=>{const n=e.split("_")[0];"production"!==n&&"quickstart"!==n||t(n)}),[t]),a=Object(r.useMemo)((()=>Date.now()),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.stepDeploymentModeDescriptionText",defaultMessage:"Fleet uses Transport Layer Security (TLS) to encrypt traffic between Elastic Agents and other components in the Elastic Stack. Choose a deployment mode to determine how you wish to handle certificates. Your selection will affect the Fleet Server setup command shown in a later step."})),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiRadioGroup,{options:[{id:`quickstart_${a}`,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeQuickStartOption",defaultMessage:"{quickStart} – Fleet Server will generate a self-signed certificate. Subsequent agents must be enrolled using the --insecure flag. Not recommended for production use cases.",values:{quickStart:s.a.createElement("strong",null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.quickStartText",defaultMessage:"Quick start"}))}})},{id:`production_${a}`,label:s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeProductionOption",defaultMessage:"{production} – Provide your own certificates. This option will require agents to specify a cert key when enrolling with Fleet",values:{production:s.a.createElement("strong",null,s.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.productionText",defaultMessage:"Production"}))}})}],idSelected:`${e}_${a}`,onChange:n,name:`radio group ${a}`}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return d}));var a=n(1),i=n(63),r=n(15),s=n(196);const o=()=>{var e;const[t,n]=Object(a.useState)(),[i,o]=Object(a.useState)(!1),l=null!==(e=null==t?void 0:t.is_preconfigured)&&void 0!==e&&e,c=Object(r.Wb)("",s.c,l),u=Object(r.mc)(!1,l||(null==t?void 0:t.is_default)),d=Object(r.yb)("hostUrls",[],s.b,l),p=Object(a.useMemo)((()=>({nameInput:c,isDefaultInput:u,hostUrlsInput:d})),[c,u,d]),m=Object(a.useCallback)((()=>Object(r.qc)(p)),[p]),{data:h,resendRequest:f}=Object(r.Nb)(),g=Object(a.useMemo)((()=>{var e;return null!==(e=null==h?void 0:h.items)&&void 0!==e?e:[]}),[null==h?void 0:h.items]),E=u.setValue;Object(a.useEffect)((()=>{const e=g.find((e=>!0===e.is_default));e?(n(e),E(!1)):(n(null),E(!0))}),[g,E]);const y=Object(a.useCallback)((async e=>{o(!1);const t=await Object(r.Z)({name:null==e?void 0:e.name,host_urls:null==e?void 0:e.host_urls,is_default:null==e?void 0:e.is_default});if(t.error)throw t.error;if(!t.data)throw new Error("No data");return await f(),o(!0),n(t.data.item),t.data.item}),[f]);return{fleetServerHosts:g,saveFleetServerHost:y,fleetServerHost:t,isFleetServerHostSubmitted:i,setFleetServerHost:n,validate:m,inputs:p}};var l=n(55);const c=e=>{const[t,n]=Object(a.useState)(e),{isLoading:i,isInitialRequest:s,data:o,resendRequest:c}=Object(r.Ib)({full:!0}),u=Object(a.useMemo)((()=>{var e;return o?null===(e=o.items)||void 0===e?void 0:e.filter((e=>Object(l.t)(e))):[]}),[o]);return Object(a.useEffect)((()=>{1!==u.length||t||n(u[0].id)}),[u,t]),{isSelectFleetServerPolicyLoading:i&&s,fleetServerPolicyId:t,setFleetServerPolicyId:n,eligibleFleetServerPolicies:u,refreshEligibleFleetServerPolicies:c}};var u=n(4);const d=()=>{var e;const t=Object(r.Gb)(),{notifications:n}=Object(r.lc)(),i=t.isReady&&!(null!==(e=t.missingRequirements)&&void 0!==e&&e.includes("fleet_server"));return Object(a.useEffect)((()=>{let e=null;return i||(e=setInterval((async()=>{try{i?e&&clearInterval(e):(t.setForceDisplayInstructions(!0),t.refresh())}catch(e){n.toasts.addError(e,{title:u.i18n.translate("xpack.fleet.fleetServerSetup.errorRefreshingFleetServerStatus",{defaultMessage:"Error refreshing Fleet Server status"})})}}),1e4)),()=>{e&&clearInterval(e)}}),[n.toasts,i,t]),{isFleetServerReady:i}},p=e=>{const{isSelectFleetServerPolicyLoading:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:r,fleetServerPolicyId:s,setFleetServerPolicyId:l}=c(e),{isFleetServerReady:u}=d(),{serviceToken:p,isLoadingServiceToken:m,generateServiceToken:h}=Object(i.a)(),f=o(),[g,E]=Object(a.useState)("quickstart");return{isSelectFleetServerPolicyLoading:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:r,fleetServerPolicyId:s,setFleetServerPolicyId:l,isFleetServerReady:u,serviceToken:p,isLoadingServiceToken:m,generateServiceToken:h,fleetServerHostForm:f,deploymentMode:g,setDeploymentMode:E}},m={id:"fleet-server-policy",name:"Fleet Server Policy",description:"Fleet Server policy generated by Kibana",namespace:"default",has_fleet_server:!0,monitoring_enabled:["logs","metrics"],is_default_fleet_server:!0},h=()=>{const[e,t]=Object(a.useState)("initial"),[n,s]=Object(a.useState)(),{fleetServerHosts:l,fleetServerHost:d,isFleetServerHostSubmitted:p,saveFleetServerHost:h,error:f,setFleetServerHost:g,validate:E,inputs:y}=o();Object(a.useEffect)((()=>{t("error"),s(f)}),[f]);const{notifications:x}=Object(r.lc)(),{fleetServerPolicyId:v,setFleetServerPolicyId:k}=c(),{serviceToken:b,generateServiceToken:S}=Object(i.a)();return{status:e,error:n,submit:Object(a.useCallback)((async()=>{try{if(!d&&E()||d){var e;t("loading");const i={name:y.nameInput.value,host_urls:y.hostUrlsInput.value,is_default:y.isDefaultInput.value,is_preconfigured:!1};if(!d){const e=await h(i);g(e)}await S();const s=await Object(r.C)(m.id);if(null!==(e=s.data)&&void 0!==e&&e.item){var n;k(null===(n=s.data)||void 0===n?void 0:n.item.id)}else{var a;const e=await Object(r.j)(m,{withSysMonitoring:!0});k(null===(a=e.data)||void 0===a?void 0:a.item.id)}t("success")}}catch(e){x.toasts.addError(e,{title:u.i18n.translate("xpack.fleet.fleetServerSetup.errorAddingFleetServerHostTitle",{defaultMessage:"Error adding Fleet Server host"})}),t("error"),s(e.message)}}),[E,d,y.nameInput.value,y.hostUrlsInput.value,y.isDefaultInput.value,g,h,S,k,x.toasts]),fleetServerPolicyId:v,fleetServerHosts:l,fleetServerHost:d,setFleetServerHost:g,isFleetServerHostSubmitted:p,serviceToken:b,inputs:y}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(1),i=n.n(a),r=n(10),s=n(54),o=n.n(s),l=n(6),c=n(119),u=n(105);const d=o()(l.EuiDescriptionListDescription).withConfig({displayName:"AgentPolicyName",componentId:"sc-4bb6xn-0"})(["margin-left:auto;max-width:250px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;"]),p=Object(a.memo)((({from:e,cancelUrl:t,onCancel:n,agentPolicy:s,packageInfo:o,integrationInfo:p,children:m,"data-test-subj":h,tabs:f=[]})=>{const g=Object(a.useMemo)((()=>["package","policy"].includes(e)),[e]),E=Object(a.useMemo)((()=>["edit","package-edit"].includes(e)),[e]),y=Object(a.useMemo)((()=>["upgrade-from-fleet-policy-list","upgrade-from-integrations-policy-list","upgrade-from-extension"].includes(e)),[e]),x=Object(a.useMemo)((()=>{if((g||E||y)&&o){let e=i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageTitleWithPackageName",defaultMessage:"Add {packageName} integration",values:{packageName:(null==p?void 0:p.title)||o.title}});return E?e=i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.editPageTitleWithPackageName",defaultMessage:"Edit {packageName} integration",values:{packageName:o.title}}):y&&(e=i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.upgradePageTitleWithPackageName",defaultMessage:"Upgrade {packageName} integration",values:{packageName:o.title}})),i.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(l.EuiFlexItem,{grow:!1},i.a.createElement(u.t,{packageName:(null==o?void 0:o.name)||"",integrationName:null==p?void 0:p.name,version:(null==o?void 0:o.version)||"",icons:(null==p?void 0:p.icons)||(null==o?void 0:o.icons),size:"xl"})),i.a.createElement(l.EuiFlexItem,null,i.a.createElement(l.EuiText,null,i.a.createElement("h1",{"data-test-subj":`${h}_pageTitle`},e))))}return E?i.a.createElement(l.EuiText,null,i.a.createElement("h1",{"data-test-subj":`${h}_pageTitle`},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.pageTitle",defaultMessage:"Edit integration"}))):y?i.a.createElement(l.EuiText,null,i.a.createElement("h1",{"data-test-subj":`${h}_pageTitle`},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.pageTitle",defaultMessage:"Upgrade integration"}))):i.a.createElement(l.EuiText,null,i.a.createElement("h1",null,i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageTitle",defaultMessage:"Add integration"})))}),[h,null==p?void 0:p.icons,null==p?void 0:p.name,null==p?void 0:p.title,o,g,E,y]),v=Object(a.useMemo)((()=>E?i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.editPackagePolicy.pageDescription",defaultMessage:"Modify integration settings and deploy changes to the selected agent policy."}):g?i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageDescriptionfromPolicy",defaultMessage:"Configure an integration for the selected agent policy."}):y?i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.upgradePackagePolicy.pageDescriptionFromUpgrade",defaultMessage:"Upgrade this integration and deploy changes to the selected agent policy"}):i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.pageDescriptionfromPackage",defaultMessage:"Follow these instructions to add this integration to an agent policy."})),[g,E,y]),k=i.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"s",alignItems:"flexStart"},i.a.createElement(l.EuiFlexItem,null,i.a.createElement(l.EuiButtonEmpty,{size:"xs",iconType:"arrowLeft",flush:"left",href:t,onClick:n,"data-test-subj":`${h}_cancelBackLink`},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.cancelLinkText",defaultMessage:"Cancel"}))),i.a.createElement(l.EuiFlexItem,null,x),i.a.createElement(l.EuiFlexItem,null,i.a.createElement(l.EuiSpacer,{size:"s"}),i.a.createElement(l.EuiText,{color:"subdued",size:"s"},v))),b=s&&(g||E)?i.a.createElement(l.EuiDescriptionList,{className:"eui-textRight",textStyle:"reverse"},i.a.createElement(l.EuiDescriptionListTitle,null,i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.agentPolicyNameLabel",defaultMessage:"Agent policy"})),i.a.createElement(d,{className:"eui-textBreakWord",title:(null==s?void 0:s.name)||"-"},(null==s?void 0:s.name)||"-")):void 0;return i.a.createElement(c.c,{restrictHeaderWidth:770,restrictWidth:770,leftColumn:k,rightColumn:b,rightColumnGrow:!1,"data-test-subj":h,tabs:f.map((({title:e,...t})=>({name:e,...t})))},m)}));var m=n(123),h=n(11);const f=({onConfirm:e,onCancel:t,packageInfo:n})=>{const a=Object(h.zc)(n.name);return i.a.createElement(l.EuiModal,{"data-test-subj":"postInstallAddAgentModal",onClose:t},i.a.createElement(l.EuiModalHeader,null,i.a.createElement(l.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModal",defaultMessage:"{packageName} integration added",values:{packageName:(s=n.title,s.charAt(0).toUpperCase()+s.substr(1))}}))),i.a.createElement(l.EuiModalBody,null,i.a.createElement(l.EuiText,{"data-test-subj":"confirmModalBodyText"},i.a.createElement("p",null,i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalDescription",defaultMessage:"To complete this integration, add {elasticAgent} to your hosts to collect data and send it to Elastic Stack.",values:{elasticAgent:i.a.createElement("strong",null,"Elastic Agent")}})))),i.a.createElement(l.EuiModalFooter,null,i.a.createElement(l.EuiButtonEmpty,{"data-test-subj":"confirmModalCancelButton",onClick:t},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalCancelButtonLabel",defaultMessage:"Add Elastic Agent later"})),i.a.createElement(m.z,{packageKey:n.name,tourType:"agentModalButton",isTourVisible:a,tourPosition:"downCenter",tourOffset:-20},i.a.createElement(l.EuiButton,{"data-test-subj":"confirmModalConfirmButton",onClick:e,fill:!0,color:"primary"},i.a.createElement(r.FormattedMessage,{id:"xpack.fleet.agentPolicy.postInstallAddAgentModalConfirmButtonLabel",defaultMessage:"Add Elastic Agent to your hosts"})))));var s}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(106),i=n(124);const r=()=>{var e;const{data:t,isLoading:n,isFetched:r}=Object(a.r)({full:!0}),s=((null==t?void 0:t.items)||[]).filter((e=>Object(i.h)(e))).map((e=>`policy_id:${e.id}`)).join(" or "),o='not (_exists_:"unenrolled_at")'+(s.length?` and not (${s})`:""),{data:l,isLoading:c}=Object(a.s)({page:1,perPage:1,showInactive:!0,kuery:o},{enabled:r});return{isLoading:n||c,isFirstTimeAgentUser:0===(null==l||null===(e=l.data)||void 0===e?void 0:e.total)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(49),i=n(193),r=a.__importDefault(n(256));t.default=function(e,t){r.default(e,t,i.isDeepEqual)}},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,r;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=a;0!=i--;){var s=r[i];if(!("_owner"===s&&t.$$typeof||e(t[s],n[s])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=function(e,t,n){var i=a.useRef(void 0);i.current&&n(t,i.current)||(i.current=t),a.useEffect(e,i.current)}},function(e,t,n){"use strict";var a=n(258),i=n(277);function r(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=n(113),e.exports.Schema=n(138),e.exports.FAILSAFE_SCHEMA=n(165),e.exports.JSON_SCHEMA=n(200),e.exports.CORE_SCHEMA=n(199),e.exports.DEFAULT_SAFE_SCHEMA=n(142),e.exports.DEFAULT_FULL_SCHEMA=n(151),e.exports.load=a.load,e.exports.loadAll=a.loadAll,e.exports.safeLoad=a.safeLoad,e.exports.safeLoadAll=a.safeLoadAll,e.exports.dump=i.dump,e.exports.safeDump=i.safeDump,e.exports.YAMLException=n(141),e.exports.MINIMAL_SCHEMA=n(165),e.exports.SAFE_SCHEMA=n(142),e.exports.DEFAULT_SCHEMA=n(151),e.exports.scan=r("scan"),e.exports.parse=r("parse"),e.exports.compose=r("compose"),e.exports.addConstructor=r("addConstructor")},function(e,t,n){"use strict";var a=n(137),i=n(141),r=n(259),s=n(142),o=n(151),l=Object.prototype.hasOwnProperty,c=1,u=2,d=3,p=4,m=1,h=2,f=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,E=/[\x85\u2028\u2029]/,y=/[,\[\]\{\}]/,x=/^(?:!|!!|![a-z\-]+!)$/i,v=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function k(e){return Object.prototype.toString.call(e)}function b(e){return 10===e||13===e}function S(e){return 9===e||32===e}function F(e){return 9===e||32===e||10===e||13===e}function C(e){return 44===e||91===e||93===e||123===e||125===e}function D(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function w(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function A(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var M=new Array(256),T=new Array(256),P=0;P<256;P++)M[P]=w(P)?1:0,T[P]=w(P);function I(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||o,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function O(e,t){return new i(t,new r(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function j(e,t){throw O(e,t)}function B(e,t){e.onWarning&&e.onWarning.call(null,O(e,t))}var L={YAML:function(e,t,n){var a,i,r;null!==e.version&&j(e,"duplication of %YAML directive"),1!==n.length&&j(e,"YAML directive accepts exactly one argument"),null===(a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&j(e,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),r=parseInt(a[2],10),1!==i&&j(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=r<2,1!==r&&2!==r&&B(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var a,i;2!==n.length&&j(e,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],x.test(a)||j(e,"ill-formed tag handle (first argument) of the TAG directive"),l.call(e.tagMap,a)&&j(e,'there is a previously declared suffix for "'+a+'" tag handle'),v.test(i)||j(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[a]=i}};function _(e,t,n,a){var i,r,s,o;if(t<n){if(o=e.input.slice(t,n),a)for(i=0,r=o.length;i<r;i+=1)9===(s=o.charCodeAt(i))||32<=s&&s<=1114111||j(e,"expected valid JSON character");else g.test(o)&&j(e,"the stream contains non-printable characters");e.result+=o}}function N(e,t,n,i){var r,s,o,c;for(a.isObject(n)||j(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,c=(r=Object.keys(n)).length;o<c;o+=1)s=r[o],l.call(t,s)||(t[s]=n[s],i[s]=!0)}function z(e,t,n,a,i,r,s,o){var c,u;if(Array.isArray(i))for(c=0,u=(i=Array.prototype.slice.call(i)).length;c<u;c+=1)Array.isArray(i[c])&&j(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===k(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===k(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===a)if(Array.isArray(r))for(c=0,u=r.length;c<u;c+=1)N(e,t,r[c],n);else N(e,t,r,n);else e.json||l.call(n,i)||!l.call(t,i)||(e.line=s||e.line,e.position=o||e.position,j(e,"duplicated mapping key")),t[i]=r,delete n[i];return t}function R(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):j(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function U(e,t,n){for(var a=0,i=e.input.charCodeAt(e.position);0!==i;){for(;S(i);)i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!b(i))break;for(R(e),i=e.input.charCodeAt(e.position),a++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==a&&e.lineIndent<n&&B(e,"deficient indentation"),a}function H(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!F(t)))}function K(e,t){1===t?e.result+=" ":t>1&&(e.result+=a.repeat("\n",t-1))}function W(e,t){var n,a,i=e.tag,r=e.anchor,s=[],o=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),a=e.input.charCodeAt(e.position);0!==a&&45===a&&F(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,U(e,!0,-1)&&e.lineIndent<=t)s.push(null),a=e.input.charCodeAt(e.position);else if(n=e.line,J(e,t,d,!1,!0),s.push(e.result),U(e,!0,-1),a=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==a)j(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=i,e.anchor=r,e.kind="sequence",e.result=s,!0)}function $(e){var t,n,a,i,r=!1,s=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&j(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(r=!0,i=e.input.charCodeAt(++e.position)):33===i?(s=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(a=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):j(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!F(i);)33===i&&(s?j(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),x.test(n)||j(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),y.test(a)&&j(e,"tag suffix cannot contain flow indicator characters")}return a&&!v.test(a)&&j(e,"tag name cannot contain such characters: "+a),r?e.tag=a:l.call(e.tagMap,n)?e.tag=e.tagMap[n]+a:"!"===n?e.tag="!"+a:"!!"===n?e.tag="tag:yaml.org,2002:"+a:j(e,'undeclared tag handle "'+n+'"'),!0}function G(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&j(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!F(n)&&!C(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&j(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function J(e,t,n,i,r){var s,o,g,E,y,x,v,k,w=1,P=!1,I=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=g=p===n||d===n,i&&U(e,!0,-1)&&(P=!0,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)),1===w)for(;$(e)||G(e);)U(e,!0,-1)?(P=!0,g=s,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)):g=!1;if(g&&(g=P||r),1!==w&&p!==n||(v=c===n||u===n?t:t+1,k=e.position-e.lineStart,1===w?g&&(W(e,k)||function(e,t,n){var a,i,r,s,o,l=e.tag,c=e.anchor,d={},m={},h=null,f=null,g=null,E=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),o=e.input.charCodeAt(e.position);0!==o;){if(a=e.input.charCodeAt(e.position+1),r=e.line,s=e.position,63!==o&&58!==o||!F(a)){if(!J(e,n,u,!1,!0))break;if(e.line===r){for(o=e.input.charCodeAt(e.position);S(o);)o=e.input.charCodeAt(++e.position);if(58===o)F(o=e.input.charCodeAt(++e.position))||j(e,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(z(e,d,m,h,f,null),h=f=g=null),y=!0,E=!1,i=!1,h=e.tag,f=e.result;else{if(!y)return e.tag=l,e.anchor=c,!0;j(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=l,e.anchor=c,!0;j(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===o?(E&&(z(e,d,m,h,f,null),h=f=g=null),y=!0,E=!0,i=!0):E?(E=!1,i=!0):j(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,o=a;if((e.line===r||e.lineIndent>t)&&(J(e,t,p,!0,i)&&(E?f=e.result:g=e.result),E||(z(e,d,m,h,f,g,r,s),h=f=g=null),U(e,!0,-1),o=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==o)j(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return E&&z(e,d,m,h,f,null),y&&(e.tag=l,e.anchor=c,e.kind="mapping",e.result=d),y}(e,k,v))||function(e,t){var n,a,i,r,s,o,l,u,d,p,m=!0,h=e.tag,f=e.anchor,g={};if(91===(p=e.input.charCodeAt(e.position)))i=93,o=!1,a=[];else{if(123!==p)return!1;i=125,o=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),p=e.input.charCodeAt(++e.position);0!==p;){if(U(e,!0,t),(p=e.input.charCodeAt(e.position))===i)return e.position++,e.tag=h,e.anchor=f,e.kind=o?"mapping":"sequence",e.result=a,!0;m||j(e,"missed comma between flow collection entries"),d=null,r=s=!1,63===p&&F(e.input.charCodeAt(e.position+1))&&(r=s=!0,e.position++,U(e,!0,t)),n=e.line,J(e,t,c,!1,!0),u=e.tag,l=e.result,U(e,!0,t),p=e.input.charCodeAt(e.position),!s&&e.line!==n||58!==p||(r=!0,p=e.input.charCodeAt(++e.position),U(e,!0,t),J(e,t,c,!1,!0),d=e.result),o?z(e,a,g,u,l,d):r?a.push(z(e,null,g,u,l,d)):a.push(l),U(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(m=!0,p=e.input.charCodeAt(++e.position)):m=!1}j(e,"unexpected end of the stream within a flow collection")}(e,v)?I=!0:(o&&function(e,t){var n,i,r,s,o,l=m,c=!1,u=!1,d=t,p=0,g=!1;if(124===(s=e.input.charCodeAt(e.position)))i=!1;else{if(62!==s)return!1;i=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)m===l?l=43===s?f:h:j(e,"repeat of a chomping mode identifier");else{if(!((r=48<=(o=s)&&o<=57?o-48:-1)>=0))break;0===r?j(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?j(e,"repeat of an indentation width identifier"):(d=t+r-1,u=!0)}if(S(s)){do{s=e.input.charCodeAt(++e.position)}while(S(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!b(s)&&0!==s)}for(;0!==s;){for(R(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!u||e.lineIndent<d)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!u&&e.lineIndent>d&&(d=e.lineIndent),b(s))p++;else{if(e.lineIndent<d){l===f?e.result+=a.repeat("\n",c?1+p:p):l===m&&c&&(e.result+="\n");break}for(i?S(s)?(g=!0,e.result+=a.repeat("\n",c?1+p:p)):g?(g=!1,e.result+=a.repeat("\n",p+1)):0===p?c&&(e.result+=" "):e.result+=a.repeat("\n",p):e.result+=a.repeat("\n",c?1+p:p),c=!0,u=!0,p=0,n=e.position;!b(s)&&0!==s;)s=e.input.charCodeAt(++e.position);_(e,n,e.position,!1)}}return!0}(e,v)||function(e,t){var n,a,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,a=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(_(e,a,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;a=e.position,e.position++,i=e.position}else b(n)?(_(e,a,i,!0),K(e,U(e,!1,t)),a=i=e.position):e.position===e.lineStart&&H(e)?j(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);j(e,"unexpected end of the stream within a single quoted scalar")}(e,v)||function(e,t){var n,a,i,r,s,o,l;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return _(e,n,e.position,!0),e.position++,!0;if(92===o){if(_(e,n,e.position,!0),b(o=e.input.charCodeAt(++e.position)))U(e,!1,t);else if(o<256&&M[o])e.result+=T[o],e.position++;else if((s=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(i=s,r=0;i>0;i--)(s=D(o=e.input.charCodeAt(++e.position)))>=0?r=(r<<4)+s:j(e,"expected hexadecimal character");e.result+=A(r),e.position++}else j(e,"unknown escape sequence");n=a=e.position}else b(o)?(_(e,n,a,!0),K(e,U(e,!1,t)),n=a=e.position):e.position===e.lineStart&&H(e)?j(e,"unexpected end of the document within a double quoted scalar"):(e.position++,a=e.position)}j(e,"unexpected end of the stream within a double quoted scalar")}(e,v)?I=!0:function(e){var t,n,a;if(42!==(a=e.input.charCodeAt(e.position)))return!1;for(a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!F(a)&&!C(a);)a=e.input.charCodeAt(++e.position);return e.position===t&&j(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),l.call(e.anchorMap,n)||j(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],U(e,!0,-1),!0}(e)?(I=!0,null===e.tag&&null===e.anchor||j(e,"alias node should not have any properties")):function(e,t,n){var a,i,r,s,o,l,c,u,d=e.kind,p=e.result;if(F(u=e.input.charCodeAt(e.position))||C(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(F(a=e.input.charCodeAt(e.position+1))||n&&C(a)))return!1;for(e.kind="scalar",e.result="",i=r=e.position,s=!1;0!==u;){if(58===u){if(F(a=e.input.charCodeAt(e.position+1))||n&&C(a))break}else if(35===u){if(F(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&H(e)||n&&C(u))break;if(b(u)){if(o=e.line,l=e.lineStart,c=e.lineIndent,U(e,!1,-1),e.lineIndent>=t){s=!0,u=e.input.charCodeAt(e.position);continue}e.position=r,e.line=o,e.lineStart=l,e.lineIndent=c;break}}s&&(_(e,i,r,!1),K(e,e.line-o),i=r=e.position,s=!1),S(u)||(r=e.position+1),u=e.input.charCodeAt(++e.position)}return _(e,i,r,!1),!!e.result||(e.kind=d,e.result=p,!1)}(e,v,c===n)&&(I=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===w&&(I=g&&W(e,k))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&j(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),E=0,y=e.implicitTypes.length;E<y;E+=1)if((x=e.implicitTypes[E]).resolve(e.result)){e.result=x.construct(e.result),e.tag=x.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else l.call(e.typeMap[e.kind||"fallback"],e.tag)?(x=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&x.kind!==e.kind&&j(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+x.kind+'", not "'+e.kind+'"'),x.resolve(e.result)?(e.result=x.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):j(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):j(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||I}function X(e){var t,n,a,i,r=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(i=e.input.charCodeAt(e.position))&&(U(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(s=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!F(i);)i=e.input.charCodeAt(++e.position);for(a=[],(n=e.input.slice(t,e.position)).length<1&&j(e,"directive name must not be less than one character in length");0!==i;){for(;S(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!b(i));break}if(b(i))break;for(t=e.position;0!==i&&!F(i);)i=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==i&&R(e),l.call(L,n)?L[n](e,n,a):B(e,'unknown document directive "'+n+'"')}U(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,U(e,!0,-1)):s&&j(e,"directives end mark is expected"),J(e,e.lineIndent-1,p,!1,!0),U(e,!0,-1),e.checkLineBreaks&&E.test(e.input.slice(r,e.position))&&B(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&H(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,U(e,!0,-1)):e.position<e.length-1&&j(e,"end of the stream or a document separator is expected")}function q(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new I(e,t),a=e.indexOf("\0");for(-1!==a&&(n.position=a,j(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)X(n);return n.documents}function V(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var a=q(e,n);if("function"!=typeof t)return a;for(var i=0,r=a.length;i<r;i+=1)t(a[i])}function Y(e,t){var n=q(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new i("expected a single document in the stream, but found more")}}e.exports.loadAll=V,e.exports.load=Y,e.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),V(e,t,a.extend({schema:s},n))},e.exports.safeLoad=function(e,t){return Y(e,a.extend({schema:s},t))}},function(e,t,n){"use strict";var a=n(137);function i(e,t,n,a,i){this.name=e,this.buffer=t,this.position=n,this.line=a,this.column=i}i.prototype.getSnippet=function(e,t){var n,i,r,s,o;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",i=this.position;i>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){n=" ... ",i+=5;break}for(r="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){r=" ... ",s-=5;break}return o=this.buffer.slice(i,s),a.repeat(" ",e)+n+o+r+"\n"+a.repeat(" ",e+this.position-i+n.length)+"^"},i.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},e.exports=i},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var a=n(137),i=n(113);function r(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,a=e.length,i=0,o=!1;if(!a)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===a)return!0;if("b"===(t=e[++i])){for(i++;i<a;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(i++;i<a;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}for(;i<a;i++)if("_"!==(t=e[i])){if(!r(e.charCodeAt(i)))return!1;o=!0}return o&&"_"!==t}if("_"===t)return!1;for(;i<a;i++)if("_"!==(t=e[i])){if(":"===t)break;if(!s(e.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(i)))},construct:function(e){var t,n,a=e,i=1,r=[];return-1!==a.indexOf("_")&&(a=a.replace(/_/g,"")),"-"!==(t=a[0])&&"+"!==t||("-"===t&&(i=-1),t=(a=a.slice(1))[0]),"0"===a?0:"0"===t?"b"===a[1]?i*parseInt(a.slice(2),2):"x"===a[1]?i*parseInt(a,16):i*parseInt(a,8):-1!==a.indexOf(":")?(a.split(":").forEach((function(e){r.unshift(parseInt(e,10))})),a=0,n=1,r.forEach((function(e){a+=e*n,n*=60})),i*a):i*parseInt(a,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!a.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,n){"use strict";var a=n(137),i=n(113),r=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),s=/^[-+]?[0-9]+e/;e.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!r.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,a,i;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){i.unshift(parseFloat(e,10))})),t=0,a=1,i.forEach((function(e){t+=e*a,a*=60})),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||a.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(a.isNegativeZero(e))return"-0.0";return n=e.toString(10),s.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var a=n(113),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new a("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==i.exec(e)||null!==r.exec(e))},construct:function(e){var t,n,a,s,o,l,c,u,d=0,p=null;if(null===(t=i.exec(e))&&(t=r.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],a=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(n,a,s));if(o=+t[4],l=+t[5],c=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(p=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(p=-p)),u=new Date(Date.UTC(n,a,s,o,l,c,d)),p&&u.setTime(u.getTime()-p),u},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,n){"use strict";var a;try{a=n(78).Buffer}catch(e){}var i=n(113),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new i("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,a=0,i=e.length,s=r;for(n=0;n<i;n++)if(!((t=s.indexOf(e.charAt(n)))>64)){if(t<0)return!1;a+=6}return a%8==0},construct:function(e){var t,n,i=e.replace(/[\r\n=]/g,""),s=i.length,o=r,l=0,c=[];for(t=0;t<s;t++)t%4==0&&t&&(c.push(l>>16&255),c.push(l>>8&255),c.push(255&l)),l=l<<6|o.indexOf(i.charAt(t));return 0==(n=s%4*6)?(c.push(l>>16&255),c.push(l>>8&255),c.push(255&l)):18===n?(c.push(l>>10&255),c.push(l>>2&255)):12===n&&c.push(l>>4&255),a?a.from?a.from(c):new a(c):c},predicate:function(e){return a&&a.isBuffer(e)},represent:function(e){var t,n,a="",i=0,s=e.length,o=r;for(t=0;t<s;t++)t%3==0&&t&&(a+=o[i>>18&63],a+=o[i>>12&63],a+=o[i>>6&63],a+=o[63&i]),i=(i<<8)+e[t];return 0==(n=s%3)?(a+=o[i>>18&63],a+=o[i>>12&63],a+=o[i>>6&63],a+=o[63&i]):2===n?(a+=o[i>>10&63],a+=o[i>>4&63],a+=o[i<<2&63],a+=o[64]):1===n&&(a+=o[i>>2&63],a+=o[i<<4&63],a+=o[64],a+=o[64]),a}})},function(e,t,n){"use strict";var a=n(113),i=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=new a("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,a,s,o,l=[],c=e;for(t=0,n=c.length;t<n;t+=1){if(a=c[t],o=!1,"[object Object]"!==r.call(a))return!1;for(s in a)if(i.call(a,s)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(s))return!1;l.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var a=n(113),i=Object.prototype.toString;e.exports=new a("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,a,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(a=o[t],"[object Object]"!==i.call(a))return!1;if(1!==(r=Object.keys(a)).length)return!1;s[t]=[r[0],a[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,a,i,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)a=s[t],i=Object.keys(a),r[t]=[i[0],a[i[0]]];return r}})},function(e,t,n){"use strict";var a=n(113),i=Object.prototype.hasOwnProperty;e.exports=new a("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(i.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,n){"use strict";var a=n(113);e.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),a="";if("/"===t[0]){if(n&&(a=n[1]),a.length>3)return!1;if("/"!==t[t.length-a.length-1])return!1}return!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),a="";return"/"===t[0]&&(n&&(a=n[1]),t=t.slice(1,t.length-a.length-1)),new RegExp(t,a)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,n){"use strict";var a;try{a=n(276)}catch(e){"undefined"!=typeof window&&(a=window.esprima)}var i=n(113);e.exports=new i("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=a.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,n="("+e+")",i=a.parse(n,{range:!0}),r=[];if("Program"!==i.type||1!==i.body.length||"ExpressionStatement"!==i.body[0].type||"ArrowFunctionExpression"!==i.body[0].expression.type&&"FunctionExpression"!==i.body[0].expression.type)throw new Error("Failed to resolve function");return i.body[0].expression.params.forEach((function(e){r.push(e.name)})),t=i.body[0].expression.body.range,"BlockStatement"===i.body[0].expression.body.type?new Function(r,n.slice(t[0]+1,t[1]-1)):new Function(r,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,n){var a;a=function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=n(3),r=n(8),s=n(15);function o(e,t,n){var s=null,o=function(e,t){n&&n(e,t),s&&s.visit(e,t)},l="function"==typeof n?o:null,c=!1;if(t){c="boolean"==typeof t.comment&&t.comment;var u="boolean"==typeof t.attachComment&&t.attachComment;(c||u)&&((s=new a.CommentHandler).attach=u,t.comment=!0,l=o)}var d,p=!1;t&&"string"==typeof t.sourceType&&(p="module"===t.sourceType),d=t&&"boolean"==typeof t.jsx&&t.jsx?new i.JSXParser(e,t,l):new r.Parser(e,t,l);var m=p?d.parseModule():d.parseScript();return c&&s&&(m.comments=s.comments),d.config.tokens&&(m.tokens=d.tokens),d.config.tolerant&&(m.errors=d.errorHandler.errors),m}t.parse=o,t.parseModule=function(e,t,n){var a=t||{};return a.sourceType="module",o(e,a,n)},t.parseScript=function(e,t,n){var a=t||{};return a.sourceType="script",o(e,a,n)},t.tokenize=function(e,t,n){var a,i=new s.Tokenizer(e,t);a=[];try{for(;;){var r=i.getNextToken();if(!r)break;n&&(r=n(r)),a.push(r)}}catch(e){i.errorHandler.tolerate(e)}return i.errorHandler.tolerant&&(a.errors=i.errors()),a};var l=n(2);t.Syntax=l.Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===a.Syntax.BlockStatement&&0===e.body.length){for(var n=[],i=this.leading.length-1;i>=0;--i){var r=this.leading[i];t.end.offset>=r.start&&(n.unshift(r.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var a=this.trailing[n];a.start>=e.end.offset&&t.unshift(a.comment)}return this.trailing.length=0,t}var i=this.stack[this.stack.length-1];if(i&&i.node.trailingComments){var r=i.node.trailingComments[0];r&&r.range[0]>=e.end.offset&&(t=i.node.trailingComments,delete i.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,n=[];this.stack.length>0&&(r=this.stack[this.stack.length-1])&&r.start>=e.start.offset;)t=r.node,this.stack.pop();if(t){for(var a=(t.leadingComments?t.leadingComments.length:0)-1;a>=0;--a){var i=t.leadingComments[a];i.range[1]<=e.start.offset&&(n.unshift(i),t.leadingComments.splice(a,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,n}for(a=this.leading.length-1;a>=0;--a){var r;(r=this.leading[a]).start<=e.start.offset&&(n.unshift(r.comment),this.leading.splice(a,1))}return n},e.prototype.visitNode=function(e,t){if(!(e.type===a.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(t),i=this.findLeadingComments(t);i.length>0&&(e.leadingComments=i),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",a={type:n,value:e.value};if(e.range&&(a.range=e.range),e.loc&&(a.loc=e.loc),this.comments.push(a),this.attach){var i={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=n,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var a,i=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(6),l=n(7),c=n(8),u=n(13),d=n(14);function p(e){var t;switch(e.type){case o.JSXSyntax.JSXIdentifier:t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var n=e;t=p(n.namespace)+":"+p(n.name);break;case o.JSXSyntax.JSXMemberExpression:var a=e;t=p(a.object)+"."+p(a.property)}return t}u.TokenName[100]="JSXIdentifier",u.TokenName[101]="JSXText";var m=function(e){function t(t,n,a){return e.call(this,t,n,a)||this}return i(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,a=!1,i=!1,s=!1;!this.scanner.eof()&&n&&!a;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(a=";"===o,t+=o,++this.scanner.index,!a)switch(t.length){case 2:i="#"===o;break;case 3:i&&(n=(s="x"===o)||r.Character.isDecimalDigit(o.charCodeAt(0)),i=i&&!s);break;default:n=(n=n&&!(i&&!r.Character.isDecimalDigit(o.charCodeAt(0))))&&!(s&&!r.Character.isHexDigit(o.charCodeAt(0)))}}if(n&&a&&t.length>2){var l=t.substr(1,t.length-2);i&&l.length>1?t=String.fromCharCode(parseInt(l.substr(1),10)):s&&l.length>2?t=String.fromCharCode(parseInt("0"+l.substr(1),16)):i||s||!d.XHTMLEntities[l]||(t=d.XHTMLEntities[l])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:o=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,n=this.scanner.source[this.scanner.index++],a="";!this.scanner.eof()&&(l=this.scanner.source[this.scanner.index++])!==n;)a+="&"===l?this.scanXHTMLEntity(n):l;return{type:8,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var i=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),o=46===i&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=o.length,{type:7,value:o,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(r.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var l=this.scanner.source.charCodeAt(this.scanner.index);if(r.Character.isIdentifierPart(l)&&92!==l)++this.scanner.index;else{if(45!==l)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,r.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var a={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(a)),a},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var a=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(n,a))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var i=t;this.expectJSX(".");var r=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(i,r))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){var a=n;this.expectJSX(":");var i=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(a,i))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),a=this.matchJSX("/");return a&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,a,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var n=this.parseJSXElementName(),a=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(n,i,a))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var a=this.getTokenRaw(n),i=this.finalize(t,new s.JSXText(n.value,a));e.push(i)}if("{"!==this.scanner.source[this.scanner.index])break;var r=this.parseJSXExpressionContainer();e.push(r)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),a=this.parseJSXBoundaryElement();if(a.type===o.JSXSyntax.JSXOpeningElement){var i=a;if(i.selfClosing){var r=this.finalize(n,new s.JSXElement(i,[],null));e.children.push(r)}else t.push(e),e={node:n,opening:i,closing:null,children:[]}}if(a.type===o.JSXSyntax.JSXClosingElement){e.closing=a;var l=p(e.opening.name);if(l!==p(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",l),!(t.length>0))break;r=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(r),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],a=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:a,children:n});n=i.children,a=i.closing}return this.finalize(e,new s.JSXElement(t,n,a))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(c.Parser);t.JSXParser=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(6);t.JSXClosingElement=function(e){this.type=a.JSXSyntax.JSXClosingElement,this.name=e};t.JSXElement=function(e,t,n){this.type=a.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n};t.JSXEmptyExpression=function(){this.type=a.JSXSyntax.JSXEmptyExpression};t.JSXExpressionContainer=function(e){this.type=a.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXIdentifier=function(e){this.type=a.JSXSyntax.JSXIdentifier,this.name=e};t.JSXMemberExpression=function(e,t){this.type=a.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXAttribute=function(e,t){this.type=a.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXNamespacedName=function(e,t){this.type=a.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXOpeningElement=function(e,t,n){this.type=a.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n};t.JSXSpreadAttribute=function(e){this.type=a.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXText=function(e,t){this.type=a.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.ArrayExpression=function(e){this.type=a.Syntax.ArrayExpression,this.elements=e};t.ArrayPattern=function(e){this.type=a.Syntax.ArrayPattern,this.elements=e};t.ArrowFunctionExpression=function(e,t,n){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1};t.AssignmentExpression=function(e,t,n){this.type=a.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n};t.AssignmentPattern=function(e,t){this.type=a.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AsyncArrowFunctionExpression=function(e,t,n){this.type=a.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0};t.AsyncFunctionDeclaration=function(e,t,n){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=function(e,t,n){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AwaitExpression=function(e){this.type=a.Syntax.AwaitExpression,this.argument=e};t.BinaryExpression=function(e,t,n){var i="||"===e||"&&"===e;this.type=i?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n};t.BlockStatement=function(e){this.type=a.Syntax.BlockStatement,this.body=e};t.BreakStatement=function(e){this.type=a.Syntax.BreakStatement,this.label=e};t.CallExpression=function(e,t){this.type=a.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CatchClause=function(e,t){this.type=a.Syntax.CatchClause,this.param=e,this.body=t};t.ClassBody=function(e){this.type=a.Syntax.ClassBody,this.body=e};t.ClassDeclaration=function(e,t,n){this.type=a.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n};t.ClassExpression=function(e,t,n){this.type=a.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n};t.ComputedMemberExpression=function(e,t){this.type=a.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ConditionalExpression=function(e,t,n){this.type=a.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n};t.ContinueStatement=function(e){this.type=a.Syntax.ContinueStatement,this.label=e};t.DebuggerStatement=function(){this.type=a.Syntax.DebuggerStatement};t.Directive=function(e,t){this.type=a.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.DoWhileStatement=function(e,t){this.type=a.Syntax.DoWhileStatement,this.body=e,this.test=t};t.EmptyStatement=function(){this.type=a.Syntax.EmptyStatement};t.ExportAllDeclaration=function(e){this.type=a.Syntax.ExportAllDeclaration,this.source=e};t.ExportDefaultDeclaration=function(e){this.type=a.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportNamedDeclaration=function(e,t,n){this.type=a.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n};t.ExportSpecifier=function(e,t){this.type=a.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExpressionStatement=function(e){this.type=a.Syntax.ExpressionStatement,this.expression=e};t.ForInStatement=function(e,t,n){this.type=a.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1};t.ForOfStatement=function(e,t,n){this.type=a.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n};t.ForStatement=function(e,t,n,i){this.type=a.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i};t.FunctionDeclaration=function(e,t,n,i){this.type=a.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1};t.FunctionExpression=function(e,t,n,i){this.type=a.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1};t.Identifier=function(e){this.type=a.Syntax.Identifier,this.name=e};t.IfStatement=function(e,t,n){this.type=a.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n};t.ImportDeclaration=function(e,t){this.type=a.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDefaultSpecifier=function(e){this.type=a.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportNamespaceSpecifier=function(e){this.type=a.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportSpecifier=function(e,t){this.type=a.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.LabeledStatement=function(e,t){this.type=a.Syntax.LabeledStatement,this.label=e,this.body=t};t.Literal=function(e,t){this.type=a.Syntax.Literal,this.value=e,this.raw=t};t.MetaProperty=function(e,t){this.type=a.Syntax.MetaProperty,this.meta=e,this.property=t};t.MethodDefinition=function(e,t,n,i,r){this.type=a.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=i,this.static=r};t.Module=function(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="module"};t.NewExpression=function(e,t){this.type=a.Syntax.NewExpression,this.callee=e,this.arguments=t};t.ObjectExpression=function(e){this.type=a.Syntax.ObjectExpression,this.properties=e};t.ObjectPattern=function(e){this.type=a.Syntax.ObjectPattern,this.properties=e};t.Property=function(e,t,n,i,r,s){this.type=a.Syntax.Property,this.key=t,this.computed=n,this.value=i,this.kind=e,this.method=r,this.shorthand=s};t.RegexLiteral=function(e,t,n,i){this.type=a.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:i}};t.RestElement=function(e){this.type=a.Syntax.RestElement,this.argument=e};t.ReturnStatement=function(e){this.type=a.Syntax.ReturnStatement,this.argument=e};t.Script=function(e){this.type=a.Syntax.Program,this.body=e,this.sourceType="script"};t.SequenceExpression=function(e){this.type=a.Syntax.SequenceExpression,this.expressions=e};t.SpreadElement=function(e){this.type=a.Syntax.SpreadElement,this.argument=e};t.StaticMemberExpression=function(e,t){this.type=a.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.Super=function(){this.type=a.Syntax.Super};t.SwitchCase=function(e,t){this.type=a.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchStatement=function(e,t){this.type=a.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.TaggedTemplateExpression=function(e,t){this.type=a.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TemplateElement=function(e,t){this.type=a.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateLiteral=function(e,t){this.type=a.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.ThisExpression=function(){this.type=a.Syntax.ThisExpression};t.ThrowStatement=function(e){this.type=a.Syntax.ThrowStatement,this.argument=e};t.TryStatement=function(e,t,n){this.type=a.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n};t.UnaryExpression=function(e,t){this.type=a.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UpdateExpression=function(e,t,n){this.type=a.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n};t.VariableDeclaration=function(e,t){this.type=a.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclarator=function(e,t){this.type=a.Syntax.VariableDeclarator,this.id=e,this.init=t};t.WhileStatement=function(e,t){this.type=a.Syntax.WhileStatement,this.test=e,this.body=t};t.WithStatement=function(e,t){this.type=a.Syntax.WithStatement,this.object=e,this.body=t};t.YieldExpression=function(e,t){this.type=a.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=n(10),r=n(11),s=n(7),o=n(12),l=n(2),c=n(13),u="ArrowParameterPlaceHolder",d=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),r=e.replace(/%(\d)/g,(function(e,t){return a.assert(t<i.length,"Message reference must be in range"),i[t]})),s=this.lastMarker.index,o=this.lastMarker.line,l=this.lastMarker.column+1;throw this.errorHandler.createError(s,o,l,r)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),r=e.replace(/%(\d)/g,(function(e,t){return a.assert(t<i.length,"Message reference must be in range"),i[t]})),s=this.lastMarker.index,o=this.scanner.lineNumber,l=this.lastMarker.column+1;this.errorHandler.tolerateError(s,o,l,r)},e.prototype.unexpectedTokenError=function(e,t){var n,a=t||r.Messages.UnexpectedToken;if(e?(t||(a=2===e.type?r.Messages.UnexpectedEOS:3===e.type?r.Messages.UnexpectedIdentifier:6===e.type?r.Messages.UnexpectedNumber:8===e.type?r.Messages.UnexpectedString:10===e.type?r.Messages.UnexpectedTemplate:r.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?a=r.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(a=r.Messages.StrictReservedWord))),n=e.value):n="ILLEGAL",a=a.replace("%0",n),e&&"number"==typeof e.lineNumber){var i=e.start,s=e.lineNumber,o=this.lastMarker.index-this.lastMarker.column,l=e.start-o+1;return this.errorHandler.createError(i,s,l,a)}return i=this.lastMarker.index,s=this.lastMarker.line,l=this.lastMarker.column+1,this.errorHandler.createError(i,s,l,a)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],a=void 0;a={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(a.range=n.range),this.config.loc&&(a.loc=n.loc);var i={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(a,i)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:c.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var n=e.pattern,a=e.flags;t.regex={pattern:n,flags:a}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,a=e.lineNumber;return n<0&&(n+=t,a--),{index:e.start,line:a,column:n}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,r.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,a=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=a,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,a=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=a||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,n,a=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(a,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,r.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(a,new s.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(a,new s.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(a,new s.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(a,new s.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(a,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(a,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var a=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,a},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters(),a=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,a,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var a=this.parseFormalParameters(),i=this.parsePropertyMethod(a);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new s.AsyncFunctionExpression(null,a.params,i))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),n=this.nextToken();switch(n.type){case 8:case 6:this.context.strict&&n.octal&&this.tolerateUnexpectedToken(n,r.Messages.StrictOctalLiteral);var a=this.getTokenRaw(n);e=this.finalize(t,new s.Literal(n.value,a));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(n.value));break;case 7:"["===n.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(n);break;default:e=this.throwUnexpectedToken(n)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===l.Syntax.Identifier&&e.name===t||e.type===l.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n=this.createNode(),a=this.lookahead,i=null,o=null,l=!1,c=!1,u=!1,d=!1;if(3===a.type){var p=a.value;this.nextToken(),l=this.match("["),i=(d=!(this.hasLineTerminator||"async"!==p||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new s.Identifier(p))}else this.match("*")?this.nextToken():(l=this.match("["),i=this.parseObjectPropertyKey());var m=this.qualifiedPropertyName(this.lookahead);if(3===a.type&&!d&&"get"===a.value&&m)t="get",l=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod();else if(3===a.type&&!d&&"set"===a.value&&m)t="set",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseSetterMethod();else if(7===a.type&&"*"===a.value&&m)t="init",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),c=!0;else if(i||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!d)!l&&this.isPropertyKey(i,"__proto__")&&(e.value&&this.tolerateError(r.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),o=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0;else if(3===a.type)if(p=this.finalize(n,new s.Identifier(a.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),u=!0;var h=this.isolateCoverGrammar(this.parseAssignmentExpression);o=this.finalize(n,new s.AssignmentPattern(p,h))}else u=!0,o=p;else this.throwUnexpectedToken(this.nextToken());return this.finalize(n,new s.Property(t,i,l,o,c,u))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,i=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:i},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,a=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:a},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],a=this.parseTemplateHead();for(n.push(a);!a.tail;)t.push(this.parseExpression()),a=this.parseTemplateElement(),n.push(a);return this.finalize(e,new s.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case l.Syntax.Identifier:case l.Syntax.MemberExpression:case l.Syntax.RestElement:case l.Syntax.AssignmentPattern:break;case l.Syntax.SpreadElement:e.type=l.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case l.Syntax.ArrayExpression:e.type=l.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case l.Syntax.ObjectExpression:for(e.type=l.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case l.Syntax.AssignmentExpression:e.type=l.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:u,params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:u,params:[e],async:!1};else{var a=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var i=[];for(this.context.isAssignmentTarget=!1,i.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var r=0;r<i.length;r++)this.reinterpretExpressionAsPattern(i[r]);a=!0,e={type:u,params:i,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,r=0;r<i.length;r++)this.reinterpretExpressionAsPattern(i[r]);a=!0,e={type:u,params:i,async:!1}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(a)break}a||(e=this.finalize(this.startNode(t),new s.SequenceExpression(i)))}if(!a){if(this.expect(")"),this.match("=>")&&(e.type===l.Syntax.Identifier&&"yield"===e.name&&(a=!0,e={type:u,params:[e],async:!1}),!a)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===l.Syntax.SequenceExpression)for(r=0;r<e.expressions.length;r++)this.reinterpretExpressionAsPattern(e.expressions[r]);else this.reinterpretExpressionAsPattern(e);var o=e.type===l.Syntax.SequenceExpression?e.expressions:[e];e={type:u,params:o,async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(a.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var i=this.parseIdentifierName();e=new s.MetaProperty(n,i)}else this.throwUnexpectedToken(this.lookahead);else{var r=this.isolateCoverGrammar(this.parseLeftHandSideExpression),o=this.match("(")?this.parseArguments():[];e=new s.NewExpression(r,o),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.matchContextualKeyword("async"),a=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var i=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,i))}else if(this.match("(")){var r=n&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var o=r?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,o)),r&&this.match("=>")){for(var l=0;l<o.length;++l)this.reinterpretExpressionAsPattern(o[l]);e={type:u,params:o,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),i=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,i));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var c=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,c))}return this.context.allowIn=a,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,n));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),a=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(r.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment);var i=!0;e=this.finalize(n,new s.UpdateExpression(a.value,e,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(r.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=this.nextToken().value;i=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(o,e,i))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===l.Syntax.Identifier&&this.tolerateError(r.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==l.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",n,a))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,a=this.binaryPrecedence(n);if(a>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var i=[e,this.lookahead],r=t,o=this.isolateCoverGrammar(this.parseExponentiationExpression),l=[r,n.value,o],c=[a];!((a=this.binaryPrecedence(this.lookahead))<=0);){for(;l.length>2&&a<=c[c.length-1];){o=l.pop();var u=l.pop();c.pop(),r=l.pop(),i.pop();var d=this.startNode(i[i.length-1]);l.push(this.finalize(d,new s.BinaryExpression(u,r,o)))}l.push(this.nextToken().value),c.push(a),i.push(this.lookahead),l.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var p=l.length-1;t=l[p];for(var m=i.pop();p>1;){var h=i.pop(),f=m&&m.lineStart;d=this.startNode(h,f),u=l[p-1],t=this.finalize(d,new s.BinaryExpression(u,l[p-2],t)),p-=2,m=h}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var a=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,a,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case l.Syntax.Identifier:this.validateParam(e,t,t.name);break;case l.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case l.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case l.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case l.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n=[e],a=!1;switch(e.type){case l.Syntax.Identifier:break;case u:n=e.params,a=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var i=0;i<n.length;++i)(s=n[i]).type===l.Syntax.AssignmentPattern?s.right.type===l.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=l.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):a&&s.type===l.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),n[i]=s;if(this.context.strict||!this.context.allowYield)for(i=0;i<n.length;++i){var s;(s=n[i]).type===l.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===r.Messages.StrictParamDupe){var o=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(o,t.message)}return{simple:t.simple,params:n,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if(e=this.parseConditionalExpression(),3===n.type&&n.lineNumber===this.lookahead.lineNumber&&"async"===n.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var a=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(a),e={type:u,params:[a],async:!0}}if(e.type===u||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var i=e.async,o=this.reinterpretAsCoverFormalsList(e);if(o){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var c=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=o.simple;var p=this.context.allowYield,m=this.context.await;this.context.allowYield=!0,this.context.await=i;var h=this.startNode(t);this.expect("=>");var f=void 0;if(this.match("{")){var g=this.context.allowIn;this.context.allowIn=!0,f=this.parseFunctionSourceElements(),this.context.allowIn=g}else f=this.isolateCoverGrammar(this.parseAssignmentExpression);var E=f.type!==l.Syntax.BlockStatement;this.context.strict&&o.firstRestricted&&this.throwUnexpectedToken(o.firstRestricted,o.message),this.context.strict&&o.stricted&&this.tolerateUnexpectedToken(o.stricted,o.message),e=i?this.finalize(h,new s.AsyncArrowFunctionExpression(o.params,f,E)):this.finalize(h,new s.ArrowFunctionExpression(o.params,f,E)),this.context.strict=c,this.context.allowStrictDirective=d,this.context.allowYield=p,this.context.await=m}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===l.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(n,r.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var x=(n=this.nextToken()).value,v=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(x,e,v)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,r.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,r.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),a=this.parsePattern([],e);this.context.strict&&a.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(a.name)&&this.tolerateError(r.Messages.StrictVarName);var i=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(r.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&a.type!==l.Syntax.Identifier||this.match("="))&&(this.expect("="),i=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new s.VariableDeclarator(a,i))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;a.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var i=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(i,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var a=this.parsePattern(e,t);return this.finalize(n,new s.RestElement(a))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var a=[];!this.match("]");)if(this.match(","))this.nextToken(),a.push(null);else{if(this.match("...")){a.push(this.parseBindingRestElement(e,t));break}a.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new s.ArrayPattern(a))},e.prototype.parsePropertyPattern=function(e,t){var n,a,i=this.createNode(),r=!1,o=!1;if(3===this.lookahead.type){var l=this.lookahead;n=this.parseVariableIdentifier();var c=this.finalize(i,new s.Identifier(l.value));if(this.match("=")){e.push(l),o=!0,this.nextToken();var u=this.parseAssignmentExpression();a=this.finalize(this.startNode(l),new s.AssignmentPattern(c,u))}else this.match(":")?(this.expect(":"),a=this.parsePatternWithDefault(e,t)):(e.push(l),o=!0,a=c)}else r=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),a=this.parsePatternWithDefault(e,t);return this.finalize(i,new s.Property("init",n,r,a,!1,o))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),a=[];for(this.expect("{");!this.match("}");)a.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new s.ObjectPattern(a))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,r.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,a=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,a=this.finalize(this.startNode(n),new s.AssignmentPattern(a,r))}return a},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new s.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(r.Messages.StrictVarName);var a=null;return this.match("=")?(this.nextToken(),a=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===l.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(n,a))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(r.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var a=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new s.IfStatement(a,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var a=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(n,a))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var a=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=a}return this.finalize(t,new s.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,a=null,i=null,o=null,c=!0,u=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){a=this.createNode(),this.nextToken();var d=this.context.allowIn;this.context.allowIn=!1;var p=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=d,1===p.length&&this.matchKeyword("in")){var m=p[0];m.init&&(m.id.type===l.Syntax.ArrayPattern||m.id.type===l.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(r.Messages.ForInOfLoopInitializer,"for-in"),a=this.finalize(a,new s.VariableDeclaration(p,"var")),this.nextToken(),e=a,t=this.parseExpression(),a=null}else 1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(a=this.finalize(a,new s.VariableDeclaration(p,"var")),this.nextToken(),e=a,t=this.parseAssignmentExpression(),a=null,c=!1):(a=this.finalize(a,new s.VariableDeclaration(p,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){a=this.createNode();var h=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(d=this.context.allowIn,this.context.allowIn=!1,p=this.parseBindingList(h,{inFor:!0}),this.context.allowIn=d,1===p.length&&null===p[0].init&&this.matchKeyword("in")?(a=this.finalize(a,new s.VariableDeclaration(p,h)),this.nextToken(),e=a,t=this.parseExpression(),a=null):1===p.length&&null===p[0].init&&this.matchContextualKeyword("of")?(a=this.finalize(a,new s.VariableDeclaration(p,h)),this.nextToken(),e=a,t=this.parseAssignmentExpression(),a=null,c=!1):(this.consumeSemicolon(),a=this.finalize(a,new s.VariableDeclaration(p,h)))):(a=this.finalize(a,new s.Identifier(h)),this.nextToken(),e=a,t=this.parseExpression(),a=null)}else{var f=this.lookahead;if(d=this.context.allowIn,this.context.allowIn=!1,a=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=d,this.matchKeyword("in"))this.context.isAssignmentTarget&&a.type!==l.Syntax.AssignmentExpression||this.tolerateError(r.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(a),e=a,t=this.parseExpression(),a=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&a.type!==l.Syntax.AssignmentExpression||this.tolerateError(r.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(a),e=a,t=this.parseAssignmentExpression(),a=null,c=!1;else{if(this.match(",")){for(var g=[a];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));a=this.finalize(this.startNode(f),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(i=this.parseExpression()),this.expect(";"),this.match(")")||(o=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var E=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=E}return void 0===e?this.finalize(u,new s.ForStatement(a,i,o,n)):c?this.finalize(u,new s.ForInStatement(e,t,n)):this.finalize(u,new s.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var a="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,a)||this.throwError(r.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(r.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),a="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,a)||this.throwError(r.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(r.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(r.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(r.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(n,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var a=[],i=!1;for(this.expect("{");!this.match("}");){var o=this.parseSwitchCase();null===o.test&&(i&&this.throwError(r.Messages.MultipleDefaultsInSwitch),i=!0),a.push(o)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new s.SwitchStatement(t,a))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===l.Syntax.Identifier&&this.match(":")){this.nextToken();var a=n,i="$"+a.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)&&this.throwError(r.Messages.Redeclaration,"Label",a.name),this.context.labelSet[i]=!0;var o=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),o=this.parseClassDeclaration();else if(this.matchKeyword("function")){var c=this.lookahead,u=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(c,r.Messages.StrictFunction):u.generator&&this.tolerateUnexpectedToken(c,r.Messages.GeneratorInLegacyContext),o=u}else o=this.parseStatement();delete this.context.labelSet[i],e=new s.LabeledStatement(a,o)}else this.consumeSemicolon(),e=new s.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(r.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),a={},i=0;i<t.length;i++){var o="$"+t[i].value;Object.prototype.hasOwnProperty.call(a,o)&&this.tolerateError(r.Messages.DuplicateBinding,t[i].value),a[o]=!0}this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(r.Messages.StrictCatchVariable),this.expect(")");var c=this.parseBlock();return this.finalize(e,new s.CatchClause(n,c))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,a=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||a||this.throwError(r.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,n,a))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,a=this.context.inIteration,i=this.context.inSwitch,r=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=a,this.context.inSwitch=i,this.context.inFunctionBody=r,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var a="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=r.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,a)&&(e.stricted=t,e.message=r.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=r.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=r.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,a)&&(e.stricted=t,e.message=r.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,a,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[a]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(r.Messages.DefaultRestParameter),this.match(")")||this.throwError(r.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),a=0;a<t.length;a++)this.validateParam(e,t[a],t[a].value);e.simple=e.simple&&n instanceof s.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&4===n.type&&"function"===n.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var a,i=!n&&this.match("*");i&&this.nextToken();var o=null,l=null;if(!e||!this.match("(")){var c=this.lookahead;o=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,r.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(l=c,a=r.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(l=c,a=r.Messages.StrictReservedWord)}var u=this.context.await,d=this.context.allowYield;this.context.await=n,this.context.allowYield=!i;var p=this.parseFormalParameters(l),m=p.params,h=p.stricted;l=p.firstRestricted,p.message&&(a=p.message);var f=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=p.simple;var E=this.parseFunctionSourceElements();return this.context.strict&&l&&this.throwUnexpectedToken(l,a),this.context.strict&&h&&this.tolerateUnexpectedToken(h,a),this.context.strict=f,this.context.allowStrictDirective=g,this.context.await=u,this.context.allowYield=d,n?this.finalize(t,new s.AsyncFunctionDeclaration(o,m,E)):this.finalize(t,new s.FunctionDeclaration(o,m,E,i))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n,a=!t&&this.match("*");a&&this.nextToken();var i,o=null,l=this.context.await,c=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!a,!this.match("(")){var u=this.lookahead;o=this.context.strict||a||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,r.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(i=u,n=r.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(i=u,n=r.Messages.StrictReservedWord)}var d=this.parseFormalParameters(i),p=d.params,m=d.stricted;i=d.firstRestricted,d.message&&(n=d.message);var h=this.context.strict,f=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&i&&this.throwUnexpectedToken(i,n),this.context.strict&&m&&this.tolerateUnexpectedToken(m,n),this.context.strict=h,this.context.allowStrictDirective=f,this.context.await=l,this.context.allowYield=c,t?this.finalize(e,new s.AsyncFunctionExpression(o,p,g)):this.finalize(e,new s.FunctionExpression(o,p,g,a))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),a=n.type===l.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,a?new s.Directive(n,a):new s.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var a=this.parseDirective();t.push(a);var i=a.directive;if("string"!=typeof i)break;"use strict"===i?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,r.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,r.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();n.params.length>0&&this.tolerateError(r.Messages.BadGetterArity);var a=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,a,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();1!==n.params.length?this.tolerateError(r.Messages.BadSetterArity):n.params[0]instanceof s.RestElement&&this.tolerateError(r.Messages.BadSetterRestParameter);var a=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,a,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var a=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,a,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var a=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=a}return this.finalize(e,new s.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),a="",i=null,o=null,l=!1,c=!1,u=!1,d=!1;if(this.match("*"))this.nextToken();else if(l=this.match("["),"static"===(i=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,u=!0,l=this.match("["),this.match("*")?this.nextToken():i=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var p=this.lookahead.value;":"!==p&&"("!==p&&"*"!==p&&(d=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,r.Messages.ConstructorIsAsync))}var m=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&m?(a="get",l=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod()):"set"===t.value&&m&&(a="set",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseSetterMethod()):7===t.type&&"*"===t.value&&m&&(a="init",l=this.match("["),i=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),c=!0),!a&&i&&this.match("(")&&(a="init",o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),c=!0),a||this.throwUnexpectedToken(this.lookahead),"init"===a&&(a="method"),l||(u&&this.isPropertyKey(i,"prototype")&&this.throwUnexpectedToken(t,r.Messages.StaticPrototype),!u&&this.isPropertyKey(i,"constructor")&&(("method"!==a||!c||o&&o.generator)&&this.throwUnexpectedToken(t,r.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,r.Messages.DuplicateConstructor):e.value=!0,a="constructor")),this.finalize(n,new s.MethodDefinition(i,l,o,a,u))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var a=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var r=this.parseClassBody();return this.context.strict=n,this.finalize(t,new s.ClassDeclaration(a,i,r))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=3===this.lookahead.type?this.parseVariableIdentifier():null,a=null;this.matchKeyword("extends")&&(this.nextToken(),a=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(n,a,i))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(r.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(r.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(r.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var a=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause;this.throwError(a,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(r.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?(n=this.parseClassDeclaration(!0),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):this.matchContextualKeyword("async")?(n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):(this.matchContextualKeyword("from")&&this.throwError(r.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(n)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var a=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause;this.throwError(a,this.lookahead.value)}this.nextToken();var i=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(i))}else if(4===this.lookahead.type){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction())n=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null));else{var o=[],l=null,c=!1;for(this.expect("{");!this.match("}");)c=c||this.matchKeyword("default"),o.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),l=this.parseModuleSpecifier(),this.consumeSemicolon()):c?(a=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause,this.throwError(a,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,o,l))}return e},e}();t.Parser=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&(n=Object.create(e),Object.defineProperty(n,"column",{value:t}))}return n},e.prototype.createError=function(e,t,n,a){var i="Line "+t+": "+a,r=this.constructError(i,n);return r.index=e,r.lineNumber=t,r.description=a,r},e.prototype.throwError=function(e,t,n,a){throw this.createError(e,t,n,a)},e.prototype.tolerateError=function(e,t,n,a){var i=this.createError(e,t,n,a);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=n(4),r=n(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function o(e){return"01234567".indexOf(e)}var l=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=r.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=r.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,n,a=[];for(this.trackComment&&(a=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var r=this.source.charCodeAt(this.index);if(++this.index,i.Character.isLineTerminator(r)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:n};a.push(s)}return 13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,a}}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:n},a.push(s)),a},e.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var a=this.source.charCodeAt(this.index);if(i.Character.isLineTerminator(a))13===a&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===a){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var r={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};n.push(r)}return n}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},r={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(r)),this.tolerateUnexpectedToken(),n},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(i.Character.isWhiteSpace(n))++this.index;else if(i.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var a=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(a)),t=!0}else{if(42!==n)break;this.index+=2,a=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(a))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,a=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(a))}else{if(60!==n||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,a=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(a))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,a=0;a<t;++a){if(this.eof()||!i.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+s(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],i.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),i.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!i.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=i.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&i.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),i.Character.isIdentifierPart(t));)n+=e=i.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&i.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=o(e);return!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+o(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+o(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3)&&t+n.length!==this.index){var a=this.index;this.index=t,this.tolerateUnexpectedToken(r.Messages.InvalidEscapedReservedWord),this.index=a}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&i.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(i.Character.isIdentifierStart(t)||i.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",a=!1;for(i.Character.isOctalDigit(e.charCodeAt(0))?(a=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return a||0!==n.length||this.throwUnexpectedToken(),(i.Character.isIdentifierStart(this.source.charCodeAt(this.index))||i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:a,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!i.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];a.assert(i.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&i.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;i.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];a.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,s="";!this.eof();){var o=this.source[this.index++];if(o===t){t="";break}if("\\"===o)if((o=this.source[this.index++])&&i.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var l=this.scanHexEscape(o);null===l&&this.throwUnexpectedToken(),s+=l}break;case"x":var c=this.scanHexEscape(o);null===c&&this.throwUnexpectedToken(r.Messages.InvalidHexEscapeSequence),s+=c;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=o,this.tolerateUnexpectedToken();break;default:if(o&&i.Character.isOctalDigit(o.charCodeAt(0))){var u=this.octalToDecimal(o);n=u.octal||n,s+=String.fromCharCode(u.code)}else s+=o}else{if(i.Character.isLineTerminator(o.charCodeAt(0)))break;s+=o}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,a="`"===this.source[n],s=!1,o=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){o=1,s=!0,t=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],i.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var c=this.index,u=this.scanHexEscape(l);null!==u?e+=u:(this.index=c,e+=l)}break;case"x":var d=this.scanHexEscape(l);null===d&&this.throwUnexpectedToken(r.Messages.InvalidHexEscapeSequence),e+=d;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===l?(i.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(r.Messages.TemplateOctalLiteral),e+="\0"):i.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(r.Messages.TemplateOctalLiteral):e+=l}else i.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}return t||this.throwUnexpectedToken(),a||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-o),cooked:e,head:a,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,a=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,n){var i=parseInt(t||n,16);return i>1114111&&a.throwUnexpectedToken(r.Messages.InvalidRegExp),i<=65535?String.fromCharCode(i):"￿"})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(n)}catch(e){this.throwUnexpectedToken(r.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];a.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],i.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(r.Messages.UnterminatedRegExp),t+=e;else if(i.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(r.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){s=!0;break}"["===e&&(n=!0)}return s||this.throwUnexpectedToken(r.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!i.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var n=this.index,a=this.scanHexEscape("u");if(null!==a)for(e+=a;n<this.index;++n)this.source[n];else this.index=n,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return i.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?i.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():i.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&i.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),i=n(12),r=n(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(a=this.values[this.curly-4])&&!this.beforeFunctionExpression(a);else if("function"===this.values[this.curly-4]){var a;t=!(a=this.values[this.curly-5])||!this.beforeFunctionExpression(a)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),o=function(){function e(e,t){this.errorHandler=new a.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],a=this.scanner.source.slice(n.slice[0],n.slice[1]),i={type:n.multiLine?"BlockComment":"LineComment",value:a};this.trackRange&&(i.range=n.range),this.trackLoc&&(i.loc=n.loc),this.buffer.push(i)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var o="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(o);var l={type:r.TokenName[o.type],value:this.scanner.source.slice(o.start,o.end)};if(this.trackRange&&(l.range=[o.start,o.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=s),9===o.type){var c=o.pattern,u=o.flags;l.regex={pattern:c,flags:u}}this.buffer.push(l)}}return this.buffer.shift()},e}();t.Tokenizer=o}])},e.exports=a()},function(e,t,n){"use strict";var a=n(137),i=n(141),r=n(151),s=n(142),o=Object.prototype.toString,l=Object.prototype.hasOwnProperty,c=9,u=10,d=13,p=32,m=33,h=34,f=35,g=37,E=38,y=39,x=42,v=44,k=45,b=58,S=61,F=62,C=63,D=64,w=91,A=93,M=96,T=123,P=124,I=125,O={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},j=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function B(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+a.repeat("0",r-t.length)+t}function L(e){this.schema=e.schema||r,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=a.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,a,i,r,s,o,c;if(null===t)return{};for(n={},i=0,r=(a=Object.keys(t)).length;i<r;i+=1)s=a[i],o=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(c=e.compiledTypeMap.fallback[s])&&l.call(c.styleAliases,o)&&(o=c.styleAliases[o]),n[s]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function _(e,t){for(var n,i=a.repeat(" ",t),r=0,s=-1,o="",l=e.length;r<l;)-1===(s=e.indexOf("\n",r))?(n=e.slice(r),r=l):(n=e.slice(r,s+1),r=s+1),n.length&&"\n"!==n&&(o+=i),o+=n;return o}function N(e,t){return"\n"+a.repeat(" ",e.indent*t)}function z(e){return e===p||e===c}function R(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function U(e,t){return R(e)&&65279!==e&&e!==v&&e!==w&&e!==A&&e!==T&&e!==I&&e!==b&&(e!==f||t&&function(e){return R(e)&&!z(e)&&65279!==e&&e!==d&&e!==u}(t))}function H(e){return/^\n* /.test(e)}var K=1,W=2,$=3,G=4,J=5;function X(e,t,n,a){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==j.indexOf(t))return"'"+t+"'";var r=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),o=a||e.flowLevel>-1&&n>=e.flowLevel;switch(function(e,t,n,a,i){var r,s,o,l,c=!1,d=!1,p=-1!==a,O=-1,j=R(l=e.charCodeAt(0))&&65279!==l&&!z(l)&&l!==k&&l!==C&&l!==b&&l!==v&&l!==w&&l!==A&&l!==T&&l!==I&&l!==f&&l!==E&&l!==x&&l!==m&&l!==P&&l!==S&&l!==F&&l!==y&&l!==h&&l!==g&&l!==D&&l!==M&&!z(e.charCodeAt(e.length-1));if(t)for(r=0;r<e.length;r++){if(!R(s=e.charCodeAt(r)))return J;o=r>0?e.charCodeAt(r-1):null,j=j&&U(s,o)}else{for(r=0;r<e.length;r++){if((s=e.charCodeAt(r))===u)c=!0,p&&(d=d||r-O-1>a&&" "!==e[O+1],O=r);else if(!R(s))return J;o=r>0?e.charCodeAt(r-1):null,j=j&&U(s,o)}d=d||p&&r-O-1>a&&" "!==e[O+1]}return c||d?n>9&&H(e)?J:d?G:$:j&&!i(e)?K:W}(t,o,e.indent,s,(function(t){return function(e,t){var n,a;for(n=0,a=e.implicitTypes.length;n<a;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}))){case K:return t;case W:return"'"+t.replace(/'/g,"''")+"'";case $:return"|"+q(t,e.indent)+V(_(t,r));case G:return">"+q(t,e.indent)+V(_(function(e,t){for(var n,a,i,r=/(\n+)([^\n]*)/g,s=(i=-1!==(i=e.indexOf("\n"))?i:e.length,r.lastIndex=i,Y(e.slice(0,i),t)),o="\n"===e[0]||" "===e[0];a=r.exec(e);){var l=a[1],c=a[2];n=" "===c[0],s+=l+(o||n||""===c?"":"\n")+Y(c,t),o=n}return s}(t,s),r));case J:return'"'+function(e){for(var t,n,a,i="",r=0;r<e.length;r++)(t=e.charCodeAt(r))>=55296&&t<=56319&&(n=e.charCodeAt(r+1))>=56320&&n<=57343?(i+=B(1024*(t-55296)+n-56320+65536),r++):i+=!(a=O[t])&&R(t)?e[r]:a||B(t);return i}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function q(e,t){var n=H(e)?String(t):"",a="\n"===e[e.length-1];return n+(!a||"\n"!==e[e.length-2]&&"\n"!==e?a?"":"-":"+")+"\n"}function V(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Y(e,t){if(""===e||" "===e[0])return e;for(var n,a,i=/ [^ ]/g,r=0,s=0,o=0,l="";n=i.exec(e);)(o=n.index)-r>t&&(a=s>r?s:o,l+="\n"+e.slice(r,a),r=a+1),s=o;return l+="\n",e.length-r>t&&s>r?l+=e.slice(r,s)+"\n"+e.slice(s+1):l+=e.slice(r),l.slice(1)}function Q(e,t,n){var a,r,s,c,u,d;for(s=0,c=(r=n?e.explicitTypes:e.implicitTypes).length;s<c;s+=1)if(((u=r[s]).instanceOf||u.predicate)&&(!u.instanceOf||"object"==typeof t&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(e.tag=n?u.tag:"?",u.represent){if(d=e.styleMap[u.tag]||u.defaultStyle,"[object Function]"===o.call(u.represent))a=u.represent(t,d);else{if(!l.call(u.represent,d))throw new i("!<"+u.tag+'> tag resolver accepts not "'+d+'" style');a=u.represent[d](t,d)}e.dump=a}return!0}return!1}function Z(e,t,n,a,r,s){e.tag=null,e.dump=n,Q(e,n,!1)||Q(e,n,!0);var l=o.call(e.dump);a&&(a=e.flowLevel<0||e.flowLevel>t);var c,d,p="[object Object]"===l||"[object Array]"===l;if(p&&(d=-1!==(c=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(r=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(p&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===l)a&&0!==Object.keys(e.dump).length?(function(e,t,n,a){var r,s,o,l,c,d,p="",m=e.tag,h=Object.keys(n);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(r=0,s=h.length;r<s;r+=1)d="",a&&0===r||(d+=N(e,t)),l=n[o=h[r]],Z(e,t+1,o,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&u===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,c&&(d+=N(e,t)),Z(e,t+1,l,!0,c)&&(e.dump&&u===e.dump.charCodeAt(0)?d+=":":d+=": ",p+=d+=e.dump));e.tag=m,e.dump=p||"{}"}(e,t,e.dump,r),d&&(e.dump="&ref_"+c+e.dump)):(function(e,t,n){var a,i,r,s,o,l="",c=e.tag,u=Object.keys(n);for(a=0,i=u.length;a<i;a+=1)o="",0!==a&&(o+=", "),e.condenseFlow&&(o+='"'),s=n[r=u[a]],Z(e,t,r,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Z(e,t,s,!1,!1)&&(l+=o+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===l){var m=e.noArrayIndent&&t>0?t-1:t;a&&0!==e.dump.length?(function(e,t,n,a){var i,r,s="",o=e.tag;for(i=0,r=n.length;i<r;i+=1)Z(e,t+1,n[i],!0,!0)&&(a&&0===i||(s+=N(e,t)),e.dump&&u===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=o,e.dump=s||"[]"}(e,m,e.dump,r),d&&(e.dump="&ref_"+c+e.dump)):(function(e,t,n){var a,i,r="",s=e.tag;for(a=0,i=n.length;a<i;a+=1)Z(e,t,n[a],!1,!1)&&(0!==a&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=s,e.dump="["+r+"]"}(e,m,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump))}else{if("[object String]"!==l){if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&X(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function ee(e,t){var n,a,i=[],r=[];for(te(e,i,r),n=0,a=r.length;n<a;n+=1)t.duplicates.push(i[r[n]]);t.usedDuplicates=new Array(a)}function te(e,t,n){var a,i,r;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,r=e.length;i<r;i+=1)te(e[i],t,n);else for(i=0,r=(a=Object.keys(e)).length;i<r;i+=1)te(e[a[i]],t,n)}function ne(e,t){var n=new L(t=t||{});return n.noRefs||ee(e,n),Z(n,0,e,!0,!0)?n.dump+"\n":""}e.exports.dump=ne,e.exports.safeDump=function(e,t){return ne(e,a.extend({schema:s},t))}},function(e,t,n){const a=n(48);e.exports=(e,t)=>new a(e,t).major},function(e,t,n){const a=n(48);e.exports=(e,t)=>new a(e,t).minor},function(e,t,n){const a=n(48);e.exports=(e,t)=>new a(e,t).patch},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(170);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return a.AllSubstringsIndexStrategy}}),Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return a.ExactWordIndexStrategy}}),Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return a.PrefixIndexStrategy}});var i=n(171);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return i.CaseSensitiveSanitizer}}),Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return i.LowerCaseSanitizer}});var r=n(205);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return r.TfIdfSearchIndex}}),Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return r.UnorderedSearchIndex}});var s=n(207);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return s.SimpleTokenizer}}),Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return s.StemmingTokenizer}}),Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return s.StopWordsTokenizer}});var o=n(292);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});var l=n(208);Object.defineProperty(t,"StopWordsMap",{enumerable:!0,get:function(){return l.StopWordsMap}});var c=n(293);Object.defineProperty(t,"TokenHighlighter",{enumerable:!0,get:function(){return c.TokenHighlighter}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.AllSubstringsIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"expandToken",value:function(e){for(var t,n=[],a=0,i=e.length;a<i;++a){t="";for(var r=a;r<i;++r)t+=e.charAt(r),n.push(t)}return n}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.ExactWordIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"expandToken",value:function(e){return e?[e]:[]}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.PrefixIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"expandToken",value:function(e){for(var t=[],n="",a=0,i=e.length;a<i;++a)n+=e.charAt(a),t.push(n);return t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.CaseSensitiveSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"sanitize",value:function(e){return e?e.trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.LowerCaseSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"sanitize",value:function(e){return e?e.toLocaleLowerCase().trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TfIdfSearchIndex=void 0;var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=(a=n(206))&&a.__esModule?a:{default:a};t.TfIdfSearchIndex=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uidFieldName=t,this._tokenToIdfCache={},this._tokenMap={}}return r(e,[{key:"indexDocument",value:function(e,t,n){this._tokenToIdfCache={};var a,r=this._tokenMap;"object"!==i(r[e])?r[e]=a={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(a=r[e]).$totalNumOccurrences++;var s=a.$uidMap;"object"!==i(s[t])?(a.$numDocumentOccurrences++,s[t]={$document:n,$numTokenOccurrences:1}):s[t].$numTokenOccurrences++}},{key:"search",value:function(e,t){for(var n={},a=0,r=e.length;a<r;a++){var s,o=e[a],l=this._tokenMap[o];if(!l)return[];if(0===a)for(var c=0,u=(s=Object.keys(l.$uidMap)).length;c<u;c++)n[d=s[c]]=l.$uidMap[d].$document;else for(c=0,u=(s=Object.keys(n)).length;c<u;c++){var d=s[c];"object"!==i(l.$uidMap[d])&&delete n[d]}}var p=[];for(var d in n)p.push(n[d]);var m=this._createCalculateTfIdf();return p.sort((function(n,a){return m(e,a,t)-m(e,n,t)}))}},{key:"_createCalculateIdf",value:function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,a){if(!t[n]){var i=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(a.length/(1+i))}return t[n]}}},{key:"_createCalculateTfIdf",value:function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(a,i,r){for(var o=0,l=0,c=a.length;l<c;++l){var u,d=a[l],p=n(d,r);p===1/0&&(p=0),u=t instanceof Array?i&&(0,s.default)(i,t):i&&i[t],o+=(void 0!==e[d]&&void 0!==e[d].$uidMap[u]?e[d].$uidMap[u].$numTokenOccurrences:0)*p}return o}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.UnorderedSearchIndex=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenToUidToDocumentMap={}}return i(e,[{key:"indexDocument",value:function(e,t,n){"object"!==a(this._tokenToUidToDocumentMap[e])&&(this._tokenToUidToDocumentMap[e]={}),this._tokenToUidToDocumentMap[e][t]=n}},{key:"search",value:function(e,t){for(var n={},i=this._tokenToUidToDocumentMap,r=0,s=e.length;r<s;r++){var o=i[e[r]];if(!o)return[];if(0===r)for(var l=0,c=(d=Object.keys(o)).length;l<c;l++)n[u=d[l]]=o[u];else for(l=0,c=(d=Object.keys(n)).length;l<c;l++){var u=d[l];"object"!==a(o[u])&&delete n[u]}}var d,p=[];for(r=0,c=(d=Object.keys(n)).length;r<c;r++)u=d[r],p.push(n[u]);return p}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=/[^a-zа-яё0-9\-']+/i;t.SimpleTokenizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"tokenize",value:function(e){return e.split(i).filter((function(e){return e}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.StemmingTokenizer=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stemmingFunction=t,this._tokenizer=n}return a(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).map(this._stemmingFunction)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWordsTokenizer=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(208);t.StopWordsTokenizer=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenizer=t}return a(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).filter((function(e){return!i.StopWordsMap[e]}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=(a=n(206))&&a.__esModule?a:{default:a},s=n(170),o=n(171),l=n(205),c=n(207);t.Search=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=t,this._indexStrategy=new s.PrefixIndexStrategy,this._searchIndex=new l.TfIdfSearchIndex(t),this._sanitizer=new o.LowerCaseSanitizer,this._tokenizer=new c.SimpleTokenizer,this._documents=[],this._searchableFields=[]}return i(e,[{key:"addDocument",value:function(e){this.addDocuments([e])}},{key:"addDocuments",value:function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)}},{key:"addIndex",value:function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])}},{key:"search",value:function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)}},{key:"indexDocuments_",value:function(e,t){this._initialized=!0;for(var n=this._indexStrategy,a=this._sanitizer,i=this._searchIndex,s=this._tokenizer,o=this._uidFieldName,l=0,c=e.length;l<c;l++){var u,d=e[l];u=o instanceof Array?(0,r.default)(d,o):d[o];for(var p=0,m=t.length;p<m;p++){var h,f=t[p];if(null!=(h=f instanceof Array?(0,r.default)(d,f):d[f])&&"string"!=typeof h&&h.toString&&(h=h.toString()),"string"==typeof h)for(var g=s.tokenize(a.sanitize(h)),E=0,y=g.length;E<y;E++)for(var x=g[E],v=n.expandToken(x),k=0,b=v.length;k<b;k++){var S=v[k];i.indexDocument(S,u,d)}}}}},{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenHighlighter=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(170),r=n(171);t.TokenHighlighter=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._indexStrategy=t||new i.PrefixIndexStrategy,this._sanitizer=n||new r.LowerCaseSanitizer,this._wrapperTagName=a||"mark"}return a(e,[{key:"highlight",value:function(e,t){for(var n=this._wrapText("").length,a=Object.create(null),i=0,r=t.length;i<r;i++)for(var s=this._sanitizer.sanitize(t[i]),o=this._indexStrategy.expandToken(s),l=0,c=o.length;l<c;l++){var u=o[l];a[u]?a[u].push(s):a[u]=[s]}for(var d="",p="",m=0,h=(i=0,e.length);i<h;i++){var f=e.charAt(i);" "===f?(d="",p="",m=i+1):(d+=f,p+=this._sanitizer.sanitize(f)),a[p]&&a[p].indexOf(p)>=0&&(d=this._wrapText(d),e=e.substring(0,m)+d+e.substring(i+1),i+=n,h+=n)}return e}},{key:"_wrapText",value:function(e){var t=this._wrapperTagName;return"<"+t+">"+e+"</"+t+">"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i=!1,r={};t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var o=[],l=[],c=function(e){var t=a.createContext(r);i&&e&&(t.displayName=e),o.push(t),l.push(function(e){return function(){var t=a.useContext(e);if(i&&t===r){var n=e.displayName?"The context consumer of "+e.displayName+" must be wrapped with its corresponding Provider":"Component must be wrapped with Provider.";console.warn(n)}return t}}(t))};n.length?n.forEach((function(e){return c(e.name)})):c(e.name);var u=function(t){for(var i=t.children,r=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["children"]),s=e(r),l=i,c=0;c<o.length;c+=1){var u=o[c],d=n[c]||function(e){return e};l=a.createElement(u.Provider,{value:d(s)},l)}return l};return i&&e.name&&(u.displayName="Constate"),[u].concat(l)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(36)(3706)},function(e,t,n){e.exports=n(36)(1069)},function(e,t,n){"use strict";e.exports=function(e){var t=this;this.Parser=function(n){return a(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}};var a=n(380)},function(e,t,n){"use strict";e.exports=n(381)},function(e,t,n){"use strict";e.exports=function(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){var t=e||{},n=function(e,t){for(var n=-1;++n<t.length;)m(e,t[n]);return e}({canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:g(T),autolinkProtocol:b,autolinkEmail:b,atxHeading:g(w),blockQuote:g((function(){return{type:"blockquote",children:[]}})),characterEscape:b,characterReference:b,codeFenced:g(D),codeFencedFenceInfo:E,codeFencedFenceMeta:E,codeIndented:g(D,E),codeText:g((function(){return{type:"inlineCode",value:""}}),E),codeTextData:b,data:b,codeFlowValue:b,definition:g((function(){return{type:"definition",identifier:"",label:null,title:null,url:""}})),definitionDestinationString:E,definitionLabelString:E,definitionTitleString:E,emphasis:g((function(){return{type:"emphasis",children:[]}})),hardBreakEscape:g(A),hardBreakTrailing:g(A),htmlFlow:g(M,E),htmlFlowData:b,htmlText:g(M,E),htmlTextData:b,image:g((function(){return{type:"image",title:null,url:"",alt:null}})),label:E,link:g(T),listItem:g((function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}})),listItemValue:function(e){h("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),u("expectingFirstListItemValue"))},listOrdered:g(P,(function(){u("expectingFirstListItemValue",!0)})),listUnordered:g(P),paragraph:g((function(){return{type:"paragraph",children:[]}})),reference:function(){u("referenceType","collapsed")},referenceString:E,resourceDestinationString:E,resourceTitleString:E,setextHeading:g(w),strong:g((function(){return{type:"strong",children:[]}})),thematicBreak:g((function(){return{type:"thematicBreak"}}))},exit:{atxHeading:x(),atxHeadingSequence:function(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)},autolink:x(),autolinkEmail:function(e){S.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){S.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:x(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:C,characterReferenceMarkerNumeric:C,characterReferenceValue:function(e){var t,n,a=this.sliceSerialize(e),i=h("characterReferenceType");i?(t=o(a,"characterReferenceMarkerNumeric"===i?10:16),u("characterReferenceType")):t=d(a),(n=this.stack.pop()).value+=t,n.position.end=f(e.end)},codeFenced:x((function(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")})),codeFencedFence:function(){h("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))},codeFencedFenceInfo:function(){var e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){var e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:S,codeIndented:x((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeText:x((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),codeTextData:S,data:S,definition:x(),definitionDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:x(),hardBreakEscape:x(F),hardBreakTrailing:x(F),htmlFlow:x((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlFlowData:S,htmlText:x((function(){var e=this.resume();this.stack[this.stack.length-1].value=e})),htmlTextData:S,image:x((function(){var e=this.stack[this.stack.length-1];h("inReference")?(e.type+="Reference",e.referenceType=h("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),u("referenceType")})),label:function(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,u("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t},labelText:function(e){this.stack[this.stack.length-2].identifier=s(this.sliceSerialize(e)).toLowerCase()},lineEnding:function(e){var t=this.stack[this.stack.length-1];if(h("atHardBreak"))return t.children[t.children.length-1].position.end=f(e.end),void u("atHardBreak");!h("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(b.call(this,e),S.call(this,e))},link:x((function(){var e=this.stack[this.stack.length-1];h("inReference")?(e.type+="Reference",e.referenceType=h("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),u("referenceType")})),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:function(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase(),u("referenceType","full")},resourceDestinationString:function(){var e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){var e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){u("inReference")},setextHeading:x((function(){u("setextHeadingSlurpLineEnding")})),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2},setextHeadingText:function(){u("setextHeadingSlurpLineEnding",!0)},strong:x(),thematicBreak:x()}},t.mdastExtensions||[]),l={};return function(e){for(var t,a=[{type:"root",children:[]}],s=[],o=[],l=-1,d={stack:a,tokenStack:s,config:n,enter:y,exit:v,buffer:E,resume:k,setData:u,getData:h};++l<e.length;)"listOrdered"!==e[l][1].type&&"listUnordered"!==e[l][1].type||("enter"===e[l][0]?o.push(l):l=c(e,o.pop(l),l));for(l=-1;++l<e.length;)t=n[e[l][0]],r.call(t,e[l][1].type)&&t[e[l][1].type].call(i({sliceSerialize:e[l][2].sliceSerialize},d),e[l][1]);if(s.length)throw new Error("Cannot close document, a token (`"+s[s.length-1].type+"`, "+p({start:s[s.length-1].start,end:s[s.length-1].end})+") is still open");return a[0].position={start:f(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:f(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},a[0]};function c(e,t,n){for(var a,i,r,s,o,l,c,u=t-1,d=-1,p=!1;++u<=n;)if("listUnordered"===(o=e[u])[1].type||"listOrdered"===o[1].type||"blockQuote"===o[1].type?("enter"===o[0]?d++:d--,c=void 0):"lineEndingBlank"===o[1].type?"enter"===o[0]&&(!a||c||d||l||(l=u),c=void 0):"linePrefix"===o[1].type||"listItemValue"===o[1].type||"listItemMarker"===o[1].type||"listItemPrefix"===o[1].type||"listItemPrefixWhitespace"===o[1].type||(c=void 0),!d&&"enter"===o[0]&&"listItemPrefix"===o[1].type||-1===d&&"exit"===o[0]&&("listUnordered"===o[1].type||"listOrdered"===o[1].type)){if(a){for(i=u,r=void 0;i--;)if("lineEnding"===(s=e[i])[1].type||"lineEndingBlank"===s[1].type){if("exit"===s[0])continue;r&&(e[r][1].type="lineEndingBlank",p=!0),s[1].type="lineEnding",r=i}else if("linePrefix"!==s[1].type&&"blockQuotePrefix"!==s[1].type&&"blockQuotePrefixWhitespace"!==s[1].type&&"blockQuoteMarker"!==s[1].type&&"listItemIndent"!==s[1].type)break;l&&(!r||l<r)&&(a._spread=!0),a.end=f(r?e[r][1].start:o[1].end),e.splice(r||u,0,["exit",a,o[2]]),u++,n++}"listItemPrefix"===o[1].type&&(a={type:"listItem",_spread:!1,start:f(o[1].start)},e.splice(u,0,["enter",a,o[2]]),u++,n++,l=void 0,c=!0)}return e[t][1]._spread=p,n}function u(e,t){l[e]=t}function h(e){return l[e]}function f(e){return{line:e.line,column:e.column,offset:e.offset}}function g(e,t){return function(n){y.call(this,e(n),n),t&&t.call(this,n)}}function E(){this.stack.push({type:"fragment",children:[]})}function y(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:f(t.start)},e}function x(e){return function(t){e&&e.call(this,t),v.call(this,t)}}function v(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+p({start:e.start,end:e.end})+"): it’s not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+p({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+p({start:n.start,end:n.end})+") is open");return t.position.end=f(e.end),t}function k(){return a(this.stack.pop())}function b(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:f(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function S(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=f(e.end)}function F(){u("atHardBreak",!0)}function C(e){u("characterReferenceType",e.type)}function D(){return{type:"code",lang:null,meta:null,value:""}}function w(){return{type:"heading",depth:void 0,children:[]}}function A(){return{type:"break"}}function M(){return{type:"html",value:""}}function T(){return{type:"link",title:null,url:"",children:[]}}function P(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}}(n)(u(l(n).document().write(c()(e,t,!0))))};var a=n(382),i=n(146),r=n(232),s=n(179),o=n(383),l=n(384),c=n(419),u=n(420),d=n(238),p=n(421);function m(e,t){var n,a;for(n in t)a=r.call(e,n)?e[n]:e[n]={},"canContainEols"===n?e[n]=[].concat(a,t[n]):Object.assign(a,t[n])}},function(e,t,n){"use strict";function a(e){return e&&(e.value||e.alt||e.title||"children"in e&&i(e.children)||"length"in e&&i(e))||""}function i(e){for(var t=[],n=-1;++n<e.length;)t[n]=a(e[n]);return t.join("")}e.exports=a},function(e,t,n){"use strict";var a=n(153);e.exports=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535==(65535&n)||65534==(65535&n)||n>1114111?"�":a(n)}},function(e,t,n){"use strict";var a=n(385),i=n(386),r=n(387),s=n(235),o=n(236),l=n(390),c=n(180),u=n(393);e.exports=function(e){var t={defined:[],constructs:o([u].concat(c((e||{}).extensions))),content:n(a),document:n(i),flow:n(r),string:n(s.string),text:n(s.text)};return t;function n(e){return function(n){return l(t,e,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(111),i=n(112);t.tokenize=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null!==t)return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i(e,n,"linePrefix");e.consume(t)}),(function(t){return e.enter("paragraph"),r(t)}));return n;function r(n){var a=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=a),t=a,s(n)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):a(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(111),i=n(112),r=n(154),s={tokenize:function(e,t,n){return i(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},o={tokenize:function(e,t,n){return i(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};t.tokenize=function(e){var t,n,i,l=this,c=[],u=0,d={tokenize:function(e,a){var i=0;return t={},u;function u(a){return i<c.length?(l.containerState=c[i][1],e.attempt(c[i][0].continuation,d,p)(a)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,f(a)):(l.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,l.containerState={},e.attempt(s,h,f)(a))}function d(e){return i++,l.containerState._closeFlow?h(e):u(e)}function p(t){return n.currentConstruct&&n.currentConstruct.lazy?(l.containerState={},e.attempt(s,h,e.attempt(o,h,e.check(r,h,m)))(t)):h(t)}function m(e){return i=c.length,t.lazy=!0,t.flowContinue=!0,f(e)}function h(e){return t.flowEnd=!0,f(e)}function f(e){return t.continued=i,l.interrupt=l.containerState=void 0,a(e)}},partial:!0};return p;function p(t){return u<c.length?(l.containerState=c[u][1],e.attempt(c[u][0].continuation,m,h)(t)):h(t)}function m(e){return u++,p(e)}function h(a){return t&&t.flowContinue?g(a):(l.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,l.containerState={},e.attempt(s,f,g)(a))}function f(e){return c.push([l.currentConstruct,l.containerState]),l.containerState=void 0,h(e)}function g(t){return null===t?(v(0,!0),void e.consume(t)):(n=n||l.parser.flow(l.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:n}),E(t))}function E(t){return null===t?(x(e.exit("chunkFlow")),g(t)):a(t)?(e.consume(t),x(e.exit("chunkFlow")),e.check(d,y)):(e.consume(t),E)}function y(e){return v(t.continued,t&&t.flowEnd),u=0,p(e)}function x(e){i&&(i.next=e),i=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(l.sliceStream(e))}function v(t,a){var r=c.length;for(n&&a&&(n.write([null]),i=n=void 0);r-- >t;)l.containerState=c[r][1],c[r][0].exit.call(l,e);c.length=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(388),i=n(112),r=n(154);t.tokenize=function(e){var t=this,n=e.attempt(r,(function(a){if(null!==a)return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n;e.consume(a)}),e.attempt(this.parser.constructs.flowInitial,s,i(e,e.attempt(this.parser.constructs.flow,s,e.attempt(a,s)),"linePrefix")));return n;function s(a){if(null!==a)return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(a)}}},function(e,t,n){"use strict";var a=n(111),i=n(147),r=n(234),s=n(112),o={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(t)};function i(t){return null===t?r(t):a(t)?e.check(l,s,r)(t):(e.consume(t),i)}function r(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),i}},resolve:function(e){return r(e),e},interruptible:!0,lazy:!0},l={tokenize:function(e,t,n){var r=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s(e,o,"linePrefix")};function o(s){return null===s||a(s)?n(s):r.parser.constructs.disable.null.indexOf("codeIndented")>-1||i(r.events,"linePrefix")<4?e.interrupt(r.parser.constructs.flow,n,t)(s):t(s)}},partial:!0};e.exports=o},function(e,t,n){"use strict";var a=[].splice;e.exports=a},function(e,t,n){"use strict";var a=n(146),i=n(111),r=n(181),s=n(127),o=n(180),l=n(155),c=n(391),u=n(135),d=n(392);e.exports=function(e,t,n){var p=n?u(n):{line:1,column:1,offset:0},m={},h=[],f=[],g=[],E={consume:function(e){i(e)?(p.line++,p.column=1,p.offset+=-3===e?2:1,D()):-1!==e&&(p.column++,p.offset++),p._bufferIndex<0?p._index++:(p._bufferIndex++,p._bufferIndex===f[p._index].length&&(p._bufferIndex=-1,p._index++)),y.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=k(),y.events.push(["enter",n,y]),g.push(n),n},exit:function(e){var t=g.pop();return t.end=k(),y.events.push(["exit",t,y]),t},attempt:F((function(e,t){C(e,t.from)})),check:F(S),interrupt:F(S,{interrupt:!0}),lazy:F(S,{lazy:!0})},y={previous:null,events:[],parser:e,sliceStream:v,sliceSerialize:function(e){return c(v(e))},now:k,defineSkip:function(e){m[e.line]=e.column,D()},write:function(e){return f=r(f,e),function(){for(var e,t;p._index<f.length;)if("string"==typeof(t=f[p._index]))for(e=p._index,p._bufferIndex<0&&(p._bufferIndex=0);p._index===e&&p._bufferIndex<t.length;)b(t.charCodeAt(p._bufferIndex));else b(t)}(),null!==f[f.length-1]?[]:(C(t,0),y.events=l(h,y.events,y),y.events)}},x=t.tokenize.call(y,E);return t.resolveAll&&h.push(t),p._index=0,p._bufferIndex=-1,y;function v(e){return d(f,e)}function k(){return u(p)}function b(e){x=x(e)}function S(e,t){t.restore()}function F(e,t){return function(n,i,r){var s,l,c,u;return n.tokenize||"length"in n?d(o(n)):function(e){return e in n||null in n?d(n.null?o(n[e]).concat(o(n.null)):n[e])(e):r(e)};function d(e){return s=e,m(e[l=0])}function m(e){return function(n){var i,r,s,o,l;return i=k(),r=y.previous,s=y.currentConstruct,o=y.events.length,l=Array.from(g),u={restore:function(){p=i,y.previous=r,y.currentConstruct=s,y.events.length=o,g=l,D()},from:o},c=e,e.partial||(y.currentConstruct=e),e.name&&y.parser.constructs.disable.null.indexOf(e.name)>-1?f():e.tokenize.call(t?a({},y,t):y,E,h,f)(n)}}function h(t){return e(c,u),i}function f(e){return u.restore(),++l<s.length?m(s[l]):r}}}function C(e,t){e.resolveAll&&h.indexOf(e)<0&&h.push(e),e.resolve&&s(y.events,t,y.events.length-t,e.resolve(y.events.slice(t),y)),e.resolveTo&&(y.events=e.resolveTo(y.events,y))}function D(){p.line in m&&p.column<2&&(p.column=m[p.line],p.offset+=m[p.line]-1)}}},function(e,t,n){"use strict";var a=n(153);e.exports=function(e){for(var t,n,i,r=-1,s=[];++r<e.length;){if("string"==typeof(t=e[r]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(i)continue;n=" "}else n=a(t);i=-2===t,s.push(n)}return s.join("")}},function(e,t,n){"use strict";e.exports=function(e,t){var n,a=t.start._index,i=t.start._bufferIndex,r=t.end._index,s=t.end._bufferIndex;return a===r?n=[e[a].slice(i,s)]:(n=e.slice(a,r),i>-1&&(n[0]=n[0].slice(i)),s>0&&n.push(e[r].slice(0,s))),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(235),i=n(394),r=n(397),s=n(399),o=n(400),l=n(402),c=n(404),u=n(405),d=n(406),p=n(407),m=n(408),h=n(409),f=n(410),g=n(413),E=n(185),y=n(414),x=n(415),v=n(416),k=n(417),b=n(418),S=n(244),F={42:k,43:k,45:k,48:k,49:k,50:k,51:k,52:k,53:k,54:k,55:k,56:k,57:k,62:s},C={91:p},D={"-2":u,"-1":u,32:u},w={35:h,42:S,45:[b,S],60:f,61:b,95:S,96:c,126:c},A={38:l,92:o},M={"-5":v,"-4":v,"-3":v,33:y,38:l,42:i,60:[r,g],91:x,92:[m,o],93:E,95:i,96:d},T={null:[i,a.resolver]};t.contentInitial=C,t.disable={null:[]},t.document=F,t.flow=w,t.flowInitial=D,t.insideSpan=T,t.string=A,t.text=M},function(e,t,n){"use strict";var a=n(181),i=n(127),r=n(237),s=n(396),o=n(155),l=n(135),c={name:"attention",tokenize:function(e,t){var n,a=r(this.previous);return function(t){return e.enter("attentionSequence"),n=t,i(t)};function i(s){var o,l,c,u;return s===n?(e.consume(s),i):(o=e.exit("attentionSequence"),c=!(l=r(s))||2===l&&a,u=!a||2===a&&l,o._open=42===n?c:c&&(a||!u),o._close=42===n?u:u&&(l||!c),t(s))}},resolveAll:function(e,t){for(var n,r,c,u,d,p,m,h,f=-1;++f<e.length;)if("enter"===e[f][0]&&"attentionSequence"===e[f][1].type&&e[f][1]._close)for(n=f;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[f][1]).charCodeAt(0)){if((e[n][1]._close||e[f][1]._open)&&(e[f][1].end.offset-e[f][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[f][1].end.offset-e[f][1].start.offset)%3))continue;u={type:(p=e[n][1].end.offset-e[n][1].start.offset>1&&e[f][1].end.offset-e[f][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:s(l(e[n][1].end),-p),end:l(e[n][1].end)},d={type:p>1?"strongSequence":"emphasisSequence",start:l(e[f][1].start),end:s(l(e[f][1].start),p)},c={type:p>1?"strongText":"emphasisText",start:l(e[n][1].end),end:l(e[f][1].start)},r={type:p>1?"strong":"emphasis",start:l(u.start),end:l(d.end)},e[n][1].end=l(u.start),e[f][1].start=l(d.end),m=[],e[n][1].end.offset-e[n][1].start.offset&&(m=a(m,[["enter",e[n][1],t],["exit",e[n][1],t]])),m=a(m,[["enter",r,t],["enter",u,t],["exit",u,t],["enter",c,t]]),m=a(m,o(t.parser.constructs.insideSpan.null,e.slice(n+1,f),t)),m=a(m,[["exit",c,t],["enter",d,t],["exit",d,t],["exit",r,t]]),e[f][1].end.offset-e[f][1].start.offset?(h=2,m=a(m,[["enter",e[f][1],t],["exit",e[f][1],t]])):h=0,i(e,n-1,f-n+3,m),f=n+m.length-h-2;break}for(f=-1;++f<e.length;)"attentionSequence"===e[f][1].type&&(e[f][1].type="data");return e}};e.exports=c},function(e,t,n){"use strict";e.exports=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/},function(e,t,n){"use strict";e.exports=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e}},function(e,t,n){"use strict";var a=n(156),i=n(148),r=n(398),s=n(184),o={name:"autolink",tokenize:function(e,t,n){var o=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l};function l(t){return a(t)?(e.consume(t),c):r(t)?p(t):n(t)}function c(e){return 43===e||45===e||46===e||i(e)?u(e):p(e)}function u(t){return 58===t?(e.consume(t),d):(43===t||45===t||46===t||i(t))&&o++<32?(e.consume(t),u):p(t)}function d(t){return 62===t?(e.exit("autolinkProtocol"),g(t)):32===t||60===t||s(t)?n(t):(e.consume(t),d)}function p(t){return 64===t?(e.consume(t),o=0,m):r(t)?(e.consume(t),p):n(t)}function m(e){return i(e)?h(e):n(e)}function h(t){return 46===t?(e.consume(t),o=0,m):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",g(t)):f(t)}function f(t){return(45===t||i(t))&&o++<63?(e.consume(t),45===t?f:h):n(t)}function g(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};e.exports=o},function(e,t,n){"use strict";var a=n(133)(/[#-'*+\--9=?A-Z^-~]/);e.exports=a},function(e,t,n){"use strict";var a=n(126),i=n(112),r={name:"blockQuote",tokenize:function(e,t,n){var i=this;return function(t){return 62===t?(i.containerState.open||(e.enter("blockQuote",{_container:!0}),i.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),r):n(t)};function r(n){return a(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return i(e,e.attempt(r,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};e.exports=r},function(e,t,n){"use strict";var a=n(401),i={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i};function i(i){return a(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(i)}}};e.exports=i},function(e,t,n){"use strict";var a=n(133)(/[!-/:-@[-`{-~]/);e.exports=a},function(e,t,n){"use strict";var a=n(238),i=n(148),r=n(239),s=n(403);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=o(a),c={name:"characterReference",tokenize:function(e,t,n){var a,o,c=this,u=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),d};function d(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),a=31,o=i,m(t))}function p(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=s,m):(e.enter("characterReferenceValue"),a=7,o=r,m(t))}function m(r){var s;return 59===r&&u?(s=e.exit("characterReferenceValue"),o!==i||l.default(c.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(r),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(r)):o(r)&&u++<a?(e.consume(r),m):n(r)}}};e.exports=c},function(e,t,n){"use strict";var a=n(133)(/[\dA-Fa-f]/);e.exports=a},function(e,t,n){"use strict";var a=n(111),i=n(128),r=n(147),s=n(112),o={name:"codeFenced",tokenize:function(e,t,n){var o,l=this,c={tokenize:function(e,t,n){var i=0;return s(e,(function(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),r(t)}),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function r(t){return t===o?(e.consume(t),i++,r):i<d?n(t):(e.exit("codeFencedFenceSequence"),s(e,l,"whitespace")(t))}function l(i){return null===i||a(i)?(e.exit("codeFencedFence"),t(i)):n(i)}},partial:!0},u=r(this.events,"linePrefix"),d=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),o=t,p(t)};function p(t){return t===o?(e.consume(t),d++,p):(e.exit("codeFencedFenceSequence"),d<3?n(t):s(e,m,"whitespace")(t))}function m(t){return null===t||a(t)?E(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||i(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),s(e,f,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),h)}function f(t){return null===t||a(t)?E(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(t))}function g(t){return null===t||a(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),E(t)):96===t&&t===o?n(t):(e.consume(t),g)}function E(n){return e.exit("codeFencedFence"),l.interrupt?t(n):y(n)}function y(t){return null===t?v(t):a(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(c,v,u?s(e,y,"linePrefix",u+1):y)):(e.enter("codeFlowValue"),x(t))}function x(t){return null===t||a(t)?(e.exit("codeFlowValue"),y(t)):(e.consume(t),x)}function v(n){return e.exit("codeFenced"),t(n)}},concrete:!0};e.exports=o},function(e,t,n){"use strict";var a=n(111),i=n(127),r=n(147),s=n(112),o={name:"codeIndented",tokenize:function(e,t,n){return e.attempt(l,i,n);function i(n){return null===n?t(n):a(n)?e.attempt(l,i,t)(n):(e.enter("codeFlowValue"),r(n))}function r(t){return null===t||a(t)?(e.exit("codeFlowValue"),i(t)):(e.consume(t),r)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return i(e,0,0,[["enter",n,t]]),i(e,e.length,0,[["exit",n,t]]),e}},l={tokenize:function(e,t,n){var i=this;return s(e,(function o(l){return a(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s(e,o,"linePrefix",5)):r(i.events,"linePrefix")<4?n(l):t(l)}),"linePrefix",5)},partial:!0};e.exports=o},function(e,t,n){"use strict";var a=n(111),i={name:"codeText",tokenize:function(e,t,n){var i,r,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),o(t)};function o(t){return 96===t?(e.consume(t),s++,o):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):96===t?(r=e.enter("codeTextSequence"),i=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):a(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||a(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),c)}function u(n){return 96===n?(e.consume(n),i++,u):i===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(r.type="codeTextData",c(n))}},resolve:function(e){var t,n,a=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[a][1].type&&"space"!==e[a][1].type))for(t=i;++t<a;)if("codeTextData"===e[t][1].type){e[a][1].type=e[i][1].type="codeTextPadding",i+=2,a-=2;break}for(t=i-1,a++;++t<=a;)void 0===n?t!==a&&"lineEnding"!==e[t][1].type&&(n=t):t!==a&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),a-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};e.exports=i},function(e,t,n){"use strict";var a=n(111),i=n(128),r=n(179),s=n(240),o=n(241),l=n(112),c=n(242),u=n(243),d={name:"definition",tokenize:function(e,t,n){var i,u=this;return function(t){return e.enter("definition"),o.call(u,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function d(t){return i=r(u.sliceSerialize(u.events[u.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),c(e,s(e,e.attempt(p,l(e,m,"whitespace"),l(e,m,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function m(r){return null===r||a(r)?(e.exit("definition"),u.parser.defined.indexOf(i)<0&&u.parser.defined.push(i),t(r)):n(r)}}},p={tokenize:function(e,t,n){return function(t){return i(t)?c(e,r)(t):n(t)};function r(t){return 34===t||39===t||40===t?u(e,l(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function s(e){return null===e||a(e)?t(e):n(e)}},partial:!0};e.exports=d},function(e,t,n){"use strict";var a=n(111),i={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),i};function i(i){return a(i)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(i)):n(i)}}};e.exports=i},function(e,t,n){"use strict";var a=n(111),i=n(128),r=n(126),s=n(127),o=n(112),l={name:"headingAtx",tokenize:function(e,t,n){var s=this,l=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),c(t)};function c(a){return 35===a&&l++<6?(e.consume(a),c):null===a||i(a)?(e.exit("atxHeadingSequence"),s.interrupt?t(a):u(a)):n(a)}function u(n){return 35===n?(e.enter("atxHeadingSequence"),d(n)):null===n||a(n)?(e.exit("atxHeading"),t(n)):r(n)?o(e,u,"whitespace")(n):(e.enter("atxHeadingText"),p(n))}function d(t){return 35===t?(e.consume(t),d):(e.exit("atxHeadingSequence"),u(t))}function p(t){return null===t||35===t||i(t)?(e.exit("atxHeadingText"),u(t)):(e.consume(t),p)}},resolve:function(e,t){var n,a,i=e.length-2,r=3;return"whitespace"===e[r][1].type&&(r+=2),i-2>r&&"whitespace"===e[i][1].type&&(i-=2),"atxHeadingSequence"===e[i][1].type&&(r===i-1||i-4>r&&"whitespace"===e[i-2][1].type)&&(i-=r+1===i?2:4),i>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[i][1].end},a={type:"chunkText",start:e[r][1].start,end:e[i][1].end,contentType:"text"},s(e,r,i-r+1,[["enter",n,t],["enter",a,t],["exit",a,t],["exit",n,t]])),e}};e.exports=l},function(e,t,n){"use strict";var a=n(156),i=n(148),r=n(111),s=n(128),o=n(126),l=n(153),c=n(411),u=n(412),d=n(154),p={name:"htmlFlow",tokenize:function(e,t,n){var d,p,h,f,g,E=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),y};function y(i){return 33===i?(e.consume(i),x):47===i?(e.consume(i),b):63===i?(e.consume(i),d=3,E.interrupt?t:H):a(i)?(e.consume(i),h=l(i),p=!0,S):n(i)}function x(i){return 45===i?(e.consume(i),d=2,v):91===i?(e.consume(i),d=5,h="CDATA[",f=0,k):a(i)?(e.consume(i),d=4,E.interrupt?t:H):n(i)}function v(a){return 45===a?(e.consume(a),E.interrupt?t:H):n(a)}function k(a){return a===h.charCodeAt(f++)?(e.consume(a),f===h.length?E.interrupt?t:B:k):n(a)}function b(t){return a(t)?(e.consume(t),h=l(t),S):n(t)}function S(a){return null===a||47===a||62===a||s(a)?47!==a&&p&&u.indexOf(h.toLowerCase())>-1?(d=1,E.interrupt?t(a):B(a)):c.indexOf(h.toLowerCase())>-1?(d=6,47===a?(e.consume(a),F):E.interrupt?t(a):B(a)):(d=7,E.interrupt?n(a):p?D(a):C(a)):45===a||i(a)?(e.consume(a),h+=l(a),S):n(a)}function F(a){return 62===a?(e.consume(a),E.interrupt?t:B):n(a)}function C(t){return o(t)?(e.consume(t),C):O(t)}function D(t){return 47===t?(e.consume(t),O):58===t||95===t||a(t)?(e.consume(t),w):o(t)?(e.consume(t),D):O(t)}function w(t){return 45===t||46===t||58===t||95===t||i(t)?(e.consume(t),w):A(t)}function A(t){return 61===t?(e.consume(t),M):o(t)?(e.consume(t),A):D(t)}function M(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),g=t,T):o(t)?(e.consume(t),M):(g=void 0,P(t))}function T(t){return t===g?(e.consume(t),I):null===t||r(t)?n(t):(e.consume(t),T)}function P(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||s(t)?A(t):(e.consume(t),P)}function I(e){return 47===e||62===e||o(e)?D(e):n(e)}function O(t){return 62===t?(e.consume(t),j):n(t)}function j(t){return o(t)?(e.consume(t),j):null===t||r(t)?B(t):n(t)}function B(t){return 45===t&&2===d?(e.consume(t),N):60===t&&1===d?(e.consume(t),z):62===t&&4===d?(e.consume(t),K):63===t&&3===d?(e.consume(t),H):93===t&&5===d?(e.consume(t),U):!r(t)||6!==d&&7!==d?null===t||r(t)?L(t):(e.consume(t),B):e.check(m,K,L)(t)}function L(t){return e.exit("htmlFlowData"),_(t)}function _(t){return null===t?W(t):r(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_):(e.enter("htmlFlowData"),B(t))}function N(t){return 45===t?(e.consume(t),H):B(t)}function z(t){return 47===t?(e.consume(t),h="",R):B(t)}function R(t){return 62===t&&u.indexOf(h.toLowerCase())>-1?(e.consume(t),K):a(t)&&h.length<8?(e.consume(t),h+=l(t),R):B(t)}function U(t){return 93===t?(e.consume(t),H):B(t)}function H(t){return 62===t?(e.consume(t),K):B(t)}function K(t){return null===t||r(t)?(e.exit("htmlFlowData"),W(t)):(e.consume(t),K)}function W(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){for(var t=e.length;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},concrete:!0},m={tokenize:function(e,t,n){return function(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(d,t,n)}},partial:!0};e.exports=p},function(e,t,n){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t,n){"use strict";e.exports=["pre","script","style","textarea"]},function(e,t,n){"use strict";var a=n(156),i=n(148),r=n(111),s=n(128),o=n(126),l=n(112),c={name:"htmlText",tokenize:function(e,t,n){var c,u,d,p,m=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),h};function h(t){return 33===t?(e.consume(t),f):47===t?(e.consume(t),A):63===t?(e.consume(t),D):a(t)?(e.consume(t),P):n(t)}function f(t){return 45===t?(e.consume(t),g):91===t?(e.consume(t),u="CDATA[",d=0,k):a(t)?(e.consume(t),C):n(t)}function g(t){return 45===t?(e.consume(t),E):n(t)}function E(t){return null===t||62===t?n(t):45===t?(e.consume(t),y):x(t)}function y(e){return null===e||62===e?n(e):x(e)}function x(t){return null===t?n(t):45===t?(e.consume(t),v):r(t)?(p=x,z(t)):(e.consume(t),x)}function v(t){return 45===t?(e.consume(t),U):x(t)}function k(t){return t===u.charCodeAt(d++)?(e.consume(t),d===u.length?b:k):n(t)}function b(t){return null===t?n(t):93===t?(e.consume(t),S):r(t)?(p=b,z(t)):(e.consume(t),b)}function S(t){return 93===t?(e.consume(t),F):b(t)}function F(t){return 62===t?U(t):93===t?(e.consume(t),F):b(t)}function C(t){return null===t||62===t?U(t):r(t)?(p=C,z(t)):(e.consume(t),C)}function D(t){return null===t?n(t):63===t?(e.consume(t),w):r(t)?(p=D,z(t)):(e.consume(t),D)}function w(e){return 62===e?U(e):D(e)}function A(t){return a(t)?(e.consume(t),M):n(t)}function M(t){return 45===t||i(t)?(e.consume(t),M):T(t)}function T(t){return r(t)?(p=T,z(t)):o(t)?(e.consume(t),T):U(t)}function P(t){return 45===t||i(t)?(e.consume(t),P):47===t||62===t||s(t)?I(t):n(t)}function I(t){return 47===t?(e.consume(t),U):58===t||95===t||a(t)?(e.consume(t),O):r(t)?(p=I,z(t)):o(t)?(e.consume(t),I):U(t)}function O(t){return 45===t||46===t||58===t||95===t||i(t)?(e.consume(t),O):j(t)}function j(t){return 61===t?(e.consume(t),B):r(t)?(p=j,z(t)):o(t)?(e.consume(t),j):I(t)}function B(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,L):r(t)?(p=B,z(t)):o(t)?(e.consume(t),B):(e.consume(t),c=void 0,N)}function L(t){return t===c?(e.consume(t),_):null===t?n(t):r(t)?(p=L,z(t)):(e.consume(t),L)}function _(e){return 62===e||47===e||s(e)?I(e):n(e)}function N(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||s(t)?I(t):(e.consume(t),N)}function z(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l(e,R,"linePrefix",m.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function R(t){return e.enter("htmlTextData"),p(t)}function U(a){return 62===a?(e.consume(a),e.exit("htmlTextData"),e.exit("htmlText"),t):n(a)}}};e.exports=c},function(e,t,n){"use strict";var a={name:"labelStartImage",tokenize:function(e,t,n){var a=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in a.parser.constructs?n(e):t(e)}},resolveAll:n(185).resolveAll};e.exports=a},function(e,t,n){"use strict";var a={name:"labelStartLink",tokenize:function(e,t,n){var a=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in a.parser.constructs?n(e):t(e)}},resolveAll:n(185).resolveAll};e.exports=a},function(e,t,n){"use strict";var a=n(112),i={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),a(e,t,"linePrefix")}}};e.exports=i},function(e,t,n){"use strict";var a=n(239),i=n(126),r=n(147),s=n(233),o=n(112),l=n(154),c=n(244),u={name:"list",tokenize:function(e,t,n){var o=this,u=r(o.events,"linePrefix"),p=0;return function(t){var i=o.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!o.containerState.marker||t===o.containerState.marker:a(t)){if(o.containerState.type||(o.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(c,n,h)(t):h(t);if(!o.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),m(t)}return n(t)};function m(t){return a(t)&&++p<10?(e.consume(t),m):(!o.interrupt||p<2)&&(o.containerState.marker?t===o.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),h(t)):n(t)}function h(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||t,e.check(l,o.interrupt?n:f,e.attempt(d,E,g))}function f(e){return o.containerState.initialBlankLine=!0,u++,E(e)}function g(t){return i(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),E):n(t)}function E(n){return o.containerState.size=u+s(o.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var a=this;return a.containerState._closeFlow=void 0,e.check(l,(function(n){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,o(e,t,"listItemIndent",a.containerState.size+1)(n)}),(function(n){return a.containerState.furtherBlankLines||!i(n)?(a.containerState.furtherBlankLines=a.containerState.initialBlankLine=void 0,r(n)):(a.containerState.furtherBlankLines=a.containerState.initialBlankLine=void 0,e.attempt(p,t,r)(n))}));function r(i){return a.containerState._closeFlow=!0,a.interrupt=void 0,o(e,e.attempt(u,t,n),"linePrefix",a.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},d={tokenize:function(e,t,n){var a=this;return o(e,(function(e){return i(e)||!r(a.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",a.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},p={tokenize:function(e,t,n){var a=this;return o(e,(function(e){return r(a.events,"listItemIndent")===a.containerState.size?t(e):n(e)}),"listItemIndent",a.containerState.size+1)},partial:!0};e.exports=u},function(e,t,n){"use strict";var a=n(111),i=n(135),r=n(112),s={name:"setextUnderline",tokenize:function(e,t,n){for(var i,s,o=this,l=o.events.length;l--;)if("lineEnding"!==o.events[l][1].type&&"linePrefix"!==o.events[l][1].type&&"content"!==o.events[l][1].type){s="paragraph"===o.events[l][1].type;break}return function(t){return o.lazy||!o.interrupt&&!s?n(t):(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),i=t,c(t))};function c(t){return t===i?(e.consume(t),c):(e.exit("setextHeadingLineSequence"),r(e,u,"lineSuffix")(t))}function u(i){return null===i||a(i)?(e.exit("setextHeadingLine"),t(i)):n(i)}},resolveTo:function(e,t){for(var n,a,r,s,o=e.length;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(a=o)}else"content"===e[o][1].type&&e.splice(o,1),r||"definition"!==e[o][1].type||(r=o);return s={type:"setextHeading",start:i(e[a][1].start),end:i(e[e.length-1][1].end)},e[a][1].type="setextHeadingText",r?(e.splice(a,0,["enter",s,t]),e.splice(r+1,0,["exit",e[n][1],t]),e[n][1].end=i(e[r][1].end)):e[n][1]=s,e.push(["exit",s,t]),e}};e.exports=s},function(e,t,n){"use strict";var a=/[\0\t\n\r]/g;e.exports=function(){var e,t=!0,n=1,i="";return function(r,s,o){var l,c,u,d,p,m=[];for(r=i+r.toString(s),u=0,i="",t&&(65279===r.charCodeAt(0)&&u++,t=void 0);u<r.length;){if(a.lastIndex=u,d=(l=a.exec(r))?l.index:r.length,p=r.charCodeAt(d),!l){i=r.slice(u);break}if(10===p&&u===d&&e)m.push(-3),e=void 0;else if(e&&(m.push(-5),e=void 0),u<d&&(m.push(r.slice(u,d)),n+=d-u),0===p)m.push(65533),n++;else if(9===p)for(c=4*Math.ceil(n/4),m.push(-2);n++<c;)m.push(-1);else 10===p?(m.push(-4),n=1):(e=!0,n=1);u=d+1}return o&&(e&&m.push(-5),i&&m.push(i),m.push(null)),m}}},function(e,t,n){"use strict";var a=n(234);e.exports=function(e){for(;!a(e););return e}},function(e,t,n){e.exports=n(36)(3709)},function(e,t,n){e.exports=n(36)(2067)},function(e,t,n){e.exports=n(36)(1647)},function(e,t,n){const a=n(425);e.exports=function(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return e=>{a(e,"element",t)};function t(t,n,a){const i=t,r=a;let s;if(e.allowedElements?s=!e.allowedElements.includes(i.tagName):e.disallowedElements&&(s=e.disallowedElements.includes(i.tagName)),!s&&e.allowElement&&"number"==typeof n&&(s=!e.allowElement(i,n,r)),s&&"number"==typeof n)return e.unwrapDisallowed&&i.children?r.children.splice(n,1,...i.children):r.children.splice(n,1),n}}},function(e,t,n){e.exports=n(36)(365)},function(e,t){const n=["http","https","mailto","tel"];e.exports=function(e){const t=(e||"").trim(),a=t.charAt(0);if("#"===a||"/"===a)return t;const i=t.indexOf(":");if(-1===i)return t;let r=-1;for(;++r<n.length;){const e=n[r];if(i===e.length&&t.slice(0,e.length).toLowerCase()===e)return t}return r=t.indexOf("?"),-1!==r&&i>r?t:(r=t.indexOf("#"),-1!==r&&i>r?t:"javascript:void(0)")}},function(e,t,n){"use strict";const a=n(1),i=n(428),r=n(429),s=n(430),o=n(431),l=n(432),c=n(433),u=n(434);t.hastToReact=h,t.hastChildrenToReact=m;const d={}.hasOwnProperty,p=new Set(["table","thead","tbody","tfoot","tr"]);function m(e,t){const n=[];let a,i=-1;for(;++i<t.children.length;)a=t.children[i],"element"===a.type?n.push(h(e,a,i,t)):"text"===a.type?"element"===t.type&&p.has(t.tagName)&&"\n"===a.value||n.push(a.value):"raw"!==a.type||e.options.skipHtml||n.push(a.value);return n}function h(e,t,n,s){const o=e.options,l=e.schema,c=t.tagName,u={};let p,h=l;if("html"===l.space&&"svg"===c&&(h=r,e.schema=h),t.properties)for(p in t.properties)d.call(t.properties,p)&&g(u,p,t.properties[p],e);"ol"!==c&&"ul"!==c||e.listDepth++;const E=m(e,t);"ol"!==c&&"ul"!==c||e.listDepth--,e.schema=l;const y=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},x=o.components&&d.call(o.components,c)?o.components[c]:c,v="string"==typeof x||x===a.Fragment;if(!i.isValidElementType(x))throw new TypeError(`Component for name \`${c}\` not defined or is not renderable`);if(u.key=[c,y.start.line,y.start.column,n].join("-"),"a"===c&&o.linkTarget&&(u.target="function"==typeof o.linkTarget?o.linkTarget(u.href,t.children,u.title):o.linkTarget),"a"===c&&o.transformLinkUri&&(u.href=o.transformLinkUri(u.href,t.children,u.title)),v||"code"!==c||"element"!==s.type||"pre"===s.tagName||(u.inline=!0),v||"h1"!==c&&"h2"!==c&&"h3"!==c&&"h4"!==c&&"h5"!==c&&"h6"!==c||(u.level=parseInt(c.charAt(1),10)),"img"===c&&o.transformImageUri&&(u.src=o.transformImageUri(u.src,u.alt,u.title)),!v&&"li"===c&&"element"===s.type){const e=function(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if("element"===n.type&&"input"===n.tagName)return n}return null}(t);u.checked=e&&e.properties?Boolean(e.properties.checked):null,u.index=f(s,t),u.ordered="ol"===s.tagName}var k;return v||"ol"!==c&&"ul"!==c||(u.ordered="ol"===c,u.depth=e.listDepth),"td"!==c&&"th"!==c||(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),v||(u.isHeader="th"===c)),v||"tr"!==c||"element"!==s.type||(u.isHeader=Boolean("thead"===s.tagName)),o.sourcePos&&(u["data-sourcepos"]=[(k=y).start.line,":",k.start.column,"-",k.end.line,":",k.end.column].map((e=>String(e))).join("")),!v&&o.rawSourcePos&&(u.sourcePosition=t.position),!v&&o.includeElementIndex&&(u.index=f(s,t),u.siblingCount=f(s)),v||(u.node=t),E.length>0?a.createElement(x,u,E):a.createElement(x,u)}function f(e,t){let n=-1,a=0;for(;++n<e.children.length&&e.children[n]!==t;)"element"===e.children[n].type&&a++;return a}function g(e,t,n,a){const i=s(a.schema,t);let r=n;null!=r&&r==r&&(r&&"object"==typeof r&&"length"in r&&(r=(i.commaSeparated?c:l).stringify(r)),"style"===i.property&&"string"==typeof r&&(r=function(e){const t={};try{u(e,(function(e,n){const a="-ms-"===e.slice(0,4)?`ms-${e.slice(4)}`:e;t[a.replace(/-([a-z])/g,E)]=n}))}catch(e){}return t}(r)),i.space&&i.property?e[d.call(o,i.property)?o[i.property]:i.property]=r:i.attribute&&(e[i.attribute]=r))}function E(e,t){return t.toUpperCase()}},function(e,t,n){e.exports=n(36)(476)},function(e,t,n){e.exports=n(36)(3772)},function(e,t,n){e.exports=n(36)(1658)},function(e,t,n){e.exports=n(36)(3774)},function(e,t,n){e.exports=n(36)(1659)},function(e,t,n){e.exports=n(36)(1660)},function(e,t,n){e.exports=n(36)(3775)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,i,r;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(i=a;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,r[i]))return!1;for(i=a;0!=i--;){var s=r[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}}])]);