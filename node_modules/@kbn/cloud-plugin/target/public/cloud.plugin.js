/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){e.exports=r(3)(2)},function(e,t,r){"use strict";(function(e){function o(t,r){const o=t.split(":").pop();if(!o)return void r.debug(`Unable to decode ${o}`);let n;try{n=e.from(o,"base64").toString("utf8")}catch{return void r.debug(`base64 decoding failed on ${o}`)}const l=n.split("$");if(l.length<3)return void r.debug(`Expected at least 3 parts in ${n}`);const[s,d]=i(l[0]),[c,a]=i(l[1],d),[u,p]=i(l[2],d);return{host:s,defaultPort:d,elasticsearchUrl:`https://${c}.${s}:${a}`,kibanaUrl:`https://${u}.${s}:${p}`}}function i(e,t="443"){const[r,o=t]=e.split(":");return[r,o]}r.d(t,"a",(function(){return o}))}).call(this,r(8).Buffer)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){r(7),__kbnBundles__.define("plugin/cloud/public",r,9)},function(e,t,r){r.p=window.__kbnPublicPath__.cloud},function(e,t,r){e.exports=r(3)(2967)},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return p}));var o=r(0),i=r.n(o),n=r(4),l=r.n(n),s=r(5);function d(e){if(e)return e.split("/").pop()}var c=r(1);function a(e,t){return e&&t?`${e}${t}`:""}var u=r(2);class plugin_CloudPlugin{constructor(e){var t;i()(this,"config",void 0),i()(this,"isCloudEnabled",void 0),i()(this,"isServerlessEnabled",void 0),i()(this,"contextProviders",[]),i()(this,"logger",void 0),this.initializerContext=e,this.config=this.initializerContext.config.get(),this.isCloudEnabled="string"==typeof this.config.id,this.isServerlessEnabled=!(null===(t=this.config.serverless)||void 0===t||!t.project_id),this.logger=e.logger.get()}setup(e){var t,r,o,i,n,l,a;!function(e,t){if(!t.id)return;const{id:r,trial_end_date:o,is_elastic_staff_owned:i,serverless:{project_id:n,project_type:l}={}}=t;e.registerContextProvider({name:"Cloud Deployment Metadata",context$:Object(s.of)({cloudId:r,deploymentId:d(t.deployment_url),cloudTrialEndDate:o,cloudIsElasticStaffOwned:i,projectId:n,projectType:l}),schema:{cloudId:{type:"keyword",_meta:{description:"The Cloud ID"}},deploymentId:{type:"keyword",_meta:{description:"The Deployment ID",optional:!0}},cloudTrialEndDate:{type:"date",_meta:{description:"When the Elastic Cloud trial ends/ended",optional:!0}},cloudIsElasticStaffOwned:{type:"boolean",_meta:{description:"`true` if the owner of the deployment is an Elastician",optional:!0}},projectId:{type:"keyword",_meta:{description:"The Serverless Project ID",optional:!0}},projectType:{type:"keyword",_meta:{description:"The Serverless Project type",optional:!0}}}})}(e.analytics,this.config);const{id:u,cname:p,base_url:f,trial_end_date:_,is_elastic_staff_owned:v}=this.config;let h;return u&&(h=Object(c.a)(u,this.logger)),{cloudId:u,deploymentId:d(this.config.deployment_url),cname:p,baseUrl:f,...this.getCloudUrls(),elasticsearchUrl:null===(t=h)||void 0===t?void 0:t.elasticsearchUrl,kibanaUrl:null===(r=h)||void 0===r?void 0:r.kibanaUrl,cloudHost:null===(o=h)||void 0===o?void 0:o.host,cloudDefaultPort:null===(i=h)||void 0===i?void 0:i.defaultPort,trialEndDate:_?new Date(_):void 0,isElasticStaffOwned:v,isCloudEnabled:this.isCloudEnabled,isServerlessEnabled:this.isServerlessEnabled,serverless:{projectId:null===(n=this.config.serverless)||void 0===n?void 0:n.project_id,projectName:null===(l=this.config.serverless)||void 0===l?void 0:l.project_name,projectType:null===(a=this.config.serverless)||void 0===a?void 0:a.project_type},registerCloudService:e=>{this.contextProviders.push(e)}}}start(e){var t,r,o,i,n;e.chrome.setHelpSupportUrl(function(e){var t;let r="https://support.elastic.co/";return null!==(t=e.serverless)&&void 0!==t&&t.project_id?r+="?serverless_project_id="+e.serverless.project_id:e.id&&(r+="?cloud_deployment_id="+e.id),r}(this.config));const{deploymentUrl:s,profileUrl:d,billingUrl:a,organizationUrl:p,performanceUrl:f,usersAndRolesUrl:_,projectsUrl:v}=this.getCloudUrls();let h;return this.config.id&&(h=Object(c.a)(this.config.id,this.logger)),{CloudContextProvider:({children:e})=>Object(u.jsx)(l.a.Fragment,null,this.contextProviders.reduce(((e,t)=>Object(u.jsx)(t,null," ",e," ")),e)),isCloudEnabled:this.isCloudEnabled,cloudId:this.config.id,billingUrl:a,deploymentUrl:s,profileUrl:d,organizationUrl:p,projectsUrl:v,elasticsearchUrl:null===(t=h)||void 0===t?void 0:t.elasticsearchUrl,kibanaUrl:null===(r=h)||void 0===r?void 0:r.kibanaUrl,isServerlessEnabled:this.isServerlessEnabled,serverless:{projectId:null===(o=this.config.serverless)||void 0===o?void 0:o.project_id,projectName:null===(i=this.config.serverless)||void 0===i?void 0:i.project_name,projectType:null===(n=this.config.serverless)||void 0===n?void 0:n.project_type},performanceUrl:f,usersAndRolesUrl:_}}stop(){}getCloudUrls(){const{profile_url:e,billing_url:t,organization_url:r,deployment_url:o,base_url:i,performance_url:n,users_and_roles_url:l,projects_url:s}=this.config,d=a(i,o);return{deploymentUrl:d,profileUrl:a(i,e),billingUrl:a(i,t),organizationUrl:a(i,r),snapshotsUrl:`${d}/elasticsearch/snapshots/`,performanceUrl:a(i,n),usersAndRolesUrl:a(i,l),projectsUrl:a(i,s)}}}function p(e){return new plugin_CloudPlugin(e)}}]);