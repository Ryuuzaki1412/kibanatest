/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.metricsDataAccess_bundle_jsonpfunction=window.metricsDataAccess_bundle_jsonpfunction||[]).push([[2,3],{25:function(a,e,s){"use strict";s.r(e),s.d(e,"formulas",(function(){return i}));var t=s(1);const i={cpuUsage:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage",{defaultMessage:"CPU Usage"}),value:"(average(system.cpu.user.pct) + average(system.cpu.system.pct)) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:0}}},cpuUsageIowait:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.iowaitLabel",{defaultMessage:"iowait"}),value:"average(system.cpu.iowait.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageIrq:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.irqLabel",{defaultMessage:"irq"}),value:"average(system.cpu.irq.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageNice:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.niceLabel",{defaultMessage:"nice"}),value:"average(system.cpu.nice.norm.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageSoftirq:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.softirqLabel",{defaultMessage:"softirq"}),value:"average(system.cpu.softirq.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageSteal:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.stealLabel",{defaultMessage:"steal"}),value:"average(system.cpu.steal.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageUser:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.userLabel",{defaultMessage:"user"}),value:"average(system.cpu.user.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},cpuUsageSystem:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.cpuUsage.systemLabel",{defaultMessage:"system"}),value:"average(system.cpu.system.pct) / max(system.cpu.cores)",format:{id:"percent",params:{decimals:1}}},diskIORead:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskIORead",{defaultMessage:"Disk Read IOPS"}),value:"counter_rate(max(system.diskio.read.count), kql='system.diskio.read.count: *')",format:{id:"number",params:{decimals:0}},timeScale:"s"},diskIOWrite:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskIOWrite",{defaultMessage:"Disk Write IOPS"}),value:"counter_rate(max(system.diskio.write.count), kql='system.diskio.write.count: *')",format:{id:"number",params:{decimals:0}},timeScale:"s"},diskReadThroughput:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskReadThroughput",{defaultMessage:"Disk Read Throughput"}),value:"counter_rate(max(system.diskio.read.bytes), kql='system.diskio.read.bytes: *')",format:{id:"bytes",params:{decimals:1}},timeScale:"s"},diskWriteThroughput:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskWriteThroughput",{defaultMessage:"Disk Write Throughput"}),value:"counter_rate(max(system.diskio.write.bytes), kql='system.diskio.write.bytes: *')",format:{id:"bytes",params:{decimals:1}},timeScale:"s"},diskSpaceAvailability:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskSpaceAvailability",{defaultMessage:"Disk Space Availability"}),value:"1 - average(system.filesystem.used.pct)",format:{id:"percent",params:{decimals:0}}},diskSpaceAvailable:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskSpaceAvailable",{defaultMessage:"Disk Space Available"}),value:"average(system.filesystem.free)",format:{id:"bytes",params:{decimals:0}}},diskUsage:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.diskUsage",{defaultMessage:"Disk Usage"}),value:"average(system.filesystem.used.pct)",format:{id:"percent",params:{decimals:0}}},hostCount:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.hostCount.hostsLabel",{defaultMessage:"Hosts"}),value:"unique_count(host.name)",format:{id:"number",params:{decimals:0}}},logRate:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.logRate",{defaultMessage:"Log Rate"}),value:"differences(cumulative_sum(count()))",format:{id:"number",params:{decimals:0}},timeScale:"s"},normalizedLoad1m:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.normalizedLoad1m",{defaultMessage:"Normalized Load"}),value:"average(system.load.1) / max(system.load.cores)",format:{id:"percent",params:{decimals:0}}},load1m:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.load1m",{defaultMessage:"Load (1m)"}),value:"average(system.load.1)",format:{id:"number",params:{decimals:1}}},load5m:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.load5m",{defaultMessage:"Load (5m)"}),value:"average(system.load.5)",format:{id:"number",params:{decimals:1}}},load15m:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.load15m",{defaultMessage:"Load (15m)"}),value:"average(system.load.15)",format:{id:"number",params:{decimals:1}}},memoryUsage:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.memoryUsage",{defaultMessage:"Memory Usage"}),value:"average(system.memory.actual.used.pct)",format:{id:"percent",params:{decimals:0}}},memoryFree:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.memoryFree",{defaultMessage:"Memory Free"}),value:"max(system.memory.total) - average(system.memory.actual.used.bytes)",format:{id:"bytes",params:{decimals:1}}},memoryUsed:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.metric.label.used",{defaultMessage:"used"}),value:"average(system.memory.actual.used.bytes)",format:{id:"bytes",params:{decimals:1}}},memoryFreeExcludingCache:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.metric.label.free",{defaultMessage:"free"}),value:"average(system.memory.free)",format:{id:"bytes",params:{decimals:1}}},memoryCache:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.metric.label.cache",{defaultMessage:"cache"}),value:"average(system.memory.used.bytes) - average(system.memory.actual.used.bytes)",format:{id:"bytes",params:{decimals:1}}},rx:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.rx",{defaultMessage:"Network Inbound (RX)"}),value:"average(host.network.ingress.bytes) * 8 / (max(metricset.period, kql='host.network.ingress.bytes: *') / 1000)",format:{id:"bits",params:{decimals:1}},timeScale:"s"},tx:{label:t.i18n.translate("xpack.metricsData.assetDetails.formulas.tx",{defaultMessage:"Network Outbound (TX)"}),value:"average(host.network.egress.bytes) * 8 / (max(metricset.period, kql='host.network.egress.bytes: *') / 1000)",format:{id:"bits",params:{decimals:1}},timeScale:"s"}}},70:function(a,e,s){"use strict";s.r(e),s.d(e,"dashboards",(function(){return U}));const t=({charts:a,dependsOn:e=[]})=>({dependsOn:e,charts:a}),i="lnsXY";var l=s(4),r=s.n(l);class data_view_cache_DataViewCache{constructor(a){r()(this,"cache",new Map),r()(this,"capacity",void 0),this.capacity=a,this.cache=new Map}static getInstance(a=10){return data_view_cache_DataViewCache.instance||(data_view_cache_DataViewCache.instance=new data_view_cache_DataViewCache(a)),data_view_cache_DataViewCache.instance}getSpec(a){var e;const s=null!==(e=a.id)&&void 0!==e?e:"lens_ad_hoc_default",t=this.cache.get(s);if(!t){const e=a.toSpec();return this.setSpec(s,e),e}return t}setSpec(a,e){if(this.cache.size>=this.capacity){const a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(a,e)}}r()(data_view_cache_DataViewCache,"instance",void 0);var o=s(25),d=s(1);const m=({dataView:a})=>({id:"cpuUsageBreakdown",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.cpuUsage",{defaultMessage:"CPU Usage"}),layers:[{data:[o.formulas.cpuUsageIowait,o.formulas.cpuUsageIrq,o.formulas.cpuUsageNice,o.formulas.cpuUsageSoftirq,o.formulas.cpuUsageSteal,o.formulas.cpuUsageUser,o.formulas.cpuUsageSystem],options:{seriesType:"area_stacked"},layerType:"data"}],visualizationType:"lnsXY",dataView:a}),c=({dataView:a})=>({id:"loadBreakdown",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.load",{defaultMessage:"Load"}),layers:[{data:[o.formulas.load1m,o.formulas.load5m,o.formulas.load15m],options:{seriesType:"area"},layerType:"data"}],visualizationType:"lnsXY",dataView:a}),n=({dataView:a})=>({id:"diskSpaceUsageAvailable",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskUsage",{defaultMessage:"Disk Usage"}),layers:[{data:[{...o.formulas.diskUsage,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskUsage.label.used",{defaultMessage:"Used"})},{...o.formulas.diskSpaceAvailability,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskUsage.label.available",{defaultMessage:"Available"})}],options:{seriesType:"area"},layerType:"data"}],visualizationType:"lnsXY",dataView:a}),u=({dataView:a})=>({id:"DiskUsageByMountPoint",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskUsageByMountingPoint",{defaultMessage:"Disk Usage by Mount Point"}),layers:[{data:[{...o.formulas.diskUsage,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskUsage.label.used",{defaultMessage:"Used"})}],options:{seriesType:"area",breakdown:{type:"top_values",field:"system.filesystem.mount_point",params:{size:5}}},layerType:"data"}],visualOptions:{legend:{isVisible:!0,position:"bottom",legendSize:50},yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},visualizationType:"lnsXY",dataView:a}),p=({dataView:a})=>({id:"diskThroughputReadWrite",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskIOPS",{defaultMessage:"Disk IOPS"}),layers:[{data:[{...o.formulas.diskIORead,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.read",{defaultMessage:"Read"})},{...o.formulas.diskIOWrite,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.write",{defaultMessage:"Write"})}],options:{seriesType:"area"},layerType:"data"}],visualOptions:{yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},visualizationType:"lnsXY",dataView:a}),y=({dataView:a})=>({id:"diskIOReadWrite",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.diskThroughput",{defaultMessage:"Disk Throughput"}),layers:[{data:[{...o.formulas.diskReadThroughput,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.read",{defaultMessage:"Read"})},{...o.formulas.diskWriteThroughput,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.write",{defaultMessage:"Write"})}],options:{seriesType:"area"},layerType:"data"}],visualOptions:{yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},visualizationType:"lnsXY",dataView:a}),f=({dataView:a})=>({id:"memoryUsageBreakdown",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.memoryUsage",{defaultMessage:"Memory Usage"}),layers:[{data:[{...o.formulas.memoryCache,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.cache",{defaultMessage:"Cache"})},{...o.formulas.memoryUsed,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.used",{defaultMessage:"Used"})},{...o.formulas.memoryFreeExcludingCache,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.metric.label.free",{defaultMessage:"Free"})}],options:{seriesType:"area_stacked"},layerType:"data"}],visualOptions:{legend:{isVisible:!0,position:"bottom",legendSize:50},yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},visualizationType:"lnsXY",dataView:a}),g=({dataView:a})=>({id:"rxTx",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.network",{defaultMessage:"Network"}),layers:[{data:[{...o.formulas.rx,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.network.label.rx",{defaultMessage:"Inbound (RX)"})},{...o.formulas.tx,label:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.network.label.tx",{defaultMessage:"Outbound (TX)"})}],options:{seriesType:"area"},layerType:"data"}],visualOptions:{yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},visualizationType:"lnsXY",dataView:a}),k=({formulaIds:a,visualizationType:e,dataView:s,layerOptions:t,...l})=>a.reduce(((a,r)=>{const d={data:e===i?[o.formulas[r]]:o.formulas[r],layerType:e===i?"data":"metricTrendline",options:t};return{...a,[r]:{id:r,title:o.formulas[r].label,dataView:s,visualizationType:e,layers:e===i?[d]:d,...l}}}),{}),b={get:({metricsDataView:a,logsDataView:e})=>{const s={showDottedLine:!0,missingValues:"Linear"},i={legend:{isVisible:!0,position:"bottom"}},{cpuUsage:l,memoryUsage:r,normalizedLoad1m:o}=k({visualizationType:"lnsXY",formulaIds:["cpuUsage","memoryUsage","normalizedLoad1m"],dataView:a,visualOptions:s}),{logRate:d}=k({visualizationType:"lnsXY",formulaIds:["logRate"],dataView:e,visualOptions:s});return t({charts:[l,{...m({dataView:a}),visualOptions:{...s,...i}},r,{...f({dataView:a}),visualOptions:{...s,...i}},o,{...c({dataView:a}),visualOptions:{...s,...i}},d,{...n({dataView:a}),visualOptions:{...s,...i}},{...u({dataView:a}),visualOptions:{...s,...i}},{...p({dataView:a}),visualOptions:{...s,...i}},{...y({dataView:a}),visualOptions:{...s,...i}},{...g({dataView:a}),visualOptions:{...s,...i}}]})}},D={get:({metricsDataView:a,logsDataView:e})=>{const s={showDottedLine:!0,missingValues:"Linear"},i={legend:{isVisible:!0,position:"bottom"}},{cpuUsage:l,memoryUsage:r,normalizedLoad1m:o}=k({visualizationType:"lnsXY",formulaIds:["cpuUsage","memoryUsage","normalizedLoad1m"],dataView:a,visualOptions:s}),{logRate:d}=k({visualizationType:"lnsXY",formulaIds:["logRate"],dataView:e,visualOptions:s});return t({charts:[l,r,o,d,{...n({dataView:a}),visualOptions:{...s,...i}},{...u({dataView:a}),visualOptions:{...s,...i}},{...p({dataView:a}),visualOptions:{...s,...i}},{...y({dataView:a}),visualOptions:{...s,...i}},{...g({dataView:a}),visualOptions:{...s,...i}}]})}},v={get:({metricsDataView:a})=>{const e={showDottedLine:!0,missingValues:"Linear"},s={breakdown:{type:"top_values",field:"host.name",params:{size:20}}},{memoryUsage:i,memoryFree:l,diskUsage:r,diskSpaceAvailable:o,diskIORead:d,diskIOWrite:m,diskReadThroughput:c,diskWriteThroughput:n,rx:u,tx:p}=k({visualizationType:"lnsXY",formulaIds:["cpuUsage","memoryUsage","normalizedLoad1m","memoryFree","diskUsage","diskSpaceAvailable","diskIORead","diskIOWrite","diskReadThroughput","diskWriteThroughput","rx","tx"],dataView:a,layerOptions:s,visualOptions:e}),{cpuUsage:y,normalizedLoad1m:f}=k({visualizationType:"lnsXY",formulaIds:["cpuUsage","normalizedLoad1m"],layerOptions:s,visualOptions:{...e,yLeftExtent:{mode:"dataBounds",lowerBound:0,upperBound:1}},dataView:a});return t({charts:[y,f,i,l,r,o,d,m,c,n,u,p]})}},h=d.i18n.translate("xpack.metricsData.assetDetails.overview.kpi.subtitle.average",{defaultMessage:"Average"}),w={get:({metricsDataView:a,options:e})=>{const{cpuUsage:s,diskUsage:i,memoryUsage:l,normalizedLoad1m:r}=k({visualizationType:"lnsMetric",formulaIds:["cpuUsage","diskUsage","memoryUsage","normalizedLoad1m"],layerOptions:{showTrendLine:!0,subtitle:h,...e},dataView:a});return t({charts:[{...s,layers:{...s.layers,data:{...s.layers.data,format:s.layers.data.format?{...s.layers.data.format,params:{decimals:1}}:void 0}}},{...r,layers:{...r.layers,data:{...r.layers.data,format:r.layers.data.format?{...r.layers.data.format,params:{decimals:1}}:void 0}}},{...l,layers:{...l.layers,data:{...l.layers.data,format:l.layers.data.format?{...l.layers.data.format,params:{decimals:1}}:void 0}}},{...i,layers:{...i.layers,data:{...i.layers.data,format:i.layers.data.format?{...i.layers.data.format,params:{decimals:1}}:void 0}}}]})}},x={nodeCpuCapacity:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.capacity",{defaultMessage:"Capacity"}),value:"max(kubernetes.node.cpu.allocatable.cores) * 1000000000",format:{id:"number",params:{decimals:1,compact:!0}}},nodeCpuUsed:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.used",{defaultMessage:"Used"}),value:"average(kubernetes.node.cpu.usage.nanocores)",format:{id:"number",params:{decimals:1,compact:!0}}},nodeDiskCapacity:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.capacity",{defaultMessage:"Capacity"}),value:"max(kubernetes.node.fs.capacity.bytes)",format:{id:"bytes",params:{decimals:1}}},nodeDiskUsed:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.used",{defaultMessage:"Used"}),value:"average(kubernetes.node.fs.used.bytes)",format:{id:"bytes",params:{decimals:1}}},nodeMemoryCapacity:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.capacity",{defaultMessage:"Capacity"}),value:"max(kubernetes.node.memory.allocatable.bytes)",format:{id:"bytes",params:{decimals:1}}},nodeMemoryUsed:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.used",{defaultMessage:"Used"}),value:"average(kubernetes.node.memory.usage.bytes)",format:{id:"bytes",params:{decimals:1}}},nodePodCapacity:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.capacity",{defaultMessage:"Capacity"}),value:"last_value(kubernetes.node.pod.allocatable.total,  kql='kubernetes.node.pod.allocatable.total: *')",format:{id:"number",params:{decimals:0}}},nodePodUsed:{label:d.i18n.translate("xpack.metricsData.assetDetails.formulas.kubernetes.used",{defaultMessage:"Used"}),value:"unique_count(kubernetes.pod.uid)",format:{id:"number",params:{decimals:0}}}},U={assetDetails:b,assetDetailsFlyout:D,hostsView:v,kpi:w,assetDetailsKubernetesNode:{get:({metricsDataView:a})=>{const e={showDottedLine:!0,missingValues:"Linear",legend:{isVisible:!0,position:"bottom"}};return t({dependsOn:["kubernetes.node"],charts:[{id:"nodeCpuCapacity",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.kubernetes.nodeCpuCapacity",{defaultMessage:"Node CPU Capacity"}),layers:[{data:[x.nodeCpuCapacity,x.nodeCpuUsed],options:{seriesType:"area"},layerType:"data"}],dataView:a,visualizationType:"lnsXY",visualOptions:e},{id:"nodeMemoryCapacity",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.kubernetes.nodeMemoryCapacity",{defaultMessage:"Node Memory Capacity"}),layers:[{data:[x.nodeMemoryCapacity,x.nodeMemoryUsed],options:{seriesType:"area"},layerType:"data"}],visualizationType:"lnsXY",dataView:a,visualOptions:e},{id:"nodeDiskCapacity",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.kubernetes.nodeDiskCapacity",{defaultMessage:"Node Disk Capacity"}),layers:[{data:[x.nodeDiskCapacity,x.nodeDiskUsed],options:{seriesType:"area"},layerType:"data"}],visualizationType:"lnsXY",dataView:a,visualOptions:e},{id:"nodePodCapacity",title:d.i18n.translate("xpack.metricsData.assetDetails.metricsCharts.kubernetes.nodePodCapacity",{defaultMessage:"Node Pod Capacity"}),layers:[{data:[x.nodePodCapacity,x.nodePodUsed],options:{seriesType:"area"},layerType:"data"}],visualizationType:"lnsXY",dataView:a,visualOptions:e}]})}}}}}]);