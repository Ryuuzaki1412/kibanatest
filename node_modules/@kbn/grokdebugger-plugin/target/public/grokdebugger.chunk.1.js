/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.grokdebugger_bundle_jsonpfunction=window.grokdebugger_bundle_jsonpfunction||[]).push([[1],[,,,,,,,,,,,,,,function(e,t,r){e.exports=r(6)(2)},function(e,t,r){var s=r(16),n=r(17),a=r(18),o=r(19),i=r(20),u=r(21),g=r(22),c=r(23),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||c(e)||a(e)))return!e.length;var t=n(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(g(e))return!s(e).length;for(var r in e)if(l.call(e,r))return!1;return!0}},function(e,t,r){e.exports=r(6)(3350)},function(e,t,r){e.exports=r(6)(817)},function(e,t,r){e.exports=r(6)(1619)},function(e,t,r){e.exports=r(6)(288)},function(e,t,r){e.exports=r(6)(1233)},function(e,t,r){e.exports=r(6)(1229)},function(e,t,r){e.exports=r(6)(1232)},function(e,t,r){e.exports=r(6)(1621)},function(e,t,r){"use strict";r.r(t),r.d(t,"renderApp",(function(){return C}));var s=r(7),n=r.n(s),a=r(13),o=r(8),i=r(9),u=r(14),g=r.n(u),c=r(0),l=r(15),b=r.n(l),d=r(11),j=r(10);function p({value:e,onChange:t}){return Object(j.jsx)(d.EuiFormRow,{label:Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.sampleDataLabel",defaultMessage:"Sample Data"}),fullWidth:!0,"data-test-subj":"eventInput"},Object(j.jsx)(i.CodeEditor,{languageId:"plaintext",value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":c.i18n.translate("xpack.grokDebugger.eventInputEditor",{defaultMessage:"Code editor for event inputs"}),onChange:t}))}function k({value:e,onChange:t}){return Object(j.jsx)(d.EuiFormRow,{label:Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.grokPatternLabel",defaultMessage:"Grok Pattern"}),fullWidth:!0,"data-test-subj":"patternInput"},Object(j.jsx)(i.CodeEditor,{languageId:i.GrokLang,value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":c.i18n.translate("xpack.grokDebugger.grokPatternAriaLabel",{defaultMessage:"Code editor for inputting the grok pattern"}),onChange:t}))}function m({value:e,onChange:t}){return Object(j.jsx)(d.EuiAccordion,{id:"customPatternsInput",buttonContent:Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.customPatternsButtonLabel",defaultMessage:"Custom Patterns"}),"data-test-subj":"btnToggleCustomPatternsInput"},Object(j.jsx)(d.EuiSpacer,{size:"m"}),Object(j.jsx)(d.EuiCallOut,{title:Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.customPatterns.callOutTitle",defaultMessage:"Enter one custom pattern per line. For example:"})},Object(j.jsx)(d.EuiCodeBlock,null,"POSTFIX_QUEUEID [0-9A-F]{10,11}\nMSG message-id=<%{GREEDYDATA}>")),Object(j.jsx)(d.EuiSpacer,{size:"m"}),Object(j.jsx)(d.EuiFormRow,{fullWidth:!0,"data-test-subj":"aceCustomPatternsInput"},Object(j.jsx)(i.CodeEditor,{languageId:"plaintext",value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":c.i18n.translate("xpack.grokDebugger.customPatternsInput",{defaultMessage:"Code editor for inputting custom patterns"}),onChange:t})))}function x({value:e}){return Object(j.jsx)(d.EuiFormRow,{label:Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.structuredDataLabel",defaultMessage:"Structured Data"}),fullWidth:!0},Object(j.jsx)(d.EuiCodeBlock,{paddingSize:"m",language:"json",isCopyable:!0,"data-test-subj":"eventOutputCodeBlock"},JSON.stringify(e,null,2)))}var h=r(12);class grokdebugger_request_GrokdebuggerRequest{constructor(e={}){this.rawEvent=Object(h.get)(e,"rawEvent",""),this.pattern=Object(h.get)(e,"pattern",""),this.customPatterns=Object(h.get)(e,"customPatterns",{})}get upstreamJSON(){return Object(h.pick)(this,["rawEvent","pattern","customPatterns"])}}const O={simulate:{errorTitle:c.i18n.translate("xpack.grokDebugger.simulate.errorTitle",{defaultMessage:"Simulate error"}),unknownErrorTitle:c.i18n.translate("xpack.grokDebugger.unknownErrorTitle",{defaultMessage:"Something went wrong"})}};class grok_debugger_GrokDebuggerComponent extends n.a.Component{constructor(e){super(e),g()(this,"onRawEventChange",(e=>{this.setState({rawEvent:e}),this.grokdebuggerRequest.rawEvent=e.trimEnd()})),g()(this,"onPatternChange",(e=>{this.setState({pattern:e}),this.grokdebuggerRequest.pattern=e.trimEnd()})),g()(this,"onCustomPatternsChange",(e=>{this.setState({customPatterns:e}),e=e.trim();const t={};e?(e.split("\n").forEach((e=>{const[,r,s]=e.match(/(\S+)\s+(.+)/)||[];r&&s&&(t[r]=s)})),this.grokdebuggerRequest.customPatterns=t):this.grokdebuggerRequest.customPatterns=t})),g()(this,"simulateGrok",(async()=>{const e=this.props.kibana.services.notifications;try{const t=await this.props.grokdebuggerService.simulate(this.grokdebuggerRequest);this.setState({structuredEvent:t.structuredEvent}),b()(t.error)||e.toasts.addDanger({title:O.simulate.errorTitle,text:t.error})}catch(t){e.toasts.addError(t,{title:O.simulate.unknownErrorTitle})}})),g()(this,"onSimulateClick",(()=>{this.setState({structuredEvent:{}},this.simulateGrok)})),g()(this,"isSimulateDisabled",(()=>""===this.state.rawEvent.trim()||""===this.state.pattern.trim())),this.state={rawEvent:"",pattern:"",customPatterns:"",structuredEvent:{}},this.grokdebuggerRequest=new grokdebugger_request_GrokdebuggerRequest}render(){return Object(j.jsx)(d.EuiPage,null,Object(j.jsx)(d.EuiPageBody,null,Object(j.jsx)(d.EuiPageSection,{grow:!0,color:"plain"},Object(j.jsx)(d.EuiForm,{className:"grokdebugger-container","data-test-subj":"grokDebuggerContainer"},Object(j.jsx)(p,{value:this.state.rawEvent,onChange:this.onRawEventChange}),Object(j.jsx)(k,{value:this.state.pattern,onChange:this.onPatternChange}),Object(j.jsx)(d.EuiSpacer,null),Object(j.jsx)(m,{value:this.state.customPatterns,onChange:this.onCustomPatternsChange}),Object(j.jsx)(d.EuiSpacer,null),Object(j.jsx)(d.EuiButton,{fill:!0,onClick:this.onSimulateClick,isDisabled:this.isSimulateDisabled(),"data-test-subj":"btnSimulate"},Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.simulateButtonLabel",defaultMessage:"Simulate"})),Object(j.jsx)(d.EuiSpacer,null),Object(j.jsx)(x,{value:this.state.structuredEvent})))))}}const f=Object(i.withKibana)(grok_debugger_GrokDebuggerComponent);var E=r(1);class grokdebugger_response_GrokdebuggerResponse{constructor(e){this.structuredEvent=Object(h.get)(e,"structuredEvent",{}),this.error=Object(h.get)(e,"error",{})}static fromUpstreamJSON(e){return new grokdebugger_response_GrokdebuggerResponse(e)}}class grokdebugger_service_GrokdebuggerService{constructor(e){this.http=e}simulate(e){return this.http.post(`${E.b.API_ROOT}/simulate`,{body:JSON.stringify(e.upstreamJSON)}).then((e=>grokdebugger_response_GrokdebuggerResponse.fromUpstreamJSON(e))).catch((e=>{throw new Error(e.body.message)}))}}const v=()=>{const e=c.i18n.translate("xpack.grokDebugger.registerLicenseLinkLabel",{defaultMessage:"register a license"}),t=c.i18n.translate("xpack.grokDebugger.trialLicenseTitle",{defaultMessage:"Trial"}),r=c.i18n.translate("xpack.grokDebugger.basicLicenseTitle",{defaultMessage:"Basic"}),s=c.i18n.translate("xpack.grokDebugger.goldLicenseTitle",{defaultMessage:"Gold"}),a=c.i18n.translate("xpack.grokDebugger.platinumLicenseTitle",{defaultMessage:"Platinum"});return Object(j.jsx)(d.EuiPage,null,Object(j.jsx)(d.EuiPageBody,{component:"div"},Object(j.jsx)(d.EuiPageSection,{alignment:"center",grow:!0,color:"plain"},Object(j.jsx)(d.EuiCallOut,{title:c.i18n.translate("xpack.grokDebugger.licenseErrorMessageTitle",{defaultMessage:"License error"}),color:"danger",iconType:"warning",style:{padding:"16px"}},Object(j.jsx)(d.EuiText,{size:"s"},Object(j.jsx)("p",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.licenseErrorMessageDescription",defaultMessage:"The Grok Debugger requires an active license ({licenseTypeList} or {platinumLicenseType}), but none were found in your cluster.",values:{licenseTypeList:Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(d.EuiCode,null,t),", ",Object(j.jsx)(d.EuiCode,null,r),","," ",Object(j.jsx)(d.EuiCode,null,s)),platinumLicenseType:Object(j.jsx)(d.EuiCode,null,a)}})),Object(j.jsx)("p",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.grokDebugger.registerLicenseDescription",defaultMessage:"Please {registerLicenseLink} to continue using the Grok Debugger",values:{registerLicenseLink:Object(j.jsx)(d.EuiLink,{href:"https://www.elastic.co/subscriptions",rel:"noopener"},e)}})))))))};function C(e,t,r,s){const n=e.isActive?Object(j.jsx)(i.KibanaContextProvider,{services:{...r}},Object(j.jsx)(o.I18nProvider,null,Object(j.jsx)(i.KibanaThemeProvider,{theme$:s},Object(j.jsx)(f,{grokdebuggerService:new grokdebugger_service_GrokdebuggerService(r.http)})))):Object(j.jsx)(o.I18nProvider,null,Object(j.jsx)(i.KibanaThemeProvider,{theme$:s},Object(j.jsx)(v,{license:e})));return Object(a.render)(n,t),()=>Object(a.unmountComponentAtNode)(t)}}]]);