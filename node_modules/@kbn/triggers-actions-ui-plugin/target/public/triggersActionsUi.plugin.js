/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,a,i=t[0],s=t[1],o=0,c=[];o<i.length;o++)a=i[o],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&c.push(r[a][0]),r[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(u&&u(t);c.length;)c.shift()()}var n={},r={19:0};function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+"triggersActionsUi.chunk."+e+".js"}(e);var u=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,n[1](u)}r[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var i=window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var u=s;a(a.s=82)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n(52),i=n(0);function s(e,t){return n=>Object(i.jsx)(r.Suspense,{fallback:Object(i.jsx)(a.a,{size:null!=t?t:"m"})},Object(i.jsx)(e,n))}},function(e,t){e.exports=__kbnSharedDeps__.ReactQuery},function(e,t,n){"use strict";n.d(t,"b",(function(){return i.BASE_ALERTING_API_PATH})),n.d(t,"j",(function(){return i.INTERNAL_BASE_ALERTING_API_PATH})),n.d(t,"a",(function(){return s.BASE_ACTION_API_PATH})),n.d(t,"i",(function(){return s.INTERNAL_BASE_ACTION_API_PATH})),n.d(t,"t",(function(){return u})),n.d(t,"s",(function(){return c})),n.d(t,"w",(function(){return l})),n.d(t,"v",(function(){return d})),n.d(t,"u",(function(){return p})),n.d(t,"q",(function(){return g})),n.d(t,"r",(function(){return b})),n.d(t,"x",(function(){return f})),n.d(t,"p",(function(){return o})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"o",(function(){return j})),n.d(t,"n",(function(){return v})),n.d(t,"k",(function(){return x})),n.d(t,"m",(function(){return O})),n.d(t,"h",(function(){return _})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return S})),n.d(t,"g",(function(){return T})),n.d(t,"l",(function(){return E}));var r=n(2),a=n(10),i=n(12),s=n(23);let o;!function(e){e.SECOND="s",e.MINUTE="m",e.HOUR="h",e.DAY="d"}(o||(o={}));const u="/",c="/connectors",l="/rules",d="/logs",p="/alerts",g="/alert/:alertId",b=r.i18n.translate("xpack.triggersActionsUI.sections.actionForm.RecoveredMessage",{defaultMessage:"Recovered"}),f=r.i18n.translate("xpack.triggersActionsUI.sections.actionForm.SummaryMessage",{defaultMessage:"The system has detected \\{\\{alerts.new.count\\}\\} new, \\{\\{alerts.ongoing.count\\}\\} ongoing, and \\{\\{alerts.recovered.count\\}\\} recovered alerts."});let m;!function(e){e.ASCENDING="asc",e.DESCENDING="desc"}(m||(m={}));const h=10,y="1m",j=["execution_duration","total_search_duration","es_search_duration","schedule_delay"],v=["num_new_alerts","num_active_alerts","num_recovered_alerts"],x=["rule_name","timestamp","execution_duration","status","message","num_active_alerts","num_errored_actions"],O=[...x.slice(1)],_=["rule_name",...x.slice(1)],A="format:number:defaultPattern",S=["timestamp","status","connector_name","message"],T=[...S],E=[a.tb,a.qb]},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"l",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"n",(function(){return g})),n.d(t,"g",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"j",(function(){return h})),n.d(t,"d",(function(){return y}));var r=n(1),a=n(4);const i=Object(r.lazy)((()=>n.e(56).then(n.bind(null,112)))),s=Object(r.lazy)((()=>n.e(57).then(n.bind(null,113)))),o=(Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(3),n.e(16)]).then(n.bind(null,79))))),Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(3),n.e(17)]).then(n.bind(null,80))))),Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(9),n.e(18)]).then(n.bind(null,78))))),Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(10)]).then(n.bind(null,77))))),Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(4),n.e(6),n.e(14)]).then(n.bind(null,81)))))),u=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(1),n.e(40)]).then(n.bind(null,98))))),c=Object(a.a)(Object(r.lazy)((()=>n.e(62).then(n.bind(null,102))))),l=Object(a.a)(Object(r.lazy)((()=>n.e(60).then(n.bind(null,99))))),d=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(2),n.e(5),n.e(7),n.e(22)]).then(n.bind(null,107))))),p=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(1),n.e(2),n.e(8),n.e(13),n.e(36)]).then(n.bind(null,106))))),g=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(1),n.e(37)]).then(n.bind(null,91))))),b=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(1),n.e(33)]).then(n.bind(null,115))))),f=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(35)]).then(n.bind(null,108))))),m=Object(a.a)(Object(r.lazy)((()=>n.e(61).then(n.bind(null,100))))),h=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(1),n.e(24)]).then(n.bind(null,101))))),y=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(2),n.e(5),n.e(7),n.e(15),n.e(48)]).then(n.bind(null,105)))))},function(e,t,n){"use strict";n.r(t),n.d(t,"GroupByExpression",(function(){return i})),n.d(t,"ForLastExpression",(function(){return s})),n.d(t,"ValueExpression",(function(){return o})),n.d(t,"WhenExpression",(function(){return u})),n.d(t,"OfExpression",(function(){return c})),n.d(t,"ThresholdExpression",(function(){return l})),n.d(t,"COMPARATORS",(function(){return d.COMPARATORS})),n.d(t,"builtInComparators",(function(){return d.builtInComparators})),n.d(t,"builtInAggregationTypes",(function(){return d.builtInAggregationTypes})),n.d(t,"builtInGroupByTypes",(function(){return d.builtInGroupByTypes})),n.d(t,"connectorDeprecatedMessage",(function(){return p.a})),n.d(t,"deprecatedMessage",(function(){return p.b})),n.d(t,"getFields",(function(){return h})),n.d(t,"getIndexOptions",(function(){return m})),n.d(t,"firstFieldOption",(function(){return y})),n.d(t,"getTimeFieldOptions",(function(){return j.c})),n.d(t,"getTimeOptions",(function(){return j.d})),n.d(t,"useKibana",(function(){return j.e})),n.d(t,"BUCKET_SELECTOR_FIELD",(function(){return v.b})),n.d(t,"buildAggregation",(function(){return v.d})),n.d(t,"isCountAggregation",(function(){return v.e})),n.d(t,"isGroupAggregation",(function(){return v.f})),n.d(t,"parseAggregationResults",(function(){return v.g})),n.d(t,"NORMALIZED_FIELD_TYPES",(function(){return v.c}));var r=n(1),a=n(4);const i=Object(a.a)(Object(r.lazy)((()=>n.e(44).then(n.bind(null,331))))),s=Object(a.a)(Object(r.lazy)((()=>n.e(43).then(n.bind(null,332))))),o=Object(a.a)(Object(r.lazy)((()=>n.e(46).then(n.bind(null,333))))),u=Object(a.a)(Object(r.lazy)((()=>n.e(47).then(n.bind(null,334))))),c=Object(a.a)(Object(r.lazy)((()=>n.e(30).then(n.bind(null,335))))),l=Object(a.a)(Object(r.lazy)((()=>n.e(45).then(n.bind(null,336)))));var d=n(15),p=n(47),g=n(11),b=n(2),f=n(43);const m=async(e,t)=>{const n=[];if(!t)return n;const[r,a]=await Promise.all([Object(f.b)({pattern:t,http:e}),Object(f.c)(t)]);if(r.length||a.length){const e=Object(g.uniq)([...r,...a]);n.push({label:b.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.indicesAndIndexPatternsLabel",{defaultMessage:"Based on your data views"}),options:e.map((e=>({label:e,value:e})))})}return n.push({label:b.i18n.translate("xpack.triggersActionsUI.components.builtinActionTypes.indexAction.chooseLabel",{defaultMessage:"Chooseâ€¦"}),options:[{value:t,label:t}]}),n},h=async(e,t)=>await Object(f.a)({indexes:t,http:e}),y={text:b.i18n.translate("xpack.triggersActionsUI.sections.ruleAdd.indexControls.timeFieldOptionLabel",{defaultMessage:"Select a field"}),value:""};var j=n(37),v=n(27)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"i",(function(){return g})),n.d(t,"j",(function(){return b})),n.d(t,"p",(function(){return f})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"q",(function(){return y})),n.d(t,"t",(function(){return T})),n.d(t,"u",(function(){return E})),n.d(t,"z",(function(){return w})),n.d(t,"D",(function(){return I})),n.d(t,"F",(function(){return k})),n.d(t,"G",(function(){return C})),n.d(t,"I",(function(){return R})),n.d(t,"L",(function(){return M})),n.d(t,"O",(function(){return L})),n.d(t,"R",(function(){return U})),n.d(t,"U",(function(){return j})),n.d(t,"V",(function(){return v})),n.d(t,"fb",(function(){return x})),n.d(t,"gb",(function(){return P})),n.d(t,"hb",(function(){return O})),n.d(t,"ib",(function(){return S})),n.d(t,"kb",(function(){return _})),n.d(t,"mb",(function(){return A})),n.d(t,"ub",(function(){return o})),n.d(t,"xb",(function(){return r})),n.d(t,"yb",(function(){return u})),n.d(t,"r",(function(){return $})),n.d(t,"s",(function(){return z})),n.d(t,"v",(function(){return B})),n.d(t,"w",(function(){return W})),n.d(t,"x",(function(){return G})),n.d(t,"y",(function(){return H})),n.d(t,"A",(function(){return q})),n.d(t,"B",(function(){return Y})),n.d(t,"C",(function(){return Q})),n.d(t,"E",(function(){return K})),n.d(t,"H",(function(){return J})),n.d(t,"J",(function(){return X})),n.d(t,"K",(function(){return Z})),n.d(t,"M",(function(){return ee})),n.d(t,"N",(function(){return te})),n.d(t,"P",(function(){return ne})),n.d(t,"Q",(function(){return re})),n.d(t,"S",(function(){return ae})),n.d(t,"T",(function(){return ie})),n.d(t,"Z",(function(){return pe})),n.d(t,"ab",(function(){return de})),n.d(t,"bb",(function(){return ue})),n.d(t,"cb",(function(){return le})),n.d(t,"db",(function(){return ce})),n.d(t,"eb",(function(){return ge})),n.d(t,"jb",(function(){return be})),n.d(t,"nb",(function(){return fe})),n.d(t,"lb",(function(){return me})),n.d(t,"pb",(function(){return F})),n.d(t,"rb",(function(){return D})),n.d(t,"sb",(function(){return N})),n.d(t,"wb",(function(){return V})),n.d(t,"f",(function(){return he})),n.d(t,"g",(function(){return ye})),n.d(t,"c",(function(){return je})),n.d(t,"h",(function(){return ve})),n.d(t,"k",(function(){return xe})),n.d(t,"l",(function(){return Oe})),n.d(t,"m",(function(){return _e})),n.d(t,"ob",(function(){return Ae})),n.d(t,"W",(function(){return Se})),n.d(t,"X",(function(){return Te})),n.d(t,"Y",(function(){return Ee})),n.d(t,"Ab",(function(){return we})),n.d(t,"Bb",(function(){return Ie})),n.d(t,"zb",(function(){return ke})),n.d(t,"vb",(function(){return Ce})),n.d(t,"qb",(function(){return Re})),n.d(t,"tb",(function(){return Me}));const r="@timestamp",a="kibana",i=`${a}.alert`,s=`${i}.rule`,o=`${a}.space_ids`,u=`${a}.version`,c=`${i}.action_group`,l=`${i}.case_ids`,d=`${i}.duration.us`,p=`${i}.end`,g=`${i}.flapping`,b=`${i}.flapping_history`,f=`${i}.maintenance_window_ids`,m=`${i}.instance.id`,h=`${i}.last_detected`,y=`${i}.reason`,j=`${i}.start`,v=`${i}.status`,x=`${i}.time_range`,O=`${i}.uuid`,_=`${i}.workflow_status`,A=`${i}.workflow_tags`,S=`${i}.workflow_assignee_ids`,T=`${s}.category`,E=`${s}.consumer`,w=`${s}.execution.uuid`,I=`${s}.name`,k=`${s}.parameters`,C=`${s}.producer`,R=`${s}.revision`,M=`${s}.tags`,L=`${s}.rule_type_id`,P=`${i}.url`,U=`${s}.uuid`,F="ecs.version",D="event.action",N="event.kind",V="tags",$=`${i}.risk_score`,z=`${s}.author`,B=`${s}.created_at`,W=`${s}.created_by`,G=`${s}.description`,H=`${s}.enabled`,q=`${s}.from`,Y=`${s}.interval`,Q=`${s}.license`,K=`${s}.note`,J=`${s}.references`,X=`${s}.rule_id`,Z=`${s}.rule_name_override`,ee=`${s}.to`,te=`${s}.type`,ne=`${s}.updated_at`,re=`${s}.updated_by`,ae=`${s}.version`,ie=`${i}.severity`,se=`${i}.suppression`,oe=`${se}.terms`,ue=`${oe}.field`,ce=`${oe}.value`,le=`${se}.start`,de=`${se}.end`,pe=`${se}.docs_count`,ge=`${i}.system_status`,be=`${i}.workflow_reason`,fe=`${i}.workflow_user`,me=`${i}.workflow_status_updated_at`,he=`${i}.evaluation.threshold`,ye=`${i}.evaluation.value`,je=`${i}.context`,ve=`${i}.evaluation.values`,xe=`${i}.group`,Oe=`${xe}.field`,_e=`${xe}.value`,Ae={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SLO:"slo",SIEM:"siem",UPTIME:"uptime",ML:"ml"},Se=(Object.values(Ae).map((e=>e)),"active"),Te="recovered",Ee="untracked",we="/rule/:ruleId",Ie="/app/management/insightsAndAlerting/triggersActions",ke=e=>we.replace(":ruleId",e),Ce="stackAlerts",Re=".es-query",Me="observability.rules.custom_threshold";let Le;!function(e){e.ErrorCount="apm.error_rate",e.TransactionErrorRate="apm.transaction_error_rate",e.TransactionDuration="apm.transaction_duration",e.Anomaly="apm.anomaly"}(Le||(Le={}))},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/alerting/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(64)(3)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(1),a=n.n(r),i=n(0);const s=a.a.createContext(void 0),o=({children:e,value:t})=>Object(i.jsx)(s.Provider,{value:t},e);o.displayName="ConnectorProvider"},function(e,t,n){"use strict";n.r(t),n.d(t,"COMPARATORS",(function(){return a})),n.d(t,"builtInComparators",(function(){return i})),n.d(t,"AGGREGATION_TYPES",(function(){return s})),n.d(t,"builtInAggregationTypes",(function(){return o})),n.d(t,"loadAllActions",(function(){return u.e})),n.d(t,"loadActionTypes",(function(){return u.d})),n.d(t,"ConnectorAddModal",(function(){return c.b})),n.d(t,"builtInGroupByTypes",(function(){return l})),n.d(t,"DEFAULT_FREQUENCY",(function(){return p})),n.d(t,"VIEW_LICENSE_OPTIONS_LINK",(function(){return h})),n.d(t,"PLUGIN_ID",(function(){return y})),n.d(t,"CONNECTORS_PLUGIN_ID",(function(){return j})),n.d(t,"I18N_WEEKDAY_OPTIONS",(function(){return f})),n.d(t,"I18N_WEEKDAY_OPTIONS_DDD",(function(){return m}));var r=n(2);let a;!function(e){e.GREATER_THAN=">",e.GREATER_THAN_OR_EQUALS=">=",e.BETWEEN="between",e.LESS_THAN="<",e.LESS_THAN_OR_EQUALS="<=",e.NOT_BETWEEN="notBetween"}(a||(a={}));const i={[a.GREATER_THAN]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isAboveLabel",{defaultMessage:"Is above"}),value:a.GREATER_THAN,requiredValues:1},[a.GREATER_THAN_OR_EQUALS]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isAboveOrEqualsLabel",{defaultMessage:"Is above or equals"}),value:a.GREATER_THAN_OR_EQUALS,requiredValues:1},[a.LESS_THAN]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isBelowLabel",{defaultMessage:"Is below"}),value:a.LESS_THAN,requiredValues:1},[a.LESS_THAN_OR_EQUALS]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isBelowOrEqualsLabel",{defaultMessage:"Is below or equals"}),value:a.LESS_THAN_OR_EQUALS,requiredValues:1},[a.BETWEEN]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isBetweenLabel",{defaultMessage:"Is between"}),value:a.BETWEEN,requiredValues:2},[a.NOT_BETWEEN]:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.isNotBetweenLabel",{defaultMessage:"Not between"}),value:a.NOT_BETWEEN,requiredValues:2}};let s;!function(e){e.COUNT="count",e.AVERAGE="avg",e.SUM="sum",e.MIN="min",e.MAX="max"}(s||(s={}));const o={count:{text:"count()",fieldRequired:!1,value:s.COUNT,validNormalizedTypes:[]},avg:{text:"average()",fieldRequired:!0,validNormalizedTypes:["number"],value:s.AVERAGE},sum:{text:"sum()",fieldRequired:!0,validNormalizedTypes:["number"],value:s.SUM},min:{text:"min()",fieldRequired:!0,validNormalizedTypes:["number","date"],value:s.MIN},max:{text:"max()",fieldRequired:!0,validNormalizedTypes:["number","date"],value:s.MAX}};var u=n(22),c=n(20);const l={all:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.groupByTypes.allDocumentsLabel",{defaultMessage:"all documents"}),sizeRequired:!1,value:"all",validNormalizedTypes:[]},top:{text:r.i18n.translate("xpack.triggersActionsUI.common.constants.comparators.groupByTypes.topLabel",{defaultMessage:"top"}),sizeRequired:!0,value:"top",validNormalizedTypes:["number","date","keyword"]}};var d=n(12);const p={notifyWhen:d.RuleNotifyWhen.CHANGE,throttle:null,summary:!1};var g=n(32),b=n.n(g);const f=d.ISO_WEEKDAYS.map((e=>({id:String(e),label:b()().isoWeekday(e).format("dd")}))),m=d.ISO_WEEKDAYS.map((e=>({id:String(e),label:b()().isoWeekday(e).format("ddd")}))),h="https://www.elastic.co/subscriptions",y="triggersActions",j="triggersActionsConnectors"},function(e,t,n){e.exports=n(64)(2)},function(e,t,n){"use strict";function r(e){return e.useWithTripleBracesInTemplates?`{{{${e.name}}}}`:`{{${e.name}}}`}function a(e){return null!==e.match(/{{.*}}/)}n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i.a})),n.d(t,"f",(function(){return s.f})),n.d(t,"b",(function(){return s.c})),n.d(t,"d",(function(){return o}));var i=n(68),s=n(22);const o=e=>Boolean(e.isSnoozedUntil&&new Date(e.isSnoozedUntil).getTime()>Date.now()||e.muteAll)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"k",(function(){return a})),n.d(t,"h",(function(){return i})),n.d(t,"e",(function(){return r.AlertHistoryEsIndexConnectorId})),n.d(t,"d",(function(){return r.AlertHistoryDocumentTemplate})),n.d(t,"c",(function(){return r.AlertHistoryDefaultIndexName})),n.d(t,"a",(function(){return r.ALERT_HISTORY_PREFIX})),n.d(t,"m",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"l",(function(){return p}));var r=n(23);const a=["params"],i=["context"];let s,o,u,c,l,d,p;!function(e){e[e.SAVED=0]="SAVED",e[e.CANCELED=1]="CANCELED"}(s||(s={})),function(e){e.Test="test",e.ActionForm="actionForm"}(o||(o={})),function(e){e.Configuration="configuration",e.Test="test"}(u||(u={})),function(e){e.P50="P50",e.P95="P95",e.P99="P99"}(c||(c={})),function(e){e.name="kibana.alert.rule.name",e.reason="kibana.alert.reason",e.uuid="kibana.alert.rule.uuid",e.case_ids="kibana.alert.case_ids"}(l||(l={})),function(e){e.add="add",e.delete="delete",e.clear="clear",e.selectCurrentPage="selectCurrentPage",e.selectAll="selectAll",e.rowCountUpdate="rowCountUpdate",e.updateRowLoadingState="updateRowLoadingState",e.updateAllLoadingState="updateAllLoadingState"}(d||(d={})),function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY"}(p||(p={}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(1),a=n(4);const i=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(9),n.e(18)]).then(n.bind(null,78))))),s=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(10)]).then(n.bind(null,77))))),o=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(4),n.e(6),n.e(14)]).then(n.bind(null,81))))),u=Object(a.a)(Object(r.lazy)((()=>n.e(27).then(n.bind(null,110)))));Object(a.a)(Object(r.lazy)((()=>n.e(32).then(n.bind(null,97)))))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"d",(function(){return r.a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return f}));var r=n(39),a=n(6);const i=e=>e.map((e=>s(e))),s=({connector_type_id:e,is_preconfigured:t,is_deprecated:n,referenced_by_count:r,is_missing_secrets:a,is_system_action:i,...s})=>({actionTypeId:e,isPreconfigured:t,isDeprecated:n,referencedByCount:r,isMissingSecrets:a,isSystemAction:i,...s});async function o({http:e}){const t=await e.get(`${a.a}/connectors`);return i(t)}const u=({actionTypeId:e,...t})=>({...t,connector_type_id:e}),c=({connector_type_id:e,is_preconfigured:t,is_deprecated:n,is_missing_secrets:r,is_system_action:a,...i})=>({...i,actionTypeId:e,isPreconfigured:t,isDeprecated:n,isMissingSecrets:r,isSystemAction:a});async function l({http:e,connector:t}){const n=await e.post(`${a.a}/connector`,{body:JSON.stringify(u(t))});return c(n)}async function d({ids:e,http:t}){const n=[],r=[];return await Promise.all(e.map((e=>t.delete(`${a.a}/connector/${encodeURIComponent(e)}`)))).then((function(e){n.push(...e)}),(function(e){r.push(...e)})),{successes:n,errors:r}}const p=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,serviceMessage:t});async function g({id:e,params:t,http:n,signal:r}){const i=await n.post(`${a.a}/connector/${encodeURIComponent(e)}/_execute`,{body:JSON.stringify({params:t}),signal:r});return p(i)}const b=({connector_type_id:e,is_preconfigured:t,is_deprecated:n,is_missing_secrets:r,is_system_action:a,...i})=>({...i,actionTypeId:e,isPreconfigured:t,isDeprecated:n,isMissingSecrets:r,isSystemAction:a});async function f({http:e,connector:t,id:n}){const r=await e.put(`${a.a}/connector/${encodeURIComponent(n)}`,{body:JSON.stringify({name:t.name,config:t.config,secrets:t.secrets})});return b(r)}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/actions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return I})),n.d(t,"a",(function(){return z}));var r=n(13),a=n.n(r),i=n(1),s=n.n(i),o=n(2),u=n(3),c=n(10),l=n(0);const d=o.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.activeLabel",{defaultMessage:"Active"}),p=o.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.recoveredLabel",{defaultMessage:"Recovered"}),g=o.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.flappingLabel",{defaultMessage:"Flapping"}),b=o.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.untrackedLabel",{defaultMessage:"Untracked"}),f=Object(i.memo)((e=>{const{alertStatus:t,flapping:n}=e,r=(e=>"string"==typeof e?"true"===e:e)(n),{label:i,color:s,iconProps:o,isDisabled:f}=((e,t)=>e===c.Y?{label:b,color:"default",isDisabled:!0}:e===c.X?{label:p,color:"success"}:t?{label:g,color:"danger",iconProps:{iconType:"visGauge"}}:{label:d,color:"danger"})(t,r);return Object(l.jsx)(u.EuiBadge,a()({"data-test-subj":"alertLifecycleStatusBadge",isDisabled:f,color:s},o),i)})),m=Object.freeze({kibana:{id:"kibana",label:o.i18n.translate("core.ui.kibanaNavList.label",{defaultMessage:"Analytics"}),euiIconType:"logoKibana",order:1e3},enterpriseSearch:{id:"enterpriseSearch",label:o.i18n.translate("core.ui.searchNavList.label",{defaultMessage:"Search"}),order:2e3,euiIconType:"logoEnterpriseSearch"},observability:{id:"observability",label:o.i18n.translate("core.ui.observabilityNavList.label",{defaultMessage:"Observability"}),euiIconType:"logoObservability",order:3e3},security:{id:"securitySolution",label:o.i18n.translate("core.ui.securityNavList.label",{defaultMessage:"Security"}),order:4e3,euiIconType:"logoSecurity"},management:{id:"management",label:o.i18n.translate("core.ui.managementNavList.label",{defaultMessage:"Management"}),order:5e3,euiIconType:"managementApp"}});let h;!function(e){e.Running="running",e.Upcoming="upcoming",e.Finished="finished",e.Archived="archived"}(h||(h={}));var y=n(5);const j=({http:e,notifications:{toasts:t}},{enabled:n})=>Object(y.useQuery)(["GET",v],(({signal:t})=>(async(e,t)=>(await e.fetch("/internal/alerting/rules/maintenance_window/_active",{method:"GET",signal:t})).map((e=>(({expiration_date:e,r_rule:t,created_by:n,updated_by:r,created_at:a,updated_at:i,event_start_time:s,event_end_time:o,category_ids:u,...c})=>({...c,expirationDate:e,rRule:t,createdBy:n,updatedBy:r,createdAt:a,updatedAt:i,eventStartTime:s,eventEndTime:o,categoryIds:u}))(e))))(e,t)),{enabled:n,refetchInterval:6e4,onError:e=>{t.addError(e,{title:x,toastMessage:O})}}),v="/internal/alerting/rules/maintenance_window/_active",x=o.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchError",{defaultMessage:"Failed to check if maintenance windows are active"}),O=o.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchErrorDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),_="maintenanceWindow",A=o.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),S=o.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveNoCategories",{defaultMessage:"One or more maintenance windows are running"}),T=e=>o.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowTwoCategoryNames",{defaultMessage:"{first} and {second}",values:{first:e[0],second:e[1]}}),E=e=>o.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowMultipleCategoryNames",{defaultMessage:"{commaSeparatedList}, and {last}",values:{commaSeparatedList:e.slice(0,-1).join(", "),last:e.slice(-1).join("")}}),w={...m,management:{...m.management,label:o.i18n.translate("alertsUIShared.maintenanceWindowCallout.managementCategoryLabel",{defaultMessage:"Stack"})}};function I({kibanaServices:e,categories:t}){const{application:{capabilities:n}}=e,r=!n[_].show&&!n[_].save,{data:a=[]}=j(e,{enabled:!r}),s=Object(i.useMemo)((()=>!!a&&0!==a.length&&(!Array.isArray(t)||a.some((({status:e,categoryIds:n})=>e===h.Running&&(!Array.isArray(n)||n.some((e=>t.includes(e)))))))),[t,a]),c=Object(i.useMemo)((()=>{const e=Array.from(new Set(a.map((({categoryIds:e})=>null==e?void 0:e.filter((e=>!t||t.includes(e))))).flat())).map((e=>{var t,n;return null!==(t=null===(n=Object.values(w).find((t=>t.id===e)))||void 0===n?void 0:n.label)&&void 0!==t?t:e})).filter(Boolean);return 0===e.length?null:1===e.length?`${e}`:2===e.length?T(e):E(e)}),[a,t]);return r?null:s?Object(l.jsx)(u.EuiCallOut,{title:c?o.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActive",{defaultMessage:"{activeWindowCount, plural, one {A maintenance window is} other {Maintenance windows are}} running for {categories} rules",values:{categories:c,activeWindowCount:a.length}}):S,color:"warning",iconType:"iInCircle","data-test-subj":"maintenanceWindowCallout"},A):null}n(84);const k={truncatedText:Object(l.css)("text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:",2,";-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;","")},C=({text:e})=>Object(l.jsx)(u.EuiText,{size:"xs",color:"subdued",css:k.truncatedText},e);C.displayName="TruncatedText";const R=s.a.memo(C),M=o.i18n.translate("alertsUIShared.components.addMessageVariables.loadingMessage",{defaultMessage:"Loading variables"}),L=o.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesFound",{defaultMessage:"No variables found"}),P=o.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesAvailable",{defaultMessage:"No variables available"}),U=o.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreShown",{defaultMessage:"Deprecated variables are shown"}),F=o.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreHidden",{defaultMessage:"Deprecated variables are hidden"}),D=o.i18n.translate("alertsUIShared.components.addMessageVariables.hideDeprecatedVariables",{defaultMessage:"Hide"}),N=o.i18n.translate("alertsUIShared.components.addMessageVariables.showAllDeprecatedVariables",{defaultMessage:"Show all"}),V=o.i18n.translate("alertsUIShared.components.addMessageVariables.addVariablePopoverButton",{defaultMessage:"Add variable"}),$=o.i18n.translate("alertsUIShared.components.addMessageVariables.addRuleVariableTitle",{defaultMessage:"Add variable"}),z=({buttonTitle:e,messageVariables:t,paramsProperty:n,onSelectEventHandler:r,showButtonTitle:a=!1})=>{var o;const[c,d]=Object(i.useState)(!1),[p,g]=Object(i.useState)(!1),{euiTheme:b}=Object(u.useEuiTheme)(),f=Object(i.useMemo)((()=>null==t?void 0:t.reduce(((e,t)=>({...e,[t.name]:t})),{})),[t]),m=Object(i.useMemo)((()=>c?t:null==t?void 0:t.filter((e=>!e.deprecated))),[t,c]),h=Object(i.useMemo)((()=>null==m?void 0:m.map((e=>({label:e.name,...e.deprecated?{disabled:!0}:{},data:{description:e.description},"data-test-subj":`${e.name}-selectableOption`})))),[m]),y=e||$,j=Object(i.useMemo)((()=>a?Object(l.jsx)(u.EuiButtonEmpty,{id:`${n}AddVariableButton`,"data-test-subj":`${n}AddVariableButton-Title`,size:"xs",onClick:()=>g(!0),"aria-label":V},y):Object(l.jsx)(u.EuiButtonIcon,{id:`${n}AddVariableButton`,"data-test-subj":`${n}AddVariableButton`,title:y,onClick:()=>g(!0),iconType:"indexOpen","aria-label":V})),[y,n,a]);if(0===(null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0))return Object(l.jsx)(s.a.Fragment,null);const v=({description:e,label:t})=>Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(u.EuiText,{size:"s",style:{fontWeight:b.font.weight.bold}},t),Object(l.jsx)(u.EuiSpacer,{size:"s"}),Object(l.jsx)("hr",null),Object(l.jsx)(u.EuiSpacer,{size:"s"}),Object(l.jsx)(u.EuiText,{size:"xs"},e));return Object(l.jsx)(u.EuiPopover,{button:j,isOpen:p,closePopover:()=>g(!1),panelPaddingSize:"s",anchorPosition:"upRight",panelStyle:{minWidth:350}},Object(l.jsx)(u.EuiSelectable,{searchable:!0,height:300,"data-test-subj":"messageVariablesSelectableList",isLoading:!1,options:h,listProps:{rowHeight:70,showIcons:!1,paddingSize:"none",textWrap:"wrap"},loadingMessage:M,noMatchesMessage:L,emptyMessage:P,renderOption:(e,t)=>Object(l.jsx)(u.EuiFlexGroup,{"data-test-subj":`variableMenuButton-${e.label}`},Object(l.jsx)(u.EuiFlexItem,null,Object(l.jsx)(u.EuiText,{size:"s",style:{fontWeight:b.font.weight.bold}},Object(l.jsx)(u.EuiHighlight,{search:t},e.label)),Object(l.jsx)(u.EuiSpacer,{size:"xs"}),e.description&&Object(l.jsx)(s.a.Fragment,null,Object(l.jsx)(u.EuiToolTip,{display:"block",position:"top",content:Object(l.jsx)(v,{description:e.description,label:e.label}),"data-test-subj":`${e.label}-tooltip`},Object(l.jsx)(R,{text:e.description||""}))))),onChange:e=>{e.map((e=>{"on"===e.checked&&f&&r(f[e.label])})),g(!1)},singleSelection:!0,searchProps:{"data-test-subj":"messageVariablesSelectableSearch"}},((e,t)=>Object(l.jsx)(s.a.Fragment,null,t,Object(l.jsx)(u.EuiSpacer,{size:"xs"}),e,Object(l.jsx)(u.EuiPopoverFooter,{style:{paddingTop:0,paddingBottom:0}},Object(l.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"spaceBetween",responsive:!1,wrap:!0},Object(l.jsx)(u.EuiFlexItem,{grow:!1},Object(l.jsx)(u.EuiText,{color:"grey",size:"xs"},c?U:F)),Object(l.jsx)(u.EuiFlexItem,{grow:!1},Object(l.jsx)(u.EuiButtonEmpty,{"data-test-subj":"showDeprecatedVariablesButton",size:"xs",onClick:()=>d(!c)},c?D:N))))))))};o.i18n.translate("alertsUIShared.component.alertsSearchBar.placeholder",{defaultMessage:"Search alerts (e.g. kibana.alert.evaluation.threshold > 75)"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return T})),n.d(t,"e",(function(){return F})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return V})),n.d(t,"d",(function(){return $.a}));var r=n(13),a=n.n(r),i=n(1),s=n.n(i),o=n(3),u=n(2),c=n(73),l=n(74),d=n(21),p=n(24),g=n(17),b=n(0);const f=u.i18n.translate("xpack.triggersActionsUI.components.jsonEditorWithMessageVariable.noEditorErrorTitle",{defaultMessage:"Unable to add message variable"}),m=u.i18n.translate("xpack.triggersActionsUI.components.jsonEditorWithMessageVariable.noEditorErrorMessage",{defaultMessage:"Editor was not found, please refresh page and try again"}),{useXJsonMode:h}=l.XJson,y=({buttonTitle:e,messageVariables:t,paramsProperty:n,inputTargetValue:r,label:u,errors:l,areaLabel:y,onDocumentsChange:j,helpText:v,onBlur:x,showButtonTitle:O,euiCodeEditorProps:_={}})=>{const A=Object(i.useRef)(),S=Object(i.useRef)([]),[T,E]=Object(i.useState)(!1),{convertToJson:w,setXJson:I,xJson:k}=h(null!=r?r:null);Object(i.useEffect)((()=>{!k&&r&&I(r)}),[r]);const C=Object(i.useCallback)((()=>{const e=A.current;e&&S.current.push(e.onDidBlurEditorWidget((()=>{null==x||x()})))}),[x]);return Object(i.useEffect)((()=>(C(),()=>(S.current.forEach((e=>{e.dispose()})),void(S.current=[])))),[C]),Object(b.jsx)(o.EuiFormRow,{"data-test-subj":"actionJsonEditor",fullWidth:!0,error:l,isInvalid:l&&l.length>0&&void 0!==r,label:u,labelAppend:Object(b.jsx)(p.a,{buttonTitle:e,messageVariables:t,onSelectEventHandler:e=>{const t=A.current;if(!t)return void E(!0);const n=t.getSelection(),r=Object(g.e)(e);let a="";n?(t.executeEdits("json-editor-with-message-variables",[{range:n,text:r}]),a=t.getValue()):a=r,E(!1),I(a),j(w(a))},paramsProperty:n,showButtonTitle:O}),helpText:v},Object(b.jsx)(s.a.Fragment,null,T?Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.EuiSpacer,{size:"s"}),Object(b.jsx)(o.EuiCallOut,{size:"s",color:"danger",iconType:"warning",title:f},Object(b.jsx)("p",null,m)),Object(b.jsx)(o.EuiSpacer,{size:"s"})):null,Object(b.jsx)(d.CodeEditor,a()({languageId:c.XJsonLang.ID,options:{renderValidationDecorations:k?"on":"off",lineNumbers:"on",fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,folding:!0,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0},value:k,width:"100%",height:"200px","data-test-subj":`${n}JsonEditor`,"aria-label":y},_,{editorDidMount:e=>{A.current=e,C()},onChange:e=>{I(e),j(w(e))}}))))},j=({children:e,wrapField:t,formRowProps:n,button:r})=>t?Object(b.jsx)(o.EuiFormRow,a()({},n,{labelAppend:r}),e):Object(b.jsx)(s.a.Fragment,null,e),v=({buttonTitle:e,messageVariables:t,paramsProperty:n,index:r,inputTargetValue:a,editAction:s,errors:u,formRowProps:c,defaultValue:l,wrapField:d=!1,showButtonTitle:f})=>{const[m,h]=Object(i.useState)(null),y=Object(i.useCallback)((e=>{var t,i;const o=Object(g.e)(e),u=null!==(t=null==m?void 0:m.selectionStart)&&void 0!==t?t:0,c=null!==(i=null==m?void 0:m.selectionEnd)&&void 0!==i?i:0,l=(null!=a?a:"").substring(0,u)+o+(null!=a?a:"").substring(c,(null!=a?a:"").length);s(n,l,r)}),[m,s,r,a,n]),v=Object(i.useMemo)((()=>Object(b.jsx)(p.a,{buttonTitle:e,messageVariables:t,onSelectEventHandler:y,paramsProperty:n,showButtonTitle:f})),[e,t,y,n,f]);return Object(b.jsx)(j,{wrapField:d,formRowProps:c,button:v},Object(b.jsx)(o.EuiFieldText,{fullWidth:!0,name:n,id:`${n}Id`,isInvalid:u&&u.length>0&&void 0!==a,"data-test-subj":`${n}Input`,value:a||"",defaultValue:l,onChange:e=>(e=>{s(n,e.target.value,r)})(e),onFocus:e=>{h(e.target)},onBlur:e=>{a||s(n,"",r)},append:d?void 0:v}))};var x=n(33),O=n(75),_=n.n(O),A=n(65);const S={className:"euiSelectableMsgAutoComplete"},T=e=>{let t;try{t=Object(x.a)("isMustacheAutocompleteOn")}catch(e){t=!1}return t?(({editAction:e,errors:t,index:n,inputTargetValue:r,isDisabled:a=!1,label:u,messageVariables:c,paramsProperty:l})=>{const{euiTheme:d}=Object(o.useEuiTheme)(),g=Object(o.useEuiBackgroundColor)("plain"),f=s.a.useRef(null),m=s.a.useRef(null),[h,y]=Object(i.useState)([]),[j,v]=Object(i.useState)({top:0,left:0,height:0,width:0}),[x,O]=Object(i.useState)(!1),[T,E]=Object(i.useState)(-1),[w,I]=Object(i.useState)(!1),[k,C]=Object(i.useState)(""),R=Object(i.useMemo)((()=>null==h?void 0:h.map((e=>({label:e,data:{description:e},"data-test-subj":`${e}-selectableOption`})))),[h]),M=Object(i.useCallback)(((e=!1)=>{e||E(-1),O(!1),I(!1)}),[]),L=Object(i.useCallback)((t=>{if(!f.current)return;const{value:r,selectionStart:a,scrollTop:i}=f.current,s=r.slice(0,a).lastIndexOf(" "),o=r.slice(0,a).lastIndexOf("{{"),u=Math.max(s,o),c=t.find((({checked:e})=>"on"===e));if(c){const t=r.slice(0,u)+"{{"+c.label+"}}"+r.slice(a);e(l,t.trim(),n),y([]),M(),f.current.focus(),setTimeout((()=>{f.current&&(f.current.selectionStart=u+c.label.length+4,f.current.selectionEnd=f.current.selectionStart,f.current.scrollTop=i)}),0)}}),[e,n,l,M]),P=Object(i.useCallback)((()=>{var e;if(!f.current)return;const t=_()(f.current,f.current.selectionStart),n=null===(e=f.current)||void 0===e?void 0:e.getBoundingClientRect(),r=n.top-f.current.scrollTop+window.scrollY+t.top+t.height,a=n.left+window.pageXOffset,i=t.height,s=n.width;v({top:r,left:a,width:s,height:i}),O(!0)}),[]),U=Object(i.useCallback)((()=>{if(!f.current)return;const{value:t,selectionStart:r}=f.current,a=t.slice(r-2,r),i=-1!==T?t.slice(T,r):"";if("{{"===a||i.startsWith("{{")){"{{"===a&&E(r-2);const e=(({actionVariablesList:e,propertyPath:t})=>{if(!e)return[];const n=[];return e.forEach((e=>{const t=e.split(".");for(let e=0;e<t.length;e++){const r=t.slice(0,e+1).join(".");n.includes(r)||n.push(r)}})),n.sort().filter((e=>e.startsWith(t)))})({actionVariablesList:null==c?void 0:c.filter((({deprecated:e})=>!e)).map((({name:e})=>e)),propertyPath:i.slice(2)});C(i.slice(2)),y(e),setTimeout((()=>P()),0)}else"}}"===a?M():y([]);e(l,t,n)}),[T,M,e,n,c,l,P]),F=Object(i.useCallback)((e=>{if(m.current&&x)if(w||"ArrowUp"!==e.code&&"ArrowDown"!==e.code){if("ArrowUp"===e.code)e.preventDefault(),e.stopPropagation(),m.current.incrementActiveOptionIndex(-1);else if("ArrowDown"===e.code)e.preventDefault(),e.stopPropagation(),m.current.incrementActiveOptionIndex(1);else if("Escape"===e.code)e.preventDefault(),e.stopPropagation(),M();else if("Enter"===e.code||"Space"===e.code){const e=m.current.state.activeOptionIndex;L(R.map(((t,n)=>n===e?{...t,checked:"on"}:t))),M()}}else e.preventDefault(),e.stopPropagation(),m.current.onFocus(),I(!0);else I((e=>!e&&e))}),[M,x,L,R,w]),D=Object(i.useCallback)((e=>{var t;const n=(null===(t=document.querySelector(".euiSelectableMsgAutoComplete"))||void 0===t?void 0:t.getBoundingClientRect())||{left:0,right:0,top:0,bottom:0};e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom||M()}),[M]),N=Object(i.useCallback)((t=>{if(!f.current)return;const{selectionStart:a,selectionEnd:i}=f.current,s=function(e){return e.useWithTripleBracesInTemplates?`{{{${e.name}}}}`:`{{${e.name}}}`}(t),o=(null!=r?r:"").substring(0,a)+s+(null!=r?r:"").substring(i,(null!=r?r:"").length);e(l,o,n)}),[e,n,r,l]),V=Object(i.useMemo)((()=>({position:"absolute",top:j.top,width:j.width,left:j.left,border:`${d.border.width.thin} solid ${d.border.color}`,background:g,zIndex:A.euiThemeVars.euiZLevel1})),[g,d.border.color,d.border.width.thin,j.left,j.top,j.width]),$=Object(i.useCallback)((()=>O(!0)),[]),z=Object(i.useCallback)((()=>{r||x||e(l,"",n)}),[e,n,r,x,l]),B=Object(i.useCallback)((()=>M()),[M]),W=Object(i.useCallback)((e=>{var t,n,r;(null==m||null===(t=m.current)||void 0===t?void 0:t.listId)!==(null===(n=e.target)||void 0===n||null===(r=n.firstElementChild)||void 0===r?void 0:r.id)&&M(!0)}),[M]);return Object(i.useEffect)((()=>(window.addEventListener("scroll",W,{passive:!0,capture:!0}),()=>{window.removeEventListener("scroll",W,{capture:!0})})),[W]),Object(b.jsx)(o.EuiFormRow,{error:t,fullWidth:!0,isDisabled:a,isInvalid:t&&t.length>0&&void 0!==r,label:u,labelAppend:Object(b.jsx)(p.a,{messageVariables:c,onSelectEventHandler:N,paramsProperty:l})},Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.EuiOutsideClickDetector,{onOutsideClick:D},Object(b.jsx)(o.EuiTextArea,{disabled:a,inputRef:f,fullWidth:!0,isInvalid:t&&t.length>0&&void 0!==r,name:l,value:r||"","data-test-subj":`${l}TextArea`,onChange:U,onFocus:$,onKeyDown:F,onBlur:z,onClick:B})),h.length>0&&x&&Object(b.jsx)(o.EuiPortal,null,Object(b.jsx)(o.EuiSelectable,{ref:m,style:V,height:h.length>5?176:32*h.length,options:R,onChange:L,singleSelection:!0,renderOption:e=>k?Object(b.jsx)(o.EuiHighlight,{search:k},e.label):e.label,listProps:S},(e=>e)))))})(e):(({messageVariables:e,paramsProperty:t,index:n,inputTargetValue:r,isDisabled:a=!1,editAction:s,label:u,errors:c,helpText:l})=>{const[d,f]=Object(i.useState)(null);return Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,error:c,isDisabled:a,isInvalid:c&&c.length>0&&void 0!==r,label:u,labelAppend:Object(b.jsx)(p.a,{messageVariables:e,onSelectEventHandler:e=>{var a,i;const o=Object(g.e)(e),u=null!==(a=null==d?void 0:d.selectionStart)&&void 0!==a?a:0,c=null!==(i=null==d?void 0:d.selectionEnd)&&void 0!==i?i:0,l=(null!=r?r:"").substring(0,u)+o+(null!=r?r:"").substring(c,(null!=r?r:"").length);s(t,l,n)},paramsProperty:t}),helpText:l},Object(b.jsx)(o.EuiTextArea,{disabled:a,fullWidth:!0,isInvalid:c&&c.length>0&&void 0!==r,name:t,value:r||"","data-test-subj":`${t}TextArea`,onChange:e=>(e=>{s(t,e.target.value,n)})(e),onFocus:e=>{f(e.target)},onBlur:()=>{r||s(t,"",n)}}))})(e)};var E=n(40),w=n(18),I=n(66);const k=Object(w.getUseField)({component:E.Field}),C=Object(w.getUseField)({component:E.ComboBoxField}),{emptyField:R,urlField:M}=I.fieldValidators,L=({label:e,isRequired:t=!0,isUrlField:n=!1,defaultValue:r,type:a})=>({label:e,validations:[...t?[{validator:R(u.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.requireFieldText",{values:{label:e},defaultMessage:"{label} is required."}))}]:[],...n?[{validator:M(u.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorForm.error.invalidURL",{defaultMessage:"Invalid URL"}))}]:[]],defaultValue:r,...a&&w.FIELD_TYPES[a]?{type:w.FIELD_TYPES[a],defaultValue:Array.isArray(r)?r:[]}:{}}),P=({id:e,label:t,readOnly:n,isPasswordField:r,isRequired:a=!0,isUrlField:i,helpText:u,defaultValue:c,euiFieldProps:l={},type:d})=>{const p=`${e}-input`,g=(e=>{let t=k;return e&&w.FIELD_TYPES[e]===w.FIELD_TYPES.COMBO_BOX&&(t=C),t})(d);return Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,r?Object(b.jsx)(g,{path:e,config:L({label:t,type:d,isRequired:a}),helpText:u,component:E.PasswordField,componentProps:{euiFieldProps:{...l,"data-test-subj":p,readOnly:n}}}):Object(b.jsx)(g,{path:e,config:L({label:t,isUrlField:i,defaultValue:c,type:d,isRequired:a}),helpText:u,componentProps:{euiFieldProps:{...l,readOnly:n,fullWidth:!0,"data-test-subj":p}}}))))},U=({isEdit:e,readOnly:t,configFormSchema:n,secretsFormSchema:r,configFormSchemaAfterSecrets:i=[]})=>Object(b.jsx)(s.a.Fragment,null,n.map((({id:e,...r},i)=>Object(b.jsx)(s.a.Fragment,{key:`config.${e}`},Object(b.jsx)(P,a()({id:`config.${e}`},r,{readOnly:t})),i!==n.length?Object(b.jsx)(o.EuiSpacer,{size:"m"}):null))),Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiTitle,{size:"xxs"},Object(b.jsx)("h4",null,u.i18n.translate("xpack.triggersActionsUI.components.simpleConnectorForm.secrets.authenticationLabel",{defaultMessage:"Authentication"}))))),Object(b.jsx)(o.EuiSpacer,{size:"m"}),r.map((({id:e,...n},i)=>Object(b.jsx)(s.a.Fragment,{key:`secrets.${e}`},Object(b.jsx)(P,a()({id:`secrets.${e}`,key:`secrets.${e}`},n,{readOnly:t})),i!==r.length?Object(b.jsx)(o.EuiSpacer,{size:"m"}):null))),i.map((({id:e,...n},r)=>Object(b.jsx)(s.a.Fragment,{key:`config.${e}`},Object(b.jsx)(P,a()({id:`config.${e}`},n,{readOnly:t})),r!==i.length?Object(b.jsx)(o.EuiSpacer,{size:"m"}):null)))),F=Object(i.memo)(U),D={editor:{name:"1236snz",styles:".euiFormRow__fieldWrapper .kibanaCodeEditor{height:auto;}"}},N=({field:e,...t})=>{const{errorMessage:n}=Object(w.getFieldValidityAndErrorMessage)(e),{label:r,helpText:s,value:o,setValue:c}=e,l=Object(i.useCallback)((e=>{c(e)}),[c]);return Object(b.jsx)("span",{css:D.editor},Object(b.jsx)(y,a()({errors:n?[n]:[],helpText:Object(b.jsx)("p",null,s),inputTargetValue:o,label:null!=r?r:u.i18n.translate("xpack.triggersActionsUI.jsonFieldWrapper.defaultLabel",{defaultMessage:"JSON Editor"}),onDocumentsChange:l},t)))},V=({field:e,euiFieldProps:t,idAria:n,...r})=>{const{isInvalid:s,errorMessage:o}=Object(w.getFieldValidityAndErrorMessage)(e),{value:u,setValue:c}=e,l=Object(i.useCallback)(((e,t)=>{c(t)}),[c]);return Object(b.jsx)(v,a()({errors:o?[o]:[],formRowProps:{describedByIds:n?[n]:void 0,error:o,fullWidth:!0,helpText:"function"==typeof e.helpText?e.helpText():e.helpText,isInvalid:s,label:e.label,...r},index:0,inputTargetValue:u,wrapField:!0},t,{editAction:l}))};var $=n(56)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"c",(function(){return j}));var r=n(12),a=n(2),i=n(11);const s=1e3;function o(e,t){if(e)return function(e,t){const n=Date.parse(e);if(isNaN(n))throw new Error(c("date",t,e));return n.valueOf()}(e,t)}function u(e,t){try{return Object(r.parseDuration)(e)}catch(n){throw new Error(c("duration",t,e))}}function c(e,t,n){return a.i18n.translate("xpack.triggersActionsUI.data.coreQueryParams.formattedFieldErrorMessage",{defaultMessage:'invalid {formatName} format for {fieldName}: "{fieldValue}"',values:{formatName:e,fieldName:t,fieldValue:n}})}const l="compareValue",d=`params.${l}`,p=e=>"count"===e,g=e=>!!e,b=({timeSeries:e,aggType:t,aggField:n,termField:r,termSize:c,condition:d,topHitsSize:b})=>{const f={aggs:{}},m=p(t),h=g(r),y=Array.isArray(r),j=!!e,v=!!d;let x=null;if(j){const{timeWindowSize:t,timeWindowUnit:n,dateStart:r,dateEnd:c,interval:l}=e;x=function(e){const{dateStart:t,dateEnd:n,interval:r,window:c}=e,l=o(n,"dateEnd")||Date.now(),d=o(t,"dateStart")||l;if(d>l)throw new Error(a.i18n.translate("xpack.triggersActionsUI.data.coreQueryParams.dateStartGTdateEndErrorMessage",{defaultMessage:"[dateStart]: is greater than [dateEnd]"}));const p=((g=r)?u(g,"interval"):void 0)||0;var g;const b=u(c,"window");let f=l;const m=[],h=p?1+Math.round((l-d)/p):1;if(h>s)throw new Error(function(e,t){return a.i18n.translate("xpack.triggersActionsUI.data.coreQueryParams.maxIntervalsErrorMessage",{defaultMessage:"calculated number of intervals {intervals} is greater than maximum {maxIntervals}",values:{intervals:e,maxIntervals:t}})}(h,s));return Object(i.times)(h,(()=>{m.push({from:new Date(f-b).toISOString(),to:new Date(f).toISOString()}),f-=p})),m.reverse(),{dateStart:m[0].from,dateEnd:m[m.length-1].to,dateRanges:m}}({dateStart:r,dateEnd:c,window:`${t}${n}`,interval:l})}let O=c||100;O=v&&d.resultLimit&&O>d.resultLimit?d.resultLimit+1:O;let _=f;const A=()=>j?"sortValueAgg":"metricAgg";if(h){if(_.aggs={groupAgg:{...y?{multi_terms:{terms:r.map((e=>({field:e}))),size:O}}:{terms:{field:r,size:O}}},...v?{groupAggCount:{stats_bucket:{buckets_path:"groupAgg._count"}}}:{}},m)v&&(_.aggs.groupAgg.aggs={conditionSelector:{bucket_selector:{buckets_path:{[l]:"_count"},script:d.conditionScript}}});else{const e="min"===t?"asc":"desc";_.aggs.groupAgg.terms.order={[A()]:e}}_=_.aggs.groupAgg}return j&&(_.aggs={..._.aggs,dateAgg:{date_range:{field:e.timeField,format:"strict_date_time",ranges:x.dateRanges}}}),h&&b&&(_.aggs={..._.aggs,topHitsAgg:{top_hits:{size:b}}}),m||(_.aggs={..._.aggs,[A()]:{[t]:{field:n}}},h&&v&&(_.aggs.conditionSelector={bucket_selector:{buckets_path:{[l]:A()},script:d.conditionScript}})),e&&x&&(_=_.aggs.dateAgg,m||(_.aggs={metricAgg:{[t]:{field:n}}})),f.aggs},f=({isCountAgg:e,isGroupAgg:t,esResult:n,resultLimit:r})=>{var a,i,s;const o=(null==n?void 0:n.aggregations)||{};var u,c,l,d,p;t||(o.groupAgg={buckets:[{key:"all documents",doc_count:(d=n.hits.total,"number"==typeof d?d:null!==(p=null==d?void 0:d.value)&&void 0!==p?p:0),topHitsAgg:{hits:{hits:null!==(u=n.hits.hits)&&void 0!==u?u:[]}},...e?{}:{metricAgg:{value:null!==(c=null===(l=o.metricAgg)||void 0===l?void 0:l.value)&&void 0!==c?c:0}}}]});const g=(null===(a=o.groupAgg)||void 0===a?void 0:a.buckets)||[],b=null!==(i=null===(s=o.groupAggCount)||void 0===s?void 0:s.count)&&void 0!==i?i:0,f={results:[],truncated:!!r&&b>r};for(const t of g){var m,h,y,j;if(r&&f.results.length===r)break;const n={group:`${null==t?void 0:t.key}`,count:null==t?void 0:t.doc_count,hits:null!==(m=null==t||null===(h=t.topHitsAgg)||void 0===h||null===(y=h.hits)||void 0===y?void 0:y.hits)&&void 0!==m?m:[],...e?{}:{value:null==t||null===(j=t.metricAgg)||void 0===j?void 0:j.value}};f.results.push(n)}return f};var m=n(53);const h=new RegExp(`^([\\d\\.]+)\\s*(${n.n(m).a.units.join("|")})$`),y=e=>{if(e){const t=e.match(h);if(t)return{value:Number(t[1]),unit:t[2]}}throw new Error(a.i18n.translate("xpack.triggersActionsUI.parseInterval.errorMessage",{defaultMessage:"{value} is not an interval string",values:{value:e}}))};n(28);const j={long:"number",integer:"number",short:"number",byte:"number",double:"number",float:"number",half_float:"number",scaled_float:"number",unsigned_long:"number"},v="/internal/triggers_actions_ui"},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));const r=Object.freeze({rulesListDatagrid:!0,internalAlertsTable:!1,ruleTagFilter:!0,ruleStatusFilter:!0,rulesDetailLogs:!0,ruleUseExecutionStatus:!1,ruleKqlBar:!1,isMustacheAutocompleteOn:!1,showMustacheAutocompleteSwitch:!1}),a=class extends Error{},i=Object.keys(r),s=e=>{const t={};for(const n of e){if(!o(n))throw new a(`[${n}] is not valid.`);t[n]=!0}return{...r,...t}},o=e=>i.includes(e),u=()=>[...i]},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){"use strict";n.d(t,"a",(function(){return r.KibanaContextProvider})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(21);const a=()=>Object(r.useKibana)();var i=n(1);const s=()=>{const{spaces:e}=a().services,[t,n]=Object(i.useState)(void 0),r=null==e?void 0:e.ui.useSpaces();return Object(i.useEffect)((()=>{(async()=>{const e=await(null==r?void 0:r.spacesDataPromise);n(e)})()}),[e,r,n]),t}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return c}));var r=n(12),a=n(33);const i=e=>{switch(e){case"succeeded":return"success";case"failed":return"danger";case"warning":return"warning";default:return"subdued"}},s=e=>{switch(e){case"active":return"success";case"error":return"danger";case"ok":return"primary";case"pending":return"accent";case"warning":return"warning";default:return"subdued"}},o=e=>Object(a.a)("ruleUseExecutionStatus")?s(e.executionStatus.status):e.lastRun&&i(e.lastRun.outcome)||"subdued",u=e=>{var t,n;return(null===(t=e.lastRun)||void 0===t?void 0:t.warning)===r.RuleExecutionStatusErrorReasons.License||(null===(n=e.executionStatus.error)||void 0===n?void 0:n.reason)===r.RuleExecutionStatusErrorReasons.License},c=({rule:e,licenseErrorText:t,lastOutcomeTranslations:n,executionStatusTranslations:r})=>{const i=u(e),s=Object(a.a)("ruleUseExecutionStatus");return i?t:s?r[e.executionStatus.status]:e.lastRun&&n[e.lastRun.outcome]}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(28),a=n(44);const i=Object(r.a)(),s=e=>{if(!Object(r.b)(e))throw new Error(`Invalid enable value ${e}. Allowed values are: ${i.join(", ")}`);return a.a.get()[e]}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));const r=({last_execution_date:e,last_duration:t,...n})=>({lastExecutionDate:e,lastDuration:t,...n}),a=({outcome_msg:e,outcome_order:t,alerts_count:n,...r})=>({outcomeMsg:e,outcomeOrder:t,alertsCount:n,...r}),i=({rule_type_id:e,created_by:t,updated_by:n,created_at:i,updated_at:s,api_key_owner:o,api_key_created_by_user:u,notify_when:c,mute_all:l,muted_alert_ids:d,scheduled_task_id:p,execution_status:g,actions:b,snooze_schedule:f,is_snoozed_until:m,active_snoozes:h,last_run:y,next_run:j,...v})=>({ruleTypeId:e,createdBy:t,updatedBy:n,createdAt:i,updatedAt:s,apiKeyOwner:o,notifyWhen:c,muteAll:l,mutedInstanceIds:d,snoozeSchedule:f,executionStatus:g?r(g):void 0,actions:b?b.map((e=>(({uuid:e,group:t,id:n,connector_type_id:r,params:a,frequency:i,alerts_filter:s,use_alert_data_for_template:o})=>({group:t,id:n,params:a,actionTypeId:r,...void 0!==o?{useAlertDataForTemplate:o}:{},...i?{frequency:{summary:i.summary,notifyWhen:i.notify_when,throttle:i.throttle}}:{},...s?{alertsFilter:s}:{},...e&&{uuid:e}}))(e))):[],scheduledTaskId:p,isSnoozedUntil:m,activeSnoozes:h,...y?{lastRun:a(y)}:{},...j?{nextRun:j}:{},...void 0!==u?{apiKeyCreatedByUser:u}:{},...v}),s=({alias_target_id:e,alias_purpose:t,outcome:n,...r})=>({...i(r),alias_target_id:e,alias_purpose:t,outcome:n})},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(1),a=n(11);const i=Object(r.createContext)(void 0),s=Object(r.createContext)({mutedAlerts:{},bulkActions:[{},a.noop]})},function(e,t){e.exports=__kbnSharedDeps__.ElasticNumeral},function(e,t,n){"use strict";var r=n(45);n.d(t,"c",(function(){return r.a})),n.d(t,"d",(function(){return r.b}));var a=n(31);n.d(t,"b",(function(){return a.c})),n.d(t,"a",(function(){return a.a}));var i=n(30);n.d(t,"e",(function(){return i.b}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r=n(1),a=n(4);const i=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(3),n.e(16)]).then(n.bind(null,79))))),s=Object(a.a)(Object(r.lazy)((()=>Promise.all([n.e(0),n.e(3),n.e(17)]).then(n.bind(null,80)))))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6);const a=e=>e.map((e=>i(e))),i=({enabled_in_config:e,enabled_in_license:t,minimum_license_required:n,supported_feature_ids:r,is_system_action_type:a,...i})=>({enabledInConfig:e,enabledInLicense:t,minimumLicenseRequired:n,supportedFeatureIds:r,isSystemActionType:a,...i});async function s({http:e,featureId:t}){const n=t?await e.get(`${r.a}/connector_types`,{query:{feature_id:t}}):await e.get(`${r.a}/connector_types`);return a(n)}},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n(6);function i(e=a.p.SECOND,t="0"){switch(e){case a.p.SECOND:return r.i18n.translate("xpack.triggersActionsUI.timeUnits.secondLabel",{defaultMessage:"{timeValue, plural, one {second} other {seconds}}",values:{timeValue:t}});case a.p.MINUTE:return r.i18n.translate("xpack.triggersActionsUI.timeUnits.minuteLabel",{defaultMessage:"{timeValue, plural, one {minute} other {minutes}}",values:{timeValue:t}});case a.p.HOUR:return r.i18n.translate("xpack.triggersActionsUI.timeUnits.hourLabel",{defaultMessage:"{timeValue, plural, one {hour} other {hours}}",values:{timeValue:t}});case a.p.DAY:return r.i18n.translate("xpack.triggersActionsUI.timeUnits.dayLabel",{defaultMessage:"{timeValue, plural, one {day} other {days}}",values:{timeValue:t}})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=new(n(5).QueryClient)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c}));const r="/internal/triggers_actions_ui/data",a=e=>{let t=e;return t.startsWith("*")||(t=`*${t}`),t.endsWith("*")||(t=`${t}*`),t};async function i({pattern:e,http:t}){try{const n=a(e),{indices:i}=await t.post(`${r}/_indices`,{body:JSON.stringify({pattern:n})});return i}catch(e){return[]}}async function s({indexes:e,http:t}){const{fields:n}=await t.post(`${r}/_fields`,{body:JSON.stringify({indexPatterns:e})});return n}let o;const u=e=>{o=e},c=async e=>{const t=a(e);try{return(await o.find(t,1e3)).map((e=>e.title))}catch(e){return[]}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ExperimentalFeaturesService}));var r=n(16),a=n.n(r);class ExperimentalFeaturesService{static init({experimentalFeatures:e}){this.experimentalFeatures=e}static get(){return this.experimentalFeatures||this.throwUninitializedError(),this.experimentalFeatures}static throwUninitializedError(){throw new Error("Experimental features services not initialized - are you trying to import this module from outside of the triggers actions UI app?")}}a()(ExperimentalFeaturesService,"experimentalFeatures",void 0)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(41),a=n(6);const i=e=>Object.entries(a.p).map((([t,n])=>({text:Object(r.a)(n,e.toString()),value:n}))),s=e=>{const t=[];return e.forEach((e=>{"date"!==e.type&&"date_nanos"!==e.type||t.push({text:e.name,value:e.name})})),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(2);const a=r.i18n.translate("xpack.triggersActionsUI.cases.label",{defaultMessage:"Cases"}),i=r.i18n.translate("xpack.triggersActionsUI.maintenanceWindows.label",{defaultMessage:"Maintenance Windows"})},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(2);r.i18n.translate("xpack.triggersActionsUI.sections.actionForm.preconfiguredTitleMessage",{defaultMessage:"(preconfigured)"});const a=r.i18n.translate("xpack.triggersActionsUI.sections.deprecatedTitleMessage",{defaultMessage:"(deprecated)"}),i=r.i18n.translate("xpack.triggersActionsUI.sections.isDeprecatedDescription",{defaultMessage:"This connector is deprecated. Update it, or create a new one."})},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const r=({rule_execution_status:e,rule_last_run_outcome:t,rule_enabled_status:n,rule_muted_status:r,rule_snoozed_status:a,rule_tags:i})=>({ruleExecutionStatus:e,ruleEnabledStatus:n,ruleMutedStatus:r,ruleSnoozedStatus:a,ruleLastRunOutcome:t,ruleTags:i}),a=({per_page:e,...t})=>({perPage:e,...t})},function(e,t,n){"use strict";var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function s(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function o(e,t){for(var n={},r=[],a=0;a<e.length;a++){var o=e[a],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var d=s(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(p)):i.push({identifier:l,updater:f(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var i=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var g=null,b=0;function f(e,t){var n,r,a;if(t.singleton){var i=b++;n=g||(g=u(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=s(n[r]);i[a].references--}for(var u=o(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=u}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,a,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var o=(n=s,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(a," */")),u=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(u).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(a[s]=!0)}for(var o=0;o<e.length;o++){var u=[].concat(e[o]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(1);var r=n(3),a=n(0);const i=({size:e})=>Object(a.jsx)(r.EuiFlexGroup,{"data-test-subj":"centerJustifiedSpinner",justifyContent:"center"},Object(a.jsx)(r.EuiFlexItem,{grow:!1},Object(a.jsx)(r.EuiLoadingSpinner,{size:e||"xl"})))},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(2),a=n(5),i=n(12),s=n(1),o=n(55),u=n(30);const c=({filteredRuleTypes:e,enabled:t=!0})=>{const{http:n,notifications:{toasts:c}}=Object(u.b)().services,{data:l,isSuccess:d,isFetching:p,isInitialLoading:g,isLoading:b,error:f}=Object(a.useQuery)({queryKey:["loadRuleTypes"],queryFn:()=>Object(o.a)({http:n}),onError:()=>{c.addDanger(r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"}))},refetchOnWindowFocus:!1,staleTime:6e4,enabled:t}),m=Object(s.useMemo)((()=>l?((e,t)=>{const n=new Map;for(const t of e)n.set(t.id,t);let r=n;return null!=t&&t.length&&(r=new Map([...n].filter((([e,n])=>t.includes(n.id))))),r})(l,e):new Map),[l,e]),h=m.size>0,y=Object(s.useMemo)((()=>[...m.values()]),[m]),j=y.some((e=>{var t;return null===(t=e.authorizedConsumers[i.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all})),v=j||y.some((e=>{var t;return null===(t=e.authorizedConsumers[i.ALERTS_FEATURE_ID])||void 0===t?void 0:t.read}));return{ruleTypesState:{initialLoad:b||g,isLoading:b||p,data:m,error:f},hasAnyAuthorizedRuleType:h,authorizedRuleTypes:y,authorizedToReadAnyRules:v,authorizedToCreateAnyRules:j,isSuccess:d}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6);const a=e=>e.map((e=>i(e))),i=({enabled_in_license:e,recovery_action_group:t,action_groups:n,default_action_group_id:r,minimum_license_required:a,action_variables:i,authorized_consumers:s,rule_task_timeout:o,does_set_recovery_context:u,default_schedule_interval:c,has_alerts_mappings:l,has_fields_for_a_a_d:d,...p})=>({enabledInLicense:e,recoveryActionGroup:t,actionGroups:n,defaultActionGroupId:r,minimumLicenseRequired:a,actionVariables:i,authorizedConsumers:s,ruleTaskTimeout:o,doesSetRecoveryContext:u,defaultScheduleInterval:c,hasAlertsMappings:l,hasFieldsForAAD:d,...p});async function s({http:e}){const t=await e.get(`${r.b}/rule_types`);return a(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(1);var r=n(3),a=n(0);const i=({children:e})=>Object(a.jsx)(r.EuiEmptyPrompt,{title:Object(a.jsx)(r.EuiLoadingSpinner,{size:"xl"}),body:Object(a.jsx)(r.EuiText,{color:"subdued"},e),"data-test-subj":"sectionLoading"})},function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n(29),a=n(11);const i=n(2).i18n.translate("xpack.triggersActionsUI.sections.actionTypeForm.error.requiredFilterQuery",{defaultMessage:"A custom query is required."}),s=e=>{var t;const n=null===(t=e.alertsFilter)||void 0===t?void 0:t.query;return n&&!n.kql?i:null};function o(e){return t=>{if(null==t)throw new Error(e);return t}}function u(e,t,n){const r="function"==typeof t?t:Object(a.constant)(t);return t=>{const a=new Set(t.map(n));for(const t of e.values())if(!a.has(t))throw new Error(r(t));return t}}function c(e,t,n,i){return Object.keys(t).forEach((n=>{t[n].length>=1&&void 0===Object(a.get)(e.params,n)&&Object(r.set)(e.params,n,null)})),Object.keys(n).forEach((t=>{n[t].length>=1&&void 0===Object(a.get)(e,t)&&Object(r.set)(e,t,null)})),i.forEach(((t,n)=>{const i=e.actions.length>n?e.actions[n]:null;i&&Object.keys(t).forEach((e=>{t[e].length>=1&&void 0===Object(a.get)(i.params,e)&&Object(r.set)(i.params,e,null)}))})),e}},function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"j",(function(){return g})),n.d(t,"h",(function(){return b})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return v}));var r=n(10),a=n(60),i=n(46);const s=925,o=260,u=e=>null!=e&&null!=e.fields?Object.keys(e.fields).length:0,c=(e,t)=>{const n=[i.a.toLocaleLowerCase(),i.b.toLocaleLowerCase(),"cases","maintenance windows"],a=[r.b,r.p],s=t.toLocaleLowerCase(),o=a.includes(e),u=n.some((e=>e.includes(s)));return o&&u};function l({browserFields:e,substring:t}){const n=t.trim();if(""===n)return e;const r={};for(const[t,a]of Object.entries(e)){if(!a.fields)continue;let i=!1;const s={};for(const[e,t]of Object.entries(a.fields)){const r=t.name;r&&null!==r&&(r.includes(n)||c(r,n))&&(i=!0,s[e]=t)}i&&(r[t]={...e[t],fields:s})}return r}const d=({browserFields:e,columnIds:t})=>{const n=new Set(t),r={};for(const[t,a]of Object.entries(e)){if(!a.fields)continue;let i=!1;const s={};for(const[e,t]of Object.entries(a.fields)){const r=t.name;r&&n.has(r)&&(i=!0,s[e]=t)}i&&(r[t]={...e[t],fields:s})}return r},p=e=>{switch(e){case"string":case"keyword":return"string";case"number":case"long":case"float":return"number";case"date":return"clock";case"ip":case"geo_point":return"globe";default:return"questionInCircle"}},g=()=>"â€”",b=e=>{var t;const n=null==e?void 0:e.split(".");return 1===(null==n?void 0:n.length)?"base":null!==(t=null==n?void 0:n[0])&&void 0!==t?t:"(unknown)"},f=(e,t)=>{var n,r;return null!==(n=null===(r=t[e])||void 0===r?void 0:r.description)&&void 0!==n?n:""},m=e=>Object(a.isEmpty)(e)?"":`Example: ${e}`,h=e=>"Escape"===e.key,y="category-table",j="close-button",v="reset-fields"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(6);const a=async({filter:e,ids:t,http:n})=>{try{const a=JSON.stringify({...null!=t&&t.length?{ids:t}:{},...e?{filter:JSON.stringify(e)}:{}});return n.patch(`${r.j}/rules/_bulk_delete`,{body:a})}catch(e){throw new Error(`Unable to parse bulk delete params: ${e}`)}}},function(e,t){e.exports=__kbnSharedDeps__.LodashFp},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var s=i[a];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6);const a=({values_with_timestamp:e,...t})=>({valuesWithTimestamp:e,...t}),i=({rule_type_id:e,mute_all:t,status_start_date:n,status_end_date:r,error_messages:i,last_run:s,execution_duration:o,...u})=>({...u,ruleTypeId:e,muteAll:t,statusStartDate:n,statusEndDate:r,errorMessages:i,lastRun:s,executionDuration:o?a(o):void 0});async function s({http:e,ruleId:t,numberOfExecutions:n}){const a=await e.get(`${r.j}/rule/${encodeURIComponent(t)}/_alert_summary`,{query:{number_of_executions:n}});return i(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(6),a=n(34);async function i({http:e,ruleId:t}){const n=await e.get(`${r.j}/rule/${encodeURIComponent(t)}`);return Object(a.b)(n)}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o}));var r=n(6);const a=({typesFilter:e,actionTypesFilter:t,ruleExecutionStatusesFilter:n,ruleStatusesFilter:r,tagsFilter:a})=>{const i=[];if(e&&e.length&&i.push(`alert.attributes.alertTypeId:(${e.join(" or ")})`),t&&t.length&&i.push(["(",t.map((e=>`alert.attributes.actions:{ actionTypeId:${e} }`)).join(" OR "),")"].join("")),n&&n.length&&i.push(`alert.attributes.executionStatus.status:(${n.join(" or ")})`),r&&r.length){const e="(alert.attributes.muteAll:true OR alert.attributes.snoozeSchedule: { duration > 0 })",t="alert.attributes.enabled: true",n="alert.attributes.enabled: false",a=[];r.includes("enabled")&&a.push(t),r.includes("disabled")&&a.push(n),r.includes("snoozed")&&a.push(`${e}`),i.push(a.join(" and "))}return a&&a.length&&i.push(`alert.attributes.tags:(${a.join(" or ")})`),i};var i=n(49);async function s({http:e,search:t,perPage:n,page:a}){const s=await e.get(`${r.j}/rules/_tags`,{query:{search:t,per_page:n,page:a}});return Object(i.b)(s)}async function o({http:e,searchText:t,typesFilter:n,actionTypesFilter:s,ruleExecutionStatusesFilter:o,ruleStatusesFilter:u,tagsFilter:c,filterConsumers:l}){const d=a({typesFilter:n,actionTypesFilter:s,ruleExecutionStatusesFilter:o,ruleStatusesFilter:u,tagsFilter:c}),p=await e.post(`${r.j}/rules/_aggregate`,{body:JSON.stringify({search_fields:t?JSON.stringify(["name","tags"]):void 0,search:t,filter:d.length?d.join(" and "):void 0,default_search_operator:"AND",filter_consumers:l})});return Object(i.a)(p)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(2),a=n(11),i=n(19);function s(e,t){if(!e)return[];const n=t?"all"===t?Object(a.pick)(e,i.k):Object(a.pick)(e,[...i.k,...i.h]):e,r=p(n.params,"rule.params."),s=n.context?p(n.context,"context."):[],o=n.state?p(n.state,"state."):[];return s.concat(r,o)}function o(e,t,n,a){if(a){const e=function(){const e=[];return e.push(d[u.kibanaBaseUrl]),e.push(d[u.date]),e.push({name:l.ruleParams,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleParamsLabel",{defaultMessage:"The params of the rule."})}),e.push(d[u.ruleId]),e.push(d[u.ruleName]),e.push(d[u.ruleType]),e.push(d[u.ruleUrl]),e.push(d[u.ruleTags]),e.push(d[u.ruleSpaceId]),e.push({name:l.newAlertsCount,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.newAlertsCountLabel",{defaultMessage:"The count of new alerts."})}),e.push({name:l.newAlertsData,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.newAlertsDataLabel",{defaultMessage:"An array of objects for new alerts."})}),e.push({name:l.ongoingAlertsCount,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ongoingAlertsCountLabel",{defaultMessage:"The count of ongoing alerts."})}),e.push({name:l.ongoingAlertsData,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ongoingAlertsDataLabel",{defaultMessage:"An array of objects for ongoing alerts."})}),e.push({name:l.recoveredAlertsCount,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.recoveredAlertsCountLabel",{defaultMessage:"The count of recovered alerts."})}),e.push({name:l.recoveredAlertsData,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.recoveredAlertsDataLabel",{defaultMessage:"An array of objects for recovered alerts."})}),e.push({name:l.allAlertsCount,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.allAlertsCountLabel",{defaultMessage:"The count of all alerts."})}),e.push({name:l.allAlertsData,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.allAlertsDataLabel",{defaultMessage:"An array of objects for all alerts."})}),e}(),a=s(t,n);return e.concat(a)}const i=function(){const e=[];return e.push(d[u.ruleId]),e.push(d[u.ruleName]),e.push(d[u.ruleSpaceId]),e.push(d[u.ruleTags]),e.push(d[u.ruleType]),e.push(d[u.ruleUrl]),e.push(d[u.date]),e.push({name:u.alertId,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.alertIdLabel",{defaultMessage:"The ID of the alert that scheduled actions for the rule."})}),e.push({name:u.alertActionGroup,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupLabel",{defaultMessage:"The action group of the alert that scheduled actions for the rule."})}),e.push({name:u.alertActionSubgroup,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionSubgroupLabel",{defaultMessage:"The action subgroup of the alert that scheduled actions for the rule."})}),e.push({name:u.alertActionGroupName,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.alertActionGroupNameLabel",{defaultMessage:"The human readable name of the action group of the alert that scheduled actions for the rule."})}),e.push({name:u.alertFlapping,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.alertFlappingLabel",{defaultMessage:"A flag on the alert that indicates whether the alert status is changing repeatedly."})}),e.push(d[u.kibanaBaseUrl]),e.push({name:c.alertId,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.ruleId}})}),e.push({name:c.alertName,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.ruleName}})}),e.push({name:c.alertInstanceId,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertInstanceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.alertId}})}),e.push({name:c.alertActionGroup,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.alertActionGroup}})}),e.push({name:c.alertActionGroupName,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionGroupNameLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.alertActionGroupName}})}),e.push({name:c.alertActionSubgroup,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyAlertActionSubGroupLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.alertActionSubgroup}})}),e.push({name:c.spaceId,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacySpaceIdLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.ruleSpaceId}})}),e.push({name:c.tags,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyTagsLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.ruleTags}})}),e.push({name:c.params,deprecated:!0,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.legacyParamsLabel",{defaultMessage:"This has been deprecated in favor of {variable}.",values:{variable:u.ruleParams}})}),e}(),o=s(e,n);return i.concat(o)}let u,c,l;!function(e){e.ruleId="rule.id",e.ruleName="rule.name",e.ruleSpaceId="rule.spaceId",e.ruleTags="rule.tags",e.ruleType="rule.type",e.ruleUrl="rule.url",e.ruleParams="rule.params",e.date="date",e.alertId="alert.id",e.alertActionGroup="alert.actionGroup",e.alertActionGroupName="alert.actionGroupName",e.alertActionSubgroup="alert.actionSubgroup",e.alertFlapping="alert.flapping",e.kibanaBaseUrl="kibanaBaseUrl"}(u||(u={})),function(e){e.alertId="alertId",e.alertName="alertName",e.alertInstanceId="alertInstanceId",e.alertActionGroup="alertActionGroup",e.alertActionGroupName="alertActionGroupName",e.alertActionSubgroup="alertActionSubgroup",e.tags="tags",e.spaceId="spaceId",e.params="params"}(c||(c={})),function(e){e.ruleParams="rule.params",e.newAlertsCount="alerts.new.count",e.newAlertsData="alerts.new.data",e.ongoingAlertsCount="alerts.ongoing.count",e.ongoingAlertsData="alerts.ongoing.data",e.recoveredAlertsCount="alerts.recovered.count",e.recoveredAlertsData="alerts.recovered.data",e.allAlertsCount="alerts.all.count",e.allAlertsData="alerts.all.data"}(l||(l={}));const d={[u.ruleId]:{name:u.ruleId,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleIdLabel",{defaultMessage:"The ID of the rule."})},[u.ruleName]:{name:u.ruleName,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleNameLabel",{defaultMessage:"The name of the rule."})},[u.ruleSpaceId]:{name:u.ruleSpaceId,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleSpaceIdLabel",{defaultMessage:"The space ID of the rule."})},[u.ruleTags]:{name:u.ruleTags,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTagsLabel",{defaultMessage:"The tags of the rule."})},[u.ruleType]:{name:u.ruleType,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleTypeLabel",{defaultMessage:"The type of rule."})},[u.ruleUrl]:{name:u.ruleUrl,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.ruleUrlLabel",{defaultMessage:"The URL to the rule that generated the alert. This will be an empty string if the server.publicBaseUrl is not configured."}),usesPublicBaseUrl:!0},[u.date]:{name:u.date,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.dateLabel",{defaultMessage:"The date the rule scheduled the action."})},[u.kibanaBaseUrl]:{name:u.kibanaBaseUrl,description:r.i18n.translate("xpack.triggersActionsUI.actionVariables.kibanaBaseUrlLabel",{defaultMessage:"The configured server.publicBaseUrl value or empty string if not configured."})}};function p(e,t){return e.map((e=>({...e,name:`${t}${e.name}`})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(2),a=n(5),i=n(12),s=n(35),o=n(9);const u=()=>{const{http:e,notifications:{toasts:t}}=Object(o.useKibana)().services;return Object(a.useMutation)(["untrackAlerts"],(({indices:t,alertUuids:n})=>{try{const r=JSON.stringify({...null!=t&&t.length?{indices:t}:{},...n?{alert_uuids:n}:{}});return e.post(`${i.INTERNAL_BASE_ALERTING_API_PATH}/alerts/_bulk_untrack`,{body:r})}catch(e){throw new Error(`Unable to parse bulk untrack params: ${e}`)}}),{context:s.b,onError:(e,n)=>{t.addDanger(r.i18n.translate("xpack.triggersActionsUI.rules.deleteConfirmationModal.errorNotification.descriptionText",{defaultMessage:"Failed to untrack {uuidsCount, plural, one {alert} other {alerts}}",values:{uuidsCount:n.alertUuids.length}}))},onSuccess:(e,n)=>{t.addSuccess(r.i18n.translate("xpack.triggersActionsUI.rules.deleteConfirmationModal.successNotification.descriptionText",{defaultMessage:"Untracked {uuidsCount, plural, one {alert} other {alerts}}",values:{uuidsCount:n.alertUuids.length}}))}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3),a=n(1),i=n(0);const s=Object(a.lazy)((()=>Promise.all([n.e(4),n.e(6),n.e(11),n.e(12),n.e(34)]).then(n.bind(null,116)))),o=({hideLazyLoader:e,...t})=>Object(i.jsx)(a.Suspense,{fallback:e?null:Object(i.jsx)(r.EuiLoadingSpinner,null)},Object(i.jsx)(s,t))},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return E}));var r=n(1),a=n.n(r),i=n(3),s=n(7),o=n(72),u=n(2),c=n(10),l=n(36),d=n.n(l),p=n(26),g=n(0);const b="0.[00]a",f=Object(i.euiPaletteColorBlind)()[1],m=Object(g.jsx)(p.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsSummaryWidget.title",defaultMessage:"Alert activity"}),h=Object(g.jsx)(p.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsSummaryWidget.alerts",defaultMessage:"Alerts"}),y=Object(g.jsx)(p.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsSummaryWidget.activeNow",defaultMessage:"Active now"}),j=({activeAlertCount:e})=>{const{euiTheme:t}=Object(i.useEuiTheme)();return Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(i.EuiText,{color:e?t.colors.dangerText:t.colors.successText},Object(g.jsx)("h3",{"data-test-subj":"activeAlertCount"},d()(e).format(b),!!e&&Object(g.jsx)(a.a.Fragment,null,"Â ",Object(g.jsx)(i.EuiIcon,{type:"warning",ascent:10})))),Object(g.jsx)(i.EuiText,{size:"s",color:"subdued"},y))},v=({count:e})=>Object(g.jsx)(a.a.Fragment,null,Object(g.jsx)(i.EuiText,{color:f},Object(g.jsx)("h3",{"data-test-subj":"totalAlertCount"},d()(e).format(b))),Object(g.jsx)(i.EuiText,{size:"s",color:"subdued"},h)),x=({activeAlertCount:e,recoveredAlertCount:t,onActiveClick:n})=>Object(g.jsx)(i.EuiFlexGroup,{gutterSize:"l",responsive:!1},Object(g.jsx)(i.EuiFlexItem,{style:{minWidth:50,wordWrap:"break-word"},grow:!1},Object(g.jsx)(v,{count:e+t})),Object(g.jsx)(i.EuiFlexItem,{style:{minWidth:50,wordWrap:"break-word"},grow:!1},n?Object(g.jsx)(i.EuiLink,{onClick:e=>n(e,c.W),"data-test-subj":"activeAlerts"},Object(g.jsx)(j,{activeAlertCount:e})):Object(g.jsx)(j,{activeAlertCount:e}))),O=({activeAlertCount:e,activeAlerts:t,chartProps:{theme:n,baseTheme:r},recoveredAlertCount:a,timeRangeTitle:c,onClick:l})=>{const d=[n,o.EUI_SPARKLINE_THEME_PARTIAL,{chartMargins:{left:10,right:10,top:10,bottom:10}}],p=(e,t)=>{e.preventDefault(),e.stopPropagation(),l(t)};return Object(g.jsx)(i.EuiPanel,{element:"div","data-test-subj":"alertSummaryWidgetCompact",hasShadow:!1,hasBorder:!0,onClick:p},Object(g.jsx)(i.EuiFlexGroup,{direction:"column"},!!c&&Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiTitle,{size:"xxs"},Object(g.jsx)("h5",null,m)),Object(g.jsx)(i.EuiSpacer,{size:"s"}),Object(g.jsx)(i.EuiText,{size:"s",color:"subdued","data-test-subj":"timeRangeTitle"},c)),Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(x,{activeAlertCount:e,recoveredAlertCount:a,onActiveClick:p})),Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(i.EuiFlexGroup,{wrap:!0},Object(g.jsx)(i.EuiFlexItem,{style:{minWidth:"200px"}},Object(g.jsx)(s.Chart,{size:{height:50}},Object(g.jsx)(s.Tooltip,{type:s.TooltipType.None}),Object(g.jsx)(s.Settings,{theme:d,baseTheme:r,locale:u.i18n.getLocale()}),Object(g.jsx)(s.Axis,{hide:!0,id:"activeAlertsAxis",position:s.Position.Left,gridLine:{visible:!1}}),Object(g.jsx)(s.LineSeries,{id:"activeAlertsChart",xScaleType:s.ScaleType.Time,yScaleType:s.ScaleType.Linear,xAccessor:"key",yAccessors:["doc_count"],data:t,lineSeriesStyle:{line:{strokeWidth:2,stroke:f}},curve:s.CurveType.CURVE_MONOTONE_X})))))))},_=()=>Object(g.jsx)(i.EuiEmptyPrompt,{"data-test-subj":"alertSummaryWidgetError",iconType:"warning",color:"danger",title:Object(g.jsx)("h5",null,Object(g.jsx)(p.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsSummaryWidget.errorTitle",defaultMessage:"Unable to load the alerts summary"})),body:Object(g.jsx)("p",null,Object(g.jsx)(p.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertsSummaryWidget.errorBody",defaultMessage:"There was an error loading the alerts summary. Contact your administrator for help."}))});var A=n(32),S=n.n(A);const T=({activeAlertCount:e,activeAlerts:t,chartProps:{theme:n,baseTheme:r,onBrushEnd:a},dateFormat:o,recoveredAlertCount:c,hideChart:l})=>{const d=[n,{chartPaddings:{top:7}}];return Object(g.jsx)(i.EuiPanel,{element:"div","data-test-subj":"alertSummaryWidgetFullSize",hasShadow:!1,paddingSize:"none"},Object(g.jsx)(i.EuiFlexItem,null,Object(g.jsx)(x,{activeAlertCount:e,recoveredAlertCount:c})),!l&&Object(g.jsx)("div",{"data-test-subj":"alertSummaryWidgetFullSizeChartContainer"},Object(g.jsx)(i.EuiSpacer,{size:"l"}),Object(g.jsx)(s.Chart,{size:["100%",170]},Object(g.jsx)(s.Tooltip,{headerFormatter:e=>S()(e.value).format(o||"YYYY-MM-DD HH:mm")}),Object(g.jsx)(s.Settings,{legendPosition:s.Position.Right,theme:d,baseTheme:r,onBrushEnd:a,locale:u.i18n.getLocale()}),Object(g.jsx)(s.Axis,{id:"bottom",position:s.Position.Bottom,timeAxisLayerCount:2,gridLine:{visible:!0},style:{tickLine:{size:1e-4,padding:4},tickLabel:{alignment:{horizontal:s.Position.Left,vertical:s.Position.Bottom}}}}),Object(g.jsx)(s.Axis,{id:"left",position:s.Position.Left,gridLine:{visible:!0},integersOnly:!0,ticks:4}),Object(g.jsx)(s.Axis,{id:"right",position:s.Position.Right,gridLine:{visible:!0},integersOnly:!0,ticks:4}),Object(g.jsx)(s.LineSeries,{id:"Active",xScaleType:s.ScaleType.Time,yScaleType:s.ScaleType.Linear,xAccessor:"key",yAccessors:["doc_count"],color:[f],data:t,lineSeriesStyle:{line:{strokeWidth:2},point:{visible:!1}},curve:s.CurveType.CURVE_MONOTONE_X}))))},E=({fullSize:e,isLoadingWithoutChart:t})=>Object(g.jsx)("div",{style:{minHeight:t?44:e?238:224,display:"flex",alignItems:"center",justifyContent:t?"flex-start":"center"}},t?Object(g.jsx)(i.EuiLoadingSpinner,{size:"m"}):Object(g.jsx)(i.EuiLoadingChart,{size:"l","data-test-subj":"alertSummaryWidgetLoading"}))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiChartsTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function a(e,a,i){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=i&&i.debug||!1;if(s){var o=document.querySelector("#input-textarea-caret-position-mirror-div");o&&o.parentNode.removeChild(o)}var u=document.createElement("div");u.id="input-textarea-caret-position-mirror-div",document.body.appendChild(u);var c=u.style,l=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;c.whiteSpace="pre-wrap",d||(c.wordWrap="break-word"),c.position="absolute",s||(c.visibility="hidden"),t.forEach((function(e){d&&"lineHeight"===e?c.lineHeight=l.height:c[e]=l[e]})),r?e.scrollHeight>parseInt(l.height)&&(c.overflowY="scroll"):c.overflow="hidden",u.textContent=e.value.substring(0,a),d&&(u.textContent=u.textContent.replace(/\s/g,"Â "));var p=document.createElement("span");p.textContent=e.value.substring(a)||".",u.appendChild(p);var g={top:p.offsetTop+parseInt(l.borderTopWidth),left:p.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return s?p.style.backgroundColor="#aaa":document.body.removeChild(u),g}void 0!==e.exports?e.exports=a:n&&(window.getCaretCoordinates=a)}()},function(e,t,n){"use strict";n.r(t),n.d(t,"AlertHistoryDefaultIndexName",(function(){return V.c})),n.d(t,"ALERT_HISTORY_PREFIX",(function(){return V.a})),n.d(t,"AlertHistoryDocumentTemplate",(function(){return V.d})),n.d(t,"AlertHistoryEsIndexConnectorId",(function(){return V.e})),n.d(t,"ActionConnectorMode",(function(){return V.b})),n.d(t,"useConnectorContext",(function(){return $})),n.d(t,"ActionForm",(function(){return b.a})),n.d(t,"CreateConnectorFlyout",(function(){return b.c})),n.d(t,"EditConnectorFlyout",(function(){return b.d})),n.d(t,"getCategory",(function(){return B.h})),n.d(t,"JsonEditorWithMessageVariables",(function(){return W.a})),n.d(t,"JsonFieldWrapper",(function(){return W.b})),n.d(t,"MustacheTextFieldWrapper",(function(){return W.c})),n.d(t,"SimpleConnectorForm",(function(){return W.e})),n.d(t,"TextAreaWithMessageVariables",(function(){return W.f})),n.d(t,"TextFieldWithMessageVariables",(function(){return W.g})),n.d(t,"SectionLoading",(function(){return W.d})),n.d(t,"AlertProvidedActionVariables",(function(){return G.a})),n.d(t,"hasMustacheTokens",(function(){return G.c})),n.d(t,"templateActionVariable",(function(){return G.e})),n.d(t,"updateActionConnector",(function(){return G.f})),n.d(t,"executeAction",(function(){return G.b})),n.d(t,"AlertConditions",(function(){return x.b})),n.d(t,"AlertConditionsGroup",(function(){return x.c})),n.d(t,"plugin",(function(){return de})),n.d(t,"useKibana",(function(){return H.useKibana})),n.d(t,"WhenExpression",(function(){return H.WhenExpression})),n.d(t,"OfExpression",(function(){return H.OfExpression})),n.d(t,"ForLastExpression",(function(){return H.ForLastExpression})),n.d(t,"ThresholdExpression",(function(){return H.ThresholdExpression})),n.d(t,"ValueExpression",(function(){return H.ValueExpression})),n.d(t,"builtInComparators",(function(){return H.builtInComparators})),n.d(t,"builtInGroupByTypes",(function(){return H.builtInGroupByTypes})),n.d(t,"builtInAggregationTypes",(function(){return H.builtInAggregationTypes})),n.d(t,"getFields",(function(){return H.getFields})),n.d(t,"getIndexOptions",(function(){return H.getIndexOptions})),n.d(t,"firstFieldOption",(function(){return H.firstFieldOption})),n.d(t,"getTimeFieldOptions",(function(){return H.getTimeFieldOptions})),n.d(t,"getTimeOptions",(function(){return H.getTimeOptions})),n.d(t,"GroupByExpression",(function(){return H.GroupByExpression})),n.d(t,"COMPARATORS",(function(){return H.COMPARATORS})),n.d(t,"connectorDeprecatedMessage",(function(){return H.connectorDeprecatedMessage})),n.d(t,"deprecatedMessage",(function(){return H.deprecatedMessage})),n.d(t,"useLoadRuleTypesQuery",(function(){return Z.a})),n.d(t,"useSubAction",(function(){return X})),n.d(t,"Plugin",(function(){return plugin_Plugin})),n.d(t,"loadRuleSummary",(function(){return ee.a})),n.d(t,"bulkDeleteRules",(function(){return te.a})),n.d(t,"loadRuleAggregations",(function(){return ne.a})),n.d(t,"loadRule",(function(){return re.a})),n.d(t,"suspendedComponentWithProps",(function(){return l.a})),n.d(t,"loadActionTypes",(function(){return ae.a})),n.d(t,"TIME_UNITS",(function(){return ie.p})),n.d(t,"getTimeUnitLabel",(function(){return se.a})),n.d(t,"getNotifyWhenOptions",(function(){return pe})),n.d(t,"transformRule",(function(){return oe.b})),n.d(t,"validateActionFilterQuery",(function(){return ue.d})),n.d(t,"useBulkUntrackAlerts",(function(){return ce.a})),n.d(t,"AlertsTableContext",(function(){return le.a}));var r=n(16),a=n.n(r),i=n(2),s=n(48),o=n(10),u=n(1),c=n.n(u),l=n(4);const d=Object(l.a)(Object(u.lazy)((()=>n.e(20).then(n.bind(null,339)))));var p=n(0);class type_registry_TypeRegistry{constructor(){a()(this,"objectTypes",new Map)}has(e){return this.objectTypes.has(e)}register(e){if(this.has(e.id))throw new Error(i.i18n.translate("xpack.triggersActionsUI.typeRegistry.register.duplicateObjectTypeErrorMessage",{defaultMessage:'Object type "{id}" is already registered.',values:{id:e.id}}));this.objectTypes.set(e.id,e)}get(e){if(!this.has(e))throw new Error(i.i18n.translate("xpack.triggersActionsUI.typeRegistry.get.missingActionTypeErrorMessage",{defaultMessage:'Object type "{id}" is not registered.',values:{id:e}}));return this.objectTypes.get(e)}list(){return Array.from(this.objectTypes).map((([e,t])=>t))}}var g=n(14),b=n(20),f=n(5),m=n(38),h=n(42);const y=Object(l.a)(Object(u.lazy)((()=>Promise.all([n.e(4),n.e(11),n.e(12)]).then(n.bind(null,322)))));var j=n(3);const v=Object(u.lazy)((()=>Promise.all([n.e(4),n.e(11)]).then(n.bind(null,323))));var x=n(8);const O=new f.QueryClient,_=new f.QueryClient,A=new f.QueryClient;var S=n(44),T=n(28),E=n(15);const w=Object(u.lazy)((()=>n.e(52).then(n.bind(null,329)))),I=Object(u.lazy)((()=>n.e(51).then(n.bind(null,330)))),k=()=>({body:I,header:w,footer:null});var C=n(70);const R=Object(u.lazy)((()=>Promise.all([n.e(4),n.e(6),n.e(38)]).then(n.bind(null,215)))),M=new f.QueryClient;var L=n(71);const P=Object(u.lazy)((()=>n.e(39).then(n.bind(null,341)))),U=new f.QueryClient,F=Object(u.lazy)((()=>n.e(2).then(n.bind(null,230)))),D=new f.QueryClient;var N=n(11);class alert_table_config_registry_AlertTableConfigRegistry{constructor(){a()(this,"objectTypes",new Map)}has(e){return this.objectTypes.has(e)}register(e){if(this.has(e.id))throw new Error(i.i18n.translate("xpack.triggersActionsUI.typeRegistry.register.duplicateObjectTypeErrorMessage",{defaultMessage:'Object type "{id}" is already registered.',values:{id:e.id}}));this.objectTypes.set(e.id,e)}get(e){if(!this.has(e))throw new Error(i.i18n.translate("xpack.triggersActionsUI.typeRegistry.get.missingActionTypeErrorMessage",{defaultMessage:'Object type "{id}" is not registered.',values:{id:e}}));return this.objectTypes.get(e)}getActions(e){var t,n;return null!==(t=null===(n=this.objectTypes.get(e))||void 0===n?void 0:n.actions)&&void 0!==t?t:{toggleColumn:N.noop}}list(){return Array.from(this.objectTypes).map((([e,t])=>t))}update(e,t){if(!this.has(e))throw new Error(i.i18n.translate("xpack.triggersActionsUI.typeRegistry.get.missingActionTypeErrorMessage",{defaultMessage:'Object type "{id}" is not registered.',values:{id:e}}));return this.objectTypes.set(e,t),this.objectTypes.get(e)}}class plugin_Plugin{constructor(e){a()(this,"actionTypeRegistry",void 0),a()(this,"ruleTypeRegistry",void 0),a()(this,"alertsTableConfigurationRegistry",void 0),a()(this,"config",void 0),a()(this,"connectorServices",void 0),a()(this,"experimentalFeatures",void 0),this.actionTypeRegistry=new type_registry_TypeRegistry,this.ruleTypeRegistry=new type_registry_TypeRegistry,this.alertsTableConfigurationRegistry=new alert_table_config_registry_AlertTableConfigRegistry,this.config=e.config.get(),this.experimentalFeatures=Object(T.c)(this.config.enableExperimental||[])}setup(e,t){const r=this.actionTypeRegistry,a=this.ruleTypeRegistry,u=this.alertsTableConfigurationRegistry;this.connectorServices={validateEmailAddresses:t.actions.validateEmailAddresses},S.a.init({experimentalFeatures:this.experimentalFeatures});const l=i.i18n.translate("xpack.triggersActionsUI.managementSection.displayName",{defaultMessage:"Rules"}),d=i.i18n.translate("xpack.triggersActionsUI.managementSection.displayDescription",{defaultMessage:"Detect conditions using rules."}),g=i.i18n.translate("xpack.triggersActionsUI.managementSection.connectors.displayName",{defaultMessage:"Connectors"}),b=i.i18n.translate("xpack.triggersActionsUI.managementSection.connectors.displayDescription",{defaultMessage:"Connect third-party software with your alerting data."});return t.home&&(t.home.featureCatalogue.register({id:E.PLUGIN_ID,title:l,description:d,icon:"watchesApp",path:o.Bb,showOnHomePage:!1,category:"admin"}),t.home.featureCatalogue.register({id:E.CONNECTORS_PLUGIN_ID,title:g,description:b,icon:"watchesApp",path:o.Bb,showOnHomePage:!1,category:"admin"})),t.management.sections.section.insightsAndAlerting.registerApp({id:E.PLUGIN_ID,title:l,order:0,async mount(i){var o;const[c,l]=await e.getStartServices(),{renderApp:d}=await n.e(28).then(n.bind(null,327));let p;try{p=await l.features.getFeatures()}catch(e){p=[]}return d({...c,actions:t.actions,dashboard:l.dashboard,data:l.data,dataViews:l.dataViews,dataViewEditor:l.dataViewEditor,charts:l.charts,alerting:l.alerting,spaces:l.spaces,unifiedSearch:l.unifiedSearch,isCloud:Boolean(null===(o=t.cloud)||void 0===o?void 0:o.isCloudEnabled),element:i.element,theme$:i.theme$,storage:new s.Storage(window.localStorage),setBreadcrumbs:i.setBreadcrumbs,history:i.history,actionTypeRegistry:r,ruleTypeRegistry:a,alertsTableConfigurationRegistry:u,kibanaFeatures:p,licensing:l.licensing,expressions:l.expressions,isServerless:!!l.serverless,lens:l.lens})}}),t.management.sections.section.insightsAndAlerting.registerApp({id:E.CONNECTORS_PLUGIN_ID,title:g,order:2,async mount(i){var o;const[c,l]=await e.getStartServices(),{renderApp:d}=await n.e(29).then(n.bind(null,328));let p;try{p=await l.features.getFeatures()}catch(e){p=[]}return d({...c,actions:t.actions,dashboard:l.dashboard,data:l.data,dataViews:l.dataViews,dataViewEditor:l.dataViewEditor,charts:l.charts,alerting:l.alerting,spaces:l.spaces,unifiedSearch:l.unifiedSearch,isCloud:Boolean(null===(o=t.cloud)||void 0===o?void 0:o.isCloudEnabled),element:i.element,theme$:i.theme$,storage:new s.Storage(window.localStorage),setBreadcrumbs:i.setBreadcrumbs,history:i.history,actionTypeRegistry:r,ruleTypeRegistry:a,alertsTableConfigurationRegistry:u,kibanaFeatures:p})}}),this.experimentalFeatures.internalAlertsTable&&function({alertsTableConfigurationRegistry:e}){e.register({id:E.PLUGIN_ID,columns:[{id:"event.action",displayAsText:"Alert status",initialWidth:150},{id:"@timestamp",displayAsText:"Last updated",initialWidth:250,schema:"datetime"},{id:"kibana.alert.duration.us",displayAsText:"Duration",initialWidth:150,schema:"numeric"},{id:"kibana.alert.reason",displayAsText:"Reason"}],useInternalFlyout:k,getRenderCellValue:()=>e=>{var t,n;const r=e,a=null!==(t=null===(n=r.data.find((e=>e.field===r.columnId)))||void 0===n?void 0:n.value)&&void 0!==t?t:[];return Object(p.jsx)(c.a.Fragment,null,a.length?a.join():"--")},sort:[{"event.action":{order:"asc"}}]})}({alertsTableConfigurationRegistry:this.alertsTableConfigurationRegistry}),{actionTypeRegistry:this.actionTypeRegistry,ruleTypeRegistry:this.ruleTypeRegistry,alertsTableConfigurationRegistry:this.alertsTableConfigurationRegistry}}start(){return{actionTypeRegistry:this.actionTypeRegistry,ruleTypeRegistry:this.ruleTypeRegistry,alertsTableConfigurationRegistry:this.alertsTableConfigurationRegistry,getActionForm:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(x.a,e)))({...e,actionTypeRegistry:this.actionTypeRegistry,connectorServices:this.connectorServices}),getAddConnectorFlyout:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(b.c,e)))({...e,actionTypeRegistry:this.actionTypeRegistry,connectorServices:this.connectorServices}),getEditConnectorFlyout:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(b.d,e)))({...e,actionTypeRegistry:this.actionTypeRegistry,connectorServices:this.connectorServices}),getAddRuleFlyout:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(f.QueryClientProvider,{client:h.a},Object(p.jsx)(m.a,e))))({...e,actionTypeRegistry:this.actionTypeRegistry,ruleTypeRegistry:this.ruleTypeRegistry,connectorServices:this.connectorServices}),getEditRuleFlyout:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(f.QueryClientProvider,{client:h.a},Object(p.jsx)(m.b,e))))({...e,actionTypeRegistry:this.actionTypeRegistry,ruleTypeRegistry:this.ruleTypeRegistry,connectorServices:this.connectorServices}),getAlertsStateTable:e=>Object(C.a)(e),getAlertsSearchBar:e=>(e=>Object(p.jsx)(u.Suspense,{fallback:Object(p.jsx)(j.EuiLoadingSpinner,null)},Object(p.jsx)(f.QueryClientProvider,{client:M},Object(p.jsx)(R,e))))(e),getAlertsTable:e=>(e=>Object(p.jsx)(y,e))(e),getAlertsTableDefaultAlertActions:e=>(e=>Object(p.jsx)(d,e))(e),getFieldBrowser:e=>(e=>Object(p.jsx)(u.Suspense,{fallback:Object(p.jsx)(j.EuiLoadingSpinner,null)},Object(p.jsx)(v,e)))(e),getRuleStatusDropdown:e=>(e=>Object(p.jsx)(x.h,e))(e),getRuleTagFilter:e=>(e=>Object(p.jsx)(f.QueryClientProvider,{client:O},Object(p.jsx)(x.l,e)))(e),getRuleStatusFilter:e=>(e=>Object(p.jsx)(x.i,e))(e),getRuleTagBadge:e=>(e=>Object(p.jsx)(x.k,e))(e),getRuleEventLogList:e=>(e=>Object(p.jsx)(f.QueryClientProvider,{client:_},Object(p.jsx)(x.f,e)))(e),getGlobalRuleEventLogList:e=>(e=>Object(p.jsx)(f.QueryClientProvider,{client:D},Object(p.jsx)(x.d,e)))(e),getRulesListNotifyBadge:e=>(e=>Object(p.jsx)(x.n,e))(e),getRulesList:e=>(e=>Object(p.jsx)(g.b,{value:{services:e.connectorServices}},Object(p.jsx)(f.QueryClientProvider,{client:A},Object(p.jsx)(x.m,e.rulesListProps))))({connectorServices:this.connectorServices,rulesListProps:e}),getRuleDefinition:e=>(e=>Object(p.jsx)(x.e,e))({...e,actionTypeRegistry:this.actionTypeRegistry,ruleTypeRegistry:this.ruleTypeRegistry}),getRuleStatusPanel:e=>(e=>Object(p.jsx)(x.j,e))(e),getAlertSummaryWidget:e=>(e=>Object(p.jsx)(u.Suspense,{fallback:Object(p.jsx)(L.d,{fullSize:e.fullSize,isLoadingWithoutChart:e.hideChart})},Object(p.jsx)(P,e)))(e),getRuleSnoozeModal:e=>(e=>Object(p.jsx)(x.g,e))(e),getRulesSettingsLink:()=>Object(p.jsx)(f.QueryClientProvider,{client:U},Object(p.jsx)(u.Suspense,{fallback:Object(p.jsx)(j.EuiLoadingSpinner,null)},Object(p.jsx)(F,null)))}}stop(){}}var V=n(19);const $=()=>{const e=Object(u.useContext)(g.a);if(!e)throw new Error("useConnectorContext must be used within a ConnectorProvider and have a defined value.");return e};var z,B=n(58),W=n(25),G=n(17),H=n(9),q=n(61),Y=n.n(q),Q=n(30),K=n(22);!function(e){e[e.START=0]="START",e[e.STOP=1]="STOP",e[e.SUCCESS=2]="SUCCESS",e[e.ERROR=3]="ERROR"}(z||(z={}));const J=(e,t)=>{switch(t.type){case z.START:return{...e,isLoading:!0,error:null};case z.STOP:return{...e,isLoading:!1,error:null};case z.SUCCESS:return{...e,response:t.payload,isLoading:!1,error:null};case z.ERROR:return{...e,error:t.payload,isLoading:!1};default:return e}},X=({connectorId:e,subAction:t,subActionParams:n,disabled:r=!1})=>{const{http:a}=Object(Q.b)().services,[{isLoading:i,response:s,error:o},c]=Object(u.useReducer)(J,{isLoading:!1,response:void 0,error:null}),l=(e=>{const t=Object(u.useRef)(e);return Y()(t.current,e)||(t.current=e),t.current})(n);return Object(u.useEffect)((()=>{if(r||!e||!t)return void c({type:z.STOP});const n=new AbortController;let i=!0;return(async()=>{try{c({type:z.START});const r=await Object(K.c)({id:e,params:{subAction:t,subActionParams:l},http:a,signal:n.signal});return i&&(r.status&&"ok"===r.status?c({type:z.SUCCESS,payload:r.data}):c({type:z.ERROR,payload:new Error(`${r.message}: ${r.serviceMessage}`)})),r.data}catch(e){i&&c({type:z.ERROR,payload:e})}})(),()=>{i=!1,n.abort()}}),[l,r,e,t,a]),{isLoading:i,response:s,error:o}};var Z=n(54),ee=n(62),te=n(59),ne=n(67),re=n(63),ae=n(39),ie=n(6),se=n(41),oe=n(34),ue=n(57),ce=n(69),le=n(35);function de(e){return new plugin_Plugin(e)}const pe=async()=>{const{NOTIFY_WHEN_OPTIONS:e}=await Promise.all([n.e(0),n.e(59)]).then(n.bind(null,165));return e}},,,,,,function(e,t,n){n(83),__kbnBundles__.define("plugin/triggersActionsUi/public",n,76),__kbnBundles__.define("plugin/triggersActionsUi/public/common",n,9),__kbnBundles__.define("plugin/triggersActionsUi/public/common/constants",n,15)},function(e,t,n){n.p=window.__kbnPublicPath__.triggersActionsUi},function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(85);case"v8light":return n(87)}},function(e,t,n){var r=n(50),a=n(86);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,t,n){(t=n(51)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t},function(e,t,n){var r=n(50),a=n(88);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,t,n){(t=n(51)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.TsLib},,function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/alerting/common/parse_duration");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},,,,,,,function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.Uuid},,,,,function(e,t){e.exports=__kbnSharedDeps__.IoTs},,function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},,,function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone}]);