/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[32],{117:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return r}));const o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},i=(e,t)=>{var n,o;return".sentinelone"===t?null==e||null===(n=e.actions)||void 0===n?void 0:n.save:null==e||null===(o=e.actions)||void 0===o?void 0:o.execute},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function s(e,t){var n,o;return null!==(n=null==t||null===(o=t.authorizedConsumers[e])||void 0===o?void 0:o.all)&&void 0!==n&&n}const r=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(2);const c={label:o.i18n.translate("xpack.triggersActionsUI.technicalPreviewBadgeLabel",{defaultMessage:"Technical preview"}),tooltipContent:o.i18n.translate("xpack.triggersActionsUI.technicalPreviewBadgeDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=(e,t,n,o=[])=>{const c=n[t.actionTypeId];return e.filter((e=>(o.includes(e.actionTypeId)||e.actionTypeId===t.actionTypeId)&&((null==c?void 0:c.enabledInConfig)||e.isPreconfigured)))}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(3),c=n(1),i=n.n(c),a=n(2),s=n(154),r=n(0);const l=i.a.memo(d);function d({allowGroupConnector:e,actionItem:t,accordionIndex:n,actionTypesIndex:i,actionTypeRegistered:a,connectors:l,onConnectorSelected:d}){var b;const j=Object(c.useMemo)((()=>Object(s.a)(l,t,i,e)),[t,i,e,l]),m=Object(c.useMemo)((()=>u(t.id,j,a,e)),[t.id,j,a,e]),x=Object(c.useMemo)((()=>p(j,a)),[j,a]),[I,f]=Object(c.useState)(m.length>0?m[0]:void 0),v=Object(c.useCallback)((e=>{var t,n;f(e[0]),d(null!==(t=null===(n=e[0].value)||void 0===n?void 0:n.id)&&void 0!==t?t:"")}),[d]);return Object(r.jsx)(o.EuiComboBox,{"aria-label":g,"data-test-subj":`selectActionConnector-${t.actionTypeId}-${n}`,fullWidth:!0,singleSelection:{asPlainText:!0},id:`selectActionConnector-${t.id}`,isClearable:!1,onChange:v,options:x,selectedOptions:m,prepend:null==I||null===(b=I.value)||void 0===b?void 0:b.prependComponent})}const u=(e,t,n,o=[])=>{const c=t.find((t=>t.id===e));return c?[b(c,n)]:[]},p=(e,t)=>e.map((e=>b(e,t))),b=(e,t)=>{const n=j(e,t);let o;if(null!=t.customConnectorSelectItem){const n=t.customConnectorSelectItem.getComponent(e);n&&(o=Object(r.jsx)(n,{actionConnector:e}))}return{label:n,value:{title:n,id:e.id,prependComponent:o},key:e.id,"data-test-subj":`dropdown-connector-${e.id}`}},j=(e,t)=>null!=t.customConnectorSelectItem?t.customConnectorSelectItem.getText(e):e.name,g=a.i18n.translate("xpack.triggersActionsUI.sections.actionForm.incidentManagementSystemLabel",{defaultMessage:"Incident management system"})},97:function(e,t,n){"use strict";n.r(t),n.d(t,"AddConnectorInline",(function(){return j})),n.d(t,"default",(function(){return j}));var o=n(1),c=n.n(o),i=n(2),a=n(26),s=n(3),r=n(125),l=n(117),d=n(30),u=n(154),p=n(167),b=n(0);const j=({actionTypesIndex:e,actionItem:t,index:n,connectors:j,onAddConnector:g,onDeleteConnector:m,onSelectConnector:x,actionTypeRegistry:I,emptyActionsIds:f})=>{var v;const{application:{capabilities:A}}=Object(d.b)().services,C=Object(l.e)(A),[O,y]=Object(o.useState)(!1),[T,E]=Object(o.useState)(!1),M=e?e[t.actionTypeId].name:t.actionTypeId,w=I.get(t.actionTypeId),k=(null!==(v=null==w?void 0:w.subtype)&&void 0!==v?v:[]).map((e=>e.id)),F=Object(o.useMemo)((()=>[`Unable to load ${w.actionTypeTitle} connector`]),[w.actionTypeTitle]),h=Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:M}}),U=Object(b.jsx)(s.EuiText,{color:"danger"},Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector"}));Object(o.useEffect)((()=>{Object(u.a)(j,t,e,k).length>0&&y(!0),E(!!f.find((e=>t.id===e)))}),[]);const S=Object(b.jsx)(s.EuiFormRow,{fullWidth:!0,label:Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:M}}),labelAppend:Object(b.jsx)(s.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${t.actionTypeId}`,onClick:g},Object(b.jsx)(a.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.addNewConnectorEmptyButton"})),error:F,isInvalid:!0},Object(b.jsx)(p.a,{actionItem:t,accordionIndex:n,actionTypesIndex:e,actionTypeRegistered:w,connectors:j,onConnectorSelected:x,allowGroupConnector:k}));return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(s.EuiAccordion,{key:n,initialIsOpen:!0,id:n.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(b.jsx)(s.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIcon,{type:w.iconClass,size:"m"})),Object(b.jsx)(s.EuiFlexItem,null,Object(b.jsx)(s.EuiText,null,Object(b.jsx)("div",null,Object(b.jsx)(a.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.connectorAddInline.newRuleActionTypeEditTitle",values:{actionConnectorName:w.actionTypeTitle}})))),!T&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiIconTip,{type:"warning",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:Object(b.jsx)(a.FormattedMessage,{defaultMessage:"Unable to load connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle'"})})),w&&w.isExperimental&&Object(b.jsx)(s.EuiFlexItem,{grow:!1},Object(b.jsx)(s.EuiBetaBadge,{label:r.a.label,tooltipContent:r.a.tooltipContent}))),extraAction:Object(b.jsx)(s.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":i.i18n.translate("xpack.triggersActionsUI.sections.connectorAddInline.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:m}),paddingSize:"l"},C?O?S:Object(b.jsx)(s.EuiEmptyPrompt,{title:T?h:U,actions:Object(b.jsx)(s.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":`createActionConnectorButton-${n}`,onClick:g},Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):Object(b.jsx)(s.EuiCallOut,{title:h},Object(b.jsx)("p",null,Object(b.jsx)(a.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),Object(b.jsx)(s.EuiSpacer,{size:"xs"}))}}}]);