/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[26],{312:function(t,e,n){switch(window.__kbnThemeTag__){case"v8dark":return n(313);case"v8light":return n(315)}},313:function(t,e,n){var s=n(50),o=n(314);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},314:function(t,e,n){(e=n(51)(!1)).push([t.i,".actConnectorsList__tableRowDisabled{background-color:#25262e}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#98a2b3}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}",""]),t.exports=e},315:function(t,e,n){var s=n(50),o=n(316);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},316:function(t,e,n){(e=n(51)(!1)).push([t.i,".actConnectorsList__tableRowDisabled{background-color:#f5f7fa}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#69707d}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}",""]),t.exports=e},317:function(t,e,n){switch(window.__kbnThemeTag__){case"v8dark":return n(318);case"v8light":return n(320)}},318:function(t,e,n){var s=n(50),o=n(319);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},319:function(t,e,n){(e=n(51)(!1)).push([t.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}",""]),t.exports=e},320:function(t,e,n){var s=n(50),o=n(321);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},321:function(t,e,n){(e=n(51)(!1)).push([t.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}",""]),t.exports=e},340:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return E}));var s=n(0),o=n(1),i=n.n(o),c=n(3),a=n(2),r=n(11),l=n(26),u=n(92),d=n(23),b=n(22),g=n(117),p=n(30),j=n(119);const m=({idsToDelete:t,apiDeleteCall:e,onDeleted:n,onCancel:a,onErrors:r,singleTitle:l,multipleTitle:u,showWarningText:d,warningText:b,setIsLoadingState:g})=>{const[m,x]=Object(o.useState)(!1);Object(o.useEffect)((()=>{x(t.length>0)}),[t]);const{http:C,notifications:{toasts:f}}=Object(p.b)().services,T=t.length;return m?Object(s.jsx)(c.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:Object(j.y)(T,l,u),onCancel:()=>{x(!1),a()},onConfirm:async()=>{x(!1),g(!0);const{successes:s,errors:o}=await e({ids:t,http:C});g(!1);const i=s.length,c=o.length;i>0&&f.addSuccess(Object(j.G)(i,l,u)),c>0&&(f.addDanger(Object(j.A)(c,l,u)),await r()),await n(s)},cancelButtonText:j.c,confirmButtonText:Object(j.y)(T,l,u)},Object(s.jsx)("p",null,Object(j.z)(T,l,u)),d&&Object(s.jsx)(c.EuiCallOut,{title:Object(s.jsx)(i.a.Fragment,null,b),color:"warning",iconType:"warning"})):null};var x=n(153),C=(n(312),n(19));n(317);const f=({onCTAClicked:t,docLinks:e})=>Object(s.jsx)(c.EuiPageTemplate.EmptyPrompt,{"data-test-subj":"createFirstConnectorEmptyPrompt",title:Object(s.jsx)(i.a.Fragment,null,Object(s.jsx)(c.EuiIcon,{type:"logoSlack",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(s.jsx)(c.EuiIcon,{type:"logoGmail",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(s.jsx)(c.EuiIcon,{type:"logoWebhook",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(s.jsx)(c.EuiSpacer,{size:"s"}),Object(s.jsx)(c.EuiTitle,{size:"m"},Object(s.jsx)("h2",null,Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyTitle",defaultMessage:"Create your first connector"})))),body:Object(s.jsx)("p",null,Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyBody",defaultMessage:"Configure various third-party services to Kibana."})),actions:Object(s.jsx)(i.a.Fragment,null,Object(s.jsx)(c.EuiButton,{"data-test-subj":"createFirstActionButton",key:"create-action",fill:!0,iconType:"plusInCircle",iconSide:"left",onClick:t},Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorButtonLabel",defaultMessage:"Create connector"})),Object(s.jsx)("br",null),Object(s.jsx)(c.EuiButtonEmpty,{"data-test-subj":"documentationButton",key:"documentation-button",target:"_blank",href:e.links.alerting.connectors,iconType:"help"},Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.documentationButtonLabel",defaultMessage:"Documentation"})))});var T=n(52),y=n(47),O=n(78),I=n(77),h=n(146),L=n(147);const k=Object(u.withTheme)((({theme:t})=>Object(s.jsx)(s.ClassNames,null,(({css:e})=>Object(s.jsx)(c.EuiIconTip,{anchorClassName:e({marginLeft:t.eui.euiSizeS,marginBottom:"0 !important"}),"aria-label":"Warning",size:"m",type:"warning",color:"warning",content:y.a,position:"right"}))))),E=()=>{const{http:t,notifications:{toasts:e},application:{capabilities:n},actionTypeRegistry:u,setBreadcrumbs:j,chrome:E,docLinks:D}=Object(p.b)().services,U=Object(g.b)(n),v=Object(g.e)(n),[F,S]=Object(o.useState)(void 0),[B,P]=Object(o.useState)([]),[R,N]=Object(o.useState)(0),[z,$]=Object(o.useState)([]),[G,W]=Object(o.useState)(!1),[q,K]=Object(o.useState)(!1),[H,J]=Object(o.useState)(!1),[Q,V]=Object(o.useState)({}),[X,Y]=Object(o.useState)([]);Object(o.useEffect)((()=>{ot()}),[]);const[Z,tt]=Object(o.useState)(!1);Object(o.useEffect)((()=>{j([Object(h.a)("connectors")]),E.docTitle.change(Object(L.a)("connectors"))}),[E,j]),Object(o.useEffect)((()=>{(async()=>{try{W(!0);const e=await Object(b.d)({http:t}),n={};for(const t of e)n[t.id]=t;S(n)}catch(t){e.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{W(!1)}})()}),[]);const et=F?B.map((t=>({...t,actionType:F[t.actionTypeId]?F[t.actionTypeId].name:t.actionTypeId,compatibility:F[t.actionTypeId]?Object(d.getConnectorCompatibility)(F[t.actionTypeId].supportedFeatureIds):[]}))):[],nt=F?Object.values(F).map((t=>({value:t.id,name:`${t.name} (${_(B,t.id)})`}))).sort(((t,e)=>t.name.localeCompare(e.name))):[];function st(t){const e=t.map((t=>t.id));Y(e),function(t){const e=t.some((t=>{const e=B.find((e=>e.id===t));return(e&&e.referencedByCount?e.referencedByCount:0)>0}));tt(e)}(e)}async function ot(){K(!0);try{const e=await Object(b.e)({http:t});P(e)}catch(t){e.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{K(!1)}}async function it(t,e,n){V({initialConnector:t,tab:e,isFix:null!=n&&n})}const ct=[{field:"name","data-test-subj":"connectorsTableCell-name",name:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!1,truncateText:!0,render:(t,e)=>{var n;const o=Object(x.b)(F&&F[e.actionTypeId]),r=e.isDeprecated,l=function(t,e){return e.isDeprecated?`${t} ${y.b}`:t}(t,e),u=Object(s.jsx)(i.a.Fragment,null,Object(s.jsx)(c.EuiLink,{"data-test-subj":`edit${e.id}`,title:l,onClick:()=>it(e,C.i.Configuration),key:e.id,disabled:!F||!(null!==(n=F[e.actionTypeId])&&void 0!==n&&n.enabled)},l),e.isMissingSecrets?Object(s.jsx)(c.EuiIconTip,{iconProps:{"data-test-subj":`missingSecrets_${e.id}`},type:"warning",color:"warning",content:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.missingSecretsDescription",{defaultMessage:"Sensitive information was not imported"}),position:"right"}):null,r&&Object(s.jsx)(k,null));return o.isEnabled?u:Object(s.jsx)(i.a.Fragment,null,u,Object(s.jsx)(c.EuiIconTip,{type:"questionInCircle",content:o.message,position:"right"}))}},{field:"actionType","data-test-subj":"connectorsTableCell-actionType",name:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actionTypeTitle",{defaultMessage:"Type"}),sortable:!1,truncateText:!0},{field:"compatibility","data-test-subj":"connectorsTableCell-compatibility",name:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.compatibility",{defaultMessage:"Compatibility"}),sortable:!1,truncateText:!0,render:t=>Object(s.jsx)(c.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs","data-test-subj":"compatibility-content"},t.map((t=>Object(s.jsx)(c.EuiFlexItem,{grow:!1,key:t},Object(s.jsx)(c.EuiBadge,{"data-test-subj":"connectorsTableCell-compatibility-badge",color:"default"},t)))))},{name:"",render:t=>{var e;return Object(s.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},Object(s.jsx)(M,{canDelete:U,item:t,onDelete:()=>st([t])}),t.isMissingSecrets?Object(s.jsx)(i.a.Fragment,null,F&&null!==(e=F[t.actionTypeId])&&void 0!==e&&e.enabled?Object(s.jsx)(c.EuiFlexItem,{grow:!1,style:{marginLeft:4}},Object(s.jsx)(c.EuiToolTip,{content:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.fixActionDescription",{defaultMessage:"Fix connector configuration"})},Object(s.jsx)(c.EuiButtonEmpty,{size:"xs","data-test-subj":"fixConnectorButton",onClick:()=>it(t,C.i.Configuration,!0)},a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.fixButtonLabel",{defaultMessage:"Fix"})))):null):Object(s.jsx)(w,{canExecute:!!(Object(g.c)(n,t.actionTypeId)&&F&&F[t.actionTypeId]),item:t,onRun:()=>it(t,C.i.Test)}))}}],at=Object(s.jsx)(c.EuiInMemoryTable,{loading:q||G,items:et,sorting:!0,itemId:"id",columns:ct,rowProps:t=>{var e;return{className:F&&null!==(e=F[t.actionTypeId])&&void 0!==e&&e.enabled?"":"actConnectorsList__tableRowDisabled","data-test-subj":"connectors-row"}},cellProps:t=>{var e;return{"data-test-subj":"cell",className:F&&null!==(e=F[t.actionTypeId])&&void 0!==e&&e.enabled?"":"actConnectorsList__tableCellDisabled"}},"data-test-subj":"actionsTable",pagination:{initialPageIndex:0,pageIndex:R},onTableChange:({page:t})=>{t&&N(t.index)},selection:U?{onSelectionChange(t){$(t)},selectable:({isPreconfigured:t})=>!t}:void 0,search:{filters:[{type:"field_value_selection",field:"actionTypeId",name:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.filters.actionTypeIdName",{defaultMessage:"Type"}),multiSelect:"or",options:nt}],toolsLeft:(0!==z.length&&U?[Object(s.jsx)(c.EuiButton,{key:"delete",iconType:"trash",color:"danger","data-test-subj":"bulkDelete",onClick:()=>st(z),title:U?void 0:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteDisabledTitle",{defaultMessage:"Unable to delete connectors"})},Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteLabel",defaultMessage:"Delete {count}",values:{count:z.length}}))]:[]).concat(v?[Object(s.jsx)(c.EuiButton,{"data-test-subj":"createActionButton",key:"create-action",fill:!0,onClick:()=>J(!0)},Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.addActionButtonLabel",defaultMessage:"Create connector"}))]:[])}});return Object(s.jsx)(i.a.Fragment,null,Object(s.jsx)(c.EuiPageTemplate.Section,{paddingSize:"none","data-test-subj":"actionsList",alignment:0===et.length?"center":"top"},Object(s.jsx)(m,{"data-test-subj":"deleteConnectorsConfirmation",onDeleted:t=>{if(0===z.length||z.length===t.length){const t=B.filter((t=>t.id&&!X.includes(t.id)));P(t),$([])}Y([])},onErrors:async()=>{await ot(),Y([])},onCancel:async()=>{Y([])},apiDeleteCall:b.b,idsToDelete:X,singleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.singleTitle",{defaultMessage:"connector"}),multipleTitle:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.multipleTitle",{defaultMessage:"connectors"}),showWarningText:Z,warningText:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.warningText",{defaultMessage:"{connectors, plural, one {This connector is} other {Some connectors are}} currently in use.",values:{connectors:X.length}}),setIsLoadingState:t=>W(t)}),(q||G)&&Object(s.jsx)(T.a,null),0!==et.length&&at,0===et.length&&v&&!q&&!G&&Object(s.jsx)(f,{onCTAClicked:()=>J(!0),docLinks:D}),0===et.length&&!v&&Object(s.jsx)(A,null),H?Object(s.jsx)(O.CreateConnectorFlyout,{onClose:()=>{J(!1)},onTestConnector:t=>it(t,C.i.Test),onConnectorCreated:ot,actionTypeRegistry:u}):null,Q.initialConnector?Object(s.jsx)(I.EditConnectorFlyout,{key:`${Q.initialConnector.id}${Q.tab?`:${Q.tab}`:""}`,connector:Q.initialConnector,tab:Q.tab,onClose:()=>{V(Object(r.omit)(Q,"initialConnector"))},onConnectorUpdated:t=>{V({...Q,initialConnector:t}),ot()},actionTypeRegistry:u}):null))};function _(t,e){return t.filter((t=>t.actionTypeId===e)).length}const M=({item:t,canDelete:e,onDelete:n})=>t.isPreconfigured?Object(s.jsx)(c.EuiFlexItem,{grow:!1},Object(s.jsx)(c.EuiBetaBadge,{"data-test-subj":"preConfiguredTitleMessage",label:a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.preconfiguredTitleMessage",{defaultMessage:"Preconfigured"}),tooltipContent:"This connector can't be deleted."})):Object(s.jsx)(c.EuiFlexItem,{grow:!1},Object(s.jsx)(c.EuiToolTip,{content:e?a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDescription",{defaultMessage:"Delete this connector"}):a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDisabledDescription",{defaultMessage:"Unable to delete connectors"})},Object(s.jsx)(c.EuiButtonIcon,{isDisabled:!e,"data-test-subj":"deleteConnector","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionName",{defaultMessage:"Delete"}),onClick:n,iconType:"trash"}))),w=({item:t,canExecute:e,onRun:n})=>Object(s.jsx)(c.EuiFlexItem,{grow:!1},Object(s.jsx)(c.EuiToolTip,{content:e?a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDescription",{defaultMessage:"Run this connector"}):a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDisabledDescription",{defaultMessage:"Unable to run connectors"})},Object(s.jsx)(c.EuiButtonIcon,{isDisabled:!e,"data-test-subj":"runConnector","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorName",{defaultMessage:"Run"}),onClick:n,iconType:"play"}))),A=()=>Object(s.jsx)(c.EuiEmptyPrompt,{iconType:"securityApp",title:Object(s.jsx)("h1",null,Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateTitle",defaultMessage:"No permissions to create connectors"})),body:Object(s.jsx)("p",{"data-test-subj":"permissionDeniedMessage"},Object(s.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))})}}]);