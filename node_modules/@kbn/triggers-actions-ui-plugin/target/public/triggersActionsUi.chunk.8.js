/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[8,37],{117:function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return l}));const n=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},r=(e,t)=>{var s,n;return".sentinelone"===t?null==e||null===(s=e.actions)||void 0===s?void 0:s.save:null==e||null===(n=e.actions)||void 0===n?void 0:n.execute},a=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function o(e,t){var s,n;return null!==(s=null==t||null===(n=t.authorizedConsumers[e])||void 0===n?void 0:n.all)&&void 0!==s&&s}const l=e=>{var t,s;return null==e||null===(t=e.management)||void 0===t||null===(s=t.security)||void 0===s?void 0:s.api_keys}},118:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({message:e,outcomeFilter:t,runId:s,ruleTypeIds:n})=>{const i=[];if(e){const t=e.replace(/([\)\(\<\>\}\{\"\:\\])/gm,"\\$&");i.push(`(message: "${t}" OR error.message: "${t}")`)}if(t&&t.length){const e=function(e){const t={failure:"event.outcome: failure",warning:"kibana.alerting.outcome: warning",success:"kibana.alerting.outcome:success OR (event.outcome: success AND NOT kibana.alerting.outcome:*)",unknown:"event.outcome: unknown"};return`${e.map((e=>t[e])).join(" OR ")}`}(t);e&&i.push(`(${e})`)}return s&&i.push(`kibana.alert.rule.execution.uuid: ${s}`),null!=n&&n.length&&i.push(`kibana.alert.rule.rule_type_id:(${n.join(" or ")})`),i}},119:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"k",(function(){return g})),s.d(t,"g",(function(){return p})),s.d(t,"L",(function(){return f})),s.d(t,"K",(function(){return b})),s.d(t,"J",(function(){return U})),s.d(t,"M",(function(){return M})),s.d(t,"t",(function(){return E})),s.d(t,"v",(function(){return w})),s.d(t,"x",(function(){return L})),s.d(t,"s",(function(){return R})),s.d(t,"u",(function(){return _})),s.d(t,"e",(function(){return z})),s.d(t,"m",(function(){return N})),s.d(t,"n",(function(){return C})),s.d(t,"r",(function(){return B})),s.d(t,"o",(function(){return $})),s.d(t,"p",(function(){return F})),s.d(t,"q",(function(){return P})),s.d(t,"j",(function(){return D})),s.d(t,"l",(function(){return W})),s.d(t,"h",(function(){return J})),s.d(t,"w",(function(){return K})),s.d(t,"f",(function(){return G})),s.d(t,"c",(function(){return H})),s.d(t,"d",(function(){return q})),s.d(t,"z",(function(){return Y})),s.d(t,"y",(function(){return Q})),s.d(t,"G",(function(){return Z})),s.d(t,"I",(function(){return V})),s.d(t,"H",(function(){return X})),s.d(t,"A",(function(){return ee})),s.d(t,"C",(function(){return te})),s.d(t,"B",(function(){return se})),s.d(t,"D",(function(){return ne})),s.d(t,"F",(function(){return ie})),s.d(t,"E",(function(){return re}));var n=s(2);const i=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusOk",{defaultMessage:"Ok"}),r=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusActive",{defaultMessage:"Active"}),a=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusError",{defaultMessage:"Error"}),o=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusLicenseError",{defaultMessage:"License Error"}),l=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusPending",{defaultMessage:"Pending"}),u=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusUnknown",{defaultMessage:"Unknown"}),c=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusWarning",{defaultMessage:"Warning"}),d=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeSucceeded",{defaultMessage:"Succeeded"}),g=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeWarning",{defaultMessage:"Warning"}),p=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFailed",{defaultMessage:"Failed"}),f={ok:i,active:r,error:a,pending:l,unknown:u,warning:c},b={succeeded:d,warning:g,failed:p},m=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),h=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),x=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),y=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),j=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonLicense",{defaultMessage:"Cannot run rule"}),O=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonTimeout",{defaultMessage:"Rule execution cancelled due to timeout."}),S=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDisabled",{defaultMessage:"Rule failed to execute because rule ran after it was disabled."}),I=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonValidate",{defaultMessage:"An error occurred when validating the rule parameters."}),k=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxExecutableActions",{defaultMessage:"Action limit exceeded"}),v=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxQueuedActions",{defaultMessage:"Queued action limit exceeded."}),A=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxAlerts",{defaultMessage:"Alert limit exceeded"}),T=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonUnknown",{defaultMessage:"Unknown reason"}),U={read:h,decrypt:x,execute:y,unknown:m,license:j,timeout:O,disabled:S,validate:I},M={maxExecutableActions:k,maxAlerts:A,maxQueuedActions:v,unknown:T},E=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectAllAriaLabel",{defaultMessage:"Toggle select all rules"}),w=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectShowBulkActionsAriaLabel",{defaultMessage:"Show bulk actions"}),L=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalRulesLabel",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"{formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),R=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectedRulesButton",{values:{formattedSelectedRules:e,selectedRules:t},defaultMessage:"Selected {formattedSelectedRules} {selectedRules, plural, =1 {rule} other {rules}}"}),_=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectAllRulesButton",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"Select all {formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),z=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearAllSelectionButton",{defaultMessage:"Clear selection"}),N=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",{defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:e}}),C=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",{defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:e}}),B=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",{defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:e}}),$=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",{defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:e}}),F=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",{defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:e}}),P=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",{defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:e}}),D=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeSucceededDescription",{defaultMessage:"Succeeded: {total}",values:{total:e}}),W=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeWarningDescription",{defaultMessage:"Warning: {total}",values:{total:e}}),J=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeFailedDescription",{defaultMessage:"Failed: {total}",values:{total:e}}),K=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),G=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),H=n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),q=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearFilterLink",{values:{numberOfFilters:e},defaultMessage:"Clear {numberOfFilters, plural, =1 {filter} other {filters}}"}),Y=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You won't be able to recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),Q=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),Z=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),V=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Enabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),X=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Disabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),ee=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),te=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to enable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),se=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to disable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),ne=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Deleted {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}}),ie=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Enabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}}),re=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Disabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}})},120:function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s(13),i=s.n(n),r=(s(1),s(121)),a=s(135),o=s(63),l=s(62),u=s(131),c=s(55),d=s(126),g=s(6);async function p({id:e,http:t}){await t.post(`${g.b}/rule/${encodeURIComponent(e)}/_mute_all`)}async function f({id:e,http:t}){await t.post(`${g.b}/rule/${encodeURIComponent(e)}/_unmute_all`)}const b=({rule_type_state:e,alerts:t,previous_started_at:s,...n})=>({...n,alertTypeState:e,alertInstances:t,previousStartedAt:s});var m=s(118);const h=({id:e,http:t,outcomeFilter:s,message:n,dateStart:i,dateEnd:r,ruleTypeIds:a})=>{const o=Object(m.a)({outcomeFilter:s,message:n,ruleTypeIds:a});return t.get(`${g.j}/rule/${e}/_execution_kpi`,{query:{filter:o.length?o.join(" and "):void 0,date_start:i,date_end:r}})},x=({id:e,http:t,outcomeFilter:s,message:n,dateStart:i,dateEnd:r,namespaces:a,ruleTypeIds:o})=>{const l=Object(m.a)({outcomeFilter:s,message:n,ruleTypeIds:o});return t.get(`${g.j}/_global_execution_kpi`,{query:{filter:l.length?l.join(" and "):void 0,date_start:i,date_end:r,namespaces:a?JSON.stringify(a):a}})},y={timestamp:"@timestamp"},j=({id:e,http:t,dateStart:s,dateEnd:n,runId:i,message:r,perPage:a=10,page:o=0,sort:l,namespace:u,withAuth:c=!1})=>{const d=(e=>e?e.map((e=>{const t=Object.keys(e)[0],s=e[Object.keys(e)[0]];return{[y[t]||t]:{...s}}})):[])(l),p=Object(m.a)({runId:i,message:r});return t.get(`${g.j}/rule/${e}/_action_error_log`,{query:{date_start:s,date_end:n,filter:p.length?p.join(" and "):void 0,per_page:a,page:o+1,sort:d.length?JSON.stringify(d):void 0,namespace:u,with_auth:c}})};var O=s(132),S=s(34),I=s(122),k=s(123),v=s(59),A=s(136),T=s(137),U=s(30),M=s(0);function E(e){return t=>{const{http:s}=Object(U.b)().services;return Object(M.jsx)(e,i()({},t,{muteRules:async e=>async function({ids:e,http:t}){await Promise.all(e.map((e=>p({http:t,id:e}))))}({http:s,ids:e.filter((e=>!w(e))).map((e=>e.id))}),unmuteRules:async e=>async function({ids:e,http:t}){await Promise.all(e.map((e=>f({id:e,http:t}))))}({http:s,ids:e.filter(w).map((e=>e.id))}),muteRule:async e=>{if(!w(e))return await p({http:s,id:e.id})},unmuteRule:async e=>{if(w(e))return await f({http:s,id:e.id})},muteAlertInstance:async(e,t)=>{if(!L(e,t))return Object(u.a)({http:s,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(L(e,t))return Object(O.a)({http:s,id:e.id,instanceId:t})},loadRule:async e=>Object(o.a)({http:s,ruleId:e}),loadRuleState:async e=>async function({http:e,ruleId:t}){return await e.get(`${g.j}/rule/${t}/state`).then((e=>e?b(e):{}))}({http:s,ruleId:e}),loadRuleSummary:async(e,t)=>Object(l.a)({http:s,ruleId:e,numberOfExecutions:t}),loadRuleTypes:async()=>Object(c.a)({http:s}),loadExecutionLogAggregations:async e=>Object(d.a)({...e,http:s}),loadGlobalExecutionLogAggregations:async e=>Object(d.b)({...e,http:s}),loadActionErrorLog:async e=>j({...e,http:s}),loadExecutionKPIAggregations:async e=>h({...e,http:s}),loadGlobalExecutionKPIAggregations:async e=>x({...e,http:s}),resolveRule:async e=>async function({http:e,ruleId:t}){const s=await e.get(`${g.j}/rule/${encodeURIComponent(t)}/_resolve`);return Object(S.a)(s)}({http:s,ruleId:e}),getHealth:async()=>Object(r.a)({http:s}),snoozeRule:async(e,t)=>await Object(I.b)({http:s,id:e.id,snoozeSchedule:t}),bulkSnoozeRules:async e=>await Object(I.a)({http:s,...e}),unsnoozeRule:async(e,t)=>await Object(k.b)({http:s,id:e.id,scheduleIds:t}),bulkUnsnoozeRules:async e=>await Object(k.a)({http:s,...e}),cloneRule:async e=>await Object(a.a)({http:s,ruleId:e}),bulkDeleteRules:async e=>await Object(v.a)({http:s,...e}),bulkEnableRules:async e=>await Object(A.a)({http:s,...e}),bulkDisableRules:async e=>await Object(T.a)({http:s,...e})}))}}function w(e){return!0===e.muteAll}function L(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},122:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return a}));var n=s(6);function i({id:e,duration:t,rRule:s}){return{...e?{id:e}:{},duration:t,rRule:{...s,...s.until?{until:s.until.toISOString()}:{}}}}async function r({id:e,snoozeSchedule:t,http:s}){await s.post(`${n.j}/rule/${encodeURIComponent(e)}/_snooze`,{body:JSON.stringify({snooze_schedule:i(t)})})}function a({ids:e,filter:t,snoozeSchedule:s,http:r}){let a;try{a=JSON.stringify({ids:null!=e&&e.length?e:void 0,...t?{filter:JSON.stringify(t)}:{},operations:[{operation:"set",field:"snoozeSchedule",value:i(s)}]})}catch(e){throw new Error(`Unable to parse bulk snooze params: ${e}`)}return r.post(`${n.j}/rules/_bulk_edit`,{body:a})}},123:function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s(6);async function i({id:e,http:t,scheduleIds:s}){await t.post(`${n.j}/rule/${encodeURIComponent(e)}/_unsnooze`,{body:JSON.stringify({schedule_ids:s})})}function r({ids:e,filter:t,scheduleIds:s,http:i}){let r;try{r=JSON.stringify({ids:null!=e&&e.length?e:void 0,...t?{filter:JSON.stringify(t)}:{},operations:[{operation:"delete",field:"snoozeSchedule",value:s}]})}catch(e){throw new Error(`Unable to parse bulk unsnooze params: ${e}`)}return i.post(`${n.j}/rules/_bulk_edit`,{body:r})}},126:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o}));var n=s(6),i=s(118);const r=({data:e,...t})=>({data:e.map((e=>(e=>{const{duration_ms:t,total_search_duration_ms:s,es_search_duration_ms:n,schedule_delay_ms:i,...r}=e;return{execution_duration:e.duration_ms,total_search_duration:e.total_search_duration_ms,es_search_duration:e.es_search_duration_ms,schedule_delay:e.schedule_delay_ms,...r}})(e))),...t}),a=async({id:e,http:t,dateStart:s,dateEnd:a,outcomeFilter:o,ruleTypeIds:l,message:u,perPage:c=10,page:d=0,sort:g=[]})=>{const p=g,f=Object(i.a)({outcomeFilter:o,message:u,ruleTypeIds:l}),b=await t.get(`${n.j}/rule/${e}/_execution_log`,{query:{date_start:s,date_end:a,filter:f.length?f.join(" and "):void 0,per_page:c,page:d+1,sort:p.length?JSON.stringify(p):void 0}});return r(b)},o=async({http:e,dateStart:t,dateEnd:s,outcomeFilter:a,ruleTypeIds:o,message:l,perPage:u=10,page:c=0,sort:d=[],namespaces:g})=>{const p=d,f=Object(i.a)({outcomeFilter:a,message:l,ruleTypeIds:o}),b=await e.get(`${n.j}/_global_execution_logs`,{query:{date_start:t,date_end:s,filter:f.length?f.join(" and "):void 0,per_page:u,page:c+1,sort:p.length?JSON.stringify(p):void 0,namespaces:g?JSON.stringify(g):void 0}});return r(b)}},131:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);async function i({id:e,instanceId:t,http:s}){await s.post(`${n.b}/rule/${encodeURIComponent(e)}/alert/${encodeURIComponent(t)}/_mute`)}},132:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);async function i({id:e,instanceId:t,http:s}){await s.post(`${n.b}/rule/${encodeURIComponent(e)}/alert/${encodeURIComponent(t)}/_unmute`)}},134:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(27);async function i({http:e}){return await e.get(`${n.a}/_config`)}},135:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(6),i=s(34);async function r({http:e,ruleId:t}){const s=await e.post(`${n.j}/rule/${encodeURIComponent(t)}/_clone`);return Object(i.b)(s)}},136:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);const i=async({filter:e,ids:t,http:s})=>{try{const i=JSON.stringify({ids:null!=t&&t.length?t:void 0,...e?{filter:JSON.stringify(e)}:{}});return s.patch(`${n.j}/rules/_bulk_enable`,{body:i})}catch(e){throw new Error(`Unable to parse bulk enable params: ${e}`)}}},137:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);const i=async({filter:e,ids:t,http:s})=>{try{const i=JSON.stringify({ids:null!=t&&t.length?t:void 0,...e?{filter:JSON.stringify(e)}:{}});return s.patch(`${n.j}/rules/_bulk_disable`,{body:i})}catch(e){throw new Error(`Unable to parse bulk disable params: ${e}`)}}},214:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s(1),i=s(26),r=s(3),a=s(2),o=s(21),l=s(30),u=s(0);const c=(e,t)=>a.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.success",{defaultMessage:"Updated {property} for {total, plural, one {# rule} other {# rules}}.",values:{total:e,property:t}}),d=(e,t,s)=>a.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.someSuccess",{defaultMessage:"Updated {property} for {success, plural, one {# rule} other {# rules}}, {failure, plural, one {# rule} other {# rules}} encountered errors.",values:{success:e,failure:t,property:s}}),g=(e,t)=>a.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.failure",{defaultMessage:"Failed to update {property} for {failure, plural, one {# rule} other {# rules}}.",values:{failure:e,property:t}}),p=a.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.snoozeSettings",{defaultMessage:"snooze settings"}),f={snooze:p,snoozeSchedule:p,apiKey:a.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.apiKey",{defaultMessage:"API key"})};function b(e){const{onSearchPopulate:t}=e,{notifications:{toasts:s}}=Object(l.b)().services,a=Object(n.useCallback)((e=>{if(!t)return;const s=e.errors.map((e=>e.rule.name)).join(",");t(s)}),[t]),p=Object(n.useCallback)((e=>Object(u.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"xs"},t&&Object(u.jsx)(r.EuiFlexItem,{grow:!1},Object(u.jsx)("div",null,Object(u.jsx)(r.EuiButtonEmpty,{iconType:"search",size:"xs",flush:"left",onClick:()=>a(e),"data-test-subj":"bulkEditResponseFilterErrors"},Object(u.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"})))))),[t,a]),b=Object(n.useCallback)(((e,t)=>{const{errors:n,total:i}=e,r=i-n.length,a=n.length;a?a!==i?s.addWarning({title:d(r,a,f[t]),text:Object(o.toMountPoint)(p(e))}):s.addDanger({title:g(a,f[t]),text:Object(o.toMountPoint)(p(e))}):s.addSuccess(c(r,f[t]))}),[s,p]);return Object(n.useMemo)((()=>({showToast:b})),[b])}},226:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);function i({ids:e,filter:t,http:s}){let i;try{i=JSON.stringify({ids:null!=e&&e.length?e:void 0,...t?{filter:JSON.stringify(t)}:{},operations:[{operation:"set",field:"apiKey"}]})}catch(e){throw new Error(`Unable to parse bulk update API key params: ${e}`)}return s.post(`${n.j}/rules/_bulk_edit`,{body:i})}},227:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s(3),i=s(1),r=s.n(i),a=s(119),o=s(0);const l=({confirmButtonText:e,confirmModalText:t,onCancel:s,onConfirm:i,showWarningText:l,warningText:u})=>Object(o.jsx)(n.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"rulesDeleteConfirmation",title:e,onCancel:s,onConfirm:i,cancelButtonText:a.c,confirmButtonText:e},Object(o.jsx)("p",null,t),l&&Object(o.jsx)(n.EuiCallOut,{title:Object(o.jsx)(r.a.Fragment,null,u),color:"warning",iconType:"warning"}))},228:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(3),i=s(2),r=s(1),a=s(30),o=s(214),l=s(0);const u=({onCancel:e,idsToUpdate:t,rulesToUpdate:s,idsToUpdateFilter:u,numberOfSelectedRules:c=0,apiUpdateApiKeyCall:d,setIsLoadingState:g,onUpdated:p,onSearchPopulate:f})=>{const{http:b,notifications:{toasts:m}}=Object(a.b)().services,[h,x]=Object(r.useState)(!1),{showToast:y}=Object(o.a)({onSearchPopulate:f}),j=Object(r.useMemo)((()=>null!=t&&t.length?t:null!=s&&s.length?s.map((e=>e.id)):[]),[t,s]);Object(r.useEffect)((()=>{x(void 0!==u||j.length>0)}),[j,u]);const O=Object(r.useMemo)((()=>void 0!==u?c:j.length),[u,c,j]);return h?Object(l.jsx)(n.EuiConfirmModal,{buttonColor:"primary","data-test-subj":"updateApiKeyIdsConfirmation",title:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.title",{defaultMessage:"Update API key"}),onCancel:()=>{x(!1),e()},onConfirm:async()=>{x(!1),g(!0);try{const e=await d({ids:j,filter:u,http:b});y(e,"apiKey")}catch(e){m.addError(e,{title:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.failureMessage",{defaultMessage:"Failed to update the API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:O}})})}g(!1),p()},cancelButtonText:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.confirmButton",{defaultMessage:"Update"})},i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.description",{defaultMessage:"You will not be able to recover the old API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:O}})):null}},229:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(1),i=s(26),r=s(3),a=s(21),o=s(30),l=s(119),u=s(0);const c={DELETE:{getSuccessfulNotificationText:l.G,getFailedNotificationText:l.A,getPartialSuccessNotificationText:l.D},ENABLE:{getSuccessfulNotificationText:l.I,getFailedNotificationText:l.C,getPartialSuccessNotificationText:l.F},DISABLE:{getSuccessfulNotificationText:l.H,getFailedNotificationText:l.B,getPartialSuccessNotificationText:l.E}},d=({onSearchPopulate:e})=>{const{notifications:{toasts:t}}=Object(o.b)().services,s=Object(n.useCallback)((t=>{if(!e)return;const s=t.map((e=>e.rule.name)).join(",");e(s)}),[e]),d=Object(n.useCallback)(((t,n)=>Object(u.jsx)(r.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e&&Object(u.jsx)(r.EuiFlexItem,{grow:!1},Object(u.jsx)(r.EuiButton,{color:n,size:"s",onClick:()=>s(t),"data-test-subj":"bulkDeleteResponseFilterErrors"},Object(u.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"}))))),[e,s]),g=Object(n.useCallback)((({action:e,errors:s,total:n})=>{const i=n-s.length,r=s.length;r?r!==n?t.addWarning({title:c[e].getPartialSuccessNotificationText(i,r,l.w,l.f),text:Object(a.toMountPoint)(d(s,"warning"))}):t.addDanger({title:c[e].getFailedNotificationText(r,l.w,l.f),text:Object(a.toMountPoint)(d(s,"danger"))}):t.addSuccess(c[e].getSuccessfulNotificationText(i,l.w,l.f))}),[t,d]);return Object(n.useMemo)((()=>({showToast:g})),[g])}},232:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(2),i=s(6);async function r(e,t,s){try{const r=await async function({id:e,http:t}){return t.post(`${i.j}/rule/${encodeURIComponent(e)}/_run_soon`)}({http:e,id:s});r?t.addWarning({title:r}):t.addSuccess({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ableToRunRuleSoon",{defaultMessage:"Your rule is scheduled to run"})})}catch(e){t.addError(e,{title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToRunRuleSoon",{defaultMessage:"Unable to schedule your rule to run"})})}}},91:function(e,t,s){"use strict";s.r(t),s.d(t,"RulesListNotifyBadge",(function(){return v})),s.d(t,"SNOOZE_SUCCESS_MESSAGE",(function(){return p})),s.d(t,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return f})),s.d(t,"SNOOZE_FAILED_MESSAGE",(function(){return b})),s.d(t,"default",(function(){return A}));var n=s(1),i=s(30),r=s(123),a=s(122),o=s(32),l=s.n(o),u=s(3),c=s(2),d=s(144),g=s(133);const p=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rules notification successfully snoozed"}),f=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rules notification successfully unsnoozed"}),b=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),m=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),h=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.seconds",{defaultMessage:"{value, plural, one {# second} other {# seconds}}",values:{value:e}}),x=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.minutes",{defaultMessage:"{value, plural, one {# minute} other {# minutes}}",values:{value:e}}),y=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.hours",{defaultMessage:"{value, plural, one {# hour} other {# hours}}",values:{value:e}}),j=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.days",{defaultMessage:"{value, plural, one {# day} other {# days}}",values:{value:e}}),O=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.weeks",{defaultMessage:"{value, plural, one {# week} other {# weeks}}",values:{value:e}}),S=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.months",{defaultMessage:"{value, plural, one {# month} other {# months}}",values:{value:e}}),I=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.years",{defaultMessage:"{value, plural, one {# year} other {# years}}",values:{value:e}});var k=s(0);const v=({snoozeSettings:e,loading:t=!1,disabled:s=!1,onRuleChanged:r,snoozeRule:a,unsnoozeRule:o,showOnHover:v=!1,showTooltipInline:A=!1})=>{var T,U,M;const[E,w]=Object(n.useState)(!1),L=t||E,R=Boolean(s)||!e,[_,z]=Object(n.useState)(!1),N=Object(n.useCallback)((()=>z(!0)),[z]),C=Object(n.useCallback)((()=>z(!1)),[z]),B=null==e?void 0:e.isSnoozedUntil,$=null!==(T=null==e?void 0:e.muteAll)&&void 0!==T&&T,F=Object(n.useMemo)((()=>{return!!e&&(t=e,Boolean(t.isSnoozedUntil&&new Date(t.isSnoozedUntil).getTime()>Date.now()||t.muteAll));var t}),[e]),P=Object(n.useMemo)((()=>e?(e=>{if(!e.snoozeSchedule)return null;const t=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===t.length?null:t.reduce(((e,t)=>l()(t.rRule.dtstart).isBefore(l()(e.rRule.dtstart))?t:e))})(e):null),[e]),D=Object(n.useMemo)((()=>B?function(e){const t=l.a.duration(l()(e).diff(l()())),s={years:I(t.years()),months:S(t.months()),weeks:O(t.weeks()),days:j(t.days()),hours:y(t.hours()),minutes:x(t.minutes()),seconds:h(t.seconds())},n=Object.entries(s).filter((([e,t])=>""!==t&&t!==`0 ${e}`)).map((([e,t])=>`${t}`)).join(", "),i=n.lastIndexOf(", ");return-1===i?n:n.slice(0,i)+" and"+n.slice(i+1)}(B):void 0),[B]),{notifications:{toasts:W}}=Object(i.b)().services,J=Object(n.useMemo)((()=>!F&&Boolean(P)),[P,F]),K=Object(n.useMemo)((()=>B?Object(d.a)(l()(B)):P?Object(d.a)(l()(P.rRule.dtstart)):""),[B,P]),G=Object(n.useMemo)((()=>$?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):J?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(d.b)(l()(P.rRule.dtstart))}}):F&&D?Object(k.jsx)(u.EuiToolTip,{title:c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.timeRemaining",{defaultMessage:"Time remaining"}),content:Object(k.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(k.jsx)(u.EuiFlexItem,{grow:!1},Object(k.jsx)("span",null,D)),Object(k.jsx)(u.EuiSpacer,null),Object(k.jsx)(u.EuiFlexItem,{grow:!1},Object(k.jsx)("span",null,null==B?void 0:B.toString())))},Object(k.jsx)(u.EuiTextAlign,null,c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:l()(B).fromNow(!0)}}))):A?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[$,J,F,A,P,D,B]),H=Object(n.useMemo)((()=>Object(k.jsx)(u.EuiButton,{size:"s",isLoading:L,disabled:L||R,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":m,minWidth:85,iconType:"bellSlash",color:"accent",onClick:N},Object(k.jsx)(u.EuiText,{size:"xs"},K))),[K,L,R,N]),q=Object(n.useMemo)((()=>Object(k.jsx)(u.EuiButton,{size:"s",isLoading:L,disabled:L||R,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":m,onClick:N},Object(k.jsx)(u.EuiText,{size:"xs"},K))),[K,L,R,N]),Y=Object(n.useMemo)((()=>{const e=v?"ruleSidebarItem__action":"";return Object(k.jsx)(u.EuiButtonIcon,{size:"s",isLoading:L,disabled:L||R,display:L?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":m,className:_||L?"":e,iconType:"bell",onClick:N})}),[_,L,R,v,N]),Q=Object(n.useMemo)((()=>Object(k.jsx)(u.EuiButtonIcon,{size:"s",isLoading:L,disabled:L||R,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":m,iconType:"bellSlash",color:"accent",onClick:N})),[L,R,N]),Z=Object(n.useMemo)((()=>J?q:$?Q:F?H:Y),[F,J,$,q,H,Q,Y]),V=Object(n.useMemo)((()=>{const e="string"==typeof s?s:_||A?void 0:D;return Object(k.jsx)(u.EuiToolTip,{title:e?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.timeRemaining",{defaultMessage:"Time remaining"}):void 0,content:e},Z)}),[s,_,Z,A,D]),X=Object(n.useCallback)((async e=>{try{w(!0),C(),await a(e),await r(),W.addSuccess(p)}catch(e){W.addDanger(b)}finally{w(!1)}}),[w,a,r,W,C]),ee=Object(n.useCallback)((async e=>{try{w(!0),C(),await o(e),await r(),W.addSuccess(f)}catch(e){W.addDanger(b)}finally{w(!1)}}),[w,o,r,W,C]),te=Object(k.jsx)(u.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:_&&!R,closePopover:C,button:V,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(k.jsx)(g.a,{snoozeRule:X,unsnoozeRule:ee,interval:Object(g.b)(B),showCancel:F,scheduledSnoozes:null!==(U=null==e?void 0:e.snoozeSchedule)&&void 0!==U?U:[],activeSnoozes:null!==(M=null==e?void 0:e.activeSnoozes)&&void 0!==M?M:[],inPopover:!0}));return A?Object(k.jsx)(u.EuiFlexGroup,{alignItems:"center"},Object(k.jsx)(u.EuiFlexItem,{grow:!1},te),Object(k.jsx)(u.EuiFlexItem,null,Object(k.jsx)(u.EuiText,{color:"subdued",size:"xs"},G))):te},A=({ruleId:e,snoozeSettings:t,loading:s,disabled:o,showTooltipInline:l,showOnHover:u,onRuleChanged:c})=>{const{http:d}=Object(i.b)().services,g=Object(n.useCallback)((t=>e?Object(a.b)({http:d,id:e,snoozeSchedule:t}):Promise.resolve()),[d,e]),p=Object(n.useCallback)((t=>e?Object(r.b)({http:d,id:e,scheduleIds:t}):Promise.resolve()),[d,e]);return Object(k.jsx)(v,{snoozeSettings:t,loading:s,disabled:o,onRuleChanged:c,snoozeRule:g,unsnoozeRule:p,showTooltipInline:l,showOnHover:u})}}}]);