/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[25,48],{121:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(6);const n=({decryption_health:e,execution_health:t,read_health:s,...a})=>({decryptionHealth:e,executionHealth:t,readHealth:s,...a}),r=({is_sufficiently_secure:e,has_permanent_encryption_key:t,alerting_framework_health:s,...a})=>({isSufficientlySecure:e,hasPermanentEncryptionKey:t,alertingFrameworkHealth:s,...a});async function i({http:e}){const t=await e.get(`${a.b}/_health`),s=n(t.alerting_framework_health);return{...r(t),alertingFrameworkHealth:s}}},124:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return o}));var a=s(1),n=s(0);const r={loadingHealthCheck:!1,setLoadingHealthCheck:e=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}},i=Object(a.createContext)(r),c=({children:e})=>{const[t,s]=Object(a.useState)(!1),r=Object(a.useCallback)((e=>{s(e)}),[]),c=Object(a.useMemo)((()=>({loadingHealthCheck:t,setLoadingHealthCheck:r})),[t,r]);return Object(n.jsx)(i.Provider,{value:c},e)},o=()=>{const e=Object(a.useContext)(i);if(!e)throw new Error("HealthContext has not been set.");return e}},139:function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var a=s(1),n=s.n(a),r=s(128),i=s(130),c=s(26),o=s(3),l=s(2),u=(s(156),s(124)),d=s(30),g=s(52),h=s(27),b=s(121),p=s(0);const j=({children:e,waitForCheck:t,inFlyout:s=!1})=>{const{http:a,docLinks:c}=Object(d.b)().services,{setLoadingHealthCheck:l}=Object(u.b)(),[j,k]=n.a.useState(r.none);n.a.useEffect((()=>{!async function(){l(!0);const e=await async function({http:e}){const t=await e.get(`${h.a}/_health`);return t?{isRulesAvailable:t.isAlertsAvailable}:t}({http:a}),t={...e,isSufficientlySecure:!1,hasPermanentEncryptionKey:!1};if(t.isRulesAvailable){const e=await async function(e){try{return Object(r.some)(await Object(b.a)({http:e}))}catch(e){return r.none}}(a);Object(r.isSome)(e)?(t.isSufficientlySecure=e.value.isSufficientlySecure,t.hasPermanentEncryptionKey=e.value.hasPermanentEncryptionKey):(t.isSufficientlySecure=!0,t.hasPermanentEncryptionKey=!0),k(Object(r.some)(t))}l(!1)}()}),[a,l]);const O=s?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(i.pipe)(j,Object(r.fold)((()=>t?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.EuiSpacer,{size:"m"}),Object(p.jsx)(g.a,null)):Object(p.jsx)(n.a.Fragment,null,e)),(t=>null!=t&&t.isSufficientlySecure&&null!=t&&t.hasPermanentEncryptionKey?Object(p.jsx)(n.a.Fragment,null,e):t.isRulesAvailable?t.isSufficientlySecure||t.hasPermanentEncryptionKey?t.hasPermanentEncryptionKey?Object(p.jsx)(x,{docLinks:c,className:O}):Object(p.jsx)(m,{docLinks:c,className:O}):Object(p.jsx)(f,{docLinks:c,className:O}):Object(p.jsx)(y,{docLinks:c,className:O}))))},m=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"You must configure an encryption key to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn more."}))))}),x=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledError",{defaultMessage:"You must enable API keys to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.security.elasticsearchEnableApiKeys,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorAction",{defaultMessage:"Learn more."}))))}),y=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"alertsNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.alertsErrorTitle",defaultMessage:"You must enable Alerting and Actions"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsError",{defaultMessage:"To create a rule, you must enable the alerting and actions plugins. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsErrorAction",{defaultMessage:"Learn how."}))))}),f=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionError",{defaultMessage:"You must enable API keys and configure an encryption key to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.setupPrerequisites,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorAction",{defaultMessage:"Learn more."}))))})},146:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s(2),n=s(6);const r=(e,t=!1)=>{switch(e){case"logs":return{text:a.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"}),...t?{href:`${n.v}`}:{}};case"connectors":return{text:a.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),...t?{href:`${n.s}`}:{}};case"rules":return{text:a.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${n.w}`}:{}};default:return{text:a.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${n.t}`}:{}}}}},147:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(2);const n=e=>{let t;switch(e){case"logs":t=a.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"});break;case"connectors":t=a.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":t=a.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;default:t=a.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"})}return t}},156:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(157);case"v8light":return s(159)}},157:function(e,t,s){var a=s(50),n=s(158);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},158:function(e,t,s){(t=s(51)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},159:function(e,t,s){var a=s(50),n=s(160);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},160:function(e,t,s){(t=s(51)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},301:function(e,t,s){"use strict";s.r(t),s.d(t,"TriggersActionsUIHome",(function(){return O})),s.d(t,"default",(function(){return O}));var a=s(1),n=s.n(a),r=s(89),i=s(163),c=s(26),o=s(3),l=s(33),u=s(6),d=s(146),g=s(147),h=s(139),b=s(124),p=s(30),j=s(4),m=s(54),x=s(0);const y=Object(a.lazy)((()=>Promise.all([s.e(1),s.e(2),s.e(8),s.e(13)]).then(s.bind(null,106)))),f=Object(a.lazy)((()=>Promise.all([s.e(2),s.e(5),s.e(7),s.e(15)]).then(s.bind(null,105)))),k=Object(a.lazy)((()=>s.e(53).then(s.bind(null,326)))),O=({match:{params:{section:e}},history:t})=>{const[s,O]=Object(a.useState)(),{chrome:A,setBreadcrumbs:_}=Object(p.b)().services,E=Object(l.a)("internalAlertsTable"),{authorizedToReadAnyRules:C}=Object(m.a)({filteredRuleTypes:[]}),w=[];w.push({id:"rules",name:Object(x.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.rulesTabTitle",defaultMessage:"Rules"})}),C&&w.push({id:"logs",name:Object(x.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.logsTabTitle",defaultMessage:"Logs"})}),E&&w.push({id:"alerts",name:Object(x.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.TabTitle",defaultMessage:"Alerts (Internal use only)"})});const M=Object(a.useCallback)((()=>Object(j.a)(y,"xl")({showCreateRuleButtonInPrompt:!0,setHeaderActions:O})),[]),T=Object(a.useCallback)((()=>Object(x.jsx)(o.EuiPageTemplate.Section,{grow:!1,paddingSize:"none"},Object(j.a)(f,"xl")({setHeaderActions:O}))),[]);return Object(a.useEffect)((()=>{_([Object(d.a)(e||"home")]),A.docTitle.change(Object(g.a)(e||"home"))}),[e,A,_]),Object(x.jsx)(n.a.Fragment,null,Object(x.jsx)(o.EuiPageTemplate.Header,{paddingSize:"none",bottomBorder:!0,pageTitle:Object(x.jsx)("span",{"data-test-subj":"appTitle"},Object(x.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.appTitle",defaultMessage:"Rules"})),rightSideItems:s,description:Object(x.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.sectionDescription",defaultMessage:"Detect conditions using rules."}),tabs:w.map((s=>({label:s.name,onClick:()=>{return e=s.id,void t.push(`/${e}`);var e},isSelected:s.id===e,key:s.id,"data-test-subj":`${s.id}Tab`})))}),Object(x.jsx)(o.EuiSpacer,{size:"l"}),Object(x.jsx)(b.a,null,Object(x.jsx)(h.a,{waitForCheck:!0},Object(x.jsx)(i.c,null,Object(x.jsx)(i.a,{exact:!0,path:u.v,component:T}),Object(x.jsx)(i.a,{exact:!0,path:u.w,component:M}),E?Object(x.jsx)(i.a,{exact:!0,path:u.u,component:()=>Object(x.jsx)(o.EuiPageTemplate.Section,{grow:!1,paddingSize:"none"},Object(j.a)(k,"xl")({}))}):Object(x.jsx)(r.Redirect,{to:u.w})))))}}}]);