/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[24,37,48],{101:function(e,t,s){"use strict";s.r(t),s.d(t,"RuleStatusPanel",(function(){return p})),s.d(t,"default",(function(){return h}));var n=s(2),a=s(1),o=s(32),i=s.n(o),u=s(26),r=s(3),l=s(8),c=s(120),d=s(91),g=s(145),b=s(0);const p=({rule:e,bulkEnableRules:t,bulkDisableRules:s,snoozeRule:o,unsnoozeRule:c,requestRefresh:p,isEditable:h,healthColor:j,statusMessage:f,refreshToken:m})=>{const[y,O]=Object(a.useState)(null),x=Object(a.useRef)(!1),S=Object(a.useCallback)((t=>o(e,t)),[e,o]),_=Object(a.useCallback)((t=>c(e,t)),[e,c]),v=Object(a.useMemo)((()=>{var t;return f||Object(b.jsx)(r.EuiStat,{titleSize:"xs",title:"--",description:"",isLoading:!(null!==(t=e.lastRun)&&void 0!==t&&t.outcome||e.nextRun)})}),[e,f]),{data:E,loadEventLogs:I}=Object(g.a)({id:e.id,dateStart:"now-24h",dateEnd:"now",page:0,perPage:10});Object(a.useEffect)((()=>{E&&O(E.total)}),[E]);const z=Object(a.useCallback)((()=>{I(),p()}),[p,I]);return Object(a.useEffect)((()=>{x.current&&I(),x.current=!0}),[m]),Object(b.jsx)(r.EuiPanel,{"data-test-subj":"ruleStatusPanel",hasBorder:!0,paddingSize:"none"},Object(b.jsx)(r.EuiPanel,{hasShadow:!1},Object(b.jsx)(r.EuiFlexGroup,{justifyContent:"flexStart"},Object(b.jsx)(r.EuiFlexItem,{grow:!1},Object(b.jsx)(r.EuiTitle,{size:"xxs"},Object(b.jsx)("h5",null,Object(b.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.rule.statusPanel.ruleIsEnabledDisabledTitle",defaultMessage:"Rule is"})))),Object(b.jsx)(r.EuiFlexItem,null,Object(b.jsx)(l.h,{disableRule:()=>s({ids:[e.id]}),enableRule:()=>t({ids:[e.id]}),snoozeRule:async()=>{},unsnoozeRule:async()=>{},rule:e,onRuleChanged:z,direction:"row",isEditable:h,hideSnoozeOption:!0}))),Object(b.jsx)(r.EuiSpacer,{size:"s"}),Object(b.jsx)(r.EuiText,{size:"s",color:"subdued","data-test-subj":"ruleStatus-numberOfExecutions"},null!==y&&Object(b.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleDetails.rule.statusPanel.totalExecutions",defaultMessage:"{executions, plural, one {# execution} other {# executions}} in the last 24 hr",values:{executions:y}}))),Object(b.jsx)(r.EuiHorizontalRule,{margin:"none"}),Object(b.jsx)(r.EuiPanel,{hasShadow:!1},Object(b.jsx)(r.EuiFlexGroup,{gutterSize:"none",direction:"row",responsive:!1},Object(b.jsx)(r.EuiFlexItem,null,Object(b.jsx)(r.EuiStat,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,titleSize:"m",descriptionElement:"strong",titleElement:"h5",title:Object(b.jsx)(r.EuiHealth,{"data-test-subj":`ruleStatus-${e.executionStatus.status}`,textSize:"m",color:j,style:{fontWeight:400}},v),description:n.i18n.translate("xpack.triggersActionsUI.sections.ruleDetails.rulesList.ruleLastExecutionDescription",{defaultMessage:"Last response"})})),Object(b.jsx)(r.EuiFlexItem,{grow:!1},Object(b.jsx)(r.EuiSpacer,{size:"xs"}),Object(b.jsx)(r.EuiText,{color:"subdued",size:"xs"},i()(e.executionStatus.lastExecutionDate).fromNow())))),Object(b.jsx)(r.EuiHorizontalRule,{margin:"none"}),Object(b.jsx)(r.EuiPanel,{hasShadow:!1},Object(b.jsx)(d.RulesListNotifyBadge,{snoozeSettings:e,loading:!e,disabled:!h,onRuleChanged:z,snoozeRule:S,unsnoozeRule:_,showTooltipInline:!0})))},h=Object(c.a)(p)},118:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({message:e,outcomeFilter:t,runId:s,ruleTypeIds:n})=>{const a=[];if(e){const t=e.replace(/([\)\(\<\>\}\{\"\:\\])/gm,"\\$&");a.push(`(message: "${t}" OR error.message: "${t}")`)}if(t&&t.length){const e=function(e){const t={failure:"event.outcome: failure",warning:"kibana.alerting.outcome: warning",success:"kibana.alerting.outcome:success OR (event.outcome: success AND NOT kibana.alerting.outcome:*)",unknown:"event.outcome: unknown"};return`${e.map((e=>t[e])).join(" OR ")}`}(t);e&&a.push(`(${e})`)}return s&&a.push(`kibana.alert.rule.execution.uuid: ${s}`),null!=n&&n.length&&a.push(`kibana.alert.rule.rule_type_id:(${n.join(" or ")})`),a}},120:function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var n=s(13),a=s.n(n),o=(s(1),s(121)),i=s(135),u=s(63),r=s(62),l=s(131),c=s(55),d=s(126),g=s(6);async function b({id:e,http:t}){await t.post(`${g.b}/rule/${encodeURIComponent(e)}/_mute_all`)}async function p({id:e,http:t}){await t.post(`${g.b}/rule/${encodeURIComponent(e)}/_unmute_all`)}const h=({rule_type_state:e,alerts:t,previous_started_at:s,...n})=>({...n,alertTypeState:e,alertInstances:t,previousStartedAt:s});var j=s(118);const f=({id:e,http:t,outcomeFilter:s,message:n,dateStart:a,dateEnd:o,ruleTypeIds:i})=>{const u=Object(j.a)({outcomeFilter:s,message:n,ruleTypeIds:i});return t.get(`${g.j}/rule/${e}/_execution_kpi`,{query:{filter:u.length?u.join(" and "):void 0,date_start:a,date_end:o}})},m=({id:e,http:t,outcomeFilter:s,message:n,dateStart:a,dateEnd:o,namespaces:i,ruleTypeIds:u})=>{const r=Object(j.a)({outcomeFilter:s,message:n,ruleTypeIds:u});return t.get(`${g.j}/_global_execution_kpi`,{query:{filter:r.length?r.join(" and "):void 0,date_start:a,date_end:o,namespaces:i?JSON.stringify(i):i}})},y={timestamp:"@timestamp"},O=({id:e,http:t,dateStart:s,dateEnd:n,runId:a,message:o,perPage:i=10,page:u=0,sort:r,namespace:l,withAuth:c=!1})=>{const d=(e=>e?e.map((e=>{const t=Object.keys(e)[0],s=e[Object.keys(e)[0]];return{[y[t]||t]:{...s}}})):[])(r),b=Object(j.a)({runId:a,message:o});return t.get(`${g.j}/rule/${e}/_action_error_log`,{query:{date_start:s,date_end:n,filter:b.length?b.join(" and "):void 0,per_page:i,page:u+1,sort:d.length?JSON.stringify(d):void 0,namespace:l,with_auth:c}})};var x=s(132),S=s(34),_=s(122),v=s(123),E=s(59),I=s(136),z=s(137),w=s(30),R=s(0);function k(e){return t=>{const{http:s}=Object(w.b)().services;return Object(R.jsx)(e,a()({},t,{muteRules:async e=>async function({ids:e,http:t}){await Promise.all(e.map((e=>b({http:t,id:e}))))}({http:s,ids:e.filter((e=>!L(e))).map((e=>e.id))}),unmuteRules:async e=>async function({ids:e,http:t}){await Promise.all(e.map((e=>p({id:e,http:t}))))}({http:s,ids:e.filter(L).map((e=>e.id))}),muteRule:async e=>{if(!L(e))return await b({http:s,id:e.id})},unmuteRule:async e=>{if(L(e))return await p({http:s,id:e.id})},muteAlertInstance:async(e,t)=>{if(!N(e,t))return Object(l.a)({http:s,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(N(e,t))return Object(x.a)({http:s,id:e.id,instanceId:t})},loadRule:async e=>Object(u.a)({http:s,ruleId:e}),loadRuleState:async e=>async function({http:e,ruleId:t}){return await e.get(`${g.j}/rule/${t}/state`).then((e=>e?h(e):{}))}({http:s,ruleId:e}),loadRuleSummary:async(e,t)=>Object(r.a)({http:s,ruleId:e,numberOfExecutions:t}),loadRuleTypes:async()=>Object(c.a)({http:s}),loadExecutionLogAggregations:async e=>Object(d.a)({...e,http:s}),loadGlobalExecutionLogAggregations:async e=>Object(d.b)({...e,http:s}),loadActionErrorLog:async e=>O({...e,http:s}),loadExecutionKPIAggregations:async e=>f({...e,http:s}),loadGlobalExecutionKPIAggregations:async e=>m({...e,http:s}),resolveRule:async e=>async function({http:e,ruleId:t}){const s=await e.get(`${g.j}/rule/${encodeURIComponent(t)}/_resolve`);return Object(S.a)(s)}({http:s,ruleId:e}),getHealth:async()=>Object(o.a)({http:s}),snoozeRule:async(e,t)=>await Object(_.b)({http:s,id:e.id,snoozeSchedule:t}),bulkSnoozeRules:async e=>await Object(_.a)({http:s,...e}),unsnoozeRule:async(e,t)=>await Object(v.b)({http:s,id:e.id,scheduleIds:t}),bulkUnsnoozeRules:async e=>await Object(v.a)({http:s,...e}),cloneRule:async e=>await Object(i.a)({http:s,ruleId:e}),bulkDeleteRules:async e=>await Object(E.a)({http:s,...e}),bulkEnableRules:async e=>await Object(I.a)({http:s,...e}),bulkDisableRules:async e=>await Object(z.a)({http:s,...e})}))}}function L(e){return!0===e.muteAll}function N(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},121:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(6);const a=({decryption_health:e,execution_health:t,read_health:s,...n})=>({decryptionHealth:e,executionHealth:t,readHealth:s,...n}),o=({is_sufficiently_secure:e,has_permanent_encryption_key:t,alerting_framework_health:s,...n})=>({isSufficientlySecure:e,hasPermanentEncryptionKey:t,alertingFrameworkHealth:s,...n});async function i({http:e}){const t=await e.get(`${n.b}/_health`),s=a(t.alerting_framework_health);return{...o(t),alertingFrameworkHealth:s}}},122:function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return i}));var n=s(6);function a({id:e,duration:t,rRule:s}){return{...e?{id:e}:{},duration:t,rRule:{...s,...s.until?{until:s.until.toISOString()}:{}}}}async function o({id:e,snoozeSchedule:t,http:s}){await s.post(`${n.j}/rule/${encodeURIComponent(e)}/_snooze`,{body:JSON.stringify({snooze_schedule:a(t)})})}function i({ids:e,filter:t,snoozeSchedule:s,http:o}){let i;try{i=JSON.stringify({ids:null!=e&&e.length?e:void 0,...t?{filter:JSON.stringify(t)}:{},operations:[{operation:"set",field:"snoozeSchedule",value:a(s)}]})}catch(e){throw new Error(`Unable to parse bulk snooze params: ${e}`)}return o.post(`${n.j}/rules/_bulk_edit`,{body:i})}},123:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));var n=s(6);async function a({id:e,http:t,scheduleIds:s}){await t.post(`${n.j}/rule/${encodeURIComponent(e)}/_unsnooze`,{body:JSON.stringify({schedule_ids:s})})}function o({ids:e,filter:t,scheduleIds:s,http:a}){let o;try{o=JSON.stringify({ids:null!=e&&e.length?e:void 0,...t?{filter:JSON.stringify(t)}:{},operations:[{operation:"delete",field:"snoozeSchedule",value:s}]})}catch(e){throw new Error(`Unable to parse bulk unsnooze params: ${e}`)}return a.post(`${n.j}/rules/_bulk_edit`,{body:o})}},126:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return u}));var n=s(6),a=s(118);const o=({data:e,...t})=>({data:e.map((e=>(e=>{const{duration_ms:t,total_search_duration_ms:s,es_search_duration_ms:n,schedule_delay_ms:a,...o}=e;return{execution_duration:e.duration_ms,total_search_duration:e.total_search_duration_ms,es_search_duration:e.es_search_duration_ms,schedule_delay:e.schedule_delay_ms,...o}})(e))),...t}),i=async({id:e,http:t,dateStart:s,dateEnd:i,outcomeFilter:u,ruleTypeIds:r,message:l,perPage:c=10,page:d=0,sort:g=[]})=>{const b=g,p=Object(a.a)({outcomeFilter:u,message:l,ruleTypeIds:r}),h=await t.get(`${n.j}/rule/${e}/_execution_log`,{query:{date_start:s,date_end:i,filter:p.length?p.join(" and "):void 0,per_page:c,page:d+1,sort:b.length?JSON.stringify(b):void 0}});return o(h)},u=async({http:e,dateStart:t,dateEnd:s,outcomeFilter:i,ruleTypeIds:u,message:r,perPage:l=10,page:c=0,sort:d=[],namespaces:g})=>{const b=d,p=Object(a.a)({outcomeFilter:i,message:r,ruleTypeIds:u}),h=await e.get(`${n.j}/_global_execution_logs`,{query:{date_start:t,date_end:s,filter:p.length?p.join(" and "):void 0,per_page:l,page:c+1,sort:b.length?JSON.stringify(b):void 0,namespaces:g?JSON.stringify(g):void 0}});return o(h)}},131:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(6);async function a({id:e,instanceId:t,http:s}){await s.post(`${n.b}/rule/${encodeURIComponent(e)}/alert/${encodeURIComponent(t)}/_mute`)}},132:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(6);async function a({id:e,instanceId:t,http:s}){await s.post(`${n.b}/rule/${encodeURIComponent(e)}/alert/${encodeURIComponent(t)}/_unmute`)}},135:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(6),a=s(34);async function o({http:e,ruleId:t}){const s=await e.post(`${n.j}/rule/${encodeURIComponent(t)}/_clone`);return Object(a.b)(s)}},136:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(6);const a=async({filter:e,ids:t,http:s})=>{try{const a=JSON.stringify({ids:null!=t&&t.length?t:void 0,...e?{filter:JSON.stringify(e)}:{}});return s.patch(`${n.j}/rules/_bulk_enable`,{body:a})}catch(e){throw new Error(`Unable to parse bulk enable params: ${e}`)}}},137:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(6);const a=async({filter:e,ids:t,http:s})=>{try{const a=JSON.stringify({ids:null!=t&&t.length?t:void 0,...e?{filter:JSON.stringify(e)}:{}});return s.patch(`${n.j}/rules/_bulk_disable`,{body:a})}catch(e){throw new Error(`Unable to parse bulk disable params: ${e}`)}}},145:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(1),a=s(5),o=s(53),i=s.n(o),u=s(30),r=s(126);const l=e=>{var t;return e.includes("now")&&(null===(t=i.a.parse(e))||void 0===t?void 0:t.format())||e},c=e=>"*"===e.id;function d(e){const{http:t}=Object(u.b)().services,s=Object(n.useCallback)((()=>c(e)?Object(r.b)({http:t,...e,dateStart:l(e.dateStart),...e.dateEnd?{dateEnd:l(e.dateEnd)}:{}}):Object(r.a)({http:t,...e,dateStart:l(e.dateStart),...e.dateEnd?{dateEnd:l(e.dateEnd)}:{}})),[e,t]),{data:o,error:i,isLoading:d,isFetching:g,refetch:b}=Object(a.useQuery)({queryKey:["loadRuleEventLog",e],queryFn:s,onError:e.onError,retry:0,refetchOnWindowFocus:!1}),p=Object(n.useMemo)((()=>i&&413===i.body.statusCode),[i]);return Object(n.useMemo)((()=>({data:o,hasExceedLogs:p,isLoading:d||g,loadEventLogs:b})),[o,p,g,d,b])}},91:function(e,t,s){"use strict";s.r(t),s.d(t,"RulesListNotifyBadge",(function(){return E})),s.d(t,"SNOOZE_SUCCESS_MESSAGE",(function(){return b})),s.d(t,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return p})),s.d(t,"SNOOZE_FAILED_MESSAGE",(function(){return h})),s.d(t,"default",(function(){return I}));var n=s(1),a=s(30),o=s(123),i=s(122),u=s(32),r=s.n(u),l=s(3),c=s(2),d=s(144),g=s(133);const b=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rules notification successfully snoozed"}),p=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rules notification successfully unsnoozed"}),h=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),j=c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"}),f=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.seconds",{defaultMessage:"{value, plural, one {# second} other {# seconds}}",values:{value:e}}),m=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.minutes",{defaultMessage:"{value, plural, one {# minute} other {# minutes}}",values:{value:e}}),y=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.hours",{defaultMessage:"{value, plural, one {# hour} other {# hours}}",values:{value:e}}),O=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.days",{defaultMessage:"{value, plural, one {# day} other {# days}}",values:{value:e}}),x=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.weeks",{defaultMessage:"{value, plural, one {# week} other {# weeks}}",values:{value:e}}),S=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.months",{defaultMessage:"{value, plural, one {# month} other {# months}}",values:{value:e}}),_=e=>c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.years",{defaultMessage:"{value, plural, one {# year} other {# years}}",values:{value:e}});var v=s(0);const E=({snoozeSettings:e,loading:t=!1,disabled:s=!1,onRuleChanged:o,snoozeRule:i,unsnoozeRule:u,showOnHover:E=!1,showTooltipInline:I=!1})=>{var z,w,R;const[k,L]=Object(n.useState)(!1),N=t||k,$=Boolean(s)||!e,[U,T]=Object(n.useState)(!1),A=Object(n.useCallback)((()=>T(!0)),[T]),M=Object(n.useCallback)((()=>T(!1)),[T]),C=null==e?void 0:e.isSnoozedUntil,B=null!==(z=null==e?void 0:e.muteAll)&&void 0!==z&&z,F=Object(n.useMemo)((()=>{return!!e&&(t=e,Boolean(t.isSnoozedUntil&&new Date(t.isSnoozedUntil).getTime()>Date.now()||t.muteAll));var t}),[e]),P=Object(n.useMemo)((()=>e?(e=>{if(!e.snoozeSchedule)return null;const t=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===t.length?null:t.reduce(((e,t)=>r()(t.rRule.dtstart).isBefore(r()(e.rRule.dtstart))?t:e))})(e):null),[e]),D=Object(n.useMemo)((()=>C?function(e){const t=r.a.duration(r()(e).diff(r()())),s={years:_(t.years()),months:S(t.months()),weeks:x(t.weeks()),days:O(t.days()),hours:y(t.hours()),minutes:m(t.minutes()),seconds:f(t.seconds())},n=Object.entries(s).filter((([e,t])=>""!==t&&t!==`0 ${e}`)).map((([e,t])=>`${t}`)).join(", "),a=n.lastIndexOf(", ");return-1===a?n:n.slice(0,a)+" and"+n.slice(a+1)}(C):void 0),[C]),{notifications:{toasts:J}}=Object(a.b)().services,H=Object(n.useMemo)((()=>!F&&Boolean(P)),[P,F]),G=Object(n.useMemo)((()=>C?Object(d.a)(r()(C)):P?Object(d.a)(r()(P.rRule.dtstart)):""),[C,P]),q=Object(n.useMemo)((()=>B?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):H?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(d.b)(r()(P.rRule.dtstart))}}):F&&D?Object(v.jsx)(l.EuiToolTip,{title:c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.timeRemaining",{defaultMessage:"Time remaining"}),content:Object(v.jsx)(l.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(v.jsx)(l.EuiFlexItem,{grow:!1},Object(v.jsx)("span",null,D)),Object(v.jsx)(l.EuiSpacer,null),Object(v.jsx)(l.EuiFlexItem,{grow:!1},Object(v.jsx)("span",null,null==C?void 0:C.toString())))},Object(v.jsx)(l.EuiTextAlign,null,c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:r()(C).fromNow(!0)}}))):I?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[B,H,F,I,P,D,C]),K=Object(n.useMemo)((()=>Object(v.jsx)(l.EuiButton,{size:"s",isLoading:N,disabled:N||$,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":j,minWidth:85,iconType:"bellSlash",color:"accent",onClick:A},Object(v.jsx)(l.EuiText,{size:"xs"},G))),[G,N,$,A]),W=Object(n.useMemo)((()=>Object(v.jsx)(l.EuiButton,{size:"s",isLoading:N,disabled:N||$,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":j,onClick:A},Object(v.jsx)(l.EuiText,{size:"xs"},G))),[G,N,$,A]),Z=Object(n.useMemo)((()=>{const e=E?"ruleSidebarItem__action":"";return Object(v.jsx)(l.EuiButtonIcon,{size:"s",isLoading:N,disabled:N||$,display:N?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":j,className:U||N?"":e,iconType:"bell",onClick:A})}),[U,N,$,E,A]),Q=Object(n.useMemo)((()=>Object(v.jsx)(l.EuiButtonIcon,{size:"s",isLoading:N,disabled:N||$,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":j,iconType:"bellSlash",color:"accent",onClick:A})),[N,$,A]),Y=Object(n.useMemo)((()=>H?W:B?Q:F?K:Z),[F,H,B,W,K,Q,Z]),V=Object(n.useMemo)((()=>{const e="string"==typeof s?s:U||I?void 0:D;return Object(v.jsx)(l.EuiToolTip,{title:e?c.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.timeRemaining",{defaultMessage:"Time remaining"}):void 0,content:e},Y)}),[s,U,Y,I,D]),X=Object(n.useCallback)((async e=>{try{L(!0),M(),await i(e),await o(),J.addSuccess(b)}catch(e){J.addDanger(h)}finally{L(!1)}}),[L,i,o,J,M]),ee=Object(n.useCallback)((async e=>{try{L(!0),M(),await u(e),await o(),J.addSuccess(p)}catch(e){J.addDanger(h)}finally{L(!1)}}),[L,u,o,J,M]),te=Object(v.jsx)(l.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:U&&!$,closePopover:M,button:V,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(v.jsx)(g.a,{snoozeRule:X,unsnoozeRule:ee,interval:Object(g.b)(C),showCancel:F,scheduledSnoozes:null!==(w=null==e?void 0:e.snoozeSchedule)&&void 0!==w?w:[],activeSnoozes:null!==(R=null==e?void 0:e.activeSnoozes)&&void 0!==R?R:[],inPopover:!0}));return I?Object(v.jsx)(l.EuiFlexGroup,{alignItems:"center"},Object(v.jsx)(l.EuiFlexItem,{grow:!1},te),Object(v.jsx)(l.EuiFlexItem,null,Object(v.jsx)(l.EuiText,{color:"subdued",size:"xs"},q))):te},I=({ruleId:e,snoozeSettings:t,loading:s,disabled:u,showTooltipInline:r,showOnHover:l,onRuleChanged:c})=>{const{http:d}=Object(a.b)().services,g=Object(n.useCallback)((t=>e?Object(i.b)({http:d,id:e,snoozeSchedule:t}):Promise.resolve()),[d,e]),b=Object(n.useCallback)((t=>e?Object(o.b)({http:d,id:e,scheduleIds:t}):Promise.resolve()),[d,e]);return Object(v.jsx)(E,{snoozeSettings:t,loading:s,disabled:u,onRuleChanged:c,snoozeRule:g,unsnoozeRule:b,showTooltipInline:r,showOnHover:l})}}}]);