/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[23,48],{118:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({message:e,outcomeFilter:t,runId:s,ruleTypeIds:n})=>{const a=[];if(e){const t=e.replace(/([\)\(\<\>\}\{\"\:\\])/gm,"\\$&");a.push(`(message: "${t}" OR error.message: "${t}")`)}if(t&&t.length){const e=function(e){const t={failure:"event.outcome: failure",warning:"kibana.alerting.outcome: warning",success:"kibana.alerting.outcome:success OR (event.outcome: success AND NOT kibana.alerting.outcome:*)",unknown:"event.outcome: unknown"};return`${e.map((e=>t[e])).join(" OR ")}`}(t);e&&a.push(`(${e})`)}return s&&a.push(`kibana.alert.rule.execution.uuid: ${s}`),null!=n&&n.length&&a.push(`kibana.alert.rule.rule_type_id:(${n.join(" or ")})`),a}},119:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"i",(function(){return d})),s.d(t,"k",(function(){return g})),s.d(t,"g",(function(){return p})),s.d(t,"L",(function(){return m})),s.d(t,"K",(function(){return b})),s.d(t,"J",(function(){return L})),s.d(t,"M",(function(){return T})),s.d(t,"t",(function(){return M})),s.d(t,"v",(function(){return w})),s.d(t,"x",(function(){return U})),s.d(t,"s",(function(){return C})),s.d(t,"u",(function(){return _})),s.d(t,"e",(function(){return F})),s.d(t,"m",(function(){return R})),s.d(t,"n",(function(){return P})),s.d(t,"r",(function(){return N})),s.d(t,"o",(function(){return D})),s.d(t,"p",(function(){return z})),s.d(t,"q",(function(){return H})),s.d(t,"j",(function(){return K})),s.d(t,"l",(function(){return $})),s.d(t,"h",(function(){return W})),s.d(t,"w",(function(){return B})),s.d(t,"f",(function(){return G})),s.d(t,"c",(function(){return J})),s.d(t,"d",(function(){return q})),s.d(t,"z",(function(){return Y})),s.d(t,"y",(function(){return Q})),s.d(t,"G",(function(){return V})),s.d(t,"I",(function(){return X})),s.d(t,"H",(function(){return Z})),s.d(t,"A",(function(){return ee})),s.d(t,"C",(function(){return te})),s.d(t,"B",(function(){return se})),s.d(t,"D",(function(){return ne})),s.d(t,"F",(function(){return ae})),s.d(t,"E",(function(){return ie}));var n=s(2);const a=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusOk",{defaultMessage:"Ok"}),i=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusActive",{defaultMessage:"Active"}),r=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusError",{defaultMessage:"Error"}),o=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusLicenseError",{defaultMessage:"License Error"}),c=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusPending",{defaultMessage:"Pending"}),l=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusUnknown",{defaultMessage:"Unknown"}),u=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusWarning",{defaultMessage:"Warning"}),d=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeSucceeded",{defaultMessage:"Succeeded"}),g=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeWarning",{defaultMessage:"Warning"}),p=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFailed",{defaultMessage:"Failed"}),m={ok:a,active:i,error:r,pending:c,unknown:l,warning:u},b={succeeded:d,warning:g,failed:p},f=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),x=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),h=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),j=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),k=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonLicense",{defaultMessage:"Cannot run rule"}),O=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonTimeout",{defaultMessage:"Rule execution cancelled due to timeout."}),S=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDisabled",{defaultMessage:"Rule failed to execute because rule ran after it was disabled."}),A=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonValidate",{defaultMessage:"An error occurred when validating the rule parameters."}),E=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxExecutableActions",{defaultMessage:"Action limit exceeded"}),v=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxQueuedActions",{defaultMessage:"Queued action limit exceeded."}),y=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxAlerts",{defaultMessage:"Alert limit exceeded"}),I=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonUnknown",{defaultMessage:"Unknown reason"}),L={read:x,decrypt:h,execute:j,unknown:f,license:k,timeout:O,disabled:S,validate:A},T={maxExecutableActions:E,maxAlerts:y,maxQueuedActions:v,unknown:I},M=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectAllAriaLabel",{defaultMessage:"Toggle select all rules"}),w=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectShowBulkActionsAriaLabel",{defaultMessage:"Show bulk actions"}),U=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalRulesLabel",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"{formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),C=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectedRulesButton",{values:{formattedSelectedRules:e,selectedRules:t},defaultMessage:"Selected {formattedSelectedRules} {selectedRules, plural, =1 {rule} other {rules}}"}),_=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectAllRulesButton",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"Select all {formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),F=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearAllSelectionButton",{defaultMessage:"Clear selection"}),R=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",{defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:e}}),P=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",{defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:e}}),N=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",{defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:e}}),D=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",{defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:e}}),z=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",{defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:e}}),H=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",{defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:e}}),K=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeSucceededDescription",{defaultMessage:"Succeeded: {total}",values:{total:e}}),$=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeWarningDescription",{defaultMessage:"Warning: {total}",values:{total:e}}),W=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeFailedDescription",{defaultMessage:"Failed: {total}",values:{total:e}}),B=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),G=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),J=n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),q=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearFilterLink",{values:{numberOfFilters:e},defaultMessage:"Clear {numberOfFilters, plural, =1 {filter} other {filters}}"}),Y=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You won't be able to recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),Q=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),V=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),X=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Enabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),Z=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Disabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),ee=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),te=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to enable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),se=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to disable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),ne=(e,t,s,a)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Deleted {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:a}}),ae=(e,t,s,a)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Enabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:a}}),ie=(e,t,s,a)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Disabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:a}})},121:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(6);const a=({decryption_health:e,execution_health:t,read_health:s,...n})=>({decryptionHealth:e,executionHealth:t,readHealth:s,...n}),i=({is_sufficiently_secure:e,has_permanent_encryption_key:t,alerting_framework_health:s,...n})=>({isSufficientlySecure:e,hasPermanentEncryptionKey:t,alertingFrameworkHealth:s,...n});async function r({http:e}){const t=await e.get(`${n.b}/_health`),s=a(t.alerting_framework_health);return{...i(t),alertingFrameworkHealth:s}}},124:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s(1),a=s(0);const i={loadingHealthCheck:!1,setLoadingHealthCheck:e=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}},r=Object(n.createContext)(i),o=({children:e})=>{const[t,s]=Object(n.useState)(!1),i=Object(n.useCallback)((e=>{s(e)}),[]),o=Object(n.useMemo)((()=>({loadingHealthCheck:t,setLoadingHealthCheck:i})),[t,i]);return Object(a.jsx)(r.Provider,{value:o},e)},c=()=>{const e=Object(n.useContext)(r);if(!e)throw new Error("HealthContext has not been set.");return e}},139:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s(1),a=s.n(n),i=s(128),r=s(130),o=s(26),c=s(3),l=s(2),u=(s(156),s(124)),d=s(30),g=s(52),p=s(27),m=s(121),b=s(0);const f=({children:e,waitForCheck:t,inFlyout:s=!1})=>{const{http:n,docLinks:o}=Object(d.b)().services,{setLoadingHealthCheck:l}=Object(u.b)(),[f,O]=a.a.useState(i.none);a.a.useEffect((()=>{!async function(){l(!0);const e=await async function({http:e}){const t=await e.get(`${p.a}/_health`);return t?{isRulesAvailable:t.isAlertsAvailable}:t}({http:n}),t={...e,isSufficientlySecure:!1,hasPermanentEncryptionKey:!1};if(t.isRulesAvailable){const e=await async function(e){try{return Object(i.some)(await Object(m.a)({http:e}))}catch(e){return i.none}}(n);Object(i.isSome)(e)?(t.isSufficientlySecure=e.value.isSufficientlySecure,t.hasPermanentEncryptionKey=e.value.hasPermanentEncryptionKey):(t.isSufficientlySecure=!0,t.hasPermanentEncryptionKey=!0),O(Object(i.some)(t))}l(!1)}()}),[n,l]);const S=s?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(r.pipe)(f,Object(i.fold)((()=>t?Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(c.EuiSpacer,{size:"m"}),Object(b.jsx)(g.a,null)):Object(b.jsx)(a.a.Fragment,null,e)),(t=>null!=t&&t.isSufficientlySecure&&null!=t&&t.hasPermanentEncryptionKey?Object(b.jsx)(a.a.Fragment,null,e):t.isRulesAvailable?t.isSufficientlySecure||t.hasPermanentEncryptionKey?t.hasPermanentEncryptionKey?Object(b.jsx)(h,{docLinks:o,className:S}):Object(b.jsx)(x,{docLinks:o,className:S}):Object(b.jsx)(k,{docLinks:o,className:S}):Object(b.jsx)(j,{docLinks:o,className:S}))))},x=({docLinks:e,className:t})=>Object(b.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(b.jsx)("h2",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(b.jsx)("div",{className:`${t}__body`},Object(b.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"You must configure an encryption key to use Alerting. "}),Object(b.jsx)(c.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn more."}))))}),h=({docLinks:e,className:t})=>Object(b.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(b.jsx)("h2",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorTitle",defaultMessage:"Additional setup required"})),body:Object(b.jsx)("div",{className:`${t}__body`},Object(b.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledError",{defaultMessage:"You must enable API keys to use Alerting. "}),Object(b.jsx)(c.EuiLink,{href:e.links.security.elasticsearchEnableApiKeys,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorAction",{defaultMessage:"Learn more."}))))}),j=({docLinks:e,className:t})=>Object(b.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"alertsNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(b.jsx)("h2",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.alertsErrorTitle",defaultMessage:"You must enable Alerting and Actions"})),body:Object(b.jsx)("div",{className:`${t}__body`},Object(b.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsError",{defaultMessage:"To create a rule, you must enable the alerting and actions plugins. "}),Object(b.jsx)(c.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsErrorAction",{defaultMessage:"Learn how."}))))}),k=({docLinks:e,className:t})=>Object(b.jsx)(c.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(b.jsx)("h2",null,Object(b.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(b.jsx)("div",{className:`${t}__body`},Object(b.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionError",{defaultMessage:"You must enable API keys and configure an encryption key to use Alerting. "}),Object(b.jsx)(c.EuiLink,{href:e.links.alerting.setupPrerequisites,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorAction",{defaultMessage:"Learn more."}))))})},146:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(2),a=s(6);const i=(e,t=!1)=>{switch(e){case"logs":return{text:n.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"}),...t?{href:`${a.v}`}:{}};case"connectors":return{text:n.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),...t?{href:`${a.s}`}:{}};case"rules":return{text:n.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${a.w}`}:{}};default:return{text:n.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${a.t}`}:{}}}}},147:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(2);const a=e=>{let t;switch(e){case"logs":t=n.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"});break;case"connectors":t=n.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":t=n.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;default:t=n.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"})}return t}},156:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(157);case"v8light":return s(159)}},157:function(e,t,s){var n=s(50),a=s(158);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},158:function(e,t,s){(t=s(51)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},159:function(e,t,s){var n=s(50),a=s(160);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},160:function(e,t,s){(t=s(51)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},179:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s(13),a=s.n(n),i=(s(1),s(22)),r=s(6),o=s(118);const c=({http:e,outcomeFilter:t,message:s,dateStart:n,dateEnd:a,namespaces:i})=>{const c=Object(o.a)({outcomeFilter:t,message:s});return e.post(`${r.i}/_global_connector_execution_kpi`,{body:JSON.stringify({filter:c.length?c.join(" and "):void 0,date_start:n,date_end:a,namespaces:i?JSON.stringify(i):i})})};var l=s(23);const u=async({http:e,dateStart:t,dateEnd:s,outcomeFilter:n,message:a,perPage:i=10,page:r=0,sort:c=[],namespaces:u})=>{const d=c,g=Object(o.a)({outcomeFilter:n,message:a});return(({data:e,...t})=>({data:e.map((e=>(e=>{const{duration_ms:t,schedule_delay_ms:s,...n}=e;return{execution_duration:e.duration_ms,schedule_delay:e.schedule_delay_ms,...n}})(e))),...t}))(await e.post(`${l.INTERNAL_BASE_ACTION_API_PATH}/_global_connector_execution_logs`,{body:JSON.stringify({date_start:t,date_end:s,filter:g.length?g.join(" and "):void 0,per_page:i,page:r+1,sort:d.length?JSON.stringify(d):void 0,namespaces:u?JSON.stringify(u):void 0})}))};var d=s(30),g=s(0);function p(e){return t=>{const{http:s}=Object(d.b)().services;return Object(g.jsx)(e,a()({},t,{loadActionTypes:async()=>Object(i.d)({http:s}),loadGlobalConnectorExecutionLogAggregations:async e=>u({...e,http:s}),loadGlobalConnectorExecutionKPIAggregations:async e=>c({...e,http:s})}))}}},325:function(e,t,s){"use strict";s.r(t),s.d(t,"ActionsConnectorsHome",(function(){return z})),s.d(t,"default",(function(){return z}));var n=s(1),a=s.n(n),i=s(163),r=s(26),o=s(2),c=s(3),l=s(6),u=s(146),d=s(147),g=s(4),p=s(124),m=s(139),b=s(30),f=s(53),x=s.n(f),h=s(52),j=s(179),k=s(212),O=s(33),S=s(162),A=s(0);const E=e=>{var t;return e.includes("now")&&(null===(t=x.a.parse(e))||void 0===t?void 0:t.format())||e},v=o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogListKpi.apiError",{defaultMessage:"Failed to fetch event log KPI."}),y=o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogListKpi.responseTooltip",{defaultMessage:"The responses for up to 10,000 most recent actions triggered."}),I=Object(j.a)((e=>{var t,s,i,r;const{dateStart:o,dateEnd:l,outcomeFilter:u,message:d,refreshToken:g,namespaces:p,loadGlobalConnectorExecutionKPIAggregations:m}=e,{notifications:{toasts:f}}=Object(b.b)().services,x=Object(n.useRef)(!1),h=Object(O.a)("ruleUseExecutionStatus"),[j,k]=Object(n.useState)(!1),[I,L]=Object(n.useState)(),T=Object(n.useMemo)((()=>m),[m]),M=async()=>{k(!0);try{const e=await T({dateStart:E(o),dateEnd:E(l),outcomeFilter:u,message:d,...p?{namespaces:p}:{}});L(e)}catch(s){var e,t;f.addDanger({title:v,text:null!==(e=null===(t=s.body)||void 0===t?void 0:t.message)&&void 0!==e?e:s})}k(!1)};Object(n.useEffect)((()=>{M()}),[o,l,u,d,p]),Object(n.useEffect)((()=>{x.current&&M(),x.current=!0}),[g]);const w=Object(n.useMemo)((()=>j||!I),[j,I]),U=e=>Object(A.jsx)(a.a.Fragment,null,e,Object(A.jsx)(c.EuiSpacer,{size:"s"}));return Object(A.jsx)(c.EuiFlexGroup,null,Object(A.jsx)(c.EuiFlexItem,{grow:4},Object(A.jsx)(S.g,{title:"Responses",tooltip:y},Object(A.jsx)(c.EuiFlexGroup,null,Object(A.jsx)(c.EuiFlexItem,null,Object(A.jsx)(c.EuiStat,{"data-test-subj":"connectorEventLogKpi-successOutcome",description:U(Object(A.jsx)(S.d,{status:"success",useExecutionStatus:h})),titleSize:"s",title:null!==(t=null==I?void 0:I.success)&&void 0!==t?t:0,isLoading:w})),Object(A.jsx)(c.EuiFlexItem,null,Object(A.jsx)(c.EuiStat,{"data-test-subj":"connectorEventLogKpi-warningOutcome",description:U(Object(A.jsx)(S.d,{status:"warning",useExecutionStatus:h})),titleSize:"s",title:null!==(s=null==I?void 0:I.warning)&&void 0!==s?s:0,isLoading:w})),Object(A.jsx)(c.EuiFlexItem,null,Object(A.jsx)(c.EuiStat,{"data-test-subj":"connectorEventLogKpi-failureOutcome",description:U(Object(A.jsx)(S.d,{status:"failure",useExecutionStatus:h})),titleSize:"s",title:null!==(i=null==I?void 0:I.failure)&&void 0!==i?i:0,isLoading:w})),Object(A.jsx)(c.EuiFlexItem,null,Object(A.jsx)(c.EuiStat,{"data-test-subj":"connectorEventLogKpi-unknownOutcome",description:U(Object(A.jsx)(S.d,{status:"unknown",useExecutionStatus:h})),titleSize:"s",title:null!==(r=null==I?void 0:I.unknown)&&void 0!==r?r:0,isLoading:w}))))))}));var L=s(225);const T=({children:e})=>Object(A.jsx)(a.a.Fragment,null,e),M=e=>{var t;return e.includes("now")&&(null===(t=x.a.parse(e))||void 0===t?void 0:t.format())||e},w=o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.apiError",{defaultMessage:"Failed to fetch execution history"}),U=o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.searchPlaceholder",{defaultMessage:"Search event log message"}),C="xpack.triggersActionsUI.connectorEventLogList.initialColumns",_=o.i18n.translate("xpack.triggersActionsUI.connectorEventLogList.showAllSpacesToggle",{defaultMessage:"Show connectors from all spaces"}),F={iconOnly:!0,fill:!1},R=1e3,P=e=>{const{localStorageKey:t=C,refreshToken:s,loadGlobalConnectorExecutionLogAggregations:i,initialPageSize:r=10,hasConnectorNames:u=!1,hasAllSpaceSwitch:d=!1}=e,{uiSettings:g,notifications:p}=Object(b.b)().services,[m,f]=Object(n.useState)(""),[x,j]=Object(n.useState)(""),[O,E]=Object(n.useState)(s),[v,y]=Object(n.useState)(!1),[T,P]=Object(n.useState)(),[N,D]=Object(n.useState)((()=>(e=>{const t=e.filter((e=>!l.c.includes(e)));return[...l.c,...t]})(l.g))),[z,H]=Object(n.useState)([]),[K,$]=Object(n.useState)([]),[W,B]=Object(n.useState)(0),[G,J]=Object(n.useState)({pageIndex:0,pageSize:r,totalItemCount:0}),[q,Y]=Object(n.useState)(!1),[Q,V]=Object(n.useState)("now-24h"),[X,Z]=Object(n.useState)("now"),[ee]=Object(n.useState)((()=>null==g?void 0:g.get("dateFormat"))),[te]=Object(n.useState)((()=>{var e;return(null==g||null===(e=g.get("timepicker:quickRanges"))||void 0===e?void 0:e.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s}))))||[]})),{onShowAllSpacesChange:se,canAccessMultipleSpaces:ne,namespaces:ae}=Object(L.a)({setShowFromAllSpaces:y,showFromAllSpaces:v,visibleColumns:N,setVisibleColumns:D}),ie=Object(n.useRef)(!1),re=Object(n.useMemo)((()=>{const{pageIndex:e,pageSize:t}=G;return(e+1)*t>=R}),[G]),oe=Object(n.useMemo)((()=>z.map((({id:e,direction:t})=>({[e]:{order:t}})))),[z]),ce=async()=>{if(i){Y(!0);try{const e=await i({sort:oe,outcomeFilter:K,message:m,dateStart:M(Q),dateEnd:M(X),page:G.pageIndex,perPage:G.pageSize,namespaces:ae});P(e.data),J({...G,totalItemCount:Math.min(e.total,R)}),B(e.total)}catch(s){var e,t;p.toasts.addDanger({title:w,text:null!==(e=null===(t=s.body)||void 0===t?void 0:t.message)&&void 0!==e?e:s})}Y(!1)}},le=Object(n.useCallback)((e=>{J((t=>({...t,pageIndex:0,pageSize:e})))}),[J]),ue=Object(n.useCallback)((e=>{J((t=>({...t,pageIndex:e})))}),[J]),de=Object(n.useCallback)((({start:e,end:t,isInvalid:s})=>{s||(V(e),Z(t))}),[V,Z]),ge=Object(n.useCallback)((e=>{J((e=>({...e,pageIndex:0}))),$(e)}),[J,$]),pe=Object(n.useCallback)((e=>{""===e.target.value&&f(""),j(e.target.value)}),[f,j]),me=Object(n.useCallback)((e=>{"Enter"===e.key&&f(x)}),[x,f]),be=Object(n.useMemo)((()=>[{id:"connector_id",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.connectorId",{defaultMessage:"Connector Id"}),isSortable:Object(S.h)("connector_id")},{id:"id",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.id",{defaultMessage:"Execution Id"}),isSortable:Object(S.h)("id")},{id:"timestamp",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.timestamp",{defaultMessage:"Timestamp"}),isSortable:Object(S.h)("timestamp"),isResizable:!1,actions:{showHide:!1},initialWidth:250},{id:"status",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.response",{defaultMessage:"Response"}),actions:{showHide:!1,showSortAsc:!1,showSortDesc:!1,additional:[{iconType:"annotation",label:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.showOnlyFailures",{defaultMessage:"Show only failures"}),onClick:()=>ge(["failure"]),size:"xs"},{iconType:"annotation",label:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.showAll",{defaultMessage:"Show all"}),onClick:()=>ge([]),size:"xs"}]},isSortable:Object(S.h)("status"),isResizable:!1,initialWidth:150},...u?[{id:"connector_name",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.connectorName",{defaultMessage:"Connector"}),isSortable:Object(S.h)("connector_name"),actions:{showSortAsc:!1,showSortDesc:!1,showHide:!1}}]:[],{id:"source",actions:{showSortAsc:!1,showSortDesc:!1},displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.source",{defaultMessage:"Source"}),isSortable:Object(S.h)("source"),cellActions:[]},{id:"message",actions:{showSortAsc:!1,showSortDesc:!1},displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.message",{defaultMessage:"Message"}),isSortable:Object(S.h)("message"),cellActions:[]},{id:"execution_duration",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.duration",{defaultMessage:"Duration"}),isSortable:Object(S.h)("execution_duration"),isResizable:!1,actions:{showHide:!1},initialWidth:100},{id:"schedule_delay",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.scheduleDelay",{defaultMessage:"Schedule delay"}),isSortable:Object(S.h)("schedule_delay")},{id:"timed_out",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.timedOut",{defaultMessage:"Timed out"}),isSortable:Object(S.h)("timed_out")},...v?[{id:"space_ids",displayAsText:o.i18n.translate("xpack.triggersActionsUI.sections.connectorEventLogList.eventLogColumn.spaceIds",{defaultMessage:"Space"}),isSortable:Object(S.h)("space_ids"),actions:{showSortAsc:!1,showSortDesc:!1,showHide:!1}}]:[]]),[ge,u,v]);return Object(n.useEffect)((()=>{ce()}),[z,Q,X,K,G.pageIndex,G.pageSize,m,v]),Object(n.useEffect)((()=>{ie.current&&ce(),ie.current=!0}),[s]),Object(n.useEffect)((()=>{localStorage.setItem(t,JSON.stringify(N))}),[t,N]),Object(n.useEffect)((()=>{E(s)}),[s]),Object(A.jsx)(c.EuiFlexGroup,{gutterSize:"none",direction:"column"},Object(A.jsx)(c.EuiFlexItem,{grow:!1},Object(A.jsx)(c.EuiFlexGroup,{alignItems:"center"},Object(A.jsx)(c.EuiFlexItem,{grow:!1},Object(A.jsx)(c.EuiFieldSearch,{fullWidth:!0,isClearable:!0,value:x,onChange:pe,onKeyUp:me,placeholder:U})),Object(A.jsx)(c.EuiFlexItem,{grow:!1},Object(A.jsx)(S.e,{selectedOptions:K,onChange:ge})),Object(A.jsx)(c.EuiFlexItem,{grow:!1},Object(A.jsx)(c.EuiSuperDatePicker,{"data-test-subj":"connectorEventLogListDatePicker",width:"auto",isLoading:q,start:Q,end:X,onTimeChange:de,onRefresh:()=>{E(Date.now()),ce()},dateFormat:ee,commonlyUsedRanges:te,updateButtonProps:F})),d&&ne&&Object(A.jsx)(c.EuiFlexItem,{"data-test-subj":"showAllSpacesSwitch"},Object(A.jsx)(c.EuiSwitch,{label:_,checked:v,onChange:se}))),Object(A.jsx)(c.EuiSpacer,null)),Object(A.jsx)(c.EuiFlexItem,{grow:!1},Object(A.jsx)(I,{"data-test-subj":"connectorEventLogListKpi",dateStart:Q,dateEnd:X,outcomeFilter:K,message:m,refreshToken:O,namespaces:ae}),Object(A.jsx)(c.EuiSpacer,null)),Object(A.jsx)(c.EuiFlexItem,null,T?Object(A.jsx)(a.a.Fragment,null,q&&Object(A.jsx)(c.EuiProgress,{size:"xs",color:"accent","data-test-subj":"connectorEventLogListProgressBar"}),Object(A.jsx)(S.b,{columns:be,logs:T,pagination:G,sortingColumns:z,visibleColumns:N,dateFormat:ee,onChangeItemsPerPage:le,onChangePage:ue,setVisibleColumns:D,setSortingColumns:H})):Object(A.jsx)(h.a,null),re&&Object(A.jsx)(k.a,{documentSize:W,visibleDocumentSize:R,backToTopAnchor:"logs"})))},N=Object(j.a)((e=>{const{spaces:t}=Object(b.b)().services,s=Object(n.useCallback)(t?t.ui.components.getSpacesContextProvider:T,[t]);return Object(A.jsx)(s,{feature:"triggersActions"},Object(A.jsx)(P,e))})),D=Object(n.lazy)((()=>Promise.all([s.e(10),s.e(9),s.e(26)]).then(s.bind(null,340)))),z=({match:{params:{section:e}},history:t})=>{const{chrome:s,setBreadcrumbs:f,docLinks:x}=Object(b.b)().services,h=[];h.push({id:"connectors",name:Object(A.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.connectors.home.connectorsTabTitle",defaultMessage:"Connectors"})}),h.push({id:"logs",name:Object(A.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.connectors.home.logsTabTitle",defaultMessage:"Logs"})}),Object(n.useEffect)((()=>{f([Object(u.a)(e||"connectors")]),s.docTitle.change(Object(d.a)(e||"connectors"))}),[e,s,f]);const j=Object(n.useCallback)((()=>Object(A.jsx)(c.EuiPageTemplate.Section,{grow:!1,paddingSize:"none"},Object(g.a)(N,"xl")({refreshToken:0,initialPageSize:50,hasConnectorNames:!0,hasAllSpaceSwitch:!0}))),[]);return Object(A.jsx)(a.a.Fragment,null,Object(A.jsx)(c.EuiPageHeader,{bottomBorder:!0,paddingSize:"none",pageTitle:o.i18n.translate("xpack.triggersActionsUI.connectors.home.appTitle",{defaultMessage:"Connectors"}),description:o.i18n.translate("xpack.triggersActionsUI.connectors.home.description",{defaultMessage:"Connect third-party software with your alerting data."}),rightSideItems:[Object(A.jsx)(c.EuiButtonEmpty,{"data-test-subj":"documentationButton",key:"documentation-button",target:"_blank",href:x.links.alerting.actionTypes,iconType:"help"},Object(A.jsx)(r.FormattedMessage,{id:"xpack.triggersActionsUI.connectors.home.documentationButtonLabel",defaultMessage:"Documentation"}))],tabs:h.map((s=>({label:s.name,onClick:()=>{return e=s.id,void t.push(`/${e}`);var e},isSelected:s.id===e,key:s.id,"data-test-subj":`${s.id}Tab`})))}),Object(A.jsx)(c.EuiSpacer,{size:"l"}),Object(A.jsx)(p.a,null,Object(A.jsx)(m.a,{waitForCheck:!0},Object(A.jsx)(i.c,null,Object(A.jsx)(i.a,{exact:!0,path:l.v,component:j}),Object(A.jsx)(i.a,{exact:!0,path:l.s,component:Object(g.a)(D,"xl")})))))}}}]);