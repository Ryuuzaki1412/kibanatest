/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,a=t[0],o=t[1],u=0,l=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(s&&s(t);l.length;)l.shift()()}var n={},r={2:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=a);var o,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+"alerting.chunk."+e+".js"}(e);var s=new Error;o=function(t){u.onerror=u.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,n[1](s)}r[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:u})}),12e4);u.onerror=u.onload=o,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var a=window.alerting_bundle_jsonpfunction=window.alerting_bundle_jsonpfunction||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var s=o;i(i.s=8)}([function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){"use strict";n.r(t),n.d(t,"RuleExecutionStatusValues",(function(){return r})),n.d(t,"RuleLastRunOutcomeValues",(function(){return i})),n.d(t,"RuleLastRunOutcomeOrderMap",(function(){return a})),n.d(t,"RuleExecutionStatusErrorReasons",(function(){return o})),n.d(t,"RuleExecutionStatusWarningReasons",(function(){return u})),n.d(t,"HealthStatus",(function(){return s})),n.d(t,"MIN_LOOK_BACK_WINDOW",(function(){return l})),n.d(t,"MAX_LOOK_BACK_WINDOW",(function(){return c})),n.d(t,"MIN_STATUS_CHANGE_THRESHOLD",(function(){return d})),n.d(t,"MAX_STATUS_CHANGE_THRESHOLD",(function(){return _})),n.d(t,"MIN_QUERY_DELAY",(function(){return p})),n.d(t,"MAX_QUERY_DELAY",(function(){return f})),n.d(t,"RULES_SETTINGS_FEATURE_ID",(function(){return g})),n.d(t,"ALL_FLAPPING_SETTINGS_SUB_FEATURE_ID",(function(){return m})),n.d(t,"READ_FLAPPING_SETTINGS_SUB_FEATURE_ID",(function(){return y})),n.d(t,"ALL_QUERY_DELAY_SETTINGS_SUB_FEATURE_ID",(function(){return E})),n.d(t,"READ_QUERY_DELAY_SETTINGS_SUB_FEATURE_ID",(function(){return A})),n.d(t,"API_PRIVILEGES",(function(){return v})),n.d(t,"RULES_SETTINGS_SAVED_OBJECT_TYPE",(function(){return h})),n.d(t,"RULES_SETTINGS_FLAPPING_SAVED_OBJECT_ID",(function(){return T})),n.d(t,"RULES_SETTINGS_QUERY_DELAY_SAVED_OBJECT_ID",(function(){return b})),n.d(t,"DEFAULT_LOOK_BACK_WINDOW",(function(){return N})),n.d(t,"DEFAULT_STATUS_CHANGE_THRESHOLD",(function(){return I})),n.d(t,"DEFAULT_QUERY_DELAY",(function(){return S})),n.d(t,"DEFAULT_SERVERLESS_QUERY_DELAY",(function(){return D})),n.d(t,"DEFAULT_FLAPPING_SETTINGS",(function(){return w})),n.d(t,"DISABLE_FLAPPING_SETTINGS",(function(){return R})),n.d(t,"DEFAULT_QUERY_DELAY_SETTINGS",(function(){return k})),n.d(t,"DEFAULT_SERVERLESS_QUERY_DELAY_SETTINGS",(function(){return O})),n.d(t,"getBuiltinActionGroups",(function(){return P})),n.d(t,"RecoveredActionGroup",(function(){return x})),n.d(t,"DisabledActionTypeIdsForActionGroup",(function(){return C})),n.d(t,"isActionGroupDisabledForActionTypeId",(function(){return U})),n.d(t,"RuleNotifyWhenTypeValues",(function(){return W})),n.d(t,"RuleNotifyWhen",(function(){return G})),n.d(t,"validateNotifyWhenType",(function(){return B})),n.d(t,"parseDuration",(function(){return j.parseDuration})),n.d(t,"formatDuration",(function(){return j.formatDuration})),n.d(t,"convertDurationToFrequency",(function(){return j.convertDurationToFrequency})),n.d(t,"getDurationNumberInItsUnit",(function(){return j.getDurationNumberInItsUnit})),n.d(t,"getDurationUnitValue",(function(){return j.getDurationUnitValue})),n.d(t,"validateDurationSchema",(function(){return j.validateDurationSchema})),n.d(t,"executionLogSortableColumns",(function(){return F})),n.d(t,"actionErrorLogSortableColumns",(function(){return Y})),n.d(t,"EMPTY_EXECUTION_KPI_RESULT",(function(){return $})),n.d(t,"getRuleTagsAggregation",(function(){return H})),n.d(t,"formatRuleTagsAggregationResult",(function(){return V})),n.d(t,"ISO_WEEKDAYS",(function(){return Q})),n.d(t,"alertMappings",(function(){return q})),n.d(t,"getRuleCircuitBreakerErrorMessage",(function(){return K})),n.d(t,"parseRuleCircuitBreakerErrorMessage",(function(){return z})),n.d(t,"getScopedQueryErrorMessage",(function(){return J})),n.d(t,"isScopedQueryError",(function(){return Z})),n.d(t,"MaintenanceWindowStatus",(function(){return ee})),n.d(t,"MAINTENANCE_WINDOW_SAVED_OBJECT_TYPE",(function(){return te})),n.d(t,"MAINTENANCE_WINDOW_FEATURE_ID",(function(){return ne})),n.d(t,"MAINTENANCE_WINDOW_API_PRIVILEGES",(function(){return re})),n.d(t,"MAINTENANCE_WINDOWS_APP_ID",(function(){return ie})),n.d(t,"MANAGEMENT_APP_ID",(function(){return ae})),n.d(t,"MAINTENANCE_WINDOW_PATHS",(function(){return oe})),n.d(t,"MAINTENANCE_WINDOW_DEEP_LINK_IDS",(function(){return ue})),n.d(t,"MAINTENANCE_WINDOW_DATE_FORMAT",(function(){return se})),n.d(t,"mappingFromFieldMap",(function(){return ce})),n.d(t,"getComponentTemplateFromFieldMap",(function(){return de})),n.d(t,"contextToSchemaName",(function(){return pe})),n.d(t,"LEGACY_BASE_ALERT_API_PATH",(function(){return fe})),n.d(t,"BASE_ALERTING_API_PATH",(function(){return ge})),n.d(t,"INTERNAL_BASE_ALERTING_API_PATH",(function(){return me})),n.d(t,"INTERNAL_ALERTING_SNOOZE_RULE",(function(){return ye})),n.d(t,"INTERNAL_ALERTING_API_FIND_RULES_PATH",(function(){return Ee})),n.d(t,"INTERNAL_ALERTING_API_MAINTENANCE_WINDOW_PATH",(function(){return Ae})),n.d(t,"INTERNAL_ALERTING_API_GET_ACTIVE_MAINTENANCE_WINDOWS_PATH",(function(){return ve})),n.d(t,"ALERTS_FEATURE_ID",(function(){return he})),n.d(t,"MONITORING_HISTORY_LIMIT",(function(){return Te})),n.d(t,"ENABLE_MAINTENANCE_WINDOWS",(function(){return be}));const r=["ok","active","error","pending","unknown","warning"],i=["succeeded","warning","failed"],a={succeeded:0,warning:10,failed:20};let o,u,s;!function(e){e.Read="read",e.Decrypt="decrypt",e.Execute="execute",e.Unknown="unknown",e.License="license",e.Timeout="timeout",e.Disabled="disabled",e.Validate="validate"}(o||(o={})),function(e){e.MAX_EXECUTABLE_ACTIONS="maxExecutableActions",e.MAX_ALERTS="maxAlerts",e.MAX_QUEUED_ACTIONS="maxQueuedActions"}(u||(u={})),function(e){e.OK="ok",e.Warning="warn",e.Error="error"}(s||(s={}));const l=2,c=20,d=2,_=20,p=0,f=60,g="rulesSettings",m="allFlappingSettings",y="readFlappingSettings",E="allQueryDelaySettings",A="readQueryDelaySettings",v={READ_FLAPPING_SETTINGS:"read-flapping-settings",WRITE_FLAPPING_SETTINGS:"write-flapping-settings",READ_QUERY_DELAY_SETTINGS:"read-query-delay-settings",WRITE_QUERY_DELAY_SETTINGS:"write-query-delay-settings"},h="rules-settings",T="rules-settings",b="query-delay-settings",N=20,I=4,S=0,D=15,w={enabled:!0,lookBackWindow:N,statusChangeThreshold:I},R={...w,enabled:!1},k={delay:S},O={delay:D};var L=n(0);const x=Object.freeze({id:"recovered",name:L.i18n.translate("alertingTypes.builtinActionGroups.recovered",{defaultMessage:"Recovered"})});function P(e){return[null!=e?e:x]}const M={[x.id]:[".jira",".resilient"]},C=new Map(Object.entries(M));function U(e,t){return C.has(e)&&C.get(e).includes(t)}const W=["onActionGroupChange","onActiveAlert","onThrottleInterval"];let G;function B(e){if(!W.includes(e))return`string is not a valid RuleNotifyWhenType: ${e}`}!function(e){e.CHANGE="onActionGroupChange",e.ACTIVE="onActiveAlert",e.THROTTLE="onThrottleInterval"}(G||(G={}));var j=n(3);const F=["timestamp","execution_duration","total_search_duration","es_search_duration","schedule_delay","num_triggered_actions","num_generated_actions","num_active_alerts","num_recovered_alerts","num_new_alerts"],Y=["@timestamp","event.start","event.end","event.duration","event.action"],$={success:0,unknown:0,failure:0,warning:0,activeAlerts:0,newAlerts:0,recoveredAlerts:0,erroredActions:0,triggeredActions:0},H=e=>{const{maxTags:t=50,after:n}=e||{};return{tags:{composite:{...n?{after:n}:{},size:t,sources:[{tags:{terms:{field:"alert.attributes.tags",order:"asc"}}}]}}}},V=e=>e?{ruleTags:(e.tags.buckets||[]).map((e=>e.key.tags))}:{ruleTags:[]},Q=[1,2,3,4,5,6,7],q={dynamic:!1,properties:{enabled:{type:"boolean"},name:{type:"text",fields:{keyword:{type:"keyword",normalizer:"lowercase"}}},tags:{type:"keyword"},alertTypeId:{type:"keyword"},schedule:{properties:{interval:{type:"keyword"}}},consumer:{type:"keyword"},legacyId:{type:"keyword"},actions:{dynamic:!1,type:"nested",properties:{group:{type:"keyword"},actionRef:{type:"keyword"},actionTypeId:{type:"keyword"}}},params:{type:"flattened",ignore_above:4096},mapped_params:{properties:{risk_score:{type:"float"},severity:{type:"keyword"}}},scheduledTaskId:{type:"keyword"},createdBy:{type:"keyword"},updatedBy:{type:"keyword"},createdAt:{type:"date"},updatedAt:{type:"date"},throttle:{type:"keyword"},notifyWhen:{type:"keyword"},muteAll:{type:"boolean"},mutedInstanceIds:{type:"keyword"},monitoring:{properties:{run:{properties:{calculated_metrics:{properties:{p50:{type:"long"},p95:{type:"long"},p99:{type:"long"},success_ratio:{type:"float"}}},last_run:{properties:{timestamp:{type:"date"},metrics:{properties:{duration:{type:"long"},total_search_duration_ms:{type:"long"},total_indexing_duration_ms:{type:"long"},total_alerts_detected:{type:"float"},total_alerts_created:{type:"float"},gap_duration_s:{type:"float"}}}}}}}}},revision:{type:"long"},snoozeSchedule:{type:"nested",properties:{id:{type:"keyword"},duration:{type:"long"},skipRecurrences:{type:"date",format:"strict_date_time"}}},executionStatus:{properties:{numberOfTriggeredActions:{type:"long"},status:{type:"keyword"},lastExecutionDate:{type:"date"},lastDuration:{type:"long"},error:{properties:{reason:{type:"keyword"},message:{type:"keyword"}}},warning:{properties:{reason:{type:"keyword"},message:{type:"keyword"}}}}},lastRun:{properties:{outcome:{type:"keyword"},outcomeOrder:{type:"float"},alertsCount:{properties:{active:{type:"float"},new:{type:"float"},recovered:{type:"float"},ignored:{type:"float"}}}}},running:{type:"boolean"}}},K=({name:e="",interval:t,intervalAvailable:n,action:r,rules:i=1})=>{let a;switch(r){case"update":a=(e=>L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.updateSummary",{defaultMessage:"Rule '{name}' cannot be updated. The maximum number of runs per minute would be exceeded.",values:{name:e}}))(e);break;case"create":a=(e=>L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.createSummary",{defaultMessage:"Rule '{name}' cannot be created. The maximum number of runs per minute would be exceeded.",values:{name:e}}))(e);break;case"enable":a=(e=>L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.enableSummary",{defaultMessage:"Rule '{name}' cannot be enabled. The maximum number of runs per minute would be exceeded.",values:{name:e}}))(e);break;case"bulkEdit":a=L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.bulkEditSummary",{defaultMessage:"Rules cannot be bulk edited. The maximum number of runs per minute would be exceeded."});break;case"bulkEnable":a=L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.bulkEnableSummary",{defaultMessage:"Rules cannot be bulk enabled. The maximum number of runs per minute would be exceeded."})}return`Error validating circuit breaker - ${a} - ${(({interval:e,intervalAvailable:t,rules:n})=>1===n?L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.ruleDetail",{defaultMessage:"The rule has {interval, plural, one {{interval} run} other {{interval} runs}} per minute; there {intervalAvailable, plural, one {is only {intervalAvailable} run} other {are only {intervalAvailable} runs}} per minute available. Before you can modify this rule, you must increase its check interval so that it runs less frequently. Alternatively, disable other rules or change their check intervals.",values:{interval:e,intervalAvailable:t}}):L.i18n.translate("xpack.alerting.ruleCircuitBreaker.error.multipleRuleDetail",{defaultMessage:"The rules have {interval, plural, one {{interval} run} other {{interval} runs}} per minute; there {intervalAvailable, plural, one {is only {intervalAvailable} run} other {are only {intervalAvailable} runs}} per minute available. Before you can modify these rules, you must disable other rules or change their check intervals so they run less frequently.",values:{interval:e,intervalAvailable:t}}))({interval:t,intervalAvailable:n,rules:i})}`},z=e=>{if(!e.includes("Error validating circuit breaker"))return{summary:e};const t=e.split(" - ");return{summary:t[1],details:t[2]}},X="invalid scoped query",J=e=>`${X} - ${e}`,Z=e=>e.includes(X);let ee;!function(e){e.Running="running",e.Upcoming="upcoming",e.Finished="finished",e.Archived="archived"}(ee||(ee={}));const te="maintenance-window",ne="maintenanceWindow",re={READ_MAINTENANCE_WINDOW:"read-maintenance-window",WRITE_MAINTENANCE_WINDOW:"write-maintenance-window"},ie="maintenanceWindows",ae="management",oe={alerting:{maintenanceWindows:`/${ie}`,maintenanceWindowsCreate:"/create",maintenanceWindowsEdit:"/edit/:maintenanceWindowId"}},ue={maintenanceWindows:ie,maintenanceWindowsCreate:"create",maintenanceWindowsEdit:"edit"},se="MM/DD/YY hh:mm A";var le=n(5);function ce(e,t="strict"){const n={dynamic:t,properties:{}};return Object.keys(e).map((t=>({name:t,...e[t]}))).forEach((e=>{const{name:t,required:r,array:i,multi_fields:a,...o}=e,u=a?{...o,fields:a.reduce(((e,t)=>(e[t.name]={type:t.type},e)),{})}:o;Object(le.set)(n.properties,e.name.split(".").join(".properties."),u),"@timestamp"===t&&Object(le.set)(n.properties,`${t}.ignore_malformed`,!1)})),n}const de=({name:e,fieldMap:t,dynamic:n,includeSettings:r})=>({name:e,_meta:{managed:!0},template:{settings:{...r?{number_of_shards:1,"index.mapping.total_fields.limit":1e3*Math.ceil(Object.keys(t).length/1e3)+500}:{}},mappings:ce(t,null!=n?n:"strict")}});var _e=n(6);const pe=e=>`${e.split(/[.\-]/).map((e=>Object(_e.capitalize)(e))).join("")}Alert`,fe="/api/alerts",ge="/api/alerting",me="/internal/alerting",ye=`${me}/rule/{id}/_snooze`,Ee=`${me}/rules/_find`,Ae=`${me}/rules/maintenance_window`,ve=`${Ae}/_active`,he="alerts",Te=200,be=!0},function(e,t,n){e.exports=n(7)(2)},function(e,t,n){"use strict";n.r(t),n.d(t,"parseDuration",(function(){return s})),n.d(t,"formatDuration",(function(){return l})),n.d(t,"convertDurationToFrequency",(function(){return c})),n.d(t,"getDurationNumberInItsUnit",(function(){return d})),n.d(t,"getDurationUnitValue",(function(){return _})),n.d(t,"validateDurationSchema",(function(){return p}));const r=/^[1-9][0-9]*s$/,i=/^[1-9][0-9]*m$/,a=/^[1-9][0-9]*h$/,o=/^[1-9][0-9]*d$/,u=6e4;function s(e){const t=parseInt(e,10);if(f(e))return 1e3*t;if(g(e))return 60*t*1e3;if(m(e))return 60*t*60*1e3;if(y(e))return 24*t*60*60*1e3;throw new Error(`Invalid duration "${e}". Durations must be of the form {number}x. Example: 5s, 5m, 5h or 5d"`)}function l(e,t){const n=parseInt(e,10);if(f(e))return`${n} ${t?n>1?"seconds":"second":"sec"}`;if(g(e))return`${n} ${t?n>1?"minutes":"minute":"min"}`;if(m(e))return`${n} ${t?n>1?"hours":"hour":"hr"}`;if(y(e))return`${n} ${n>1?"days":"day"}`;throw new Error(`Invalid duration "${e}". Durations must be of the form {number}x. Example: 5s, 5m, 5h or 5d"`)}function c(e,t=u){const n=s(e);if(0===t)throw new Error("Invalid denomination value: value cannot be 0");return 1/(n/t)}function d(e){return parseInt(e.replace(/[^0-9.]/g,""),10)}function _(e){const t=d(e);return e.replace(t.toString(),"")}function p(e){if(!(e.match(r)||e.match(i)||e.match(a)||e.match(o)))return"string is not a valid duration: "+e}function f(e){return r.test(e)}function g(e){return i.test(e)}function m(e){return a.test(e)}function y(e){return o.test(e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(1);function i(e){const{last_execution_date:t,last_duration:n,...r}=e;return{lastExecutionDate:new Date(t),lastDuration:n,...r}}function a(e){const{run:t}=e,{last_run:n,...r}=t,{timestamp:i,...a}=n;return{run:{last_run:{timestamp:e.run.last_run.timestamp,...a},...r}}}function o(e){const{outcome_msg:t,alerts_count:n,outcome_order:r,...i}=e;return{outcomeMsg:t,alertsCount:n,outcomeOrder:r,...i}}async function u({http:e}){return(await e.get(`${r.BASE_ALERTING_API_PATH}/rule_types`)).map((e=>function(e){const{recovery_action_group:t,action_groups:n,default_action_group_id:r,minimum_license_required:i,action_variables:a,rule_task_timeout:o,is_exportable:u,authorized_consumers:s,enabled_in_license:l,...c}=e;return{recoveryActionGroup:t,actionGroups:n,defaultActionGroupId:r,minimumLicenseRequired:i,actionVariables:a,ruleTaskTimeout:o,isExportable:u,authorizedConsumers:s,enabledInLicense:l,...c}}(e)))}async function s({http:e,id:t}){return(await u({http:e})).find((e=>e.id===t))}async function l({http:e,ruleId:t}){return function(e){const{rule_type_id:t,created_by:n,updated_by:r,created_at:u,updated_at:s,api_key:l,api_key_owner:c,api_key_created_by_user:d,notify_when:_,mute_all:p,muted_alert_ids:f,scheduled_task_id:g,execution_status:m,actions:y,next_run:E,last_run:A,monitoring:v,view_in_app_relative_url:h,...T}=e;return{alertTypeId:t,createdBy:n,updatedBy:r,createdAt:new Date(u),updatedAt:new Date(s),apiKey:l,apiKeyOwner:c,notifyWhen:_,muteAll:p,mutedInstanceIds:f,executionStatus:i(m),actions:y?y.map((e=>function(e){const{connector_type_id:t,frequency:n,...r}=e;return{actionTypeId:t,...n?{frequency:{summary:n.summary,throttle:n.throttle,notifyWhen:n.notify_when}}:{},...r}}(e))):[],scheduledTaskId:g,...h?{viewInAppRelativeUrl:h}:{},...E?{nextRun:new Date(E)}:{},...v?{monitoring:a(v)}:{},...A?{lastRun:o(A)}:{},...void 0!==d?{apiKeyCreatedByUser:d}:{},...T}}(await e.get(`${r.INTERNAL_BASE_ALERTING_API_PATH}/rule/${t}`))}},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(9),__kbnBundles__.define("plugin/alerting/public",n,10),__kbnBundles__.define("plugin/alerting/common",n,1),__kbnBundles__.define("plugin/alerting/common/parse_duration",n,3)},function(e,t,n){n.p=window.__kbnPublicPath__.alerting},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return l}));var r=n(2),i=n.n(r),a=n(0);const o=Symbol("*");class alert_navigation_registry_AlertNavigationRegistry{constructor(){i()(this,"alertNavigations",new Map)}has(e,t){return this.hasTypedHandler(e,t.id)||this.hasDefaultHandler(e)}hasTypedHandler(e,t){var n,r;return null!==(n=null===(r=this.alertNavigations.get(e))||void 0===r?void 0:r.has(t))&&void 0!==n&&n}hasDefaultHandler(e){var t,n;return null!==(t=null===(n=this.alertNavigations.get(e))||void 0===n?void 0:n.has(o))&&void 0!==t&&t}createConsumerNavigation(e){const t=new Map;return this.alertNavigations.set(e,t),t}registerDefault(e,t){var n;if(this.hasDefaultHandler(e))throw new Error(a.i18n.translate("xpack.alerting.alertNavigationRegistry.register.duplicateDefaultError",{defaultMessage:'Default Navigation within "{consumer}" is already registered.',values:{consumer:e}}));(null!==(n=this.alertNavigations.get(e))&&void 0!==n?n:this.createConsumerNavigation(e)).set(o,t)}register(e,t,n){var r;if(this.hasTypedHandler(e,t))throw new Error(a.i18n.translate("xpack.alerting.alertNavigationRegistry.register.duplicateNavigationError",{defaultMessage:'Navigation for Alert type "{alertType}" within "{consumer}" is already registered.',values:{alertType:t,consumer:e}}));(null!==(r=this.alertNavigations.get(e))&&void 0!==r?r:this.createConsumerNavigation(e)).set(t,n)}get(e,t){if(this.has(e,t)){var n;const r=this.alertNavigations.get(e);return null!==(n=r.get(t.id))&&void 0!==n?n:r.get(o)}throw new Error(a.i18n.translate("xpack.alerting.alertNavigationRegistry.get.missingNavigationError",{defaultMessage:'Navigation for Alert type "{alertType}" within "{consumer}" is not registered.',values:{alertType:t.id,consumer:e}}))}}var u=n(4),s=n(1);class plugin_AlertingPublicPlugin{constructor(e){i()(this,"alertNavigationRegistry",void 0),this.initContext=e}setup(e,t){this.alertNavigationRegistry=new alert_navigation_registry_AlertNavigationRegistry;const r=this.initContext.env.packageInfo.version;return s.ENABLE_MAINTENANCE_WINDOWS&&t.management.sections.section.insightsAndAlerting.registerApp({id:s.MAINTENANCE_WINDOWS_APP_ID,title:a.i18n.translate("xpack.alerting.management.section.title",{defaultMessage:"Maintenance Windows"}),async mount(t){const{renderApp:i}=await n.e(3).then(n.bind(null,64)),[a,o]=await e.getStartServices();return i({core:a,plugins:o,mountParams:t,kibanaVersion:r})}}),{registerNavigation:async(e,t,n)=>{this.alertNavigationRegistry.register(e,t,n)},registerDefaultNavigation:async(e,t)=>this.alertNavigationRegistry.registerDefault(e,t)}}start(e){return{getNavigation:async t=>{const n=await Object(u.a)({http:e.http,ruleId:t}),r=await Object(u.b)({http:e.http,id:n.alertTypeId});if(r){if(this.alertNavigationRegistry.has(n.consumer,r)){const e=this.alertNavigationRegistry.get(n.consumer,r)(n);if(e)return e}return n.viewInAppRelativeUrl?n.viewInAppRelativeUrl:void 0}console.log(`Unable to get navigation for rule type "${n.alertTypeId}" because it is not registered on the server side.`)}}}}function l(e){return new plugin_AlertingPublicPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.ReactQuery},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}]);