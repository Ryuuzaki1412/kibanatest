/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.alerting_bundle_jsonpfunction=window.alerting_bundle_jsonpfunction||[]).push([[1],{48:function(e,t,a){"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function s(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],r=0;r<e.length;r++){var l=e[r],o=t.base?l[0]+t.base:l[0],u=a[o]||0,c="".concat(o," ").concat(u);a[o]=u+1;var d=s(c),b={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(i[d].references++,i[d].updater(b)):i.push({identifier:c,updater:g(b,t),references:1}),n.push(c)}return n}function o(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=a.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function b(e,t,a){var n=a.css,r=a.media,i=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,m=0;function g(e,t){var a,n,r;if(t.singleton){var i=m++;a=p||(p=o(t)),n=d.bind(null,a,i,!1),r=d.bind(null,a,i,!0)}else a=o(t),n=b.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=s(a[n]);i[r].references--}for(var o=l(e,t),u=0;u<a.length;u++){var c=s(a[u]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}a=o}}}},49:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,r,i=e[1]||"",s=e[3];if(!s)return i;if(t&&"function"==typeof btoa){var l=(a=s,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),o=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[i].concat(o).concat([l]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var l=0;l<e.length;l++){var o=[].concat(e[l]);n&&r[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return ge}));var n=a(11),r=a.n(n),i=a(15),s=a.n(i),l=a(16),o=a(21),u=a(13),c=a(20);const d=[...a.n(c).a.tz.names().filter((e=>!["America/Nuuk","EST","HST","ROC","MST"].includes(e)))];var b=a(0);const p=Object.freeze({kibana:{id:"kibana",label:b.i18n.translate("core.ui.kibanaNavList.label",{defaultMessage:"Analytics"}),euiIconType:"logoKibana",order:1e3},enterpriseSearch:{id:"enterpriseSearch",label:b.i18n.translate("core.ui.searchNavList.label",{defaultMessage:"Search"}),order:2e3,euiIconType:"logoEnterpriseSearch"},observability:{id:"observability",label:b.i18n.translate("core.ui.observabilityNavList.label",{defaultMessage:"Observability"}),euiIconType:"logoObservability",order:3e3},security:{id:"securitySolution",label:b.i18n.translate("core.ui.securityNavList.label",{defaultMessage:"Security"}),order:4e3,euiIconType:"logoSecurity"},management:{id:"management",label:b.i18n.translate("core.ui.managementNavList.label",{defaultMessage:"Management"}),order:5e3,euiIconType:"managementApp"}});var m=a(28),g=a(32),f=a(29),j=a(31);const{emptyField:h}=m.fieldValidators,y={title:{type:l.FIELD_TYPES.TEXT,label:f.wb,validations:[{validator:h(f.Q)}]},categoryIds:{validations:[{validator:h(f.m)}]},scopedQuery:{defaultValue:{kql:"",filters:[]}},startDate:{},endDate:{},timezone:{},recurring:{type:l.FIELD_TYPES.TOGGLE,label:f.U,defaultValue:!1},recurringSchedule:{frequency:{type:l.FIELD_TYPES.SELECT,label:f.U,defaultValue:g.a.DAILY},interval:{type:l.FIELD_TYPES.NUMBER,label:"",defaultValue:1,validations:[{validator:h(f.O)}]},ends:{type:l.FIELD_TYPES.BUTTON_GROUP,label:f.A,defaultValue:j.d.NEVER,validations:[]},until:{},count:{label:"",type:l.FIELD_TYPES.TEXT,defaultValue:1,validations:[{validator:h(f.u)}]},customFrequency:{type:l.FIELD_TYPES.SELECT,label:"",defaultValue:g.a.WEEKLY},byweekday:{},bymonth:{type:l.FIELD_TYPES.BUTTON_GROUP,label:"",validations:[],defaultValue:"day"}}};var O=a(37),x=a(12),v=a(35);const S=Object(l.getUseField)({component:o.Field}),w={flexField:{name:"162yvs7",styles:".euiFormRow__labelWrapper{margin-bottom:unset;}"}},E=r.a.memo((()=>{const[{startDate:e,recurringSchedule:t}]=Object(l.useFormData)({watch:["startDate","recurringSchedule.frequency","recurringSchedule.interval","recurringSchedule.customFrequency"]}),a=Object(n.useMemo)((()=>Object(j.a)(null==t?void 0:t.interval)),[null==t?void 0:t.interval]),i=Object(n.useMemo)((()=>{if(!e)return[];const t=s()(e),{dayOfWeek:a,nthWeekdayOfMonth:n,isLastOfMonth:r}=Object(O.a)(t,"ddd");return[{id:"day",label:f.z(t)},{id:"weekday",label:f.gb(a)[r?0:n]}]}),[e]),o=Object(n.useMemo)((()=>Object(v.a)([],s()(e))),[e]);return Object(x.jsx)(r.a.Fragment,null,(null==t?void 0:t.frequency)!==g.a.DAILY?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"s"}),Object(x.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(S,{path:"recurringSchedule.interval",css:w.flexField,componentProps:{"data-test-subj":"interval-field",id:"interval",euiFieldProps:{min:1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"interval"},f.N)}}})),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(S,{path:"recurringSchedule.customFrequency",componentProps:{"data-test-subj":"custom-frequency-field",euiFieldProps:{options:a}}}))),Object(x.jsx)(u.EuiSpacer,{size:"s"})):null,Number(null==t?void 0:t.customFrequency)===g.a.WEEKLY||(null==t?void 0:t.frequency)===g.a.DAILY?Object(x.jsx)(S,{path:"recurringSchedule.byweekday",config:{type:l.FIELD_TYPES.MULTI_BUTTON_GROUP,label:"",validations:[{validator:({value:e})=>{if(Object.values(e).every((e=>!1===e)))return{message:f.k}}}],defaultValue:o},componentProps:{"data-test-subj":"byweekday-field",euiFieldProps:{legend:"Repeat on weekday",options:j.l}}}):null,Number(null==t?void 0:t.customFrequency)===g.a.MONTHLY?Object(x.jsx)(S,{path:"recurringSchedule.bymonth",componentProps:{"data-test-subj":"bymonth-field",euiFieldProps:{legend:"Repeat on weekday or month day",options:i}}}):null)}));E.displayName="CustomRecurringSchedule";var F=a(44),I=a(38);const T=Object(l.getUseField)({component:o.Field}),M=e=>s()(e),C=e=>e.toISOString(),k=r.a.memo((()=>{const[e]=Object(n.useState)(s()()),[{startDate:t,endDate:a,timezone:i,recurringSchedule:o}]=Object(l.useFormData)({watch:["startDate","endDate","timezone","recurringSchedule.frequency","recurringSchedule.interval","recurringSchedule.ends","recurringSchedule.until","recurringSchedule.count","recurringSchedule.customFrequency","recurringSchedule.byweekday","recurringSchedule.bymonth"]}),{options:c,presets:d}=Object(n.useMemo)((()=>{if(!t)return{options:j.b,presets:j.c};const e=s()(t),{dayOfWeek:a,nthWeekdayOfMonth:n,isLastOfMonth:r}=Object(O.a)(e);return{options:[{text:f.F,value:g.a.DAILY},{text:f.K(a),value:g.a.WEEKLY},{text:f.H(a)[r?0:n],value:g.a.MONTHLY},{text:f.M(e),value:g.a.YEARLY},{text:f.E,value:"CUSTOM"}],presets:Object(I.a)(e)}}),[t]);return Object(x.jsx)(u.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0},Object(x.jsx)(u.EuiSplitPanel.Inner,{color:"subdued"},Object(x.jsx)(T,{path:"recurringSchedule.frequency",componentProps:{"data-test-subj":"frequency-field",euiFieldProps:{options:c}}}),(null==o?void 0:o.frequency)===g.a.DAILY||"CUSTOM"===(null==o?void 0:o.frequency)?Object(x.jsx)(E,{"data-test-subj":"custom-recurring-form"}):null,Object(x.jsx)(T,{path:"recurringSchedule.ends",componentProps:{"data-test-subj":"ends-field",euiFieldProps:{legend:"Recurrence ends",options:j.g}}}),(null==o?void 0:o.ends)===j.d.ON_DATE?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"m"}),Object(x.jsx)(u.EuiFlexGroup,{alignItems:"flexEnd"},Object(x.jsx)(u.EuiFlexItem,{grow:3},Object(x.jsx)(T,{path:"recurringSchedule.until",config:{type:l.FIELD_TYPES.DATE_PICKER,label:"",defaultValue:s()(a).endOf("day").toISOString(),validations:[],serializer:C,deserializer:M},componentProps:{"data-test-subj":"until-field",euiFieldProps:{showTimeSelect:!1,minDate:e}}})),i?Object(x.jsx)(u.EuiFlexItem,{grow:1},Object(x.jsx)(u.EuiComboBox,{"data-test-subj":"disabled-timezone-field",id:"disabled-timezone",isDisabled:!0,singleSelection:{asPlainText:!0},selectedOptions:[{label:i[0]}],isClearable:!1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"disabled-timezone"},f.eb)})):null)):null,(null==o?void 0:o.ends)===j.d.AFTER_X?Object(x.jsx)(T,{path:"recurringSchedule.count",componentProps:{"data-test-subj":"count-field",id:"count",euiFieldProps:{type:"number",min:1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"count"},f.s),append:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"count"},f.t)}}}):null),Object(x.jsx)(u.EuiHorizontalRule,{margin:"none"}),Object(x.jsx)(u.EuiSplitPanel.Inner,null,f.T(Object(F.a)(s()(t),o,d))))}));k.displayName="RecurringSchedule";const L=r.a.memo((({isLoading:e,editMode:t})=>{const{submit:a,isSubmitting:n}=Object(l.useFormContext)();return Object(x.jsx)(u.EuiButton,{"data-test-subj":"create-submit",fill:!0,isDisabled:e||n,isLoading:e||n,onClick:a},t?f.Ab:f.jb)}));L.displayName="SubmitButton";var _=a(45);const D=(e,t,a)=>{var n;const r=Object(I.a)(e),i={dtstart:e.toISOString(),tzid:t};if(!a)return{...i,freq:g.a.YEARLY,count:1};let s=a;"CUSTOM"!==a.frequency&&(s={...a,...r[a.frequency]});const l=null!==(n=s.customFrequency)&&void 0!==n?n:s.frequency;if(i.freq=l,i.interval=s.interval,s.until&&(i.until=s.until),s.count&&(i.count=s.count),s.byweekday){const e=s.byweekday;i.byweekday=Object.keys(e).filter((t=>!0===e[t])).map((e=>j.e[Number(e)]))}return s.bymonth&&("day"===s.bymonth?i.bymonthday=[e.date()]:"weekday"===s.bymonth&&(i.byweekday=[Object(_.a)(e)])),l===g.a.YEARLY&&(i.bymonth=[e.month()+1],i.bymonthday=[e.date()]),i};var R=a(1),A=a(14),P=a(30);const V=({rRule:e,categoryIds:t,scopedQuery:a,...n})=>({...n,r_rule:e,category_ids:t,scoped_query:a}),U=({r_rule:e,category_ids:t,scoped_query:a,...n})=>({...n,rRule:e,categoryIds:t,scopedQuery:a});const q=({rRule:e,categoryIds:t,scopedQuery:a,...n})=>({...n,r_rule:e,category_ids:t,scoped_query:a}),z=({r_rule:e,category_ids:t,scoped_query:a,...n})=>({...n,rRule:e,categoryIds:t,scopedQuery:a});var W=a(4),N=a(34),B=a.n(N),Q=a(6);function Y(e,t,a){const n=Object(Q.get)(e,t);let r=s()();n&&s()(n).isValid()&&(r=s()(n));const i=a&&a.length>0?s()().tz(a[0]).year(r.year()).month(r.month()).date(r.date()).hour(r.hour()).minute(r.minute()).second(r.second()).millisecond(r.millisecond()).utcOffset():r.utcOffset();return{selected:r.clone().utcOffset(i),utcOffset:i}}const G=r.a.memo((({fields:e,timezone:t,showTimeSelect:a=!0,...i})=>{const[o]=Object(n.useState)(s()()),{setFieldValue:c}=Object(l.useFormContext)(),[d]=Object(l.useFormData)({watch:[e.startDate.path,e.endDate.path]}),{selected:b,utcOffset:p}=Y(d,e.startDate.path,t),{selected:m,utcOffset:g}=Y(d,e.endDate.path,t),j=Object(n.useCallback)((t=>{if(t&&t.isAfter(m)){const a=s()(t).add(30,"minutes");c(e.endDate.path,a)}c(e.startDate.path,t?t.toISOString():t)}),[c,m,e.endDate.path,e.startDate.path]),h=Object(n.useCallback)((t=>{c(e.endDate.path,t?t.toISOString():t)}),[c,e.endDate.path]),y=b.isAfter(m);return Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiFormRow,B()({label:e.startDate.label},i,{fullWidth:!0}),Object(x.jsx)(u.EuiDatePickerRange,{isInvalid:y,startDateControl:Object(x.jsx)(u.EuiDatePicker,{selected:b,onChange:e=>e&&j(e),startDate:b,endDate:m,"aria-label":"Start date",showTimeSelect:a,minDate:o,utcOffset:p}),endDateControl:Object(x.jsx)(u.EuiDatePicker,{selected:m,onChange:e=>e&&h(e),startDate:b,endDate:m,"aria-label":"End date",showTimeSelect:a,minDate:o,utcOffset:g}),fullWidth:!0})),y?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"xs"}),Object(x.jsx)(u.EuiText,{size:"xs",color:"danger"},f.W)):null)}));G.displayName="DatePickerRangeField";var H=a(46);const K=[{id:p.observability.id,label:f.n,"data-test-subj":`option-${p.observability.id}`},{id:p.security.id,label:f.o,"data-test-subj":`option-${p.security.id}`},{id:p.management.id,label:f.r,"data-test-subj":`option-${p.management.id}`}].sort(((e,t)=>e.id.localeCompare(t.id))),$=e=>{const{selectedCategories:t,availableCategories:a,errors:r=[],isLoading:i=!1,isScopedQueryEnabled:s=!1,onChange:l}=e,o=Object(n.useMemo)((()=>t.reduce(((e,t)=>(e[t]=!0,e)),{})),[t]),c=Object(n.useMemo)((()=>K.map((e=>({...e,disabled:!a.includes(e.id)}))).sort(((e,t)=>e.id.localeCompare(t.id)))),[a]),d=Object(n.useCallback)((e=>{t.includes(e)?l(t.filter((t=>t!==e))):l([...t,e])}),[t,l]),b=Object(n.useCallback)((e=>{l([e])}),[l]),p=Object(n.useMemo)((()=>s?Object(x.jsx)(u.EuiRadioGroup,{"data-test-subj":"maintenanceWindowCategorySelectionRadioGroup",options:c,idSelected:t[0],onChange:b}):Object(x.jsx)(u.EuiCheckboxGroup,{"data-test-subj":"maintenanceWindowCategorySelectionCheckboxGroup",options:c,idToSelectedMap:o,onChange:d})),[s,c,t,o,d,b]);return i?Object(x.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround","data-test-subj":"maintenanceWindowCategorySelectionLoading"},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiLoadingSpinner,{size:"l"}))):Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowCategorySelection"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.q),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.p)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFormRow,{label:f.l,isInvalid:!!r.length,error:r[0]},p)))},X=e=>{const{checked:t,onEnabledChange:a}=e,r=Object(n.useCallback)((e=>{a(e.target.checked)}),[a]);return Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowScopedQuerySwitch",direction:"column"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.ab),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.X)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiSwitch,{label:f.bb,checked:t,onChange:r})))},J={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SLO:"slo",SIEM:"siem",UPTIME:"uptime",ML:"ml"};let Z,ee;Object.values(J).map((e=>e)),function(e){e.ErrorCount="apm.error_rate",e.TransactionErrorRate="apm.transaction_error_rate",e.TransactionDuration="apm.transaction_duration",e.Anomaly="apm.anomaly"}(Z||(Z={})),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.activeLabel",{defaultMessage:"Active"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.recoveredLabel",{defaultMessage:"Recovered"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.flappingLabel",{defaultMessage:"Flapping"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.untrackedLabel",{defaultMessage:"Untracked"}),function(e){e.Running="running",e.Upcoming="upcoming",e.Finished="finished",e.Archived="archived"}(ee||(ee={})),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchError",{defaultMessage:"Failed to check if maintenance windows are active"}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchErrorDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveNoCategories",{defaultMessage:"One or more maintenance windows are running"}),p.management,b.i18n.translate("alertsUIShared.maintenanceWindowCallout.managementCategoryLabel",{defaultMessage:"Stack"}),a(57);b.i18n.translate("alertsUIShared.components.addMessageVariables.loadingMessage",{defaultMessage:"Loading variables"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesFound",{defaultMessage:"No variables found"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesAvailable",{defaultMessage:"No variables available"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreShown",{defaultMessage:"Deprecated variables are shown"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreHidden",{defaultMessage:"Deprecated variables are hidden"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.hideDeprecatedVariables",{defaultMessage:"Hide"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.showAllDeprecatedVariables",{defaultMessage:"Show all"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.addVariablePopoverButton",{defaultMessage:"Add variable"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.addRuleVariableTitle",{defaultMessage:"Add variable"});const te=[],ae=[],ne="alerts",re="/internal/rac/alerts";const ie=({enabled_in_license:e,recovery_action_group:t,action_groups:a,default_action_group_id:n,minimum_license_required:r,action_variables:i,authorized_consumers:s,rule_task_timeout:l,does_set_recovery_context:o,default_schedule_interval:u,has_alerts_mappings:c,has_fields_for_a_a_d:d,...b})=>({enabledInLicense:e,recoveryActionGroup:t,actionGroups:a,defaultActionGroupId:n,minimumLicenseRequired:r,actionVariables:i,authorizedConsumers:s,ruleTaskTimeout:l,doesSetRecoveryContext:o,defaultScheduleInterval:u,hasAlertsMappings:c,hasFieldsForAAD:d,...b}),se=e=>{const{filteredRuleTypes:t,enabled:a=!0,http:n,toasts:r}=e,{data:i,isSuccess:s,isFetching:l,isInitialLoading:o,isLoading:u}=Object(A.useQuery)({queryKey:["loadRuleTypes"],queryFn:()=>async function({http:e}){const t=await e.get("/api/alerting/rule_types");return t.map((e=>ie(e)))}({http:n}),onError:()=>{r.addDanger(b.i18n.translate("alertsUIShared.hooks.useLoadRuleTypesQuery.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"}))},refetchOnWindowFocus:!1,enabled:a}),c=i?((e,t)=>{const a=new Map;for(const t of e)a.set(t.id,t);let n=a;return null!=t&&t.length&&(n=new Map([...a].filter((([e,a])=>t.includes(a.id))))),n})(i,t):new Map,d=c.size>0,p=[...c.values()],m=p.some((e=>{var t;return null===(t=e.authorizedConsumers[ne])||void 0===t?void 0:t.all})),g=m||p.some((e=>{var t;return null===(t=e.authorizedConsumers[ne])||void 0===t?void 0:t.read}));return{ruleTypesState:{initialLoad:u||o,isLoading:u||l,data:c},hasAnyAuthorizedRuleType:d,authorizedRuleTypes:p,authorizedToReadAnyRules:g,authorizedToCreateAnyRules:m,isSuccess:s}};const le=b.i18n.translate("alertsUIShared.component.alertsSearchBar.placeholder",{defaultMessage:"Search alerts (e.g. kibana.alert.evaluation.threshold > 75)"}),oe={type:"alerts",fields:{}},ue=({appName:e,disableQueryLanguageSwitcher:t=!1,featureIds:a,ruleTypeId:r,query:i,filters:s,onQueryChange:l,onQuerySubmit:o,onFiltersUpdated:u,rangeFrom:c,rangeTo:d,showFilterBar:p=!1,showDatePicker:m=!0,showSubmitButton:g=!0,placeholder:f=le,submitOnBlur:j=!1,http:h,toasts:y,unifiedSearchBar:O,dataViewsService:x})=>{var v;const[S,w]=Object(n.useState)("kuery"),{dataViews:E,loading:F}=function(e){const{http:t,dataViewsService:a,toasts:r,featureIds:i}=e,[s,l]=Object(n.useState)([]),o=i.sort().join(","),u=1===i.length&&i.includes(J.SIEM),c=i.length>1&&i.includes(J.SIEM),d=i.length>0&&!u&&!c,p=()=>{r.addDanger(b.i18n.translate("alertsUIShared.hooks.useAlertDataView.useAlertDataMessage",{defaultMessage:"Unable to load alert data view"}))},{data:m,isSuccess:g,isInitialLoading:f,isLoading:j}=Object(A.useQuery)({queryKey:["loadAlertIndexNames",o],queryFn:()=>async function({http:e,features:t}){const{index_name:a=[]}=await e.get(`${re}/index`,{query:{features:t}});return a}({http:t,features:o}),onError:p,refetchOnWindowFocus:!1,enabled:i.length>0&&!c}),{data:h,isSuccess:y,isInitialLoading:O,isLoading:x}=Object(A.useQuery)({queryKey:["loadAlertFields",o],queryFn:()=>async function({http:e,featureIds:t}){const{fields:a=[]}=await e.get(`${re}/browser_fields`,{query:{featureIds:t}});return a}({http:t,featureIds:i}),onError:p,refetchOnWindowFocus:!1,enabled:d});return Object(n.useEffect)((()=>()=>{s.map((e=>{a.clearInstanceCache(e.id)}))}),[s]),Object(n.useEffect)((()=>{u&&g&&async function(){const e=await a.create({title:(null!=m?m:[]).join(","),allowNoIndex:!0});l([e])}()}),[a,m,g,u]),Object(n.useEffect)((()=>{var e;m&&h&&!u&&y&&g&&l([{title:(null!=m?m:[]).join(","),fieldFormatMap:{},fields:null===(e=null!=h?h:[])||void 0===e?void 0:e.map((e=>({...e,...e.esTypes&&e.esTypes.includes("flattened")?{type:"string"}:{}})))}])}),[h,a,m,g,u,y]),Object(n.useMemo)((()=>({dataViews:s,loading:0!==i.length&&!c&&(u?f||j:f||j||O||x)})),[s,i.length,c,u,f,j,O,x])}({featureIds:null!=a?a:[],http:h,toasts:y,dataViewsService:x}),{aadFields:I,loading:T}=function(e){const{ruleTypeId:t,http:a,toasts:r}=e,{data:i=ae,isInitialLoading:s,isLoading:l}=Object(A.useQuery)({queryKey:["loadAlertAadFieldsPerRuleType",t],queryFn:()=>async function({http:e,ruleTypeId:t}){return t?await e.get(`${re}/aad_fields`,{query:{ruleTypeId:t}}):ae}({http:a,ruleTypeId:t}),onError:()=>{r.addDanger(b.i18n.translate("alertsUIShared.hooks.useRuleAADFields.errorMessage",{defaultMessage:"Unable to load alert fields per rule type"}))},refetchOnWindowFocus:!1,enabled:void 0!==t});return Object(n.useMemo)((()=>({aadFields:i,loading:void 0!==t&&(s||l)})),[i,s,l,t])}({ruleTypeId:r,http:h,toasts:y}),M=r&&null!=I&&I.length?[{title:r,fields:I}]:E,C=se({filteredRuleTypes:void 0!==r?[r]:[],enabled:void 0!==r,http:h,toasts:y}),k=a&&1===a.length&&a.includes(J.SIEM)||C&&r&&(null===(v=C.ruleTypesState.data.get(r))||void 0===v?void 0:v.producer)===J.SIEM,L=Object(n.useCallback)((({dateRange:e,query:t})=>{var a;o({dateRange:e,query:"string"==typeof(null==t?void 0:t.query)?t.query:void 0}),w(null!==(a=null==t?void 0:t.language)&&void 0!==a?a:"kuery")}),[o,w]),_=Object(n.useCallback)((({dateRange:e,query:t})=>{var a;null==l||l({dateRange:e,query:"string"==typeof(null==t?void 0:t.query)?t.query:void 0}),w(null!==(a=null==t?void 0:t.language)&&void 0!==a?a:"kuery")}),[l,w]);return O({appName:e,disableQueryLanguageSwitcher:t,indexPatterns:F||T?te:M,placeholder:f,query:{query:null!=i?i:"",language:S},filters:s,dateRangeFrom:c,dateRangeTo:d,displayStyle:"inPage",showFilterBar:p,onQuerySubmit:L,onFiltersUpdated:u,onRefresh:({dateRange:e})=>{o({dateRange:e})},showDatePicker:m,showQueryInput:!0,saveQueryMenuVisibility:"allowed_by_app_privilege",showSubmitButton:g,submitOnBlur:j,onQueryChange:_,suggestionsAbstraction:k?void 0:oe})},ce=r.a.memo((e=>{const{featureIds:t,query:a,filters:r,errors:i=[],isLoading:s,isEnabled:l=!0,onQueryChange:o,onFiltersChange:c}=e,{http:d,data:p,notifications:{toasts:m},unifiedSearch:{ui:{SearchBar:g}}}=Object(P.a)().services,f=Object(n.useCallback)((({query:e})=>{o(e||"")}),[o]);return s?Object(x.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround","data-test-subj":"maintenanceWindowScopedQueryLoading"},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiLoadingSpinner,{size:"l"}))):l?Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowScopeQuery",direction:"column"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFormRow,{fullWidth:!0,isInvalid:0!==i.length,error:i[0]},Object(x.jsx)(ue,{appName:(j=b.i18n,j.translate("xpack.alerting.appName",{defaultMessage:"Alerting"})),featureIds:t,disableQueryLanguageSwitcher:!0,query:a,filters:r,onQueryChange:f,onQuerySubmit:f,onFiltersUpdated:c,showFilterBar:!0,submitOnBlur:!0,showDatePicker:!1,showSubmitButton:!1,http:d,toasts:m,unifiedSearchBar:g,dataViewsService:p.dataViews})))):null;var j}));var de;const be=Object(l.getUseField)({component:o.Field}),pe=[p.observability.id,p.security.id,p.management.id],me=null!==(de=d.map((e=>({label:e}))))&&void 0!==de?de:[{label:"UTC"}],ge=r.a.memo((e=>{var t,a;const{onCancel:i,onSuccess:o,initialValue:c,maintenanceWindowId:d,scopedQueryFeatureFlag:p=!0}=e,[m]=Object(n.useState)(s()().toISOString()),[g]=Object(n.useState)(s()().add(30,"minutes").toISOString()),[j,h]=Object(n.useState)(!1),{defaultTimezone:O,isBrowser:v}=(()=>{const e=Object(P.b)("dateFormat:tz");var t,a;return e&&"Browser"!==e?{defaultTimezone:e,isBrowser:!1}:{defaultTimezone:null!==(t=null===(a=s.a.tz)||void 0===a?void 0:a.guess())&&void 0!==t?t:"UTC",isBrowser:!0}})(),[S,w]=Object(n.useState)(!(null==c||!c.scopedQuery)),[E,F]=Object(n.useState)((null==c||null===(t=c.scopedQuery)||void 0===t?void 0:t.kql)||""),[I,T]=Object(n.useState)((null==c||null===(a=c.scopedQuery)||void 0===a?void 0:a.filters)||[]),[M,C]=Object(n.useState)([]),_=Object(n.useRef)(!1),N=Object(n.useRef)([]),B=void 0!==c&&void 0!==d,Q=Object(n.useCallback)((e=>{var t;null!==(t=e.body)&&void 0!==t&&t.message&&Object(R.isScopedQueryError)(e.body.message)&&C([f.Z])}),[]),{mutate:Y,isLoading:K}=function(e){const{onError:t}=e||{},{http:a,notifications:{toasts:n}}=Object(P.a)().services;return Object(A.useMutation)((e=>async function({http:e,maintenanceWindow:t}){const a=await e.post(`${R.INTERNAL_BASE_ALERTING_API_PATH}/rules/maintenance_window`,{body:JSON.stringify(V(t))});return U(a)}({http:a,maintenanceWindow:e})),{onSuccess:e=>{n.addSuccess(b.i18n.translate("xpack.alerting.maintenanceWindowsCreateSuccess",{defaultMessage:"Created maintenance window '{title}'",values:{title:e.title}}))},onError:e=>{n.addDanger(b.i18n.translate("xpack.alerting.maintenanceWindowsCreateFailure",{defaultMessage:"Failed to create maintenance window."})),null==t||t(e)}})}({onError:Q}),{mutate:J,isLoading:Z}=function(e){const{onError:t}=e||{},{http:a,notifications:{toasts:n}}=Object(P.a)().services;return Object(A.useMutation)((({maintenanceWindowId:e,maintenanceWindow:t})=>async function({http:e,maintenanceWindowId:t,maintenanceWindow:a}){const n=await e.post(`${R.INTERNAL_BASE_ALERTING_API_PATH}/rules/maintenance_window/${encodeURIComponent(t)}`,{body:JSON.stringify(q(a))});return z(n)}({http:a,maintenanceWindowId:e,maintenanceWindow:t})),{onSuccess:e=>{n.addSuccess(b.i18n.translate("xpack.alerting.maintenanceWindowsUpdateSuccess",{defaultMessage:"Updated maintenance window '{title}'",values:{title:e.title}}))},onError:e=>{n.addDanger(b.i18n.translate("xpack.alerting.maintenanceWindowsUpdateFailure",{defaultMessage:"Failed to update maintenance window."})),null==t||t(e)}})}({onError:Q}),{mutate:ee}=Object(H.a)(),{data:te,isLoading:ae}=(()=>{const{http:e,notifications:{toasts:t}}=Object(P.a)().services,{isLoading:a,isFetching:n,data:r}=Object(A.useQuery)({queryKey:["useGetRuleTypes"],queryFn:()=>Object(W.c)({http:e}),onError:()=>{t.addDanger(b.i18n.translate("xpack.alerting.hooks.useGetRuleTypes.error",{defaultMessage:"Unable to load rule types."}))},refetchOnWindowFocus:!1});return{data:r,isLoading:a||n}})(),ne=Object(n.useMemo)((()=>S&&p&&(E||I.length)?{kql:E,filters:I}:null),[S,p,E,I]),re=Object(n.useCallback)((async(e,t)=>{if(!t||0!==M.length)return;if(S&&!ne)return void C([f.Y]);const a=s()(e.startDate),n=s()(e.endDate),r={title:e.title,duration:n.diff(a),rRule:D(a,e.timezone?e.timezone[0]:O,e.recurringSchedule),categoryIds:e.categoryIds,scopedQuery:ne};B?J({maintenanceWindowId:d,maintenanceWindow:r},{onSuccess:o}):Y(r,{onSuccess:o})}),[B,S,M,d,J,Y,o,O,ne]),{form:ie}=Object(l.useForm)({defaultValue:c,options:{stripEmptyFields:!1},schema:y,onSubmit:re}),[{recurring:se,timezone:le,categoryIds:oe},ue,de]=Object(l.useFormData)({form:ie,watch:["recurring","timezone","categoryIds","scopedQuery"]}),ge=se||!1,fe=v||void 0!==(null==c?void 0:c.timezone),je=Object(n.useCallback)((()=>h(!1)),[]),he=Object(n.useCallback)((()=>h(!0)),[]),{setFieldValue:ye}=ie,Oe=Object(n.useMemo)((()=>te?te.filter((e=>pe.includes(e.category))):[]),[te]),xe=Object(n.useMemo)((()=>[...new Set(Oe.map((e=>e.category)))]),[Oe]),ve=Object(n.useMemo)((()=>{if(!Array.isArray(Oe)||!Array.isArray(oe)||!de)return[];const e=new Set;return Oe.forEach((t=>{oe.includes(t.category)&&e.add(t.producer)})),[...e]}),[Oe,oe,de]),Se=Object(n.useCallback)((e=>{oe&&ye("categoryIds",e)}),[oe,ye]),we=Object(n.useCallback)((e=>{ye("categoryIds",e?[(null==oe?void 0:oe.sort()[0])||xe.sort()[0]]:N.current),w(e)}),[oe,xe,ye]),Ee=Object(n.useCallback)((e=>{M.length&&C([]),F(e)}),[M]),Fe=Object(n.useMemo)((()=>{let e;return j&&(e=Object(x.jsx)(u.EuiConfirmModal,{title:f.d,onCancel:je,onConfirm:()=>{je(),ee({maintenanceWindowId:d,archive:!0},{onSuccess:o})},cancelButtonText:f.e,confirmButtonText:f.d,defaultFocusedButton:"confirm",buttonColor:"danger"},Object(x.jsx)("p",null,f.b))),e}),[je,ee,j,d,o]);return Object(n.useEffect)((()=>{B||de&&(_.current||Oe.length&&(ye("categoryIds",[...new Set(Oe.map((e=>e.category)))]),_.current=!0))}),[B,Oe,de]),Object(n.useEffect)((()=>{B&&de&&(_.current||Array.isArray(oe)||(ye("categoryIds",pe),_.current=!0))}),[B,oe,de]),Object(n.useEffect)((()=>{!S&&Array.isArray(oe)&&(N.current=oe)}),[oe,S]),Object(x.jsx)(l.Form,{form:ie},Object(x.jsx)(u.EuiFlexGroup,{direction:"column",responsive:!1},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(be,{path:"title",componentProps:{"data-test-subj":"title-field",euiFieldProps:{autoFocus:!0}}})),Object(x.jsx)(u.EuiSpacer,{size:"xs"}),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.db),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.cb)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFlexGroup,{alignItems:"flexEnd",responsive:!1},Object(x.jsx)(u.EuiFlexItem,{grow:3},Object(x.jsx)(l.UseMultiFields,{fields:{startDate:{path:"startDate",config:{label:f.V,defaultValue:m,validations:[]}},endDate:{path:"endDate",config:{label:"",defaultValue:g,validations:[]}}}},(e=>Object(x.jsx)(G,{fields:e,timezone:null!=le?le:[O],"data-test-subj":"date-field"})))),fe?Object(x.jsx)(u.EuiFlexItem,{grow:1},Object(x.jsx)(be,{path:"timezone",config:{type:l.FIELD_TYPES.COMBO_BOX,validations:[],defaultValue:[O]},componentProps:{"data-test-subj":"timezone-field",id:"timezone",euiFieldProps:{fullWidth:!0,options:me,singleSelection:{asPlainText:!0},isClearable:!1,noSuggestions:!1,placeholder:"",prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"timezone"},f.eb)}}})):null)),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(be,{path:"recurring",componentProps:{"data-test-subj":"recurring-field"}})),ge&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(k,{"data-test-subj":"recurring-form"})),p&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"}),Object(x.jsx)(be,{path:"scopedQuery"},(()=>Object(x.jsx)(X,{checked:S,onEnabledChange:we})))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"}),Object(x.jsx)(be,{path:"categoryIds"},(e=>Object(x.jsx)($,{isScopedQueryEnabled:S,isLoading:ae,selectedCategories:oe||[],availableCategories:xe,errors:e.errors.map((e=>e.message)),onChange:Se})))),p&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(be,{path:"scopedQuery"},(()=>Object(x.jsx)(ce,{featureIds:ve,query:E,filters:I,isLoading:ae,isEnabled:S,errors:M,onQueryChange:Ee,onFiltersChange:T})))),Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"})),B&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiCallOut,{title:f.d,color:"danger",iconType:"trash"},Object(x.jsx)("p",null,f.c),Object(x.jsx)(u.EuiButton,{fill:!0,color:"danger",onClick:he},f.a),Fe),Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"})),Object(x.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",gutterSize:"l",responsive:!1},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiButtonEmpty,{onClick:i,size:"s","data-test-subj":"cancelMaintenanceWindow"},f.e)),Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(L,{isLoading:K||Z,editMode:B}))))}));ge.displayName="CreateMaintenanceWindowForm"},57:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(58);case"v8light":return a(60)}},58:function(e,t,a){var n=a(48),r=a(59);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},59:function(e,t,a){(t=a(49)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t},60:function(e,t,a){var n=a(48),r=a(61);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},61:function(e,t,a){(t=a(49)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t}}]);