/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=16)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,r){e.exports=r(27)(2)},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,r){"use strict";var a,n=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function s(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function i(e,t){for(var r={},a=[],n=0;n<e.length;n++){var i=e[n],c=t.base?i[0]+t.base:i[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var p=s(u),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(o[p].references++,o[p].updater(d)):o.push({identifier:u,updater:b(d,t),references:1}),a.push(u)}return a}function c(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var o=r.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var s=n(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,n);else{var o=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function d(e,t,r){var a=r.css,n=r.media,o=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var h=null,f=0;function b(e,t){var r,a,n;if(t.singleton){var o=f++;r=h||(h=c(t)),a=p.bind(null,r,o,!1),n=p.bind(null,r,o,!0)}else r=c(t),a=d.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var r=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<r.length;a++){var n=s(r[a]);o[n].references--}for(var c=i(e,t),l=0;l<r.length;l++){var u=s(r[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}r=c}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,a,n,o=e[1]||"",s=e[3];if(!s)return o;if(t&&"function"==typeof btoa){var i=(r=s,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(n," */")),c=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,a){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(a)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(n[s]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);a&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){r.r(t);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(a))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2);t.default=function(){var e=a.useRef(!1),t=a.useCallback((function(){return e.current}),[]);return a.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=r(2),o=a.__importDefault(r(23));t.default=function(e,t){var r=n.useState(t),a=r[0],s=r[1];return o.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(7),n=r(2),o=a.__importDefault(r(24));t.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var a=o.default(e,t),s=a[0],i=a[1],c=a[2];return n.useEffect(c,r),[s,i]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),n=r(25).isClient?window:null,o=function(e){return!!e.addEventListener},s=function(e){return!!e.on};t.default=function(e,t,r,i){void 0===r&&(r=n),a.useEffect((function(){if(t&&r)return o(r)?r.addEventListener(e,t,i):s(r)&&r.on(e,t,i),function(){o(r)?r.removeEventListener(e,t,i):s(r)&&r.off(e,t,i)}}),[e,t,r,JSON.stringify(i)])}},function(e,t,r){r(17),__kbnBundles__.define("plugin/globalSearchBar/public",r,28)},function(e,t,r){r.p=window.__kbnPublicPath__.globalSearchBar},function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(19);case"v8light":return r(21)}},function(e,t,r){var a=r(9),n=r(20);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(10)(!1)).push([e.i,".kbnSearchOption__tagsList{display:inline-block;line-height:16px!important}.kbnSearchOption__tagsList .kbnSearchOption__tagsListItem{display:inline-block;margin-right:8px;max-width:80px}.euiSelectableListItem-isFocused .kbnSearchOption__tagsList{border-right:1px solid #343741;margin-right:4px}@media only screen and (max-width:574px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:575px) and (max-width:767px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:768px) and (max-width:991px){.kbnSearchBar{width:400px}}@media only screen and (min-width:992px) and (max-width:1199px){.kbnSearchBar{width:400px}}@media only screen and (min-width:1200px){.kbnSearchBar{width:600px}}",""]),e.exports=t},function(e,t,r){var a=r(9),n=r(22);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},function(e,t,r){(t=r(10)(!1)).push([e.i,".kbnSearchOption__tagsList{display:inline-block;line-height:16px!important}.kbnSearchOption__tagsList .kbnSearchOption__tagsListItem{display:inline-block;margin-right:8px;max-width:80px}.euiSelectableListItem-isFocused .kbnSearchOption__tagsList{border-right:1px solid #d3dae6;margin-right:4px}@media only screen and (max-width:574px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:575px) and (max-width:767px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:768px) and (max-width:991px){.kbnSearchBar{width:400px}}@media only screen and (min-width:992px) and (max-width:1199px){.kbnSearchBar{width:400px}}@media only screen and (min-width:1200px){.kbnSearchBar{width:600px}}",""]),e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),n="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2);t.default=function(e,t){void 0===t&&(t=0);var r=a.useRef(!1),n=a.useRef(),o=a.useRef(e),s=a.useCallback((function(){return r.current}),[]),i=a.useCallback((function(){r.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){r.current=!0,o.current()}),t)}),[t]),c=a.useCallback((function(){r.current=null,n.current&&clearTimeout(n.current)}),[]);return a.useEffect((function(){o.current=e}),[e]),a.useEffect((function(){return i(),c}),[t]),[s,c,i]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=r(7).__importDefault(r(26));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,n,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=a;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=a;0!=n--;){var s=o[n];if(!("_owner"===s&&t.$$typeof||e(t[s],r[s])))return!1}return!0}return t!=t&&r!=r}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return Y}));var a=r(4),n=r(11),o=r(2),s=r(8),i=r.n(s),c=r(0),l=r(1),u=r(14),p=r.n(u),d=r(15),h=r.n(d),f=r(12),b=r.n(f),g=r(13),_=r.n(g);const m=navigator.platform.toLowerCase().indexOf("mac")>=0,E=new FocusEvent("focusout",{bubbles:!0}),v=(e,t)=>e.score<t.score?1:e.score>t.score?-1:0,S=(e,t)=>{const r=e.title.toUpperCase(),a=t.title.toUpperCase();return r<a?-1:r>a?1:0};var x=r(3);const y=({children:e})=>Object(c.jsx)("ul",{className:"kbnSearchOption__tagsList","aria-label":x.i18n.translate("xpack.globalSearchBar.searchBar.optionTagListAriaLabel",{defaultMessage:"Tags"})},e),T=({color:e,name:t,id:r})=>Object(c.jsx)("li",{className:"kbnSearchOption__tagsListItem",key:r},Object(c.jsx)(l.EuiBadge,{color:e},t)),j=({tags:e,searchTagIds:t})=>{if(!(e.length>3))return Object(c.jsx)(y,null,e.map(T));e.sort((e=>t.find((t=>t===e.id))?-1:1));const r=e.splice(3),a=x.i18n.translate("xpack.globalSearchBar.searchbar.overflowTagsAriaLabel",{defaultMessage:"{n} more {n, plural, one {tag} other {tags}}: {tags}",values:{n:r.length,tags:r.map((({name:e})=>e))}});return Object(c.jsx)(y,null,e.map(T),Object(c.jsx)("li",{className:"kbnSearchOption__tagsListItem","aria-label":a},Object(c.jsx)(l.EuiBadge,{title:a},"+",r.length)))},O=e=>{const{key:t,label:r,description:a,icon:n,suggestedSearch:o}=e;return{key:t,label:r,type:"__suggestion__",icon:{type:n},suggestion:o,meta:[{text:a}],"data-test-subj":"nav-search-option"}},C=["tag","type"],k={tag:["tags"],type:["types"]},R=e=>e.map((e=>String(e))),A={placeholderText:x.i18n.translate("xpack.globalSearchBar.searchBar.placeholder",{defaultMessage:"Find apps, content, and more."}),popoverButton:x.i18n.translate("xpack.globalSearchBar.searchBar.mobileSearchButtonAriaLabel",{defaultMessage:"Site-wide search"}),showSearchAriaText:x.i18n.translate("xpack.globalSearchBar.searchBar.showSearchAriaText",{defaultMessage:"Show search bar"}),closeSearchAriaText:x.i18n.translate("xpack.globalSearchBar.searchBar.closeSearchAriaText",{defaultMessage:"Close search bar"}),keyboardShortcutTooltip:{prefix:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.description",{defaultMessage:"Keyboard shortcut"}),onMac:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.macCommandDescription",{defaultMessage:"Command + /"}),onNotMac:x.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.windowsCommandDescription",{defaultMessage:"Control + /"})}},L=(e,t)=>e.toLowerCase()===t.toLowerCase(),M=e=>/\s/g.test(e)?`"${e}"`:e,w=({isMac:e})=>Object(c.jsx)(l.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1,wrap:!0},Object(c.jsx)(l.EuiFlexItem,null,Object(c.jsx)(l.EuiText,{color:"subdued",size:"xs"},Object(c.jsx)("p",null,Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextPrefix",defaultMessage:"Filter by"})," ",Object(c.jsx)(l.EuiCode,null,"type:")," ",Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextConjunction",defaultMessage:"or"})," ",Object(c.jsx)(l.EuiCode,null,"tag:")))),Object(c.jsx)(l.EuiFlexItem,{grow:!1},Object(c.jsx)(l.EuiText,{color:"subdued",size:"xs"},Object(c.jsx)("p",null,Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutDetail",defaultMessage:"{shortcutDescription} {commandDescription}",values:{shortcutDescription:Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutInstructionDescription",defaultMessage:"Shortcut"}),commandDescription:Object(c.jsx)(l.EuiCode,null,e?Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.macCommandDescription",defaultMessage:"Command + /"}):Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.windowsCommandDescription",defaultMessage:"Control + /"}))}}))))),B=({basePath:e,darkMode:t})=>Object(c.jsx)(l.EuiFlexGroup,{style:{minHeight:300},"data-test-subj":"nav-search-no-results",direction:"column",gutterSize:"xs",alignItems:"center",justifyContent:"center"},Object(c.jsx)(l.EuiFlexItem,{grow:!1},Object(c.jsx)(l.EuiImage,{alt:x.i18n.translate("xpack.globalSearchBar.searchBar.noResultsImageAlt",{defaultMessage:"Illustration of black hole"}),size:"fullWidth",url:`${e}illustration_product_no_search_results_${t?"dark":"light"}.svg`}),Object(c.jsx)(l.EuiText,{size:"m"},Object(c.jsx)("p",null,Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResultsHeading",defaultMessage:"No results found"}))),Object(c.jsx)("p",null,Object(c.jsx)(a.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResults",defaultMessage:"Try searching for applications, dashboards, visualizations, and more."}))));r(18);const I=e=>Object(c.jsx)(B,{darkMode:e.darkMode,basePath:e.basePathUrl}),D=()=>Object(c.jsx)(l.EuiFlexGroup,{direction:"column",justifyContent:"center",style:{minHeight:"300px"}},Object(c.jsx)(l.EuiFlexItem,{grow:!1},Object(c.jsx)(l.EuiLoadingSpinner,{size:"xl"})));var P={name:"nvzj33",styles:"max-block-size:75vh"};const N=e=>{const{globalSearch:t,taggingApi:r,navigateToUrl:a,reportEvent:n,chromeStyle$:s,...i}=e,u=b()(),{euiTheme:d}=Object(l.useEuiTheme)(),f=_()(s),[g,y]=Object(o.useState)(!1),T=Object(o.useRef)(null),[B,N]=Object(o.useState)(!1),[U,F]=Object(o.useState)(""),[V,$]=Object(o.useState)(""),[K,H]=Object(o.useState)(null),[G,J]=Object(o.useState)(null),z=Object(o.useRef)(null),[Y,q]=Object(o.useState)([]),[Q,W]=Object(o.useState)([]),[X,Z]=Object(o.useState)(!0),ee="__unknown__";Object(o.useEffect)((()=>{B&&(async()=>{const e=await t.getSearchableTypes();W(e)})()}),[t,B]);const te=Object(o.useCallback)((e=>(({searchTerm:e,searchableTypes:t,tagCache:r})=>{const a=[],n=e.trim(),o=((e,t)=>{for(const r of e)if(L(r,t))return r})(t,n);if(o){const e=M(o);a.push({key:"__type__suggestion__",label:`type: ${o}`,icon:"filter",description:x.i18n.translate("xpack.globalSearchBar.suggestions.filterByTypeLabel",{defaultMessage:"Filter by type"}),suggestedSearch:`type:${e}`})}if(r&&e){const e=r.getState().find((e=>L(e.name,n)));if(e){const t=M(e.name);a.push({key:"__tag__suggestion__",label:`tag: ${e.name}`,icon:"tag",description:x.i18n.translate("xpack.globalSearchBar.suggestions.filterByTagLabel",{defaultMessage:"Filter by tag name"}),suggestedSearch:`tag:${t}`})}}return a})({searchTerm:e,searchableTypes:Q,tagCache:null==r?void 0:r.cache})),[r,Q]),re=Object(o.useCallback)(((e,t,a=[])=>{u()&&q([...t.map(O),...e.map((e=>{var t;return((e,t,r)=>{var a;const{id:n,title:o,url:s,icon:i,type:l,meta:u={}}=e,{tagIds:p=[],categoryLabel:d=""}=u,h="application"===l||"integration"===l||"enterprise search"===l.toLowerCase()||"search"===l.toLowerCase(),f={key:n,label:o,url:s,type:l,icon:{type:h&&i?i:"empty"},"data-test-subj":"nav-search-option"};var b;if(f.meta="application"===l?[{text:d}]:[{text:(b=null!==(a=u.displayName)&&void 0!==a?a:l,(b.charAt(0).toUpperCase()+b.slice(1)).replace(/-/g," "))}],r&&p.length){const a=p.map(r).filter(((t,r)=>!!t||(console.warn(`SearchBar: Tag with id "${p[r]}" not found. Tag "${p[r]}" is referenced by the search result "${e.type}:${e.id}". Skipping displaying the missing tag.`),!1)));a.length&&(f.append=Object(c.jsx)(j,{tags:a,searchTagIds:t}))}return f})(e,null!==(t=null==a?void 0:a.filter((e=>e!==ee)))&&void 0!==t?t:[],null==r?void 0:r.ui.getTag)}))])}),[u,q,r]);p()((()=>{if(B){var e;z.current&&(z.current.unsubscribe(),z.current=null);const a=te(U);let o=[];0!==U.length&&n.searchRequest();const s=(e=>{let t;try{t=l.Query.parse(e)}catch(t){return{term:e,filters:{unknowns:{}}}}const r=(e=>{var t;let r;return e.ast.getTermClauses().length&&(r=e.ast.getTermClauses().map((e=>e.value)).join(" ").replace(/\s{2,}/g," ").trim()),null!==(t=r)&&void 0!==t&&t.length?r:void 0})(t),a=((e,t)=>{const r={};Object.entries(t).forEach((([e,t])=>{t.forEach((t=>{r[t]=e}))}));const a=new Map;return e.forEach(((e,t)=>{var n,o;const s=null!==(n=r[t])&&void 0!==n?n:t;a.set(s,[...null!==(o=a.get(s))&&void 0!==o?o:[],...e])})),a})((e=>{const t=new Map;return e.ast.clauses.forEach((e=>{if("field"===e.type){var r;const{field:a,value:n}=e;t.set(a,[...null!==(r=t.get(a))&&void 0!==r?r:[],...Array.isArray(n)?n:[n]])}})),t})(t),k),n=[...a.entries()].filter((([e])=>!C.includes(e))).reduce(((e,[t,r])=>({...e,[t]:r})),{}),o=a.get("tag"),s=a.get("type");return{term:r,filters:{tags:o?R(o):void 0,types:s?R(s):void 0,unknowns:n}}})(U),i=r&&s.filters.tags?s.filters.tags.map((e=>{var t;return null!==(t=r.ui.getTagIdFromName(e))&&void 0!==t?t:ee})):void 0,c={term:s.term,types:s.filters.types,tags:i};$(null!==(e=s.term)&&void 0!==e?e:""),z.current=t.find(c,{}).subscribe({next:({results:e})=>{if(U.length>0)return o=[...e,...o].sort(v),void re(o,a,c.tags);e=e.filter((({type:e})=>"application"===e)),o=[...e,...o].sort(S),re(o,a,c.tags)},error:e=>{n.error({message:e,searchValue:U})},complete:()=>{}})}}),350,[U,te,Q,B]);const ae=Object(o.useCallback)((e=>{var t;"/"===e.key&&(m?e.metaKey:e.ctrlKey)&&(e.preventDefault(),n.shortcutUsed(),"project"!==f||g?K?K.focus():G&&G.children[0].click():null===(t=T.current)||void 0===t||t.click())}),[f,g,G,K,n]),ne=Object(o.useCallback)((e=>{var t;let r=null;const o=e.find((({checked:e},t)=>{const a="on"===e;return a&&(r=t+1),a}));if(!o)return;const s=null!==(t=o.label)&&void 0!==t?t:null,{url:i,type:c,suggestion:l}=o;if("__suggestion__"!==c){try{if("application"===c){var u;const e=`${(null!==(u=o.key)&&void 0!==u?u:"unknown").toLowerCase().replaceAll(" ","_")}`;n.navigateToApplication({application:e,searchValue:U,selectedLabel:s,selectedRank:r})}else n.navigateToSavedObject({type:c,searchValue:U,selectedLabel:s,selectedRank:r})}catch(e){n.error({message:e,searchValue:U}),console.log("Error trying to track searchbar metrics",e)}a(i),document.activeElement.blur(),K&&(oe(),K.dispatchEvent(E))}else F(l)}),[n,a,K,U]),oe=()=>F(""),se=`${A.keyboardShortcutTooltip.prefix}: ${m?A.keyboardShortcutTooltip.onMac:A.keyboardShortcutTooltip.onNotMac}`;return h()("keydown",ae),"project"!==f||g?Object(c.jsx)(l.EuiSelectableTemplateSitewide,{isPreFiltered:!0,onChange:ne,options:Y,className:"kbnSearchBar",popoverButtonBreakpoints:["xs","s"],singleSelection:!0,renderOption:e=>Object(l.euiSelectableTemplateSitewideRenderOptions)(e,V),listProps:{className:"eui-yScroll",css:P},searchProps:{autoFocus:"project"===f,value:U,onInput:e=>F(e.currentTarget.value),"data-test-subj":"nav-search-input",inputRef:H,compressed:!0,"aria-label":A.placeholderText,placeholder:A.placeholderText,onFocus:()=>{n.searchFocus(),N(!0),Z(!1)},onBlur:()=>{n.searchBlur(),Z(!U.length)},fullWidth:!0,append:"project"===f?Object(c.jsx)(l.EuiButtonIcon,{"aria-label":A.closeSearchAriaText,color:"text","data-test-subj":"nav-search-conceal",iconType:"cross",onClick:()=>{n.searchBlur(),y(!1)}}):X?Object(c.jsx)(l.EuiFormLabel,{title:se,css:Object(c.css)({fontFamily:d.font.familyCode},"","")},m?"⌘/":"^/"):void 0},emptyMessage:Object(c.jsx)(D,null),noMatchesMessage:Object(c.jsx)(I,i),popoverProps:{"data-test-subj":"nav-search-popover",panelClassName:"navSearch__panel",repositionOnScroll:!0,buttonRef:J,panelStyle:{marginTop:"6px"}},popoverButton:Object(c.jsx)(l.EuiHeaderSectionItemButton,{"aria-label":A.popoverButton},Object(c.jsx)(l.EuiIcon,{type:"search",size:"m"})),popoverFooter:Object(c.jsx)(w,{isMac:m})}):Object(c.jsx)(l.EuiHeaderSectionItemButton,{"aria-label":A.showSearchAriaText,buttonRef:T,color:"text","data-test-subj":"nav-search-reveal",iconType:"search",onClick:()=>{y(!0)}})};var U=r(6),F=r.n(U),V=r(5);let $,K,H,G;!function(e){e.UNHANDLED_ERROR="unhandled_error",e.SHORTCUT_USED="shortcut_used",e.SEARCH_FOCUS="search_focus",e.SEARCH_REQUEST="search_request"}($||($={})),function(e){e.USER_NAVIGATED_TO_APPLICATION="user_navigated_to_application",e.USER_NAVIGATED_TO_SAVED_OBJECT="user_navigated_to_saved_object"}(K||(K={})),function(e){e.CLICK_APPLICATION="global_search_bar_click_application",e.CLICK_SAVED_OBJECT="global_search_bar_click_saved_object",e.SEARCH_BLUR="global_search_bar_blur",e.ERROR="global_search_bar_error"}(H||(H={})),function(e){e.APPLICATION="application",e.SAVED_OBJECT_TYPE="saved_object_type",e.FOCUS_TIME="focus_time_ms",e.SELECTED_LABEL="selected_label",e.SELECTED_RANK="selected_rank",e.ERROR_MESSAGE="error_message",e.TERMS="terms"}(G||(G={}));class event_reporter_EventReporter{constructor({analytics:e,usageCollection:t}){F()(this,"reportEvent",void 0),F()(this,"trackUiMetric",void 0),F()(this,"focusStart",1/0),this.reportEvent=e.reportEvent,this.trackUiMetric=t?(e,r,a)=>{let n;switch(r){case K.USER_NAVIGATED_TO_APPLICATION:case K.USER_NAVIGATED_TO_SAVED_OBJECT:n=[e,[r,`${r}_${a}`]];break;default:n=[e,r]}t.reportUiCounter("global_search_bar",...n)}:()=>{}}searchFocus(){this.trackUiMetric(V.METRIC_TYPE.COUNT,$.SEARCH_FOCUS),this.focusStart=Date.now()}searchBlur(){const e=Date.now()-this.focusStart;e>0&&this.reportEvent(H.SEARCH_BLUR,{[G.FOCUS_TIME]:e}),this.focusStart=1/0}searchRequest(){this.trackUiMetric(V.METRIC_TYPE.COUNT,$.SEARCH_REQUEST)}shortcutUsed(){this.trackUiMetric(V.METRIC_TYPE.COUNT,$.SHORTCUT_USED)}navigateToApplication(e){var t,r;const a=null!==(t=null==e?void 0:e.application)&&void 0!==t?t:"unknown";this.trackUiMetric(V.METRIC_TYPE.CLICK,K.USER_NAVIGATED_TO_APPLICATION,a);const n=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(H.CLICK_APPLICATION,{[G.TERMS]:n,[G.APPLICATION]:a,[G.SELECTED_RANK]:e.selectedRank,[G.SELECTED_LABEL]:e.selectedLabel})}navigateToSavedObject(e){var t,r;const a=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"unknown";this.trackUiMetric(V.METRIC_TYPE.CLICK,K.USER_NAVIGATED_TO_SAVED_OBJECT,a);const n=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(H.CLICK_SAVED_OBJECT,{[G.TERMS]:n,[G.SAVED_OBJECT_TYPE]:a,[G.SELECTED_RANK]:e.selectedRank,[G.SELECTED_LABEL]:e.selectedLabel})}error(e){var t,r;this.trackUiMetric(V.METRIC_TYPE.COUNT,$.UNHANDLED_ERROR);const a=null!==(t=null==e?void 0:e.message.toString())&&void 0!==t?t:"unknown",n=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(H.ERROR,{[G.TERMS]:n,[G.ERROR_MESSAGE]:a})}}const J={[G.APPLICATION]:{[G.APPLICATION]:{type:"keyword",_meta:{description:"The name of the application selected in the global search bar results."}}},[G.SAVED_OBJECT_TYPE]:{[G.SAVED_OBJECT_TYPE]:{type:"keyword",_meta:{description:"The type of the saved object selected in the global search bar results."}}},[G.FOCUS_TIME]:{[G.FOCUS_TIME]:{type:"long",_meta:{description:"The length in milliseconds the global search bar had the cursor focused."}}},[G.SELECTED_RANK]:{[G.SELECTED_RANK]:{type:"short",_meta:{description:"The ranking of placement of the selected option in the results list."}}},[G.SELECTED_LABEL]:{[G.SELECTED_LABEL]:{type:"keyword",_meta:{description:"The text of the selected option in the results list."}}},[G.ERROR_MESSAGE]:{[G.ERROR_MESSAGE]:{type:"keyword",_meta:{description:"A message from an error that was caught."}}},[G.TERMS]:{[G.TERMS]:{type:"keyword",_meta:{description:"The search terms entered by the user."}}}},z=[{eventType:H.CLICK_APPLICATION,schema:{...J[G.APPLICATION],...J[G.TERMS],...J[G.SELECTED_RANK],...J[G.SELECTED_LABEL]}},{eventType:H.CLICK_SAVED_OBJECT,schema:{...J[G.SAVED_OBJECT_TYPE],...J[G.TERMS],...J[G.SELECTED_RANK],...J[G.SELECTED_LABEL]}},{eventType:H.SEARCH_BLUR,schema:{...J[G.FOCUS_TIME]}},{eventType:H.ERROR,schema:{...J[G.ERROR_MESSAGE],...J[G.TERMS]}}];class plugin_GlobalSearchBarPlugin{setup({analytics:e}){return z.forEach((t=>{e.registerEventType(t)})),{}}start(e,t){return e.chrome.navControls.registerCenter(this.getNavControl({core:e,...t})),{}}getNavControl(e){const{core:t,globalSearch:r,savedObjectsTagging:o,usageCollection:s}=e,{application:l,http:u,theme:p,uiSettings:d}=t,h=new event_reporter_EventReporter({analytics:t.analytics,usageCollection:s});return{order:1e3,mount:e=>(i.a.render(Object(c.jsx)(n.KibanaThemeProvider,{theme$:p.theme$},Object(c.jsx)(a.I18nProvider,null,Object(c.jsx)(N,{globalSearch:r,navigateToUrl:l.navigateToUrl,taggingApi:o,basePathUrl:u.basePath.prepend("/plugins/globalSearchBar/assets/"),darkMode:d.get("theme:darkMode"),chromeStyle$:t.chrome.getChromeStyle$(),reportEvent:h}))),e),()=>i.a.unmountComponentAtNode(e))}}}const Y=()=>new plugin_GlobalSearchBarPlugin}]);