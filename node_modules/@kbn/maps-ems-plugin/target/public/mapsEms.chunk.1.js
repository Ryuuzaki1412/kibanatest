(window.mapsEms_bundle_jsonpfunction=window.mapsEms_bundle_jsonpfunction||[]).push([[1],[,,,,,,,,,,function(t,e,r){const n=r(12),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(13),{safeRe:a,t:s}=r(14),u=r(18),{compareIdentifiers:c}=r(19);class SemVer{constructor(t,e){if(e=u(e),t instanceof SemVer){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const r=t.trim().match(e.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<i)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(n("SemVer.compare",this.version,this.options,t),!(t instanceof SemVer)){if("string"==typeof t&&t===this.version)return 0;t=new SemVer(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof SemVer||(t=new SemVer(t,this.options)),c(this.major,t.major)||c(this.minor,t.minor)||c(this.patch,t.patch)}comparePre(t){if(t instanceof SemVer||(t=new SemVer(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const r=this.prerelease[e],o=t.prerelease[e];if(n("prerelease compare",e,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return c(r,o)}while(++e)}compareBuild(t){t instanceof SemVer||(t=new SemVer(t,this.options));let e=0;do{const r=this.build[e],o=t.build[e];if(n("prerelease compare",e,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return c(r,o)}while(++e)}inc(t,e,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,r),this.inc("pre",e,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,r),this.inc("pre",e,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(r)?1:0;if(!e&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(e===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let n=[e,t];!1===r&&(n=[e]),0===c(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=SemVer},function(t,e,r){const n=r(10),o=r(15),{safeRe:i,t:a}=r(14);t.exports=(t,e)=>{if(t instanceof n)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let r=null;if((e=e||{}).rtl){let e;for(;(e=i[a.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)r&&e.index+e[0].length===r.index+r[0].length||(r=e),i[a.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;i[a.COERCERTL].lastIndex=-1}else r=t.match(i[a.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)}},function(t,e,r){(function(e){const r="object"==typeof e&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=r}).call(this,r(17))},function(t,e){const r=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},function(t,e,r){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=r(13),a=r(12),s=(e=t.exports={}).re=[],u=e.safeRe=[],c=e.src=[],l=e.t={};let h=0;const f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[f,o]],y=(t,e,r)=>{const n=(t=>{for(const[e,r]of p)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t})(e),o=h++;a(t,o,e),l[t]=o,c[o]=e,s[o]=new RegExp(e,r?"g":void 0),u[o]=new RegExp(n,r?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),y("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[l.NUMERICIDENTIFIER]}|${c[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NUMERICIDENTIFIERLOOSE]}|${c[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${f}+`),y("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),y("FULL",`^${c[l.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),y("LOOSE",`^${c[l.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),y("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),y("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),y("COERCERTL",c[l.COERCE],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",y("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",y("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},function(t,e,r){const n=r(10);t.exports=(t,e,r=!1)=>{if(t instanceof n)return t;try{return new n(t,e)}catch(t){if(!r)return null;throw t}}},function(t,e,r){"use strict";var n=r(21),o=r(22);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){return o.isString(t)&&(t=b(t)),t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},d=r(23);function b(t,e,r){if(t&&o.isObject(t)&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}i.prototype.parse=function(t,e,r){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var b=t=c.join(s);if(b=b.trim(),!r&&1===t.split("#").length){var E=u.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=e?d.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(b);if(w){var _=(w=w[0]).toLowerCase();this.protocol=_,b=b.substr(w.length)}if(r||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||w&&v[w]||(b=b.substr(2),this.slashes=!0)}if(!v[w]&&(x||w&&!g[w])){for(var k,O,S=-1,L=0;L<f.length;L++)-1!==(I=b.indexOf(f[L]))&&(-1===S||I<S)&&(S=I);for(-1!==(O=-1===S?b.lastIndexOf("@"):b.lastIndexOf("@",S))&&(k=b.slice(0,O),b=b.slice(O+1),this.auth=decodeURIComponent(k)),S=-1,L=0;L<h.length;L++){var I;-1!==(I=b.indexOf(h[L]))&&(-1===S||I<S)&&(S=I)}-1===S&&(S=b.length),this.host=b.slice(0,S),b=b.slice(S),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),R=(L=0,P.length);L<R;L++){var j=P[L];if(j&&!j.match(p)){for(var N="",T=0,C=j.length;T<C;T++)j.charCodeAt(T)>127?N+="x":N+=j[T];if(!N.match(p)){var F=P.slice(0,L),U=P.slice(L+1),M=j.match(y);M&&(F.push(M[1]),U.unshift(M[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=n.toASCII(this.hostname));var $=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+$,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[_])for(L=0,R=l.length;L<R;L++){var G=l[L];if(-1!==b.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),b=b.split(G).join(V)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var X=b.indexOf("?");if(-1!==X?(this.search=b.substr(X),this.query=b.substr(X+1),e&&(this.query=d.parse(this.query)),b=b.slice(0,X)):e&&(this.search="",this.query={}),b&&(this.pathname=b),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){$=this.pathname||"";var B=this.search||"";this.path=$+B}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=d.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},i.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(r[l]=t[l])}return g[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!g[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];r[p]=t[p]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||v[t.protocol])r.pathname=t.pathname;else{for(var y=(t.pathname||"").split("/");y.length&&!(t.host=y.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==y[0]&&y.unshift(""),y.length<2&&y.unshift(""),r.pathname=y.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",d=r.search||"";r.path=m+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),E=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=E||b||r.host&&t.pathname,_=w,x=r.pathname&&r.pathname.split("/")||[],k=(y=t.pathname&&t.pathname.split("/")||[],r.protocol&&!g[r.protocol]);if(k&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===y[0]?y[0]=t.host:y.unshift(t.host)),t.host=null),w=w&&(""===y[0]||""===x[0])),E)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,x=y;else if(y.length)x||(x=[]),x.pop(),x=x.concat(y),r.search=t.search,r.query=t.query;else if(!o.isNullOrUndefined(t.search))return k&&(r.hostname=r.host=x.shift(),(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),r.search=t.search,r.query=t.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!x.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=x.slice(-1)[0],S=(r.host||t.host||x.length>1)&&("."===O||".."===O)||""===O,L=0,I=x.length;I>=0;I--)"."===(O=x[I])?x.splice(I,1):".."===O?(x.splice(I,1),L++):L&&(x.splice(I,1),L--);if(!w&&!_)for(;L--;L)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),S&&"/"!==x.join("/").substr(-1)&&x.push("");var A,P=""===x[0]||x[0]&&"/"===x[0].charAt(0);return k&&(r.hostname=r.host=P?"":x.length?x.shift():"",(A=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=A.shift(),r.host=r.hostname=A.shift())),(w=w||r.host&&x.length)&&!P&&x.unshift(""),x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){t.exports=r(4)(652)},function(t,e){const r=Object.freeze({loose:!0}),n=Object.freeze({});t.exports=t=>t?"object"!=typeof t?r:t:n},function(t,e){const r=/^[0-9]+$/,n=(t,e)=>{const n=r.test(t),o=r.test(e);return n&&o&&(t=+t,e=+e),t===e?0:n&&!o?-1:o&&!n?1:t<e?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(t,e)=>n(e,t)}},function(t,e,r){t.exports=r(4)(70)},function(t,e,r){t.exports=r(4)(2971)},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(24),e.encode=e.stringify=r(25)},function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,p,y,m=t[l].replace(s,"%20"),v=m.indexOf(r);v>=0?(h=m.substr(0,v),f=m.substr(v+1)):(h=m,f=""),p=decodeURIComponent(h),y=decodeURIComponent(f),n(a,p)?o(a[p])?a[p].push(y):a[p]=[a[p],y]:a[p]=y}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(a(t),(function(a){var s=encodeURIComponent(n(a))+r;return o(t[a])?i(t[a],(function(t){return s+encodeURIComponent(n(t))})).join(e):s+encodeURIComponent(n(t[a]))})).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){!function(t){"use strict";function e(t){return t}function r(t){if(null==t)return e;var r,n,o=t.scale[0],i=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(r=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(r+=t[0])*o+a,l[1]=(n+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}}function n(t){var e,n=r(t.transform),o=1/0,i=o,a=-o,s=-o;function u(t){(t=n(t))[0]<o&&(o=t[0]),t[0]>a&&(a=t[0]),t[1]<i&&(i=t[1]),t[1]>s&&(s=t[1])}function c(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(c);break;case"Point":u(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(u)}}for(e in t.arcs.forEach((function(t){for(var e,r=-1,u=t.length;++r<u;)(e=n(t[r],r))[0]<o&&(o=e[0]),e[0]>a&&(a=e[0]),e[1]<i&&(i=e[1]),e[1]>s&&(s=e[1])})),t.objects)c(t.objects[e]);return[o,i,a,s]}function o(t,e){var r=e.id,n=e.bbox,o=null==e.properties?{}:e.properties,a=i(t,e);return null==r&&null==n?{type:"Feature",properties:o,geometry:a}:null==n?{type:"Feature",id:r,properties:o,geometry:a}:{type:"Feature",id:r,bbox:n,properties:o,geometry:a}}function i(t,e){var n=r(t.transform),o=t.arcs;function i(t,e){e.length&&e.pop();for(var r=o[t<0?~t:t],i=0,a=r.length;i<a;++i)e.push(n(r[i],i));t<0&&function(t,e){for(var r,n=t.length,o=n-e;o<--n;)r=t[o],t[o++]=t[n],t[n]=r}(e,a)}function a(t){return n(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)i(t[r],e);return e.length<2&&e.push(e[0]),e}function u(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function c(t){return t.map(u)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=a(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(a);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=c(e.arcs);break;case"MultiPolygon":r=e.arcs.map(c);break;default:return null}return{type:n,coordinates:r}}(e)}function a(t,e){var r={},n={},o={},i=[],a=-1;function s(t,e){for(var n in t){var o=t[n];delete e[o.start],delete o.start,delete o.end,o.forEach((function(t){r[t<0?~t:t]=1})),i.push(o)}}return e.forEach((function(r,n){var o,i=t.arcs[r<0?~r:r];i.length<3&&!i[1][0]&&!i[1][1]&&(o=e[++a],e[a]=r,e[n]=o)})),e.forEach((function(e){var r,i,a=function(e){var r,n=t.arcs[e<0?~e:e],o=n[0];return t.transform?(r=[0,0],n.forEach((function(t){r[0]+=t[0],r[1]+=t[1]}))):r=n[n.length-1],e<0?[r,o]:[o,r]}(e),s=a[0],u=a[1];if(r=o[s])if(delete o[r.end],r.push(e),r.end=u,i=n[u]){delete n[i.start];var c=i===r?r:r.concat(i);n[c.start=r.start]=o[c.end=i.end]=c}else n[r.start]=o[r.end]=r;else if(r=n[u])if(delete n[r.start],r.unshift(e),r.start=s,i=o[s]){delete o[i.end];var l=i===r?r:i.concat(r);n[l.start=i.start]=o[l.end=r.end]=l}else n[r.start]=o[r.end]=r;else n[(r=[e]).start=s]=o[r.end=u]=r})),s(o,n),s(n,o),e.forEach((function(t){r[t<0?~t:t]||i.push([t])})),i}function s(t,e,r){var n,o,i;if(arguments.length>1)n=function(t,e,r){var n,o=[],i=[];function a(t){var e=t<0?~t:t;(i[e]||(i[e]=[])).push({i:t,g:n})}function s(t){t.forEach(a)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}function l(t){switch(n=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":c(t.arcs)}}return l(e),i.forEach(null==r?function(t){o.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&o.push(t[0].i)}),o}(0,e,r);else for(o=0,n=new Array(i=t.arcs.length);o<i;++o)n[o]=o;return{type:"MultiLineString",arcs:a(t,n)}}function u(t,e){var r={},n=[],o=[];function s(t){t.forEach((function(e){e.forEach((function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)}))})),n.push(t)}function u(e){return function(t){for(var e,r=-1,n=t.length,o=t[n-1],i=0;++r<n;)e=o,o=t[r],i+=e[0]*o[1]-e[1]*o[0];return Math.abs(i)}(i(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":s(e.arcs);break;case"MultiPolygon":e.arcs.forEach(s)}})),n.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,o.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),n.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:o.map((function(e){var n,o=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].length<2&&o.push(t)}))}))})),(n=(o=a(t,o)).length)>1)for(var i,s,c=1,l=u(o[0]);c<n;++c)(i=u(o[c]))>l&&(s=o[0],o[0]=o[c],o[c]=s,l=i);return o})).filter((function(t){return t.length>0}))}}function c(t,e){for(var r=0,n=t.length;r<n;){var o=r+n>>>1;t[o]<e?r=o+1:n=o}return r}function l(t){if(null==t)return e;var r,n,o=t.scale[0],i=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(r=n=0);var u=2,c=t.length,l=new Array(c),h=Math.round((t[0]-a)/o),f=Math.round((t[1]-s)/i);for(l[0]=h-r,r=h,l[1]=f-n,n=f;u<c;)l[u]=t[u],++u;return l}}t.bbox=n,t.feature=function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return o(t,e)}))}:o(t,e)},t.merge=function(t){return i(t,u.apply(this,arguments))},t.mergeArcs=u,t.mesh=function(t){return i(t,s.apply(this,arguments))},t.meshArcs=s,t.neighbors=function(t){var e={},r=t.map((function(){return[]}));function n(t,r){t.forEach((function(t){t<0&&(t=~t);var n=e[t];n?n.push(r):e[t]=[r]}))}function o(t,e){t.forEach((function(t){n(t,e)}))}var i={LineString:n,MultiLineString:o,Polygon:o,MultiPolygon:function(t,e){t.forEach((function(t){o(t,e)}))}};for(var a in t.forEach((function t(e,r){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,r)})):e.type in i&&i[e.type](e.arcs,r)})),e)for(var s=e[a],u=s.length,l=0;l<u;++l)for(var h=l+1;h<u;++h){var f,p=s[l],y=s[h];(f=r[p])[a=c(f,y)]!==y&&f.splice(a,0,y),(f=r[y])[a=c(f,p)]!==p&&f.splice(a,0,p)}return r},t.quantize=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)u=t.bbox;else{if(!((r=Math.floor(e))>=2))throw new Error("n must be ≥2");var r,o=(u=t.bbox||n(t))[0],i=u[1],a=u[2],s=u[3];e={scale:[a-o?(a-o)/(r-1):1,s-i?(s-i)/(r-1):1],translate:[o,i]}}var u,c,h=l(e),f=t.objects,p={};function y(t){return h(t)}function m(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(m)};break;case"Point":e={type:"Point",coordinates:y(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(y)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(c in f)p[c]=m(f[c]);return{type:"Topology",bbox:u,transform:e,objects:p,arcs:t.arcs.map((function(t){var e,r=0,n=1,o=t.length,i=new Array(o);for(i[0]=h(t[0],0);++r<o;)((e=h(t[r],r))[0]||e[1])&&(i[n++]=e);return 1===n&&(i[n++]=[0,0]),i.length=n,i}))}},t.transform=r,t.untransform=l,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){const n=r(15);t.exports=(t,e)=>{const r=n(t,e);return r?r.version:null}},function(t,e,r){const n=r(10);t.exports=(t,e)=>new n(t,e).major},function(t,e,r){const n=r(10);t.exports=(t,e)=>new n(t,e).minor},function(t,e,r){"use strict";const n=r(31),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),u=Symbol("maxAge"),c=Symbol("dispose"),l=Symbol("noDisposeOnSet"),h=Symbol("lruList"),f=Symbol("cache"),p=Symbol("updateAgeOnGet"),y=()=>1,m=(t,e,r)=>{const n=t[f].get(e);if(n){const e=n.value;if(v(t,e)){if(d(t,n),!t[s])return}else r&&(t[p]&&(n.value.now=Date.now()),t[h].unshiftNode(n));return e.value}},v=(t,e)=>{if(!e||!e.maxAge&&!t[u])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[u]&&r>t[u]},g=t=>{if(t[i]>t[o])for(let e=t[h].tail;t[i]>t[o]&&null!==e;){const r=e.prev;d(t,e),e=r}},d=(t,e)=>{if(e){const r=e.value;t[c]&&t[c](r.key,r.value),t[i]-=r.length,t[f].delete(r.key),t[h].removeNode(e)}};class Entry{constructor(t,e,r,n,o){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=o||0}}const b=(t,e,r,n)=>{let o=r.value;v(t,o)&&(d(t,r),t[s]||(o=void 0)),o&&e.call(n,o.value,o.key,t)};t.exports=class LRUCache{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[o]=t.max||1/0;const e=t.length||y;if(this[a]="function"!=typeof e?y:e,this[s]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[u]=t.maxAge||0,this[c]=t.dispose,this[l]=t.noDisposeOnSet||!1,this[p]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[o]=t||1/0,g(this)}get max(){return this[o]}set allowStale(t){this[s]=!!t}get allowStale(){return this[s]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[u]=t,g(this)}get maxAge(){return this[u]}set lengthCalculator(t){"function"!=typeof t&&(t=y),t!==this[a]&&(this[a]=t,this[i]=0,this[h].forEach((t=>{t.length=this[a](t.value,t.key),this[i]+=t.length}))),g(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[h].length}rforEach(t,e){e=e||this;for(let r=this[h].tail;null!==r;){const n=r.prev;b(this,t,r,e),r=n}}forEach(t,e){e=e||this;for(let r=this[h].head;null!==r;){const n=r.next;b(this,t,r,e),r=n}}keys(){return this[h].toArray().map((t=>t.key))}values(){return this[h].toArray().map((t=>t.value))}reset(){this[c]&&this[h]&&this[h].length&&this[h].forEach((t=>this[c](t.key,t.value))),this[f]=new Map,this[h]=new n,this[i]=0}dump(){return this[h].map((t=>!v(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[h]}set(t,e,r){if((r=r||this[u])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](e,t);if(this[f].has(t)){if(s>this[o])return d(this,this[f].get(t)),!1;const a=this[f].get(t).value;return this[c]&&(this[l]||this[c](t,a.value)),a.now=n,a.maxAge=r,a.value=e,this[i]+=s-a.length,a.length=s,this.get(t),g(this),!0}const p=new Entry(t,e,s,n,r);return p.length>this[o]?(this[c]&&this[c](t,e),!1):(this[i]+=p.length,this[h].unshift(p),this[f].set(t,this[h].head),g(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!v(this,e)}get(t){return m(this,t,!0)}peek(t){return m(this,t,!1)}pop(){const t=this[h].tail;return t?(d(this,t),t.value):null}del(t){d(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let r=t.length-1;r>=0;r--){const n=t[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const t=o-e;t>0&&this.set(n.k,n.v,t)}}}prune(){this[f].forEach(((t,e)=>m(this,e,!1)))}}},function(t,e,r){"use strict";function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)e.push(arguments[r]);return e}function o(t,e,r,n){if(!(this instanceof o))return new o(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=n,n.Node=o,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)n=arguments[t],(r=this).tail=new o(n,r.tail,null,r),r.head||(r.head=r.tail),r.length++;var r,n;return this.length},n.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)n=arguments[t],(r=this).head=new o(n,null,r.head,r),r.tail||(r.tail=r.head),r.length++;var r,n;return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},n.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},n.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},n.prototype.map=function(t,e){e=e||this;for(var r=new n,o=this.head;null!==o;)r.push(t.call(e,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(t,e){e=e||this;for(var r=new n,o=this.tail;null!==o;)r.push(t.call(e,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=t(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=t(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},n.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var o=0,i=this.head;null!==i&&o<t;o++)i=i.next;for(;null!==i&&o<e;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var o=this.length,i=this.tail;null!==i&&o>e;o--)i=i.prev;for(;null!==i&&o>t;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;null!==i&&n<t;n++)i=i.next;var a,s,u,c,l=[];for(n=0;i&&n<e;n++)l.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)a=this,s=i,u=r[n],c=void 0,null===(c=s===a.head?new o(u,null,s,a):new o(u,s,s.next,a)).next&&(a.tail=c),null===c.prev&&(a.head=c),a.length++,i=c;return l},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{r(32)(n)}catch(t){}},function(t,e,r){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},function(t,e,r){"use strict";r.r(e),r.d(e,"createEMSClient",(function(){return bt}));var n=r(11),o=r.n(n);const i="elastic-api-version";var a=r(9),s=r(8),u=r.n(s),c=r(20),l=r.n(c);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function f(t,e){if(!t)return e;var r="/"===t[t.length-1],n="/"===e[0];return!0===r&&!0===n?t+e.slice(1):r!==n?t+e:t+"/"+e}function p(t,e){if("string"==typeof t){var r=e(t);return"rgba(".concat(r.rgba().join(","),")")}if("object"==h(t)&&"stops"in t&&Array.isArray(null==t?void 0:t.stops)){var n=t.stops.map((function(t){var r=p(t[1],e);return[t[0],r]}));return Object.assign({},t,{stops:n})}return t}function y(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"screen",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return p(t,(function(t){return"mix"!==r?l.a.blend(l()(t),e,r):l.a.mix(l()(t),e,n)}))}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function g(t,e,r){return(e=d(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}var b=function(){function t(e,r,n){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"_emsClient",void 0),g(this,"_config",void 0),g(this,"_proxyPath",void 0),g(this,"_getAbsoluteUrl",(function(t){return/^https?:\/\//.test(t)?t:f(o.getApiUrl(),t)})),this._config=e,this._emsClient=r,this._proxyPath=n}var e,r;return e=t,(r=[{key:"getAttributions",value:function(){var t=this;return this._config.attribution.map((function(e){return{url:t._emsClient.getValueInLanguage(e.url),label:t._emsClient.getValueInLanguage(e.label)}}))}},{key:"getMarkdownAttribution",value:function(){var t=this;return this._config.attribution.map((function(e){var r=t._emsClient.getValueInLanguage(e.url),n=t._emsClient.getValueInLanguage(e.label);return"[".concat(n,"](").concat(r,")")})).join("|")}}])&&v(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function w(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=x(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function x(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */L=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:I(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",m="completed",v={};function g(){}function d(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==r&&n.call(x,a)&&(w=x);var k=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==E(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function I(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=A(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(E(e)+" is not iterable")}return d.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:d,configurable:!0}),d.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},O(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function I(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){I(i,n,o,a,s,"next",t)}function s(t){I(i,n,o,a,s,"throw",t)}a(void 0)}))}}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function R(t,e){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},R(t,e)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function T(t,e,r){return(e=C(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t){var e=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===E(e)?e:String(e)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R(t,e)}(k,t);var e,r,n,o,i,a,s,c,l,h,f,p,m,v,g,d,b,x=(d=k,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(d);if(b){var r=N(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return j(t)}(this,t)});function k(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,k),T(j(n=x.call(this,t,e,r)),"_config",void 0),T(j(n),"_getRasterStyleJson",u.a.once(A(L().mark((function t(){var e,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=n._getStyleUrlForLocale("raster"))){t.next=6;break}return r=n._proxyPath+n._getAbsoluteUrl(e),t.abrupt("return",n._emsClient.getManifest(n._emsClient.extendUrlWithParams(r)));case 6:return t.abrupt("return");case 7:case"end":return t.stop()}}),t)}))))),T(j(n),"_getVectorStyleJsonRaw",u.a.once(A(L().mark((function t(){var e,r,o;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=n._getStyleUrlForLocale("vector"))){t.next=9;break}return r=n._proxyPath+n._getAbsoluteUrl(e),t.next=5,n._emsClient.getManifest(n._emsClient.extendUrlWithParams(r));case 5:return o=t.sent,t.abrupt("return",S({},o));case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t)}))))),T(j(n),"_getVectorStyleJsonInlined",u.a.once(A(L().mark((function t(){var e,r,o,i,a,s,u,c,l,h,f,p;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._getVectorStyleJsonRaw();case 2:if(!(e=t.sent)){t.next=44;break}r={},o=e.sources,i=_(Object.getOwnPropertyNames(o)),t.prev=7,i.s();case 9:if((a=i.n()).done){t.next=22;break}if(s=a.value,!(u=o[s].url)){t.next=20;break}return l=n._proxyPath+n._getAbsoluteUrl(u),h=n._emsClient.extendUrlWithParams(l),t.next=17,n._emsClient.getManifest(h);case 17:f=t.sent,p=null==f||null===(c=f.tiles)||void 0===c?void 0:c.map((function(t){var e=n._proxyPath+n._getAbsoluteUrl(t);return n._emsClient.extendUrlWithParams(e)})),r[s]=S(S({},f),{},{type:"vector",tiles:p});case 20:t.next=9;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(7),i.e(t.t0);case 27:return t.prev=27,i.f(),t.finish(27);case 30:return t.t1=S,t.t2=S({},e),t.t3={},t.t4=r,t.next=36,n._getSpriteSheetRootPath();case 36:return t.t5=t.sent,t.next=39,n._getUrlTemplateForGlyphs();case 39:return t.t6=t.sent,t.t7={sources:t.t4,sprite:t.t5,glyphs:t.t6},t.abrupt("return",(0,t.t1)(t.t2,t.t3,t.t7));case 44:return t.abrupt("return");case 45:case"end":return t.stop()}}),t,null,[[7,24,27,30]])}))))),n._config=t,n}return e=k,r=[{key:"getDefaultRasterStyle",value:(g=A(L().mark((function t(){var e,r,n=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getRasterStyleJson();case 2:if(!(e=t.sent)){t.next=8;break}return r=e.tiles.map((function(t){return n._proxyPath+n._getAbsoluteUrl(t)})),t.abrupt("return",S(S({},e),{tiles:r}));case 8:return t.abrupt("return");case 9:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"getUrlTemplate",value:(v=A(L().mark((function t(){var e,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getRasterStyleJson();case 2:if(!(e=t.sent)){t.next=8;break}return r=this._proxyPath+this._getAbsoluteUrl(e.tiles[0]),t.abrupt("return",this._emsClient.extendUrlWithParams(r));case 8:return t.abrupt("return","");case 9:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"getUrlTemplateForVector",value:(m=A(L().mark((function t(e){var r,n,o,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonInlined();case 2:if(n=t.sent,!(o=null==n||null===(r=n.sources[e])||void 0===r||null===(r=r.tiles)||void 0===r?void 0:r.pop())){t.next=9;break}return i=this._proxyPath+this._getAbsoluteUrl(o),t.abrupt("return",this._emsClient.extendUrlWithParams(i));case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"getVectorStyleSheet",value:(p=A(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonInlined();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getVectorStyleSheetRaw",value:(f=A(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getSpriteSheetMeta",value:(h=A(L().mark((function t(){var e,r,n,o,i,a=arguments;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]&&a[0],t.next=3,this.getSpriteSheetJsonPath(e);case 3:return r=t.sent,t.next=6,this.getSpriteSheetPngPath(e);case 6:if(n=t.sent,!r||!n){t.next=15;break}return o=this._emsClient.extendUrlWithParams(r),t.next=11,this._emsClient.getManifest(o);case 11:return i=t.sent,t.abrupt("return",{png:n,json:i});case 15:return t.abrupt("return");case 16:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getSpriteSheetJsonPath",value:(l=A(L().mark((function t(){var e,r,n,o=arguments;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=t.sent)){t.next=9;break}return n=e?"@2x":"",t.abrupt("return",r+n+".json");case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getSpriteSheetPngPath",value:(c=A(L().mark((function t(){var e,r,n,o=arguments;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=t.sent)){t.next=9;break}return n=e?"@2x":"",t.abrupt("return",r+n+".png");case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getDisplayName",value:function(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getMinZoom",value:(s=A(L().mark((function t(){var e,r,n,o,i,a=arguments;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:"vector",t.t0=e,t.next="vector"===t.t0?4:"raster"===t.t0?12:20;break;case 4:return t.next=6,this._getVectorStyleJsonInlined();case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1={sources:{}};case 9:return r=t.t1,n=r.sources,t.abrupt("return",Math.min.apply(Math,w(Object.values(n).map((function(t){return t.minzoom})).filter((function(t){return Number.isFinite(t)})))));case 12:return t.next=14,this._getRasterStyleJson();case 14:if(t.t2=t.sent,t.t2){t.next=17;break}t.t2={};case 17:return o=t.t2,i=o.minzoom,t.abrupt("return",i);case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getMaxZoom",value:(a=A(L().mark((function t(){var e,r,n,o,i,a=arguments;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:"vector",t.t0=e,t.next="vector"===t.t0?4:"raster"===t.t0?12:20;break;case 4:return t.next=6,this._getVectorStyleJsonInlined();case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1={sources:{}};case 9:return r=t.t1,n=r.sources,t.abrupt("return",Math.max.apply(Math,w(Object.values(n).map((function(t){return t.maxzoom})).filter((function(t){return Number.isFinite(t)})))));case 12:return t.next=14,this._getRasterStyleJson();case 14:if(t.t2=t.sent,t.t2){t.next=17;break}t.t2={};case 17:return o=t.t2,i=o.maxzoom,t.abrupt("return",i);case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getId",value:function(){return this._config.id}},{key:"hasId",value:function(t){return this._config.id===t}},{key:"getApiUrl",value:function(){return this._emsClient.getTileApiUrl()}},{key:"_getStyleUrlForLocale",value:function(t){var e=this._getFormats(t,this._emsClient.getLocale());if(e.length||(e=this._getFormats(t,this._emsClient.getDefaultLocale())),!e.length)throw new Error("Cannot find ".concat(t," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()));var r=e[0];if(r&&r.hasOwnProperty("url"))return r.url}},{key:"_getFormats",value:function(t,e){return this._config.formats.filter((function(r){return r.locale===e&&r.format===t}))}},{key:"_getSpriteSheetRootPath",value:(i=A(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(e=t.sent)||!e.sprite){t.next=7;break}return t.abrupt("return",this._proxyPath+this._getAbsoluteUrl(e.sprite));case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_getUrlTemplateForGlyphs",value:(o=A(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(e=t.sent)||!e.glyphs){t.next=7;break}return t.abrupt("return",this._proxyPath+this._getAbsoluteUrl(e.glyphs));case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],n=[{key:"transformLanguageProperty",value:function(t,e){var r=this.SupportedLanguages.find((function(t){return t.key===e}));if("symbol"===t.type&&void 0!==t.layout&&void 0!==r){var n=r.omt,o=t.layout["text-field"];if(o&&"string"==typeof o)return k._getTextField(o,n)}}},{key:"transformColorProperties",value:function(t,e,r,n){if(-1!==["background","fill","line","symbol"].indexOf(t.type)&&t.paint){var o=t.paint;return"symbol"===t.type&&0===Object.keys(o).length&&(o["text-color"]="rgb(0,0,0)"),Object.keys(o).filter((function(t){return-1!==["background-color","circle-color","circle-stroke-color","fill-color","fill-extrusion-color","fill-outline-color","icon-color","icon-halo-color","line-color","text-color","text-halo-color"].indexOf(t)})).map((function(t){var i=o[t];return{property:t,color:i&&e?y(i,e,r,n):i}}))}return[]}},{key:"_getTextField",value:function(t,e){var r=t.match(/\{name([:_])(.{2})\}/);return r&&r[1]!=e?["coalesce",["get","name:".concat(e)],["get","name".concat(r[1]).concat(r[2])]]:t.includes("latin")&&t.includes("nonlatin")?["coalesce",["get","name:".concat(e)],["concat",["get","name:latin"],"\n",["get","name:nonlatin"]]]:t}}],r&&P(e.prototype,r),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),k}(b);T(F,"SupportedLanguages",[{key:"ar",omt:"ar"},{key:"az",omt:"az"},{key:"be",omt:"be"},{key:"bg",omt:"bg"},{key:"br",omt:"br"},{key:"bs",omt:"bs"},{key:"ca",omt:"ca"},{key:"cs",omt:"cs"},{key:"cy",omt:"cy"},{key:"da",omt:"da"},{key:"de",omt:"de"},{key:"el",omt:"el"},{key:"en",omt:"en"},{key:"eo",omt:"eo"},{key:"es",omt:"es"},{key:"et",omt:"et"},{key:"fi",omt:"fi"},{key:"fr-fr",omt:"fr"},{key:"fy",omt:"fy"},{key:"ga",omt:"ga"},{key:"gd",omt:"gd"},{key:"he",omt:"he"},{key:"hi-in",omt:"hi"},{key:"hr",omt:"hr"},{key:"hu",omt:"hu"},{key:"hy",omt:"hy"},{key:"is",omt:"is"},{key:"it",omt:"it"},{key:"ja_kana",omt:"ja_kana"},{key:"ja_rm",omt:"ja_rm"},{key:"ja-jp",omt:"ja"},{key:"ka",omt:"ka"},{key:"kk",omt:"kk"},{key:"kn",omt:"kn"},{key:"ko_rm",omt:"ko_rm"},{key:"ko",omt:"ko"},{key:"la",omt:"la"},{key:"lb",omt:"lb"},{key:"lt",omt:"lt"},{key:"lv",omt:"lv"},{key:"mk",omt:"mk"},{key:"mt",omt:"mt"},{key:"nl",omt:"nl"},{key:"no",omt:"no"},{key:"pl",omt:"pl"},{key:"pt-pt",omt:"pt"},{key:"rm",omt:"rm"},{key:"ro",omt:"ro"},{key:"ru-ru",omt:"ru"},{key:"sk",omt:"sk"},{key:"sl",omt:"sl"},{key:"sq",omt:"sq"},{key:"sr-Ltn",omt:"sr-Ltn"},{key:"sr",omt:"sr"},{key:"sv",omt:"sv"},{key:"th",omt:"th"},{key:"tr",omt:"tr"},{key:"uk",omt:"uk"},{key:"zh-cn",omt:"zh"}]),T(F,"colorOperationDefaults",[{style:"road_map",operation:"mix",percentage:.25},{style:"road_map_desaturated",operation:"screen",percentage:.25},{style:"dark_map",operation:"dodge",percentage:.25}]);var U=r(16),M=r.n(U),$=r(26);function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?G(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */q=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:S(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",m="completed",v={};function g(){}function d(){}function b(){}var E={};c(E,a,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==r&&n.call(_,a)&&(E=_);var x=b.prototype=g.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==D(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(D(e)+" is not iterable")}return d.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:d,configurable:!0}),d.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},k(O.prototype),c(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function X(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y(n.key),n)}}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function W(t,e,r){return(e=Y(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(t){var e=function(t,e){if("object"!==D(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===D(e)?e:String(e)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(u,t);var e,r,n,o,i,a,s=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=H(i);if(a){var r=H(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return J(t)}(this,t)});function u(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),W(J(n=s.call(this,t,e,r)),"_config",void 0),n._config=t,n}return e=u,r=[{key:"getGeoJson",value:(n=q().mark((function t(){var e,r,n,o,i,a,s,u;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._emsClient.getCachedGeoJson(this.getId()))){t.next=3;break}return t.abrupt("return",e);case 3:return r=this.getDefaultFormatType(),n=this.getDefaultFormatUrl(),t.next=7,this._emsClient.getManifest(n);case 7:if(!(i=t.sent)){t.next=22;break}if("geojson"!==r){t.next=13;break}o=i,t.next=20;break;case 13:if("topojson"!==r){t.next=19;break}s=this.getDefaultFormatMeta(),u=null!==(a=null==s?void 0:s.feature_collection_path)&&void 0!==a?a:"data",o=$.feature(i,u),t.next=20;break;case 19:case 22:return t.abrupt("return");case 20:return this._emsClient.cacheGeoJson(this.getId(),o),t.abrupt("return",o);case 23:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){X(i,r,o,a,s,"next",t)}function s(t){X(i,r,o,a,s,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"getFields",value:function(){return this._config.fields}},{key:"getFieldsInLanguage",value:function(){var t=this;return this.getFields().map((function(e){return{type:e.type,name:e.id,description:t._emsClient.getValueInLanguage(e.label)}}))}},{key:"getDisplayName",value:function(){return this._emsClient.getValueInLanguage(this._config.layer_name)||""}},{key:"getId",value:function(){return this._config.layer_id}},{key:"hasId",value:function(t){var e=this._config.legacy_ids.indexOf(t)>=0;return this._config.layer_id===t||e}},{key:"getEMSHotLink",value:function(){var t=this._emsClient.getLandingPageUrl(),e=M.a.parse(t,!0);return e.hash="file/".concat(this.getId()),e.query=V(V({},e.query),{},{locale:this._emsClient.getLocale()}),M.a.format(e)}},{key:"getDefaultFormatType",value:function(){return this._getDefaultFormat().type}},{key:"getFormatOfType",value:function(t){return this._getFormatOfType(t).type}},{key:"getDefaultFormatMeta",value:function(){var t=this._getDefaultFormat();return this._getFormatMeta(t)}},{key:"getFormatOfTypeMeta",value:function(t){var e=this._getFormatOfType(t);return this._getFormatMeta(e)}},{key:"getDefaultFormatUrl",value:function(){var t=this._getDefaultFormat();return this._getFormatUrl(t)}},{key:"getFormatOfTypeUrl",value:function(t){var e=this._getFormatOfType(t);return this._getFormatUrl(e)}},{key:"getCreatedAt",value:function(){return this._config.created_at}},{key:"getApiUrl",value:function(){return this._emsClient.getFileApiUrl()}},{key:"_getFormatUrl",value:function(t){var e=this._proxyPath+this._getAbsoluteUrl(t.url);return this._emsClient.extendUrlWithParams(e)}},{key:"_getFormatMeta",value:function(t){return"meta"in t?t.meta:void 0}},{key:"_getDefaultFormat",value:function(){return this._config.formats.find((function(t){return t.legacy_default}))||this._config.formats[0]}},{key:"_getFormatOfType",value:function(t){return this._config.formats.find((function(e){return e.type===t}))||this._getDefaultFormat()}}],r&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),u}(b),K=r(27),Q=r.n(K),tt=r(28),et=r.n(tt),rt=r(29),nt=r.n(rt),ot=r(30),it=r.n(ot);function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function st(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */st=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:S(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",y="executing",m="completed",v={};function g(){}function d(){}function b(){}var E={};c(E,a,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(R([])));_&&_!==r&&n.call(_,a)&&(E=_);var x=b.prototype=g.prototype=Object.create(E);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,s){var u=h(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==at(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=f;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=h(e,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(at(e)+" is not iterable")}return d.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:d,configurable:!0}),d.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},k(O.prototype),c(O.prototype,s,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(x),c(x,u,"Generator"),c(x,a,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ut(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ut(i,n,o,a,s,"next",t)}function s(t){ut(i,n,o,a,s,"throw",t)}a(void 0)}))}}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ft(n.key),n)}}function ht(t,e,r){return(e=ft(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(t){var e=function(t,e){if("object"!==at(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===at(e)?e:String(e)}var pt=/\d{4}-\d{2}-\d{2}/,yt="latest",mt=function(t,e){return function(t,r){var n=Object(U.parse)(t,!0),o={protocol:n.protocol,slashes:n.slashes,auth:n.auth,hostname:n.hostname,port:n.port,pathname:n.pathname,query:n.query||{},hash:n.hash},i=function(t){return u.a.merge(t,e)}(o)||o;return Object(U.format)({protocol:i.protocol,slashes:i.slashes,auth:i.auth,hostname:i.hostname,port:i.port,pathname:i.pathname,query:i.query,hash:i.hash})}(t)},vt="en",gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,"EMS_LOAD_TIMEOUT",32e3),ht(this,"_queryParams",void 0),ht(this,"_appVersion",void 0),ht(this,"_fetchFunction",void 0),ht(this,"_sanitizer",void 0),ht(this,"_fileApiUrl",void 0),ht(this,"_tileApiUrl",void 0),ht(this,"_emsVersion",void 0),ht(this,"_emsLandingPageUrl",void 0),ht(this,"_language",void 0),ht(this,"_proxyPath",void 0),ht(this,"_cache",void 0),ht(this,"_isRestApi",!1),ht(this,"_getMainCatalog",void 0),ht(this,"_getDefaultTMSCatalog",void 0),ht(this,"_getDefaultFileCatalog",void 0),ht(this,"_loadTMSServices",void 0),ht(this,"_loadFileLayers",void 0),"kbnVersion"in e?(console.warn('The "kbnVersion" parameter for ems-client is deprecated. Please use "appVersion" instead.'),this._appVersion=e.kbnVersion):this._appVersion=e.appVersion,this._queryParams={elastic_tile_service_tos:"agree",my_app_name:e.appName||"kibana",my_app_version:this._appVersion},this._sanitizer=e.htmlSanitizer?e.htmlSanitizer:function(t){return t},this._tileApiUrl=e.tileApiUrl,this._fileApiUrl=e.fileApiUrl,this._emsVersion=this._getEmsVersion(e.emsVersion),this._isRestApi=this._emsVersion==e.emsVersion,this._emsLandingPageUrl=e.landingPageUrl||"",this._language=e.language||vt,this._fetchFunction=e.fetchFunction,this._proxyPath=e.proxyPath||"",this._cache=new it.a({max:e.cacheSize||10}),this._invalidateSettings()}var e,r,n,i,a,s,c,l,h,p;return e=t,r=[{key:"getDefaultLocale",value:function(){return vt}},{key:"getLocale",value:function(){return this._language}},{key:"getValueInLanguage",value:function(t){return t?t[this._language]?t[this._language]:t[vt]:""}},{key:"getManifest",value:(p=ct(st().mark((function t(e){var r,n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=mt(e,{query:this._queryParams}),t.next=4,this._fetchWithTimeout(r);case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(n.statusText);case 7:if(!n){t.next=13;break}return t.next=10,n.json();case 10:t.t0=t.sent,t.next=14;break;case 13:t.t0=null;case 14:return t.abrupt("return",t.t0);case 17:if(t.prev=17,t.t1=t.catch(0),!(t.t1 instanceof Error)){t.next=23;break}throw t.t1;case 23:throw new Error("Unknown error");case 24:case"end":return t.stop()}}),t,this,[[0,17]])}))),function(t){return p.apply(this,arguments)})},{key:"addQueryParams",value:function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e]!==this._queryParams[e]){this._queryParams=u.a.assign({},this._queryParams,t),this._invalidateSettings();break}}},{key:"getMainManifest",value:(h=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getMainCatalog();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"getDefaultFileManifest",value:(l=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getDefaultFileCatalog();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getDefaultTMSManifest",value:(c=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getDefaultTMSCatalog();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getFileLayers",value:(s=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadFileLayers();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getTMSServices",value:(a=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadTMSServices();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"cacheGeoJson",value:function(t,e){this._cache.set(t,e)}},{key:"getCachedGeoJson",value:function(t){return this._cache.get(t)}},{key:"getEmsVersion",value:function(){return this._emsVersion}},{key:"getTileApiUrl",value:function(){return this._tileApiUrl}},{key:"getFileApiUrl",value:function(){return this._fileApiUrl}},{key:"getLandingPageUrl",value:function(){return this._emsLandingPageUrl}},{key:"sanitizeHtml",value:function(t){return this._sanitizer(t)}},{key:"extendUrlWithParams",value:function(t){return function(t){return t.replace(/%7B(\w+?)%7D/g,(function(t,e){return"{".concat(e,"}")}))}(mt(t,{query:this._queryParams}))}},{key:"findFileLayerById",value:(i=ct(st().mark((function t(e){var r,n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFileLayers();case 2:r=t.sent,n=0;case 4:if(!(n<r.length)){t.next=10;break}if(!r[n].hasId(e)){t.next=7;break}return t.abrupt("return",r[n]);case 7:n++,t.next=4;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"findTMSServiceById",value:(n=ct(st().mark((function t(e){var r,n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTMSServices();case 2:r=t.sent,n=0;case 4:if(!(n<r.length)){t.next=10;break}if(!r[n].hasId(e)){t.next=7;break}return t.abrupt("return",r[n]);case 7:n++,t.next=4;break;case 10:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getEmsVersion",value:function(t){if(null!=t&&t.match(pt))return t;var e=Q()(o()(t));if(e)return"v".concat(et()(e),".").concat(nt()(e));throw new Error("Invalid version: ".concat(t))}},{key:"_fetchWithTimeout",value:function(t){var e=this;return new Promise((function(r,n){var o=setTimeout((function(){return n(new Error("Request to ".concat(t," timed out")))}),e.EMS_LOAD_TIMEOUT);e._fetchFunction(t).then((function(t){clearTimeout(o),r(t)}),(function(t){clearTimeout(o),n(t)}))}))}},{key:"_invalidateSettings",value:function(){var t=this;this._cache.reset(),this._getMainCatalog=u.a.once(ct(st().mark((function e(){var r,n,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t._tileApiUrl&&(n=t._isRestApi?yt:t._emsVersion,r.push({type:"tms",manifest:f(t._tileApiUrl,"".concat(n,"/manifest"))})),t._fileApiUrl&&(o=t._isRestApi?yt:t._emsVersion,r.push({type:"file",manifest:f(t._fileApiUrl,"".concat(o,"/manifest"))})),e.abrupt("return",{services:r});case 4:case"end":return e.stop()}}),e)})))),this._getDefaultTMSCatalog=u.a.once(ct(st().mark((function e(){var r,n,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getMainCatalog();case 2:if(r=e.sent,n=r.services.find((function(t){return"tms"===t.type}))){e.next=6;break}return e.abrupt("return",{services:[]});case 6:return o=t._proxyPath+n.manifest,e.next=9,t.getManifest(o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))),this._getDefaultFileCatalog=u.a.once(ct(st().mark((function e(){var r,n,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getMainCatalog();case 2:if(r=e.sent,n=r.services.find((function(t){return"file"===t.type}))){e.next=6;break}return e.abrupt("return",{layers:[]});case 6:return o=t._proxyPath+n.manifest,e.next=9,t.getManifest(o);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))),this._loadTMSServices=u.a.once(ct(st().mark((function e(){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getDefaultTMSCatalog();case 2:return r=e.sent,e.abrupt("return",r.services.map((function(e){return new F(e,t,t._proxyPath)})));case 4:case"end":return e.stop()}}),e)})))),this._loadFileLayers=u.a.once(ct(st().mark((function e(){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._getDefaultFileCatalog();case 2:return r=e.sent,e.abrupt("return",r.layers.map((function(e){return new Z(e,t,t._proxyPath)})));case 4:case"end":return e.stop()}}),e)}))))}}],r&&lt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),dt=r(3);function bt(t,e,r="traditional"){let n=t.getEMSLandingPageUrl();const s=o()(e),u="serverless"===r,c=new Headers;!u&&s&&(n=`${n}/v${s.major}.${s.minor}`),u&&c.append(i,dt.DEFAULT_EMS_REST_VERSION);const l=u?dt.DEFAULT_EMS_REST_VERSION:e;return new gt({language:a.i18n.getLocale(),appVersion:l,emsVersion:l,appName:dt.EMS_APP_NAME,tileApiUrl:t.getEMSTileApiUrl(),fileApiUrl:t.getEMSFileApiUrl(),landingPageUrl:n,fetchFunction:t=>fetch(t,{headers:c}),proxyPath:""})}}]]);