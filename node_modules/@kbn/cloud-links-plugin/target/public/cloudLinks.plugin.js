/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(11)(3)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),s=n(2),i=o.__importDefault(n(17));t.default=function(e,t){var n=s.useState(t),o=n[0],r=n[1];return i.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),o}},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n.r(t);var o=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(o))},function(e,t,n){e.exports=n(11)(2)},function(e,t,n){n(15),__kbnBundles__.define("plugin/cloudLinks/public",n,18)},function(e,t,n){n.p=window.__kbnPublicPath__.cloudLinks},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),s="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;t.default=s},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return Y}));var o=n(2),s=n.n(o),i=n(5),r=n(6),l=n(3),a=n(0),u=n(1),c=n(4),d=n.n(c),p=n(8),b=n.n(p);const j=s.a.createContext(null),f=({children:e,...t})=>Object(a.jsx)(j.Provider,{value:t},e),x=({children:e,...t})=>{const{core:{notifications:n,theme:o},security:{userProfiles:s},toMountPoint:i}=t;return Object(a.jsx)(f,{userProfileApiClient:s,notifySuccess:({title:e,text:t},s)=>{const r={};null!=s&&s.durationMs&&(r.toastLifeTimeMs=s.durationMs),n.toasts.addSuccess({title:e,text:t?i(t,{theme$:o.theme$}):void 0},r)}},e)},g={notificationSuccess:{title:l.i18n.translate("userProfileComponents.updateUserProfile.notification.submitSuccessTitle",{defaultMessage:"Profile updated"}),pageReloadText:l.i18n.translate("userProfileComponents.updateUserProfile.notification.requiresPageReloadDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."})}};var k=n(12);const m=({uiSettingsClient:e})=>{const[t,n]=Object(o.useState)(!1),s=e.isOverridden("theme:darkMode"),{userProfileData:i,isLoading:r,update:c}=(({notificationSuccess:e={},pageReloadChecker:t}={})=>{const{userProfileApiClient:n,notifySuccess:s}=function(){const e=Object(o.useContext)(j);if(!e)throw new Error("UserProfilesContext is missing. Ensure your component or React root is wrapped with <UserProfilesProvider /> or <UserProfilesKibanaProvider />.");return e}(),{userProfile$:i}=n,{enabled:r=!0,title:c=g.notificationSuccess.title,pageReloadText:d=g.notificationSuccess.pageReloadText}=e,[p,f]=Object(o.useState)(!1),x=b()(i),k=Object(o.useRef)(),m=Object(o.useCallback)((({isRefreshRequired:e=!1}={})=>{e?s({title:c,text:Object(a.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)("p",null,d),Object(a.jsx)(u.EuiButton,{size:"s",onClick:()=>window.location.reload(),"data-test-subj":"windowReloadButton"},l.i18n.translate("userProfileComponents.updateUserProfile.notification.requiresPageReloadButtonLabel",{defaultMessage:"Reload page"}))))},{durationMs:3e5}):s({title:c})}),[c,s,d]),h=Object(o.useCallback)((e=>{if(f(!1),r){const n=null==t?void 0:t(k.current,e);m({isRefreshRequired:n})}}),[r,m,t]);return{update:Object(o.useCallback)((e=>(k.current=x,f(!0),n.update(e).then((()=>h(e))))),[n,h,x]),showSuccessNotification:m,userProfileData:x,isLoading:p}})({notificationSuccess:{title:l.i18n.translate("xpack.cloudLinks.userMenuLinks.darkMode.successNotificationTitle",{defaultMessage:"Color theme updated"}),pageReloadText:l.i18n.translate("xpack.cloudLinks.userMenuLinks.darkMode.successNotificationText",{defaultMessage:"Reload the page to see the changes"})},pageReloadChecker:(e,t)=>{var n,o;return(null==e||null===(n=e.userSettings)||void 0===n?void 0:n.darkMode)!==(null===(o=t.userSettings)||void 0===o?void 0:o.darkMode)}}),{userSettings:{darkMode:d}={darkMode:void 0}}=null!=i?i:{},p=Object(o.useCallback)((e=>{r||c({userSettings:{darkMode:e?"dark":"light"}})}),[r,c]);return Object(o.useEffect)((()=>{let t=!1;var o;t="string"!=typeof d?null!==(o=e.get("theme:darkMode"))&&void 0!==o&&o:"dark"===d,n(t)}),[d,e]),{isVisible:!s&&Boolean(i),toggle:p,isDarkModeOn:t,colorScheme:d}},h=({security:e,core:t})=>Object(a.jsx)(x,{core:t,security:e,toMountPoint:k.toMountPoint},Object(a.jsx)(O,{uiSettingsClient:t.uiSettings}));function O({uiSettingsClient:e}){const t=Object(u.useGeneratedHtmlId)({prefix:"toggleTextSwitch"}),{euiTheme:n}=Object(u.useEuiTheme)(),{isVisible:o,toggle:s,isDarkModeOn:i,colorScheme:r}=m({uiSettingsClient:e});return o?Object(a.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"xs"},Object(a.jsx)(u.EuiFlexItem,null,Object(a.jsx)(u.EuiContextMenuItem,{icon:"dark"===r?"moon":"sun",size:"s",onClick:()=>{s("light"===r)},"data-test-subj":"darkModeToggle"},l.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeToggle",{defaultMessage:"Dark mode"}))),Object(a.jsx)(u.EuiFlexItem,{grow:!1,css:Object(a.css)({paddingRight:n.size.m},"","")},Object(a.jsx)(u.EuiSwitch,{label:i?l.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeOnLabel",{defaultMessage:"on"}):l.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeOffLabel",{defaultMessage:"off"}),showLabel:!1,checked:i,onChange:e=>{s(e.target.checked)},"aria-describedby":t,"data-test-subj":"darkModeToggleSwitch",compressed:!0}))):null}var y=n(7),M=n.n(y),_=n(9),L=n.n(_);let E;!function(e){e.preboot="preboot",e.standard="standard"}(E||(E={}));const S="eui-global",C="eui-utilities",v={darkMode:!1},P=[u.euiStylisPrefixer],D=L()({key:"css",stylisPlugins:P,container:document.querySelector('meta[name="emotion"]')}),T=L()({key:S,stylisPlugins:P,container:document.querySelector(`meta[name="${S}"]`)}),w=L()({key:C,stylisPlugins:P,container:document.querySelector(`meta[name="${C}"]`)});D.compat=!0,T.compat=!0,w.compat=!0;const I={default:D,global:T,utility:w},U=({theme:{theme$:e},globalStyles:t,colorMode:n,children:s})=>{const i=b()(e,v),r=Object(o.useMemo)((()=>(e=>e.darkMode?u.COLOR_MODES_STANDARD.dark:u.COLOR_MODES_STANDARD.light)(i)),[i]),l=n||r,c=!1!==t&&void 0;return Object(a.jsx)(u.EuiProvider,{cache:I,colorMode:l,globalStyles:c,utilityClasses:c},s)},R=({children:e,i18n:t,...n})=>Object(a.jsx)(U,n,Object(a.jsx)(t.Context,null,e));var F=n(10);const B=({children:e,...t})=>Object(a.jsx)(R,d()({globalStyles:!1},t),Object(a.jsx)(F.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(a.jsx)(F.KibanaErrorBoundary,null,e)));n(13);class mount_point_portal_MountPointPortalErrorBoundary extends o.Component{constructor(...e){super(...e),definePropertyfrom_dll_reference_kbnSharedDeps_npm_default()(this,"state",{error:void 0})}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(){}render(){return this.state.error?Object(a.jsx)("p",null,l.i18n.translate("reactPackages.mountPointPortal.errorMessage",{defaultMessage:"Error rendering portal content"})):this.props.children}}const A=s.a.createContext(null),z=({children:e,...t})=>Object(a.jsx)(A.Provider,{value:t},e),G=({children:e,...t})=>{var n;const{core:{application:{navigateToUrl:o}},cloud:{isCloudEnabled:s,cloudId:i,elasticsearchUrl:r},share:{url:{locators:l}},docLinks:{links:{fleet:{apiKeysLearnMore:u},cloud:{beatsAndLogstashConfiguration:c}}}}=t,d=null===(n=l.get("MANAGEMENT_APP_LOCATOR"))||void 0===n?void 0:n.useUrl({sectionId:"security",appId:"api_keys"});return Object(a.jsx)(z,{cloudId:s?i:void 0,elasticsearchUrl:r,managementUrl:d,apiKeysLearnMoreUrl:u,cloudIdLearnMoreUrl:c,navigateToUrl:o},e)};function K(){const e=Object(o.useContext)(A);if(!e)throw new Error("DeploymentDetailsContext is missing. Ensure your component or React root is wrapped with <DeploymentDetailsProvider /> or <DeploymentDetailsKibanaProvider />.");return e}const q=({elasticsearchUrl:e})=>Object(a.jsx)(u.EuiFormRow,{label:l.i18n.translate("cloud.deploymentDetails.elasticEndpointLabel",{defaultMessage:"Elasticsearch endpoint"}),fullWidth:!0},Object(a.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(a.jsx)(u.EuiFlexItem,null,Object(a.jsx)(u.EuiFieldText,{value:e,fullWidth:!0,disabled:!0,"data-test-subj":"deploymentDetailsEsEndpoint"})),Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiCopy,{textToCopy:e},(e=>Object(a.jsx)(u.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),N=({learnMoreUrl:e})=>Object(a.jsx)(u.EuiLink,{href:e},l.i18n.translate("cloud.deploymentDetails.cloudIDLabelToolip.learnMoreLink",{defaultMessage:"Learn more"}));var H={name:"z5y8xy",styles:"min-width:200px;height:16px"},$={name:"16ceglb",styles:"font-weight:600"};const W=({learnMoreUrl:e})=>{const[t,n]=Object(o.useState)(!1);return Object(a.jsx)(u.EuiFlexGroup,{css:H,alignItems:"center",gutterSize:"xs"},Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiText,{size:"xs",css:$},l.i18n.translate("cloud.deploymentDetails.cloudIDLabel",{defaultMessage:"Cloud ID"}))),Object(a.jsx)(u.EuiFlexItem,null,Object(a.jsx)(u.EuiPopover,{button:Object(a.jsx)(u.EuiButtonIcon,{iconType:"questionInCircle",onClick:()=>{n(!0)}}),isOpen:t,closePopover:()=>{n(!1)},anchorPosition:"upCenter"},Object(a.jsx)("p",{style:{width:270}},Object(a.jsx)(i.FormattedMessage,{id:"cloud.deploymentDetails.cloudIDLabelToolip",defaultMessage:"Get started with Elastic Agent or Logstash quickly. The Cloud ID simplifies sending data to Elastic. {link}",values:{link:Object(a.jsx)(N,{learnMoreUrl:e})}})))))},V=({cloudId:e,learnMoreUrl:t})=>Object(a.jsx)(u.EuiFormRow,{label:Object(a.jsx)(W,{learnMoreUrl:t}),fullWidth:!0},Object(a.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(a.jsx)(u.EuiFlexItem,null,Object(a.jsx)(u.EuiFieldText,{value:e,fullWidth:!0,disabled:!0,"data-test-subj":"deploymentDetailsCloudID"})),Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiCopy,{textToCopy:e},(e=>Object(a.jsx)(u.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),J=({closeModal:e})=>{const{cloudId:t,elasticsearchUrl:n,managementUrl:o,apiKeysLearnMoreUrl:s,cloudIdLearnMoreUrl:i,navigateToUrl:r}=K(),c=!!e;return t?Object(a.jsx)(u.EuiForm,{component:"div"},n&&Object(a.jsx)(q,{elasticsearchUrl:n}),Object(a.jsx)(V,{cloudId:t,learnMoreUrl:i}),Object(a.jsx)(u.EuiSpacer,{size:"m"}),o&&Object(a.jsx)(u.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceBetween",alignItems:"center"},Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiButtonEmpty,{href:o,onClick:t=>{var n;(n=t).metaKey||n.altKey||n.ctrlKey||n.shiftKey||(t.preventDefault(),r(o)),e&&e()},flush:"left"},l.i18n.translate("cloud.deploymentDetails.createManageApiKeysButtonLabel",{defaultMessage:"Create and manage API keys"}))),!c&&Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiLink,{external:!0,href:s,target:"_blank"},l.i18n.translate("cloud.deploymentDetails.learnMoreButtonLabel",{defaultMessage:"Learn more"}))))):null},Q=({closeModal:e})=>{const{apiKeysLearnMoreUrl:t}=K();return Object(a.jsx)(u.EuiModal,{onClose:()=>{e()},style:{width:600},"data-test-subj":"deploymentDetailsModal"},Object(a.jsx)(u.EuiModalHeader,null,Object(a.jsx)(u.EuiModalHeaderTitle,null,l.i18n.translate("cloud.deploymentDetails.helpMenuLinks.connectionDetails",{defaultMessage:"Connection details"}))),Object(a.jsx)(u.EuiModalBody,null,Object(a.jsx)(J,{closeModal:e})),Object(a.jsx)(u.EuiModalFooter,null,Object(a.jsx)(u.EuiFlexGroup,{alignItems:"baseline",justifyContent:"flexEnd"},Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiLink,{external:!0,href:t,target:"_blank"},l.i18n.translate("cloud.deploymentDetails.modal.learnMoreButtonLabel",{defaultMessage:"Learn more"}))),Object(a.jsx)(u.EuiFlexItem,{grow:!1},Object(a.jsx)(u.EuiButton,{onClick:e,fill:!0},l.i18n.translate("cloud.deploymentDetails.modal.closeButtonLabel",{defaultMessage:"Close"}))))))},X=({core:e,share:t,cloud:n,docLinks:o,closeModal:s})=>Object(a.jsx)(G,{core:e,share:t,cloud:n,docLinks:o},Object(a.jsx)(Q,{closeModal:s}));class plugin_CloudLinksPlugin{setup(){}start(e,{cloud:t,security:n,guidedOnboarding:o,share:s}){var u;null!=t&&t.isCloudEnabled&&!e.http.anonymousPaths.isAnonymous(window.location.pathname)&&(null!=o&&null!==(u=o.guidedOnboardingApi)&&void 0!==u&&u.isEnabled&&e.chrome.registerGlobalHelpExtensionMenuLink({linkType:"custom",href:e.http.basePath.prepend("/app/home#/getting_started"),content:Object(a.jsx)(i.FormattedMessage,{id:"xpack.cloudLinks.setupGuide",defaultMessage:"Setup guides"}),"data-test-subj":"cloudOnboardingSetupGuideLink",priority:1e3}),n&&function({core:e,security:t,cloud:n,share:o}){const s=Object(r.defer)((()=>t.authc.getCurrentUser())).pipe(Object(r.map)((e=>e.elastic_cloud_user)),Object(r.catchError)((()=>Object(r.of)(!0))),Object(r.filter)((e=>!0===e)),Object(r.map)((()=>{n.deploymentUrl&&e.chrome.setCustomNavLink({title:l.i18n.translate("xpack.cloudLinks.deploymentLinkLabel",{defaultMessage:"Manage this deployment"}),euiIconType:"logoCloud",href:n.deploymentUrl});const o=(({core:e,cloud:t,security:n})=>{const{profileUrl:o,billingUrl:s,organizationUrl:i}=t,r=[];return o&&r.push({label:l.i18n.translate("xpack.cloudLinks.userMenuLinks.profileLinkText",{defaultMessage:"Profile"}),iconType:"user",href:o,order:100,setAsProfile:!0}),s&&r.push({label:l.i18n.translate("xpack.cloudLinks.userMenuLinks.billingLinkText",{defaultMessage:"Billing"}),iconType:"visGauge",href:s,order:200}),i&&r.push({label:l.i18n.translate("xpack.cloudLinks.userMenuLinks.organizationLinkText",{defaultMessage:"Organization"}),iconType:"gear",href:i,order:300}),r.push({content:Object(a.jsx)(h,{core:e,security:n}),order:400,label:"",iconType:"",href:""}),r})({core:e,cloud:n,security:t});t.navControlService.addUserMenuLinks(o)}))),i=e.chrome.getHelpSupportUrl$();n.isCloudEnabled&&Object(r.combineLatest)({user:s,helpSupportUrl:i}).subscribe((({helpSupportUrl:t})=>{const s=(({docLinks:e,helpSupportUrl:t,core:n,cloud:o,share:s})=>{const{overlays:i}=n;return[{title:l.i18n.translate("xpack.cloudLinks.helpMenuLinks.documentation",{defaultMessage:"Documentation"}),href:e.links.elasticStackGetStarted},{title:l.i18n.translate("xpack.cloudLinks.helpMenuLinks.support",{defaultMessage:"Support"}),href:t},{title:l.i18n.translate("xpack.cloudLinks.helpMenuLinks.giveFeedback",{defaultMessage:"Give feedback"}),href:e.links.kibana.feedback},{title:l.i18n.translate("xpack.cloudLinks.helpMenuLinks.connectionDetails",{defaultMessage:"Connection details"}),iconType:"console",dataTestSubj:"connectionDetailsHelpLink",onClick:()=>{const t=i.openModal((r=Object(a.jsx)(X,{core:n,share:s,cloud:o,docLinks:e,closeModal:()=>t.close()}),l={theme:n.theme,i18n:n.i18n},e=>(M.a.render(Object(a.jsx)(B,l,r),e),()=>M.a.unmountComponentAtNode(e))));var r,l}}]})({docLinks:e.docLinks,helpSupportUrl:t,core:e,share:o,cloud:n});e.chrome.setHelpMenuLinks(s)}))}({core:e,security:n,cloud:t,share:s}))}stop(){}}function Y(){return new plugin_CloudLinksPlugin}}]);