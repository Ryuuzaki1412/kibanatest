/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[2],{158:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return b}));var s=a(5),n=a(1),l=a.n(n),i=a(36),o=a(2);const c=e=>o.i18n.translate("xpack.cases.caseTable.caseDetailsLinkAria",{values:{detailName:e},defaultMessage:"click to visit case with title {detailName}"}),r=({children:e,...t})=>l.a.createElement(s.EuiButton,t,e),u=({children:e,...t})=>l.a.createElement(s.EuiLink,t,e),d=({children:e,detailName:t,title:a})=>{const{getCaseViewUrl:s,navigateToCaseView:o}=Object(i.j)(),r=Object(n.useCallback)((e=>{e.preventDefault(),o({detailName:t})}),[o,t]);return l.a.createElement(u,{onClick:r,href:s({detailName:t}),"data-test-subj":"case-details-link","aria-label":c(null!=a?a:t)},e||t)},m=l.a.memo(d);m.displayName="CaseDetailsLink";const p=({label:e,msgTooltip:t,showToolTip:a,titleTooltip:o})=>{const{getConfigureCasesUrl:c,navigateToConfigureCases:u}=Object(i.l)(),d=Object(n.useCallback)((e=>{e.preventDefault(),u()}),[u]),m=Object(n.useMemo)((()=>l.a.createElement(r,{onClick:d,href:c(),iconType:"controlsHorizontal",isDisabled:!1,"aria-label":e,"data-test-subj":"configure-case-button"},e)),[e,d,c]);return a?l.a.createElement(s.EuiToolTip,{position:"top",title:o,content:l.a.createElement("p",null,t),"data-test-subj":"configure-case-tooltip"},m):l.a.createElement(l.a.Fragment,null,m)},b=l.a.memo(p);b.displayName="ConfigureCaseButton"},171:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var s=a(1),n=a.n(s),l=a(5),i=a(232),o=a(210),c=a(83);const r=n.a.memo((({userInfo:e})=>{var t;return null!=e&&null!==(t=e.user)&&void 0!==t&&t.full_name?n.a.createElement(l.EuiText,{size:"s",className:"eui-textBreakWord"},n.a.createElement("strong",{"data-test-subj":"user-profile-tooltip-full-name"},e.user.full_name)):n.a.createElement(l.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-tooltip-single-name"},n.a.createElement("strong",null,u(null==e?void 0:e.user)))})),u=e=>e?Object(o.a)(e):c.f;r.displayName="UserFullInformation";const d=({userInfo:e})=>n.a.createElement(i.a,{size:"m",userInfo:e});d.displayName="UserToolTipAvatar";const m=({userInfo:e})=>n.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},n.a.createElement(l.EuiFlexItem,{grow:!1,"data-test-subj":"user-profile-tooltip-avatar"},n.a.createElement(d,{userInfo:e})),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"none"},n.a.createElement(l.EuiFlexItem,null,n.a.createElement(r,{userInfo:e})),(null==e?void 0:e.user)&&p(e)&&n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-tooltip-email"},e.user.email)))));m.displayName="UserFullRepresentation";const p=e=>{var t,a;return(null==e||null===(t=e.user)||void 0===t?void 0:t.full_name)&&(null==e||null===(a=e.user)||void 0===a?void 0:a.email)},b=({children:e,userInfo:t})=>n.a.createElement(l.EuiToolTip,{display:"inlineBlock",position:"top",content:n.a.createElement(m,{userInfo:t}),"data-test-subj":"user-profile-tooltip"},e);b.displayName="UserToolTip";const g=n.a.memo(b)},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(233),n=a(4),l=a(236);const i=Object(s.a)(),o={[n.e.open]:{...i[n.e.open],actions:{single:{title:l.h}},actionBar:{title:l.c},button:{label:l.j},stats:{title:l.i}},[n.e["in-progress"]]:{...i[n.e["in-progress"]],actions:{single:{title:l.g}},actionBar:{title:l.b},button:{label:l.g},stats:{title:l.f}},[n.e.closed]:{...i[n.e.closed],actions:{single:{title:l.e}},actionBar:{title:l.a},button:{label:l.e},stats:{title:l.d}}}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i.a}));var s=a(1),n=a.n(s),l=a(5),i=a(176),o=a(236);const c=({status:e,disabled:t=!1,onClick:a})=>n.a.createElement(l.EuiBadge,{iconType:"arrowDown",iconSide:"right",iconOnClick:a,iconOnClickAriaLabel:o.k,"data-test-subj":`case-status-badge-popover-button-${e}`,isDisabled:t,color:i.a[e].color},i.a[e].label);c.displayName="StatusPopoverButton";const r=Object(s.memo)(c);a(202)},186:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(1),n=a(5),l=a(233),i=a(13);const o=Object(l.a)(),c=({status:e,dataTestSubj:t})=>{var a,s;return Object(i.jsx)(n.EuiBadge,{"data-test-subj":t||`case-status-badge-${e}`,color:null===(a=o[e])||void 0===a?void 0:a.color},null===(s=o[e])||void 0===s?void 0:s.label)};c.displayName="Status";const r=Object(s.memo)(c)},187:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(5),n=a(91),l=a.n(n),i=a(1),o=a.n(i),c=a(6);const r=o.a.memo((({children:e,date:t,fieldName:a,className:n=""})=>o.a.createElement(s.EuiToolTip,{"data-test-subj":"localized-date-tool-tip",anchorClassName:n,content:o.a.createElement(s.EuiFlexGroup,{"data-test-subj":"dates-container",direction:"column",gutterSize:"none"},null!=a?o.a.createElement(s.EuiFlexItem,{grow:!1},o.a.createElement("span",{"data-test-subj":"field-name"},a)):null,o.a.createElement(s.EuiFlexItem,{"data-test-subj":"with-day-of-week",grow:!1},l.a.tz(t,Object(c.i)()).format("llll")))},o.a.createElement(o.a.Fragment,null,e))));r.displayName="LocalizedDateTooltip"},193:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(1),n=a.n(s),l=a(56);const i=a.n(l).a.span.withConfig({displayName:"Text",componentId:"sc-1sd0b9z-0"})(["text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:",";-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;"],3),o=({text:e})=>n.a.createElement(i,{title:e},e);o.displayName="TruncatedText";const c=n.a.memo(o)},194:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(1),n=a(113),l=function(){};t.default=function(e,t,a){if(!n.isClient)return[t,l,l];if(!e)throw new Error("useLocalStorage key may not be falsy");var i=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,o=s.useState((function(){try{var s=a?a.raw?String:a.serializer:JSON.stringify,n=localStorage.getItem(e);return null!==n?i(n):(t&&localStorage.setItem(e,s(t)),t)}catch(e){return t}})),c=o[0],r=o[1],u=s.useCallback((function(t){try{var s="function"==typeof t?t(c):t;if(void 0===s)return;var n;n=a?a.raw?"string"==typeof s?s:JSON.stringify(s):a.serializer?a.serializer(s):JSON.stringify(s):JSON.stringify(s),localStorage.setItem(e,n),r(i(n))}catch(e){}}),[e,r]),d=s.useCallback((function(){try{localStorage.removeItem(e),r(void 0)}catch(e){}}),[e,r]);return[c,u,d]}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return u})),a(26);var s=a(1),n=a.n(s),l=a(56),i=a.n(l);const o=a(2).i18n.translate("xpack.cases.emptyString.emptyStringDescription",{defaultMessage:"Empty String"}),c=i.a.span.withConfig({displayName:"EmptyWrapper",componentId:"sc-1iv6xg8-0"})(["color:",";"],(e=>e.theme.eui.euiColorMediumShade));c.displayName="EmptyWrapper";const r=()=>n.a.createElement(c,null,"â€”"),u=e=>null==e?r():""===e?n.a.createElement(c,null,`(${o})`):n.a.createElement(n.a.Fragment,null,e)},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(91),n=a.n(s),l=a(1),i=a.n(l),o=a(136),c=a(6),r=a(199),u=a(187),d=a(234);const m=i.a.memo((({value:e,dateFormat:t,stripMs:a=!1})=>{const s=Object(c.e)(),l=t||s,o=l&&a?l.replace(/\.?SSS/,""):l;return i.a.createElement(i.a.Fragment,null,n.a.tz(e,Object(c.i)()).format(o))}));m.displayName="PreferenceFormattedDate";const p=e=>Array.isArray(e)&&"P1DT"===e[0]&&2===e.length;i.a.memo((({value:e})=>{const[t]=Object(c.k)("dateFormat:scaled"),a=Array.isArray(t)?t.find(p):null,s=Array.isArray(a)&&2===a.length?a[1]:"YYYY-MM-DD";return i.a.createElement(m,{dateFormat:s,value:e})})).displayName="PreferenceFormattedP1DTDate",i.a.memo((({value:e,fieldName:t,className:a=""})=>{if(null==e)return Object(r.b)(e);const s=Object(d.a)(e);return s.isValid()?i.a.createElement(u.a,{date:s.toDate(),fieldName:t,className:a},i.a.createElement(m,{value:s.toDate()})):Object(r.b)(e)})).displayName="FormattedDate";const b=({value:e,stripMs:t=!1})=>{if(null==e)return Object(r.b)(e);const a=Object(d.a)(e);if(!a.isValid())return Object(r.b)(e);const s=a.toDate();return i.a.createElement(u.a,{date:s},n()(s).add(1,"hours").isBefore(new Date)?i.a.createElement(m,{"data-test-subj":"preference-time",value:s,stripMs:t}):i.a.createElement(o.FormattedRelative,{"data-test-subj":"relative-time",value:s}))};b.displayName="FormattedRelativePreferenceDate"},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(1),n=a.n(s),l=a(5),i=a(176);const o=({caseCount:e,caseStatus:t,isLoading:a,dataTestSubj:o})=>{const c=Object(s.useMemo)((()=>[{title:i.a[t].stats.title,description:a?n.a.createElement(l.EuiLoadingSpinner,{"data-test-subj":`${o}-loading-spinner`}):null!=e?e:"-"}]),[e,t,o,a]);return n.a.createElement(l.EuiDescriptionList,{"data-test-subj":o,textStyle:"reverse",listItems:c})};o.displayName="StatusStats";const c=Object(s.memo)(o)},207:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(1),n=a.n(s),l=a(232);const i=({userInfo:e})=>n.a.createElement(l.a,{size:"s",userInfo:e});i.displayName="SmallUserAvatar";const o=n.a.memo(i)},210:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(169),n=a(12),l=a(83);const i=e=>{if(!e)return l.l;const t=Object(s.c)(e);return Object(n.isEmpty)(t)?l.l:t}},212:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var s=a(46),n=a(80),l=a(6),i=a(48),o=a(81),c=a(35),r=a(155),u=a(159);const d={cases:[],countClosedCases:0,countInProgressCases:0,countOpenCases:0,page:0,perPage:0,total:0},m=(e={})=>{var t;const a=Object(l.j)(),{owner:d}=Object(c.a)(),m=Object(r.a)(Object(u.b)("delete")),p=d.length?d:m,b=null!=(null===(t=e.filterOptions)||void 0===t?void 0:t.owner)&&e.filterOptions.owner.length>0?{owner:e.filterOptions.owner}:{owner:p};return Object(s.useQuery)(n.d.cases(e),(({signal:t})=>{var a,s;return Object(o.j)({filterOptions:{...n.a,...null!==(a=e.filterOptions)&&void 0!==a?a:{},...b},queryParams:{...n.b,...null!==(s=e.queryParams)&&void 0!==s?s:{}},signal:t})}),{keepPreviousData:!0,onError:e=>{"AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:i.e})}})}},231:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(1),n=a.n(s),l=a(5),i=a(2),o=a(23);const c=({totalCasesToBeDeleted:e,onCancel:t,onConfirm:a})=>{return n.a.createElement(l.EuiConfirmModal,{buttonColor:"danger",cancelButtonText:o.m,confirmButtonText:o.F(e),"data-test-subj":"confirm-delete-case-modal",defaultFocusedButton:"confirm",onCancel:t,onConfirm:a,title:o.F(e)},(s=e,i.i18n.translate("xpack.cases.confirmDeleteCase.confirmQuestion",{values:{quantity:s},defaultMessage:"By deleting {quantity, plural, =1 {this case} other {these cases}}, all related case data will be permanently removed and you will no longer be able to push data to an external incident management system. Are you sure you wish to proceed?"})));var s};c.displayName="ConfirmDeleteCaseModalComp";const r=n.a.memo(c)},232:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(1),n=a.n(s),l=a(169);const i=({size:e})=>n.a.createElement(l.a,{"data-test-subj":"case-user-profile-avatar-unknown-user",size:e});i.displayName="UnknownUserAvatar";const o=n.a.memo(i),c=({size:e,userInfo:t})=>{var a,s;const i=null==t||null===(a=t.user)||void 0===a?void 0:a.username;return void 0!==(null==t?void 0:t.user)?n.a.createElement(l.a,{user:null==t?void 0:t.user,avatar:null==t||null===(s=t.data)||void 0===s?void 0:s.avatar,"data-test-subj":`case-user-profile-avatar-${i}`,size:e}):n.a.createElement(o,{size:e})};c.displayName="CaseUserAvatar";const r=n.a.memo(c)},233:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(64),n=a(54);const l=()=>({[n.a.open]:{color:"primary",label:s.c,icon:"folderOpen"},[n.a["in-progress"]]:{color:"warning",label:s.b,icon:"folderExclamation"},[n.a.closed]:{color:"default",label:s.a,icon:"folderCheck"}})},234:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(26),n=a(142),l=a.n(n);const i=e=>{if(Object(s.isString)(e)&&""!==e.trim()){const t=l()(new Date(e));return t.isValid()||isNaN(+e)?t:l()(new Date(+e))}return l()(new Date(e))}},235:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(46),n=a(48),l=a(81),i=a(80),o=a(47);const c=()=>{const e=Object(s.useQueryClient)(),{showErrorToast:t,showSuccessToast:a}=Object(o.a)();return Object(s.useMutation)((({caseIds:e})=>Object(l.b)({caseIds:e})),{mutationKey:i.c.deleteCases,onSuccess:(t,{successToasterTitle:s})=>{e.invalidateQueries(i.d.casesList()),e.invalidateQueries(i.d.tags()),e.invalidateQueries(i.d.categories()),e.invalidateQueries(i.d.userProfiles()),a(s)},onError:e=>{t(e,{title:n.c})}})}},236:function(e,t,a){"use strict";a.d(t,"k",(function(){return l})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));var s=a(2),n=a(23);a.d(t,"d",(function(){return n.t})),a.d(t,"e",(function(){return n.v})),a.d(t,"f",(function(){return n.L})),a.d(t,"g",(function(){return n.O})),a.d(t,"h",(function(){return n.V})),a.d(t,"i",(function(){return n.W})),a.d(t,"j",(function(){return n.cb})),s.i18n.translate("xpack.cases.status.all",{defaultMessage:"All status"});const l=s.i18n.translate("xpack.cases.status.iconAria",{defaultMessage:"Change status"}),i=s.i18n.translate("xpack.cases.caseView.caseOpened",{defaultMessage:"Case opened"}),o=s.i18n.translate("xpack.cases.caseView.caseInProgress",{defaultMessage:"Case in progress"}),c=s.i18n.translate("xpack.cases.caseView.caseClosed",{defaultMessage:"Case closed"})},237:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(1),n=a(179);const l=({caseAssignees:e,userProfiles:t})=>{const{assigneesWithProfiles:a,assigneesWithoutProfiles:l}=Object(s.useMemo)((()=>{const{usersWithProfiles:a,usersWithoutProfiles:s}=e.reduce(((e,a)=>{const s=t.get(a.uid);return s?e.usersWithProfiles.push(s):e.usersWithoutProfiles.push({uid:a.uid}),e}),{usersWithProfiles:[],usersWithoutProfiles:[]}),l=Object(n.d)(a),i=null==l?void 0:l.map((e=>({uid:e.uid,profile:e})));return{assigneesWithProfiles:null!=i?i:[],assigneesWithoutProfiles:s}}),[e,t]),i=Object(s.useMemo)((()=>[...a,...l]),[a,l]);return{assigneesWithProfiles:a,assigneesWithoutProfiles:l,allAssignees:i}}},239:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=e=>{var t,a;return null!==(t=null===(a=e.profile)||void 0===a?void 0:a.user.username)&&void 0!==t?t:e.uid}},240:function(e,t,a){"use strict";const s=a(265);e.exports=(e,t={})=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);const a=[],n=(e,s,n,l)=>{if(!(0!==a.length&&t.colonNotation||0!==e||t.colonNotation&&"m"===n))return;let i,o;if(l=(l||e||"0").toString(),t.colonNotation){i=a.length>0?":":"",o="";const e=l.includes(".")?l.split(".")[0].length:l.length,t=a.length>0?2:1;l="0".repeat(Math.max(0,t-e))+l}else i="",o=t.verbose?" "+(c=s,1===e?c:`${c}s`):n;var c;a.push(i+l+o)};if(("number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1)<1){const t=1e3-e%1e3;t<500&&(e+=t)}if(e>=59950&&!t.separateMilliseconds&&!t.formatSubMilliseconds){const t=60-e%60;t<=50&&(e+=t)}const l=s(e);if(n(Math.trunc(l.days/365),"year","y"),n(l.days%365,"day","d"),n(l.hours,"hour","h"),n(l.minutes,"minute","m"),t.separateMilliseconds||t.formatSubMilliseconds||e<1e3)if(n(l.seconds,"second","s"),t.formatSubMilliseconds)n(l.milliseconds,"millisecond","ms"),n(l.microseconds,"microsecond","Âµs"),n(l.nanoseconds,"nanosecond","ns");else{const e=l.milliseconds+l.microseconds/1e3+l.nanoseconds/1e6,a="number"==typeof t.millisecondsDecimalDigits?t.millisecondsDecimalDigits:0,s=e>=1?Math.round(e):Math.ceil(e),i=a?e.toFixed(a):s;n(parseFloat(i,10),"millisecond","ms",i)}else{const a=e/1e3%60,s="number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1,l=a.toFixed(s),i=t.keepDecimalsOnWholeSeconds?l:l.replace(/\.0+$/,"");n(parseFloat(i,10),"second","s",i)}return 0===a.length?"0"+(t.verbose?" milliseconds":"ms"):t.compact?a[0]:"number"==typeof t.unitCount?a.slice(0,Math.max(t.unitCount,1)).join(" "):t.colonNotation?a.join(""):a.join(" ")}},260:function(e,t,a){"use strict";a.d(t,"a",(function(){return Da}));var s=a(1),n=a.n(s),l=a(5),i=a(26),o=a(56),c=a.n(o),r=a(63),u=a(4),d=a(186),m=a(49),p=a(199),b=a(201),g=a(158),E=a(82),f=a(136),C=a(235),y=a(2),h=a(23);const v=y.i18n.translate("xpack.cases.actions.deleteMultipleCases",{defaultMessage:"Delete cases"}),O=y.i18n.translate("xpack.cases.actions.deleteSingleCase",{defaultMessage:"Delete case"});var j=a(35);const S=({onAction:e,onActionSuccess:t,isDisabled:a})=>{const i=Object(l.useEuiTheme)(),{permissions:o}=Object(j.a)(),[c,r]=Object(s.useState)(!1),[u,d]=Object(s.useState)([]),m=o.delete,p=a||!m,b=Object(s.useCallback)((()=>r(!1)),[]),g=Object(s.useCallback)((t=>{e(),r(!0),d(t)}),[e]),{mutate:E}=Object(C.a)(),f=Object(s.useCallback)((()=>{b(),E({caseIds:u.map((({id:e})=>e)),successToasterTitle:h.E(u.length)},{onSuccess:t})}),[E,t,b,u]),y=p?i.euiTheme.colors.disabled:"danger";return{getAction:e=>{return{name:n.a.createElement(l.EuiTextColor,{color:y},(t=e.length,t>1?v:O)),onClick:()=>g(e),disabled:p,"data-test-subj":"cases-bulk-action-delete",icon:n.a.createElement(l.EuiIcon,{type:"trash",size:"m",color:y}),key:"cases-bulk-action-delete"};var t},isModalVisible:c,onConfirmDeletion:f,onCloseModal:b,canDelete:m}};var k=a(231),w=a(46),x=a(48),I=a(81),F=a(47),T=a(80);const A=()=>{const e=Object(w.useQueryClient)(),{showErrorToast:t,showSuccessToast:a}=Object(F.a)();return Object(w.useMutation)((({cases:e})=>Object(I.t)({cases:e})),{mutationKey:T.c.updateCases,onSuccess:(t,{successToasterTitle:s})=>{e.invalidateQueries(T.d.casesList()),e.invalidateQueries(T.d.tags()),e.invalidateQueries(T.d.userProfiles()),a(s)},onError:e=>{t(e,{title:x.f})}})};y.i18n.translate("xpack.cases.actions.status.close",{defaultMessage:"Close selected"}),y.i18n.translate("xpack.cases.actions.status.open",{defaultMessage:"Open selected"}),y.i18n.translate("xpack.cases.actions.status.inProgress",{defaultMessage:"Mark in progress"});var D=a(184);const M=(e,t)=>{const a=t.length,s=1===a?t[0].title:"";return e===u.e.open?(({totalCases:e,caseTitle:t})=>y.i18n.translate("xpack.cases.actions.reopenedCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Opened {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}))({totalCases:a,caseTitle:s}):e===u.e["in-progress"]?(({totalCases:e,caseTitle:t})=>y.i18n.translate("xpack.cases.actions.markInProgressCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Marked {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}} as in progress'}))({totalCases:a,caseTitle:s}):e===u.e.closed?(({totalCases:e,caseTitle:t})=>y.i18n.translate("xpack.cases.actions.closedCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Closed {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}))({totalCases:a,caseTitle:s}):""},N=(e,t)=>e.every((e=>e.status===t)),z=({onAction:e,onActionSuccess:t,isDisabled:a,selectedStatus:n})=>{const{mutate:l}=A(),{permissions:i}=Object(j.a)(),o=i.update,c=a||!o,r=Object(s.useCallback)(((a,s)=>{e();const n=a.map((e=>({status:s,id:e.id,version:e.version})));l({cases:n,successToasterTitle:M(s,a)},{onSuccess:t})}),[e,l,t]),d=e=>n&&n===e?"check":"empty";return{getActions:e=>[{name:D.b[u.e.open].label,icon:d(u.e.open),onClick:()=>r(e,u.e.open),disabled:c||N(e,u.e.open),"data-test-subj":"cases-bulk-action-status-open",key:"cases-bulk-action-status-open"},{name:D.b[u.e["in-progress"]].label,icon:d(u.e["in-progress"]),onClick:()=>r(e,u.e["in-progress"]),disabled:c||N(e,u.e["in-progress"]),"data-test-subj":"cases-bulk-action-status-in-progress",key:"cases-bulk-action-status-in-progress"},{name:D.b[u.e.closed].label,icon:d(u.e.closed),onClick:()=>r(e,u.e.closed),disabled:c||N(e,u.e.closed),"data-test-subj":"cases-bulk-action-status-closed",key:"cases-bulk-status-action"}],canUpdateStatus:o}};var P=a(203),L=a(163);const _=({totalCases:e,severity:t,caseTitle:a})=>y.i18n.translate("xpack.cases.actions.severity",{values:{caseTitle:a,totalCases:e,severity:t},defaultMessage:'{totalCases, plural, =1 {Case "{caseTitle}" was} other {{totalCases} cases were}} set to {severity}'}),$=(e,t)=>{const a=t.length,s=1===a?t[0].title:"";switch(e){case u.d.LOW:return(({totalCases:e,caseTitle:t})=>_({totalCases:e,caseTitle:t,severity:L.a[u.d.LOW].label}))({totalCases:a,caseTitle:s});case u.d.MEDIUM:return(({totalCases:e,caseTitle:t})=>_({totalCases:e,caseTitle:t,severity:L.a[u.d.MEDIUM].label}))({totalCases:a,caseTitle:s});case u.d.HIGH:return(({totalCases:e,caseTitle:t})=>_({totalCases:e,caseTitle:t,severity:L.a[u.d.HIGH].label}))({totalCases:a,caseTitle:s});case u.d.CRITICAL:return(({totalCases:e,caseTitle:t})=>_({totalCases:e,caseTitle:t,severity:L.a[u.d.CRITICAL].label}))({totalCases:a,caseTitle:s});default:return""}},B=(e,t)=>e.every((e=>e.severity===t)),H=({onAction:e,onActionSuccess:t,isDisabled:a,selectedSeverity:n})=>{const{mutate:l}=A(),{permissions:i}=Object(j.a)(),o=i.update,c=a||!o,r=Object(s.useCallback)(((a,s)=>{e();const n=a.map((e=>({severity:s,id:e.id,version:e.version})));l({cases:n,successToasterTitle:$(s,a)},{onSuccess:t})}),[e,l,t]),d=e=>n&&n===e?"check":"empty";return{getActions:e=>[{name:L.a[u.d.LOW].label,icon:d(u.d.LOW),onClick:()=>r(e,u.d.LOW),disabled:c||B(e,u.d.LOW),"data-test-subj":"cases-bulk-action-severity-low",key:"cases-bulk-action-severity-low"},{name:L.a[u.d.MEDIUM].label,icon:d(u.d.MEDIUM),onClick:()=>r(e,u.d.MEDIUM),disabled:c||B(e,u.d.MEDIUM),"data-test-subj":"cases-bulk-action-severity-medium",key:"cases-bulk-action-severity-medium"},{name:L.a[u.d.HIGH].label,icon:d(u.d.HIGH),onClick:()=>r(e,u.d.HIGH),disabled:c||B(e,u.d.HIGH),"data-test-subj":"cases-bulk-action-severity-high",key:"cases-bulk-action-severity-high"},{name:L.a[u.d.CRITICAL].label,icon:d(u.d.CRITICAL),onClick:()=>r(e,u.d.CRITICAL),disabled:c||B(e,u.d.CRITICAL),"data-test-subj":"cases-bulk-action-severity-critical",key:"cases-bulk-action-severity-critical"}],canUpdateSeverity:o}};var U=a(12);const K=({isDisabled:e,fieldKey:t,onAction:a,onActionSuccess:n,successToasterTitle:l,fieldSelector:i,itemsTransformer:o})=>{const{mutate:c}=A(),{permissions:r}=Object(j.a)(),[u,d]=Object(s.useState)(!1),[m,p]=Object(s.useState)([]),b=r.update,g=e||!b,E=Object(s.useCallback)((()=>d(!1)),[]),f=Object(s.useCallback)((e=>{a(),d(!0),p(e)}),[a]),C=Object(s.useCallback)((e=>{a(),E();const s=m.reduce(((a,s)=>{const n=i(s),l=Object(U.difference)(n,e.unSelectedItems),c=new Set([...l,...e.selectedItems]);return r=new Set([...n]),u=c,Object(U.isEqual)(r,u)?a:[...a,{[t]:o(Array.from(c.values())),id:s.id,version:s.version}];var r,u}),[]);c({cases:s,successToasterTitle:l(m.length)},{onSuccess:n})}),[t,i,o,a,n,E,m,l,c]);return{isFlyoutOpen:u,onFlyoutClosed:E,onSaveItems:C,openFlyout:f,isActionDisabled:g}},R=e=>y.i18n.translate("xpack.cases.containers.editedCases",{values:{totalCases:e},defaultMessage:"Edited {totalCases, plural, =1 {case} other {{totalCases} cases}}"}),G=e=>y.i18n.translate("xpack.cases.actions.headerSubtitle",{values:{totalCases:e},defaultMessage:"Selected cases: {totalCases}"}),W=y.i18n.translate("xpack.cases.actions.saveSelection",{defaultMessage:"Save selection"}),V=y.i18n.translate("xpack.cases.actions.searchPlaceholder",{defaultMessage:"Search"}),q=y.i18n.translate("xpack.cases.actions.tags.edit",{defaultMessage:"Edit tags"}),Q=y.i18n.translate("xpack.cases.actions.tags.selectAll",{defaultMessage:"Select all"}),Y=y.i18n.translate("xpack.cases.actions.tags.selectNone",{defaultMessage:"Select none"}),J=y.i18n.translate("xpack.cases.actions.tags.noTagsAvailable",{defaultMessage:"No tags available. To add a tag, enter it in the query bar"}),X=y.i18n.translate("xpack.cases.actions.tags.noTagsMatch",{defaultMessage:"No tags match your search"}),Z=({onAction:e,onActionSuccess:t,isDisabled:a})=>{const{isFlyoutOpen:s,onFlyoutClosed:i,onSaveItems:o,openFlyout:c,isActionDisabled:r}=K({fieldKey:"tags",isDisabled:a,onAction:e,onActionSuccess:t,successToasterTitle:R,fieldSelector:e=>e.tags,itemsTransformer:e=>e});return{getAction:e=>({name:q,onClick:()=>c(e),disabled:r,"data-test-subj":"cases-bulk-action-tags",icon:n.a.createElement(l.EuiIcon,{type:"tag",size:"m"}),key:"cases-bulk-action-tags"}),isFlyoutOpen:s,onFlyoutClosed:i,onSaveTags:o}};var ee,te=a(189);let ae;var se;!function(e){e.CHECKED="checked",e.PARTIAL="partial",e.UNCHECKED="unchecked"}(ee||(ee={})),function(e){e[e.CHECK_ITEM=0]="CHECK_ITEM",e[e.UNCHECK_ITEM=1]="UNCHECK_ITEM",e[e.SET_NEW_STATE=2]="SET_NEW_STATE"}(ae||(ae={})),function(e){e.CHECKED="check",e.PARTIAL="asterisk",e.UNCHECKED="empty"}(se||(se={}));const ne={[ee.CHECKED]:se.CHECKED,[ee.PARTIAL]:se.PARTIAL,[ee.UNCHECKED]:se.UNCHECKED},le=(e,t)=>{switch(t.type){case ae.CHECK_ITEM:const a={};for(const e of t.payload)a[e.key]={key:e.key,itemState:ee.CHECKED,dirty:!0,icon:se.CHECKED,data:e.data};return{...e,items:{...e.items,...a}};case ae.UNCHECK_ITEM:const s={};for(const e of t.payload)s[e.key]={key:e.key,itemState:ee.UNCHECKED,dirty:!0,icon:se.UNCHECKED,data:e.data};return{...e,items:{...e.items,...s}};case ae.SET_NEW_STATE:return{...t.payload};default:Object(l.assertNever)(t)}},ie=({items:e,selectedCases:t,fieldSelector:a})=>{const s=oe({selectedCases:t,fieldSelector:a}),n=t.length,l={},i={items:l,itemCounterMap:s};for(const t of e){var o;const e=null!==(o=s.get(t))&&void 0!==o?o:0,a=e===n,i=e<n&&0!==e,c=a?ee.CHECKED:i?ee.PARTIAL:ee.UNCHECKED,r=ce(c);l[t]={key:t,itemState:c,dirty:a,icon:r,data:{}}}return i},oe=({selectedCases:e,fieldSelector:t})=>{const a=new Map;for(const n of e){const e=t(n);for(const t of e){var s;a.set(t,(null!==(s=a.get(t))&&void 0!==s?s:0)+1)}}return a},ce=e=>ne[e],re=e=>e.map((e=>e.key)),ue=e=>Object.keys(e).map((t=>({key:t,data:e[t].data}))),de=({items:e,selectedCases:t,fieldSelector:a,itemToSelectableOption:n,onChangeItems:l})=>{const[i,o]=Object(s.useReducer)(le,{items:e,selectedCases:t,fieldSelector:a},ie),c=Object(s.useCallback)((()=>Object.keys(i.items).map((e=>{var t;const a=n({key:e,data:i.items[e].data});return{key:e,...i.items[e].itemState===ee.CHECKED?{checked:"on"}:{},"data-test-subj":`cases-actions-items-edit-selectable-item-${e}`,...a,label:null!==(t=a.label)&&void 0!==t?t:e,data:{...null==a?void 0:a.data,itemIcon:i.items[e].icon}}}))),[i.items,n]),r=Object(s.useCallback)((e=>{const t=e.map((e=>{var t,a;return null!==(t=e.data)&&void 0!==t&&t.newItem?{...e,label:null!==(a=e.key)&&void 0!==a?a:""}:e})),{selectedItems:a,unSelectedItems:s}=((e,t)=>{const a=[],s=[];for(const o of e){var n,l,i;"on"===o.checked&&a.push({key:o.key,data:null!==(l=o.data)&&void 0!==l?l:{}}),null!==(n=o.data)&&void 0!==n&&n.newItem||o.checked||!t[o.key]||!t[o.key].dirty||s.push({key:o.key,data:null!==(i=o.data)&&void 0!==i?i:{}})}return{selectedItems:a,unSelectedItems:s}})(t,i.items);o({type:ae.CHECK_ITEM,payload:a}),o({type:ae.UNCHECK_ITEM,payload:s}),l({selectedItems:re(a),unSelectedItems:re(s)})}),[l,i.items]),u=Object(s.useCallback)((()=>{o({type:ae.CHECK_ITEM,payload:ue(i.items)}),l({selectedItems:Object.keys(i.items),unSelectedItems:[]})}),[l,i.items]),d=Object(s.useCallback)((()=>{const e=[];for(const[t,a]of Object.entries(i.items))a.itemState!==ee.CHECKED&&a.itemState!==ee.PARTIAL||e.push({key:t,data:a.data});o({type:ae.UNCHECK_ITEM,payload:e}),l({selectedItems:[],unSelectedItems:re(e)})}),[i.items,l]),m=Object(s.useMemo)((()=>c()),[c]),p=Object.values(i.items).filter((e=>e.itemState===ee.CHECKED||e.itemState===ee.PARTIAL)).length,b=Object(s.useCallback)((e=>{const s=ie({items:e,selectedCases:t,fieldSelector:a});o({type:ae.SET_NEW_STATE,payload:s})}),[a,t]);return Object(s.useMemo)((()=>({state:i,options:m,totalSelectedItems:p,onChange:r,onSelectAll:u,onSelectNone:d,resetItems:b})),[r,u,d,m,b,i,p])},me=e=>({key:e.key,label:e.key,"data-test-subj":`cases-actions-tags-edit-selectable-tag-${e.key}`}),pe=({selectedCases:e,tags:t,isLoading:a,onChangeTags:i})=>{const{state:o,options:c,totalSelectedItems:r,onChange:u,onSelectAll:d,onSelectNone:m}=de({items:t,selectedCases:e,itemToSelectableOption:me,fieldSelector:e=>e.tags,onChangeItems:i}),[p,b]=Object(s.useState)(""),{euiTheme:g}=Object(l.useEuiTheme)(),E=Object(s.useCallback)(((e,t)=>{const a=e.newItem?"cases-actions-tags-edit-selectable-add-new-tag-icon":`cases-actions-tags-edit-selectable-tag-${e.label}-icon-${e.itemIcon}`;return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiIcon,{type:e.itemIcon,"data-test-subj":a,className:"euiSelectableListItem__icon euiSelectableListItem__prepend"}),n.a.createElement(l.EuiHighlight,{search:t},e.label))}),[]),f=Object(s.useMemo)((()=>Object(U.isEmpty)(p)||((e,t)=>t.some((t=>t.key===e)))(p,c)?c:[{key:p,label:h.f(p),"data-test-subj":"cases-actions-tags-edit-selectable-add-new-tag",data:{itemIcon:"empty",newItem:!0}},...c]),[c,p]),C=Object(s.useMemo)((()=>!((e,t)=>t.some((t=>{var a;return null===(a=t.key)||void 0===a?void 0:a.includes(e)})))(p,c)&&Object.keys(o.items).length>0),[c,p,o.items]),v=Object(s.useCallback)((e=>{b(e)}),[]);return n.a.createElement(l.EuiSelectable,{options:f,searchable:!0,searchProps:{placeholder:V,isLoading:a,isClearable:!a,onChange:v,value:p,"data-test-subj":"cases-actions-tags-edit-selectable-search-input"},renderOption:E,listProps:{showIcons:!1},onChange:u,noMatchesMessage:X,emptyMessage:J,"data-test-subj":"cases-actions-tags-edit-selectable",height:"full"},((e,a)=>{return n.a.createElement(n.a.Fragment,null,a,n.a.createElement(l.EuiSpacer,{size:"s"}),n.a.createElement(ge,{alignItems:"center",justifyContent:"spaceBetween",responsive:!1,direction:"row",gutterSize:"none"},n.a.createElement(Ee,{grow:!1,$_css:g.border.thin,$_css2:g.size.s},n.a.createElement(l.EuiText,{size:"xs",color:"subdued"},(i=t.length,y.i18n.translate("xpack.cases.actions.tags.totalTags",{defaultMessage:"Total tags: {totalTags}",values:{totalTags:i}})))),n.a.createElement(fe,{grow:!1,$_css3:g.size.s},n.a.createElement(l.EuiText,{size:"xs",color:"subdued"},(s=r,y.i18n.translate("xpack.cases.actions.tags.selectedTags",{defaultMessage:"Selected: {selectedTags}",values:{selectedTags:s}})))),n.a.createElement(Ce,{grow:!1},n.a.createElement(l.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",onClick:d},Q)),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",onClick:m},Y))))),n.a.createElement(l.EuiHorizontalRule,{margin:"m"}),C?n.a.createElement(ye,{size:"xs",color:"subdued",textAlign:"center","data-test-subj":"cases-actions-tags-edit-selectable-no-match-label",$_css4:g.size.s},X):null,e);var s,i}))};pe.displayName="EditTagsSelectable";const be=n.a.memo(pe);var ge=c()(l.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1g4wad7-0"})({flexGrow:0}),Ee=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1g4wad7-1"})((e=>({borderRight:e.$_css,paddingRight:e.$_css2}))),fe=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-1g4wad7-2"})((e=>({paddingLeft:e.$_css3}))),Ce=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem3",componentId:"sc-1g4wad7-3"})({marginLeft:"auto"}),ye=c()(l.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1g4wad7-4"})((e=>({marginBottom:e.$_css4})));const he=c()(l.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-4ta9b4-0"})([""," .euiFlyoutBody__overflowContent{","}"],Object(l.euiFullHeight)(),Object(l.euiFullHeight)()),ve=({selectedCases:e,onClose:t,onSaveTags:a})=>{const{data:i,isLoading:o}=Object(te.a)(),[c,r]=Object(s.useState)({selectedItems:[],unSelectedItems:[]}),u=Object(s.useCallback)((()=>a(c)),[a,c]),d=e.length>1?G(e.length):e[0].title;return n.a.createElement(l.EuiFlyout,{ownFocus:!0,onClose:t,"aria-labelledby":"cases-edit-tags-flyout","data-test-subj":"cases-edit-tags-flyout",size:"s",paddingSize:"m"},n.a.createElement(l.EuiFlyoutHeader,{hasBorder:!0},n.a.createElement(l.EuiTitle,{size:"m"},n.a.createElement("h2",{"data-test-subj":"cases-edit-tags-flyout-title"},q)),n.a.createElement(l.EuiText,{color:"subdued"},n.a.createElement("p",null,d))),n.a.createElement(he,null,o?n.a.createElement(l.EuiLoadingSpinner,null):n.a.createElement(be,{selectedCases:e,isLoading:o,tags:null!=i?i:[],onChangeTags:r})),n.a.createElement(l.EuiFlyoutFooter,null,n.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{onClick:t,flush:"left","data-test-subj":"cases-edit-tags-flyout-cancel"},h.m)),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButton,{onClick:u,fill:!0,"data-test-subj":"cases-edit-tags-flyout-submit"},W)))))};ve.displayName="EditTagsFlyout";const Oe=n.a.memo(ve);var je=a(83);const Se=y.i18n.translate("xpack.cases.actions.assignees.edit",{defaultMessage:"Edit assignees"}),ke=y.i18n.translate("xpack.cases.actions.assignees.searchPlaceholder",{defaultMessage:"Find a user"}),we=y.i18n.translate("xpack.cases.actions.assignees.noSelectedAssigneesHelpText",{defaultMessage:"Search to assign users."}),xe=({onAction:e,onActionSuccess:t,isDisabled:a})=>{const{isFlyoutOpen:s,onFlyoutClosed:i,onSaveItems:o,openFlyout:c,isActionDisabled:r}=K({fieldKey:"assignees",isDisabled:a,onAction:e,onActionSuccess:t,successToasterTitle:R,fieldSelector:e=>e.assignees.map((({uid:e})=>e)),itemsTransformer:e=>e.map((e=>({uid:e})))});return{getAction:e=>({name:Se,onClick:()=>c(e),disabled:r,"data-test-subj":"cases-bulk-action-assignees",icon:n.a.createElement(l.EuiIcon,{type:"userAvatar",size:"m"}),key:"cases-bulk-action-assignees"}),isFlyoutOpen:s,onFlyoutClosed:i,onSaveAssignees:o}};var Ie=a(169),Fe=a(6),Te=a(177);const Ae=e=>e.reduce(((e,t)=>(e.set(t.uid,t),e)),new Map),De=({uids:e})=>{const{security:t}=Object(Fe.g)().services,a=Object(Fe.j)();return Object(w.useQuery)(T.d.userProfilesList(e),(()=>Object(Te.a)({security:t,uids:e})),{select:Ae,retry:!1,keepPreviousData:!0,onError:e=>{"AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:x.e})}})};var Me=a(190),Ne=a(191),ze=a(205),Pe=a(206),Le=a(207);const _e=({totalSelectedCases:e})=>{return n.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",direction:"column",justifyContent:"spaceAround","data-test-subj":"case-user-profiles-assignees-no-selected-assignees"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiIcon,{type:"userAvatar",size:"xl"}),n.a.createElement(l.EuiSpacer,{size:"xs"})),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiTextAlign,{textAlign:"center"},n.a.createElement(l.EuiText,{size:"s",color:"default"},n.a.createElement("strong",null,(t=e,y.i18n.translate("xpack.cases.actions.assignees.noSelectedAssigneesTitle",{values:{totalCases:t},defaultMessage:"The selected {totalCases, plural, =1 {case does} other {cases do}} not have any assigned users"}))),n.a.createElement("br",null)),n.a.createElement(l.EuiText,{size:"s",color:"subdued"},we))));var t};_e.displayName="NoSelectedAssignees";const $e=n.a.memo(_e),Be=({selectedCases:e,onChangeAssignees:t})=>{const{owner:a}=Object(j.a)(),{euiTheme:i}=Object(l.useEuiTheme)(),{isUserTyping:o,onContentChange:c,onDebounce:r}=Object(Me.a)(),u=Object(s.useRef)(!1),d=Object(s.useMemo)((()=>new Set(e.map((e=>e.assignees.map((({uid:e})=>e)))).flat())),[e]),{data:m,isLoading:p}=De({uids:Array.from(d.values())}),b=Object(s.useMemo)((()=>null!=m?m:new Map),[m]),g=((e,t)=>{const a=[];if(!t)return a;for(const s of e)t.has(s)||a.push(s);return a})(d,b),E=[...b.keys(),...g],[f,C]=Object(s.useState)(""),{data:v,isLoading:O}=Object(Ne.a)({name:f,owners:a,onDebounce:r}),S=Object(s.useCallback)((e=>{const t=e.data,a=Object(U.isEmpty)(t)?b.get(e.key):t;if(We(a))return Re(a);const s=null==v?void 0:v.find((t=>t.uid===e.data.uid));return s?Re(s):{key:e.key,label:h.rb,data:{unknownUser:!0},"data-test-subj":`cases-actions-assignees-edit-selectable-assignee-${e.key}`}}),[v,b]),{options:k,totalSelectedItems:w,onChange:x,onSelectNone:I,resetItems:F}=de({items:E,selectedCases:e,fieldSelector:e=>e.assignees.map((({uid:e})=>e)),onChangeItems:t,itemToSelectableOption:S});m&&!u.current&&(u.current=!0,F(E));const T=Ue({searchResultUserProfiles:null!=v?v:[],options:k,searchValue:f,initialUserProfiles:b}),A=p||O||o,D=Object(s.useCallback)(((e,t)=>{var a,s,i;const o=null!==(a=e.itemIcon)&&void 0!==a?a:"empty",c=`cases-actions-assignees-edit-selectable-assignee-${e.key}-icon-${o}`,r=e.user?{user:e.user,data:e.data}:void 0;return n.a.createElement(l.EuiFlexGroup,null,n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"center",responsive:!1},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiIcon,{type:o,"data-test-subj":c})),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(Le.a,{userInfo:r})))),n.a.createElement(l.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1},n.a.createElement(l.EuiFlexItem,null,n.a.createElement(l.EuiHighlight,{search:f},e.label)),null!==(s=e.user)&&void 0!==s&&s.email&&(null===(i=e.user)||void 0===i?void 0:i.email)!==e.label?n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiTextColor,{color:e.disabled?"disabled":"subdued"},f?n.a.createElement(l.EuiHighlight,{search:f},e.user.email):e.user.email)):void 0))}),[f]),M=Object(s.useCallback)((e=>{C(e),c(e)}),[c]);return p?n.a.createElement(l.EuiLoadingSpinner,null):n.a.createElement(l.EuiSelectable,{options:T,searchable:!0,searchProps:{placeholder:ke,isLoading:A,isClearable:!A,onChange:M,value:f,"data-test-subj":"cases-actions-assignees-edit-selectable-search-input"},renderOption:D,listProps:{showIcons:!1},onChange:x,noMatchesMessage:A?n.a.createElement(ze.a,null):n.a.createElement(Pe.a,null),emptyMessage:n.a.createElement($e,{totalSelectedCases:e.length}),"data-test-subj":"cases-actions-assignees-edit-selectable",height:"full"},((e,t)=>{return n.a.createElement(n.a.Fragment,null,t,n.a.createElement(l.EuiSpacer,{size:"s"}),n.a.createElement(Ve,{alignItems:"center",justifyContent:"spaceBetween",responsive:!1,direction:"row",gutterSize:"none"},n.a.createElement(qe,{grow:!1,$_css:i.size.s},n.a.createElement(l.EuiText,{size:"xs",color:"subdued"},(a=w,y.i18n.translate("xpack.cases.actions.assignees.selectedAssignees",{defaultMessage:"Selected: {selectedAssignees}",values:{selectedAssignees:a}})))),n.a.createElement(Qe,{grow:!1},n.a.createElement(l.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",onClick:I},je.i))))),n.a.createElement(l.EuiHorizontalRule,{margin:"m"}),e);var a}))};Be.displayName="EditAssigneesSelectable";const He=n.a.memo(Be),Ue=({searchResultUserProfiles:e,options:t,searchValue:a,initialUserProfiles:s})=>{var n,l;const i=Object(U.isEmpty)(a)?[]:null!==(n=null==e||null===(l=e.filter((e=>!t.find((t=>Ge(t,e))))))||void 0===l?void 0:l.map((e=>Re(e))))&&void 0!==n?n:[],o=Object(U.isEmpty)(a)?t.filter((e=>{var t,a,n;return s.has(null==e||null===(t=e.data)||void 0===t?void 0:t.uid)||"empty"!==(null==e||null===(a=e.data)||void 0===a?void 0:a.itemIcon)||(null===(n=e.data)||void 0===n?void 0:n.unknownUser)})):[...t];return Ke([...i,...o])},Ke=e=>Object(U.sortBy)(e,(e=>e.label)),Re=e=>({key:e.uid,label:Object(Ie.c)(e.user),data:e,"data-test-subj":`cases-actions-assignees-edit-selectable-assignee-${e.uid}`}),Ge=(e,t)=>e.key===t.uid,We=e=>!!e&&!!e.uid&&!!e.user;var Ve=c()(l.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1pmnr8f-0"})({flexGrow:0}),qe=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1pmnr8f-1"})((e=>({paddingLeft:e.$_css}))),Qe=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-1pmnr8f-2"})({marginLeft:"auto"});const Ye=c()(l.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-1kk5mne-0"})([""," .euiFlyoutBody__overflowContent{","}"],Object(l.euiFullHeight)(),Object(l.euiFullHeight)()),Je=({selectedCases:e,onClose:t,onSaveAssignees:a})=>{const[i,o]=Object(s.useState)({selectedItems:[],unSelectedItems:[]}),c=Object(s.useCallback)((()=>a(i)),[a,i]),r=e.length>1?G(e.length):e[0].title;return n.a.createElement(l.EuiFlyout,{ownFocus:!0,onClose:t,"aria-labelledby":"cases-edit-assignees-flyout","data-test-subj":"cases-edit-assignees-flyout",size:"s",paddingSize:"m"},n.a.createElement(l.EuiFlyoutHeader,{hasBorder:!0},n.a.createElement(l.EuiTitle,{size:"m"},n.a.createElement("h2",{"data-test-subj":"cases-edit-assignees-flyout-title"},Se)),n.a.createElement(l.EuiText,{color:"subdued"},n.a.createElement("p",null,r))),n.a.createElement(Ye,null,n.a.createElement(He,{selectedCases:e,onChangeAssignees:o})),n.a.createElement(l.EuiFlyoutFooter,null,n.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{onClick:t,flush:"left","data-test-subj":"cases-edit-assignees-flyout-cancel"},h.m)),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButton,{onClick:c,fill:!0,"data-test-subj":"cases-edit-assignees-flyout-submit"},W)))))};Je.displayName="EditAssigneesFlyout";const Xe=n.a.memo(Je),Ze=({theCase:e,disableActions:t})=>{const[a,i]=Object(s.useState)(!1),o=Object(s.useCallback)((()=>i(!a)),[a]),c=Object(s.useCallback)((()=>i(!1)),[]),r=Object(P.a)(),u=S({isDisabled:!1,onAction:c,onActionSuccess:r}),d=(({onActionSuccess:e})=>{const{showSuccessToast:t}=Object(F.a)();return{getAction:a=>({name:n.a.createElement(l.EuiTextColor,null,h.z),onClick:()=>{navigator.clipboard.writeText(a.id).then((()=>{e(),t(h.A)}))},"data-test-subj":"cases-action-copy-id",icon:n.a.createElement(l.EuiIcon,{type:"copyClipboard",size:"m"}),key:"cases-action-copy-id"})}})({onActionSuccess:c}),m=z({isDisabled:!1,onAction:c,onActionSuccess:r,selectedStatus:e.status}),p=H({isDisabled:!1,onAction:c,onActionSuccess:r,selectedSeverity:e.severity}),b=Z({isDisabled:!1,onAction:c,onActionSuccess:r}),g=xe({isDisabled:!1,onAction:c,onActionSuccess:r}),C=u.canDelete,y=m.canUpdateStatus,v=Object(s.useMemo)((()=>{const t=[],a=[{id:0,items:t,title:E.a}];var s,l,i,o;return y&&(t.push({name:n.a.createElement(f.FormattedMessage,{defaultMessage:"Status: {status}",id:"xpack.cases.allCasesView.statusWithValue",values:{status:n.a.createElement("b",null,null!==(s=null===(l=D.b[e.status])||void 0===l?void 0:l.label)&&void 0!==s?s:"-")}}),panel:1,disabled:!y,key:`case-action-status-panel-${e.id}`,"data-test-subj":`case-action-status-panel-${e.id}`}),t.push({name:n.a.createElement(f.FormattedMessage,{defaultMessage:"Severity: {severity}",id:"xpack.cases.allCasesView.severityWithValue",values:{severity:n.a.createElement("b",null,null!==(i=null===(o=L.a[e.severity])||void 0===o?void 0:o.label)&&void 0!==i?i:"-")}}),panel:2,disabled:!y,key:`case-action-severity-panel-${e.id}`,"data-test-subj":`case-action-severity-panel-${e.id}`})),y&&C&&t.push({isSeparator:!0,key:`actions-separator-${e.id}`,"data-test-subj":`actions-separator-${e.id}`}),y&&(t.push(b.getAction([e])),t.push(g.getAction([e]))),t.push(d.getAction(e)),C&&t.push(u.getAction([e])),y&&(a.push({id:1,title:E.Y,items:m.getActions([e])}),a.push({id:2,title:E.R,items:p.getActions([e])})),a}),[g,C,y,d,u,p,m,b,e]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiPopover,{id:`case-action-popover-${e.id}`,key:`case-action-popover-${e.id}`,"data-test-subj":`case-action-popover-${e.id}`,button:n.a.createElement(l.EuiButtonIcon,{onClick:o,iconType:"boxesHorizontal","aria-label":E.a,color:"text",key:`case-action-popover-button-${e.id}`,"data-test-subj":`case-action-popover-button-${e.id}`,disabled:t}),isOpen:a,closePopover:c,panelPaddingSize:"none",anchorPosition:"downLeft"},n.a.createElement(l.EuiContextMenu,{initialPanelId:0,panels:v,key:`case-action-menu-${e.id}`,"data-test-subj":`case-action-menu-${e.id}`})),u.isModalVisible?n.a.createElement(k.a,{totalCasesToBeDeleted:1,onCancel:u.onCloseModal,onConfirm:u.onConfirmDeletion}):null,b.isFlyoutOpen?n.a.createElement(Oe,{onClose:b.onFlyoutClosed,selectedCases:[e],onSaveTags:b.onSaveTags}):null,g.isFlyoutOpen?n.a.createElement(Xe,{onClose:g.onFlyoutClosed,selectedCases:[e],onSaveAssignees:g.onSaveAssignees}):null)};Ze.displayName="ActionColumnComponent";const et=n.a.memo(Ze);var tt=a(164),at=a(165);const st=e=>{const{isAlertsEnabled:t,caseAssignmentAuthorized:a}=Object(tt.a)(),{data:{customFields:s}}=Object(at.a)(),n=!0,l={title:{field:"title",name:E.y,canDisplay:n,isCheckedDefault:!0},assignees:{field:"assignees",name:E.b,canDisplay:a&&!e,isCheckedDefault:!0},tags:{field:"tags",name:E.cb,canDisplay:!e,isCheckedDefault:!0},totalAlerts:{field:"totalAlerts",name:h.h,canDisplay:t&&!e,isCheckedDefault:!0},totalComment:{field:"totalComment",name:E.l,canDisplay:!e,isCheckedDefault:!0},category:{field:"category",name:E.g,canDisplay:n,isCheckedDefault:!0},closedAt:{field:"closedAt",name:E.j,canDisplay:!e,isCheckedDefault:!1},createdAt:{field:"createdAt",name:E.n,canDisplay:n,isCheckedDefault:!0},updatedAt:{field:"updatedAt",name:E.eb,canDisplay:!e,isCheckedDefault:!0},externalIncident:{field:"externalIncident",name:E.s,canDisplay:!e,isCheckedDefault:!0},status:{field:"status",name:E.Y,canDisplay:!e,isCheckedDefault:!0},severity:{field:"severity",name:E.R,canDisplay:n,isCheckedDefault:!0}};return s.forEach((({key:t,label:a})=>{l[t]={field:t,name:a,canDisplay:!e,isCheckedDefault:!1}})),l};var nt=a(193),lt=a(61),it=a(171),ot=a(237),ct=a(239);const rt=({assignees:e,userProfiles:t,compressedDisplayLimit:a=3})=>{const[i,o]=Object(s.useState)(!1),{allAssignees:c}=Object(ot.a)({caseAssignees:e,userProfiles:t}),r=Object(s.useCallback)((()=>o((e=>!e))),[]),u=c.length-a,d=u>0,m=Object(s.useMemo)((()=>c.slice(0,a)),[c,a]),b=Object(s.useMemo)((()=>i||!d?c:m),[c,i,m,d]);return c.length<=0?Object(p.a)():n.a.createElement(l.EuiFlexGroup,{gutterSize:"xs","data-test-subj":"case-table-column-assignee",wrap:!0},b.map((e=>{const t=Object(ct.a)(e);return n.a.createElement(l.EuiFlexItem,{grow:!1,key:e.uid,"data-test-subj":`case-table-column-assignee-${t}`},n.a.createElement(it.a,{userInfo:e.profile},n.a.createElement(Le.a,{userInfo:e.profile})))})),d?n.a.createElement(l.EuiButtonEmpty,{size:"xs","data-test-subj":"case-table-column-expand-button",onClick:r,style:{alignSelf:"center"}},i?E.V:E.W(u)):null)};rt.displayName="AssigneesColumn";const ut=n.a.memo(rt);var dt=a(75);const mt=Object(m.euiStyled)(l.EuiBadgeGroup)`
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: ${3};
  -webkit-box-orient: vertical;
  overflow: hidden;
  word-break: normal;
`,pt=Object(m.euiStyled)(l.EuiBadge)`
  max-width: 100px;
  margin-right: 5px;
`,bt=(e,t)=>null!=e?n.a.createElement("span",{"data-test-subj":t},e):Object(p.a)(),gt=c.a.span.withConfig({displayName:"IconWrapper",componentId:"sc-1wjyglx-0"})(["svg{height:20px !important;position:relative;top:3px;width:20px !important;}"]),Et=({theCase:e,connectors:t})=>{var a,s,i,o,c,r,u;const{triggersActionsUi:d}=Object(Fe.g)().services,{actions:m}=Object(Fe.c)();if(null==e.externalService)return bt(E.z,"case-table-column-external-notPushed");const p=t.find((t=>{var a;return t.id===(null===(a=e.externalService)||void 0===a?void 0:a.connectorId)})),b=null!=e.updatedAt?new Date(e.updatedAt):null,g=null!=(null===(a=e.externalService)||void 0===a?void 0:a.pushedAt)?new Date(null===(s=e.externalService)||void 0===s?void 0:s.pushedAt):null,f=null===g||null!=b&&g.getTime()<(null==b?void 0:b.getTime());return n.a.createElement("p",null,m.read&&n.a.createElement(gt,null,n.a.createElement(l.EuiIcon,{size:"original",title:null===(i=e.externalService)||void 0===i?void 0:i.connectorName,type:Object(lt.d)(d,null==p?void 0:p.actionTypeId),"data-test-subj":"cases-table-connector-icon"})),n.a.createElement(l.EuiLink,{"data-test-subj":"case-table-column-external",title:null===(o=e.externalService)||void 0===o?void 0:o.connectorName,href:null===(c=e.externalService)||void 0===c?void 0:c.externalUrl,target:"_blank","aria-label":E.I(null===(r=e.externalService)||void 0===r?void 0:r.connectorName)},null===(u=e.externalService)||void 0===u?void 0:u.externalTitle),f?bt(E.K,"case-table-column-external-requiresUpdate"):bt(E.fb,"case-table-column-external-upToDate"))};Et.displayName="ExternalServiceColumn",a(13);const ft=e=>e.map((e=>({key:e,label:e}))),Ct=e=>e.map((e=>e.key)),yt=({buttonLabel:e,buttonIconType:t,hideActiveOptionsNumber:a,id:o,limit:c,limitReachedMessage:r,onChange:u,options:d,selectedOptionKeys:m=[],renderOption:p,transparentBackground:b})=>{const{euiTheme:g}=Object(l.useEuiTheme)(),[f,C]=Object(s.useState)(!1),y=!a,h=Boolean(c&&r&&m.length>=c),v=((e,t)=>e.map((({key:e,label:a})=>{const s={label:a,key:e};return t.includes(e)&&(s.checked="on"),s["data-test-subj"]=`options-filter-popover-item-${e.split(" ").join("-")}`,s})))(d,m);return Object(s.useEffect)((()=>{const e=m.filter((e=>d.some((({key:t})=>t===e))));Object(i.isEqual)(e,m)||u({filterId:o,selectedOptionKeys:e})}),[m,d,o,u]),n.a.createElement(ht,{$_css:b&&"background-color: transparent;"},n.a.createElement(l.EuiPopover,{ownFocus:!0,button:n.a.createElement(vt,{"data-test-subj":`options-filter-popover-button-${o}`,iconType:t||"arrowDown",onClick:()=>C((e=>!e)),isSelected:f,numFilters:y?v.length:void 0,hasActiveFilters:y?m.length>0:void 0,numActiveFilters:y?m.length:void 0,"aria-label":e},n.a.createElement(l.EuiText,{size:"s",className:"eui-textTruncate"},e)),isOpen:f,closePopover:()=>C(!1),panelPaddingSize:"none",repositionOnScroll:!0},h&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiHorizontalRule,{margin:"none"}),n.a.createElement(l.EuiCallOut,{title:r,color:"warning",size:"s","data-test-subj":"maximum-length-warning"}),n.a.createElement(l.EuiHorizontalRule,{margin:"none"})),n.a.createElement(l.EuiSelectable,{options:v,searchable:!0,searchProps:{placeholder:e,compressed:!1,"data-test-subj":`${o}-search-input`},emptyMessage:E.r,onChange:e=>{const t=(e=>e.filter((e=>"on"===e.checked)))(e);h&&c&&t.length>=c||u({filterId:o,selectedOptionKeys:Ct(t)})},singleSelection:!1,renderOption:p},((e,t)=>n.a.createElement(Ot,null,n.a.createElement(l.EuiPopoverTitle,{paddingSize:"s"},t),n.a.createElement(jt,{$_css2:g.size.xl,$_css3:g.size.m,$_css4:g.border.thin},n.a.createElement(l.EuiTextColor,{color:"subdued"},E.G(v.length))),n.a.createElement(l.EuiSpacer,{size:"xs"}),e)))))};yt.displayName="MultiSelectFilter";var ht=c()(l.EuiFilterGroup).withConfig({displayName:"_StyledEuiFilterGroup",componentId:"sc-1fyohtb-0"})(["",";"],(e=>e.$_css)),vt=c()(l.EuiFilterButton).withConfig({displayName:"_StyledEuiFilterButton",componentId:"sc-1fyohtb-1"})(["max-width:186px;"]),Ot=c()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-1fyohtb-2"})(["width:400px;"]),jt=c()("div").withConfig({displayName:"_StyledDiv2",componentId:"sc-1fyohtb-3"})(["line-height:",";padding-left:",";border-bottom:",";"],(e=>e.$_css2),(e=>e.$_css3),(e=>e.$_css4));const St=({options:e,activeFilters:t,onChange:a})=>n.a.createElement(yt,{buttonLabel:E.x,buttonIconType:"plus",hideActiveOptionsNumber:!0,id:"filters",onChange:a,options:e,selectedOptionKeys:t,transparentBackground:!0});St.displayName="MoreFiltersSelectable";var kt=a(211),wt=a(3);const xt=({onChange:e,selectedOptionKeys:t,availableSolutions:a})=>{const{owner:s}=Object(j.a)(),i=Boolean(s.length),o=ft(i?s:a),c=a.map((e=>(e=>(e=>Object.keys(wt.Jb).includes(e))(e)?wt.Jb[e]:{id:e,label:e,iconType:""})(e)));return n.a.createElement(yt,{buttonLabel:E.X,id:"owner",onChange:e,options:o,renderOption:e=>{const t=c.find((t=>t.id===e.label));return n.a.createElement(l.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiIcon,{size:"m",type:t.iconType,title:t.label})),n.a.createElement(l.EuiFlexItem,{grow:!1},t.label))},selectedOptionKeys:t})};xt.displayName="SolutionFilterComponent";const It=n.a.memo(xt);It.displayName="SolutionFilter";const Ft=[{key:u.e.open,label:E.bb},{key:u.e["in-progress"],label:E.ab},{key:u.e.closed,label:E.Z}],Tt=({countClosedCases:e,countInProgressCases:t,countOpenCases:a,hiddenStatuses:i=[],onChange:o,selectedOptionKeys:c})=>{const r=Object(s.useMemo)((()=>({[u.e.open]:null!=a?a:0,[u.e["in-progress"]]:null!=t?t:0,[u.e.closed]:null!=e?e:0})),[e,t,a]),m=Object(s.useMemo)((()=>[...Ft].filter((e=>!i.includes(e.key)))),[i]);return n.a.createElement(yt,{buttonLabel:E.Y,id:"status",onChange:o,options:m,renderOption:e=>{const t=e.key;return n.a.createElement(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},n.a.createElement(l.EuiFlexItem,{grow:1},n.a.createElement("span",null,n.a.createElement(d.a,{status:t}))),n.a.createElement(l.EuiFlexItem,{grow:!1},` (${r[t]})`))},selectedOptionKeys:c})};Tt.displayName="StatusFilterComponent";const At=n.a.memo(Tt),Dt=ft(Object.keys(L.a)),Mt=({selectedOptionKeys:e,onChange:t})=>n.a.createElement(yt,{buttonLabel:E.R,id:"severity",onChange:t,options:Dt,renderOption:e=>{const t=L.a[e.label];return n.a.createElement(l.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiHealth,{color:t.color},t.label)))},selectedOptionKeys:e});Mt.displayName="SeverityFilter";var Nt=a(238);var zt=a(264),Pt=a.n(zt),Lt=a(194),_t=a.n(Lt);const $t=({buttonLabel:e,customFieldOptions:t,fieldKey:a,onFilterOptionsChange:s,type:l})=>({key:`cf_${a}`,isActive:!1,isAvailable:!0,label:e,getEmptyOptions:()=>({customFields:{[a]:{type:l,options:[]}}}),render:({filterOptions:i})=>{var o;return n.a.createElement(yt,{buttonLabel:e,id:a,onChange:({filterId:e,selectedOptionKeys:t})=>{s({customFields:{[e.replace("cf_","")]:{options:t,type:l}}})},options:t.map((e=>({key:e.key,label:e.label}))),selectedOptionKeys:(null===(o=i.customFields[a])||void 0===o?void 0:o.options)||[]})}}),Bt=({isSelectorView:e,onFilterOptionsChange:t,systemFilterConfig:a,filterOptions:s})=>{var n;const[l,i]=(({filterOptions:e})=>{const{appId:t}=Object(j.a)(),[a,s]=_t()(`${t}.${wt.cb.casesTableFiltersConfig}`,[]),n=[...a||[]];return n.forEach((t=>{if((({filter:e,filterOptions:t})=>!e.isActive&&!Object(U.isEmpty)(t[e.key]))({filter:t,filterOptions:e})){const e=n.findIndex((e=>t.key===e.key));n.splice(e,1),n.push({key:t.key,isActive:!0})}})),Object(U.isEqual)(n,a)||s(n),[n,s]})({filterOptions:s}),{customFieldsFilterConfig:o}=(({isSelectorView:e,onFilterOptionsChange:t})=>{const{data:{customFields:a}}=Object(at.a)(),s=[];if(e)return{customFieldsFilterConfig:[]};for(const{key:e,type:n,label:l}of null!=a?a:[])if(dt.a[n]){const{filterOptions:a}=dt.a[n]();a&&s.push($t({buttonLabel:l,customFieldOptions:a,fieldKey:e,onFilterOptionsChange:t,type:n}))}return{customFieldsFilterConfig:s}})({isSelectorView:e,onFilterOptionsChange:t}),c=(({systemFilterConfig:e,customFieldsFilterConfig:t})=>new Map([...e,...t].filter((e=>e.isAvailable)).map((e=>[e.key,e]))))({systemFilterConfig:a,customFieldsFilterConfig:o});(({prevFilterConfigs:e,currentFilterConfigs:t,onFilterOptionsChange:a})=>{var s;const n=[];[...null!==(s=null==e?void 0:e.entries())&&void 0!==s?s:[]].forEach((([e,a])=>{t.has(e)||n.push(a.getEmptyOptions())})),n.length>0&&a(Object(U.merge)({},...n))})({prevFilterConfigs:null!==(n=Pt()(c))&&void 0!==n?n:new Map,currentFilterConfigs:c,onFilterOptionsChange:t});const r=Array.from(c.values()),u=r.map((({key:e,label:t})=>({key:e,label:t}))).sort(((e,t)=>e.label>t.label?1:e.label<t.label?-1:e.key>t.key?1:-1)),d=(l&&l.length>0?l:r).filter((e=>e.isActive&&c.has(e.key))).map((e=>c.get(e.key)));return{activeSelectableOptionKeys:d.map((e=>e.key)),filters:d,onFilterConfigChange:({selectedOptionKeys:e})=>{const a=[...l||[]],s=[];(l||[]).forEach((({key:t,isActive:n})=>{const l=a.findIndex((e=>e.key===t));if(c.has(t)){const i=e.find((e=>e===t));i&&!n?(a.splice(l,1),a.push({key:t,isActive:!0})):!i&&n&&(s.push(t),a[l]={key:t,isActive:!1})}else a.splice(l,1)})),c.forEach((({key:t})=>{if(!a.find((({key:e})=>e===t))){const n=e.find((e=>e===t));n||s.push(t),a.push({key:t,isActive:Boolean(n)})}}));const n=s.filter((e=>c.has(e))).map((e=>c.get(e).getEmptyOptions()));if(n.length>0){const e=Object(U.merge)({},...n);t(e)}i(a)},selectableOptions:u}},Ht=(e,t,a)=>{if(Array.isArray(e))return t},Ut=({countClosedCases:e,countOpenCases:t,countInProgressCases:a,onFilterChanged:i,hiddenStatuses:o,availableSolutions:c,isSelectorView:r=!1,onCreateCasePressed:u,isLoading:d,currentUserProfile:m,filterOptions:p})=>{const[b,g]=Object(s.useState)(p.search),{data:f=[]}=Object(te.a)(),{data:C=[]}=Object(kt.a)(),{caseAssignmentAuthorized:y}=Object(tt.a)(),h=Object(s.useCallback)((e=>{const t=Object(U.mergeWith)({},p,e,Ht);Object(U.isEqual)(t,p)||i(t)}),[p,i]),{systemFilterConfig:v}=(({availableSolutions:e,caseAssignmentAuthorized:t,categories:a,countClosedCases:s,countInProgressCases:l,countOpenCases:i,currentUserProfile:o,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:m})=>{const p=(({availableSolutions:e,caseAssignmentAuthorized:t,categories:a,countClosedCases:s,countInProgressCases:l,countOpenCases:i,currentUserProfile:o,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:m})=>{const p=({filterId:e,selectedOptionKeys:t})=>{d({[e]:t})};return[{key:"severity",label:E.R,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({severity:[]}),render:({filterOptions:e})=>n.a.createElement(Mt,{selectedOptionKeys:e.severity,onChange:p})},{key:"status",label:E.Y,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({status:[]}),render:({filterOptions:e})=>n.a.createElement(At,{selectedOptionKeys:null==e?void 0:e.status,onChange:p,hiddenStatuses:c,countClosedCases:s,countInProgressCases:l,countOpenCases:i})},{key:"assignees",label:E.b,isActive:!0,isAvailable:t&&!u,getEmptyOptions:()=>({assignees:[]}),render:({filterOptions:e})=>n.a.createElement(Nt.a,{selectedAssignees:null==e?void 0:e.assignees,currentUserProfile:o,isLoading:r,onSelectionChange:p})},{key:"tags",label:E.cb,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({tags:[]}),render:({filterOptions:e})=>n.a.createElement(yt,{buttonLabel:E.cb,id:"tags",limit:wt.Ab,limitReachedMessage:E.w(wt.Ab,"tags"),onChange:p,options:ft(m),selectedOptionKeys:null==e?void 0:e.tags})},{key:"category",label:E.f,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({category:[]}),render:({filterOptions:e})=>n.a.createElement(yt,{buttonLabel:E.f,id:"category",limit:wt.kb,limitReachedMessage:E.w(wt.kb,"categories"),onChange:p,options:ft(a),selectedOptionKeys:null==e?void 0:e.category})},{key:"owner",label:E.X,isActive:!0,isAvailable:e.length>1,getEmptyOptions:()=>({owner:[]}),render:({filterOptions:t})=>n.a.createElement(It,{onChange:p,selectedOptionKeys:null==t?void 0:t.owner,availableSolutions:e})}]})({availableSolutions:e,caseAssignmentAuthorized:t,categories:a,countClosedCases:s,countInProgressCases:l,countOpenCases:i,currentUserProfile:o,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:m});return{systemFilterConfig:p}})({availableSolutions:c,caseAssignmentAuthorized:y,categories:C,countClosedCases:e,countInProgressCases:a,countOpenCases:t,currentUserProfile:m,hiddenStatuses:o,isLoading:d,isSelectorView:r,onFilterOptionsChange:h,tags:f}),{filters:O,selectableOptions:j,activeSelectableOptionKeys:S,onFilterConfigChange:k}=Bt({systemFilterConfig:v,onFilterOptionsChange:h,isSelectorView:r,filterOptions:p}),w=Object(s.useCallback)((e=>{const t=e.trim();Object(U.isEqual)(t,b)||(g(t),i({search:t}))}),[i,b]),x=Object(s.useCallback)((()=>{u&&u()}),[u]);return n.a.createElement(l.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart",wrap:!0,"data-test-subj":"cases-table-filters"},r&&u?n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButton,{fill:!0,onClick:x,iconType:"plusInCircle","data-test-subj":"cases-table-add-case-filter-bar"},E.o)):null,n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFieldSearch,{"aria-label":E.M,"data-test-subj":"search-cases",fullWidth:!0,incremental:!1,placeholder:E.O,onSearch:w})),O.map((e=>n.a.createElement(l.EuiFlexItem,{grow:!1,key:e.key},e.render({filterOptions:p})))),r||n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(St,{options:j,activeFilters:S,onChange:k})))};Ut.displayName="CasesTableFiltersComponent";const Kt=n.a.memo(Ut);Kt.displayName="CasesTableFilters";const Rt=[10,25,50,100];var Gt=a(138),Wt=a.n(Gt),Vt=a(57),qt=a.n(Vt);const Qt=({selectedColumns:e,onSelectedColumnsChange:t})=>{const{euiTheme:a}=Object(l.useEuiTheme)(),[i,o]=Object(s.useState)(!1),c=Object(s.useCallback)((()=>o((e=>!e))),[]),r=Object(s.useCallback)((()=>o(!1)),[]),[u,d]=Object(s.useState)(""),m=0===u.length,p=Object(s.useCallback)((({isChecked:a,field:s})=>{const n=e.map((e=>e.field!==s&&s?e:{...e,isChecked:a}));t(n)}),[e,t]),b=Object(s.useCallback)((()=>p({isChecked:!0})),[p]),g=Object(s.useCallback)((()=>p({isChecked:!1})),[p]),f=Object(s.useMemo)((()=>e.filter((({name:e})=>-1!==e.toLowerCase().indexOf(u.toLowerCase())))),[e,u]);return n.a.createElement(l.EuiPopover,{isOpen:i,closePopover:r,panelPaddingSize:"s",anchorPosition:"leftUp",hasDragDrop:!0,zIndex:0,"data-test-subj":"column-selection-popover",button:n.a.createElement(l.EuiButtonEmpty,{"aria-label":E.k,className:"columns","data-test-subj":"column-selection-popover-button",iconType:"indexOpen",iconSide:"left",onClick:c,size:"xs"},E.k)},n.a.createElement(l.EuiPopoverTitle,null,n.a.createElement(l.EuiFieldSearch,{compressed:!0,placeholder:E.L,"aria-label":E.N,value:u,onChange:e=>d(e.currentTarget.value),"data-test-subj":"column-selection-popover-search"})),n.a.createElement(l.EuiDragDropContext,{onDragEnd:({source:a,destination:s})=>{if(a&&s){const n=Object(l.euiDragDropReorder)(e,a.index,s.index);t(n)}}},n.a.createElement(Yt,{className:"eui-yScrollWithShadows","data-test-subj":"column-selection-popover-drag-drop-context"},n.a.createElement(l.EuiFlexItem,null,n.a.createElement(Jt,{droppableId:"casesColumnDroppableArea",$_css:m?{paddingBottom:a.size.base}:{paddingTop:a.size.base}},f.map((({field:e,name:t,isChecked:s},i)=>n.a.createElement(Xt,{key:e,index:i,draggableId:e,isDragDisabled:!m,customDragHandle:!0,hasInteractiveChildren:!0,$_css2:a.size.xl,$_css3:a.size.base},(a=>n.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"m",justifyContent:"spaceBetween"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiSwitch,{label:n.a.createElement(l.EuiHighlight,{search:u,title:t},t),checked:s,"data-test-subj":`column-selection-switch-${e}`,onChange:t=>p({field:e,isChecked:t.target.checked}),compressed:!0,labelProps:{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",width:"190px",overflow:"hidden"}}})),m&&n.a.createElement(l.EuiFlexItem,{grow:!1,"data-test-subj":"column-selection-popover-draggable-icon"},n.a.createElement(l.EuiPanel,qt()({color:"transparent"},a.dragHandleProps,{"aria-label":E.q,grow:!1}),n.a.createElement(l.EuiIcon,{type:"grab",color:"subdued"})))))))))))),n.a.createElement(l.EuiPopoverFooter,null,n.a.createElement(l.EuiFlexGroup,{gutterSize:"s",responsive:!1,justifyContent:"spaceBetween"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"left",onClick:b,"data-test-subj":"column-selection-popover-show-all-button",disabled:!m},E.U)),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"xs",flush:"right",onClick:g,"data-test-subj":"column-selection-popover-hide-all-button",disabled:!m},E.u)))))};Qt.displayName="ColumnsPopover";var Yt=c()(l.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-15ss7sd-0"})(["width:300px;height:40vh;"]),Jt=c()(l.EuiDroppable).withConfig({displayName:"_StyledEuiDroppable",componentId:"sc-15ss7sd-1"})(["",""],(e=>e.$_css)),Xt=c()(l.EuiDraggable).withConfig({displayName:"_StyledEuiDraggable",componentId:"sc-15ss7sd-2"})((e=>({height:e.$_css2,paddingLeft:e.$_css3})));const Zt=n.a.memo((({isSelectorView:e,totalCases:t,selectedCases:a,deselectCases:i,pagination:o,selectedColumns:c,onSelectedColumnsChange:r})=>{const{euiTheme:u}=Object(l.useEuiTheme)(),d=Object(P.a)(),{permissions:m,appId:p}=Object(j.a)(),[b,g]=Object(s.useState)(!1),[f,C]=Object(s.useState)(!1),y=`cases.${p}.utilityBar.hideMaxLimitWarning`,[h,v]=_t()(y),O=Object(s.useCallback)((()=>g(!b)),[b]),w=Object(s.useCallback)((()=>g(!1)),[]),x=Object(s.useCallback)((()=>C(!f)),[f]),I=Object(s.useCallback)((()=>{i(),d()}),[i,d]),{panels:F,modals:T,flyouts:A}=(({selectedCases:e,onAction:t,onActionSuccess:a})=>{const l=0===e.length,i=S({isDisabled:l,onAction:t,onActionSuccess:a}),o=z({isDisabled:l,onAction:t,onActionSuccess:a}),c=H({isDisabled:l,onAction:t,onActionSuccess:a}),r=Z({isDisabled:l,onAction:t,onActionSuccess:a}),u=xe({isDisabled:!1,onAction:t,onActionSuccess:a}),d=i.canDelete,m=o.canUpdateStatus,p=Object(s.useMemo)((()=>{const t=[],a=[{id:0,items:t,title:E.a}];return m&&(t.push({name:E.Y,panel:1,disabled:l,"data-test-subj":"case-bulk-action-status",key:"case-bulk-action-status"}),t.push({name:E.R,panel:2,disabled:l,"data-test-subj":"case-bulk-action-severity",key:"case-bulk-action-severity"})),m&&d&&t.push({isSeparator:!0,key:"bulk-actions-separator","data-test-subj":"bulk-actions-separator"}),m&&(t.push(r.getAction(e)),t.push(u.getAction(e))),d&&t.push(i.getAction(e)),m&&(a.push({id:1,title:E.Y,items:o.getActions(e)}),a.push({id:2,title:E.R,items:c.getActions(e)})),a}),[d,m,i,l,e,c,o,r,u]);return{modals:n.a.createElement(n.a.Fragment,null,i.isModalVisible?n.a.createElement(k.a,{totalCasesToBeDeleted:e.length,onCancel:i.onCloseModal,onConfirm:i.onConfirmDeletion}):null),flyouts:n.a.createElement(n.a.Fragment,null,r.isFlyoutOpen?n.a.createElement(Oe,{onClose:r.onFlyoutClosed,selectedCases:e,onSaveTags:r.onSaveTags}):null,u.isFlyoutOpen?n.a.createElement(Xe,{onClose:u.onFlyoutClosed,selectedCases:e,onSaveAssignees:u.onSaveAssignees}):null),panels:p}})({selectedCases:a,onAction:w,onActionSuccess:I}),D=(m.update||m.delete)&&a.length>0,M=null!=o&&o.pageSize&&t>o.pageSize?o.pageSize:t,N=o.pageSize&&t>=wt.vb&&o.pageSize*(o.pageIndex+1)>=wt.vb,L=h&&!0===h;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ta,{justifyContent:"spaceBetween",alignItems:"center",gutterSize:"s",$_css:u.border.thin,$_css2:u.size.s,$_css3:u.size.s},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"s",alignItems:"center"},n.a.createElement(aa,{"data-test-subj":"case-table-case-count",grow:!1,$_css4:u.border.thin,$_css5:u.size.s},n.a.createElement(l.EuiText,{size:"xs",color:"subdued"},E.S(t,M))),n.a.createElement(l.EuiFlexItem,{"data-test-subj":"case-table-utility-bar-actions",grow:!1},n.a.createElement(l.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},!e&&D&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiFlexItem,{"data-test-subj":"case-table-selected-case-count",grow:!1},n.a.createElement(l.EuiText,{size:"xs",color:"subdued"},E.T(a.length))),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiPopover,{isOpen:b,closePopover:w,panelPaddingSize:"none","data-test-subj":"case-table-bulk-actions-popover",button:n.a.createElement(l.EuiButtonEmpty,{onClick:O,size:"xs",iconSide:"right",iconType:"arrowDown",flush:"left","data-test-subj":"case-table-bulk-actions-link-icon"},E.e)},n.a.createElement(l.EuiContextMenu,{panels:F,initialPanelId:0,"data-test-subj":"case-table-bulk-actions-context-menu"})))),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{onClick:I,size:"xs",iconSide:"left",iconType:"refresh",flush:"left","data-test-subj":"all-cases-refresh-link-icon"},E.J)))))),!e&&n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(Qt,{selectedColumns:c,onSelectedColumnsChange:r}))),T,A,N&&!f&&!L&&n.a.createElement(n.a.Fragment,null,n.a.createElement(l.EuiSpacer,{size:"m"}),n.a.createElement(l.EuiFlexGroup,null,n.a.createElement(l.EuiFlexItem,null,n.a.createElement(l.EuiCallOut,{title:n.a.createElement(l.EuiFlexGroup,{gutterSize:"m"},n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(ea,{color:"default",size:"m"},E.v(wt.vb))),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"s",color:"warning","data-test-subj":"dismiss-warning",onClick:x},E.p)),n.a.createElement(l.EuiFlexItem,{grow:!1},n.a.createElement(l.EuiButtonEmpty,{size:"s",color:"warning","data-test-subj":"do-not-show-warning",onClick:()=>{v(!0)}},E.A))),color:"warning",size:"s","data-test-subj":"all-cases-maximum-limit-warning"}))),n.a.createElement(l.EuiSpacer,{size:"m"})))}));Zt.displayName="CasesTableUtilityBar";var ea=c()(l.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-f1rwti-0"})(["margin-top:4px;"]),ta=c()(l.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-f1rwti-1"})((e=>({borderBottom:e.$_css,marginTop:0,marginBottom:0,paddingTop:e.$_css2,paddingBottom:e.$_css3}))),aa=c()(l.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-f1rwti-2"})((e=>({borderRight:e.$_css4,paddingRight:e.$_css5}))),sa=a(36);const na=c.a.div.withConfig({displayName:"Div",componentId:"sc-1nhms5w-0"})(["margin-top:",";"],(({theme:e})=>e.eui.euiSizeM)),la=({columns:e,data:t,goToCreateCase:a,isCasesLoading:i,isCommentUpdating:o,isDataEmpty:c,isSelectorView:r,onChange:u,pagination:d,selectedCases:m,selection:p,sorting:b,tableRef:f,tableRowProps:C,deselectCases:y,selectedColumns:h,onSelectedColumnsChange:v,isLoadingColumns:O})=>{var S;const{permissions:k}=Object(j.a)(),{getCreateCaseUrl:w,navigateToCreateCase:x}=Object(sa.m)(),I=Object(s.useCallback)((e=>{e.preventDefault(),null!=a?a():x()}),[a,x]);return i&&c||O?n.a.createElement(na,null,n.a.createElement(l.EuiSkeletonText,{"data-test-subj":"initialLoadingPanelAllCases",lines:10})):n.a.createElement(n.a.Fragment,null,n.a.createElement(Zt,{pagination:d,isSelectorView:r,totalCases:null!==(S=t.total)&&void 0!==S?S:0,selectedCases:m,deselectCases:y,selectedColumns:h,onSelectedColumnsChange:v}),n.a.createElement(l.EuiBasicTable,{className:Wt()({isSelectorView:r}),columns:e,"data-test-subj":"cases-table",isSelectable:!r,itemId:"id",items:t.cases,loading:o,noItemsMessage:n.a.createElement(l.EuiEmptyPrompt,{title:n.a.createElement("h3",null,E.D),titleSize:"xs",body:k.create?E.E:E.F,actions:k.create&&n.a.createElement(g.d,{isDisabled:!k.create,fill:!0,size:"s",onClick:I,href:w(),iconType:"plusInCircle","data-test-subj":"cases-table-add-case"},E.o)}),onChange:u,pagination:d,ref:f,rowProps:C,selection:r?void 0:p,sorting:b,hasActions:!1}))};la.displayName="CasesTable";var ia=a(240),oa=a.n(ia),ca=a(59),ra=a(202),ua=a(29);const da=c.a.div.withConfig({displayName:"MetricsFlexGroup",componentId:"sc-1f7zwub-0"})(["",""],(({theme:e})=>Object(o.css)(["border:",";border-radius:",";padding:",";margin-bottom:",";"],e.eui.euiBorderThin,e.eui.euiBorderRadius,e.eui.euiSizeM,e.eui.euiSizeL))),ma=()=>{const{data:{countOpenCases:e,countInProgressCases:t,countClosedCases:a}={countOpenCases:0,countInProgressCases:0,countClosedCases:0},isLoading:i}=(()=>{const e=Object(Fe.f)(),{owner:t}=Object(j.a)(),{showErrorToast:a}=Object(F.a)();return Object(w.useQuery)(T.d.casesStatuses(),(({signal:a})=>Object(ca.d)({http:e,query:{owner:t},signal:a})),{onError:e=>{a(e,{title:x.e})}})})(),{data:{mttr:o}={mttr:0},isLoading:c}=(()=>{const e=Object(Fe.f)(),{owner:t}=Object(j.a)(),{showErrorToast:a}=Object(F.a)();return Object(w.useQuery)(T.d.casesMetrics(),(({signal:a})=>Object(ca.c)({http:e,query:{owner:t,features:[ua.a.MTTR]},signal:a})),{onError:e=>{a(e,{title:x.e})}})})(),r=Object(s.useMemo)((()=>null!=o?oa()(1e3*o,{compact:!0,verbose:!1}):"-"),[o]);return n.a.createElement(da,null,n.a.createElement(l.EuiFlexGroup,{responsive:!0,"data-test-subj":"cases-metrics-stats"},n.a.createElement(l.EuiFlexItem,{grow:!0},n.a.createElement(ra.a,{dataTestSubj:"openStatsHeader",caseCount:e,caseStatus:u.e.open,isLoading:i})),n.a.createElement(l.EuiFlexItem,{grow:!0},n.a.createElement(ra.a,{dataTestSubj:"inProgressStatsHeader",caseCount:t,caseStatus:u.e["in-progress"],isLoading:i})),n.a.createElement(l.EuiFlexItem,{grow:!0},n.a.createElement(ra.a,{dataTestSubj:"closedStatsHeader",caseCount:a,caseStatus:u.e.closed,isLoading:i})),n.a.createElement(l.EuiFlexItem,{grow:!0},n.a.createElement(l.EuiDescriptionList,{"data-test-subj":"mttrStatsHeader",textStyle:"reverse",listItems:[{title:n.a.createElement(l.EuiToolTip,{position:"right",content:E.c},n.a.createElement(n.a.Fragment,null,E.d," ",n.a.createElement(l.EuiIcon,{type:"questionInCircle"}))),description:c?n.a.createElement(l.EuiLoadingSpinner,{"data-test-subj":"mttr-stat-loading-spinner"}):r}]}))))};ma.displayName="CasesMetrics";var pa=a(195),ba=a(212),ga=a(180),Ea=a(159),fa=a(20);const Ca=e=>"all"!==e,ya=({status:e,severity:t})=>({status:e.filter(Ca).filter(Boolean),severity:t.filter(Ca).filter(Boolean)}),ha=e=>{const{status:t,severity:a}=e;return{severity:a,status:t}},va=e=>{const t={...e.sortField&&{sortField:e.sortField},...e.sortOrder&&{sortOrder:e.sortOrder}},a=e.page&&parseInt(e.page,10),s=e.perPage&&parseInt(e.perPage,10);return a&&(t.page=a),s&&(t.perPage=s),t},Oa=({selectedColumns:e,casesColumnsConfig:t})=>{const a=e.reduce(((e,{field:a,isChecked:s})=>(a in t&&""!==t[a].field&&t[a].canDisplay&&e.push({field:t[a].field,name:t[a].name,isChecked:s}),e)),[]);return Object(U.difference)(Object.keys(t),e.map((({field:e})=>e))).forEach((e=>{t[e].field&&t[e].canDisplay&&a.push({field:t[e].field,name:t[e].name,isChecked:t[e].isCheckedDefault})})),a},ja=e=>{const t=new URLSearchParams(e),a=Object.entries(T.a).map((([e,t])=>Array.isArray(t)?e:void 0)).filter(Boolean),s={};for(const[e,n]of t.entries())if(a.includes(e)){s[e]||(s[e]=[]);const t=n.split(",").filter(Boolean);s[e].push(...t)}else s[e]=n;return s},Sa=e=>`${e}.${wt.cb.casesQueryParams}`,ka=e=>`${e}.${wt.cb.casesFilterOptions}`,wa=(e,t,a)=>{var s,n,l,i,o,c,r,u,d,m,p;const b={...T.b};return b.perPage=null!==(s=null!==(n=null!==(l=e.perPage)&&void 0!==l?l:t.perPage)&&void 0!==n?n:null==a?void 0:a.perPage)&&void 0!==s?s:T.b.perPage,b.sortField=null!==(i=null!==(o=null!==(c=e.sortField)&&void 0!==c?c:t.sortField)&&void 0!==o?o:null==a?void 0:a.sortField)&&void 0!==i?i:T.b.sortField,b.sortOrder=null!==(r=null!==(u=null!==(d=e.sortOrder)&&void 0!==d?d:t.sortOrder)&&void 0!==u?u:null==a?void 0:a.sortOrder)&&void 0!==r?r:T.b.sortOrder,b.page=null!==(m=null!==(p=e.page)&&void 0!==p?p:t.page)&&void 0!==m?m:T.b.page,b},xa=e=>{const t=Math.min(e.perPage,Rt[Rt.length-1]),a=r.a.includes(e.sortOrder)?e.sortOrder:T.b.sortOrder;return{...e,perPage:t,sortOrder:a}},Ia=e=>"string"==typeof e?[e]:e,Fa=(e,t,a,s)=>{var n,l,i,o,c,r;const u=null!==(n=null!==(l=null!==(i=null==t?void 0:t.severity)&&void 0!==i?i:null==a?void 0:a.severity)&&void 0!==l?l:Ia(null==s?void 0:s.severity))&&void 0!==n?n:T.a.severity,d=null!==(o=null!==(c=null!==(r=null==t?void 0:t.status)&&void 0!==r?r:null==a?void 0:a.status)&&void 0!==c?c:Ia(null==s?void 0:s.status))&&void 0!==o?o:T.a.status;return{...e,...t,...ya({status:d,severity:u})}};var Ta=a(155);const Aa=c()(l.EuiProgress).withConfig({displayName:"ProgressLoader",componentId:"sc-gw8xr7-0"})(["",""],(({$isShow:e})=>e?Object(o.css)(["top:2px;border-radius:",";z-index:",";"],(({theme:e})=>e.eui.euiBorderRadius),(({theme:e})=>e.eui.euiZHeader)):"\n      display: none;\n    ")),Da=n.a.memo((({hiddenStatuses:e=[],isSelectorView:t=!1,onRowClick:a})=>{var o;const{owner:c,permissions:m}=Object(j.a)(),f=Object(Ta.a)(Object(Ea.b)("delete")),C=(()=>{const e=Object(w.useIsMutating)(T.c.deleteCases),t=Object(w.useIsMutating)(T.c.updateCases);return Boolean(e)||Boolean(t)})(),y=!!c.length,h=Object(i.head)(Object(i.difference)(u.s,e)),v={...!Object(i.isEmpty)(e)&&h&&{status:[h]}},{queryParams:O,setQueryParams:S,filterOptions:k,setFilterOptions:x}=function(e=!1,t){const{appId:a}=Object(j.a)(),n=Object(fa.useLocation)(),l=Object(fa.useHistory)(),i=Object(s.useRef)(!0),[o,c]=Object(s.useState)({...T.b}),[r,u]=Object(s.useState)({...T.a,...t}),[d,m]=_t()(Sa(a)),[p,b]=_t()(ka(a)),g=Object(s.useCallback)((t=>{if(e)return void c((e=>({...e,...t})));const a=Object(lt.j)(n.search),s=va(a);let l=wa(t,s,d);l=xa(l);const i={perPage:l.perPage,sortField:l.sortField,sortOrder:l.sortOrder};m(i),c(l)}),[e,n.search,d,m]),E=Object(s.useCallback)((t=>{if(e)return void u((e=>({...e,...t})));const a=Fa(r,t,ja(n.search),p),s=ha(a),l={...p,...s};b(l),u(a)}),[r,e,p,n.search,b]),f=Object(s.useCallback)((()=>{const e=ja(n.search),t={...e,...o,...ha(r),page:o.page.toString(),perPage:o.perPage.toString()};if(!Object(U.isEqual)(e,t))try{const a=function(e){const t=new URLSearchParams;for(const[a,s]of Object.entries(e))s&&(Array.isArray(s)?0===s.length?t.append(a,""):s.forEach((e=>t.append(a,e))):t.append(a,s));return t}({...e,...t}),s={...n,search:Object(lt.l)(a)};l.replace(s)}catch{}}),[r,l,n,o]);return i.current&&(g(e?o:{}),E(e?r:t),i.current=!1),Object(s.useEffect)((()=>{e||f()}),[e,f]),{queryParams:o,setQueryParams:g,filterOptions:r,setFilterOptions:E}}(t,v),[I,F]=Object(s.useState)([]),{data:A=ba.a,isFetching:D}=Object(ba.b)({filterOptions:k,queryParams:O}),M=Object(s.useMemo)((()=>A.cases.reduce(((e,t)=>{if(!t)return e;for(const a of t.assignees)e.add(a.uid);return e}),new Set)),[A.cases]),{data:N}=De({uids:Array.from(M)}),{data:z,isLoading:P}=Object(ga.a)(),{data:_=[]}=Object(pa.a)(),$=Object(s.useMemo)((()=>({sort:{field:O.sortField,direction:O.sortOrder}})),[O.sortField,O.sortOrder]),B=Object(s.useRef)(null),H=Object(s.useCallback)((()=>{var e;F([]),null===(e=B.current)||void 0===e||e.setSelection([])}),[F]),K=Object(s.useCallback)((({page:e,sort:t})=>{let a=O;var s,n;t&&(a={...a,sortField:(s=t.field,null!==(n=r.b[s])&&void 0!==n?n:r.b.title),sortOrder:t.direction}),e&&(a={...a,page:e.index+1,perPage:e.size}),S(a),H()}),[O,H,S]),R=Object(s.useCallback)((e=>{H(),x(e)}),[H,x]),{selectedColumns:G,setSelectedColumns:W}=function(){const{appId:e}=Object(j.a)(),t=st(),[a,s]=_t()((e=>`${e}.${wt.cb.casesTableColumns}`)(e));return{selectedColumns:Oa({selectedColumns:a||[],casesColumnsConfig:t}),setSelectedColumns:s}}(),{columns:V,isLoadingColumns:q}=(({userProfiles:e,isSelectorView:t,connectors:a=[],onRowClick:i,disableActions:o=!1,selectedColumns:c})=>{const r=st(t),{actions:m}=(({disableActions:e})=>{const{permissions:t}=Object(j.a)();return{actions:t.update||t.delete?{name:E.a,align:"right",render:t=>n.a.createElement(et,{theCase:t,key:t.id,disableActions:e}),width:"100px"}:null}})({disableActions:o}),{data:{customFields:f},isFetching:C}=Object(at.a)(),y=Object(s.useCallback)((async e=>{i&&i(e)}),[i]),h=Object(s.useMemo)((()=>({title:{field:r.title.field,name:r.title.name,sortable:!0,render:(e,a)=>null!=a.id&&null!=a.title?t?a.title:n.a.createElement(g.a,{detailName:a.id,title:a.title},n.a.createElement(nt.a,{text:a.title})):Object(p.a)(),width:t?"55%":"20%"},assignees:{field:r.assignees.field,name:r.assignees.name,render:t=>n.a.createElement(ut,{assignees:t,userProfiles:e})},tags:{field:r.tags.field,name:r.tags.name,render:e=>{if(null!=e&&e.length>0){const t=n.a.createElement(mt,{"data-test-subj":"case-table-column-tags"},e.map(((e,t)=>n.a.createElement(pt,{color:"hollow",key:`${e}-${t}`,"data-test-subj":`case-table-column-tags-${e}`},e)))),a=n.a.createElement(l.EuiBadgeGroup,{"data-test-subj":"case-table-column-tags"},e.map(((e,t)=>n.a.createElement(l.EuiBadge,{color:"hollow",key:`${e}-${t}`,"data-test-subj":`case-table-column-tags-${e}`},e))));return n.a.createElement(l.EuiToolTip,{"data-test-subj":"case-table-column-tags-tooltip",position:"left",content:a},t)}return Object(p.a)()},width:"12%"},totalAlerts:{field:r.totalAlerts.field,name:r.totalAlerts.name,align:l.RIGHT_ALIGNMENT,render:e=>null!=e?bt(`${e}`,"case-table-column-alertsCount"):Object(p.a)(),width:t?"55px":"80px"},totalComment:{field:r.totalComment.field,name:r.totalComment.name,align:l.RIGHT_ALIGNMENT,render:e=>null!=e?bt(`${e}`,"case-table-column-commentCount"):Object(p.a)(),width:"90px"},category:{field:r.category.field,name:r.category.name,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":`case-table-column-category-${e}`},e):Object(p.a)(),width:"120px"},closedAt:{field:r.closedAt.field,name:r.closedAt.name,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":"case-table-column-closedAt"},n.a.createElement(b.a,{value:e})):Object(p.a)()},createdAt:{field:r.createdAt.field,name:r.createdAt.name,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":"case-table-column-createdAt"},n.a.createElement(b.a,{value:e,stripMs:!0})):Object(p.a)()},updatedAt:{field:r.updatedAt.field,name:r.updatedAt.name,sortable:!0,render:e=>null!=e?n.a.createElement("span",{"data-test-subj":"case-table-column-updatedAt"},n.a.createElement(b.a,{value:e,stripMs:!0})):Object(p.a)()},externalIncident:{name:r.externalIncident.name,render:e=>null!=e.id?n.a.createElement(Et,{theCase:e,connectors:a}):Object(p.a)()},status:{field:r.status.field,name:r.status.name,sortable:!0,render:e=>null!=e?n.a.createElement(d.a,{status:e}):Object(p.a)(),width:"110px"},severity:{field:r.severity.field,name:r.severity.name,sortable:!0,render:e=>{if(null!=e){const t=L.a[null!=e?e:u.d.LOW];return n.a.createElement(l.EuiHealth,{"data-test-subj":`case-table-column-severity-${e}`,color:t.color},t.label)}return Object(p.a)()},width:"90px"},assignCaseAction:{align:l.RIGHT_ALIGNMENT,render:e=>null!=e.id?n.a.createElement(l.EuiButton,{"data-test-subj":`cases-table-row-select-${e.id}`,onClick:()=>{y(e)},size:"s"},E.Q):Object(p.a)()}})),[y,r,a,t,e]);f.forEach((({key:e,type:t,label:a})=>{if(t in dt.a){const s=dt.a[t]().getEuiTableColumn({label:a});h[e]={...s,render:t=>{const a=t.customFields.find((t=>t.key===e&&null!==t.value));return a?s.render(a):Object(p.a)()}}}}));const v=[];return c.forEach((({field:e,isChecked:a})=>{e in h&&(a||t)&&r[e].canDisplay&&v.push(h[e])})),t?v.push(h.assignCaseAction):m&&v.push(m),{columns:v,isLoadingColumns:C}})({filterStatus:null!==(o=k.status)&&void 0!==o?o:[],userProfiles:null!=N?N:new Map,isSelectorView:t,connectors:_,onRowClick:a,disableActions:I.length>0,selectedColumns:G}),Q=Object(s.useMemo)((()=>{var e;return{pageIndex:O.page-1,pageSize:O.perPage,totalItemCount:null!==(e=A.total)&&void 0!==e?e:0,pageSizeOptions:Rt}}),[A,O]),Y=Object(s.useMemo)((()=>({onSelectionChange:F,initialSelected:I,selectable:()=>!Object(Ea.c)(m)})),[m,I]),J=Object(s.useMemo)((()=>0===A.total),[A]),X=Object(s.useCallback)((e=>({"data-test-subj":`cases-table-row-${e.id}`})),[]),Z=Object(s.useCallback)((()=>{null==a||a(void 0,!0)}),[a]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(Aa,{size:"xs",color:"accent",className:"essentialAnimation",$isShow:C||D||q}),t?null:n.a.createElement(ma,null),n.a.createElement(Kt,{countClosedCases:A.countClosedCases,countOpenCases:A.countOpenCases,countInProgressCases:A.countInProgressCases,onFilterChanged:R,availableSolutions:y?[]:f,hiddenStatuses:e,onCreateCasePressed:Z,isSelectorView:t,isLoading:P,currentUserProfile:z,filterOptions:k}),n.a.createElement(la,{columns:V,data:A,goToCreateCase:a?Z:void 0,isCasesLoading:D,isLoadingColumns:q,isCommentUpdating:D,isDataEmpty:J,isSelectorView:t,onChange:K,pagination:Q,selectedCases:I,selection:Y,sorting:$,tableRef:B,tableRowProps:X,deselectCases:H,selectedColumns:G,onSelectedColumnsChange:W}))}));Da.displayName="AllCasesList"},264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(1);t.default=function(e){var t=s.useRef();return s.useEffect((function(){t.current=e})),t.current}},265:function(e,t,a){"use strict";e.exports=e=>{if("number"!=typeof e)throw new TypeError("Expected a number");const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}}}]);