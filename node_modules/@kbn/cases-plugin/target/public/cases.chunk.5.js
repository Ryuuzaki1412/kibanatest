/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[5],Array(148).concat([function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"J",(function(){return r})),a.d(t,"m",(function(){return o})),a.d(t,"A",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"B",(function(){return u})),a.d(t,"M",(function(){return d})),a.d(t,"L",(function(){return m})),a.d(t,"U",(function(){return p})),a.d(t,"y",(function(){return g})),a.d(t,"F",(function(){return b})),a.d(t,"C",(function(){return f})),a.d(t,"g",(function(){return E})),a.d(t,"o",(function(){return h})),a.d(t,"f",(function(){return v})),a.d(t,"S",(function(){return y})),a.d(t,"Q",(function(){return j})),a.d(t,"e",(function(){return C})),a.d(t,"V",(function(){return x})),a.d(t,"N",(function(){return O})),a.d(t,"n",(function(){return A}));var n=a(2),s=a(150);a.d(t,"a",(function(){return s.b})),a.d(t,"b",(function(){return s.c})),a.d(t,"h",(function(){return s.k})),a.d(t,"i",(function(){return s.m})),a.d(t,"j",(function(){return s.n})),a.d(t,"k",(function(){return s.o})),a.d(t,"l",(function(){return s.p})),a.d(t,"p",(function(){return s.u})),a.d(t,"q",(function(){return s.v})),a.d(t,"r",(function(){return s.w})),a.d(t,"s",(function(){return s.x})),a.d(t,"t",(function(){return s.B})),a.d(t,"u",(function(){return s.E})),a.d(t,"v",(function(){return s.F})),a.d(t,"w",(function(){return s.I})),a.d(t,"x",(function(){return s.J})),a.d(t,"z",(function(){return s.L})),a.d(t,"D",(function(){return s.P})),a.d(t,"E",(function(){return s.Q})),a.d(t,"G",(function(){return s.R})),a.d(t,"H",(function(){return s.S})),a.d(t,"I",(function(){return s.U})),a.d(t,"K",(function(){return s.Y})),a.d(t,"O",(function(){return s.eb})),a.d(t,"P",(function(){return s.fb})),a.d(t,"R",(function(){return s.gb})),a.d(t,"T",(function(){return s.ib})),a.d(t,"W",(function(){return s.jb}));const i=e=>n.i18n.translate("xpack.cases.caseView.alreadyPushedToExternalService",{values:{externalService:e},defaultMessage:"Already pushed to { externalService } incident"}),r=e=>n.i18n.translate("xpack.cases.caseView.requiredUpdateToExternalService",{values:{externalService:e},defaultMessage:"Requires update to { externalService } incident"}),o=n.i18n.translate("xpack.cases.caseView.copyCommentLinkAria",{defaultMessage:"Copy reference link"}),l=n.i18n.translate("xpack.cases.caseView.moveToCommentAria",{defaultMessage:"Highlight the referenced comment"}),c=n.i18n.translate("xpack.cases.caseView.alertCommentLabelTitle",{defaultMessage:"added an alert from"}),u=e=>n.i18n.translate("xpack.cases.caseView.generatedAlertCommentLabelTitle",{values:{totalAlerts:e},defaultMessage:"added {totalAlerts} alerts from"}),d=n.i18n.translate("xpack.cases.caseView.showAlertTooltip",{defaultMessage:"Show alert details"}),m=n.i18n.translate("xpack.cases.caseView.showAlertTableTooltip",{defaultMessage:"Show alerts"}),p=n.i18n.translate("xpack.cases.caseView.unknownRule.label",{defaultMessage:"Unknown rule"}),g=n.i18n.translate("xpack.cases.caseView.isolatedHost",{defaultMessage:"submitted isolate request on host"}),b=n.i18n.translate("xpack.cases.caseView.releasedHost",{defaultMessage:"submitted release request on host"}),f=e=>n.i18n.translate("xpack.cases.caseView.otherEndpoints",{values:{endpoints:e},defaultMessage:" and {endpoints} {endpoints, plural, =1 {other} other {others}}"}),E=n.i18n.translate("xpack.cases.caseView.delete.cancel",{defaultMessage:"Cancel"}),h=n.i18n.translate("xpack.cases.caseView.delete.confirm",{defaultMessage:"Delete"}),v=n.i18n.translate("xpack.cases.caseView.assigned",{defaultMessage:"assigned"}),y=n.i18n.translate("xpack.cases.caseView.unAssigned",{defaultMessage:"unassigned"}),j=n.i18n.translate("xpack.cases.caseView.assignee.themselves",{defaultMessage:"themselves"}),C=n.i18n.translate("xpack.cases.caseView.assignee.and",{defaultMessage:"and"}),x=n.i18n.translate("xpack.cases.caseView.description.unsavedDraftDescription",{defaultMessage:"You have unsaved edits for the description"}),O=n.i18n.translate("xpack.cases.caseView.userActions.showMore",{defaultMessage:"Show more"}),A=n.i18n.translate("xpack.cases.caseView.userActions.createCase",{defaultMessage:"Created case"})},,,,,,,,,,,,,,function(e,t,a){e.exports=a(62)(1262)},,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1);const s=({onDelete:e})=>{const[t,a]=Object(n.useState)(!1);return{showDeletionModal:t,onModalOpen:Object(n.useCallback)((()=>{a(!0)}),[]),onConfirm:Object(n.useCallback)((()=>{a(!1),e()}),[e]),onCancel:Object(n.useCallback)((()=>{a(!1)}),[])}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1),s=a.n(n),i=a(5),r=a(174);const o=({title:e,confirmButtonText:t,onConfirm:a,onCancel:n})=>s.a.createElement(i.EuiConfirmModal,{title:e,onCancel:n,onConfirm:a,cancelButtonText:r.a,confirmButtonText:t,buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"property-actions-confirm-modal"});o.displayName="DeleteAttachmentConfirmationModal";const l=s.a.memo(o)},function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"i",(function(){return r})),a.d(t,"h",(function(){return o}));var n=a(2),s=a(148);a.d(t,"a",(function(){return s.g})),a.d(t,"b",(function(){return s.o})),a.d(t,"d",(function(){return s.p})),a.d(t,"e",(function(){return s.q})),a.d(t,"f",(function(){return s.u})),a.d(t,"g",(function(){return s.E}));const i=n.i18n.translate("xpack.cases.userActions.deleteAttachment",{defaultMessage:"Delete attachment"}),r=e=>n.i18n.translate("xpack.cases.caseView.alerts.removeAlerts",{values:{totalAlerts:e},defaultMessage:"Remove {totalAlerts, plural, =1 {alert} other {alerts}}"}),o=n.i18n.translate("xpack.cases.caseView.alerts.remove",{defaultMessage:"Remove"})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(1),s=a.n(n),i=a(5),r=a(32),o=a(77);const l=({file:e,showPreview:t})=>{let a=e.name;return void 0!==e.extension&&(a+=`.${e.extension}`),Object(o.a)(e)?s.a.createElement(i.EuiLink,{onClick:t,"data-test-subj":"cases-files-name-link"},a):s.a.createElement("span",{title:r.r,"data-test-subj":"cases-files-name-text"},a)};l.displayName="FileNameLink";const c=s.a.memo(l)},function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(1),s=a.n(n),i=a(56),r=a.n(i),o=a(5),l=a(86),c=a(37),u=a(35);const d=r()(o.EuiOverlayMask).withConfig({displayName:"StyledOverlayMask",componentId:"sc-i7lka0-0"})(["padding-block-end:0vh !important;img{max-height:85vh;max-width:85vw;object-fit:contain;}"]),m=({closePreview:e,selectedFile:t})=>{const{client:a}=Object(l.b)(),{owner:i}=Object(u.a)();return Object(n.useEffect)((()=>{const t=t=>{t.key!==o.keys.ESCAPE&&"Escape"!==t.code||e()};return window.addEventListener("keyup",t),()=>{window.removeEventListener("keyup",t)}}),[e]),s.a.createElement(d,null,s.a.createElement(o.EuiFocusTrap,{onClickOutside:e},s.a.createElement(o.EuiImage,{alt:t.name,size:"original",src:a.getDownloadHref({id:t.id,fileKind:Object(c.a)(i[0])}),"data-test-subj":"cases-files-image-preview"})))};m.displayName="FilePreview"},function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(1);const s=()=>{const[e,t]=Object(n.useState)(!1);return{isPreviewVisible:e,showPreview:()=>t(!0),closePreview:()=>t(!1)}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(46),s=a(80),i=a(153),r=a(47),o=a(81),l=a(48);const c=()=>{const{showErrorToast:e,showSuccessToast:t}=Object(r.a)(),a=Object(i.a)();return Object(n.useMutation)((({caseId:e,fileId:t})=>Object(o.d)({caseId:e,fileIds:[t]})),{mutationKey:s.c.deleteFileAttachment,onSuccess:()=>{t(l.g),a()},onError:t=>{e(t,{title:l.d})}})}},,,,function(e,t,a){e.exports=a(62)(457)},function(e,t,a){"use strict";var n=a(314);e.exports=function(e,t){return t||0===e.length||l.test(e)||n(e,s)!==n(e,i)?r+e+o:e};var s="(",i=")",r="<",o=">",l=/\s/},function(e,t,a){"use strict";e.exports=function(e){var t=-1===e.indexOf(n)?n:s;return t+e+t};var n='"',s="'"},,,,,,,,,,,,,,,,,,,,,,function(e,t){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=a},function(e,t,a){"use strict";e.exports=function(e){return e}},function(e,t,a){"use strict";e.exports={gfm:!0,commonmark:!1,pedantic:!1,entities:"false",setext:!1,closeAtx:!1,tableCellPadding:!0,tablePipeAlign:!0,stringLength:function(e){return e.length},incrementListMarker:!0,tightDefinitions:!1,fences:!1,fence:"`",bullet:"-",listItemIndent:"tab",rule:"*",ruleSpaces:!0,ruleRepetition:3,strong:"*",emphasis:"_"}},function(e,t,a){e.exports=a(62)(525)},function(e,t,a){"use strict";var n=a(289);e.exports=function(e){var t;return e.charAt(0)!==s?0:(t=e.split(s,2).join(s)).length-n(t).length};var s="&"},function(e,t,a){"use strict";var n=a(162);e.exports=function(e,t){for(var a=e.split(s),o=a.length,l=n(i,t*r);o--;)0!==a[o].length&&(a[o]=l+a[o]);return a.join(s)};var s="\n",i=" ",r=4},function(e,t,a){"use strict";e.exports=function(e,t){var a,n,s=0,i=0;if("string"!=typeof t||1!==t.length)throw new Error("Expected character");for(a=n=(e=String(e)).indexOf(t);-1!==n;)s++,n===a?s>i&&(i=s):s=1,a=n+1,n=e.indexOf(t,a);return i}},function(e,t,a){"use strict";e.exports=function(e){var t=e.referenceType;return t===i?"":n+(t===r?"":e.label||e.identifier)+s};var n="[",s="]",i="shortcut",r="collapsed"},,,,,,,,function(e,t,a){var n,s,i,r,o;n=a(268),s=a(252).utf8,i=a(269),r=a(252).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?r.stringToBytes(e):s.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=n.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,m=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;var g=o._ff,b=o._gg,f=o._hh,E=o._ii;for(p=0;p<a.length;p+=16){var h=c,v=u,y=d,j=m;c=g(c,u,d,m,a[p+0],7,-680876936),m=g(m,c,u,d,a[p+1],12,-389564586),d=g(d,m,c,u,a[p+2],17,606105819),u=g(u,d,m,c,a[p+3],22,-1044525330),c=g(c,u,d,m,a[p+4],7,-176418897),m=g(m,c,u,d,a[p+5],12,1200080426),d=g(d,m,c,u,a[p+6],17,-1473231341),u=g(u,d,m,c,a[p+7],22,-45705983),c=g(c,u,d,m,a[p+8],7,1770035416),m=g(m,c,u,d,a[p+9],12,-1958414417),d=g(d,m,c,u,a[p+10],17,-42063),u=g(u,d,m,c,a[p+11],22,-1990404162),c=g(c,u,d,m,a[p+12],7,1804603682),m=g(m,c,u,d,a[p+13],12,-40341101),d=g(d,m,c,u,a[p+14],17,-1502002290),c=b(c,u=g(u,d,m,c,a[p+15],22,1236535329),d,m,a[p+1],5,-165796510),m=b(m,c,u,d,a[p+6],9,-1069501632),d=b(d,m,c,u,a[p+11],14,643717713),u=b(u,d,m,c,a[p+0],20,-373897302),c=b(c,u,d,m,a[p+5],5,-701558691),m=b(m,c,u,d,a[p+10],9,38016083),d=b(d,m,c,u,a[p+15],14,-660478335),u=b(u,d,m,c,a[p+4],20,-405537848),c=b(c,u,d,m,a[p+9],5,568446438),m=b(m,c,u,d,a[p+14],9,-1019803690),d=b(d,m,c,u,a[p+3],14,-187363961),u=b(u,d,m,c,a[p+8],20,1163531501),c=b(c,u,d,m,a[p+13],5,-1444681467),m=b(m,c,u,d,a[p+2],9,-51403784),d=b(d,m,c,u,a[p+7],14,1735328473),c=f(c,u=b(u,d,m,c,a[p+12],20,-1926607734),d,m,a[p+5],4,-378558),m=f(m,c,u,d,a[p+8],11,-2022574463),d=f(d,m,c,u,a[p+11],16,1839030562),u=f(u,d,m,c,a[p+14],23,-35309556),c=f(c,u,d,m,a[p+1],4,-1530992060),m=f(m,c,u,d,a[p+4],11,1272893353),d=f(d,m,c,u,a[p+7],16,-155497632),u=f(u,d,m,c,a[p+10],23,-1094730640),c=f(c,u,d,m,a[p+13],4,681279174),m=f(m,c,u,d,a[p+0],11,-358537222),d=f(d,m,c,u,a[p+3],16,-722521979),u=f(u,d,m,c,a[p+6],23,76029189),c=f(c,u,d,m,a[p+9],4,-640364487),m=f(m,c,u,d,a[p+12],11,-421815835),d=f(d,m,c,u,a[p+15],16,530742520),c=E(c,u=f(u,d,m,c,a[p+2],23,-995338651),d,m,a[p+0],6,-198630844),m=E(m,c,u,d,a[p+7],10,1126891415),d=E(d,m,c,u,a[p+14],15,-1416354905),u=E(u,d,m,c,a[p+5],21,-57434055),c=E(c,u,d,m,a[p+12],6,1700485571),m=E(m,c,u,d,a[p+3],10,-1894986606),d=E(d,m,c,u,a[p+10],15,-1051523),u=E(u,d,m,c,a[p+1],21,-2054922799),c=E(c,u,d,m,a[p+8],6,1873313359),m=E(m,c,u,d,a[p+15],10,-30611744),d=E(d,m,c,u,a[p+6],15,-1560198380),u=E(u,d,m,c,a[p+13],21,1309151649),c=E(c,u,d,m,a[p+4],6,-145523070),m=E(m,c,u,d,a[p+11],10,-1120210379),d=E(d,m,c,u,a[p+2],15,718787259),u=E(u,d,m,c,a[p+9],21,-343485551),c=c+h>>>0,u=u+v>>>0,d=d+y>>>0,m=m+j>>>0}return n.endian([c,u,d,m])})._ff=function(e,t,a,n,s,i,r){var o=e+(t&a|~t&n)+(s>>>0)+r;return(o<<i|o>>>32-i)+t},o._gg=function(e,t,a,n,s,i,r){var o=e+(t&n|a&~n)+(s>>>0)+r;return(o<<i|o>>>32-i)+t},o._hh=function(e,t,a,n,s,i,r){var o=e+(t^a^n)+(s>>>0)+r;return(o<<i|o>>>32-i)+t},o._ii=function(e,t,a,n,s,i,r){var o=e+(a^(t|~n))+(s>>>0)+r;return(o<<i|o>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var a=n.wordsToBytes(o(e,t));return t&&t.asBytes?a:t&&t.asString?r.bytesToString(a):n.bytesToHex(a)}},function(e,t){var a,n;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,n=0;a<e.length;a++,n+=8)t[n>>>5]|=e[a]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var s=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(a.charAt(s>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,s=0;n<e.length;s=++n%4)0!=s&&t.push((a.indexOf(e.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<2*s|a.indexOf(e.charAt(n))>>>6-2*s);return t}},e.exports=n},function(e,t){function a(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&a(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,a){"use strict";var n=a(271),s={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,i,r,o,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(r=n(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=s[t.format]||s.default;window.clipboardData.setData(i,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),r()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){e.exports=a(62)(2063)},function(e,t,a){"use strict";var n=a(274),s=a(228),i=a(275);function r(e){var t=n(i);t.prototype.options=s(t.prototype.options,this.data("settings"),e),this.Compiler=t}e.exports=r,r.Compiler=i},function(e,t,a){e.exports=a(62)(3714)},function(e,t,a){"use strict";var n=a(228),s=a(276);function i(e,t){this.inLink=!1,this.inTable=!1,this.tree=e,this.file=t,this.options=n(this.options),this.setOptions({})}e.exports=i;var r=i.prototype;r.enterLink=s("inLink",!1),r.enterTable=s("inTable",!1),r.enterLinkReference=a(277),r.options=a(254),r.setOptions=a(278),r.compile=a(290),r.visit=a(293),r.all=a(294),r.block=a(295),r.visitOrderedItems=a(296),r.visitUnorderedItems=a(297),r.visitors={root:a(298),text:a(299),heading:a(300),paragraph:a(301),blockquote:a(302),list:a(303),listItem:a(304),inlineCode:a(305),code:a(306),html:a(307),thematicBreak:a(308),strong:a(309),emphasis:a(310),break:a(311),delete:a(312),link:a(313),linkReference:a(315),imageReference:a(317),definition:a(318),image:a(319),table:a(320),tableCell:a(322)}},function(e,t,a){e.exports=a(62)(3717)},function(e,t,a){"use strict";var n=a(253);e.exports=function(e,t){var a=e.encode,s=e.escape,i=e.enterLink();return"shortcut"!==t.referenceType&&"collapsed"!==t.referenceType?i:(e.escape=n,e.encode=n,function(){e.encode=a,e.escape=s,i()})}},function(e,t,a){"use strict";var n=a(228),s=a(279),i=a(254),r=a(285),o=a(253);e.exports=function(e){var t,a,d=this,m=d.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=n(e)}for(a in i)c[typeof i[a]](e,a,m[a],l[a]);return(t=e.ruleRepetition)&&t<3&&u(t,"options.ruleRepetition"),d.encode=function(e){var t={};return"false"===e?o:("true"===e&&(t.useNamedReferences=!0),"escape"===e&&(t.escapeOnly=!0,t.useNamedReferences=!0),function(e){return s(e,t)})}(String(e.entities)),d.escape=r(e),d.options=e,d};var l={entities:{true:!0,false:!0,numbers:!0,escape:!0},bullet:{"*":!0,"-":!0,"+":!0},rule:{"-":!0,_:!0,"*":!0},listItemIndent:{tab:!0,mixed:!0,1:!0},emphasis:{_:!0,"*":!0},strong:{_:!0,"*":!0},fence:{"`":!0,"~":!0}},c={boolean:function(e,t,a){var n=e[t];null==n&&(n=a),"boolean"!=typeof n&&u(n,"options."+t),e[t]=n},string:function(e,t,a,n){var s=e[t];null==s&&(s=a),(s=String(s))in n||u(s,"options."+t),e[t]=s},number:function(e,t,a){var n=e[t];null==n&&(n=a),isNaN(n)&&u(n,"options."+t),e[t]=n},function:function(e,t,a){var n=e[t];null==n&&(n=a),"function"!=typeof n&&u(n,"options."+t),e[t]=n}};function u(e,t){throw new Error("Invalid value `"+e+"` for setting `"+t+"`")}},function(e,t,a){"use strict";var n=a(280),s=a(281),i=a(282),r=a(255),o=a(283),l=a(284);e.exports=b,b.escape=function(e){return b(e,{escapeOnly:!0,useNamedReferences:!0})};var c={}.hasOwnProperty,u=61,d=function(){var e,t={};for(e in n)t[n[e]]=e;return t}(),m=h(['"',"'","<",">","&","`"]),p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function b(e,t){var a=t||{},n=a.subset,i=n?h(n):m,r=a.escapeOnly,b=a.omitOptionalSemicolons;return e=e.replace(i,v),n||r?e:e.replace(p,(function(e,t,a){return f(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,a.charCodeAt(t+2),b)})).replace(g,v);function v(e,t,n){return function(e,t,a){var n,i,r,m,p=a.useShortestReferences,g=a.omitOptionalSemicolons;return(p||a.useNamedReferences)&&c.call(d,e)&&(n=function(e,t,a,n){var i="&"+e;return a&&c.call(s,e)&&-1===l.indexOf(e)&&(!n||t&&t!==u&&!o(t))?i:i+";"}(d[e],t,g,a.attribute)),!p&&n||(r=f(i=e.charCodeAt(0),t,g),p&&(m=E(i,t,g)).length<r.length&&(r=m)),n&&(!p||n.length<r.length)?n:r}(e,n.charCodeAt(t+1),a)}}function f(e,t,a){var n="&#x"+e.toString(16).toUpperCase();return a&&t&&!i(t)?n:n+";"}function E(e,t,a){var n="&#"+String(e);return a&&t&&!r(t)?n:n+";"}function h(e){return new RegExp("["+e.join("")+"]","g")}},function(e){e.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},function(e,t,a){e.exports=a(62)(3424)},function(e,t,a){e.exports=a(62)(3426)},function(e,t,a){e.exports=a(62)(3427)},function(e){e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},function(e,t,a){"use strict";var n=a(255),s=a(286),i=a(287),r=a(288),o=a(256);e.exports=function(e){return function(t,a,D){var P,L,z,B,U,V,G=this,_=e.gfm,H=e.commonmark,Q=e.pedantic,q=H?[h,g]:[h],W=D&&D.children,K=W&&W.indexOf(a),Y=W&&W[K-1],J=W&&W[K+1],X=t.length,Z=r(e),ee=-1,te=[],ae=te;for(P=Y?R(Y)&&M.test(Y.value):!D||"root"===D.type||"paragraph"===D.type;++ee<X;){if(V=!1,"\n"===(L=t.charAt(ee)))P=!0;else if(L===x||L===I||L===b||L===C||L===y||L===m&&o(t.slice(ee))>0||L===O&&G.inLink||_&&L===S&&t.charAt(ee+1)===S||_&&L===w&&(G.inTable||N(t,ee))||L===A&&ee>0&&ee<X-1&&(Q||!s(t.charAt(ee-1))||!s(t.charAt(ee+1)))||_&&!G.inLink&&L===v&&$(te.join("")))V=!0;else if(P)if(L===j||L===d||L===b||L===E||L===f)V=!0;else if(n(L)){for(U=ee+1;U<X&&n(t.charAt(U));)U++;-1!==q.indexOf(t.charAt(U))&&((J=t.charAt(U+1))&&J!==u&&J!==l&&J!==c||(te.push(t.slice(ee,U)),ee=U,L=t.charAt(ee),V=!0))}P&&!i(L)&&(P=!1),te.push(V?ne(L):L)}if(W&&R(a)){if(Y&&Y.referenceType===F){for(ee=-1,X=ae.length;++ee<X;)if((L=ae[ee])!==u&&L!==l){L!==p&&L!==v||(ae[ee]=ne(L));break}R(J)&&ee===X&&J.value.charAt(0)===p&&ae.push(x)}_&&!G.inLink&&R(Y)&&t.charAt(0)===v&&$(Y.value.slice(-6))&&(ae[0]=ne(v)),R(J)&&t.charAt(X-1)===m&&0!==o(m+J.value)&&(ae[ae.length-1]=ne(m)),J&&"link"===J.type&&t.charAt(X-1)===k&&(ae[ae.length-1]=ne(k)),_&&R(J)&&t.charAt(X-1)===S&&J.value.charAt(0)===S&&ae.splice(-1,0,x),z=R(Y)&&s(Y.value.slice(-1)),B=R(J)&&s(J.value.charAt(0)),1===X?t!==A||!Q&&z&&B||ae.unshift(x):(t.charAt(0)!==A||!Q&&z&&s(t.charAt(1))||ae.unshift(x),t.charAt(X-1)!==A||!Q&&B&&s(t.charAt(X-2))||ae.splice(-1,0,x))}return ae.join("");function ne(e){return-1===Z.indexOf(e)?T[e]:x+e}}};var l="\t",c="\n",u=" ",d="#",m="&",p="(",g=")",b="*",f="+",E="-",h=".",v=":",y="<",j=">",C="[",x="\\",O="]",A="_",I="`",w="|",S="~",k="!",T={"<":"&lt;",":":"&#x3A;","&":"&amp;","|":"&#x7C;","~":"&#x7E;"},F="shortcut",D="mailto",P="https",L="http",M=/\n\s*$/;function N(e,t){var a,n=e.lastIndexOf(c,t),s=e.indexOf(c,t);for(s=-1===s?e.length:s;++n<s;)if((a=e.charAt(n))!==v&&a!==E&&a!==u&&a!==w)return!1;return!0}function R(e){return e&&"text"===e.type}function $(e){var t=e.slice(-6).toLowerCase();return t===D||t.slice(-5)===P||t.slice(-4)===L}},function(e,t,a){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return!/[^0-9a-z\xDF-\xFF]/.test(e.toLowerCase())}},function(e,t,a){e.exports=a(62)(359)},function(e,t,a){e.exports=a(62)(3723)},function(e,t,a){e.exports=a(62)(679)},function(e,t,a){"use strict";var n=a(291);e.exports=function(){return this.visit(n(this.tree,this.options.commonmark))}},function(e,t,a){"use strict";var n=a(292);function s(e,t){var a,n;return"text"===e.type?!e.position||(a=e.position.start,n=e.position.end,a.line!==n.line||n.column-a.column===e.value.length):t&&"blockquote"===e.type}e.exports=function(e,t){return n(e,(function(e,a,n){var i=n?n.children:[],r=a&&i[a-1];if(r&&e.type===r.type&&s(r,t)&&s(e,t))return e.value&&(r.value+=e.value),e.children&&(r.children=r.children.concat(e.children)),i.splice(a,1),r.position&&e.position&&(r.position.end=e.position.end),a})),e}},function(e,t,a){e.exports=a(62)(365)},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.visitors;return"function"!=typeof n[e.type]&&a.file.fail(new Error("Missing compiler for node of type `"+e.type+"`: `"+e+"`"),e),n[e.type].call(a,e,t)}},function(e,t,a){"use strict";e.exports=function(e){for(var t=e.children,a=t.length,n=[],s=-1;++s<a;)n[s]=this.visit(t[s],e);return n}},function(e,t,a){"use strict";e.exports=function(e){for(var t,a,o=this.options,l=o.fences,c=o.commonmark?r:i,u=o.tightDefinitions?n:s,d=[],m=e.children,p=m.length,g=-1;++g<p;)t=a,a=m[g],t&&("list"===t.type&&("list"===a.type&&t.ordered===a.ordered||"code"===a.type&&!a.lang&&!l)?d.push(c):"definition"===t.type&&"definition"===a.type?d.push(u):d.push(s)),d.push(this.visit(a,e));return d.join("")};var n="\n",s=n+n,i=s+n,r=s+"\x3c!----\x3e"+s},function(e,t,a){"use strict";e.exports=function(e){var t,a=this,r=a.visitors.listItem,o=a.options.incrementListMarker,l=[],c=e.start,u=e.children,d=u.length,m=-1;for(c=null==c?1:c;++m<d;)t=(o?c+m:c)+s,l[m]=r.call(a,u[m],e,m,t);return l.join(e.spread?i:n)};var n="\n",s=".",i=n+n},function(e,t,a){"use strict";e.exports=function(e){for(var t=this,a=t.options.bullet,i=t.visitors.listItem,r=e.children,o=r.length,l=-1,c=[];++l<o;)c[l]=i.call(t,r[l],e,l,a);return c.join(e.spread?s:n)};var n="\n",s=n+n},function(e,t,a){"use strict";e.exports=function(e){var t=this.block(e);return t.charAt(t.length-1)!==n&&(t+=n),t};var n="\n"},function(e,t,a){"use strict";e.exports=function(e,t){return this.encode(this.escape(e.value,e,t),e)}},function(e,t,a){"use strict";var n=a(162);e.exports=function(e){var t,a=this,c=e.depth,u=a.options.setext,d=a.options.closeAtx,m=a.all(e).join("");return u&&c<3?m+s+n(1===c?l:o,m.length):(t=n(r,e.depth))+i+m+(d?i+t:"")};var s="\n",i=" ",r="#",o="-",l="="},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("")}},function(e,t,a){"use strict";e.exports=function(e){for(var t,a=this.block(e).split(n),r=[],o=a.length,l=-1;++l<o;)t=a[l],r[l]=(t?s:"")+t;return i+r.join(n+i)};var n="\n",s=" ",i=">"},function(e,t,a){"use strict";e.exports=function(e){return(e.ordered?this.visitOrderedItems:this.visitUnorderedItems).call(this,e)}},function(e,t,a){"use strict";var n=a(162),s=a(257);e.exports=function(e,t,a,p){for(var g,b,f,E=this,h=E.options.listItemIndent,v=p||E.options.bullet,y=null==e.spread||e.spread,j=e.checked,C=e.children,x=C.length,O=[],A=-1;++A<x;)O[A]=E.visit(C[A],e);return g=O.join(y?d:i),"boolean"==typeof j&&(g=o+(j?c:r)+l+r+g),"1"===h||"mixed"===h&&-1===g.indexOf(i)?(b=v.length+1,f=r):(b=u((v.length+1)/m)*m,f=n(r,b-v.length)),g?v+f+s(g,b/m).slice(b):v};var i="\n",r=" ",o="[",l="]",c="x",u=Math.ceil,d=i+i,m=4},function(e,t,a){"use strict";var n=a(258),s=a(162);e.exports=function(e){var t,a,r=e.value,o=s(i,n(r,i)+1),u=o,d=o,m=r.charCodeAt(0),p=r.charCodeAt(r.length-1),g=!1;if(m===l||p===l)g=!0;else if(r.length>2&&c(m)&&c(p))for(t=1,a=r.length-1;++t<a;)if(!c(r.charCodeAt(t))){g=!0;break}return g&&(u+=" ",d=" "+d),u+r+d};var i="`",r=10,o=32,l=96;function c(e){return e===r||e===o}},function(e,t,a){"use strict";var n=a(258),s=a(162),i=a(257);e.exports=function(e,t){var a,u=this,d=e.value,m=u.options,p=m.fence,g=e.lang||"";return g&&e.meta&&(g+=o+e.meta),(g=u.encode(u.escape(g,e)))||m.fences||!d||d.charAt(0)===r||d.charAt(d.length-1)===r?(p===c&&-1!==g.indexOf(c)&&(p=l),(a=s(p,Math.max(n(d,p)+1,3)))+g+r+d+r+a):(t&&"listItem"===t.type&&"tab"!==m.listItemIndent&&m.pedantic&&u.file.fail("Cannot indent code properly. See https://git.io/fxKR8",e.position),i(d,1))};var r="\n",o=" ",l="~",c="`"},function(e,t,a){"use strict";e.exports=function(e){return e.value}},function(e,t,a){"use strict";var n=a(162);e.exports=function(){var e=this.options,t=n(e.rule,e.ruleRepetition);return e.ruleSpaces?t.split("").join(s):t};var s=" "},function(e,t,a){"use strict";var n=a(162);e.exports=function(e){var t=n(this.options.strong,2);return t+this.all(e).join("")+t}},function(e,t,a){"use strict";e.exports=function(e){var t=this.options.emphasis,a=this.all(e).join("");return this.options.pedantic&&t===n&&-1!==a.indexOf(t)&&(t=s),t+a+t};var n="_",s="*"},function(e,t,a){"use strict";e.exports=function(){return this.options.commonmark?n:s};var n="\\\n",s="  \n"},function(e,t,a){"use strict";e.exports=function(e){return n+this.all(e).join("")+n};var n="~~"},function(e,t,a){"use strict";var n=a(229),s=a(230);e.exports=function(e){var t=this,a=t.encode(e.url||"",e),d=t.enterLink(),m=t.encode(t.escape(e.url||"",e)),p=t.all(e).join("");return d(),null==e.title&&u.test(a)&&m===p?n(t.encode(e.url),!0):(a=n(a),e.title&&(a+=i+s(t.encode(t.escape(e.title,e),e))),r+p+o+l+a+c)};var i=" ",r="[",o="]",l="(",c=")",u=/^[a-z][a-z+.-]+:\/?/i},function(e,t,a){e.exports=a(62)(3747)},function(e,t,a){"use strict";var n=a(316),s=a(259);e.exports=function(e){var t=this,a=e.referenceType,c=t.enterLinkReference(t,e),u=t.all(e).join("");return c(),(a===o||a===l)&&(u=n(u,e.label||e.identifier)),i+u+r+s(e)};var i="[",r="]",o="shortcut",l="collapsed"},function(e,t,a){"use strict";var n=a(256);e.exports=function(e,t){for(var a,r=e.length,o=t.length,l=[],c=0,u=0;u<r;){for(a=u;u<r&&!i.test(e.charAt(u));)u+=1;for(l.push(e.slice(a,u));c<o&&!i.test(t.charAt(c));)c+=1;for(a=c;c<o&&i.test(t.charAt(c));)t.charAt(c)===s&&(c+=n(t.slice(c))),c+=1;for(l.push(t.slice(a,c));u<r&&i.test(e.charAt(u));)u+=1}return l.join("")};var s="&",i=/[-!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~_]/},function(e,t,a){"use strict";var n=a(259);e.exports=function(e){return r+s+(this.encode(e.alt,e)||"")+i+n(e)};var s="[",i="]",r="!"},function(e,t,a){"use strict";var n=a(229),s=a(230);e.exports=function(e){var t=n(e.url);return e.title&&(t+=i+s(e.title)),o+(e.label||e.identifier)+l+r+i+t};var i=" ",r=":",o="[",l="]"},function(e,t,a){"use strict";var n=a(229),s=a(230);e.exports=function(e){var t=this,a=n(t.encode(e.url||"",e)),d=t.enterLink(),m=t.encode(t.escape(e.alt||"",e));return d(),e.title&&(a+=i+s(t.encode(e.title,e))),u+l+m+c+r+a+o};var i=" ",r="(",o=")",l="[",c="]",u="!"},function(e,t,a){"use strict";var n=a(321);e.exports=function(e){for(var t=this,a=t.options,s=a.tableCellPadding,i=a.tablePipeAlign,r=a.stringLength,o=e.children,l=o.length,c=t.enterTable(),u=[];l--;)u[l]=t.all(o[l]);return c(),n(u,{align:e.align,alignDelimiters:i,padding:s,stringLength:r})}},function(e,t,a){"use strict";var n=a(162);e.exports=function(e,t){for(var a,u,d,m,p,v,y,j,C,x,O,A,I=t||{},w=!1!==I.padding,S=!1!==I.delimiterStart,k=!1!==I.delimiterEnd,T=(I.align||[]).concat(),F=!1!==I.alignDelimiters,D=[],P=I.stringLength||E,L=-1,M=e.length,N=[],R=[],$=[],z=[],B=[],U=0;++L<M;){for(u=-1,$=[],z=[],(d=(a=e[L]).length)>U&&(U=d);++u<d;)v=null==(A=a[u])?"":String(A),!0===F&&(p=P(v),z[u]=p,(void 0===(m=B[u])||p>m)&&(B[u]=p)),$.push(v);N[L]=$,R[L]=z}if(u=-1,d=U,"object"==typeof T&&"length"in T)for(;++u<d;)D[u]=h(T[u]);else for(O=h(T);++u<d;)D[u]=O;for(u=-1,d=U,$=[],z=[];++u<d;)C="",x="",(O=D[u])===b?C=l:O===f?x=l:O===g&&(C=l,x=l),p=F?Math.max(1,B[u]-C.length-x.length):1,v=C+n(o,p)+x,!0===F&&((p=C.length+p+x.length)>B[u]&&(B[u]=p),z[u]=p),$[u]=v;for(N.splice(1,0,$),R.splice(1,0,z),L=-1,M=N.length,y=[];++L<M;){for($=N[L],z=R[L],u=-1,d=U,j=[];++u<d;)v=$[u]||"",C="",x="",!0===F&&(p=B[u]-(z[u]||0),(O=D[u])===f?C=n(i,p):O===g?p%2==0?x=C=n(i,p/2):(C=n(i,p/2+.5),x=n(i,p/2-.5)):x=n(i,p)),!0===S&&0===u&&j.push(c),!0!==w||!1===F&&""===v||!0!==S&&0===u||j.push(i),!0===F&&j.push(C),j.push(v),!0===F&&j.push(x),!0===w&&j.push(i),!0!==k&&u===d-1||j.push(c);j=j.join(""),!1===k&&(j=j.replace(s,"")),y.push(j)}return y.join(r)};var s=/ +$/,i=" ",r="\n",o="-",l=":",c="|",u=0,d=67,m=76,p=82,g=99,b=108,f=114;function E(e){return e.length}function h(e){var t="string"==typeof e?e.charCodeAt(0):u;return t===m||t===b?b:t===p||t===f?f:t===d||t===g?g:u}},function(e,t,a){"use strict";e.exports=function(e){return this.all(e).join("").replace(n," ")};var n=/\r?\n/g},function(e,t,a){e.exports=a(62)(1069)},,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"CaseViewLoading",(function(){return _i})),a.d(t,"CaseView",(function(){return Hi})),a.d(t,"default",(function(){return Hi}));var n=a(1),s=a.n(n),i=a(56),r=a.n(i),o=a(5),l=a(46),c=a(48),u=a(6),d=a(81),m=a(80),p=a(150),g=a(214),b=a(36);const f=s.a.memo((({caseId:e})=>{const{navigateToAllCases:t}=Object(b.i)();return s.a.createElement(o.EuiEmptyPrompt,{"data-test-subj":"case-view-does-not-exist",iconColor:"default",iconType:"casesApp",title:s.a.createElement("h2",null,p.A),titleSize:"xs",body:s.a.createElement("p",null,p.z(e)),actions:s.a.createElement(o.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},p.y)})}));f.displayName="DoesNotExist";var E=a(35),h=a(87),v=a(29),y=a(26),j=a(235),C=a(231),x=a(50),O=a(2);const A=O.i18n.translate("xpack.cases.caseView.editActionsLinkAria",{defaultMessage:"click to see all actions"}),I="property-actions",w=s.a.memo((({disabled:e=!1,onClick:t,iconType:a,label:n,color:i,customDataTestSubj:r})=>{const l=k(r);return s.a.createElement(o.EuiButtonEmpty,{"aria-label":n,color:i||"text","data-test-subj":`${l}-${a}`,iconSide:"left",iconType:a,isDisabled:e,onClick:t},n)}));w.displayName="PropertyActionButton";const S=s.a.memo((({propertyActions:e,customDataTestSubj:t})=>{const[a,i]=Object(n.useState)(!1),r=Object(n.useCallback)((()=>{i((e=>!e))}),[]),l=Object(n.useCallback)((e=>{i(!1),null!=e&&e()}),[]),c=k(t);return s.a.createElement(o.EuiPopover,{anchorPosition:"downRight","data-test-subj":c,ownFocus:!0,button:s.a.createElement(o.EuiButtonIcon,{"data-test-subj":`${c}-ellipses`,"aria-label":A,iconType:"boxesHorizontal",onClick:r}),id:"settingsPopover",isOpen:a,closePopover:l,repositionOnScroll:!0},s.a.createElement(o.EuiFlexGroup,{alignItems:"flexStart","data-test-subj":`${c}-group`,direction:"column",gutterSize:"none"},e.map(((e,a)=>s.a.createElement(o.EuiFlexItem,{grow:!1,key:`${e.type}-${a}`},s.a.createElement("span",null,e.type===x.a.BUTTON&&s.a.createElement(w,{disabled:e.disabled,iconType:e.iconType,label:e.label,color:e.color,onClick:()=>l(e.onClick),customDataTestSubj:t})||e.type===x.a.CUSTOM&&s.a.createElement(n.Suspense,{fallback:s.a.createElement(o.EuiLoadingSpinner,null)},e.render())))))))}));S.displayName="PropertyActions";const k=e=>null==e?I:`${I}-${e}`;var T=a(47);const F=({caseData:e,currentExternalIncident:t})=>{const{mutate:a}=Object(j.a)(),{navigateToAllCases:i}=Object(b.i)(),{permissions:r}=Object(E.a)(),{showSuccessToast:l}=Object(T.a)(),[c,u]=Object(n.useState)(!1),d=Object(n.useCallback)((()=>{u(!0)}),[]),m=Object(n.useCallback)((()=>{u(!1)}),[]),g=Object(n.useMemo)((()=>{var a;return[{type:x.a.BUTTON,iconType:"copyClipboard",label:p.q,onClick:()=>{navigator.clipboard.writeText(e.id),l(p.r)}},...null==t||Object(y.isEmpty)(null==t?void 0:t.externalUrl)?[]:[{type:x.a.BUTTON,iconType:"popout",label:p.kb(null!==(a=null==t?void 0:t.externalTitle)&&void 0!==a?a:""),onClick:()=>window.open(null==t?void 0:t.externalUrl,"_blank")}],...r.delete?[{type:x.a.BUTTON,iconType:"trash",label:p.t(),color:"danger",onClick:d}]:[]]}),[r.delete,d,t,e.id,l]),f=Object(n.useCallback)((()=>{u(!1),a({caseIds:[e.id],successToasterTitle:p.s(1)},{onSuccess:i})}),[e.id,a,i]);return 0===g.length?null:s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-actions"},s.a.createElement(S,{propertyActions:g,customDataTestSubj:"case"}),c?s.a.createElement(C.a,{totalCasesToBeDeleted:1,onCancel:m,onConfirm:f}):null)};F.displayName="Actions";const D=s.a.memo(F);var P=a(186),L=a(4),M=a(184),N=a(82);const R=({currentStatus:e,disabled:t=!1,isLoading:a=!1,onStatusChanged:i})=>{const[r,l]=Object(n.useState)(!1),c=Object(n.useCallback)((()=>l((e=>!e))),[]),u=Object(n.useCallback)((()=>l(!1)),[]),d=Object(n.useMemo)((()=>s.a.createElement(M.a,{disabled:t||a,status:e,onClick:c})),[t,e,c,a]),m=Object(n.useCallback)((t=>{u(),e!==t&&i(t)}),[u,e,i]),p=Object(n.useMemo)((()=>L.s.map((t=>s.a.createElement(o.EuiContextMenuItem,{"data-test-subj":`case-view-status-dropdown-${t}`,icon:t===e?"check":"empty",key:t,onClick:()=>m(t)},s.a.createElement(P.a,{status:t}))))),[e,m]);return t?s.a.createElement(P.a,{status:e}):s.a.createElement(o.EuiPopover,{anchorPosition:"downLeft",button:d,closePopover:u,"data-test-subj":"case-view-status-dropdown",id:"caseStatusPopover",isOpen:r,panelPaddingSize:"none"},s.a.createElement(o.EuiContextMenuPanel,{title:N.h,items:p}))};R.displayName="StatusContextMenu";const $=Object(n.memo)(R);var z=a(23);const B=({disabled:e,isSynced:t=!0,showLabel:a=!1,onSwitchChange:i})=>{const[r,l]=Object(n.useState)(t),c=Object(n.useCallback)((()=>{i&&i(!r),l(!r)}),[r,i]);return s.a.createElement(o.EuiSwitch,{label:r?z.lb:z.kb,showLabel:a,checked:r,onChange:c,disabled:e,"data-test-subj":"sync-alerts-switch"})};B.displayName="SyncAlertsSwitchComponent";const U=Object(n.memo)(B);var V=a(201),G=a(153),_=a(164);const H=e=>{const{showErrorToast:t}=Object(T.a)();return Object(l.useQuery)(m.d.caseConnectors(e),(({signal:t})=>Object(d.g)(e,t)),{staleTime:3e4,onError:e=>{t(e,{title:c.e})}})},Q=r()(o.EuiDescriptionList).withConfig({displayName:"MyDescriptionList",componentId:"sc-66sg2e-0"})(["",""],(({theme:e})=>Object(i.css)(["&{padding-right:",";border-right:",";@media only screen and (max-width:","){padding-right:0;border-right:0;}}"],e.eui.euiSizeL,e.eui.euiBorderThin,e.eui.euiBreakpoints.m))),q=({caseData:e,isLoading:t,onUpdateField:a})=>{var i,r,l;const{permissions:c}=Object(E.a)(),{isSyncAlertsEnabled:u,metricsFeatures:d}=Object(_.a)(),{data:m}=H(e.id),g=(b=e).status===L.e.open?b.createdAt:b.status===L.e["in-progress"]?b.updatedAt:b.status===L.e.closed?b.closedAt:null;var b;const f=(h=e.status,M.b[h].actionBar.title);var h;const y=Object(G.a)(),j=Object(n.useCallback)((e=>a({key:"status",value:e})),[a]),C=null!==(i=null==m||null===(r=m[e.connector.id])||void 0===r||null===(l=r.push.details)||void 0===l?void 0:l.externalService)&&void 0!==i?i:null,x=Object(n.useCallback)((t=>a({key:"settings",value:{...e.settings,syncAlerts:t}})),[e.settings,a]);return s.a.createElement(o.EuiFlexGroup,{gutterSize:"l",justifyContent:"flexEnd","data-test-subj":"case-action-bar-wrapper"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Q,{compressed:!0},s.a.createElement(o.EuiFlexGroup,{responsive:!1,justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-status"},s.a.createElement(o.EuiDescriptionListTitle,null,p.bb),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement($,{currentStatus:e.status,disabled:!c.update,isLoading:t,onStatusChanged:j}))),d.includes(v.a.LIFESPAN)?null:s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionListTitle,null,f),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement(V.a,{"data-test-subj":"case-action-bar-status-date",value:g})))))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionList,{compressed:!0},s.a.createElement(o.EuiFlexGroup,{gutterSize:"l",alignItems:"center",responsive:!1,justifyContent:"spaceBetween"},c.update&&u&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiDescriptionListTitle,null,s.a.createElement(o.EuiFlexGroup,{component:"span",alignItems:"center",gutterSize:"xs",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("span",null,p.cb)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiIconTip,{content:p.db})))),s.a.createElement(o.EuiDescriptionListDescription,null,s.a.createElement(U,{disabled:t,isSynced:e.settings.syncAlerts,onSwitchChange:x}))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("span",null,s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"case-refresh",flush:"left",iconType:"refresh",onClick:y},p.l))),s.a.createElement(D,{caseData:e,currentExternalIncident:C})))))};q.displayName="CaseActionBar";const W=s.a.memo(q);var K=a(198),Y=a(3),J=a(197),X=a(250);const Z=({onSubmit:e,isLoading:t,title:a})=>{const{releasePhase:i,permissions:r}=Object(E.a)(),[l,c]=Object(n.useState)(!1),[u,d]=Object(n.useState)([]),m=Object(n.useCallback)((t=>t.trim().length?t.trim().length>Y.Cb?(d([J.f("title",Y.Cb)]),!1):(t!==a&&e(t.trim()),c(!1),d([]),!0):(d([J.g]),!1)),[e,a]),p=u.length>0;return s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(te,{grow:!0,$_css:i&&{overflow:"hidden"}},s.a.createElement(o.EuiInlineEditTitle,{defaultValue:a,readModeProps:{onClick:()=>c(!0),"data-test-subj":"editable-title-header-value"},editModeProps:{formRowProps:{error:u},inputProps:{"data-test-subj":"editable-title-input-field",onChange:()=>{d([])}},saveButtonProps:{"data-test-subj":"editable-title-submit-btn",isDisabled:p},cancelButtonProps:{onClick:()=>(d([]),void c(!1)),"data-test-subj":"editable-title-cancel-btn"}},inputAriaLabel:"Editable title input field",heading:"h1",size:"s",isInvalid:p,isLoading:t,isReadOnly:!r.update,onSave:e=>m(e),startWithEditOpen:l,"data-test-subj":"header-page-title"})),s.a.createElement(o.EuiFlexItem,{grow:!1},"experimental"===i&&s.a.createElement(X.c,null),"beta"===i&&s.a.createElement(X.b,null)))};Z.displayName="EditableTitle";const ee=s.a.memo(Z);var te=r()(o.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1x9vz5m-0"})(["",""],(e=>e.$_css)),ae=a(213),ne=a(196),se=a(12),ie=a(165),re=a(180),oe=a(195),le=a(161);const ce=O.i18n.translate("xpack.cases.editConnector.editConnectorLinkAria",{defaultMessage:"click to edit connector"});var ue=a(61),de=a(245),me=a(248),pe=a(247);const ge=({disabled:e,errorsMsg:t,isLoading:a,hasBeenPushed:n,connectorName:i,showTooltip:r,pushToService:l})=>{const c=s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"push-to-external-service",iconType:"importAction",onClick:l,disabled:e,isLoading:a},n?le.j(i):le.g(i));return r?s.a.createElement(o.EuiToolTip,{position:"top",title:t.length>0?t[0].title:le.i(i),content:s.a.createElement("p",null,t.length>0?t[0].description:le.h),"data-test-subj":"push-button-tooltip"},c):s.a.createElement(s.a.Fragment,null,c)};ge.displayName="PushButton";const be=s.a.memo(ge);var fe=a(249);const Ee=O.i18n.translate("xpack.cases.addConnector.title",{defaultMessage:"Add connector"}),he=O.i18n.translate("xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedTitle",{defaultMessage:"Reopen the case"}),ve=O.i18n.translate("xpack.cases.caseView.errorsPushServiceCallOutTitle",{defaultMessage:"Select an external connector"}),ye=({handleButtonClick:e,id:t,messages:a,type:i,hasLicenseError:r})=>{const{permissions:l}=Object(E.a)(),c=Object(n.useCallback)((a=>e(a,t,i)),[e,t,i]),u=Object(n.useMemo)((()=>a.map((e=>e.id)).includes(fe.a)),[a]);return Object(y.isEmpty)(a)?null:s.a.createElement(o.EuiCallOut,{title:u?he:r?le.f:ve,color:i,iconType:"gear","data-test-subj":`case-callout-${t}`,size:"s"},s.a.createElement(o.EuiDescriptionList,{"data-test-subj":`callout-messages-${t}`,listItems:a}),!u&&!r&&l.settings&&s.a.createElement(o.EuiButton,{"data-test-subj":`callout-onclick-${t}`,color:"success"===i?"success":i,onClick:c},Ee))};ye.displayName="CallOut";const je=Object(n.memo)(ye);var Ce=a(267),xe=a.n(Ce);const Oe=({hasConnectors:e,hasLicenseError:t,onEditClick:a,messages:i=[]})=>{const{navigateToConfigureCases:r}=Object(b.l)(),l=Object(n.useCallback)((t=>{t.preventDefault(),e?a():r()}),[e,a,r]),c=Object(n.useMemo)((()=>i.reduce(((e,t)=>{var a,n,s,i;const r=null==t.errorType?"primary":t.errorType;return{...e,[r]:{messagesId:[...null!==(a=null===(n=e[r])||void 0===n?void 0:n.messagesId)&&void 0!==a?a:[],t.id],messages:[...null!==(s=null===(i=e[r])||void 0===i?void 0:i.messages)&&void 0!==s?s:[],t]}}}),{})),[i]),u=Object.keys(c);return s.a.createElement(s.a.Fragment,null,u.map(((e,a)=>{const n=((e,t="|")=>xe()(e.join(t)))(c[e].messagesId);return s.a.createElement(s.a.Fragment,{key:n},s.a.createElement(je,{handleButtonClick:l,id:n,messages:c[e].messages,type:e,hasLicenseError:t}),a!==u.length-1?s.a.createElement(o.EuiSpacer,null):null)})))};Oe.displayName="CaseCallOut";const Ae=Object(n.memo)(Oe),Ie=({hasConnectors:e,hasLicenseError:t,errorsMsg:a,onEditClick:n})=>s.a.createElement(Ae,{hasConnectors:e,hasLicenseError:t,messages:a,onEditClick:n});Ie.displayName="PushCalloutsComponent";const we=s.a.memo(Ie);var Se=a(96),ke=a.n(Se),Te=a(24),Fe=a(243),De=a(241),Pe=a(219);const Le=({caseData:e,caseConnectors:t,supportedActionConnectors:a,isLoading:i,onSubmit:r,onCancel:l})=>{const c=e.connector.id,u=e.connector.fields,{form:d}=Object(Te.useForm)({defaultValue:{connectorId:c,fields:u},options:{stripEmptyFields:!1},serializer:ue.f,deserializer:ue.e}),[{connectorId:m,fields:p}]=Object(Te.useFormData)({form:d}),g=Object(n.useMemo)((()=>Object(ue.b)(p)),[p]),{submit:b}=d,f=Object(ue.c)(m,a),E=!(null===f&&c===Y.Fb)&&(null==f?void 0:f.id)!==c||!ke()(g,u),h=Object(ue.g)({config:{},connectors:a}),v=Object(n.useCallback)((async()=>{const{isValid:e,data:t}=await b();if(e&&t.connectorId){var n;const e=Object(ue.c)(t.connectorId,a),s={...e?Object(Pe.b)(e):Object(Pe.a)(),fields:null!==(n=t.fields)&&void 0!==n?n:null};r(s)}}),[r,b,a]);return s.a.createElement(Te.Form,{form:d},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",direction:"row"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Te.UseField,{path:"connectorId",config:h,component:De.a,componentProps:{connectors:a,dataTestSubj:"caseConnectors",defaultValue:c,idAria:"caseConnectors",isLoading:i,handleChange:e=>{var a;const n=null===(a=t[e])||void 0===a?void 0:a.fields;d.reset({resetValues:!0,defaultValue:{connectorId:e,fields:n}})}}})))),s.a.createElement(o.EuiFlexItem,{"data-test-subj":"edit-connector-fields-form-flex-item"},s.a.createElement(Fe.a,{connector:f,key:m})),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{disabled:!E,color:"success","data-test-subj":"edit-connectors-submit",fill:!0,iconType:"save",onClick:v,size:"s"},z.eb)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"edit-connectors-cancel",iconType:"cross",onClick:l,size:"s"},z.m))))))};Le.displayName="ConnectorsForm";const Me=s.a.memo(Le);var Ne=a(262);const Re=({connector:e,fields:t})=>{const{caseConnectorsRegistry:a}=Object(Ne.a)();if(null==e||null==e.actionTypeId||".none"===e.actionTypeId)return null;const{previewComponent:i}=a.get(e.actionTypeId);return s.a.createElement(s.a.Fragment,null,null!=i?s.a.createElement(n.Suspense,{fallback:s.a.createElement(o.EuiFlexGroup,{justifyContent:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLoadingSpinner,{size:"m"})))},s.a.createElement("div",{"data-test-subj":"connector-fields-preview"},s.a.createElement(i,{connector:e,fields:t,key:e.id}))):null)};Re.displayName="ConnectorFieldsFormPreview";const $e=Object(n.memo)(Re),ze=s.a.memo((({caseData:e,caseConnectors:t,supportedActionConnectors:a,isLoading:i,onSubmit:r})=>{var l;const c=e.connector.fields,d=Object(ue.c)(e.connector.id,a),m=!!d,[p,g]=Object(n.useState)(!1),{actions:b}=Object(u.c)(),{permissions:f}=Object(E.a)(),h=f.connectors&&b.read,v=Object(n.useCallback)((()=>g(!0)),[]),j=Object(n.useCallback)((()=>g(!1)),[]),C=Object(n.useCallback)((e=>{r(e),g(!1)}),[r]),x={...e.connector,name:Object(y.isEmpty)(null==d?void 0:d.name)?e.connector.name:null!==(l=null==d?void 0:d.name)&&void 0!==l?l:""},{errorsMsg:O,needsToBePushed:A,hasBeenPushed:I,isLoading:w,hasPushPermissions:S,hasErrorMessages:k,hasLicenseError:T,handlePushToService:F}=(({caseId:e,caseStatus:t,caseConnectors:a,connector:s,isValidConnector:i})=>{var r,o;const{permissions:l}=Object(E.a)(),{isLoading:c,mutateAsync:u}=Object(de.a)(),d=Object(G.a)(),{isLoading:m,data:p=null}=Object(pe.a)(),g=null!=p&&!p.enabledInLicense,b=!(null===(r=a[s.id])||void 0===r||!r.push.needsToBePushed),f=!(null===(o=a[s.id])||void 0===o||!o.push.hasBeenPushed),h=Object(n.useCallback)((async()=>{null!=s.id&&"none"!==s.id&&null!=await u({caseId:e,connector:s})&&d()}),[e,s,u,d]),v=Object(n.useMemo)((()=>{const e=[];return l.update?g?[Object(me.f)()]:null==p||p.enabledInConfig?"none"!==s.id||m||g?i||m||g?t===L.e.closed?[Object(me.b)()]:e:[Object(me.d)()]:[Object(me.c)()]:[Object(me.e)()]:e}),[p,t,s.id,g,i,m,l.update]);return{errorsMsg:v,hasErrorMessages:v.length>0,needsToBePushed:b,hasBeenPushed:f,isLoading:c||m,hasPushPermissions:l.push,hasLicenseError:g,handlePushToService:h}})({connector:x,caseConnectors:t,caseId:e.id,caseStatus:e.status,isValidConnector:m}),D=w||O.length>0||!S||!m||!A;return s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"sidebar-connectors"},s.a.createElement(o.EuiText,null,s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1,"data-test-subj":"case-view-edit-connector"},s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"connector-edit-header"},s.a.createElement("h4",null,z.y)),!i&&!p&&S&&h?s.a.createElement(o.EuiFlexItem,{"data-test-subj":"connector-edit",grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"connector-edit-button","aria-label":ce,iconType:"pencil",onClick:v})):null),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(o.EuiFlexGroup,{"data-test-subj":"edit-connectors",direction:"column",alignItems:"stretch"},!i&&!p&&k&&h&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"push-callouts"},s.a.createElement(we,{errorsMsg:O,hasLicenseError:T,hasConnectors:a.length>0,onEditClick:v})),!h&&s.a.createElement(o.EuiText,{"data-test-subj":"edit-connector-permissions-error-msg",size:"s"},s.a.createElement("span",null,z.ab)),h&&!p&&s.a.createElement($e,{connector:d,fields:c}),h&&p&&s.a.createElement(Me,{caseData:e,caseConnectors:t,supportedActionConnectors:a,isLoading:i,onCancel:j,onSubmit:C}),!k&&!i&&!p&&S&&h&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("span",null,s.a.createElement(be,{hasBeenPushed:I,disabled:D,isLoading:w,pushToService:F,errorsMsg:O,showTooltip:O.length>0||!A||!S,connectorName:x.name}))))))}));ze.displayName="EditConnector";var Be=a(176);const Ue=({status:e,onStatusChanged:t,isLoading:a})=>{const i=Object(n.useMemo)((()=>L.s.findIndex((t=>t===e))),[e]),r=Object(n.useMemo)((()=>(i+1)%L.s.length),[i]),l=Object(n.useCallback)((()=>{t(L.s[r])}),[r,t]);return s.a.createElement(o.EuiButton,{"data-test-subj":"case-view-status-action-button",iconType:Be.a[L.s[r]].icon,isLoading:a,onClick:l},Be.a[L.s[r]].button.label)};Ue.displayName="StatusActionButton";const Ve=Object(n.memo)(Ue);var Ge=a(27);const _e=O.i18n.translate("xpack.cases.caseView.editTagsLinkAria",{defaultMessage:"click to edit tags"});var He=a(189);const Qe=r()(o.EuiBadge).withConfig({displayName:"MyEuiBadge",componentId:"sc-1dhvi77-0"})(["max-width:200px;"]),qe=({tags:e,color:t="default",gutterSize:a})=>s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(o.EuiBadgeGroup,{gutterSize:a},e.map((e=>s.a.createElement(Qe,{"data-test-subj":`tag-${e}`,color:t,key:e},e)))));qe.displayName="Tags";const We=Object(n.memo)(qe),Ke={tags:a(217).b},Ye=Object(Te.getUseField)({component:Ge.Field}),Je=r()(o.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-18s7zz7-0"})(["",""],(({theme:e})=>Object(i.css)(["width:100%;p{font-size:",";margin-block-end:unset;}"],e.eui.euiSizeM))),Xe=r()(o.EuiFlexGroup).withConfig({displayName:"ColumnFlexGroup",componentId:"sc-18s7zz7-1"})(["",""],(({theme:e})=>Object(i.css)(["&{max-width:100%;@media only screen and (max-width:","){flex-direction:row;}}"],e.eui.euiBreakpoints.m))),Ze=s.a.memo((({isLoading:e,onSubmit:t,tags:a})=>{const{permissions:i}=Object(E.a)(),r={tags:a},{form:l}=Object(Te.useForm)({defaultValue:r,options:{stripEmptyFields:!1},schema:Ke}),{submit:c}=l,[u,d]=Object(n.useState)(!1),m=Object(n.useCallback)((async()=>{const{isValid:e,data:a}=await c();if(e&&a.tags){const e=a.tags.map((e=>e.trim()));t(e),l.reset({defaultValue:a}),d(!1)}}),[t,c]),{data:p=[]}=Object(He.a)(),[g,b]=Object(n.useState)(p.map((e=>({label:e}))));return Object(n.useEffect)((()=>b(p.map((e=>({label:e}))))),[p]),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{"data-test-subj":"case-view-tag-list"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("h4",null,z.mb)),e&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"tag-list-loading"}),!e&&i.update&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"tag-list-edit",grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"tag-list-edit-button","aria-label":_e,iconType:"pencil",onClick:d.bind(null,!0)}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(Je,{gutterSize:"none","data-test-subj":"case-tags"},0===a.length&&!u&&s.a.createElement("p",{"data-test-subj":"no-tags"},z.U),!u&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(We,{tags:a,color:"hollow"})),u&&s.a.createElement(Xe,{"data-test-subj":"edit-tags",direction:"column"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Te.Form,{form:l},s.a.createElement(Ye,{path:"tags",componentProps:{idAria:"caseTags","data-test-subj":"caseTags",euiFieldProps:{fullWidth:!0,placeholder:"",options:g,noSuggestions:!1,customOptionText:z.g}}}),s.a.createElement(Te.FormDataProvider,{pathsToWatch:"tags"},(({tags:e})=>{const t=g.map((e=>e.label)),a=e.reduce(((e,t)=>e.includes(t)?e:[...e,t]),t);return Object(y.isEqual)(t,a)||b(a.map((e=>({label:e})))),null})))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{color:"success","data-test-subj":"edit-tags-submit",fill:!0,iconType:"save",onClick:m,size:"s"},z.eb)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"edit-tags-cancel",iconType:"cross",onClick:d.bind(null,!1),size:"s"},z.m))))))))}));Ze.displayName="EditTags";var et=a(57),tt=a.n(et),at=a(13),nt=a(92),st=a(175),it=a(182),rt=a(88);const{emptyField:ot,maxLengthField:lt}=rt.fieldValidators,ct={comment:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:ot(z.I)},{validator:lt({length:Y.nb,message:z.P("comment",Y.nb)})}]}};var ut=a(244);const dt=r()(o.EuiLoadingSpinner).withConfig({displayName:"MySpinner",componentId:"sc-97gb16-0"})(["position:absolute;top:50%;left:50%;"]),mt={comment:""},pt=s.a.memo(Object(n.forwardRef)((({id:e,caseId:t,onCommentPosted:a,onCommentSaving:i,showLoading:r=!0,statusActionButton:l},c)=>{const u=Object(n.useRef)(null),[d,m]=Object(n.useState)(!1),{permissions:p,owner:g,appId:b}=Object(E.a)(),{isLoading:f,mutate:h}=Object(nt.a)(),v=Object(it.a)(b,t,e),{form:y}=Object(Te.useForm)({defaultValue:mt,options:{stripEmptyFields:!1},schema:ct}),j="comment",{setFieldValue:C,reset:x,submit:O}=y,[{comment:A}]=Object(Te.useFormData)({form:y,watch:[j]}),I=Object(n.useCallback)((e=>{const t=`> ${e.replace(new RegExp("\r?\n","g"),"\n> ")} \n\n`;C(j,`${A}${A.length>0?"\n\n":""}${t}`),m(!0)}),[A,C]),w=Object(n.useCallback)((e=>{C(j,e)}),[C]);Object(n.useImperativeHandle)(c,(()=>({addQuote:I,setComment:w,editor:u.current})));const S=Object(n.useCallback)((async()=>{const{isValid:e,data:n}=await O();e&&(null!=i&&i(),h({caseId:t,caseOwner:g[0],attachments:[{...n,type:L.a.user}]},{onSuccess:e=>{a(e)}}),x({defaultValue:{}})),Object(ue.k)(v)}),[O,i,h,t,g,a,x,v]);Object(n.useEffect)((()=>{var e,t;Object(se.isEmpty)(A)||null===(e=u.current)||void 0===e||null===(t=e.textarea)||void 0===t||t.focus(),d&&m(!1)}),[d]);const k=f||!(null!=A&&A.trim().length)||A.trim().length>Y.nb;return s.a.createElement("span",{id:"add-comment-permLink"},f&&r&&s.a.createElement(dt,{"data-test-subj":"loading-spinner",size:"xl"}),p.create&&s.a.createElement(Te.Form,{form:y},s.a.createElement(Te.UseField,{path:j,component:st.b,componentProps:{ref:u,id:e,draftStorageKey:v,idAria:"caseComment",isDisabled:f,dataTestSubj:"add-comment",placeholder:z.e,bottomRightContent:s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd",responsive:!1,wrap:!0},l&&s.a.createElement(o.EuiFlexItem,{grow:!1},l),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{"data-test-subj":"submit-comment",fill:!0,iconType:"plusInCircle",isDisabled:k,isLoading:f,onClick:S},z.d)))}}),s.a.createElement(ut.a,{fieldName:"comment"})))})));pt.displayName="AddComment";const gt=Object.keys(Object(se.omit)(L.q,["delete_case"])),bt="newComment";var ft=a(215);const Et=()=>{const{detailName:e}=Object(b.k)(),{clearDraftComment:t,draftComment:a,hasIncomingLensState:s,openLensModal:i}=Object(ft.a)(),r=Object(n.useRef)(0),{mutate:o}=(()=>{const{showErrorToast:e}=Object(T.a)(),t=Object(G.a)(),a=Object(E.a)().owner[0];return Object(l.useMutation)((({caseId:e,commentId:t,commentUpdate:n,version:s})=>Object(d.p)({caseId:e,commentId:t,commentUpdate:n,version:s,owner:a})),{mutationKey:m.c.updateComment,onSuccess:()=>{t()},onError:t=>{e(t,{title:c.e})}})})(),{mutate:u}=(()=>{const{showErrorToast:e,showSuccessToast:t}=Object(T.a)(),a=Object(G.a)();return Object(l.useMutation)((({caseId:e,commentId:t})=>Object(d.c)({caseId:e,commentId:t})),{mutationKey:m.c.deleteComment,onSuccess:(e,{successToasterTitle:n})=>{t(n),a()},onError:t=>{e(t,{title:c.e})}})})(),[p,g]=Object(n.useState)(""),[f,h]=Object(n.useState)([]),[v,y]=Object(n.useState)([]),j=Object(G.a)(),C=Object(n.useRef)({}),x=Object(n.useCallback)((e=>{t(),y((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[t]),O=e=>{h((t=>t.filter((t=>t!==e))))},A=Object(n.useCallback)((({id:t,version:a},n)=>{var s;s=t,h((e=>[...e,s])),o({caseId:e,commentId:t,commentUpdate:n,version:a},{onSuccess:()=>{O(t)},onError:()=>{O(t)}})}),[e,o]),I=Object(n.useCallback)(((t,a)=>{u({caseId:e,commentId:t,successToasterTitle:a})}),[e,u]),w=Object(n.useCallback)((e=>{const t=document.getElementById(`${e}-permLink`);if(null!=t){const a=-120,n=t.getBoundingClientRect().top+window.pageYOffset+a;window.scrollTo({top:n,behavior:"smooth"}),"add-comment"===e&&t.getElementsByTagName("textarea")[0].focus()}window.clearTimeout(r.current),g(e),r.current=window.setTimeout((()=>{g(""),window.clearTimeout(r.current)}),2400)}),[r]),S=Object(n.useCallback)((e=>{const t=null==C?void 0:C.current[bt];(e=>null!=(null==e?void 0:e.addQuote))(t)&&t.addQuote(e),w("add-comment")}),[w]);return Object(n.useEffect)((()=>{if(null!=a&&a.commentId&&"description"!==(null==a?void 0:a.commentId)){var e,n;y((e=>bt===(null==a?void 0:a.commentId)||e.includes(null==a?void 0:a.commentId)?e:[null==a?void 0:a.commentId]));const r=null==C||null===(e=C.current)||void 0===e?void 0:e[a.commentId];(e=>null!=(null==e?void 0:e.setComment))(r)&&null!==(n=r.editor)&&void 0!==n&&n.textarea&&(r.setComment(a.comment),s?i({editorRef:r.editor}):t())}}),[t,a,s,i]),{loadingCommentIds:f,selectedOutlineCommentId:p,manageMarkdownEditIds:v,commentRefs:C,handleManageMarkdownEditId:x,handleOutlineComment:w,handleSaveComment:A,handleDeleteComment:I,handleManageQuote:S,handleUpdate:j}};var ht=a(171),vt=a(210);const yt=({userInfo:e,boldName:t=!1})=>{const a=Object(vt.a)(null==e?void 0:e.user);return s.a.createElement(o.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-username"},t?s.a.createElement("strong",{"data-test-subj":"user-profile-username-bolded"},a):s.a.createElement(s.a.Fragment,null,a))};yt.displayName="Username";const jt=s.a.memo(yt);var Ct=a(232);const xt=({userInfo:e})=>s.a.createElement(ht.a,{userInfo:e},s.a.createElement(Ct.a,{size:"m",userInfo:e}));xt.displayName="HoverableAvatar";const Ot=s.a.memo(xt);var At=a(136),It=a(187),wt=a(148);const St=({createdAt:e,updatedAt:t})=>s.a.createElement(s.a.Fragment,null,s.a.createElement(It.a,{date:new Date(e)},s.a.createElement(At.FormattedRelative,{"data-test-subj":"user-action-title-creation-relative-time",value:e})),t&&s.a.createElement(o.EuiTextColor,{color:"subdued"}," (",wt.t," ",s.a.createElement(It.a,{date:new Date(t)},s.a.createElement(At.FormattedRelative,{"data-test-subj":"user-action-title-edited-relative-time",value:t})),")"));St.displayName="UserActionTimestamp";const kt=Object(n.memo)(St);var Tt=a(270),Ft=a.n(Tt);const Dt=({id:e})=>{const{getCaseViewUrl:t}=Object(b.j)(),{detailName:a}=Object(b.k)(),i=Object(n.useCallback)((()=>{Ft()(t({detailName:a,commentId:e},!0))}),[a,e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,wt.m)},s.a.createElement(o.EuiButtonIcon,{"aria-label":wt.m,"data-test-subj":`copy-link-${e}`,onClick:i,iconType:"link",id:`${e}-permLink`}))};Dt.displayName="UserActionCopyLink";const Pt=Object(n.memo)(Dt),Lt=({id:e,outlineComment:t})=>{const a=Object(n.useCallback)((()=>{t(e)}),[e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,wt.A)},s.a.createElement(o.EuiButtonIcon,{"aria-label":wt.A,"data-test-subj":`move-to-link-${e}`,onClick:a,iconType:"arrowUp"}))};Lt.displayName="UserActionMoveToReference";const Mt=Object(n.memo)(Lt);var Nt=a(207);const Rt=({userInfo:e,boldName:t})=>s.a.createElement(ht.a,{userInfo:e},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Nt.a,{userInfo:e})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(jt,{userInfo:e,boldName:t}))))));Rt.displayName="HoverableUserWithAvatar";const $t=s.a.memo(Rt);var zt=a(90);const Bt=({user:e,userProfiles:t,boldName:a=!0})=>{var n;const{userInfo:i}=null!==(n=Object(zt.b)(e,t))&&void 0!==n?n:{userInfo:void 0};return s.a.createElement($t,{userInfo:i,boldName:a})};Bt.displayName="HoverableUserResolver";const Ut=s.a.memo(Bt),Vt=(e,t)=>e===L.p.update&&null!=t;s.a.memo((({userAction:e,handleOutlineComment:t})=>s.a.createElement(o.EuiFlexGroup,{responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Pt,{id:e.id})),Vt(e.action,e.commentId)&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Mt,{id:e.commentId,outlineComment:t}))))).displayName="CommentListActions";const Gt=({userProfiles:e,userAction:t,label:a,icon:n,handleOutlineComment:i})=>({build:()=>[{username:s.a.createElement(Ut,{user:t.createdBy,userProfiles:e}),event:a,"data-test-subj":`${t.type}-${t.action}-action-${t.id}`,timestamp:s.a.createElement(kt,{createdAt:t.createdAt}),timelineAvatar:n,actions:s.a.createElement(o.EuiFlexGroup,{responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Pt,{id:t.id})),Vt(t.action,t.commentId)&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Mt,{id:t.commentId,outlineComment:i})))}]});var _t=a(239);const Ht=({children:e,index:t,listSize:a})=>qt(t,a)?s.a.createElement(s.a.Fragment,null,wt.e," ",e):Qt(t,a)?s.a.createElement(s.a.Fragment,null,e,","):e;Ht.displayName="FormatListItem";const Qt=(e,t)=>t>2&&e!==t-1,qt=(e,t)=>t>1&&e===t-1,Wt=({index:e,numOfAssigness:t})=>s.a.createElement(Ht,{index:e,listSize:t},s.a.createElement(s.a.Fragment,null,wt.Q));Wt.displayName="Themselves";const Kt=({assignee:e,index:t,numOfAssigness:a})=>{var n;return s.a.createElement(Ht,{index:t,listSize:a},s.a.createElement(ht.a,{userInfo:e.profile},s.a.createElement("strong",null,Object(vt.a)(null===(n=e.profile)||void 0===n?void 0:n.user))))};Kt.displayName="Assignee";const Yt=({assignees:e,createdByUser:t})=>s.a.createElement(s.a.Fragment,null,e.length>0&&s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",wrap:!0},e.map(((a,n)=>{const i=Object(_t.a)(a);return s.a.createElement(o.EuiFlexItem,{"data-test-subj":`ua-assignee-${i}`,grow:!1,key:a.uid},s.a.createElement(o.EuiText,{size:"s",className:"eui-textBreakWord"},Xt(a,t)?s.a.createElement(Wt,{index:n,numOfAssigness:e.length}):s.a.createElement(Kt,{assignee:a,index:n,numOfAssigness:e.length})))}))));Yt.displayName="Assignees";const Jt=Object(n.memo)(Yt),Xt=(e,t)=>{var a;return e.uid===(null==t?void 0:t.profileUid)||(null==e||null===(a=e.profile)||void 0===a?void 0:a.user.username)===t.username},Zt=O.i18n.translate("xpack.cases.userActions.attachmentNotRegisteredErrorMsg",{defaultMessage:"Attachment type is not registered"}),ea=O.i18n.translate("xpack.cases.userActions.defaultEventAttachmentTitle",{defaultMessage:"added an attachment of type"}),ta=O.i18n.translate("xpack.cases.userActions.attachment",{defaultMessage:"Attachment"}),aa=O.i18n.translate("xpack.cases.userActions.comment.unsavedDraftComment",{defaultMessage:"You have unsaved edits for this comment"}),na=e=>O.i18n.translate("xpack.cases.userActions.attachments.alerts.successToasterTitle",{defaultMessage:"Deleted {totalAlerts, plural, =1 {one} other {{totalAlerts}}} {totalAlerts, plural, =1 {alert} other {alerts}}",values:{totalAlerts:e}}),sa=O.i18n.translate("xpack.cases.userActions.attachments.comment.successToasterTitle",{defaultMessage:"Deleted comment"}),ia=O.i18n.translate("xpack.cases.userActions.attachments.registeredAttachment.successToasterTitle",{defaultMessage:"Deleted attachment"});var ra=a(138),oa=a.n(ra);const{emptyField:la,maxLengthField:ca}=rt.fieldValidators,ua={content:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:la(z.I)},{validator:ca({length:Y.nb,message:z.P("comment",Y.nb)})}]}},da=Object(n.forwardRef)((({id:e,content:t,caseId:a,isEditable:i,onChangeEditable:r,onSaveContent:o},l)=>{const c=Object(n.useRef)();return i?s.a.createElement(st.a,{id:e,content:t,caseId:a,editorRef:c,onChangeEditable:r,onSaveContent:o,ref:l,fieldName:"content",formSchema:ua}):s.a.createElement(st.d,{content:t})}));da.displayName="UserActionMarkdownComponent";const ma=s.a.memo(da),pa=({id:e,withCopyLinkAction:t=!0,children:a})=>s.a.createElement(o.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"m"},t?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Pt,{id:e})):null,a);pa.displayName="UserActionContentToolbar";const ga=Object(n.memo)(pa),ba=({user:e,userProfiles:t,boldName:a=!0})=>{var n;const{userInfo:i}=null!==(n=Object(zt.b)(e,t))&&void 0!==n?n:{userInfo:void 0};return s.a.createElement(ht.a,{userInfo:i},s.a.createElement(jt,{userInfo:i,boldName:a}))};ba.displayName="HoverableUsernameResolver";const fa=s.a.memo(ba),Ea=({user:e,userProfiles:t})=>{var a;const{userInfo:n}=null!==(a=Object(zt.b)(e,t))&&void 0!==a?a:{userInfo:void 0};return s.a.createElement(Ot,{userInfo:n})};Ea.displayName="HoverableUserResolver";const ha=s.a.memo(Ea);var va=a(107),ya=a(272),ja=a.n(ya),Ca=(a(273),a(323)),xa=a.n(Ca);const Oa="lens",Aa=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods;t.lens=function(e,t,a){if(!1===t.startsWith(`!{${Oa}`))return!0;const n=t[6];if("{"!==n&&"}"!==n)return!1;if(a)return!0;let s=`!{${Oa}`,i={};if("{"===n){let a="",n=0;for(let e=6;e<t.length;e++){const s=t[e];if("{"===s)n++,a+=s;else if("}"===s){if(n--,-1===n)break;a+=s}else a+=s}s+=a;try{i=JSON.parse(a)}catch(t){const a=e.now();this.file.fail(`Unable to parse lens JSON configuration: ${t}`,{line:a.line,column:a.column+6})}}return s+="}",e(s)({type:Oa,...i})},a.splice(a.indexOf("text"),0,Oa)},Ia=O.i18n.translate("xpack.cases.markdownEditor.plugins.timeline.noParenthesesErrorMsg",{defaultMessage:"Expected left parentheses"}),wa="timeline",Sa="[",ka=function(){const e=this.Parser,t=e.prototype.blockTokenizers,a=e.prototype.blockMethods,n=function(e,t,a){if(!1===t.startsWith(Sa)||!0===t.startsWith(Sa)&&!t.includes("timelines?timeline=(id"))return!1;let n=0;if(t[n]!==Sa)return!1;if(a)return!0;function s(e,a){if(t[n]!==e)throw new Error(Ia);n++;let s="",i=0;for(;n<t.length;n++){const r=t[n];if(r===a&&0===i)return n++,s;r===a?i--:r===e&&i++,s+=r}return""}const i=`[${s(Sa,"]")}](${s("(",")")})`;return e(i)({type:wa,match:i})};n.locator=(e,t)=>e.indexOf(Sa,t),t.timeline=n,a.splice(a.indexOf("url"),0,wa)};var Ta=a(55);var Fa=a(174);const Da=({isLoading:e,propertyActions:t,customDataTestSubj:a="user-action"})=>0===t.length?null:s.a.createElement(o.EuiFlexItem,{grow:!1},e?s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"user-action-title-loading"}):s.a.createElement(S,{propertyActions:t,customDataTestSubj:a}));Da.displayName="UserActionPropertyActions";const Pa=s.a.memo(Da);var La=a(173),Ma=a(172);const Na=({isLoading:e,commentContent:t,onEdit:a,onDelete:i,onQuote:r})=>{const{permissions:o}=Object(E.a)(),{showDeletionModal:l,onModalOpen:c,onConfirm:d,onCancel:m}=Object(Ma.a)({onDelete:i}),{canUseEditor:p,actionConfig:g}=(({comment:e})=>{var t,a;const s=(e=>xa()().use([[ja.a,{}],Aa,ka]).parse(e))(e),i=(e=>null!=e&&e.length?Object(se.filter)(e,{type:Oa}):[])(null!==(t=null==s?void 0:s.children)&&void 0!==t?t:[]),{lens:{navigateToPrefilledEditor:r,canUseEditor:o}}=Object(u.g)().services,l=o(),c=Object(n.useCallback)((()=>{r({id:"",timeRange:i[0].timeRange,attributes:i[0].attributes},{openInNewTab:!0})}),[i,r]);if(!i.length||null==(null==i||null===(a=i[0])||void 0===a?void 0:a.attributes))return{canUseEditor:l,actionConfig:null};const d=i[0].attributes;return Object(va.isOfAggregateQueryType)(d.state.query)?{canUseEditor:l,actionConfig:null}:{canUseEditor:l,actionConfig:{type:x.a.BUTTON,iconType:"lensApp",label:Ta.b,onClick:c}}})({comment:null!=t?t:""}),b=Object(n.useMemo)((()=>{const e=o.update,t=o.delete,n=o.create,s=o.update&&p&&g;return[...e?[{type:x.a.BUTTON,iconType:"pencil",label:Fa.f,onClick:a}]:[],...n?[{type:x.a.BUTTON,iconType:"quote",label:Fa.g,onClick:r}]:[],...t?[{type:x.a.BUTTON,iconType:"trash",color:"danger",label:Fa.d,onClick:c}]:[],...s?[g]:[]]}),[o.update,o.delete,o.create,p,g,a,c,r]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Pa,{isLoading:e,propertyActions:b}),l?s.a.createElement(La.a,{title:Fa.e,confirmButtonText:Fa.b,onCancel:m,onConfirm:d}):null)};Na.displayName="UserCommentPropertyActions";const Ra=s.a.memo(Na),$a=r()(o.EuiText).withConfig({displayName:"MyEuiCommentFooter",componentId:"sc-1knx3vw-0"})(["",""],(({theme:e})=>`\n    border-top: ${e.eui.euiBorderThin};\n    padding: ${e.eui.euiSizeS};\n  `)),za=(e="",t,a,n)=>{const s=Object(it.a)(e,t,a),i=sessionStorage.getItem(s);return Boolean(i&&i!==n)};var Ba=a(60),Ua=a(158);const Va=Object(n.memo)((({onRuleDetailsClick:e,getRuleDetailsHref:t,ruleId:a,ruleName:i,loadingAlertData:r,actionId:l})=>{const c=Object(n.useCallback)((t=>{t.preventDefault(),e&&e(a,t)}),[a,e]),u=null==t?void 0:t(a),d=null!=i?i:wt.U;return r?s.a.createElement(o.EuiLoadingSpinner,{size:"m","data-test-subj":`alert-loading-spinner-${l}`}):Object(se.isEmpty)(a)||null==u?s.a.createElement(s.a.Fragment,null,d):s.a.createElement(Ua.c,{onClick:c,href:u,"data-test-subj":`alert-rule-link-${l}`},d)}));Va.displayName="RuleLink";const Ga=({actionId:e,getRuleDetailsHref:t,loadingAlertData:a=!1,onRuleDetailsClick:n,ruleId:i,ruleName:r})=>s.a.createElement("span",{"data-test-subj":`single-alert-user-action-${e}`},`${wt.c} `,s.a.createElement(Va,{actionId:e,ruleId:i,ruleName:r,getRuleDetailsHref:t,onRuleDetailsClick:n,loadingAlertData:a}));Ga.displayName="SingleAlertCommentEvent";const _a=Object(n.memo)(Ga),Ha=({actionId:e,getRuleDetailsHref:t,loadingAlertData:a=!1,onRuleDetailsClick:n,ruleId:i,ruleName:r,totalAlerts:o})=>s.a.createElement("span",{"data-test-subj":`multiple-alerts-user-action-${e}`},`${wt.B(o)}`," ",s.a.createElement(Va,{actionId:e,ruleId:i,ruleName:r,getRuleDetailsHref:t,onRuleDetailsClick:n,loadingAlertData:a}));Ha.displayName="MultipleAlertsCommentEvent";const Qa=Object(n.memo)(Ha),qa=({id:e,alertId:t,index:a,onShowAlertDetails:i})=>{const r=Object(n.useCallback)((()=>i(t,a)),[t,a,i]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,wt.M)},s.a.createElement(o.EuiButtonIcon,{"aria-label":wt.M,"data-test-subj":`comment-action-show-alert-${e}`,onClick:r,iconType:"arrowRight",id:`${e}-show-alert`}))};qa.displayName="UserActionShowAlert";const Wa=Object(n.memo)(qa),Ka=()=>{const{navigateToCaseView:e}=Object(b.j)(),{detailName:t}=Object(b.k)(),a=Object(n.useCallback)((()=>{e({detailName:t,tabId:h.a.ALERTS})}),[e,t]);return s.a.createElement(o.EuiToolTip,{position:"top",content:s.a.createElement("p",null,wt.L)},s.a.createElement(o.EuiButtonIcon,{"aria-label":wt.L,"data-test-subj":`comment-action-show-alerts-${t}`,onClick:a,iconType:"inspect",id:`${t}-show-alerts`}))};Ka.displayName="ShowAlertTableLink";const Ya=({isLoading:e,totalAlerts:t,onDelete:a})=>{const{permissions:i}=Object(E.a)(),{showDeletionModal:r,onModalOpen:o,onConfirm:l,onCancel:c}=Object(Ma.a)({onDelete:a}),u=Object(n.useMemo)((()=>[...i.delete?[{type:x.a.BUTTON,color:"danger",disabled:!1,iconType:"minusInCircle",label:Fa.i(t),onClick:o}]:[]]),[i.delete,t,o]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Pa,{isLoading:e,propertyActions:u}),r?s.a.createElement(La.a,{title:Fa.i(t),confirmButtonText:Fa.h,onCancel:c,onConfirm:l}):null)};Ya.displayName="AlertPropertyActions";const Ja=s.a.memo(Ya),Xa=e=>({build:()=>{const{comment:t}=e;return 1===(Array.isArray(t.alertId)?t.alertId:[t.alertId]).length?(({userAction:e,userProfiles:t,comment:a,alertData:n,loadingAlertData:i,loadingCommentIds:r,getRuleDetailsHref:l,onRuleDetailsClick:c,onShowAlertDetails:u,handleDeleteComment:d})=>{const m=nn(a.alertId),p=nn(a.index);if(!m||!p)return[];const g=n[m],b=en(a,g),f=tn(a,g);return[{username:s.a.createElement(Ut,{user:e.createdBy,userProfiles:t}),eventColor:"subdued",event:s.a.createElement(_a,{actionId:e.id,getRuleDetailsHref:l,loadingAlertData:i,onRuleDetailsClick:c,ruleId:b,ruleName:f}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.id}`,timestamp:s.a.createElement(kt,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:s.a.createElement(ga,{id:a.id},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Wa,{id:e.id,alertId:m,index:p,onShowAlertDetails:u})),s.a.createElement(Ja,{onDelete:()=>d(a.id,na(1)),isLoading:r.includes(a.id),totalAlerts:1}))}]})(e):(({userAction:e,userProfiles:t,comment:a,alertData:n,loadingAlertData:i,loadingCommentIds:r,getRuleDetailsHref:l,onRuleDetailsClick:c,handleDeleteComment:u})=>{if(!Array.isArray(a.alertId))return[];const d=a.alertId.length,{ruleId:m,ruleName:p}=function(e,t){const a=nn(e.alertId);if(!a)return{ruleId:null,ruleName:null};const n=t[a];return{ruleId:en(e,n),ruleName:tn(e,n)}}(a,n);return[{username:s.a.createElement(Ut,{user:e.createdBy,userProfiles:t}),eventColor:"subdued",event:s.a.createElement(Qa,{actionId:e.id,loadingAlertData:i,totalAlerts:d,ruleId:m,ruleName:p,getRuleDetailsHref:l,onRuleDetailsClick:c}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.id}`,timestamp:s.a.createElement(kt,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:s.a.createElement(ga,{id:a.id},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Ka,null)),s.a.createElement(Ja,{onDelete:()=>u(a.id,na(d)),isLoading:r.includes(a.id),totalAlerts:d}))}]})(e)}}),Za=e=>Array.isArray(e)?e[0]:null!=e?e:null,en=(e,t)=>{var a;return an({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.id,alertData:t,signalRuleFieldPath:"signal.rule.id",kibanaAlertFieldPath:Ba.b})},tn=(e,t)=>{var a;return an({commentRuleField:null==e||null===(a=e.rule)||void 0===a?void 0:a.name,alertData:t,signalRuleFieldPath:"signal.rule.name",kibanaAlertFieldPath:Ba.a})},an=({commentRuleField:e,alertData:t,signalRuleFieldPath:a,kibanaAlertFieldPath:n})=>{var s,i;return null!==(s=null!==(i=nn(e))&&void 0!==i?i:nn(Object(se.get)(t,a)))&&void 0!==s?s:nn(Object(se.get)(t,n))};function nn(e){const t=Za(e);return null==t||Object(se.isEmpty)(t)?null:t}const sn=({type:e,endpoints:t,href:a,onClick:i})=>{const r=a?a(t[0].endpointId):"",o=Object(n.useCallback)((e=>{e.preventDefault(),i&&i(t[0].endpointId,e)}),[i,t]);return s.a.createElement(s.a.Fragment,null,"isolate"===e?`${wt.y} `:`${wt.F} `,s.a.createElement(Ua.c,{onClick:o,href:r,"data-test-subj":`actions-link-${t[0].endpointId}`},t[0].hostname),t.length>1&&wt.C(t.length-1))};sn.displayName="HostIsolationCommentEvent";const rn=Object(n.memo)(sn),on=({isLoading:e,registeredAttachmentActions:t,onDelete:a,hideDefaultActions:i})=>{const{permissions:r}=Object(E.a)(),{showDeletionModal:o,onModalOpen:l,onConfirm:c,onCancel:u}=Object(Ma.a)({onDelete:a}),d=Object(n.useMemo)((()=>[...r.delete&&!i?[{type:x.a.BUTTON,disabled:!1,iconType:"trash",color:"danger",label:Fa.c,onClick:l}]:[],...t]),[r.delete,i,l,t]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Pa,{isLoading:e,propertyActions:d}),o?s.a.createElement(La.a,{title:Fa.c,confirmButtonText:Fa.b,onCancel:u,onConfirm:c}):null)};on.displayName="RegisteredAttachmentsPropertyActions";const ln=s.a.memo(on),cn=Object(se.memoize)((e=>{let t;return(e,a)=>{if(e.children)return t=t?s.a.cloneElement(t,a):s.a.createElement(e.children,a),s.a.createElement(n.Suspense,{fallback:s.a.createElement(o.EuiLoadingSpinner,null)},t)}})),un=({userAction:e,userProfiles:t,comment:a,registry:n,caseData:i,isLoading:r,getId:l,getAttachmentViewProps:c,handleDeleteComment:u})=>({build:()=>{var d,m;const p=l();if(!n.has(p))return[{username:s.a.createElement(Ut,{user:a.createdBy,userProfiles:t}),event:s.a.createElement(s.a.Fragment,null,`${ea} `,s.a.createElement(o.EuiCode,null,p)),className:`comment-${a.type}-not-found`,"data-test-subj":`comment-${a.type}-not-found`,timestamp:s.a.createElement(kt,{createdAt:e.createdAt}),children:s.a.createElement(o.EuiCallOut,{title:Zt,color:"danger",iconType:"warning"})}];const g=n.get(p),b={...c(),attachmentId:a.id,caseData:{id:i.id,title:i.title}},f=g.getAttachmentViewObject(b),E=cn(e.id),h=null!==(d=null===(m=f.getActions)||void 0===m?void 0:m.call(f,b))&&void 0!==d?d:[],[v,y]=Object(se.partition)(h,"isPrimary"),j=v.slice(0,2),C=v.slice(2,v.length);return[{username:s.a.createElement(Ut,{user:a.createdBy,userProfiles:t}),className:`comment-${a.type}-attachment-${p}`,event:f.event,"data-test-subj":`comment-${a.type}-${p}`,timestamp:s.a.createElement(kt,{createdAt:e.createdAt}),timelineAvatar:f.timelineAvatar,actions:s.a.createElement(ga,{id:a.id},j.map((e=>{var t;return e.type===x.a.BUTTON&&s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":`attachment-${p}-${a.id}`,key:`attachment-${p}-${a.id}`},s.a.createElement(o.EuiButtonIcon,{"aria-label":e.label,iconType:e.iconType,color:null!==(t=e.color)&&void 0!==t?t:"text",onClick:e.onClick,"data-test-subj":`attachment-${p}-${a.id}-${e.iconType}`,key:`attachment-${p}-${a.id}-${e.iconType}`}))||e.type===x.a.CUSTOM&&e.render()})),s.a.createElement(ln,{isLoading:r,onDelete:()=>u(a.id,ia),registeredAttachmentActions:[...C,...y],hideDefaultActions:!!f.hideDefaultActions})),children:E(f,b)}]}}),dn=({caseData:e,registry:t,getId:a,getAttachmentProps:n})=>{var s,i;const r=`${wt.G} ${ta.toLowerCase()}`,o=a();if(!t.has(o))return r;const l={...n(),caseData:{id:e.id,title:e.title}},c=t.get(o),u=null!==(s=null===(i=c.getAttachmentRemovalObject)||void 0===i?void 0:i.call(c,l).event)&&void 0!==s?s:null;return null!=u?u:r},mn=(e,t)=>{if(!t)return;const a=new Date(e),n=new Date(t);return isNaN(a.getTime())||isNaN(n.getTime())?void 0:{userActionDate:a,connectorDate:n}};function pn(e){return e.payload.settings.syncAlerts?`${wt.w} ${wt.O}`:`${wt.s} ${wt.O}`}var gn=a(152),bn=a(163);const fn={create_case:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>`${wt.n.toLowerCase()} "${e.payload.title}"`)(e);return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),connector:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{const t=e.payload.connector;return null==t?"":t.id===Y.Fb?wt.H:wt.K(t.name)})(e);return Gt({userProfiles:t,userAction:e,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),tags:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{var t;const a=null!==(t=e.payload.tags)&&void 0!==t?t:[];return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"ua-tags-label",grow:!1},e.action===L.p.add&&wt.a,e.action===L.p.delete&&wt.G," ",wt.P.toLowerCase()),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(We,{tags:a,gutterSize:"xs",color:"hollow"})))})(e);return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"tag"}).build()}}),title:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>`${wt.i.toLowerCase()} ${wt.h.toLowerCase()} ${wt.R} "${e.payload.title}"`)(e);return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),status:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{var t;const a=null!==(t=e.payload.status)&&void 0!==t?t:"";return(e=>Object.prototype.hasOwnProperty.call(M.b,e))(a)?s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-user-action-status-title`,responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},wt.z),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(P.a,{status:a}))):s.a.createElement(s.a.Fragment,null)})(e);return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"folderClosed"}).build()}}),severity:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{const t=e.payload.severity,a=bn.a[t];return void 0===a?null:s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-user-action-severity-title`,responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},gn.s),s.a.createElement(o.EuiFlexItem,{"data-test-subj":`${e.id}-user-action-severity-title-${t}`},s.a.createElement(o.EuiHealth,{color:a.color},a.label)))})(e);return Gt({userProfiles:t,userAction:e,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),pushed:({userAction:e,userProfiles:t,caseConnectors:a,handleOutlineComment:n})=>({build:()=>{var i;const r=e,l=r.payload.externalService.connectorId,c=a[l];if(!c)return[];const u=((e,t)=>{const a=mn(e,t);return!a||a.userActionDate.getTime()<=a.connectorDate.getTime()})(e.createdAt,null===(i=c.push.details)||void 0===i?void 0:i.oldestUserActionPushDate),d=(({userAction:e,connectorInfo:t})=>{var a;const n=[],s=((e,t)=>{const a=mn(e,t);return!!a&&a.userActionDate.getTime()>=a.connectorDate.getTime()})(e.createdAt,null===(a=t.push.details)||void 0===a?void 0:a.latestUserActionPushDate),i=e.action===L.p.push_to_service&&s,r=i&&t.push.needsToBePushed;return i&&n.push({username:"",event:wt.d(`${t.name}`),timelineAvatar:"sortUp","data-test-subj":"top-footer"}),r&&n.push({username:"",event:wt.J(`${t.name}`),timelineAvatar:"sortDown","data-test-subj":"bottom-footer"}),n})({userAction:r,connectorInfo:c}),m=((e,t)=>{const a=e.payload.externalService;return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs","data-test-subj":"pushed-service-label-title",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"pushed-label"},`${t?wt.D:wt.W} ${null==a?void 0:a.connectorName}`),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLink,{"data-test-subj":"pushed-value",href:null==a?void 0:a.externalUrl,target:"_blank"},null==a?void 0:a.externalTitle)))})(r,u);return[...Gt({userProfiles:t,userAction:e,handleOutlineComment:n,label:m,icon:"dot"}).build(),...d]}}),comment:({appId:e,caseData:t,casesConfiguration:a,userProfiles:n,externalReferenceAttachmentTypeRegistry:i,persistableStateAttachmentTypeRegistry:r,userAction:l,commentRefs:c,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:m,loadingAlertData:p,alertData:g,getRuleDetailsHref:b,onRuleDetailsClick:f,onShowAlertDetails:E,handleManageMarkdownEditId:h,handleSaveComment:v,handleDeleteComment:y,handleManageQuote:j,handleOutlineComment:C,actionsNavigation:x,caseConnectors:A})=>({build:()=>{const I=l;if(I.action===L.p.delete)return(({userAction:e,userProfiles:t,caseData:a,externalReferenceAttachmentTypeRegistry:n,persistableStateAttachmentTypeRegistry:s,handleOutlineComment:i})=>{const r=(({userAction:e,caseData:t,externalReferenceAttachmentTypeRegistry:a,persistableStateAttachmentTypeRegistry:n})=>{const{comment:s}=e.payload;if(s.type===L.a.alert){const e=(i=Array.isArray(s.alertId)?s.alertId.length:1,O.i18n.translate("xpack.cases.caseView.alerts.multipleAlerts",{values:{totalAlerts:i},defaultMessage:"{totalAlerts, plural, =1 {one} other {{totalAlerts}}} {totalAlerts, plural, =1 {alert} other {alerts}}"}));return`${wt.G} ${e}`}var i;return s.type===L.a.externalReference?dn({caseData:t,registry:a,getId:()=>s.externalReferenceAttachmentTypeId,getAttachmentProps:()=>({externalReferenceId:s.externalReferenceId,externalReferenceMetadata:s.externalReferenceMetadata})}):s.type===L.a.persistableState?dn({caseData:t,registry:n,getId:()=>s.persistableStateAttachmentTypeId,getAttachmentProps:()=>({persistableStateAttachmentTypeId:s.persistableStateAttachmentTypeId,persistableStateAttachmentState:s.persistableStateAttachmentState})}):`${wt.G} ${wt.l.toLowerCase()}`})({userAction:e,caseData:a,externalReferenceAttachmentTypeRegistry:n,persistableStateAttachmentTypeRegistry:s});return Gt({userAction:e,userProfiles:t,handleOutlineComment:i,label:r,icon:"cross"}).build()})({userAction:I,caseData:t,handleOutlineComment:C,userProfiles:n,externalReferenceAttachmentTypeRegistry:i,persistableStateAttachmentTypeRegistry:r});const w=t.comments.find((e=>e.id===I.commentId));if(null==w)return[];if(I.action===L.p.create)return(({appId:e,userAction:t,userProfiles:a,caseData:n,externalReferenceAttachmentTypeRegistry:i,persistableStateAttachmentTypeRegistry:r,comment:l,commentRefs:c,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:m,handleManageMarkdownEditId:p,handleSaveComment:g,handleManageQuote:b,handleDeleteComment:f,getRuleDetailsHref:E,loadingAlertData:h,onRuleDetailsClick:v,alertData:y,onShowAlertDetails:j,actionsNavigation:C})=>{switch(l.type){case L.a.user:const x=(({appId:e,comment:t,userProfiles:a,outlined:n,isEdit:i,isLoading:r,commentRefs:l,caseId:c,handleManageMarkdownEditId:u,handleSaveComment:d,handleManageQuote:m,handleDeleteComment:p})=>({build:()=>[{username:s.a.createElement(fa,{user:t.createdBy,userProfiles:a}),"data-test-subj":`comment-create-action-${t.id}`,timestamp:s.a.createElement(kt,{createdAt:t.createdAt,updatedAt:t.updatedAt}),className:oa()("userAction__comment",{outlined:n,isEdit:i,draftFooter:!i&&!r&&za(e,c,t.id,t.comment)}),children:s.a.createElement(s.a.Fragment,null,s.a.createElement(ma,{key:i?t.id:void 0,ref:e=>l.current[t.id]=e,id:t.id,content:t.comment,isEditable:i,caseId:c,onChangeEditable:u,onSaveContent:d.bind(null,{id:t.id,version:t.version})}),i||r||!za(e,c,t.id,t.comment)?"":s.a.createElement($a,null,s.a.createElement(o.EuiText,{color:"subdued",size:"xs","data-test-subj":"user-action-comment-unsaved-draft"},aa))),timelineAvatar:s.a.createElement(ha,{user:t.createdBy,userProfiles:a}),actions:s.a.createElement(ga,{id:t.id},s.a.createElement(Ra,{isLoading:r,commentContent:t.comment,onEdit:()=>u(t.id),onDelete:()=>p(t.id,sa),onQuote:()=>m(t.comment)}))}]}))({appId:e,userProfiles:a,comment:l,outlined:l.id===d,isEdit:u.includes(l.id),commentRefs:c,isLoading:m.includes(l.id),caseId:n.id,handleManageMarkdownEditId:p,handleSaveComment:g,handleManageQuote:b,handleDeleteComment:f});return x.build();case L.a.alert:return Xa({userProfiles:a,alertData:y,comment:l,userAction:t,getRuleDetailsHref:E,loadingAlertData:h,onRuleDetailsClick:v,onShowAlertDetails:j,handleDeleteComment:f,loadingCommentIds:m}).build();case L.a.actions:const O=(({userAction:e,userProfiles:t,comment:a,actionsNavigation:n})=>({build:()=>{const i="isolate"===a.actions.type?"lock":"lockOpen";return[{username:s.a.createElement(Ut,{user:a.createdBy,userProfiles:t}),className:oa()("comment-action",{"empty-comment":0===a.comment.trim().length}),event:s.a.createElement(rn,{type:a.actions.type,endpoints:a.actions.targets,href:null==n?void 0:n.href,onClick:null==n?void 0:n.onClick}),"data-test-subj":"endpoint-action",timestamp:s.a.createElement(kt,{createdAt:e.createdAt}),timelineAvatar:i,timelineAvatarAriaLabel:i,actions:s.a.createElement(Pt,{id:a.id}),children:a.comment.trim().length>0&&s.a.createElement(st.d,{content:a.comment})}]}}))({userProfiles:a,userAction:t,comment:l,actionsNavigation:C});return O.build();case L.a.externalReference:const A=(({userAction:e,userProfiles:t,comment:a,externalReferenceAttachmentTypeRegistry:n,caseData:s,isLoading:i,handleDeleteComment:r})=>un({userAction:e,userProfiles:t,comment:a,registry:n,caseData:s,handleDeleteComment:r,isLoading:i,getId:()=>a.externalReferenceAttachmentTypeId,getAttachmentViewProps:()=>({externalReferenceId:a.externalReferenceId,externalReferenceMetadata:a.externalReferenceMetadata})}))({userAction:t,userProfiles:a,comment:l,externalReferenceAttachmentTypeRegistry:i,caseData:n,isLoading:m.includes(l.id),handleDeleteComment:f});return A.build();case L.a.persistableState:const I=(({userAction:e,userProfiles:t,comment:a,persistableStateAttachmentTypeRegistry:n,caseData:s,isLoading:i,handleDeleteComment:r})=>un({userAction:e,userProfiles:t,comment:a,registry:n,caseData:s,handleDeleteComment:r,isLoading:i,getId:()=>a.persistableStateAttachmentTypeId,getAttachmentViewProps:()=>({persistableStateAttachmentTypeId:a.persistableStateAttachmentTypeId,persistableStateAttachmentState:a.persistableStateAttachmentState})}))({userAction:t,userProfiles:a,comment:l,persistableStateAttachmentTypeRegistry:r,caseData:n,isLoading:m.includes(l.id),handleDeleteComment:f});return I.build();default:return[]}})({appId:e,caseData:t,casesConfiguration:a,userProfiles:n,userAction:I,externalReferenceAttachmentTypeRegistry:i,persistableStateAttachmentTypeRegistry:r,comment:w,commentRefs:c,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:m,loadingAlertData:p,alertData:g,getRuleDetailsHref:b,onRuleDetailsClick:f,onShowAlertDetails:E,handleManageMarkdownEditId:h,handleSaveComment:v,handleDeleteComment:y,handleManageQuote:j,actionsNavigation:x,caseConnectors:A});const S=`${wt.t} ${wt.l.toLowerCase()}`;return Gt({userAction:l,userProfiles:n,handleOutlineComment:C,label:S,icon:"dot"}).build()}}),description:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=`${wt.t} ${wt.r.toLowerCase()}`;return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),settings:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{var n,s;const i=e;return void 0!==(null==i||null===(n=i.payload)||void 0===n||null===(s=n.settings)||void 0===s?void 0:s.syncAlerts)?Gt({userProfiles:t,userAction:e,handleOutlineComment:a,label:pn(i),icon:"gear"}).build():[]}}),assignees:({userAction:e,handleOutlineComment:t,userProfiles:a})=>({build:()=>{const n=((e,t)=>{const a=e.payload.assignees.map((e=>{const a=null==t?void 0:t.get(e.uid);return{uid:e.uid,profile:a}}));return s.a.createElement(o.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},s.a.createElement(o.EuiFlexItem,{"data-test-subj":"ua-assignees-label",grow:!1},e.action===L.p.add&&wt.f,e.action===L.p.delete&&wt.S),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Jt,{createdByUser:e.createdBy,assignees:a})))})(e,a);return Gt({userAction:e,userProfiles:a,handleOutlineComment:t,label:n,icon:"userAvatar"}).build()}}),category:({userAction:e,userProfiles:t,handleOutlineComment:a})=>({build:()=>{const n=(e=>{var t;const a=null!==(t=e.payload.category)&&void 0!==t?t:"";return s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-category-user-action-title`,responsive:!1},e.action===L.p.update?s.a.createElement(o.EuiFlexItem,{grow:!1},`${wt.b} "${a}"`):s.a.createElement(o.EuiFlexItem,{grow:!1},wt.I))})(e);return Gt({userAction:e,userProfiles:t,handleOutlineComment:a,label:n,icon:"dot"}).build()}}),customFields:({userAction:e,handleOutlineComment:t,userProfiles:a,casesConfiguration:n})=>({build:()=>{const s=e;if(0===s.payload.customFields.length)return[];const i=s.payload.customFields[0],r=n.customFields.find((e=>e.key===i.key)),o=((e,t)=>{var a,n;const s=e.value,i=null!==(a=null!==(n=null==t?void 0:t.label)&&void 0!==n?n:null==t?void 0:t.key)&&void 0!==a?a:wt.T;if(null==s||Array.isArray(s)&&0===s.length)return wt.j(i);const r=Array.isArray(s)?s[0]:s;return`${wt.i.toLowerCase()} ${i} ${wt.R} "${r}"`})(i,r);return Gt({userAction:e,userProfiles:a,handleOutlineComment:t,label:o,icon:"dot"}).build()}})},En=r()(o.EuiCommentList).withConfig({displayName:"MyEuiCommentList",componentId:"sc-2gzq5c-0"})(["",""],(({theme:e})=>`\n    & .userAction__comment.outlined .euiCommentEvent {\n      outline: solid 5px ${e.eui.euiColorVis1_behindText};\n      margin: 0.5em;\n      transition: 0.8s;\n    }\n\n    & .draftFooter {\n      & .euiCommentEvent__body {\n        padding: 0;\n      }\n    }\n\n    & .euiComment.isEdit {\n      & .euiCommentEvent {\n        border: none;\n        box-shadow: none;\n      }\n\n      & .euiCommentEvent__body {\n        padding: 0;\n      }\n\n      & .euiCommentEvent__header {\n        display: none;\n      }\n    }\n\n    & .comment-action.empty-comment [class*="euiCommentEvent-regular"] {\n      box-shadow: none;\n      .euiCommentEvent__header {\n        padding: ${e.eui.euiSizeM} ${e.eui.euiSizeS};\n        border-bottom: 0;\n      }\n    }\n  `)),hn=s.a.memo((({caseUserActions:e,caseConnectors:t,userProfiles:a,currentUserProfile:i,data:r,casesConfiguration:o,getRuleDetailsHref:l,actionsNavigation:c,onRuleDetailsClick:u,onShowAlertDetails:d,loadingAlertData:m,manualAlertsData:p,commentRefs:g,handleManageQuote:f,bottomActions:h=[],isExpandable:v=!1})=>{const{externalReferenceAttachmentTypeRegistry:y,persistableStateAttachmentTypeRegistry:j,appId:C}=Object(E.a)(),{commentId:x}=Object(b.k)(),[O,A]=Object(n.useState)(!0),{loadingCommentIds:I,selectedOutlineCommentId:w,manageMarkdownEditIds:S,handleManageMarkdownEditId:k,handleOutlineComment:T,handleSaveComment:F,handleDeleteComment:D}=Et(),P=Object(n.useMemo)((()=>e?e.reduce(((e,n,s)=>{if(b=n.type,!gt.includes(b))return e;var b;const E=fn[n.type];if(null==E)return e;const h=E({appId:C,caseData:r,casesConfiguration:o,caseConnectors:t,externalReferenceAttachmentTypeRegistry:y,persistableStateAttachmentTypeRegistry:j,userAction:n,userProfiles:a,currentUserProfile:i,comments:null==r?void 0:r.comments,index:s,commentRefs:g,manageMarkdownEditIds:S,selectedOutlineCommentId:w,loadingCommentIds:I,loadingAlertData:m,alertData:p,handleOutlineComment:T,handleManageMarkdownEditId:k,handleDeleteComment:D,handleSaveComment:F,handleManageQuote:f,onShowAlertDetails:d,actionsNavigation:c,getRuleDetailsHref:l,onRuleDetailsClick:u});return[...e,...h.build()]}),[]):[]),[e,C,r,o,t,y,j,a,i,g,S,w,I,m,p,T,k,D,F,f,d,c,l,u]),L=null!=h&&h.length?[...P,...h]:[...P];return Object(n.useEffect)((()=>{null!=x&&O&&(A(!1),T(x))}),[x,O,T]),s.a.createElement(En,{className:v?"commentList--hasShowMore":"",comments:L,"data-test-subj":"user-actions-list"})}));hn.displayName="UserActionsList";const vn=s.a.memo((({onShowMoreClick:e,isLoading:t=!1})=>{const{euiTheme:a}=Object(o.useEuiTheme)();return s.a.createElement(yn,{color:"subdued",$_css:a.size.base,$_css2:a.size.base,$_css3:a.colors.emptyShade,$_css4:a.size.base,$_css5:a.colors.emptyShade},s.a.createElement(o.EuiButton,{fill:!0,color:"text",size:"s",onClick:()=>{e()},"data-test-subj":"cases-show-more-user-actions",isLoading:t},wt.N))}));vn.displayName="ShowMoreButton";var yn=r()(o.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-1yo1ogx-0"})(["display:flex;justify-content:center;position:relative;margin-block:",";z-index:1;border-top:"," solid ",";border-bottom:"," solid ",";border-radius:16px;"],(e=>e.$_css),(e=>e.$_css2),(e=>e.$_css3),(e=>e.$_css4),(e=>e.$_css5));const jn=(e,t)=>{const a=e?{showMoreSectionSize:t.size.xxxl,marginTopShowMoreSectionSize:t.size.xxxl,marginBottomShowMoreSectionSize:t.size.xxxl}:{showMoreSectionSize:t.size.m,marginTopShowMoreSectionSize:t.size.m,marginBottomShowMoreSectionSize:t.size.m},n=`${a.showMoreSectionSize} + ${a.marginTopShowMoreSectionSize} +\n  ${a.marginBottomShowMoreSectionSize}`;return`\n          .commentList--hasShowMore\n            [class*='euiTimelineItem-center']:last-child:not(:only-child)\n            > [class*='euiTimelineItemIcon-']::before {\n            block-size: calc(\n              100% + ${n}\n            );\n          }\n          .commentList--hasShowMore\n            [class*='euiTimelineItem-center']:first-child\n            > [class*='euiTimelineItemIcon-']::before {\n            inset-block-start: 0%;\n            block-size: calc(\n              100% + ${n}\n            );\n          }\n          .commentList--hasShowMore\n              [class*='euiTimelineItem-']\n              > [class*='euiTimelineItemIcon-']::before {\n              block-size: calc(\n                100% + ${n}\n              );\n              }\n        `},Cn=s.a.memo((e=>{const{currentUserProfile:t,data:a,statusActionButton:i,useFetchAlertData:r,userActivityQueryParams:u,userActionsStats:p}=e,{detailName:g}=Object(b.k)(),{lastPage:f}=(({userActivityQueryParams:e,userActionsStats:t})=>({lastPage:Object(n.useMemo)((()=>{if(!t)return 1;const a=e.perPage;let n=1;switch(e.type){case"action":n=Math.ceil(t.totalOtherActions/a);break;case"user":n=Math.ceil(t.totalComments/a);break;case"all":n=Math.ceil(t.total/a);break;default:return Object(o.assertNever)(e.type)}return Math.max(n,1)}),[t,e])}))({userActivityQueryParams:u,userActionsStats:p}),{infiniteCaseUserActions:h,isLoadingInfiniteUserActions:v,hasNextPage:y,fetchNextPage:j,showBottomList:C,isFetchingNextPage:x}=(({userActivityQueryParams:e,caseId:t,lastPage:a})=>{const{data:s,isLoading:i,hasNextPage:r,fetchNextPage:o,isFetchingNextPage:u}=((e,t,a)=>{const{showErrorToast:n}=Object(T.a)(),s=new AbortController;return Object(l.useInfiniteQuery)(m.d.caseUserActions(e,t),(async({pageParam:a=1})=>Object(d.e)(e,{...t,page:a},s.signal)),{enabled:!0,onError:e=>{n(e,{title:c.e})},getNextPageParam:(e,t)=>{const a=Math.ceil(e.total/e.perPage);if(e.page<a-1)return e.page+1}})})(t,e),p=a>1,g=Object(n.useMemo)((()=>{var e;if(null==s||null===(e=s.pages)||void 0===e||!e.length||i)return[];const t=[];return s.pages.forEach((e=>t.push(...e.userActions))),t}),[s,i]);return{lastPage:a,showBottomList:p,isLoadingInfiniteUserActions:i,infiniteCaseUserActions:g,hasNextPage:r,fetchNextPage:o,isFetchingNextPage:u}})({userActivityQueryParams:u,caseId:a.id,lastPage:f}),{euiTheme:O}=Object(o.useEuiTheme)(),{isLoadingLastPageUserActions:A,lastPageUserActions:I}=(({userActivityQueryParams:e,caseId:t,lastPage:a})=>{const{data:s,isLoading:i}=((e,t,a)=>{const{showErrorToast:n}=Object(T.a)();return Object(l.useQuery)(m.d.caseUserActions(e,t),(async({signal:a})=>Object(d.e)(e,t,a)),{enabled:a,onError:e=>{n(e,{title:c.e})}})})(t,{...e,page:a},a>1),r=Object(n.useMemo)((()=>i||!s?[]:s.userActions),[s,i]);return{isLoadingLastPageUserActions:i,lastPageUserActions:r}})({userActivityQueryParams:u,caseId:a.id,lastPage:f}),w=Object(n.useMemo)((()=>(e=>{const t=e.reduce(((e,t)=>t.type===L.a.alert&&Object(se.isEmpty)(t.rule.id)?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)})(a.comments)),[a.comments]),[S,k]=r(w),{permissions:F}=Object(E.a)(),D=F.create&&"action"!==u.type,{commentRefs:P,handleManageMarkdownEditId:M,handleManageQuote:N,handleUpdate:R,loadingCommentIds:$}=Et(),z=Object(n.useMemo)((()=>s.a.createElement(pt,{id:bt,caseId:g,ref:e=>P.current[bt]=e,onCommentPosted:R,onCommentSaving:M.bind(null,bt),showLoading:!1,statusActionButton:i})),[g,R,M,i,P]),B=D?[{username:s.a.createElement(ht.a,{userInfo:t},s.a.createElement(jt,{userInfo:t})),"data-test-subj":"add-comment",timelineAvatar:s.a.createElement(Ot,{userInfo:t}),className:"isEdit",children:z}]:[],U=Object(n.useCallback)((()=>{j&&j()}),[j]);return s.a.createElement(o.EuiSkeletonText,{lines:8,"data-test-subj":"user-actions-loading",isLoading:A||$.includes(bt)||v},s.a.createElement(o.EuiFlexItem,C?{css:at.css`
                ${jn(y,O)}
              `}:{},s.a.createElement(hn,tt()({},e,{caseUserActions:h,loadingAlertData:S,manualAlertsData:k,commentRefs:P,handleManageQuote:N,bottomActions:f<=1?B:[],isExpandable:!0})),y&&s.a.createElement(vn,{onShowMoreClick:U,isLoading:x}),null!=I&&I.length?s.a.createElement(o.EuiFlexItem,y?{}:{css:at.css`
                    margin-top: 24px;
                  `},s.a.createElement(hn,tt()({},e,{caseUserActions:I,loadingAlertData:S,manualAlertsData:k,bottomActions:B,commentRefs:P,handleManageQuote:N}))):null))}));Cn.displayName="UserActions";var xn=a(179);const On=r()(o.EuiFlexGroup).withConfig({displayName:"MyFlexGroup",componentId:"sc-1s8deyv-0"})(["",""],(({theme:e})=>Object(i.css)(["margin-top:",";"],e.eui.euiSizeM))),An=s.a.memo((({theCase:e,userProfiles:t,headline:a,loading:i,users:r,dataTestSubj:l})=>{const{getCaseViewUrl:c}=Object(b.j)(),u=c({detailName:e.id}),d=(({caseTitle:e,caseUrl:t})=>({subject:p.H(e),body:p.G(t)}))({caseTitle:e.title,caseUrl:u}),m=Object(n.useCallback)((e=>{e&&null!=e&&window.open(`mailto:${e}?subject=${d.subject}&body=${d.body}`,"_blank")}),[d.body,d.subject]),g=In(r,null!=t?t:new Map),f=Object(se.sortBy)(g,xn.b);return 0===f.length?null:s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{"data-test-subj":l},s.a.createElement("h4",null,a),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),i&&s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"users-list-loading-spinner"}))),((e,t)=>e.map(((e,a)=>{var n,i,r,l,c,u;return s.a.createElement(On,{key:a,justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement($t,{userInfo:e})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"user-list-email-button",onClick:t.bind(null,null===(n=e.user)||void 0===n?void 0:n.email),iconType:"email","aria-label":p.Z(null!==(i=e.user)&&void 0!==i&&i.full_name?null===(r=e.user)||void 0===r?void 0:r.full_name:null!==(l=null===(c=e.user)||void 0===c?void 0:c.username)&&void 0!==l?l:""),isDisabled:Object(y.isEmpty)(null===(u=e.user)||void 0===u?void 0:u.email)})))})))(f,m)))}));An.displayName="UserList";const In=(e,t)=>{const a=e.reduce(((e,a)=>{const n={email:a.user.email,fullName:a.user.full_name,username:a.user.username,profileUid:a.uid},s=Object(zt.b)(n,t);return null!=s&&e.set(s.key,s.userInfo),e}),new Map);return Array.from(a.values())};var wn=a(17);const Sn=({caseData:e})=>{const{isLoading:t,mutate:a}=(()=>{const e=Object(u.j)(),{showErrorToast:t}=Object(T.a)(),a=Object(G.a)();return Object(l.useMutation)((e=>Object(d.o)({caseId:e.caseData.id,updatedCase:{[e.updateKey]:e.updateValue},version:e.caseData.version})),{mutationKey:m.c.updateCase,onSuccess:(t,n)=>{a();const s=Object(wn.e)(n.caseData,t[0],n.updateKey,n.updateValue);e.addSuccess(s)},onError:e=>{t(e,{title:c.e})}})})(),[s,i]=Object(n.useState)(null);return{onUpdateField:Object(n.useCallback)((({key:t,value:n,onSuccess:s,onError:r})=>{const o=(t,n)=>{i(t),a({updateKey:t,updateValue:n,caseData:e},{onSuccess:()=>{null==s||s(),i(null)},onError:()=>{null==r||r(),i(null)}})};switch(t){case"title":const t=Object(wn.n)(n);t.length>0&&o("title",t);break;case"connector":const a=Object(wn.n)(n);null!=a&&o("connector",a);break;case"description":const s=Object(wn.n)(n);s.length>0&&o("description",s);break;case"tags":o("tags",Object(wn.n)(n));break;case"category":o("category",Object(wn.n)(n));break;case"status":const i=Object(wn.n)(n);e.status!==n&&o("status",i);break;case"settings":const r=Object(wn.n)(n);e.settings!==n&&o("settings",r);break;case"severity":const l=Object(wn.n)(n);e.severity!==n&&o("severity",l);break;case"assignees":const c=Object(wn.n)(n);ke()(e.assignees,n)||o("assignees",c);break;case"customFields":const u=Object(wn.n)(n);ke()(e.customFields,n)||o("customFields",u);break;default:return null}}),[a,e]),isLoading:t,loadingKey:s}};var kn=a(246),Tn=a(188);const Fn=({selectedSeverity:e,onSeverityChange:t,isLoading:a,isDisabled:n})=>s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"sidebar-severity"},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,Tn.e)),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(kn.a,{isLoading:a,selectedSeverity:e,onSeverityChange:t,isDisabled:n}));Fn.displayName="SeveritySidebarSelector";var Dn=a(237);const Pn=({title:e})=>s.a.createElement(o.EuiTitle,{size:"xs"},s.a.createElement("h2",null,e));Pn.displayName="SidebarTitle";const Ln=s.a.memo(Pn);var Mn=a(83);const Nn=({children:e,tooltipContent:t,buttonAriaLabel:a,onRemoveItem:i,dataTestSubjPrefix:r=""})=>{const{permissions:l}=Object(E.a)(),[c,u]=Object(n.useState)(!1),d=()=>u(!0),m=()=>u(!1),p=r.length>0?`${r}-remove-`:"remove-";return s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"spaceBetween",onMouseEnter:d,onMouseLeave:m,"data-test-subj":`${p}group`},s.a.createElement(o.EuiFlexItem,{grow:!1},e),l.update&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiToolTip,{position:"left",content:t,"data-test-subj":`${p}tooltip`},s.a.createElement($n,{onFocus:d,onBlur:m,"data-test-subj":`${p}button`,"aria-label":a,iconType:"cross",color:"danger",iconSize:"m",onClick:i,$_css:c?1:0}))))};Nn.displayName="RemovableItem";const Rn=s.a.memo(Nn);var $n=r()(o.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-1tndvui-0"})((e=>({opacity:e.$_css})));const zn=({assignee:e,onRemoveAssignee:t})=>{var a,i;const r=Object(n.useCallback)((()=>t(e.uid)),[t,e.uid]),o=null!==(a=null===(i=e.profile)||void 0===i?void 0:i.user.username)&&void 0!==a?a:e.uid;return s.a.createElement(Rn,{onRemoveItem:r,tooltipContent:Mn.h,buttonAriaLabel:Mn.j,dataTestSubjPrefix:`user-profile-assigned-user-${o}`},s.a.createElement($t,{userInfo:e.profile}))};zn.displayName="RemovableUser";const Bn=s.a.memo(zn);var Un=a(169),Vn=a(190),Gn=a(191),_n=a(205),Hn=a(206);const Qn=({togglePopover:e,isDisabled:t})=>s.a.createElement(o.EuiToolTip,{position:"left",content:p.C},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"case-view-assignees-edit-button","aria-label":p.D,iconType:"pencil",onClick:e,disabled:t}));Qn.displayName="PopoverButton";const qn=({assignedUsersWithProfiles:e,currentUserProfile:t,isLoading:a,isPopoverOpen:i,onUsersChange:r,togglePopover:o,onClosePopover:l})=>{const{owner:c}=Object(E.a)(),[u,d]=Object(n.useState)(""),{isUserTyping:m,onContentChange:g,onDebounce:b}=Object(Vn.a)(),f=Object(n.useMemo)((()=>Object(xn.a)(t,e.map((e=>({...e.profile}))))),[e,t]),[h,v]=Object(n.useState)(),y=Object(n.useCallback)((e=>{const a=Object(xn.a)(t,e);v(a),r(null!=a?a:[])}),[t,r]),j=Object(n.useCallback)((e=>p.hb(e)),[]),C=Object(n.useCallback)((e=>p.M(e)),[]),{data:x,isLoading:O,isFetching:A}=Object(Gn.a)({name:u,owners:c,onDebounce:b}),I=O||a||A||m,w=a,S=Object(n.useMemo)((()=>Object(xn.a)(t,x)),[t,x]);return s.a.createElement(Un.b,{title:p.C,button:s.a.createElement(Qn,{togglePopover:o,isDisabled:w}),isOpen:i,closePopover:l,panelStyle:{minWidth:520},selectableProps:{onChange:y,onSearchChange:e=>{d(e),g(e)},selectedStatusMessage:j,options:S,selectedOptions:null!=h?h:f,isLoading:I,height:"full",limit:Y.eb,limitReachedMessage:C,searchPlaceholder:p.X,clearButtonLabel:p.T,emptyMessage:s.a.createElement(_n.a,null),noMatchesMessage:I?s.a.createElement(_n.a,null):s.a.createElement(Hn.a,null)}})};qn.displayName="SuggestUsersPopover";const Wn=s.a.memo(qn),Kn=({assignees:e,currentUserProfile:t,permissions:a,assignSelf:n,togglePopOver:i,onAssigneeRemoved:r})=>s.a.createElement(s.a.Fragment,null,0===e.length?s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{size:"s",color:"subdued"},s.a.createElement("p",null,p.N,a.update&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement(o.EuiLink,{"data-test-subj":"case-view-assign-users-link",onClick:i},p.g)),t&&a.update&&s.a.createElement(s.a.Fragment,null,s.a.createElement("span",null,p.ab),s.a.createElement(o.EuiLink,{"data-test-subj":"case-view-assign-yourself-link",onClick:n},p.h)))))):s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map((e=>s.a.createElement(o.EuiFlexItem,{key:e.uid,grow:!1},s.a.createElement(Bn,{assignee:e,onRemoveAssignee:r}))))));Kn.displayName="AssigneesList";const Yn=({caseAssignees:e,userProfiles:t,currentUserProfile:a,onAssigneesChanged:i,isLoading:r})=>{const{assigneesWithProfiles:l,assigneesWithoutProfiles:c,allAssignees:u}=Object(Dn.a)({caseAssignees:e,userProfiles:t}),[d,m]=Object(n.useState)(),[g,b]=Object(n.useState)(!1),[f,h]=Object(n.useState)(!1),v=Object(n.useCallback)((()=>{h((e=>!e)),b(!0)}),[]),y=Object(n.useCallback)((()=>{b(!0),h(!1)}),[]),j=Object(n.useCallback)((e=>{const t=u.filter((t=>t.uid!==e));m(t),b(!0)}),[u]),C=Object(n.useCallback)((e=>{e.length>0?m([...e,...c]):m([])}),[c]),x=Object(n.useCallback)((()=>{if(!a)return;const e=[a,...u];m(e),b(!0)}),[a,u]),{permissions:O}=Object(E.a)();return Object(n.useEffect)((()=>{!1===f&&g&&d&&(b(!1),i(d))}),[f,g,i,d]),s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-assignees"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Ln,{title:p.f})),r&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-assignees-button-loading"}),!r&&O.update&&s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-view-assignees-edit",grow:!1},s.a.createElement(Wn,{assignedUsersWithProfiles:l,currentUserProfile:a,isLoading:r,isPopoverOpen:f,onUsersChange:C,onClosePopover:y,togglePopover:v}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(Kn,{assignees:u,currentUserProfile:a,permissions:O,assignSelf:x,togglePopOver:v,onAssigneeRemoved:j}))};Yn.displayName="AssignUsers";const Jn=s.a.memo(Yn),Xn=O.i18n.translate("xpack.cases.userActionsActivity.filter.all",{defaultMessage:"All"}),Zn=O.i18n.translate("xpack.cases.userActionsActivity.filter.comments",{defaultMessage:"Comments"}),es=O.i18n.translate("xpack.cases.userActionsActivity.filter.history",{defaultMessage:"History"}),ts=O.i18n.translate("xpack.cases.userActionsActivity.sort.oldest",{defaultMessage:"Oldest first"}),as=O.i18n.translate("xpack.cases.userActionsActivity.sort.newest",{defaultMessage:"Newest first"}),ns=O.i18n.translate("xpack.cases.userActionsActivity.sort.sortBy",{defaultMessage:"Sort by"}),ss=r()(o.EuiFilterGroup).withConfig({displayName:"MyEuiFilterGroup",componentId:"sc-lw3lpt-0"})(["> .euiFilterButton-hasNotification{min-width:68px;}"]),is=r()(o.EuiFilterButton).withConfig({displayName:"FilterAllButton",componentId:"sc-lw3lpt-1"})(["&,& .euiFilterButton__textShift{min-width:28px;}"]),rs=s.a.memo((({type:e,onFilterChange:t,userActionsStats:a,isLoading:i=!1})=>{const r=Object(n.useCallback)((a=>{a!==e&&t(a)}),[t,e]);return s.a.createElement(ss,{"data-test-subj":"user-actions-filter-activity-group"},s.a.createElement(is,{withNext:!0,grow:!1,onClick:()=>r("all"),hasActiveFilters:"all"===e,numFilters:a&&a.total>0?a.total:0,isLoading:i,isDisabled:i,"data-test-subj":"user-actions-filter-activity-button-all",iconSize:"s"},Xn),s.a.createElement(o.EuiFilterButton,{withNext:!0,grow:!1,hasActiveFilters:"user"===e,numFilters:a&&a.totalComments>0?a.totalComments:0,isLoading:i,isDisabled:i,onClick:()=>r("user"),"data-test-subj":"user-actions-filter-activity-button-comments"},Zn),s.a.createElement(o.EuiFilterButton,{hasActiveFilters:"action"===e,numFilters:a&&a.totalOtherActions>0?a.totalOtherActions:0,onClick:()=>r("action"),isLoading:i,isDisabled:i,"data-test-subj":"user-actions-filter-activity-button-history"},es))}));rs.displayName="FilterActivity";const os=[{value:"desc",text:as},{value:"asc",text:ts}],ls=s.a.memo((({sortOrder:e,onOrderChange:t,isLoading:a=!1})=>{const i=Object(n.useCallback)((e=>{t(e.target.value)}),[t]);return s.a.createElement(o.EuiSelect,{prepend:ns,"data-test-subj":"user-actions-sort-select",isLoading:a,onChange:i,options:os,value:e})}));ls.displayName="SortActivity";const cs=s.a.memo((({params:e,onUserActionsActivityChanged:t,userActionsStats:a,isLoading:n})=>s.a.createElement(o.EuiFlexGroup,{wrap:!0,responsive:!1,justifyContent:"spaceBetween","data-test-subj":"user-actions-activity-bar"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(rs,{type:e.type,onFilterChange:a=>{t({...e,type:a})},userActionsStats:a,isLoading:n})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ls,{sortOrder:e.sortOrder,onOrderChange:a=>{t({...e,sortOrder:a})},isLoading:n})))));cs.displayName="UserActionsActivityBar";var us=a(86),ds=a(37);const ms=e=>({total:e.total}),ps=r()(o.EuiBetaBadge).withConfig({displayName:"ExperimentalBadge",componentId:"sc-uv133j-0"})(["margin-left:5px;"]),gs=r()(o.EuiNotificationBadge).withConfig({displayName:"StyledNotificationBadge",componentId:"sc-uv133j-1"})(["margin-left:5px;"]),bs=({activeTab:e,fileStatsData:t,isLoading:a})=>s.a.createElement(s.a.Fragment,null,p.K,!a&&t&&s.a.createElement(gs,{"data-test-subj":"case-view-files-stats-badge",color:e===h.a.FILES?"accent":"subdued"},t.total>0?t.total:0)),fs=({activeTab:e,totalAlerts:t,isExperimental:a})=>s.a.createElement(s.a.Fragment,null,p.e,s.a.createElement(gs,{"data-test-subj":"case-view-alerts-stats-badge",color:e===h.a.ALERTS?"accent":"subdued"},t||0),a&&s.a.createElement(ps,{label:J.e,size:"s",iconType:"beaker",tooltipContent:J.d,tooltipPosition:"bottom","data-test-subj":"case-view-alerts-table-experimental-badge"}));bs.displayName="FilesTab",fs.displayName="AlertsTab";const Es=s.a.memo((({caseData:e,activeTab:t})=>{const{features:a}=Object(E.a)(),{navigateToCaseView:i}=Object(b.j)(),{data:r,isLoading:u}=(({caseId:e})=>{const{owner:t}=Object(E.a)(),{showErrorToast:a}=Object(T.a)(),{client:n}=Object(us.b)();return Object(l.useQuery)(m.d.caseFileStats(e),(()=>n.list({kind:Object(ds.a)(t[0]),page:1,perPage:1,meta:{caseIds:[e]}})),{select:ms,keepPreviousData:!0,onError:e=>{a(e,{title:c.e})}})})({caseId:e.id}),d=Object(n.useMemo)((()=>[{id:h.a.ACTIVITY,name:p.a},...a.alerts.enabled?[{id:h.a.ALERTS,name:s.a.createElement(fs,{isExperimental:a.alerts.isExperimental,totalAlerts:e.totalAlerts,activeTab:t})}]:[],{id:h.a.FILES,name:s.a.createElement(bs,{isLoading:u,fileStatsData:r,activeTab:t})}]),[a.alerts.enabled,a.alerts.isExperimental,e.totalAlerts,t,u,r]),g=Object(n.useCallback)((()=>d.map(((a,n)=>s.a.createElement(o.EuiTab,{"data-test-subj":`case-view-tab-title-${a.id}`,key:n,onClick:()=>i({detailName:e.id,tabId:a.id}),isSelected:a.id===t},a.name)))),[t,e.id,i,d]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiTabs,null,g()),s.a.createElement(o.EuiSpacer,{size:"l"}))}));Es.displayName="CaseViewTabs";const{emptyField:hs,maxLengthField:vs}=rt.fieldValidators,ys={content:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:hs(z.H)},{validator:vs({length:Y.ub,message:z.P("description",Y.ub)})}]}},js="description",Cs=r()(o.EuiFlexItem).withConfig({displayName:"DescriptionFooter",componentId:"sc-1fmfa5q-0"})(["",""],(({theme:e})=>`\n    border-top: ${e.eui.euiBorderThin};\n    padding: ${e.eui.euiSizeS};\n  `)),xs=r()(o.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-1fmfa5q-1"})(["padding:0;"]),Os=r()(o.EuiFlexGroup).withConfig({displayName:"Header",componentId:"sc-1fmfa5q-2"})(["",""],(({theme:e})=>`\n    display: flex;\n    padding: ${e.eui.euiSizeS};\n    align-items: center;\n  `)),As=r()(o.EuiFlexItem).withConfig({displayName:"Body",componentId:"sc-1fmfa5q-3"})(["",""],(({theme:e})=>`\n    padding: ${e.eui.euiSize};\n    padding-top: 0;\n\n    > div {\n      padding: 0;\n    }\n  `)),Is=({caseData:e,onUpdateField:t,isLoadingDescription:a})=>{const[i,r]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),u=Object(n.useRef)(null),d=Object(n.useRef)(null),{euiTheme:m}=Object(o.useEuiTheme)(),{appId:p,permissions:g}=Object(E.a)(),{clearDraftComment:b,draftComment:f,hasIncomingLensState:h,openLensModal:v}=Object(ft.a)(),y=Object(n.useCallback)((()=>{b(),c(!1)}),[c,b]),j=Object(n.useCallback)((e=>{t({key:js,value:e.trim()}),c(!1)}),[t,c]),C=((e="",t,a)=>{const n=Object(it.a)(e,t,a);return sessionStorage.getItem(n)})(p,e.id,js);h&&null!==f&&(null==f?void 0:f.commentId)===js&&!l&&c(!0),Object(n.useEffect)((()=>{var e,t;null!=(null==(t=d.current)?void 0:t.setComment)&&null!==(e=d.current.editor)&&void 0!==e&&e.textarea&&f&&f.commentId===js&&(d.current.setComment(f.comment),h?v({editorRef:d.current.editor}):b())}),[b,f,h,v]);const x=C&&C!==e.description&&!a;return l?s.a.createElement(st.a,{id:"description","data-test-subj":"description",caseId:e.id,content:e.description,onChangeEditable:y,onSaveContent:j,editorRef:u,fieldName:"content",formSchema:ys,ref:d}):s.a.createElement(xs,{hasShadow:!1,hasBorder:!0,"data-test-subj":"description"},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:i?"none":"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Os,tt()({justifyContent:"spaceBetween",alignItems:"center"},i?{css:at.css`
                    background: ${m.colors.lightestShade};
                    border-radius: 6px;
                    ${x?"border-bottom-left-radius: 0; border-bottom-right-radius: 0;":""}
                  `}:{css:at.css`
                    border-bottom: ${m.border.thin};
                    border-radius: none;
                  `}),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiText,{"data-test-subj":"description-title",size:"s"},wt.r)),s.a.createElement(o.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},g.update?s.a.createElement(o.EuiButtonIcon,{"aria-label":wt.v,iconType:"pencil",onClick:()=>c(!0),"data-test-subj":"description-edit-icon"}):null),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"aria-label":i?wt.x:wt.k,iconType:i?"unfold":"fold",onClick:()=>r((e=>!e)),"data-test-subj":"description-collapse-icon"}))))),i?null:s.a.createElement(As,null,s.a.createElement(st.d,{content:e.description})),x?s.a.createElement(Cs,null,s.a.createElement(o.EuiText,{color:"subdued",size:"xs","data-test-subj":"description-unsaved-draft"},wt.V)):null))};Is.displayName="Description";var ws=a(211),Ss=a(220);const ks=({category:e})=>s.a.createElement(o.EuiText,{"data-test-subj":`category-viewer-${e}`,key:e,size:"s"},e);ks.displayName="CategoryViewer";const Ts=Object(n.memo)(ks);var Fs=a(263);const Ds=({category:e,availableCategories:t,isLoading:a,onChange:i})=>{const{form:r}=Object(Te.useForm)({defaultValue:{category:e}}),{submit:o,isValid:l}=r;return Object(n.useEffect)((()=>{i&&i({isValid:l,submit:o})}),[l,i,o]),s.a.createElement(Te.Form,{form:r},s.a.createElement(Fs.a,{isLoading:a,availableCategories:t}))};Ds.displayName="CategoryFormWrapper";const Ps=s.a.memo((({isLoading:e,onSubmit:t,category:a})=>{const{permissions:i}=Object(E.a)(),[r,l]=Object(n.useState)(!1),{data:c=[],isLoading:u}=Object(ws.a)(),[d,m]=Object(n.useState)({isValid:void 0,submit:async()=>({isValid:!1,data:{}})}),p=e||u,g=d.isValid;return s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{"data-test-subj":"cases-categories"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement("h4",null,Ss.c)),p&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"category-loading"}),!p&&i.update&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":"category-edit-button","aria-label":Ss.d,iconType:"pencil",onClick:()=>{l(!0)}}))),s.a.createElement(o.EuiHorizontalRule,{margin:"xs"}),s.a.createElement(o.EuiFlexGroup,{gutterSize:"none","data-test-subj":"case-category"},!r&&s.a.createElement(o.EuiFlexItem,null,a?s.a.createElement(Rn,{onRemoveItem:()=>{t(null),l(!1)},tooltipContent:Ss.h,buttonAriaLabel:Ss.i,dataTestSubjPrefix:"category"},s.a.createElement(Ts,{category:a})):s.a.createElement(o.EuiText,{size:"xs","data-test-subj":"no-categories"},Ss.g)),r&&s.a.createElement(o.EuiFlexGroup,{"data-test-subj":"edit-category",direction:"column"},s.a.createElement(Ds,{onChange:m,category:a,availableCategories:c,isLoading:p}),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{color:"success","data-test-subj":"edit-category-submit",fill:!0,iconType:"save",onClick:async()=>{const{isValid:e,data:a}=await d.submit();var n,s;e&&t(null!==(n=null===(s=a.category)||void 0===s?void 0:s.trim())&&void 0!==n?n:null),l(!1)},size:"s",disabled:!g||p},Ss.j)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"edit-category-cancel",iconType:"cross",onClick:()=>{l(!1)},size:"s"},Ss.b))))))))}));Ps.displayName="EditCategory";var Ls=a(75),Ms=a(251);const Ns=({isLoading:e,customFields:t,customFieldsConfiguration:a,onSubmit:i})=>{const{permissions:r}=Object(E.a)(),l=Object(n.useMemo)((()=>$s(a)),[a]),c=Object(n.useCallback)((e=>{const n=zs(t,a),s=Object(Ms.a)(n,e);i(s)}),[t,a,i]),u=l.map((a=>{const n=(0,Ls.a[a.type])().build(),i=t.find((e=>e.key===a.key)),l=n.Edit;return s.a.createElement(o.EuiFlexItem,{grow:!1,"data-test-subj":`case-custom-field-wrapper-${a.key}`,key:a.key},s.a.createElement(l,{isLoading:e,canUpdate:r.update,customFieldConfiguration:a,customField:i,onSubmit:c}))}));return s.a.createElement(s.a.Fragment,null,u)};Ns.displayName="CustomFields";const Rs=s.a.memo(Ns),$s=e=>Object(se.sortBy)(e,(e=>e.label)),zs=(e,t)=>t.map((t=>e.find((e=>e.key===t.key))||{key:t.key,type:t.type,value:null})),Bs=({ruleDetailsNavigation:e,caseData:t,actionsNavigation:a,showAlertDetails:i,useFetchAlertData:r})=>{const[u,g]=Object(n.useState)({type:"all",sortOrder:"asc",page:1,perPage:10}),{permissions:b}=Object(E.a)(),{caseAssignmentAuthorized:f,pushToServiceAuthorized:v}=Object(_.a)(),{data:y,isLoading:j}=H(t.id),{data:C,isLoading:x}=(e=>{const{showErrorToast:t}=Object(T.a)();return Object(l.useQuery)(m.d.caseUserActionsStats(e),(({signal:t})=>Object(d.h)(e,t)),{onError:e=>{t(e,{title:c.e})}})})(t.id),{data:O,isLoading:A}=(e=>{const{showErrorToast:t}=Object(T.a)();return Object(l.useQuery)(m.d.caseUsers(e),(({signal:t})=>Object(d.i)({caseId:e,signal:t})),{onError:e=>{t(e,{title:c.e})}})})(t.id),{data:I}=Object(ie.a)(),{userProfiles:w,reporterAsArray:S}=Object(ue.i)({caseUsers:O,createdBy:t.createdBy}),k=Object(n.useMemo)((()=>t.assignees.map((e=>e.uid))),[t.assignees]),{data:F,isFetching:D}=Object(re.a)(),P=Object(n.useCallback)(((e,t)=>{i&&i(e,t)}),[i]),{onUpdateField:L,isLoading:M,loadingKey:N}=Sn({caseData:t}),R=M&&"assignees"===N||A||D,$=Object(n.useCallback)((e=>L({key:"status",value:e})),[L]),z=Object(n.useCallback)((e=>L({key:"tags",value:e})),[L]),B=Object(n.useCallback)((e=>L({key:"category",value:e})),[L]),U=Object(n.useCallback)((e=>L({key:"severity",value:e})),[L]),V=Object(n.useCallback)((e=>{const t=e.map((e=>({uid:e.uid})));Object(se.isEqual)(t.sort(),k.sort())||L({key:"assignees",value:t})}),[k,L]),{isLoading:G,data:Q}=Object(oe.a)(),q=Object(n.useCallback)((e=>{L({key:"connector",value:e})}),[L]),W=Object(n.useCallback)((e=>{L({key:"customFields",value:e})}),[L]),K=Object(n.useCallback)((e=>{g((t=>({...t,page:1,type:e.type,sortOrder:e.sortOrder})))}),[g]),Y=!x&&!j&&!A&&y&&O&&C,J=v&&y&&Q,X=M&&"description"===N;return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexItem,{grow:6},s.a.createElement(Es,{caseData:t,activeTab:h.a.ACTIVITY}),s.a.createElement(Is,{isLoadingDescription:X,caseData:t,onUpdateField:L}),s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(cs,{onUserActionsActivityChanged:K,params:u,userActionsStats:C,isLoading:x})),s.a.createElement(o.EuiSpacer,{size:"l"}),(x||j||A)&&s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-loading-content",size:"l"}),Y?s.a.createElement(o.EuiFlexGroup,{direction:"column",responsive:!1,"data-test-subj":"case-view-activity"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Cn,{userProfiles:w,currentUserProfile:F,getRuleDetailsHref:null==e?void 0:e.href,onRuleDetailsClick:null==e?void 0:e.onClick,caseConnectors:y,data:t,casesConfiguration:I,actionsNavigation:a,onShowAlertDetails:P,onUpdateField:L,statusActionButton:b.update?s.a.createElement(Ve,{status:t.status,onStatusChanged:$,isLoading:M&&"status"===N}):null,useFetchAlertData:r,userActivityQueryParams:u,userActionsStats:C}))):null),s.a.createElement(o.EuiFlexItem,{grow:2,"data-test-subj":"case-view-page-sidebar"},s.a.createElement(o.EuiFlexGroup,{direction:"column",responsive:!1,gutterSize:"xl"},f?s.a.createElement(s.a.Fragment,null,s.a.createElement(Jn,{caseAssignees:t.assignees,currentUserProfile:F,onAssigneesChanged:V,isLoading:R,userProfiles:null!=w?w:new Map})):null,s.a.createElement(Fn,{isDisabled:!b.update,isLoading:M&&"severity"===N,selectedSeverity:t.severity,onSeverityChange:U}),s.a.createElement(An,{dataTestSubj:"case-view-user-list-reporter",theCase:t,headline:p.V,users:S,userProfiles:w}),null!=O?s.a.createElement(An,{dataTestSubj:"case-view-user-list-participants",theCase:t,headline:p.O,loading:A,users:[...O.participants,...O.assignees],userProfiles:w}):null,s.a.createElement(Ze,{tags:t.tags,onSubmit:z,isLoading:M&&"tags"===N}),s.a.createElement(Ps,{category:t.category,onSubmit:B,isLoading:M&&"category"===N}),J?s.a.createElement(ze,{caseData:t,caseConnectors:y,supportedActionConnectors:Q,isLoading:G||M&&"connector"===N,onSubmit:q,key:t.connector.id}):null,s.a.createElement(Rs,{isLoading:M&&"customFields"===N,customFields:t.customFields,customFieldsConfiguration:I.customFields,onSubmit:W}))))};Bs.displayName="CaseViewActivity";const Us=e=>{const t=e.reduce(((e,t)=>t.type===L.a.alert?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)},Vs=()=>s.a.createElement(o.EuiEmptyPrompt,{"data-test-subj":"caseViewAlertsEmpty",iconType:"casesApp",iconColor:"default",titleSize:"xs",body:s.a.createElement("p",null,p.d)});Vs.displayName="CaseViewAlertsEmpty";const Gs=({caseData:e})=>{const{triggersActionsUi:t}=Object(u.g)().services,a=Object(n.useMemo)((()=>({ids:{values:Us(e.comments)}})),[e.comments]),i=Object(n.useMemo)((()=>(e=>{const t=e.reduce(((e,t)=>t.type===L.a.alert?((Array.isArray(t.index)?t.index:[t.index]).forEach((t=>{if(t.startsWith(".siem-signals"))e.add("security");else{const a=(e=>{const t=e.match(/\.alerts-(.*?).alerts/);return t&&t.length>1?`${t[1]}`:null})(t);a&&e.add(a)}})),e):e),new Set);return Array.from(t)})(e.comments)),[e.comments]),{isLoading:r,data:p}=(e=>{const{showErrorToast:t}=Object(T.a)();return Object(l.useQuery)(m.d.alertFeatureIds(e),(({signal:t})=>{const a={registrationContext:e};return Object(d.l)({query:a,signal:t})}),{onError:e=>{t(e,{title:c.e})}})})(i),g=e.owner===Y.Ob?`${e.owner}-case`:e.owner,b={alertsTableConfigurationRegistry:t.alertsTableConfigurationRegistry,configurationId:g,id:`case-details-alerts-${e.owner}`,featureIds:null!=p?p:[],query:a,showAlertStatusWithFlapping:e.owner!==Y.Ob};return 0===a.ids.values.length?s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Es,{caseData:e,activeTab:h.a.ALERTS}),s.a.createElement(Vs,null))):r?s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiProgress,{size:"xs",color:"primary"}))):s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-view-alerts"},s.a.createElement(Es,{caseData:e,activeTab:h.a.ALERTS}),t.getAlertsStateTable(b))};Gs.displayName="CaseViewAlerts";var _s=a(32),Hs=a(77),Qs=a(221),qs=a(224);const Ws=({caseId:e,theFile:t})=>{const[a,i]=Object(n.useState)(!1),{owner:r,permissions:l}=Object(E.a)(),{client:c}=Object(us.b)(),{showSuccessToast:u}=Object(T.a)(),{isLoading:d,mutate:m}=Object(qs.a)(),{showDeletionModal:p,onModalOpen:g,onConfirm:b,onCancel:f}=Object(Ma.a)({onDelete:()=>m({caseId:e,fileId:t.id})}),h=Object(n.useCallback)((()=>i(!a)),[a]),v=Object(n.useCallback)((()=>i(!1)),[]),y=Object(n.useMemo)((()=>{var e,a,n,i,m,p;const b=(null===(e=t.hash)||void 0===e?void 0:e.md5)||(null===(a=t.hash)||void 0===a?void 0:a.sha1)||(null===(n=t.hash)||void 0===n?void 0:n.sha256),f=[{name:_s.l,icon:"download",href:c.getDownloadHref({fileKind:Object(ds.a)(r[0]),id:t.id}),onClick:v,"data-test-subj":"cases-files-download-button"}],E=[{id:0,title:_s.a,items:f},{id:1,title:_s.f,items:[{name:"MD5",icon:"copyClipboard",disabled:!(null!==(i=t.hash)&&void 0!==i&&i.md5),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.md5&&navigator.clipboard.writeText(t.hash.md5).then((()=>{v(),u(_s.g("md5"))}))},"data-test-subj":"cases-files-copy-md5-hash-button"},{name:"SHA1",icon:"copyClipboard",disabled:!(null!==(m=t.hash)&&void 0!==m&&m.sha1),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.sha1&&navigator.clipboard.writeText(t.hash.sha1).then((()=>{v(),u(_s.g("sha1"))}))},"data-test-subj":"cases-files-copy-sha1-hash-button"},{name:"SHA256",icon:"copyClipboard",disabled:!(null!==(p=t.hash)&&void 0!==p&&p.sha256),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.sha256&&navigator.clipboard.writeText(t.hash.sha256).then((()=>{v(),u(_s.g("sha256"))}))},"data-test-subj":"cases-files-copy-sha256-hash-button"}]}];return b&&f.push({name:_s.f,icon:"copyClipboard",panel:1,"data-test-subj":"cases-files-copy-hash-button"}),l.delete&&f.push({name:s.a.createElement(o.EuiTextColor,{color:"danger"},_s.j),icon:s.a.createElement(o.EuiIcon,{type:"trash",size:"m",color:"danger"}),onClick:()=>{v(),g()},disabled:d,"data-test-subj":"cases-files-delete-button"}),E}),[v,c,d,g,r,l,u,t]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiPopover,{id:`cases-files-popover-${t.id}`,key:`cases-files-popover-${t.id}`,"data-test-subj":`cases-files-popover-${t.id}`,button:s.a.createElement(o.EuiButtonIcon,{onClick:h,iconType:"boxesHorizontal","aria-label":_s.a,color:"text",key:`cases-files-actions-popover-button-${t.id}`,"data-test-subj":`cases-files-actions-popover-button-${t.id}`}),isOpen:a,closePopover:v,panelPaddingSize:"none",anchorPosition:"downLeft"},s.a.createElement(o.EuiContextMenu,{initialPanelId:0,panels:y,"data-test-subj":"cases-files-popover-context-menu"})),p&&s.a.createElement(La.a,{title:_s.k,confirmButtonText:_s.i,onCancel:f,onConfirm:b}))};Ws.displayName="FileActionsPopoverButton";var Ks=a(222),Ys=a(145);const Js=Object(n.lazy)((()=>a.e(19).then(a.bind(null,339)))),Xs=e=>{var t;return Object(at.jsx)(n.Suspense,{fallback:null!==(t=e.lazyLoadFallback)&&void 0!==t?t:Object(at.jsx)(o.EuiLoadingSpinner,{size:"xl"})},Object(at.jsx)(Js,e))};var Zs=a(38);const ei=({caseId:e})=>{const{owner:t,permissions:a}=Object(E.a)(),{showDangerToast:i,showErrorToast:r,showSuccessToast:l}=Object(T.a)(),{isLoading:c,mutateAsync:u}=Object(nt.a)(),m=Object(G.a)(),[p,g]=Object(n.useState)(!1),b=()=>g(!1),f=Object(n.useCallback)((e=>{r(e,{title:_s.m})}),[r]),h=Object(n.useCallback)((async a=>{if(0===a.length)return void i(_s.m);const n=a[0];try{var s,r;await u({caseId:e,caseOwner:t[0],attachments:[{type:Zs.AttachmentType.externalReference,externalReferenceId:n.id,externalReferenceStorage:{type:Zs.ExternalReferenceStorageType.savedObject,soType:Ys.FILE_SO_TYPE},externalReferenceAttachmentTypeId:Y.N,externalReferenceMetadata:{files:[{name:n.fileJSON.name,extension:null!==(s=n.fileJSON.extension)&&void 0!==s?s:"",mimeType:null!==(r=n.fileJSON.mimeType)&&void 0!==r?r:"",created:n.fileJSON.created}]}}]}),m(),l(_s.w(n.fileJSON.name))}catch(t){return Object(d.d)({caseId:e,fileIds:[n.id]})}b()}),[e,u,t,m,i,l]);return a.create&&a.update?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{"data-test-subj":"cases-files-add",iconType:"plusInCircle",isDisabled:c,isLoading:c,onClick:()=>g(!0)},_s.d),p&&s.a.createElement(o.EuiModal,{"data-test-subj":"cases-files-add-modal",onClose:b},s.a.createElement(o.EuiModalHeader,null,s.a.createElement(o.EuiModalHeaderTitle,null,_s.d)),s.a.createElement(o.EuiModalBody,null,s.a.createElement(Xs,{kind:Object(ds.a)(t[0]),onDone:h,onError:f,meta:{caseIds:[e],owner:[t[0]]}})))):null};ei.displayName="AddFile";const ti=s.a.memo(ei);var ai=a(223);const ni=({caseId:e})=>s.a.createElement(o.EuiEmptyPrompt,{title:s.a.createElement("h3",null,_s.q),"data-test-subj":"cases-files-table-empty",titleSize:"xs",actions:s.a.createElement(ti,{caseId:e})});ni.displayName="EmptyFilesTable";const si=({caseId:e,items:t,pagination:a,onChange:i,isLoading:r})=>{const{isPreviewVisible:l,showPreview:c,closePreview:u}=Object(ai.a)(),[d,m]=Object(n.useState)(),p=Object(n.useCallback)((e=>({"data-test-subj":`cases-files-table-row-${e.id}`})),[]),g=(({caseId:e,showPreview:t})=>[{name:_s.p,"data-test-subj":"cases-files-table-filename",render:e=>s.a.createElement(Qs.a,{file:e,showPreview:()=>t(e)}),width:"60%"},{name:_s.y,"data-test-subj":"cases-files-table-filetype",render:e=>s.a.createElement("span",null,Object(Hs.c)(e.mimeType))},{name:_s.h,field:"created","data-test-subj":"cases-files-table-date-added",dataType:"date"},{name:_s.a,width:"120px",actions:[{name:_s.a,render:t=>s.a.createElement(Ws,{caseId:e,theFile:t})}]}])({caseId:e,showPreview:e=>{m(e),c()}});return r?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(o.EuiSkeletonText,{"data-test-subj":"cases-files-table-loading",lines:10})):s.a.createElement(s.a.Fragment,null,a.totalItemCount>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"xl"}),s.a.createElement(o.EuiText,{size:"xs",color:"subdued","data-test-subj":"cases-files-table-results-count"},_s.v(t.length))),s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiBasicTable,{tableCaption:_s.n,items:t,columns:g,pagination:a,onChange:i,"data-test-subj":"cases-files-table",noItemsMessage:s.a.createElement(ni,{caseId:e}),rowProps:p}),l&&void 0!==d&&s.a.createElement(Ks.a,{closePreview:u,selectedFile:d}))};si.displayName="FilesTable";const ii=({caseId:e,onSearch:t})=>s.a.createElement(o.EuiFlexGroup,{alignItems:"center"},s.a.createElement(ti,{caseId:e}),s.a.createElement(o.EuiFlexItem,{grow:!1,style:{minWidth:400}},s.a.createElement(o.EuiFieldSearch,{fullWidth:!0,placeholder:_s.u,onSearch:t,incremental:!1,"data-test-subj":"cases-files-search"})));ii.displayName="FilesUtilityBar";const ri={page:0,perPage:10},oi=({caseData:e})=>{var t;const[a,i]=Object(n.useState)(ri),{data:r,isLoading:u,isPreviousData:d}=(({caseId:e,page:t,perPage:a,searchTerm:n})=>{const{owner:s}=Object(E.a)(),{showErrorToast:i}=Object(T.a)(),{client:r}=Object(us.b)();return Object(l.useQuery)(m.d.caseFiles(e,{page:t,perPage:a,searchTerm:n}),(()=>r.list({kind:Object(ds.a)(s[0]),page:t+1,...n&&{name:`*${n}*`},perPage:a,meta:{caseIds:[e]}})),{keepPreviousData:!0,onError:e=>{i(e,{title:c.e})}})})({...a,caseId:e.id}),p=Object(n.useCallback)((({page:e})=>{e&&!d&&i({...a,page:e.index,perPage:e.size})}),[a,d]),g=Object(n.useCallback)((e=>{const t=e.trim();Object(y.isEqual)(t,a.searchTerm)||i({...a,searchTerm:t})}),[a]),b=Object(n.useMemo)((()=>{var e;return{pageIndex:a.page,pageSize:a.perPage,totalItemCount:null!==(e=null==r?void 0:r.total)&&void 0!==e?e:0,pageSizeOptions:[10,25,50],showPerPageOptions:!0}}),[a.page,a.perPage,null==r?void 0:r.total]);return s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Es,{caseData:e,activeTab:h.a.FILES}),s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ii,{caseId:e.id,onSearch:g}),s.a.createElement(si,{caseId:e.id,isLoading:u,items:null!==(t=null==r?void 0:r.files)&&void 0!==t?t:[],onChange:p,pagination:b})))))};oi.displayName="CaseViewFiles";var li=a(49);const ci=O.i18n.translate("xpack.cases.caseView.metrics.totalAlerts",{defaultMessage:"Total alerts"}),ui=O.i18n.translate("xpack.cases.caseView.metrics.associatedUsers",{defaultMessage:"Associated users"}),di=O.i18n.translate("xpack.cases.caseView.metrics.associatedHosts",{defaultMessage:"Associated hosts"}),mi=O.i18n.translate("xpack.cases.caseView.metrics.isolatedHosts",{defaultMessage:"Isolated hosts"}),pi=O.i18n.translate("xpack.cases.caseView.metrics.totalConnectors",{defaultMessage:"Total connectors"}),gi=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.caseCreated",{defaultMessage:"Case created"}),bi=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.inProgressDuration",{defaultMessage:"In progress duration"}),fi=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.openDuration",{defaultMessage:"Open duration"}),Ei=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.openToCloseDuration",{defaultMessage:"Duration from creation to close"}),hi=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopened",{defaultMessage:"(reopened)"}),vi=O.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopenedOn",{defaultMessage:"Reopened "}),yi=s.a.memo((({metrics:e,features:t})=>{const a=Ci(e,t);return s.a.createElement(s.a.Fragment,null,a.map((({id:e,title:t,value:a})=>s.a.createElement(o.EuiFlexItem,{key:t,"data-test-subj":`case-metrics-totals-${e}`},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(o.EuiFlexItem,null,t),s.a.createElement(ji,null,a))))))}));yi.displayName="CaseViewMetricItems";const ji=Object(li.euiStyled)(o.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeL};
  font-weight: bold;
`,Ci=(e,t)=>{var a,s,i,r,o,l;const{alerts:c,actions:u,connectors:d}=null!=e?e:{},m=null!==(a=null==d?void 0:d.total)&&void 0!==a?a:0,p=null!==(s=null==c?void 0:c.count)&&void 0!==s?s:0,g=null!==(i=null==c||null===(r=c.users)||void 0===r?void 0:r.total)&&void 0!==i?i:0,b=null!==(o=null==c||null===(l=c.hosts)||void 0===l?void 0:l.total)&&void 0!==o?o:0,f=xi(u);return Object(n.useMemo)((()=>[[v.a.ALERTS_COUNT,{title:ci,value:p}],[v.a.ALERTS_USERS,{title:ui,value:g}],[v.a.ALERTS_HOSTS,{title:di,value:b}],[v.a.ACTIONS_ISOLATE_HOST,{title:mi,value:f}],[v.a.CONNECTORS,{title:pi,value:m}]].reduce(((e,[a,n])=>[...e,...t.includes(a)?[{id:a,...n}]:[]]),[])),[t,p,g,b,f,m])},xi=e=>null!=e&&e.isolateHost?Math.max(e.isolateHost.isolate.total-e.isolateHost.unisolate.total,0):0;var Oi=a(240),Ai=a.n(Oi),Ii=a(234),wi=a(199);const Si=s.a.memo((({metrics:e,features:t})=>{const a=ki(e,t);if(!a)return null;const n=[{key:"case-created",component:s.a.createElement(Mi,{title:gi,value:s.a.createElement(Ti,{date:a.creationDate})}),dataTestSubject:"case-metrics-lifespan-item-creation-date"},{key:"in-progress-duration",component:s.a.createElement(Mi,{title:bi,value:Fi(a.statusInfo.inProgressDuration)}),dataTestSubject:"case-metrics-lifespan-item-inProgress-duration"},{key:"open-duration",component:s.a.createElement(Mi,{title:fi,value:Di(a.statusInfo.openDuration)}),dataTestSubject:"case-metrics-lifespan-item-open-duration"},{key:"duration-from-creation-to-close",component:s.a.createElement(Ni,{title:Ei,value:Pi(a.creationDate,a.closeDate),reopens:a.statusInfo.reopenDates}),dataTestSubject:"case-metrics-lifespan-item-open-to-close-duration"}];return s.a.createElement(o.EuiFlexItem,{grow:3},s.a.createElement(o.EuiFlexGrid,{columns:2,gutterSize:"s",responsive:!1},n.map((({component:e,dataTestSubject:t,key:a})=>s.a.createElement(o.EuiFlexItem,{"data-test-subj":t,key:a},e)))))}));Si.displayName="CaseStatusMetrics";const ki=(e,t)=>Object(n.useMemo)((()=>{var a;const n=null!==(a=null==e?void 0:e.lifespan)&&void 0!==a?a:{closeDate:"",creationDate:"",statusInfo:{inProgressDuration:0,reopenDates:[],openDuration:0}};if(t.includes(v.a.LIFESPAN))return n}),[t,e]),Ti=s.a.memo((({date:e})=>Object(Ii.a)(e).isValid()?s.a.createElement(V.a,{"data-test-subj":"case-metrics-lifespan-creation-date",value:e,stripMs:!0}):Object(wi.a)()));Ti.displayName="CreationDate";const Fi=e=>e<=0?Object(wi.a)():Di(e),Di=e=>Ai()(e,{compact:!0,verbose:!0}),Pi=(e,t)=>{if(null==t)return;const a=Object(Ii.a)(e),n=Object(Ii.a)(t);return a.isValid()&&n.isValid()?Di(n.diff(a)):void 0},Li=Object(li.euiStyled)(o.EuiFlexItem)`
  font-size: ${({theme:e})=>e.eui.euiSizeM};
  font-weight: bold;
`,Mi=s.a.memo((({title:e,value:t})=>s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(Li,null,e),s.a.createElement(o.EuiFlexItem,null,t))));Mi.displayName="CaseStatusMetricsItem";const Ni=s.a.memo((({title:e,value:t,reopens:a})=>{const n=Ri(t,a);return s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},s.a.createElement(Li,null,e),null!=t&&$i(a)?s.a.createElement(zi,{value:n,explanationValues:a}):s.a.createElement(o.EuiFlexItem,null,n))}));Ni.displayName="OpenCloseDuration";const Ri=(e,t)=>null==e?Object(wi.a)():t.length>0?`${e} ${hi}`:e,$i=e=>e.length>0,zi=s.a.memo((({value:e,explanationValues:t})=>{const a=s.a.createElement(s.a.Fragment,null,vi,t.map(((e,a)=>s.a.createElement(s.a.Fragment,{key:`explanation-value-${a}`},s.a.createElement(V.a,{"data-test-subj":`case-metrics-lifespan-reopen-${a}`,value:e,stripMs:!0}),Bi(a,t.length)?s.a.createElement(o.EuiSpacer,{size:"xs"}):null))));return s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-metrics-lifespan-reopen-icon"},s.a.createElement(o.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},e),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiIconTip,{content:a,position:"right"}))))}));zi.displayName="ValueWithExplanationIcon";const Bi=(e,t)=>e+1<t,Ui=s.a.memo((({caseId:e})=>{const{metricsFeatures:t}=Object(_.a)(),{data:a,isLoading:n}=((e,t)=>{const a=Object(u.j)();return Object(l.useQuery)(m.d.caseMetrics(e,t),(async({signal:a})=>({metrics:await Object(d.m)(e,t,a)})),{onError:e=>{"AbortError"!==e.name&&a.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.e})}})})(e,t);return 0===t.length?null:s.a.createElement(o.EuiPanel,{"data-test-subj":"case-view-metrics-panel",hasShadow:!1,hasBorder:!0},s.a.createElement(o.EuiFlexGroup,{gutterSize:"xl",wrap:!0,responsive:!1,alignItems:"center"},n||!a?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-metrics-spinner",size:"l"})):s.a.createElement(s.a.Fragment,null,s.a.createElement(yi,{metrics:a.metrics,features:t}),s.a.createElement(Si,{metrics:a.metrics,features:t}))))}));Ui.displayName="CaseViewMetrics";const Vi=s.a.memo((({caseData:e,onComponentInitialized:t,refreshRef:a,ruleDetailsNavigation:i,actionsNavigation:r,showAlertDetails:l,useFetchAlertData:c})=>{var u;const{features:d}=Object(E.a)(),{urlParams:m}=Object(b.n)(),p=Object(G.a)();Object(ne.b)(e.title);const g=Object(n.useMemo)((()=>m.tabId&&Object.values(h.a).includes(m.tabId)?m.tabId:h.a.ACTIVITY),[m.tabId]),f=Object(n.useRef)(!0),v=null===(u=Object(ae.a)())||void 0===u?void 0:u.ui,{onUpdateField:y,isLoading:j,loadingKey:C}=Sn({caseData:e});Object(n.useEffect)((()=>{let e=!1;if(a)return a.current={refreshCase:async()=>{e||j||p()}},()=>{e=!0,a.current=null}}),[j,a,p]);const x=Object(n.useCallback)((e=>y({key:"title",value:e})),[y]);return Object(n.useEffect)((()=>{f.current&&(f.current=!1,t&&t())}),[t]),s.a.createElement(s.a.Fragment,null,s.a.createElement(K.a,{border:!1,showBackButton:!0,"data-test-subj":"case-view-title",titleNode:s.a.createElement(ee,{isLoading:j&&"title"===C,title:e.title,onSubmit:x}),title:e.title},s.a.createElement(W,{caseData:e,isLoading:j&&("status"===C||"settings"===C),onUpdateField:y})),s.a.createElement(o.EuiFlexGroup,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(Ui,{"data-test-subj":"case-view-metrics",caseId:e.id}))),s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(o.EuiFlexGroup,{"data-test-subj":`case-view-tab-content-${g}`,alignItems:"baseline"},g===h.a.ACTIVITY&&s.a.createElement(Bs,{ruleDetailsNavigation:i,caseData:e,actionsNavigation:r,showAlertDetails:l,useFetchAlertData:c}),g===h.a.ALERTS&&d.alerts.enabled&&s.a.createElement(Gs,{caseData:e}),g===h.a.FILES&&s.a.createElement(oi,{caseData:e})),null!=v&&v.renderTimelineDetailsPanel?v.renderTimelineDetailsPanel():null)}));Vi.displayName="CaseViewPage";const Gi=r()(o.EuiFlexGroup).withConfig({displayName:"MyEuiFlexGroup",componentId:"sc-b28alb-0"})(["height:100%;"]),_i=()=>s.a.createElement(Gi,{gutterSize:"none",justifyContent:"center",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiLoadingSpinner,{"data-test-subj":"case-view-loading",size:"xl"}))),Hi=s.a.memo((({onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:i,timelineIntegration:r,useFetchAlertData:o,refreshRef:h})=>{const{spaces:v}=Object(u.g)().services,{detailName:y}=Object(b.k)(),{basePath:j}=Object(E.a)(),{data:C,isLoading:x,isError:O,refetch:A}=(e=>{const t=Object(u.j)();return Object(l.useQuery)(m.d.case(e),(({signal:t})=>Object(d.s)({caseId:e,includeComments:!0,signal:t})),{onError:e=>{"AbortError"!==e.name&&t.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:c.e})}})})(y);Object(n.useEffect)((()=>{if(v&&"aliasMatch"===(null==C?void 0:C.outcome)&&null!=C.aliasTargetId){const e=`${j}${Object(b.c)({detailName:C.aliasTargetId})}`;v.ui.redirectLegacyUrl({path:`${e}${window.location.search}${window.location.hash}`,aliasPurpose:C.aliasPurpose,objectNoun:p.j})}}),[j,C,v]);const I=Object(n.useCallback)((()=>{if(C&&v&&"conflict"===C.outcome&&null!=C.aliasTargetId){const e=`${j}${Object(b.c)({detailName:C.aliasTargetId})}${window.location.search}${window.location.hash}`;return v.ui.components.getLegacyUrlConflict({objectNoun:p.j,currentObjectId:C.case.id,otherObjectId:C.aliasTargetId,otherObjectPath:e})}return null}),[j,C,v]);return O?s.a.createElement(f,{caseId:y}):x?s.a.createElement(_i,null):C?s.a.createElement(g.b,{timelineIntegration:r},I(),s.a.createElement(Vi,{caseData:C.case,caseId:y,fetchCase:A,onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:i,useFetchAlertData:o,refreshRef:h})):null}));_i.displayName="CaseViewLoading",Hi.displayName="CaseView"}])]);