/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[9],{149:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={jira:["jira"],resilient:["resilient"],servicenow:["servicenow"],jiraGetFieldsByIssueType:(e,t)=>[...i.jira,e,"getFields",t],jiraGetIssueTypes:e=>[...i.jira,e,"getIssueType"],jiraGetIssues:(e,t)=>[...i.jira,e,"getIssues",t],resilientGetIncidentTypes:e=>[...i.resilient,e,"getIncidentTypes"],resilientGetSeverity:e=>[...i.resilient,e,"getSeverity"],servicenowGetChoices:(e,t)=>[...i.servicenow,e,"getChoices",t]}},151:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,...t&&{serviceMessage:t}})},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(1),c=n.n(i),s=n(5),a=n(6),r=n(61);const l=({connectorType:e,title:t,listItems:n,isLoading:i})=>{const{triggersActionsUi:l}=Object(a.g)().services;return c.a.createElement(s.EuiSkeletonText,{lines:3,size:"m",isLoading:i,"data-test-subj":"connector-card-loading"},c.a.createElement(s.EuiFlexGroup,{direction:"column",alignItems:"stretch","data-test-subj":"connector-card"},c.a.createElement(s.EuiFlexGroup,{direction:"row",justifyContent:"spaceBetween",alignItems:"center"},c.a.createElement(s.EuiFlexItem,null,c.a.createElement(s.EuiText,{size:"s","data-test-subj":"connector-card-title"},c.a.createElement("strong",null,t))),c.a.createElement(s.EuiFlexItem,{grow:!1},c.a.createElement(s.EuiIcon,{size:"xl",type:Object(r.d)(l,e)}))),c.a.createElement(s.EuiFlexItem,{"data-test-subj":"connector-card-details"},n.length>0&&n.map(((e,t)=>c.a.createElement(s.EuiText,{size:"xs","data-test-subj":"card-list-item",key:`${e.title}-${t}`},c.a.createElement("strong",null,`${e.title}: `),`${e.description}`))))))};l.displayName="ConnectorCardDisplay";const o=Object(i.memo)(l)},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(1),c=n.n(i),s=n(5),a=n(2);const r=a.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),l=a.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),o=({type:e="warning"})=>c.a.createElement(s.EuiCallOut,{title:r,color:e,iconType:"warning","data-test-subj":"deprecated-connector-warning-callout"},l);o.displayName="DeprecatedCallout";const u=c.a.memo(o)},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=e=>e.map((e=>({value:e.value,text:e.label})))},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(46),c=n(47),s=n(149),a=n(84),r=n(151),l=n(156);const o=({http:e,connector:t,fields:n})=>{var o;const{showErrorToast:u}=Object(c.a)();return Object(i.useQuery)(s.a.servicenowGetChoices(null!==(o=null==t?void 0:t.id)&&void 0!==o?o:"",n),(({signal:i})=>{var c;return async function({http:e,connectorId:t,fields:n,signal:i}){const c=await e.post(Object(a.b)(t),{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:n}}}),signal:i});return Object(r.a)(c)}({http:e,signal:i,connectorId:null!==(c=null==t?void 0:t.id)&&void 0!==c?c:"",fields:n})}),{enabled:Boolean(t),staleTime:6e4,onSuccess:e=>{var t;e.status&&"error"===e.status&&u(new Error(l.d),{title:l.d,toastMessage:`${null!==(t=e.serviceMessage)&&void 0!==t?t:e.message}`})},onError:e=>{u(e,{title:l.d})}})}},335:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var i=n(1),c=n.n(i),s=n(5),a=n(156),r=n(4),l=n(6),o=n(154),u=n(170),d=n(168),m=n(157);const g=["urgency","severity","impact","category","subcategory"],v={urgency:[],severity:[],impact:[],category:[],subcategory:[]},p=({connector:e,fields:t})=>{var n;const{severity:p=null,urgency:y=null,impact:b=null,category:j=null,subcategory:E=null}=null!=t?t:{},{http:f}=Object(l.g)().services,w=e.isDeprecated,{isLoading:x,isFetching:I,data:O}=Object(u.a)({http:f,connector:e,fields:g}),h=x||I,T=(null!==(n=null==O?void 0:O.data)&&void 0!==n?n:[]).reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),v),F=Object(i.useMemo)((()=>Object(d.a)(T.category)),[T.category]),M=Object(i.useMemo)((()=>Object(d.a)(T.urgency)),[T.urgency]),C=Object(i.useMemo)((()=>Object(d.a)(T.severity)),[T.severity]),G=Object(i.useMemo)((()=>Object(d.a)(T.impact)),[T.impact]),$=Object(i.useMemo)((()=>Object(d.a)(T.subcategory.filter((e=>e.dependent_value===j)))),[T.subcategory,j]),N=Object(i.useMemo)((()=>{var e,t,n,i,c,s,r,l,o,u;return[...null!=y&&y.length>0?[{title:a.m,description:null!==(e=null===(t=M.find((e=>`${e.value}`===y)))||void 0===t?void 0:t.text)&&void 0!==e?e:""}]:[],...null!=p&&p.length>0?[{title:a.j,description:null!==(n=null===(i=C.find((e=>`${e.value}`===p)))||void 0===i?void 0:i.text)&&void 0!==n?n:""}]:[],...null!=b&&b.length>0?[{title:a.f,description:null!==(c=null===(s=G.find((e=>`${e.value}`===b)))||void 0===s?void 0:s.text)&&void 0!==c?c:""}]:[],...null!=j&&j.length>0?[{title:a.c,description:null!==(r=null===(l=F.find((e=>`${e.value}`===j)))||void 0===l?void 0:l.text)&&void 0!==r?r:""}]:[],...null!=E&&E.length>0?[{title:a.l,description:null!==(o=null===(u=$.find((e=>`${e.value}`===E)))||void 0===u?void 0:u.text)&&void 0!==o?o:""}]:[]]}),[j,F,b,G,p,C,E,$,y,M]);return c.a.createElement(c.a.Fragment,null,w&&c.a.createElement(s.EuiFlexGroup,null,c.a.createElement(s.EuiFlexItem,null,c.a.createElement(m.a,null))),c.a.createElement(s.EuiFlexGroup,null,c.a.createElement(s.EuiFlexItem,null,c.a.createElement(o.a,{connectorType:r.i.serviceNowITSM,title:e.name,listItems:N,isLoading:h}))))};p.displayName="ServiceNowITSMFieldsPreview"}}]);