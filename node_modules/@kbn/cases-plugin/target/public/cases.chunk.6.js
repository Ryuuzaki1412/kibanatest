/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[6],{146:function(e,t,a){"use strict";a.r(t),a.d(t,"CasesRoutes",(function(){return lt})),a.d(t,"default",(function(){return lt}));var n=a(1),s=a.n(n),i=a(20),l=a(98),c=a(137),o=a(5),r=a(36),u=a(247),d=a(56),m=a.n(d),p=a(208),b=a(136),E=a(2);const g=E.i18n.translate("xpack.cases.callout.updateToPlatinumTitle",{defaultMessage:"Upgrade to an appropriate license"}),f=E.i18n.translate("xpack.cases.callout.appropriateLicense",{defaultMessage:"appropriate license"}),y=E.i18n.translate("xpack.cases.callout.cloudDeploymentLink",{defaultMessage:"cloud deployment"}),h=()=>s.a.createElement(o.EuiCallOut,{title:g,id:"case-callout-license-info",iconType:"gear","data-test-subj":"case-callout-license-info"},s.a.createElement(b.FormattedMessage,{defaultMessage:"Assigning users to cases or opening cases in external systems is available when you have the {appropriateLicense}, are using a {cloud}, or are testing out a Free Trial.",id:"xpack.cases.platinumLicenseCalloutMessage",values:{appropriateLicense:s.a.createElement(o.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},f),cloud:s.a.createElement(o.EuiLink,{href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank"},y)}}));h.displayName="PlatinumLicenseCalloutComponent";const C=s.a.memo(h),j=()=>{const{euiTheme:e}=Object(o.useEuiTheme)(),{isAtLeastPlatinum:t}=Object(p.a)();return t()?null:s.a.createElement(x,{gutterSize:"none","data-test-subj":"case-callouts",$_css:e.size.l},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(C,null)))};j.displayName="CaseCalloutsComponent";const F=s.a.memo(j);var x=m()(o.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-9o4tah-0"})((e=>({marginBottom:e.$_css}))),k=a(196),w=a(248),v=a(260),O=a(198),T=a(82),I=a(26),S=a(158),L=a(35);const N=m()(o.EuiFlexGroup).withConfig({displayName:"ButtonFlexGroup",componentId:"sc-n9ygdy-0"})(["",""],(({theme:e})=>Object(d.css)(["&{@media only screen and (max-width:","){flex-direction:column;}}"],e.eui.euiBreakpoints.s))),M=({actionsErrors:e})=>{const{permissions:t}=Object(L.a)(),{getCreateCaseUrl:a,navigateToCreateCase:i}=Object(r.m)(),l=Object(n.useCallback)((e=>{e.preventDefault(),i()}),[i]);return t.create||t.settings?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(N,{responsive:!1},t.settings&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(S.b,{label:T.m,showToolTip:!Object(I.isEmpty)(e),msgTooltip:Object(I.isEmpty)(e)?s.a.createElement(s.a.Fragment,null):s.a.createElement(s.a.Fragment,null,e[0].description),titleTooltip:Object(I.isEmpty)(e)?"":e[0].title})),t.create&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(S.d,{fill:!0,onClick:l,href:a(),iconType:"plusInCircle","data-test-subj":"createNewCaseBtn"},T.o)))):null};M.displayName="NavButtons";const B=({actionsErrors:e})=>s.a.createElement(O.a,{title:T.H,border:!0,"data-test-subj":"cases-all-title"},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0,"data-test-subj":"all-cases-header"},s.a.createElement(M,{actionsErrors:e})));B.displayName="CasesTableHeader";const z=()=>{Object(k.a)(r.a.cases);const{data:e=null}=Object(u.a)(),t=Object(n.useMemo)((()=>Object(w.a)(e)),[e]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(F,null),s.a.createElement(B,{actionsErrors:t}),s.a.createElement(v.a,null))};z.displayName="AllCases";var P=a(27),D=a(24),G=a(152),_=a(261);Object(D.getUseField)({component:P.Field});const A=s.a.memo((({afterCaseCreated:e,onCancel:t,onSuccess:a,timelineIntegration:n,withSteps:i})=>(Object(k.a)(r.a.casesCreate),s.a.createElement(o.EuiPageSection,{restrictWidth:!0},s.a.createElement(O.a,{showBackButton:!0,"data-test-subj":"case-create-title",title:G.k}),s.a.createElement(_.a,{afterCaseCreated:e,onCancel:t,onSuccess:a,timelineIntegration:n,withSteps:i})))));A.displayName="CreateCase";var V=a(140),q=a(6),R=a(46),W=a(48),U=a(192),$=a(80),H=a(165),X=a(200),K=a(242),Q=a(166),J=a(4);const Z=({isLoading:e,casesField:t,selectedActionType:a,selectedThirdParty:i})=>{const l=Object(n.useMemo)((()=>Object(I.capitalize)(a)),[a]);return s.a.createElement(o.EuiFlexGroup,{"data-test-subj":"static-mappings",alignItems:"center",responsive:!1},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{component:"span",grow:!1},s.a.createElement(o.EuiCode,{"data-test-subj":"field-mapping-source"},t)),s.a.createElement(o.EuiFlexItem,{component:"span",grow:!1},s.a.createElement(o.EuiIcon,{type:"sortRight"})))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},s.a.createElement(o.EuiFlexItem,{component:"span",grow:!1},e?s.a.createElement(o.EuiLoadingSpinner,{size:"m"}):s.a.createElement(o.EuiCode,{"data-test-subj":"field-mapping-target"},i)))),s.a.createElement(o.EuiFlexItem,null,e?s.a.createElement(o.EuiLoadingSpinner,{size:"m"}):l))};Z.displayName="FieldMappingRow";const Y=s.a.memo(Z),ee=m.a.div.withConfig({displayName:"FieldRowWrapper",componentId:"sc-i16y6l-0"})(["margin:10px 0;font-size:14px;"]),te=({actionTypeName:e,isLoading:t,mappings:a})=>a.length?s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,null," ",s.a.createElement(o.EuiFlexGroup,{responsive:!1},s.a.createElement(o.EuiFlexItem,null,s.a.createElement("span",{className:"euiFormLabel"},Q.m)),s.a.createElement(o.EuiFlexItem,{"data-test-subj":"case-configure-field-mappings-second-col-label"},s.a.createElement("span",{className:"euiFormLabel"},Q.n(e))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement("span",{className:"euiFormLabel"},Q.o)))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(ee,{"data-test-subj":"case-configure-field-mappings-row-wrapper"},a.map((e=>{var a;return s.a.createElement(Y,{key:`${e.source}`,casesField:e.source,isLoading:t,selectedActionType:e.actionType,selectedThirdParty:null!==(a=e.target)&&void 0!==a?a:"not_mapped"})}))))):null;te.displayName="FieldMapping";const ae=s.a.memo(te),ne=({actionTypeName:e,connectorType:t,isLoading:a,mappings:i})=>{const l=Object(n.useMemo)((()=>i.length>0||a?{desc:Q.k(e),color:"subdued"}:t===J.i.casesWebhook?{desc:Q.b,color:"subdued"}:{desc:Q.l(e),color:"danger"}),[i.length,a,e,t]);return s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{size:"xs","data-test-subj":"field-mapping-text"},s.a.createElement("h4",null,Q.p(e)),s.a.createElement(o.EuiTextColor,{"data-test-subj":"field-mapping-desc",color:l.color},l.desc))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ae,{actionTypeName:e,"data-test-subj":"case-mappings-field",isLoading:a,mappings:i})))};ne.displayName="Mapping";const se=s.a.memo(ne);var ie=a(157),le=a(61);const ce=m()(o.EuiFormRow).withConfig({displayName:"EuiFormRowExtended",componentId:"sc-1k8uvpd-0"})([".euiFormRow__labelWrapper{.euiFormRow__label{width:100%;}}"]),oe=({actionTypes:e,connectors:t,disabled:a,handleShowEditFlyout:i,isLoading:l,mappings:c,onChangeConnector:r,selectedConnector:u,updateConnectorDisabled:d})=>{var m;const{actions:p}=Object(q.c)(),b=Object(n.useMemo)((()=>t.find((e=>e.id===u.id))),[t,u.id]),{permissions:E}=Object(L.a)(),g=E.connectors&&p.read,f=null!==(m=null==b?void 0:b.name)&&void 0!==m?m:"none",y=Object(n.useMemo)((()=>{var t,a;return null!==(t=null===(a=e.find((e=>e.id===u.type)))||void 0===a?void 0:a.name)&&void 0!==t?t:Q.w}),[e,u.type]),h=Object(n.useMemo)((()=>s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,{grow:!1},Q.r),s.a.createElement(o.EuiFlexItem,{grow:!1},"none"!==f&&s.a.createElement(o.EuiLink,{disabled:d,onClick:i,"data-test-subj":"case-configure-update-selected-connector-button"},Q.x(f))))),[f,i,d]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiDescribedFormGroup,{fullWidth:!0,title:s.a.createElement("h3",null,Q.s),description:Q.q,"data-test-subj":"case-connectors-form-group"},s.a.createElement(ce,{fullWidth:!0,label:h,"data-test-subj":"case-connectors-form-row"},s.a.createElement(o.EuiFlexGroup,{direction:"column"},s.a.createElement(o.EuiFlexItem,{grow:!1},g?s.a.createElement(K.a,{connectors:t,disabled:a,selectedConnector:u.id,isLoading:l,onChange:r,"data-test-subj":"case-connectors-dropdown",appendAddConnectorButton:!0}):s.a.createElement(o.EuiText,{"data-test-subj":"configure-case-connector-permissions-error-msg",size:"s"},s.a.createElement("span",null,Q.v))),u.type!==J.i.none&&Object(le.h)(b)&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(ie.a,null)),u.type!==J.i.none?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(se,{actionTypeName:y,connectorType:u.type,isLoading:l,mappings:c})):null))))};oe.displayName="Connectors";const re=s.a.memo(oe),ue=[{id:"close-by-user",label:Q.e},{id:"close-by-pushing",label:Q.f}],de=({closureTypeSelected:e,disabled:t,onChangeClosureType:a})=>{const i=Object(n.useCallback)((e=>{a(e)}),[a]);return s.a.createElement(o.EuiRadioGroup,{disabled:t,options:ue,idSelected:e,onChange:i,name:"closure_options","data-test-subj":"closure-options-radio-group"})};de.displayName="ClosureOptionsRadio";const me=s.a.memo(de),pe=({closureTypeSelected:e,disabled:t,onChangeClosureType:a})=>s.a.createElement(o.EuiDescribedFormGroup,{fullWidth:!0,title:s.a.createElement("h3",null,Q.g),description:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,Q.c)),"data-test-subj":"case-closure-options-form-group"},s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:Q.d,"data-test-subj":"case-closure-options-form-row"},s.a.createElement(me,{closureTypeSelected:e,disabled:t,onChangeClosureType:a,"data-test-subj":"case-closure-options-radio"})));pe.displayName="ClosureOptions";const be=s.a.memo(pe);var Ee=a(219),ge=a(18),fe=a(3),ye=a(75);const he=({label:e,onCancel:t,onConfirm:a})=>s.a.createElement(o.EuiConfirmModal,{buttonColor:"danger",cancelButtonText:ge.b,"data-test-subj":"confirm-delete-custom-field-modal",defaultFocusedButton:"confirm",onCancel:t,onConfirm:a,title:ge.e(e),confirmButtonText:ge.c},ge.d);he.displayName="DeleteConfirmationModal";const Ce=s.a.memo(he),je=e=>{const{customFields:t,onDeleteCustomField:a,onEditCustomField:i}=e,[l,c]=Object(n.useState)(null),{euiTheme:r}=Object(o.useEuiTheme)(),u=Object(n.useCallback)((()=>{l&&a(l.key),c(null)}),[a,c,l]),d=Object(n.useCallback)((()=>{c(null)}),[]),m=Boolean(l);return t.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiFlexGroup,{justifyContent:"flexStart","data-test-subj":"custom-fields-list"},s.a.createElement(o.EuiFlexItem,null,t.map((e=>s.a.createElement(s.a.Fragment,{key:e.key},s.a.createElement(o.EuiPanel,{paddingSize:"s","data-test-subj":`custom-field-${e.key}-${e.type}`,hasShadow:!1},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!0},s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,e.label))),s.a.createElement(o.EuiBadge,{color:r.colors.body},(e=>{const t=e&&ye.a[e];return t&&t().label})(e.type)),e.required&&s.a.createElement(o.EuiBadge,{color:r.colors.body},ge.p))),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":`${e.key}-custom-field-edit`,"aria-label":`${e.key}-custom-field-edit`,iconType:"pencil",color:"primary",onClick:()=>i(e.key)})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonIcon,{"data-test-subj":`${e.key}-custom-field-delete`,"aria-label":`${e.key}-custom-field-delete`,iconType:"minusInCircle",color:"danger",onClick:()=>c(e)})))))),s.a.createElement(o.EuiSpacer,{size:"s"}))))),m&&l?s.a.createElement(Ce,{label:l.label,onCancel:d,onConfirm:u}):null)):null};je.displayName="CustomFieldsList";const Fe=s.a.memo(je);a(13);var xe=a(23);const ke=({icon:e=!1,size:t="s"})=>{const a={label:xe.K,size:t,...e&&{iconType:"beaker"},tooltipContent:xe.J,tooltipPosition:"bottom","data-test-subj":"case-experimental-badge"};return s.a.createElement(ve,a)};ke.displayName="ExperimentalBadge";const we=s.a.memo(ke);var ve=m()(o.EuiBetaBadge).withConfig({displayName:"_StyledEuiBetaBadge",componentId:"sc-fbjbsu-0"})(["margin-left:5px;"]);const Oe=({disabled:e,isLoading:t,handleAddCustomField:a,handleDeleteCustomField:i,handleEditCustomField:l,customFields:c})=>{const{permissions:r}=Object(L.a)(),u=r.create&&r.update,[d,m]=Object(n.useState)(!1),p=Object(n.useCallback)((()=>{c.length!==fe.ob||d?(a(),m(!1)):m(!0)}),[a,m,c,d]),b=Object(n.useCallback)((e=>{m(!1),l(e)}),[m,l]);return c.length<fe.ob&&d&&m(!1),u?s.a.createElement(o.EuiDescribedFormGroup,{fullWidth:!0,title:s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},s.a.createElement(o.EuiFlexItem,{grow:!1},ge.u),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(we,null))),description:s.a.createElement("p",null,ge.f),"data-test-subj":"custom-fields-form-group"},s.a.createElement(o.EuiPanel,{paddingSize:"s",color:"subdued",hasBorder:!1,hasShadow:!1},c.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(Fe,{customFields:c,onDeleteCustomField:i,onEditCustomField:b}),d?s.a.createElement(o.EuiFlexGroup,{justifyContent:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger"},ge.l(fe.ob)))):null):null,s.a.createElement(o.EuiSpacer,{size:"m"}),c.length?null:s.a.createElement(o.EuiFlexGroup,{justifyContent:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},ge.n,s.a.createElement(o.EuiSpacer,{size:"m"}))),s.a.createElement(o.EuiFlexGroup,{justifyContent:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{isLoading:t,isDisabled:e||d,size:"s",onClick:p,iconType:"plusInCircle","data-test-subj":"add-custom-field"},ge.a))))):null};Oe.displayName="CustomFields";const Te=s.a.memo(Oe);var Ie=a(144),Se=a(88);const{emptyField:Le,maxLengthField:Ne}=Se.fieldValidators,Me={key:{validations:[{validator:Le(ge.q(ge.h))}]},label:{label:ge.h,validations:[{validator:Le(ge.q(ge.h))},{validator:Ne({length:fe.qb,message:ge.m("field label",fe.qb)})}]},type:{label:ge.k,validations:[{validator:Le(ge.q(ge.h))}]}},Be=({isSubmitting:e,isEditMode:t})=>{const[a,i]=Object(n.useState)(J.l.TEXT),l=Object(n.useCallback)((e=>{i(e.target.value)}),[i]),c=Object(n.useMemo)((()=>{const e=ye.a[a];return null==e?null:e().build()}),[a]),o=null==c?void 0:c.Configure,r=(()=>{const e=[];for(const[t,a]of Object.entries(ye.a)){const n=a();e.push({value:t,text:n.label})}return e})();return s.a.createElement(s.a.Fragment,null,s.a.createElement(D.UseField,{path:"key",component:P.HiddenField}),s.a.createElement(D.UseField,{path:"label",component:P.TextField,componentProps:{euiFieldProps:{"data-test-subj":"custom-field-label-input",fullWidth:!0,autoFocus:!0,isLoading:e}}}),s.a.createElement(D.UseField,{component:P.SelectField,path:"type",componentProps:{euiFieldProps:{options:r,"data-test-subj":"custom-field-type-selector",isLoading:e,disabled:t},onChange:l}}),o?s.a.createElement(o,null):null)};Be.displayName="FormFields";const ze=Object(n.memo)(Be),Pe=({key:e,label:t,type:a,options:n})=>({key:e,label:t,type:a,required:!(null==n||!n.required)&&n.required}),De=({key:e,label:t,type:a,required:n})=>({key:e,options:{required:Boolean(n)},label:t,type:a}),Ge=({onChange:e,initialValue:t})=>{const a=Object(n.useMemo)((()=>Object(Ie.v4)()),[]),{form:i}=Object(D.useForm)({defaultValue:null!=t?t:{key:a,label:"",type:J.l.TEXT,required:!1},options:{stripEmptyFields:!1},schema:Me,serializer:Pe,deserializer:De}),{submit:l,isValid:c,isSubmitting:o}=i;return Object(n.useEffect)((()=>{e&&e({isValid:c,submit:l})}),[e,c,l]),s.a.createElement(D.Form,{form:i},s.a.createElement(ze,{isSubmitting:o,isEditMode:Boolean(t)}))};Ge.displayName="CustomFieldsForm";const _e=s.a.memo(Ge),Ae=({onCloseFlyout:e,onSaveField:t,isLoading:a,disabled:i,customField:l})=>{const c="custom-field-flyout",[r,u]=Object(n.useState)({isValid:void 0,submit:async()=>({isValid:!1,data:{key:"",label:"",type:J.l.TEXT,required:!1}})}),{submit:d}=r,m=Object(n.useCallback)((async()=>{const{isValid:e,data:a}=await d();e&&t(a)}),[t,d]);return s.a.createElement(o.EuiFlyout,{onClose:e,"data-test-subj":c},s.a.createElement(o.EuiFlyoutHeader,{hasBorder:!0,"data-test-subj":`${c}-header`},s.a.createElement(o.EuiTitle,{size:"s"},s.a.createElement("h3",{id:"flyoutTitle"},ge.a))),s.a.createElement(o.EuiFlyoutBody,null,s.a.createElement(_e,{initialValue:l,onChange:u})),s.a.createElement(o.EuiFlyoutFooter,{"data-test-subj":`${c}-footer`},s.a.createElement(o.EuiFlexGroup,{justifyContent:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{onClick:e,"data-test-subj":`${c}-cancel`,disabled:i,isLoading:a},ge.b)),s.a.createElement(o.EuiFlexGroup,{justifyContent:"flexEnd"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButton,{fill:!0,onClick:m,"data-test-subj":`${c}-save`,disabled:i,isLoading:a},ge.s))))))};Ae.displayName="CustomFieldFlyout";const Ve=s.a.memo(Ae);var qe=a(195),Re=a(12),We=a(209),Ue=a(47),$e=a(251);const He=m.a.div.withConfig({displayName:"FormWrapper",componentId:"sc-1f5ixl3-0"})(["",""],(({theme:e})=>Object(d.css)(["& > *{margin-top 40px;}& > :first-child{margin-top:0;}padding-top:",";padding-bottom:",";.euiFlyout{z-index:",";}"],e.eui.euiSizeXL,e.eui.euiSizeXL,e.eui.euiZNavigation+1))),Xe=s.a.memo((()=>{const{permissions:e}=Object(L.a)(),{triggersActionsUi:t}=Object(q.g)().services;Object(k.a)(r.a.casesConfigure);const a=Object(p.a)().isAtLeastGold(),[i,l]=Object(n.useState)(!0),[c,u]=Object(n.useState)(!1),[d,m]=Object(n.useState)(!1),[E,g]=Object(n.useState)(null),[f,y]=Object(n.useState)(!1),[h,C]=Object(n.useState)(null),{data:{id:j,version:F,closureType:x,connector:w,mappings:v,customFields:T},isLoading:I,refetch:S}=Object(H.a)(),{mutate:N,mutateAsync:M,isLoading:B}=(()=>{const e=Object(R.useQueryClient)(),{owner:t}=Object(L.a)(),{showErrorToast:a,showSuccessToast:n}=Object(Ue.a)();return Object(R.useMutation)((({id:e,version:a,closureType:n,customFields:s,connector:i})=>Object(Re.isEmpty)(e)||Object(Re.isEmpty)(a)?Object(U.e)({closure_type:n,connector:i,customFields:null!=s?s:[],owner:t[0]}):Object(U.d)(e,{version:a,closure_type:n,connector:i,customFields:null!=s?s:[]})),{mutationKey:$.c.persistCaseConfiguration,onSuccess:()=>{e.invalidateQueries($.d.configuration({owner:t})),n(We.b)},onError:e=>{a(e,{title:We.a})}})})(),z=I||B,{isLoading:P,data:D=[],refetch:G}=Object(qe.a)(),{isLoading:_,data:A=[],refetch:K}=(()=>{const e=Object(q.j)();return Object(R.useQuery)($.d.connectorTypes(),(({signal:e})=>Object(U.a)({signal:e})),{initialData:[],onError:t=>{e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:W.e})}})})(),J=Object(n.useCallback)((async e=>{g(e),G(),K(),S()}),[K,S,G,g]),Z=Object(n.useCallback)((async e=>{const t=Object(Ee.b)(e);await M({connector:t,closureType:x,customFields:T,id:j,version:F}),J(e)}),[M,x,T,j,F,J]),Y=P||B||I||_,ee=Y||!i||"none"===w.id,te=Object(n.useCallback)((()=>{m(!0)}),[]),ae=Object(n.useCallback)((()=>u(!1)),[u]),ne=Object(n.useCallback)((()=>m(!1)),[]),se=Object(n.useCallback)((e=>{if("add-connector"===e)return void u(!0);const t=Object(le.c)(e,D),a=null!=t?Object(Ee.b)(t):Object(Ee.a)();N({connector:a,closureType:x,customFields:T,id:j,version:F})}),[D,N,x,T,j,F]),ie=Object(n.useCallback)((e=>{N({connector:w,customFields:T,id:j,version:F,closureType:e})}),[j,F,w,T,N]);Object(n.useEffect)((()=>{P||"none"===w.id||D.some((e=>e.id===w.id))?P||"none"!==w.id&&!D.some((e=>e.id===w.id))||l(!0):l(!1)}),[D,w,P]),Object(n.useEffect)((()=>{P||"none"===w.id||g(Object(Ee.c)(D,w))}),[D,w,P]);const ce=Object(n.useMemo)((()=>c?t.getAddConnectorFlyout({onClose:ae,featureId:V.CasesConnectorFeatureId,onConnectorCreated:Z}):null),[c]),oe=Object(n.useMemo)((()=>E&&d?t.getEditConnectorFlyout({connector:E,onClose:ne,onConnectorUpdated:J}):null),[w.id,E,d]),ue=Object(n.useCallback)((()=>{y(!0)}),[y]),de=Object(n.useCallback)((e=>{const t=T.filter((t=>t.key!==e));N({connector:w,customFields:[...t],id:j,version:F,closureType:x})}),[x,j,F,w,T,N]),me=Object(n.useCallback)((e=>{const t=T.find((t=>t.key===e));t&&C(t),y(!0)}),[y,C,T]),pe=Object(n.useCallback)((()=>{y(!1),C(null)}),[y,C]),ge=Object(n.useCallback)((e=>{const t=Object($e.a)(T,e);N({connector:w,customFields:t,id:j,version:F,closureType:x}),y(!1),C(null)}),[x,j,F,w,T,N]),fe=f?s.a.createElement(Ve,{isLoading:I||B,disabled:!e.create||!e.update||I||B,customField:h,onCloseFlyout:pe,onSaveField:ge}):null;return s.a.createElement(o.EuiPageSection,{restrictWidth:!0},s.a.createElement(O.a,{showBackButton:!0,"data-test-subj":"case-configure-title",title:Q.h}),s.a.createElement(o.EuiPageBody,{restrictWidth:!0},s.a.createElement(He,{style:{paddingTop:0}},a&&s.a.createElement(s.a.Fragment,null,!i&&s.a.createElement(X.a,null,s.a.createElement(o.EuiCallOut,{title:Q.y,color:"warning",iconType:"help","data-test-subj":"configure-cases-warning-callout"},s.a.createElement(b.FormattedMessage,{defaultMessage:"The selected connector has been deleted or you do not have the {appropriateLicense} to use it. Either select a different connector or create a new one.",id:"xpack.cases.configure.connectorDeletedOrLicenseWarning",values:{appropriateLicense:s.a.createElement(o.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Q.t)}}))),s.a.createElement(X.a,null,s.a.createElement(be,{closureTypeSelected:x,disabled:B||P||!e.update,onChangeClosureType:ie})),s.a.createElement(X.a,null,s.a.createElement(re,{actionTypes:A,connectors:null!=D?D:[],disabled:B||P||!e.update,handleShowEditFlyout:te,isLoading:Y,mappings:v,onChangeConnector:se,selectedConnector:w,updateConnectorDisabled:ee||!e.update}))),s.a.createElement(X.a,null,s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(Te,{customFields:T,isLoading:z,disabled:z,handleAddCustomField:ue,handleDeleteCustomField:de,handleEditCustomField:me}))),ce,oe,fe)))}));Xe.displayName="ConfigureCases";const Ke=e=>E.i18n.translate("xpack.cases.noPrivileges.message",{values:{pageName:e},defaultMessage:"To view {pageName} page, you must update privileges. For more information, contact your Kibana administrator."}),Qe=E.i18n.translate("xpack.cases.noPrivileges.title",{defaultMessage:"Privileges required"}),Je=E.i18n.translate("xpack.cases.noPrivileges.button",{defaultMessage:"Back to Cases"}),Ze=s.a.memo((({pageName:e})=>{const{navigateToAllCases:t}=Object(r.i)();return s.a.createElement(o.EuiEmptyPrompt,{iconColor:"default",iconType:"casesApp",title:s.a.createElement("h2",null,Qe),titleSize:"xs",body:s.a.createElement("p",null,Ke(e)),actions:s.a.createElement(o.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},Je)})}));Ze.displayName="NoPrivilegesPage";const Ye=E.i18n.translate("xpack.cases.createCase",{defaultMessage:"Create Case"}),et=E.i18n.translate("xpack.cases.configureCases",{defaultMessage:"Configure Cases"}),tt=E.i18n.translate("xpack.cases.badge.readOnly.text",{defaultMessage:"Read only"}),at=E.i18n.translate("xpack.cases.badge.readOnly.tooltip",{defaultMessage:"Unable to create or edit cases"});var nt=a(159);const st=Object(n.lazy)((()=>a.e(5).then(a.bind(null,338)))),it=({onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:u,useFetchAlertData:d,refreshRef:m,timelineIntegration:p})=>{const{basePath:b,permissions:E}=Object(L.a)(),{navigateToAllCases:g}=Object(r.i)(),{navigateToCaseView:f}=Object(r.j)();!function(){const{permissions:e}=Object(L.a)(),t=Object(q.g)().services.chrome,a=Object(n.useCallback)((()=>{Object(nt.c)(e)&&t.setBadge({text:tt,tooltip:at,iconType:"glasses"})}),[t,e]);Object(n.useEffect)((()=>(a(),()=>{t.setBadge()})),[a,t])}();const y=Object(n.useCallback)((async({id:e})=>f({detailName:e})),[f]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.ReactQueryDevtools,{initialIsOpen:!1}),s.a.createElement(l.c,null,s.a.createElement(l.a,{strict:!0,exact:!0,path:b},s.a.createElement(z,null)),s.a.createElement(l.a,{path:Object(r.h)(b)},E.create?s.a.createElement(A,{onSuccess:y,onCancel:g,timelineIntegration:p}):s.a.createElement(Ze,{pageName:Ye})),s.a.createElement(l.a,{path:Object(r.f)(b)},E.settings?s.a.createElement(Xe,null):s.a.createElement(Ze,{pageName:et})),s.a.createElement(l.a,{exact:!0,path:[Object(r.e)(b),Object(r.d)(b)]},s.a.createElement(n.Suspense,{fallback:s.a.createElement(o.EuiLoadingSpinner,null)},s.a.createElement(st,{onComponentInitialized:e,actionsNavigation:t,ruleDetailsNavigation:a,showAlertDetails:u,useFetchAlertData:d,refreshRef:m,timelineIntegration:p}))),s.a.createElement(l.a,{path:b},s.a.createElement(i.Redirect,{to:b}))))};it.displayName="CasesRoutes";const lt=s.a.memo(it)},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),s=a.n(n),i=a(5),l=a(2);const c=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),o=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),r=({type:e="warning"})=>s.a.createElement(i.EuiCallOut,{title:c,color:e,iconType:"warning","data-test-subj":"deprecated-connector-warning-callout"},o);r.displayName="DeprecatedCallout";const u=s.a.memo(r)},161:function(e,t,a){"use strict";a.d(t,"g",(function(){return i})),a.d(t,"j",(function(){return l})),a.d(t,"i",(function(){return c})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return p}));var n=a(2),s=a(23);a.d(t,"c",(function(){return s.M}));const i=e=>"none"===e?n.i18n.translate("xpack.cases.caseView.pushThirdPartyIncident",{defaultMessage:"Push as external incident"}):n.i18n.translate("xpack.cases.caseView.pushNamedIncident",{values:{thirdParty:e},defaultMessage:"Push as { thirdParty } incident"}),l=e=>"none"===e?n.i18n.translate("xpack.cases.caseView.updateThirdPartyIncident",{defaultMessage:"Update external incident"}):n.i18n.translate("xpack.cases.caseView.updateNamedIncident",{values:{thirdParty:e},defaultMessage:"Update { thirdParty } incident"}),c=e=>"none"===e?n.i18n.translate("xpack.cases.caseView.lockedIncidentTitleNone",{defaultMessage:"External incident is up to date"}):n.i18n.translate("xpack.cases.caseView.lockedIncidentTitle",{values:{thirdParty:e},defaultMessage:"{ thirdParty } incident is up to date"}),o=n.i18n.translate("xpack.cases.caseView.lockedIncidentDesc",{defaultMessage:"No update is required"}),r=n.i18n.translate("xpack.cases.caseView.pushToService.configureConnector",{defaultMessage:"To create and update a case in an external system, select a connector."}),u=n.i18n.translate("xpack.cases.caseView.pushToServiceDisableByConfigTitle",{defaultMessage:"Enable external service in Kibana configuration file"}),d=n.i18n.translate("xpack.cases.caseView.pushToServiceDisableByLicenseTitle",{defaultMessage:"Upgrade to an appropriate license"}),m=n.i18n.translate("xpack.cases.caseView.cloudDeploymentLink",{defaultMessage:"cloud deployment"}),p=n.i18n.translate("xpack.cases.caseView.actionsConfigurationLink",{defaultMessage:"Alerting and action settings in Kibana"})},196:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a(2),s=a(1),i=a(6),l=a(36),c=a(35);const o={[l.a.cases]:n.i18n.translate("xpack.cases.breadcrumbs.all_cases",{defaultMessage:"Cases"}),[l.a.casesCreate]:n.i18n.translate("xpack.cases.breadcrumbs.create_case",{defaultMessage:"Create"}),[l.a.casesConfigure]:n.i18n.translate("xpack.cases.breadcrumbs.settings",{defaultMessage:"Settings"})},r=()=>{const{chrome:{docTitle:e,setBreadcrumbs:t},application:{navigateToUrl:a}}=Object(i.g)().services;return Object(s.useCallback)((n=>{e.change(function(e){return e.map((({text:e})=>{var t;return null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:""})).reverse()}(n)),t(n.map((e=>{const{href:t,onClick:n}=e;return{...e,...t&&!n?{onClick:e=>{e&&e.preventDefault(),a(t)}}:{}}})))}),[e,t,a])},u=e=>{const{appId:t,appTitle:a}=Object(c.a)(),{getAppUrl:n}=Object(i.h)(t),u=r();Object(s.useEffect)((()=>{var t;u([{text:a,href:n()},{text:o[l.a.cases],...e!==l.a.cases?{href:n({deepLinkId:l.a.cases})}:{}},...e!==l.a.cases?[{text:o[e]}]:[]]),null===(t=i.b.get().serverless)||void 0===t||t.setBreadcrumbs([])}),[e,a,n,u])},d=e=>{const{appId:t,appTitle:a}=Object(c.a)(),{getAppUrl:n}=Object(i.h)(t),u=r();Object(s.useEffect)((()=>{var t;const s={text:e},c=[{text:a,href:n()},{text:o[l.a.cases],href:n({deepLinkId:l.a.cases})},s];u(c),null===(t=i.b.get().serverless)||void 0===t||t.setBreadcrumbs([s])}),[e,a,n,u])}},197:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(2),s=a(23);a.d(t,"a",(function(){return s.l})),a.d(t,"d",(function(){return s.J})),a.d(t,"e",(function(){return s.K})),a.d(t,"f",(function(){return s.P})),a.d(t,"g",(function(){return s.pb})),n.i18n.translate("xpack.cases.header.editableTitle.save",{defaultMessage:"Save"}),n.i18n.translate("xpack.cases.header.editableTitle.cancel",{defaultMessage:"Cancel"});const i=n.i18n.translate("xpack.cases.header.badge.betaLabel",{defaultMessage:"Beta"}),l=n.i18n.translate("xpack.cases.header.badge.betaDesc",{defaultMessage:"This feature is currently in beta. If you encounter any bugs or have feedback, please open an issue or visit our discussion forum."})},198:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(56),s=a.n(n),i=a(1),l=a.n(i),c=a(5),o=a(36);const r=s()((({iconSide:e,children:t,...a})=>l.a.createElement(c.EuiLink,a,t))).withConfig({displayName:"Link",componentId:"sc-8ljuz4-0"})(["",""],(({iconSide:e,theme:t})=>Object(n.css)(["align-items:center;display:inline-flex;vertical-align:top;white-space:nowrap;"," ",""],"left"===e&&Object(n.css)([".euiIcon{margin-right:",";}"],t.eui.euiSizeXS),"right"===e&&Object(n.css)(["flex-direction:row-reverse;.euiIcon{margin-left:",";}"],t.eui.euiSizeXS))));r.displayName="Link";const u=l.a.memo((({ariaLabel:e,children:t,color:a,dataTestSubj:n,disabled:s,href:o,iconSide:u="left",iconSize:d="s",iconType:m,onClick:p})=>{const b=Object(i.useCallback)((e=>"object"==typeof e&&null!=e&&"props"in e&&e.props&&e.props.children?b(e.props.children):null!=e&&Object.keys(e).length>0?e:""),[]),E=Object(i.useMemo)((()=>e||b(t)),[e,t,b]);return l.a.createElement(r,{className:"casesLinkIcon",color:a,"data-test-subj":n,disabled:s,href:o,iconSide:u,onClick:p,"aria-label":E},l.a.createElement(c.EuiIcon,{size:d,type:m}),l.a.createElement("span",{className:"casesLinkIcon__label"},t))}));u.displayName="LinkIcon";var d=a(250),m=a(197),p=a(35);const b=s.a.header.attrs({className:"casesHeaderPage"}).withConfig({displayName:"Header",componentId:"sc-avl3zp-0"})(["",""],(({border:e,theme:t})=>Object(n.css)(["margin-bottom:",";",""],t.eui.euiSizeL,e&&Object(n.css)(["border-bottom:",";padding-bottom:",";.euiProgress{top:",";}"],t.eui.euiBorderThin,t.eui.euiSizeL,t.eui.euiSizeL))));b.displayName="Header";const E=s()(c.EuiFlexItem).withConfig({displayName:"FlexItem",componentId:"sc-avl3zp-1"})(["display:block;"]);var g=s()(E).withConfig({displayName:"_StyledFlexItem",componentId:"sc-avl3zp-2"})({overflow:"hidden"});E.displayName="FlexItem";const f=s.a.div.attrs({className:"casesHeaderPage__linkBack"}).withConfig({displayName:"LinkBack",componentId:"sc-avl3zp-3"})(["",""],(({theme:e})=>Object(n.css)(["font-size:",";line-height:",";margin-bottom:",";"],e.eui.euiFontSizeXS,e.eui.euiLineHeight,e.eui.euiSizeS)));f.displayName="LinkBack";const y=({showBackButton:e=!1,border:t,children:a,isLoading:n,title:s,titleNode:r,"data-test-subj":y})=>{const{releasePhase:h}=Object(p.a)(),{getAllCasesUrl:C,navigateToAllCases:j}=Object(o.i)(),F=Object(i.useCallback)((e=>{e&&e.preventDefault(),j()}),[j]);return l.a.createElement(b,{border:t,"data-test-subj":y},l.a.createElement(c.EuiFlexGroup,{alignItems:"center"},l.a.createElement(g,null,e&&l.a.createElement(f,null,l.a.createElement(u,{dataTestSubj:"backToCases",onClick:F,href:C(),iconType:"arrowLeft"},m.a)),r||l.a.createElement(d.a,{title:s,releasePhase:h}),t&&n&&l.a.createElement(c.EuiProgress,{size:"xs",color:"accent"})),a&&l.a.createElement(E,{"data-test-subj":"header-page-supplements",grow:!1},a)))};y.displayName="HeaderPage";const h=l.a.memo(y)},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(56),s=a.n(n);const i=s.a.div.withConfig({displayName:"SectionWrapper",componentId:"sc-11g3qlk-0"})(["box-sizing:content-box;max-width:1175px;width:100%;"]),l=s.a.div.withConfig({displayName:"Wrapper",componentId:"sc-11g3qlk-1"})(["display:flex;flex-direction:column;"])},247:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(46),s=a(6),i=a(81),l=a(48),c=a(4),o=a(80);const r=c.i.jira,u=()=>{const e=Object(s.j)();return Object(n.useQuery)(o.d.license(),(async({signal:e})=>{var t;return null!==(t=(await Object(i.f)(e)).find((e=>e.id===r)))&&void 0!==t?t:null}),{onError:t=>{"AbortError"!==t.name&&e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:l.e})}})}},248:function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return b}));var n=a(5),s=a(136),i=a(1),l=a.n(i),c=a(161),o=a(249);const r=()=>({id:"license-error",title:"",description:l.a.createElement(s.FormattedMessage,{defaultMessage:"Opening cases in external systems is available when you have the {appropriateLicense}, are using a {cloud}, or are testing out a Free Trial.",id:"xpack.cases.caseView.pushToServiceDisableByLicenseDescription",values:{appropriateLicense:l.a.createElement(n.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},c.c),cloud:l.a.createElement(n.EuiLink,{href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank"},c.d)}})}),u=()=>({id:"kibana-config-error",title:c.e,description:l.a.createElement(s.FormattedMessage,{defaultMessage:"The kibana.yml file is configured to only allow specific connectors. To enable opening a case in external systems, add .[actionTypeId] (ex: .servicenow | .jira) to the xpack.actions.enabledActiontypes setting. For more information, see {link}.",id:"xpack.cases.caseView.pushToServiceDisableByConfigDescription",values:{link:l.a.createElement(n.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/alert-action-settings-kb.html",target:"_blank"},c.b)}})}),d=e=>{let t=[];return null==e||e.enabledInLicense||(t=[...t,r()]),null==e||e.enabledInConfig||(t=[...t,u()]),t},m=()=>({id:"connector-missing-error",title:"",description:c.a}),p=()=>({id:"connector-deleted-error",title:"",description:l.a.createElement(s.FormattedMessage,{defaultMessage:"The connector used to send updates to the external service has been deleted or you do not have the {appropriateLicense} to use it. To update cases in external systems, select a different connector or create a new one.",id:"xpack.cases.configureCases.warningMessage",values:{appropriateLicense:l.a.createElement(n.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},c.c)}}),errorType:"danger"}),b=()=>({id:o.a,title:"",description:l.a.createElement(s.FormattedMessage,{defaultMessage:"Closed cases cannot be sent to external systems. Reopen the case if you want to open or update it in an external system.",id:"xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedDescription"})})},249:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="closed-case-push-error"},250:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return b}));var n=a(1),s=a.n(n),i=a(12),l=a(5),c=a(193),o=a(197);const r=()=>s.a.createElement(l.EuiBetaBadge,{label:o.e,tooltipContent:o.d,tooltipPosition:"bottom"});r.displayName="ExperimentalBadge";const u=s.a.memo(r),d=()=>s.a.createElement(l.EuiBetaBadge,{label:o.c,tooltipContent:o.b,tooltipPosition:"bottom"});d.displayName="BetaBadge";const m=s.a.memo(d),p=({title:e,releasePhase:t,children:a})=>s.a.createElement(l.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",responsive:!1},s.a.createElement(l.EuiFlexItem,{grow:!1},s.a.createElement(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},s.a.createElement(l.EuiFlexItem,{grow:!1},s.a.createElement(l.EuiTitle,{size:"l"},s.a.createElement("h1",{"data-test-subj":"header-page-title"},Object(i.isString)(e)?s.a.createElement(c.a,{text:e}):e))),s.a.createElement(l.EuiFlexItem,{grow:!1},a))),s.a.createElement(l.EuiFlexItem,{grow:!1},"experimental"===t&&s.a.createElement(r,null),"beta"===t&&s.a.createElement(d,null)));p.displayName="Title";const b=s.a.memo(p)},251:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t)=>-1===e.findIndex((e=>e.key===t.key))?[...e,t]:e.map((e=>e.key!==t.key?e:t))}}]);