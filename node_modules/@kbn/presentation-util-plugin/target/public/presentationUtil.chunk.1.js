(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[1],{49:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(50);case"v8light":return n(52)}},50:function(e,t,n){var i=n(14),o=n(51);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);i(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},51:function(e,t,n){(t=n(15)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},52:function(e,t,n){var i=n(14),o=n(53);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);i(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},53:function(e,t,n){(t=n(15)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},54:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(55);case"v8light":return n(57)}},55:function(e,t,n){var i=n(14),o=n(56);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);i(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},56:function(e,t,n){(t=n(15)(!1)).push([e.i,".fieldPickerSelectable{height:360px}.fieldPickerSelectable .presFieldPicker__fieldButton[aria-checked=true]{background-color:#36a2ef1a}.fieldPickerSelectable .euiSelectableMessage{height:100%}",""]),e.exports=t},57:function(e,t,n){var i=n(14),o=n(58);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);i(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},58:function(e,t,n){(t=n(15)(!1)).push([e.i,".fieldPickerSelectable{height:360px}.fieldPickerSelectable .presFieldPicker__fieldButton[aria-checked=true]{background-color:#0077cc1a}.fieldPickerSelectable .euiSelectableMessage{height:100%}",""]),e.exports=t},66:function(e,t,n){"use strict";n.r(t),n.d(t,"FieldPicker",(function(){return x}));var i=n(12),o=n.n(i),l=n(16),s=n.n(l),a=n(13),r=n(0),c=n.n(r),d=n(5),u=n(9),p=n(1);const b={iconType:"questionInCircle",color:"gray"},f={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function k({type:e,label:t,size:n="s",scripted:i,className:l,...a}){const r=f[e]||b;return Object(p.jsx)(u.EuiToken,o()({},r,{className:s()("kbnFieldIcon",l),"aria-label":t||e,title:t||e,size:n,fill:i?"dark":void 0},a))}n(49);Object.keys({xs:"kbnFieldButton--xs",s:"kbnFieldButton--s"});var g=n(31);function h({availableFieldTypes:e,onFieldTypesChange:t,setFocusToSearch:n,fieldTypesValue:i,buttonProps:l}){const[s,a]=Object(r.useState)(!1),c=Object(p.jsx)(u.EuiFilterButton,o()({},l,{"data-test-subj":"toggleFieldFilterButton",iconType:"arrowDown",isSelected:i.length>0,numFilters:0,hasActiveFilters:i.length>0,numActiveFilters:i.length,onClick:()=>{a(!s)}}),Object(p.jsx)(g.FormattedMessage,{id:"presentationUtil.fieldSearch.fieldFilterButtonLabel",defaultMessage:"Filter by type"}));return Object(p.jsx)(u.EuiFilterGroup,{fullWidth:!0},Object(p.jsx)(u.EuiInputPopover,{panelPaddingSize:"none",display:"block",isOpen:s,closePopover:()=>{a(!1)},fullWidth:!0,input:c,focusTrapProps:{returnFocus:!1,onDeactivation:n}},Object(p.jsx)(u.EuiContextMenuPanel,{items:e.map((e=>Object(p.jsx)(u.EuiContextMenuItem,{key:e,icon:i.includes(e)?"check":"empty","data-test-subj":`typeFilter-${e}`,onClick:()=>{i.includes(e)?t(i.filter((t=>t!==e))):t([...i,e])}},Object(p.jsx)(u.EuiFlexGroup,{gutterSize:"xs",responsive:!1},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(k,{type:e,label:e})),Object(p.jsx)(u.EuiFlexItem,null,e)))))})))}n(54);const x=({dataView:e,onSelectField:t,filterPredicate:n,selectedFieldName:i,selectableProps:l,...b})=>{const f=Object(r.useRef)(i),[g,x]=Object(r.useState)([]),[F,_]=Object(r.useState)(null),[y,m]=Object(r.useState)([]),B=Object(r.useMemo)((()=>{var t;return Object(a.sortBy)((null!==(t=null==e?void 0:e.fields)&&void 0!==t?t:[]).filter((e=>0===g.length||g.includes(e.type))).filter((e=>!n||n(e))),["name"]).sort((e=>e.name===f.current?-1:1))}),[e,n,g]);Object(r.useEffect)((()=>{if(!e)return;const t=(null!=B?B:[]).map((e=>{var t;return{key:e.name,label:null!==(t=e.displayName)&&void 0!==t?t:e.name,className:"presFieldPicker__fieldButton",checked:e.name===i?"on":void 0,"data-test-subj":`field-picker-select-${e.name}`,prepend:Object(p.jsx)(k,{type:e.type,label:e.name,scripted:e.scripted,className:"eui-alignMiddle"})}}));m(t)}),[B,e,n,i,g]);const j=Object(r.useMemo)((()=>e?Object(a.uniq)(e.fields.filter((e=>!n||n(e))).map((e=>e.type))):[]),[e,n]),T=Object(r.useCallback)((()=>{null==F||F.focus()}),[F]),v=Object(p.jsx)(u.EuiFormRow,{fullWidth:!0},Object(p.jsx)(h,{setFocusToSearch:T,onFieldTypesChange:e=>x(e),fieldTypesValue:g,availableFieldTypes:j,buttonProps:{disabled:Boolean(null==l?void 0:l.isLoading)}}));return Object(p.jsx)(u.EuiSelectable,o()({},b,l,{className:s()("fieldPickerSelectable",{fieldPickerSelectableLoading:null==l?void 0:l.isLoading}),emptyMessage:d.i18n.translate("presentationUtil.fieldPicker.noFieldsLabel",{defaultMessage:"No matching fields"}),"aria-label":d.i18n.translate("presentationUtil.fieldPicker.selectableAriaLabel",{defaultMessage:"Select a field"}),searchable:!0,options:y,onChange:(n,i,o)=>{if(m(n),!e||!o.key)return;const l=e.getFieldByName(o.key);l&&(null==t||t(l))},searchProps:{"data-test-subj":"field-search-input",placeholder:d.i18n.translate("presentationUtil.fieldSearch.searchPlaceHolder",{defaultMessage:"Search field names"}),disabled:Boolean(null==l?void 0:l.isLoading),inputRef:_},listProps:{isVirtualized:!0,showIcons:!1,bordered:!0,truncationProps:{truncation:"middle"}},height:"full"}),((e,t)=>Object(p.jsx)(c.a.Fragment,null,t,Object(p.jsx)(u.EuiSpacer,{size:"s"}),v,Object(p.jsx)(u.EuiSpacer,{size:"s"}),e)))};t.default=x}}]);