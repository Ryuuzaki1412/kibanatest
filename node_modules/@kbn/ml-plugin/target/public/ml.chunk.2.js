/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[2,34],{103:function(e,t,a){"use strict";a.d(t,"s",(function(){return _})),a.d(t,"t",(function(){return x})),a.d(t,"u",(function(){return j})),a.d(t,"y",(function(){return v})),a.d(t,"x",(function(){return O})),a.d(t,"z",(function(){return y})),a.d(t,"D",(function(){return g})),a.d(t,"E",(function(){return h})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return s})),a.d(t,"h",(function(){return o})),a.d(t,"i",(function(){return l})),a.d(t,"j",(function(){return r})),a.d(t,"m",(function(){return p})),a.d(t,"n",(function(){return f})),a.d(t,"o",(function(){return u})),a.d(t,"p",(function(){return c})),a.d(t,"r",(function(){return b})),a.d(t,"q",(function(){return m})),a.d(t,"A",(function(){return k})),a.d(t,"B",(function(){return S})),a.d(t,"F",(function(){return E})),a.d(t,"G",(function(){return C})),a.d(t,"H",(function(){return M})),a.d(t,"c",(function(){return D})),a.d(t,"e",(function(){return A})),a.d(t,"g",(function(){return I})),a.d(t,"k",(function(){return w})),a.d(t,"l",(function(){return N})),a.d(t,"v",(function(){return R})),a.d(t,"w",(function(){return B})),a.d(t,"C",(function(){return P}));const n={OUTLIER_DETECTION:"outlier_detection",REGRESSION:"regression",CLASSIFICATION:"classification"},i={ANALYZING:"analyzing",FAILED:"failed",REINDEXING:"reindexing",STARTED:"started",STARTING:"starting",STOPPED:"stopped"},s="ml",r={ANALYTICS:"analytics",ANALYTICS_JOB_MISSING:"analytics-job-missing",TRANSFORM:"transform",INDEX:"index",TRAINED_MODEL:"trainedModel",INGEST_PIPELINE:"ingestPipeline"},o="feature_importance",l="feature_influence",c="top_classes",u="outlier_score";let d,f;!function(e){e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance"}(d||(d={})),function(e){e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn"}(f||(f={}));const p=0,b=1,m=100,g=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.OUTLIER_DETECTION},h=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.REGRESSION},y=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===n.CLASSIFICATION},j=e=>{let t="";return h(e)&&(t=e.regression.dependent_variable),y(e)&&(t=e.classification.dependent_variable),t},O=e=>{let t;return h(e)&&void 0!==e.regression.prediction_field_name?t=e.regression.prediction_field_name:y(e)&&void 0!==e.classification.prediction_field_name&&(t=e.classification.prediction_field_name),t},x=e=>`${j(e)}_prediction`,_=e=>{const t=Object.keys(e||{});return 1===t.length?t[0]:"unknown"},v=e=>{let t;return h(e)&&(t=e.regression.training_percent),y(e)&&(t=e.classification.training_percent),t};var T=a(22);function S(e){return Object(T.a)(e,["classes"])&&Array.isArray(e.classes)}function C(e){return Object(T.a)(e,["importance"])}function k(e){return Object(T.a)(e,["classes"])&&Array.isArray(e.classes)}function E(e){return Object(T.a)(e,["baseline"])}var F=a(118);const A=8,D=new Set([F.a.UNSIGNED_LONG,F.a.LONG,F.a.INTEGER,F.a.SHORT,F.a.BYTE]),I=new Set([F.a.DOUBLE,F.a.FLOAT,F.a.HALF_FLOAT,F.a.SCALED_FLOAT]),w="ml__id_copy",N="ml__incremental_id",M=(e,t,a)=>{const n=a.dest.results_field;if(g(a.analysis)){if(e===`${n}.${u}`)return-1;if(t===`${n}.${u}`)return 1}if(y(a.analysis)||h(a.analysis)){const i=j(a.analysis),s=((e,t,a)=>`${e}.${O(t)||x(t)}`)(n,a.analysis);if(e===`${n}.is_training`)return-1;if(t===`${n}.is_training`)return 1;if(e===s)return-1;if(t===s)return 1;if(e===i||e===i.replace(/\.keyword$/,""))return-1;if(t===i||t===i.replace(/\.keyword$/,""))return 1;if(e===`${n}.prediction_probability`)return-1;if(t===`${n}.prediction_probability`)return 1}const i=typeof e,s=typeof t,r=e.split("."),o=r[0],l=t.split("."),c=l[0];return o===n&&r.length>1&&c!==n?(r.shift(),r.shift(),r.join(".")===t?1:r.join(".").localeCompare(t)):c===n&&l.length>1&&o!==n?(l.shift(),l.shift(),l.join(".")===e?-1:e.localeCompare(l.join("."))):"string"!==i&&"string"===s?1:"string"===i&&"string"!==s?-1:e.localeCompare(t)},R=e=>{let t;return y(e)&&void 0!==e.classification.num_top_classes&&(t=e.classification.num_top_classes),t},B=e=>{let t;return h(e)&&void 0!==e.regression.num_top_feature_importance_values?t=e.regression.num_top_feature_importance_values:y(e)&&void 0!==e.classification.num_top_feature_importance_values&&(t=e.classification.num_top_feature_importance_values),t};function P(e){return Object(T.a)(e,["dest","analysis","id"])&&"string"==typeof e.id}},123:function(e,t,a){"use strict";a.d(t,"d",(function(){return n.f})),a.d(t,"l",(function(){return n.m})),a.d(t,"n",(function(){return n.n})),a.d(t,"a",(function(){return n.b})),a.d(t,"i",(function(){return n.g})),a.d(t,"k",(function(){return n.l})),a.d(t,"j",(function(){return n.k})),a.d(t,"b",(function(){return n.d})),a.d(t,"c",(function(){return n.e})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u.a})),a.d(t,"h",(function(){return d.a})),a.d(t,"m",(function(){return W})),a.d(t,"o",(function(){return Y}));var n=a(125),i=a(107),s=a(151),r=a(11),o=a(160);const l=async(e,t,a,n)=>{if(void 0!==e){const{pagination:l,setErrorMessage:c,setRowCountInfo:u,setStatus:d,setTableItems:f,sortingColumns:p}=t;c(""),d(s.b.LOADING);try{const t=p.map((e=>{const{id:t}=e;return e.id=o.a.isKeywordAndTextType(t)?`${t}.keyword`:t,e})).reduce(((e,t)=>(e[t.id]={order:t.direction},e)),{}),{pageIndex:i,pageSize:c}=l,b=await r.ml.esSearch({index:e.dest.index,body:{fields:["*"],_source:!1,query:a,from:i*c,size:c,...Object.keys(t).length>0?{sort:t}:{}}});n.didCancel||(u({rowCount:"number"==typeof b.hits.total?b.hits.total:b.hits.total.value,rowCountRelation:"number"==typeof b.hits.total?"eq":b.hits.total.relation}),f(b.hits.hits.map((t=>{var a;return Object(s.j)(null!==(a=t.fields)&&void 0!==a?a:{},(t=>t.startsWith(`${e.dest.results_field}.feature_importance`)||t.startsWith(`${e.dest.results_field}.feature_influence`)))}))),d(s.b.LOADED))}catch(e){c(Object(i.b)(e)),d(s.b.ERROR)}}},c=(e,t)=>{if(void 0!==e){const{selectedFields:a,docFields:n}=o.a.getDefaultFields(e,t),i={},s=[];return n.forEach((e=>{i[e.id]=e.type,s.push(e.id)})),{defaultSelectedFields:a.map((e=>e.id)),fieldTypes:i,tableFields:s}}return{defaultSelectedFields:[],fieldTypes:{},tableFields:[]}};var u=a(209),d=a(242),f=a(2),p=a.n(f),b=a(29),m=a(103),g=a(15),h=a(134),y=a.n(h),j=a(3);const O="feature_name",x="importance",_=1e-5,v=j.i18n.translate("xpack.ml.dataframe.analytics.decisionPathFeatureOtherTitle",{defaultMessage:"other"}),T=e=>Array.isArray(e)&&e.length>0&&3===e[0].length,S=e=>null==e?"":"boolean"==typeof e?e?"True":"False":"true"===e?"True":"false"===e?"False":"number"==typeof e?e.toString():e,C=({baseline:e,featureImportance:t,predictedValue:a,predictedProbability:n})=>({decisionPathData:Object(f.useMemo)((()=>{if(void 0!==e)return Object(m.F)(e)?k({baseline:e.baseline,featureImportance:t,predictedValue:a}):Object(m.A)(e)?F({baselines:e.classes,featureImportance:t,currentClass:a,predictedProbability:n}):void 0}),[e,t,a])}),k=({baseline:e,featureImportance:t,predictedValue:a})=>{const n=t.map((e=>({...e,absImportance:Math.abs(e[x])})));if(e&&void 0!==a&&Number.isFinite(a)){const t=a-n.reduce(((e,t)=>e+t.importance),0)-e;n.push({[O]:j.i18n.translate("xpack.ml.dataframe.analytics.decisionPathFeatureBaselineTitle",{defaultMessage:"baseline"}),[x]:e,absImportance:-1}),Math.abs(t)>_&&n.push({[O]:v,[x]:t,absImportance:0})}const i=n.filter((e=>void 0!==e)),s=i.sort(((e,t)=>t.absImportance-e.absImportance)).map((e=>[e[O],e[x],NaN]));let r=0;for(let e=i.length-1;e>=0;e--)r+=s[e][1],s[e][2]=r;return s},E=({predictedProbability:e,decisionPlotData:t})=>{if(e&&t.length>0){const a=e-t[0][2];Math.abs(a)>_&&(t.forEach((e=>e[2]=e[2]+a)),t.push([v,a,t[t.length-1][2]-a]))}return t},F=({baselines:e,featureImportance:t,currentClass:a,predictedProbability:n})=>{if(void 0===a||!(Array.isArray(e)&&e.length>=2))return[];const i=t.map((e=>{const t=Array.isArray(e.classes)?e.classes.find((e=>S(e.class_name)===S(a))):e;if(t&&"number"==typeof t[x])return{[O]:e[O],[x]:t[x],absImportance:Math.abs(t[x])}})),s=e.find((e=>S(e.class_name)===S(a))),r=null!=s&&s.baseline?null==s?void 0:s.baseline:0,o=i.filter((e=>void 0!==e)).sort(((e,t)=>t.absImportance-e.absImportance)).map((e=>[e[O],e[x],NaN]));return 2===e.length?(({decisionPlotData:e,startingBaseline:t,predictedProbability:a})=>{const n=e;let i=t;for(let e=n.length-1;e>=0;e--){i+=n[e][1];const t=Math.exp(i)/(Math.exp(i)+1);n[e][2]=t}return E({predictedProbability:a,decisionPlotData:n})})({startingBaseline:r,decisionPlotData:o,predictedProbability:n}):(({baselines:e,decisionPlotData:t,startingBaseline:a,featureImportance:n,predictedProbability:i})=>{const s=(({baselines:e,featureImportance:t})=>{let a=0;for(let n=0;n<e.length;n++){let i=0;for(let a=0;a<t.length;a++){const s=t[a],r=Array.isArray(s.classes)?s.classes.find((t=>S(t.class_name)===S(e[n].class_name))):s;r&&void 0!==r.importance&&"number"==typeof r[x]&&(i+=r.importance)}a+=Math.exp(e[n].baseline+i)}return a})({baselines:e,featureImportance:n}),r=a;let o=0;for(let e=t.length-1;e>=0;e--){o+=t[e][1];const a=Math.exp(r+o);t[e][2]=a/s}return E({predictedProbability:i,decisionPlotData:t})})({baselines:e,decisionPlotData:o,startingBaseline:r,featureImportance:t,predictedProbability:n})};var A=a(67),D=a(37),I=a(154),w=a(6);const{euiColorFullShade:N,euiColorMediumShade:M}=D.euiLightVars,R={line:{strokeWidth:1,stroke:N,opacity:.75}},B={axes:{axisLine:{stroke:M},tickLabel:{fontSize:10,fill:M},tickLine:{stroke:M},gridLine:{horizontal:{dash:[1,2]},vertical:{strokeWidth:0}}}},P=Object(w.jsx)(b.EuiIcon,{type:"dot",size:"m"}),L=({decisionPathData:e,predictionFieldName:t,minDomain:a,maxDomain:n,baseline:i})=>{const s=Object(f.useMemo)((()=>i&&Object(m.F)(i)?[{dataValue:i.baseline,header:Object(I.a)(i.baseline,"").toString(),details:j.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathBaselineText",{defaultMessage:"baseline (average of predictions for all data points in the training data set)"})}]:void 0),[i]),r=s?j.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathLinePredictionTitle",{defaultMessage:"Prediction"}):j.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathLinePredictionProbabilityTitle",{defaultMessage:"Prediction probability"}),o=Object(f.useCallback)((e=>Object(I.a)(e,"").toString()),[]);return Object(w.jsx)("div",{"data-test-subj":"mlDFADecisionPathChart"},Object(w.jsx)(A.Chart,{size:{height:125+10*e.length}},Object(w.jsx)(A.Settings,{theme:B,rotation:90,locale:j.i18n.getLocale()}),s&&Object(w.jsx)(A.LineAnnotation,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathBaseline",domainType:A.AnnotationDomainType.YDomain,dataValues:s,style:R,marker:P}),Object(w.jsx)(A.Axis,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathXAxis",tickFormat:o,title:j.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.decisionPathXAxisTitle",{defaultMessage:"{xAxisLabel} for '{predictionFieldName}'",values:{predictionFieldName:t,xAxisLabel:r}}),gridLine:{visible:!1},position:A.Position.Top,showOverlappingTicks:!0,domain:a&&n?{min:a,max:n}:void 0}),Object(w.jsx)(A.Axis,{gridLine:{visible:!0},id:"left",position:A.Position.Left}),Object(w.jsx)(A.LineSeries,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathLine",name:r,xScaleType:A.ScaleType.Ordinal,yScaleType:A.ScaleType.Linear,xAccessor:0,yAccessors:[2],data:e})))},$=()=>Object(w.jsx)(b.EuiCallOut,{color:"warning"},Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.regressionDecisionPathDataMissingCallout",defaultMessage:"No decision path data available."})),G=({baseline:e,featureImportance:t,predictedValue:a,predictionFieldName:n})=>{const{decisionPathData:i}=C({baseline:e,featureImportance:t,predictedValue:a}),s=Object(f.useMemo)((()=>{let t,a;if(i&&T(i)){const[n,s]=y.a.extent(i,(e=>e[2]));t=s,a=n;const r=.1*Math.abs(t-a);t=("number"==typeof e?Math.max(t,e):t)+r,a=("number"==typeof e?Math.min(a,e):a)-r}return{maxDomain:t,minDomain:a}}),[i,e]);return i?Object(w.jsx)(p.a.Fragment,null,void 0===e&&Object(w.jsx)(b.EuiCallOut,{size:"s",heading:"p",title:Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.missingBaselineCallout",defaultMessage:"Unable to calculate baseline value, which might result in a shifted decision path."}),color:"warning",iconType:"warning"}),Object(w.jsx)(L,{decisionPathData:i,predictionFieldName:n,minDomain:s.minDomain,maxDomain:s.maxDomain,baseline:e})):Object(w.jsx)($,null)},V=({featureImportance:e})=>Object(w.jsx)(b.EuiCodeBlock,{isCopyable:!0},JSON.stringify(e)),z=({featureImportance:e,predictedValue:t,topClasses:a,predictionFieldName:n,predictedProbability:i,baseline:s})=>{const[r,o]=Object(f.useState)(Array.isArray(a)&&a.length>0?S(a[0].class_name):""),l=a.find((e=>S(e.class_name)===S(r))),c=l?l.class_probability:void 0,{decisionPathData:u}=C({baseline:s,featureImportance:e,predictedValue:r,predictedProbability:c}),d=Object(f.useMemo)((()=>{const e=S(t);return Array.isArray(a)?a.map((t=>{const a=S(t.class_name);return{value:a,inputDisplay:a===e?Object(w.jsx)(b.EuiHealth,{color:"success",style:{lineHeight:"inherit"}},a):a}})):void 0}),[a,t]),m=Object(f.useMemo)((()=>{let e,t;if(u&&T(u)){const[a,n]=y.a.extent(u,(e=>e[2])),i=.1*Math.abs(n-a);e=n+i,t=a-i}return{maxDomain:e,minDomain:t}}),[u]);return u?Object(w.jsx)(p.a.Fragment,null,Object(w.jsx)(b.EuiSpacer,{size:"xs"}),Object(w.jsx)(b.EuiTitle,{size:"xxxs"},Object(w.jsx)("span",null,j.i18n.translate("xpack.ml.dataframe.analytics.explorationResults.classificationDecisionPathClassNameTitle",{defaultMessage:"Class name"}))),void 0!==d&&Object(w.jsx)(b.EuiSuperSelect,{"data-test-subj":"mlDFADecisionPathClassNameSelect",compressed:!0,options:d,valueOfSelected:r,onChange:o}),Object(w.jsx)(L,{decisionPathData:u,predictionFieldName:n,minDomain:m.minDomain,maxDomain:m.maxDomain})):Object(w.jsx)($,null)};var H,U=a(9);!function(e){e.CHART="decision_path_chart",e.JSON="decision_path_json"}(H||(H={}));const J=({baseline:e,featureImportance:t,predictedValue:a,topClasses:n,analysisType:i,predictionFieldName:s,predictedProbability:r})=>{const[o,l]=Object(f.useState)(H.CHART),{services:{docLinks:c}}=Object(U.d)(),u=c.links.ml.featureImportance;if(t.length<2)return Object(w.jsx)("div",{"data-test-subj":"mlDFADecisionPathJSONViewer"},Object(w.jsx)(V,{featureImportance:t}));const d=[{id:H.CHART,name:Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathPlotTab",defaultMessage:"Decision plot"})},{id:H.JSON,name:Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathJSONTab",defaultMessage:"JSON"})}];return Object(w.jsx)("div",{"data-test-subj":"mlDFADecisionPathPopover"},Object(w.jsx)("div",{style:{display:"flex",width:300}},Object(w.jsx)(b.EuiTabs,{size:"s"},d.map((e=>Object(w.jsx)(b.EuiTab,{"data-test-subj":`mlDFADecisionPathPopoverTab-${e.id}`,isSelected:e.id===o,onClick:()=>l(e.id),key:e.id},e.name))))),o===H.CHART&&Object(w.jsx)(p.a.Fragment,null,Object(w.jsx)(b.EuiText,{size:"xs",color:"subdued",style:{paddingTop:5}},Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.decisionPathPlotHelpText",defaultMessage:"SHAP decision plots use {linkedFeatureImportanceValues} to show how models arrive at the predicted value for '{predictionFieldName}'.",values:{predictionFieldName:s,linkedFeatureImportanceValues:Object(w.jsx)(b.EuiLink,{href:u,target:"_blank"},Object(w.jsx)(g.FormattedMessage,{id:"xpack.ml.dataframe.analytics.explorationResults.linkedFeatureImportanceValues",defaultMessage:"feature importance values"}))}})),i===m.b.CLASSIFICATION&&Object(m.A)(e)&&Object(w.jsx)(z,{featureImportance:t,topClasses:n,predictedValue:S(a),predictedProbability:r,predictionFieldName:s,baseline:e}),i===m.b.REGRESSION&&Object(m.F)(e)&&void 0!==a&&Object(w.jsx)(G,{featureImportance:t,baseline:e,predictedValue:"string"==typeof a?parseFloat(a):a,predictionFieldName:s})),o===H.JSON&&Object(w.jsx)(V,{featureImportance:t}))},W=({analysisType:e,baseline:t,data:a,pagination:n,predictionFieldName:i,resultsField:r})=>o=>{const{schema:l,rowIndex:c,cellContentsElement:u,DefaultCellPopover:d}=o;if(e===m.b.REGRESSION||e===m.b.CLASSIFICATION||e===m.b.OUTLIER_DETECTION){if("featureImportance"===l){const o=a[c-n.pageIndex*n.pageSize];if(!o)return Object(w.jsx)("div",null);const l=null!=r?r:m.f;let u,d,f=[];void 0!==i&&o&&void 0!==o[`${l}.${i}`]&&(u=o[`${l}.${i}`],f=Object(s.k)(o,l),d=o[`${l}.prediction_probability`]);const p=f.reduce(((e,t)=>"boolean"==typeof t.class_name||e),!1),b=Object(s.g)(o,l,p);return Object(w.jsx)("div",{"data-test-subj":"mlDFAFeatureImportancePopover"},Object(w.jsx)(J,{analysisType:e,predictedValue:u,predictedProbability:d,baseline:t,featureImportance:b,topClasses:f,predictionFieldName:i?i.replace("_prediction",""):void 0}))}return"featureInfluence"===l?Object(w.jsx)(b.EuiCodeBlock,{isCopyable:!0},u.textContent):Object(w.jsx)(d,o)}return Object(w.jsx)(d,o)};var q=a(137),Q=a(183),X=a(46),K=a(104);const Y=e=>{const{services:{data:{dataViews:t}}}=Object(U.d)(),a=Object(X.b)(),[n,s]=Object(f.useState)(void 0),[l,c]=Object(f.useState)(void 0),[d,p]=Object(f.useState)(!1),[b,g]=Object(f.useState)(!1),[h,y]=Object(f.useState)(!1),[O,x]=Object(f.useState)(void 0),[_,v]=Object(f.useState)(void 0),[T,S]=Object(f.useState)(void 0),[C,k]=Object(f.useState)(void 0),[E,F]=Object(f.useState)(void 0);return Object(f.useEffect)((()=>{!async function(){y(!1);try{const b=await r.ml.dataFrameAnalytics.getDataFrameAnalytics(e),h=await r.ml.dataFrameAnalytics.getDataFrameAnalyticsStats(e),O=Object(Q.b)(h)?h.data_frame_analytics[0]:void 0;if(void 0!==O&&O.state&&k(O.state),Array.isArray(b.data_frame_analytics)&&b.data_frame_analytics.length>0){const r=b.data_frame_analytics[0];if(Object(m.z)(r.analysis)||Object(m.E)(r.analysis))try{var n;const t=(await a.getTrainedModels(`${e}*`,{include:"total_feature_importance"})).find((t=>{var a,n;return(null===(a=t.metadata)||void 0===a||null===(n=a.analytics_config)||void 0===n?void 0:n.id)===e}));var l;!0===Array.isArray(null==t||null===(n=t.metadata)||void 0===n?void 0:n.total_feature_importance)&&F(null==t||null===(l=t.metadata)||void 0===l?void 0:l.total_feature_importance)}catch(e){Object(K.a)().displayErrorToast(e)}try{var d;const e=Object(u.a)(r),a=null!==(d=await Object(q.d)(e))&&void 0!==d?d:e;let n;try{n=await t.get(a),await t.refreshFields(n)}catch(e){n=void 0}if(void 0===n){var f;g(!0);const e=r.source.index[0],a=null!==(f=await Object(q.d)(e))&&void 0!==f?f:e;try{n=await t.get(a)}catch(e){n=void 0}}void 0!==n?(await o.a.initializeFromDataVIew(n),x(b.data_frame_analytics[0]),s(n),p(!0),y(!1)):c(j.i18n.translate("xpack.ml.dataframe.analytics.results.dataViewMissingErrorMessage",{defaultMessage:"To view this page, a Kibana data view is necessary for either the destination or source index of this analytics job."}))}catch(e){v(Object(i.b)(e)),y(!1)}}}catch(e){S(Object(i.b)(e)),y(!1)}}()}),[]),{dataView:n,dataViewErrorMessage:l,isInitialized:d,isLoadingJobConfig:h,jobCapsServiceErrorMessage:_,jobConfig:O,jobConfigErrorMessage:T,jobStatus:C,needsDestDataView:b,totalFeatureImportance:E}}},125:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return f})),a.d(t,"j",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"b",(function(){return h})),a.d(t,"m",(function(){return y})),a.d(t,"n",(function(){return j})),a.d(t,"a",(function(){return x})),a.d(t,"g",(function(){return _})),a.d(t,"c",(function(){return T})),a.d(t,"l",(function(){return S})),a.d(t,"k",(function(){return C}));var n=a(2),i=a(10),s=a(12),r=a(7),o=a(107),l=a(103),c=a(11);const u=1e3,d={match_all:{}},f=(e,t)=>({bool:{minimum_should_match:1,should:[{match:{[`${e}.is_training`]:t}}]}}),p=e=>{if(void 0===e)return!1;const t=Object.keys(e);return 1===t.length&&"bool"===t[0]},b=e=>{if(void 0===e)return!1;const t=Object.keys(e);return 1===t.length&&"query_string"===t[0]},m=e=>{var t,a;const n=Object.keys(e);return 1===n.length&&n[0]===l.b.REGRESSION&&void 0!==(null==e||null===(t=e.regression)||void 0===t?void 0:t.mse)&&void 0!==(null==e||null===(a=e.regression)||void 0===a?void 0:a.r_squared)},g=e=>{var t,a;const n=Object.keys(e);return 1===n.length&&n[0]===l.b.CLASSIFICATION&&(void 0!==(null==e||null===(t=e.classification)||void 0===t?void 0:t.multiclass_confusion_matrix)||void 0!==(null==e||null===(a=e.classification)||void 0===a?void 0:a.auc_roc))};let h;!function(e){e.ERROR="error",e.IDLE="idle",e.LOADING="loading",e.REFRESH="refresh"}(h||(h={}));const y=new i.BehaviorSubject(h.IDLE),j=(e={})=>(Object(n.useEffect)((()=>{const t=y.pipe(Object(s.distinctUntilChanged)()),a=[];return"function"==typeof e.onRefresh&&a.push(t.pipe(Object(s.filter)((e=>e===h.REFRESH))).subscribe((()=>{"function"==typeof e.onRefresh&&e.onRefresh()}))),"function"==typeof e.isLoading&&a.push(t.subscribe((t=>"function"==typeof e.isLoading&&e.isLoading(t===h.LOADING)))),()=>{a.map((e=>e.unsubscribe()))}}),[e.onRefresh]),{refresh:()=>{y.next(h.REFRESH),y.next(h.LOADING)}}),O=3,x="--";function _(e){const t={mse:x,msle:x,huber:x,r_squared:x};if(null!=e&&e.regression)for(const n in e.regression)if(e.regression.hasOwnProperty(n)){var a;let i=null===(a=e.regression[n])||void 0===a?void 0:a.value;i&&Number.isFinite(i)&&(i=Number(i.toPrecision(O))),t[n]=i}return t}function v({resultsField:e,isTraining:t,searchQuery:a,ignoreDefaultQuery:n}){let i;const s={term:{[`${e}.is_training`]:{value:t}}},o=Object(r.cloneDeep)(a);return p(o)?(void 0===o.bool.must&&(o.bool.must=[]),void 0!==t&&o.bool.must.push(s),i=o):b(o)?(i={bool:{must:[o]}},void 0!==t&&i.bool.must.push(s)):i={bool:{must:void 0!==t?[s]:[]}},i}let T;!function(e){e.MSE="mse",e.MSLE="msle",e.R_SQUARED="rSquared",e.HUBER="huber"}(T||(T={}));const S=async({isTraining:e,index:t,dependentVariable:a,resultsField:n,predictionFieldName:i,searchQuery:s,ignoreDefaultQuery:r,jobType:u,requiresKeyword:d,rocCurveClassName:f,includeMulticlassConfusionMatrix:p=!0})=>{const b={success:!1,eval:null,error:null};let m=`${n}.${i||`${a}_prediction`}`;u===l.b.CLASSIFICATION&&!0===d&&(m=`${m}.keyword`);const g={classification:{accuracy:{},recall:{},...p?{multiclass_confusion_matrix:{}}:{},...void 0!==f?{auc_roc:{include_curve:!0,class_name:f}}:{}},regression:{r_squared:{},mse:{},msle:{},huber:{}}},h={index:t,query:v({resultsField:n,isTraining:e,searchQuery:s,ignoreDefaultQuery:r}),evaluation:{[u]:{actual_field:a,predicted_field:m,...u===l.b.CLASSIFICATION?{top_classes_field:`${n}.top_classes`}:{},metrics:g[u]}}};try{const e=await c.ml.dataFrameAnalytics.evaluateDataFrameAnalytics(h);return b.success=!0,b.eval=e,b}catch(e){return b.error=Object(o.b)(e),b}},C=async({ignoreDefaultQuery:e=!0,isTraining:t,searchQuery:a,resultsField:n,destIndex:i})=>{const s=v({resultsField:n,isTraining:t,ignoreDefaultQuery:e,searchQuery:a});try{const e={track_total_hits:!0,query:s},t=await c.ml.esSearch({index:i,size:0,body:e}),a=t.hits.total&&t.hits.total.value;return{docsCount:a,success:void 0!==a}}catch(e){return{docsCount:null,success:!1}}}},131:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return d})),a(29);var n=a(103);let i;function s(e){return e===n.d.FAILED}function r(e){return e===n.d.ANALYZING||e===n.d.REINDEXING||e===n.d.STARTED||e===n.d.STARTING}function o(e){return e===n.d.STOPPED}function l(e){return"object"==typeof e&&null!==e&&{}.hasOwnProperty.call(e,"state")&&Object.values(n.d).includes(e.state)&&{}.hasOwnProperty.call(e,"progress")&&Array.isArray(e.progress)}function c(e){let t=0,a=0;for(const n of e.progress)if(t++,a=n.progress_percent,n.progress_percent<100)break;return{currentPhase:t,progress:a,totalPhases:e.progress.length}}!function(e){e.BATCH="batch",e.CONTINUOUS="continuous"}(i||(i={}));const u={configDestIndex:"config.dest.index",configSourceIndex:"config.source.index",configCreateTime:"config.create_time",description:"config.description",id:"id",memoryStatus:"stats.memory_usage.status"};function d(e){const t=function(e){if(l(e))return Math.round(e.progress.reduce(((e,t)=>e+t.progress_percent),0)/e.progress.length)}(e);return e.state===n.d.STOPPED&&100===t}},133:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(2),i=a(241),s=a(168),r=a(204),o=a(6);const l=()=>{const{setIsFlyoutVisible:e,setFieldName:t,populatedFields:a}=Object(s.g)(),l=Object(n.useCallback)((()=>e(!1)),[e]),c=Object(n.useCallback)((a=>{"string"==typeof a.id&&(t(a.id),e(!0))}),[t,e]);return{renderOption:Object(n.useCallback)(((e,t)=>{const n=e.field;return e.isGroupLabelOption||!n?e.label:Object(o.jsx)(r.a,{isEmpty:a&&!a.has(n.id),field:n,label:e.label,onButtonClick:c})}),[c,null==a?void 0:a.size]),setIsFlyoutVisible:e,setFieldName:t,handleFieldStatsButtonClick:c,closeFlyout:l,optionCss:i.b,populatedFields:a}}},151:function(e,t,a){"use strict";a.d(t,"f",(function(){return j})),a.d(t,"d",(function(){return x})),a.d(t,"e",(function(){return _})),a.d(t,"g",(function(){return T})),a.d(t,"i",(function(){return y})),a.d(t,"j",(function(){return E})),a.d(t,"k",(function(){return S})),a.d(t,"l",(function(){return k})),a.d(t,"n",(function(){return C})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return b})),a.d(t,"a",(function(){return R})),a.d(t,"h",(function(){return K})),a.d(t,"m",(function(){return oe}));var n=a(74),i=a.n(n),s=a(2),r=a(3),o=a(118),l=a(55),c=a(176),u=a(115),d=a(103),f=a(107),p=a(22);const b=10;let m;!function(e){e[e.UNUSED=0]="UNUSED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR"}(m||(m={}));const g={border:"all",fontSize:"s",cellPadding:"s",stripes:!1,rowHover:"none",header:"shade"},h={showColumnSelector:!0,showDisplaySelector:!1,showSortSelector:!0,showFullScreenSelector:!1},y=e=>{const t=e.fields.map((e=>e.name));return t.filter((a=>{if(e.metaFields.includes(a))return!1;const n=a.split(".");return"keyword"!==n.pop()||!t.includes(n.join("."))}))},j=(e,t)=>Object.keys(e).map((a=>{let n;const i=e[a];switch(void 0!==i&&(d.c.has(i)||d.g.has(i))&&(n="numeric"),i){case"date":n="datetime";break;case"nested":case"geo_point":n="json";break;case"boolean":n="boolean";break;case"text":n=O}return a===`${t}.${d.o}`&&(n="numeric"),a.includes(`${t}.${d.p}`)&&(n="json"),a.includes(`${t}.${d.h}`)&&(n="featureImportance"),a===`${t}.${d.i}`&&(n="featureInfluence"),{id:a,schema:n,isSortable:!0}})),O="non-aggregatable",x=e=>{let t;switch(e){case o.a.GEO_POINT:case o.a.GEO_SHAPE:t="json";break;case o.a.BOOLEAN:t="boolean";break;case o.a.DATE:case o.a.DATE_NANOS:t="datetime";break;case o.a.BYTE:case o.a.DOUBLE:case o.a.FLOAT:case o.a.HALF_FLOAT:case o.a.INTEGER:case o.a.LONG:case o.a.SCALED_FLOAT:case o.a.SHORT:case"number":t="numeric";case o.a.KEYWORD:case o.a.VERSION:case o.a.TEXT:}return t},_=e=>{var t;let a;if(e){switch(e.type){case o.b.BOOLEAN:a="boolean";break;case o.b.DATE:a="datetime";break;case o.b.GEO_POINT:case o.b.GEO_SHAPE:a="json";break;case o.b.NUMBER:a="numeric";break;case o.b.NESTED:a="json"}return void 0===a&&!1===e.aggregatable||Object(c.b)(e)||"numeric"===a&&null!=e&&null!==(t=e.esTypes)&&void 0!==t&&t.some((e=>e===o.a.AGGREGATE_METRIC_DOUBLE))?O:a}},v=(e,t)=>t?"true"===e:e,T=(e,t,a=!1)=>{const n=e[`${t}.feature_importance`];return void 0===n?[]:n.map((e=>({feature_name:Array.isArray(e.feature_name)?e.feature_name[0]:e.feature_name,classes:Array.isArray(e.classes)?e.classes.map((e=>{const t=E(e);return{importance:t.importance,class_name:v(t.class_name,a)}})):e.classes,importance:Array.isArray(e.importance)?e.importance[0]:e.importance})))},S=(e,t)=>{const a=e[`${t}.top_classes`];return void 0===a?[]:a.map((e=>E(e)))},C=(e,t,a,n,r)=>Object(s.useMemo)((()=>({rowIndex:s,columnId:c,setCellProps:f})=>{const p=s-t.pageIndex*t.pageSize,b=a[p];if(void 0===b)return null;if(void 0===e)return null;const m=e.fields.getByName(c);let g;void 0!==m&&(g=e.getFormatterForField(m));const h=function(e){if(a.hasOwnProperty(p)){const t=a[p];return t.hasOwnProperty(e)?t[e]:e===`${n}.feature_importance`?T(b,null!=n?n:d.f):e===`${n}.top_classes`?S(b,null!=n?n:d.f):Object(l.a)(a[p],e,null)}return null}(c);return"function"==typeof r&&r(c,h,b,f),"object"==typeof h&&null!==h?JSON.stringify(h):null==h?null:void 0!==g?g.convert(h,"text"):"string"==typeof h||null===h?h:(null==m?void 0:m.type)===o.b.DATE?Object(u.d)(1e3*i()(h).unix()):"boolean"==typeof h?h?"true":"false":h}),[null==e?void 0:e.fields,t.pageIndex,t.pageSize,a]),k=(e,t)=>{t.addDanger(r.i18n.translate("xpack.ml.dataGrid.columnChart.ErrorMessageToast",{defaultMessage:"An error occurred fetching the histogram charts data: {error}",values:{error:Object(f.b)(e)}}))},E=(e,t)=>{const a={...e};for(const e of Object.keys(a))void 0===t?Array.isArray(a[e])&&1===a[e].length&&(a[e]=a[e][0]):!1===t(e)&&Array.isArray(a[e])&&1===a[e].length&&(a[e]=a[e][0]);return a};var F=a(7),A=a(6),D=a(29),I=a(15);const w={name:"2kmeas",styles:".euiDataGridRowCell--boolean{text-transform:none;}.euiDataGridHeaderCell{.euiDataGridHeaderCell__sortingArrow,.euiDataGridHeaderCell__icon,.euiPopover{margin-top:auto;}}"},N=({title:e})=>Object(A.jsx)(D.EuiTitle,{size:"xs"},Object(A.jsx)("span",null,e));function M(e){return Object(p.a)(e,["title"])&&"string"==typeof e.title&&""!==e.title}const R=Object(s.memo)((e=>{const{chartsVisible:t,chartsButtonVisible:a,ccsWarning:n,columnsWithCharts:i,dataTestSubj:o,errorMessage:l,invalidSortingColumnns:u,noDataMessage:d,onChangeItemsPerPage:f,onChangePage:b,onSort:y,pagination:j,setVisibleColumns:O,renderCellPopover:x,renderCellValue:_,rowCount:v,sortingColumns:T,status:S,tableItems:C,toastNotifications:k,toggleChartVisibility:E,visibleColumns:F,trailingControlColumns:R}=e;Object(s.useEffect)((()=>{u.length>0&&u.forEach((e=>{k.addDanger(r.i18n.translate("xpack.ml.dataGrid.invalidSortingColumnError",{defaultMessage:"The column '{columnId}' cannot be used for sorting.",values:{columnId:e}}))}))}),[u,k]);const B=Object(s.useRef)(null);if(S===m.LOADED&&0===C.length)return Object(A.jsx)("div",{"data-test-subj":`${o} empty`},M(e)&&Object(A.jsx)(N,{title:e.title}),Object(A.jsx)(D.EuiCallOut,{title:r.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutTitle",{defaultMessage:"Empty index query result."}),color:"primary"},Object(A.jsx)("p",null,r.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutBody",{defaultMessage:"The query for the index returned no results. Please make sure you have sufficient permissions, the index contains documents and your query is not too restrictive."}))));if(""!==d)return Object(A.jsx)("div",{"data-test-subj":`${o} empty`},M(e)&&Object(A.jsx)(N,{title:e.title}),Object(A.jsx)(D.EuiCallOut,{title:r.i18n.translate("xpack.ml.dataGrid.dataGridNoDataCalloutTitle",{defaultMessage:"Index preview not available"}),color:"primary"},Object(A.jsx)("p",null,d)));let P;return S===m.ERROR&&(P=l&&!l.includes("failed to create query")?Object(A.jsx)(D.EuiCallOut,{title:r.i18n.translate("xpack.ml.dataframe.analytics.exploration.querySyntaxError",{defaultMessage:"An error occurred loading the index data. Please ensure your query syntax is valid."}),color:"danger",iconType:"cross"},Object(A.jsx)("p",null,l)):Object(A.jsx)(D.EuiCallOut,{title:r.i18n.translate("xpack.ml.dataGrid.indexDataError",{defaultMessage:"An error occurred loading the index data."}),color:"danger",iconType:"cross"},Object(A.jsx)(D.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:!0},l))),Object(A.jsx)("div",{"data-test-subj":`${o} ${S===m.ERROR?"error":"loaded"}`,ref:B},M(e)&&Object(A.jsx)(D.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(A.jsx)(D.EuiFlexItem,null,Object(A.jsx)(N,{title:e.title})),e.copyToClipboard&&e.copyToClipboardDescription&&Object(A.jsx)(D.EuiFlexItem,{grow:!1},Object(A.jsx)(D.EuiCopy,{beforeMessage:e.copyToClipboardDescription,textToCopy:e.copyToClipboard},(t=>Object(A.jsx)(D.EuiButtonIcon,{onClick:t,iconType:"copyClipboard","aria-label":e.copyToClipboardDescription}))))),void 0!==P&&Object(A.jsx)("div",{"data-test-subj":`${o} error`},P,Object(A.jsx)(D.EuiSpacer,{size:"m"})),n&&Object(A.jsx)("div",{"data-test-subj":`${o} ccsWarning`},Object(A.jsx)(D.EuiCallOut,{title:r.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutTitle",{defaultMessage:"Cross-cluster search returned no fields data."}),color:"warning"},Object(A.jsx)("p",null,r.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutBody",{defaultMessage:"There was an issue retrieving data for the data view. Source preview in combination with cross-cluster search is only supported for versions 7.10 and above. You may still configure and create the transform."}))),Object(A.jsx)(D.EuiSpacer,{size:"m"})),v>0&&Object(A.jsx)(D.EuiMutationObserver,{observerOptions:{subtree:!0,attributes:!0,childList:!0},onMutation:()=>{if(null!==B.current){const e=B.current.querySelectorAll(".euiDataGrid__virtualized");for(const t of Array.from(e))Object(p.a)(t)&&Object(p.a)(t.style)&&"auto"!==t.style.height&&(t.style.height="auto")}}},(n=>Object(A.jsx)("div",{css:w,ref:n},Object(A.jsx)(D.EuiDataGrid,{"aria-label":M(e)?e.title:"",columns:i.map((e=>(e.initialWidth=165,e))),columnVisibility:{visibleColumns:F,setVisibleColumns:O},trailingControlColumns:R,gridStyle:g,rowCount:v,renderCellValue:_,renderCellPopover:x,sorting:{columns:T,onSort:y},toolbarVisibility:{...h,...a?{additionalControls:Object(A.jsx)(D.EuiToolTip,{content:r.i18n.translate("xpack.ml.dataGrid.histogramButtonToolTipContent",{defaultMessage:"Queries run to fetch histogram chart data will use a sample size per shard of {samplerShardSize} documents.",values:{samplerShardSize:c.a}})},Object(A.jsx)(D.EuiButtonEmpty,{"aria-pressed":!0===t,className:"euiDataGrid__controlBtn"+(!0===t?" euiDataGrid__controlBtn--active":""),"data-test-subj":`${o}HistogramButton`,size:"xs",iconType:"visBarVertical",color:"text",onClick:E,disabled:void 0===t},Object(A.jsx)(I.FormattedMessage,{id:"xpack.ml.dataGrid.histogramButtonText",defaultMessage:"Histogram charts"})))}:{}},pagination:{...j,pageSizeOptions:[5,10,25],onChangeItemsPerPage:f,onChangePage:b}})))))}),((e,t)=>Object(F.isEqual)(B(e),B(t))));function B(e){return[e.columnsWithCharts,e.dataTestSubj,e.errorMessage,e.invalidSortingColumnns,e.noDataMessage,e.pagination,e.rowCount,e.sortingColumns,e.status,e.tableItems,e.visibleColumns,...M(e)?[e.copyToClipboard,e.copyToClipboardDescription,e.title]:[]]}const P=e=>Object(p.a)(e,["data","id","interval","stats","type"])&&"numeric"===e.type,L=e=>Object(p.a)(e,["data","cardinality","id","type"])&&("ordinal"===e.type||"boolean"===e.type);var $=a(41),G=a.n($),V=a(10),z=a(30),H=a.n(z),U=a(37);const J=Object(A.css)({width:"100%",minWidth:`calc(${U.euiThemeVars.euiSize} * 7)`},"",""),W={name:"1azakc",styles:"text-align:center"},q=new V.BehaviorSubject(null),Q=Object(D.euiPaletteColorBlind)()[0],X=Object(D.euiPaletteColorBlind)({rotations:2})[10],K=e=>{if(e===O)return;let t;switch(e){case"datetime":t=o.b.DATE;break;case"numeric":t=o.b.NUMBER;break;case"boolean":t=o.b.BOOLEAN;break;case"json":t=o.b.OBJECT;break;default:t=o.b.STRING}return t},Y=(e,t=20)=>{if("unsupported"===e.type)return r.i18n.translate("xpack.ml.dataGridChart.histogramNotAvailable",{defaultMessage:"Chart not supported."});if(0===e.data.length)return r.i18n.translate("xpack.ml.dataGridChart.notEnoughData",{defaultMessage:"0 documents contain field."});if("boolean"===e.type)return Object(A.jsx)("table",{css:J},Object(A.jsx)("tbody",null,Object(A.jsx)("tr",null,void 0!==e.data[0]&&Object(A.jsx)("td",{css:W},e.data[0].key_as_string),void 0!==e.data[1]&&Object(A.jsx)("td",{css:W},e.data[1].key_as_string))));if(L(e)&&e.cardinality<=t)return r.i18n.translate("xpack.ml.dataGridChart.singleCategoryLegend",{defaultMessage:"{cardinality, plural, one {# category} other {# categories}}",values:{cardinality:e.cardinality}});if(L(e)&&e.cardinality>t)return r.i18n.translate("xpack.ml.dataGridChart.topCategoriesLegend",{defaultMessage:"top {maxChartColumns} of {cardinality} categories",values:{cardinality:e.cardinality,maxChartColumns:t}});if(P(e)){const t=Math.round(100*e.stats[0])/100,a=Math.round(100*e.stats[1])/100;return t!==a?`${t} - ${a}`:""+t}return""};var Z=a(126),ee=a(67);const te=Object(A.css)({width:"100%",height:`calc(${U.euiThemeVars.euiSizeXL} + ${U.euiThemeVars.euiSizeXXL})`},"",""),ae=Object(A.css)([Object(A.css)(Object(D.euiTextTruncate)(),";",""),{color:U.euiThemeVars.euiColorMediumShade,display:"block",overflowX:"hidden",margin:`${U.euiThemeVars.euiSizeXS} 0 0 0`,fontSize:U.euiThemeVars.euiFontSizeXS,fontStyle:"italic",fontWeight:"normal",textAlign:"left"}],"",""),ne=Object(A.css)([ae,{textAlign:"right"}],"",""),ie={background:{color:"transparent"},chartMargins:{left:0,right:0,top:0,bottom:1},chartPaddings:{left:0,right:0,top:0,bottom:0},scales:{barsPadding:.1}},se=({chartData:e,columnType:t,dataTestSubj:a,hideLabel:n,maxChartColumns:i})=>{const{data:s,legendText:l}=((e,t,a)=>{const n=K(t.schema),i=H()(q),s=(e=>{switch(e){case o.b.BOOLEAN:case o.b.IP:case o.b.STRING:return"ordinal";case o.b.DATE:return"time";case o.b.NUMBER:return"linear"}})(n),r=a=>null==i||L(e)&&"ordinal"===s&&i._source[t.id]===a.key||P(e)&&"linear"===s&&i._source[t.id]>=+a.key&&i._source[t.id]<+a.key+e.interval||P(e)&&"time"===s&&1e3*G()(i._source[t.id]).unix()>=+a.key&&1e3*G()(i._source[t.id]).unix()<+a.key+e.interval?Q:X;let l=[];return L(e)?l=e.data.map((e=>{var t;return{...e,key_as_string:null!==(t=e.key_as_string)&&void 0!==t?t:e.key,color:r(e)}})):P(e)&&(l=e.data.map((e=>({...e,key_as_string:e.key_as_string||e.key,color:r(e)})))),{data:l,legendText:Y(e,a),xScaleType:s}})(e,t,i);return Object(A.jsx)("div",{"data-test-subj":a},(c=e,!(Object(p.a)(c,["type"])&&"unsupported"===c.type)&&s.length>0&&Object(A.jsx)("div",{css:te,"data-test-subj":`${a}-histogram`},Object(A.jsx)(ee.Chart,null,Object(A.jsx)(ee.Settings,{theme:ie,locale:r.i18n.getLocale()}),Object(A.jsx)(ee.BarSeries,{id:"histogram",name:"count",xScaleType:ee.ScaleType.Ordinal,yScaleType:ee.ScaleType.Linear,xAccessor:"key_as_string",yAccessors:["doc_count"],styleAccessor:e=>e.datum.color,data:s})))),Object(A.jsx)("div",{css:"number"===t.schema?ne:ae,"data-test-subj":`${a}-legend`},l),!n&&Object(A.jsx)("div",{"data-test-subj":`${a}-id`},t.id));var c},re={rowCount:0,rowCountRelation:void 0},oe=(e,t=5,a=b,n)=>{const i={pageIndex:0,pageSize:t},[r,o]=Object(s.useState)(!1),[l,c]=Object(s.useState)(""),[u,d]=Object(s.useState)(""),[f,p]=Object(s.useState)(m.UNUSED),[g,h]=Object(s.useState)(re),[y,j]=Object(s.useState)([]),[O,x]=Object(s.useState)([]),[_,v]=Object(s.useState)(i),[T,S]=Object(s.useState)([]),[C,k]=Object(s.useState)(void 0),{rowCount:E,rowCountRelation:F}=g,D=Object(s.useCallback)((e=>{v((t=>({pageIndex:Math.floor(t.pageSize*t.pageIndex/e),pageSize:e})))}),[]),I=Object(s.useCallback)((e=>v((t=>({...t,pageIndex:e})))),[]),[w,N]=Object(s.useState)([]),M=e.map((e=>e.id)),R=(void 0!==n?M.filter(n):M).splice(0,a);Object(s.useEffect)((()=>{N(R)}),[R.join()]);const[B,P]=Object(s.useState)([]),L=Object(s.useCallback)((t=>{const a=t.reduce(((t,a)=>{const n=e.find((e=>e.id===a.id));return"json"===(null==n?void 0:n.schema)&&t.push(a.id),t}),[]);P(a),0===a.length&&S(t)}),[e]),$=Object(s.useMemo)((()=>e.map(((e,t)=>{const a=y.find((t=>t.id===e.id));return{...e,display:void 0!==a&&!0===C?Object(A.jsx)(se,{chartData:a,columnType:e,dataTestSubj:`mlDataGridChart-${e.id}`}):void 0}})).sort(((e,t)=>-1===w.indexOf(e.id)&&w.indexOf(t.id)>-1?1:-1===w.indexOf(t.id)&&w.indexOf(e.id)>-1?-1:-1===w.indexOf(e.id)&&-1===w.indexOf(t.id)?e.id.localeCompare(t.id):w.indexOf(e.id)-w.indexOf(t.id)))),[e,y,C,JSON.stringify(w)]);return Object(s.useEffect)((()=>{void 0===C&&E>0&&void 0!==F&&k(E<=1e4&&F!==Z.a.GTE)}),[C,E,F]),{ccsWarning:r,chartsVisible:C,chartsButtonVisible:!0,columnsWithCharts:$,errorMessage:u,invalidSortingColumnns:B,noDataMessage:l,onChangeItemsPerPage:D,onChangePage:I,onSort:L,pagination:_,resetPagination:()=>v(i),rowCount:E,rowCountRelation:F,setColumnCharts:j,setCcsWarning:o,setErrorMessage:d,setNoDataMessage:c,setPagination:v,setRowCountInfo:h,setSortingColumns:S,setStatus:p,setTableItems:x,setVisibleColumns:N,sortingColumns:T,status:f,tableItems:O,toggleChartVisibility:()=>{void 0!==C&&k(!C)},visibleColumns:w}}},154:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a(41),i=a.n(n);const s=3;function r(e,t,a,n){return Array.isArray(e)?1===e.length?o(e[0],t,a,n):`[${e.map((e=>o(e,t,void 0,n)))}]`:o(e,t,a,n)}function o(e,t,a,n){if(null==e)return"";if("time_of_week"===t){const t=void 0!==n&&void 0!==n.timestamp?new Date(n.timestamp):new Date,a=i()(t).unix()%i.a.duration(1,"week").asSeconds(),s=i.a.duration(a,"seconds"),r=i.a.utc(t).subtract(s).startOf("day").add(e,"s");return i()(r.valueOf()).format("ddd HH:mm")}if("time_of_day"===t){const t=void 0!==n&&void 0!==n.timestamp?new Date(n.timestamp):new Date,a=i.a.utc(t).startOf("day").add(e,"s");return i()(a.valueOf()).format("HH:mm")}if(void 0!==a)return a.convert(e,"text");{const t=Math.abs(e);if(t>=1e4||t===Math.floor(t))return void 0!==a?a.convert(e,"text"):Number(e.toFixed(0));if(t>=10)return Number(e.toFixed(1));{let t;return t=e>0?Math.pow(10,s-Math.floor(Math.log(e)/Math.LN10)-1):Math.pow(10,s-Math.floor(Math.log(-1*e)/Math.LN10)-1),Math.round(e*t)/t}}}},159:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(2);const i=Object(n.createContext)({isFlyoutVisible:!1,setIsFlyoutVisible:()=>{},toggleFlyoutVisible:()=>{},setFieldName:()=>{},setFieldValue:()=>{},timeRangeMs:void 0,populatedFields:void 0});function s(){return Object(n.useContext)(i)}},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(118),i=a(103),s=a(182),r=a(11);class NewJobCapsServiceAnalytics extends s.a{async initializeFromDataVIew(e){try{const t=function(e,t){const a=e[t],i=[],s={};return void 0!==a&&(a.fields.forEach((e=>{e.type===n.a.NESTED&&void 0===s[e.name]&&(s[e.name]=!0,i.push(e))})),Object.keys(s).length>0?a.fields.forEach((e=>{if(e.type!==n.a.NESTED){const t=e.name.split(".").shift();t&&void 0===s[t]&&i.push(e)}})):i.push(...a.fields)),i}(await r.ml.dataFrameAnalytics.newJobCapsAnalytics(e.getIndexPattern(),"rollup"===e.type),e.getIndexPattern()),{fieldsPreferringKeyword:a}=Object(s.b)(t);this._fields=a,this.removeCounterFields()}catch(e){console.error("Unable to load analytics index fields",e)}}isKeywordAndTextType(e){var t;const a=null===(t=this.fields.find((t=>t.name===e)))||void 0===t?void 0:t.type;let i=!1;if(void 0!==a&&a===n.a.KEYWORD){const t=this.getFieldById(e.replace(/\.keyword$/,""));i=null!==t&&t.type===n.a.TEXT}else if(void 0!==a&&a===n.a.TEXT){const t=this.getFieldById(`${e}.keyword`);i=null!==t&&t.type===n.a.KEYWORD}return i}getDefaultFields(e,t){let a=[...this.fields];if(0===a.length)return{selectedFields:[],docFields:[]};const s=e.dest.results_field,r=[];let o,l;if(Object(i.D)(e.analysis)&&(a=e.analysis.outlier_detection.compute_feature_influence?a.filter((e=>!e.name.includes(`${s}.${i.i}.`))):a.filter((e=>!e.name.includes(`${s}.${i.i}`))),!0===t&&r.push({id:`${s}.${i.o}`,name:`${s}.${i.o}`,type:n.b.NUMBER})),Object(i.z)(e.analysis)||Object(i.E)(e.analysis)){var c;const u=Object(i.u)(e.analysis);o=null===(c=this.getFieldById(u))||void 0===c?void 0:c.type;const d=Object(i.x)(e.analysis),f=Object(i.w)(e.analysis),p=Object(i.v)(e.analysis);l=`${s}.${d||`${u}_prediction`}`,a=0===(null!=f?f:0)?this.fields.filter((e=>!e.name.includes(`${s}.${i.h}`))):a.filter((e=>!e.name.includes(`${s}.${i.h}.`))),a=0===(null!=p?p:0)?a.filter((e=>!e.name.includes(`${s}.${i.p}`))):a.filter((e=>!e.name.includes(`${s}.${i.p}.`))),!0===t&&r.push({id:`${s}.is_training`,name:`${s}.is_training`,type:n.a.BOOLEAN},{id:l,name:l,type:o})}r.push(...a),r.sort((({name:t},{name:a})=>Object(i.H)(t,a,e)));let u=r.filter((e=>e.name===l||!e.name.includes(".keyword")));return u.length>i.e&&(u=u.slice(0,i.e)),{selectedFields:u,docFields:r,depVarType:o}}}const o=new NewJobCapsServiceAnalytics},168:function(e,t,a){"use strict";a.d(t,"c",(function(){return O})),a.d(t,"b",(function(){return y})),a.d(t,"d",(function(){return A})),a.d(t,"f",(function(){return l.a})),a.d(t,"g",(function(){return l.b})),a.d(t,"e",(function(){return D.a})),a.d(t,"h",(function(){return I.a})),a.d(t,"a",(function(){return w.a}));var n=a(2),i=a.n(n),s=a(15),r=a(29),o=a(6),l=a(159);const c=()=>Object(o.jsx)(n.Fragment,null),u=i.a.lazy((()=>Promise.all([a.e(9),a.e(22)]).then(a.bind(null,693)))),d=e=>Object(o.jsx)(i.a.Suspense,{fallback:Object(o.jsx)(c,null)},Object(o.jsx)(u,e));var f=a(24),p=a(41),b=a.n(p),m=a(145);const g=Object(m.c)(),h=Object(r.euiPaletteColorBlind)()[0],y=({dataView:e,fieldStatsServices:t,timeRangeMs:a,dslQuery:i})=>{const{fieldName:s}=Object(l.b)(),r=Object(n.useMemo)((()=>{if(a)return{from:b()(a.from).toISOString(),to:b()(a.to).toISOString()};const e=b()();return{from:e.toISOString(),to:e.toISOString()}}),[a]),c=Object(n.useMemo)((()=>Object(f.a)(s)?e.getFieldByName(s):void 0),[s,e]);return r&&Object(f.a)(e)&&c?Object(o.jsx)(d,{key:c.name,services:t,dslQuery:null!=i?i:g,fromDate:r.from,toDate:r.to,dataViewOrDataViewId:e,field:c,"data-test-subj":`mlFieldStatsFlyoutContent ${c.name}`,color:h}):null};var j={name:"18ji2p4",styles:"width:300px"};const O=({dataView:e,fieldStatsServices:t,timeRangeMs:a,dslQuery:i})=>{const{setIsFlyoutVisible:c,isFlyoutVisible:u,fieldName:d}=Object(l.b)(),f=Object(n.useCallback)((()=>c(!1)),[]),p=Object(r.useGeneratedHtmlId)({prefix:"mlJobCreationWizardFieldStats"});return u?Object(o.jsx)(r.EuiFlyout,{type:"push",size:"xs",onClose:f,"aria-labelledby":p,"data-test-subj":"mlFieldStatsFlyout"},Object(o.jsx)(r.EuiFlyoutHeader,{hasBorder:!0},Object(o.jsx)(r.EuiTitle,{size:"m"},Object(o.jsx)("h3",{id:p},Object(o.jsx)(s.FormattedMessage,{id:"xpack.ml.newJob.wizard.fieldContextFlyoutTitle",defaultMessage:"Field statistics"})))),Object(o.jsx)(r.EuiFlyoutBody,{css:j},Object(o.jsx)("b",null,d),Object(o.jsx)(r.EuiSpacer,null),Object(o.jsx)(y,{dataView:e,fieldStatsServices:t,timeRangeMs:a,dslQuery:i})),Object(o.jsx)(r.EuiFlyoutFooter,null,Object(o.jsx)(r.EuiButton,{onClick:f},Object(o.jsx)(s.FormattedMessage,{id:"xpack.ml.newJob.wizard.fieldContextFlyoutCloseButton",defaultMessage:"Close"})))):null};var x=a(151),_=a(180),v=a(10),T=a(22),S=a(7),C=a(126),k=a(9),E=a(5),F=a.n(E);class populated_fields_cache_manager_PopulatedFieldsCacheManager{constructor(e=6e4){F()(this,"_resultsCache",new Map),F()(this,"_lastUpdatedTimestamps",new Map),this._expirationDurationMs=e}clearOldCacheIfNeeded(){this._resultsCache.size>10&&(this._resultsCache.clear(),this._lastUpdatedTimestamps.clear())}clearExpiredCache(e){const t=this._lastUpdatedTimestamps.get(e),a=Date.now();void 0!==t&&t-a>this._expirationDurationMs&&this._resultsCache.delete(e)}get(e){return this._resultsCache.get(e)}set(e,t){this.clearExpiredCache(e),this.clearOldCacheIfNeeded(),this._resultsCache.set(e,Date.now()),this._resultsCache.set(e,t)}}const A=({dataView:e,fieldStatsServices:t,timeRangeMs:a,dslQuery:i,disablePopulatedFields:s=!1,children:r})=>{const{services:{data:{search:c}}}=Object(k.d)(),[u,d]=Object(n.useState)(!1),[f,p]=Object(n.useState)(),[b,m]=Object(n.useState)(),g=Object(n.useCallback)((()=>d(!u)),[u]),[h]=Object(n.useState)(new populated_fields_cache_manager_PopulatedFieldsCacheManager),[y,j]=Object(n.useState)(),E=Object(n.useRef)(new AbortController);return Object(n.useEffect)((function(){var t;if(s)return;let n=!1;E.current&&(E.current.abort(),E.current=new AbortController);const r=(({runtimeFields:e,searchQuery:t,datetimeField:a,timeRange:n})=>{let i;n&&void 0!==a&&Object(T.a)(n,["from","to"])&&n.to>n.from&&(i={range:{[a]:{gte:n.from,lte:n.to,format:"epoch_millis"}}});const s=Object(S.cloneDeep)(!t||Object(T.a)(t,["match_all"])?Object(C.d)():t);i&&Object(T.a)(s,["bool"])&&(Array.isArray(s.bool.filter)?s.bool.filter.push(i):s.bool.filter=[i]);const r={query:{function_score:{query:s,random_score:{}}}};return e&&(r.runtime_mappings=e),r})({searchQuery:i,runtimeFields:e.getRuntimeMappings(),datetimeField:null===(t=e.getTimeField())||void 0===t?void 0:t.name,timeRange:a}),o={index:e.getIndexPattern(),body:{fields:["*"],_source:!1,...r,size:500}},l=Object(_.a)(JSON.stringify(o)).toString();return h.get(l)||(async function(){try{const e=(await Object(v.lastValueFrom)(c.search({params:o},{abortSignal:E.current.signal}))).rawResponse.hits.hits.map((e=>{var t;return Object(x.j)(null!==(t=e.fields)&&void 0!==t?t:{})})),t=new Set(e.map(Object.keys).flat(1));h.set(l,t),n||j(t)}catch(e){"AbortError"!==e.name&&console.error(`An error occurred fetching sample documents to determine populated field stats.\n          \nQuery:\n${JSON.stringify(o)}\n          \nError:${e}`)}}(),()=>{n=!0,E.current.abort()})}),[JSON.stringify({dslQuery:i,dataViewId:e.id,timeRangeMs:a})]),Object(o.jsx)(l.a.Provider,{value:{isFlyoutVisible:u,setIsFlyoutVisible:d,toggleFlyoutVisible:g,setFieldName:p,fieldName:f,setFieldValue:m,fieldValue:b,timeRangeMs:a,populatedFields:y}},Object(o.jsx)(O,{dataView:e,fieldStatsServices:t,timeRangeMs:a,dslQuery:i}),r)};var D=a(204),I=a(133),w=a(241)},182:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return NewJobCapabilitiesServiceBase}));var n=a(5),i=a.n(n),s=a(118);function r(e){const t=e.filter((e=>e.type===s.a.KEYWORD)).map((e=>e.id)),a=e.filter((e=>e.type===s.a.TEXT)).map((e=>e.id));return{fieldsPreferringKeyword:e.filter((e=>e.type!==s.a.TEXT||e.type===s.a.TEXT&&!1===t.includes(`${e.id}.keyword`))),fieldsPreferringText:e.filter((e=>e.type!==s.a.KEYWORD||e.type===s.a.KEYWORD&&!1===a.includes(e.id.replace(/\.keyword$/,""))))}}class NewJobCapabilitiesServiceBase{constructor(){i()(this,"_fields",void 0),i()(this,"_aggs",void 0),this._fields=[],this._aggs=[]}get fields(){return this._fields}get aggs(){return this._aggs}get newJobCaps(){return{fields:this._fields,aggs:this._aggs}}getFieldById(e){const t=this._fields.find((t=>t.id===e));return void 0===t?null:t}getAggById(e){const t=this._aggs.find((t=>t.id===e));return void 0===t?null:t}removeCounterFields(){this._fields=this._fields.filter((e=>!1===e.counter))}}},183:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(3),i=a(103),s=a(11),r=a(123),o=a(131);const l=e=>({}.hasOwnProperty.call(e,"count")&&{}.hasOwnProperty.call(e,"data_frame_analytics")&&Array.isArray(e.data_frame_analytics));const c=(e,t,a,c,u,d)=>{let f=0;const p=async(b=!1)=>{if(!0===b||!1===d){if(r.l.next(r.a.LOADING),f++,f>1)return;try{const d=await s.ml.dataFrameAnalytics.getDataFrameAnalytics(),f=await s.ml.dataFrameAnalytics.getDataFrameAnalyticsStats(),p=l(f)?function(e){const t=e.data_frame_analytics.reduce(((e,{state:t})=>(Object(o.e)(t)?e.failed.value=++e.failed.value:Object(o.f)(t)?e.started.value=++e.started.value:Object(o.h)(t)&&(e.stopped.value=++e.stopped.value),e)),{total:{label:n.i18n.translate("xpack.ml.overview.statsBar.totalAnalyticsLabel",{defaultMessage:"Total"}),value:0,show:!0},started:{label:n.i18n.translate("xpack.ml.overview.statsBar.runningAnalyticsLabel",{defaultMessage:"Running"}),value:0,show:!0},stopped:{label:n.i18n.translate("xpack.ml.overview.statsBar.stoppedAnalyticsLabel",{defaultMessage:"Stopped"}),value:0,show:!0},failed:{label:n.i18n.translate("xpack.ml.overview.statsBar.failedAnalyticsLabel",{defaultMessage:"Failed"}),value:0,show:!1}});return t.failed.show=t.failed.value>0,t.total.value=e.count,0===t.total.value&&(t.started.show=!1,t.stopped.show=!1),t}(f):void 0;let b=0;const m=d.data_frame_analytics.reduce(((e,t)=>{const a=l(f)?f.data_frame_analytics.find((e=>t.id===e.id)):void 0;return Object(o.g)(a)?(a.state===i.d.STARTING&&void 0===a.node&&b++,e.push({checkpointing:{},config:t,id:t.id,job_type:Object(i.s)(t.analysis),mode:o.a.BATCH,state:a.state,stats:a}),e):e}),[]);e(m),t(p),a(void 0),c(!0),u(b),r.l.next(r.a.IDLE)}catch(n){r.l.next(r.a.ERROR),r.l.next(r.a.IDLE),e([]),t(void 0),a(n),c(!0)}if(f--,f>0)return f=0,void p(!0)}};return p}},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(6),i=a(29),s=a(3),r=(a(2),a(102)),o=a.n(r),l=a(71),c=a.n(l);const u={iconType:"questionInCircle",color:"gray"},d={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function f({type:e,label:t,size:a="s",scripted:s,className:r,...l}){const f=d[e]||u;return Object(n.jsx)(i.EuiToken,o()({},f,{className:c()("kbnFieldIcon",r),"aria-label":t||e,title:t||e,size:a,fill:s?"dark":void 0},l))}a(381);Object.keys({xs:"kbnFieldButton--xs",s:"kbnFieldButton--s"});var p=a(9),b=a(118);function m(e){switch(e){case b.a.FLOAT:case b.a.HALF_FLOAT:case b.a.SCALED_FLOAT:case b.a.DOUBLE:case b.a.INTEGER:case b.a.LONG:case b.a.SHORT:case b.a.UNSIGNED_LONG:return"number";case b.a.DATE:case b.a.DATE_NANOS:return"date";default:return e}}const g=({field:e,label:t,onButtonClick:a,disabled:r,isEmpty:o=!1,hideTrigger:l=!1})=>{const c=Object(p.a)(),u=o?" "+s.i18n.translate("xpack.ml.newJob.wizard.fieldContextPopover.emptyFieldInSampleDocsMsg",{defaultMessage:"(no data found in 1000 sample records)"}):"";return Object(n.jsx)(i.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(n.jsx)(i.EuiFlexItem,{grow:!1},l?null:Object(n.jsx)(i.EuiToolTip,{content:s.i18n.translate("xpack.ml.newJob.wizard.fieldContextPopover.inspectFieldStatsTooltip",{defaultMessage:"Inspect field statistics"})+u},Object(n.jsx)(i.EuiButtonIcon,{"data-test-subj":`mlInspectFieldStatsButton-${e.id}`,disabled:!0===r,size:"xs",iconType:"inspect",css:Object(n.css)({color:o?c.euiTheme.euiColorDisabled:void 0},"",""),onClick:t=>{"click"===t.type&&t.currentTarget.focus(),t.preventDefault(),t.stopPropagation(),a&&a(e)},"aria-label":s.i18n.translate("xpack.ml.newJob.wizard.fieldContextPopover.inspectFieldStatsTooltipAriaLabel",{defaultMessage:"Inspect field statistics"})+u}))),Object(n.jsx)(i.EuiFlexItem,{grow:!1,css:Object(n.css)({paddingRight:c.euiTheme.euiSizeXS,paddingBottom:c.euiTheme.euiSizeXS},"","")},Object(n.jsx)(f,{color:o?c.euiTheme.euiColorDisabled:void 0,type:m(e.type),fill:"none"})),Object(n.jsx)(i.EuiText,{color:o?"subdued":void 0,size:"s","aria-label":t,title:t,className:"euiComboBoxOption__content",css:Object(n.css)({paddingBottom:c.euiTheme.euiSizeXS},"","")},t))}},209:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=e=>{var t;return null!==(t=null==e?void 0:e.dest.index)&&void 0!==t?t:""}},230:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s}));var n=a(22);function i(e){return Object(n.a)(e)&&"string"==typeof e.job_id&&void 0!==e.analysis_config}function s(e){return"string"==typeof e.job_id}},240:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(3);function i(e,t){if(void 0===e||void 0===t)return{iconType:"empty",message:""};let a,i="warning",s=0,r=0;if(Array.isArray(e)){if(1!==e.length)return{iconType:"warning",message:n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusualValuesDescription",{defaultMessage:"Unusual values"})};s=e[0]}else s=e;if(Array.isArray(t)?1===t.length&&(r=t[0]):r=t,s===r)a=n.i18n.translate("xpack.ml.formatters.metricChangeDescription.actualSameAsTypicalDescription",{defaultMessage:"actual same as typical"});else{const e=s>r;if(i=e?"sortUp":"sortDown",0!==r&&0!==s){const t=e?s/r:r/s;a=t>1.5?t<=100?e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndHalfxHigherDescription",{defaultMessage:"{factor}x higher",values:{factor:Math.round(t)}}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndHalfxLowerDescription",{defaultMessage:"{factor}x lower",values:{factor:Math.round(t)}}):e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThan100xHigherDescription",{defaultMessage:"More than 100x higher"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThan100xLowerDescription",{defaultMessage:"More than 100x lower"}):t>=1.05?e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndFiveHundredthsxHigherDescription",{defaultMessage:"{factor}x higher",values:{factor:t.toPrecision(2)}}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.moreThanOneAndFiveHundredthsxLowerDescription",{defaultMessage:"{factor}x lower",values:{factor:t.toPrecision(2)}}):e?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusuallyHighDescription",{defaultMessage:"Unusually high"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unusuallyLowDescription",{defaultMessage:"Unusually low"})}else a=0===s?n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unexpectedZeroValueDescription",{defaultMessage:"Unexpected zero value"}):n.i18n.translate("xpack.ml.formatters.metricChangeDescription.unexpectedNonZeroValueDescription",{defaultMessage:"Unexpected non-zero value"})}return{iconType:i,message:a}}},241:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u}));var n=a(102),i=a.n(n),s=a(2),r=a(29),o=a(6),l=a(133);const c={name:"1ypf5f3",styles:".euiComboBoxOption__enterBadge{display:none;}.euiFlexGroup{gap:0px;}.euiComboBoxOption__content{margin-left:2px;}"},u=({options:e,...t})=>{const{renderOption:a}=Object(l.a)(),n=Object(s.useMemo)((()=>Array.isArray(e)?e.map((e=>({...e,css:c}))):[]),[e]);return Object(o.jsx)(r.EuiComboBox,i()({},t,{options:n,renderOption:a,singleSelection:{asPlainText:!0}}))}},242:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(103),i=a(243);const s=e=>{switch(e){case n.b.CLASSIFICATION:return i.a.NOMINAL;case n.b.REGRESSION:return i.a.QUANTITATIVE;default:return}}},243:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n={NOMINAL:"nominal",QUANTITATIVE:"quantitative"}},381:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(382);case"v8light":return a(384)}},382:function(e,t,a){var n=a(109),i=a(383);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},383:function(e,t,a){(t=a(110)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t},384:function(e,t,a){var n=a(109),i=a(385);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},385:function(e,t,a){(t=a(110)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.71429rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=t}}]);