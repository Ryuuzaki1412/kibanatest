/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[23],{198:function(e,t,a){"use strict";a.d(t,"c",(function(){return x})),a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return p}));var s=a(7),n=a(2),i=a.n(n),l=a(24),o=a(19),r=a(31),c=a(101),u=a(29),d=a(27),m=a(45),b=a(6);const x=e=>{const t=j(e);return({setFlyoutAlert:e})=>e=>{const{columnId:a,data:n}=e;if(!Object(l.a)(n))return;const i=(({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value})({data:n,fieldName:a}),o=(e=>{const t=Array.isArray(e)?e.join():e;return Object(s.isEmpty)(t)?"—":"object"==typeof t?JSON.stringify(t):t})(i);return t(a,o)}};function j(e){const t=Object(m.a)(e);return(e,a)=>{switch(e){case o.h:case o.b:case d.c:return Object(b.jsx)(i.a.Fragment,null,t(r.FIELD_FORMAT_IDS.DATE)(a));case o.a:return Object(b.jsx)(i.a.Fragment,null,t(r.FIELD_FORMAT_IDS.DURATION,{inputFormat:"microseconds",outputFormat:"humanizePrecise"})(a));case d.b:return Object(b.jsx)(u.EuiHealth,{textSize:"xs",color:Object(c.A)(a)},t(r.FIELD_FORMAT_IDS.NUMBER)(a));default:return Object(b.jsx)(i.a.Fragment,null,a)}}}function p(e){const t=j(e);return(e,a)=>({title:d.i[e],description:t(e,a)})}},232:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return h}));var s=a(2),n=a.n(s),i=a(3),l=a(19),o=a(7),r=a(29),c=a(24),u=a(6);const d=({alert:e})=>{const t=e[l.e];return Object(u.jsx)(r.EuiTitle,{size:"s"},Object(u.jsx)("h3",null,t))},m=(e,t)=>()=>({body:({alert:a,id:s})=>Object(u.jsx)(r.EuiPanel,null,Object(u.jsx)(r.EuiDescriptionList,{listItems:e.map((e=>{var s;const n=null===(s=Object(o.get)(a,e.id))||void 0===s?void 0:s[0];return{title:e.displayAsText,description:Object(c.a)(n)?t(e.id,n):"—"}})),type:"column",columnWidths:[1,3]})),header:d,footer:null});var b=a(27),x=a(198),j=a(84),p=a(0),g=a(9);const A=!1;function T(e){var t,a,o,c;const{alert:d,refresh:m}=e,{cases:b,triggersActionsUi:x}=Object(g.d)().services,T=null==b?void 0:b.helpers.canUseCases(),[f,h]=Object(s.useState)(!1),O=null!==(t=null===(a=d[l.g])||void 0===a?void 0:a[0])&&void 0!==t?t:null,y=null!==(o=null===(c=d[l.m])||void 0===c?void 0:c[0])&&void 0!==o?o:"",v=Object(s.useMemo)((()=>({_id:d._id,_index:d._index})),[d._id,d._index]),M=Object(s.useMemo)((()=>{var e;return null!=v&&v._id?[{alertId:null!=y?y:"",index:null!==(e=null==v?void 0:v._index)&&void 0!==e?e:"",type:j.AttachmentType.alert,rule:{id:O,name:d[l.e][0]},owner:p.g}]:[]}),[d,y,null==v?void 0:v._id,null==v?void 0:v._index,O]),k=Object(s.useCallback)((()=>{m()}),[m]),C=b.hooks.useCasesAddToNewCaseFlyout({onSuccess:k}),E=b.hooks.useCasesAddToExistingCaseModal({onSuccess:k}),_=()=>{h(!1)},I=Object(s.useMemo)((()=>null==x?void 0:x.getAlertsTableDefaultAlertActions({key:"defaultRowActions",onActionExecuted:_,isAlertDetailsEnabled:!1,resolveRulePagePath:e=>e?`/app/management/insightsAndAlerting/triggersActions/rule/${e}`:null,...e})),[e,x]),w=[...A&&null!=T&&T.create&&T.read?[Object(u.jsx)(r.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",key:"addToExistingCase",onClick:()=>{E.open({getAttachments:()=>M}),_()},size:"s"},i.i18n.translate("xpack.ml.alerts.actions.addToCase",{defaultMessage:"Add to existing case"})),Object(u.jsx)(r.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",key:"addToNewCase",onClick:()=>{C.open({attachments:M}),_()},size:"s"},i.i18n.translate("xpack.ml.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}))]:[],I],F=w.length<=0?i.i18n.translate("xpack.ml.alertsTable.notEnoughPermissions",{defaultMessage:"Additional privileges required"}):i.i18n.translate("xpack.ml.alertsTable.moreActionsTextLabel",{defaultMessage:"More actions"});return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(r.EuiPopover,{anchorPosition:"downLeft",button:Object(u.jsx)(r.EuiToolTip,{content:F},Object(u.jsx)(r.EuiButtonIcon,{"aria-label":F,color:"text","data-test-subj":"alertsTableRowActionMore",display:"empty",iconType:"boxesHorizontal",onClick:()=>{h(!f)},size:"s"})),closePopover:_,isOpen:f,panelPaddingSize:"none"},Object(u.jsx)(r.EuiContextMenuPanel,{size:"s",items:w,"data-test-subj":"alertsTableActionsMenu"})))}function f(e,t){const a=[{id:l.i,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.status",{defaultMessage:"Status"}),initialWidth:150},{id:l.d,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.reason",{defaultMessage:"Reason"}),initialWidth:150},{id:l.e,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.ruleName",{defaultMessage:"Rule name"}),initialWidth:150},{id:b.a,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.jobId",{defaultMessage:"Job ID"}),initialWidth:150},{id:b.b,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.anomalyScore",{defaultMessage:"Latest anomaly score"}),initialWidth:150,isSortable:!0,schema:"numeric"},{id:l.h,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.triggeredAt",{defaultMessage:"Triggered at"}),initialWidth:250,schema:"datetime"},{id:l.b,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.recoveredAt",{defaultMessage:"Recovered at"}),initialWidth:250,schema:"datetime"},{id:b.c,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.anomalyTime",{defaultMessage:"Latest anomaly time"}),initialWidth:250,schema:"datetime"},{id:l.a,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.duration",{defaultMessage:"Duration"}),initialWidth:150,schema:"numeric"}],s=[{[l.h]:{order:"desc"}}],n={id:h,columns:a,useInternalFlyout:m(a,Object(x.b)(t)),getRenderCellValue:Object(x.c)(t),sort:s,useActionsColumn:()=>({renderCustomActionsRow:e=>Object(u.jsx)(T,e)})};e.alertsTableConfigurationRegistry.register(n)}const h="mlAlerts"},686:function(e,t,a){"use strict";a.r(t);var s=a(232);a.d(t,"registerAlertsTableConfiguration",(function(){return s.b}))}}]);