/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.crossClusterReplication_bundle_jsonpfunction=window.crossClusterReplication_bundle_jsonpfunction||[]).push([[1],{32:function(e,t,s){e.exports=s(22)(2)},33:function(e,t,s){e.exports=s(22)(3)},34:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(24),a=s(35),r=o.__importDefault(s(37));t.default=function(e,t){r.default(e,t,a.isDeepEqual)}},35:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var o=s(24).__importDefault(s(36));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.removeEventListener.apply(e,t)},t.isDeepEqual=o.default},36:function(e,t,s){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var o,a,r;if(Array.isArray(t)){if((o=t.length)!=s.length)return!1;for(a=o;0!=a--;)if(!e(t[a],s[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((o=(r=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(a=o;0!=a--;)if(!Object.prototype.hasOwnProperty.call(s,r[a]))return!1;for(a=o;0!=a--;){var l=r[a];if(!("_owner"===l&&t.$$typeof||e(t[l],s[l])))return!1}return!0}return t!=t&&s!=s}},37:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(14);t.default=function(e,t,s){var a=o.useRef(void 0);a.current&&s(t,a.current)||(a.current=t),o.useEffect(e,a.current)}},38:function(e,t,s){"use strict";const o=s(39),a=s(40),r=s(41);function l(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function n(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function i(e,t){return t.decode?a(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function x(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const s=function(e){let t;switch(e.arrayFormat){case"index":return(e,s,o)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=s):o[e]=s};case"bracket":return(e,s,o)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],s):o[e]=[s]:o[e]=s};case"comma":case"separator":return(t,s,o)=>{const a="string"==typeof s&&s.split("").indexOf(e.arrayFormatSeparator)>-1?s.split(e.arrayFormatSeparator).map((t=>i(t,e))):null===s?s:i(s,e);o[t]=a};default:return(e,t,s)=>{void 0!==s[e]?s[e]=[].concat(s[e],t):s[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const a of e.split("&")){let[e,l]=r(t.decode?a.replace(/\+/g," "):a,"=");l=void 0===l?null:["comma","separator"].includes(t.arrayFormat)?l:i(l,t),s(i(e,t),l,o)}for(const e of Object.keys(o)){const s=o[e];if("object"==typeof s&&null!==s)for(const e of Object.keys(s))s[e]=p(s[e],t);else o[e]=p(s,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const s=o[t];return Boolean(s)&&"object"==typeof s&&!Array.isArray(s)?e[t]=c(s):e[t]=s,e}),Object.create(null))}t.extract=d,t.parse=x,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const s=s=>t.skipNull&&null==e[s]||t.skipEmptyString&&""===e[s],o=function(e){switch(e.arrayFormat){case"index":return t=>(s,o)=>{const a=s.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?s:null===o?[...s,[n(t,e),"[",a,"]"].join("")]:[...s,[n(t,e),"[",n(a,e),"]=",n(o,e)].join("")]};case"bracket":return t=>(s,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?s:null===o?[...s,[n(t,e),"[]"].join("")]:[...s,[n(t,e),"[]=",n(o,e)].join("")];case"comma":case"separator":return t=>(s,o)=>null==o||0===o.length?s:0===s.length?[[n(t,e),"=",n(o,e)].join("")]:[[s,n(o,e)].join(e.arrayFormatSeparator)];default:return t=>(s,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?s:null===o?[...s,n(t,e)]:[...s,[n(t,e),"=",n(o,e)].join("")]}}(t),a={};for(const t of Object.keys(e))s(t)||(a[t]=e[t]);const r=Object.keys(a);return!1!==t.sort&&r.sort(t.sort),r.map((s=>{const a=e[s];return void 0===a?"":null===a?n(s,t):Array.isArray(a)?a.reduce(o(s),[]).join("&"):n(s,t)+"="+n(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[s,o]=r(e,"#");return Object.assign({url:s.split("?")[0]||"",query:x(d(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:i(o,t)}:{})},t.stringifyUrl=(e,s)=>{s=Object.assign({encode:!0,strict:!0},s);const o=u(e.url).split("?")[0]||"",a=t.extract(e.url),r=t.parse(a,{sort:!1}),l=Object.assign(r,e.query);let i=t.stringify(l,s);i&&(i=`?${i}`);let c=function(e){let t="";const s=e.indexOf("#");return-1!==s&&(t=e.slice(s)),t}(e.url);return e.fragmentIdentifier&&(c=`#${n(e.fragmentIdentifier,s)}`),`${o}${i}${c}`}},39:function(e,t,s){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},40:function(e,t,s){"use strict";var o="%[a-f0-9]{2}",a=new RegExp("("+o+")|([^%]+?)","gi"),r=new RegExp("("+o+")+","gi");function l(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var s=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],l(s),l(o))}function n(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(a)||[],s=1;s<t.length;s++)t=(e=l(t,s).join("")).match(a)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},s=r.exec(e);s;){try{t[s[0]]=decodeURIComponent(s[0])}catch(e){var o=n(s[0]);o!==s[0]&&(t[s[0]]=o)}s=r.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),l=0;l<a.length;l++){var i=a[l];e=e.replace(new RegExp(i,"g"),t[i])}return e}(e)}}},41:function(e,t,s){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const s=e.indexOf(t);return-1===s?[e]:[e.slice(0,s),e.slice(s+t.length)]}},42:function(e,t,s){e.exports=s(22)(3830)},43:function(e,t){ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(e,t,s){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e("../lib/dom").importCssString(t.cssText,t.cssClass)}))},44:function(e,t,s){"use strict";function o(e){return function(t){var s=t.dispatch,o=t.getState;return function(t){return function(a){return"function"==typeof a?a(s,o,e):t(a)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o();a.withExtraArgument=o;var r=a;t.default=r},45:function(e,t,s){"use strict";s.r(t),s.d(t,"mountApp",(function(){return us}));var o=s(14),a=s.n(o),r=s(30),l=s(18),n=s(20),i=s(19),c=(s(23),s(4));let u;const d=e=>{u=e},p=e=>({text:c.i18n.translate("xpack.crossClusterReplication.homeBreadcrumbTitle",{defaultMessage:"Cross-Cluster Replication"}),href:e||"/"}),x={text:c.i18n.translate("xpack.crossClusterReplication.addBreadcrumbTitle",{defaultMessage:"Add"})},m={text:c.i18n.translate("xpack.crossClusterReplication.editBreadcrumbTitle",{defaultMessage:"Edit"})};let j;const f=e=>{j=e.links};var b=s(21),g=s(33),O=s.n(g);const w={services:{}},h=Object(o.createContext)(w);var F=s(34),C=s.n(F),I=s(15);const E=({children:e,component:t,render:s,...r})=>{const l=Object(o.useMemo)((()=>{if(t)return e=>Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(M,null),Object(I.jsx)(t,e))}),[t]);if(l)return Object(I.jsx)(b.Route,O()({},r,{component:l}));if(s||"function"==typeof e){const t="function"==typeof e?e:s;return Object(I.jsx)(b.Route,O()({},r,{render:e=>Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(M,null),t(e))}))}return Object(I.jsx)(b.Route,r,Object(I.jsx)(M,null),e)},M=()=>{const{executionContext:e}=Object(o.useContext)(h).services,t=Object(b.useRouteMatch)();return function(e,t){C()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null};var R=s(25);const P=({children:e,...t})=>Object(I.jsx)(b.Router,t,Object(I.jsx)(R.CompatRouter,null,e));var y=s(9);const v=({legacySwitch:e=!0,children:t})=>{const s=Object(b.useRouteMatch)();return e?Object(I.jsx)(b.Switch,null,t):Object(I.jsx)(R.Routes,null,o.Children.map(t,(e=>{if(a.a.isValidElement(e)&&e.type===E){var o;const r=Object(y.replace)(null==e?void 0:e.props.path,s.url+"/",""),l="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(I.jsx)(R.Route,{path:r,element:Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(M,null),(null==e||null===(o=e.props)||void 0===o?void 0:o.component)&&Object(I.jsx)(e.props.component,null)||l&&l()||t)})}return e})))};var _=s(17),L=s(16),S=s(8),T=s(32),k=s.n(T),A=s(38),D=s(0);const N=(e,t=!1)=>{if(e)return`?${Object(A.stringify)(e,{sort:!1,encode:t})}`},B=new class routing_Routing{constructor(){k()(this,"_reactRouter",null),k()(this,"getAutoFollowPatternPath",((e,t="/edit")=>encodeURI(`/auto_follow_patterns${t}/${encodeURIComponent(e)}`))),k()(this,"getFollowerIndexPath",((e,t="/edit")=>encodeURI(`/follower_indices${t}/${encodeURIComponent(e)}`)))}getHrefToRemoteClusters(e="/",t,s=!1){const o=N(t,s)||"";return this._reactRouter.getUrlForApp("management",{path:`${D.d}${e}${o}`})}navigate(e="/home",t,s=!1){const o=N(t,s);this._reactRouter.history.push({pathname:encodeURI(e),search:o})}get reactRouter(){return this._reactRouter}set reactRouter(e){this._reactRouter=e}};var q=s(7),z=s(1),U=s(31);const W=e=>Object.keys(e).map((t=>({...e[t],__id__:t}))),V=(e,t="id")=>e.reduce(((e,s)=>(e[s[t]]=s,e)),{}),$=e=>e.api,G=e=>Object(U.createSelector)($,(t=>t.status[e]||z.a.IDLE)),H=e=>Object(U.createSelector)($,(t=>t.error[e])),Y=e=>Object(U.createSelector)(H(e),(e=>!e||403!==e.status)),X=Object(U.createSelector)((e=>e.stats),(e=>e.autoFollow)),K=e=>e.autoFollowPattern,Q=Object(U.createSelector)(K,(e=>e.byId)),J=(e="detail")=>Object(U.createSelector)(K,(t=>"detail"===e?t.selectedDetailId:t.selectedEditId)),Z=(e="detail")=>Object(U.createSelector)(K,X,((t,s)=>{const o="detail"===e?"selectedDetailId":"selectedEditId";if(!t[o])return null;const a=t[o],r=t.byId[a],l=s&&s.recentAutoFollowErrors[a]||[];return r?{...r,errors:l}:null})),ee=Object(U.createSelector)(Q,(e=>W(e))),te=e=>e.followerIndex,se=Object(U.createSelector)(te,(e=>e.byId)),oe=(e="detail")=>Object(U.createSelector)(te,(t=>"detail"===e?t.selectedDetailId:t.selectedEditId)),ae=(e="detail")=>Object(U.createSelector)(te,(t=>{const s="detail"===e?"selectedDetailId":"selectedEditId";return t[s]?t.byId[t[s]]:null})),re=Object(U.createSelector)(se,(e=>W(e))),le="API_REQUEST_START",ne="API_REQUEST_END",ie="API_ERROR_SET",ce="AUTO_FOLLOW_PATTERN_SELECT_DETAIL",ue="AUTO_FOLLOW_PATTERN_SELECT_EDIT",de="AUTO_FOLLOW_PATTERN_LOAD",pe="AUTO_FOLLOW_PATTERN_GET",xe="AUTO_FOLLOW_PATTERN_DELETE",me="AUTO_FOLLOW_PATTERN_PAUSE",je="AUTO_FOLLOW_PATTERN_RESUME",fe="FOLLOWER_INDEX_SELECT_DETAIL",be="FOLLOWER_INDEX_SELECT_EDIT",ge="FOLLOWER_INDEX_LOAD",Oe="FOLLOWER_INDEX_GET",we="FOLLOWER_INDEX_UNFOLLOW",he="AUTO_FOLLOW_STATS_LOAD",Fe=({label:e,scope:t})=>({type:ne,payload:{label:e,scope:t}}),Ce=e=>({type:ie,payload:{error:null,scope:e}}),Ie=({label:e,scope:t,status:s,handler:o,onSuccess:a=(()=>{}),onError:r=(()=>{})})=>async(l,n)=>{l(Ce(t)),l((({label:e,scope:t,status:s=z.a.LOADING})=>({type:le,payload:{label:e,scope:t,status:s}}))({label:e,scope:t,status:s}));try{const s=await o(l);l(Fe({label:e,scope:t})),l({type:`${e}_SUCCESS`,payload:s}),a(s,l,n)}catch(s){l(Fe({label:e,scope:t})),l((({error:e,scope:t})=>({type:ie,payload:{error:e,scope:t}}))({error:s,scope:t})),l({type:`${e}_FAILURE`,payload:s}),r(s,l,n)}},{AUTO_FOLLOW_PATTERN:Ee}=z.b,Me=e=>({type:ce,payload:e}),Re=(e,t,s=!1)=>Ie({label:s?"AUTO_FOLLOW_PATTERN_UPDATE":"AUTO_FOLLOW_PATTERN_CREATE",status:z.a.SAVING,scope:`${Ee}-save`,handler:async()=>s?await Object(q.r)(e,t):await Object(q.a)({id:e,...t}),onSuccess(){const t=s?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.updateAction.successNotificationTitle",{defaultMessage:"Auto-follow pattern '{name}' updated successfully",values:{name:e}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.addAction.successNotificationTitle",{defaultMessage:"Added auto-follow pattern '{name}'",values:{name:e}});Object(S.b)().addSuccess(t),B.navigate("/auto_follow_patterns",{pattern:encodeURIComponent(e)})}}),Pe=e=>Ie({label:me,scope:`${Ee}-pause`,status:z.a.UPDATING,handler:()=>Object(q.l)(e),onSuccess:e=>{if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.pauseAction.errorMultipleNotificationTitle",{defaultMessage:"Error pausing {count} auto-follow patterns",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.pauseAction.errorSingleNotificationTitle",{defaultMessage:"Error pausing the '{name}' auto-follow pattern",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsPaused.length){const t=e.itemsPaused.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.pauseAction.successMultipleNotificationTitle",{defaultMessage:"{count} auto-follow patterns were paused",values:{count:e.itemsPaused.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.pauseAction.successSingleNotificationTitle",{defaultMessage:"Auto-follow pattern '{name}' was paused",values:{name:e.itemsPaused[0]}});Object(S.b)().addSuccess(t)}}}),ye=e=>Ie({label:je,scope:`${Ee}-resume`,status:z.a.UPDATING,handler:()=>Object(q.n)(e),onSuccess:e=>{if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.resumeAction.errorMultipleNotificationTitle",{defaultMessage:"Error resuming {count} auto-follow patterns",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.resumeAction.errorSingleNotificationTitle",{defaultMessage:"Error resuming the '{name}' auto-follow pattern",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsResumed.length){const t=e.itemsResumed.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.resumeAction.successMultipleNotificationTitle",{defaultMessage:"{count} auto-follow patterns were resumed",values:{count:e.itemsResumed.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.resumeAction.successSingleNotificationTitle",{defaultMessage:"Auto-follow pattern '{name}' was resumed",values:{name:e.itemsResumed[0]}});Object(S.b)().addSuccess(t)}}}),{FOLLOWER_INDEX:ve}=z.b,_e=e=>({type:fe,payload:e}),Le=(e=!1)=>Ie({label:ge,scope:ve,status:e?z.a.UPDATING:z.a.LOADING,handler:async()=>await Object(q.h)(e)}),Se=(e,t,s=!1)=>Ie({label:"FOLLOWER_INDEX_CREATE",status:z.a.SAVING,scope:`${ve}-save`,handler:async()=>s?await Object(q.s)(e,t):await Object(q.b)({name:e,...t}),onSuccess(){const t=s?c.i18n.translate("xpack.crossClusterReplication.followerIndex.updateAction.successNotificationTitle",{defaultMessage:"Follower index '{name}' updated successfully",values:{name:e}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.addAction.successNotificationTitle",{defaultMessage:"Added follower index '{name}'",values:{name:e}});Object(S.b)().addSuccess(t),B.navigate("/follower_indices",{name:encodeURIComponent(e)})}}),{CCR_STATS:Te}=z.b;var ke=s(2);function Ae(e){var t;const{title:s,error:a,...r}=e,l=a.body?a.body:a,{error:n,attributes:i,message:c}=l;return Object(I.jsx)(L.EuiCallOut,O()({title:s,color:"danger",iconType:"warning"},r),Object(I.jsx)("div",null,c||n),(null==i||null===(t=i.error)||void 0===t?void 0:t.root_cause)&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiSpacer,{size:"m"}),Object(I.jsx)("ul",null,i.error.root_cause.map((({type:e,reason:t},s)=>Object(I.jsx)("li",{key:s},e,": ",t))))))}class remote_clusters_provider_RemoteClustersProvider extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isLoading:!0,error:null,remoteClusters:[]})}componentDidMount(){this.loadRemoteClusters()}loadRemoteClusters(){Object(q.k)().then((e=>e.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)))).then((e=>{this.setState({isLoading:!1,remoteClusters:e})})).catch((e=>{this.setState({isLoading:!1,error:e})}))}render(){const{children:e}=this.props,{isLoading:t,error:s,remoteClusters:o}=this.state;return e({isLoading:t,error:s,remoteClusters:o})}}var De=s(26);const Ne=(e,t)=>t&&e.some((e=>e.name===t))?t:(e=>{for(let t=0;t<e.length;t++)if(e[t].isConnected)return e[t];return e.length?e[0]:{}})(e).name;var Be=s(27),qe=s.n(Be);const ze=({prefix:e,suffix:t,leaderIndexPatterns:s})=>{const{indicesPreview:o}=(({prefix:e,suffix:t,leaderIndexPatterns:s,limit:o=5,wildcardPlaceHolders:a=[qe()().format("YYYY-MM-DD"),qe()().add(1,"days").format("YYYY-MM-DD"),qe()().add(2,"days").format("YYYY-MM-DD")]})=>{const r=[];let l,n;return s.forEach((s=>{a.forEach((o=>{n=s.replace(/\*/g,o),l=((e="",t="",s="{{leader_index}}")=>({followPattern:{prefix:e,suffix:t,template:s},toString:e+s+t}))(e,t,n),r.some((e=>l.toString===e.toString))||r.push(l)}))})),{indicesPreview:r.slice(0,o),hasMore:r.length>o}})({prefix:e,suffix:t,leaderIndexPatterns:s}),a=c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternForm.indicesPreviewTitle",{defaultMessage:"Index name examples"});return Object(I.jsx)(L.EuiCallOut,{title:a,iconType:"indexMapping","data-test-subj":"autoFollowPatternIndicesPreview"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.indicesPreviewDescription",defaultMessage:"The above settings will generate index names that look like this:"}),Object(I.jsx)("ul",null,o.map((({followPattern:{prefix:e,suffix:t,template:s}},o)=>Object(I.jsx)("li",{key:o,"data-test-subj":"indexPreview"},e,Object(I.jsx)("strong",null,s),t)))))},Ue={noClusterFound:()=>Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.emptyRemoteClustersCallOutDescription",defaultMessage:"You need at least one remote cluster to create a follower index."}),remoteClusterNotConnectedEditable:e=>({title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.currentRemoteClusterNotConnectedCallOutTitle",defaultMessage:"Remote cluster '{name}' is not connected",values:{name:e}}),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.currentRemoteClusterNotConnectedCallOutDescription",defaultMessage:"Edit the remote cluster or select a cluster that is connected."})})};class remote_clusters_form_field_RemoteClustersFormField extends o.PureComponent{constructor(...e){super(...e),k()(this,"errorMessages",{...Ue,...this.props.errorMessages}),k()(this,"onRemoteClusterChange",(e=>{const{onChange:t,onError:s}=this.props,{error:o}=this.validateRemoteCluster(e);t(e),s(o)})),k()(this,"renderNotEditable",(()=>{const{areErrorsVisible:e}=this.props,t=this.renderErrorMessage();return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiFieldText,{value:this.props.selected,fullWidth:!0,disabled:!0,isInvalid:e&&Boolean(t),"data-test-subj":"remoteClusterInput"}),e&&Boolean(t)?this.renderValidRemoteClusterRequired():null,t)})),k()(this,"renderValidRemoteClusterRequired",(()=>Object(I.jsx)(L.EuiFormErrorText,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.validRemoteClusterRequired",defaultMessage:"A connected remote cluster is required."})))),k()(this,"renderDropdown",(()=>{const{remoteClusters:e,selected:t,currentUrl:s,areErrorsVisible:a}=this.props,r=Boolean(e.length),l=r?e.map((({name:e,isConnected:t})=>({value:e,text:t?e:c.i18n.translate("xpack.crossClusterReplication.remoteClustersFormField.remoteClusterDropdownNotConnected",{defaultMessage:"{name} (not connected)",values:{name:e}}),"data-test-subj":`option-${e}`}))):[],n=this.renderErrorMessage();return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiSelect,{fullWidth:!0,options:l,value:r?t:"",onChange:e=>{this.onRemoteClusterChange(e.target.value)},hasNoInitialSelection:!r,isInvalid:a&&Boolean(n),"data-test-subj":"remoteClusterSelect","aria-label":c.i18n.translate("xpack.crossClusterReplication.remoteClustersFormField.remoteClusterSelectAriaLabel",{defaultMessage:"Remote cluster selection"})}),a&&Boolean(n)?this.renderValidRemoteClusterRequired():null,n,Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)("div",null," ",Object(I.jsx)(L.EuiButtonEmpty,{href:B.getHrefToRemoteClusters("/add",{redirect:`/data/cross_cluster_replication${s}`},!0),size:"s",iconType:"plusInCircle",flush:"left","data-test-subj":"addButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.addRemoteClusterButtonLabel",defaultMessage:"Add remote cluster"}))))})),k()(this,"renderNoClusterFound",(()=>{const{currentUrl:e}=this.props,t=c.i18n.translate("xpack.crossClusterReplication.remoteClustersFormField.emptyRemoteClustersCallOutTitle",{defaultMessage:"You don't have any remote clusters"});return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiCallOut,{title:t,color:"danger",iconType:"cross","data-test-subj":"noClusterFoundError"},Object(I.jsx)("p",null,this.errorMessages.noClusterFound()),Object(I.jsx)(L.EuiButton,{href:B.getHrefToRemoteClusters("/add",{redirect:`/data/cross_cluster_replication${e}`},!0),iconType:"plusInCircle",color:"danger","data-test-subj":"addButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.addRemoteClusterButtonLabel",defaultMessage:"Add remote cluster"}))))})),k()(this,"renderCurrentRemoteClusterNotConnected",((e,t)=>{const{isEditable:s,currentUrl:o}=this.props,{remoteClusterNotConnectedEditable:a,remoteClusterNotConnectedNotEditable:r}=this.errorMessages,{title:l,description:n}=s?a(e):r(e);return Object(I.jsx)(L.EuiCallOut,{title:l,color:t?"danger":"warning",iconType:"cross","data-test-subj":"notConnectedError"},Object(I.jsx)("p",null,n),Object(I.jsx)(L.EuiButton,{href:B.getHrefToRemoteClusters(`/edit/${e}`,{redirect:`/data/cross_cluster_replication${o}`},!0),color:t?"danger":"warning","data-test-subj":"editButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.viewRemoteClusterButtonLabel",defaultMessage:"Edit remote cluster"})))})),k()(this,"renderRemoteClusterDoesNotExist",(e=>{const{currentUrl:t}=this.props,s=c.i18n.translate("xpack.crossClusterReplication.remoteClustersFormField.remoteClusterNotFoundTitle",{defaultMessage:"Couldn't find remote cluster '{name}'",values:{name:e}});return Object(I.jsx)(L.EuiCallOut,{title:s,color:"danger",iconType:"cross"},Object(I.jsx)("p",null,this.errorMessages.remoteClusterDoesNotExist(e)),Object(I.jsx)(L.EuiButton,{href:B.getHrefToRemoteClusters("/add",{redirect:`/data/cross_cluster_replication${t}`},!0),iconType:"plusInCircle",color:"danger","data-test-subj":"addButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.addRemoteClusterButtonLabel",defaultMessage:"Add remote cluster"})))})),k()(this,"renderErrorMessage",(()=>{const{selected:e,remoteClusters:t,isEditable:s}=this.props,a=t.find((t=>t.name===e)),r=a&&a.isConnected;let l;if(s){const s=Boolean(t.length);s&&!r?l=this.renderCurrentRemoteClusterNotConnected(e):s||(l=this.renderNoClusterFound())}else a?r||(l=this.renderCurrentRemoteClusterNotConnected(e,!0)):l=this.renderRemoteClusterDoesNotExist(e);return l?Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiSpacer,{size:"s"}),l):null}))}componentDidMount(){const{selected:e,onError:t}=this.props,{error:s}=this.validateRemoteCluster(e);t(s)}validateRemoteCluster(e){const{remoteClusters:t}=this.props,s=t.find((t=>t.name===e));return s&&s.isConnected?{error:null}:{error:{message:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.invalidRemoteClusterError",defaultMessage:"Invalid remote cluster"})}}}render(){const{remoteClusters:e,selected:t,isEditable:s,areErrorsVisible:o}=this.props,a=e.find((e=>e.name===t)),r=Boolean(e.length),l=a&&a.isConnected,n=o&&(!r||!l);let i;return i=s?r?this.renderDropdown():this.renderErrorMessage():this.renderNotEditable(),Object(I.jsx)(L.EuiFormRow,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.remoteClustersFormField.fieldClusterLabel",defaultMessage:"Remote cluster"}),isInvalid:n,fullWidth:!0,"data-test-subj":"remoteClusterFormField"},i)}}const{indexNameBeginsWithPeriod:We,findIllegalCharactersInIndexName:Ve,indexNameContainsSpaces:$e}=n.indices,Ge=(e={})=>{const t={};let s,o=null;return Object.keys(e).forEach((a=>{switch(s=e[a],o=null,a){case"name":o=((e="")=>{let t=null;return e&&e.trim()?(e.includes(" ")&&(t=c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.nameValidation.errorSpace",{defaultMessage:"Spaces are not allowed in the name."})),"_"===e[0]&&(t=c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.nameValidation.errorUnderscore",{defaultMessage:"Name can't begin with an underscore."})),e.includes(",")&&(t=c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.nameValidation.errorComma",{defaultMessage:"Commas are not allowed in the name."}))):t=c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.nameValidation.errorEmptyName",{defaultMessage:"Name is required."}),t})(s);break;case"leaderIndexPatterns":o=s.length?null:{message:c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.leaderIndexPatternValidation.isEmpty",{defaultMessage:"At least one leader index pattern is required."})};break;case"followIndexPatternPrefix":o=(e=>{if(!e||!e.trim())return null;if(We(e))return Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.prefixValidation.beginsWithPeriod",defaultMessage:"The prefix can't begin with a period."});const t=Ve(e);return t.length?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.prefixValidation.illegalCharacters",defaultMessage:"Remove the {characterListLength, plural, one {character} other {characters}} {characterList} from the prefix.",values:{characterList:Object(I.jsx)("strong",null,t.join(" ")),characterListLength:t.length}}):$e(e)?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.prefixValidation.noEmptySpace",defaultMessage:"Spaces are not allowed in the prefix."}):null})(s);break;case"followIndexPatternSuffix":o=(e=>{if(!e||!e.trim())return null;const t=Ve(e);return t.length?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.suffixValidation.illegalCharacters",defaultMessage:"Remove the {characterListLength, plural, one {character} other {characters}} {characterList} from the suffix.",values:{characterList:Object(I.jsx)("strong",null,t.join(" ")),characterListLength:t.length}}):$e(e)?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.suffixValidation.noEmptySpace",defaultMessage:"Spaces are not allowed in the suffix."}):null})(s)}t[a]=o})),t};class auto_follow_pattern_request_flyout_AutoFollowPatternRequestFlyout extends o.PureComponent{render(){const{name:e,autoFollowPattern:t,close:s,isNew:o}=this.props,a=`PUT /_ccr/auto_follow/${e||"<autoFollowPatternName>"}\n${JSON.stringify((({remoteCluster:e,leaderIndexPatterns:t,followIndexPattern:s})=>({remote_cluster:e,leader_index_patterns:t,follow_index_pattern:s}))(t),null,2)}`;return Object(I.jsx)(L.EuiFlyout,{maxWidth:480,onClose:s},Object(I.jsx)(L.EuiFlyoutHeader,null,Object(I.jsx)(L.EuiTitle,null,Object(I.jsx)("h2",null,e?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.requestFlyout.namedTitle",defaultMessage:"Request for '{name}'",values:{name:e}}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.requestFlyout.unnamedTitle",defaultMessage:"Request"})))),Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)(L.EuiText,null,Object(I.jsx)("p",null,o?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.requestFlyout.createDescriptionText",defaultMessage:"This Elasticsearch request will create this auto-follow pattern."}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.requestFlyout.editDescriptionText",defaultMessage:"This Elasticsearch request will update this auto-follow pattern."}))),Object(I.jsx)(L.EuiSpacer,null),Object(I.jsx)(L.EuiCodeBlock,{language:"json",isCopyable:!0},a)),Object(I.jsx)(L.EuiFlyoutFooter,null,Object(I.jsx)(L.EuiButtonEmpty,{iconType:"cross",onClick:s,flush:"left"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.requestFlyout.closeButtonLabel",defaultMessage:"Close"}))))}}const He=De.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.join(" "),Ye=n.indices.INDEX_ILLEGAL_CHARACTERS_VISIBLE.join(" "),Xe=(e,t)=>({fieldsErrors:{...t,...e}});class auto_follow_pattern_form_AutoFollowPatternForm extends o.PureComponent{constructor(e){super(e),k()(this,"toggleRequest",(()=>{this.setState((({isRequestVisible:e})=>({isRequestVisible:!e})))})),k()(this,"onFieldsChange",(e=>{this.setState((({autoFollowPattern:t})=>({autoFollowPattern:{...t,...e}})));const t=Ge(e);this.onFieldsErrorChange(t)})),k()(this,"onFieldsErrorChange",(e=>this.setState((({fieldsErrors:t})=>Xe(e,t))))),k()(this,"onClusterChange",(e=>{this.onFieldsChange({remoteCluster:e})})),k()(this,"onCreateLeaderIndexPattern",(e=>{const t=(e=>{if(e){const t=De.indexPatterns.validate(e);if(t[De.indexPatterns.ILLEGAL_CHARACTERS_KEY])return{message:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.leaderIndexPatternValidation.illegalCharacters",defaultMessage:"Remove the {characterListLength, plural, one {character} other {characters}} {characterList} from the index pattern.",values:{characterList:Object(I.jsx)("strong",null,t[De.indexPatterns.ILLEGAL_CHARACTERS_KEY].join(" ")),characterListLength:t[De.indexPatterns.ILLEGAL_CHARACTERS_KEY].length}})};if(t[De.indexPatterns.CONTAINS_SPACES_KEY])return{message:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.leaderIndexPatternValidation.noEmptySpace",defaultMessage:"Spaces are not allowed in the index pattern."})}}return e&&e.trim()?null:{message:c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.leaderIndexPatternValidation.isEmpty",{defaultMessage:"At least one leader index pattern is required."})}})(e);if(t){const e={leaderIndexPatterns:{...t,alwaysVisible:!0}};return this.setState((({fieldsErrors:t})=>Xe(e,t))),!1}const{autoFollowPattern:{leaderIndexPatterns:s}}=this.state,o=[...s,e];this.onFieldsChange({leaderIndexPatterns:o})})),k()(this,"onLeaderIndexPatternChange",(e=>{this.onFieldsChange({leaderIndexPatterns:e.map((({label:e})=>e))})})),k()(this,"onLeaderIndexPatternInputChange",(e=>{const t=!e||!e.trim(),{autoFollowPattern:{leaderIndexPatterns:s}}=this.state;if(!t&&s.includes(e)){const e={leaderIndexPatterns:{message:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternForm.leaderIndexPatternError.duplicateMessage",{defaultMessage:"Duplicate leader index pattern aren't allowed."}),alwaysVisible:!0}};this.setState((({fieldsErrors:t})=>Xe(e,t)))}else this.setState((({fieldsErrors:t,autoFollowPattern:{leaderIndexPatterns:s}})=>{const o=Boolean(s.length)?Ge({leaderIndexPatterns:s}):Ge({leaderIndexPatterns:[e]});return Xe(o,t)}))})),k()(this,"getFields",(()=>{const{autoFollowPattern:e}=this.state,{followIndexPatternPrefix:t,followIndexPatternSuffix:s,...o}=e;return{...o,followIndexPattern:`${t}{{leader_index}}${s}`}})),k()(this,"sendForm",(()=>{if(!this.isFormValid())return void this.setState({areErrorsVisible:!0});this.setState({areErrorsVisible:!1});const{name:e,...t}=this.getFields();this.props.saveAutoFollowPattern(e,t)})),k()(this,"cancelForm",(()=>{B.navigate("/auto_follow_patterns")})),k()(this,"renderForm",(()=>{const{autoFollowPattern:{name:e,remoteCluster:t,leaderIndexPatterns:s,followIndexPatternPrefix:a,followIndexPatternSuffix:r},isNew:l,areErrorsVisible:n,fieldsErrors:i}=this.state;return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiForm,{"data-test-subj":"autoFollowPatternForm"},(()=>{const t=n&&!!i.name;return Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h4",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionAutoFollowPatternNameTitle",defaultMessage:"Name"}))),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionAutoFollowPatternNameDescription",defaultMessage:"A unique name for the auto-follow pattern."}),fullWidth:!0},Object(I.jsx)(L.EuiFormRow,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.autoFollowPatternName.fieldNameLabel",defaultMessage:"Name"}),error:i.name,isInvalid:t,fullWidth:!0},Object(I.jsx)(L.EuiFieldText,{isInvalid:t,value:e,onChange:e=>this.onFieldsChange({name:e.target.value}),fullWidth:!0,disabled:!l,"data-test-subj":"nameInput"})))})(),(()=>{const{remoteClusters:e,currentUrl:s}=this.props,o={noClusterFound:()=>Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.emptyRemoteClustersCallOutDescription",defaultMessage:"Auto-follow patterns capture indices on remote clusters."}),remoteClusterNotConnectedNotEditable:e=>({title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.currentRemoteClusterNotConnectedCallOutTitle",defaultMessage:"Can't edit auto-follow pattern because remote cluster '{name}' is not connected",values:{name:e}}),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.currentRemoteClusterNotConnectedCallOutDescription",defaultMessage:"You can address this by editing the remote cluster."})}),remoteClusterDoesNotExist:e=>Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.currentRemoteClusterNotFoundCallOutDescription",defaultMessage:"To edit this auto-follow pattern, you must add a remote cluster named '{name}'.",values:{name:e}})};return Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h4",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionRemoteClusterTitle",defaultMessage:"Remote cluster"}))),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionRemoteClusterDescription",defaultMessage:"The remote cluster to replicate leader indices from."}),fullWidth:!0},Object(I.jsx)(remote_clusters_form_field_RemoteClustersFormField,{selected:t||null,remoteClusters:e,currentUrl:s,isEditable:l,areErrorsVisible:n,onChange:this.onClusterChange,onError:e=>this.onFieldsErrorChange({remoteCluster:e}),errorMessages:o}))})(),(()=>{const e=!(!i.leaderIndexPatterns||!i.leaderIndexPatterns.message)&&(i.leaderIndexPatterns.alwaysVisible||n),t=s.map((e=>({label:e})));return Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h4",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionLeaderIndexPatternsTitle",defaultMessage:"Leader indices"}))),description:Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionLeaderIndexPatternsDescription1",defaultMessage:"One or more index patterns that identify the indices you want to replicate from the remote cluster. As new indices matching these patterns are created, they are replicated to follower indices on the local cluster."})),Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionLeaderIndexPatternsDescription2",defaultMessage:"{note} Indices that already exist are not replicated.",values:{note:Object(I.jsx)("strong",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionLeaderIndexPatternsDescription2.noteLabel",defaultMessage:"Note:"}))}}))),fullWidth:!0},Object(I.jsx)(L.EuiFormRow,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.fieldLeaderIndexPatternsLabel",defaultMessage:"Index patterns"}),helpText:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.fieldLeaderIndexPatternsHelpLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:Object(I.jsx)("strong",null,He)}}),isInvalid:e,error:i.leaderIndexPatterns&&i.leaderIndexPatterns.message,fullWidth:!0},Object(I.jsx)(L.EuiComboBox,{noSuggestions:!0,placeholder:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternForm.fieldLeaderIndexPatternsPlaceholder",{defaultMessage:"Type and then hit ENTER"}),selectedOptions:t,onCreateOption:this.onCreateLeaderIndexPattern,onChange:this.onLeaderIndexPatternChange,onSearchChange:this.onLeaderIndexPatternInputChange,fullWidth:!0,"data-test-subj":"indexPatternInput"})))})(),(()=>{const e=n&&!!i.followIndexPatternPrefix,t=n&&!!i.followIndexPatternSuffix;return Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h4",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionAutoFollowPatternTitle",defaultMessage:"Follower indices (optional)"}))),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.sectionAutoFollowPatternDescription",defaultMessage:"A custom prefix or suffix to apply to the names of the follower indices so you can more easily identify replicated indices. By default, a follower index has the same name as the leader index."}),fullWidth:!0},Object(I.jsx)(L.EuiFlexGroup,{gutterSize:"s"},Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiFormRow,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.autoFollowPattern.fieldPrefixLabel",defaultMessage:"Prefix"}),error:i.followIndexPatternPrefix,isInvalid:e,fullWidth:!0},Object(I.jsx)(L.EuiFieldText,{isInvalid:e,value:a,onChange:e=>this.onFieldsChange({followIndexPatternPrefix:e.target.value}),fullWidth:!0,"data-test-subj":"prefixInput"}))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiFormRow,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.autoFollowPattern.fieldSuffixLabel",defaultMessage:"Suffix"}),error:i.followIndexPatternSuffix,isInvalid:t,fullWidth:!0},Object(I.jsx)(L.EuiFieldText,{isInvalid:t,value:r,onChange:e=>this.onFieldsChange({followIndexPatternSuffix:e.target.value}),fullWidth:!0,"data-test-subj":"suffixInput"})))),Object(I.jsx)(L.EuiFormHelpText,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.fieldFollowerIndicesHelpLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:Object(I.jsx)("strong",null,Ye)}})),!!s.length&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiSpacer,{size:"m"}),Object(I.jsx)(ze,{prefix:a,suffix:r,leaderIndexPatterns:s})))})()),Object(I.jsx)(L.EuiSpacer,null),(()=>{const{areErrorsVisible:e}=this.state,t=this.isFormValid();return!e||t?null:Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiCallOut,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.validationErrorTitle",defaultMessage:"Fix errors before continuing."}),color:"danger",iconType:"cross","data-test-subj":"formError"}),Object(I.jsx)(L.EuiSpacer,{size:"l"}))})(),this.renderApiErrors(),(()=>{const{apiStatus:e,saveButtonLabel:t}=this.props,{areErrorsVisible:s,isRequestVisible:o}=this.state;if(e===z.a.SAVING)return Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiLoadingSpinner,{size:"l"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiText,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.actions.savingText",defaultMessage:"Saving"}))));const a=s&&!this.isFormValid();return Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(I.jsx)(L.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButton,{color:"success",iconType:"check",onClick:this.sendForm,fill:!0,disabled:a,"data-test-subj":"submitButton"},t)),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{color:"primary",onClick:this.cancelForm},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.cancelButtonLabel",defaultMessage:"Cancel","data-test-subj":"cancelButton"})))),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{onClick:this.toggleRequest},o?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternForm.hideRequestButtonLabel",defaultMessage:"Hide request"}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternFormm.showRequestButtonLabel",defaultMessage:"Show request"}))))})())})),k()(this,"renderLoading",(()=>{const{apiStatus:e}=this.props;return e===z.a.SAVING?Object(I.jsx)(L.EuiOverlayMask,null,Object(I.jsx)(L.EuiLoadingLogo,{logo:"logoKibana",size:"xl"})):null}));const t=void 0===this.props.autoFollowPattern,{route:{location:{search:s}}}=B.reactRouter,a=Object(n.extractQueryParams)(s),r=Ne(this.props.remoteClusters,a.cluster),l=t?((e="")=>({name:"",remoteCluster:e,leaderIndexPatterns:[],followIndexPatternPrefix:"",followIndexPatternSuffix:""}))(r):{...this.props.autoFollowPattern};this.state={autoFollowPattern:l,fieldsErrors:Ge(l),areErrorsVisible:!1,isNew:t,isRequestVisible:!1}}isFormValid(){return Object.values(this.state.fieldsErrors).every((e=>null==e))}renderApiErrors(){const{apiError:e}=this.props;if(e){const t=c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternForm.savingErrorTitle",{defaultMessage:"Can't create auto-follow pattern"});return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(Ae,{title:t,error:e,"data-test-subj":"apiError"}),Object(I.jsx)(L.EuiSpacer,{size:"l"}))}return null}render(){const{autoFollowPattern:e,isRequestVisible:t,isNew:s}=this.state;return Object(I.jsx)(o.Fragment,null,this.renderForm(),this.renderLoading(),t?Object(I.jsx)(auto_follow_pattern_request_flyout_AutoFollowPatternRequestFlyout,{name:e.name,autoFollowPattern:this.getFields(),isNew:s,close:()=>this.setState({isRequestVisible:!1})}):null)}}var Ke=s(3);class auto_follow_pattern_delete_provider_AutoFollowPatternDeleteProviderUi extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isModalOpen:!1,ids:null}),k()(this,"onMouseOverModal",(e=>{e.stopPropagation()})),k()(this,"deleteAutoFollowPattern",(e=>{this.setState({isModalOpen:!0,ids:Object(Ke.a)(e)})})),k()(this,"onConfirm",(()=>{this.props.deleteAutoFollowPattern(this.state.ids),this.setState({isModalOpen:!1,ids:null})})),k()(this,"closeConfirmModal",(()=>{this.setState({isModalOpen:!1})})),k()(this,"renderModal",(()=>{const{ids:e}=this.state,t=1===e.length,s=t?c.i18n.translate("xpack.crossClusterReplication.deleteAutoFollowPattern.confirmModal.deleteSingleTitle",{defaultMessage:"Remove auto-follow pattern '{name}'?",values:{name:e[0]}}):c.i18n.translate("xpack.crossClusterReplication.deleteAutoFollowPattern.confirmModal.deleteMultipleTitle",{defaultMessage:"Remove {count} auto-follow patterns?",values:{count:e.length}});return Object(I.jsx)(L.EuiConfirmModal,{title:s,onCancel:this.closeConfirmModal,onConfirm:this.onConfirm,cancelButtonText:c.i18n.translate("xpack.crossClusterReplication.deleteAutoFollowPattern.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:c.i18n.translate("xpack.crossClusterReplication.deleteAutoFollowPattern.confirmModal.confirmButtonText",{defaultMessage:"Remove"}),onMouseOver:this.onMouseOverModal,"data-test-subj":"deleteAutoFollowPatternConfirmation"},!t&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.deleteAutoFollowPattern.confirmModal.multipleDeletionDescription",defaultMessage:"You are about to remove these auto-follow patterns:"})),Object(I.jsx)("ul",null,e.map((e=>Object(I.jsx)("li",{key:e},e))))))}))}render(){const{children:e}=this.props,{isModalOpen:t}=this.state;return Object(I.jsx)(o.Fragment,null,e(this.deleteAutoFollowPattern),t&&this.renderModal())}}const Qe=Object(l.connect)(void 0,(e=>({deleteAutoFollowPattern:t=>e((e=>Ie({label:xe,scope:`${Ee}-delete`,status:z.a.DELETING,handler:async()=>Object(q.c)(e),onSuccess(e,t,s){if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.removeAction.errorMultipleNotificationTitle",{defaultMessage:"Error removing {count} auto-follow patterns",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.removeAction.errorSingleNotificationTitle",{defaultMessage:"Error removing the '{name}' auto-follow pattern",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsDeleted.length){const o=e.itemsDeleted.length>1?c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.removeAction.successMultipleNotificationTitle",{defaultMessage:"{count} auto-follow patterns were removed",values:{count:e.itemsDeleted.length}}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPattern.removeAction.successSingleNotificationTitle",{defaultMessage:"Auto-follow pattern '{name}' was removed",values:{name:e.itemsDeleted[0]}});Object(S.b)().addSuccess(o);const a=J("detail")(s());e.itemsDeleted.includes(a)&&t(Me(null))}}}))(t))})))(auto_follow_pattern_delete_provider_AutoFollowPatternDeleteProviderUi),Je=({title:e})=>Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiPageHeader,{bottomBorder:!0,pageTitle:Object(I.jsx)("span",{"data-test-subj":"pageTitle"},e),rightSideItems:[Object(I.jsx)(L.EuiButtonEmpty,{size:"s",flush:"right",href:j.apis.createAutoFollowPattern,target:"_blank",iconType:"help","data-test-subj":"docsButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.readDocsAutoFollowPatternButtonLabel",defaultMessage:"Auto-follow pattern docs"}))]}),Object(I.jsx)(L.EuiSpacer,{size:"l"}));var Ze=s(5);class follower_index_pause_provider_FollowerIndexPauseProviderUi extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isModalOpen:!1,indices:[]}),k()(this,"onMouseOverModal",(e=>{e.stopPropagation()})),k()(this,"pauseFollowerIndex",(e=>{this.setState({isModalOpen:!0,indices:Object(Ke.a)(e)})})),k()(this,"onConfirm",(()=>{this.props.pauseFollowerIndex(this.state.indices.map((e=>e.name))),this.setState({isModalOpen:!1,indices:[]}),this.props.onConfirm&&this.props.onConfirm()})),k()(this,"closeConfirmModal",(()=>{this.setState({isModalOpen:!1})})),k()(this,"renderModal",(()=>{const{indices:e}=this.state,t=1===e.length,s=t?c.i18n.translate("xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.pauseSingleTitle",{defaultMessage:"Pause replication to follower index '{name}'?",values:{name:e[0].name}}):c.i18n.translate("xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.pauseMultipleTitle",{defaultMessage:"Pause replication to {count} follower indices?",values:{count:e.length}}),a=e.some((e=>!Object(Ze.a)(e)));return Object(I.jsx)(L.EuiConfirmModal,{title:s,onCancel:this.closeConfirmModal,onConfirm:this.onConfirm,cancelButtonText:c.i18n.translate("xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:a?"danger":"primary",confirmButtonText:c.i18n.translate("xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.confirmButtonText",{defaultMessage:"Pause replication"}),onMouseOver:this.onMouseOverModal,"data-test-subj":"pauseReplicationConfirmation"},a&&Object(I.jsx)("p",null,t?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.singlePauseDescriptionWithSettingWarning",defaultMessage:"Pausing replication to this follower index clears its custom advanced settings."}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.multiplePauseDescriptionWithSettingWarning",defaultMessage:"Pausing replication to a follower index clears its custom advanced settings."})),!t&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.pauseFollowerIndex.confirmModal.multiplePauseDescription",defaultMessage:"Replication will pause on these follower indices:"})),Object(I.jsx)("ul",null,e.map((e=>Object(I.jsx)("li",{key:e.name},e.name))))))}))}render(){const{children:e}=this.props,{isModalOpen:t}=this.state;return Object(I.jsx)(o.Fragment,null,e(this.pauseFollowerIndex),t&&this.renderModal())}}const et=Object(l.connect)(void 0,(e=>({pauseFollowerIndex:t=>e((e=>Ie({label:"FOLLOWER_INDEX_PAUSE",status:z.a.SAVING,scope:ve,handler:async()=>Object(q.m)(e),onSuccess(e,t){if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.pauseAction.errorMultipleNotificationTitle",{defaultMessage:"Error pausing {count} follower indices",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.pauseAction.errorSingleNotificationTitle",{defaultMessage:"Error pausing follower index '{name}'",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsPaused.length){const s=e.itemsPaused.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.pauseAction.successMultipleNotificationTitle",{defaultMessage:"{count} follower indices were paused",values:{count:e.itemsPaused.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.pauseAction.successSingleNotificationTitle",{defaultMessage:"Follower index '{name}' was paused",values:{name:e.itemsPaused[0]}});Object(S.b)().addSuccess(s),t(Le(!0))}}}))(t))})))(follower_index_pause_provider_FollowerIndexPauseProviderUi);class follower_index_resume_provider_FollowerIndexResumeProviderUi extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isModalOpen:!1,ids:null}),k()(this,"onMouseOverModal",(e=>{e.stopPropagation()})),k()(this,"resumeFollowerIndex",(e=>{this.setState({isModalOpen:!0,ids:Object(Ke.a)(e)})})),k()(this,"onConfirm",(()=>{this.props.resumeFollowerIndex(this.state.ids),this.setState({isModalOpen:!1,ids:null}),this.props.onConfirm&&this.props.onConfirm()})),k()(this,"closeConfirmModal",(()=>{this.setState({isModalOpen:!1})})),k()(this,"renderModal",(()=>{const{ids:e}=this.state,t=1===e.length,s=t?c.i18n.translate("xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.resumeSingleTitle",{defaultMessage:"Resume replication to follower index '{name}'?",values:{name:e[0]}}):c.i18n.translate("xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.resumeMultipleTitle",{defaultMessage:"Resume replication to {count} follower indices?",values:{count:e.length}});return Object(I.jsx)(L.EuiConfirmModal,{title:s,onCancel:this.closeConfirmModal,onConfirm:this.onConfirm,cancelButtonText:c.i18n.translate("xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:"primary",confirmButtonText:c.i18n.translate("xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.confirmButtonText",{defaultMessage:"Resume replication"}),onMouseOver:this.onMouseOverModal,"data-test-subj":"resumeReplicationConfirmation"},t?Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.singleResumeDescription",defaultMessage:"Replication resumes using the default advanced settings. To use custom advanced settings, {editLink}.",values:{editLink:Object(I.jsx)(L.EuiLink,O()({},Object(i.reactRouterNavigate)(B._reactRouter.history,B.getFollowerIndexPath(e[0])),{"data-test-subj":"editLink"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.singleResumeEditLink",defaultMessage:"edit the follower index"}))}})):Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.multipleResumeDescriptionWithSettingWarning",defaultMessage:"Replication resumes using the default advanced settings."})),Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.resumeFollowerIndex.confirmModal.multipleResumeDescription",defaultMessage:"Replication will resume on these follower indices:"})),Object(I.jsx)("ul",null,e.map((e=>Object(I.jsx)("li",{key:e},e))))))}))}render(){const{children:e}=this.props,{isModalOpen:t}=this.state;return Object(I.jsx)(o.Fragment,null,e(this.resumeFollowerIndex),t&&this.renderModal())}}const tt=Object(l.connect)(void 0,(e=>({resumeFollowerIndex:t=>e((e=>Ie({label:"FOLLOWER_INDEX_RESUME",status:z.a.SAVING,scope:ve,handler:async()=>Object(q.o)(e),onSuccess(e,t){if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.resumeAction.errorMultipleNotificationTitle",{defaultMessage:"Error resuming {count} follower indices",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.resumeAction.errorSingleNotificationTitle",{defaultMessage:"Error resuming follower index '{name}'",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsResumed.length){const t=e.itemsResumed.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.resumeAction.successMultipleNotificationTitle",{defaultMessage:"{count} follower indices were resumed",values:{count:e.itemsResumed.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.resumeAction.successSingleNotificationTitle",{defaultMessage:"Follower index '{name}' was resumed",values:{name:e.itemsResumed[0]}});Object(S.b)().addSuccess(t)}t(Le(!0))}}))(t))})))(follower_index_resume_provider_FollowerIndexResumeProviderUi);class follower_index_unfollow_provider_FollowerIndexUnfollowProviderUi extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isModalOpen:!1,ids:null}),k()(this,"onMouseOverModal",(e=>{e.stopPropagation()})),k()(this,"unfollowLeaderIndex",(e=>{this.setState({isModalOpen:!0,ids:Object(Ke.a)(e)})})),k()(this,"onConfirm",(()=>{this.props.unfollowLeaderIndex(this.state.ids),this.setState({isModalOpen:!1,ids:null}),this.props.onConfirm&&this.props.onConfirm()})),k()(this,"closeConfirmModal",(()=>{this.setState({isModalOpen:!1})})),k()(this,"renderModal",(()=>{const{ids:e}=this.state,t=1===e.length,s=t?c.i18n.translate("xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.unfollowSingleTitle",{defaultMessage:"Unfollow leader index of '{name}'?",values:{name:e[0]}}):c.i18n.translate("xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.unfollowMultipleTitle",{defaultMessage:"Unfollow {count} leader indices?",values:{count:e.length}});return Object(I.jsx)(L.EuiConfirmModal,{title:s,onCancel:this.closeConfirmModal,onConfirm:this.onConfirm,cancelButtonText:c.i18n.translate("xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:c.i18n.translate("xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.confirmButtonText",{defaultMessage:"Unfollow leader"}),onMouseOver:this.onMouseOverModal,"data-test-subj":"unfollowLeaderConfirmation"},t?Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.singleUnfollowDescription",defaultMessage:"The follower index will be converted to a standard index. It will no longer appear in Cross-Cluster Replication, but you can manage it in Index Management. You can't undo this operation."}))):Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.unfollowLeaderIndex.confirmModal.multipleUnfollowDescription",defaultMessage:"The follower indices will be converted to standard indices. They will no longer appear in Cross-Cluster Replication, but you can manage them in Index Management. You can't undo this operation."})),Object(I.jsx)("ul",null,e.map((e=>Object(I.jsx)("li",{key:e},e))))))}))}render(){const{children:e}=this.props,{isModalOpen:t}=this.state;return Object(I.jsx)(o.Fragment,null,e(this.unfollowLeaderIndex),t&&this.renderModal())}}const st=Object(l.connect)(void 0,(e=>({unfollowLeaderIndex:t=>e((e=>Ie({label:we,status:z.a.DELETING,scope:`${ve}-delete`,handler:async()=>Object(q.q)(e),onSuccess(e,t,s){if(e.errors.length){const t=e.errors.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.errorMultipleNotificationTitle",{defaultMessage:"Error unfollowing leader index of {count} follower indices",values:{count:e.errors.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.errorSingleNotificationTitle",{defaultMessage:"Error unfollowing leader index of follower index '{name}'",values:{name:e.errors[0].id}});Object(S.b)().addDanger(t)}if(e.itemsUnfollowed.length){const t=e.itemsUnfollowed.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.successMultipleNotificationTitle",{defaultMessage:"Leader indices of {count} follower indices were unfollowed",values:{count:e.itemsUnfollowed.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.successSingleNotificationTitle",{defaultMessage:"Leader index of follower index '{name}' was unfollowed",values:{name:e.itemsUnfollowed[0]}});Object(S.b)().addSuccess(t)}if(e.itemsNotOpen.length){const t=e.itemsNotOpen.length>1?c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.notOpenWarningMultipleNotificationTitle",{defaultMessage:"{count} indices could not be re-opened",values:{count:e.itemsNotOpen.length}}):c.i18n.translate("xpack.crossClusterReplication.followerIndex.unfollowAction.notOpenWarningSingleNotificationTitle",{defaultMessage:"Index '{name}' could not be re-opened",values:{name:e.itemsNotOpen[0]}});Object(S.b)().addWarning(t)}const o=oe("detail")(s());e.itemsUnfollowed.includes(o)&&t(_e(null))}}))(t))})))(follower_index_unfollow_provider_FollowerIndexUnfollowProviderUi),ot=e=>Object(I.jsx)(et,null,(t=>Object(I.jsx)(tt,null,(s=>Object(I.jsx)(st,null,(o=>{const{children:a}=e;return a((()=>({pauseFollowerIndex:t,resumeFollowerIndex:s,unfollowLeaderIndex:o})))})))))),at=e=>!e||!e.trim().length,rt=e=>"string"==typeof e&&e.includes(" "),lt=e=>n.indices.INDEX_ILLEGAL_CHARACTERS_VISIBLE.reduce(((t,s)=>(e.includes(s)&&t.push(s),t)),[]),nt=e=>{if(at(e))return[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.errors.nameMissingMessage",defaultMessage:"Name is required."})];if((e=>"."===e[0])(e))return[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.errors.nameBeginsWithPeriodMessage",defaultMessage:"Name can't begin with a period."})];const t=lt(e);return t.length?[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.errors.nameIllegalCharactersMessage",defaultMessage:"Remove the characters {characterList} from your name.",values:{characterList:Object(I.jsx)("strong",null,t.join(" "))}})]:rt(e)?[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.indexNameValidation.noEmptySpace",defaultMessage:"Spaces are not allowed in the name."})]:void 0},it=e=>{if(at(e))return[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.errors.leaderIndexMissingMessage",defaultMessage:"Leader index is required."})];const t=lt(e);return t.length?[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.errors.leaderIndexIllegalCharactersMessage",defaultMessage:"Remove the characters {characterList} from your leader index.",values:{characterList:Object(I.jsx)("strong",null,t.join(" "))}})]:rt(e)?[Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.leaderIndexValidation.noEmptySpace",defaultMessage:"Spaces are not allowed in the leader index."})]:void 0};class form_entry_row_FormEntryRow extends o.PureComponent{constructor(...e){super(...e),k()(this,"onFieldChange",(e=>{const{field:t,onValueUpdate:s,type:o}=this.props;let a=e;"number"===o&&(a=e?Math.max(0,parseInt(e,10)):e),s({[t]:a})})),k()(this,"renderField",(e=>{const{value:t,type:s,disabled:o,isLoading:a,testSubj:r}=this.props;return"number"===s?Object(I.jsx)(L.EuiFieldNumber,{isInvalid:e,value:t,onChange:e=>this.onFieldChange(e.target.value),disabled:!0===o,isLoading:a,fullWidth:!0,"data-test-subj":r}):Object(I.jsx)(L.EuiFieldText,{isInvalid:e,value:t,onChange:e=>this.onFieldChange(e.target.value),disabled:!0===o,isLoading:a,fullWidth:!0,"data-test-subj":r})}))}render(){const{field:e,error:t,title:s,label:a,description:r,helpText:l,areErrorsVisible:n,value:i,defaultValue:c}=this.props,u=!!t&&(t.alwaysVisible||n),d=void 0!==c,p=i!==c,x=Object(I.jsx)(o.Fragment,null,l,d&&p&&Object(I.jsx)("p",null,Object(I.jsx)(L.EuiLink,{onClick:()=>this.onFieldChange(c)},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.resetFieldButtonLabel",defaultMessage:"Reset to default"}))));return Object(I.jsx)(L.EuiDescribedFormGroup,{title:s,description:r,fullWidth:!0,key:e},Object(I.jsx)(L.EuiFormRow,{label:a,helpText:x,error:t&&t.message?t.message:t,isInvalid:u,fullWidth:!0},this.renderField(u)))}}const ct=e=>{const t=Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.byteUnitsHelpText",defaultMessage:"Example values: 10b, 1024kb, 1mb, 5gb, 2tb, 1pb. {link}",values:{link:Object(I.jsx)(L.EuiLink,{href:e.apis.byteSizeUnits,target:"_blank"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.byteUnitsHelpTextLinkMessage",defaultMessage:"Learn more"}))}}),s=Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.timeUnitsHelpText",defaultMessage:"Example values: 2d, 24h, 20m, 30s, 500ms, 10000micros, 80000nanos. {link}",values:{link:Object(I.jsx)(L.EuiLink,{href:e.apis.timeUnits,target:"_blank"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.timeUnitsHelpTextLinkMessage",defaultMessage:"Learn more"}))}});return[{field:"maxReadRequestOperationCount",testSubject:"maxReadRequestOperationCountInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestOperationCountTitle",{defaultMessage:"Max read request operation count"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestOperationCountDescription",{defaultMessage:"The maximum number of operations to pull per read from the remote cluster."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestOperationCountLabel",{defaultMessage:"Max read request operation count"}),defaultValue:Object(Ze.b)("maxReadRequestOperationCount"),type:"number"},{field:"maxOutstandingReadRequests",testSubject:"maxOutstandingReadRequestsInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingReadRequestsTitle",{defaultMessage:"Max outstanding read requests"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingReadRequestsDescription",{defaultMessage:"The maximum number of outstanding read requests from the remote cluster."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingReadRequestsLabel",{defaultMessage:"Max outstanding read requests"}),defaultValue:Object(Ze.b)("maxOutstandingReadRequests"),type:"number"},{field:"maxReadRequestSize",testSubject:"maxReadRequestSizeInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestSizeTitle",{defaultMessage:"Max read request size"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestSizeDescription",{defaultMessage:"The maximum size in bytes of per read of a batch of operations pulled from the remote cluster."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestSizeLabel",{defaultMessage:"Max read request size"}),defaultValue:Object(Ze.b)("maxReadRequestSize"),helpText:t},{field:"maxWriteRequestOperationCount",testSubject:"maxWriteRequestOperationCountInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestOperationCountTitle",{defaultMessage:"Max write request operation count"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestOperationCountDescription",{defaultMessage:"The maximum number of operations per bulk write request executed on the follower."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestOperationCountLabel",{defaultMessage:"Max write request operation count"}),defaultValue:Object(Ze.b)("maxWriteRequestOperationCount"),type:"number"},{field:"maxWriteRequestSize",testSubject:"maxWriteRequestSizeInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestSizeTitle",{defaultMessage:"Max write request size"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestSizeDescription",{defaultMessage:"The maximum total bytes of operations per bulk write request executed on the follower."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestSizeLabel",{defaultMessage:"Max write request size"}),defaultValue:Object(Ze.b)("maxWriteRequestSize"),helpText:t},{field:"maxOutstandingWriteRequests",testSubject:"maxOutstandingWriteRequestsInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingWriteRequestsTitle",{defaultMessage:"Max outstanding write requests"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingWriteRequestsDescription",{defaultMessage:"The maximum number of outstanding write requests on the follower."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingWriteRequestsLabel",{defaultMessage:"Max outstanding write requests"}),defaultValue:Object(Ze.b)("maxOutstandingWriteRequests"),type:"number"},{field:"maxWriteBufferCount",testSubject:"maxWriteBufferCountInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferCountTitle",{defaultMessage:"Max write buffer count"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferCountDescription",{defaultMessage:"The maximum number of operations that can be queued for writing; when this limit is reached, reads from the remote cluster will be deferred until the number of queued operations goes below the limit."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferCountLabel",{defaultMessage:"Max write buffer count"}),defaultValue:Object(Ze.b)("maxWriteBufferCount"),type:"number"},{field:"maxWriteBufferSize",testSubject:"maxWriteBufferSizeInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferSizeTitle",{defaultMessage:"Max write buffer size"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferSizeDescription",{defaultMessage:"The maximum total bytes of operations that can be queued for writing; when this limit is reached, reads from the remote cluster will be deferred until the total bytes of queued operations goes below the limit."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferSizeLabel",{defaultMessage:"Max write buffer size"}),defaultValue:Object(Ze.b)("maxWriteBufferSize"),helpText:t},{field:"maxRetryDelay",testSubject:"maxRetryDelayInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxRetryDelayTitle",{defaultMessage:"Max retry delay"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxRetryDelayDescription",{defaultMessage:"The maximum time to wait before retrying an operation that failed exceptionally; an exponential backoff strategy is employed when retrying."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxRetryDelayLabel",{defaultMessage:"Max retry delay"}),defaultValue:Object(Ze.b)("maxRetryDelay"),helpText:s},{field:"readPollTimeout",testSubject:"readPollTimeoutInput",title:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.readPollTimeoutTitle",{defaultMessage:"Read poll timeout"}),description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.readPollTimeoutDescription",{defaultMessage:"The maximum time to wait for new operations on the remote cluster when the follower index is synchronized with the leader index; when the timeout has elapsed, the poll for operations will return to the follower so that it can update some statistics, and then the follower will immediately attempt to read from the leader again."}),label:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.advancedSettings.readPollTimeoutLabel",{defaultMessage:"Read poll timeout"}),defaultValue:Object(Ze.b)("readPollTimeout"),helpText:s}]},ut=e=>ct(e).reduce(((e,t)=>{const{field:s,defaultValue:o}=t;return{...e,[s]:o}}),{}),dt=({maxReadRequestOperationCount:e,maxOutstandingReadRequests:t,maxReadRequestSize:s,maxWriteRequestOperationCount:o,maxWriteRequestSize:a,maxOutstandingWriteRequests:r,maxWriteBufferCount:l,maxWriteBufferSize:n,maxRetryDelay:i,readPollTimeout:c})=>({max_read_request_operation_count:e,max_outstanding_read_requests:t,max_read_request_size:s,max_write_request_operation_count:o,max_write_request_size:a,max_outstanding_write_requests:r,max_write_buffer_count:l,max_write_buffer_size:n,max_retry_delay:i,read_poll_timeout:c});class follower_index_request_flyout_FollowerIndexRequestFlyout extends o.PureComponent{render(){const{name:e,followerIndex:t,close:s}=this.props,o=`PUT /${e||"<followerIndexName>"}/_ccr/follow`,a=JSON.stringify((e=>({remote_cluster:e.remoteCluster,leader_index:e.leaderIndex,...dt(e)}))(t),null,2),r=`${o}\n${a}`;return Object(I.jsx)(L.EuiFlyout,{maxWidth:480,onClose:s},Object(I.jsx)(L.EuiFlyoutHeader,null,Object(I.jsx)(L.EuiTitle,null,Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.requestFlyout.title",defaultMessage:"Request"})))),Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)(L.EuiText,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.requestFlyout.descriptionText",defaultMessage:"This Elasticsearch request will create this follower index."}))),Object(I.jsx)(L.EuiSpacer,null),Object(I.jsx)(L.EuiCodeBlock,{language:"json",isCopyable:!0},r)),Object(I.jsx)(L.EuiFlyoutFooter,null,Object(I.jsx)(L.EuiButtonEmpty,{iconType:"cross",onClick:s,flush:"left"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.requestFlyout.closeButtonLabel",defaultMessage:"Close"}))))}}const pt=n.indices.INDEX_ILLEGAL_CHARACTERS_VISIBLE.join(" "),xt=(e="")=>({name:"",remoteCluster:e,leaderIndex:"",...ut(j)}),mt=e=>({fieldsErrors:t})=>({fieldsErrors:{...t,...e}});class follower_index_form_FollowerIndexForm extends o.PureComponent{constructor(e){super(e),k()(this,"toggleRequest",(()=>{this.setState((({isRequestVisible:e})=>({isRequestVisible:!e})))})),k()(this,"onFieldsChange",(e=>{this.setState((e=>({followerIndex:t})=>({followerIndex:{...t,...e}}))(e));const t={...this.state.fields,...e};this.setState(mt(this.getFieldsErrors(t))),this.props.apiError&&this.props.clearApiError()})),k()(this,"getFieldsErrors",(e=>Object.keys(e).reduce(((t,s)=>{const o=(a=ct(j),a.reduce(((e,t)=>{const{field:s,validator:o}=t;return e[s]=o,e}),{name:nt,leaderIndex:it}))[s];var a;const r=e[s];if(o){const e=o(r);t[s]=e}return t}),{}))),k()(this,"onIndexNameChange",(({name:e})=>{this.onFieldsChange({name:e}),nt(e)||(e&&e.trim()?(this.setState({isValidatingIndexName:!0}),this.validateIndexName(e)):this.setState({isValidatingIndexName:!1}))})),k()(this,"validateIndexName",(async e=>{try{if((await Object(q.i)()).some((t=>t.name===e))){const e={message:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.indexAlreadyExistError",defaultMessage:"An index with the same name already exists."}),alwaysVisible:!0};this.setState(mt({name:e}))}this.setState({isValidatingIndexName:!1})}catch(e){if(e){if("AbortError"===e.name)return;if(e.body)return this.setState({isValidatingIndexName:!1})}Object(S.a)().add(e,c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.indexNameValidationFatalErrorTitle",{defaultMessage:"Follower Index Form index name validation"}))}})),k()(this,"onClusterChange",(e=>{this.onFieldsChange({remoteCluster:e})})),k()(this,"getFields",(()=>this.state.followerIndex)),k()(this,"toggleAdvancedSettings",(e=>{if(e.target.checked)return this.onFieldsChange(this.cachedAdvancedSettings),this.cachedAdvancedSettings={},this.setState({areAdvancedSettingsVisible:!0});this.onFieldsChange(ut(j));const t=this.getFields();this.cachedAdvancedSettings=ct(j).reduce(((e,{field:s})=>{const o=t[s];return""!==o&&(e[s]=o),e}),{}),this.setState({areAdvancedSettingsVisible:!1})})),k()(this,"sendForm",(()=>{const e=this.isFormValid();if(this.setState({areErrorsVisible:!e}),!e)return;const{name:t,...s}=this.getFields();this.props.saveFollowerIndex(t,s)})),k()(this,"cancelForm",(()=>{B.navigate("/follower_indices")})),k()(this,"renderForm",(()=>{const{followerIndex:e,isNew:t,areErrorsVisible:s,areAdvancedSettingsVisible:a,fieldsErrors:r,isValidatingIndexName:l}=this.state,n=Object(I.jsx)(o.Fragment,null,l&&Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.indexNameValidatingLabel",defaultMessage:"Checking availability…"})),Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.indexNameHelpLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:Object(I.jsx)("strong",null,pt)}}))),i=c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.sectionFollowerIndexNameTitle",{defaultMessage:"Follower index"}),u=c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.sectionLeaderIndexTitle",{defaultMessage:"Leader index"});return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiForm,{"data-test-subj":"followerIndexForm"},(()=>{const{remoteClusters:o,currentUrl:a}=this.props,r={noClusterFound:()=>Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.emptyRemoteClustersCallOutDescription",defaultMessage:"Replication requires a leader index on a remote cluster."}),remoteClusterNotConnectedNotEditable:e=>({title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.currentRemoteClusterNotConnectedCallOutTitle",defaultMessage:"Can't edit follower index because remote cluster '{name}' is not connected",values:{name:e}}),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.currentRemoteClusterNotConnectedCallOutDescription",defaultMessage:"You can address this by editing the remote cluster."})}),remoteClusterDoesNotExist:e=>Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.currentRemoteClusterNotFoundCallOutDescription",defaultMessage:"To edit this follower index, you must add a remote cluster named '{name}'.",values:{name:e}})};return Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.sectionRemoteClusterTitle",defaultMessage:"Remote cluster"}))),description:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.sectionRemoteClusterDescription",defaultMessage:"The cluster that contains the index to replicate."}),fullWidth:!0},Object(I.jsx)(remote_clusters_form_field_RemoteClustersFormField,{selected:e.remoteCluster?e.remoteCluster:null,remoteClusters:o||[],currentUrl:a,isEditable:t,areErrorsVisible:s,onChange:this.onClusterChange,onError:e=>{this.setState(mt({remoteCluster:e}))},errorMessages:r}))})(),(()=>Object(I.jsx)(form_entry_row_FormEntryRow,{field:"leaderIndex",value:e.leaderIndex,error:r.leaderIndex,title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h2",null,u)),label:u,description:Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.sectionLeaderIndexDescription",defaultMessage:"The index on the remote cluster to replicate to the follower index."})),Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.sectionLeaderIndexDescription2",defaultMessage:"{note} The leader index must already exist.",values:{note:Object(I.jsx)("strong",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.sectionLeaderIndexDescription2.noteLabel",defaultMessage:"Note:"}))}}))),helpText:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.indexNameHelpLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:Object(I.jsx)("strong",null,pt)}}),disabled:!t,areErrorsVisible:s,onValueUpdate:this.onFieldsChange,testSubj:"leaderIndexInput"}))(),(()=>Object(I.jsx)(form_entry_row_FormEntryRow,{field:"name",value:e.name,error:r.name,title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h2",null,i)),label:i,description:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.sectionFollowerIndexNameDescription",{defaultMessage:"A unique name for your index."}),helpText:n,isLoading:l,disabled:!t,areErrorsVisible:s,onValueUpdate:this.onIndexNameChange,testSubj:"followerIndexInput"}))(),Object(I.jsx)(L.EuiSpacer,{size:"s"}),(()=>Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiHorizontalRule,null),Object(I.jsx)(L.EuiDescribedFormGroup,{title:Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettingsTitle",defaultMessage:"Advanced settings (optional)"}))),description:Object(I.jsx)(o.Fragment,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettingsDescription",defaultMessage:"Advanced settings control the rate of replication. You can customize these settings or use the default values."})),Object(I.jsx)(L.EuiSwitch,{label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.advancedSettingsForm.showSwitchLabel",defaultMessage:"Customize advanced settings"}),checked:a,onChange:this.toggleAdvancedSettings,"data-test-subj":"advancedSettingsToggle"})),fullWidth:!0},Object(I.jsx)(o.Fragment,null)," "),a&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiSpacer,{size:"s"}),ct(j).map((t=>{const{field:o,testSubject:a,title:l,description:n,label:i,helpText:c,defaultValue:u,type:d}=t;return Object(I.jsx)(form_entry_row_FormEntryRow,{key:o,field:o,value:e[o],defaultValue:u,error:r[o],title:Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)("h3",null,l)),description:n,label:i,helpText:c,type:d,areErrorsVisible:s,onValueUpdate:this.onFieldsChange,testSubj:a})}))),Object(I.jsx)(L.EuiHorizontalRule,null)))()),(()=>{const{areErrorsVisible:e}=this.state,t=this.isFormValid();return!e||t?null:Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiCallOut,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.validationErrorTitle",defaultMessage:"Fix errors before continuing."}),color:"danger",iconType:"cross","data-test-subj":"formError"}),Object(I.jsx)(L.EuiSpacer,{size:"l"}))})(),this.renderApiErrors(),(()=>{const{apiStatus:e,saveButtonLabel:t}=this.props,{areErrorsVisible:s,isRequestVisible:o}=this.state;if(e===z.a.SAVING)return Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiLoadingSpinner,{size:"l"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiText,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.actions.savingText",defaultMessage:"Saving"}))));const a=s&&!this.isFormValid();return Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(I.jsx)(L.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButton,{color:"success",iconType:"check",onClick:this.sendForm,fill:!0,disabled:a,"data-test-subj":"submitButton"},t)),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{color:"primary",onClick:this.cancelForm,"data-test-subj":"cancelButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.cancelButtonLabel",defaultMessage:"Cancel"})))),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{onClick:this.toggleRequest},o?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.hideRequestButtonLabel",defaultMessage:"Hide request"}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.showRequestButtonLabel",defaultMessage:"Show request"}))))})())})),k()(this,"renderLoading",(()=>{const{apiStatus:e}=this.props;return e===z.a.SAVING?Object(I.jsx)(L.EuiOverlayMask,null,Object(I.jsx)(L.EuiLoadingLogo,{logo:"logoKibana",size:"xl"})):null}));const{route:{location:{search:t}}}=B.reactRouter,s=Object(n.extractQueryParams)(t),a=void 0===this.props.followerIndex,r=Ne(this.props.remoteClusters,s.cluster),l=a?xt(r):{...xt(),...this.props.followerIndex},i=!a&&(u=l,!!ct(d=j).some((e=>{const{field:t}=e;return u[t]!==ut(d)[t]})));var u,d;const p=this.getFieldsErrors(l);this.state={isNew:a,followerIndex:l,fieldsErrors:p,areErrorsVisible:!1,areAdvancedSettingsVisible:i,isValidatingIndexName:!1,isRequestVisible:!1},this.cachedAdvancedSettings={},this.validateIndexName=Object(y.debounce)(this.validateIndexName,500,{trailing:!0})}isFormValid(){return Object.values(this.state.fieldsErrors).every((e=>null==e))}renderApiErrors(){const{apiError:e}=this.props;if(e){const t=c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.savingErrorTitle",{defaultMessage:"Can't create follower index"}),{leaderIndex:s}=this.state.followerIndex,a=404===e.status?{data:{message:c.i18n.translate("xpack.crossClusterReplication.followerIndexForm.leaderIndexNotFoundError",{defaultMessage:"The leader index '{leaderIndex}' does not exist.",values:{leaderIndex:s}})}}:e;return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(Ae,{title:t,error:a}),Object(I.jsx)(L.EuiSpacer,{size:"l"}))}return null}render(){const{followerIndex:e,isRequestVisible:t}=this.state;return Object(I.jsx)(o.Fragment,null,this.renderForm(),this.renderLoading(),t?Object(I.jsx)(follower_index_request_flyout_FollowerIndexRequestFlyout,{name:e.name,followerIndex:this.getFields(),close:()=>this.setState({isRequestVisible:!1})}):null)}}const jt=({title:e})=>Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiPageHeader,{bottomBorder:!0,pageTitle:Object(I.jsx)("span",{"data-test-subj":"pageTitle"},e),rightSideItems:[Object(I.jsx)(L.EuiButtonEmpty,{size:"s",flush:"right",href:j.apis.createFollower,target:"_blank",iconType:"help","data-test-subj":"docsButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.readDocsFollowerIndexButtonLabel",defaultMessage:"Follower index docs"}))]}),Object(I.jsx)(L.EuiSpacer,{size:"l"})),ft=c.i18n.translate("xpack.crossClusterReplication.autoFollowActionMenu.autoFollowPatternActionMenuButtonAriaLabel",{defaultMessage:"Auto-follow pattern options"}),bt=({patterns:e,deleteAutoFollowPattern:t,pauseAutoFollowPattern:s,resumeAutoFollowPattern:a,arrowDirection:r,edit:l})=>{const[n,i]=Object(o.useState)(!1),u=(e=>{if(!e.length)return!1;const[t,...s]=e;for(const e of s)if(t!==e)return!1;return!0})(e.filter(Boolean).map((({active:e})=>e))),d=()=>{i(!1)},p=[u?e[0].active?{name:c.i18n.translate("xpack.crossClusterReplication.pauseAutoFollowPatternsLabel",{defaultMessage:"Pause {total, plural, one {replication} other {replications}}",values:{total:e.length}}),icon:Object(I.jsx)(L.EuiIcon,{type:"pause"}),onClick:()=>{s(e.map((({name:e})=>e))),d()}}:{name:c.i18n.translate("xpack.crossClusterReplication.resumeAutoFollowPatternsLabel",{defaultMessage:"Resume {total, plural, one {replication} other {replications}}",values:{total:e.length}}),icon:Object(I.jsx)(L.EuiIcon,{type:"play"}),onClick:()=>{a(e.map((({name:e})=>e))),d()}}:null,l&&1===e.length?{name:c.i18n.translate("xpack.crossClusterReplication.editAutoFollowPatternButtonLabel",{defaultMessage:"Edit pattern"}),icon:Object(I.jsx)(L.EuiIcon,{type:"pencil"}),onClick:()=>{B.navigate(B.getAutoFollowPatternPath(e[0].name))}}:null,{name:c.i18n.translate("xpack.crossClusterReplication.deleteAutoFollowPatternButtonLabel",{defaultMessage:"Delete {total, plural, one {pattern} other {patterns}}",values:{total:e.length}}),icon:Object(I.jsx)(L.EuiIcon,{type:"trash"}),onClick:()=>{t(e.map((({name:e})=>e))),d()}}].filter(Boolean),x=Object(I.jsx)(L.EuiButton,{"data-test-subj":"autoFollowPatternActionMenuButton","aria-label":ft,onClick:()=>i(!n),iconType:"up"===r?"arrowUp":"arrowDown",iconSide:"right",fill:!0},c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternActionMenu.buttonLabel",{defaultMessage:"Manage {patterns, plural, one {pattern} other {patterns}}",values:{patterns:e.length}}));return Object(I.jsx)(L.EuiPopover,{isOpen:n,closePopover:()=>i(!1),button:x,panelPaddingSize:"none",repositionOnScroll:!0},Object(I.jsx)(L.EuiContextMenu,{initialPanelId:0,"data-test-subj":"autoFollowPatternActionContextMenu",panels:[{id:0,title:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternActionMenu.panelTitle",{defaultMessage:"Pattern options"}),items:p}]}))},gt=Object(l.connect)(null,(e=>({pauseAutoFollowPattern:t=>{e(Pe(t))},resumeAutoFollowPattern:t=>{e(ye(t))}})))((e=>Object(I.jsx)(Qe,null,(t=>Object(I.jsx)(bt,O()({},e,{deleteAutoFollowPattern:t})))))),Ot={pause:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.actionPauseDescription",{defaultMessage:"Pause replication"}),resume:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.actionResumeDescription",{defaultMessage:"Resume replication"}),edit:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.actionEditDescription",{defaultMessage:"Edit auto-follow pattern"}),delete:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.actionDeleteDescription",{defaultMessage:"Delete auto-follow pattern"})},wt=(e,t)=>{if(t){const s=t.toLowerCase();return e.filter((e=>{const{name:t="",remoteCluster:o="",followIndexPatternPrefix:a="",followIndexPatternSuffix:r=""}=e,l=t.toLowerCase().includes(s),n=o.toLowerCase().includes(s),i=a.toLowerCase().includes(s),c=r.toLowerCase().includes(s);return l||n||i||c}))}return e};class auto_follow_pattern_table_AutoFollowPatternTable extends o.PureComponent{static getDerivedStateFromProps(e,t){const{autoFollowPatterns:s}=e,{prevAutoFollowPatterns:o,queryText:a}=t;return o!==s?{prevAutoFollowPatterns:s,filteredAutoFollowPatterns:wt(s,a)}:null}constructor(e){super(e),k()(this,"onSearch",(({query:e})=>{const{autoFollowPatterns:t}=this.props,{text:s}=e;this.setState({queryText:s,filteredAutoFollowPatterns:wt(t,s)})})),k()(this,"renderLoading",(()=>{const{apiStatusDelete:e}=this.props;return e===z.a.DELETING?Object(I.jsx)(L.EuiOverlayMask,null,Object(I.jsx)(L.EuiLoadingLogo,{logo:"logoKibana",size:"xl"})):null})),this.state={prevAutoFollowPatterns:e.autoFollowPatterns,selectedItems:[],filteredAutoFollowPatterns:e.autoFollowPatterns,queryText:""}}getTableColumns(e){const{selectAutoFollowPattern:t}=this.props;return[{field:"name",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.nameColumnTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!1,render:e=>Object(I.jsx)(L.EuiLink,{onClick:()=>{Object(ke.c)("click",z.l),t(e)},"data-test-subj":"autoFollowPatternLink"},e)},{field:"active",dataType:"boolean",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.statusTitle",{defaultMessage:"Status"}),render:e=>{const t=e?c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.statusTextActive",{defaultMessage:"Active"}):c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.statusTextPaused",{defaultMessage:"Paused"});return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiHealth,{color:e?"success":"subdued"})," ",t)},sortable:!0},{field:"remoteCluster",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.clusterColumnTitle",{defaultMessage:"Remote cluster"}),truncateText:!0,sortable:!0},{field:"leaderIndexPatterns",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.leaderPatternsColumnTitle",{defaultMessage:"Leader patterns"}),render:e=>e.join(", ")},{field:"followIndexPatternPrefix",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.prefixColumnTitle",{defaultMessage:"Follower index prefix"}),sortable:!0},{field:"followIndexPatternSuffix",name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.suffixColumnTitle",{defaultMessage:"Follower index suffix"}),sortable:!0},{name:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.table.actionsColumnTitle",{defaultMessage:"Actions"}),actions:[{name:Ot.pause,description:Ot.pause,icon:"pause",onClick:e=>this.props.pauseAutoFollowPattern(e.name),available:e=>e.active,"data-test-subj":"contextMenuPauseButton"},{name:Ot.resume,description:Ot.resume,icon:"play",onClick:e=>this.props.resumeAutoFollowPattern(e.name),available:e=>!e.active,"data-test-subj":"contextMenuResumeButton"},{name:Ot.edit,description:Ot.edit,icon:"pencil",onClick:e=>B.navigate(B.getAutoFollowPatternPath(e.name)),"data-test-subj":"contextMenuEditButton"},{name:Ot.delete,description:Ot.delete,icon:"trash",onClick:t=>e(t.name),"data-test-subj":"contextMenuDeleteButton"}],width:"100px"}]}render(){const{selectedItems:e,filteredAutoFollowPatterns:t}=this.state,s={sort:{field:"name",direction:"asc"}},o={initialPageSize:20,pageSizeOptions:[10,20,50]},r={onSelectionChange:e=>this.setState({selectedItems:e.map((({name:e})=>e))})},l={toolsLeft:e.length?Object(I.jsx)(gt,{arrowDirection:"down",patterns:this.state.selectedItems.map((e=>t.find((t=>t.name===e))))}):void 0,toolsRight:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(B._reactRouter.history,"/auto_follow_patterns/add"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createAutoFollowPatternButton"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.addAutoFollowPatternButtonLabel",defaultMessage:"Create an auto-follow pattern"})),onChange:this.onSearch,box:{incremental:!0,"data-test-subj":"autoFollowPatternSearch"}};return Object(I.jsx)(Qe,null,(e=>Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiInMemoryTable,{items:t,itemId:"name",columns:this.getTableColumns(e),search:l,pagination:o,sorting:s,selection:r,isSelectable:!0,rowProps:()=>({"data-test-subj":"row"}),cellProps:(e,t)=>({"data-test-subj":`cell_${t.field}`}),"data-test-subj":"autoFollowPatternListTable"}),this.renderLoading())))}}const ht=z.b.AUTO_FOLLOW_PATTERN,Ft=Object(l.connect)((e=>({apiStatusDelete:G(`${ht}-delete`)(e)})),(e=>({selectAutoFollowPattern:t=>e(Me(t)),pauseAutoFollowPattern:t=>e(Pe(t)),resumeAutoFollowPattern:t=>e(ye(t))})))(auto_follow_pattern_table_AutoFollowPatternTable);var Ct=s(28);class detail_panel_DetailPanel extends o.Component{renderAutoFollowPattern({followIndexPatternPrefix:e,followIndexPatternSuffix:t,remoteCluster:s,leaderIndexPatterns:o,active:r}){return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)("section",null,Object(I.jsx)(L.EuiDescriptionList,null,Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.statusLabel",defaultMessage:"Status"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"status"},r?Object(I.jsx)(L.EuiHealth,{color:"success"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.activeStatus",defaultMessage:"Active"})):Object(I.jsx)(L.EuiHealth,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.pausedStatus",defaultMessage:"Paused"}))))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)("section",{"aria-labelledby":"ccrAutoFollowPatternDetailSettingsTitle","data-test-subj":"settingsSection"},Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h3",{id:"ccrAutoFollowPatternDetailSettingsTitle"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.statusTitle",defaultMessage:"Settings"}))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.remoteClusterLabel",defaultMessage:"Remote cluster"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"remoteCluster"},s))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.leaderPatternsLabel",defaultMessage:"Leader patterns"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"leaderIndexPatterns"},o.join(", "))))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.prefixLabel",defaultMessage:"Prefix"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"patternPrefix"},e||Object(I.jsx)("em",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.prefixEmptyValue",defaultMessage:"No prefix"}))))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.suffixLabel",defaultMessage:"Suffix"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"patternSuffix"},t||Object(I.jsx)("em",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.suffixEmptyValue",defaultMessage:"No suffix"}))))))))}renderIndicesPreview(e,t,s){return Object(I.jsx)("section",{"data-test-subj":"indicesPreviewSection"},Object(I.jsx)(ze,{prefix:e,suffix:t,leaderIndexPatterns:s}))}renderAutoFollowPatternNotFound(){return Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiIcon,{size:"m",type:"warning",color:"danger"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiText,null,Object(I.jsx)(L.EuiTextColor,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.notFoundLabel",defaultMessage:"Auto-follow pattern not found"}))))))}renderAutoFollowPatternErrors(e){return e.errors.length?Object(I.jsx)("section",{"data-test-subj":"errors"},Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiIcon,{type:"warning",color:"danger"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiTitle,{size:"s","data-test-subj":"titleErrors"},Object(I.jsx)("h3",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.recentErrorsTitle",defaultMessage:"Recent errors"}))))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiText,null,Object(I.jsx)("ul",null,e.errors.map(((e,t)=>Object(I.jsx)("li",{key:t,"data-test-subj":"recentError"},Object(I.jsx)("strong",null,qe()(e.timestamp).format("MMMM Do, YYYY h:mm:ss A")),":"," ",e.autoFollowException.reason)))))):null}renderFlyoutBody(){const{autoFollowPattern:e}=this.props;if(!e)return this.renderAutoFollowPatternNotFound();const{followIndexPatternPrefix:t,followIndexPatternSuffix:s,leaderIndexPatterns:o}=e;let a;t?a=`name:${t}`:s&&(a=`name:${s}`);const r=Object(Ct.getIndexListUri)(a);return Object(I.jsx)(L.EuiFlyoutBody,null,this.renderAutoFollowPattern(e),Object(I.jsx)(L.EuiSpacer,{size:"m"}),this.renderIndicesPreview(t,s,o),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)(L.EuiLink,{href:B._reactRouter.getUrlForApp("management",{path:`data/index_management${r}`}),"data-test-subj":"viewIndexManagementLink"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.viewIndicesLink",defaultMessage:"View your follower indices in Index Management"})),Object(I.jsx)(L.EuiSpacer,{size:"l"}),this.renderAutoFollowPatternErrors(e))}renderFlyoutFooter(){const{autoFollowPattern:e,closeDetailPanel:t}=this.props;return Object(I.jsx)(L.EuiFlyoutFooter,null,Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:t,"data-test-subj":"closeFlyoutButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternDetailPanel.closeButtonLabel",defaultMessage:"Close"}))),e&&Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiFlexGroup,{alignItems:"center"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(gt,{edit:!0,arrowDirection:"up",patterns:[e]}))))))}render(){const{autoFollowPatternId:e,closeDetailPanel:t}=this.props;return Object(I.jsx)(L.EuiFlyout,{"data-test-subj":"autoFollowPatternDetail",onClose:t,"aria-labelledby":"autoFollowPatternDetailsFlyoutTitle",size:"m",maxWidth:400},Object(I.jsx)(L.EuiFlyoutHeader,null,Object(I.jsx)(L.EuiTitle,{size:"m",id:"autoFollowPatternDetailsFlyoutTitle","data-test-subj":"title"},Object(I.jsx)("h2",null,e))),this.renderFlyoutBody(),this.renderFlyoutFooter())}}const It=z.b.AUTO_FOLLOW_PATTERN,Et=Object(l.connect)((e=>({autoFollowPatternId:J("detail")(e),autoFollowPattern:Z("detail")(e),apiStatus:G(It)(e)})))(detail_panel_DetailPanel);class auto_follow_pattern_list_AutoFollowPatternList extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{lastAutoFollowPatternId:null,isDetailPanelOpen:!1})}static getDerivedStateFromProps({autoFollowPatternId:e},{lastAutoFollowPatternId:t}){return e!==t?{lastAutoFollowPatternId:e,isDetailPanelOpen:!!e}:null}componentDidMount(){const{loadAutoFollowPatterns:e,loadAutoFollowStats:t,selectAutoFollowPattern:s,history:o}=this.props;Object(ke.c)(ke.a.LOADED,z.g),e(),t(),s((({location:{search:e}})=>{const{pattern:t}=Object(n.extractQueryParams)(e);return t?decodeURIComponent(t):null})(o)),this.interval=setInterval((()=>e(!0)),3e4)}componentDidUpdate(e,t){const{history:s,loadAutoFollowStats:o}=this.props,{lastAutoFollowPatternId:a}=this.state;a!==t.lastAutoFollowPatternId&&(a?(s.replace({search:`?pattern=${encodeURIComponent(a)}`}),o()):s.replace({search:""}))}componentWillUnmount(){clearInterval(this.interval)}renderEmpty(){return Object(I.jsx)(L.EuiPageTemplate.EmptyPrompt,{iconType:"managementApp","data-test-subj":"emptyPrompt",title:Object(I.jsx)("h1",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.emptyPromptTitle",defaultMessage:"Create your first auto-follow pattern"})),body:Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.emptyPromptDescription",defaultMessage:"Use an auto-follow pattern to automatically replicate indices from a remote cluster."})),actions:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(this.props.history,"/auto_follow_patterns/add"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createAutoFollowPatternButton"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.addAutoFollowPatternButtonLabel",defaultMessage:"Create auto-follow pattern"}))})}renderList(){const{selectAutoFollowPattern:e,autoFollowPatterns:t}=this.props,{isDetailPanelOpen:s}=this.state;return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiText,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.autoFollowPatternsDescription",defaultMessage:"An auto-follow pattern replicates leader indices from a remote cluster and copies them to follower indices on the local cluster."}))),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)(Ft,{autoFollowPatterns:t}),s&&Object(I.jsx)(Et,{closeDetailPanel:()=>e(null)}))}render(){const{autoFollowPatterns:e,apiError:t,apiStatus:s,isAuthorized:o}=this.props,a=s===z.a.IDLE&&!e.length;if(!o)return Object(I.jsx)(n.PageError,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.permissionErrorTitle",defaultMessage:"Permission error"}),error:{error:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.noPermissionText",defaultMessage:"You do not have permission to view or add auto-follow patterns."})}});if(t){const e=c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternList.loadingErrorTitle",{defaultMessage:"Error loading auto-follow patterns"});return Object(I.jsx)(n.PageError,{title:e,error:t.body})}return a?this.renderEmpty():s===z.a.LOADING?Object(I.jsx)(n.PageLoading,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.loadingTitle",defaultMessage:"Loading auto-follow patterns..."})):this.renderList()}}const Mt=z.b.AUTO_FOLLOW_PATTERN,Rt=Object(l.connect)((e=>({autoFollowPatterns:ee(e),autoFollowPatternId:J("detail")(e),apiStatus:G(Mt)(e),apiError:H(Mt)(e),isAuthorized:Y(Mt)(e)})),(e=>({loadAutoFollowPatterns:t=>e(((e=!1)=>Ie({label:de,scope:Ee,status:e?z.a.UPDATING:z.a.LOADING,handler:async()=>await Object(q.f)(e)}))(t)),selectAutoFollowPattern:t=>e(Me(t)),loadAutoFollowStats:()=>e(Ie({label:he,scope:Te,handler:async()=>await Object(q.g)()}))})))(auto_follow_pattern_list_AutoFollowPatternList);class context_menu_ContextMenu extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{isPopoverOpen:!1}),k()(this,"onButtonClick",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),k()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})})),k()(this,"editFollowerIndex",(e=>{const t=B.getFollowerIndexPath(e);B.navigate(t)}))}render(){const{followerIndices:e}=this.props,t=e.length,s=e.map((e=>e.name)),{iconSide:a="right",iconType:r="arrowDown",anchorPosition:l="rightUp",label:n=Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.buttonLabel",defaultMessage:"Manage follower {followerIndicesLength, plural, one {index} other {indices}}",values:{followerIndicesLength:t}}),testSubj:i}=this.props,c=Object(I.jsx)(L.EuiButton,{"data-test-subj":i,iconSide:a,onClick:this.onButtonClick,iconType:r,fill:!0},n),u=e.filter((({isPaused:e})=>e)).map((e=>e.name)),d=e.filter((({isPaused:e})=>!e));return Object(I.jsx)(L.EuiPopover,{button:c,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:l,repositionOnScroll:!0},Object(I.jsx)(L.EuiPopoverTitle,{paddingSize:"s"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.title",defaultMessage:"Follower {followerIndicesLength, plural, one {index} other {indices}} options",values:{followerIndicesLength:t}})),Object(I.jsx)(L.EuiContextMenuPanel,{"data-test-subj":"contextMenu"},d.length?Object(I.jsx)(et,{onConfirm:this.closePopover},(e=>Object(I.jsx)(L.EuiContextMenuItem,{icon:"pause",onClick:()=>e(d),"data-test-subj":"pauseButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.pauseLabel",defaultMessage:"Pause replication"})))):null,u.length?Object(I.jsx)(tt,{onConfirm:this.closePopover},(e=>Object(I.jsx)(L.EuiContextMenuItem,{icon:"play",onClick:()=>e(u),"data-test-subj":"resumeButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.resumeLabel",defaultMessage:"Resume replication"})))):null,1===s.length&&Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiContextMenuItem,{icon:"pencil",onClick:()=>this.editFollowerIndex(s[0]),"data-test-subj":"editButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.editLabel","data-test-subj":"editButton",defaultMessage:"Edit follower index"}))),Object(I.jsx)(st,{onConfirm:this.closePopover},(e=>Object(I.jsx)(L.EuiContextMenuItem,{icon:"indexFlush",onClick:()=>e(s),"data-test-subj":"unfollowButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.contextMenu.unfollowLabel",defaultMessage:"Unfollow leader {followerIndicesLength, plural, one {index} other {indices}}",values:{followerIndicesLength:t}}))))))}}const Pt={pause:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.actionPauseDescription",{defaultMessage:"Pause replication"}),resume:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.actionResumeDescription",{defaultMessage:"Resume replication"}),edit:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.actionEditDescription",{defaultMessage:"Edit follower index"}),unfollow:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.actionUnfollowDescription",{defaultMessage:"Unfollow leader index"})},yt=(e,t)=>{if(t){const s=t.toLowerCase();return e.filter((e=>{const{name:t="",remoteCluster:o="",leaderIndex:a=""}=e;return!!t.toLowerCase().includes(s)||!!a.toLowerCase().includes(s)||!!o.toLowerCase().includes(s)}))}return e};class follower_indices_table_FollowerIndicesTable extends o.PureComponent{static getDerivedStateFromProps(e,t){const{followerIndices:s}=e,{prevFollowerIndices:o,queryText:a}=t;return o!==s?{prevFollowerIndices:s,filteredIndices:yt(s,a)}:null}constructor(e){super(e),k()(this,"onSearch",(({query:e})=>{const{followerIndices:t}=this.props,{text:s}=e;this.setState({queryText:s,filteredIndices:yt(t,s)})})),k()(this,"editFollowerIndex",(e=>{const t=B.getFollowerIndexPath(e);B.navigate(t)})),k()(this,"renderLoading",(()=>{const{apiStatusDelete:e}=this.props;return e===z.a.DELETING?Object(I.jsx)(L.EuiOverlayMask,null,Object(I.jsx)(L.EuiLoadingLogo,{logo:"logoKibana",size:"xl"})):null})),this.state={prevFollowerIndices:e.followerIndices,selectedItems:[],filteredIndices:e.followerIndices,queryText:""}}getTableColumns(e){const{selectFollowerIndex:t}=this.props,s=[{name:Pt.pause,description:Pt.pause,icon:"pause",onClick:t=>e.pauseFollowerIndex(t),available:e=>!e.isPaused,"data-test-subj":"pauseButton"},{name:Pt.resume,description:Pt.resume,icon:"play",onClick:t=>e.resumeFollowerIndex(t.name),available:e=>e.isPaused,"data-test-subj":"resumeButton"},{name:Pt.edit,description:Pt.edit,onClick:e=>this.editFollowerIndex(e.name),icon:"pencil","data-test-subj":"editButton"},{name:Pt.unfollow,description:Pt.unfollow,onClick:t=>e.unfollowLeaderIndex(t.name),icon:"indexFlush","data-test-subj":"unfollowButton"}];return[{field:"name",name:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.nameColumnTitle",{defaultMessage:"Name"}),sortable:!0,truncateText:!1,render:e=>Object(I.jsx)(L.EuiLink,{onClick:()=>{Object(ke.c)("click",z.t),t(e)},"data-test-subj":"followerIndexLink"},e)},{field:"isPaused",name:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.statusColumnTitle",{defaultMessage:"Status"}),truncateText:!0,sortable:!0,render:e=>e?Object(I.jsx)(L.EuiHealth,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.table.statusColumn.pausedLabel",defaultMessage:"Paused"})):Object(I.jsx)(L.EuiHealth,{color:"success"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.table.statusColumn.activeLabel",defaultMessage:"Active"}))},{field:"remoteCluster",name:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.clusterColumnTitle",{defaultMessage:"Remote cluster"}),truncateText:!0,sortable:!0},{field:"leaderIndex",name:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.leaderIndexColumnTitle",{defaultMessage:"Leader index"}),truncateText:!0,sortable:!0},{name:c.i18n.translate("xpack.crossClusterReplication.followerIndexList.table.actionsColumnTitle",{defaultMessage:"Actions"}),actions:s,width:"100px"}]}render(){const{selectedItems:e,filteredIndices:t}=this.state,s={sort:{field:"name",direction:"asc"}},o={initialPageSize:20,pageSizeOptions:[10,20,50]},r={onSelectionChange:e=>this.setState({selectedItems:e})},l={toolsLeft:e.length?Object(I.jsx)(context_menu_ContextMenu,{followerIndices:e,testSubj:"contextMenuButton"}):void 0,toolsRight:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(B._reactRouter.history,"/follower_indices/add"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createFollowerIndexButton"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.addFollowerButtonLabel",defaultMessage:"Create a follower index"})),onChange:this.onSearch,box:{incremental:!0,"data-test-subj":"followerIndexSearch"}};return Object(I.jsx)(ot,null,(e=>{const n=e();return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiInMemoryTable,{items:t,itemId:"name",columns:this.getTableColumns(n),search:l,pagination:o,sorting:s,selection:r,isSelectable:!0,rowProps:()=>({"data-test-subj":"row"}),cellProps:(e,t)=>({"data-test-subj":`cell-${t.field}`}),"data-test-subj":"followerIndexListTable"}),this.renderLoading())}))}}const vt=z.b.FOLLOWER_INDEX,_t=Object(l.connect)((e=>({apiStatusDelete:G(`${vt}-delete`)(e)})),(e=>({selectFollowerIndex:t=>e(_e(t))})))(follower_indices_table_FollowerIndicesTable);s(42),s(43);class detail_panel_detail_panel_DetailPanel extends o.Component{renderFollowerIndex(){const{followerIndex:{remoteCluster:e,leaderIndex:t,isPaused:s,shards:r,maxReadRequestOperationCount:l,maxOutstandingReadRequests:n,maxReadRequestSize:i,maxWriteRequestOperationCount:c,maxWriteRequestSize:u,maxOutstandingWriteRequests:d,maxWriteBufferCount:p,maxWriteBufferSize:x,maxRetryDelay:m,readPollTimeout:j}}=this.props;return Object(I.jsx)(o.Fragment,null,Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)("section",null,Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,null,Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.statusLabel",defaultMessage:"Status"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"status"},s?Object(I.jsx)(L.EuiHealth,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.pausedStatus",defaultMessage:"Paused"})):Object(I.jsx)(L.EuiHealth,{color:"success"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.activeStatus",defaultMessage:"Active"})))))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,null,Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.remoteClusterLabel",defaultMessage:"Remote cluster"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"remoteCluster"},e))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,null,Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.leaderIndexLabel",defaultMessage:"Leader index"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"leaderIndex"},t))))),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)("section",{"aria-labelledby":"ccrFollowerIndexDetailSettingsTitle","data-test-subj":"settingsSection"},Object(I.jsx)(L.EuiTitle,{size:"s"},Object(I.jsx)("h3",{id:"ccrFollowerIndexDetailSettingsTitle"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.settingsTitle",defaultMessage:"Settings"}))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),s?Object(I.jsx)(L.EuiCallOut,{size:"s",title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.pausedFollowerCalloutTitle",defaultMessage:"A paused follower index does not have settings or shard statistics."})}):Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestOperationCountTitle",defaultMessage:"Max read request operation count"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxReadReqOpCount"},l))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingReadRequestsTitle",defaultMessage:"Max outstanding read requests"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxOutstandingReadReq"},n)))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxReadRequestSizeTitle",defaultMessage:"Max read request size"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxReadReqSize"},i))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestOperationCountTitle",defaultMessage:"Max write request operation count"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxWriteReqOpCount"},c)))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteRequestSizeTitle",defaultMessage:"Max write request size"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxWriteReqSize"},u))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxOutstandingWriteRequestsTitle",defaultMessage:"Max outstanding write requests"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxOutstandingWriteReq"},d)))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferCountTitle",defaultMessage:"Max write buffer count"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxWriteBufferCount"},p))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxWriteBufferSizeTitle",defaultMessage:"Max write buffer size"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxWriteBufferSize"},x)))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.maxRetryDelayTitle",defaultMessage:"Max retry delay"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"maxRetryDelay"},m))),Object(I.jsx)(L.EuiFlexItem,null,Object(I.jsx)(L.EuiDescriptionList,{"data-test-subj":"settingsValues"},Object(I.jsx)(L.EuiDescriptionListTitle,null,Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexForm.advancedSettings.readPollTimeoutTitle",defaultMessage:"Read poll timeout"}))),Object(I.jsx)(L.EuiDescriptionListDescription,{"data-test-subj":"readPollTimeout"},j)))))),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)("section",{"data-test-subj":"shardsStatsSection"},r&&r.map(((e,t)=>Object(I.jsx)(o.Fragment,{key:t},Object(I.jsx)(L.EuiSpacer,{size:"m"}),Object(I.jsx)(L.EuiTitle,{size:"xs"},Object(I.jsx)("h3",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.shardStatsTitle",defaultMessage:"Shard {id} stats",values:{id:e.id}}))),Object(I.jsx)(L.EuiSpacer,{size:"s"}),Object(I.jsx)(L.EuiCodeBlock,{language:"json","data-test-subj":"shardsStats"},JSON.stringify(e,null,2))))))))}renderContent(){const{apiStatus:e,followerIndex:t}=this.props;return e===z.a.LOADING?Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiLoadingSpinner,{size:"m"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiText,null,Object(I.jsx)(L.EuiTextColor,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.loadingLabel",defaultMessage:"Loading follower index…"})))))):t?this.renderFollowerIndex():Object(I.jsx)(L.EuiFlyoutBody,null,Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiIcon,{size:"m",type:"warning",color:"danger"})),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiText,null,Object(I.jsx)(L.EuiTextColor,{color:"subdued"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.notFoundLabel",defaultMessage:"Follower index not found"}))))))}renderFooter(){const{followerIndexId:e,followerIndex:t,closeDetailPanel:s}=this.props,o=Object(Ct.getIndexListUri)(`name:${e}`);return Object(I.jsx)(L.EuiFlyoutFooter,null,Object(I.jsx)(L.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:s,"data-test-subj":"closeFlyoutButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.closeButtonLabel",defaultMessage:"Close"}))),Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiFlexGroup,null,Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(L.EuiButton,{href:B._reactRouter.getUrlForApp("management",{path:`data/index_management${o}`}),"data-test-subj":"viewIndexManagementButton"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.viewIndexLink",defaultMessage:"View in Index Management"}))),t&&Object(I.jsx)(L.EuiFlexItem,{grow:!1},Object(I.jsx)(context_menu_ContextMenu,{iconSide:"left",iconType:"arrowUp",anchorPosition:"upRight",label:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexDetailPanel.manageButtonLabel",defaultMessage:"Manage"}),followerIndices:[t],testSubj:"manageButton"}))))))}render(){const{followerIndexId:e,closeDetailPanel:t}=this.props;return Object(I.jsx)(L.EuiFlyout,{"data-test-subj":"followerIndexDetail",onClose:t,"aria-labelledby":"followerIndexDetailsFlyoutTitle",size:"m",maxWidth:600},Object(I.jsx)(L.EuiFlyoutHeader,null,Object(I.jsx)(L.EuiTitle,{size:"m",id:"followerIndexDetailsFlyoutTitle","data-test-subj":"title"},Object(I.jsx)("h2",null,e))),this.renderContent(),this.renderFooter())}}const Lt=z.b.FOLLOWER_INDEX,St=Object(l.connect)((e=>({followerIndexId:oe("detail")(e),followerIndex:ae("detail")(e),apiStatus:G(Lt)(e)})))(detail_panel_detail_panel_DetailPanel);class follower_indices_list_FollowerIndicesList extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{lastFollowerIndexId:null,isDetailPanelOpen:!1})}static getDerivedStateFromProps({followerIndexId:e},{lastFollowerIndexId:t}){return e!==t?{lastFollowerIndexId:e,isDetailPanelOpen:!!e}:null}componentDidMount(){const{loadFollowerIndices:e,selectFollowerIndex:t,history:s}=this.props;Object(ke.c)(ke.a.LOADED,z.o),e(),t((({location:{search:e}})=>{const{name:t}=Object(n.extractQueryParams)(e);return t?decodeURIComponent(t):null})(s)),this.interval=setInterval((()=>e(!0)),3e4)}componentDidUpdate(e,t){const{history:s}=this.props,{lastFollowerIndexId:o}=this.state;o!==t.lastFollowerIndexId&&(o?s.replace({search:`?name=${encodeURIComponent(o)}`}):s.replace({search:""}))}componentWillUnmount(){clearInterval(this.interval)}renderEmpty(){return Object(I.jsx)(L.EuiPageTemplate.EmptyPrompt,{iconType:"managementApp","data-test-subj":"emptyPrompt",title:Object(I.jsx)("h1",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.emptyPromptTitle",defaultMessage:"Create your first follower index"})),body:Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.emptyPromptDescription",defaultMessage:"Use a follower index to replicate a leader index on a remote cluster."})),actions:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(this.props.history,"/follower_indices/add"),{fill:!0,iconType:"plusInCircle","data-test-subj":"createFollowerIndexButton"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.addFollowerButtonLabel",defaultMessage:"Create a follower index"}))})}renderLoading(){return Object(I.jsx)(n.PageLoading,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.loadingTitle",defaultMessage:"Loading follower indices..."}))}renderList(){const{selectFollowerIndex:e,followerIndices:t}=this.props,{isDetailPanelOpen:s}=this.state;return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiText,null,Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.followerIndicesDescription",defaultMessage:"A follower index replicates a leader index on a remote cluster."}))),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)(_t,{followerIndices:t}),s&&Object(I.jsx)(St,{closeDetailPanel:()=>e(null)}))}render(){const{followerIndices:e,apiError:t,isAuthorized:s,apiStatus:o}=this.props,a=o===z.a.IDLE&&!e.length;if(!s)return Object(I.jsx)(n.PageError,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.permissionErrorTitle",defaultMessage:"Permission error"}),error:{error:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexList.noPermissionText",defaultMessage:"You do not have permission to view or add follower indices."})}});if(t){const e=c.i18n.translate("xpack.crossClusterReplication.followerIndexList.loadingErrorTitle",{defaultMessage:"Error loading follower indices"});return Object(I.jsx)(n.PageError,{title:e,error:t.body})}return a?this.renderEmpty():o===z.a.LOADING?this.renderLoading():this.renderList()}}const Tt=z.b.FOLLOWER_INDEX,kt=Object(l.connect)((e=>({followerIndices:re(e),followerIndexId:oe("detail")(e),apiStatus:G(Tt)(e),apiError:H(Tt)(e),isAuthorized:Y(Tt)(e)})),(e=>({loadFollowerIndices:t=>e(Le(t)),selectFollowerIndex:t=>e(_e(t))})))(follower_indices_list_FollowerIndicesList);class home_CrossClusterReplicationHome extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{activeSection:"follower_indices"}),k()(this,"tabs",[{id:"follower_indices",name:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.followerIndicesTitle",defaultMessage:"Follower indices"}),testSubj:"followerIndicesTab"},{id:"auto_follow_patterns",name:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.autoFollowPatternsTitle",defaultMessage:"Auto-follow patterns"}),testSubj:"autoFollowPatternsTab"}]),k()(this,"onSectionChange",(e=>{u([p(`/${e}`)]),B.navigate(`/${e}`)}))}componentDidMount(){u([p()])}static getDerivedStateFromProps(e){const{match:{params:{section:t}}}=e;return{activeSection:t}}render(){return Object(I.jsx)(a.a.Fragment,null,Object(I.jsx)(L.EuiPageHeader,{bottomBorder:!0,pageTitle:Object(I.jsx)("span",{"data-test-subj":"appTitle"},Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternList.crossClusterReplicationTitle",defaultMessage:"Cross-Cluster Replication"})),tabs:this.tabs.map((e=>({onClick:()=>this.onSectionChange(e.id),isSelected:e.id===this.state.activeSection,key:e.id,"data-test-subj":e.testSubj,label:e.name})))}),Object(I.jsx)(L.EuiSpacer,{size:"l"}),Object(I.jsx)(v,null,Object(I.jsx)(E,{exact:!0,path:"/follower_indices",component:kt}),Object(I.jsx)(E,{exact:!0,path:"/auto_follow_patterns",component:Rt})))}}const At=Object(l.connect)((e=>({autoFollowPatterns:ee(e),isAutoFollowApiAuthorized:Y(z.b.AUTO_FOLLOW_PATTERN)(e),followerIndices:re(e),isFollowerIndexApiAuthorized:Y(z.b.FOLLOWER_INDEX)(e)})),null)(home_CrossClusterReplicationHome);class auto_follow_pattern_add_AutoFollowPatternAdd extends o.PureComponent{componentDidMount(){u([p("/auto_follow_patterns"),x])}componentWillUnmount(){this.props.clearApiError()}render(){const{saveAutoFollowPattern:e,apiStatus:t,apiError:s,match:{url:o}}=this.props;return Object(I.jsx)(remote_clusters_provider_RemoteClustersProvider,null,(({isLoading:a,error:r,remoteClusters:l})=>a?Object(I.jsx)(n.SectionLoading,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternCreateForm.loadingRemoteClustersMessage",defaultMessage:"Loading remote clusters…"})):Object(I.jsx)(L.EuiPageSection,{restrictWidth:!0,style:{width:"100%"}},Object(I.jsx)(Je,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.addTitle",defaultMessage:"Add auto-follow pattern"})}),Object(I.jsx)(auto_follow_pattern_form_AutoFollowPatternForm,{apiStatus:t,apiError:s,currentUrl:o,remoteClusters:r?[]:l,saveAutoFollowPattern:e,saveButtonLabel:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternCreateForm.saveButtonLabel",defaultMessage:"Create"})}))))}}const Dt=z.b.AUTO_FOLLOW_PATTERN,Nt=Object(l.connect)((e=>({apiStatus:G(`${Dt}-save`)(e),apiError:H(`${Dt}-save`)(e)})),(e=>({saveAutoFollowPattern:(t,s)=>e(Re(t,s)),clearApiError:()=>e(Ce(Dt))})))(auto_follow_pattern_add_AutoFollowPatternAdd);class auto_follow_pattern_edit_AutoFollowPatternEdit extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{lastAutoFollowPatternId:void 0})}static getDerivedStateFromProps({autoFollowPatternId:e},{lastAutoFollowPatternId:t}){return t!==e?{lastAutoFollowPatternId:e}:null}componentDidMount(){const{match:{params:{id:e}},selectAutoFollowPattern:t}=this.props;t(decodeURIComponent(e)),u([p("/auto_follow_patterns"),m])}componentDidUpdate(e,t){const{autoFollowPattern:s,getAutoFollowPattern:o}=this.props;s||t.lastAutoFollowPatternId===this.state.lastAutoFollowPatternId||o(this.state.lastAutoFollowPatternId)}componentWillUnmount(){this.props.clearApiError()}renderGetAutoFollowPatternError(e){const{match:{params:{id:t}}}=this.props,s=404===e.body.statusCode?{error:c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternEditForm.loadingErrorMessage",{defaultMessage:"The auto-follow pattern '{name}' does not exist.",values:{name:t}})}:e;return Object(I.jsx)(L.EuiPageTemplate.EmptyPrompt,{color:"danger",iconType:"warning",title:Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternEditForm.loadingErrorTitle",defaultMessage:"Error loading auto-follow pattern"})),body:Object(I.jsx)("p",null,s),actions:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(this.props.history,"/auto_follow_patterns"),{color:"danger",flush:"left",iconType:"arrowLeft","data-test-subj":"viewAutoFollowPatternListButton"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternEditForm.viewAutoFollowPatternsButtonLabel",defaultMessage:"View auto-follow patterns"}))})}renderLoading(e){return Object(I.jsx)(n.SectionLoading,null,e)}render(){const{saveAutoFollowPattern:e,apiStatus:t,apiError:s,autoFollowPattern:o,match:{url:a}}=this.props;return t.get!==z.a.LOADING&&o?s.get?this.renderGetAutoFollowPatternError(s.get):Object(I.jsx)(remote_clusters_provider_RemoteClustersProvider,null,(({isLoading:r,error:l,remoteClusters:n})=>r?this.renderLoading(c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternEditForm.loadingRemoteClustersMessage",{defaultMessage:"Loading remote clusters…"})):Object(I.jsx)(L.EuiPageSection,{restrictWidth:!0,style:{width:"100%"}},Object(I.jsx)(Je,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPattern.editTitle",defaultMessage:"Edit auto-follow pattern"})}),Object(I.jsx)(auto_follow_pattern_form_AutoFollowPatternForm,{apiStatus:t.save,apiError:s.save,currentUrl:a,remoteClusters:l?[]:n,autoFollowPattern:o,saveAutoFollowPattern:e,saveButtonLabel:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.autoFollowPatternEditForm.saveButtonLabel",defaultMessage:"Update"})})))):this.renderLoading(c.i18n.translate("xpack.crossClusterReplication.autoFollowPatternEditForm.loadingTitle",{defaultMessage:"Loading auto-follow pattern…"}))}}const Bt=z.b.AUTO_FOLLOW_PATTERN,qt=Object(l.connect)((e=>({apiStatus:{get:G(`${Bt}-get`)(e),save:G(`${Bt}-save`)(e)},apiError:{get:H(`${Bt}-get`)(e),save:H(`${Bt}-save`)(e)},autoFollowPatternId:J("edit")(e),autoFollowPattern:Z("edit")(e)})),(e=>({getAutoFollowPattern:t=>e((e=>Ie({label:pe,scope:`${Ee}-get`,handler:async()=>await Object(q.d)(e)}))(t)),selectAutoFollowPattern:t=>e((e=>({type:ue,payload:e}))(t)),saveAutoFollowPattern:(t,s)=>{const{active:o,remoteCluster:a,leaderIndexPatterns:r,followIndexPattern:l}=s;e(Re(t,{active:o,remoteCluster:a,leaderIndexPatterns:r,followIndexPattern:l},!0))},clearApiError:()=>{e(Ce(`${Bt}-get`)),e(Ce(`${Bt}-save`))}})))(auto_follow_pattern_edit_AutoFollowPatternEdit);class follower_index_add_FollowerIndexAdd extends o.PureComponent{componentDidMount(){u([p("/follower_indices"),x])}componentWillUnmount(){this.props.clearApiError()}render(){const{saveFollowerIndex:e,clearApiError:t,apiStatus:s,apiError:o,match:{url:a}}=this.props;return Object(I.jsx)(remote_clusters_provider_RemoteClustersProvider,null,(({isLoading:r,error:l,remoteClusters:i})=>r?Object(I.jsx)(n.SectionLoading,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexCreateForm.loadingRemoteClustersMessage",defaultMessage:"Loading remote clusters…"})):Object(I.jsx)(L.EuiPageSection,{restrictWidth:!0,style:{width:"100%"}},Object(I.jsx)(jt,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.addTitle",defaultMessage:"Add follower index"})}),Object(I.jsx)(follower_index_form_FollowerIndexForm,{apiStatus:s,apiError:o,currentUrl:a,remoteClusters:l?[]:i,saveFollowerIndex:e,clearApiError:t,saveButtonLabel:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexCreateForm.saveButtonLabel",defaultMessage:"Create"})}))))}}const zt=z.b.FOLLOWER_INDEX,Ut=Object(l.connect)((e=>({apiStatus:G(`${zt}-save`)(e),apiError:H(`${zt}-save`)(e)})),(e=>({saveFollowerIndex:(t,s)=>e(Se(t,s)),clearApiError:()=>e(Ce(`${zt}-save`))})))(follower_index_add_FollowerIndexAdd);class follower_index_edit_FollowerIndexEdit extends o.PureComponent{constructor(...e){super(...e),k()(this,"state",{lastFollowerIndexId:void 0,showConfirmModal:!1}),k()(this,"saveFollowerIndex",((e,t)=>{this.editedFollowerIndexPayload={name:e,followerIndex:t},this.showConfirmModal()})),k()(this,"confirmSaveFollowerIhdex",(()=>{const{name:e,followerIndex:t}=this.editedFollowerIndexPayload;this.props.saveFollowerIndex(e,t),this.closeConfirmModal()})),k()(this,"showConfirmModal",(()=>this.setState({showConfirmModal:!0}))),k()(this,"closeConfirmModal",(()=>this.setState({showConfirmModal:!1}))),k()(this,"renderConfirmModal",(()=>{const{followerIndexId:e,followerIndex:{isPaused:t}}=this.props,s=c.i18n.translate("xpack.crossClusterReplication.followerIndexEditForm.confirmModal.title",{defaultMessage:"Update follower index '{id}'?",values:{id:e}});return Object(I.jsx)(L.EuiConfirmModal,{title:s,onCancel:this.closeConfirmModal,onConfirm:this.confirmSaveFollowerIhdex,cancelButtonText:c.i18n.translate("xpack.crossClusterReplication.followerIndexEditForm.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:t?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.confirmModal.confirmAndResumeButtonText",defaultMessage:"Update and resume"}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.confirmModal.confirmButtonText",defaultMessage:"Update"})},Object(I.jsx)("p",null,t?Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.confirmModal.resumeDescription",defaultMessage:"Updating a follower index resumes replication of its leader index."}):Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.confirmModal.description",defaultMessage:"The follower index is paused, then resumed. If the update fails, try manually resuming replication."})))}))}static getDerivedStateFromProps({followerIndexId:e},{lastFollowerIndexId:t}){return t!==e?{lastFollowerIndexId:e}:null}componentDidMount(){const{match:{params:{id:e}},selectFollowerIndex:t}=this.props;let s;try{s=decodeURI(e),s=decodeURIComponent(s)}catch(t){s=decodeURIComponent(e)}t(s),u([p("/follower_indices"),m])}componentDidUpdate(e,t){const{followerIndex:s,getFollowerIndex:o}=this.props;s||t.lastFollowerIndexId===this.state.lastFollowerIndexId||o(this.state.lastFollowerIndexId)}componentWillUnmount(){this.props.clearApiError()}renderLoading(e){return Object(I.jsx)(n.SectionLoading,null,e)}renderGetFollowerIndexError(e){const{match:{params:{id:t}}}=this.props,s=404===e.body.statusCode?{error:c.i18n.translate("xpack.crossClusterReplication.followerIndexEditForm.loadingErrorMessage",{defaultMessage:"The follower index '{name}' does not exist.",values:{name:t}})}:e;return Object(I.jsx)(L.EuiPageTemplate.EmptyPrompt,{color:"danger",iconType:"warning",title:Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.loadingErrorTitle",defaultMessage:"Error loading follower index"})),body:Object(I.jsx)("p",null,s),actions:Object(I.jsx)(L.EuiButton,O()({},Object(i.reactRouterNavigate)(this.props.history,"/follower_indices"),{color:"danger",flush:"left",iconType:"arrowLeft"}),Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.viewFollowerIndicesButtonLabel",defaultMessage:"View follower indices"}))})}render(){const{clearApiError:e,apiStatus:t,apiError:s,followerIndex:o,match:{url:a}}=this.props,{showConfirmModal:r}=this.state,{shards:l,...n}=o||{};return t.get!==z.a.LOADING&&o?s.get?this.renderGetFollowerIndexError(s.get):Object(I.jsx)(remote_clusters_provider_RemoteClustersProvider,null,(({isLoading:o,error:l,remoteClusters:i})=>o?this.renderLoading(c.i18n.translate("xpack.crossClusterReplication.followerIndexEditForm.loadingRemoteClustersMessage",{defaultMessage:"Loading remote clusters…"})):Object(I.jsx)(L.EuiPageSection,{restrictWidth:!0,style:{width:"100%"}},Object(I.jsx)(jt,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndex.editTitle",defaultMessage:"Edit follower index"})}),Object(I.jsx)(follower_index_form_FollowerIndexForm,{followerIndex:n,apiStatus:t.save,apiError:s.save,currentUrl:a,remoteClusters:l?[]:i,saveFollowerIndex:this.saveFollowerIndex,clearApiError:e,saveButtonLabel:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.followerIndexEditForm.saveButtonLabel",defaultMessage:"Update"})}),r&&this.renderConfirmModal()))):this.renderLoading(c.i18n.translate("xpack.crossClusterReplication.followerIndexEditForm.loadingFollowerIndexTitle",{defaultMessage:"Loading follower index…"}))}}const Wt=z.b.FOLLOWER_INDEX,Vt=Object(l.connect)((e=>({apiStatus:{get:G(`${Wt}-get`)(e),save:G(`${Wt}-save`)(e)},apiError:{get:H(`${Wt}-get`)(e),save:H(`${Wt}-save`)(e)},followerIndexId:oe("edit")(e),followerIndex:ae("edit")(e)})),(e=>({getFollowerIndex:t=>e((e=>Ie({label:Oe,scope:`${ve}-get`,handler:async()=>await Object(q.e)(e)}))(t)),selectFollowerIndex:t=>e((e=>({type:be,payload:e}))(t)),saveFollowerIndex:(t,s)=>e(Se(t,s,!0)),clearApiError:()=>{e(Ce(`${Wt}-get`)),e(Ce(`${Wt}-save`))}})))(follower_index_edit_FollowerIndexEdit);class app_AppComponent extends o.Component{constructor(e){super(e),this.registerRouter(),this.state={isFetchingPermissions:!1,fetchPermissionError:void 0,hasPermission:!1,missingClusterPrivileges:[]}}componentDidMount(){this.checkPermissions()}async checkPermissions(){this.setState({isFetchingPermissions:!0});try{const{hasPermission:e,missingClusterPrivileges:t}=await Object(q.j)();this.setState({isFetchingPermissions:!1,hasPermission:e,missingClusterPrivileges:t})}catch(e){if(e&&e.body)return this.setState({isFetchingPermissions:!1,fetchPermissionError:e});Object(S.a)().add(e,c.i18n.translate("xpack.crossClusterReplication.app.checkPermissionsFatalErrorTitle",{defaultMessage:"Cross-Cluster Replication app"}))}}registerRouter(){const{history:e,getUrlForApp:t}=this.props;B.reactRouter={history:e,route:{location:e.location},getUrlForApp:t}}render(){const{isFetchingPermissions:e,fetchPermissionError:t,hasPermission:s,missingClusterPrivileges:o}=this.state;return e?Object(I.jsx)(n.SectionLoading,null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.app.permissionCheckTitle",defaultMessage:"Checking permissions…"})):t?Object(I.jsx)(n.PageError,{title:Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.app.permissionCheckErrorTitle",defaultMessage:"Error checking permissions"}),error:t}):s?Object(I.jsx)(P,{history:this.props.history},Object(I.jsx)(v,null,Object(I.jsx)(b.Redirect,{exact:!0,from:"/",to:"/follower_indices"}),Object(I.jsx)(E,{exact:!0,path:"/auto_follow_patterns/add",component:Nt}),Object(I.jsx)(E,{exact:!0,path:"/auto_follow_patterns/edit/:id",component:qt}),Object(I.jsx)(E,{exact:!0,path:"/follower_indices/add",component:Ut}),Object(I.jsx)(E,{exact:!0,path:"/follower_indices/edit/:id",component:Vt}),Object(I.jsx)(E,{exact:!0,path:["/:section"],component:At}))):Object(I.jsx)(L.EuiPageTemplate.EmptyPrompt,{iconType:"securityApp",title:Object(I.jsx)("h2",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.app.deniedPermissionTitle",defaultMessage:"You're missing cluster privileges"})),body:Object(I.jsx)("p",null,Object(I.jsx)(_.FormattedMessage,{id:"xpack.crossClusterReplication.app.deniedPermissionDescription",defaultMessage:"To use Cross-Cluster Replication, you must have {clusterPrivilegesCount, plural, one {this cluster privilege} other {these cluster privileges}}: {clusterPrivileges}.",values:{clusterPrivileges:o.join(", "),clusterPrivilegesCount:o.length}}))})}}const $t=app_AppComponent;var Gt=s(29),Ht=s(44),Yt=s.n(Ht);const Xt={status:{[z.b.AUTO_FOLLOW_PATTERN]:z.a.IDLE,[z.b.FOLLOWER_INDEX]:z.a.IDLE},error:{[z.b.AUTO_FOLLOW_PATTERN]:null,[z.b.FOLLOWER_INDEX]:null}},Kt={byId:{},selectedDetailId:null,selectedEditId:null},Qt=e=>`${e}_SUCCESS`,Jt=(e,t,s)=>{const o={...t};return e.forEach((e=>{o[e].active=s})),o},Zt=e=>{const{followIndexPatternPrefix:t,followIndexPatternSuffix:s}=(e=>{let t,s;const o="{{leader_index}}",a=e.indexOf(o);return a>=0&&(t=e.slice(0,a),s=e.slice(a+o.length)),{followIndexPatternPrefix:t,followIndexPatternSuffix:s}})(e.followIndexPattern);return{...e,followIndexPatternPrefix:t,followIndexPatternSuffix:s}},es={byId:{},selectedDetailId:null,selectedEditId:null},ts=e=>`${e}_SUCCESS`,ss=e=>({...e,isPaused:"paused"===e.status}),os=e=>{if(!e.leaderIndex)return null;const{leaderIndex:t,autoFollowException:s,timestamp:o}=e;return{id:t.substring(0,t.lastIndexOf(":")),timestamp:o,leaderIndex:t,autoFollowException:s}},as=(e,t=5)=>e.map(os).filter((e=>null!==e)).reduce(((e,s)=>(e[s.id]||(e[s.id]=[]),e[s.id].length===t||e[s.id].push(s),e)),{}),rs={autoFollow:null},ls=Object(Gt.combineReducers)({autoFollowPattern:(e=Kt,t)=>{switch(t.type){case Qt(de):return{...e,byId:V(t.payload.patterns.map(Zt),"name")};case Qt(pe):return{...e,byId:{...e.byId,[t.payload.name]:Zt(t.payload)}};case ce:return{...e,selectedDetailId:t.payload};case ue:return{...e,selectedEditId:t.payload};case Qt(xe):{const s={...e.byId},{itemsDeleted:o}=t.payload;return o.forEach((e=>delete s[e])),{...e,byId:s}}case Qt(me):{const{itemsPaused:s}=t.payload;return{...e,byId:Jt(s,e.byId,!1)}}case Qt(je):{const{itemsResumed:s}=t.payload;return{...e,byId:Jt(s,e.byId,!0)}}default:return e}},followerIndex:(e=es,t)=>{switch(t.type){case ts(ge):return{...e,byId:V(t.payload.indices.map(ss),"name")};case ts(Oe):return{...e,byId:{...e.byId,[t.payload.name]:ss(t.payload)}};case fe:return{...e,selectedDetailId:t.payload};case be:return{...e,selectedEditId:t.payload};case ts(we):{const s={...e.byId},{itemsUnfollowed:o}=t.payload;return o.forEach((e=>delete s[e])),{...e,byId:s}}default:return e}},api:(e=Xt,t)=>{const s=t.payload||{},{scope:o,status:a,error:r}=s;switch(t.type){case le:return{...e,status:{...e.status,[o]:a}};case ne:return{...e,status:{...e.status,[o]:z.a.IDLE}};case ie:return{...e,error:{...e.error,[o]:r}};default:return e}},stats:(e=rs,t)=>{if(t.type===(e=>`${e}_SUCCESS`)(he)){const{recentAutoFollowErrors:s,...o}=t.payload;return{...e,autoFollow:{...o,recentAutoFollowErrors:as(s)}}}return e}}),ns=function(e={}){const t=[Object(Gt.applyMiddleware)(Yt.a)];return window.__REDUX_DEVTOOLS_EXTENSION__&&t.push(window.__REDUX_DEVTOOLS_EXTENSION__()),Object(Gt.createStore)(ls,e,Object(Gt.compose)(...t))}(),is=({history:e,executionContext:t,getUrlForApp:s})=>(Object(i.useExecutionContext)(t,{type:"application",page:"crossClusterReplication"}),Object(I.jsx)($t,{history:e,getUrlForApp:s})),cs=(e,t,s,o,a,n)=>(Object(r.render)(Object(I.jsx)(t,null,Object(I.jsx)(i.KibanaThemeProvider,{theme$:a},Object(I.jsx)(l.Provider,{store:ns},Object(I.jsx)(is,{history:s,getUrlForApp:o,executionContext:n})))),e),()=>Object(r.unmountComponentAtNode)(e));async function us({element:e,setBreadcrumbs:t,I18nContext:s,docLinks:o,history:a,getUrlForApp:r,theme$:l,executionContext:n}){return d(t),f(o),cs(e,s,a,r,l,n)}}}]);